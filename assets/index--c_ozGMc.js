var jw=t=>{throw TypeError(t)};var Jm=(t,e,n)=>e.has(t)||jw("Cannot "+n);var K=(t,e,n)=>(Jm(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?jw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,r)=>(Jm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ht=(t,e,n)=>(Jm(t,e,"access private method"),n);var Yu=(t,e,n,r)=>({set _(s){Ee(t,e,s,n)},get _(){return K(t,e,r)}});function ZR(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function VE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var FE={exports:{}},xf={},zE={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ou=Symbol.for("react.element"),eP=Symbol.for("react.portal"),tP=Symbol.for("react.fragment"),nP=Symbol.for("react.strict_mode"),rP=Symbol.for("react.profiler"),sP=Symbol.for("react.provider"),iP=Symbol.for("react.context"),oP=Symbol.for("react.forward_ref"),aP=Symbol.for("react.suspense"),lP=Symbol.for("react.memo"),cP=Symbol.for("react.lazy"),Rw=Symbol.iterator;function uP(t){return t===null||typeof t!="object"?null:(t=Rw&&t[Rw]||t["@@iterator"],typeof t=="function"?t:null)}var UE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$E=Object.assign,BE={};function rl(t,e,n){this.props=t,this.context=e,this.refs=BE,this.updater=n||UE}rl.prototype.isReactComponent={};rl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function HE(){}HE.prototype=rl.prototype;function Yy(t,e,n){this.props=t,this.context=e,this.refs=BE,this.updater=n||UE}var Xy=Yy.prototype=new HE;Xy.constructor=Yy;$E(Xy,rl.prototype);Xy.isPureReactComponent=!0;var Pw=Array.isArray,WE=Object.prototype.hasOwnProperty,Jy={current:null},qE={key:!0,ref:!0,__self:!0,__source:!0};function GE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)WE.call(e,r)&&!qE.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ou,type:t,key:i,ref:o,props:s,_owner:Jy.current}}function dP(t,e){return{$$typeof:ou,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zy(t){return typeof t=="object"&&t!==null&&t.$$typeof===ou}function hP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dw=/\/+/g;function Zm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hP(""+t.key):e.toString(36)}function Dd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ou:case eP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Zm(o,0):r,Pw(s)?(n="",t!=null&&(n=t.replace(Dw,"$&/")+"/"),Dd(s,e,n,"",function(u){return u})):s!=null&&(Zy(s)&&(s=dP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Pw(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Zm(i,l);o+=Dd(i,e,n,c,s)}else if(c=uP(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Zm(i,l++),o+=Dd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xu(t,e,n){if(t==null)return t;var r=[],s=0;return Dd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},Md={transition:null},mP={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:Md,ReactCurrentOwner:Jy};function KE(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Xu,forEach:function(t,e,n){Xu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xu(t,function(){e++}),e},toArray:function(t){return Xu(t,function(e){return e})||[]},only:function(t){if(!Zy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=rl;Te.Fragment=tP;Te.Profiler=rP;Te.PureComponent=Yy;Te.StrictMode=nP;Te.Suspense=aP;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mP;Te.act=KE;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$E({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Jy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)WE.call(e,c)&&!qE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ou,type:t.type,key:s,ref:i,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:iP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sP,_context:t},t.Consumer=t};Te.createElement=GE;Te.createFactory=function(t){var e=GE.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:oP,render:t}};Te.isValidElement=Zy;Te.lazy=function(t){return{$$typeof:cP,_payload:{_status:-1,_result:t},_init:fP}};Te.memo=function(t,e){return{$$typeof:lP,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Md.transition;Md.transition={};try{t()}finally{Md.transition=e}};Te.unstable_act=KE;Te.useCallback=function(t,e){return cn.current.useCallback(t,e)};Te.useContext=function(t){return cn.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};Te.useEffect=function(t,e){return cn.current.useEffect(t,e)};Te.useId=function(){return cn.current.useId()};Te.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return cn.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};Te.useRef=function(t){return cn.current.useRef(t)};Te.useState=function(t){return cn.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return cn.current.useTransition()};Te.version="18.3.1";zE.exports=Te;var m=zE.exports;const Se=VE(m),QE=ZR({__proto__:null,default:Se},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pP=m,gP=Symbol.for("react.element"),yP=Symbol.for("react.fragment"),vP=Object.prototype.hasOwnProperty,xP=pP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wP={key:!0,ref:!0,__self:!0,__source:!0};function YE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)vP.call(e,r)&&!wP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:gP,type:t,key:i,ref:o,props:s,_owner:xP.current}}xf.Fragment=yP;xf.jsx=YE;xf.jsxs=YE;FE.exports=xf;var a=FE.exports,XE={exports:{}},Ln={},JE={exports:{}},ZE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,W){var z=L.length;L.push(W);e:for(;0<z;){var U=z-1>>>1,J=L[U];if(0<s(J,W))L[U]=W,L[z]=J,z=U;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var W=L[0],z=L.pop();if(z!==W){L[0]=z;e:for(var U=0,J=L.length,Y=J>>>1;U<Y;){var Q=2*(U+1)-1,te=L[Q],V=Q+1,B=L[V];if(0>s(te,z))V<J&&0>s(B,te)?(L[U]=B,L[V]=z,U=V):(L[U]=te,L[Q]=z,U=Q);else if(V<J&&0>s(B,z))L[U]=B,L[V]=z,U=V;else break e}}return W}function s(L,W){var z=L.sortIndex-W.sortIndex;return z!==0?z:L.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,v=!1,b=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=L)r(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(u)}}function I(L){if(x=!1,S(L),!b)if(n(c)!==null)b=!0,Z(P);else{var W=n(u);W!==null&&X(I,W.startTime-L)}}function P(L,W){b=!1,x&&(x=!1,w(E),E=-1),v=!0;var z=p;try{for(S(W),f=n(c);f!==null&&(!(f.expirationTime>W)||L&&!R());){var U=f.callback;if(typeof U=="function"){f.callback=null,p=f.priorityLevel;var J=U(f.expirationTime<=W);W=t.unstable_now(),typeof J=="function"?f.callback=J:f===n(c)&&r(c),S(W)}else r(c);f=n(c)}if(f!==null)var Y=!0;else{var Q=n(u);Q!==null&&X(I,Q.startTime-W),Y=!1}return Y}finally{f=null,p=z,v=!1}}var D=!1,N=null,E=-1,C=5,k=-1;function R(){return!(t.unstable_now()-k<C)}function M(){if(N!==null){var L=t.unstable_now();k=L;var W=!0;try{W=N(!0,L)}finally{W?A():(D=!1,N=null)}}else D=!1}var A;if(typeof y=="function")A=function(){y(M)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ie=H.port2;H.port1.onmessage=M,A=function(){ie.postMessage(null)}}else A=function(){_(M,0)};function Z(L){N=L,D||(D=!0,A())}function X(L,W){E=_(function(){L(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){b||v||(b=!0,Z(P))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var z=p;p=W;try{return L()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,W){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=p;p=L;try{return W()}finally{p=z}},t.unstable_scheduleCallback=function(L,W,z){var U=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?U+z:U):z=U,L){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,L={id:h++,callback:W,priorityLevel:L,startTime:z,expirationTime:J,sortIndex:-1},z>U?(L.sortIndex=z,e(u,L),n(c)===null&&L===n(u)&&(x?(w(E),E=-1):x=!0,X(I,z-U))):(L.sortIndex=J,e(c,L),b||v||(b=!0,Z(P))),L},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(L){var W=p;return function(){var z=p;p=W;try{return L.apply(this,arguments)}finally{p=z}}}})(ZE);JE.exports=ZE;var bP=JE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _P=m,On=bP;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eS=new Set,bc={};function Mo(t,e){Ma(t,e),Ma(t+"Capture",e)}function Ma(t,e){for(bc[t]=e,t=0;t<e.length;t++)eS.add(e[t])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ig=Object.prototype.hasOwnProperty,EP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mw={},Ow={};function SP(t){return ig.call(Ow,t)?!0:ig.call(Mw,t)?!1:EP.test(t)?Ow[t]=!0:(Mw[t]=!0,!1)}function TP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NP(t,e,n,r){if(e===null||typeof e>"u"||TP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var ev=/[\-:]([a-z])/g;function tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ev,tv);$t[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ev,tv);$t[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ev,tv);$t[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function nv(t,e,n,r){var s=$t.hasOwnProperty(e)?$t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NP(e,n,s,r)&&(n=null),r||s===null?SP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ns=_P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ju=Symbol.for("react.element"),Jo=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),rv=Symbol.for("react.strict_mode"),og=Symbol.for("react.profiler"),tS=Symbol.for("react.provider"),nS=Symbol.for("react.context"),sv=Symbol.for("react.forward_ref"),ag=Symbol.for("react.suspense"),lg=Symbol.for("react.suspense_list"),iv=Symbol.for("react.memo"),Hs=Symbol.for("react.lazy"),rS=Symbol.for("react.offscreen"),Lw=Symbol.iterator;function Ol(t){return t===null||typeof t!="object"?null:(t=Lw&&t[Lw]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,ep;function ql(t){if(ep===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ep=e&&e[1]||""}return`
`+ep+t}var tp=!1;function np(t,e){if(!t||tp)return"";tp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{tp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ql(t):""}function CP(t){switch(t.tag){case 5:return ql(t.type);case 16:return ql("Lazy");case 13:return ql("Suspense");case 19:return ql("SuspenseList");case 0:case 2:case 15:return t=np(t.type,!1),t;case 11:return t=np(t.type.render,!1),t;case 1:return t=np(t.type,!0),t;default:return""}}function cg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zo:return"Fragment";case Jo:return"Portal";case og:return"Profiler";case rv:return"StrictMode";case ag:return"Suspense";case lg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case nS:return(t.displayName||"Context")+".Consumer";case tS:return(t._context.displayName||"Context")+".Provider";case sv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case iv:return e=t.displayName||null,e!==null?e:cg(t.type)||"Memo";case Hs:e=t._payload,t=t._init;try{return cg(t(e))}catch{}}return null}function IP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cg(e);case 8:return e===rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function sS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kP(t){var e=sS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zu(t){t._valueTracker||(t._valueTracker=kP(t))}function iS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=sS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ch(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ug(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function oS(t,e){e=e.checked,e!=null&&nv(t,"checked",e,!1)}function dg(t,e){oS(t,e);var n=bi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hg(t,e.type,n):e.hasOwnProperty("defaultValue")&&hg(t,e.type,bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hg(t,e,n){(e!=="number"||ch(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gl=Array.isArray;function da(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function fg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Gl(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bi(n)}}function aS(t,e){var n=bi(e.value),r=bi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Uw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ed,cS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ed=ed||document.createElement("div"),ed.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ed.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _c(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AP=["Webkit","ms","Moz","O"];Object.keys(tc).forEach(function(t){AP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),tc[e]=tc[t]})});function uS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||tc.hasOwnProperty(t)&&tc[t]?(""+e).trim():e+"px"}function dS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=uS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var jP=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pg(t,e){if(e){if(jP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function gg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yg=null;function ov(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vg=null,ha=null,fa=null;function $w(t){if(t=cu(t)){if(typeof vg!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Sf(e),vg(t.stateNode,t.type,e))}}function hS(t){ha?fa?fa.push(t):fa=[t]:ha=t}function fS(){if(ha){var t=ha,e=fa;if(fa=ha=null,$w(t),e)for(t=0;t<e.length;t++)$w(e[t])}}function mS(t,e){return t(e)}function pS(){}var rp=!1;function gS(t,e,n){if(rp)return t(e,n);rp=!0;try{return mS(t,e,n)}finally{rp=!1,(ha!==null||fa!==null)&&(pS(),fS())}}function Ec(t,e){var n=t.stateNode;if(n===null)return null;var r=Sf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var xg=!1;if(ps)try{var Ll={};Object.defineProperty(Ll,"passive",{get:function(){xg=!0}}),window.addEventListener("test",Ll,Ll),window.removeEventListener("test",Ll,Ll)}catch{xg=!1}function RP(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var nc=!1,uh=null,dh=!1,wg=null,PP={onError:function(t){nc=!0,uh=t}};function DP(t,e,n,r,s,i,o,l,c){nc=!1,uh=null,RP.apply(PP,arguments)}function MP(t,e,n,r,s,i,o,l,c){if(DP.apply(this,arguments),nc){if(nc){var u=uh;nc=!1,uh=null}else throw Error(ee(198));dh||(dh=!0,wg=u)}}function Oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function yS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Bw(t){if(Oo(t)!==t)throw Error(ee(188))}function OP(t){var e=t.alternate;if(!e){if(e=Oo(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Bw(s),t;if(i===r)return Bw(s),e;i=i.sibling}throw Error(ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function vS(t){return t=OP(t),t!==null?xS(t):null}function xS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xS(t);if(e!==null)return e;t=t.sibling}return null}var wS=On.unstable_scheduleCallback,Hw=On.unstable_cancelCallback,LP=On.unstable_shouldYield,VP=On.unstable_requestPaint,pt=On.unstable_now,FP=On.unstable_getCurrentPriorityLevel,av=On.unstable_ImmediatePriority,bS=On.unstable_UserBlockingPriority,hh=On.unstable_NormalPriority,zP=On.unstable_LowPriority,_S=On.unstable_IdlePriority,wf=null,$r=null;function UP(t){if($r&&typeof $r.onCommitFiberRoot=="function")try{$r.onCommitFiberRoot(wf,t,void 0,(t.current.flags&128)===128)}catch{}}var dr=Math.clz32?Math.clz32:HP,$P=Math.log,BP=Math.LN2;function HP(t){return t>>>=0,t===0?32:31-($P(t)/BP|0)|0}var td=64,nd=4194304;function Kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Kl(l):(i&=o,i!==0&&(r=Kl(i)))}else o=n&~s,o!==0?r=Kl(o):i!==0&&(r=Kl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dr(e),s=1<<n,r|=t[n],e&=~s;return r}function WP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-dr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=WP(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function bg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ES(){var t=td;return td<<=1,!(td&4194240)&&(td=64),t}function sp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function au(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dr(e),t[e]=n}function GP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-dr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function lv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function SS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var TS,cv,NS,CS,IS,_g=!1,rd=[],ai=null,li=null,ci=null,Sc=new Map,Tc=new Map,Gs=[],KP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ww(t,e){switch(t){case"focusin":case"focusout":ai=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":Sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tc.delete(e.pointerId)}}function Vl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=cu(e),e!==null&&cv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function QP(t,e,n,r,s){switch(e){case"focusin":return ai=Vl(ai,t,e,n,r,s),!0;case"dragenter":return li=Vl(li,t,e,n,r,s),!0;case"mouseover":return ci=Vl(ci,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Sc.set(i,Vl(Sc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Tc.set(i,Vl(Tc.get(i)||null,t,e,n,r,s)),!0}return!1}function kS(t){var e=io(t.target);if(e!==null){var n=Oo(e);if(n!==null){if(e=n.tag,e===13){if(e=yS(n),e!==null){t.blockedOn=e,IS(t.priority,function(){NS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Od(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Eg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yg=r,n.target.dispatchEvent(r),yg=null}else return e=cu(n),e!==null&&cv(e),t.blockedOn=n,!1;e.shift()}return!0}function qw(t,e,n){Od(t)&&n.delete(e)}function YP(){_g=!1,ai!==null&&Od(ai)&&(ai=null),li!==null&&Od(li)&&(li=null),ci!==null&&Od(ci)&&(ci=null),Sc.forEach(qw),Tc.forEach(qw)}function Fl(t,e){t.blockedOn===e&&(t.blockedOn=null,_g||(_g=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,YP)))}function Nc(t){function e(s){return Fl(s,t)}if(0<rd.length){Fl(rd[0],t);for(var n=1;n<rd.length;n++){var r=rd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ai!==null&&Fl(ai,t),li!==null&&Fl(li,t),ci!==null&&Fl(ci,t),Sc.forEach(e),Tc.forEach(e),n=0;n<Gs.length;n++)r=Gs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gs.length&&(n=Gs[0],n.blockedOn===null);)kS(n),n.blockedOn===null&&Gs.shift()}var ma=Ns.ReactCurrentBatchConfig,mh=!0;function XP(t,e,n,r){var s=$e,i=ma.transition;ma.transition=null;try{$e=1,uv(t,e,n,r)}finally{$e=s,ma.transition=i}}function JP(t,e,n,r){var s=$e,i=ma.transition;ma.transition=null;try{$e=4,uv(t,e,n,r)}finally{$e=s,ma.transition=i}}function uv(t,e,n,r){if(mh){var s=Eg(t,e,n,r);if(s===null)mp(t,e,r,ph,n),Ww(t,r);else if(QP(s,t,e,n,r))r.stopPropagation();else if(Ww(t,r),e&4&&-1<KP.indexOf(t)){for(;s!==null;){var i=cu(s);if(i!==null&&TS(i),i=Eg(t,e,n,r),i===null&&mp(t,e,r,ph,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else mp(t,e,r,null,n)}}var ph=null;function Eg(t,e,n,r){if(ph=null,t=ov(r),t=io(t),t!==null)if(e=Oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=yS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ph=t,null}function AS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FP()){case av:return 1;case bS:return 4;case hh:case zP:return 16;case _S:return 536870912;default:return 16}default:return 16}}var ri=null,dv=null,Ld=null;function jS(){if(Ld)return Ld;var t,e=dv,n=e.length,r,s="value"in ri?ri.value:ri.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ld=s.slice(t,1<r?1-r:void 0)}function Vd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sd(){return!0}function Gw(){return!1}function Vn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?sd:Gw,this.isPropagationStopped=Gw,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sd)},persist:function(){},isPersistent:sd}),e}var sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hv=Vn(sl),lu=ct({},sl,{view:0,detail:0}),ZP=Vn(lu),ip,op,zl,bf=ct({},lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zl&&(zl&&t.type==="mousemove"?(ip=t.screenX-zl.screenX,op=t.screenY-zl.screenY):op=ip=0,zl=t),ip)},movementY:function(t){return"movementY"in t?t.movementY:op}}),Kw=Vn(bf),eD=ct({},bf,{dataTransfer:0}),tD=Vn(eD),nD=ct({},lu,{relatedTarget:0}),ap=Vn(nD),rD=ct({},sl,{animationName:0,elapsedTime:0,pseudoElement:0}),sD=Vn(rD),iD=ct({},sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oD=Vn(iD),aD=ct({},sl,{data:0}),Qw=Vn(aD),lD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uD[t])?!!e[t]:!1}function fv(){return dD}var hD=ct({},lu,{key:function(t){if(t.key){var e=lD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fv,charCode:function(t){return t.type==="keypress"?Vd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fD=Vn(hD),mD=ct({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yw=Vn(mD),pD=ct({},lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fv}),gD=Vn(pD),yD=ct({},sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),vD=Vn(yD),xD=ct({},bf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wD=Vn(xD),bD=[9,13,27,32],mv=ps&&"CompositionEvent"in window,rc=null;ps&&"documentMode"in document&&(rc=document.documentMode);var _D=ps&&"TextEvent"in window&&!rc,RS=ps&&(!mv||rc&&8<rc&&11>=rc),Xw=" ",Jw=!1;function PS(t,e){switch(t){case"keyup":return bD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ea=!1;function ED(t,e){switch(t){case"compositionend":return DS(e);case"keypress":return e.which!==32?null:(Jw=!0,Xw);case"textInput":return t=e.data,t===Xw&&Jw?null:t;default:return null}}function SD(t,e){if(ea)return t==="compositionend"||!mv&&PS(t,e)?(t=jS(),Ld=dv=ri=null,ea=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RS&&e.locale!=="ko"?null:e.data;default:return null}}var TD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TD[t.type]:e==="textarea"}function MS(t,e,n,r){hS(r),e=gh(e,"onChange"),0<e.length&&(n=new hv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sc=null,Cc=null;function ND(t){qS(t,0)}function _f(t){var e=ra(t);if(iS(e))return t}function CD(t,e){if(t==="change")return e}var OS=!1;if(ps){var lp;if(ps){var cp="oninput"in document;if(!cp){var e1=document.createElement("div");e1.setAttribute("oninput","return;"),cp=typeof e1.oninput=="function"}lp=cp}else lp=!1;OS=lp&&(!document.documentMode||9<document.documentMode)}function t1(){sc&&(sc.detachEvent("onpropertychange",LS),Cc=sc=null)}function LS(t){if(t.propertyName==="value"&&_f(Cc)){var e=[];MS(e,Cc,t,ov(t)),gS(ND,e)}}function ID(t,e,n){t==="focusin"?(t1(),sc=e,Cc=n,sc.attachEvent("onpropertychange",LS)):t==="focusout"&&t1()}function kD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _f(Cc)}function AD(t,e){if(t==="click")return _f(e)}function jD(t,e){if(t==="input"||t==="change")return _f(e)}function RD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vr=typeof Object.is=="function"?Object.is:RD;function Ic(t,e){if(vr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ig.call(e,s)||!vr(t[s],e[s]))return!1}return!0}function n1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function r1(t,e){var n=n1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=n1(n)}}function VS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?VS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FS(){for(var t=window,e=ch();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ch(t.document)}return e}function pv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function PD(t){var e=FS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&VS(n.ownerDocument.documentElement,n)){if(r!==null&&pv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=r1(n,i);var o=r1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DD=ps&&"documentMode"in document&&11>=document.documentMode,ta=null,Sg=null,ic=null,Tg=!1;function s1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tg||ta==null||ta!==ch(r)||(r=ta,"selectionStart"in r&&pv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ic&&Ic(ic,r)||(ic=r,r=gh(Sg,"onSelect"),0<r.length&&(e=new hv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ta)))}function id(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var na={animationend:id("Animation","AnimationEnd"),animationiteration:id("Animation","AnimationIteration"),animationstart:id("Animation","AnimationStart"),transitionend:id("Transition","TransitionEnd")},up={},zS={};ps&&(zS=document.createElement("div").style,"AnimationEvent"in window||(delete na.animationend.animation,delete na.animationiteration.animation,delete na.animationstart.animation),"TransitionEvent"in window||delete na.transitionend.transition);function Ef(t){if(up[t])return up[t];if(!na[t])return t;var e=na[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zS)return up[t]=e[n];return t}var US=Ef("animationend"),$S=Ef("animationiteration"),BS=Ef("animationstart"),HS=Ef("transitionend"),WS=new Map,i1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(t,e){WS.set(t,e),Mo(e,[t])}for(var dp=0;dp<i1.length;dp++){var hp=i1[dp],MD=hp.toLowerCase(),OD=hp[0].toUpperCase()+hp.slice(1);Li(MD,"on"+OD)}Li(US,"onAnimationEnd");Li($S,"onAnimationIteration");Li(BS,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(HS,"onTransitionEnd");Ma("onMouseEnter",["mouseout","mouseover"]);Ma("onMouseLeave",["mouseout","mouseover"]);Ma("onPointerEnter",["pointerout","pointerover"]);Ma("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ql));function o1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MP(r,e,void 0,t),t.currentTarget=null}function qS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;o1(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;o1(s,l,u),i=c}}}if(dh)throw t=wg,dh=!1,wg=null,t}function Ze(t,e){var n=e[Ag];n===void 0&&(n=e[Ag]=new Set);var r=t+"__bubble";n.has(r)||(GS(e,t,2,!1),n.add(r))}function fp(t,e,n){var r=0;e&&(r|=4),GS(n,t,r,e)}var od="_reactListening"+Math.random().toString(36).slice(2);function kc(t){if(!t[od]){t[od]=!0,eS.forEach(function(n){n!=="selectionchange"&&(LD.has(n)||fp(n,!1,t),fp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[od]||(e[od]=!0,fp("selectionchange",!1,e))}}function GS(t,e,n,r){switch(AS(e)){case 1:var s=XP;break;case 4:s=JP;break;default:s=uv}n=s.bind(null,e,n,t),s=void 0,!xg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function mp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=io(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}gS(function(){var u=i,h=ov(n),f=[];e:{var p=WS.get(t);if(p!==void 0){var v=hv,b=t;switch(t){case"keypress":if(Vd(n)===0)break e;case"keydown":case"keyup":v=fD;break;case"focusin":b="focus",v=ap;break;case"focusout":b="blur",v=ap;break;case"beforeblur":case"afterblur":v=ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Kw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=tD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=gD;break;case US:case $S:case BS:v=sD;break;case HS:v=vD;break;case"scroll":v=ZP;break;case"wheel":v=wD;break;case"copy":case"cut":case"paste":v=oD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Yw}var x=(e&4)!==0,_=!x&&t==="scroll",w=x?p!==null?p+"Capture":null:p;x=[];for(var y=u,S;y!==null;){S=y;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,w!==null&&(I=Ec(y,w),I!=null&&x.push(Ac(y,I,S)))),_)break;y=y.return}0<x.length&&(p=new v(p,b,null,n,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==yg&&(b=n.relatedTarget||n.fromElement)&&(io(b)||b[gs]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=u,b=b?io(b):null,b!==null&&(_=Oo(b),b!==_||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=u),v!==b)){if(x=Kw,I="onMouseLeave",w="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=Yw,I="onPointerLeave",w="onPointerEnter",y="pointer"),_=v==null?p:ra(v),S=b==null?p:ra(b),p=new x(I,y+"leave",v,n,h),p.target=_,p.relatedTarget=S,I=null,io(h)===u&&(x=new x(w,y+"enter",b,n,h),x.target=S,x.relatedTarget=_,I=x),_=I,v&&b)t:{for(x=v,w=b,y=0,S=x;S;S=Ho(S))y++;for(S=0,I=w;I;I=Ho(I))S++;for(;0<y-S;)x=Ho(x),y--;for(;0<S-y;)w=Ho(w),S--;for(;y--;){if(x===w||w!==null&&x===w.alternate)break t;x=Ho(x),w=Ho(w)}x=null}else x=null;v!==null&&a1(f,p,v,x,!1),b!==null&&_!==null&&a1(f,_,b,x,!0)}}e:{if(p=u?ra(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var P=CD;else if(Zw(p))if(OS)P=jD;else{P=kD;var D=ID}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=AD);if(P&&(P=P(t,u))){MS(f,P,n,h);break e}D&&D(t,p,u),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&hg(p,"number",p.value)}switch(D=u?ra(u):window,t){case"focusin":(Zw(D)||D.contentEditable==="true")&&(ta=D,Sg=u,ic=null);break;case"focusout":ic=Sg=ta=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,s1(f,n,h);break;case"selectionchange":if(DD)break;case"keydown":case"keyup":s1(f,n,h)}var N;if(mv)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else ea?PS(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(RS&&n.locale!=="ko"&&(ea||E!=="onCompositionStart"?E==="onCompositionEnd"&&ea&&(N=jS()):(ri=h,dv="value"in ri?ri.value:ri.textContent,ea=!0)),D=gh(u,E),0<D.length&&(E=new Qw(E,t,null,n,h),f.push({event:E,listeners:D}),N?E.data=N:(N=DS(n),N!==null&&(E.data=N)))),(N=_D?ED(t,n):SD(t,n))&&(u=gh(u,"onBeforeInput"),0<u.length&&(h=new Qw("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=N))}qS(f,e)})}function Ac(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ec(t,n),i!=null&&r.unshift(Ac(t,i,s)),i=Ec(t,e),i!=null&&r.push(Ac(t,i,s))),t=t.return}return r}function Ho(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function a1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ec(n,i),c!=null&&o.unshift(Ac(n,c,l))):s||(c=Ec(n,i),c!=null&&o.push(Ac(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var VD=/\r\n?/g,FD=/\u0000|\uFFFD/g;function l1(t){return(typeof t=="string"?t:""+t).replace(VD,`
`).replace(FD,"")}function ad(t,e,n){if(e=l1(e),l1(t)!==e&&n)throw Error(ee(425))}function yh(){}var Ng=null,Cg=null;function Ig(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kg=typeof setTimeout=="function"?setTimeout:void 0,zD=typeof clearTimeout=="function"?clearTimeout:void 0,c1=typeof Promise=="function"?Promise:void 0,UD=typeof queueMicrotask=="function"?queueMicrotask:typeof c1<"u"?function(t){return c1.resolve(null).then(t).catch($D)}:kg;function $D(t){setTimeout(function(){throw t})}function pp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Nc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Nc(e)}function ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function u1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var il=Math.random().toString(36).slice(2),zr="__reactFiber$"+il,jc="__reactProps$"+il,gs="__reactContainer$"+il,Ag="__reactEvents$"+il,BD="__reactListeners$"+il,HD="__reactHandles$"+il;function io(t){var e=t[zr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gs]||n[zr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=u1(t);t!==null;){if(n=t[zr])return n;t=u1(t)}return e}t=n,n=t.parentNode}return null}function cu(t){return t=t[zr]||t[gs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ra(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Sf(t){return t[jc]||null}var jg=[],sa=-1;function Vi(t){return{current:t}}function tt(t){0>sa||(t.current=jg[sa],jg[sa]=null,sa--)}function Ye(t,e){sa++,jg[sa]=t.current,t.current=e}var _i={},Zt=Vi(_i),wn=Vi(!1),wo=_i;function Oa(t,e){var n=t.type.contextTypes;if(!n)return _i;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bn(t){return t=t.childContextTypes,t!=null}function vh(){tt(wn),tt(Zt)}function d1(t,e,n){if(Zt.current!==_i)throw Error(ee(168));Ye(Zt,e),Ye(wn,n)}function KS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ee(108,IP(t)||"Unknown",s));return ct({},n,r)}function xh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_i,wo=Zt.current,Ye(Zt,t),Ye(wn,wn.current),!0}function h1(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=KS(t,e,wo),r.__reactInternalMemoizedMergedChildContext=t,tt(wn),tt(Zt),Ye(Zt,t)):tt(wn),Ye(wn,n)}var ss=null,Tf=!1,gp=!1;function QS(t){ss===null?ss=[t]:ss.push(t)}function WD(t){Tf=!0,QS(t)}function Fi(){if(!gp&&ss!==null){gp=!0;var t=0,e=$e;try{var n=ss;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ss=null,Tf=!1}catch(s){throw ss!==null&&(ss=ss.slice(t+1)),wS(av,Fi),s}finally{$e=e,gp=!1}}return null}var ia=[],oa=0,wh=null,bh=0,$n=[],Bn=0,bo=null,ls=1,cs="";function to(t,e){ia[oa++]=bh,ia[oa++]=wh,wh=t,bh=e}function YS(t,e,n){$n[Bn++]=ls,$n[Bn++]=cs,$n[Bn++]=bo,bo=t;var r=ls;t=cs;var s=32-dr(r)-1;r&=~(1<<s),n+=1;var i=32-dr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ls=1<<32-dr(e)+s|n<<s|r,cs=i+t}else ls=1<<i|n<<s|r,cs=t}function gv(t){t.return!==null&&(to(t,1),YS(t,1,0))}function yv(t){for(;t===wh;)wh=ia[--oa],ia[oa]=null,bh=ia[--oa],ia[oa]=null;for(;t===bo;)bo=$n[--Bn],$n[Bn]=null,cs=$n[--Bn],$n[Bn]=null,ls=$n[--Bn],$n[Bn]=null}var Dn=null,Rn=null,rt=!1,ar=null;function XS(t,e){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function f1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dn=t,Rn=ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dn=t,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bo!==null?{id:ls,overflow:cs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dn=t,Rn=null,!0):!1;default:return!1}}function Rg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pg(t){if(rt){var e=Rn;if(e){var n=e;if(!f1(t,e)){if(Rg(t))throw Error(ee(418));e=ui(n.nextSibling);var r=Dn;e&&f1(t,e)?XS(r,n):(t.flags=t.flags&-4097|2,rt=!1,Dn=t)}}else{if(Rg(t))throw Error(ee(418));t.flags=t.flags&-4097|2,rt=!1,Dn=t}}}function m1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function ld(t){if(t!==Dn)return!1;if(!rt)return m1(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ig(t.type,t.memoizedProps)),e&&(e=Rn)){if(Rg(t))throw JS(),Error(ee(418));for(;e;)XS(t,e),e=ui(e.nextSibling)}if(m1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rn=ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rn=null}}else Rn=Dn?ui(t.stateNode.nextSibling):null;return!0}function JS(){for(var t=Rn;t;)t=ui(t.nextSibling)}function La(){Rn=Dn=null,rt=!1}function vv(t){ar===null?ar=[t]:ar.push(t)}var qD=Ns.ReactCurrentBatchConfig;function Ul(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function cd(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function p1(t){var e=t._init;return e(t._payload)}function ZS(t){function e(w,y){if(t){var S=w.deletions;S===null?(w.deletions=[y],w.flags|=16):S.push(y)}}function n(w,y){if(!t)return null;for(;y!==null;)e(w,y),y=y.sibling;return null}function r(w,y){for(w=new Map;y!==null;)y.key!==null?w.set(y.key,y):w.set(y.index,y),y=y.sibling;return w}function s(w,y){return w=mi(w,y),w.index=0,w.sibling=null,w}function i(w,y,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<y?(w.flags|=2,y):S):(w.flags|=2,y)):(w.flags|=1048576,y)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,y,S,I){return y===null||y.tag!==6?(y=Ep(S,w.mode,I),y.return=w,y):(y=s(y,S),y.return=w,y)}function c(w,y,S,I){var P=S.type;return P===Zo?h(w,y,S.props.children,I,S.key):y!==null&&(y.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Hs&&p1(P)===y.type)?(I=s(y,S.props),I.ref=Ul(w,y,S),I.return=w,I):(I=Wd(S.type,S.key,S.props,null,w.mode,I),I.ref=Ul(w,y,S),I.return=w,I)}function u(w,y,S,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=Sp(S,w.mode,I),y.return=w,y):(y=s(y,S.children||[]),y.return=w,y)}function h(w,y,S,I,P){return y===null||y.tag!==7?(y=go(S,w.mode,I,P),y.return=w,y):(y=s(y,S),y.return=w,y)}function f(w,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ep(""+y,w.mode,S),y.return=w,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ju:return S=Wd(y.type,y.key,y.props,null,w.mode,S),S.ref=Ul(w,null,y),S.return=w,S;case Jo:return y=Sp(y,w.mode,S),y.return=w,y;case Hs:var I=y._init;return f(w,I(y._payload),S)}if(Gl(y)||Ol(y))return y=go(y,w.mode,S,null),y.return=w,y;cd(w,y)}return null}function p(w,y,S,I){var P=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return P!==null?null:l(w,y,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ju:return S.key===P?c(w,y,S,I):null;case Jo:return S.key===P?u(w,y,S,I):null;case Hs:return P=S._init,p(w,y,P(S._payload),I)}if(Gl(S)||Ol(S))return P!==null?null:h(w,y,S,I,null);cd(w,S)}return null}function v(w,y,S,I,P){if(typeof I=="string"&&I!==""||typeof I=="number")return w=w.get(S)||null,l(y,w,""+I,P);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ju:return w=w.get(I.key===null?S:I.key)||null,c(y,w,I,P);case Jo:return w=w.get(I.key===null?S:I.key)||null,u(y,w,I,P);case Hs:var D=I._init;return v(w,y,S,D(I._payload),P)}if(Gl(I)||Ol(I))return w=w.get(S)||null,h(y,w,I,P,null);cd(y,I)}return null}function b(w,y,S,I){for(var P=null,D=null,N=y,E=y=0,C=null;N!==null&&E<S.length;E++){N.index>E?(C=N,N=null):C=N.sibling;var k=p(w,N,S[E],I);if(k===null){N===null&&(N=C);break}t&&N&&k.alternate===null&&e(w,N),y=i(k,y,E),D===null?P=k:D.sibling=k,D=k,N=C}if(E===S.length)return n(w,N),rt&&to(w,E),P;if(N===null){for(;E<S.length;E++)N=f(w,S[E],I),N!==null&&(y=i(N,y,E),D===null?P=N:D.sibling=N,D=N);return rt&&to(w,E),P}for(N=r(w,N);E<S.length;E++)C=v(N,w,E,S[E],I),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?E:C.key),y=i(C,y,E),D===null?P=C:D.sibling=C,D=C);return t&&N.forEach(function(R){return e(w,R)}),rt&&to(w,E),P}function x(w,y,S,I){var P=Ol(S);if(typeof P!="function")throw Error(ee(150));if(S=P.call(S),S==null)throw Error(ee(151));for(var D=P=null,N=y,E=y=0,C=null,k=S.next();N!==null&&!k.done;E++,k=S.next()){N.index>E?(C=N,N=null):C=N.sibling;var R=p(w,N,k.value,I);if(R===null){N===null&&(N=C);break}t&&N&&R.alternate===null&&e(w,N),y=i(R,y,E),D===null?P=R:D.sibling=R,D=R,N=C}if(k.done)return n(w,N),rt&&to(w,E),P;if(N===null){for(;!k.done;E++,k=S.next())k=f(w,k.value,I),k!==null&&(y=i(k,y,E),D===null?P=k:D.sibling=k,D=k);return rt&&to(w,E),P}for(N=r(w,N);!k.done;E++,k=S.next())k=v(N,w,E,k.value,I),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?E:k.key),y=i(k,y,E),D===null?P=k:D.sibling=k,D=k);return t&&N.forEach(function(M){return e(w,M)}),rt&&to(w,E),P}function _(w,y,S,I){if(typeof S=="object"&&S!==null&&S.type===Zo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ju:e:{for(var P=S.key,D=y;D!==null;){if(D.key===P){if(P=S.type,P===Zo){if(D.tag===7){n(w,D.sibling),y=s(D,S.props.children),y.return=w,w=y;break e}}else if(D.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Hs&&p1(P)===D.type){n(w,D.sibling),y=s(D,S.props),y.ref=Ul(w,D,S),y.return=w,w=y;break e}n(w,D);break}else e(w,D);D=D.sibling}S.type===Zo?(y=go(S.props.children,w.mode,I,S.key),y.return=w,w=y):(I=Wd(S.type,S.key,S.props,null,w.mode,I),I.ref=Ul(w,y,S),I.return=w,w=I)}return o(w);case Jo:e:{for(D=S.key;y!==null;){if(y.key===D)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){n(w,y.sibling),y=s(y,S.children||[]),y.return=w,w=y;break e}else{n(w,y);break}else e(w,y);y=y.sibling}y=Sp(S,w.mode,I),y.return=w,w=y}return o(w);case Hs:return D=S._init,_(w,y,D(S._payload),I)}if(Gl(S))return b(w,y,S,I);if(Ol(S))return x(w,y,S,I);cd(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(n(w,y.sibling),y=s(y,S),y.return=w,w=y):(n(w,y),y=Ep(S,w.mode,I),y.return=w,w=y),o(w)):n(w,y)}return _}var Va=ZS(!0),eT=ZS(!1),_h=Vi(null),Eh=null,aa=null,xv=null;function wv(){xv=aa=Eh=null}function bv(t){var e=_h.current;tt(_h),t._currentValue=e}function Dg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pa(t,e){Eh=t,xv=aa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xn=!0),t.firstContext=null)}function Qn(t){var e=t._currentValue;if(xv!==t)if(t={context:t,memoizedValue:e,next:null},aa===null){if(Eh===null)throw Error(ee(308));aa=t,Eh.dependencies={lanes:0,firstContext:t}}else aa=aa.next=t;return e}var oo=null;function _v(t){oo===null?oo=[t]:oo.push(t)}function tT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_v(e)):(n.next=s.next,s.next=n),e.interleaved=n,ys(t,r)}function ys(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ws=!1;function Ev(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function di(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ys(t,n)}return s=r.interleaved,s===null?(e.next=e,_v(r)):(e.next=s.next,s.next=e),r.interleaved=e,ys(t,n)}function Fd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lv(t,n)}}function g1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sh(t,e,n,r){var s=t.updateQueue;Ws=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,v=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,x=l;switch(p=e,v=n,x.tag){case 1:if(b=x.payload,typeof b=="function"){f=b.call(v,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=x.payload,p=typeof b=="function"?b.call(v,f,p):b,p==null)break e;f=ct({},f,p);break e;case 2:Ws=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=v,c=f):h=h.next=v,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Eo|=o,t.lanes=o,t.memoizedState=f}}function y1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ee(191,s));s.call(r)}}}var uu={},Br=Vi(uu),Rc=Vi(uu),Pc=Vi(uu);function ao(t){if(t===uu)throw Error(ee(174));return t}function Sv(t,e){switch(Ye(Pc,e),Ye(Rc,t),Ye(Br,uu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mg(e,t)}tt(Br),Ye(Br,e)}function Fa(){tt(Br),tt(Rc),tt(Pc)}function rT(t){ao(Pc.current);var e=ao(Br.current),n=mg(e,t.type);e!==n&&(Ye(Rc,t),Ye(Br,n))}function Tv(t){Rc.current===t&&(tt(Br),tt(Rc))}var ot=Vi(0);function Th(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yp=[];function Nv(){for(var t=0;t<yp.length;t++)yp[t]._workInProgressVersionPrimary=null;yp.length=0}var zd=Ns.ReactCurrentDispatcher,vp=Ns.ReactCurrentBatchConfig,_o=0,lt=null,Et=null,jt=null,Nh=!1,oc=!1,Dc=0,GD=0;function Wt(){throw Error(ee(321))}function Cv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vr(t[n],e[n]))return!1;return!0}function Iv(t,e,n,r,s,i){if(_o=i,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zd.current=t===null||t.memoizedState===null?XD:JD,t=n(r,s),oc){i=0;do{if(oc=!1,Dc=0,25<=i)throw Error(ee(301));i+=1,jt=Et=null,e.updateQueue=null,zd.current=ZD,t=n(r,s)}while(oc)}if(zd.current=Ch,e=Et!==null&&Et.next!==null,_o=0,jt=Et=lt=null,Nh=!1,e)throw Error(ee(300));return t}function kv(){var t=Dc!==0;return Dc=0,t}function Mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?lt.memoizedState=jt=t:jt=jt.next=t,jt}function Yn(){if(Et===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=jt===null?lt.memoizedState:jt.next;if(e!==null)jt=e,Et=t;else{if(t===null)throw Error(ee(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},jt===null?lt.memoizedState=jt=t:jt=jt.next=t}return jt}function Mc(t,e){return typeof e=="function"?e(t):e}function xp(t){var e=Yn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Et,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((_o&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,lt.lanes|=h,Eo|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,vr(r,e.memoizedState)||(xn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,lt.lanes|=i,Eo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wp(t){var e=Yn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vr(i,e.memoizedState)||(xn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function sT(){}function iT(t,e){var n=lt,r=Yn(),s=e(),i=!vr(r.memoizedState,s);if(i&&(r.memoizedState=s,xn=!0),r=r.queue,Av(lT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,Oc(9,aT.bind(null,n,r,s,e),void 0,null),Dt===null)throw Error(ee(349));_o&30||oT(n,e,s)}return s}function oT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function aT(t,e,n,r){e.value=n,e.getSnapshot=r,cT(e)&&uT(t)}function lT(t,e,n){return n(function(){cT(e)&&uT(t)})}function cT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vr(t,n)}catch{return!0}}function uT(t){var e=ys(t,1);e!==null&&hr(e,t,1,-1)}function v1(t){var e=Mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mc,lastRenderedState:t},e.queue=t,t=t.dispatch=YD.bind(null,lt,t),[e.memoizedState,t]}function Oc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function dT(){return Yn().memoizedState}function Ud(t,e,n,r){var s=Mr();lt.flags|=t,s.memoizedState=Oc(1|e,n,void 0,r===void 0?null:r)}function Nf(t,e,n,r){var s=Yn();r=r===void 0?null:r;var i=void 0;if(Et!==null){var o=Et.memoizedState;if(i=o.destroy,r!==null&&Cv(r,o.deps)){s.memoizedState=Oc(e,n,i,r);return}}lt.flags|=t,s.memoizedState=Oc(1|e,n,i,r)}function x1(t,e){return Ud(8390656,8,t,e)}function Av(t,e){return Nf(2048,8,t,e)}function hT(t,e){return Nf(4,2,t,e)}function fT(t,e){return Nf(4,4,t,e)}function mT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function pT(t,e,n){return n=n!=null?n.concat([t]):null,Nf(4,4,mT.bind(null,e,t),n)}function jv(){}function gT(t,e){var n=Yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function yT(t,e){var n=Yn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Cv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function vT(t,e,n){return _o&21?(vr(n,e)||(n=ES(),lt.lanes|=n,Eo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xn=!0),t.memoizedState=n)}function KD(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=vp.transition;vp.transition={};try{t(!1),e()}finally{$e=n,vp.transition=r}}function xT(){return Yn().memoizedState}function QD(t,e,n){var r=fi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wT(t))bT(e,n);else if(n=tT(t,e,n,r),n!==null){var s=an();hr(n,t,r,s),_T(n,e,r)}}function YD(t,e,n){var r=fi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wT(t))bT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,vr(l,o)){var c=e.interleaved;c===null?(s.next=s,_v(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=tT(t,e,s,r),n!==null&&(s=an(),hr(n,t,r,s),_T(n,e,r))}}function wT(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function bT(t,e){oc=Nh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _T(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lv(t,n)}}var Ch={readContext:Qn,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},XD={readContext:Qn,useCallback:function(t,e){return Mr().memoizedState=[t,e===void 0?null:e],t},useContext:Qn,useEffect:x1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ud(4194308,4,mT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ud(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ud(4,2,t,e)},useMemo:function(t,e){var n=Mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QD.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=Mr();return t={current:t},e.memoizedState=t},useState:v1,useDebugValue:jv,useDeferredValue:function(t){return Mr().memoizedState=t},useTransition:function(){var t=v1(!1),e=t[0];return t=KD.bind(null,t[1]),Mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,s=Mr();if(rt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Dt===null)throw Error(ee(349));_o&30||oT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,x1(lT.bind(null,r,i,t),[t]),r.flags|=2048,Oc(9,aT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Mr(),e=Dt.identifierPrefix;if(rt){var n=cs,r=ls;n=(r&~(1<<32-dr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Dc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},JD={readContext:Qn,useCallback:gT,useContext:Qn,useEffect:Av,useImperativeHandle:pT,useInsertionEffect:hT,useLayoutEffect:fT,useMemo:yT,useReducer:xp,useRef:dT,useState:function(){return xp(Mc)},useDebugValue:jv,useDeferredValue:function(t){var e=Yn();return vT(e,Et.memoizedState,t)},useTransition:function(){var t=xp(Mc)[0],e=Yn().memoizedState;return[t,e]},useMutableSource:sT,useSyncExternalStore:iT,useId:xT,unstable_isNewReconciler:!1},ZD={readContext:Qn,useCallback:gT,useContext:Qn,useEffect:Av,useImperativeHandle:pT,useInsertionEffect:hT,useLayoutEffect:fT,useMemo:yT,useReducer:wp,useRef:dT,useState:function(){return wp(Mc)},useDebugValue:jv,useDeferredValue:function(t){var e=Yn();return Et===null?e.memoizedState=t:vT(e,Et.memoizedState,t)},useTransition:function(){var t=wp(Mc)[0],e=Yn().memoizedState;return[t,e]},useMutableSource:sT,useSyncExternalStore:iT,useId:xT,unstable_isNewReconciler:!1};function rr(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cf={isMounted:function(t){return(t=t._reactInternals)?Oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),s=fi(t),i=hs(r,s);i.payload=e,n!=null&&(i.callback=n),e=di(t,i,s),e!==null&&(hr(e,t,s,r),Fd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),s=fi(t),i=hs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=di(t,i,s),e!==null&&(hr(e,t,s,r),Fd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=fi(t),s=hs(n,r);s.tag=2,e!=null&&(s.callback=e),e=di(t,s,r),e!==null&&(hr(e,t,r,n),Fd(e,t,r))}};function w1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ic(n,r)||!Ic(s,i):!0}function ET(t,e,n){var r=!1,s=_i,i=e.contextType;return typeof i=="object"&&i!==null?i=Qn(i):(s=bn(e)?wo:Zt.current,r=e.contextTypes,i=(r=r!=null)?Oa(t,s):_i),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function b1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cf.enqueueReplaceState(e,e.state,null)}function Og(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ev(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qn(i):(i=bn(e)?wo:Zt.current,s.context=Oa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Mg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cf.enqueueReplaceState(s,s.state,null),Sh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function za(t,e){try{var n="",r=e;do n+=CP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var e4=typeof WeakMap=="function"?WeakMap:Map;function ST(t,e,n){n=hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){kh||(kh=!0,Gg=r),Lg(t,e)},n}function TT(t,e,n){n=hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Lg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Lg(t,e),typeof r!="function"&&(hi===null?hi=new Set([this]):hi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new e4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=m4.bind(null,t,e,n),e.then(t,t))}function E1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function S1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hs(-1,1),e.tag=2,di(n,e,1))),n.lanes|=1),t)}var t4=Ns.ReactCurrentOwner,xn=!1;function rn(t,e,n,r){e.child=t===null?eT(e,null,n,r):Va(e,t.child,n,r)}function T1(t,e,n,r,s){n=n.render;var i=e.ref;return pa(e,s),r=Iv(t,e,n,r,i,s),n=kv(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vs(t,e,s)):(rt&&n&&gv(e),e.flags|=1,rn(t,e,r,s),e.child)}function N1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Fv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,NT(t,e,i,r,s)):(t=Wd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ic,n(o,r)&&t.ref===e.ref)return vs(t,e,s)}return e.flags|=1,t=mi(i,r),t.ref=e.ref,t.return=e,e.child=t}function NT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ic(i,r)&&t.ref===e.ref)if(xn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(xn=!0);else return e.lanes=t.lanes,vs(t,e,s)}return Vg(t,e,n,r,s)}function CT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(ca,kn),kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(ca,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ye(ca,kn),kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ye(ca,kn),kn|=r;return rn(t,e,s,n),e.child}function IT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vg(t,e,n,r,s){var i=bn(n)?wo:Zt.current;return i=Oa(e,i),pa(e,s),n=Iv(t,e,n,r,i,s),r=kv(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vs(t,e,s)):(rt&&r&&gv(e),e.flags|=1,rn(t,e,n,s),e.child)}function C1(t,e,n,r,s){if(bn(n)){var i=!0;xh(e)}else i=!1;if(pa(e,s),e.stateNode===null)$d(t,e),ET(e,n,r),Og(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qn(u):(u=bn(n)?wo:Zt.current,u=Oa(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&b1(e,o,r,u),Ws=!1;var p=e.memoizedState;o.state=p,Sh(e,r,o,s),c=e.memoizedState,l!==r||p!==c||wn.current||Ws?(typeof h=="function"&&(Mg(e,n,h,r),c=e.memoizedState),(l=Ws||w1(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,nT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:rr(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qn(c):(c=bn(n)?wo:Zt.current,c=Oa(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&b1(e,o,r,c),Ws=!1,p=e.memoizedState,o.state=p,Sh(e,r,o,s);var b=e.memoizedState;l!==f||p!==b||wn.current||Ws?(typeof v=="function"&&(Mg(e,n,v,r),b=e.memoizedState),(u=Ws||w1(e,n,u,r,p,b,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Fg(t,e,n,r,i,s)}function Fg(t,e,n,r,s,i){IT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&h1(e,n,!1),vs(t,e,i);r=e.stateNode,t4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Va(e,t.child,null,i),e.child=Va(e,null,l,i)):rn(t,e,l,i),e.memoizedState=r.state,s&&h1(e,n,!0),e.child}function kT(t){var e=t.stateNode;e.pendingContext?d1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&d1(t,e.context,!1),Sv(t,e.containerInfo)}function I1(t,e,n,r,s){return La(),vv(s),e.flags|=256,rn(t,e,n,r),e.child}var zg={dehydrated:null,treeContext:null,retryLane:0};function Ug(t){return{baseLanes:t,cachePool:null,transitions:null}}function AT(t,e,n){var r=e.pendingProps,s=ot.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ye(ot,s&1),t===null)return Pg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Af(o,r,0,null),t=go(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ug(n),e.memoizedState=zg,t):Rv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return n4(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=mi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=mi(l,i):(i=go(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ug(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zg,r}return i=t.child,t=i.sibling,r=mi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rv(t,e){return e=Af({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ud(t,e,n,r){return r!==null&&vv(r),Va(e,t.child,null,n),t=Rv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function n4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=bp(Error(ee(422))),ud(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Af({mode:"visible",children:r.children},s,0,null),i=go(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Va(e,t.child,null,o),e.child.memoizedState=Ug(o),e.memoizedState=zg,i);if(!(e.mode&1))return ud(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ee(419)),r=bp(i,r,void 0),ud(t,e,o,r)}if(l=(o&t.childLanes)!==0,xn||l){if(r=Dt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ys(t,s),hr(r,t,s,-1))}return Vv(),r=bp(Error(ee(421))),ud(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=p4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rn=ui(s.nextSibling),Dn=e,rt=!0,ar=null,t!==null&&($n[Bn++]=ls,$n[Bn++]=cs,$n[Bn++]=bo,ls=t.id,cs=t.overflow,bo=e),e=Rv(e,r.children),e.flags|=4096,e)}function k1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dg(t.return,e,n)}function _p(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function jT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(rn(t,e,r.children,n),r=ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&k1(t,n,e);else if(t.tag===19)k1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(ot,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Th(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_p(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Th(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_p(e,!0,n,null,i);break;case"together":_p(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $d(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Eo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=mi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function r4(t,e,n){switch(e.tag){case 3:kT(e),La();break;case 5:rT(e);break;case 1:bn(e.type)&&xh(e);break;case 4:Sv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ye(_h,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(ot,ot.current&1),e.flags|=128,null):n&e.child.childLanes?AT(t,e,n):(Ye(ot,ot.current&1),t=vs(t,e,n),t!==null?t.sibling:null);Ye(ot,ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ye(ot,ot.current),r)break;return null;case 22:case 23:return e.lanes=0,CT(t,e,n)}return vs(t,e,n)}var RT,$g,PT,DT;RT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$g=function(){};PT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ao(Br.current);var i=null;switch(n){case"input":s=ug(t,s),r=ug(t,r),i=[];break;case"select":s=ct({},s,{value:void 0}),r=ct({},r,{value:void 0}),i=[];break;case"textarea":s=fg(t,s),r=fg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yh)}pg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ze("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};DT=function(t,e,n,r){n!==r&&(e.flags|=4)};function $l(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function s4(t,e,n){var r=e.pendingProps;switch(yv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(e),null;case 1:return bn(e.type)&&vh(),qt(e),null;case 3:return r=e.stateNode,Fa(),tt(wn),tt(Zt),Nv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ld(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(Yg(ar),ar=null))),$g(t,e),qt(e),null;case 5:Tv(e);var s=ao(Pc.current);if(n=e.type,t!==null&&e.stateNode!=null)PT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return qt(e),null}if(t=ao(Br.current),ld(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[zr]=e,r[jc]=i,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":case"embed":Ze("load",r);break;case"video":case"audio":for(s=0;s<Ql.length;s++)Ze(Ql[s],r);break;case"source":Ze("error",r);break;case"img":case"image":case"link":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"input":Vw(r,i),Ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ze("invalid",r);break;case"textarea":zw(r,i),Ze("invalid",r)}pg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&ad(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ad(r.textContent,l,t),s=["children",""+l]):bc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ze("scroll",r)}switch(n){case"input":Zu(r),Fw(r,i,!0);break;case"textarea":Zu(r),Uw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=yh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zr]=e,t[jc]=r,RT(t,e,!1,!1),e.stateNode=t;e:{switch(o=gg(n,r),n){case"dialog":Ze("cancel",t),Ze("close",t),s=r;break;case"iframe":case"object":case"embed":Ze("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ql.length;s++)Ze(Ql[s],t);s=r;break;case"source":Ze("error",t),s=r;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),s=r;break;case"details":Ze("toggle",t),s=r;break;case"input":Vw(t,r),s=ug(t,r),Ze("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ct({},r,{value:void 0}),Ze("invalid",t);break;case"textarea":zw(t,r),s=fg(t,r),Ze("invalid",t);break;default:s=r}pg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?dS(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cS(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_c(t,c):typeof c=="number"&&_c(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ze("scroll",t):c!=null&&nv(t,i,c,o))}switch(n){case"input":Zu(t),Fw(t,r,!1);break;case"textarea":Zu(t),Uw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?da(t,!!r.multiple,i,!1):r.defaultValue!=null&&da(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=yh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qt(e),null;case 6:if(t&&e.stateNode!=null)DT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=ao(Pc.current),ao(Br.current),ld(e)){if(r=e.stateNode,n=e.memoizedProps,r[zr]=e,(i=r.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:ad(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ad(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zr]=e,e.stateNode=r}return qt(e),null;case 13:if(tt(ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&Rn!==null&&e.mode&1&&!(e.flags&128))JS(),La(),e.flags|=98560,i=!1;else if(i=ld(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[zr]=e}else La(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qt(e),i=!1}else ar!==null&&(Yg(ar),ar=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ot.current&1?Nt===0&&(Nt=3):Vv())),e.updateQueue!==null&&(e.flags|=4),qt(e),null);case 4:return Fa(),$g(t,e),t===null&&kc(e.stateNode.containerInfo),qt(e),null;case 10:return bv(e.type._context),qt(e),null;case 17:return bn(e.type)&&vh(),qt(e),null;case 19:if(tt(ot),i=e.memoizedState,i===null)return qt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$l(i,!1);else{if(Nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Th(t),o!==null){for(e.flags|=128,$l(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(ot,ot.current&1|2),e.child}t=t.sibling}i.tail!==null&&pt()>Ua&&(e.flags|=128,r=!0,$l(i,!1),e.lanes=4194304)}else{if(!r)if(t=Th(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$l(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rt)return qt(e),null}else 2*pt()-i.renderingStartTime>Ua&&n!==1073741824&&(e.flags|=128,r=!0,$l(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=pt(),e.sibling=null,n=ot.current,Ye(ot,r?n&1|2:n&1),e):(qt(e),null);case 22:case 23:return Lv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(qt(e),e.subtreeFlags&6&&(e.flags|=8192)):qt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function i4(t,e){switch(yv(e),e.tag){case 1:return bn(e.type)&&vh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fa(),tt(wn),tt(Zt),Nv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tv(e),null;case 13:if(tt(ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));La()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(ot),null;case 4:return Fa(),null;case 10:return bv(e.type._context),null;case 22:case 23:return Lv(),null;case 24:return null;default:return null}}var dd=!1,Xt=!1,o4=typeof WeakSet=="function"?WeakSet:Set,he=null;function la(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function Bg(t,e,n){try{n()}catch(r){ft(t,e,r)}}var A1=!1;function a4(t,e){if(Ng=mh,t=FS(),pv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)p=f,f=v;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),(v=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cg={focusedElem:t,selectionRange:n},mh=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var x=b.memoizedProps,_=b.memoizedState,w=e.stateNode,y=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:rr(e.type,x),_);w.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(I){ft(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return b=A1,A1=!1,b}function ac(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bg(e,n,i)}s=s.next}while(s!==r)}}function If(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function MT(t){var e=t.alternate;e!==null&&(t.alternate=null,MT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zr],delete e[jc],delete e[Ag],delete e[BD],delete e[HD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function OT(t){return t.tag===5||t.tag===3||t.tag===4}function j1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||OT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yh));else if(r!==4&&(t=t.child,t!==null))for(Wg(t,e,n),t=t.sibling;t!==null;)Wg(t,e,n),t=t.sibling}function qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qg(t,e,n),t=t.sibling;t!==null;)qg(t,e,n),t=t.sibling}var Vt=null,or=!1;function Vs(t,e,n){for(n=n.child;n!==null;)LT(t,e,n),n=n.sibling}function LT(t,e,n){if($r&&typeof $r.onCommitFiberUnmount=="function")try{$r.onCommitFiberUnmount(wf,n)}catch{}switch(n.tag){case 5:Xt||la(n,e);case 6:var r=Vt,s=or;Vt=null,Vs(t,e,n),Vt=r,or=s,Vt!==null&&(or?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(or?(t=Vt,n=n.stateNode,t.nodeType===8?pp(t.parentNode,n):t.nodeType===1&&pp(t,n),Nc(t)):pp(Vt,n.stateNode));break;case 4:r=Vt,s=or,Vt=n.stateNode.containerInfo,or=!0,Vs(t,e,n),Vt=r,or=s;break;case 0:case 11:case 14:case 15:if(!Xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bg(n,e,o),s=s.next}while(s!==r)}Vs(t,e,n);break;case 1:if(!Xt&&(la(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ft(n,e,l)}Vs(t,e,n);break;case 21:Vs(t,e,n);break;case 22:n.mode&1?(Xt=(r=Xt)||n.memoizedState!==null,Vs(t,e,n),Xt=r):Vs(t,e,n);break;default:Vs(t,e,n)}}function R1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new o4),e.forEach(function(r){var s=g4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function er(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Vt=l.stateNode,or=!1;break e;case 3:Vt=l.stateNode.containerInfo,or=!0;break e;case 4:Vt=l.stateNode.containerInfo,or=!0;break e}l=l.return}if(Vt===null)throw Error(ee(160));LT(i,o,s),Vt=null,or=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ft(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)VT(e,t),e=e.sibling}function VT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(er(e,t),Dr(t),r&4){try{ac(3,t,t.return),If(3,t)}catch(x){ft(t,t.return,x)}try{ac(5,t,t.return)}catch(x){ft(t,t.return,x)}}break;case 1:er(e,t),Dr(t),r&512&&n!==null&&la(n,n.return);break;case 5:if(er(e,t),Dr(t),r&512&&n!==null&&la(n,n.return),t.flags&32){var s=t.stateNode;try{_c(s,"")}catch(x){ft(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&oS(s,i),gg(l,o);var u=gg(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?dS(s,f):h==="dangerouslySetInnerHTML"?cS(s,f):h==="children"?_c(s,f):nv(s,h,f,u)}switch(l){case"input":dg(s,i);break;case"textarea":aS(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?da(s,!!i.multiple,v,!1):p!==!!i.multiple&&(i.defaultValue!=null?da(s,!!i.multiple,i.defaultValue,!0):da(s,!!i.multiple,i.multiple?[]:"",!1))}s[jc]=i}catch(x){ft(t,t.return,x)}}break;case 6:if(er(e,t),Dr(t),r&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){ft(t,t.return,x)}}break;case 3:if(er(e,t),Dr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Nc(e.containerInfo)}catch(x){ft(t,t.return,x)}break;case 4:er(e,t),Dr(t);break;case 13:er(e,t),Dr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Mv=pt())),r&4&&R1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Xt=(u=Xt)||h,er(e,t),Xt=u):er(e,t),Dr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(he=t,h=t.child;h!==null;){for(f=he=h;he!==null;){switch(p=he,v=p.child,p.tag){case 0:case 11:case 14:case 15:ac(4,p,p.return);break;case 1:la(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(x){ft(r,n,x)}}break;case 5:la(p,p.return);break;case 22:if(p.memoizedState!==null){D1(f);continue}}v!==null?(v.return=p,he=v):D1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=uS("display",o))}catch(x){ft(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){ft(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:er(e,t),Dr(t),r&4&&R1(t);break;case 21:break;default:er(e,t),Dr(t)}}function Dr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(OT(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(_c(s,""),r.flags&=-33);var i=j1(t);qg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=j1(t);Wg(t,l,o);break;default:throw Error(ee(161))}}catch(c){ft(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function l4(t,e,n){he=t,FT(t)}function FT(t,e,n){for(var r=(t.mode&1)!==0;he!==null;){var s=he,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||dd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Xt;l=dd;var u=Xt;if(dd=o,(Xt=c)&&!u)for(he=s;he!==null;)o=he,c=o.child,o.tag===22&&o.memoizedState!==null?M1(s):c!==null?(c.return=o,he=c):M1(s);for(;i!==null;)he=i,FT(i),i=i.sibling;he=s,dd=l,Xt=u}P1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,he=i):P1(t)}}function P1(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xt||If(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&y1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}y1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Nc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Xt||e.flags&512&&Hg(e)}catch(p){ft(e,e.return,p)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function D1(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function M1(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{If(4,e)}catch(c){ft(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ft(e,s,c)}}var i=e.return;try{Hg(e)}catch(c){ft(e,i,c)}break;case 5:var o=e.return;try{Hg(e)}catch(c){ft(e,o,c)}}}catch(c){ft(e,e.return,c)}if(e===t){he=null;break}var l=e.sibling;if(l!==null){l.return=e.return,he=l;break}he=e.return}}var c4=Math.ceil,Ih=Ns.ReactCurrentDispatcher,Pv=Ns.ReactCurrentOwner,Gn=Ns.ReactCurrentBatchConfig,Me=0,Dt=null,yt=null,zt=0,kn=0,ca=Vi(0),Nt=0,Lc=null,Eo=0,kf=0,Dv=0,lc=null,yn=null,Mv=0,Ua=1/0,rs=null,kh=!1,Gg=null,hi=null,hd=!1,si=null,Ah=0,cc=0,Kg=null,Bd=-1,Hd=0;function an(){return Me&6?pt():Bd!==-1?Bd:Bd=pt()}function fi(t){return t.mode&1?Me&2&&zt!==0?zt&-zt:qD.transition!==null?(Hd===0&&(Hd=ES()),Hd):(t=$e,t!==0||(t=window.event,t=t===void 0?16:AS(t.type)),t):1}function hr(t,e,n,r){if(50<cc)throw cc=0,Kg=null,Error(ee(185));au(t,n,r),(!(Me&2)||t!==Dt)&&(t===Dt&&(!(Me&2)&&(kf|=n),Nt===4&&Ks(t,zt)),_n(t,r),n===1&&Me===0&&!(e.mode&1)&&(Ua=pt()+500,Tf&&Fi()))}function _n(t,e){var n=t.callbackNode;qP(t,e);var r=fh(t,t===Dt?zt:0);if(r===0)n!==null&&Hw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Hw(n),e===1)t.tag===0?WD(O1.bind(null,t)):QS(O1.bind(null,t)),UD(function(){!(Me&6)&&Fi()}),n=null;else{switch(SS(r)){case 1:n=av;break;case 4:n=bS;break;case 16:n=hh;break;case 536870912:n=_S;break;default:n=hh}n=GT(n,zT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zT(t,e){if(Bd=-1,Hd=0,Me&6)throw Error(ee(327));var n=t.callbackNode;if(ga()&&t.callbackNode!==n)return null;var r=fh(t,t===Dt?zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jh(t,r);else{e=r;var s=Me;Me|=2;var i=$T();(Dt!==t||zt!==e)&&(rs=null,Ua=pt()+500,po(t,e));do try{h4();break}catch(l){UT(t,l)}while(!0);wv(),Ih.current=i,Me=s,yt!==null?e=0:(Dt=null,zt=0,e=Nt)}if(e!==0){if(e===2&&(s=bg(t),s!==0&&(r=s,e=Qg(t,s))),e===1)throw n=Lc,po(t,0),Ks(t,r),_n(t,pt()),n;if(e===6)Ks(t,r);else{if(s=t.current.alternate,!(r&30)&&!u4(s)&&(e=jh(t,r),e===2&&(i=bg(t),i!==0&&(r=i,e=Qg(t,i))),e===1))throw n=Lc,po(t,0),Ks(t,r),_n(t,pt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:no(t,yn,rs);break;case 3:if(Ks(t,r),(r&130023424)===r&&(e=Mv+500-pt(),10<e)){if(fh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kg(no.bind(null,t,yn,rs),e);break}no(t,yn,rs);break;case 4:if(Ks(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-dr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=pt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*c4(r/1960))-r,10<r){t.timeoutHandle=kg(no.bind(null,t,yn,rs),r);break}no(t,yn,rs);break;case 5:no(t,yn,rs);break;default:throw Error(ee(329))}}}return _n(t,pt()),t.callbackNode===n?zT.bind(null,t):null}function Qg(t,e){var n=lc;return t.current.memoizedState.isDehydrated&&(po(t,e).flags|=256),t=jh(t,e),t!==2&&(e=yn,yn=n,e!==null&&Yg(e)),t}function Yg(t){yn===null?yn=t:yn.push.apply(yn,t)}function u4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ks(t,e){for(e&=~Dv,e&=~kf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dr(e),r=1<<n;t[n]=-1,e&=~r}}function O1(t){if(Me&6)throw Error(ee(327));ga();var e=fh(t,0);if(!(e&1))return _n(t,pt()),null;var n=jh(t,e);if(t.tag!==0&&n===2){var r=bg(t);r!==0&&(e=r,n=Qg(t,r))}if(n===1)throw n=Lc,po(t,0),Ks(t,e),_n(t,pt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,no(t,yn,rs),_n(t,pt()),null}function Ov(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(Ua=pt()+500,Tf&&Fi())}}function So(t){si!==null&&si.tag===0&&!(Me&6)&&ga();var e=Me;Me|=1;var n=Gn.transition,r=$e;try{if(Gn.transition=null,$e=1,t)return t()}finally{$e=r,Gn.transition=n,Me=e,!(Me&6)&&Fi()}}function Lv(){kn=ca.current,tt(ca)}function po(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zD(n)),yt!==null)for(n=yt.return;n!==null;){var r=n;switch(yv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vh();break;case 3:Fa(),tt(wn),tt(Zt),Nv();break;case 5:Tv(r);break;case 4:Fa();break;case 13:tt(ot);break;case 19:tt(ot);break;case 10:bv(r.type._context);break;case 22:case 23:Lv()}n=n.return}if(Dt=t,yt=t=mi(t.current,null),zt=kn=e,Nt=0,Lc=null,Dv=kf=Eo=0,yn=lc=null,oo!==null){for(e=0;e<oo.length;e++)if(n=oo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}oo=null}return t}function UT(t,e){do{var n=yt;try{if(wv(),zd.current=Ch,Nh){for(var r=lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nh=!1}if(_o=0,jt=Et=lt=null,oc=!1,Dc=0,Pv.current=null,n===null||n.return===null){Nt=1,Lc=e,yt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=zt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=E1(o);if(v!==null){v.flags&=-257,S1(v,o,l,i,e),v.mode&1&&_1(i,u,e),e=v,c=u;var b=e.updateQueue;if(b===null){var x=new Set;x.add(c),e.updateQueue=x}else b.add(c);break e}else{if(!(e&1)){_1(i,u,e),Vv();break e}c=Error(ee(426))}}else if(rt&&l.mode&1){var _=E1(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),S1(_,o,l,i,e),vv(za(c,l));break e}}i=c=za(c,l),Nt!==4&&(Nt=2),lc===null?lc=[i]:lc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=ST(i,c,e);g1(i,w);break e;case 1:l=c;var y=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(hi===null||!hi.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=TT(i,l,e);g1(i,I);break e}}i=i.return}while(i!==null)}HT(n)}catch(P){e=P,yt===n&&n!==null&&(yt=n=n.return);continue}break}while(!0)}function $T(){var t=Ih.current;return Ih.current=Ch,t===null?Ch:t}function Vv(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Dt===null||!(Eo&268435455)&&!(kf&268435455)||Ks(Dt,zt)}function jh(t,e){var n=Me;Me|=2;var r=$T();(Dt!==t||zt!==e)&&(rs=null,po(t,e));do try{d4();break}catch(s){UT(t,s)}while(!0);if(wv(),Me=n,Ih.current=r,yt!==null)throw Error(ee(261));return Dt=null,zt=0,Nt}function d4(){for(;yt!==null;)BT(yt)}function h4(){for(;yt!==null&&!LP();)BT(yt)}function BT(t){var e=qT(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?HT(t):yt=e,Pv.current=null}function HT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=i4(n,e),n!==null){n.flags&=32767,yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,yt=null;return}}else if(n=s4(n,e,kn),n!==null){yt=n;return}if(e=e.sibling,e!==null){yt=e;return}yt=e=t}while(e!==null);Nt===0&&(Nt=5)}function no(t,e,n){var r=$e,s=Gn.transition;try{Gn.transition=null,$e=1,f4(t,e,n,r)}finally{Gn.transition=s,$e=r}return null}function f4(t,e,n,r){do ga();while(si!==null);if(Me&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GP(t,i),t===Dt&&(yt=Dt=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hd||(hd=!0,GT(hh,function(){return ga(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gn.transition,Gn.transition=null;var o=$e;$e=1;var l=Me;Me|=4,Pv.current=null,a4(t,n),VT(n,t),PD(Cg),mh=!!Ng,Cg=Ng=null,t.current=n,l4(n),VP(),Me=l,$e=o,Gn.transition=i}else t.current=n;if(hd&&(hd=!1,si=t,Ah=s),i=t.pendingLanes,i===0&&(hi=null),UP(n.stateNode),_n(t,pt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(kh)throw kh=!1,t=Gg,Gg=null,t;return Ah&1&&t.tag!==0&&ga(),i=t.pendingLanes,i&1?t===Kg?cc++:(cc=0,Kg=t):cc=0,Fi(),null}function ga(){if(si!==null){var t=SS(Ah),e=Gn.transition,n=$e;try{if(Gn.transition=null,$e=16>t?16:t,si===null)var r=!1;else{if(t=si,si=null,Ah=0,Me&6)throw Error(ee(331));var s=Me;for(Me|=4,he=t.current;he!==null;){var i=he,o=i.child;if(he.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(he=u;he!==null;){var h=he;switch(h.tag){case 0:case 11:case 15:ac(8,h,i)}var f=h.child;if(f!==null)f.return=h,he=f;else for(;he!==null;){h=he;var p=h.sibling,v=h.return;if(MT(h),h===u){he=null;break}if(p!==null){p.return=v,he=p;break}he=v}}}var b=i.alternate;if(b!==null){var x=b.child;if(x!==null){b.child=null;do{var _=x.sibling;x.sibling=null,x=_}while(x!==null)}}he=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,he=o;else e:for(;he!==null;){if(i=he,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ac(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,he=w;break e}he=i.return}}var y=t.current;for(he=y;he!==null;){o=he;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,he=S;else e:for(o=y;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:If(9,l)}}catch(P){ft(l,l.return,P)}if(l===o){he=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,he=I;break e}he=l.return}}if(Me=s,Fi(),$r&&typeof $r.onPostCommitFiberRoot=="function")try{$r.onPostCommitFiberRoot(wf,t)}catch{}r=!0}return r}finally{$e=n,Gn.transition=e}}return!1}function L1(t,e,n){e=za(n,e),e=ST(t,e,1),t=di(t,e,1),e=an(),t!==null&&(au(t,1,e),_n(t,e))}function ft(t,e,n){if(t.tag===3)L1(t,t,n);else for(;e!==null;){if(e.tag===3){L1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hi===null||!hi.has(r))){t=za(n,t),t=TT(e,t,1),e=di(e,t,1),t=an(),e!==null&&(au(e,1,t),_n(e,t));break}}e=e.return}}function m4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(zt&n)===n&&(Nt===4||Nt===3&&(zt&130023424)===zt&&500>pt()-Mv?po(t,0):Dv|=n),_n(t,e)}function WT(t,e){e===0&&(t.mode&1?(e=nd,nd<<=1,!(nd&130023424)&&(nd=4194304)):e=1);var n=an();t=ys(t,e),t!==null&&(au(t,e,n),_n(t,n))}function p4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),WT(t,n)}function g4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),WT(t,n)}var qT;qT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wn.current)xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xn=!1,r4(t,e,n);xn=!!(t.flags&131072)}else xn=!1,rt&&e.flags&1048576&&YS(e,bh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$d(t,e),t=e.pendingProps;var s=Oa(e,Zt.current);pa(e,n),s=Iv(null,e,r,t,s,n);var i=kv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bn(r)?(i=!0,xh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ev(e),s.updater=Cf,e.stateNode=s,s._reactInternals=e,Og(e,r,t,n),e=Fg(null,e,r,!0,i,n)):(e.tag=0,rt&&i&&gv(e),rn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch($d(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=v4(r),t=rr(r,t),s){case 0:e=Vg(null,e,r,t,n);break e;case 1:e=C1(null,e,r,t,n);break e;case 11:e=T1(null,e,r,t,n);break e;case 14:e=N1(null,e,r,rr(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),Vg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),C1(t,e,r,s,n);case 3:e:{if(kT(e),t===null)throw Error(ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,nT(t,e),Sh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=za(Error(ee(423)),e),e=I1(t,e,r,n,s);break e}else if(r!==s){s=za(Error(ee(424)),e),e=I1(t,e,r,n,s);break e}else for(Rn=ui(e.stateNode.containerInfo.firstChild),Dn=e,rt=!0,ar=null,n=eT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(La(),r===s){e=vs(t,e,n);break e}rn(t,e,r,n)}e=e.child}return e;case 5:return rT(e),t===null&&Pg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ig(r,s)?o=null:i!==null&&Ig(r,i)&&(e.flags|=32),IT(t,e),rn(t,e,o,n),e.child;case 6:return t===null&&Pg(e),null;case 13:return AT(t,e,n);case 4:return Sv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Va(e,null,r,n):rn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),T1(t,e,r,s,n);case 7:return rn(t,e,e.pendingProps,n),e.child;case 8:return rn(t,e,e.pendingProps.children,n),e.child;case 12:return rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ye(_h,r._currentValue),r._currentValue=o,i!==null)if(vr(i.value,o)){if(i.children===s.children&&!wn.current){e=vs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=hs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Dg(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ee(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Dg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}rn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,pa(e,n),s=Qn(s),r=r(s),e.flags|=1,rn(t,e,r,n),e.child;case 14:return r=e.type,s=rr(r,e.pendingProps),s=rr(r.type,s),N1(t,e,r,s,n);case 15:return NT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rr(r,s),$d(t,e),e.tag=1,bn(r)?(t=!0,xh(e)):t=!1,pa(e,n),ET(e,r,s),Og(e,r,s,n),Fg(null,e,r,!0,t,n);case 19:return jT(t,e,n);case 22:return CT(t,e,n)}throw Error(ee(156,e.tag))};function GT(t,e){return wS(t,e)}function y4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,r){return new y4(t,e,n,r)}function Fv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function v4(t){if(typeof t=="function")return Fv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sv)return 11;if(t===iv)return 14}return 2}function mi(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Fv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zo:return go(n.children,s,i,e);case rv:o=8,s|=8;break;case og:return t=Wn(12,n,e,s|2),t.elementType=og,t.lanes=i,t;case ag:return t=Wn(13,n,e,s),t.elementType=ag,t.lanes=i,t;case lg:return t=Wn(19,n,e,s),t.elementType=lg,t.lanes=i,t;case rS:return Af(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tS:o=10;break e;case nS:o=9;break e;case sv:o=11;break e;case iv:o=14;break e;case Hs:o=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Wn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function go(t,e,n,r){return t=Wn(7,t,r,e),t.lanes=n,t}function Af(t,e,n,r){return t=Wn(22,t,r,e),t.elementType=rS,t.lanes=n,t.stateNode={isHidden:!1},t}function Ep(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function Sp(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function x4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sp(0),this.expirationTimes=sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zv(t,e,n,r,s,i,o,l,c){return t=new x4(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ev(i),t}function w4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function KT(t){if(!t)return _i;t=t._reactInternals;e:{if(Oo(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(bn(n))return KS(t,n,e)}return e}function QT(t,e,n,r,s,i,o,l,c){return t=zv(n,r,!0,t,s,i,o,l,c),t.context=KT(null),n=t.current,r=an(),s=fi(n),i=hs(r,s),i.callback=e??null,di(n,i,s),t.current.lanes=s,au(t,s,r),_n(t,r),t}function jf(t,e,n,r){var s=e.current,i=an(),o=fi(s);return n=KT(n),e.context===null?e.context=n:e.pendingContext=n,e=hs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=di(s,e,o),t!==null&&(hr(t,s,o,i),Fd(t,s,o)),o}function Rh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uv(t,e){V1(t,e),(t=t.alternate)&&V1(t,e)}function b4(){return null}var YT=typeof reportError=="function"?reportError:function(t){console.error(t)};function $v(t){this._internalRoot=t}Rf.prototype.render=$v.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));jf(t,e,null,null)};Rf.prototype.unmount=$v.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;So(function(){jf(null,t,null,null)}),e[gs]=null}};function Rf(t){this._internalRoot=t}Rf.prototype.unstable_scheduleHydration=function(t){if(t){var e=CS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gs.length&&e!==0&&e<Gs[n].priority;n++);Gs.splice(n,0,t),n===0&&kS(t)}};function Bv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function F1(){}function _4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Rh(o);i.call(u)}}var o=QT(e,r,t,0,null,!1,!1,"",F1);return t._reactRootContainer=o,t[gs]=o.current,kc(t.nodeType===8?t.parentNode:t),So(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=Rh(c);l.call(u)}}var c=zv(t,0,!1,null,null,!1,!1,"",F1);return t._reactRootContainer=c,t[gs]=c.current,kc(t.nodeType===8?t.parentNode:t),So(function(){jf(e,c,n,r)}),c}function Df(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Rh(o);l.call(c)}}jf(e,o,t,s)}else o=_4(n,e,t,s,r);return Rh(o)}TS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kl(e.pendingLanes);n!==0&&(lv(e,n|1),_n(e,pt()),!(Me&6)&&(Ua=pt()+500,Fi()))}break;case 13:So(function(){var r=ys(t,1);if(r!==null){var s=an();hr(r,t,1,s)}}),Uv(t,1)}};cv=function(t){if(t.tag===13){var e=ys(t,134217728);if(e!==null){var n=an();hr(e,t,134217728,n)}Uv(t,134217728)}};NS=function(t){if(t.tag===13){var e=fi(t),n=ys(t,e);if(n!==null){var r=an();hr(n,t,e,r)}Uv(t,e)}};CS=function(){return $e};IS=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};vg=function(t,e,n){switch(e){case"input":if(dg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Sf(r);if(!s)throw Error(ee(90));iS(r),dg(r,s)}}}break;case"textarea":aS(t,n);break;case"select":e=n.value,e!=null&&da(t,!!n.multiple,e,!1)}};mS=Ov;pS=So;var E4={usingClientEntryPoint:!1,Events:[cu,ra,Sf,hS,fS,Ov]},Bl={findFiberByHostInstance:io,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S4={bundleType:Bl.bundleType,version:Bl.version,rendererPackageName:Bl.rendererPackageName,rendererConfig:Bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=vS(t),t===null?null:t.stateNode},findFiberByHostInstance:Bl.findFiberByHostInstance||b4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fd.isDisabled&&fd.supportsFiber)try{wf=fd.inject(S4),$r=fd}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E4;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bv(e))throw Error(ee(200));return w4(t,e,null,n)};Ln.createRoot=function(t,e){if(!Bv(t))throw Error(ee(299));var n=!1,r="",s=YT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zv(t,1,!1,null,null,n,!1,r,s),t[gs]=e.current,kc(t.nodeType===8?t.parentNode:t),new $v(e)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=vS(e),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return So(t)};Ln.hydrate=function(t,e,n){if(!Pf(e))throw Error(ee(200));return Df(null,t,e,!0,n)};Ln.hydrateRoot=function(t,e,n){if(!Bv(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=YT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=QT(e,null,t,1,n??null,s,!1,i,o),t[gs]=e.current,kc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Rf(e)};Ln.render=function(t,e,n){if(!Pf(e))throw Error(ee(200));return Df(null,t,e,!1,n)};Ln.unmountComponentAtNode=function(t){if(!Pf(t))throw Error(ee(40));return t._reactRootContainer?(So(function(){Df(null,null,t,!1,function(){t._reactRootContainer=null,t[gs]=null})}),!0):!1};Ln.unstable_batchedUpdates=Ov;Ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pf(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Df(t,e,n,!1,r)};Ln.version="18.3.1-next-f1338f8080-20240426";function XT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XT)}catch(t){console.error(t)}}XT(),XE.exports=Ln;var qn=XE.exports;const T4=VE(qn);var JT,z1=qn;JT=z1.createRoot,z1.hydrateRoot;function N4(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var ZT={exports:{}},eN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $a=m;function C4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var I4=typeof Object.is=="function"?Object.is:C4,k4=$a.useState,A4=$a.useEffect,j4=$a.useLayoutEffect,R4=$a.useDebugValue;function P4(t,e){var n=e(),r=k4({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return j4(function(){s.value=n,s.getSnapshot=e,Tp(s)&&i({inst:s})},[t,n,e]),A4(function(){return Tp(s)&&i({inst:s}),t(function(){Tp(s)&&i({inst:s})})},[t]),R4(n),n}function Tp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!I4(t,n)}catch{return!0}}function D4(t,e){return e()}var M4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?D4:P4;eN.useSyncExternalStore=$a.useSyncExternalStore!==void 0?$a.useSyncExternalStore:M4;ZT.exports=eN;var O4=ZT.exports;const L4=QE.useInsertionEffect,V4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",F4=V4?m.useLayoutEffect:m.useEffect,z4=L4||F4,tN=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return z4(()=>{e[0]=t}),e[1]},U4="popstate",Hv="pushState",Wv="replaceState",$4="hashchange",U1=[U4,Hv,Wv,$4],B4=t=>{for(const e of U1)addEventListener(e,t);return()=>{for(const e of U1)removeEventListener(e,t)}},nN=(t,e)=>O4.useSyncExternalStore(B4,t,e),H4=()=>location.search,W4=({ssrSearch:t=""}={})=>nN(H4,()=>t),$1=()=>location.pathname,q4=({ssrPath:t}={})=>nN($1,t?()=>t:$1),G4=(t,{replace:e=!1,state:n=null}={})=>history[e?Wv:Hv](n,"",t),K4=(t={})=>[q4(t),G4],B1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[B1]>"u"){for(const t of[Hv,Wv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,B1,{value:!0})}const Q4=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",rN=(t="")=>t==="/"?"":t,Y4=(t,e)=>t[0]==="~"?t.slice(1):rN(e)+t,X4=(t="",e)=>Q4(H1(rN(t)),H1(e)),H1=t=>{try{return decodeURI(t)}catch{return t}},sN={hook:K4,searchHook:W4,parser:N4,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},iN=m.createContext(sN),du=()=>m.useContext(iN),oN={},aN=m.createContext(oN),J4=()=>m.useContext(aN),Mf=t=>{const[e,n]=t.hook(t);return[X4(t.base,e),tN((r,s)=>n(Y4(r,t.base),s))]},Of=()=>Mf(du()),lN=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},cN=({children:t,...e})=>{var h,f;const n=du(),r=e.hook?sN:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in r){const v=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&v!==u[p]&&(l.current=u={...u}),u[p]=v,v!==r[p]&&(s=u)}return m.createElement(iN.Provider,{value:s,children:t})},W1=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,Z4=t=>{let e=m.useRef(oN),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},tr=({path:t,nest:e,match:n,...r})=>{const s=du(),[i]=Mf(s),[o,l,c]=n??lN(s.parser,t,i,e),u=Z4({...J4(),...l});if(!o)return null;const h=c?m.createElement(cN,{base:c},W1(r,u)):W1(r,u);return m.createElement(aN.Provider,{value:u,children:h})},Ei=m.forwardRef((t,e)=>{const n=du(),[r,s]=Mf(n),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...v}=t,b=tN(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(l==null||l(_),_.defaultPrevented||(_.preventDefault(),s(o,t)))}),x=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:b,href:x}):m.createElement("a",{...v,onClick:b,href:x,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),uN=t=>Array.isArray(t)?t.flatMap(e=>uN(e&&e.type===m.Fragment?e.props.children:e)):[t],eM=({children:t,location:e})=>{const n=du(),[r]=Mf(n);for(const s of uN(t)){let i=0;if(m.isValidElement(s)&&(i=lN(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var Lf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vf=typeof window>"u"||"Deno"in globalThis;function sr(){}function tM(t,e){return typeof t=="function"?t(e):t}function nM(t){return typeof t=="number"&&t>=0&&t!==1/0}function rM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function q1(t,e){return typeof t=="function"?t(e):t}function sM(t,e){return typeof t=="function"?t(e):t}function G1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==qv(o,e.options))return!1}else if(!Fc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function K1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Vc(e.options.mutationKey)!==Vc(i))return!1}else if(!Fc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function qv(t,e){return((e==null?void 0:e.queryKeyHashFn)||Vc)(t)}function Vc(t){return JSON.stringify(t,(e,n)=>Xg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Fc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Fc(t[n],e[n])):!1}function dN(t,e){if(t===e)return t;const n=Q1(t)&&Q1(e);if(n||Xg(t)&&Xg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=dN(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function Q1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Xg(t){if(!Y1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Y1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Y1(t){return Object.prototype.toString.call(t)==="[object Object]"}function iM(t){return new Promise(e=>{setTimeout(e,t)})}function oM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?dN(t,e):e}function aM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function lM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Gv=Symbol();function hN(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var uo,Js,Na,AE,cM=(AE=class extends Lf{constructor(){super();Fe(this,uo);Fe(this,Js);Fe(this,Na);Ee(this,Na,e=>{if(!Vf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,Js)||this.setEventListener(K(this,Na))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,Js))==null||e.call(this),Ee(this,Js,void 0))}setEventListener(e){var n;Ee(this,Na,e),(n=K(this,Js))==null||n.call(this),Ee(this,Js,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,uo)!==e&&(Ee(this,uo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,uo)=="boolean"?K(this,uo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},uo=new WeakMap,Js=new WeakMap,Na=new WeakMap,AE),fN=new cM,Ca,Zs,Ia,jE,uM=(jE=class extends Lf{constructor(){super();Fe(this,Ca,!0);Fe(this,Zs);Fe(this,Ia);Ee(this,Ia,e=>{if(!Vf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,Zs)||this.setEventListener(K(this,Ia))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,Zs))==null||e.call(this),Ee(this,Zs,void 0))}setEventListener(e){var n;Ee(this,Ia,e),(n=K(this,Zs))==null||n.call(this),Ee(this,Zs,e(this.setOnline.bind(this)))}setOnline(e){K(this,Ca)!==e&&(Ee(this,Ca,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,Ca)}},Ca=new WeakMap,Zs=new WeakMap,Ia=new WeakMap,jE),Ph=new uM;function dM(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function hM(t){return Math.min(1e3*2**t,3e4)}function mN(t){return(t??"online")==="online"?Ph.isOnline():!0}var pN=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Np(t){return t instanceof pN}function gN(t){let e=!1,n=0,r=!1,s;const i=dM(),o=x=>{var _;r||(p(new pN(x)),(_=t.abort)==null||_.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>fN.isFocused()&&(t.networkMode==="always"||Ph.isOnline())&&t.canRun(),h=()=>mN(t.networkMode)&&t.canRun(),f=x=>{var _;r||(r=!0,(_=t.onSuccess)==null||_.call(t,x),s==null||s(),i.resolve(x))},p=x=>{var _;r||(r=!0,(_=t.onError)==null||_.call(t,x),s==null||s(),i.reject(x))},v=()=>new Promise(x=>{var _;s=w=>{(r||u())&&x(w)},(_=t.onPause)==null||_.call(t)}).then(()=>{var x;s=void 0,r||(x=t.onContinue)==null||x.call(t)}),b=()=>{if(r)return;let x;const _=n===0?t.initialPromise:void 0;try{x=_??t.fn()}catch(w){x=Promise.reject(w)}Promise.resolve(x).then(f).catch(w=>{var D;if(r)return;const y=t.retry??(Vf?0:3),S=t.retryDelay??hM,I=typeof S=="function"?S(n,w):S,P=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,w);if(e||!P){p(w);return}n++,(D=t.onFail)==null||D.call(t,n,w),iM(I).then(()=>u()?void 0:v()).then(()=>{e?p(w):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?b():v().then(b),i)}}function fM(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var on=fM(),ho,RE,yN=(RE=class{constructor(){Fe(this,ho)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nM(this.gcTime)&&Ee(this,ho,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Vf?1/0:5*60*1e3))}clearGcTimeout(){K(this,ho)&&(clearTimeout(K(this,ho)),Ee(this,ho,void 0))}},ho=new WeakMap,RE),ka,Aa,zn,Kt,su,fo,ir,ns,PE,mM=(PE=class extends yN{constructor(n){super();Fe(this,ir);Fe(this,ka);Fe(this,Aa);Fe(this,zn);Fe(this,Kt);Fe(this,su);Fe(this,fo);Ee(this,fo,!1),Ee(this,su,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ee(this,zn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ee(this,ka,gM(this.options)),this.state=n.state??K(this,ka),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,Kt))==null?void 0:n.promise}setOptions(n){this.options={...K(this,su),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,zn).remove(this)}setData(n,r){const s=oM(this.state.data,n,this.options);return Ht(this,ir,ns).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ht(this,ir,ns).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,Kt))==null?void 0:s.promise;return(i=K(this,Kt))==null||i.cancel(n),r?r.then(sr).catch(sr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,ka))}isActive(){return this.observers.some(n=>sM(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!rM(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Kt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Kt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,zn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,Kt)&&(K(this,fo)?K(this,Kt).cancel({revert:!0}):K(this,Kt).cancelRetry()),this.scheduleGc()),K(this,zn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ht(this,ir,ns).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,Kt))return K(this,Kt).continueRetry(),K(this,Kt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(v=>v.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ee(this,fo,!0),s.signal)})},o=()=>{const p=hN(this.options,r),v={queryKey:this.queryKey,meta:this.meta};return i(v),Ee(this,fo,!1),this.options.persister?this.options.persister(p,v,this):p(v)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Ee(this,Aa,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Ht(this,ir,ns).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var v,b,x,_;Np(p)&&p.silent||Ht(this,ir,ns).call(this,{type:"error",error:p}),Np(p)||((b=(v=K(this,zn).config).onError)==null||b.call(v,p,this),(_=(x=K(this,zn).config).onSettled)==null||_.call(x,this.state.data,p,this)),this.scheduleGc()};return Ee(this,Kt,gN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var v,b,x,_;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(w){c(w);return}(b=(v=K(this,zn).config).onSuccess)==null||b.call(v,p,this),(_=(x=K(this,zn).config).onSettled)==null||_.call(x,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,v)=>{Ht(this,ir,ns).call(this,{type:"failed",failureCount:p,error:v})},onPause:()=>{Ht(this,ir,ns).call(this,{type:"pause"})},onContinue:()=>{Ht(this,ir,ns).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),K(this,Kt).start()}},ka=new WeakMap,Aa=new WeakMap,zn=new WeakMap,Kt=new WeakMap,su=new WeakMap,fo=new WeakMap,ir=new WeakSet,ns=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...pM(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Np(i)&&i.revert&&K(this,Aa)?{...K(this,Aa),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),on.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,zn).notify({query:this,type:"updated",action:n})})},PE);function pM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function gM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Lr,DE,yM=(DE=class extends Lf{constructor(e={}){super();Fe(this,Lr);this.config=e,Ee(this,Lr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??qv(s,n);let o=this.get(i);return o||(o=new mM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,Lr).has(e.queryHash)||(K(this,Lr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,Lr).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,Lr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){on.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,Lr).get(e)}getAll(){return[...K(this,Lr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>G1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>G1(e,r)):n}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){on.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){on.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Lr=new WeakMap,DE),Vr,nn,mo,Fr,$s,ME,vM=(ME=class extends yN{constructor(n){super();Fe(this,Fr);Fe(this,Vr);Fe(this,nn);Fe(this,mo);this.mutationId=n.mutationId,Ee(this,nn,n.mutationCache),Ee(this,Vr,[]),this.state=n.state||xM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,Vr).includes(n)||(K(this,Vr).push(n),this.clearGcTimeout(),K(this,nn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ee(this,Vr,K(this,Vr).filter(r=>r!==n)),this.scheduleGc(),K(this,nn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,Vr).length||(this.state.status==="pending"?this.scheduleGc():K(this,nn).remove(this))}continue(){var n;return((n=K(this,mo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,l,c,u,h,f,p,v,b,x,_,w,y,S,I,P,D,N,E;Ee(this,mo,gN({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,k)=>{Ht(this,Fr,$s).call(this,{type:"failed",failureCount:C,error:k})},onPause:()=>{Ht(this,Fr,$s).call(this,{type:"pause"})},onContinue:()=>{Ht(this,Fr,$s).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,nn).canRun(this)}));const r=this.state.status==="pending",s=!K(this,mo).canStart();try{if(!r){Ht(this,Fr,$s).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=K(this,nn).config).onMutate)==null?void 0:o.call(i,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&Ht(this,Fr,$s).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const C=await K(this,mo).start();return await((h=(u=K(this,nn).config).onSuccess)==null?void 0:h.call(u,C,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,n,this.state.context)),await((b=(v=K(this,nn).config).onSettled)==null?void 0:b.call(v,C,null,this.state.variables,this.state.context,this)),await((_=(x=this.options).onSettled)==null?void 0:_.call(x,C,null,n,this.state.context)),Ht(this,Fr,$s).call(this,{type:"success",data:C}),C}catch(C){try{throw await((y=(w=K(this,nn).config).onError)==null?void 0:y.call(w,C,n,this.state.context,this)),await((I=(S=this.options).onError)==null?void 0:I.call(S,C,n,this.state.context)),await((D=(P=K(this,nn).config).onSettled)==null?void 0:D.call(P,void 0,C,this.state.variables,this.state.context,this)),await((E=(N=this.options).onSettled)==null?void 0:E.call(N,void 0,C,n,this.state.context)),C}finally{Ht(this,Fr,$s).call(this,{type:"error",error:C})}}finally{K(this,nn).runNext(this)}}},Vr=new WeakMap,nn=new WeakMap,mo=new WeakMap,Fr=new WeakSet,$s=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),on.batch(()=>{K(this,Vr).forEach(s=>{s.onMutationUpdate(n)}),K(this,nn).notify({mutation:this,type:"updated",action:n})})},ME);function xM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var In,iu,OE,wM=(OE=class extends Lf{constructor(e={}){super();Fe(this,In);Fe(this,iu);this.config=e,Ee(this,In,new Map),Ee(this,iu,Date.now())}build(e,n,r){const s=new vM({mutationCache:this,mutationId:++Yu(this,iu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=md(e),r=K(this,In).get(n)??[];r.push(e),K(this,In).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=md(e);if(K(this,In).has(n)){const s=(r=K(this,In).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?K(this,In).delete(n):K(this,In).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=K(this,In).get(md(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=K(this,In).get(md(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){on.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...K(this,In).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>K1(n,r))}findAll(e={}){return this.getAll().filter(n=>K1(e,n))}notify(e){on.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return on.batch(()=>Promise.all(e.map(n=>n.continue().catch(sr))))}},In=new WeakMap,iu=new WeakMap,OE);function md(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function X1(t){return{onFetch:(e,n)=>{var h,f,p,v,b;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((v=e.state.data)==null?void 0:v.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let x=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},w=hN(e.options,e.fetchOptions),y=async(S,I,P)=>{if(x)return Promise.reject();if(I==null&&S.pages.length)return Promise.resolve(S);const D={queryKey:e.queryKey,pageParam:I,direction:P?"backward":"forward",meta:e.options.meta};_(D);const N=await w(D),{maxPages:E}=e.options,C=P?lM:aM;return{pages:C(S.pages,N,E),pageParams:C(S.pageParams,I,E)}};if(s&&i.length){const S=s==="backward",I=S?bM:J1,P={pages:i,pageParams:o},D=I(r,P);l=await y(P,D,S)}else{const S=t??i.length;do{const I=c===0?o[0]??r.initialPageParam:J1(r,l);if(c>0&&I==null)break;l=await y(l,I),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>{var x,_;return(_=(x=e.options).persister)==null?void 0:_.call(x,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function J1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function bM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ht,ei,ti,ja,Ra,ni,Pa,Da,LE,_M=(LE=class{constructor(t={}){Fe(this,ht);Fe(this,ei);Fe(this,ti);Fe(this,ja);Fe(this,Ra);Fe(this,ni);Fe(this,Pa);Fe(this,Da);Ee(this,ht,t.queryCache||new yM),Ee(this,ei,t.mutationCache||new wM),Ee(this,ti,t.defaultOptions||{}),Ee(this,ja,new Map),Ee(this,Ra,new Map),Ee(this,ni,0)}mount(){Yu(this,ni)._++,K(this,ni)===1&&(Ee(this,Pa,fN.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,ht).onFocus())})),Ee(this,Da,Ph.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,ht).onOnline())})))}unmount(){var t,e;Yu(this,ni)._--,K(this,ni)===0&&((t=K(this,Pa))==null||t.call(this),Ee(this,Pa,void 0),(e=K(this,Da))==null||e.call(this),Ee(this,Da,void 0))}isFetching(t){return K(this,ht).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,ei).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,ht).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=K(this,ht).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(q1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return K(this,ht).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,ht).get(r.queryHash),i=s==null?void 0:s.state.data,o=tM(e,i);if(o!==void 0)return K(this,ht).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return on.batch(()=>K(this,ht).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,ht).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,ht);on.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,ht),r={type:"active",...t};return on.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=on.batch(()=>K(this,ht).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(sr).catch(sr)}invalidateQueries(t={},e={}){return on.batch(()=>{if(K(this,ht).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=on.batch(()=>K(this,ht).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(sr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(sr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,ht).build(this,e);return n.isStaleByTime(q1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(sr).catch(sr)}fetchInfiniteQuery(t){return t.behavior=X1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(sr).catch(sr)}ensureInfiniteQueryData(t){return t.behavior=X1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Ph.isOnline()?K(this,ei).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,ht)}getMutationCache(){return K(this,ei)}getDefaultOptions(){return K(this,ti)}setDefaultOptions(t){Ee(this,ti,t)}setQueryDefaults(t,e){K(this,ja).set(Vc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,ja).values()];let n={};return e.forEach(r=>{Fc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){K(this,Ra).set(Vc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,Ra).values()];let n={};return e.forEach(r=>{Fc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,ti).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Gv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,ti).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,ht).clear(),K(this,ei).clear()}},ht=new WeakMap,ei=new WeakMap,ti=new WeakMap,ja=new WeakMap,Ra=new WeakMap,ni=new WeakMap,Pa=new WeakMap,Da=new WeakMap,LE),EM=m.createContext(void 0),SM=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(EM.Provider,{value:t,children:e}));async function TM(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const NM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await TM(n),await n.json())},CM=new _M({defaultOptions:{queries:{queryFn:NM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),IM=1,kM=1e6;let Cp=0;function AM(){return Cp=(Cp+1)%Number.MAX_SAFE_INTEGER,Cp.toString()}const Ip=new Map,Z1=t=>{if(Ip.has(t))return;const e=setTimeout(()=>{Ip.delete(t),uc({type:"REMOVE_TOAST",toastId:t})},kM);Ip.set(t,e)},jM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,IM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Z1(n):t.toasts.forEach(r=>{Z1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},qd=[];let Gd={toasts:[]};function uc(t){Gd=jM(Gd,t),qd.forEach(e=>{e(Gd)})}function RM({...t}){const e=AM(),n=s=>uc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>uc({type:"DISMISS_TOAST",toastId:e});return uc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Lo(){const[t,e]=m.useState(Gd);return m.useEffect(()=>(qd.push(e),()=>{const n=qd.indexOf(e);n>-1&&qd.splice(n,1)}),[t]),{...t,toast:RM,dismiss:n=>uc({type:"DISMISS_TOAST",toastId:n})}}function pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function eb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function vN(...t){return e=>{let n=!1;const r=t.map(s=>{const i=eb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():eb(t[s],null)}}}}function Be(...t){return m.useCallback(vN(...t),t)}function PM(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Nr(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var w;const{scope:p,children:v,...b}=f,x=((w=p==null?void 0:p[t])==null?void 0:w[c])||l,_=m.useMemo(()=>b,Object.values(b));return a.jsx(x.Provider,{value:_,children:v})};u.displayName=i+"Provider";function h(f,p){var x;const v=((x=p==null?void 0:p[t])==null?void 0:x[c])||l,b=m.useContext(v);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,DM(s,...e)]}function DM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ba(t){const e=OM(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(LM);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var MM=Ba("Slot");function OM(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=FM(s),l=VM(i,s.props);return s.type!==m.Fragment&&(l.ref=r?vN(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var xN=Symbol("radix.slottable");function wN(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=xN,e}function LM(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===xN}function VM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function FM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Kv(t){const e=t+"CollectionProvider",[n,r]=Nr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:_,children:w}=x,y=Se.useRef(null),S=Se.useRef(new Map).current;return a.jsx(s,{scope:_,itemMap:S,collectionRef:y,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=Ba(l),u=Se.forwardRef((x,_)=>{const{scope:w,children:y}=x,S=i(l,w),I=Be(_,S.collectionRef);return a.jsx(c,{ref:I,children:y})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Ba(h),v=Se.forwardRef((x,_)=>{const{scope:w,children:y,...S}=x,I=Se.useRef(null),P=Be(_,I),D=i(h,w);return Se.useEffect(()=>(D.itemMap.set(I,{ref:I,...S}),()=>void D.itemMap.delete(I))),a.jsx(p,{[f]:"",ref:P,children:y})});v.displayName=h;function b(x){const _=i(t+"CollectionConsumer",x);return Se.useCallback(()=>{const y=_.collectionRef.current;if(!y)return[];const S=Array.from(y.querySelectorAll(`[${f}]`));return Array.from(_.itemMap.values()).sort((D,N)=>S.indexOf(D.ref.current)-S.indexOf(N.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:u,ItemSlot:v},b,r]}var zM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],xe=zM.reduce((t,e)=>{const n=Ba(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function bN(t,e){t&&qn.flushSync(()=>t.dispatchEvent(e))}function ln(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function UM(t,e=globalThis==null?void 0:globalThis.document){const n=ln(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var $M="DismissableLayer",Jg="dismissableLayer.update",BM="dismissableLayer.pointerDownOutside",HM="dismissableLayer.focusOutside",tb,_N=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hu=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(_N),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,v]=m.useState({}),b=Be(e,N=>f(N)),x=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(_),y=h?x.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,I=y>=w,P=qM(N=>{const E=N.target,C=[...u.branches].some(k=>k.contains(E));!I||C||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},p),D=GM(N=>{const E=N.target;[...u.branches].some(k=>k.contains(E))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},p);return UM(N=>{y===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(tb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),nb(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=tb)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),nb())},[h,u]),m.useEffect(()=>{const N=()=>v({});return document.addEventListener(Jg,N),()=>document.removeEventListener(Jg,N)},[]),a.jsx(xe.div,{...c,ref:b,style:{pointerEvents:S?I?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,D.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,P.onPointerDownCapture)})});hu.displayName=$M;var WM="DismissableLayerBranch",EN=m.forwardRef((t,e)=>{const n=m.useContext(_N),r=m.useRef(null),s=Be(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(xe.div,{...t,ref:s})});EN.displayName=WM;function qM(t,e=globalThis==null?void 0:globalThis.document){const n=ln(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){SN(BM,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function GM(t,e=globalThis==null?void 0:globalThis.document){const n=ln(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&SN(HM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function nb(){const t=new CustomEvent(Jg);document.dispatchEvent(t)}function SN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?bN(s,i):s.dispatchEvent(i)}var KM=hu,QM=EN,It=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},YM="Portal",fu=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);It(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?T4.createPortal(a.jsx(xe.div,{...r,ref:e}),o):null});fu.displayName=YM;function XM(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var zi=t=>{const{present:e,children:n}=t,r=JM(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Be(r.ref,ZM(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};zi.displayName="Presence";function JM(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=XM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=pd(r.current);i.current=l==="mounted"?u:"none"},[l]),It(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,v=pd(u);t?c("MOUNT"):v==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),It(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=v=>{const x=pd(r.current).includes(v.animationName);if(v.target===e&&x&&(c("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=v=>{v.target===e&&(i.current=pd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function pd(t){return(t==null?void 0:t.animationName)||"none"}function ZM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Si({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=eO({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,l=ln(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function eO({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=ln(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var tO="VisuallyHidden",mu=m.forwardRef((t,e)=>a.jsx(xe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));mu.displayName=tO;var nO=mu,Qv="ToastProvider",[Yv,rO,sO]=Kv("Toast"),[TN,UW]=Nr("Toast",[sO]),[iO,Ff]=TN(Qv),NN=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Qv}\`. Expected non-empty \`string\`.`),a.jsx(Yv.Provider,{scope:e,children:a.jsx(iO,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(v=>v+1),[]),onToastRemove:m.useCallback(()=>h(v=>v-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};NN.displayName=Qv;var CN="ToastViewport",oO=["F8"],Zg="toast.viewportPause",ey="toast.viewportResume",IN=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=oO,label:s="Notifications ({hotkey})",...i}=t,o=Ff(CN,n),l=rO(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Be(e,f,o.onViewportChange),v=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;m.useEffect(()=>{const _=w=>{var S;r.length!==0&&r.every(I=>w[I]||w.code===I)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),m.useEffect(()=>{const _=c.current,w=f.current;if(b&&_&&w){const y=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(Zg);w.dispatchEvent(D),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(ey);w.dispatchEvent(D),o.isClosePausedRef.current=!1}},I=D=>{!_.contains(D.relatedTarget)&&S()},P=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",y),_.addEventListener("focusout",I),_.addEventListener("pointermove",y),_.addEventListener("pointerleave",P),window.addEventListener("blur",y),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",y),_.removeEventListener("focusout",I),_.removeEventListener("pointermove",y),_.removeEventListener("pointerleave",P),window.removeEventListener("blur",y),window.removeEventListener("focus",S)}}},[b,o.isClosePausedRef]);const x=m.useCallback(({tabbingDirection:_})=>{const y=l().map(S=>{const I=S.ref.current,P=[I,...xO(I)];return _==="forwards"?P:P.reverse()});return(_==="forwards"?y.reverse():y).flat()},[l]);return m.useEffect(()=>{const _=f.current;if(_){const w=y=>{var P,D,N;const S=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!S){const E=document.activeElement,C=y.shiftKey;if(y.target===_&&C){(P=u.current)==null||P.focus();return}const M=x({tabbingDirection:C?"backwards":"forwards"}),A=M.findIndex(H=>H===E);kp(M.slice(A+1))?y.preventDefault():C?(D=u.current)==null||D.focus():(N=h.current)==null||N.focus()}};return _.addEventListener("keydown",w),()=>_.removeEventListener("keydown",w)}},[l,x]),a.jsxs(QM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",v),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&a.jsx(ty,{ref:u,onFocusFromOutsideViewport:()=>{const _=x({tabbingDirection:"forwards"});kp(_)}}),a.jsx(Yv.Slot,{scope:n,children:a.jsx(xe.ol,{tabIndex:-1,...i,ref:p})}),b&&a.jsx(ty,{ref:h,onFocusFromOutsideViewport:()=>{const _=x({tabbingDirection:"backwards"});kp(_)}})]})});IN.displayName=CN;var kN="ToastFocusProxy",ty=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Ff(kN,n);return a.jsx(mu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});ty.displayName=kN;var zf="Toast",aO="toast.swipeStart",lO="toast.swipeMove",cO="toast.swipeCancel",uO="toast.swipeEnd",AN=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=Si({prop:r,defaultProp:s,onChange:i});return a.jsx(zi,{present:n||l,children:a.jsx(fO,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:ln(t.onPause),onResume:ln(t.onResume),onSwipeStart:pe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:pe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});AN.displayName=zf;var[dO,hO]=TN(zf,{onClose(){}}),fO=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:v,...b}=t,x=Ff(zf,n),[_,w]=m.useState(null),y=Be(e,H=>w(H)),S=m.useRef(null),I=m.useRef(null),P=s||x.duration,D=m.useRef(0),N=m.useRef(P),E=m.useRef(0),{onToastAdd:C,onToastRemove:k}=x,R=ln(()=>{var ie;(_==null?void 0:_.contains(document.activeElement))&&((ie=x.viewport)==null||ie.focus()),o()}),M=m.useCallback(H=>{!H||H===1/0||(window.clearTimeout(E.current),D.current=new Date().getTime(),E.current=window.setTimeout(R,H))},[R]);m.useEffect(()=>{const H=x.viewport;if(H){const ie=()=>{M(N.current),u==null||u()},Z=()=>{const X=new Date().getTime()-D.current;N.current=N.current-X,window.clearTimeout(E.current),c==null||c()};return H.addEventListener(Zg,Z),H.addEventListener(ey,ie),()=>{H.removeEventListener(Zg,Z),H.removeEventListener(ey,ie)}}},[x.viewport,P,c,u,M]),m.useEffect(()=>{i&&!x.isClosePausedRef.current&&M(P)},[i,P,x.isClosePausedRef,M]),m.useEffect(()=>(C(),()=>k()),[C,k]);const A=m.useMemo(()=>_?LN(_):null,[_]);return x.viewport?a.jsxs(a.Fragment,{children:[A&&a.jsx(mO,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),a.jsx(dO,{scope:n,onClose:R,children:qn.createPortal(a.jsx(Yv.ItemSlot,{scope:n,children:a.jsx(KM,{asChild:!0,onEscapeKeyDown:pe(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||R(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...b,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:pe(t.onKeyDown,H=>{H.key==="Escape"&&(l==null||l(H.nativeEvent),H.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:pe(t.onPointerDown,H=>{H.button===0&&(S.current={x:H.clientX,y:H.clientY})}),onPointerMove:pe(t.onPointerMove,H=>{if(!S.current)return;const ie=H.clientX-S.current.x,Z=H.clientY-S.current.y,X=!!I.current,L=["left","right"].includes(x.swipeDirection),W=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,z=L?W(0,ie):0,U=L?0:W(0,Z),J=H.pointerType==="touch"?10:2,Y={x:z,y:U},Q={originalEvent:H,delta:Y};X?(I.current=Y,gd(lO,f,Q,{discrete:!1})):rb(Y,x.swipeDirection,J)?(I.current=Y,gd(aO,h,Q,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(ie)>J||Math.abs(Z)>J)&&(S.current=null)}),onPointerUp:pe(t.onPointerUp,H=>{const ie=I.current,Z=H.target;if(Z.hasPointerCapture(H.pointerId)&&Z.releasePointerCapture(H.pointerId),I.current=null,S.current=null,ie){const X=H.currentTarget,L={originalEvent:H,delta:ie};rb(ie,x.swipeDirection,x.swipeThreshold)?gd(uO,v,L,{discrete:!0}):gd(cO,p,L,{discrete:!0}),X.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),mO=t=>{const{__scopeToast:e,children:n,...r}=t,s=Ff(zf,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return yO(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(fu,{asChild:!0,children:a.jsx(mu,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},pO="ToastTitle",jN=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(xe.div,{...r,ref:e})});jN.displayName=pO;var gO="ToastDescription",RN=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(xe.div,{...r,ref:e})});RN.displayName=gO;var PN="ToastAction",DN=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(ON,{altText:n,asChild:!0,children:a.jsx(Xv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${PN}\`. Expected non-empty \`string\`.`),null)});DN.displayName=PN;var MN="ToastClose",Xv=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=hO(MN,n);return a.jsx(ON,{asChild:!0,children:a.jsx(xe.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,s.onClose)})})});Xv.displayName=MN;var ON=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function LN(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),vO(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...LN(r))}}),e}function gd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?bN(s,i):s.dispatchEvent(i)}var rb=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function yO(t=()=>{}){const e=ln(t);It(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function vO(t){return t.nodeType===t.ELEMENT_NODE}function xO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function kp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var wO=NN,VN=IN,FN=AN,zN=jN,UN=RN,$N=DN,BN=Xv;function HN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=HN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function WN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=HN(t))&&(r&&(r+=" "),r+=e);return r}const sb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ib=WN,pu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ib(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=sb(h)||sb(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...v}=h;return Object.entries(v).every(b=>{let[x,_]=b;return Array.isArray(_)?_.includes({...i,...l}[x]):{...i,...l}[x]===_})?[...u,f,p]:u},[]);return ib(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _O={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,..._O,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qN("lucide",s),...l},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(EO,{ref:i,iconNode:e,className:qN(`lucide-${bO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=de("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=de("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=de("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=de("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=de("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=de("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=de("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=de("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=de("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=de("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=de("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=de("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=de("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=de("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=de("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ab=de("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=de("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=de("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=de("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=de("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=de("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=de("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=de("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=de("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=de("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=de("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=de("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=de("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=de("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=de("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=de("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=de("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=de("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=de("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=de("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=de("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=de("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=de("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=de("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=de("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=de("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=de("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=de("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=de("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=de("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=de("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=de("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=de("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),sx="-",QO=t=>{const e=XO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(sx);return l[0]===""&&l.length!==1&&l.shift(),aC(l,e)||YO(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},aC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?aC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(sx);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},cb=/^\[(.+)\]$/,YO=t=>{if(cb.test(t)){const e=cb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},XO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return ZO(Object.entries(t.classGroups),n).forEach(([i,o])=>{ay(o,r,i,e)}),r},ay=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:ub(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(JO(s)){ay(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ay(o,ub(e,i),n,r)})})},ub=(t,e)=>{let n=t;return e.split(sx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},JO=t=>t.isThemeGetter,ZO=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,e5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},lC="!",t5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let _=0;_<l.length;_++){let w=l[_];if(u===0){if(w===s&&(r||l.slice(_,_+i)===e)){c.push(l.slice(h,_)),h=_+i;continue}if(w==="/"){f=_;continue}}w==="["?u++:w==="]"&&u--}const p=c.length===0?l:l.substring(h),v=p.startsWith(lC),b=v?p.substring(1):p,x=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:v,baseClassName:b,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:o}):o},n5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},r5=t=>({cache:e5(t.cacheSize),parseClassName:t5(t),...QO(t)}),s5=/\s+/,i5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(s5);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:v}=n(u);let b=!!v,x=r(b?p.substring(0,v):p);if(!x){if(!b){l=u+(l.length>0?" "+l:l);continue}if(x=r(p),!x){l=u+(l.length>0?" "+l:l);continue}b=!1}const _=n5(h).join(":"),w=f?_+lC:_,y=w+x;if(i.includes(y))continue;i.push(y);const S=s(x,b);for(let I=0;I<S.length;++I){const P=S[I];i.push(w+P)}l=u+(l.length>0?" "+l:l)}return l};function o5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=cC(e))&&(r&&(r+=" "),r+=n);return r}const cC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=cC(t[r]))&&(n&&(n+=" "),n+=e);return n};function a5(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=r5(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=i5(c,n);return s(c,h),h}return function(){return i(o5.apply(null,arguments))}}const Je=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},uC=/^\[(?:([a-z-]+):)?(.+)\]$/i,l5=/^\d+\/\d+$/,c5=new Set(["px","full","screen"]),u5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,d5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,h5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,f5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,m5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ts=t=>ya(t)||c5.has(t)||l5.test(t),Fs=t=>ol(t,"length",_5),ya=t=>!!t&&!Number.isNaN(Number(t)),Ap=t=>ol(t,"number",ya),Hl=t=>!!t&&Number.isInteger(Number(t)),p5=t=>t.endsWith("%")&&ya(t.slice(0,-1)),be=t=>uC.test(t),zs=t=>u5.test(t),g5=new Set(["length","size","percentage"]),y5=t=>ol(t,g5,dC),v5=t=>ol(t,"position",dC),x5=new Set(["image","url"]),w5=t=>ol(t,x5,S5),b5=t=>ol(t,"",E5),Wl=()=>!0,ol=(t,e,n)=>{const r=uC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},_5=t=>d5.test(t)&&!h5.test(t),dC=()=>!1,E5=t=>f5.test(t),S5=t=>m5.test(t),T5=()=>{const t=Je("colors"),e=Je("spacing"),n=Je("blur"),r=Je("brightness"),s=Je("borderColor"),i=Je("borderRadius"),o=Je("borderSpacing"),l=Je("borderWidth"),c=Je("contrast"),u=Je("grayscale"),h=Je("hueRotate"),f=Je("invert"),p=Je("gap"),v=Je("gradientColorStops"),b=Je("gradientColorStopPositions"),x=Je("inset"),_=Je("margin"),w=Je("opacity"),y=Je("padding"),S=Je("saturate"),I=Je("scale"),P=Je("sepia"),D=Je("skew"),N=Je("space"),E=Je("translate"),C=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",be,e],M=()=>[be,e],A=()=>["",ts,Fs],H=()=>["auto",ya,be],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",be],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[ya,be];return{cacheSize:500,separator:":",theme:{colors:[Wl],spacing:[ts,Fs],blur:["none","",zs,be],brightness:U(),borderColor:[t],borderRadius:["none","","full",zs,be],borderSpacing:M(),borderWidth:A(),contrast:U(),grayscale:W(),hueRotate:U(),invert:W(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[p5,Fs],inset:R(),margin:R(),opacity:U(),padding:M(),saturate:U(),scale:U(),sepia:W(),skew:U(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[zs]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),be]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Hl,be]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Hl,be]}],"grid-cols":[{"grid-cols":[Wl]}],"col-start-end":[{col:["auto",{span:["full",Hl,be]},be]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Wl]}],"row-start-end":[{row:["auto",{span:[Hl,be]},be]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[zs]},zs]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",zs,Fs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ap]}],"font-family":[{font:[Wl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",ya,Ap]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ts,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ts,Fs]}],"underline-offset":[{"underline-offset":["auto",ts,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),v5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",y5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},w5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:Z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[ts,be]}],"outline-w":[{outline:[ts,Fs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ts,Fs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",zs,b5]}],"shadow-color":[{shadow:[Wl]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",zs,be]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Hl,be]}],"translate-x":[{"translate-x":[E]}],"translate-y":[{"translate-y":[E]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ts,Fs,Ap]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},N5=a5(T5);function $(...t){return N5(WN(t))}const C5=wO,hC=m.forwardRef(({className:t,...e},n)=>a.jsx(VN,{ref:n,className:$("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));hC.displayName=VN.displayName;const I5=pu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),fC=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(FN,{ref:r,className:$(I5({variant:e}),t),...n}));fC.displayName=FN.displayName;const k5=m.forwardRef(({className:t,...e},n)=>a.jsx($N,{ref:n,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));k5.displayName=$N.displayName;const mC=m.forwardRef(({className:t,...e},n)=>a.jsx(BN,{ref:n,className:$("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(No,{className:"h-4 w-4"})}));mC.displayName=BN.displayName;const pC=m.forwardRef(({className:t,...e},n)=>a.jsx(zN,{ref:n,className:$("text-sm font-semibold",t),...e}));pC.displayName=zN.displayName;const gC=m.forwardRef(({className:t,...e},n)=>a.jsx(UN,{ref:n,className:$("text-sm opacity-90",t),...e}));gC.displayName=UN.displayName;function A5(){const{toasts:t}=Lo();return a.jsxs(C5,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(fC,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(pC,{children:n}),r&&a.jsx(gC,{children:r})]}),s,a.jsx(mC,{})]},e)}),a.jsx(hC,{})]})}var j5=QE[" useId ".trim().toString()]||(()=>{}),R5=0;function fs(t){const[e,n]=m.useState(j5());return It(()=>{n(r=>r??String(R5++))},[t]),e?`radix-${e}`:""}const P5=["top","right","bottom","left"],Ti=Math.min,An=Math.max,Oh=Math.round,yd=Math.floor,Hr=t=>({x:t,y:t}),D5={left:"right",right:"left",bottom:"top",top:"bottom"},M5={start:"end",end:"start"};function ly(t,e,n){return An(t,Ti(e,n))}function ws(t,e){return typeof t=="function"?t(e):t}function bs(t){return t.split("-")[0]}function al(t){return t.split("-")[1]}function ix(t){return t==="x"?"y":"x"}function ox(t){return t==="y"?"height":"width"}function Ni(t){return["top","bottom"].includes(bs(t))?"y":"x"}function ax(t){return ix(Ni(t))}function O5(t,e,n){n===void 0&&(n=!1);const r=al(t),s=ax(t),i=ox(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Lh(o)),[o,Lh(o)]}function L5(t){const e=Lh(t);return[cy(t),e,cy(e)]}function cy(t){return t.replace(/start|end/g,e=>M5[e])}function V5(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function F5(t,e,n,r){const s=al(t);let i=V5(bs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(cy)))),i}function Lh(t){return t.replace(/left|right|bottom|top/g,e=>D5[e])}function z5(t){return{top:0,right:0,bottom:0,left:0,...t}}function yC(t){return typeof t!="number"?z5(t):{top:t,right:t,bottom:t,left:t}}function Vh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function db(t,e,n){let{reference:r,floating:s}=t;const i=Ni(e),o=ax(e),l=ox(o),c=bs(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let v;switch(c){case"top":v={x:h,y:r.y-s.height};break;case"bottom":v={x:h,y:r.y+r.height};break;case"right":v={x:r.x+r.width,y:f};break;case"left":v={x:r.x-s.width,y:f};break;default:v={x:r.x,y:r.y}}switch(al(e)){case"start":v[o]-=p*(n&&u?-1:1);break;case"end":v[o]+=p*(n&&u?-1:1);break}return v}const U5=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=db(u,r,c),p=r,v={},b=0;for(let x=0;x<l.length;x++){const{name:_,fn:w}=l[x],{x:y,y:S,data:I,reset:P}=await w({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:v,rects:u,platform:o,elements:{reference:t,floating:e}});h=y??h,f=S??f,v={...v,[_]:{...v[_],...I}},P&&b<=50&&(b++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(u=P.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):P.rects),{x:h,y:f}=db(u,p,c)),x=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:v}};async function Bc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:v=0}=ws(e,t),b=yC(v),_=l[p?f==="floating"?"reference":"floating":f],w=Vh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),y=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},P=Vh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:S,strategy:c}):y);return{top:(w.top-P.top+b.top)/I.y,bottom:(P.bottom-w.bottom+b.bottom)/I.y,left:(w.left-P.left+b.left)/I.x,right:(P.right-w.right+b.right)/I.x}}const $5=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=ws(t,e)||{};if(u==null)return{};const f=yC(h),p={x:n,y:r},v=ax(s),b=ox(v),x=await o.getDimensions(u),_=v==="y",w=_?"top":"left",y=_?"bottom":"right",S=_?"clientHeight":"clientWidth",I=i.reference[b]+i.reference[v]-p[v]-i.floating[b],P=p[v]-i.reference[v],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=D?D[S]:0;(!N||!await(o.isElement==null?void 0:o.isElement(D)))&&(N=l.floating[S]||i.floating[b]);const E=I/2-P/2,C=N/2-x[b]/2-1,k=Ti(f[w],C),R=Ti(f[y],C),M=k,A=N-x[b]-R,H=N/2-x[b]/2+E,ie=ly(M,H,A),Z=!c.arrow&&al(s)!=null&&H!==ie&&i.reference[b]/2-(H<M?k:R)-x[b]/2<0,X=Z?H<M?H-M:H-A:0;return{[v]:p[v]+X,data:{[v]:ie,centerOffset:H-ie-X,...Z&&{alignmentOffset:X}},reset:Z}}}),B5=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:x=!0,..._}=ws(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=bs(s),y=Ni(l),S=bs(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),P=p||(S||!x?[Lh(l)]:L5(l)),D=b!=="none";!p&&D&&P.push(...F5(l,x,b,I));const N=[l,...P],E=await Bc(e,_),C=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(E[w]),f){const H=O5(s,o,I);C.push(E[H[0]],E[H[1]])}if(k=[...k,{placement:s,overflows:C}],!C.every(H=>H<=0)){var R,M;const H=(((R=i.flip)==null?void 0:R.index)||0)+1,ie=N[H];if(ie)return{data:{index:H,overflows:k},reset:{placement:ie}};let Z=(M=k.filter(X=>X.overflows[0]<=0).sort((X,L)=>X.overflows[1]-L.overflows[1])[0])==null?void 0:M.placement;if(!Z)switch(v){case"bestFit":{var A;const X=(A=k.filter(L=>{if(D){const W=Ni(L.placement);return W===y||W==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(W=>W>0).reduce((W,z)=>W+z,0)]).sort((L,W)=>L[1]-W[1])[0])==null?void 0:A[0];X&&(Z=X);break}case"initialPlacement":Z=l;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}};function hb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function fb(t){return P5.some(e=>t[e]>=0)}const H5=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ws(t,e);switch(r){case"referenceHidden":{const i=await Bc(e,{...s,elementContext:"reference"}),o=hb(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:fb(o)}}}case"escaped":{const i=await Bc(e,{...s,altBoundary:!0}),o=hb(i,n.floating);return{data:{escapedOffsets:o,escaped:fb(o)}}}default:return{}}}}};async function W5(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=bs(n),l=al(n),c=Ni(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=ws(e,t);let{mainAxis:p,crossAxis:v,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(v=l==="end"?b*-1:b),c?{x:v*h,y:p*u}:{x:p*u,y:v*h}}const q5=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await W5(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},G5=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:_=>{let{x:w,y}=_;return{x:w,y}}},...c}=ws(t,e),u={x:n,y:r},h=await Bc(e,c),f=Ni(bs(s)),p=ix(f);let v=u[p],b=u[f];if(i){const _=p==="y"?"top":"left",w=p==="y"?"bottom":"right",y=v+h[_],S=v-h[w];v=ly(y,v,S)}if(o){const _=f==="y"?"top":"left",w=f==="y"?"bottom":"right",y=b+h[_],S=b-h[w];b=ly(y,b,S)}const x=l.fn({...e,[p]:v,[f]:b});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:i,[f]:o}}}}}},K5=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ws(t,e),h={x:n,y:r},f=Ni(s),p=ix(f);let v=h[p],b=h[f];const x=ws(l,e),_=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const S=p==="y"?"height":"width",I=i.reference[p]-i.floating[S]+_.mainAxis,P=i.reference[p]+i.reference[S]-_.mainAxis;v<I?v=I:v>P&&(v=P)}if(u){var w,y;const S=p==="y"?"width":"height",I=["top","left"].includes(bs(s)),P=i.reference[f]-i.floating[S]+(I&&((w=o.offset)==null?void 0:w[f])||0)+(I?0:_.crossAxis),D=i.reference[f]+i.reference[S]+(I?0:((y=o.offset)==null?void 0:y[f])||0)-(I?_.crossAxis:0);b<P?b=P:b>D&&(b=D)}return{[p]:v,[f]:b}}}},Q5=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ws(t,e),h=await Bc(e,u),f=bs(s),p=al(s),v=Ni(s)==="y",{width:b,height:x}=i.floating;let _,w;f==="top"||f==="bottom"?(_=f,w=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,_=p==="end"?"top":"bottom");const y=x-h.top-h.bottom,S=b-h.left-h.right,I=Ti(x-h[_],y),P=Ti(b-h[w],S),D=!e.middlewareData.shift;let N=I,E=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(E=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=y),D&&!p){const k=An(h.left,0),R=An(h.right,0),M=An(h.top,0),A=An(h.bottom,0);v?E=b-2*(k!==0||R!==0?k+R:An(h.left,h.right)):N=x-2*(M!==0||A!==0?M+A:An(h.top,h.bottom))}await c({...e,availableWidth:E,availableHeight:N});const C=await o.getDimensions(l.floating);return b!==C.width||x!==C.height?{reset:{rects:!0}}:{}}}};function Bf(){return typeof window<"u"}function ll(t){return vC(t)?(t.nodeName||"").toLowerCase():"#document"}function Mn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Xr(t){var e;return(e=(vC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function vC(t){return Bf()?t instanceof Node||t instanceof Mn(t).Node:!1}function xr(t){return Bf()?t instanceof Element||t instanceof Mn(t).Element:!1}function Kr(t){return Bf()?t instanceof HTMLElement||t instanceof Mn(t).HTMLElement:!1}function mb(t){return!Bf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Mn(t).ShadowRoot}function gu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=wr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function Y5(t){return["table","td","th"].includes(ll(t))}function Hf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function lx(t){const e=cx(),n=xr(t)?wr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function X5(t){let e=Ci(t);for(;Kr(e)&&!qa(e);){if(lx(e))return e;if(Hf(e))return null;e=Ci(e)}return null}function cx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function qa(t){return["html","body","#document"].includes(ll(t))}function wr(t){return Mn(t).getComputedStyle(t)}function Wf(t){return xr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ci(t){if(ll(t)==="html")return t;const e=t.assignedSlot||t.parentNode||mb(t)&&t.host||Xr(t);return mb(e)?e.host:e}function xC(t){const e=Ci(t);return qa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Kr(e)&&gu(e)?e:xC(e)}function Hc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=xC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Mn(s);if(i){const l=uy(o);return e.concat(o,o.visualViewport||[],gu(s)?s:[],l&&n?Hc(l):[])}return e.concat(s,Hc(s,[],n))}function uy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function wC(t){const e=wr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Kr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Oh(n)!==i||Oh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function ux(t){return xr(t)?t:t.contextElement}function va(t){const e=ux(t);if(!Kr(e))return Hr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=wC(e);let o=(i?Oh(n.width):n.width)/r,l=(i?Oh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const J5=Hr(0);function bC(t){const e=Mn(t);return!cx()||!e.visualViewport?J5:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Z5(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Mn(t)?!1:e}function Co(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=ux(t);let o=Hr(1);e&&(r?xr(r)&&(o=va(r)):o=va(t));const l=Z5(i,n,r)?bC(i):Hr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=Mn(i),v=r&&xr(r)?Mn(r):r;let b=p,x=uy(b);for(;x&&r&&v!==b;){const _=va(x),w=x.getBoundingClientRect(),y=wr(x),S=w.left+(x.clientLeft+parseFloat(y.paddingLeft))*_.x,I=w.top+(x.clientTop+parseFloat(y.paddingTop))*_.y;c*=_.x,u*=_.y,h*=_.x,f*=_.y,c+=S,u+=I,b=Mn(x),x=uy(b)}}return Vh({width:h,height:f,x:c,y:u})}function dx(t,e){const n=Wf(t).scrollLeft;return e?e.left+n:Co(Xr(t)).left+n}function _C(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:dx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function eL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Xr(r),l=e?Hf(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Hr(1);const h=Hr(0),f=Kr(r);if((f||!f&&!i)&&((ll(r)!=="body"||gu(o))&&(c=Wf(r)),Kr(r))){const v=Co(r);u=va(r),h.x=v.x+r.clientLeft,h.y=v.y+r.clientTop}const p=o&&!f&&!i?_C(o,c,!0):Hr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function tL(t){return Array.from(t.getClientRects())}function nL(t){const e=Xr(t),n=Wf(t),r=t.ownerDocument.body,s=An(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=An(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dx(t);const l=-n.scrollTop;return wr(r).direction==="rtl"&&(o+=An(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function rL(t,e){const n=Mn(t),r=Xr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=cx();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function sL(t,e){const n=Co(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Kr(t)?va(t):Hr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function pb(t,e,n){let r;if(e==="viewport")r=rL(t,n);else if(e==="document")r=nL(Xr(t));else if(xr(e))r=sL(e,n);else{const s=bC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Vh(r)}function EC(t,e){const n=Ci(t);return n===e||!xr(n)||qa(n)?!1:wr(n).position==="fixed"||EC(n,e)}function iL(t,e){const n=e.get(t);if(n)return n;let r=Hc(t,[],!1).filter(l=>xr(l)&&ll(l)!=="body"),s=null;const i=wr(t).position==="fixed";let o=i?Ci(t):t;for(;xr(o)&&!qa(o);){const l=wr(o),c=lx(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||gu(o)&&!c&&EC(t,o))?r=r.filter(h=>h!==o):s=l,o=Ci(o)}return e.set(t,r),r}function oL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Hf(e)?[]:iL(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=pb(e,h,s);return u.top=An(f.top,u.top),u.right=Ti(f.right,u.right),u.bottom=Ti(f.bottom,u.bottom),u.left=An(f.left,u.left),u},pb(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function aL(t){const{width:e,height:n}=wC(t);return{width:e,height:n}}function lL(t,e,n){const r=Kr(e),s=Xr(e),i=n==="fixed",o=Co(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Hr(0);if(r||!r&&!i)if((ll(e)!=="body"||gu(s))&&(l=Wf(e)),r){const p=Co(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=dx(s));const u=s&&!r&&!i?_C(s,l):Hr(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function jp(t){return wr(t).position==="static"}function gb(t,e){if(!Kr(t)||wr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Xr(t)===n&&(n=n.ownerDocument.body),n}function SC(t,e){const n=Mn(t);if(Hf(t))return n;if(!Kr(t)){let s=Ci(t);for(;s&&!qa(s);){if(xr(s)&&!jp(s))return s;s=Ci(s)}return n}let r=gb(t,e);for(;r&&Y5(r)&&jp(r);)r=gb(r,e);return r&&qa(r)&&jp(r)&&!lx(r)?n:r||X5(t)||n}const cL=async function(t){const e=this.getOffsetParent||SC,n=this.getDimensions,r=await n(t.floating);return{reference:lL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function uL(t){return wr(t).direction==="rtl"}const dL={convertOffsetParentRelativeRectToViewportRelativeRect:eL,getDocumentElement:Xr,getClippingRect:oL,getOffsetParent:SC,getElementRects:cL,getClientRects:tL,getDimensions:aL,getScale:va,isElement:xr,isRTL:uL};function TC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function hL(t,e){let n=null,r;const s=Xr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:v}=u;if(l||e(),!p||!v)return;const b=yd(f),x=yd(s.clientWidth-(h+p)),_=yd(s.clientHeight-(f+v)),w=yd(h),S={rootMargin:-b+"px "+-x+"px "+-_+"px "+-w+"px",threshold:An(0,Ti(1,c))||1};let I=!0;function P(D){const N=D[0].intersectionRatio;if(N!==c){if(!I)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!TC(u,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(P,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,S)}n.observe(t)}return o(!0),i}function fL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=ux(t),h=s||i?[...u?Hc(u):[],...Hc(e)]:[];h.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const f=u&&l?hL(u,n):null;let p=-1,v=null;o&&(v=new ResizeObserver(w=>{let[y]=w;y&&y.target===u&&v&&(v.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=v)==null||S.observe(e)})),n()}),u&&!c&&v.observe(u),v.observe(e));let b,x=c?Co(t):null;c&&_();function _(){const w=Co(t);x&&!TC(x,w)&&n(),x=w,b=requestAnimationFrame(_)}return n(),()=>{var w;h.forEach(y=>{s&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),f==null||f(),(w=v)==null||w.disconnect(),v=null,c&&cancelAnimationFrame(b)}}const mL=q5,pL=G5,gL=B5,yL=Q5,vL=H5,yb=$5,xL=K5,wL=(t,e,n)=>{const r=new Map,s={platform:dL,...n},i={...s.platform,_c:r};return U5(t,e,{...s,platform:i})};var Kd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Fh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Fh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Fh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function NC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function vb(t,e){const n=NC(t);return Math.round(e*n)/n}function Rp(t){const e=m.useRef(t);return Kd(()=>{e.current=t}),e}function bL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,v]=m.useState(r);Fh(p,r)||v(r);const[b,x]=m.useState(null),[_,w]=m.useState(null),y=m.useCallback(L=>{L!==D.current&&(D.current=L,x(L))},[]),S=m.useCallback(L=>{L!==N.current&&(N.current=L,w(L))},[]),I=i||b,P=o||_,D=m.useRef(null),N=m.useRef(null),E=m.useRef(h),C=c!=null,k=Rp(c),R=Rp(s),M=Rp(u),A=m.useCallback(()=>{if(!D.current||!N.current)return;const L={placement:e,strategy:n,middleware:p};R.current&&(L.platform=R.current),wL(D.current,N.current,L).then(W=>{const z={...W,isPositioned:M.current!==!1};H.current&&!Fh(E.current,z)&&(E.current=z,qn.flushSync(()=>{f(z)}))})},[p,e,n,R,M]);Kd(()=>{u===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[u]);const H=m.useRef(!1);Kd(()=>(H.current=!0,()=>{H.current=!1}),[]),Kd(()=>{if(I&&(D.current=I),P&&(N.current=P),I&&P){if(k.current)return k.current(I,P,A);A()}},[I,P,A,k,C]);const ie=m.useMemo(()=>({reference:D,floating:N,setReference:y,setFloating:S}),[y,S]),Z=m.useMemo(()=>({reference:I,floating:P}),[I,P]),X=m.useMemo(()=>{const L={position:n,left:0,top:0};if(!Z.floating)return L;const W=vb(Z.floating,h.x),z=vb(Z.floating,h.y);return l?{...L,transform:"translate("+W+"px, "+z+"px)",...NC(Z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:z}},[n,l,Z.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:A,refs:ie,elements:Z,floatingStyles:X}),[h,A,ie,Z,X])}const _L=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?yb({element:r.current,padding:s}).fn(n):{}:r?yb({element:r,padding:s}).fn(n):{}}}},EL=(t,e)=>({...mL(t),options:[t,e]}),SL=(t,e)=>({...pL(t),options:[t,e]}),TL=(t,e)=>({...xL(t),options:[t,e]}),NL=(t,e)=>({...gL(t),options:[t,e]}),CL=(t,e)=>({...yL(t),options:[t,e]}),IL=(t,e)=>({...vL(t),options:[t,e]}),kL=(t,e)=>({..._L(t),options:[t,e]});var AL="Arrow",CC=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(xe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});CC.displayName=AL;var jL=CC;function IC(t){const[e,n]=m.useState(void 0);return It(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var hx="Popper",[kC,qf]=Nr(hx),[RL,AC]=kC(hx),jC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(RL,{scope:e,anchor:r,onAnchorChange:s,children:n})};jC.displayName=hx;var RC="PopperAnchor",PC=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=AC(RC,n),o=m.useRef(null),l=Be(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(xe.div,{...s,ref:l})});PC.displayName=RC;var fx="PopperContent",[PL,DL]=kC(fx),DC=m.forwardRef((t,e)=>{var B,ne,ae,re,se,ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:v="optimized",onPlaced:b,...x}=t,_=AC(fx,n),[w,y]=m.useState(null),S=Be(e,Ae=>y(Ae)),[I,P]=m.useState(null),D=IC(I),N=(D==null?void 0:D.width)??0,E=(D==null?void 0:D.height)??0,C=r+(i!=="center"?"-"+i:""),k=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(u)?u:[u],M=R.length>0,A={padding:k,boundary:R.filter(OL),altBoundary:M},{refs:H,floatingStyles:ie,placement:Z,isPositioned:X,middlewareData:L}=bL({strategy:"fixed",placement:C,whileElementsMounted:(...Ae)=>fL(...Ae,{animationFrame:v==="always"}),elements:{reference:_.anchor},middleware:[EL({mainAxis:s+E,alignmentAxis:o}),c&&SL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?TL():void 0,...A}),c&&NL({...A}),CL({...A,apply:({elements:Ae,rects:je,availableWidth:De,availableHeight:Ne})=>{const{width:it,height:Sn}=je.reference,We=Ae.floating.style;We.setProperty("--radix-popper-available-width",`${De}px`),We.setProperty("--radix-popper-available-height",`${Ne}px`),We.setProperty("--radix-popper-anchor-width",`${it}px`),We.setProperty("--radix-popper-anchor-height",`${Sn}px`)}}),I&&kL({element:I,padding:l}),LL({arrowWidth:N,arrowHeight:E}),p&&IL({strategy:"referenceHidden",...A})]}),[W,z]=LC(Z),U=ln(b);It(()=>{X&&(U==null||U())},[X,U]);const J=(B=L.arrow)==null?void 0:B.x,Y=(ne=L.arrow)==null?void 0:ne.y,Q=((ae=L.arrow)==null?void 0:ae.centerOffset)!==0,[te,V]=m.useState();return It(()=>{w&&V(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:X?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(re=L.transformOrigin)==null?void 0:re.x,(se=L.transformOrigin)==null?void 0:se.y].join(" "),...((ce=L.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(PL,{scope:n,placedSide:W,onArrowChange:P,arrowX:J,arrowY:Y,shouldHideArrow:Q,children:a.jsx(xe.div,{"data-side":W,"data-align":z,...x,ref:S,style:{...x.style,animation:X?void 0:"none"}})})})});DC.displayName=fx;var MC="PopperArrow",ML={top:"bottom",right:"left",bottom:"top",left:"right"},OC=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=DL(MC,r),o=ML[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(jL,{...s,ref:n,style:{...s.style,display:"block"}})})});OC.displayName=MC;function OL(t){return t!==null}var LL=t=>({name:"transformOrigin",options:t,fn(e){var _,w,y;const{placement:n,rects:r,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=LC(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,v=(((y=s.arrow)==null?void 0:y.y)??0)+c/2;let b="",x="";return u==="bottom"?(b=o?f:`${p}px`,x=`${-c}px`):u==="top"?(b=o?f:`${p}px`,x=`${r.floating.height+c}px`):u==="right"?(b=`${-c}px`,x=o?f:`${v}px`):u==="left"&&(b=`${r.floating.width+c}px`,x=o?f:`${v}px`),{data:{x:b,y:x}}}});function LC(t){const[e,n="center"]=t.split("-");return[e,n]}var VC=jC,FC=PC,zC=DC,UC=OC,[Gf,$W]=Nr("Tooltip",[qf]),Kf=qf(),$C="TooltipProvider",VL=700,dy="tooltip.open",[FL,mx]=Gf($C),BC=t=>{const{__scopeTooltip:e,delayDuration:n=VL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(FL,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};BC.displayName=$C;var Qf="Tooltip",[zL,yu]=Gf(Qf),HC=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=mx(Qf,t.__scopeTooltip),u=Kf(e),[h,f]=m.useState(null),p=fs(),v=m.useRef(0),b=o??c.disableHoverableContent,x=l??c.delayDuration,_=m.useRef(!1),[w=!1,y]=Si({prop:r,defaultProp:s,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(dy))):c.onClose(),i==null||i(N)}}),S=m.useMemo(()=>w?_.current?"delayed-open":"instant-open":"closed",[w]),I=m.useCallback(()=>{window.clearTimeout(v.current),v.current=0,_.current=!1,y(!0)},[y]),P=m.useCallback(()=>{window.clearTimeout(v.current),v.current=0,y(!1)},[y]),D=m.useCallback(()=>{window.clearTimeout(v.current),v.current=window.setTimeout(()=>{_.current=!0,y(!0),v.current=0},x)},[x,y]);return m.useEffect(()=>()=>{v.current&&(window.clearTimeout(v.current),v.current=0)},[]),a.jsx(VC,{...u,children:a.jsx(zL,{scope:e,contentId:p,open:w,stateAttribute:S,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?D():I()},[c.isOpenDelayedRef,D,I]),onTriggerLeave:m.useCallback(()=>{b?P():(window.clearTimeout(v.current),v.current=0)},[P,b]),onOpen:I,onClose:P,disableHoverableContent:b,children:n})})};HC.displayName=Qf;var hy="TooltipTrigger",WC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=yu(hy,n),i=mx(hy,n),o=Kf(n),l=m.useRef(null),c=Be(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(FC,{asChild:!0,...o,children:a.jsx(xe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:pe(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:pe(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:pe(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:pe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:pe(t.onBlur,s.onClose),onClick:pe(t.onClick,s.onClose)})})});WC.displayName=hy;var px="TooltipPortal",[UL,$L]=Gf(px,{forceMount:void 0}),qC=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=yu(px,e);return a.jsx(UL,{scope:e,forceMount:n,children:a.jsx(zi,{present:n||i.open,children:a.jsx(fu,{asChild:!0,container:s,children:r})})})};qC.displayName=px;var Ga="TooltipContent",GC=m.forwardRef((t,e)=>{const n=$L(Ga,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=yu(Ga,t.__scopeTooltip);return a.jsx(zi,{present:r||o.open,children:o.disableHoverableContent?a.jsx(KC,{side:s,...i,ref:e}):a.jsx(BL,{side:s,...i,ref:e})})}),BL=m.forwardRef((t,e)=>{const n=yu(Ga,t.__scopeTooltip),r=mx(Ga,t.__scopeTooltip),s=m.useRef(null),i=Be(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),v=m.useCallback((b,x)=>{const _=b.currentTarget,w={x:b.clientX,y:b.clientY},y=KL(w,_.getBoundingClientRect()),S=QL(w,y),I=YL(x.getBoundingClientRect()),P=JL([...S,...I]);l(P),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const b=_=>v(_,h),x=_=>v(_,c);return c.addEventListener("pointerleave",b),h.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",x)}}},[c,h,v,p]),m.useEffect(()=>{if(o){const b=x=>{const _=x.target,w={x:x.clientX,y:x.clientY},y=(c==null?void 0:c.contains(_))||(h==null?void 0:h.contains(_)),S=!XL(w,o);y?p():S&&(p(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,h,o,u,p]),a.jsx(KC,{...t,ref:i})}),[HL,WL]=Gf(Qf,{isInside:!1}),qL=wN("TooltipContent"),KC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=yu(Ga,n),u=Kf(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(dy,h),()=>document.removeEventListener(dy,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const v=p.target;v!=null&&v.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(hu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(zC,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(qL,{children:r}),a.jsx(HL,{scope:n,isInside:!0,children:a.jsx(nO,{id:c.contentId,role:"tooltip",children:s||r})})]})})});GC.displayName=Ga;var QC="TooltipArrow",GL=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Kf(n);return WL(QC,n).isInside?null:a.jsx(UC,{...s,...r,ref:e})});GL.displayName=QC;function KL(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function QL(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function YL(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function XL(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function JL(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),ZL(e)}function ZL(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var e3=BC,t3=HC,n3=WC,YC=qC,XC=GC;const Yf=e3,Xf=t3,Jf=n3,vu=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(XC,{ref:r,sideOffset:e,className:$("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));vu.displayName=XC.displayName;const r3="modulepreload",s3=function(t){return"/"+t},xb={},vd=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=s3(c),c in xb)return;xb[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":r3,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,v)=>{f.addEventListener("load",p),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},i3=()=>{};var wb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},o3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ZC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,v=u&63;c||(v=64,o||(p=64)),r.push(n[h],n[f],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):o3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new a3;const p=i<<2|l>>4;if(r.push(p),u!==64){const v=l<<4&240|u>>2;if(r.push(v),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class a3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l3=function(t){const e=JC(t);return ZC.encodeByteArray(e,!0)},zh=function(t){return l3(t).replace(/\./g,"")},eI=function(t){try{return ZC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=()=>c3().__FIREBASE_DEFAULTS__,d3=()=>{if(typeof process>"u"||typeof wb>"u")return;const t=wb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},h3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eI(t[1]);return e&&JSON.parse(e)},Zf=()=>{try{return i3()||u3()||d3()||h3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tI=t=>{var e,n;return(n=(e=Zf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},f3=t=>{const e=tI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nI=()=>{var t;return(t=Zf())==null?void 0:t.config},rI=t=>{var e;return(e=Zf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[zh(JSON.stringify(n)),zh(JSON.stringify(o)),""].join(".")}const dc={};function g3(){const t={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?t.emulator.push(e):t.prod.push(e);return t}function y3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let bb=!1;function iI(t,e){if(typeof window>"u"||typeof document>"u"||!cl(window.location.host)||dc[t]===e||dc[t]||bb)return;dc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=g3().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{bb=!0,o()},p}function h(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=y3(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),x=n("learnmore"),_=document.getElementById(x)||document.createElement("a"),w=n("preprendIcon"),y=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;l(S),h(_,x);const I=u();c(y,w),S.append(y,b,_,I),document.body.appendChild(S)}i?(b.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function x3(){var e;const t=(e=Zf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function b3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function E3(){const t=en();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S3(){return!x3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T3(){try{return typeof indexedDB=="object"}catch{return!1}}function N3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="FirebaseError";class Is extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C3,Object.setPrototypeOf(this,Is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?I3(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Is(s,l,r)}}function I3(t,e){return t.replace(k3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const k3=/\{\$([^}]+)}/g;function A3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ii(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(_b(i)&&_b(o)){if(!Ii(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _b(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function j3(t,e){const n=new R3(t,e);return n.subscribe.bind(n)}class R3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");P3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Pp),s.error===void 0&&(s.error=Pp),s.complete===void 0&&(s.complete=Pp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class Io{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new m3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O3(e))try{this.getOrInitializeService({instanceIdentifier:ro})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ro){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ro){return this.instances.has(e)}getOptions(e=ro){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:M3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ro){return this.component?this.component.multipleInstances?e:ro:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function M3(t){return t===ro?void 0:t}function O3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new D3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const V3={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},F3=Ce.INFO,z3={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},U3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=z3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gx{constructor(e){this.name=e,this._logLevel=F3,this._logHandler=U3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?V3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const $3=(t,e)=>e.some(n=>t instanceof n);let Eb,Sb;function B3(){return Eb||(Eb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H3(){return Sb||(Sb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oI=new WeakMap,fy=new WeakMap,aI=new WeakMap,Dp=new WeakMap,yx=new WeakMap;function W3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(pi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&oI.set(n,t)}).catch(()=>{}),yx.set(e,t),e}function q3(t){if(fy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});fy.set(t,e)}let my={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||aI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function G3(t){my=t(my)}function K3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mp(this),e,...n);return aI.set(r,e.sort?e.sort():[e]),pi(r)}:H3().includes(t)?function(...e){return t.apply(Mp(this),e),pi(oI.get(this))}:function(...e){return pi(t.apply(Mp(this),e))}}function Q3(t){return typeof t=="function"?K3(t):(t instanceof IDBTransaction&&q3(t),$3(t,B3())?new Proxy(t,my):t)}function pi(t){if(t instanceof IDBRequest)return W3(t);if(Dp.has(t))return Dp.get(t);const e=Q3(t);return e!==t&&(Dp.set(t,e),yx.set(e,t)),e}const Mp=t=>yx.get(t);function Y3(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=pi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(pi(o.result),c.oldVersion,c.newVersion,pi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const X3=["get","getKey","getAll","getAllKeys","count"],J3=["put","add","delete","clear"],Op=new Map;function Tb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Op.get(e))return Op.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=J3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||X3.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Op.set(e,i),i}G3(t=>({...t,get:(e,n,r)=>Tb(e,n)||t.get(e,n,r),has:(e,n)=>!!Tb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function e6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const py="@firebase/app",Nb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new gx("@firebase/app"),t6="@firebase/app-compat",n6="@firebase/analytics-compat",r6="@firebase/analytics",s6="@firebase/app-check-compat",i6="@firebase/app-check",o6="@firebase/auth",a6="@firebase/auth-compat",l6="@firebase/database",c6="@firebase/data-connect",u6="@firebase/database-compat",d6="@firebase/functions",h6="@firebase/functions-compat",f6="@firebase/installations",m6="@firebase/installations-compat",p6="@firebase/messaging",g6="@firebase/messaging-compat",y6="@firebase/performance",v6="@firebase/performance-compat",x6="@firebase/remote-config",w6="@firebase/remote-config-compat",b6="@firebase/storage",_6="@firebase/storage-compat",E6="@firebase/firestore",S6="@firebase/ai",T6="@firebase/firestore-compat",N6="firebase",C6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="[DEFAULT]",I6={[py]:"fire-core",[t6]:"fire-core-compat",[r6]:"fire-analytics",[n6]:"fire-analytics-compat",[i6]:"fire-app-check",[s6]:"fire-app-check-compat",[o6]:"fire-auth",[a6]:"fire-auth-compat",[l6]:"fire-rtdb",[c6]:"fire-data-connect",[u6]:"fire-rtdb-compat",[d6]:"fire-fn",[h6]:"fire-fn-compat",[f6]:"fire-iid",[m6]:"fire-iid-compat",[p6]:"fire-fcm",[g6]:"fire-fcm-compat",[y6]:"fire-perf",[v6]:"fire-perf-compat",[x6]:"fire-rc",[w6]:"fire-rc-compat",[b6]:"fire-gcs",[_6]:"fire-gcs-compat",[E6]:"fire-fst",[T6]:"fire-fst-compat",[S6]:"fire-vertex","fire-js":"fire-js",[N6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new Map,k6=new Map,yy=new Map;function Cb(t,e){try{t.container.addComponent(e)}catch(n){_s.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ka(t){const e=t.name;if(yy.has(e))return _s.debug(`There were multiple attempts to register component ${e}.`),!1;yy.set(e,t);for(const n of Uh.values())Cb(n,t);for(const n of k6.values())Cb(n,t);return!0}function vx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function lr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new xu("app","Firebase",A6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=C6;function lI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:gy,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw gi.create("bad-app-name",{appName:String(s)});if(n||(n=nI()),!n)throw gi.create("no-options");const i=Uh.get(s);if(i){if(Ii(n,i.options)&&Ii(r,i.config))return i;throw gi.create("duplicate-app",{appName:s})}const o=new L3(s);for(const c of yy.values())o.addComponent(c);const l=new j6(n,r,o);return Uh.set(s,l),l}function cI(t=gy){const e=Uh.get(t);if(!e&&t===gy&&nI())return lI();if(!e)throw gi.create("no-app",{appName:t});return e}function yi(t,e,n){let r=I6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_s.warn(o.join(" "));return}Ka(new Io(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6="firebase-heartbeat-database",P6=1,Wc="firebase-heartbeat-store";let Lp=null;function uI(){return Lp||(Lp=Y3(R6,P6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wc)}catch(n){console.warn(n)}}}}).catch(t=>{throw gi.create("idb-open",{originalErrorMessage:t.message})})),Lp}async function D6(t){try{const n=(await uI()).transaction(Wc),r=await n.objectStore(Wc).get(dI(t));return await n.done,r}catch(e){if(e instanceof Is)_s.warn(e.message);else{const n=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});_s.warn(n.message)}}}async function Ib(t,e){try{const r=(await uI()).transaction(Wc,"readwrite");await r.objectStore(Wc).put(e,dI(t)),await r.done}catch(n){if(n instanceof Is)_s.warn(n.message);else{const r=gi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});_s.warn(r.message)}}}function dI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6=1024,O6=30;class L6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new F6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=kb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>O6){const o=z6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){_s.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kb(),{heartbeatsToSend:r,unsentEntries:s}=V6(this._heartbeatsCache.heartbeats),i=zh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return _s.warn(n),""}}}function kb(){return new Date().toISOString().substring(0,10)}function V6(t,e=M6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Ab(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ab(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class F6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return T3()?N3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await D6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ib(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ab(t){return zh(JSON.stringify({version:2,heartbeats:t})).length}function z6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t){Ka(new Io("platform-logger",e=>new Z3(e),"PRIVATE")),Ka(new Io("heartbeat",e=>new L6(e),"PRIVATE")),yi(py,Nb,t),yi(py,Nb,"esm2020"),yi("fire-js","")}U6("");function hI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $6=hI,fI=new xu("auth","Firebase",hI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=new gx("@firebase/auth");function B6(t,...e){$h.logLevel<=Ce.WARN&&$h.warn(`Auth (${ul}): ${t}`,...e)}function Qd(t,...e){$h.logLevel<=Ce.ERROR&&$h.error(`Auth (${ul}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t,...e){throw wx(t,...e)}function fr(t,...e){return wx(t,...e)}function xx(t,e,n){const r={...$6(),[e]:n};return new xu("auth","Firebase",r).create(e,{appName:t.name})}function vo(t){return xx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function H6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qr(t,"argument-error"),xx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fI.create(t,...e)}function ye(t,e,...n){if(!t)throw wx(e,...n)}function us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qd(e),new Error(e)}function Es(t,e){t||us(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function W6(){return jb()==="http:"||jb()==="https:"}function jb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W6()||b3()||"connection"in navigator)?navigator.onLine:!0}function G6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Es(n>e,"Short delay should be less than long delay!"),this.isMobile=v3()||_3()}get(){return q6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t,e){Es(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Y6=new bu(3e4,6e4);function _x(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function dl(t,e,n,r,s={}){return pI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=wu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return w3()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&cl(t.emulatorConfig.host)&&(u.credentials="include"),mI.fetch()(await gI(t,t.config.apiHost,n,l),u)})}async function pI(t,e,n){t._canInitEmulator=!1;const r={...K6,...e};try{const s=new J6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw xd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw xd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw xd(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xx(t,h,u);Qr(t,h)}}catch(s){if(s instanceof Is)throw s;Qr(t,"network-request-failed",{message:String(s)})}}async function X6(t,e,n,r,s={}){const i=await dl(t,e,n,r,s);return"mfaPendingCredential"in i&&Qr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function gI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?bx(t.config,s):`${t.config.apiScheme}://${s}`;return Q6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class J6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fr(this.auth,"network-request-failed")),Y6.get())})}}function xd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=fr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(t,e){return dl(t,"POST","/v1/accounts:delete",e)}async function Bh(t,e){return dl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eV(t,e=!1){const n=Mt(t),r=await n.getIdToken(e),s=Ex(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:hc(Vp(s.auth_time)),issuedAtTime:hc(Vp(s.iat)),expirationTime:hc(Vp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Vp(t){return Number(t)*1e3}function Ex(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qd("JWT malformed, contained fewer than 3 sections"),null;try{const s=eI(n);return s?JSON.parse(s):(Qd("Failed to decode base64 JWT payload"),null)}catch(s){return Qd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Rb(t){const e=Ex(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Is&&tV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=hc(this.lastLoginAt),this.creationTime=hc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await qc(t,Bh(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?yI(s.providerUserInfo):[],o=sV(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new xy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function rV(t){const e=Mt(t);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function yI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iV(t,e){const n=await pI(t,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await gI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&cl(t.emulatorConfig.host)&&(c.credentials="include"),mI.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oV(t,e){return dl(t,"POST","/v2/accounts:revokeToken",_x(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=Rb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await iV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new xa;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new nV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new xy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await qc(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eV(this,e)}reload(){return rV(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(lr(this.auth.app))return Promise.reject(vo(this.auth));const e=await this.getIdToken();return await qc(this,Z6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:v,providerData:b,stsTokenManager:x}=n;ye(f&&x,e,"internal-error");const _=xa.fromJSON(this.name,x);ye(typeof f=="string",e,"internal-error"),Us(r,e.name),Us(s,e.name),ye(typeof p=="boolean",e,"internal-error"),ye(typeof v=="boolean",e,"internal-error"),Us(i,e.name),Us(o,e.name),Us(l,e.name),Us(c,e.name),Us(u,e.name),Us(h,e.name);const w=new cr({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:h});return b&&Array.isArray(b)&&(w.providerData=b.map(y=>({...y}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new xa;s.updateFromServerResponse(n);const i=new cr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?yI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new xa;l.updateFromIdToken(r);const c=new cr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new xy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb=new Map;function ds(t){Es(t instanceof Function,"Expected a class definition");let e=Pb.get(t);return e?(Es(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Pb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}vI.type="NONE";const Db=vI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(t,e,n){return`firebase:${t}:${e}:${n}`}class wa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Yd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Yd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Bh(this.auth,{idToken:e}).catch(()=>{});return n?cr._fromGetAccountInfoResponse(this.auth,n,e):null}return cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wa(ds(Db),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||ds(Db);const o=Yd(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await Bh(e,{idToken:h}).catch(()=>{});if(!p)break;f=await cr._fromGetAccountInfoResponse(e,p,h)}else f=cr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new wa(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new wa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_I(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(SI(e))return"Blackberry";if(TI(e))return"Webos";if(wI(e))return"Safari";if((e.includes("chrome/")||bI(e))&&!e.includes("edge/"))return"Chrome";if(EI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function xI(t=en()){return/firefox\//i.test(t)}function wI(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bI(t=en()){return/crios\//i.test(t)}function _I(t=en()){return/iemobile/i.test(t)}function EI(t=en()){return/android/i.test(t)}function SI(t=en()){return/blackberry/i.test(t)}function TI(t=en()){return/webos/i.test(t)}function Sx(t=en()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aV(t=en()){var e;return Sx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function lV(){return E3()&&document.documentMode===10}function NI(t=en()){return Sx(t)||EI(t)||TI(t)||SI(t)||/windows phone/i.test(t)||_I(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t,e=[]){let n;switch(t){case"Browser":n=Mb(en());break;case"Worker":n=`${Mb(en())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ul}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(t,e={}){return dl(t,"GET","/v2/passwordPolicy",_x(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=6;class hV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??dV,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ob(this),this.idTokenSubscription=new Ob(this),this.beforeStateQueue=new cV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ds(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await wa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Bh(this,{idToken:e}),r=await cr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(lr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=G6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(lr(this.app))return Promise.reject(vo(this));const n=e?Mt(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return lr(this.app)?Promise.reject(vo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return lr(this.app)?Promise.reject(vo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uV(this),n=new hV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ds(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await wa.create(this,[ds(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&B6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function em(t){return Mt(t)}class Ob{constructor(e){this.auth=e,this.observer=null,this.addObserver=j3(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mV(t){Tx=t}function pV(t){return Tx.loadJS(t)}function gV(){return Tx.gapiScript}function yV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t,e){const n=vx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ii(i,e??{}))return s;Qr(s,"already-initialized")}return n.initialize({options:e})}function xV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ds);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wV(t,e,n){const r=em(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=II(e),{host:o,port:l}=bV(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(Ii(u,r.config.emulator)&&Ii(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,cl(o)?(sI(`${i}//${o}${c}`),iI("Auth",!0)):_V()}function II(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bV(t){const e=II(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Lb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Lb(o)}}}function Lb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _V(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return us("not implemented")}_getIdTokenResponse(e){return us("not implemented")}_linkToIdToken(e,n){return us("not implemented")}_getReauthenticationResolver(e){return us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(t,e){return X6(t,"POST","/v1/accounts:signInWithIdp",_x(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="http://localhost";class ko extends kI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ko(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ba(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ba(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ba(e,n)}buildRequest(){const e={requestUri:EV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Nx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends _u{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qs.credential(e.oauthAccessToken)}catch{return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ko._fromParams({providerId:Yt.PROVIDER_ID,signInMethod:Yt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yt.credentialFromTaggedObject(e)}static credentialFromError(e){return Yt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yt.credential(n,r)}catch{return null}}}Yt.GOOGLE_SIGN_IN_METHOD="google.com";Yt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ys extends _u{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:Ys.PROVIDER_ID,signInMethod:Ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ys.credentialFromTaggedObject(e)}static credentialFromError(e){return Ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ys.credential(e.oauthAccessToken)}catch{return null}}}Ys.GITHUB_SIGN_IN_METHOD="github.com";Ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends _u{constructor(){super("twitter.com")}static credential(e,n){return ko._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Xs.credential(n,r)}catch{return null}}}Xs.TWITTER_SIGN_IN_METHOD="twitter.com";Xs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await cr._fromIdTokenResponse(e,r,s),o=Vb(r);return new Qa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Vb(r);return new Qa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Vb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends Is{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wh(e,n,r,s)}}function AI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(t,i,e,r):i})}async function SV(t,e,n=!1){const r=await qc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Qa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TV(t,e,n=!1){const{auth:r}=t;if(lr(r.app))return Promise.reject(vo(r));const s="reauthenticate";try{const i=await qc(t,AI(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=Ex(i.idToken);ye(o,r,"internal-error");const{sub:l}=o;return ye(t.uid===l,r,"user-mismatch"),Qa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e,n=!1){if(lr(t.app))return Promise.reject(vo(t));const r="signIn",s=await AI(t,r,e),i=await Qa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function CV(t,e,n,r){return Mt(t).onIdTokenChanged(e,n,r)}function IV(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function kV(t,e,n,r){return Mt(t).onAuthStateChanged(e,n,r)}function AV(t){return Mt(t).signOut()}const qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qh,"1"),this.storage.removeItem(qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=1e3,RV=10;class RI extends jI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);lV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RI.type="LOCAL";const PV=RI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI extends jI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PI.type="SESSION";const DI=PI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new tm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await DV(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Cx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(){return window}function OV(t){Wr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(){return typeof Wr().WorkerGlobalScope<"u"&&typeof Wr().importScripts=="function"}async function LV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function FV(){return MI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="firebaseLocalStorageDb",zV=1,Gh="firebaseLocalStorage",LI="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nm(t,e){return t.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function UV(){const t=indexedDB.deleteDatabase(OI);return new Eu(t).toPromise()}function wy(){const t=indexedDB.open(OI,zV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gh,{keyPath:LI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gh)?e(r):(r.close(),await UV(),e(await wy()))})})}async function Fb(t,e,n){const r=nm(t,!0).put({[LI]:e,value:n});return new Eu(r).toPromise()}async function $V(t,e){const n=nm(t,!1).get(e),r=await new Eu(n).toPromise();return r===void 0?null:r.value}function zb(t,e){const n=nm(t,!0).delete(e);return new Eu(n).toPromise()}const BV=800,HV=3;class VI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HV)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tm._getInstance(FV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await LV(),!this.activeServiceWorker)return;this.sender=new MV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wy();return await Fb(e,qh,"1"),await zb(e,qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>$V(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=nm(s,!1).getAll();return new Eu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),BV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VI.type="LOCAL";const WV=VI;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e){return e?ds(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends kI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ba(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ba(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qV(t){return NV(t.auth,new Ix(t),t.bypassAuthState)}function GV(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),TV(n,new Ix(t),t.bypassAuthState)}async function KV(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),SV(n,new Ix(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qV;case"linkViaPopup":case"linkViaRedirect":return KV;case"reauthViaPopup":case"reauthViaRedirect":return GV;default:Qr(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=new bu(2e3,1e4);async function wd(t,e,n){if(lr(t.app))return Promise.reject(fr(t,"operation-not-supported-in-this-environment"));const r=em(t);H6(t,e,Nx);const s=FI(r,n);return new lo(r,"signInViaPopup",e,s).executeNotNull()}class lo extends zI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=Cx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,QV.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YV="pendingRedirect",Xd=new Map;class XV extends zI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xd.get(this.auth._key());if(!e){try{const r=await JV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xd.set(this.auth._key(),e)}return this.bypassAuthState||Xd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function JV(t,e){const n=tF(e),r=eF(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ZV(t,e){Xd.set(t._key(),e)}function eF(t){return ds(t._redirectPersistence)}function tF(t){return Yd(YV,t.config.apiKey,t.name)}async function nF(t,e,n=!1){if(lr(t.app))return Promise.reject(vo(t));const r=em(t),s=FI(r,e),o=await new XV(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=10*60*1e3;class sF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!UI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(fr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rF&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ub(e))}saveEventToCache(e){this.cachedEventUids.add(Ub(e)),this.lastProcessedEventTime=Date.now()}}function Ub(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function UI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oF(t,e={}){return dl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lF=/^https?/;async function cF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oF(t);for(const n of e)try{if(uF(n))return}catch{}Qr(t,"unauthorized-domain")}function uF(t){const e=vy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!lF.test(n))return!1;if(aF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=new bu(3e4,6e4);function $b(){const t=Wr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hF(t){return new Promise((e,n)=>{var s,i,o;function r(){$b(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$b(),n(fr(t,"network-request-failed"))},timeout:dF.get()})}if((i=(s=Wr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Wr().gapi)!=null&&o.load)r();else{const l=yV("iframefcb");return Wr()[l]=()=>{gapi.load?r():n(fr(t,"network-request-failed"))},pV(`${gV()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Jd=null,e})}let Jd=null;function fF(t){return Jd=Jd||hF(t),Jd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=new bu(5e3,15e3),pF="__/auth/iframe",gF="emulator/auth/iframe",yF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xF(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bx(e,gF):`https://${t.config.authDomain}/${pF}`,r={apiKey:e.apiKey,appName:t.name,v:ul},s=vF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wu(r).slice(1)}`}async function wF(t){const e=await fF(t),n=Wr().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:xF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=fr(t,"network-request-failed"),l=Wr().setTimeout(()=>{i(o)},mF.get());function c(){Wr().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_F=500,EF=600,SF="_blank",TF="http://localhost";class Bb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NF(t,e,n,r=_F,s=EF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...bF,width:r.toString(),height:s.toString(),top:i,left:o},u=en().toLowerCase();n&&(l=bI(u)?SF:n),xI(u)&&(e=e||TF,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[v,b])=>`${p}${v}=${b},`,"");if(aV(u)&&l!=="_self")return CF(e||"",l),new Bb(null);const f=window.open(e||"",l,h);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new Bb(f)}function CF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF="__/auth/handler",kF="emulator/auth/handler",AF=encodeURIComponent("fac");async function Hb(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ul,eventId:s};if(e instanceof Nx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",A3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof _u){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${AF}=${encodeURIComponent(c)}`:"";return`${jF(t)}?${wu(l).slice(1)}${u}`}function jF({config:t}){return t.emulator?bx(t,kF):`https://${t.authDomain}/${IF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="webStorageSupport";class RF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DI,this._completeRedirectFn=nF,this._overrideRedirectResult=ZV}async _openPopup(e,n,r,s){var o;Es((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Hb(e,n,r,vy(),s);return NF(e,i,Cx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Hb(e,n,r,vy(),s);return OV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Es(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await wF(e),r=new sF(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fp,{type:Fp},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Fp];i!==void 0&&n(!!i),Qr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NI()||wI()||Sx()}}const PF=RF;var Wb="@firebase/auth",qb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OF(t){Ka(new Io("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CI(t)},u=new fV(r,s,i,c);return xV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ka(new Io("auth-internal",e=>{const n=em(e.getProvider("auth").getImmediate());return(r=>new DF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yi(Wb,qb,MF(t)),yi(Wb,qb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF=5*60,VF=rI("authIdTokenMaxAge")||LF;let Gb=null;const FF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>VF)return;const s=n==null?void 0:n.token;Gb!==s&&(Gb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zF(t=cI()){const e=vx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vV(t,{popupRedirectResolver:PF,persistence:[WV,PV,DI]}),r=rI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=FF(i.toString());IV(n,o,()=>o(n.currentUser)),CV(n,l=>o(l))}}const s=tI("auth");return s&&wV(n,`http://${s}`),n}function UF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}mV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=fr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",UF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OF("Browser");var $F="firebase",BF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi($F,BF,"app");var Kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vi,$I;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,E){function C(){}C.prototype=E.prototype,N.F=E.prototype,N.prototype=new C,N.prototype.constructor=N,N.D=function(k,R,M){for(var A=Array(arguments.length-2),H=2;H<arguments.length;H++)A[H-2]=arguments[H];return E.prototype[R].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,E,C){C||(C=0);const k=Array(16);if(typeof E=="string")for(var R=0;R<16;++R)k[R]=E.charCodeAt(C++)|E.charCodeAt(C++)<<8|E.charCodeAt(C++)<<16|E.charCodeAt(C++)<<24;else for(R=0;R<16;++R)k[R]=E[C++]|E[C++]<<8|E[C++]<<16|E[C++]<<24;E=N.g[0],C=N.g[1],R=N.g[2];let M=N.g[3],A;A=E+(M^C&(R^M))+k[0]+3614090360&4294967295,E=C+(A<<7&4294967295|A>>>25),A=M+(R^E&(C^R))+k[1]+3905402710&4294967295,M=E+(A<<12&4294967295|A>>>20),A=R+(C^M&(E^C))+k[2]+606105819&4294967295,R=M+(A<<17&4294967295|A>>>15),A=C+(E^R&(M^E))+k[3]+3250441966&4294967295,C=R+(A<<22&4294967295|A>>>10),A=E+(M^C&(R^M))+k[4]+4118548399&4294967295,E=C+(A<<7&4294967295|A>>>25),A=M+(R^E&(C^R))+k[5]+1200080426&4294967295,M=E+(A<<12&4294967295|A>>>20),A=R+(C^M&(E^C))+k[6]+2821735955&4294967295,R=M+(A<<17&4294967295|A>>>15),A=C+(E^R&(M^E))+k[7]+4249261313&4294967295,C=R+(A<<22&4294967295|A>>>10),A=E+(M^C&(R^M))+k[8]+1770035416&4294967295,E=C+(A<<7&4294967295|A>>>25),A=M+(R^E&(C^R))+k[9]+2336552879&4294967295,M=E+(A<<12&4294967295|A>>>20),A=R+(C^M&(E^C))+k[10]+4294925233&4294967295,R=M+(A<<17&4294967295|A>>>15),A=C+(E^R&(M^E))+k[11]+2304563134&4294967295,C=R+(A<<22&4294967295|A>>>10),A=E+(M^C&(R^M))+k[12]+1804603682&4294967295,E=C+(A<<7&4294967295|A>>>25),A=M+(R^E&(C^R))+k[13]+4254626195&4294967295,M=E+(A<<12&4294967295|A>>>20),A=R+(C^M&(E^C))+k[14]+2792965006&4294967295,R=M+(A<<17&4294967295|A>>>15),A=C+(E^R&(M^E))+k[15]+1236535329&4294967295,C=R+(A<<22&4294967295|A>>>10),A=E+(R^M&(C^R))+k[1]+4129170786&4294967295,E=C+(A<<5&4294967295|A>>>27),A=M+(C^R&(E^C))+k[6]+3225465664&4294967295,M=E+(A<<9&4294967295|A>>>23),A=R+(E^C&(M^E))+k[11]+643717713&4294967295,R=M+(A<<14&4294967295|A>>>18),A=C+(M^E&(R^M))+k[0]+3921069994&4294967295,C=R+(A<<20&4294967295|A>>>12),A=E+(R^M&(C^R))+k[5]+3593408605&4294967295,E=C+(A<<5&4294967295|A>>>27),A=M+(C^R&(E^C))+k[10]+38016083&4294967295,M=E+(A<<9&4294967295|A>>>23),A=R+(E^C&(M^E))+k[15]+3634488961&4294967295,R=M+(A<<14&4294967295|A>>>18),A=C+(M^E&(R^M))+k[4]+3889429448&4294967295,C=R+(A<<20&4294967295|A>>>12),A=E+(R^M&(C^R))+k[9]+568446438&4294967295,E=C+(A<<5&4294967295|A>>>27),A=M+(C^R&(E^C))+k[14]+3275163606&4294967295,M=E+(A<<9&4294967295|A>>>23),A=R+(E^C&(M^E))+k[3]+4107603335&4294967295,R=M+(A<<14&4294967295|A>>>18),A=C+(M^E&(R^M))+k[8]+1163531501&4294967295,C=R+(A<<20&4294967295|A>>>12),A=E+(R^M&(C^R))+k[13]+2850285829&4294967295,E=C+(A<<5&4294967295|A>>>27),A=M+(C^R&(E^C))+k[2]+4243563512&4294967295,M=E+(A<<9&4294967295|A>>>23),A=R+(E^C&(M^E))+k[7]+1735328473&4294967295,R=M+(A<<14&4294967295|A>>>18),A=C+(M^E&(R^M))+k[12]+2368359562&4294967295,C=R+(A<<20&4294967295|A>>>12),A=E+(C^R^M)+k[5]+4294588738&4294967295,E=C+(A<<4&4294967295|A>>>28),A=M+(E^C^R)+k[8]+2272392833&4294967295,M=E+(A<<11&4294967295|A>>>21),A=R+(M^E^C)+k[11]+1839030562&4294967295,R=M+(A<<16&4294967295|A>>>16),A=C+(R^M^E)+k[14]+4259657740&4294967295,C=R+(A<<23&4294967295|A>>>9),A=E+(C^R^M)+k[1]+2763975236&4294967295,E=C+(A<<4&4294967295|A>>>28),A=M+(E^C^R)+k[4]+1272893353&4294967295,M=E+(A<<11&4294967295|A>>>21),A=R+(M^E^C)+k[7]+4139469664&4294967295,R=M+(A<<16&4294967295|A>>>16),A=C+(R^M^E)+k[10]+3200236656&4294967295,C=R+(A<<23&4294967295|A>>>9),A=E+(C^R^M)+k[13]+681279174&4294967295,E=C+(A<<4&4294967295|A>>>28),A=M+(E^C^R)+k[0]+3936430074&4294967295,M=E+(A<<11&4294967295|A>>>21),A=R+(M^E^C)+k[3]+3572445317&4294967295,R=M+(A<<16&4294967295|A>>>16),A=C+(R^M^E)+k[6]+76029189&4294967295,C=R+(A<<23&4294967295|A>>>9),A=E+(C^R^M)+k[9]+3654602809&4294967295,E=C+(A<<4&4294967295|A>>>28),A=M+(E^C^R)+k[12]+3873151461&4294967295,M=E+(A<<11&4294967295|A>>>21),A=R+(M^E^C)+k[15]+530742520&4294967295,R=M+(A<<16&4294967295|A>>>16),A=C+(R^M^E)+k[2]+3299628645&4294967295,C=R+(A<<23&4294967295|A>>>9),A=E+(R^(C|~M))+k[0]+4096336452&4294967295,E=C+(A<<6&4294967295|A>>>26),A=M+(C^(E|~R))+k[7]+1126891415&4294967295,M=E+(A<<10&4294967295|A>>>22),A=R+(E^(M|~C))+k[14]+2878612391&4294967295,R=M+(A<<15&4294967295|A>>>17),A=C+(M^(R|~E))+k[5]+4237533241&4294967295,C=R+(A<<21&4294967295|A>>>11),A=E+(R^(C|~M))+k[12]+1700485571&4294967295,E=C+(A<<6&4294967295|A>>>26),A=M+(C^(E|~R))+k[3]+2399980690&4294967295,M=E+(A<<10&4294967295|A>>>22),A=R+(E^(M|~C))+k[10]+4293915773&4294967295,R=M+(A<<15&4294967295|A>>>17),A=C+(M^(R|~E))+k[1]+2240044497&4294967295,C=R+(A<<21&4294967295|A>>>11),A=E+(R^(C|~M))+k[8]+1873313359&4294967295,E=C+(A<<6&4294967295|A>>>26),A=M+(C^(E|~R))+k[15]+4264355552&4294967295,M=E+(A<<10&4294967295|A>>>22),A=R+(E^(M|~C))+k[6]+2734768916&4294967295,R=M+(A<<15&4294967295|A>>>17),A=C+(M^(R|~E))+k[13]+1309151649&4294967295,C=R+(A<<21&4294967295|A>>>11),A=E+(R^(C|~M))+k[4]+4149444226&4294967295,E=C+(A<<6&4294967295|A>>>26),A=M+(C^(E|~R))+k[11]+3174756917&4294967295,M=E+(A<<10&4294967295|A>>>22),A=R+(E^(M|~C))+k[2]+718787259&4294967295,R=M+(A<<15&4294967295|A>>>17),A=C+(M^(R|~E))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+E&4294967295,N.g[1]=N.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+R&4294967295,N.g[3]=N.g[3]+M&4294967295}r.prototype.v=function(N,E){E===void 0&&(E=N.length);const C=E-this.blockSize,k=this.C;let R=this.h,M=0;for(;M<E;){if(R==0)for(;M<=C;)s(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<E;)if(k[R++]=N.charCodeAt(M++),R==this.blockSize){s(this,k),R=0;break}}else for(;M<E;)if(k[R++]=N[M++],R==this.blockSize){s(this,k),R=0;break}}this.h=R,this.o+=E},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var E=1;E<N.length-8;++E)N[E]=0;E=this.o*8;for(var C=N.length-8;C<N.length;++C)N[C]=E&255,E/=256;for(this.v(N),N=Array(16),E=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)N[E++]=this.g[C]>>>k&255;return N};function i(N,E){var C=l;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=E(N)}function o(N,E){this.h=E;const C=[];let k=!0;for(let R=N.length-1;R>=0;R--){const M=N[R]|0;k&&M==E||(C[R]=M,k=!1)}this.g=C}var l={};function c(N){return-128<=N&&N<128?i(N,function(E){return new o([E|0],E<0?-1:0)}):new o([N|0],N<0?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return f;if(N<0)return _(u(-N));const E=[];let C=1;for(let k=0;N>=C;k++)E[k]=N/C|0,C*=4294967296;return new o(E,0)}function h(N,E){if(N.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(N.charAt(0)=="-")return _(h(N.substring(1),E));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(E,8));let k=f;for(let M=0;M<N.length;M+=8){var R=Math.min(8,N.length-M);const A=parseInt(N.substring(M,M+R),E);R<8?(R=u(Math.pow(E,R)),k=k.j(R).add(u(A))):(k=k.j(C),k=k.add(u(A)))}return k}var f=c(0),p=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-_(this).m();let N=0,E=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);N+=(k>=0?k:4294967296+k)*E,E*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(b(this))return"0";if(x(this))return"-"+_(this).toString(N);const E=u(Math.pow(N,6));var C=this;let k="";for(;;){const R=I(C,E).g;C=w(C,R.j(E));let M=((C.g.length>0?C.g[0]:C.h)>>>0).toString(N);if(C=R,b(C))return M+k;for(;M.length<6;)M="0"+M;k=M+k}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function b(N){if(N.h!=0)return!1;for(let E=0;E<N.g.length;E++)if(N.g[E]!=0)return!1;return!0}function x(N){return N.h==-1}t.l=function(N){return N=w(this,N),x(N)?-1:b(N)?0:1};function _(N){const E=N.g.length,C=[];for(let k=0;k<E;k++)C[k]=~N.g[k];return new o(C,~N.h).add(p)}t.abs=function(){return x(this)?_(this):this},t.add=function(N){const E=Math.max(this.g.length,N.g.length),C=[];let k=0;for(let R=0;R<=E;R++){let M=k+(this.i(R)&65535)+(N.i(R)&65535),A=(M>>>16)+(this.i(R)>>>16)+(N.i(R)>>>16);k=A>>>16,M&=65535,A&=65535,C[R]=A<<16|M}return new o(C,C[C.length-1]&-2147483648?-1:0)};function w(N,E){return N.add(_(E))}t.j=function(N){if(b(this)||b(N))return f;if(x(this))return x(N)?_(this).j(_(N)):_(_(this).j(N));if(x(N))return _(this.j(_(N)));if(this.l(v)<0&&N.l(v)<0)return u(this.m()*N.m());const E=this.g.length+N.g.length,C=[];for(var k=0;k<2*E;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let R=0;R<N.g.length;R++){const M=this.i(k)>>>16,A=this.i(k)&65535,H=N.i(R)>>>16,ie=N.i(R)&65535;C[2*k+2*R]+=A*ie,y(C,2*k+2*R),C[2*k+2*R+1]+=M*ie,y(C,2*k+2*R+1),C[2*k+2*R+1]+=A*H,y(C,2*k+2*R+1),C[2*k+2*R+2]+=M*H,y(C,2*k+2*R+2)}for(N=0;N<E;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=E;N<2*E;N++)C[N]=0;return new o(C,0)};function y(N,E){for(;(N[E]&65535)!=N[E];)N[E+1]+=N[E]>>>16,N[E]&=65535,E++}function S(N,E){this.g=N,this.h=E}function I(N,E){if(b(E))throw Error("division by zero");if(b(N))return new S(f,f);if(x(N))return E=I(_(N),E),new S(_(E.g),_(E.h));if(x(E))return E=I(N,_(E)),new S(_(E.g),E.h);if(N.g.length>30){if(x(N)||x(E))throw Error("slowDivide_ only works with positive integers.");for(var C=p,k=E;k.l(N)<=0;)C=P(C),k=P(k);var R=D(C,1),M=D(k,1);for(k=D(k,2),C=D(C,2);!b(k);){var A=M.add(k);A.l(N)<=0&&(R=R.add(C),M=A),k=D(k,1),C=D(C,1)}return E=w(N,R.j(E)),new S(R,E)}for(R=f;N.l(E)>=0;){for(C=Math.max(1,Math.floor(N.m()/E.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),M=u(C),A=M.j(E);x(A)||A.l(N)>0;)C-=k,M=u(C),A=M.j(E);b(M)&&(M=p),R=R.add(M),N=w(N,A)}return new S(R,N)}t.B=function(N){return I(this,N).h},t.and=function(N){const E=Math.max(this.g.length,N.g.length),C=[];for(let k=0;k<E;k++)C[k]=this.i(k)&N.i(k);return new o(C,this.h&N.h)},t.or=function(N){const E=Math.max(this.g.length,N.g.length),C=[];for(let k=0;k<E;k++)C[k]=this.i(k)|N.i(k);return new o(C,this.h|N.h)},t.xor=function(N){const E=Math.max(this.g.length,N.g.length),C=[];for(let k=0;k<E;k++)C[k]=this.i(k)^N.i(k);return new o(C,this.h^N.h)};function P(N){const E=N.g.length+1,C=[];for(let k=0;k<E;k++)C[k]=N.i(k)<<1|N.i(k-1)>>>31;return new o(C,N.h)}function D(N,E){const C=E>>5;E%=32;const k=N.g.length-C,R=[];for(let M=0;M<k;M++)R[M]=E>0?N.i(M+C)>>>E|N.i(M+C+1)<<32-E:N.i(M+C);return new o(R,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$I=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,vi=o}).apply(typeof Kb<"u"?Kb:typeof self<"u"?self:typeof window<"u"?window:{});var bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BI,Yl,HI,Zd,by,WI,qI,GI;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof bd=="object"&&bd];for(var g=0;g<d.length;++g){var T=d[g];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var T=r;d=d.split(".");for(var j=0;j<d.length-1;j++){var O=d[j];if(!(O in T))break e;T=T[O]}d=d[d.length-1],j=T[d],g=g(j),g!=j&&g!=null&&e(T,d,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(g){var T=[],j;for(j in g)Object.prototype.hasOwnProperty.call(g,j)&&T.push([j,g[j]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function c(d,g,T){return d.call.apply(d.bind,arguments)}function u(d,g,T){return u=c,u.apply(null,arguments)}function h(d,g){var T=Array.prototype.slice.call(arguments,1);return function(){var j=T.slice();return j.push.apply(j,arguments),d.apply(this,j)}}function f(d,g){function T(){}T.prototype=g.prototype,d.Z=g.prototype,d.prototype=new T,d.prototype.constructor=d,d.Ob=function(j,O,F){for(var oe=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)oe[_e-2]=arguments[_e];return g.prototype[O].apply(j,oe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function v(d){const g=d.length;if(g>0){const T=Array(g);for(let j=0;j<g;j++)T[j]=d[j];return T}return[]}function b(d,g){for(let j=1;j<arguments.length;j++){const O=arguments[j];var T=typeof O;if(T=T!="object"?T:O?Array.isArray(O)?"array":T:"null",T=="array"||T=="object"&&typeof O.length=="number"){T=d.length||0;const F=O.length||0;d.length=T+F;for(let oe=0;oe<F;oe++)d[T+oe]=O[oe]}else d.push(O)}}class x{constructor(g,T){this.i=g,this.j=T,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function _(d){o.setTimeout(()=>{throw d},0)}function w(){var d=N;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class y{constructor(){this.h=this.g=null}add(g,T){const j=S.get();j.set(g,T),this.h?this.h.next=j:this.g=j,this.h=j}}var S=new x(()=>new I,d=>d.reset());class I{constructor(){this.next=this.g=this.h=null}set(g,T){this.h=g,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let P,D=!1,N=new y,E=()=>{const d=Promise.resolve(void 0);P=()=>{d.then(C)}};function C(){for(var d;d=w();){try{d.h.call(d.g)}catch(T){_(T)}var g=S;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}D=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};o.addEventListener("test",T,g),o.removeEventListener("test",T,g)}catch{}return d}();function A(d){return/^[\s\xa0]*$/.test(d)}function H(d,g){R.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}f(H,R),H.prototype.init=function(d,g){const T=this.type=d.type,j=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(T=="mouseover"?g=d.fromElement:T=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),Z=0;function X(d,g,T,j,O){this.listener=d,this.proxy=null,this.src=g,this.type=T,this.capture=!!j,this.ha=O,this.key=++Z,this.da=this.fa=!1}function L(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function W(d,g,T){for(const j in d)g.call(T,d[j],j,d)}function z(d,g){for(const T in d)g.call(void 0,d[T],T,d)}function U(d){const g={};for(const T in d)g[T]=d[T];return g}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y(d,g){let T,j;for(let O=1;O<arguments.length;O++){j=arguments[O];for(T in j)d[T]=j[T];for(let F=0;F<J.length;F++)T=J[F],Object.prototype.hasOwnProperty.call(j,T)&&(d[T]=j[T])}}function Q(d){this.src=d,this.g={},this.h=0}Q.prototype.add=function(d,g,T,j,O){const F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);const oe=V(d,g,j,O);return oe>-1?(g=d[oe],T||(g.fa=!1)):(g=new X(g,this.src,F,!!j,O),g.fa=T,d.push(g)),g};function te(d,g){const T=g.type;if(T in d.g){var j=d.g[T],O=Array.prototype.indexOf.call(j,g,void 0),F;(F=O>=0)&&Array.prototype.splice.call(j,O,1),F&&(L(g),d.g[T].length==0&&(delete d.g[T],d.h--))}}function V(d,g,T,j){for(let O=0;O<d.length;++O){const F=d[O];if(!F.da&&F.listener==g&&F.capture==!!T&&F.ha==j)return O}return-1}var B="closure_lm_"+(Math.random()*1e6|0),ne={};function ae(d,g,T,j,O){if(Array.isArray(g)){for(let F=0;F<g.length;F++)ae(d,g[F],T,j,O);return null}return T=Sn(T),d&&d[ie]?d.J(g,T,l(j)?!!j.capture:!!j,O):re(d,g,T,!1,j,O)}function re(d,g,T,j,O,F){if(!g)throw Error("Invalid event type");const oe=l(O)?!!O.capture:!!O;let _e=Ne(d);if(_e||(d[B]=_e=new Q(d)),T=_e.add(g,T,j,oe,F),T.proxy)return T;if(j=se(),T.proxy=j,j.src=d,j.listener=T,d.addEventListener)M||(O=oe),O===void 0&&(O=!1),d.addEventListener(g.toString(),j,O);else if(d.attachEvent)d.attachEvent(je(g.toString()),j);else if(d.addListener&&d.removeListener)d.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return T}function se(){function d(T){return g.call(d.src,d.listener,T)}const g=De;return d}function ce(d,g,T,j,O){if(Array.isArray(g))for(var F=0;F<g.length;F++)ce(d,g[F],T,j,O);else j=l(j)?!!j.capture:!!j,T=Sn(T),d&&d[ie]?(d=d.i,F=String(g).toString(),F in d.g&&(g=d.g[F],T=V(g,T,j,O),T>-1&&(L(g[T]),Array.prototype.splice.call(g,T,1),g.length==0&&(delete d.g[F],d.h--)))):d&&(d=Ne(d))&&(g=d.g[g.toString()],d=-1,g&&(d=V(g,T,j,O)),(T=d>-1?g[d]:null)&&Ae(T))}function Ae(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ie])te(g.i,d);else{var T=d.type,j=d.proxy;g.removeEventListener?g.removeEventListener(T,j,d.capture):g.detachEvent?g.detachEvent(je(T),j):g.addListener&&g.removeListener&&g.removeListener(j),(T=Ne(g))?(te(T,d),T.h==0&&(T.src=null,g[B]=null)):L(d)}}}function je(d){return d in ne?ne[d]:ne[d]="on"+d}function De(d,g){if(d.da)d=!0;else{g=new H(g,this);const T=d.listener,j=d.ha||d.src;d.fa&&Ae(d),d=T.call(j,g)}return d}function Ne(d){return d=d[B],d instanceof Q?d:null}var it="__closure_events_fn_"+(Math.random()*1e9>>>0);function Sn(d){return typeof d=="function"?d:(d[it]||(d[it]=function(g){return d.handleEvent(g)}),d[it])}function We(){k.call(this),this.i=new Q(this),this.M=this,this.G=null}f(We,k),We.prototype[ie]=!0,We.prototype.removeEventListener=function(d,g,T,j){ce(this,d,g,T,j)};function Ge(d,g){var T,j=d.G;if(j)for(T=[];j;j=j.G)T.push(j);if(d=d.M,j=g.type||g,typeof g=="string")g=new R(g,d);else if(g instanceof R)g.target=g.target||d;else{var O=g;g=new R(j,d),Y(g,O)}O=!0;let F,oe;if(T)for(oe=T.length-1;oe>=0;oe--)F=g.g=T[oe],O=Xn(F,j,!0,g)&&O;if(F=g.g=d,O=Xn(F,j,!0,g)&&O,O=Xn(F,j,!1,g)&&O,T)for(oe=0;oe<T.length;oe++)F=g.g=T[oe],O=Xn(F,j,!1,g)&&O}We.prototype.N=function(){if(We.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const T=d.g[g];for(let j=0;j<T.length;j++)L(T[j]);delete d.g[g],d.h--}}this.G=null},We.prototype.J=function(d,g,T,j){return this.i.add(String(d),g,!1,T,j)},We.prototype.K=function(d,g,T,j){return this.i.add(String(d),g,!0,T,j)};function Xn(d,g,T,j){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let O=!0;for(let F=0;F<g.length;++F){const oe=g[F];if(oe&&!oe.da&&oe.capture==T){const _e=oe.listener,_t=oe.ha||oe.src;oe.fa&&te(d.i,oe),O=_e.call(_t,j)!==!1&&O}}return O&&!j.defaultPrevented}function zo(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function El(d){d.g=zo(()=>{d.g=null,d.i&&(d.i=!1,El(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Mu extends k{constructor(g,T){super(),this.m=g,this.l=T,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:El(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wi(d){k.call(this),this.h=d,this.g={}}f(Wi,k);var Ou=[];function Zr(d){W(d.g,function(g,T){this.g.hasOwnProperty(T)&&Ae(g)},d),d.g={}}Wi.prototype.N=function(){Wi.Z.N.call(this),Zr(this)},Wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kr=o.JSON.stringify,qi=o.JSON.parse,Lu=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Jn(){}function Sl(){}var Gi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Tl(){R.call(this,"d")}f(Tl,R);function Ki(){R.call(this,"c")}f(Ki,R);var Ar={},Vu=null;function Qi(){return Vu=Vu||new We}Ar.Ia="serverreachability";function Fu(d){R.call(this,Ar.Ia,d)}f(Fu,R);function Yi(d){const g=Qi();Ge(g,new Fu(g))}Ar.STAT_EVENT="statevent";function zu(d,g){R.call(this,Ar.STAT_EVENT,d),this.stat=g}f(zu,R);function Oe(d){const g=Qi();Ge(g,new zu(g,d))}Ar.Ja="timingevent";function Bt(d,g){R.call(this,Ar.Ja,d),this.size=g}f(Bt,R);function wt(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function hn(){this.g=!0}hn.prototype.ua=function(){this.g=!1};function fn(d,g,T,j,O,F){d.info(function(){if(d.g)if(F){var oe="",_e=F.split("&");for(let qe=0;qe<_e.length;qe++){var _t=_e[qe].split("=");if(_t.length>1){const kt=_t[0];_t=_t[1];const Pr=kt.split("_");oe=Pr.length>=2&&Pr[1]=="type"?oe+(kt+"="+_t+"&"):oe+(kt+"=redacted&")}}}else oe=null;else oe=F;return"XMLHTTP REQ ("+j+") [attempt "+O+"]: "+g+`
`+T+`
`+oe})}function tn(d,g,T,j,O,F,oe){d.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+O+"]: "+g+`
`+T+`
`+F+" "+oe})}function Lt(d,g,T,j){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+bt(d,T)+(j?" "+j:"")})}function Rs(d,g){d.info(function(){return"TIMEOUT: "+g})}hn.prototype.info=function(){};function bt(d,g){if(!d.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(d=0;d<F.length;d++)if(Array.isArray(F[d])){var T=F[d];if(!(T.length<2)){var j=T[1];if(Array.isArray(j)&&!(j.length<1)){var O=j[0];if(O!="noop"&&O!="stop"&&O!="close")for(let oe=1;oe<j.length;oe++)j[oe]=""}}}}return kr(F)}catch{return g}}var Tn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fn;function es(){}f(es,Jn),es.prototype.g=function(){return new XMLHttpRequest},Fn=new es;function Zn(d){return encodeURIComponent(String(d))}function jr(d){var g=1;d=d.split(":");const T=[];for(;g>0&&d.length;)T.push(d.shift()),g--;return d.length&&T.push(d.join(":")),T}function mn(d,g,T,j){this.j=d,this.i=g,this.l=T,this.S=j||1,this.V=new Wi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Uo}function Uo(){this.i=null,this.g="",this.h=!1}var Q0={},Fm={};function zm(d,g,T){d.M=1,d.A=$u(Rr(g)),d.u=T,d.R=!0,Y0(d,null)}function Y0(d,g){d.F=Date.now(),Uu(d),d.B=Rr(d.A);var T=d.B,j=d.S;Array.isArray(j)||(j=[String(j)]),cw(T.i,"t",j),d.C=0,T=d.j.L,d.h=new Uo,d.g=Cw(d.j,T?g:null,!d.u),d.P>0&&(d.O=new Mu(u(d.Y,d,d.g),d.P)),g=d.V,T=d.g,j=d.ba;var O="readystatechange";Array.isArray(O)||(O&&(Ou[0]=O.toString()),O=Ou);for(let F=0;F<O.length;F++){const oe=ae(T,O[F],j||g.handleEvent,!1,g.h||g);if(!oe)break;g.g[oe.key]=oe}g=d.J?U(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Yi(),fn(d.i,d.v,d.B,d.l,d.S,d.u)}mn.prototype.ba=function(d){d=d.target;const g=this.O;g&&Ms(d)==3?g.j():this.Y(d)},mn.prototype.Y=function(d){try{if(d==this.g)e:{const _e=Ms(this.g),_t=this.g.ya(),qe=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||gw(this.g)))){this.K||_e!=4||_t==7||(_t==8||qe<=0?Yi(3):Yi(2)),Um(this);var g=this.g.ca();this.X=g;var T=OR(this);if(this.o=g==200,tn(this.i,this.v,this.B,this.l,this.S,_e,g),this.o){if(this.U&&!this.L){t:{if(this.g){var j,O=this.g;if((j=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(j)){var F=j;break t}}F=null}if(d=F)Lt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$m(this,d);else{this.o=!1,this.m=3,Oe(12),Xi(this),Nl(this);break e}}if(this.R){d=!0;let kt;for(;!this.K&&this.C<T.length;)if(kt=LR(this,T),kt==Fm){_e==4&&(this.m=4,Oe(14),d=!1),Lt(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Q0){this.m=4,Oe(15),Lt(this.i,this.l,T,"[Invalid Chunk]"),d=!1;break}else Lt(this.i,this.l,kt,null),$m(this,kt);if(X0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||T.length!=0||this.h.h||(this.m=1,Oe(16),d=!1),this.o=this.o&&d,!d)Lt(this.i,this.l,T,"[Invalid Chunked Response]"),Xi(this),Nl(this);else if(T.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Ym(oe),oe.P=!0,Oe(11))}}else Lt(this.i,this.l,T,null),$m(this,T);_e==4&&Xi(this),this.o&&!this.K&&(_e==4?Ew(this.j,this):(this.o=!1,Uu(this)))}else XR(this.g),g==400&&T.indexOf("Unknown SID")>0?(this.m=3,Oe(12)):(this.m=0,Oe(13)),Xi(this),Nl(this)}}}catch{}finally{}};function OR(d){if(!X0(d))return d.g.la();const g=gw(d.g);if(g==="")return"";let T="";const j=g.length,O=Ms(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Xi(d),Nl(d),"";d.h.i=new o.TextDecoder}for(let F=0;F<j;F++)d.h.h=!0,T+=d.h.i.decode(g[F],{stream:!(O&&F==j-1)});return g.length=0,d.h.g+=T,d.C=0,d.h.g}function X0(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function LR(d,g){var T=d.C,j=g.indexOf(`
`,T);return j==-1?Fm:(T=Number(g.substring(T,j)),isNaN(T)?Q0:(j+=1,j+T>g.length?Fm:(g=g.slice(j,j+T),d.C=j+T,g)))}mn.prototype.cancel=function(){this.K=!0,Xi(this)};function Uu(d){d.T=Date.now()+d.H,J0(d,d.H)}function J0(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=wt(u(d.aa,d),g)}function Um(d){d.D&&(o.clearTimeout(d.D),d.D=null)}mn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Rs(this.i,this.B),this.M!=2&&(Yi(),Oe(17)),Xi(this),this.m=2,Nl(this)):J0(this,this.T-d)};function Nl(d){d.j.I==0||d.K||Ew(d.j,d)}function Xi(d){Um(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Zr(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function $m(d,g){try{var T=d.j;if(T.I!=0&&(T.g==d||Bm(T.h,d))){if(!d.L&&Bm(T.h,d)&&T.I==3){try{var j=T.Ba.g.parse(g)}catch{j=null}if(Array.isArray(j)&&j.length==3){var O=j;if(O[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<d.F)Gu(T),Wu(T);else break e;Qm(T),Oe(18)}}else T.xa=O[1],0<T.xa-T.K&&O[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=wt(u(T.Va,T),6e3));tw(T.h)<=1&&T.ta&&(T.ta=void 0)}else Zi(T,11)}else if((d.L||T.g==d)&&Gu(T),!A(g))for(O=T.Ba.g.parse(g),g=0;g<O.length;g++){let qe=O[g];const kt=qe[0];if(!(kt<=T.K))if(T.K=kt,qe=qe[1],T.I==2)if(qe[0]=="c"){T.M=qe[1],T.ba=qe[2];const Pr=qe[3];Pr!=null&&(T.ka=Pr,T.j.info("VER="+T.ka));const eo=qe[4];eo!=null&&(T.za=eo,T.j.info("SVER="+T.za));const Os=qe[5];Os!=null&&typeof Os=="number"&&Os>0&&(j=1.5*Os,T.O=j,T.j.info("backChannelRequestTimeoutMs_="+j)),j=T;const Ls=d.g;if(Ls){const Qu=Ls.g?Ls.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qu){var F=j.h;F.g||Qu.indexOf("spdy")==-1&&Qu.indexOf("quic")==-1&&Qu.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Hm(F,F.h),F.h=null))}if(j.G){const Xm=Ls.g?Ls.g.getResponseHeader("X-HTTP-Session-Id"):null;Xm&&(j.wa=Xm,Xe(j.J,j.G,Xm))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-d.F,T.j.info("Handshake RTT: "+T.T+"ms")),j=T;var oe=d;if(j.na=Nw(j,j.L?j.ba:null,j.W),oe.L){nw(j.h,oe);var _e=oe,_t=j.O;_t&&(_e.H=_t),_e.D&&(Um(_e),Uu(_e)),j.g=oe}else bw(j);T.i.length>0&&qu(T)}else qe[0]!="stop"&&qe[0]!="close"||Zi(T,7);else T.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Zi(T,7):Km(T):qe[0]!="noop"&&T.l&&T.l.qa(qe),T.A=0)}}Yi(4)}catch{}}var VR=class{constructor(d,g){this.g=d,this.map=g}};function Z0(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ew(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function tw(d){return d.h?1:d.g?d.g.size:0}function Bm(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Hm(d,g){d.g?d.g.add(g):d.h=g}function nw(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Z0.prototype.cancel=function(){if(this.i=rw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function rw(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const T of d.g.values())g=g.concat(T.G);return g}return v(d.i)}var sw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function FR(d,g){if(d){d=d.split("&");for(let T=0;T<d.length;T++){const j=d[T].indexOf("=");let O,F=null;j>=0?(O=d[T].substring(0,j),F=d[T].substring(j+1)):O=d[T],g(O,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ps(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Ps?(this.l=d.l,Cl(this,d.j),this.o=d.o,this.g=d.g,Il(this,d.u),this.h=d.h,Wm(this,uw(d.i)),this.m=d.m):d&&(g=String(d).match(sw))?(this.l=!1,Cl(this,g[1]||"",!0),this.o=kl(g[2]||""),this.g=kl(g[3]||"",!0),Il(this,g[4]),this.h=kl(g[5]||"",!0),Wm(this,g[6]||"",!0),this.m=kl(g[7]||"")):(this.l=!1,this.i=new jl(null,this.l))}Ps.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(Al(g,iw,!0),":");var T=this.g;return(T||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Al(g,iw,!0),"@"),d.push(Zn(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&d.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Al(T,T.charAt(0)=="/"?$R:UR,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Al(T,HR)),d.join("")},Ps.prototype.resolve=function(d){const g=Rr(this);let T=!!d.j;T?Cl(g,d.j):T=!!d.o,T?g.o=d.o:T=!!d.g,T?g.g=d.g:T=d.u!=null;var j=d.h;if(T)Il(g,d.u);else if(T=!!d.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var O=g.h.lastIndexOf("/");O!=-1&&(j=g.h.slice(0,O+1)+j)}if(O=j,O==".."||O==".")j="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){j=O.lastIndexOf("/",0)==0,O=O.split("/");const F=[];for(let oe=0;oe<O.length;){const _e=O[oe++];_e=="."?j&&oe==O.length&&F.push(""):_e==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),j&&oe==O.length&&F.push("")):(F.push(_e),j=!0)}j=F.join("/")}else j=O}return T?g.h=j:T=d.i.toString()!=="",T?Wm(g,uw(d.i)):T=!!d.m,T&&(g.m=d.m),g};function Rr(d){return new Ps(d)}function Cl(d,g,T){d.j=T?kl(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Il(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function Wm(d,g,T){g instanceof jl?(d.i=g,WR(d.i,d.l)):(T||(g=Al(g,BR)),d.i=new jl(g,d.l))}function Xe(d,g,T){d.i.set(g,T)}function $u(d){return Xe(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function kl(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Al(d,g,T){return typeof d=="string"?(d=encodeURI(d).replace(g,zR),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function zR(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var iw=/[#\/\?@]/g,UR=/[#\?:]/g,$R=/[#\?]/g,BR=/[#\?@]/g,HR=/#/g;function jl(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Ji(d){d.g||(d.g=new Map,d.h=0,d.i&&FR(d.i,function(g,T){d.add(decodeURIComponent(g.replace(/\+/g," ")),T)}))}t=jl.prototype,t.add=function(d,g){Ji(this),this.i=null,d=$o(this,d);let T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(g),this.h+=1,this};function ow(d,g){Ji(d),g=$o(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function aw(d,g){return Ji(d),g=$o(d,g),d.g.has(g)}t.forEach=function(d,g){Ji(this),this.g.forEach(function(T,j){T.forEach(function(O){d.call(g,O,j,this)},this)},this)};function lw(d,g){Ji(d);let T=[];if(typeof g=="string")aw(d,g)&&(T=T.concat(d.g.get($o(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)T=T.concat(d[g]);return T}t.set=function(d,g){return Ji(this),this.i=null,d=$o(this,d),aw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=lw(this,d),d.length>0?String(d[0]):g):g};function cw(d,g,T){ow(d,g),T.length>0&&(d.i=null,d.g.set($o(d,g),v(T)),d.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let j=0;j<g.length;j++){var T=g[j];const O=Zn(T);T=lw(this,T);for(let F=0;F<T.length;F++){let oe=O;T[F]!==""&&(oe+="="+Zn(T[F])),d.push(oe)}}return this.i=d.join("&")};function uw(d){const g=new jl;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function $o(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function WR(d,g){g&&!d.j&&(Ji(d),d.i=null,d.g.forEach(function(T,j){const O=j.toLowerCase();j!=O&&(ow(this,j),cw(this,O,T))},d)),d.j=g}function qR(d,g){const T=new hn;if(o.Image){const j=new Image;j.onload=h(Ds,T,"TestLoadImage: loaded",!0,g,j),j.onerror=h(Ds,T,"TestLoadImage: error",!1,g,j),j.onabort=h(Ds,T,"TestLoadImage: abort",!1,g,j),j.ontimeout=h(Ds,T,"TestLoadImage: timeout",!1,g,j),o.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=d}else g(!1)}function GR(d,g){const T=new hn,j=new AbortController,O=setTimeout(()=>{j.abort(),Ds(T,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:j.signal}).then(F=>{clearTimeout(O),F.ok?Ds(T,"TestPingServer: ok",!0,g):Ds(T,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(O),Ds(T,"TestPingServer: error",!1,g)})}function Ds(d,g,T,j,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),j(T)}catch{}}function KR(){this.g=new Lu}function qm(d){this.i=d.Sb||null,this.h=d.ab||!1}f(qm,Jn),qm.prototype.g=function(){return new Bu(this.i,this.h)};function Bu(d,g){We.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Bu,We),t=Bu.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,Pl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Rl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Pl(this)),this.g&&(this.readyState=3,Pl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;dw(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function dw(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Rl(this):Pl(this),this.readyState==3&&dw(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Rl(this))},t.Na=function(d){this.g&&(this.response=d,Rl(this))},t.ga=function(){this.g&&Rl(this)};function Rl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Pl(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var T=g.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=g.next();return d.join(`\r
`)};function Pl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function hw(d){let g="";return W(d,function(T,j){g+=j,g+=":",g+=T,g+=`\r
`}),g}function Gm(d,g,T){e:{for(j in T){var j=!1;break e}j=!0}j||(T=hw(T),typeof d=="string"?T!=null&&Zn(T):Xe(d,g,T))}function dt(d){We.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(dt,We);var QR=/^https?$/i,YR=["POST","PUT"];t=dt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,T,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fn.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(F){fw(this,F);return}if(d=T||"",T=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var O in j)T.set(O,j[O]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const F of j.keys())T.set(F,j.get(F));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(T.keys()).find(F=>F.toLowerCase()=="content-type"),O=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(YR,g,void 0)>=0)||j||O||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,oe]of T)this.g.setRequestHeader(F,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(F){fw(this,F)}};function fw(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,mw(d),Hu(d)}function mw(d){d.A||(d.A=!0,Ge(d,"complete"),Ge(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ge(this,"complete"),Ge(this,"abort"),Hu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hu(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?pw(this):this.Xa())},t.Xa=function(){pw(this)};function pw(d){if(d.h&&typeof i<"u"){if(d.v&&Ms(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ge(d,"readystatechange"),Ms(d)==4){d.h=!1;try{const F=d.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var T;if(!(T=g)){var j;if(j=F===0){let oe=String(d.D).match(sw)[1]||null;!oe&&o.self&&o.self.location&&(oe=o.self.location.protocol.slice(0,-1)),j=!QR.test(oe?oe.toLowerCase():"")}T=j}if(T)Ge(d,"complete"),Ge(d,"success");else{d.o=6;try{var O=Ms(d)>2?d.g.statusText:""}catch{O=""}d.l=O+" ["+d.ca()+"]",mw(d)}}finally{Hu(d)}}}}function Hu(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const T=d.g;d.g=null,g||Ge(d,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ms(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Ms(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),qi(g)}};function gw(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function XR(d){const g={};d=(d.g&&Ms(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<d.length;j++){if(A(d[j]))continue;var T=jr(d[j]);const O=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const F=g[O]||[];g[O]=F,F.push(T)}z(g,function(j){return j.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dl(d,g,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||g}function yw(d){this.za=0,this.i=[],this.j=new hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Dl("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Dl("baseRetryDelayMs",5e3,d),this.Za=Dl("retryDelaySeedMs",1e4,d),this.Ta=Dl("forwardChannelMaxRetries",2,d),this.va=Dl("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Z0(d&&d.concurrentRequestLimit),this.Ba=new KR,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=yw.prototype,t.ka=8,t.I=1,t.connect=function(d,g,T,j){Oe(0),this.W=d,this.H=g||{},T&&j!==void 0&&(this.H.OSID=T,this.H.OAID=j),this.F=this.X,this.J=Nw(this,null,this.W),qu(this)};function Km(d){if(vw(d),d.I==3){var g=d.V++,T=Rr(d.J);if(Xe(T,"SID",d.M),Xe(T,"RID",g),Xe(T,"TYPE","terminate"),Ml(d,T),g=new mn(d,d.j,g),g.M=2,g.A=$u(Rr(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!T&&o.Image&&(new Image().src=g.A,T=!0),T||(g.g=Cw(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Uu(g)}Tw(d)}function Wu(d){d.g&&(Ym(d),d.g.cancel(),d.g=null)}function vw(d){Wu(d),d.v&&(o.clearTimeout(d.v),d.v=null),Gu(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function qu(d){if(!ew(d.h)&&!d.m){d.m=!0;var g=d.Ea;P||E(),D||(P(),D=!0),N.add(g,d),d.D=0}}function JR(d,g){return tw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=wt(u(d.Ea,d,g),Sw(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const O=new mn(this,this.j,d);let F=this.o;if(this.U&&(F?(F=U(F),Y(F,this.U)):F=this.U),this.u!==null||this.R||(O.J=F,F=null),this.S)e:{for(var g=0,T=0;T<this.i.length;T++){t:{var j=this.i[T];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(g+=j,g>4096){g=T;break e}if(g===4096||T===this.i.length-1){g=T+1;break e}}g=1e3}else g=1e3;g=ww(this,O,g),T=Rr(this.J),Xe(T,"RID",d),Xe(T,"CVER",22),this.G&&Xe(T,"X-HTTP-Session-Id",this.G),Ml(this,T),F&&(this.R?g="headers="+Zn(hw(F))+"&"+g:this.u&&Gm(T,this.u,F)),Hm(this.h,O),this.Ra&&Xe(T,"TYPE","init"),this.S?(Xe(T,"$req",g),Xe(T,"SID","null"),O.U=!0,zm(O,T,null)):zm(O,T,g),this.I=2}}else this.I==3&&(d?xw(this,d):this.i.length==0||ew(this.h)||xw(this))};function xw(d,g){var T;g?T=g.l:T=d.V++;const j=Rr(d.J);Xe(j,"SID",d.M),Xe(j,"RID",T),Xe(j,"AID",d.K),Ml(d,j),d.u&&d.o&&Gm(j,d.u,d.o),T=new mn(d,d.j,T,d.D+1),d.u===null&&(T.J=d.o),g&&(d.i=g.G.concat(d.i)),g=ww(d,T,1e3),T.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Hm(d.h,T),zm(T,j,g)}function Ml(d,g){d.H&&W(d.H,function(T,j){Xe(g,j,T)}),d.l&&W({},function(T,j){Xe(g,j,T)})}function ww(d,g,T){T=Math.min(d.i.length,T);const j=d.l?u(d.l.Ka,d.l,d):null;e:{var O=d.i;let _e=-1;for(;;){const _t=["count="+T];_e==-1?T>0?(_e=O[0].g,_t.push("ofs="+_e)):_e=0:_t.push("ofs="+_e);let qe=!0;for(let kt=0;kt<T;kt++){var F=O[kt].g;const Pr=O[kt].map;if(F-=_e,F<0)_e=Math.max(0,O[kt].g-100),qe=!1;else try{F="req"+F+"_"||"";try{var oe=Pr instanceof Map?Pr:Object.entries(Pr);for(const[eo,Os]of oe){let Ls=Os;l(Os)&&(Ls=kr(Os)),_t.push(F+eo+"="+encodeURIComponent(Ls))}}catch(eo){throw _t.push(F+"type="+encodeURIComponent("_badmap")),eo}}catch{j&&j(Pr)}}if(qe){oe=_t.join("&");break e}}oe=void 0}return d=d.i.splice(0,T),g.G=d,oe}function bw(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;P||E(),D||(P(),D=!0),N.add(g,d),d.A=0}}function Qm(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=wt(u(d.Da,d),Sw(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,_w(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=wt(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Oe(10),Wu(this),_w(this))};function Ym(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function _w(d){d.g=new mn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=Rr(d.na);Xe(g,"RID","rpc"),Xe(g,"SID",d.M),Xe(g,"AID",d.K),Xe(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&Xe(g,"TO",d.ia),Xe(g,"TYPE","xmlhttp"),Ml(d,g),d.u&&d.o&&Gm(g,d.u,d.o),d.O&&(d.g.H=d.O);var T=d.g;d=d.ba,T.M=1,T.A=$u(Rr(g)),T.u=null,T.R=!0,Y0(T,d)}t.Va=function(){this.C!=null&&(this.C=null,Wu(this),Qm(this),Oe(19))};function Gu(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Ew(d,g){var T=null;if(d.g==g){Gu(d),Ym(d),d.g=null;var j=2}else if(Bm(d.h,g))T=g.G,nw(d.h,g),j=1;else return;if(d.I!=0){if(g.o)if(j==1){T=g.u?g.u.length:0,g=Date.now()-g.F;var O=d.D;j=Qi(),Ge(j,new Bt(j,T)),qu(d)}else bw(d);else if(O=g.m,O==3||O==0&&g.X>0||!(j==1&&JR(d,g)||j==2&&Qm(d)))switch(T&&T.length>0&&(g=d.h,g.i=g.i.concat(T)),O){case 1:Zi(d,5);break;case 4:Zi(d,10);break;case 3:Zi(d,6);break;default:Zi(d,2)}}}function Sw(d,g){let T=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(T*=2),T*g}function Zi(d,g){if(d.j.info("Error code "+g),g==2){var T=u(d.bb,d),j=d.Ua;const O=!j;j=new Ps(j||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Cl(j,"https"),$u(j),O?qR(j.toString(),T):GR(j.toString(),T)}else Oe(2);d.I=0,d.l&&d.l.pa(g),Tw(d),vw(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Tw(d){if(d.I=0,d.ja=[],d.l){const g=rw(d.h);(g.length!=0||d.i.length!=0)&&(b(d.ja,g),b(d.ja,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.oa()}}function Nw(d,g,T){var j=T instanceof Ps?Rr(T):new Ps(T);if(j.g!="")g&&(j.g=g+"."+j.g),Il(j,j.u);else{var O=o.location;j=O.protocol,g=g?g+"."+O.hostname:O.hostname,O=+O.port;const F=new Ps(null);j&&Cl(F,j),g&&(F.g=g),O&&Il(F,O),T&&(F.h=T),j=F}return T=d.G,g=d.wa,T&&g&&Xe(j,T,g),Xe(j,"VER",d.ka),Ml(d,j),j}function Cw(d,g,T){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new dt(new qm({ab:T})):new dt(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Iw(){}t=Iw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ku(){}Ku.prototype.g=function(d,g){return new Cn(d,g)};function Cn(d,g){We.call(this),this.g=new yw(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!A(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!A(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Bo(this)}f(Cn,We),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Km(this.g)},Cn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.v&&(T={},T.__data__=kr(d),d=T);g.i.push(new VR(g.Ya++,d)),g.I==3&&qu(g)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Km(this.g),delete this.g,Cn.Z.N.call(this)};function kw(d){Tl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const T in g){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}f(kw,Tl);function Aw(){Ki.call(this),this.status=1}f(Aw,Ki);function Bo(d){this.g=d}f(Bo,Iw),Bo.prototype.ra=function(){Ge(this.g,"a")},Bo.prototype.qa=function(d){Ge(this.g,new kw(d))},Bo.prototype.pa=function(d){Ge(this.g,new Aw)},Bo.prototype.oa=function(){Ge(this.g,"b")},Ku.prototype.createWebChannel=Ku.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,GI=function(){return new Ku},qI=function(){return Qi()},WI=Ar,by={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tn.NO_ERROR=0,Tn.TIMEOUT=8,Tn.HTTP_ERROR=6,Zd=Tn,Nn.COMPLETE="complete",HI=Nn,Sl.EventType=Gi,Gi.OPEN="a",Gi.CLOSE="b",Gi.ERROR="c",Gi.MESSAGE="d",We.prototype.listen=We.prototype.J,Yl=Sl,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,BI=dt}).apply(typeof bd<"u"?bd:typeof self<"u"?self:typeof window<"u"?window:{});const Qb="@firebase/firestore",Yb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new gx("@firebase/firestore");function Ko(){return Ao.logLevel}function ue(t,...e){if(Ao.logLevel<=Ce.DEBUG){const n=e.map(kx);Ao.debug(`Firestore (${hl}): ${t}`,...n)}}function Ss(t,...e){if(Ao.logLevel<=Ce.ERROR){const n=e.map(kx);Ao.error(`Firestore (${hl}): ${t}`,...n)}}function jo(t,...e){if(Ao.logLevel<=Ce.WARN){const n=e.map(kx);Ao.warn(`Firestore (${hl}): ${t}`,...n)}}function kx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,KI(t,r,n)}function KI(t,e,n){let r=`FIRESTORE (${hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ss(r),new Error(r)}function Ue(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||KI(e,s,r)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Is{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class HF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class WF{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string",31837,{l:r}),new QI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class qF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class GF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new qF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,lr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ue(this.o===void 0,3512);const r=i=>{i.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Xb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Xb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=QF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function _y(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return zp(s)===zp(i)?Ie(s,i):zp(s)?1:-1}return Ie(t.length,e.length)}const YF=55296,XF=57343;function zp(t){const e=t.charCodeAt(0);return e>=YF&&e<=XF}function Ya(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="__name__";class Or{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Or.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ie(e.length,n.length)}static compareSegments(e,n){const r=Or.isNumericId(e),s=Or.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Or.extractNumericId(e).compare(Or.extractNumericId(n)):_y(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vi.fromString(e.substring(4,e.length-2))}}class Ke extends Or{construct(e,n,r){return new Ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const JF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Or{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return JF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Jb}static keyField(){return new Pt([Jb])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new le(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new le(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Ke.fromString(e))}static fromName(e){return new me(Ke.fromString(e).popFirst(5))}static empty(){return new me(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t,e,n){if(!n)throw new le(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JI(t,e,n,r){if(e===!0&&r===!0)throw new le(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Zb(t){if(!me.isDocumentKey(t))throw new le(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function e_(t){if(me.isDocumentKey(t))throw new le(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ZI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge(12329,{type:typeof t})}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sm(t);throw new le(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Su(t,e){if(!ZI(t))throw new le(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new le(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=-62135596800,n_=1e6;class Qe{static now(){return Qe.fromMillis(Date.now())}static fromDate(e){return Qe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*n_);return new Qe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<t_)throw new le(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n_}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Qe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,Qe._jsonSchema))return new Qe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-t_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Qe._jsonSchemaVersion="firestore/timestamp/1.0",Qe._jsonSchema={type:xt("string",Qe._jsonSchemaVersion),seconds:xt("number"),nanoseconds:xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Qe(0,0))}static max(){return new ve(new Qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=-1;function ZF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(r===1e9?new Qe(n+1,0):new Qe(n,r));return new ki(s,me.empty(),e)}function e9(t){return new ki(t.readTime,t.key,Gc)}class ki{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ki(ve.min(),me.empty(),Gc)}static max(){return new ki(ve.max(),me.empty(),Gc)}}function t9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==n9)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function s9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ml(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}im.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=-1;function om(t){return t==null}function Kh(t){return t===0&&1/t==-1/0}function i9(t){return typeof t=="number"&&Number.isInteger(t)&&!Kh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="";function o9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=r_(e)),e=a9(t.get(n),e);return r_(e)}function a9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ek:n+="";break;default:n+=i}}return n}function r_(t){return t+ek+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _d(this.root,e,this.comparator,!1)}getReverseIterator(){return new _d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _d(this.root,e,this.comparator,!0)}}class _d{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=i??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new i_(this.data.getIterator())}getIteratorFrom(e){return new i_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class i_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Pn([])}unionWith(e){let n=new Ct(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nk("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const l9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ai(t){if(Ue(!!t,39018),typeof t=="string"){let e=0;const n=l9.exec(t);if(Ue(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(t.seconds),nanos:mt(t.nanos)}}function mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ji(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="server_timestamp",sk="__type__",ik="__previous_value__",ok="__local_write_time__";function jx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sk])==null?void 0:r.stringValue)===rk}function am(t){const e=t.mapValue.fields[ik];return jx(e)?am(e):e}function Kc(t){const e=Ai(t.mapValue.fields[ok].timestampValue);return new Qe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Qh="(default)";class Xa{constructor(e,n){this.projectId=e,this.database=n||Qh}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database===Qh}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="__type__",lk="__max__",Ed={mapValue:{fields:{__type__:{stringValue:lk}}}},ck="__vector__",Yh="value";function Ri(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jx(t)?4:d9(t)?9007199254740991:u9(t)?10:11:ge(28295,{value:t})}function Yr(t,e){if(t===e)return!0;const n=Ri(t);if(n!==Ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Kc(t).isEqual(Kc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ai(s.timestampValue),l=Ai(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ji(s.bytesValue).isEqual(ji(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return mt(s.geoPointValue.latitude)===mt(i.geoPointValue.latitude)&&mt(s.geoPointValue.longitude)===mt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return mt(s.integerValue)===mt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=mt(s.doubleValue),l=mt(i.doubleValue);return o===l?Kh(o)===Kh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ya(t.arrayValue.values||[],e.arrayValue.values||[],Yr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(s_(o)!==s_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Yr(o[c],l[c])))return!1;return!0}(t,e);default:return ge(52216,{left:t})}}function Qc(t,e){return(t.values||[]).find(n=>Yr(n,e))!==void 0}function Ja(t,e){if(t===e)return 0;const n=Ri(t),r=Ri(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=mt(i.integerValue||i.doubleValue),c=mt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return o_(t.timestampValue,e.timestampValue);case 4:return o_(Kc(t),Kc(e));case 5:return _y(t.stringValue,e.stringValue);case 6:return function(i,o){const l=ji(i),c=ji(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ie(l[u],c[u]);if(h!==0)return h}return Ie(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ie(mt(i.latitude),mt(o.latitude));return l!==0?l:Ie(mt(i.longitude),mt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return a_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,v,b,x;const l=i.fields||{},c=o.fields||{},u=(p=l[Yh])==null?void 0:p.arrayValue,h=(v=c[Yh])==null?void 0:v.arrayValue,f=Ie(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return f!==0?f:a_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ed.mapValue&&o===Ed.mapValue)return 0;if(i===Ed.mapValue)return 1;if(o===Ed.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=_y(c[f],h[f]);if(p!==0)return p;const v=Ja(l[c[f]],u[h[f]]);if(v!==0)return v}return Ie(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ge(23264,{he:n})}}function o_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=Ai(t),r=Ai(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function a_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ja(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function Za(t){return Ey(t)}function Ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ji(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return me.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ey(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ey(n.fields[o])}`;return s+"}"}(t.mapValue):ge(61005,{value:t})}function eh(t){switch(Ri(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=am(t);return e?16+eh(e):16;case 5:return 2*t.stringValue.length;case 6:return ji(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+eh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ui(r.fields,(i,o)=>{s+=i.length+eh(o)}),s}(t.mapValue);default:throw ge(13486,{value:t})}}function l_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sy(t){return!!t&&"integerValue"in t}function Rx(t){return!!t&&"arrayValue"in t}function c_(t){return!!t&&"nullValue"in t}function u_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function th(t){return!!t&&"mapValue"in t}function u9(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ak])==null?void 0:r.stringValue)===ck}function fc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fc(t.arrayValue.values[n]);return e}return{...t}}function d9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!th(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(n)}setAll(e){let n=Pt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=fc(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());th(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];th(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vn(fc(this.value))}}function uk(t){const e=[];return Ui(t.fields,(n,r)=>{const s=new Pt([n]);if(th(r)){const i=uk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Jt(e,0,ve.min(),ve.min(),ve.min(),vn.empty(),0)}static newFoundDocument(e,n,r,s){return new Jt(e,1,n,ve.min(),r,s,0)}static newNoDocument(e,n){return new Jt(e,2,n,ve.min(),ve.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,ve.min(),ve.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(e,n){this.position=e,this.inclusive=n}}function d_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=me.comparator(me.fromName(o.referenceValue),n.key):r=Ja(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function h_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n="asc"){this.field=e,this.dir=n}}function h9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{}class vt extends dk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new m9(e,n,r):n==="array-contains"?new y9(e,r):n==="in"?new v9(e,r):n==="not-in"?new x9(e,r):n==="array-contains-any"?new w9(e,r):new vt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new p9(e,r):new g9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ja(n,this.value)):n!==null&&Ri(this.value)===Ri(n)&&this.matchesComparison(Ja(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends dk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new br(e,n)}matches(e){return hk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hk(t){return t.op==="and"}function fk(t){return f9(t)&&hk(t)}function f9(t){for(const e of t.filters)if(e instanceof br)return!1;return!0}function Ty(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+Za(t.value);if(fk(t))return t.filters.map(e=>Ty(e)).join(",");{const e=t.filters.map(n=>Ty(n)).join(",");return`${t.op}(${e})`}}function mk(t,e){return t instanceof vt?function(r,s){return s instanceof vt&&r.op===s.op&&r.field.isEqual(s.field)&&Yr(r.value,s.value)}(t,e):t instanceof br?function(r,s){return s instanceof br&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&mk(o,s.filters[l]),!0):!1}(t,e):void ge(19439)}function pk(t){return t instanceof vt?function(n){return`${n.field.canonicalString()} ${n.op} ${Za(n.value)}`}(t):t instanceof br?function(n){return n.op.toString()+" {"+n.getFilters().map(pk).join(" ,")+"}"}(t):"Filter"}class m9 extends vt{constructor(e,n,r){super(e,n,r),this.key=me.fromName(r.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class p9 extends vt{constructor(e,n){super(e,"in",n),this.keys=gk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class g9 extends vt{constructor(e,n){super(e,"not-in",n),this.keys=gk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>me.fromName(r.referenceValue))}class y9 extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rx(n)&&Qc(n.arrayValue,this.value)}}class v9 extends vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qc(this.value.arrayValue,n)}}class x9 extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qc(this.value.arrayValue,n)}}class w9 extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function f_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new b9(t,e,n,r,s,i,o)}function Px(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ty(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),om(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Za(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Za(r)).join(",")),e.Te=n}return e.Te}function Dx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!h9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!h_(t.startAt,e.startAt)&&h_(t.endAt,e.endAt)}function Ny(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _9(t,e,n,r,s,i,o,l){return new pl(t,e,n,r,s,i,o,l)}function lm(t){return new pl(t)}function m_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yk(t){return t.collectionGroup!==null}function mc(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ct(Pt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Yc(i,r))}),n.has(Pt.keyField().canonicalString())||e.Ie.push(new Yc(Pt.keyField(),r))}return e.Ie}function qr(t){const e=we(t);return e.Ee||(e.Ee=E9(e,mc(t))),e.Ee}function E9(t,e){if(t.limitType==="F")return f_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Yc(s.field,i)});const n=t.endAt?new Xh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xh(t.startAt.position,t.startAt.inclusive):null;return f_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Cy(t,e){const n=t.filters.concat([e]);return new pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jh(t,e,n){return new pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cm(t,e){return Dx(qr(t),qr(e))&&t.limitType===e.limitType}function vk(t){return`${Px(qr(t))}|lt:${t.limitType}`}function Qo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>pk(s)).join(", ")}]`),om(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Za(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Za(s)).join(",")),`Target(${r})`}(qr(t))}; limitType=${t.limitType})`}function um(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):me.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of mc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=d_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,mc(r),s)||r.endAt&&!function(o,l,c){const u=d_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,mc(r),s))}(t,e)}function S9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xk(t){return(e,n)=>{let r=!1;for(const s of mc(t)){const i=T9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function T9(t,e,n){const r=t.field.isKeyField()?me.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Ja(c,u):ge(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return tk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=new ut(me.comparator);function Ts(){return N9}const wk=new ut(me.comparator);function Xl(...t){let e=wk;for(const n of t)e=e.insert(n.key,n);return e}function bk(t){let e=wk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function co(){return pc()}function _k(){return pc()}function pc(){return new Vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const C9=new ut(me.comparator),I9=new Ct(me.comparator);function ke(...t){let e=I9;for(const n of t)e=e.add(n);return e}const k9=new Ct(Ie);function A9(){return k9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kh(e)?"-0":e}}function Ek(t){return{integerValue:""+t}}function j9(t,e){return i9(e)?Ek(e):Mx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this._=void 0}}function R9(t,e,n){return t instanceof Xc?function(s,i){const o={fields:{[sk]:{stringValue:rk},[ok]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&jx(i)&&(i=am(i)),i&&(o.fields[ik]=i),{mapValue:o}}(n,e):t instanceof el?Tk(t,e):t instanceof Jc?Nk(t,e):function(s,i){const o=Sk(s,i),l=p_(o)+p_(s.Ae);return Sy(o)&&Sy(s.Ae)?Ek(l):Mx(s.serializer,l)}(t,e)}function P9(t,e,n){return t instanceof el?Tk(t,e):t instanceof Jc?Nk(t,e):n}function Sk(t,e){return t instanceof Zh?function(r){return Sy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Xc extends dm{}class el extends dm{constructor(e){super(),this.elements=e}}function Tk(t,e){const n=Ck(e);for(const r of t.elements)n.some(s=>Yr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Jc extends dm{constructor(e){super(),this.elements=e}}function Nk(t,e){let n=Ck(e);for(const r of t.elements)n=n.filter(s=>!Yr(s,r));return{arrayValue:{values:n}}}class Zh extends dm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function p_(t){return mt(t.integerValue||t.doubleValue)}function Ck(t){return Rx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n){this.field=e,this.transform=n}}function D9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof el&&s instanceof el||r instanceof Jc&&s instanceof Jc?Ya(r.elements,s.elements,Yr):r instanceof Zh&&s instanceof Zh?Yr(r.Ae,s.Ae):r instanceof Xc&&s instanceof Xc}(t.transform,e.transform)}class M9{constructor(e,n){this.version=e,this.transformResults=n}}class mr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mr}static exists(e){return new mr(void 0,e)}static updateTime(e){return new mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hm{}function kk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ox(t.key,mr.none()):new Tu(t.key,t.data,mr.none());{const n=t.data,r=vn.empty();let s=new Ct(Pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new $i(t.key,r,new Pn(s.toArray()),mr.none())}}function O9(t,e,n){t instanceof Tu?function(s,i,o){const l=s.value.clone(),c=y_(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof $i?function(s,i,o){if(!nh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=y_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Ak(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gc(t,e,n,r){return t instanceof Tu?function(i,o,l,c){if(!nh(i.precondition,o))return l;const u=i.value.clone(),h=v_(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof $i?function(i,o,l,c){if(!nh(i.precondition,o))return l;const u=v_(i.fieldTransforms,c,o),h=o.data;return h.setAll(Ak(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return nh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function L9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Sk(r.transform,s||null);i!=null&&(n===null&&(n=vn.empty()),n.set(r.field,i))}return n||null}function g_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ya(r,s,(i,o)=>D9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tu extends hm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $i extends hm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ak(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function y_(t,e,n){const r=new Map;Ue(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,P9(o,l,n[s]))}return r}function v_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,R9(i,o,e))}return r}class Ox extends hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class V9 extends hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&O9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_k();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=kk(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,(n,r)=>g_(n,r))&&Ya(this.baseMutations,e.baseMutations,(n,r)=>g_(n,r))}}class Lx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ue(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return C9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Lx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let z9=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Re;function $9(t){switch(t){case q.OK:return ge(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ge(15467,{code:t})}}function jk(t){if(t===void 0)return Ss("GRPC error has no .code"),q.UNKNOWN;switch(t){case gt.OK:return q.OK;case gt.CANCELLED:return q.CANCELLED;case gt.UNKNOWN:return q.UNKNOWN;case gt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case gt.INTERNAL:return q.INTERNAL;case gt.UNAVAILABLE:return q.UNAVAILABLE;case gt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case gt.NOT_FOUND:return q.NOT_FOUND;case gt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case gt.ABORTED:return q.ABORTED;case gt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case gt.DATA_LOSS:return q.DATA_LOSS;default:return ge(39323,{code:t})}}(Re=gt||(gt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=new vi([4294967295,4294967295],0);function x_(t){const e=B9().encode(t),n=new $I;return n.update(e),new Uint8Array(n.digest())}function w_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vi([n,r],0),new vi([s,i],0)]}class Vx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(r<0)throw new Jl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(vi.fromNumber(r)));return s.compare(H9)===1&&(s=new vi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=x_(e),[r,s]=w_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Vx(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=x_(e),[r,s]=w_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fm(ve.min(),s,new ut(Ie),Ts(),ke())}}class Nu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nu(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Rk{constructor(e,n){this.targetId=e,this.Ce=n}}class Pk{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class b_{constructor(){this.ve=0,this.Fe=__(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),r=ke();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ge(38017,{changeType:i})}}),new Nu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=__()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ue(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class W9{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ts(),this.Je=Sd(),this.He=Sd(),this.Ye=new ut(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ge(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ny(i))if(r===0){const o=new me(i.path);this.et(n,o,Jt.newNoDocument(o,ve.min()))}else Ue(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=ji(r).toUint8Array()}catch(c){if(c instanceof nk)return jo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Vx(o,s,i)}catch(c){return jo(c instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Ny(l.target)){const c=new me(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Jt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=ke();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new fm(e,n,this.Ye,this.je,r);return this.je=Ts(),this.Je=Sd(),this.He=Sd(),this.Ye=new ut(Ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new b_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ct(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ct(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ue("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new b_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Sd(){return new ut(me.comparator)}function __(){return new ut(me.comparator)}const q9={asc:"ASCENDING",desc:"DESCENDING"},G9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},K9={and:"AND",or:"OR"};class Q9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Iy(t,e){return t.useProto3Json||om(e)?e:{value:e}}function ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Y9(t,e){return ef(t,e.toTimestamp())}function Gr(t){return Ue(!!t,49232),ve.fromTimestamp(function(n){const r=Ai(n);return new Qe(r.seconds,r.nanos)}(t))}function Fx(t,e){return ky(t,e).canonicalString()}function ky(t,e){const n=function(s){return new Ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Mk(t){const e=Ke.fromString(t);return Ue(zk(e),10190,{key:e.toString()}),e}function Ay(t,e){return Fx(t.databaseId,e.path)}function Up(t,e){const n=Mk(e);if(n.get(1)!==t.databaseId.projectId)throw new le(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new me(Lk(n))}function Ok(t,e){return Fx(t.databaseId,e)}function X9(t){const e=Mk(t);return e.length===4?Ke.emptyPath():Lk(e)}function jy(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Lk(t){return Ue(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function E_(t,e,n){return{name:Ay(t,e),fields:n.value.mapValue.fields}}function J9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Ue(h===void 0||typeof h=="string",58123),Ot.fromBase64String(h||"")):(Ue(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?q.UNKNOWN:jk(u.code);return new le(h,u.message||"")}(o);n=new Pk(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Up(t,r.document.name),i=Gr(r.document.updateTime),o=r.document.createTime?Gr(r.document.createTime):ve.min(),l=new vn({mapValue:{fields:r.document.fields}}),c=Jt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new rh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Up(t,r.document),i=r.readTime?Gr(r.readTime):ve.min(),o=Jt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new rh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Up(t,r.document),i=r.removedTargetIds||[];n=new rh([],i,s,null)}else{if(!("filter"in e))return ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new U9(s,i),l=r.targetId;n=new Rk(l,o)}}return n}function Z9(t,e){let n;if(e instanceof Tu)n={update:E_(t,e.key,e.value)};else if(e instanceof Ox)n={delete:Ay(t,e.key)};else if(e instanceof $i)n={update:E_(t,e.key,e.data),updateMask:lz(e.fieldMask)};else{if(!(e instanceof V9))return ge(16599,{Vt:e.type});n={verify:Ay(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Xc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof el)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Jc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Zh)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ge(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Y9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ge(27497)}(t,e.precondition)),n}function ez(t,e){return t&&t.length>0?(Ue(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Gr(s.updateTime):Gr(i);return o.isEqual(ve.min())&&(o=Gr(i)),new M9(o,s.transformResults||[])}(n,e))):[]}function tz(t,e){return{documents:[Ok(t,e.path)]}}function nz(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ok(t,s);const i=function(u){if(u.length!==0)return Fk(br.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Yo(p.field),direction:iz(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Iy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function rz(t){let e=X9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ue(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=Vk(f);return p instanceof br&&fk(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(b){return new Yc(Xo(b.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,om(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,v=f.values||[];return new Xh(v,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,v=f.values||[];return new Xh(v,p)}(n.endAt)),_9(e,s,o,i,l,"F",c,u)}function sz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Vk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xo(n.unaryFilter.field);return vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Xo(n.unaryFilter.field);return vt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xo(n.unaryFilter.field);return vt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xo(n.unaryFilter.field);return vt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}}(t):t.fieldFilter!==void 0?function(n){return vt.create(Xo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return br.create(n.compositeFilter.filters.map(r=>Vk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ge(1026)}}(n.compositeFilter.op))}(t):ge(30097,{filter:t})}function iz(t){return q9[t]}function oz(t){return G9[t]}function az(t){return K9[t]}function Yo(t){return{fieldPath:t.canonicalString()}}function Xo(t){return Pt.fromServerFormat(t.fieldPath)}function Fk(t){return t instanceof vt?function(n){if(n.op==="=="){if(u_(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NAN"}};if(c_(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u_(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NAN"}};if(c_(n.value))return{unaryFilter:{field:Yo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yo(n.field),op:oz(n.op),value:n.value}}}(t):t instanceof br?function(n){const r=n.getFilters().map(s=>Fk(s));return r.length===1?r[0]:{compositeFilter:{op:az(n.op),filters:r}}}(t):ge(54877,{filter:t})}function lz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,r,s,i=ve.min(),o=ve.min(),l=Ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e){this.yt=e}}function uz(t){const e=rz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dz{constructor(){this.Cn=new hz}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(ki.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(ki.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class hz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ct(Ke.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ct(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uk=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(Uk,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="LruGarbageCollector",fz=1048576;function N_([t,e],[n,r]){const s=Ie(t,n);return s===0?Ie(e,r):s}class mz{constructor(e){this.Ir=e,this.buffer=new Ct(N_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();N_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ue(T_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ml(n)?ue(T_,"Ignoring IndexedDB error during garbage collection: ",n):await fl(n)}await this.Vr(3e5)})}}class gz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(im.ce);const r=new mz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(S_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Ko()<=Ce.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function yz(t,e){return new gz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vz{constructor(){this.changes=new Vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&gc(r.mutation,s,Pn.empty(),Qe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const s=co();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Xl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=co();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Ts();const o=pc(),l=function(){return pc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof $i)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),gc(h.mutation,u,h.mutation.getFieldMask(),Qe.now())):o.set(u.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new xz(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=pc();let s=new ut((o,l)=>o-l),i=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Pn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||ke()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=_k();h.forEach(p=>{if(!i.has(p)){const v=kk(n.get(p),r.get(p));v!==null&&f.set(p,v),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(co());let l=Gc,c=i;return o.next(u=>G.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ke())).next(h=>({batchId:l,changes:bk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(r=>{let s=Xl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Xl();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const u=function(f,p){return new pl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Jt.newInvalidDocument(h)))});let l=Xl();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&gc(h.mutation,u,Pn.empty(),Qe.now()),um(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Gr(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:uz(s.bundledQuery),readTime:Gr(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(){this.overlays=new ut(me.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=co();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=co(),i=n.length+1,o=new me(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ut((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=co(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=co(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return G.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new z9(n,r));let i=this.qr.get(n);i===void 0&&(i=ke(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.Qr=new Ct(At.$r),this.Ur=new Ct(At.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new At(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new At(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new me(new Ke([])),r=new At(n,e),s=new At(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new me(new Ke([])),r=new At(n,e),s=new At(n,e+1);let i=ke();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new At(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return me.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(At.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new F9(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new At(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Ax:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),s=new At(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ct(Ie);return n.forEach(s=>{const i=new At(s,0),o=new At(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;me.isDocumentKey(i)||(i=i.child(""));const o=new At(new me(i),0);let l=new Ct(Ie);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ue(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(n.mutations,s=>{const i=new At(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new At(n,0),s=this.Zr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.ri=e,this.docs=function(){return new ut(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=Ts();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Jt.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ts();const o=n.path,l=new me(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||t9(e9(h),r)<=0||(s.has(h.key)||um(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ge(9500)}ii(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Nz(this)}getSize(e){return G.resolve(this.size)}}class Nz extends vz{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this.persistence=e,this.si=new Vo(n=>Px(n),Dx),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new zx,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new tl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n){this.ui={},this.overlays={},this.ci=new im(0),this.li=!1,this.li=!0,this.hi=new Ez,this.referenceDelegate=e(this),this.Pi=new Cz(this),this.indexManager=new dz,this.remoteDocumentCache=function(s){return new Tz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new cz(n),this.Ii=new bz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _z,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Sz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ue("MemoryPersistence","Starting transaction:",e);const s=new Iz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Iz extends r9{constructor(e){super(),this.currentSequenceNumber=e}}class Ux{constructor(e){this.persistence=e,this.Ri=new zx,this.Vi=null}static mi(e){return new Ux(e)}get fi(){if(this.Vi)return this.Vi;throw ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{const s=me.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class tf{constructor(e,n){this.persistence=e,this.pi=new Vo(r=>o9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=yz(this,n)}static mi(e,n){return new tf(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?G.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,ve.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=eh(e.data.value)),n}br(e,n,r){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ke(),s=ke();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new $x(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return S3()?8:s9(en())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new kz;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ko()<=Ce.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Qo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Ko()<=Ce.DEBUG&&ue("QueryEngine","Query:",Qo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ko()<=Ce.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Qo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(n))):G.resolve())}ys(e,n){if(m_(n))return G.resolve(null);let r=qr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Jh(n,null,"F"),r=qr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ke(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,Jh(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return m_(n)||s.isEqual(ve.min())?G.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?G.resolve(null):(Ko()<=Ce.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qo(n)),this.vs(e,o,n,ZF(s,Gc)).next(l=>l))})}Ds(e,n){let r=new Ct(xk(e));return n.forEach((s,i)=>{um(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ko()<=Ce.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Qo(n)),this.ps.getDocumentsMatchingQuery(e,n,ki.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="LocalStore",jz=3e8;class Rz{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ut(Ie),this.xs=new Vo(i=>Px(i),Dx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wz(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Pz(t,e,n,r){return new Rz(t,e,n,r)}async function Bk(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ke();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function Dz(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let v=G.resolve();return p.forEach(b=>{v=v.next(()=>h.getEntry(c,b)).next(x=>{const _=u.docVersions.get(b);Ue(_!==null,48541),x.version.compareTo(_)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ke();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Hk(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Mz(t,e){const n=we(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let v=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(Ot.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(x,_,w){return x.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=jz?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,v,h)&&l.push(n.Pi.updateTargetData(i,v))});let c=Ts(),u=ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(Oz(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(ve.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function Oz(t,e,n){let r=ke(),s=ke();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Ts();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ue(Bx,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function Lz(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ax),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Vz(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ii(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Ry(t,e,n){const r=we(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ml(o))throw o;ue(Bx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function C_(t,e,n){const r=we(t);let s=ve.min(),i=ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=we(c),p=f.xs.get(h);return p!==void 0?G.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,qr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ve.min(),n?i:ke())).next(l=>(Fz(r,S9(e),l),{documents:l,Qs:i})))}function Fz(t,e,n){let r=t.Os.get(e)||ve.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class I_{constructor(){this.activeTargetIds=A9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zz{constructor(){this.Mo=new I_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new I_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_="ConnectivityMonitor";class A_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ue(k_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ue(k_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Td=null;function Py(){return Td===null?Td=function(){return 268435456+Math.round(2147483648*Math.random())}():Td++,"0x"+Td.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="RestConnection",$z={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Qh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Py(),l=this.zo(e,n.toUriEncodedString());ue($p,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=cl(u);return this.Jo(e,l,c,r,h).then(f=>(ue($p,`Received RPC '${e}' ${o}: `,f),f),f=>{throw jo($p,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=$z[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt="WebChannelConnection";class Wz extends Bz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Py();return new Promise((l,c)=>{const u=new BI;u.setWithCredentials(!0),u.listenOnce(HI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Zd.NO_ERROR:const f=u.getResponseJson();ue(Gt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Zd.TIMEOUT:ue(Gt,`RPC '${e}' ${o} timed out`),c(new le(q.DEADLINE_EXCEEDED,"Request time out"));break;case Zd.HTTP_ERROR:const p=u.getStatus();if(ue(Gt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v==null?void 0:v.error;if(b&&b.status&&b.message){const x=function(w){const y=w.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(y)>=0?y:q.UNKNOWN}(b.status);c(new le(x,b.message))}else c(new le(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new le(q.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ue(Gt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);ue(Gt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Py(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GI(),l=qI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");ue(Gt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,v=!1;const b=new Hz({Yo:_=>{v?ue(Gt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(ue(Gt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),ue(Gt,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},Zo:()=>f.close()}),x=(_,w,y)=>{_.listen(w,S=>{try{y(S)}catch(I){setTimeout(()=>{throw I},0)}})};return x(f,Yl.EventType.OPEN,()=>{v||(ue(Gt,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),x(f,Yl.EventType.CLOSE,()=>{v||(v=!0,ue(Gt,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(f))}),x(f,Yl.EventType.ERROR,_=>{v||(v=!0,jo(Gt,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),b.a_(new le(q.UNAVAILABLE,"The operation could not be completed")))}),x(f,Yl.EventType.MESSAGE,_=>{var w;if(!v){const y=_.data[0];Ue(!!y,16349);const S=y,I=(S==null?void 0:S.error)||((w=S[0])==null?void 0:w.error);if(I){ue(Gt,`RPC '${e}' stream ${s} received error:`,I);const P=I.status;let D=function(C){const k=gt[C];if(k!==void 0)return jk(k)}(P),N=I.message;D===void 0&&(D=q.INTERNAL,N="Unknown error status: "+P+" with message "+I.message),v=!0,b.a_(new le(D,N)),f.close()}else ue(Gt,`RPC '${e}' stream ${s} received:`,y),b.u_(y)}}),x(l,WI.STAT_EVENT,_=>{_.stat===by.PROXY?ue(Gt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===by.NOPROXY&&ue(Gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Bp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){return new Q9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ue("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_="PersistentStream";class qk{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new le(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ue(j_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ue(j_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qz extends qk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=J9(this.serializer,e),r=function(i){if(!("targetChange"in i))return ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?Gr(o.readTime):ve.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=jy(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Ny(c)?{documents:tz(i,c)}:{query:nz(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Dk(i,o.resumeToken);const u=Iy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ve.min())>0){l.readTime=ef(i,o.snapshotVersion.toTimestamp());const u=Iy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=sz(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=jy(this.serializer),n.removeTarget=e,this.q_(n)}}class Gz extends qk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ue(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ue(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ez(e.writeResults,e.commitTime),r=Gr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=jy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Z9(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{}class Qz extends Kz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,ky(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(q.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,ky(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Yz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ss(n),this.aa=!1):ue("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="RemoteStore";class Xz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Fo(this)&&(ue(Ro,"Restarting streams for network reachability change."),await async function(c){const u=we(c);u.Ea.add(4),await Cu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await pm(u)}(this))})}),this.Ra=new Yz(r,s)}}async function pm(t){if(Fo(t))for(const e of t.da)await e(!0)}async function Cu(t){for(const e of t.da)await e(!1)}function Gk(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gx(n)?qx(n):gl(n).O_()&&Wx(n,e))}function Hx(t,e){const n=we(t),r=gl(n);n.Ia.delete(e),r.O_()&&Kk(n,e),n.Ia.size===0&&(r.O_()?r.L_():Fo(n)&&n.Ra.set("Unknown"))}function Wx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gl(t).Y_(e)}function Kk(t,e){t.Va.Ue(e),gl(t).Z_(e)}function qx(t){t.Va=new W9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),gl(t).start(),t.Ra.ua()}function Gx(t){return Fo(t)&&!gl(t).x_()&&t.Ia.size>0}function Fo(t){return we(t).Ea.size===0}function Qk(t){t.Va=void 0}async function Jz(t){t.Ra.set("Online")}async function Zz(t){t.Ia.forEach((e,n)=>{Wx(t,e)})}async function eU(t,e){Qk(t),Gx(t)?(t.Ra.ha(e),qx(t)):t.Ra.set("Unknown")}async function tU(t,e,n){if(t.Ra.set("Online"),e instanceof Pk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){ue(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nf(t,r)}else if(e instanceof rh?t.Va.Ze(e):e instanceof Rk?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const r=await Hk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),Kk(i,c);const f=new ii(h.target,c,u,h.sequenceNumber);Wx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ue(Ro,"Failed to raise snapshot:",r),await nf(t,r)}}async function nf(t,e,n){if(!ml(e))throw e;t.Ea.add(1),await Cu(t),t.Ra.set("Offline"),n||(n=()=>Hk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue(Ro,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pm(t)})}function Yk(t,e){return e().catch(n=>nf(t,n,e))}async function gm(t){const e=we(t),n=Pi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ax;for(;nU(e);)try{const s=await Lz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,rU(e,s)}catch(s){await nf(e,s)}Xk(e)&&Jk(e)}function nU(t){return Fo(t)&&t.Ta.length<10}function rU(t,e){t.Ta.push(e);const n=Pi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Xk(t){return Fo(t)&&!Pi(t).x_()&&t.Ta.length>0}function Jk(t){Pi(t).start()}async function sU(t){Pi(t).ra()}async function iU(t){const e=Pi(t);for(const n of t.Ta)e.ea(n.mutations)}async function oU(t,e,n){const r=t.Ta.shift(),s=Lx.from(r,e,n);await Yk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await gm(t)}async function aU(t,e){e&&Pi(t).X_&&await async function(r,s){if(function(o){return $9(o)&&o!==q.ABORTED}(s.code)){const i=r.Ta.shift();Pi(r).B_(),await Yk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await gm(r)}}(t,e),Xk(t)&&Jk(t)}async function R_(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),ue(Ro,"RemoteStore received new credentials");const r=Fo(n);n.Ea.add(3),await Cu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pm(n)}async function lU(t,e){const n=we(t);e?(n.Ea.delete(2),await pm(n)):e||(n.Ea.add(2),await Cu(n),n.Ra.set("Unknown"))}function gl(t){return t.ma||(t.ma=function(n,r,s){const i=we(n);return i.sa(),new qz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Jz.bind(null,t),t_:Zz.bind(null,t),r_:eU.bind(null,t),H_:tU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Gx(t)?qx(t):t.Ra.set("Unknown")):(await t.ma.stop(),Qk(t))})),t.ma}function Pi(t){return t.fa||(t.fa=function(n,r,s){const i=we(n);return i.sa(),new Gz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:sU.bind(null,t),r_:aU.bind(null,t),ta:iU.bind(null,t),na:oU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await gm(t)):(await t.fa.stop(),t.Ta.length>0&&(ue(Ro,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Kx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qx(t,e){if(Ss("AsyncQueue",`${e}: ${t}`),ml(t))return new le(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{static emptySet(e){return new _a(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||me.comparator(n.key,r.key):(n,r)=>me.comparator(n.key,r.key),this.keyedMap=Xl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _a)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.ga=new ut(me.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class nl{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new nl(e,n,_a.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class uU{constructor(){this.queries=D_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=we(n),i=s.queries;s.queries=D_(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new le(q.ABORTED,"Firestore shutting down"))}}function D_(){return new Vo(t=>vk(t),cm)}async function Zk(t,e){const n=we(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new cU,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Qx(o,`Initialization of query '${Qo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Yx(n)}async function e2(t,e){const n=we(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dU(t,e){const n=we(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Yx(n)}function hU(t,e,n){const r=we(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Yx(t){t.Ca.forEach(e=>{e.next()})}var Dy,M_;(M_=Dy||(Dy={})).Ma="default",M_.Cache="cache";class t2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Dy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.key=e}}class r2{constructor(e){this.key=e}}class fU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=xk(e),this.tu=new _a(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new P_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),v=um(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let _=!1;p&&v?p.data.isEqual(v.data)?b!==x&&(r.track({type:3,doc:v}),_=!0):this.su(p,v)||(r.track({type:2,doc:v}),_=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(l=!0)):!p&&v?(r.track({type:0,doc:v}),_=!0):p&&!v&&(r.track({type:1,doc:p}),_=!0,(c||u)&&(l=!0)),_&&(v?(o=o.add(v),i=x?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(v,b){const x=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{Rt:_})}};return x(v)-x(b)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new nl(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new P_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new r2(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new n2(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xx="SyncEngine";class mU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pU{constructor(e){this.key=e,this.hu=!1}}class gU{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Vo(l=>vk(l),cm),this.Iu=new Map,this.Eu=new Set,this.du=new ut(me.comparator),this.Au=new Map,this.Ru=new zx,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function yU(t,e,n=!0){const r=c2(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await s2(r,e,n,!0),s}async function vU(t,e){const n=c2(t);await s2(n,e,!0,!1)}async function s2(t,e,n,r){const s=await Vz(t.localStore,qr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await xU(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Gk(t.remoteStore,s),l}async function xU(t,e,n,r,s){t.pu=(f,p,v)=>async function(x,_,w,y){let S=_.view.ru(w);S.Cs&&(S=await C_(x.localStore,_.query,!1).then(({documents:N})=>_.view.ru(N,S)));const I=y&&y.targetChanges.get(_.targetId),P=y&&y.targetMismatches.get(_.targetId)!=null,D=_.view.applyChanges(S,x.isPrimaryClient,I,P);return L_(x,_.targetId,D.au),D.snapshot}(t,f,p,v);const i=await C_(t.localStore,e,!0),o=new fU(e,i.Qs),l=o.ru(i.documents),c=Nu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);L_(t,n,u.au);const h=new mU(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function wU(t,e,n){const r=we(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!cm(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ry(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hx(r.remoteStore,s.targetId),My(r,s.targetId)}).catch(fl)):(My(r,s.targetId),await Ry(r.localStore,s.targetId,!0))}async function bU(t,e){const n=we(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hx(n.remoteStore,r.targetId))}async function _U(t,e,n){const r=kU(t);try{const s=await function(o,l){const c=we(o),u=Qe.now(),h=l.reduce((v,b)=>v.add(b.key),ke());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Ts(),x=ke();return c.Ns.getEntries(v,h).next(_=>{b=_,b.forEach((w,y)=>{y.isValidDocument()||(x=x.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,b)).next(_=>{f=_;const w=[];for(const y of l){const S=L9(y,f.get(y.key).overlayedDocument);S!=null&&w.push(new $i(y.key,S,uk(S.value.mapValue),mr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,w,l)}).next(_=>{p=_;const w=_.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(v,_.batchId,w)})}).then(()=>({batchId:p.batchId,changes:bk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new ut(Ie)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Iu(r,s.changes),await gm(r.remoteStore)}catch(s){const i=Qx(s,"Failed to persist write");n.reject(i)}}async function i2(t,e){const n=we(t);try{const r=await Mz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Ue(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ue(o.hu,14607):s.removedDocuments.size>0&&(Ue(o.hu,42227),o.hu=!1))}),await Iu(n,r,e)}catch(r){await fl(r)}}function O_(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=we(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&Yx(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function EU(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ut(me.comparator);o=o.insert(i,Jt.newNoDocument(i,ve.min()));const l=ke().add(i),c=new fm(ve.min(),new Map,new ut(Ie),o,l);await i2(r,c),r.du=r.du.remove(i),r.Au.delete(e),Jx(r)}else await Ry(r.localStore,e,!1).then(()=>My(r,e,n)).catch(fl)}async function SU(t,e){const n=we(t),r=e.batch.batchId;try{const s=await Dz(n.localStore,e);a2(n,r,null),o2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Iu(n,s)}catch(s){await fl(s)}}async function TU(t,e,n){const r=we(t);try{const s=await function(o,l){const c=we(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Ue(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);a2(r,e,n),o2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Iu(r,s)}catch(s){await fl(s)}}function o2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function a2(t,e,n){const r=we(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function My(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||l2(t,r)})}function l2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Hx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Jx(t))}function L_(t,e,n){for(const r of n)r instanceof n2?(t.Ru.addReference(r.key,e),NU(t,r)):r instanceof r2?(ue(Xx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||l2(t,r.key)):ge(19791,{wu:r})}function NU(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ue(Xx,"New document in limbo: "+n),t.Eu.add(r),Jx(t))}function Jx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new me(Ke.fromString(e)),r=t.fu.next();t.Au.set(r,new pU(n)),t.du=t.du.insert(n,r),Gk(t.remoteStore,new ii(qr(lm(n.path)),r,"TargetPurposeLimboResolution",im.ce))}}async function Iu(t,e,n){const r=we(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=$x.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=we(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(u,p=>G.forEach(p.Es,v=>h.persistence.referenceDelegate.addReference(f,p.targetId,v)).next(()=>G.forEach(p.ds,v=>h.persistence.referenceDelegate.removeReference(f,p.targetId,v)))))}catch(f){if(!ml(f))throw f;ue(Bx,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const v=h.Ms.get(p),b=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(p,x)}}}(r.localStore,i))}async function CU(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){ue(Xx,"User change. New user:",e.toKey());const r=await Bk(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new le(q.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Iu(n,r.Ls)}}function IU(t,e){const n=we(t),r=n.Au.get(e);if(r&&r.hu)return ke().add(r.key);{let s=ke();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function c2(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=i2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EU.bind(null,e),e.Pu.H_=dU.bind(null,e.eventManager),e.Pu.yu=hU.bind(null,e.eventManager),e}function kU(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TU.bind(null,e),e}class rf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=mm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Pz(this.persistence,new Az,e.initialUser,this.serializer)}Cu(e){return new $k(Ux.mi,this.serializer)}Du(e){return new zz}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}rf.provider={build:()=>new rf};class AU extends rf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ue(this.persistence.referenceDelegate instanceof tf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pz(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new $k(r=>tf.mi(r,n),this.serializer)}}class Oy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CU.bind(null,this.syncEngine),await lU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uU}()}createDatastore(e){const n=mm(e.databaseInfo.databaseId),r=function(i){return new Wz(i)}(e.databaseInfo);return function(i,o,l,c){return new Qz(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Xz(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>O_(this.syncEngine,n,0),function(){return A_.v()?new A_:new Uz}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new gU(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=we(s);ue(Ro,"RemoteStore shutting down."),i.Ea.add(5),await Cu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Oy.provider={build:()=>new Oy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="FirestoreClient";class jU{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Qt.UNAUTHENTICATED,this.clientId=rm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ue(Di,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ue(Di,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Qx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hp(t,e){t.asyncQueue.verifyOperationInProgress(),ue(Di,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Bk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function V_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await RU(t);ue(Di,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>R_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>R_(e.remoteStore,s)),t._onlineComponents=e}async function RU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue(Di,"Using user provided OfflineComponentProvider");try{await Hp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await Hp(t,new rf)}}else ue(Di,"Using default OfflineComponentProvider"),await Hp(t,new AU(void 0));return t._offlineComponents}async function d2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue(Di,"Using user provided OnlineComponentProvider"),await V_(t,t._uninitializedComponentsProvider._online)):(ue(Di,"Using default OnlineComponentProvider"),await V_(t,new Oy))),t._onlineComponents}function PU(t){return d2(t).then(e=>e.syncEngine)}async function Ly(t){const e=await d2(t),n=e.eventManager;return n.onListen=yU.bind(null,e.syncEngine),n.onUnlisten=wU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bU.bind(null,e.syncEngine),n}function DU(t,e,n={}){const r=new xi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new u2({next:p=>{h.Nu(),o.enqueueAndForget(()=>e2(i,f));const v=p.docs.has(l);!v&&p.fromCache?u.reject(new le(q.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&c&&c.source==="server"?u.reject(new le(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new t2(lm(l.path),h,{includeMetadataChanges:!0,qa:!0});return Zk(i,f)}(await Ly(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="firestore.googleapis.com",z_=!0;class U_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f2,this.ssl=z_}else this.host=e.host,this.ssl=e.ssl??z_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fz)throw new le(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h2(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ym{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new YI;switch(r.type){case"firstParty":return new GF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=F_.get(n);r&&(ue("ComponentProvider","Removing Datastore"),F_.delete(n),r.terminate())}(this),Promise.resolve()}}function m2(t,e,n,r={}){var u;t=Kn(t,ym);const s=cl(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(sI(`https://${l}`),iI("Firestore",!0)),i.host!==f2&&i.host!==l&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Ii(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Qt.MOCK_USER;else{h=p3(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new le(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Qt(p)}t._authCredentials=new HF(new QI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Su(n,at._jsonSchema))return new at(e,r||null,new me(Ke.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:xt("string",at._jsonSchemaVersion),referencePath:xt("string")};class ms extends ks{constructor(e,n,r){super(e,n,lm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new me(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function Zx(t,e,...n){if(t=Mt(t),XI("collection","path",e),t instanceof ym){const r=Ke.fromString(e,...n);return e_(r),new ms(t,null,r)}{if(!(t instanceof at||t instanceof ms))throw new le(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return e_(r),new ms(t.firestore,null,r)}}function ze(t,e,...n){if(t=Mt(t),arguments.length===1&&(e=rm.newId()),XI("doc","path",e),t instanceof ym){const r=Ke.fromString(e,...n);return Zb(r),new at(t,null,new me(r))}{if(!(t instanceof at||t instanceof ms))throw new le(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return Zb(r),new at(t.firestore,t instanceof ms?t.converter:null,new me(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="AsyncQueue";class B_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wk(this,"async_queue_retry"),this._c=()=>{const r=Bp();r&&ue($_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ml(e))throw e;ue($_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ss("INTERNAL UNHANDLED ERROR: ",H_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Kx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ge(47125,{Pc:H_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function H_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Mi extends ym{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new B_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B_(e),this._firestoreClient=void 0,await e}}}function p2(t,e){const n=typeof t=="object"?t:cI(),r=typeof t=="string"?t:Qh,s=vx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=f3("firestore");i&&m2(s,...i)}return s}function vm(t){if(t._terminated)throw new le(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||MU(t),t._firestoreClient}function MU(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new c9(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new jU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Ot.fromBase64String(e))}catch(n){throw new le(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:xt("string",jn._jsonSchemaVersion),bytes:xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(Su(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:xt("string",pr._jsonSchemaVersion),latitude:xt("number"),longitude:xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gr(e.vectorValues);throw new le(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gr._jsonSchemaVersion="firestore/vectorValue/1.0",gr._jsonSchema={type:xt("string",gr._jsonSchemaVersion),vectorValues:xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU=/^__.*__$/;class LU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class g2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $i(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function y2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ac:t})}}class xm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(y2(this.Ac)&&OU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||mm(e)}Cc(e,n,r,s=!1){return new xm({Ac:e,methodName:n,Dc:r,path:Pt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function e0(t){const e=t._freezeSettings(),n=mm(t._databaseId);return new VU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function FU(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);r0("Data must be an object, but it was:",o,r);const l=v2(r,o);let c,u;if(i.merge)c=new Pn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Vy(e,f,n);if(!o.contains(p))throw new le(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);w2(h,p)||h.push(p)}c=new Pn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new LU(new vn(l),c,u)}class wm extends yl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wm}}function zU(t,e,n){return new xm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class t0 extends yl{_toFieldTransform(e){return new Ik(e.path,new Xc)}isEqual(e){return e instanceof t0}}class n0 extends yl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=zU(this,e,!0),r=this.vc.map(i=>vl(i,n)),s=new el(r);return new Ik(e.path,s)}isEqual(e){return e instanceof n0&&Ii(this.vc,e.vc)}}function UU(t,e,n,r){const s=t.Cc(1,e,n);r0("Data must be an object, but it was:",s,r);const i=[],o=vn.empty();Ui(r,(c,u)=>{const h=s0(e,c,n);u=Mt(u);const f=s.yc(h);if(u instanceof wm)i.push(h);else{const p=vl(u,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new Pn(i);return new g2(o,l,s.fieldTransforms)}function $U(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Vy(e,r,n)],c=[s];if(i.length%2!=0)throw new le(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Vy(e,i[p])),c.push(i[p+1]);const u=[],h=vn.empty();for(let p=l.length-1;p>=0;--p)if(!w2(u,l[p])){const v=l[p];let b=c[p];b=Mt(b);const x=o.yc(v);if(b instanceof wm)u.push(v);else{const _=vl(b,x);_!=null&&(u.push(v),h.set(v,_))}}const f=new Pn(u);return new g2(h,f,o.fieldTransforms)}function BU(t,e,n,r=!1){return vl(n,t.Cc(r?4:3,e))}function vl(t,e){if(x2(t=Mt(t)))return r0("Unsupported field value:",e,t),v2(t,e);if(t instanceof yl)return function(r,s){if(!y2(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=vl(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return j9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Qe.fromDate(r);return{timestampValue:ef(s.serializer,i)}}if(r instanceof Qe){const i=new Qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(s.serializer,i)}}if(r instanceof pr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:Dk(s.serializer,r._byteString)};if(r instanceof at){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gr)return function(o,l){return{mapValue:{fields:{[ak]:{stringValue:ck},[Yh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Mx(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${sm(r)}`)}(t,e)}function v2(t,e){const n={};return tk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,s)=>{const i=vl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function x2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qe||t instanceof pr||t instanceof jn||t instanceof at||t instanceof yl||t instanceof gr)}function r0(t,e,n){if(!x2(n)||!ZI(n)){const r=sm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Vy(t,e,n){if((e=Mt(e))instanceof ku)return e._internalPath;if(typeof e=="string")return s0(t,e);throw sf("Field path arguments must be of type string or ",t,!1,void 0,n)}const HU=new RegExp("[~\\*/\\[\\]]");function s0(t,e,n){if(e.search(HU)>=0)throw sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ku(...e.split("."))._internalPath}catch{throw sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new le(q.INVALID_ARGUMENT,l+t+c)}function w2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(i0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WU extends b2{data(){return super.data()}}function i0(t,e){return typeof e=="string"?s0(t,e):e instanceof ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o0{}class bm extends o0{}function a0(t,e,...n){let r=[];e instanceof o0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Em).length,l=i.filter(c=>c instanceof _m).length;if(o>1||o>0&&l>0)throw new le(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class _m extends bm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new _m(e,n,r)}_apply(e){const n=this._parse(e);return E2(e._query,n),new ks(e.firestore,e.converter,Cy(e._query,n))}_parse(e){const n=e0(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){G_(f,h);const b=[];for(const x of f)b.push(q_(c,i,x));p={arrayValue:{values:b}}}else p=q_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||G_(f,h),p=BU(l,o,f,h==="in"||h==="not-in");return vt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Em extends o0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Em(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)E2(o,c),o=Cy(o,c)}(e._query,n),new ks(e.firestore,e.converter,Cy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sm extends bm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Sm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new le(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yc(i,o)}(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new pl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function l0(t,e="asc"){const n=e,r=i0("orderBy",t);return Sm._create(r,n)}class Tm extends bm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Tm(e,n,r)}_apply(e){return new ks(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function _2(t){return Tm._create("limit",t,"F")}function q_(t,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new le(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yk(e)&&n.indexOf("/")!==-1)throw new le(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ke.fromString(n));if(!me.isDocumentKey(r))throw new le(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return l_(t,new me(r))}if(n instanceof at)return l_(t,n._key);throw new le(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sm(n)}.`)}function G_(t,e){if(!Array.isArray(t)||t.length===0)throw new le(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E2(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class S2{convertValue(e,n="none"){switch(Ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Yh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>mt(o.doubleValue));return new gr(n)}convertGeoPoint(e){return new pr(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=am(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Kc(e));default:return null}}convertTimestamp(e){const n=Ai(e);return new Qe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ke.fromString(e);Ue(zk(r),9688,{name:e});const s=new Xa(r.get(1),r.get(3)),i=new me(r.popFirst(5));return s.isEqual(n)||Ss(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ua{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wi extends b2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(i0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",wi._jsonSchema={type:xt("string",wi._jsonSchemaVersion),bundleSource:xt("string","DocumentSnapshot"),bundleName:xt("string"),bundle:xt("string")};class yc extends wi{data(e={}){return super.data(e)}}class xo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ua(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yc(this._firestore,this._userDataWriter,r.key,r,new ua(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new yc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ua(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new yc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ua(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:KU(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function KU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t){t=Kn(t,at);const e=Kn(t.firestore,Mi);return DU(vm(e),t._key).then(n=>I2(e,t,n))}xo._jsonSchemaVersion="firestore/querySnapshot/1.0",xo._jsonSchema={type:xt("string",xo._jsonSchemaVersion),bundleSource:xt("string","QuerySnapshot"),bundleName:xt("string"),bundle:xt("string")};class T2 extends S2{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function Ut(t,e,n){t=Kn(t,at);const r=Kn(t.firestore,Mi),s=GU(t.converter,e,n);return Nm(r,[FU(e0(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,mr.none())])}function N2(t,e,n,...r){t=Kn(t,at);const s=Kn(t.firestore,Mi),i=e0(s);let o;return o=typeof(e=Mt(e))=="string"||e instanceof ku?$U(i,"updateDoc",t._key,e,n,r):UU(i,"updateDoc",t._key,e),Nm(s,[o.toMutation(t._key,mr.exists(!0))])}function C2(t){return Nm(Kn(t.firestore,Mi),[new Ox(t._key,mr.none())])}function As(t,...e){var c,u,h;t=Mt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||W_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(W_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,l;if(t instanceof at)o=Kn(t.firestore,Mi),l=lm(t._key.path),i={next:f=>{e[r]&&e[r](I2(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Kn(t,ks);o=Kn(f.firestore,Mi),l=f._query;const p=new T2(o);i={next:v=>{e[r]&&e[r](new xo(o,p,f,v))},error:e[r+1],complete:e[r+2]},qU(t._query)}return function(p,v,b,x){const _=new u2(x),w=new t2(v,_,b);return p.asyncQueue.enqueueAndForget(async()=>Zk(await Ly(p),w)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>e2(await Ly(p),w))}}(vm(o),l,s,i)}function Nm(t,e){return function(r,s){const i=new xi;return r.asyncQueue.enqueueAndForget(async()=>_U(await PU(r),s,i)),i.promise}(vm(t),e)}function I2(t,e,n){const r=n.docs.get(e._key),s=new T2(t);return new wi(t,s,e._key,r,new ua(n.hasPendingWrites,n.fromCache),e.converter)}function Cm(){return new t0("serverTimestamp")}function k2(...t){return new n0("arrayUnion",t)}(function(e,n=!0){(function(s){hl=s})(ul),Ka(new Io("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Mi(new WF(r.getProvider("auth-internal")),new KF(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new le(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),yi(Qb,Yb,e),yi(Qb,Yb,"esm2020")})();const K_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:S2,Bytes:jn,CollectionReference:ms,DocumentReference:at,DocumentSnapshot:wi,FieldPath:ku,FieldValue:yl,Firestore:Mi,FirestoreError:le,GeoPoint:pr,Query:ks,QueryCompositeFilterConstraint:Em,QueryConstraint:bm,QueryDocumentSnapshot:yc,QueryFieldFilterConstraint:_m,QueryLimitConstraint:Tm,QueryOrderByConstraint:Sm,QuerySnapshot:xo,SnapshotMetadata:ua,Timestamp:Qe,VectorValue:gr,_AutoId:rm,_ByteString:Ot,_DatabaseId:Xa,_DocumentKey:me,_EmptyAuthCredentialsProvider:YI,_FieldPath:Pt,_cast:Kn,_logWarn:jo,_validateIsNotUsedTogether:JI,arrayUnion:k2,collection:Zx,connectFirestoreEmulator:m2,deleteDoc:C2,doc:ze,ensureFirestoreConfigured:vm,executeWrite:Nm,getDoc:_r,getFirestore:p2,limit:_2,onSnapshot:As,orderBy:l0,query:a0,serverTimestamp:Cm,setDoc:Ut,updateDoc:N2},Symbol.toStringTag,{value:"Module"})),QU={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},c0=lI(QU),so=zF(c0),Le=p2(c0),Er=new Yt;Er.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Er.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Er.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Er.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Er.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly");Er.addScope("https://www.googleapis.com/auth/calendar");Er.addScope("https://www.googleapis.com/auth/gmail.send");Er.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const Q_=Object.freeze(Object.defineProperty({__proto__:null,app:c0,auth:so,db:Le,googleProvider:Er},Symbol.toStringTag,{value:"Module"})),A2=m.createContext(void 0);function YU({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(()=>localStorage.getItem("google_access_token")),[l,c]=m.useState(null),[u,h]=m.useState(()=>localStorage.getItem("user_role"));m.useEffect(()=>kV(so,y=>{n(y),y||(h(null),s(!1),o(null),localStorage.removeItem("google_access_token"))}),[]),m.useEffect(()=>{async function w(){if(!e||!i){if(e&&!i){const y=localStorage.getItem("google_access_token");if(y){o(y);return}}e||s(!1);return}try{s(!0);const y=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let S=!1;if(y.ok){const D=await y.json();D.courses&&D.courses.length>0&&(S=!0)}if(S){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const I=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let P=!1;if(I.ok){const D=await I.json();D.courses&&D.courses.length>0&&(P=!0)}P?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(y){console.error("Role detection failed:",y),h("no_access")}finally{s(!1)}}w()},[e,i]);const f=async()=>{try{c(null),Er.setCustomParameters({prompt:"consent",access_type:"offline"});const w=await wd(so,Er),y=Yt.credentialFromResult(w);y!=null&&y.accessToken&&(o(y.accessToken),localStorage.setItem("google_access_token",y.accessToken))}catch(w){const y=w instanceof Error?w.message:"Failed to sign in";c(y),console.error("Sign in error:",w)}},p=async()=>{try{c(null);const w=new Yt;w.addScope("https://www.googleapis.com/auth/gmail.send"),w.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),w.setCustomParameters({access_type:"offline",prompt:"consent"});const y=await wd(so,w),S=Yt.credentialFromResult(y),I=y._tokenResponse;if(S!=null&&S.accessToken&&(o(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),I!=null&&I.oauthRefreshToken){const{doc:P,setDoc:D,serverTimestamp:N}=await vd(async()=>{const{doc:C,setDoc:k,serverTimestamp:R}=await Promise.resolve().then(()=>K_);return{doc:C,setDoc:k,serverTimestamp:R}},void 0),{db:E}=await vd(async()=>{const{db:C}=await Promise.resolve().then(()=>Q_);return{db:C}},void 0);if(e&&I.oauthRefreshToken)return await D(P(E,"users",e.uid,"private_tokens","google"),{refreshToken:I.oauthRefreshToken,updatedAt:N()}),!0}return!!(S!=null&&S.accessToken)}catch(w){const y=w instanceof Error?w.message:"Failed to get Gmail permissions";return c(y),console.error("Permission error:",w),!1}},v=async()=>{try{c(null);const w=new Yt;w.addScope("https://www.googleapis.com/auth/calendar.events"),w.setCustomParameters({access_type:"offline",prompt:"consent"});const y=await wd(so,w),S=Yt.credentialFromResult(y),I=y._tokenResponse;if(S!=null&&S.accessToken&&(o(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),e&&(I!=null&&I.oauthRefreshToken)){const{doc:P,setDoc:D,serverTimestamp:N}=await vd(async()=>{const{doc:C,setDoc:k,serverTimestamp:R}=await Promise.resolve().then(()=>K_);return{doc:C,setDoc:k,serverTimestamp:R}},void 0),{db:E}=await vd(async()=>{const{db:C}=await Promise.resolve().then(()=>Q_);return{db:C}},void 0);return await D(P(E,"users",e.uid,"private_tokens","calendar"),{refreshToken:I.oauthRefreshToken,updatedAt:N(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(w){const y=w instanceof Error?w.message:"Failed to get Calendar permissions";return c(y),console.error("Permission error:",w),!1}},b=async()=>{if(!e)return!1;try{const w=new Yt;w.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),w.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),w.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),w.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly"),w.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),w.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const y=await wd(so,w),S=Yt.credentialFromResult(y);return S!=null&&S.accessToken?(o(S.accessToken),localStorage.setItem("google_access_token",S.accessToken),console.log("Access token refreshed successfully"),!0):!1}catch(w){return console.error("Failed to refresh access token:",w),!1}},x=async()=>b(),_=async()=>{try{await AV(so),o(null),h(null),localStorage.removeItem("google_access_token"),localStorage.removeItem("user_role")}catch(w){const y=w instanceof Error?w.message:"Failed to sign out";c(y)}};return a.jsx(A2.Provider,{value:{user:e,loading:r,role:u,accessToken:i,signInWithGoogle:f,requestGmailPermissions:p,requestCalendarPermissions:v,refreshAccessToken:x,signOut:_,error:l},children:t})}function st(){const t=m.useContext(A2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const j2=m.createContext(void 0);function XU({children:t}){const[e,n]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});m.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return a.jsx(j2.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function u0(){const t=m.useContext(j2);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}class JU{static calculateXP(e){let n=0;const r=[];for(const s of e)if(s.systemStatus==="submitted"||s.systemStatus==="graded"){if(n+=100,s.submittedAt&&s.dueDate){const o=new Date(s.submittedAt).getTime();(new Date(s.dueDate).getTime()-o)/(1e3*60*60)>48&&(n+=50)}r.push(s.id)}return{totalXP:n,processedIds:r}}static calculateBadges(e,n){const r=new Set(n);return e>=10&&r.add("10-submissions"),e>=25&&r.add("25-submissions"),e>=50&&r.add("50-submissions"),Array.from(r)}static async syncUserLeaderboard(e,n,r,s,i,o){try{const{totalXP:l,processedIds:c}=this.calculateXP(i),u=n.includes("@")?n.split("@")[1]:"",h=o.map(x=>x.id),f=ze(Le,"leaderboards","all-courses","students",e),p=await _r(f),v=p.exists()?p.data().badges||[]:[],b=this.calculateBadges(c.length,v);await Ut(f,{displayName:r||"Anonymous",photoUrl:s||"",email:n,emailDomain:u,enrolledCourseIds:h,totalXP:l,processedAssignmentIds:c,lastSyncedAt:Cm(),badges:b},{merge:!0})}catch(l){throw console.error(" Failed to sync leaderboard:",l),l}}static async resetLeaderboardForSemester(e){try{const n=ze(Le,"leaderboards","all-courses","students",e);await C2(n),console.log(` Leaderboard reset for user ${e}`)}catch(n){throw console.error(" Failed to reset leaderboard:",n),n}}static async hasCoursesChanged(e,n){try{const r=ze(Le,"leaderboards","all-courses","students",e),s=await _r(r);if(!s.exists())return!1;const i=s.data().enrolledCourseIds||[],o=new Set(n),l=new Set(i);if(o.size!==l.size)return console.log("   Course count changed - semester change detected"),!0;for(const c of n)if(!l.has(c))return console.log(`   New course detected: ${c} - semester change detected`),!0;for(const c of i)if(!o.has(c))return console.log(`   Course removed: ${c} - semester change detected`),!0;return!1}catch(r){return console.error(" Failed to check course changes:",r),!1}}static async autoSyncOnLogin(e,n,r,s,i,o){try{const l=o.map(u=>u.id);await this.hasCoursesChanged(e,l)&&(console.log(" Semester change detected, resetting leaderboard..."),await this.resetLeaderboardForSemester(e)),await this.syncUserLeaderboard(e,n,r,s,i,o)}catch(l){throw console.error(" Auto-sync failed:",l),l}}}async function ZU(t,e,n,r){const i=[`To: ${t}`,"Subject: "+e,"Content-Type: text/html; charset=utf-8","MIME-Version: 1.0","",n].join(`\r
`),o=btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({raw:o})})}async function e8(t,e,n,r){const s=ze(Le,"users",n,"settings","calendar"),i=await _r(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],f={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Student Sphere`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),f.end.date=p.toISOString().split("T")[0];const v=ze(Le,"users",n,"calendarEvents",c.id),b=await _r(v),x="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let _;if(b.exists()){const{calendarEventId:w}=b.data();_=await fetch(`${x}/${w}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(_=await fetch(x,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),_.ok){const w=await _.json();await Ut(v,{calendarEventId:w.id,assignmentId:c.id,updatedAt:Cm()})}if(!_.ok&&_.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(_){console.warn(`Failed to sync assignment ${c.id} to calendar`,_)}}}const R2=m.createContext(void 0);function t8(){return Math.random().toString(36).substring(2,15)}async function Zc(t,e,n,r){var o;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e,u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,v={};try{const b=await u.json();v=b,p=((o=b.error)==null?void 0:o.message)||b.message||p,console.error("API Error Response:",b)}catch{const x=await u.text().catch(()=>"");console.error("API Error (non-JSON):",x)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}const Y_=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function n8(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%Y_.length;return Y_[n]}async function r8(t,e){const r=await Zc(t,"https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE",i=>i.courses||[],i=>i.nextPageToken),s=new Date().toISOString();return r.map(i=>({id:i.id,userId:e,classroomId:i.id,name:i.name,section:i.section||null,descriptionHeading:i.descriptionHeading||null,room:i.room||null,ownerId:i.ownerId||null,enrollmentCode:i.enrollmentCode||null,courseState:i.courseState||null,alternateLink:i.alternateLink||null,lastSyncedAt:s,color:n8(i.id)}))}async function s8(t,e,n,r){var l,c;const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWork?courseWorkStates=PUBLISHED`,i=await Zc(t,s,u=>u.courseWork||[],u=>u.nextPageToken),o=[];for(const u of i){if(u.workType&&u.workType!=="ASSIGNMENT"&&u.workType!=="MULTIPLE_CHOICE_QUESTION")continue;let h=null;try{const _=`https://classroom.googleapis.com/v1/courses/${e}/courseWork/${u.id}/studentSubmissions?userId=me`;h=(await Zc(t,_,y=>y.studentSubmissions||[],y=>y.nextPageToken))[0]||null}catch(_){console.warn(`Failed to fetch submissions for coursework ${u.id}:`,_)}let f=null,p=null;u.dueDate&&(f=new Date(u.dueDate.year,u.dueDate.month-1,u.dueDate.day,((l=u.dueTime)==null?void 0:l.hours)||23,((c=u.dueTime)==null?void 0:c.minutes)||59).toISOString(),u.dueTime&&(p=`${String(u.dueTime.hours).padStart(2,"0")}:${String(u.dueTime.minutes).padStart(2,"0")}`));const v=new Date;let b="backlog";h?h.state==="RETURNED"||h.returnedGrade!==void 0?b="graded":h.state==="TURNED_IN"||h.turnInTime?b="submitted":h.state==="CREATED"&&(b=f&&new Date(f)<v?"overdue":"backlog"):f&&new Date(f)<v?b="overdue":b="backlog";const x={id:`assign-${u.id}`,uniqueId:`${e}-${u.id}`,userId:r,courseId:e,courseName:n,classroomId:u.id,title:u.title,description:u.description||null,dueDate:f,dueTime:p,maxPoints:u.maxPoints||null,systemStatus:b,userStatus:null,submissionId:(h==null?void 0:h.id)||null,submittedAt:(h==null?void 0:h.turnInTime)||null,gradedAt:h!=null&&h.updateTime&&h.state==="RETURNED"?h.updateTime:null,grade:(h==null?void 0:h.returnedGrade)??(h==null?void 0:h.assignedGrade)??(h==null?void 0:h.draftGrade)??null,alternateLink:u.alternateLink||null,createdAt:u.creationTime||v.toISOString(),lastSyncedAt:v.toISOString()};o.push(x)}return o}async function i8(t,e,n,r,s){const i=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`,o=`https://classroom.googleapis.com/v1/courses/${e}/announcements?announcementStates=PUBLISHED`;try{const[l,c]=await Promise.all([Zc(t,i,p=>p.courseWorkMaterial||[],p=>p.nextPageToken).catch(p=>(console.warn(`Failed to fetch courseWorkMaterials for ${e}:`,p),[])),Zc(t,o,p=>p.announcements||[],p=>p.nextPageToken).catch(p=>{var v,b;return((v=p.message)!=null&&v.includes("insufficient authentication scopes")||(b=p.message)!=null&&b.includes("403"))&&(s==null||s()),console.warn(`Failed to fetch announcements for ${e}:`,p),[]})]),u=new Date().toISOString(),h=l.map(p=>({id:`mat-${p.id}`,uniqueId:`${e}-${p.id}`,userId:r,courseId:e,courseName:n,title:p.title,description:p.description||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u})),f=c.filter(p=>p.materials&&p.materials.length>0).map(p=>{const v=p.text||"Announcement Material",b=v.split(`
`)[0].length>60?v.split(`
`)[0].substring(0,57)+"...":v.split(`
`)[0];return{id:`ann-${p.id}`,uniqueId:`${e}-ann-${p.id}`,userId:r,courseId:e,courseName:n,title:b,description:p.text||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u}});return[...h,...f]}catch(l){return console.warn(`Failed to fetch materials for course ${e}:`,l),[]}}function o8({children:t}){const{user:e,accessToken:n,refreshAccessToken:r,loading:s}=st();m.useEffect(()=>{!s&&!e&&(o([]),c([]),h([]),p(new Map),y(null),D(!1),localStorage.removeItem("classroom_courses"),localStorage.removeItem("classroom_assignments"),localStorage.removeItem("classroom_materials"),localStorage.removeItem("classroom_notes"),localStorage.removeItem("classroom_lastSyncedAt"))},[s,e]);const[i,o]=m.useState(()=>{const z=localStorage.getItem("classroom_courses");return z?JSON.parse(z):[]}),[l,c]=m.useState(()=>{const z=localStorage.getItem("classroom_assignments");return z?JSON.parse(z):[]}),[u,h]=m.useState(()=>{const z=localStorage.getItem("classroom_materials");return z?JSON.parse(z):[]}),[f,p]=m.useState(()=>{const z=localStorage.getItem("classroom_notes");return z?new Map(JSON.parse(z)):new Map}),[v,b]=m.useState(()=>!localStorage.getItem("classroom_courses")),[x,_]=m.useState(!1),[w,y]=m.useState(()=>{const z=localStorage.getItem("classroom_lastSyncedAt");return z?new Date(z):null}),[S,I]=m.useState(null),[P,D]=m.useState(!1),[N,E]=m.useState(!1),{toast:C}=Lo(),k=m.useCallback(async(z=!1)=>{var J;if(!e){I("Please sign in with Google to sync your Classroom data"),b(!1);return}let U=n;if(!U){console.log("No access token found, attempting to refresh...");try{if(await r()){await new Promise(te=>setTimeout(te,500));const Q=localStorage.getItem("google_access_token");if(Q)U=Q,console.log("Successfully refreshed access token");else throw new Error("Token refresh succeeded but token not found")}else throw new Error("Token refresh failed")}catch(Y){console.error("Failed to refresh token:",Y),I("Your session has expired. Please click below to sign in again and refresh your access."),b(!1);return}}_(!0),l.length===0&&b(!0),I(null);try{console.log("Starting sync...",{userId:e.uid,hasToken:!!U});const Y=await r8(U,e.uid);if(Y.length===0){I("No active courses found. Make sure you're enrolled in at least one Google Classroom course."),o([]),c([]),y(new Date),_(!1),b(!1);return}const Q=[],te=[];for(const V of Y)try{const[B,ne]=await Promise.all([s8(U,V.classroomId,V.name,e.uid),i8(U,V.classroomId,V.name,e.uid,()=>E(!0))]);Q.push(...B),te.push(...ne)}catch(B){console.warn(`Failed to fetch data for course ${V.name}:`,B)}console.log(`Sync complete: ${Y.length} courses, ${Q.length} assignments, ${te.length} materials`),o(Y),c(Q),h(te),y(new Date);try{await JU.autoSyncOnLogin(e.uid,e.email||"",e.displayName||"Anonymous",e.photoURL||"",Q,Y),console.log(" Leaderboard auto-synced successfully")}catch(V){console.error(" Leaderboard sync failed:",V)}b(!1);try{await e8(Q,U,e.uid,C)}catch(V){console.error("Calendar sync failed:",V)}try{const V=ze(Le,"users",e.uid,"settings","notifications"),B=await _r(V);if(B.exists()&&B.data().enabled&&B.data().notifyDueSoon){const ae=ze(Le,"users",e.uid,"notifications","digest"),re=await _r(ae),se=re.exists()?(J=re.data().lastSent)==null?void 0:J.toDate():null,ce=new Date;if(!(se&&se.getDate()===ce.getDate()&&se.getMonth()===ce.getMonth()&&se.getFullYear()===ce.getFullYear())){const je=new Date(ce);je.setDate(je.getDate()+1),je.setHours(23,59,59,999);const De=Q.filter(Ne=>{if(!Ne.dueDate||Ne.systemStatus==="submitted"||Ne.systemStatus==="graded")return!1;const it=new Date(Ne.dueDate);return it>=ce&&it<=je});if(De.length>0&&e.email){const Ne=De.map(Sn=>`<li><strong>${Sn.title}</strong> <span style="color:#666">(${Sn.courseName})</span><br>Due: ${new Date(Sn.dueDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</li>`).join(""),it=`
                         <div style="font-family: sans-serif; max-width: 600px; margin: 0 auto;">
                           <h2 style="color: #2563eb;">Daily Digest</h2>
                           <p>You have <strong>${De.length} assignments</strong> coming up in the next 24 hours:</p>
                           <ul style="line-height: 1.6;">${Ne}</ul>
                           <a href="http://localhost:3000" style="display: inline-block; background: #2563eb; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-top: 20px;">Open Student Sphere</a>
                         </div>
                       `;await ZU(e.email,`Student Sphere: ${De.length} Tasks Due Soon`,it,U),await Ut(ae,{lastSent:Cm()}),console.log("Daily digest email delivered.")}}}}catch(V){console.warn("Notification sync failed (non-critical):",V)}z||C({title:"Sync Complete",description:`Successfully synced ${Y.length} courses, ${Q.length} assignments, and updated Google Calendar.`})}catch(Y){console.error("Sync error details:",Y);let Q="Failed to sync";if(Y!=null&&Y.message){const te=Y.message.toLowerCase();te.includes("401")||te.includes("unauthorized")||te.includes("invalid_token")||te.includes("token expired")?Q="Authentication failed. Your access token may have expired. Please sign out and sign in again.":te.includes("403")||te.includes("forbidden")||te.includes("permission denied")?Q="Permission denied. Please make sure you granted Classroom access permissions when signing in. Sign out and sign in again, then grant all requested permissions.":te.includes("quota")||te.includes("rate")||te.includes("429")?Q="API quota exceeded. Please try again later.":te.includes("cors")||te.includes("network")?Q="Network error. Please check your internet connection and try again.":Q=`Sync failed: ${Y.message}`}else Y instanceof TypeError&&Y.message.includes("fetch")&&(Q="Network error. Please check your internet connection.");I(Q),console.error("Sync error:",Y),z||C({variant:"destructive",title:"Sync Failed",description:Q})}finally{_(!1),b(!1)}},[e,n,r,C]);m.useEffect(()=>{if(!e){D(!1),b(!1);return}if(!n){b(!1);return}!P&&!x&&(D(!0),k(!0))},[e,n,P,i.length,l.length,x]),m.useEffect(()=>{localStorage.setItem("classroom_courses",JSON.stringify(i))},[i]),m.useEffect(()=>{localStorage.setItem("classroom_materials",JSON.stringify(u))},[u]),m.useEffect(()=>{localStorage.setItem("classroom_notes",JSON.stringify(Array.from(f.entries())))},[f]),m.useEffect(()=>{localStorage.setItem("classroom_assignments",JSON.stringify(l))},[l]),m.useEffect(()=>{w?localStorage.setItem("classroom_lastSyncedAt",w.toISOString()):localStorage.removeItem("classroom_lastSyncedAt")},[w]);const R=m.useCallback((z,U)=>{c(J=>J.map(Y=>Y.id===z?{...Y,userStatus:U}:Y))},[]),M=m.useCallback((z,U,J=!1)=>{const Y={id:t8(),userId:(e==null?void 0:e.uid)||"",assignmentId:z,content:U,isImportant:J,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};p(Q=>{const te=new Map(Q),V=te.get(z)||[];return te.set(z,[...V,Y]),te})},[e]),A=m.useCallback((z,U,J)=>{p(Y=>{const Q=new Map(Y);for(const[te,V]of Array.from(Q.entries())){const B=V.findIndex(ne=>ne.id===z);if(B!==-1){const ne=[...V];ne[B]={...ne[B],content:U,isImportant:J??ne[B].isImportant,updatedAt:new Date().toISOString()},Q.set(te,ne);break}}return Q})},[]),H=m.useCallback((z,U)=>{p(J=>{const Y=new Map(J),Q=Y.get(U)||[];return Y.set(U,Q.filter(te=>te.id!==z)),Y})},[]),ie=m.useCallback(()=>{const z=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return l.forEach(U=>{const J=U.userStatus==="in_progress"?"in_progress":U.systemStatus,Y=z.find(Q=>Q.id===J);Y&&Y.assignments.push(U)}),z.forEach(U=>{U.assignments.sort((J,Y)=>J.dueDate?Y.dueDate?new Date(J.dueDate).getTime()-new Date(Y.dueDate).getTime():-1:1)}),z},[l]),Z=m.useCallback(()=>{const z=new Date,U=new Date(z);U.setDate(U.getDate()+3);const J=new Date(z);J.setDate(J.getDate()+7);const Y=l.filter(se=>se.systemStatus!=="graded"&&se.systemStatus!=="submitted"),Q=l.filter(se=>{if(!se.dueDate||se.systemStatus==="graded"||se.systemStatus==="submitted")return!1;const ce=new Date(se.dueDate);return ce>=z&&ce<=U}),te=l.filter(se=>{if(!se.dueDate||se.systemStatus==="graded"||se.systemStatus==="submitted")return!1;const ce=new Date(se.dueDate);return ce>=z&&ce<=J}),V=l.filter(se=>se.systemStatus==="overdue"),B=[],ne=new Date,ae=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let se=0;se<7;se++){const ce=new Date(ne);ce.setDate(ce.getDate()+se);const Ae=ce.toISOString().split("T")[0],je=l.filter(De=>De.dueDate?De.dueDate.split("T")[0]===Ae:!1).length;B.push({day:ae[ce.getDay()],count:je,isToday:se===0})}const re=[...Y].filter(se=>se.dueDate).sort((se,ce)=>new Date(se.dueDate).getTime()-new Date(ce.dueDate).getTime()).slice(0,5);return{totalActive:Y.length,upcoming3Days:Q.length,upcoming7Days:te.length,overdue:V.length,weeklyWorkload:B,nextActions:re}},[l]),X=m.useCallback(z=>{let U=[...l];z!=null&&z.courseId&&(U=U.filter(te=>te.courseId===z.courseId)),z!=null&&z.status&&(U=U.filter(te=>te.systemStatus===z.status)),U.sort((te,V)=>te.dueDate?V.dueDate?new Date(te.dueDate).getTime()-new Date(V.dueDate).getTime():-1:1);const J=new Map,Y=new Date,Q=new Date(Y);return Q.setDate(Q.getDate()+1),U.forEach(te=>{if(!te.dueDate)return;const V=te.dueDate.split("T")[0],B=new Date(te.dueDate);let ne;V===Y.toISOString().split("T")[0]?ne="Today":V===Q.toISOString().split("T")[0]?ne="Tomorrow":ne=B.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),J.has(V)||J.set(V,{date:V,dateLabel:ne,assignments:[]}),J.get(V).assignments.push(te)}),Array.from(J.values())},[l]),L=m.useCallback(z=>l.find(U=>U.id===z),[l]),W=m.useCallback(z=>f.get(z)||[],[f]);return a.jsx(R2.Provider,{value:{courses:i,assignments:l,notes:f,isLoading:v,isSyncing:x,lastSyncedAt:w,error:S,syncClassroom:k,updateAssignmentStatus:R,addNote:M,updateNote:A,deleteNote:H,getPipelineColumns:ie,getDashboardMetrics:Z,getTimelineGroups:X,getAssignmentById:L,getNotesForAssignment:W,materials:u,reauthRequired:N},children:t})}function Jr(){const t=m.useContext(R2);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}var Wp="focusScope.autoFocusOnMount",qp="focusScope.autoFocusOnUnmount",X_={bubbles:!1,cancelable:!0},a8="FocusScope",d0=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=ln(s),h=ln(i),f=m.useRef(null),p=Be(e,x=>c(x)),v=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let x=function(S){if(v.paused||!l)return;const I=S.target;l.contains(I)?f.current=I:Bs(f.current,{select:!0})},_=function(S){if(v.paused||!l)return;const I=S.relatedTarget;I!==null&&(l.contains(I)||Bs(f.current,{select:!0}))},w=function(S){if(document.activeElement===document.body)for(const P of S)P.removedNodes.length>0&&Bs(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",_);const y=new MutationObserver(w);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",_),y.disconnect()}}},[r,l,v.paused]),m.useEffect(()=>{if(l){Z_.add(v);const x=document.activeElement;if(!l.contains(x)){const w=new CustomEvent(Wp,X_);l.addEventListener(Wp,u),l.dispatchEvent(w),w.defaultPrevented||(l8(f8(P2(l)),{select:!0}),document.activeElement===x&&Bs(l))}return()=>{l.removeEventListener(Wp,u),setTimeout(()=>{const w=new CustomEvent(qp,X_);l.addEventListener(qp,h),l.dispatchEvent(w),w.defaultPrevented||Bs(x??document.body,{select:!0}),l.removeEventListener(qp,h),Z_.remove(v)},0)}}},[l,u,h,v]);const b=m.useCallback(x=>{if(!n&&!r||v.paused)return;const _=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(_&&w){const y=x.currentTarget,[S,I]=c8(y);S&&I?!x.shiftKey&&w===I?(x.preventDefault(),n&&Bs(S,{select:!0})):x.shiftKey&&w===S&&(x.preventDefault(),n&&Bs(I,{select:!0})):w===y&&x.preventDefault()}},[n,r,v.paused]);return a.jsx(xe.div,{tabIndex:-1,...o,ref:p,onKeyDown:b})});d0.displayName=a8;function l8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Bs(r,{select:e}),document.activeElement!==n)return}function c8(t){const e=P2(t),n=J_(e,t),r=J_(e.reverse(),t);return[n,r]}function P2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function J_(t,e){for(const n of t)if(!u8(n,{upTo:e}))return n}function u8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function d8(t){return t instanceof HTMLInputElement&&"select"in t}function Bs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&d8(t)&&e&&t.select()}}var Z_=h8();function h8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=eE(t,e),t.unshift(e)},remove(e){var n;t=eE(t,e),(n=t[0])==null||n.resume()}}}function eE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function f8(t){return t.filter(e=>e.tagName!=="A")}var Gp=0;function D2(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??tE()),document.body.insertAdjacentElement("beforeend",t[1]??tE()),Gp++,()=>{Gp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gp--}},[])}function tE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ur=function(){return Ur=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ur.apply(this,arguments)};function M2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function m8(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var sh="right-scroll-bar-position",ih="width-before-scroll-bar",p8="with-scroll-bars-hidden",g8="--removed-body-scroll-bar-size";function Kp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function y8(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var v8=typeof window<"u"?m.useLayoutEffect:m.useEffect,nE=new WeakMap;function x8(t,e){var n=y8(null,function(r){return t.forEach(function(s){return Kp(s,r)})});return v8(function(){var r=nE.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Kp(l,null)}),i.forEach(function(l){s.has(l)||Kp(l,o)})}nE.set(n,t)},[t]),n}function w8(t){return t}function b8(t,e){e===void 0&&(e=w8);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function _8(t){t===void 0&&(t={});var e=b8(null);return e.options=Ur({async:!0,ssr:!1},t),e}var O2=function(t){var e=t.sideCar,n=M2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Ur({},n))};O2.isSideCarExport=!0;function E8(t,e){return t.useMedium(e),O2}var L2=_8(),Qp=function(){},Im=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Qp,onWheelCapture:Qp,onTouchMoveCapture:Qp}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,v=t.noIsolation,b=t.inert,x=t.allowPinchZoom,_=t.as,w=_===void 0?"div":_,y=t.gapMode,S=M2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=p,P=x8([n,e]),D=Ur(Ur({},S),s);return m.createElement(m.Fragment,null,h&&m.createElement(I,{sideCar:L2,removeScrollBar:u,shards:f,noIsolation:v,inert:b,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:y}),o?m.cloneElement(m.Children.only(l),Ur(Ur({},D),{ref:P})):m.createElement(w,Ur({},D,{className:c,ref:P}),l))});Im.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Im.classNames={fullWidth:ih,zeroRight:sh};var S8=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function T8(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=S8();return e&&t.setAttribute("nonce",e),t}function N8(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function C8(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var I8=function(){var t=0,e=null;return{add:function(n){t==0&&(e=T8())&&(N8(e,n),C8(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},k8=function(){var t=I8();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},V2=function(){var t=k8(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},A8={left:0,top:0,right:0,gap:0},Yp=function(t){return parseInt(t||"",10)||0},j8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Yp(n),Yp(r),Yp(s)]},R8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return A8;var e=j8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},P8=V2(),Ea="data-scroll-locked",D8=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(p8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ea,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ih,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(sh," .").concat(sh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ih," .").concat(ih,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ea,`] {
    `).concat(g8,": ").concat(l,`px;
  }
`)},rE=function(){var t=parseInt(document.body.getAttribute(Ea)||"0",10);return isFinite(t)?t:0},M8=function(){m.useEffect(function(){return document.body.setAttribute(Ea,(rE()+1).toString()),function(){var t=rE()-1;t<=0?document.body.removeAttribute(Ea):document.body.setAttribute(Ea,t.toString())}},[])},O8=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;M8();var i=m.useMemo(function(){return R8(s)},[s]);return m.createElement(P8,{styles:D8(i,!e,s,n?"":"!important")})},Fy=!1;if(typeof window<"u")try{var Nd=Object.defineProperty({},"passive",{get:function(){return Fy=!0,!0}});window.addEventListener("test",Nd,Nd),window.removeEventListener("test",Nd,Nd)}catch{Fy=!1}var Wo=Fy?{passive:!1}:!1,L8=function(t){return t.tagName==="TEXTAREA"},F2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!L8(t)&&n[e]==="visible")},V8=function(t){return F2(t,"overflowY")},F8=function(t){return F2(t,"overflowX")},sE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=z2(t,r);if(s){var i=U2(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},z8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},U8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},z2=function(t,e){return t==="v"?V8(e):F8(e)},U2=function(t,e){return t==="v"?z8(e):U8(e)},$8=function(t,e){return t==="h"&&e==="rtl"?-1:1},B8=function(t,e,n,r,s){var i=$8(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{var v=U2(t,l),b=v[0],x=v[1],_=v[2],w=x-_-i*b;(b||w)&&z2(t,l)&&(f+=w,p+=b),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},Cd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},iE=function(t){return[t.deltaX,t.deltaY]},oE=function(t){return t&&"current"in t?t.current:t},H8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},W8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},q8=0,qo=[];function G8(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(q8++)[0],i=m.useState(V2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=m8([t.lockRef.current],(t.shards||[]).map(oE),!0).filter(Boolean);return x.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(x,_){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var w=Cd(x),y=n.current,S="deltaX"in x?x.deltaX:y[0]-w[0],I="deltaY"in x?x.deltaY:y[1]-w[1],P,D=x.target,N=Math.abs(S)>Math.abs(I)?"h":"v";if("touches"in x&&N==="h"&&D.type==="range")return!1;var E=sE(N,D);if(!E)return!0;if(E?P=N:(P=N==="v"?"h":"v",E=sE(N,D)),!E)return!1;if(!r.current&&"changedTouches"in x&&(S||I)&&(r.current=P),!P)return!0;var C=r.current||P;return B8(C,_,x,C==="h"?S:I,!0)},[]),c=m.useCallback(function(x){var _=x;if(!(!qo.length||qo[qo.length-1]!==i)){var w="deltaY"in _?iE(_):Cd(_),y=e.current.filter(function(P){return P.name===_.type&&(P.target===_.target||_.target===P.shadowParent)&&H8(P.delta,w)})[0];if(y&&y.should){_.cancelable&&_.preventDefault();return}if(!y){var S=(o.current.shards||[]).map(oE).filter(Boolean).filter(function(P){return P.contains(_.target)}),I=S.length>0?l(_,S[0]):!o.current.noIsolation;I&&_.cancelable&&_.preventDefault()}}},[]),u=m.useCallback(function(x,_,w,y){var S={name:x,delta:_,target:w,should:y,shadowParent:K8(w)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(I){return I!==S})},1)},[]),h=m.useCallback(function(x){n.current=Cd(x),r.current=void 0},[]),f=m.useCallback(function(x){u(x.type,iE(x),x.target,l(x,t.lockRef.current))},[]),p=m.useCallback(function(x){u(x.type,Cd(x),x.target,l(x,t.lockRef.current))},[]);m.useEffect(function(){return qo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Wo),document.addEventListener("touchmove",c,Wo),document.addEventListener("touchstart",h,Wo),function(){qo=qo.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,Wo),document.removeEventListener("touchmove",c,Wo),document.removeEventListener("touchstart",h,Wo)}},[]);var v=t.removeScrollBar,b=t.inert;return m.createElement(m.Fragment,null,b?m.createElement(i,{styles:W8(s)}):null,v?m.createElement(O8,{gapMode:t.gapMode}):null)}function K8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Q8=E8(L2,G8);var h0=m.forwardRef(function(t,e){return m.createElement(Im,Ur({},t,{ref:e,sideCar:Q8}))});h0.classNames=Im.classNames;var Y8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Go=new WeakMap,Id=new WeakMap,kd={},Xp=0,$2=function(t){return t&&(t.host||$2(t.parentNode))},X8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=$2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},J8=function(t,e,n,r){var s=X8(e,Array.isArray(t)?t:[t]);kd[n]||(kd[n]=new WeakMap);var i=kd[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var v=p.getAttribute(r),b=v!==null&&v!=="false",x=(Go.get(p)||0)+1,_=(i.get(p)||0)+1;Go.set(p,x),i.set(p,_),o.push(p),x===1&&b&&Id.set(p,!0),_===1&&p.setAttribute(n,"true"),b||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return h(e),l.clear(),Xp++,function(){o.forEach(function(f){var p=Go.get(f)-1,v=i.get(f)-1;Go.set(f,p),i.set(f,v),p||(Id.has(f)||f.removeAttribute(r),Id.delete(f)),v||f.removeAttribute(n)}),Xp--,Xp||(Go=new WeakMap,Go=new WeakMap,Id=new WeakMap,kd={})}},B2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Y8(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),J8(r,s,n,"aria-hidden")):function(){return null}},f0="Dialog",[H2,W2]=Nr(f0),[Z8,Cr]=H2(f0),q2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u=!1,h]=Si({prop:r,defaultProp:s,onChange:i});return a.jsx(Z8,{scope:e,triggerRef:l,contentRef:c,contentId:fs(),titleId:fs(),descriptionId:fs(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};q2.displayName=f0;var G2="DialogTrigger",K2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cr(G2,n),i=Be(e,s.triggerRef);return a.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":g0(s.open),...r,ref:i,onClick:pe(t.onClick,s.onOpenToggle)})});K2.displayName=G2;var m0="DialogPortal",[e7,Q2]=H2(m0,{forceMount:void 0}),Y2=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Cr(m0,e);return a.jsx(e7,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(zi,{present:n||i.open,children:a.jsx(fu,{asChild:!0,container:s,children:o})}))})};Y2.displayName=m0;var of="DialogOverlay",X2=m.forwardRef((t,e)=>{const n=Q2(of,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Cr(of,t.__scopeDialog);return i.modal?a.jsx(zi,{present:r||i.open,children:a.jsx(n7,{...s,ref:e})}):null});X2.displayName=of;var t7=Ba("DialogOverlay.RemoveScroll"),n7=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cr(of,n);return a.jsx(h0,{as:t7,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(xe.div,{"data-state":g0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Po="DialogContent",J2=m.forwardRef((t,e)=>{const n=Q2(Po,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Cr(Po,t.__scopeDialog);return a.jsx(zi,{present:r||i.open,children:i.modal?a.jsx(r7,{...s,ref:e}):a.jsx(s7,{...s,ref:e})})});J2.displayName=Po;var r7=m.forwardRef((t,e)=>{const n=Cr(Po,t.__scopeDialog),r=m.useRef(null),s=Be(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return B2(i)},[]),a.jsx(Z2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:pe(t.onFocusOutside,i=>i.preventDefault())})}),s7=m.forwardRef((t,e)=>{const n=Cr(Po,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(Z2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Z2=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Cr(Po,n),c=m.useRef(null),u=Be(e,c);return D2(),a.jsxs(a.Fragment,{children:[a.jsx(d0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(hu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":g0(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(o7,{titleId:l.titleId}),a.jsx(l7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),p0="DialogTitle",eA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cr(p0,n);return a.jsx(xe.h2,{id:s.titleId,...r,ref:e})});eA.displayName=p0;var tA="DialogDescription",nA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cr(tA,n);return a.jsx(xe.p,{id:s.descriptionId,...r,ref:e})});nA.displayName=tA;var rA="DialogClose",sA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Cr(rA,n);return a.jsx(xe.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,()=>s.onOpenChange(!1))})});sA.displayName=rA;function g0(t){return t?"open":"closed"}var iA="DialogTitleWarning",[i7,oA]=PM(iA,{contentName:Po,titleName:p0,docsSlug:"dialog"}),o7=({titleId:t})=>{const e=oA(iA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},a7="DialogDescriptionWarning",l7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${oA(a7).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},aA=q2,c7=K2,lA=Y2,y0=X2,v0=J2,x0=eA,w0=nA,b0=sA,cA="AlertDialog",[u7,WW]=Nr(cA,[W2]),js=W2(),uA=t=>{const{__scopeAlertDialog:e,...n}=t,r=js(e);return a.jsx(aA,{...r,...n,modal:!0})};uA.displayName=cA;var d7="AlertDialogTrigger",dA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(c7,{...s,...r,ref:e})});dA.displayName=d7;var h7="AlertDialogPortal",hA=t=>{const{__scopeAlertDialog:e,...n}=t,r=js(e);return a.jsx(lA,{...r,...n})};hA.displayName=h7;var f7="AlertDialogOverlay",fA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(y0,{...s,...r,ref:e})});fA.displayName=f7;var Sa="AlertDialogContent",[m7,p7]=u7(Sa),g7=wN("AlertDialogContent"),mA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=js(n),o=m.useRef(null),l=Be(e,o),c=m.useRef(null);return a.jsx(i7,{contentName:Sa,titleName:pA,docsSlug:"alert-dialog",children:a.jsx(m7,{scope:n,cancelRef:c,children:a.jsxs(v0,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:pe(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(g7,{children:r}),a.jsx(v7,{contentRef:o})]})})})});mA.displayName=Sa;var pA="AlertDialogTitle",gA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(x0,{...s,...r,ref:e})});gA.displayName=pA;var yA="AlertDialogDescription",vA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(w0,{...s,...r,ref:e})});vA.displayName=yA;var y7="AlertDialogAction",xA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=js(n);return a.jsx(b0,{...s,...r,ref:e})});xA.displayName=y7;var wA="AlertDialogCancel",bA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=p7(wA,n),i=js(n),o=Be(e,s);return a.jsx(b0,{...i,...r,ref:o})});bA.displayName=wA;var v7=({contentRef:t})=>{const e=`\`${Sa}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Sa}\` by passing a \`${yA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Sa}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},x7=uA,w7=dA,b7=hA,_A=fA,EA=mA,SA=xA,TA=bA,NA=gA,CA=vA;const _0=pu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),fe=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?MM:"button";return a.jsx(o,{className:$(_0({variant:e,size:n,className:t})),ref:i,...s})});fe.displayName="Button";const IA=x7,kA=w7,_7=b7,AA=m.forwardRef(({className:t,...e},n)=>a.jsx(_A,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));AA.displayName=_A.displayName;const E0=m.forwardRef(({className:t,...e},n)=>a.jsxs(_7,{children:[a.jsx(AA,{}),a.jsx(EA,{ref:n,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));E0.displayName=EA.displayName;const S0=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});S0.displayName="AlertDialogHeader";const T0=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});T0.displayName="AlertDialogFooter";const N0=m.forwardRef(({className:t,...e},n)=>a.jsx(NA,{ref:n,className:$("text-lg font-semibold",t),...e}));N0.displayName=NA.displayName;const C0=m.forwardRef(({className:t,...e},n)=>a.jsx(CA,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));C0.displayName=CA.displayName;const I0=m.forwardRef(({className:t,...e},n)=>a.jsx(SA,{ref:n,className:$(_0(),t),...e}));I0.displayName=SA.displayName;const k0=m.forwardRef(({className:t,...e},n)=>a.jsx(TA,{ref:n,className:$(_0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));k0.displayName=TA.displayName;const Jp=768;function km(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Jp-1}px)`),r=()=>{e(window.innerWidth<Jp)};return n.addEventListener("change",r),e(window.innerWidth<Jp),()=>n.removeEventListener("change",r)},[]),!!t}var A0="Avatar",[E7,qW]=Nr(A0),[S7,jA]=E7(A0),RA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return a.jsx(S7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(xe.span,{...r,ref:e})})});RA.displayName=A0;var PA="AvatarImage",DA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=jA(PA,n),l=T7(r,i),c=ln(u=>{s(u),o.onImageLoadingStatusChange(u)});return It(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(xe.img,{...i,ref:e,src:r}):null});DA.displayName=PA;var MA="AvatarFallback",OA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=jA(MA,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(xe.span,{...s,ref:e}):null});OA.displayName=MA;function aE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function T7(t,{referrerPolicy:e,crossOrigin:n}){const r=C7(),s=m.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>aE(i,t));return It(()=>{l(aE(i,t))},[i,t]),It(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function N7(){return()=>{}}function C7(){return m.useSyncExternalStore(N7,()=>!0,()=>!1)}var LA=RA,VA=DA,FA=OA;const is=m.forwardRef(({className:t,...e},n)=>a.jsx(LA,{ref:n,className:$(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));is.displayName=LA.displayName;const os=m.forwardRef(({className:t,...e},n)=>a.jsx(VA,{ref:n,className:$("aspect-square h-full w-full",t),...e}));os.displayName=VA.displayName;const as=m.forwardRef(({className:t,...e},n)=>a.jsx(FA,{ref:n,className:$("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));as.displayName=FA.displayName;const I7=[{path:"/dashboard",label:"Dashboard",icon:KN},{path:"/pipeline",label:"Pipeline",icon:JN},{path:"/leaderboard",label:"Leaderboard",icon:rx},{path:"/timeline",label:"Timeline",icon:Cs},{path:"/attendance",label:"Attendance",icon:oC},{path:"/notes",label:"Notes",icon:yo}];function k7({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=Of(),r=km(),{user:s,signOut:i}=st(),{theme:o,toggleTheme:l}=u0(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>a.jsxs("div",{className:"flex flex-col h-full bg-background",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&a.jsx("button",{className:"ml-auto",onClick:e,children:a.jsx(No,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 border-b shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(is,{className:"h-8 w-8",children:[a.jsx(os,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(as,{className:"text-xs",children:c})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),I7.map(p=>{const v=n===p.path,b=p.icon;return a.jsxs(Ei,{href:p.path,onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",v?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[a.jsx(b,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),a.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(nx,{className:"w-4 h-4 mr-3"}):a.jsx($f,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(Ei,{href:"/settings",onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[a.jsx(rC,{className:"w-4 h-4 mr-3"}),"Settings"]}),a.jsxs(IA,{children:[a.jsx(kA,{asChild:!0,children:a.jsxs("button",{className:"w-full flex items-center px-3 py-2 text-sm font-medium text-destructive rounded-md hover:bg-destructive/10 transition-colors",children:[a.jsx(Uc,{className:"w-4 h-4 mr-3"}),"Sign Out"]})}),a.jsxs(E0,{children:[a.jsxs(S0,{children:[a.jsx(N0,{children:"Are you absolutely sure?"}),a.jsx(C0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(T0,{children:[a.jsx(k0,{children:"Cancel"}),a.jsx(I0,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:a.jsx(u,{})}),r&&t&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const af=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:$("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));af.displayName="Input";function A7({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=Jr(),[r]=Of(),[s,i]=m.useState(""),o=km(),c={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return a.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[o&&a.jsx(fe,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:a.jsx(tC,{className:"h-5 w-5"})}),a.jsx("span",{className:"md:hidden font-medium text-lg",children:c}),a.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx($O,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx(af,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),a.jsx("div",{className:"flex items-center ml-4",children:a.jsx(fe,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:$(n&&"animate-spin"),title:"Sync with Classroom",children:a.jsx(Wa,{className:"w-5 h-5"})})})]})}var zA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lE=Se.createContext&&Se.createContext(zA),j7=["attr","size","title"];function R7(t,e){if(t==null)return{};var n=P7(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function P7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lf.apply(this,arguments)}function cE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cE(Object(n),!0).forEach(function(r){D7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D7(t,e,n){return e=M7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M7(t){var e=O7(t,"string");return typeof e=="symbol"?e:e+""}function O7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function UA(t){return t&&t.map((e,n)=>Se.createElement(e.tag,cf({key:n},e.attr),UA(e.child)))}function j0(t){return e=>Se.createElement(L7,lf({attr:cf({},t.attr)},e),UA(t.child))}function L7(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=R7(t,j7),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Se.createElement("svg",lf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:cf(cf({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Se.createElement("title",null,i),t.children)};return lE!==void 0?Se.createElement(lE.Consumer,null,n=>e(n)):e(zA)}function $A(t){return j0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function V7(t){return j0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const F7=[{icon:V7,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:VO,title:"Kanban Board",description:"Visual assignment tracking."},{icon:NO,title:"Linear Timeline",description:"Chronological deadline view."},{icon:CO,title:"Performance Metrics",description:"Grade & workload analytics."}];function z7(){const{signInWithGoogle:t,loading:e,error:n}=st();return a.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),a.jsx("header",{className:"px-10 py-8 z-10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),a.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",a.jsx("br",{}),a.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),a.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),a.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:F7.map(r=>a.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[a.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),a.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),a.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),a.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),a.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[a.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),a.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[a.jsx(xs,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",a.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),a.jsxs(fe,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[a.jsx($A,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&a.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[a.jsx(xs,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:n})]})]}),a.jsx("div",{className:"pt-8 border-t border-zinc-100",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(BO,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),a.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),a.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[a.jsx("span",{children:" 2024 Trace Inc."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),a.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function U7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Am=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function R0(t){return"nodeType"in t}function dn(t){var e,n;return t?xl(t)?t:R0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function P0(t){const{Document:e}=dn(t);return t instanceof e}function Au(t){return xl(t)?!1:t instanceof dn(t).HTMLElement}function BA(t){return t instanceof dn(t).SVGElement}function wl(t){return t?xl(t)?t.document:R0(t)?P0(t)?t:Au(t)||BA(t)?t.ownerDocument:document:document:document}const Sr=Am?m.useLayoutEffect:m.useEffect;function jm(t){const e=m.useRef(t);return Sr(()=>{e.current=t}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function $7(){const t=m.useRef(null),e=m.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=m.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function eu(t,e){e===void 0&&(e=[t]);const n=m.useRef(t);return Sr(()=>{n.current!==t&&(n.current=t)},e),n}function ju(t,e){const n=m.useRef();return m.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function uf(t){const e=jm(t),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function df(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}let Zp={};function Ru(t,e){return m.useMemo(()=>{if(e)return e;const n=Zp[t]==null?0:Zp[t]+1;return Zp[t]=n,t+"-"+n},[t,e])}function HA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const Ta=HA(1),hf=HA(-1);function B7(t){return"clientX"in t&&"clientY"in t}function Rm(t){if(!t)return!1;const{KeyboardEvent:e}=dn(t.target);return e&&t instanceof e}function H7(t){if(!t)return!1;const{TouchEvent:e}=dn(t.target);return e&&t instanceof e}function ff(t){if(H7(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return B7(t)?{x:t.clientX,y:t.clientY}:null}const Oi=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Oi.Translate.toString(t),Oi.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),uE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function W7(t){return t.matches(uE)?t:t.querySelector(uE)}const q7={display:"none"};function G7(t){let{id:e,value:n}=t;return Se.createElement("div",{id:e,style:q7},n)}function K7(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Se.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function Q7(){const[t,e]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const WA=m.createContext(null);function Y7(t){const e=m.useContext(WA);m.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function X7(){const[t]=m.useState(()=>new Set),e=m.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[m.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const J7={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Z7={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function e$(t){let{announcements:e=Z7,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=J7}=t;const{announce:i,announcement:o}=Q7(),l=Ru("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),Y7(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:v}=f;e.onDragMove&&i(e.onDragMove({active:p,over:v}))},onDragOver(f){let{active:p,over:v}=f;i(e.onDragOver({active:p,over:v}))},onDragEnd(f){let{active:p,over:v}=f;i(e.onDragEnd({active:p,over:v}))},onDragCancel(f){let{active:p,over:v}=f;i(e.onDragCancel({active:p,over:v}))}}),[i,e])),!c)return null;const h=Se.createElement(Se.Fragment,null,Se.createElement(G7,{id:r,value:s.draggable}),Se.createElement(K7,{id:l,announcement:o}));return n?qn.createPortal(h,n):h}var Tt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Tt||(Tt={}));function mf(){}function dE(t,e){return m.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function t$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Tr=Object.freeze({x:0,y:0});function n$(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function r$(t,e){const n=ff(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function s$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function i$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function o$(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function hE(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const a$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=hE(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=n$(hE(c),s);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(s$)};function l$(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=o*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const c$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const c=l$(l,e);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(i$)};function u$(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function qA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Tr}function d$(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const h$=d$(1);function GA(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function f$(t,e,n){const r=GA(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,c=t.left-o-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const m$={ignoreTransform:!1};function bl(t,e){e===void 0&&(e=m$);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=dn(t).getComputedStyle(t);u&&(n=f$(n,u,h))}const{top:r,left:s,width:i,height:o,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:c}}function fE(t){return bl(t,{ignoreTransform:!0})}function p$(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function g$(t,e){return e===void 0&&(e=dn(t).getComputedStyle(t)),e.position==="fixed"}function y$(t,e){e===void 0&&(e=dn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function D0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(P0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Au(s)||BA(s)||n.includes(s))return n;const i=dn(t).getComputedStyle(s);return s!==t&&y$(s,i)&&n.push(s),g$(s,i)?n:r(s.parentNode)}return t?r(t):n}function KA(t){const[e]=D0(t,1);return e??null}function eg(t){return!Am||!t?null:xl(t)?t:R0(t)?P0(t)||t===wl(t).scrollingElement?window:Au(t)?t:null:null}function QA(t){return xl(t)?t.scrollX:t.scrollLeft}function YA(t){return xl(t)?t.scrollY:t.scrollTop}function zy(t){return{x:QA(t),y:YA(t)}}var Rt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Rt||(Rt={}));function XA(t){return!Am||!t?!1:t===document.scrollingElement}function JA(t){const e={x:0,y:0},n=XA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const v$={x:.2,y:.2};function x$(t,e,n,r,s){let{top:i,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=v$);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=JA(t),v={x:0,y:0},b={x:0,y:0},x={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+x.height?(v.y=Rt.Backward,b.y=r*Math.abs((e.top+x.height-i)/x.height)):!h&&c>=e.bottom-x.height&&(v.y=Rt.Forward,b.y=r*Math.abs((e.bottom-x.height-c)/x.height)),!p&&l>=e.right-x.width?(v.x=Rt.Forward,b.x=r*Math.abs((e.right-x.width-l)/x.width)):!f&&o<=e.left+x.width&&(v.x=Rt.Backward,b.x=r*Math.abs((e.left+x.width-o)/x.width)),{direction:v,speed:b}}function w$(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function ZA(t){return t.reduce((e,n)=>Ta(e,zy(n)),Tr)}function b$(t){return t.reduce((e,n)=>e+QA(n),0)}function _$(t){return t.reduce((e,n)=>e+YA(n),0)}function ej(t,e){if(e===void 0&&(e=bl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);KA(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const E$=[["x",["left","right"],b$],["y",["top","bottom"],_$]];class M0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=D0(n),s=ZA(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of E$)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class vc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function S$(t){const{EventTarget:e}=dn(t);return t instanceof e?t:wl(t)}function tg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Un;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Un||(Un={}));function mE(t){t.preventDefault()}function T$(t){t.stopPropagation()}var Ve;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Ve||(Ve={}));const tj={start:[Ve.Space,Ve.Enter],cancel:[Ve.Esc],end:[Ve.Space,Ve.Enter,Ve.Tab]},N$=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Ve.Right:return{...n,x:n.x+25};case Ve.Left:return{...n,x:n.x-25};case Ve.Down:return{...n,y:n.y+25};case Ve.Up:return{...n,y:n.y-25}}};class O0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new vc(wl(n)),this.windowListeners=new vc(dn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Un.Resize,this.handleCancel),this.windowListeners.add(Un.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Un.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&ej(r),n(Tr)}handleKeyDown(e){if(Rm(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=tj,coordinateGetter:o=N$,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Tr;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=hf(f,h),v={x:0,y:0},{scrollableAncestors:b}=r.current;for(const x of b){const _=e.code,{isTop:w,isRight:y,isLeft:S,isBottom:I,maxScroll:P,minScroll:D}=JA(x),N=w$(x),E={x:Math.min(_===Ve.Right?N.right-N.width/2:N.right,Math.max(_===Ve.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(_===Ve.Down?N.bottom-N.height/2:N.bottom,Math.max(_===Ve.Down?N.top:N.top+N.height/2,f.y))},C=_===Ve.Right&&!y||_===Ve.Left&&!S,k=_===Ve.Down&&!I||_===Ve.Up&&!w;if(C&&E.x!==f.x){const R=x.scrollLeft+p.x,M=_===Ve.Right&&R<=P.x||_===Ve.Left&&R>=D.x;if(M&&!p.y){x.scrollTo({left:R,behavior:l});return}M?v.x=x.scrollLeft-R:v.x=_===Ve.Right?x.scrollLeft-P.x:x.scrollLeft-D.x,v.x&&x.scrollBy({left:-v.x,behavior:l});break}else if(k&&E.y!==f.y){const R=x.scrollTop+p.y,M=_===Ve.Down&&R<=P.y||_===Ve.Up&&R>=D.y;if(M&&!p.x){x.scrollTo({top:R,behavior:l});return}M?v.y=x.scrollTop-R:v.y=_===Ve.Down?x.scrollTop-P.y:x.scrollTop-D.y,v.y&&x.scrollBy({top:-v.y,behavior:l});break}}this.handleMove(e,Ta(hf(f,this.referenceCoordinates),v))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}O0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=tj,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function pE(t){return!!(t&&"distance"in t)}function gE(t){return!!(t&&"delay"in t)}class L0{constructor(e,n,r){var s;r===void 0&&(r=S$(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=wl(o),this.documentListeners=new vc(this.document),this.listeners=new vc(r),this.windowListeners=new vc(dn(o)),this.initialCoordinates=(s=ff(i))!=null?s:Tr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Un.Resize,this.handleCancel),this.windowListeners.add(Un.DragStart,mE),this.windowListeners.add(Un.VisibilityChange,this.handleCancel),this.windowListeners.add(Un.ContextMenu,mE),this.documentListeners.add(Un.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(gE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(pE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Un.Click,T$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Un.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=ff(e))!=null?n:Tr,u=hf(s,c);if(!r&&l){if(pE(l)){if(l.tolerance!=null&&tg(u,l.tolerance))return this.handleCancel();if(tg(u,l.distance))return this.handleStart()}if(gE(l)&&tg(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ve.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const C$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class V0 extends L0{constructor(e){const{event:n}=e,r=wl(n.target);super(e,C$,r)}}V0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const I$={move:{name:"mousemove"},end:{name:"mouseup"}};var Uy;(function(t){t[t.RightClick=2]="RightClick"})(Uy||(Uy={}));class k$ extends L0{constructor(e){super(e,I$,wl(e.event.target))}}k$.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Uy.RightClick?!1:(r==null||r({event:n}),!0)}}];const ng={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class A$ extends L0{constructor(e){super(e,ng)}static setup(){return window.addEventListener(ng.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ng.move.name,e)};function e(){}}}A$.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var xc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(xc||(xc={}));var pf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(pf||(pf={}));function j$(t){let{acceleration:e,activator:n=xc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=pf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=t;const v=P$({delta:f,disabled:!i}),[b,x]=$7(),_=m.useRef({x:0,y:0}),w=m.useRef({x:0,y:0}),y=m.useMemo(()=>{switch(n){case xc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case xc.DraggableRect:return s}},[n,s,c]),S=m.useRef(null),I=m.useCallback(()=>{const D=S.current;if(!D)return;const N=_.current.x*w.current.x,E=_.current.y*w.current.y;D.scrollBy(N,E)},[]),P=m.useMemo(()=>l===pf.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!y){x();return}for(const D of P){if((r==null?void 0:r(D))===!1)continue;const N=u.indexOf(D),E=h[N];if(!E)continue;const{direction:C,speed:k}=x$(D,E,y,e,p);for(const R of["x","y"])v[R][C[R]]||(k[R]=0,C[R]=0);if(k.x>0||k.y>0){x(),S.current=D,b(I,o),_.current=k,w.current=C;return}}_.current={x:0,y:0},w.current={x:0,y:0},x()},[e,I,r,x,i,o,JSON.stringify(y),JSON.stringify(v),b,u,P,h,JSON.stringify(p)])}const R$={x:{[Rt.Backward]:!1,[Rt.Forward]:!1},y:{[Rt.Backward]:!1,[Rt.Forward]:!1}};function P$(t){let{delta:e,disabled:n}=t;const r=df(e);return ju(s=>{if(n||!r||!s)return R$;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Rt.Backward]:s.x[Rt.Backward]||i.x===-1,[Rt.Forward]:s.x[Rt.Forward]||i.x===1},y:{[Rt.Backward]:s.y[Rt.Backward]||i.y===-1,[Rt.Forward]:s.y[Rt.Forward]||i.y===1}}},[n,e,r])}function D$(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ju(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function M$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var tu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(tu||(tu={}));var $y;(function(t){t.Optimized="optimized"})($y||($y={}));const yE=new Map;function O$(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=m.useState(null),{frequency:l,measure:c,strategy:u}=s,h=m.useRef(t),f=_(),p=eu(f),v=m.useCallback(function(w){w===void 0&&(w=[]),!p.current&&o(y=>y===null?w:y.concat(w.filter(S=>!y.includes(S))))},[p]),b=m.useRef(null),x=ju(w=>{if(f&&!n)return yE;if(!w||w===yE||h.current!==t||i!=null){const y=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){y.set(S.id,S.rect.current);continue}const I=S.node.current,P=I?new M0(c(I),I):null;S.rect.current=P,P&&y.set(S.id,P)}return y}return w},[t,i,n,f,c]);return m.useEffect(()=>{h.current=t},[t]),m.useEffect(()=>{f||v()},[n,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||b.current!==null||(b.current=setTimeout(()=>{v(),b.current=null},l))},[l,f,v,...r]),{droppableRects:x,measureDroppableContainers:v,measuringScheduled:i!=null};function _(){switch(u){case tu.Always:return!1;case tu.BeforeDragging:return n;default:return!n}}}function F0(t,e){return ju(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function L$(t,e){return F0(t,e)}function V$(t){let{callback:e,disabled:n}=t;const r=jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Pm(t){let{callback:e,disabled:n}=t;const r=jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function F$(t){return new M0(bl(t),t)}function vE(t,e,n){e===void 0&&(e=F$);const[r,s]=m.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const o=V$({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=Pm({callback:i});return Sr(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function z$(t){const e=F0(t);return qA(t,e)}const xE=[];function U$(t){const e=m.useRef(t),n=ju(r=>t?r&&r!==xE&&t&&e.current&&t.parentNode===e.current.parentNode?r:D0(t):xE,[t]);return m.useEffect(()=>{e.current=t},[t]),n}function $$(t){const[e,n]=m.useState(null),r=m.useRef(t),s=m.useCallback(i=>{const o=eg(i.target);o&&n(l=>l?(l.set(o,zy(o)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(c=>{const u=eg(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,zy(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(c=>{const u=eg(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),m.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Ta(i,o),Tr):ZA(t):Tr,[t,e])}function wE(t,e){e===void 0&&(e=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},e),m.useEffect(()=>{const r=t!==Tr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?hf(t,n.current):Tr}function B$(t){m.useEffect(()=>{if(!Am)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function H$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function nj(t){return m.useMemo(()=>t?p$(t):null,[t])}const bE=[];function W$(t,e){e===void 0&&(e=bl);const[n]=t,r=nj(n?dn(n):null),[s,i]=m.useState(bE);function o(){i(()=>t.length?t.map(c=>XA(c)?r:new M0(e(c),c)):bE)}const l=Pm({callback:o});return Sr(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function rj(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Au(e)?e:t}function q$(t){let{measure:e}=t;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:h}of u)if(Au(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),i=Pm({callback:s}),o=m.useCallback(u=>{const h=rj(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=uf(o);return m.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const G$=[{sensor:V0,options:{}},{sensor:O0,options:{}}],K$={current:{}},oh={draggable:{measure:fE},droppable:{measure:fE,strategy:tu.WhileDragging,frequency:$y.Optimized},dragOverlay:{measure:bl}};class wc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const Q$={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new wc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:mf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:oh,measureDroppableContainers:mf,windowRect:null,measuringScheduled:!1},sj={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:mf,draggableNodes:new Map,over:null,measureDroppableContainers:mf},Pu=m.createContext(sj),ij=m.createContext(Q$);function Y$(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new wc}}}function X$(t,e){switch(e.type){case Tt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Tt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Tt.DragEnd:case Tt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Tt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new wc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Tt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new wc(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case Tt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new wc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function J$(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(Pu),i=df(r),o=df(n==null?void 0:n.id);return m.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Rm(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=W7(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function oj(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function Z$(t){return m.useMemo(()=>({draggable:{...oh.draggable,...t==null?void 0:t.draggable},droppable:{...oh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...oh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function eB(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=m.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Sr(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=qA(h,r);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=KA(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,l,r,n])}const Dm=m.createContext({...Tr,scaleX:1,scaleY:1});var qs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(qs||(qs={}));const tB=m.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:h=G$,collisionDetection:f=c$,measuring:p,modifiers:v,...b}=e;const x=m.useReducer(X$,void 0,Y$),[_,w]=x,[y,S]=X7(),[I,P]=m.useState(qs.Uninitialized),D=I===qs.Initialized,{draggable:{active:N,nodes:E,translate:C},droppable:{containers:k}}=_,R=N!=null?E.get(N):null,M=m.useRef({initial:null,translated:null}),A=m.useMemo(()=>{var Oe;return N!=null?{id:N,data:(Oe=R==null?void 0:R.data)!=null?Oe:K$,rect:M}:null},[N,R]),H=m.useRef(null),[ie,Z]=m.useState(null),[X,L]=m.useState(null),W=eu(b,Object.values(b)),z=Ru("DndDescribedBy",o),U=m.useMemo(()=>k.getEnabled(),[k]),J=Z$(p),{droppableRects:Y,measureDroppableContainers:Q,measuringScheduled:te}=O$(U,{dragging:D,dependencies:[C.x,C.y],config:J.droppable}),V=D$(E,N),B=m.useMemo(()=>X?ff(X):null,[X]),ne=zu(),ae=L$(V,J.draggable.measure);eB({activeNode:N!=null?E.get(N):null,config:ne.layoutShiftCompensation,initialRect:ae,measure:J.draggable.measure});const re=vE(V,J.draggable.measure,ae),se=vE(V?V.parentElement:null),ce=m.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ae=k.getNodeFor((n=ce.current.over)==null?void 0:n.id),je=q$({measure:J.dragOverlay.measure}),De=(r=je.nodeRef.current)!=null?r:V,Ne=D?(s=je.rect)!=null?s:re:null,it=!!(je.nodeRef.current&&je.rect),Sn=z$(it?null:re),We=nj(De?dn(De):null),Ge=U$(D?Ae??V:null),Xn=W$(Ge),zo=oj(v,{transform:{x:C.x-Sn.x,y:C.y-Sn.y,scaleX:1,scaleY:1},activatorEvent:X,active:A,activeNodeRect:re,containerNodeRect:se,draggingNodeRect:Ne,over:ce.current.over,overlayNodeRect:je.rect,scrollableAncestors:Ge,scrollableAncestorRects:Xn,windowRect:We}),El=B?Ta(B,C):null,Mu=$$(Ge),Wi=wE(Mu),Ou=wE(Mu,[re]),Zr=Ta(zo,Wi),kr=Ne?h$(Ne,zo):null,qi=A&&kr?f({active:A,collisionRect:kr,droppableRects:Y,droppableContainers:U,pointerCoordinates:El}):null,Lu=o$(qi,"id"),[Jn,Sl]=m.useState(null),Gi=it?zo:Ta(zo,Ou),Tl=u$(Gi,(i=Jn==null?void 0:Jn.rect)!=null?i:null,re),Ki=m.useRef(null),Ar=m.useCallback((Oe,Bt)=>{let{sensor:wt,options:hn}=Bt;if(H.current==null)return;const fn=E.get(H.current);if(!fn)return;const tn=Oe.nativeEvent,Lt=new wt({active:H.current,activeNode:fn,event:tn,options:hn,context:ce,onAbort(bt){if(!E.get(bt))return;const{onDragAbort:Nn}=W.current,Fn={id:bt};Nn==null||Nn(Fn),y({type:"onDragAbort",event:Fn})},onPending(bt,Tn,Nn,Fn){if(!E.get(bt))return;const{onDragPending:Zn}=W.current,jr={id:bt,constraint:Tn,initialCoordinates:Nn,offset:Fn};Zn==null||Zn(jr),y({type:"onDragPending",event:jr})},onStart(bt){const Tn=H.current;if(Tn==null)return;const Nn=E.get(Tn);if(!Nn)return;const{onDragStart:Fn}=W.current,es={activatorEvent:tn,active:{id:Tn,data:Nn.data,rect:M}};qn.unstable_batchedUpdates(()=>{Fn==null||Fn(es),P(qs.Initializing),w({type:Tt.DragStart,initialCoordinates:bt,active:Tn}),y({type:"onDragStart",event:es}),Z(Ki.current),L(tn)})},onMove(bt){w({type:Tt.DragMove,coordinates:bt})},onEnd:Rs(Tt.DragEnd),onCancel:Rs(Tt.DragCancel)});Ki.current=Lt;function Rs(bt){return async function(){const{active:Nn,collisions:Fn,over:es,scrollAdjustedTranslate:Zn}=ce.current;let jr=null;if(Nn&&Zn){const{cancelDrop:mn}=W.current;jr={activatorEvent:tn,active:Nn,collisions:Fn,delta:Zn,over:es},bt===Tt.DragEnd&&typeof mn=="function"&&await Promise.resolve(mn(jr))&&(bt=Tt.DragCancel)}H.current=null,qn.unstable_batchedUpdates(()=>{w({type:bt}),P(qs.Uninitialized),Sl(null),Z(null),L(null),Ki.current=null;const mn=bt===Tt.DragEnd?"onDragEnd":"onDragCancel";if(jr){const Uo=W.current[mn];Uo==null||Uo(jr),y({type:mn,event:jr})}})}}},[E]),Vu=m.useCallback((Oe,Bt)=>(wt,hn)=>{const fn=wt.nativeEvent,tn=E.get(hn);if(H.current!==null||!tn||fn.dndKit||fn.defaultPrevented)return;const Lt={active:tn};Oe(wt,Bt.options,Lt)===!0&&(fn.dndKit={capturedBy:Bt.sensor},H.current=hn,Ar(wt,Bt))},[E,Ar]),Qi=M$(h,Vu);B$(h),Sr(()=>{re&&I===qs.Initializing&&P(qs.Initialized)},[re,I]),m.useEffect(()=>{const{onDragMove:Oe}=W.current,{active:Bt,activatorEvent:wt,collisions:hn,over:fn}=ce.current;if(!Bt||!wt)return;const tn={active:Bt,activatorEvent:wt,collisions:hn,delta:{x:Zr.x,y:Zr.y},over:fn};qn.unstable_batchedUpdates(()=>{Oe==null||Oe(tn),y({type:"onDragMove",event:tn})})},[Zr.x,Zr.y]),m.useEffect(()=>{const{active:Oe,activatorEvent:Bt,collisions:wt,droppableContainers:hn,scrollAdjustedTranslate:fn}=ce.current;if(!Oe||H.current==null||!Bt||!fn)return;const{onDragOver:tn}=W.current,Lt=hn.get(Lu),Rs=Lt&&Lt.rect.current?{id:Lt.id,rect:Lt.rect.current,data:Lt.data,disabled:Lt.disabled}:null,bt={active:Oe,activatorEvent:Bt,collisions:wt,delta:{x:fn.x,y:fn.y},over:Rs};qn.unstable_batchedUpdates(()=>{Sl(Rs),tn==null||tn(bt),y({type:"onDragOver",event:bt})})},[Lu]),Sr(()=>{ce.current={activatorEvent:X,active:A,activeNode:V,collisionRect:kr,collisions:qi,droppableRects:Y,draggableNodes:E,draggingNode:De,draggingNodeRect:Ne,droppableContainers:k,over:Jn,scrollableAncestors:Ge,scrollAdjustedTranslate:Zr},M.current={initial:Ne,translated:kr}},[A,V,qi,kr,E,De,Ne,Y,k,Jn,Ge,Zr]),j$({...ne,delta:C,draggingRect:kr,pointerCoordinates:El,scrollableAncestors:Ge,scrollableAncestorRects:Xn});const Fu=m.useMemo(()=>({active:A,activeNode:V,activeNodeRect:re,activatorEvent:X,collisions:qi,containerNodeRect:se,dragOverlay:je,draggableNodes:E,droppableContainers:k,droppableRects:Y,over:Jn,measureDroppableContainers:Q,scrollableAncestors:Ge,scrollableAncestorRects:Xn,measuringConfiguration:J,measuringScheduled:te,windowRect:We}),[A,V,re,X,qi,se,je,E,k,Y,Jn,Q,Ge,Xn,J,te,We]),Yi=m.useMemo(()=>({activatorEvent:X,activators:Qi,active:A,activeNodeRect:re,ariaDescribedById:{draggable:z},dispatch:w,draggableNodes:E,over:Jn,measureDroppableContainers:Q}),[X,Qi,A,re,w,z,E,Jn,Q]);return Se.createElement(WA.Provider,{value:S},Se.createElement(Pu.Provider,{value:Yi},Se.createElement(ij.Provider,{value:Fu},Se.createElement(Dm.Provider,{value:Tl},u)),Se.createElement(J$,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Se.createElement(e$,{...l,hiddenTextDescribedById:z}));function zu(){const Oe=(ie==null?void 0:ie.autoScrollEnabled)===!1,Bt=typeof c=="object"?c.enabled===!1:c===!1,wt=D&&!Oe&&!Bt;return typeof c=="object"?{...c,enabled:wt}:{enabled:wt}}}),nB=m.createContext(null),_E="button",rB="Draggable";function sB(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Ru(rB),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=m.useContext(Pu),{role:v=_E,roleDescription:b="draggable",tabIndex:x=0}=s??{},_=(c==null?void 0:c.id)===e,w=m.useContext(_?Dm:nB),[y,S]=uf(),[I,P]=uf(),D=H$(o,e),N=eu(n);Sr(()=>(f.set(e,{id:e,key:i,node:y,activatorNode:I,data:N}),()=>{const C=f.get(e);C&&C.key===i&&f.delete(e)}),[f,e]);const E=m.useMemo(()=>({role:v,tabIndex:x,"aria-disabled":r,"aria-pressed":_&&v===_E?!0:void 0,"aria-roledescription":b,"aria-describedby":h.draggable}),[r,v,x,_,b,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:E,isDragging:_,listeners:r?void 0:D,node:y,over:p,setNodeRef:S,setActivatorNodeRef:P,transform:w}}function aj(){return m.useContext(ij)}const iB="Droppable",oB={timeout:25};function lj(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Ru(iB),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(Pu),h=m.useRef({disabled:n}),f=m.useRef(!1),p=m.useRef(null),v=m.useRef(null),{disabled:b,updateMeasurementsFor:x,timeout:_}={...oB,...s},w=eu(x??r),y=m.useCallback(()=>{if(!f.current){f.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),v.current=null},_)},[_]),S=Pm({callback:y,disabled:b||!o}),I=m.useCallback((E,C)=>{S&&(C&&(S.unobserve(C),f.current=!1),E&&S.observe(E))},[S]),[P,D]=uf(I),N=eu(e);return m.useEffect(()=>{!S||!P.current||(S.disconnect(),f.current=!1,S.observe(P.current))},[P,S]),m.useEffect(()=>(l({type:Tt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:P,rect:p,data:N}}),()=>l({type:Tt.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==h.current.disabled&&(l({type:Tt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===r,node:P,over:c,setNodeRef:D}}function aB(t){let{animation:e,children:n}=t;const[r,s]=m.useState(null),[i,o]=m.useState(null),l=df(n);return!n&&!r&&l&&s(l),Sr(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Se.createElement(Se.Fragment,null,n,r?m.cloneElement(r,{ref:o}):null)}const lB={x:0,y:0,scaleX:1,scaleY:1};function cB(t){let{children:e}=t;return Se.createElement(Pu.Provider,{value:sj},Se.createElement(Dm.Provider,{value:lB},e))}const uB={position:"fixed",touchAction:"none"},dB=t=>Rm(t)?"transform 250ms ease":void 0,hB=m.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:l,style:c,transform:u,transition:h=dB}=t;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},p={...uB,width:l.width,height:l.height,top:l.top,left:l.left,transform:Oi.Transform.toString(f),transformOrigin:s&&r?r$(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Se.createElement(n,{className:o,style:p,ref:e},i)}),fB=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},mB=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Oi.Transform.toString(e)},{transform:Oi.Transform.toString(n)}]},pB={duration:250,easing:"ease",keyframes:mB,sideEffects:fB({styles:{active:{opacity:"0"}}})};function gB(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return jm((i,o)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=rj(o);if(!u)return;const{transform:h}=dn(o).getComputedStyle(o),f=GA(h);if(!f)return;const p=typeof e=="function"?e:yB(e);return ej(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function yB(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...pB,...t};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...f},v=s({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[b]=v,x=v[v.length-1];if(JSON.stringify(b)===JSON.stringify(x))return;const _=r==null?void 0:r({active:o,dragOverlay:l,...u}),w=l.node.animate(v,{duration:e,easing:n,fill:"forwards"});return new Promise(y=>{w.onfinish=()=>{_==null||_(),y()}})}}let EE=0;function vB(t){return m.useMemo(()=>{if(t!=null)return EE++,EE},[t])}const xB=Se.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:v,draggableNodes:b,droppableContainers:x,dragOverlay:_,over:w,measuringConfiguration:y,scrollableAncestors:S,scrollableAncestorRects:I,windowRect:P}=aj(),D=m.useContext(Dm),N=vB(f==null?void 0:f.id),E=oj(o,{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:v,draggingNodeRect:_.rect,over:w,overlayNodeRect:_.rect,scrollableAncestors:S,scrollableAncestorRects:I,transform:D,windowRect:P}),C=F0(p),k=gB({config:r,draggableNodes:b,droppableContainers:x,measuringConfiguration:y}),R=C?_.setRef:void 0;return Se.createElement(cB,null,Se.createElement(aB,{animation:k},f&&N?Se.createElement(hB,{key:N,id:f.id,ref:R,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:C,style:{zIndex:u,...s},transform:E},n):null))});function cj(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function wB(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Ad(t){return t!==null&&t>=0}function bB(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function _B(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const uj=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=cj(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},jd={scaleX:1,scaleY:1},EB=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...jd}:null}const c=SB(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-c,...jd}:s<n&&s>=o?{x:0,y:l.height+c,...jd}:{x:0,y:0,...jd}};function SB(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const dj="Sortable",hj=Se.createContext({activeIndex:-1,containerId:dj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:uj,disabled:{draggable:!1,droppable:!1}});function TB(t){let{children:e,id:n,items:r,strategy:s=uj,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=aj(),f=Ru(dj,n),p=l.rect!==null,v=m.useMemo(()=>r.map(D=>typeof D=="object"&&"id"in D?D.id:D),[r]),b=o!=null,x=o?v.indexOf(o.id):-1,_=u?v.indexOf(u.id):-1,w=m.useRef(v),y=!bB(v,w.current),S=_!==-1&&x===-1||y,I=_B(i);Sr(()=>{y&&b&&h(v)},[y,v,b,h]),m.useEffect(()=>{w.current=v},[v]);const P=m.useMemo(()=>({activeIndex:x,containerId:f,disabled:I,disableTransforms:S,items:v,overIndex:_,useDragOverlay:p,sortedRects:wB(v,c),strategy:s}),[x,f,I.draggable,I.droppable,S,v,_,c,p,s]);return Se.createElement(hj.Provider,{value:P},e)}const NB=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return cj(n,r,s).indexOf(e)},CB=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===c},IB={duration:200,easing:"ease"},fj="transform",kB=Oi.Transition.toString({property:fj,duration:0,easing:"linear"}),AB={roleDescription:"sortable"};function jB(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=m.useState(null),l=m.useRef(n);return Sr(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=bl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&o(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),m.useEffect(()=>{i&&o(null)},[i]),i}function RB(t){let{animateLayoutChanges:e=CB,attributes:n,disabled:r,data:s,getNewIndex:i=NB,id:o,strategy:l,resizeObserverConfig:c,transition:u=IB}=t;const{items:h,containerId:f,activeIndex:p,disabled:v,disableTransforms:b,sortedRects:x,overIndex:_,useDragOverlay:w,strategy:y}=m.useContext(hj),S=PB(r,v),I=h.indexOf(o),P=m.useMemo(()=>({sortable:{containerId:f,index:I,items:h},...s}),[f,s,I,h]),D=m.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:N,node:E,isOver:C,setNodeRef:k}=lj({id:o,data:P,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...c}}),{active:R,activatorEvent:M,activeNodeRect:A,attributes:H,setNodeRef:ie,listeners:Z,isDragging:X,over:L,setActivatorNodeRef:W,transform:z}=sB({id:o,data:P,attributes:{...AB,...n},disabled:S.draggable}),U=U7(k,ie),J=!!R,Y=J&&!b&&Ad(p)&&Ad(_),Q=!w&&X,te=Q&&Y?z:null,B=Y?te??(l??y)({rects:x,activeNodeRect:A,activeIndex:p,overIndex:_,index:I}):null,ne=Ad(p)&&Ad(_)?i({id:o,items:h,activeIndex:p,overIndex:_}):I,ae=R==null?void 0:R.id,re=m.useRef({activeId:ae,items:h,newIndex:ne,containerId:f}),se=h!==re.current.items,ce=e({active:R,containerId:f,isDragging:X,isSorting:J,id:o,index:I,items:h,newIndex:re.current.newIndex,previousItems:re.current.items,previousContainerId:re.current.containerId,transition:u,wasDragging:re.current.activeId!=null}),Ae=jB({disabled:!ce,index:I,node:E,rect:N});return m.useEffect(()=>{J&&re.current.newIndex!==ne&&(re.current.newIndex=ne),f!==re.current.containerId&&(re.current.containerId=f),h!==re.current.items&&(re.current.items=h)},[J,ne,f,h]),m.useEffect(()=>{if(ae===re.current.activeId)return;if(ae!=null&&re.current.activeId==null){re.current.activeId=ae;return}const De=setTimeout(()=>{re.current.activeId=ae},50);return()=>clearTimeout(De)},[ae]),{active:R,activeIndex:p,attributes:H,data:P,rect:N,index:I,newIndex:ne,items:h,isOver:C,isSorting:J,isDragging:X,listeners:Z,node:E,overIndex:_,over:L,setNodeRef:U,setActivatorNodeRef:W,setDroppableNodeRef:k,setDraggableNodeRef:ie,transform:Ae??B,transition:je()};function je(){if(Ae||se&&re.current.newIndex===I)return kB;if(!(Q&&!Rm(M)||!u)&&(J||ce))return Oi.Transition.toString({...u,property:fj})}}function PB(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Ve.Down,Ve.Right,Ve.Up,Ve.Left;const DB=pu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Ir({className:t,variant:e,...n}){return a.jsx("div",{className:$(DB({variant:e}),t),...n})}function sn({className:t,...e}){return a.jsx("div",{className:$("animate-pulse rounded-md bg-muted",t),...e})}const Pe=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Pe.displayName="Card";const et=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("flex flex-col space-y-1.5 p-6",t),...e}));et.displayName="CardHeader";const nt=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("text-2xl font-semibold leading-none tracking-tight",t),...e}));nt.displayName="CardTitle";const gn=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("text-sm text-muted-foreground",t),...e}));gn.displayName="CardDescription";const He=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("p-6 pt-0",t),...e}));He.displayName="CardContent";const z0=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("flex items-center p-6 pt-0",t),...e}));z0.displayName="CardFooter";function mj(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function pj(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function gj({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:c,isDragging:u}=RB({id:t.id}),h={transform:Oi.Transform.toString(l),transition:c},f=pj(t.dueDate),p=f!==null&&f<=1&&f>=0,v=t.systemStatus==="overdue"||f!==null&&f<0;return a.jsx(Pe,{ref:o,style:h,className:$("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",v&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(Ir,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),a.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:b=>b.stopPropagation(),children:a.jsx(DO,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Cs,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:$(v&&"text-destructive",p&&!v&&"text-foreground font-medium"),children:mj(t.dueDate)}),v&&a.jsx(xs,{className:"h-3.5 w-3.5 text-destructive"}),p&&!v&&a.jsx(XN,{className:"h-3.5 w-3.5 text-foreground"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(Ha,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Ha,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Submitted"})]})]}),a.jsx("div",{className:"flex items-center gap-1",children:n&&a.jsx(yo,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function MB({assignment:t,onClick:e}){const n=pj(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[a.jsx("span",{className:$("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:mj(t.dueDate)}),r&&a.jsx(xs,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const U0=m.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));U0.displayName="Textarea";var OB="Separator",SE="horizontal",LB=["horizontal","vertical"],yj=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=SE,...s}=t,i=VB(r)?r:SE,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(xe.div,{"data-orientation":i,...l,...s,ref:e})});yj.displayName=OB;function VB(t){return LB.includes(t)}var vj=yj;const ur=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(vj,{ref:s,decorative:n,orientation:e,className:$("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));ur.displayName=vj.displayName;const FB=aA,zB=lA,xj=m.forwardRef(({className:t,...e},n)=>a.jsx(y0,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));xj.displayName=y0.displayName;const UB=pu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),wj=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>a.jsxs(zB,{children:[a.jsx(xj,{}),a.jsxs(v0,{ref:s,className:$(UB({side:t}),e),...r,children:[n,a.jsxs(b0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(No,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));wj.displayName=v0.displayName;const bj=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});bj.displayName="SheetHeader";const _j=m.forwardRef(({className:t,...e},n)=>a.jsx(x0,{ref:n,className:$("text-lg font-semibold text-foreground",t),...e}));_j.displayName=x0.displayName;const $B=m.forwardRef(({className:t,...e},n)=>a.jsx(w0,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));$B.displayName=w0.displayName;function BB(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function HB(t){return t?` at ${t}`:""}function WB({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),a.jsx("div",{className:"space-y-4",children:r.map((s,i)=>a.jsxs("div",{className:"flex items-start gap-3 relative",children:[a.jsx("div",{className:$("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&a.jsx(Ha,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:$("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function qB({note:t,onUpdate:e,onDelete:n}){const[r,s]=m.useState(!1),[i,o]=m.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return a.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&a.jsx(oy,{className:"h-3.5 w-3.5 fill-current text-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:a.jsx(oy,{className:$("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:a.jsx(zO,{className:"h-3.5 w-3.5"})}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:a.jsx(WO,{className:"h-3.5 w-3.5"})})]})]}),r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(U0,{value:i,onChange:c=>o(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),a.jsxs(fe,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[a.jsx(tx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function $0({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=Jr(),[l,c]=m.useState(""),[u,h]=m.useState(!1);if(!t)return null;const f=r(t.id),p=t.systemStatus==="overdue",v=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return a.jsx(FB,{open:e,onOpenChange:n,children:a.jsxs(wj,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[a.jsx(bj,{className:"space-y-4",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[a.jsx(Ir,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),a.jsx(_j,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),a.jsxs("div",{className:"mt-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Cs,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:$(p&&"text-destructive"),children:[BB(t.dueDate),HB(t.dueTime)]}),p&&a.jsx(xs,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?a.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):a.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),a.jsx(ur,{}),t.description&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),a.jsx(ur,{})]}),a.jsx(WB,{assignment:t}),a.jsx(ur,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[a.jsx(UO,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(U0,{value:l,onChange:b=>c(b.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),a.jsxs(fe,{size:"sm",onClick:v,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[a.jsx(tx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?a.jsx("div",{className:"space-y-2",children:f.map(b=>a.jsx(qB,{note:b,onUpdate:(x,_)=>i(b.id,x,_),onDelete:()=>o(b.id,t.id)},b.id))}):!u&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&a.jsxs(a.Fragment,{children:[a.jsx(ur,{}),a.jsxs(fe,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[a.jsx(ny,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function GB({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=lj({id:t});return a.jsxs("div",{ref:o,className:$("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[a.jsx("h3",{className:"text-sm font-medium",children:e}),a.jsx(Ir,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),a.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:a.jsx(TB,{items:n.map(l=>l.id),strategy:EB,children:n.length>0?n.map(l=>{var c;return a.jsx(gj,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):a.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function KB(){var N;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o}=Jr();st();const[l,c]=m.useState(null),[u,h]=m.useState(null),f=m.useRef(null),[p,v]=m.useState(!1),b=m.useRef({x:0,left:0}),x=t$(dE(V0,{activationConstraint:{distance:8}}),dE(O0)),_=t(),w=u?i.find(E=>E.id===u):null,y=E=>{h(E.active.id)},S=E=>{const{active:C,over:k}=E;if(h(null),!k)return;const R=C.id,M=k.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(M)){const A=i.find(H=>H.id===R);A&&A.systemStatus!==M&&(M==="in_progress"?e(R,"in_progress"):e(R,"backlog"))}},I=E=>{E.button===2&&f.current&&(E.preventDefault(),v(!0),b.current={x:E.pageX,left:f.current.scrollLeft})},P=m.useCallback(E=>{if(!p||!f.current)return;E.preventDefault();const k=(E.pageX-b.current.x)*1.5;f.current.scrollLeft=b.current.left-k},[p]),D=m.useCallback(()=>{v(!1)},[]);return m.useEffect(()=>(p?(window.addEventListener("mousemove",P),window.addEventListener("mouseup",D)):(window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",D)),()=>{window.removeEventListener("mousemove",P),window.removeEventListener("mouseup",D)}),[p,P,D]),a.jsxs(a.Fragment,{children:[a.jsxs(tB,{sensors:x,collisionDetection:a$,onDragStart:y,onDragEnd:S,children:[a.jsxs("div",{className:"relative h-full flex flex-col",children:[a.jsx("div",{ref:f,className:$("flex gap-4 flex-1 overflow-x-auto p-6 pb-0 select-none",p?"cursor-grabbing":"cursor-grab"),onMouseDown:I,onContextMenu:E=>E.preventDefault(),children:_.map(E=>a.jsx(GB,{id:E.id,title:E.title,assignments:E.assignments,onCardClick:c,notes:s},E.id))}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(iy,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]}),a.jsx(xB,{children:w&&a.jsx(gj,{assignment:w,isDragging:!0,hasNotes:(((N=s.get(w.id))==null?void 0:N.length)||0)>0})})]}),a.jsx($0,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function TE(t,[e,n]){return Math.min(n,Math.max(e,t))}var QB=m.createContext(void 0);function B0(t){const e=m.useContext(QB);return t||e||"ltr"}function Ej(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var YB=[" ","Enter","ArrowUp","ArrowDown"],XB=[" ","Enter"],Du="Select",[Mm,Om,JB]=Kv(Du),[_l,GW]=Nr(Du,[JB,qf]),Lm=qf(),[ZB,Bi]=_l(Du),[eH,tH]=_l(Du),Sj=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:v,form:b}=t,x=Lm(e),[_,w]=m.useState(null),[y,S]=m.useState(null),[I,P]=m.useState(!1),D=B0(u),[N=!1,E]=Si({prop:r,defaultProp:s,onChange:i}),[C,k]=Si({prop:o,defaultProp:l,onChange:c}),R=m.useRef(null),M=_?b||!!_.closest("form"):!0,[A,H]=m.useState(new Set),ie=Array.from(A).map(Z=>Z.props.value).join(";");return a.jsx(VC,{...x,children:a.jsxs(ZB,{required:v,scope:e,trigger:_,onTriggerChange:w,valueNode:y,onValueNodeChange:S,valueNodeHasChildren:I,onValueNodeHasChildrenChange:P,contentId:fs(),value:C,onValueChange:k,open:N,onOpenChange:E,dir:D,triggerPointerDownPosRef:R,disabled:p,children:[a.jsx(Mm.Provider,{scope:e,children:a.jsx(eH,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(Z=>{H(X=>new Set(X).add(Z))},[]),onNativeOptionRemove:m.useCallback(Z=>{H(X=>{const L=new Set(X);return L.delete(Z),L})},[]),children:n})}),M?a.jsxs(Qj,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:Z=>k(Z.target.value),disabled:p,form:b,children:[C===void 0?a.jsx("option",{value:""}):null,Array.from(A)]},ie):null]})})};Sj.displayName=Du;var Tj="SelectTrigger",Nj=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Lm(n),o=Bi(Tj,n),l=o.disabled||r,c=Be(e,o.onTriggerChange),u=Om(n),h=m.useRef("touch"),[f,p,v]=Yj(x=>{const _=u().filter(S=>!S.disabled),w=_.find(S=>S.value===o.value),y=Xj(_,x,w);y!==void 0&&o.onValueChange(y.value)}),b=x=>{l||(o.onOpenChange(!0),v()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return a.jsx(FC,{asChild:!0,...i,children:a.jsx(xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Kj(o.value)?"":void 0,...s,ref:c,onClick:pe(s.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&b(x)}),onPointerDown:pe(s.onPointerDown,x=>{h.current=x.pointerType;const _=x.target;_.hasPointerCapture(x.pointerId)&&_.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(b(x),x.preventDefault())}),onKeyDown:pe(s.onKeyDown,x=>{const _=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(_&&x.key===" ")&&YB.includes(x.key)&&(b(),x.preventDefault())})})})});Nj.displayName=Tj;var Cj="SelectValue",Ij=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Bi(Cj,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Be(e,c.onValueNodeChange);return It(()=>{u(h)},[u,h]),a.jsx(xe.span,{...l,ref:f,style:{pointerEvents:"none"},children:Kj(c.value)?a.jsx(a.Fragment,{children:o}):i})});Ij.displayName=Cj;var nH="SelectIcon",kj=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(xe.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});kj.displayName=nH;var rH="SelectPortal",Aj=t=>a.jsx(fu,{asChild:!0,...t});Aj.displayName=rH;var Do="SelectContent",jj=m.forwardRef((t,e)=>{const n=Bi(Do,t.__scopeSelect),[r,s]=m.useState();if(It(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?qn.createPortal(a.jsx(Rj,{scope:t.__scopeSelect,children:a.jsx(Mm.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(Pj,{...t,ref:e})});jj.displayName=Do;var nr=10,[Rj,Hi]=_l(Do),sH="SelectContentImpl",iH=Ba("SelectContent.RemoveScroll"),Pj=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:b,hideWhenDetached:x,avoidCollisions:_,...w}=t,y=Bi(Do,n),[S,I]=m.useState(null),[P,D]=m.useState(null),N=Be(e,B=>I(B)),[E,C]=m.useState(null),[k,R]=m.useState(null),M=Om(n),[A,H]=m.useState(!1),ie=m.useRef(!1);m.useEffect(()=>{if(S)return B2(S)},[S]),D2();const Z=m.useCallback(B=>{const[ne,...ae]=M().map(ce=>ce.ref.current),[re]=ae.slice(-1),se=document.activeElement;for(const ce of B)if(ce===se||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===ne&&P&&(P.scrollTop=0),ce===re&&P&&(P.scrollTop=P.scrollHeight),ce==null||ce.focus(),document.activeElement!==se))return},[M,P]),X=m.useCallback(()=>Z([E,S]),[Z,E,S]);m.useEffect(()=>{A&&X()},[A,X]);const{onOpenChange:L,triggerPointerDownPosRef:W}=y;m.useEffect(()=>{if(S){let B={x:0,y:0};const ne=re=>{var se,ce;B={x:Math.abs(Math.round(re.pageX)-(((se=W.current)==null?void 0:se.x)??0)),y:Math.abs(Math.round(re.pageY)-(((ce=W.current)==null?void 0:ce.y)??0))}},ae=re=>{B.x<=10&&B.y<=10?re.preventDefault():S.contains(re.target)||L(!1),document.removeEventListener("pointermove",ne),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ae,{capture:!0})}}},[S,L,W]),m.useEffect(()=>{const B=()=>L(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[L]);const[z,U]=Yj(B=>{const ne=M().filter(se=>!se.disabled),ae=ne.find(se=>se.ref.current===document.activeElement),re=Xj(ne,B,ae);re&&setTimeout(()=>re.ref.current.focus())}),J=m.useCallback((B,ne,ae)=>{const re=!ie.current&&!ae;(y.value!==void 0&&y.value===ne||re)&&(C(B),re&&(ie.current=!0))},[y.value]),Y=m.useCallback(()=>S==null?void 0:S.focus(),[S]),Q=m.useCallback((B,ne,ae)=>{const re=!ie.current&&!ae;(y.value!==void 0&&y.value===ne||re)&&R(B)},[y.value]),te=r==="popper"?By:Dj,V=te===By?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:v,sticky:b,hideWhenDetached:x,avoidCollisions:_}:{};return a.jsx(Rj,{scope:n,content:S,viewport:P,onViewportChange:D,itemRefCallback:J,selectedItem:E,onItemLeave:Y,itemTextRefCallback:Q,focusSelectedItem:X,selectedItemText:k,position:r,isPositioned:A,searchRef:z,children:a.jsx(h0,{as:iH,allowPinchZoom:!0,children:a.jsx(d0,{asChild:!0,trapped:y.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:pe(s,B=>{var ne;(ne=y.trigger)==null||ne.focus({preventScroll:!0}),B.preventDefault()}),children:a.jsx(hu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:a.jsx(te,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:B=>B.preventDefault(),...w,...V,onPlaced:()=>H(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:pe(w.onKeyDown,B=>{const ne=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!ne&&B.key.length===1&&U(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let re=M().filter(se=>!se.disabled).map(se=>se.ref.current);if(["ArrowUp","End"].includes(B.key)&&(re=re.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const se=B.target,ce=re.indexOf(se);re=re.slice(ce+1)}setTimeout(()=>Z(re)),B.preventDefault()}})})})})})})});Pj.displayName=sH;var oH="SelectItemAlignedPosition",Dj=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Bi(Do,n),o=Hi(Do,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=Be(e,N=>h(N)),p=Om(n),v=m.useRef(!1),b=m.useRef(!0),{viewport:x,selectedItem:_,selectedItemText:w,focusSelectedItem:y}=o,S=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&x&&_&&w){const N=i.trigger.getBoundingClientRect(),E=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),k=w.getBoundingClientRect();if(i.dir!=="rtl"){const se=k.left-E.left,ce=C.left-se,Ae=N.left-ce,je=N.width+Ae,De=Math.max(je,E.width),Ne=window.innerWidth-nr,it=TE(ce,[nr,Math.max(nr,Ne-De)]);l.style.minWidth=je+"px",l.style.left=it+"px"}else{const se=E.right-k.right,ce=window.innerWidth-C.right-se,Ae=window.innerWidth-N.right-ce,je=N.width+Ae,De=Math.max(je,E.width),Ne=window.innerWidth-nr,it=TE(ce,[nr,Math.max(nr,Ne-De)]);l.style.minWidth=je+"px",l.style.right=it+"px"}const R=p(),M=window.innerHeight-nr*2,A=x.scrollHeight,H=window.getComputedStyle(u),ie=parseInt(H.borderTopWidth,10),Z=parseInt(H.paddingTop,10),X=parseInt(H.borderBottomWidth,10),L=parseInt(H.paddingBottom,10),W=ie+Z+A+L+X,z=Math.min(_.offsetHeight*5,W),U=window.getComputedStyle(x),J=parseInt(U.paddingTop,10),Y=parseInt(U.paddingBottom,10),Q=N.top+N.height/2-nr,te=M-Q,V=_.offsetHeight/2,B=_.offsetTop+V,ne=ie+Z+B,ae=W-ne;if(ne<=Q){const se=R.length>0&&_===R[R.length-1].ref.current;l.style.bottom="0px";const ce=u.clientHeight-x.offsetTop-x.offsetHeight,Ae=Math.max(te,V+(se?Y:0)+ce+X),je=ne+Ae;l.style.height=je+"px"}else{const se=R.length>0&&_===R[0].ref.current;l.style.top="0px";const Ae=Math.max(Q,ie+x.offsetTop+(se?J:0)+V)+ae;l.style.height=Ae+"px",x.scrollTop=ne-Q+x.offsetTop}l.style.margin=`${nr}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[p,i.trigger,i.valueNode,l,u,x,_,w,i.dir,r]);It(()=>S(),[S]);const[I,P]=m.useState();It(()=>{u&&P(window.getComputedStyle(u).zIndex)},[u]);const D=m.useCallback(N=>{N&&b.current===!0&&(S(),y==null||y(),b.current=!1)},[S,y]);return a.jsx(lH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:D,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:a.jsx(xe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Dj.displayName=oH;var aH="SelectPopperPosition",By=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=nr,...i}=t,o=Lm(n);return a.jsx(zC,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});By.displayName=aH;var[lH,H0]=_l(Do,{}),Hy="SelectViewport",Mj=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Hi(Hy,n),o=H0(Hy,n),l=Be(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Mm.Slot,{scope:n,children:a.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:pe(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const v=Math.abs(c.current-h.scrollTop);if(v>0){const b=window.innerHeight-nr*2,x=parseFloat(f.style.minHeight),_=parseFloat(f.style.height),w=Math.max(x,_);if(w<b){const y=w+v,S=Math.min(b,y),I=y-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Mj.displayName=Hy;var Oj="SelectGroup",[cH,uH]=_l(Oj),dH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=fs();return a.jsx(cH,{scope:n,id:s,children:a.jsx(xe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});dH.displayName=Oj;var Lj="SelectLabel",Vj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=uH(Lj,n);return a.jsx(xe.div,{id:s.id,...r,ref:e})});Vj.displayName=Lj;var gf="SelectItem",[hH,Fj]=_l(gf),zj=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Bi(gf,n),c=Hi(gf,n),u=l.value===r,[h,f]=m.useState(i??""),[p,v]=m.useState(!1),b=Be(e,y=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,y,r,s)}),x=fs(),_=m.useRef("touch"),w=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(hH,{scope:n,value:r,disabled:s,textId:x,isSelected:u,onItemTextChange:m.useCallback(y=>{f(S=>S||((y==null?void 0:y.textContent)??"").trim())},[]),children:a.jsx(Mm.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(xe.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:pe(o.onFocus,()=>v(!0)),onBlur:pe(o.onBlur,()=>v(!1)),onClick:pe(o.onClick,()=>{_.current!=="mouse"&&w()}),onPointerUp:pe(o.onPointerUp,()=>{_.current==="mouse"&&w()}),onPointerDown:pe(o.onPointerDown,y=>{_.current=y.pointerType}),onPointerMove:pe(o.onPointerMove,y=>{var S;_.current=y.pointerType,s?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(o.onPointerLeave,y=>{var S;y.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:pe(o.onKeyDown,y=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&y.key===" "||(XB.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});zj.displayName=gf;var Zl="SelectItemText",Uj=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Bi(Zl,n),l=Hi(Zl,n),c=Fj(Zl,n),u=tH(Zl,n),[h,f]=m.useState(null),p=Be(e,w=>f(w),c.onItemTextChange,w=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,w,c.value,c.disabled)}),v=h==null?void 0:h.textContent,b=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:x,onNativeOptionRemove:_}=u;return It(()=>(x(b),()=>_(b)),[x,_,b]),a.jsxs(a.Fragment,{children:[a.jsx(xe.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?qn.createPortal(i.children,o.valueNode):null]})});Uj.displayName=Zl;var $j="SelectItemIndicator",Bj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Fj($j,n).isSelected?a.jsx(xe.span,{"aria-hidden":!0,...r,ref:e}):null});Bj.displayName=$j;var Wy="SelectScrollUpButton",Hj=m.forwardRef((t,e)=>{const n=Hi(Wy,t.__scopeSelect),r=H0(Wy,t.__scopeSelect),[s,i]=m.useState(!1),o=Be(e,r.onScrollButtonChange);return It(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(qj,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Hj.displayName=Wy;var qy="SelectScrollDownButton",Wj=m.forwardRef((t,e)=>{const n=Hi(qy,t.__scopeSelect),r=H0(qy,t.__scopeSelect),[s,i]=m.useState(!1),o=Be(e,r.onScrollButtonChange);return It(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(qj,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Wj.displayName=qy;var qj=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Hi("SelectScrollButton",n),o=m.useRef(null),l=Om(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),It(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(xe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:pe(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:pe(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:pe(s.onPointerLeave,()=>{c()})})}),fH="SelectSeparator",Gj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(xe.div,{"aria-hidden":!0,...r,ref:e})});Gj.displayName=fH;var Gy="SelectArrow",mH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Lm(n),i=Bi(Gy,n),o=Hi(Gy,n);return i.open&&o.position==="popper"?a.jsx(UC,{...s,...r,ref:e}):null});mH.displayName=Gy;function Kj(t){return t===""||t===void 0}var Qj=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=Be(e,s),o=Ej(n);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),a.jsx(mu,{asChild:!0,children:a.jsx("select",{...r,ref:i,defaultValue:n})})});Qj.displayName="BubbleSelect";function Yj(t){const e=ln(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function Xj(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=pH(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function pH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var gH=Sj,Jj=Nj,yH=Ij,vH=kj,xH=Aj,Zj=jj,wH=Mj,eR=Vj,tR=zj,bH=Uj,_H=Bj,nR=Hj,rR=Wj,sR=Gj;const yf=gH,vf=yH,nu=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(Jj,{ref:r,className:$("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(vH,{asChild:!0,children:a.jsx(QN,{className:"h-4 w-4 opacity-50"})})]}));nu.displayName=Jj.displayName;const iR=m.forwardRef(({className:t,...e},n)=>a.jsx(nR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(AO,{className:"h-4 w-4"})}));iR.displayName=nR.displayName;const oR=m.forwardRef(({className:t,...e},n)=>a.jsx(rR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(QN,{className:"h-4 w-4"})}));oR.displayName=rR.displayName;const ru=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(xH,{children:a.jsxs(Zj,{ref:s,className:$("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(iR,{}),a.jsx(wH,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(oR,{})]})}));ru.displayName=Zj.displayName;const EH=m.forwardRef(({className:t,...e},n)=>a.jsx(eR,{ref:n,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));EH.displayName=eR.displayName;const St=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(tR,{ref:r,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(_H,{children:a.jsx(Dh,{className:"h-4 w-4"})})}),a.jsx(bH,{children:e})]}));St.displayName=tR.displayName;const SH=m.forwardRef(({className:t,...e},n)=>a.jsx(sR,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));SH.displayName=sR.displayName;function TH(t){return j0({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const Rd={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},NH=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},CH=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},rg=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,NE=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function IH(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=Jr();st();const[o,l]=m.useState(null),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,v]=m.useState("timeline"),[b,x]=m.useState(1),[_,w]=m.useState(!1),[y]=m.useState([]),S=m.useMemo(()=>{let E=[...s,...y];return o&&(E=E.filter(C=>C.courseId===o)),c&&(E=E.filter(C=>C.systemStatus===c)),E},[s,y,o,c]),I=()=>{l(null),u(null)},P=o||c,D=()=>{const E=m.useRef(null),[C,k]=m.useState(!1),R=m.useRef({x:0,left:0}),A=60*b,{earliestDate:H,latestDate:ie,initialScrollPosition:Z}=m.useMemo(()=>{const V=new Date;V.setHours(0,0,0,0);let B=new Date,ne=new Date;if(S.length>0){const De=S.flatMap(Ne=>{const it=[];return Ne.dueDate&&it.push(new Date(Ne.dueDate)),Ne.createdAt&&it.push(new Date(Ne.createdAt)),it});De.length>0&&(B=new Date(Math.min(...De.map(Ne=>Ne.getTime()))),ne=new Date(Math.max(...De.map(Ne=>Ne.getTime()))))}const ae=new Date(B);ae.setDate(ae.getDate()-30);const re=new Date(ne);re.setDate(re.getDate()+30);let se=V;const ce=S.filter(De=>De.dueDate&&new Date(De.dueDate)>=V).sort((De,Ne)=>new Date(De.dueDate).getTime()-new Date(Ne.dueDate).getTime());ce.length>0&&(se=new Date(ce[0].dueDate));const je=Math.ceil((se.getTime()-ae.getTime())/(1e3*3600*24))*A+A/2-window.innerWidth/2;return{earliestDate:ae,latestDate:re,initialScrollPosition:Math.max(0,je)}},[S,A]),X=m.useMemo(()=>NH(H,ie),[H,ie]);m.useEffect(()=>{E.current&&(E.current.scrollLeft=Z)},[Z]);const L=V=>{V.button===2&&E.current&&(V.preventDefault(),k(!0),R.current={x:V.pageX,left:E.current.scrollLeft})},W=m.useCallback(V=>{if(!C||!E.current)return;V.preventDefault();const ne=(V.pageX-R.current.x)*1.5;E.current.scrollLeft=R.current.left-ne},[C]),z=m.useCallback(()=>{k(!1)},[]);m.useEffect(()=>(C?(window.addEventListener("mousemove",W),window.addEventListener("mouseup",z)):(window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",z)),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",z)}),[C,W,z]);const[U,J]=m.useState(!1),[Y,Q]=m.useState(!1),te=m.useRef(null);return m.useEffect(()=>{const V=()=>{if(te.current){const{scrollHeight:ne,clientHeight:ae,scrollTop:re}=te.current;J(ne>ae),Q(re+ae>=ne-10)}};V();const B=te.current;return B==null||B.addEventListener("scroll",V),window.addEventListener("resize",V),()=>{B==null||B.removeEventListener("scroll",V),window.removeEventListener("resize",V)}},[S,_]),a.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[a.jsx("div",{ref:V=>{E.current=V,te.current=V},className:$("flex-1 overflow-auto relative select-none",C?"cursor-grabbing":"cursor-default"),onMouseDown:L,onContextMenu:V=>V.preventDefault(),children:a.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${X.length*A}px`},children:[a.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:X.map((V,B)=>{const ne=NE(V);return a.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:A},children:[a.jsx("span",{className:$("text-[10px] uppercase font-bold tracking-wider mb-1",ne?"text-foreground":"text-muted-foreground"),children:V.toLocaleDateString("en-US",{weekday:"narrow"})}),a.jsx("span",{className:$("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",ne?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:V.getDate()}),a.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},B)})}),a.jsxs("div",{className:"relative pt-6",style:{minHeight:_?`${Math.max(300,S.filter(V=>V.dueDate).length*40)}px`:`${Math.max(400,S.filter(V=>V.dueDate).length*60)}px`},children:[a.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:X.map((V,B)=>{const ne=NE(V);return a.jsx("div",{className:$("flex-shrink-0 h-full border-r border-border relative",ne?"bg-accent/50":""),style:{width:A},children:ne&&a.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},B)})}),a.jsx("div",{className:$("px-0 relative z-10 mt-2",_?"space-y-1":"space-y-3"),children:S.filter(V=>V.dueDate).map(V=>{const B=e.find(Xn=>Xn.id===V.courseId),ne=B==null?void 0:B.color,ae=V.systemStatus==="submitted"||V.systemStatus==="graded",re=V.createdAt?new Date(V.createdAt):new Date,se=new Date(V.dueDate),ce=(re.getTime()-H.getTime())/(1e3*3600*24),Ae=(se.getTime()-re.getTime())/(1e3*3600*24),je=Math.max(0,ce*A),De=Math.max(A,Ae*A),Ne={left:`${je}px`,width:`${De}px`,minWidth:_?"100px":"140px",backgroundColor:ae?void 0:ne,borderColor:ae?void 0:ne?"rgba(0,0,0,0.1)":void 0};Rd[V.systemStatus]||Rd.backlog;const it="bg-green-100/80 border-green-300 text-green-800",Sn="bg-card border shadow-sm "+(ne?"text-slate-900":"text-foreground"),We=_?"h-8":"h-12",Ge=_?"h-9":"h-14";return a.jsx("div",{className:$("relative group",Ge),children:a.jsxs("div",{onClick:()=>f(V),className:$("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",We,_?"px-2":"px-3",ae?it:Sn),style:Ne,children:[a.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:a.jsxs("span",{className:$("truncate font-bold leading-none flex items-center gap-1",_?"text-[10px]":"text-xs"),children:[V.courseId==="system"&&a.jsx(ex,{className:$("inline-block",_?"h-2.5 w-2.5":"h-3 w-3")}),ae&&a.jsx(Dh,{className:$("inline-block mr-0.5",_?"h-2.5 w-2.5":"h-3 w-3")}),V.title]})}),!_&&a.jsx("div",{className:"flex items-center justify-between opacity-80",children:a.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:V.courseName})})]})},V.id)})})]})]})}),U&&!Y&&S.length>0&&a.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(ob,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),a.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),a.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const V=E.current,B=(V==null?void 0:V.scrollLeft)||0,ne=(V==null?void 0:V.scrollTop)||0,ae=Math.min(2,b+.25);x(ae),ae>.75&&w(!1),setTimeout(()=>{V&&(V.scrollLeft=B*(ae/b),V.scrollTop=ne)},0)},disabled:b>=2,title:"Zoom In (Normal View)",children:a.jsx(GO,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),a.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const V=E.current,B=(V==null?void 0:V.scrollLeft)||0,ne=(V==null?void 0:V.scrollTop)||0,ae=Math.max(.5,b-.25);x(ae),ae<=.75&&w(!0),setTimeout(()=>{V&&(V.scrollLeft=B*(ae/b),V.scrollTop=ne)},0)},disabled:b<=.5,title:"Zoom Out (Compact View)",children:a.jsx(KO,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[a.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(b*100),"%"]}),_&&a.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(iy,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},N=()=>{const E=m.useRef(null),[C,k]=m.useState(!1),R=m.useRef({y:0,top:0}),M=m.useRef({}),[A,H]=m.useState(!1),{startMonth:ie,endMonth:Z}=m.useMemo(()=>{let Q=new Date,te=new Date;if(S.length>0){const ne=S.filter(ae=>ae.dueDate).map(ae=>new Date(ae.dueDate));ne.length>0&&(Q=new Date(Math.min(...ne.map(ae=>ae.getTime()))),te=new Date(Math.max(...ne.map(ae=>ae.getTime()))))}const V=new Date(Q);V.setMonth(V.getMonth()-2),V.setDate(1);const B=new Date(te);return B.setMonth(B.getMonth()+4),B.setDate(1),{startMonth:V,endMonth:B}},[S]),X=m.useMemo(()=>CH(ie,Z),[ie,Z]),L=m.useCallback(()=>{var ne;const Q=rg(new Date),te=M.current[Q];if(!te){H(!0);return}const V=te.getBoundingClientRect(),B=(ne=E.current)==null?void 0:ne.getBoundingClientRect();B&&H(V.bottom<B.top||V.top>B.bottom)},[X]);m.useEffect(()=>{const Q=E.current;return Q&&(Q.addEventListener("scroll",L),L()),()=>Q==null?void 0:Q.removeEventListener("scroll",L)},[L]),m.useEffect(()=>{setTimeout(()=>W(),100)},[]);const W=()=>{const Q=rg(new Date),te=M.current[Q];te&&te.scrollIntoView({behavior:"smooth",block:"center"})},z=Q=>{Q.button===2&&E.current&&(Q.preventDefault(),k(!0),R.current={y:Q.pageY,top:E.current.scrollTop})},U=m.useCallback(Q=>{if(!C||!E.current)return;Q.preventDefault();const V=(Q.pageY-R.current.y)*1.5;E.current.scrollTop=R.current.top-V},[C]),J=m.useCallback(()=>{k(!1)},[]);m.useEffect(()=>(C?(window.addEventListener("mousemove",U),window.addEventListener("mouseup",J)):(window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",J)),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",J)}),[C,U,J]);const Y=Q=>{const te=Q.getFullYear(),V=Q.getMonth(),B=new Date(te,V,1),ne=new Date(te,V+1,0),ae=[];for(let re=0;re<B.getDay();re++)ae.push({date:new Date(te,V,-B.getDay()+1+re),isCurrentMonth:!1});for(let re=1;re<=ne.getDate();re++)ae.push({date:new Date(te,V,re),isCurrentMonth:!0});for(;ae.length%7!==0;){const re=ae.length-(B.getDay()+ne.getDate())+1,se=new Date(te,V+1,re);ae.push({date:se,isCurrentMonth:!1})}return ae};return a.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[A&&a.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:a.jsxs("button",{onClick:W,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[a.jsx(ob,{size:14})," Jump to Today"]})}),a.jsx("div",{ref:E,className:$("flex-1 overflow-y-auto",C?"cursor-grabbing":"cursor-default"),onMouseDown:z,onContextMenu:Q=>Q.preventDefault(),children:a.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:X.map(Q=>{const te=Y(Q),V=rg(Q);return a.jsxs("div",{ref:B=>M.current[V]=B,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[a.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold",children:Q.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),a.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(B=>a.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:B},B))}),a.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:te.map((B,ne)=>{const ae=S.filter(se=>{if(!se.dueDate)return!1;const ce=new Date(se.dueDate);ce.setHours(0,0,0,0);const Ae=new Date(B.date);return Ae.setHours(0,0,0,0),Ae.toDateString()===ce.toDateString()}),re=B.date.toDateString()===new Date().toDateString();return a.jsxs("div",{className:$("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",B.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[a.jsx("span",{className:$("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",re&&B.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:B.date.getDate()}),a.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:ae.map(se=>{const ce=Rd[se.systemStatus]||Rd.backlog;return a.jsx("div",{onClick:Ae=>{Ae.stopPropagation(),f(se)},className:$("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",ce.color,ce.border),title:se.title,children:se.title},se.id)})})]},ne)})})]},V)})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[a.jsx(iy,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] overflow-hidden",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3 sticky top-0 bg-background py-3 z-10 border-b px-4 sm:px-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:p==="timeline"?"default":"ghost",size:"sm",onClick:()=>v("timeline"),className:"gap-2",children:[a.jsx(Cs,{size:14}),"Timeline"]}),a.jsxs(fe,{variant:p==="calendar"?"default":"ghost",size:"sm",onClick:()=>v("calendar"),className:"gap-2",children:[a.jsx(zc,{size:14}),"Calendar"]})]}),a.jsxs(yf,{value:o||"all",onValueChange:E=>l(E==="all"?null:E),children:[a.jsx(nu,{className:"w-[140px] sm:w-[180px]","data-testid":"select-course-filter",children:a.jsx(vf,{placeholder:"All Courses"})}),a.jsxs(ru,{children:[a.jsx(St,{value:"all",children:"All Courses"}),e.map(E=>a.jsx(St,{value:E.id,children:E.name},E.id))]})]}),a.jsxs(yf,{value:c||"all",onValueChange:E=>u(E==="all"?null:E),children:[a.jsx(nu,{className:"w-[120px] sm:w-[140px]","data-testid":"select-status-filter",children:a.jsx(vf,{placeholder:"All Status"})}),a.jsxs(ru,{children:[a.jsx(St,{value:"all",children:"All Status"}),a.jsx(St,{value:"backlog",children:"Backlog"}),a.jsx(St,{value:"in_progress",children:"In Progress"}),a.jsx(St,{value:"submitted",children:"Submitted"}),a.jsx(St,{value:"graded",children:"Graded"}),a.jsx(St,{value:"overdue",children:"Overdue"})]})]}),P&&a.jsxs(fe,{variant:"ghost",size:"sm",onClick:I,className:"text-muted-foreground","data-testid":"button-clear-filters",children:[a.jsx(No,{className:"h-3.5 w-3.5 mr-1"}),"Clear filters"]}),a.jsx("div",{className:"ml-auto",children:a.jsx(Yf,{children:a.jsxs(Xf,{children:[a.jsx(Jf,{asChild:!0,children:a.jsx(Ei,{href:"/settings/integrations",children:a.jsxs(fe,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap",children:[a.jsx(TH,{className:"h-4 w-4"}),"Sync with Google Calendar"]})})}),a.jsxs(vu,{side:"left",className:"max-w-xs",children:[a.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:p==="timeline"?a.jsx(D,{}):a.jsx(N,{})})]}),a.jsx($0,{assignment:h,isOpen:!!h,onClose:()=>f(null)})]})}const CE="attendance_configs",Hn={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await Ut(ze(Le,CE,t),n)},async getCourseConfig(t){try{const e=ze(Le,CE,t),n=await _r(e);return n.exists()?n.data():null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var _;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=r.toUpperCase().charCodeAt(0)-65,o=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:Z500?majorDimension=ROWS`,l=await fetch(o,{headers:{Authorization:`Bearer ${e}`}});if(!l.ok)throw l.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):l.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const u=(await l.json()).values;if(!u||u.length<2)throw new Error("Sheet is empty or invalid format.");const h=u[0],f=u.find(w=>{var S;return((S=w[s])==null?void 0:S.toLowerCase().trim())===n.toLowerCase().trim()});if(!f)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let p=0,v=0;const b=[];for(let w=1;w<h.length;w++){const y=h[w],S=(_=f[w])==null?void 0:_.toUpperCase().trim();if(!y)continue;let I="Unknown";S==="P"||S==="PRESENT"||S==="1"?(I="Present",v++,p++):(S==="A"||S==="ABSENT"||S==="0")&&(I="Absent",p++),I!=="Unknown"&&b.push({date:y,status:I})}const x=p===0?0:Math.round(v/p*100);return{courseId:t,stats:{totalClasses:p,attendedClasses:v,percentage:x},history:b.reverse()}}},oi={"5-day-consistent":{id:"5-day-consistent",label:"5-Day Streak",description:"Visited app for 5 consecutive days",category:"consistency",icon:Zv,color:"text-orange-500 bg-orange-50 dark:bg-orange-500/10"},"10-day-consistent":{id:"10-day-consistent",label:"10-Day Streak",description:"Visited app for 10 consecutive days",category:"consistency",icon:qO,color:"text-amber-500 bg-amber-50 dark:bg-amber-500/10"},"30-day-consistent":{id:"30-day-consistent",label:"Monthly Master",description:"Visited app for 30 consecutive days",category:"consistency",icon:rx,color:"text-purple-500 bg-purple-50 dark:bg-purple-500/10"},"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:iC,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:nC,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:oy,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:zc,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:YN,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},kH=Object.keys(oi);function AH({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=oi[t],[i,o]=m.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return a.jsx(Yf,{delayDuration:0,children:a.jsxs(Xf,{open:i,onOpenChange:o,children:[a.jsx(Jf,{asChild:!0,children:a.jsxs("div",{className:$("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),o(!i)},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[a.jsx(l,{className:$(u[e]),strokeWidth:2.5}),r&&a.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),a.jsx(YC,{children:a.jsxs(vu,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>o(!1),children:[a.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function ec({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],o=i.length;return a.jsxs("div",{className:$("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>a.jsx(AH,{badgeId:l,size:n},l)),o>0&&a.jsx(Yf,{delayDuration:0,children:a.jsxs(Xf,{children:[a.jsx(Jf,{asChild:!0,children:a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",o]})}),a.jsx(YC,{children:a.jsx(vu,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),a.jsx("span",{className:"text-xs font-medium",children:((c=oi[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function jH(){const{user:t}=st(),[e,n]=m.useState([]),[r,s]=m.useState(0),[i,o]=m.useState(0),[l,c]=m.useState(!0);m.useEffect(()=>{if(!t)return;const f=As(ze(Le,"leaderboards","all-courses","students",t.uid),p=>{var v;if(p.exists()){const b=p.data();n(b.badges||[]),s(b.loginStreak||0),o(((v=b.processedAssignmentIds)==null?void 0:v.length)||0)}c(!1)});return()=>f()},[t]);const u=()=>{const f=[];return f.push({badge:oi["5-day-consistent"],current:r||1,target:5,percentage:Math.min((r||1)/5*100,100),type:"streak",label:"Days"}),f.push({badge:oi["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),f.push({badge:oi["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),f.push({badge:oi["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),f.reduce((p,v)=>v.percentage>p.percentage?v:p)},h=e.length===0?u():null;return a.jsxs(Pe,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[a.jsxs(et,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),a.jsx(eC,{className:"h-5 w-5 text-purple-500"})]}),a.jsx(He,{className:"flex-1 flex flex-col",children:l?a.jsxs("div",{className:"space-y-2",children:[a.jsx(sn,{className:"h-8 w-8 rounded-full"}),a.jsx(sn,{className:"h-3 w-20"})]}):e.length>0?a.jsx("div",{className:"flex flex-col justify-between h-full gap-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,a.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),a.jsx(ec,{badges:e,limit:3,size:"md",className:"mt-2"})]})}):h?a.jsx("div",{className:"flex flex-col gap-3 justify-between h-full",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="streak"?a.jsx(Zv,{className:"h-5 w-5 text-orange-500"}):h.type==="submission"?a.jsx(iC,{className:"h-5 w-5 text-blue-500"}):a.jsx(zc,{className:"h-5 w-5 text-emerald-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="streak"?"bg-orange-500":h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]})}):a.jsx("div",{className:"flex flex-col gap-2 justify-between h-full",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."})})})]})}function RH(){const{user:t}=st(),[e,n]=m.useState(null),[r,s]=m.useState(!0);return m.useEffect(()=>{if(!t)return;const i=As(ze(Le,"leaderboards","all-courses","students",t.uid),o=>{if(o.exists()){const l=o.data();n(l.loginStreak||0)}else n(0);s(!1)});return()=>i()},[t]),a.jsxs(Pe,{className:"flex flex-col h-full","data-testid":"card-streak",children:[a.jsxs(et,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Current Streak"}),a.jsx(Zv,{className:"h-5 w-5 text-orange-500 fill-orange-500"})]}),a.jsx(He,{className:"flex-1 flex flex-col justify-between",children:r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(sn,{className:"h-8 w-16"}),a.jsx(sn,{className:"h-3 w-24"})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:[e,a.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Days"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e&&e>0?"You're on fire! Keep coming back.":"Log in daily to build your streak!"})]})})]})}function aR(){const{refreshAccessToken:t,signOut:e}=st(),[n,r]=m.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),a.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:a.jsx(Wa,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),a.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),a.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[a.jsx(fe,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Wa,{className:"h-4 w-4 animate-spin"}),a.jsx("span",{className:"font-medium",children:"Signing In..."})]}):a.jsxs(a.Fragment,{children:[a.jsx($A,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),a.jsx(fe,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),a.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[a.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function PH({courses:t}){const{user:e,accessToken:n}=st(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){o(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async f=>{try{const p=await Hn.getCourseConfig(f.id);if(!p||!p.isVisible||!p.sheetUrl)return;const v=Hn.extractSheetId(p.sheetUrl);if(!v)return;const b=await Hn.fetchAttendanceFromSheet(v,n,e.email,p.emailColumn||"A");b&&(c+=b.stats.attendedClasses,u+=b.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const f=Math.round(c/u*100);let p="safe";f<70?p="danger":f<75&&(p="warning"),s({percentage:f,status:p,present:c,total:u})}o(!1)}l()},[t,e,n]),a.jsxs(Pe,{"data-testid":"card-attendance-overall",children:[a.jsxs(et,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),a.jsx(oC,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]}),a.jsx(He,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(sn,{className:"h-8 w-16"}),a.jsx(sn,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:$("text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:[r.percentage,"%"]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium text-muted-foreground",children:[r.present,"/",r.total," Classes Attended"]}),a.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-bold",r.status==="safe"?"text-emerald-500":r.status==="warning"?"text-amber-500":"text-red-500"),children:r.status==="safe"?"On Track":"Low Attendance"})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Attendance Yet"}),a.jsx("p",{className:"text-xs text-muted-foreground/70 leading-relaxed",children:"Ask your teacher to login to Trace to track real-time attendance"})]}),a.jsx(Ei,{href:"/attendance",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full mt-1",children:"View Details"})})]})})]})}function Pd({title:t,value:e,icon:n,variant:r="default"}){const i={default:{bg:"bg-gradient-to-br from-background to-muted/30",iconBg:"bg-primary/10",iconColor:"text-primary",valueColor:"text-foreground",border:"border-border hover:border-primary/50"},warning:{bg:"bg-gradient-to-br from-amber-50/50 to-amber-100/30 dark:from-amber-950/20 dark:to-amber-900/10",iconBg:"bg-amber-500/10",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800 hover:border-amber-400"},danger:{bg:"bg-gradient-to-br from-red-50/50 to-red-100/30 dark:from-red-950/20 dark:to-red-900/10",iconBg:"bg-destructive/10",iconColor:"text-destructive",valueColor:"text-destructive",border:"border-red-200 dark:border-red-800 hover:border-destructive"}}[r];return a.jsxs(Pe,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:$("overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",i.border),children:[a.jsx(et,{className:$("pb-3",i.bg),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:t}),a.jsx("div",{className:$("p-2 rounded-lg",i.iconBg),children:a.jsx(n,{className:$("h-4 w-4",i.iconColor)})})]})}),a.jsx(He,{className:"pt-2",children:a.jsx("div",{className:$("text-3xl font-bold font-mono tracking-tight tabular-nums",i.valueColor),children:e})})]})}function DH({data:t}){const e=Math.max(...t.map(n=>n.count),1);return a.jsxs(Pe,{className:"overflow-hidden",children:[a.jsx(et,{className:"pb-3 bg-gradient-to-br from-background to-muted/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(nt,{className:"text-sm font-semibold flex items-center gap-2",children:[a.jsx(Cs,{className:"h-4 w-4 text-primary"}),"Weekly Workload"]}),a.jsxs(Ir,{variant:"outline",className:"text-xs font-mono",children:[t.reduce((n,r)=>n+r.count,0)," total"]})]})}),a.jsx(He,{className:"pt-4",children:a.jsx("div",{className:"flex items-end justify-between gap-3 h-36",children:t.map((n,r)=>a.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group",children:[a.jsx("span",{className:$("text-xs font-bold tabular-nums transition-all",n.count>0?n.isToday?"text-primary":"text-muted-foreground":"text-transparent"),children:n.count>0?n.count:"0"}),a.jsx("div",{className:"relative w-full",children:a.jsx("div",{className:$("w-full rounded-t-md transition-all duration-500 ease-out relative overflow-hidden",n.isToday?"bg-gradient-to-t from-primary to-primary/70 shadow-lg shadow-primary/20":"bg-gradient-to-t from-muted to-muted/50",n.count===0&&"min-h-[4px] opacity-30","group-hover:scale-105 group-hover:shadow-xl"),style:{height:n.count>0?`${n.count/e*96}px`:"4px"},children:n.count>0&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-white/10 to-white/20"})})}),a.jsx("span",{className:$("text-xs font-medium transition-colors",n.isToday?"text-primary font-bold":"text-muted-foreground group-hover:text-foreground"),children:n.day})]},r))})})]})}function MH({courses:t,assignments:e}){const{user:n}=st(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(f=>f.id)])),c=[],u=new Map,h=()=>{const f=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,v=t.map(y=>y.id),b=new Set(e.map(y=>y.id)),x=f.filter(y=>{const S=y.email||"",I=y.emailDomain||(S.includes("@")?S.split("@")[1]:""),P=y.enrolledCourseIds||[],D=y.processedAssignmentIds||[],N=p&&I&&p===I,E=v.some(R=>P.includes(R)),k=!I&&D.some(R=>b.has(R));return y.id===n.uid?!0:N&&E||k});x.sort((y,S)=>S.totalXP-y.totalXP);const _=x.length;if(_===0){s(null),o(!1);return}const w=x.findIndex(y=>y.id===n.uid);if(w!==-1){const y=w+1,S=Math.round((_-y+1)/_*100),I=x[w];s({rank:y,total:_,percentile:S,xp:I.totalXP||0,badges:I.badges||[]})}else s(null);o(!1)};return l.forEach(f=>{const p=a0(Zx(Le,"leaderboards",f,"students"),l0("totalXP","desc")),v=As(p,b=>{b.docs.forEach(x=>{const _=x.data(),w={id:x.id,..._,email:_.email||"",emailDomain:_.emailDomain||(_.email?_.email.split("@")[1]:""),enrolledCourseIds:_.enrolledCourseIds||_.subjects||[],processedAssignmentIds:_.processedAssignmentIds||_.completedTasks||[],totalXP:_.totalXP||_.xp||0,badges:_.badges||[]},y=u.get(x.id);(!y||w.totalXP>=y.totalXP)&&u.set(x.id,w)}),h()},b=>{console.error(`Error fetching leaderboard source ${f}:`,b),h()});c.push(v)}),()=>{c.forEach(f=>f())}},[n,t,e]),a.jsxs(Pe,{"data-testid":"card-class-rank",children:[a.jsxs(et,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),a.jsx(rx,{className:"h-5 w-5 text-amber-500"})]}),a.jsx(He,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(sn,{className:"h-8 w-16"}),a.jsx(sn,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,a.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.xp.toLocaleString()," Total XP"]})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),a.jsx(Ei,{href:"/leaderboard",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function OH(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:o}=Jr();st();const[l,c]=m.useState(null),u=t();return o&&o.toLowerCase().includes("session")?a.jsx(aR,{}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6 space-y-6",children:[u.upcoming7Days>0&&a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[a.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),a.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:a.jsx(ZN,{className:"h-5 w-5"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:["Weekly Focus",a.jsxs(Ir,{variant:"secondary",className:"bg-amber-200/60 dark:bg-amber-800/40 text-amber-900 dark:text-amber-100 border-0 text-xs font-bold",children:[u.upcoming7Days," ",u.upcoming7Days===1?"task":"tasks"]})]}),a.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["You have"," ",a.jsxs("span",{className:"font-bold text-amber-900 dark:text-amber-100",children:[u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),a.jsx(Ei,{href:"/timeline",children:a.jsxs(fe,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:border-amber-400 dark:hover:border-amber-600 shadow-sm",children:["View Timeline",a.jsx(SO,{className:"ml-1.5 h-3.5 w-3.5"})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Pd,{title:"Due in 3 Days",value:u.upcoming3Days,icon:XN,variant:u.upcoming3Days>3?"warning":"default"}),a.jsx(Pd,{title:"Due in 7 Days",value:u.upcoming7Days,icon:Cs}),a.jsx(Pd,{title:"Overdue",value:u.overdue,icon:xs,variant:u.overdue>0?"danger":"default"}),a.jsx(Pd,{title:"Total Active",value:u.totalActive,icon:Ha}),a.jsx(MH,{courses:i,assignments:r}),a.jsx(PH,{courses:i}),a.jsx(jH,{}),a.jsx(RH,{})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsx(DH,{data:u.weeklyWorkload}),a.jsxs(Pe,{children:[a.jsx(et,{className:"pb-2",children:a.jsx(nt,{className:"text-sm font-medium",children:"Next Actions"})}),a.jsx(He,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>a.jsx(MB,{assignment:h,onClick:()=>c(h)},h.id)):a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[a.jsx(Ha,{className:"h-8 w-8 mb-2"}),a.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),a.jsx($0,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function LH(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s,reauthRequired:i}=Jr();st();const[o,l]=m.useState(null),[c,u]=m.useState("grid"),h=km(),f=t.find(b=>b.id===o),v=e.filter(b=>b.courseId===o).flatMap(b=>b.materials?b.materials.flatMap(x=>{let _=[];if(x.driveFile){const w=x.driveFile.driveFile;let y=w.thumbnailUrl||w.iconUrl||null;!y&&w.id&&(y=`https://drive.google.com/thumbnail?id=${w.id}&sz=w800`),_.push({id:w.id,title:w.title,link:w.alternateLink,thumbnail:y,type:"driveFile"})}return _}):[]).filter(b=>!!b.title);return n&&t.length===0?a.jsx(VH,{}):i?a.jsx("div",{className:"h-full flex items-center justify-center p-4",children:a.jsx(aR,{})}):a.jsxs("div",{className:"flex h-full overflow-hidden bg-background",children:[a.jsxs("div",{className:$("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&o?"hidden":"flex"),children:[a.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:a.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(b=>a.jsxs("button",{onClick:()=>l(b.id),className:$("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",o===b.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[a.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",o===b.id?"bg-primary-foreground/20":"bg-muted"),children:a.jsx(lb,{className:$("h-4 w-4",o===b.id?"text-primary-foreground":"text-muted-foreground")})}),a.jsxs("div",{className:"truncate flex-1",children:[a.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:b.name}),a.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-medium",o===b.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:b.section||"No Section"})]}),a.jsx(kO,{className:$("h-4 w-4 transition-transform",o===b.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},b.id))})]}),a.jsxs("div",{className:$("flex-1 overflow-y-auto bg-background",h&&!o?"hidden":"flex flex-col"),children:[h&&o&&a.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[a.jsx(Uf,{className:"h-4 w-4"}),"Back to Courses"]})}),o?a.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[a.jsxs("div",{className:"space-y-1 max-w-full",children:[a.jsx(Ir,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),a.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:f==null?void 0:f.name}),a.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(f==null?void 0:f.descriptionHeading)||"Curated academic materials and notes."})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),a.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[v.length," Documents"]})]}),a.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:a.jsx(JN,{className:"h-4 w-4"})}),a.jsx(fe,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:a.jsx(FO,{className:"h-4 w-4"})})]})]})]}),v.length>0?c==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:v.map((b,x)=>{var P;const _=((P=b.title)==null?void 0:P.toLowerCase())||"",w=_.endsWith(".pdf"),y=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",I="FILE";return w?(S="bg-red-100 text-red-600",I="PDF DOCUMENT"):y?(S="bg-orange-100 text-orange-600",I="PRESENTATION"):(S="bg-blue-100 text-blue-600",I="DOCUMENT"),a.jsxs(Pe,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[a.jsx(et,{className:"p-3 border-b border-border space-y-0 pb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",S),children:a.jsx(yo,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:b.title}),a.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:I})]})]})}),a.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[b.thumbnail&&a.jsx("img",{src:b.thumbnail.includes("s220")?b.thumbnail.replace("s220","s800"):b.thumbnail,alt:b.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:D=>{var E;console.log("Thumbnail failed to load:",b.thumbnail),D.currentTarget.style.display="none";const N=(E=D.currentTarget.parentElement)==null?void 0:E.querySelector(".fallback-viewer");N&&(N.classList.remove("hidden"),N.classList.add("block"))}}),a.jsx("div",{className:$("fallback-viewer absolute inset-0 w-full h-full",b.thumbnail?"hidden":"block"),children:a.jsx(FH,{type:w?"pdf":y?"ppt":"doc"})}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:a.jsx(fe,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:a.jsxs("a",{href:b.link,target:"_blank",rel:"noopener noreferrer",children:[a.jsx(ny,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${b.id}-${x}`)})}):a.jsx("div",{className:"space-y-2 pb-20",children:v.map((b,x)=>{var P;const _=((P=b.title)==null?void 0:P.toLowerCase())||"",w=_.endsWith(".pdf"),y=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",I="File";return w?(S="bg-red-100 text-red-600",I="PDF Document"):y?(S="bg-orange-100 text-orange-600",I="Presentation"):(S="bg-blue-100 text-blue-600",I="Document"),a.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[b.thumbnail?a.jsx("img",{src:b.thumbnail.includes("s220")?b.thumbnail.replace("s220","s400"):b.thumbnail,alt:b.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:D=>{D.currentTarget.style.display="none";const N=D.currentTarget.nextElementSibling;N&&N.classList.remove("hidden")}}):null,a.jsx("div",{className:$("absolute inset-0 flex items-center justify-center",b.thumbnail?"hidden":"flex",S),children:a.jsx(yo,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:b.title}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[I,"  Read Only"]})]}),a.jsx(fe,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:a.jsxs("a",{href:b.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),a.jsx(ny,{className:"h-4 w-4"})]})})]},`${b.id}-${x}`)})}):a.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[a.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:a.jsx(lb,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[a.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:a.jsx(yo,{className:"h-10 w-10 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})}function VH(){return a.jsxs("div",{className:"flex h-full overflow-hidden",children:[a.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[a.jsx(sn,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>a.jsx(sn,{className:"h-16 w-full rounded-xl"},t))]}),a.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[a.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(sn,{className:"h-4 w-20"}),a.jsx(sn,{className:"h-10 w-80"}),a.jsx(sn,{className:"h-4 w-64"})]}),a.jsx(sn,{className:"h-10 w-32 rounded-lg"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>a.jsx(sn,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function FH({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return a.jsxs("div",{className:$("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[a.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[a.jsxs("div",{className:"flex gap-2 mb-1",children:[a.jsx("div",{className:$("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:a.jsx(yo,{className:"h-6 w-6"})}),a.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[a.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),a.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&a.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),a.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:a.jsx(yo,{className:"h-40 w-40"})})]})}function zH({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"consistency",label:"Consistency & Streaks"},{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),a.jsx("div",{className:"space-y-8",children:s.map(o=>{const l=kH.map(c=>oi[c]).filter(c=>c.category===o.id);return l.length===0?null:a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:o.label}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);return a.jsxs("div",{className:$("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[a.jsx("div",{className:$("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?$(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:a.jsx(c.icon,{className:$("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:$("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&a.jsx(sy,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),a.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&o.id==="consistency"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="5-day-consistent"?h=5:c.id==="10-day-consistent"?h=10:c.id==="30-day-consistent"&&(h=30),h>0){const f=Number(e)||1,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Days"]})]})]})}return null})()}),!u&&o.id==="productivity"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="10-submissions"?h=10:c.id==="25-submissions"?h=25:c.id==="50-submissions"&&(h=50),h>0){const f=Number(n)||0,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Submissions"]})]})]})}return null})()}),!u&&o.id==="reliability"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:h,attended:f}=r||{total:0,attended:0};let p=0,v=0;if(c.id==="perfect-week"?(p=7,v=100):c.id==="attendance-champion"&&(p=30,v=90),p>0){const b=h>0?f/h*100:0,x=Math.min(h/p*100,100),_=Math.min(b/v*100,100),w=Math.min((x+_)/2,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${w}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(w),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h," days "," ",Math.round(b),"% attended"]})]})]})}return null})()})]}),u&&a.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},o.id)})})}var W0="Switch",[UH,KW]=Nr(W0),[$H,BH]=UH(W0),lR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,v]=m.useState(null),b=Be(e,S=>v(S)),x=m.useRef(!1),_=p?h||!!p.closest("form"):!0,[w=!1,y]=Si({prop:s,defaultProp:i,onChange:u});return a.jsxs($H,{scope:n,checked:w,disabled:l,children:[a.jsx(xe.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":dR(w),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:b,onClick:pe(t.onClick,S=>{y(I=>!I),_&&(x.current=S.isPropagationStopped(),x.current||S.stopPropagation())})}),_&&a.jsx(HH,{control:p,bubbles:!x.current,name:r,value:c,checked:w,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});lR.displayName=W0;var cR="SwitchThumb",uR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=BH(cR,n);return a.jsx(xe.span,{"data-state":dR(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});uR.displayName=cR;var HH=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),o=Ej(n),l=IC(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[o,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function dR(t){return t?"checked":"unchecked"}var hR=lR,WH=uR;const En=m.forwardRef(({className:t,...e},n)=>a.jsx(hR,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(WH,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));En.displayName=hR.displayName;var qH="Label",fR=m.forwardRef((t,e)=>a.jsx(xe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));fR.displayName=qH;var mR=fR;const GH=pu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),yr=m.forwardRef(({className:t,...e},n)=>a.jsx(mR,{ref:n,className:$(GH(),t),...e}));yr.displayName=mR.displayName;var sg="rovingFocusGroup.onEntryFocus",KH={bubbles:!1,cancelable:!0},Vm="RovingFocusGroup",[Ky,pR,QH]=Kv(Vm),[YH,gR]=Nr(Vm,[QH]),[XH,JH]=YH(Vm),yR=m.forwardRef((t,e)=>a.jsx(Ky.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Ky.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(ZH,{...t,ref:e})})}));yR.displayName=Vm;var ZH=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),v=Be(e,p),b=B0(i),[x=null,_]=Si({prop:o,defaultProp:l,onChange:c}),[w,y]=m.useState(!1),S=ln(u),I=pR(n),P=m.useRef(!1),[D,N]=m.useState(0);return m.useEffect(()=>{const E=p.current;if(E)return E.addEventListener(sg,S),()=>E.removeEventListener(sg,S)},[S]),a.jsx(XH,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:x,onItemFocus:m.useCallback(E=>_(E),[_]),onItemShiftTab:m.useCallback(()=>y(!0),[]),onFocusableItemAdd:m.useCallback(()=>N(E=>E+1),[]),onFocusableItemRemove:m.useCallback(()=>N(E=>E-1),[]),children:a.jsx(xe.div,{tabIndex:w||D===0?-1:0,"data-orientation":r,...f,ref:v,style:{outline:"none",...t.style},onMouseDown:pe(t.onMouseDown,()=>{P.current=!0}),onFocus:pe(t.onFocus,E=>{const C=!P.current;if(E.target===E.currentTarget&&C&&!w){const k=new CustomEvent(sg,KH);if(E.currentTarget.dispatchEvent(k),!k.defaultPrevented){const R=I().filter(Z=>Z.focusable),M=R.find(Z=>Z.active),A=R.find(Z=>Z.id===x),ie=[M,A,...R].filter(Boolean).map(Z=>Z.ref.current);wR(ie,h)}}P.current=!1}),onBlur:pe(t.onBlur,()=>y(!1))})})}),vR="RovingFocusGroupItem",xR=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,l=fs(),c=i||l,u=JH(vR,n),h=u.currentTabStopId===c,f=pR(n),{onFocusableItemAdd:p,onFocusableItemRemove:v}=u;return m.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),a.jsx(Ky.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:a.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:pe(t.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:pe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:pe(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const x=nW(b,u.orientation,u.dir);if(x!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let w=f().filter(y=>y.focusable).map(y=>y.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const y=w.indexOf(b.currentTarget);w=u.loop?rW(w,y+1):w.slice(y+1)}setTimeout(()=>wR(w))}})})})});xR.displayName=vR;var eW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function tW(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function nW(t,e,n){const r=tW(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return eW[r]}function wR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function rW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var sW=yR,iW=xR,q0="Tabs",[oW,QW]=Nr(q0,[gR]),bR=gR(),[aW,G0]=oW(q0),_R=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=B0(l),[f,p]=Si({prop:r,onChange:s,defaultProp:i});return a.jsx(aW,{scope:n,baseId:fs(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(xe.div,{dir:h,"data-orientation":o,...u,ref:e})})});_R.displayName=q0;var ER="TabsList",SR=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=G0(ER,n),o=bR(n);return a.jsx(sW,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(xe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});SR.displayName=ER;var TR="TabsTrigger",NR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=G0(TR,n),l=bR(n),c=kR(o.baseId,r),u=AR(o.baseId,r),h=r===o.value;return a.jsx(iW,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(xe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:pe(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:pe(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:pe(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});NR.displayName=TR;var CR="TabsContent",IR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=G0(CR,n),c=kR(l.baseId,r),u=AR(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(zi,{present:s||h,children:({present:p})=>a.jsx(xe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});IR.displayName=CR;function kR(t,e){return`${t}-trigger-${e}`}function AR(t,e){return`${t}-content-${e}`}var lW=_R,jR=SR,RR=NR,PR=IR;const cW=lW,DR=m.forwardRef(({className:t,...e},n)=>a.jsx(jR,{ref:n,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));DR.displayName=jR.displayName;const ah=m.forwardRef(({className:t,...e},n)=>a.jsx(RR,{ref:n,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));ah.displayName=RR.displayName;const lh=m.forwardRef(({className:t,...e},n)=>a.jsx(PR,{ref:n,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));lh.displayName=PR.displayName;function uW(){const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function dW(){const{user:t,requestCalendarPermissions:e}=st(),[n,r]=m.useState(!1),[s,i]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!t)return;const u=As(ze(Le,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const o=async()=>{r(!0);try{await e()&&await Ut(ze(Le,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await Ut(ze(Le,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(f=>({...f,[u]:h}));try{await Ut(ze(Le,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Pe,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(Cs,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&a.jsx(Ir,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),a.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):a.jsx(fe,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?a.jsx(To,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&a.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[a.jsx("div",{className:"h-px w-full bg-border mb-6"}),a.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",a.jsxs("div",{className:"grid gap-3 max-w-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),a.jsx(En,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),a.jsx(En,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Wa,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(Pe,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(ex,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),a.jsx("div",{className:"shrink-0",children:a.jsx(Ei,{href:"/settings/notifications",children:a.jsx(fe,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function hW(){var ie,Z;const{user:t,signOut:e}=st(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i,courses:o}=Jr(),{isInstallable:l,isInstalled:c,promptInstall:u}=uW(),{theme:h,setTheme:f}=u0(),[p,v]=m.useState(!0),[b,x]=m.useState("auto"),[_,w]=m.useState(!1),[y,S]=m.useState([]),[I,P]=m.useState(0),[D,N]=m.useState(0),[E,C]=m.useState(),[k,R]=m.useState("general");m.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("tab");L&&["general","badges","integrations"].includes(L)&&R(L)},[]),m.useEffect(()=>{if(!t)return;const X=As(ze(Le,"leaderboards","all-courses","students",t.uid),L=>{var W;if(L.exists()){const z=L.data();S(z.badges||[]),P(z.loginStreak||0),N(((W=z.processedAssignmentIds)==null?void 0:W.length)||0)}else S([]),P(0),N(0)});return()=>X()},[t]),m.useEffect(()=>{if(!o||o.length===0)return;let X=0,L=0;o.forEach(W=>{if(W.attendanceData&&typeof W.attendanceData=="object"){const z=Object.values(W.attendanceData);X+=z.length,L+=z.filter(U=>typeof U=="string"?U.toLowerCase()==="present":U===!0||U===1).length}}),console.log("Attendance Stats Calculated:",{totalClasses:X,attendedClasses:L}),X>0&&C({total:X,attended:L})},[o]),m.useEffect(()=>{if(!t||k!=="badges")return;(async()=>{var te;const L=ze(Le,"leaderboards","all-courses","students",t.uid),W=await _r(L);if(!W.exists())return;const z=W.data(),U=new Set(z.badges||[]);let J=!1;const Y=z.loginStreak||0;Y>=5&&!U.has("5-day-consistent")&&(U.add("5-day-consistent"),J=!0),Y>=10&&!U.has("10-day-consistent")&&(U.add("10-day-consistent"),J=!0),Y>=30&&!U.has("30-day-consistent")&&(U.add("30-day-consistent"),J=!0);const Q=((te=z.processedAssignmentIds)==null?void 0:te.length)||0;Q>=10&&!U.has("10-submissions")&&(U.add("10-submissions"),J=!0),Q>=25&&!U.has("25-submissions")&&(U.add("25-submissions"),J=!0),Q>=50&&!U.has("50-submissions")&&(U.add("50-submissions"),J=!0),J&&await Ut(L,{badges:Array.from(U)},{merge:!0})})()},[t,k]);const M=((ie=t==null?void 0:t.displayName)==null?void 0:ie.split(" ").map(X=>X[0]).join("").toUpperCase())||((Z=t==null?void 0:t.email)==null?void 0:Z[0].toUpperCase())||"U",A=()=>n?n.toLocaleString():"Never",H=async()=>{w(!0);try{await u()}catch(X){console.error("Install failed:",X)}finally{w(!1)}};return a.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),a.jsxs(cW,{value:k,onValueChange:R,className:"w-full",children:[a.jsxs(DR,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[a.jsx(ah,{value:"general",children:"General"}),a.jsx(ah,{value:"badges",children:"Badges"}),a.jsx(ah,{value:"integrations",children:"Integrations"})]}),a.jsxs(lh,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[a.jsxs(Pe,{children:[a.jsxs(et,{children:[a.jsx(nt,{className:"text-base",children:"Connected Account"}),a.jsx(gn,{children:"Your Google account linked to this app"})]}),a.jsxs(He,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(is,{className:"h-12 w-12",children:[a.jsx(os,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(as,{children:M})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Dh,{className:"h-3.5 w-3.5"}),"Connected"]})]}),a.jsx(ur,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",A()]})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:X=>{X.preventDefault(),s().catch(L=>{console.error("Sync failed:",L)})},disabled:r,"data-testid":"button-sync-settings",children:[a.jsx(Wa,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),a.jsxs(Pe,{children:[a.jsxs(et,{children:[a.jsx(nt,{className:"text-base",children:"Sync Settings"}),a.jsx(gn,{children:"Configure how your data syncs with Google Classroom"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(yr,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),a.jsx(En,{id:"background-sync",checked:p,onCheckedChange:v,"data-testid":"switch-background-sync"})]})})]}),a.jsxs(Pe,{children:[a.jsxs(et,{children:[a.jsx(nt,{className:"text-base",children:"Theme"}),a.jsx(gn,{children:"Choose your preferred color theme"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(yr,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:h==="light"?"default":"outline",size:"sm",onClick:()=>f("light"),className:"flex items-center gap-2",children:[a.jsx(nx,{className:"h-4 w-4"}),"Light"]}),a.jsxs(fe,{variant:h==="dark"?"default":"outline",size:"sm",onClick:()=>f("dark"),className:"flex items-center gap-2",children:[a.jsx($f,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),a.jsxs(Pe,{className:"border-primary/20",children:[a.jsxs(et,{children:[a.jsxs(nt,{className:"text-base flex items-center gap-2",children:[a.jsx(ab,{className:"h-4 w-4"}),"Install App"]}),a.jsx(gn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),a.jsx(He,{className:"space-y-4",children:c?a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[a.jsx(Dh,{className:"h-5 w-5 text-emerald-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),a.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):l?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[a.jsx(HO,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),a.jsxs(fe,{onClick:H,disabled:_,className:"w-full",size:"lg","data-testid":"button-install-app",children:[a.jsx(ab,{className:"h-4 w-4 mr-2"}),_?"Installing...":"Install App"]}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[a.jsx($c,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),a.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),a.jsxs(Pe,{children:[a.jsxs(et,{children:[a.jsx(nt,{className:"text-base",children:"Preferences"}),a.jsx(gn,{children:"Customize your experience"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(yr,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),a.jsxs(yf,{value:b,onValueChange:x,children:[a.jsx(nu,{className:"w-[180px]","data-testid":"select-timezone",children:a.jsx(vf,{})}),a.jsxs(ru,{children:[a.jsx(St,{value:"auto",children:"Auto-detect"}),a.jsx(St,{value:"America/New_York",children:"Eastern Time"}),a.jsx(St,{value:"America/Chicago",children:"Central Time"}),a.jsx(St,{value:"America/Denver",children:"Mountain Time"}),a.jsx(St,{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx(St,{value:"Europe/London",children:"London"}),a.jsx(St,{value:"Europe/Paris",children:"Paris"}),a.jsx(St,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),a.jsxs(Pe,{children:[a.jsxs(et,{children:[a.jsxs(nt,{className:"text-base flex items-center gap-2",children:[a.jsx(Uc,{className:"h-4 w-4"}),"Account Actions"]}),a.jsx(gn,{children:"Manage your session"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),a.jsxs(IA,{children:[a.jsx(kA,{asChild:!0,children:a.jsxs(fe,{variant:"outline",size:"sm","data-testid":"button-signout",children:[a.jsx(Uc,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),a.jsxs(E0,{children:[a.jsxs(S0,{children:[a.jsx(N0,{children:"Are you absolutely sure?"}),a.jsx(C0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(T0,{children:[a.jsx(k0,{children:"Cancel"}),a.jsx(I0,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})})]})]}),a.jsx(lh,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsxs(Pe,{children:[a.jsxs(et,{children:[a.jsxs(nt,{className:"text-base flex items-center gap-2",children:[a.jsx(eC,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),a.jsx(gn,{children:"Track your progress and unlock rewards by staying consistent."})]}),a.jsx(He,{children:a.jsx(zH,{earnedBadges:y,currentStreak:I,submissionCount:D,attendanceStats:E})})]})}),a.jsx(lh,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsx(dW,{})})]})]})}function fW(){const{user:t,requestGmailPermissions:e,accessToken:n}=st(),{toast:r}=Lo(),[s,i]=m.useState(!1),[o,l]=m.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{async function b(){if(t)try{const x=ze(Le,"users",t.uid,"settings","notifications"),_=await _r(x);if(_.exists()){const w=_.data();i(w.enabled??!1),l(w.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(x){console.error("Failed to load settings from Firestore",x)}finally{f(!1)}}b()},[t]),m.useEffect(()=>{async function b(){if(!(!t||h))try{const _=ze(Le,"users",t.uid,"settings","notifications");await Ut(_,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(_){console.error("Failed to save settings",_)}}const x=setTimeout(b,1e3);return()=>clearTimeout(x)},[s,o,t,h]);const p=async()=>{u(!0);try{await e()?(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."})):r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(b){console.error(b),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},v=b=>{l(x=>({...x,[b]:!x[b]}))};return a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Ei,{href:"/settings",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"rounded-full",children:a.jsx(Uf,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(et,{className:"pb-4",children:[a.jsxs(nt,{className:"flex items-center gap-2 text-lg",children:[a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:a.jsx(ex,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),a.jsxs(gn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),a.jsx(ur,{}),a.jsxs(He,{className:"pt-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(yr,{className:"text-base font-medium",children:"Assignment due reminder"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),a.jsx(En,{checked:o.dueReminder,onCheckedChange:()=>v("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(ur,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(yr,{className:"text-base font-medium",children:"Missed submission alert"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),a.jsx(En,{checked:o.missedSubmission,onCheckedChange:()=>v("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(ur,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(yr,{className:"text-base font-medium",children:"Heavy workload warning"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),a.jsx(En,{checked:o.workloadWarning,onCheckedChange:()=>v("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),a.jsxs(z0,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[a.jsx(Ha,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:"Academic alerts are active."})]}),a.jsx(fe,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[a.jsx($c,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),a.jsxs(fe,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&a.jsx(To,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function mW(){const[t,e]=Of(),{user:n,requestCalendarPermissions:r}=st(),{toast:s}=Lo(),[i,o]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!n)return;const b=As(ze(Le,"users",n.uid,"settings","calendar"),x=>{x.exists()&&h(x.data()),o(!1)});return()=>b()},[n]);const f=async()=>{c(!0);try{await r()?(await Ut(ze(Le,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(b){console.error(b),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await Ut(ze(Le,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(b){console.error(b)}},v=async(b,x)=>{h(_=>({..._,[b]:x}));try{await Ut(ze(Le,"users",n.uid,"settings","calendar"),{[b]:x},{merge:!0})}catch(_){console.error(_)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(To,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:a.jsx(IO,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(Pe,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(et,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:a.jsx(Cs,{className:"h-6 w-6"})}),a.jsx(nt,{className:"text-xl",children:"Google Calendar"}),u.enabled&&a.jsx(Ir,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),a.jsx(gn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?a.jsx(fe,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(fe,{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?a.jsx(To,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&a.jsxs(He,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(ur,{className:"mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),a.jsx(En,{checked:u.syncAssignments,onCheckedChange:b=>v("syncAssignments",b)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),a.jsx(En,{checked:u.syncExams,onCheckedChange:b=>v("syncExams",b)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),a.jsx(En,{checked:u.syncPersonal,onCheckedChange:b=>v("syncPersonal",b)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[a.jsx(Wa,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(pW,{})]})]})}function pW(){const{user:t,requestGmailPermissions:e}=st(),{toast:n}=Lo(),[r,s]=m.useState(!1),[i,o]=m.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});m.useEffect(()=>{if(!t)return;const h=As(ze(Le,"users",t.uid,"settings","notifications"),f=>{f.exists()&&o(f.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await Ut(ze(Le,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await Ut(ze(Le,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{o(p=>({...p,[h]:f}));try{await Ut(ze(Le,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(p){console.error(p)}};return a.jsxs(Pe,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(et,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[a.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),a.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),a.jsx(nt,{className:"text-xl",children:"Email Notifications"}),i.enabled&&a.jsx(Ir,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),a.jsx(gn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?a.jsx(fe,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(fe,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?a.jsx(To,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&a.jsxs(He,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(ur,{className:"mb-6"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),a.jsx(En,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),a.jsx(En,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}function gW(){var N,E,C,k,R,M;const{user:t,signOut:e}=st(),{courses:n,assignments:r,isLoading:s}=Jr(),[i,o]=m.useState("class"),[l,c]=m.useState([]),[u,h]=m.useState(!1),[f,p]=m.useState(!0),[v,b]=m.useState(!0);m.useEffect(()=>{h(!0);const A=Array.from(new Set(["all-courses",...n.map(X=>X.id)])),H=[],ie=new Map,Z=()=>{const X=[],L=t!=null&&t.email?t.email.split("@")[1]:null,W=n.map(U=>U.id),z=new Set(r.map(U=>U.id));ie.forEach(U=>{const J=U.email||"";let Y=U.emailDomain||"";!Y&&J.includes("@")&&(Y=J.split("@")[1]);const Q=U.enrolledCourseIds||[],te=U.processedAssignmentIds||[],V=L&&Y&&L===Y,B=W.some(se=>Q.includes(se)),ae=!Y&&te.some(se=>z.has(se));let re=!1;i==="college"?(re=!!V,(U.id===(t==null?void 0:t.uid)||V)&&console.log(`[College Filter] Student: ${U.displayName}, Domain: ${Y}, User Domain: ${L}, Match: ${V}`)):re=V&&B||ae,re&&X.push(U)}),X.sort((U,J)=>J.totalXP-U.totalXP),c(X),h(!1)};return A.forEach(X=>{const L=Zx(Le,"leaderboards",X,"students"),W=a0(L,l0("totalXP","desc"),_2(50)),z=As(W,U=>{U.forEach(J=>{const Y=J.data(),Q={id:J.id,displayName:Y.displayName||Y.name||"Anonymous",photoUrl:Y.photoUrl||Y.avatar||"",totalXP:Y.totalXP||Y.xp||0,processedAssignmentIds:Y.processedAssignmentIds||Y.completedTasks||[],email:Y.email||"",emailDomain:Y.emailDomain||(Y.email?Y.email.split("@")[1]:""),enrolledCourseIds:Y.enrolledCourseIds||Y.subjects||[],badges:Y.badges||[]},te=ie.get(J.id);(!te||Q.totalXP>=te.totalXP)&&ie.set(J.id,Q)}),Z()});H.push(z)}),()=>{H.forEach(X=>X())}},[i,t,n,r]);const x=i==="class"?"My Class":"My College",_=l.find(A=>A.id===(t==null?void 0:t.uid));_!=null&&_.totalXP;const w=!!_,y=l.filter(A=>A.totalXP>0),S=l.filter(A=>A.totalXP===0),I=l.length>0&&y.length===0,P=[...S].sort((A,H)=>{const ie=Z=>Z?typeof Z.toMillis=="function"?Z.toMillis():typeof Z=="number"?Z:Z instanceof Date?Z.getTime():typeof Z=="string"?new Date(Z).getTime():0:0;return ie(A.lastSyncedAt)-ie(H.lastSyncedAt)}),D=[...y,...P];return a.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),a.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[x," Leaderboard"]})]}),a.jsx("div",{className:"w-full sm:w-[200px]",children:a.jsxs(yf,{value:i,onValueChange:A=>o(A),children:[a.jsx(nu,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:a.jsx(vf,{placeholder:"Select View"})}),a.jsxs(ru,{children:[a.jsx(St,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),a.jsx(St,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[f&&i==="class"&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>p(!1),children:a.jsx(No,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:a.jsx(MO,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),a.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[a.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Submit"," ",a.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),i==="college"&&v&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>b(!1),children:a.jsx(No,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:a.jsx($c,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),a.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[a.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",a.jsx(sC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),a.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",a.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[a.jsx($c,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!w&&!u?a.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(To,{className:"h-6 w-6 text-primary animate-spin"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Syncing Your Progress"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Your leaderboard data is automatically syncing. Complete some assignments to start earning XP!"})]})]})}):null,u&&l.length===0?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(A=>a.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},A))}):l.length===0?a.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:a.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):I?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 flex items-start gap-3",children:[a.jsx(ZN,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Be the first to climb the leaderboard!"}),a.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Submit your first assignment to earn 100 XP and claim the #1 spot. The competition starts now!"})]})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:D.map((A,H)=>{var Z,X;const ie=A.id===(t==null?void 0:t.uid);return a.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200",ie?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30"),children:[a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(is,{className:$("h-10 w-10 border flex-shrink-0",ie?"border-primary/20":"border-border"),children:[a.jsx(os,{src:A.photoUrl}),a.jsx(as,{className:"text-xs bg-muted text-muted-foreground",children:(X=(Z=A.displayName)==null?void 0:Z[0])==null?void 0:X.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("span",{className:$("text-sm font-medium truncate",ie?"text-primary":"text-foreground"),children:[A.displayName,ie&&a.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(You)"})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready to start"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"0 XP"})})]},A.id)})})]}):a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[D.length>0&&a.jsxs("div",{className:$("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",f?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[a.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:D[1]&&D[1].totalXP>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(is,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[a.jsx(os,{src:D[1].photoUrl}),a.jsx(as,{className:"text-lg bg-zinc-100 text-zinc-500",children:(E=(N=D[1].displayName)==null?void 0:N[0])==null?void 0:E.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:D[1].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[D[1].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(ec,{badges:D[1].badges||[],limit:2,size:"sm"})})]})]}):y.length===1?a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Submit 1 assignment to claim 2nd place!"})]}):a.jsx("div",{className:"w-full"})}),a.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:a.jsx(RO,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),a.jsxs(is,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[a.jsx(os,{src:D[0].photoUrl}),a.jsx(as,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(k=(C=D[0].displayName)==null?void 0:C[0])==null?void 0:k.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),a.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:D[0].displayName}),a.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[D[0].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:a.jsx(ec,{badges:D[0].badges||[],limit:3,size:"sm"})})]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:D[2]&&D[2].totalXP>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(is,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[a.jsx(os,{src:D[2].photoUrl}),a.jsx(as,{className:"text-lg bg-amber-50 text-amber-700",children:(M=(R=D[2].displayName)==null?void 0:R[0])==null?void 0:M.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:D[2].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[D[2].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(ec,{badges:D[2].badges||[],limit:2,size:"sm"})})]})]}):y.length>=1?a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Spot open for 3rd place!"})]}):a.jsx("div",{className:"w-full"})})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:D.slice(Math.min(3,y.length)).map((A,H)=>{var X,L;const ie=A.id===(t==null?void 0:t.uid),Z=Math.min(3,y.length)+H+1;return a.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",ie?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[a.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:a.jsx("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:A.totalXP>0?`#${Z}`:"-"})}),a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(is,{className:$("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",ie?"border-primary/20":"border-border"),children:[a.jsx(os,{src:A.photoUrl}),a.jsx(as,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(L=(X=A.displayName)==null?void 0:X[0])==null?void 0:L.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsxs("span",{className:$("text-xs sm:text-sm font-medium truncate",ie?"text-primary":"text-foreground"),children:[A.displayName," ",ie&&a.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),a.jsx(ec,{badges:A.badges||[],limit:3,size:"md",className:"scale-100"})]}),a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[A.processedAssignmentIds.length," ",a.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),a.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[a.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:A.totalXP.toLocaleString()}),a.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},A.id)})})]})]})})]})}function yW(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const IE=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function vW(){const{courses:t}=Jr(),{accessToken:e,user:n}=st();Lo();const[r,s]=m.useState(""),[i,o]=m.useState({}),[l,c]=m.useState(!1),[u,h]=m.useState(null);m.useState("");const f=m.useMemo(()=>yW(),[]);m.useEffect(()=>{if(!t||!n)return;(async()=>{const D=await Promise.all(t.map(async E=>{var k;if(((k=i[E.id])==null?void 0:k.state)==="loaded")return i[E.id];const C=await Hn.getCourseConfig(E.id);return C?C.isVisible?(p(E.id,C.sheetUrl),{courseId:E.id,state:"loading"}):{courseId:E.id,state:"hidden"}:{courseId:E.id,state:"no-config"}})),N={};D.forEach(E=>{N[E.courseId]=E}),o(E=>({...E,...N}))})()},[t,n]),m.useEffect(()=>{t.length>0&&!r&&s(t[0].id)},[t,r]);const p=async(P,D)=>{if(!e||!(n!=null&&n.email))return;const N=Hn.extractSheetId(D);if(!N){o(k=>({...k,[P]:{courseId:P,state:"error",error:"Invalid configuration"}}));return}const E=await Hn.getCourseConfig(P),C=(E==null?void 0:E.emailColumn)||"A";try{const k=await Hn.fetchAttendanceFromSheet(N,e,n.email,C);o(R=>({...R,[P]:{courseId:P,state:"loaded",data:k}}))}catch(k){console.error(k),o(R=>({...R,[P]:{courseId:P,state:"error",error:k.message||"Failed to load"}}))}},v=async P=>{P==null||P.stopPropagation(),c(!0);const D=Object.values(i).filter(N=>N.state==="loaded"||N.state==="error"||N.state==="loading").map(async N=>{const E=await Hn.getCourseConfig(N.courseId);return E?p(N.courseId,E.sheetUrl):Promise.resolve()});await Promise.allSettled(D),c(!1)},b=Object.values(i).filter(P=>P.state==="loaded"&&P.data),x=b.reduce((P,D)=>{var N;return P+(((N=D.data)==null?void 0:N.stats.attendedClasses)||0)},0),_=b.reduce((P,D)=>{var N;return P+(((N=D.data)==null?void 0:N.stats.totalClasses)||0)},0),w=IE(x,_),y=i[r],S=t.find(P=>P.id===r),I=y==null?void 0:y.data;return m.useEffect(()=>{if(!n||_<5)return;const D=setTimeout(async()=>{const N=[],E=x,C=_,k=C>0?E/C:0;if(C>=10&&k===1&&N.push("perfect-week"),C>=30&&k>=.95&&N.push("attendance-champion"),N.length>0)try{const R=ze(Le,"leaderboards","all-courses","students",n.uid);await N2(R,{badges:k2(...N)})}catch(R){console.debug("Could not award attendance badges:",R)}},3e3);return()=>clearTimeout(D)},[n,_,x]),a.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[a.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[a.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),a.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),a.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",f]})]}),a.jsxs(fe,{variant:"ghost",size:"sm",onClick:v,className:$("text-muted-foreground h-8 shrink-0",l&&"opacity-70"),children:[a.jsx(Mh,{className:$("h-3.5 w-3.5 sm:mr-2",l&&"animate-spin")}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh Data"})]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[a.jsx("section",{children:b.length>0?a.jsx(Pe,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:a.jsx(He,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[a.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),a.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),a.jsx(Ir,{variant:w.status==="safe"?"outline":"destructive",className:$("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",w.color),children:w.status==="safe"?"Safe Status":"Attention Needed"})]}),a.jsxs("div",{className:"flex items-baseline gap-3",children:[a.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[w.percentage,"%"]}),a.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",b.length," active courses"]})]})]})})}):a.jsx(Pe,{className:"border-border shadow-sm bg-card",children:a.jsxs(He,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[a.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:a.jsx(zc,{className:"h-8 w-8 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2 max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),a.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",a.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[a.jsx(xs,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[a.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(P=>{var k,R;const D=i[P.id],N=(D==null?void 0:D.state)||"loading",E=D!=null&&D.data?IE(D.data.stats.attendedClasses,D.data.stats.totalClasses):null,C=r===P.id;return a.jsx(Pe,{className:$("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",C&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>s(P.id),children:a.jsxs(He,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs(Xf,{children:[a.jsx(Jf,{asChild:!0,children:a.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:P.name})}),a.jsx(vu,{children:a.jsx("p",{children:P.name})})]}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:P.section||"No Section"})]}),N==="loaded"&&E&&a.jsxs("span",{className:$("text-lg font-bold tabular-nums",E.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[E.percentage,"%"]}),N==="hidden"&&a.jsx(ry,{className:"h-5 w-5 text-muted-foreground/50"}),N==="locked"&&a.jsx(sy,{className:"h-5 w-5 text-amber-500/80"}),N==="error"&&a.jsx($c,{className:"h-5 w-5 text-destructive/80"})]}),a.jsxs("div",{className:"mt-auto",children:[N==="loaded"&&E&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[a.jsxs("span",{children:[(k=D.data)==null?void 0:k.stats.attendedClasses,"/",(R=D.data)==null?void 0:R.stats.totalClasses," classes"]}),a.jsx("span",{className:E.status==="safe"?"text-emerald-500":"text-red-500",children:E.status==="safe"?"On Track":"Low Attendance"})]}),a.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:a.jsx("div",{className:$("h-full rounded-full transition-all duration-500",E.progressColor),style:{width:`${E.percentage}%`}})})]}),N==="locked"&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),a.jsxs(fe,{size:"sm",variant:"secondary",className:"w-full",onClick:M=>{M.stopPropagation(),h(P.id)},children:[a.jsx(OO,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),N==="hidden"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),N==="no-config"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),N==="error"&&a.jsx("p",{className:"text-xs text-destructive",children:D==null?void 0:D.error}),N==="loading"&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Mh,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},P.id)})}),a.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx(zc,{className:"h-4 w-4"})," History"]}),a.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(S==null?void 0:S.section)||(S==null?void 0:S.name.slice(0,3).toUpperCase())})]}),a.jsx(Pe,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:I?a.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:a.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:I.history.map((P,D)=>{const N=P.status==="Present",E=D===0,C=D===5;return a.jsxs("div",{className:"group",children:[E&&a.jsx("div",{className:"ml-5 mb-3 mt-1",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),C&&a.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),a.jsxs("div",{className:"relative pl-5 select-none",children:[a.jsx("div",{className:$("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",N?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),D!==I.history.length-1&&a.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),a.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[a.jsx("div",{className:$("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",N?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:P.status}),a.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:P.date})]})})]})]},D)})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(y==null?void 0:y.state)==="locked"&&a.jsxs(a.Fragment,{children:[a.jsx(sy,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(y==null?void 0:y.state)==="hidden"&&a.jsxs(a.Fragment,{children:[a.jsx(ry,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((y==null?void 0:y.state)==="error"||(y==null?void 0:y.state)==="no-config")&&a.jsxs(a.Fragment,{children:[a.jsx(xs,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}function xW(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(Pe,{className:"w-full max-w-md mx-4",children:a.jsxs(He,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(xs,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function MR(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}const wW=864e5;function Qy(t){const e=MR(t);return e.setHours(0,0,0,0),e}function kE(t){const e=MR(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function bW(t,e){const n=Qy(t),r=Qy(e),s=+n-kE(n),i=+r-kE(r);return Math.round((s-i)/wW)}function _W(){const{user:t}=st();return m.useEffect(()=>{if(!t)return;(async()=>{try{const n=ze(Le,"leaderboards","all-courses","students",t.uid),r=await _r(n),s=Qy(new Date).getTime();let i=0,o=0,l=[];if(r.exists()){const f=r.data();i=f.loginStreak||0,o=f.lastLoginStreakDate?f.lastLoginStreakDate:0,l=f.badges||[]}if(o){const f=bW(s,o);if(f===0)return;f===1?i+=1:i=1}else i=1;const c=[...l];let u=!1;i>=5&&!c.includes("5-day-consistent")&&(c.push("5-day-consistent"),u=!0),i>=10&&!c.includes("10-day-consistent")&&(c.push("10-day-consistent"),u=!0),i>=30&&!c.includes("30-day-consistent")&&(c.push("30-day-consistent"),u=!0);const h={loginStreak:i,lastLoginStreakDate:s};u&&(h.badges=c),await Ut(n,h,{merge:!0}),console.debug("Streak updated to:",i)}catch(n){console.error("Failed to update streak:",n)}})()},[t]),null}const EW=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function K0({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=m.useState(10),[i,o]=m.useState(0),l=n&&n.length>0?n:EW;return m.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const f=Math.random()*15;return Math.min(h+f,90)})},400),u=setInterval(()=>{o(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),a.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?a.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),a.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),a.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),a.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),a.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:a.jsx(To,{className:"h-7 w-7 text-primary animate-spin"})}),a.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:a.jsx(sC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Student Sphere Is Ready"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),a.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(GN,{className:"h-3 w-3"})," Optimizing"]}),a.jsxs("span",{children:[Math.round(r),"%"]})]})]}),a.jsxs("div",{className:"relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),a.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[a.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:a.jsx(nC,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{className:"space-y-1 pt-0.5",children:[a.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const SW=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function TW({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,v;const{user:s,signOut:i}=st(),{theme:o,toggleTheme:l}=u0(),c=km(),u=[{id:"dashboard",label:"Dashboard",icon:LO},{id:"courses",label:"Courses",icon:Jv},{id:"settings",label:"Settings",icon:rC}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(b=>b[0]).join("").toUpperCase())||((v=s==null?void 0:s.email)==null?void 0:v[0].toUpperCase())||"U",f=()=>a.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),a.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&a.jsx("button",{className:"ml-auto",onClick:r,children:a.jsx(No,{className:"w-5 h-5 text-muted-foreground"})})]}),a.jsx("div",{className:"p-4 border-b border-border shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(is,{className:"h-8 w-8",children:[a.jsx(os,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(as,{className:"text-xs",children:h})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(b=>a.jsxs("button",{onClick:()=>{e(b.id),c&&r()},className:$("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===b.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[a.jsx(b.icon,{className:"h-4 w-4"}),b.label]},b.id))}),a.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(nx,{className:"w-4 h-4 mr-3"}):a.jsx($f,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(fe,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[a.jsx(Uc,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:a.jsx(f,{})}),c&&n&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function NW({courses:t}){const[e,n]=m.useState(0),[r,s]=m.useState(0);return m.useEffect(()=>{(async()=>{let o=0,l=0;(await Promise.all(t.map(u=>Hn.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?o++:l++)}),n(o),s(l)})()},[t]),a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(nt,{className:"text-sm font-medium",children:"Total Courses"}),a.jsx(Jv,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(He,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(nt,{className:"text-sm font-medium",children:"Attendance Visible"}),a.jsx(PO,{className:"h-4 w-4 text-emerald-500"})]}),a.jsx(He,{children:a.jsx("div",{className:"text-2xl font-bold",children:e})})]}),a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(et,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(nt,{className:"text-sm font-medium",children:"Attendance Hidden"}),a.jsx(ry,{className:"h-4 w-4 text-amber-500"})]}),a.jsx(He,{children:a.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function CW({courses:t,onRefresh:e,isLoading:n}){const[r,s]=m.useState(null);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[a.jsx(Mh,{className:$("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),a.jsxs("div",{className:"grid gap-6",children:[t.map(i=>a.jsxs(Pe,{className:"overflow-hidden border-border shadow-sm",children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),a.jsx(fe,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&a.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:a.jsx(IW,{courseId:i.id})})]},i.id)),t.length===0&&a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx("p",{children:"No active courses found where you are a teacher."}),a.jsx(fe,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function IW({courseId:t}){const{toast:e}=Lo(),[n,r]=m.useState(!1),[s,i]=m.useState(""),[o,l]=m.useState("A"),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{let v=!0;return(async()=>{f(!0);const x=await Hn.getCourseConfig(t);v&&x&&(r(x.isVisible),i(x.sheetUrl),l(x.emailColumn||"A")),v&&f(!1)})(),()=>{v=!1}},[t]);const p=async()=>{if(!Hn.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await Hn.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:o.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?a.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[a.jsx(Mh,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):a.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ir,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),a.jsx(En,{checked:n,onCheckedChange:r})]})]}),a.jsxs("div",{className:"grid gap-4 max-w-xl",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(yr,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),a.jsx(af,{id:`sheet-${t}`,value:s,onChange:v=>i(v.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(yr,{htmlFor:`email-col-${t}`,children:"Email Column"}),a.jsx(af,{id:`email-col-${t}`,value:o,onChange:v=>l(v.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:a.jsx(fe,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?a.jsxs(a.Fragment,{children:[a.jsx(YN,{className:"w-4 h-4 mr-2"}),"Saved"]}):a.jsxs(a.Fragment,{children:[a.jsx(tx,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function kW(){return a.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),a.jsxs(Pe,{children:[a.jsxs(et,{children:[a.jsx(nt,{children:"Notifications"}),a.jsx(gn,{children:"Configure how you receive alerts."})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(TO,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(yr,{htmlFor:"email-notif",children:"Email Summaries"})]}),a.jsx(En,{id:"email-notif",defaultChecked:!0})]})})]}),a.jsxs(Pe,{children:[a.jsxs(et,{children:[a.jsx(nt,{children:"Display"}),a.jsx(gn,{children:"Customize your dashboard appearance."})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($f,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(yr,{children:"Dark Mode"})]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function AW(){const{accessToken:t}=st(),[e,n]=m.useState("dashboard"),[r,s]=m.useState([]),[i,o]=m.useState(!0),[l,c]=m.useState(!1);async function u(){if(t)try{o(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(f){console.error("Failed to fetch courses",f)}finally{setTimeout(()=>o(!1),1500)}}m.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?a.jsx(K0,{message:"Preparing Teacher Workspace...",tips:SW}):a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(TW,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),a.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[a.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[a.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:a.jsx(tC,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),a.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&a.jsx(NW,{courses:r}),e==="courses"&&a.jsx(CW,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&a.jsx(kW,{})]})]})]})}function jW(){const{signOut:t,signInWithGoogle:e}=st();return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:a.jsxs(Pe,{className:"max-w-md w-full border-border shadow-lg",children:[a.jsxs(et,{className:"text-center space-y-2",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:a.jsx(jO,{className:"w-6 h-6 text-muted-foreground"})}),a.jsx(nt,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),a.jsx(gn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),a.jsxs(He,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),a.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(KN,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Jv,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(GN,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Cs,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:a.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),a.jsxs(z0,{className:"flex flex-col gap-2",children:[a.jsx(fe,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),a.jsxs(fe,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[a.jsx(Uc,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function RW(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(fe,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx(Uf,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),a.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),a.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Courses:"})," To display your active classes."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),a.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),a.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),a.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),a.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function PW(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(fe,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx(Uf,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),a.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),a.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Track attendance"})," and academic performance"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),a.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),a.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),a.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),a.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),a.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),a.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),a.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),a.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),a.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),a.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),a.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),a.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),a.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),a.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),a.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"The Service will be uninterrupted or error-free"}),a.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),a.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),a.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),a.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Violates these Terms of Service"}),a.jsx("li",{children:"Is harmful to other users or the Service"}),a.jsx("li",{children:"Exposes us to legal liability"})]}),a.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),a.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),a.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),a.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}const DW=()=>"/";function MW(){const[t,e]=m.useState(!1),{isLoading:n}=Jr(),r=DW();return n?a.jsx(K0,{message:"Setting up your workspace..."}):a.jsx(cN,{base:r,children:a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(k7,{mobileOpen:t,onMobileClose:()=>e(!1)}),a.jsx(_W,{}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[a.jsx(A7,{onMobileMenuClick:()=>e(!0)}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:a.jsxs(eM,{children:[a.jsx(tr,{path:"/pipeline",component:KB}),a.jsx(tr,{path:"/",children:()=>{const[,s]=Of();return m.useEffect(()=>{s("/dashboard")},[s]),null}}),a.jsx(tr,{path:"/leaderboard",component:gW}),a.jsx(tr,{path:"/timeline",component:IH}),a.jsx(tr,{path:"/dashboard",component:OH}),a.jsx(tr,{path:"/notes",component:LH}),a.jsx(tr,{path:"/attendance",component:vW}),a.jsx(tr,{path:"/settings",component:hW}),a.jsx(tr,{path:"/settings/notifications",component:fW}),a.jsx(tr,{path:"/settings/integrations",component:mW}),a.jsx(tr,{component:xW})]})})]})]})})}function OW(){if(window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy"))return a.jsx(RW,{});if(window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service"))return a.jsx(PW,{});const{user:t,loading:e,role:n}=st();return e?a.jsx(K0,{message:"Authenticating..."}):t?n==="teacher"?a.jsx(AW,{}):n==="no_access"?a.jsx(jW,{}):a.jsx(o8,{children:a.jsx(MW,{})}):a.jsx(z7,{})}function LW(){return a.jsx(SM,{client:CM,children:a.jsx(XU,{children:a.jsx(YU,{children:a.jsxs(Yf,{children:[a.jsx(A5,{}),a.jsx(OW,{})]})})})})}JT(document.getElementById("root")).render(a.jsx(LW,{}));
