var _b=t=>{throw TypeError(t)};var Ep=(t,e,n)=>e.has(t)||_b("Cannot "+n);var K=(t,e,n)=>(Ep(t,e,"read from private field"),n?n.call(t):e.get(t)),Ve=(t,e,n)=>e.has(t)?_b("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Se=(t,e,n,r)=>(Ep(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gt=(t,e,n)=>(Ep(t,e,"access private method"),n);var Nd=(t,e,n,r)=>({set _(s){Se(t,e,s,n)},get _(){return K(t,e,r)}});function sD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function MS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var OS={exports:{}},Hf={},LS={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cu=Symbol.for("react.element"),iD=Symbol.for("react.portal"),oD=Symbol.for("react.fragment"),aD=Symbol.for("react.strict_mode"),lD=Symbol.for("react.profiler"),cD=Symbol.for("react.provider"),uD=Symbol.for("react.context"),dD=Symbol.for("react.forward_ref"),hD=Symbol.for("react.suspense"),fD=Symbol.for("react.memo"),mD=Symbol.for("react.lazy"),Nb=Symbol.iterator;function pD(t){return t===null||typeof t!="object"?null:(t=Nb&&t[Nb]||t["@@iterator"],typeof t=="function"?t:null)}var VS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FS=Object.assign,zS={};function wl(t,e,n){this.props=t,this.context=e,this.refs=zS,this.updater=n||VS}wl.prototype.isReactComponent={};wl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};wl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function US(){}US.prototype=wl.prototype;function My(t,e,n){this.props=t,this.context=e,this.refs=zS,this.updater=n||VS}var Oy=My.prototype=new US;Oy.constructor=My;FS(Oy,wl.prototype);Oy.isPureReactComponent=!0;var Sb=Array.isArray,$S=Object.prototype.hasOwnProperty,Ly={current:null},BS={key:!0,ref:!0,__self:!0,__source:!0};function WS(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)$S.call(e,r)&&!BS.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Cu,type:t,key:i,ref:a,props:s,_owner:Ly.current}}function gD(t,e){return{$$typeof:Cu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cu}function xD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Eb=/\/+/g;function Tp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xD(""+t.key):e.toString(36)}function oh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Cu:case iD:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Tp(a,0):r,Sb(s)?(n="",t!=null&&(n=t.replace(Eb,"$&/")+"/"),oh(s,e,n,"",function(u){return u})):s!=null&&(Vy(s)&&(s=gD(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Eb,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Sb(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Tp(i,l);a+=oh(i,e,n,c,s)}else if(c=pD(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Tp(i,l++),a+=oh(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Sd(t,e,n){if(t==null)return t;var r=[],s=0;return oh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function yD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hn={current:null},ah={transition:null},vD={ReactCurrentDispatcher:hn,ReactCurrentBatchConfig:ah,ReactCurrentOwner:Ly};function HS(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Sd,forEach:function(t,e,n){Sd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Sd(t,function(){e++}),e},toArray:function(t){return Sd(t,function(e){return e})||[]},only:function(t){if(!Vy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=wl;Ce.Fragment=oD;Ce.Profiler=lD;Ce.PureComponent=My;Ce.StrictMode=aD;Ce.Suspense=hD;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vD;Ce.act=HS;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=FS({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Ly.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)$S.call(e,c)&&!BS.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Cu,type:t.type,key:s,ref:i,props:r,_owner:a}};Ce.createContext=function(t){return t={$$typeof:uD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cD,_context:t},t.Consumer=t};Ce.createElement=WS;Ce.createFactory=function(t){var e=WS.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:dD,render:t}};Ce.isValidElement=Vy;Ce.lazy=function(t){return{$$typeof:mD,_payload:{_status:-1,_result:t},_init:yD}};Ce.memo=function(t,e){return{$$typeof:fD,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=ah.transition;ah.transition={};try{t()}finally{ah.transition=e}};Ce.unstable_act=HS;Ce.useCallback=function(t,e){return hn.current.useCallback(t,e)};Ce.useContext=function(t){return hn.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return hn.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return hn.current.useEffect(t,e)};Ce.useId=function(){return hn.current.useId()};Ce.useImperativeHandle=function(t,e,n){return hn.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return hn.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return hn.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return hn.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return hn.current.useReducer(t,e,n)};Ce.useRef=function(t){return hn.current.useRef(t)};Ce.useState=function(t){return hn.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return hn.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return hn.current.useTransition()};Ce.version="18.3.1";LS.exports=Ce;var m=LS.exports;const ze=MS(m),qS=sD({__proto__:null,default:ze},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wD=m,bD=Symbol.for("react.element"),_D=Symbol.for("react.fragment"),ND=Object.prototype.hasOwnProperty,SD=wD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ED={key:!0,ref:!0,__self:!0,__source:!0};function GS(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)ND.call(e,r)&&!ED.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:bD,type:t,key:i,ref:a,props:s,_owner:SD.current}}Hf.Fragment=_D;Hf.jsx=GS;Hf.jsxs=GS;OS.exports=Hf;var o=OS.exports,KS={exports:{}},Gn={},QS={exports:{}},XS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,z){var G=L.length;L.push(z);e:for(;0<G;){var $=G-1>>>1,W=L[$];if(0<s(W,z))L[$]=z,L[G]=W,G=$;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var z=L[0],G=L.pop();if(G!==z){L[0]=G;e:for(var $=0,W=L.length,J=W>>>1;$<J;){var re=2*($+1)-1,te=L[re],se=re+1,O=L[se];if(0>s(te,G))se<W&&0>s(O,te)?(L[$]=O,L[se]=G,$=se):(L[$]=te,L[re]=G,$=re);else if(se<W&&0>s(O,G))L[$]=O,L[se]=G,$=se;else break e}}return z}function s(L,z){var G=L.sortIndex-z.sortIndex;return G!==0?G:L.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,f=null,p=3,g=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(L){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=L)r(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=n(u)}}function k(L){if(x=!1,N(L),!v)if(n(c)!==null)v=!0,ne(R);else{var z=n(u);z!==null&&ee(k,z.startTime-L)}}function R(L,z){v=!1,x&&(x=!1,_(C),C=-1),g=!0;var G=p;try{for(N(z),f=n(c);f!==null&&(!(f.expirationTime>z)||L&&!A());){var $=f.callback;if(typeof $=="function"){f.callback=null,p=f.priorityLevel;var W=$(f.expirationTime<=z);z=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(c)&&r(c),N(z)}else r(c);f=n(c)}if(f!==null)var J=!0;else{var re=n(u);re!==null&&ee(k,re.startTime-z),J=!1}return J}finally{f=null,p=G,g=!1}}var M=!1,S=null,C=-1,T=5,j=-1;function A(){return!(t.unstable_now()-j<T)}function D(){if(S!==null){var L=t.unstable_now();j=L;var z=!0;try{z=S(!0,L)}finally{z?P():(M=!1,S=null)}}else M=!1}var P;if(typeof w=="function")P=function(){w(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Q=B.port2;B.port1.onmessage=D,P=function(){Q.postMessage(null)}}else P=function(){b(D,0)};function ne(L){S=L,M||(M=!0,P())}function ee(L,z){C=b(function(){L(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,ne(R))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var G=p;p=z;try{return L()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,z){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=p;p=L;try{return z()}finally{p=G}},t.unstable_scheduleCallback=function(L,z,G){var $=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?$+G:$):G=$,L){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=G+W,L={id:h++,callback:z,priorityLevel:L,startTime:G,expirationTime:W,sortIndex:-1},G>$?(L.sortIndex=G,e(u,L),n(c)===null&&L===n(u)&&(x?(_(C),C=-1):x=!0,ee(k,G-$))):(L.sortIndex=W,e(c,L),v||g||(v=!0,ne(R))),L},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(L){var z=p;return function(){var G=p;p=z;try{return L.apply(this,arguments)}finally{p=G}}}})(XS);QS.exports=XS;var TD=QS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CD=m,Hn=TD;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YS=new Set,Bc={};function Xo(t,e){Ja(t,e),Ja(t+"Capture",e)}function Ja(t,e){for(Bc[t]=e,t=0;t<e.length;t++)YS.add(e[t])}var Cs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rg=Object.prototype.hasOwnProperty,jD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tb={},Cb={};function kD(t){return Rg.call(Cb,t)?!0:Rg.call(Tb,t)?!1:jD.test(t)?Cb[t]=!0:(Tb[t]=!0,!1)}function AD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ID(t,e,n,r){if(e===null||typeof e>"u"||AD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fy=/[\-:]([a-z])/g;function zy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fy,zy);Ht[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fy,zy);Ht[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fy,zy);Ht[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uy(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ID(e,n,s,r)&&(n=null),r||s===null?kD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zs=CD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ed=Symbol.for("react.element"),ha=Symbol.for("react.portal"),fa=Symbol.for("react.fragment"),$y=Symbol.for("react.strict_mode"),Pg=Symbol.for("react.profiler"),JS=Symbol.for("react.provider"),ZS=Symbol.for("react.context"),By=Symbol.for("react.forward_ref"),Dg=Symbol.for("react.suspense"),Mg=Symbol.for("react.suspense_list"),Wy=Symbol.for("react.memo"),ri=Symbol.for("react.lazy"),eE=Symbol.for("react.offscreen"),jb=Symbol.iterator;function nc(t){return t===null||typeof t!="object"?null:(t=jb&&t[jb]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,Cp;function hc(t){if(Cp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cp=e&&e[1]||""}return`
`+Cp+t}var jp=!1;function kp(t,e){if(!t||jp)return"";jp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{jp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hc(t):""}function RD(t){switch(t.tag){case 5:return hc(t.type);case 16:return hc("Lazy");case 13:return hc("Suspense");case 19:return hc("SuspenseList");case 0:case 2:case 15:return t=kp(t.type,!1),t;case 11:return t=kp(t.type.render,!1),t;case 1:return t=kp(t.type,!0),t;default:return""}}function Og(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fa:return"Fragment";case ha:return"Portal";case Pg:return"Profiler";case $y:return"StrictMode";case Dg:return"Suspense";case Mg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ZS:return(t.displayName||"Context")+".Consumer";case JS:return(t._context.displayName||"Context")+".Provider";case By:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wy:return e=t.displayName||null,e!==null?e:Og(t.type)||"Memo";case ri:e=t._payload,t=t._init;try{return Og(t(e))}catch{}}return null}function PD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Og(e);case 8:return e===$y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function DD(t){var e=tE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Td(t){t._valueTracker||(t._valueTracker=DD(t))}function nE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=tE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Oh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lg(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function kb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function rE(t,e){e=e.checked,e!=null&&Uy(t,"checked",e,!1)}function Vg(t,e){rE(t,e);var n=Mi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fg(t,e.type,Mi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ab(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fg(t,e,n){(e!=="number"||Oh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fc=Array.isArray;function Ta(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function zg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ib(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(fc(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mi(n)}}function sE(t,e){var n=Mi(e.value),r=Mi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function iE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ug(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?iE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cd,oE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cd=Cd||document.createElement("div"),Cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MD=["Webkit","ms","Moz","O"];Object.keys(wc).forEach(function(t){MD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wc[e]=wc[t]})});function aE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wc.hasOwnProperty(t)&&wc[t]?(""+e).trim():e+"px"}function lE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=aE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var OD=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $g(t,e){if(e){if(OD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Bg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wg=null;function Hy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Hg=null,Ca=null,ja=null;function Pb(t){if(t=Au(t)){if(typeof Hg!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Xf(e),Hg(t.stateNode,t.type,e))}}function cE(t){Ca?ja?ja.push(t):ja=[t]:Ca=t}function uE(){if(Ca){var t=Ca,e=ja;if(ja=Ca=null,Pb(t),e)for(t=0;t<e.length;t++)Pb(e[t])}}function dE(t,e){return t(e)}function hE(){}var Ap=!1;function fE(t,e,n){if(Ap)return t(e,n);Ap=!0;try{return dE(t,e,n)}finally{Ap=!1,(Ca!==null||ja!==null)&&(hE(),uE())}}function Hc(t,e){var n=t.stateNode;if(n===null)return null;var r=Xf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var qg=!1;if(Cs)try{var rc={};Object.defineProperty(rc,"passive",{get:function(){qg=!0}}),window.addEventListener("test",rc,rc),window.removeEventListener("test",rc,rc)}catch{qg=!1}function LD(t,e,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var bc=!1,Lh=null,Vh=!1,Gg=null,VD={onError:function(t){bc=!0,Lh=t}};function FD(t,e,n,r,s,i,a,l,c){bc=!1,Lh=null,LD.apply(VD,arguments)}function zD(t,e,n,r,s,i,a,l,c){if(FD.apply(this,arguments),bc){if(bc){var u=Lh;bc=!1,Lh=null}else throw Error(Z(198));Vh||(Vh=!0,Gg=u)}}function Yo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function mE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Db(t){if(Yo(t)!==t)throw Error(Z(188))}function UD(t){var e=t.alternate;if(!e){if(e=Yo(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Db(s),t;if(i===r)return Db(s),e;i=i.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function pE(t){return t=UD(t),t!==null?gE(t):null}function gE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gE(t);if(e!==null)return e;t=t.sibling}return null}var xE=Hn.unstable_scheduleCallback,Mb=Hn.unstable_cancelCallback,$D=Hn.unstable_shouldYield,BD=Hn.unstable_requestPaint,xt=Hn.unstable_now,WD=Hn.unstable_getCurrentPriorityLevel,qy=Hn.unstable_ImmediatePriority,yE=Hn.unstable_UserBlockingPriority,Fh=Hn.unstable_NormalPriority,HD=Hn.unstable_LowPriority,vE=Hn.unstable_IdlePriority,qf=null,Yr=null;function qD(t){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(qf,t,void 0,(t.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:QD,GD=Math.log,KD=Math.LN2;function QD(t){return t>>>=0,t===0?32:31-(GD(t)/KD|0)|0}var jd=64,kd=4194304;function mc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=mc(l):(i&=a,i!==0&&(r=mc(i)))}else a=n&~s,a!==0?r=mc(a):i!==0&&(r=mc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Er(e),s=1<<n,r|=t[n],e&=~s;return r}function XD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Er(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=XD(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Kg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wE(){var t=jd;return jd<<=1,!(jd&4194240)&&(jd=64),t}function Ip(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ju(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Er(e),t[e]=n}function JD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Er(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Gy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Er(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function bE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _E,Ky,NE,SE,EE,Qg=!1,Ad=[],vi=null,wi=null,bi=null,qc=new Map,Gc=new Map,oi=[],ZD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ob(t,e){switch(t){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":wi=null;break;case"mouseover":case"mouseout":bi=null;break;case"pointerover":case"pointerout":qc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gc.delete(e.pointerId)}}function sc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Au(e),e!==null&&Ky(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function e4(t,e,n,r,s){switch(e){case"focusin":return vi=sc(vi,t,e,n,r,s),!0;case"dragenter":return wi=sc(wi,t,e,n,r,s),!0;case"mouseover":return bi=sc(bi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return qc.set(i,sc(qc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Gc.set(i,sc(Gc.get(i)||null,t,e,n,r,s)),!0}return!1}function TE(t){var e=vo(t.target);if(e!==null){var n=Yo(e);if(n!==null){if(e=n.tag,e===13){if(e=mE(n),e!==null){t.blockedOn=e,EE(t.priority,function(){NE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wg=r,n.target.dispatchEvent(r),Wg=null}else return e=Au(n),e!==null&&Ky(e),t.blockedOn=n,!1;e.shift()}return!0}function Lb(t,e,n){lh(t)&&n.delete(e)}function t4(){Qg=!1,vi!==null&&lh(vi)&&(vi=null),wi!==null&&lh(wi)&&(wi=null),bi!==null&&lh(bi)&&(bi=null),qc.forEach(Lb),Gc.forEach(Lb)}function ic(t,e){t.blockedOn===e&&(t.blockedOn=null,Qg||(Qg=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,t4)))}function Kc(t){function e(s){return ic(s,t)}if(0<Ad.length){ic(Ad[0],t);for(var n=1;n<Ad.length;n++){var r=Ad[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vi!==null&&ic(vi,t),wi!==null&&ic(wi,t),bi!==null&&ic(bi,t),qc.forEach(e),Gc.forEach(e),n=0;n<oi.length;n++)r=oi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<oi.length&&(n=oi[0],n.blockedOn===null);)TE(n),n.blockedOn===null&&oi.shift()}var ka=zs.ReactCurrentBatchConfig,Uh=!0;function n4(t,e,n,r){var s=$e,i=ka.transition;ka.transition=null;try{$e=1,Qy(t,e,n,r)}finally{$e=s,ka.transition=i}}function r4(t,e,n,r){var s=$e,i=ka.transition;ka.transition=null;try{$e=4,Qy(t,e,n,r)}finally{$e=s,ka.transition=i}}function Qy(t,e,n,r){if(Uh){var s=Xg(t,e,n,r);if(s===null)Up(t,e,r,$h,n),Ob(t,r);else if(e4(s,t,e,n,r))r.stopPropagation();else if(Ob(t,r),e&4&&-1<ZD.indexOf(t)){for(;s!==null;){var i=Au(s);if(i!==null&&_E(i),i=Xg(t,e,n,r),i===null&&Up(t,e,r,$h,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Up(t,e,r,null,n)}}var $h=null;function Xg(t,e,n,r){if($h=null,t=Hy(r),t=vo(t),t!==null)if(e=Yo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=mE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $h=t,null}function CE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WD()){case qy:return 1;case yE:return 4;case Fh:case HD:return 16;case vE:return 536870912;default:return 16}default:return 16}}var gi=null,Xy=null,ch=null;function jE(){if(ch)return ch;var t,e=Xy,n=e.length,r,s="value"in gi?gi.value:gi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ch=s.slice(t,1<r?1-r:void 0)}function uh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Id(){return!0}function Vb(){return!1}function Kn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Id:Vb,this.isPropagationStopped=Vb,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Id)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Id)},persist:function(){},isPersistent:Id}),e}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yy=Kn(bl),ku=lt({},bl,{view:0,detail:0}),s4=Kn(ku),Rp,Pp,oc,Gf=lt({},ku,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oc&&(oc&&t.type==="mousemove"?(Rp=t.screenX-oc.screenX,Pp=t.screenY-oc.screenY):Pp=Rp=0,oc=t),Rp)},movementY:function(t){return"movementY"in t?t.movementY:Pp}}),Fb=Kn(Gf),i4=lt({},Gf,{dataTransfer:0}),o4=Kn(i4),a4=lt({},ku,{relatedTarget:0}),Dp=Kn(a4),l4=lt({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),c4=Kn(l4),u4=lt({},bl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),d4=Kn(u4),h4=lt({},bl,{data:0}),zb=Kn(h4),f4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function g4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=p4[t])?!!e[t]:!1}function Jy(){return g4}var x4=lt({},ku,{key:function(t){if(t.key){var e=f4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?m4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jy,charCode:function(t){return t.type==="keypress"?uh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),y4=Kn(x4),v4=lt({},Gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ub=Kn(v4),w4=lt({},ku,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jy}),b4=Kn(w4),_4=lt({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),N4=Kn(_4),S4=lt({},Gf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),E4=Kn(S4),T4=[9,13,27,32],Zy=Cs&&"CompositionEvent"in window,_c=null;Cs&&"documentMode"in document&&(_c=document.documentMode);var C4=Cs&&"TextEvent"in window&&!_c,kE=Cs&&(!Zy||_c&&8<_c&&11>=_c),$b=" ",Bb=!1;function AE(t,e){switch(t){case"keyup":return T4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function IE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ma=!1;function j4(t,e){switch(t){case"compositionend":return IE(e);case"keypress":return e.which!==32?null:(Bb=!0,$b);case"textInput":return t=e.data,t===$b&&Bb?null:t;default:return null}}function k4(t,e){if(ma)return t==="compositionend"||!Zy&&AE(t,e)?(t=jE(),ch=Xy=gi=null,ma=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kE&&e.locale!=="ko"?null:e.data;default:return null}}var A4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!A4[t.type]:e==="textarea"}function RE(t,e,n,r){cE(r),e=Bh(e,"onChange"),0<e.length&&(n=new Yy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Nc=null,Qc=null;function I4(t){BE(t,0)}function Kf(t){var e=xa(t);if(nE(e))return t}function R4(t,e){if(t==="change")return e}var PE=!1;if(Cs){var Mp;if(Cs){var Op="oninput"in document;if(!Op){var Hb=document.createElement("div");Hb.setAttribute("oninput","return;"),Op=typeof Hb.oninput=="function"}Mp=Op}else Mp=!1;PE=Mp&&(!document.documentMode||9<document.documentMode)}function qb(){Nc&&(Nc.detachEvent("onpropertychange",DE),Qc=Nc=null)}function DE(t){if(t.propertyName==="value"&&Kf(Qc)){var e=[];RE(e,Qc,t,Hy(t)),fE(I4,e)}}function P4(t,e,n){t==="focusin"?(qb(),Nc=e,Qc=n,Nc.attachEvent("onpropertychange",DE)):t==="focusout"&&qb()}function D4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kf(Qc)}function M4(t,e){if(t==="click")return Kf(e)}function O4(t,e){if(t==="input"||t==="change")return Kf(e)}function L4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ir=typeof Object.is=="function"?Object.is:L4;function Xc(t,e){if(Ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Rg.call(e,s)||!Ir(t[s],e[s]))return!1}return!0}function Gb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kb(t,e){var n=Gb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Gb(n)}}function ME(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ME(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OE(){for(var t=window,e=Oh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Oh(t.document)}return e}function ev(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function V4(t){var e=OE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ME(n.ownerDocument.documentElement,n)){if(r!==null&&ev(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Kb(n,i);var a=Kb(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var F4=Cs&&"documentMode"in document&&11>=document.documentMode,pa=null,Yg=null,Sc=null,Jg=!1;function Qb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jg||pa==null||pa!==Oh(r)||(r=pa,"selectionStart"in r&&ev(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sc&&Xc(Sc,r)||(Sc=r,r=Bh(Yg,"onSelect"),0<r.length&&(e=new Yy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pa)))}function Rd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ga={animationend:Rd("Animation","AnimationEnd"),animationiteration:Rd("Animation","AnimationIteration"),animationstart:Rd("Animation","AnimationStart"),transitionend:Rd("Transition","TransitionEnd")},Lp={},LE={};Cs&&(LE=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function Qf(t){if(Lp[t])return Lp[t];if(!ga[t])return t;var e=ga[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in LE)return Lp[t]=e[n];return t}var VE=Qf("animationend"),FE=Qf("animationiteration"),zE=Qf("animationstart"),UE=Qf("transitionend"),$E=new Map,Xb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xi(t,e){$E.set(t,e),Xo(e,[t])}for(var Vp=0;Vp<Xb.length;Vp++){var Fp=Xb[Vp],z4=Fp.toLowerCase(),U4=Fp[0].toUpperCase()+Fp.slice(1);Xi(z4,"on"+U4)}Xi(VE,"onAnimationEnd");Xi(FE,"onAnimationIteration");Xi(zE,"onAnimationStart");Xi("dblclick","onDoubleClick");Xi("focusin","onFocus");Xi("focusout","onBlur");Xi(UE,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);Xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$4=new Set("cancel close invalid load scroll toggle".split(" ").concat(pc));function Yb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zD(r,e,void 0,t),t.currentTarget=null}function BE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Yb(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Yb(s,l,u),i=c}}}if(Vh)throw t=Gg,Vh=!1,Gg=null,t}function et(t,e){var n=e[rx];n===void 0&&(n=e[rx]=new Set);var r=t+"__bubble";n.has(r)||(WE(e,t,2,!1),n.add(r))}function zp(t,e,n){var r=0;e&&(r|=4),WE(n,t,r,e)}var Pd="_reactListening"+Math.random().toString(36).slice(2);function Yc(t){if(!t[Pd]){t[Pd]=!0,YS.forEach(function(n){n!=="selectionchange"&&($4.has(n)||zp(n,!1,t),zp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pd]||(e[Pd]=!0,zp("selectionchange",!1,e))}}function WE(t,e,n,r){switch(CE(e)){case 1:var s=n4;break;case 4:s=r4;break;default:s=Qy}n=s.bind(null,e,n,t),s=void 0,!qg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Up(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=vo(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}fE(function(){var u=i,h=Hy(n),f=[];e:{var p=$E.get(t);if(p!==void 0){var g=Yy,v=t;switch(t){case"keypress":if(uh(n)===0)break e;case"keydown":case"keyup":g=y4;break;case"focusin":v="focus",g=Dp;break;case"focusout":v="blur",g=Dp;break;case"beforeblur":case"afterblur":g=Dp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Fb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=o4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=b4;break;case VE:case FE:case zE:g=c4;break;case UE:g=N4;break;case"scroll":g=s4;break;case"wheel":g=E4;break;case"copy":case"cut":case"paste":g=d4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Ub}var x=(e&4)!==0,b=!x&&t==="scroll",_=x?p!==null?p+"Capture":null:p;x=[];for(var w=u,N;w!==null;){N=w;var k=N.stateNode;if(N.tag===5&&k!==null&&(N=k,_!==null&&(k=Hc(w,_),k!=null&&x.push(Jc(w,k,N)))),b)break;w=w.return}0<x.length&&(p=new g(p,v,null,n,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Wg&&(v=n.relatedTarget||n.fromElement)&&(vo(v)||v[js]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?vo(v):null,v!==null&&(b=Yo(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(x=Fb,k="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ub,k="onPointerLeave",_="onPointerEnter",w="pointer"),b=g==null?p:xa(g),N=v==null?p:xa(v),p=new x(k,w+"leave",g,n,h),p.target=b,p.relatedTarget=N,k=null,vo(h)===u&&(x=new x(_,w+"enter",v,n,h),x.target=N,x.relatedTarget=b,k=x),b=k,g&&v)t:{for(x=g,_=v,w=0,N=x;N;N=sa(N))w++;for(N=0,k=_;k;k=sa(k))N++;for(;0<w-N;)x=sa(x),w--;for(;0<N-w;)_=sa(_),N--;for(;w--;){if(x===_||_!==null&&x===_.alternate)break t;x=sa(x),_=sa(_)}x=null}else x=null;g!==null&&Jb(f,p,g,x,!1),v!==null&&b!==null&&Jb(f,b,v,x,!0)}}e:{if(p=u?xa(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var R=R4;else if(Wb(p))if(PE)R=O4;else{R=D4;var M=P4}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=M4);if(R&&(R=R(t,u))){RE(f,R,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Fg(p,"number",p.value)}switch(M=u?xa(u):window,t){case"focusin":(Wb(M)||M.contentEditable==="true")&&(pa=M,Yg=u,Sc=null);break;case"focusout":Sc=Yg=pa=null;break;case"mousedown":Jg=!0;break;case"contextmenu":case"mouseup":case"dragend":Jg=!1,Qb(f,n,h);break;case"selectionchange":if(F4)break;case"keydown":case"keyup":Qb(f,n,h)}var S;if(Zy)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ma?AE(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(kE&&n.locale!=="ko"&&(ma||C!=="onCompositionStart"?C==="onCompositionEnd"&&ma&&(S=jE()):(gi=h,Xy="value"in gi?gi.value:gi.textContent,ma=!0)),M=Bh(u,C),0<M.length&&(C=new zb(C,t,null,n,h),f.push({event:C,listeners:M}),S?C.data=S:(S=IE(n),S!==null&&(C.data=S)))),(S=C4?j4(t,n):k4(t,n))&&(u=Bh(u,"onBeforeInput"),0<u.length&&(h=new zb("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=S))}BE(f,e)})}function Jc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Hc(t,n),i!=null&&r.unshift(Jc(t,i,s)),i=Hc(t,e),i!=null&&r.push(Jc(t,i,s))),t=t.return}return r}function sa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jb(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Hc(n,i),c!=null&&a.unshift(Jc(n,c,l))):s||(c=Hc(n,i),c!=null&&a.push(Jc(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var B4=/\r\n?/g,W4=/\u0000|\uFFFD/g;function Zb(t){return(typeof t=="string"?t:""+t).replace(B4,`
`).replace(W4,"")}function Dd(t,e,n){if(e=Zb(e),Zb(t)!==e&&n)throw Error(Z(425))}function Wh(){}var Zg=null,ex=null;function tx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nx=typeof setTimeout=="function"?setTimeout:void 0,H4=typeof clearTimeout=="function"?clearTimeout:void 0,e1=typeof Promise=="function"?Promise:void 0,q4=typeof queueMicrotask=="function"?queueMicrotask:typeof e1<"u"?function(t){return e1.resolve(null).then(t).catch(G4)}:nx;function G4(t){setTimeout(function(){throw t})}function $p(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Kc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Kc(e)}function _i(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function t1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _l=Math.random().toString(36).slice(2),Qr="__reactFiber$"+_l,Zc="__reactProps$"+_l,js="__reactContainer$"+_l,rx="__reactEvents$"+_l,K4="__reactListeners$"+_l,Q4="__reactHandles$"+_l;function vo(t){var e=t[Qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[js]||n[Qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=t1(t);t!==null;){if(n=t[Qr])return n;t=t1(t)}return e}t=n,n=t.parentNode}return null}function Au(t){return t=t[Qr]||t[js],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Xf(t){return t[Zc]||null}var sx=[],ya=-1;function Yi(t){return{current:t}}function tt(t){0>ya||(t.current=sx[ya],sx[ya]=null,ya--)}function Ye(t,e){ya++,sx[ya]=t.current,t.current=e}var Oi={},nn=Yi(Oi),Nn=Yi(!1),Do=Oi;function Za(t,e){var n=t.type.contextTypes;if(!n)return Oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Sn(t){return t=t.childContextTypes,t!=null}function Hh(){tt(Nn),tt(nn)}function n1(t,e,n){if(nn.current!==Oi)throw Error(Z(168));Ye(nn,e),Ye(Nn,n)}function HE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,PD(t)||"Unknown",s));return lt({},n,r)}function qh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oi,Do=nn.current,Ye(nn,t),Ye(Nn,Nn.current),!0}function r1(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=HE(t,e,Do),r.__reactInternalMemoizedMergedChildContext=t,tt(Nn),tt(nn),Ye(nn,t)):tt(Nn),Ye(Nn,n)}var vs=null,Yf=!1,Bp=!1;function qE(t){vs===null?vs=[t]:vs.push(t)}function X4(t){Yf=!0,qE(t)}function Ji(){if(!Bp&&vs!==null){Bp=!0;var t=0,e=$e;try{var n=vs;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vs=null,Yf=!1}catch(s){throw vs!==null&&(vs=vs.slice(t+1)),xE(qy,Ji),s}finally{$e=e,Bp=!1}}return null}var va=[],wa=0,Gh=null,Kh=0,Zn=[],er=0,Mo=null,ws=1,bs="";function go(t,e){va[wa++]=Kh,va[wa++]=Gh,Gh=t,Kh=e}function GE(t,e,n){Zn[er++]=ws,Zn[er++]=bs,Zn[er++]=Mo,Mo=t;var r=ws;t=bs;var s=32-Er(r)-1;r&=~(1<<s),n+=1;var i=32-Er(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,ws=1<<32-Er(e)+s|n<<s|r,bs=i+t}else ws=1<<i|n<<s|r,bs=t}function tv(t){t.return!==null&&(go(t,1),GE(t,1,0))}function nv(t){for(;t===Gh;)Gh=va[--wa],va[wa]=null,Kh=va[--wa],va[wa]=null;for(;t===Mo;)Mo=Zn[--er],Zn[er]=null,bs=Zn[--er],Zn[er]=null,ws=Zn[--er],Zn[er]=null}var Bn=null,zn=null,rt=!1,vr=null;function KE(t,e){var n=nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function s1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bn=t,zn=_i(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bn=t,zn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Mo!==null?{id:ws,overflow:bs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Bn=t,zn=null,!0):!1;default:return!1}}function ix(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ox(t){if(rt){var e=zn;if(e){var n=e;if(!s1(t,e)){if(ix(t))throw Error(Z(418));e=_i(n.nextSibling);var r=Bn;e&&s1(t,e)?KE(r,n):(t.flags=t.flags&-4097|2,rt=!1,Bn=t)}}else{if(ix(t))throw Error(Z(418));t.flags=t.flags&-4097|2,rt=!1,Bn=t}}}function i1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bn=t}function Md(t){if(t!==Bn)return!1;if(!rt)return i1(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tx(t.type,t.memoizedProps)),e&&(e=zn)){if(ix(t))throw QE(),Error(Z(418));for(;e;)KE(t,e),e=_i(e.nextSibling)}if(i1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zn=_i(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zn=null}}else zn=Bn?_i(t.stateNode.nextSibling):null;return!0}function QE(){for(var t=zn;t;)t=_i(t.nextSibling)}function el(){zn=Bn=null,rt=!1}function rv(t){vr===null?vr=[t]:vr.push(t)}var Y4=zs.ReactCurrentBatchConfig;function ac(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Od(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function o1(t){var e=t._init;return e(t._payload)}function XE(t){function e(_,w){if(t){var N=_.deletions;N===null?(_.deletions=[w],_.flags|=16):N.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Ti(_,w),_.index=0,_.sibling=null,_}function i(_,w,N){return _.index=N,t?(N=_.alternate,N!==null?(N=N.index,N<w?(_.flags|=2,w):N):(_.flags|=2,w)):(_.flags|=1048576,w)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,N,k){return w===null||w.tag!==6?(w=Xp(N,_.mode,k),w.return=_,w):(w=s(w,N),w.return=_,w)}function c(_,w,N,k){var R=N.type;return R===fa?h(_,w,N.props.children,k,N.key):w!==null&&(w.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ri&&o1(R)===w.type)?(k=s(w,N.props),k.ref=ac(_,w,N),k.return=_,k):(k=xh(N.type,N.key,N.props,null,_.mode,k),k.ref=ac(_,w,N),k.return=_,k)}function u(_,w,N,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=Yp(N,_.mode,k),w.return=_,w):(w=s(w,N.children||[]),w.return=_,w)}function h(_,w,N,k,R){return w===null||w.tag!==7?(w=ko(N,_.mode,k,R),w.return=_,w):(w=s(w,N),w.return=_,w)}function f(_,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Xp(""+w,_.mode,N),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ed:return N=xh(w.type,w.key,w.props,null,_.mode,N),N.ref=ac(_,null,w),N.return=_,N;case ha:return w=Yp(w,_.mode,N),w.return=_,w;case ri:var k=w._init;return f(_,k(w._payload),N)}if(fc(w)||nc(w))return w=ko(w,_.mode,N,null),w.return=_,w;Od(_,w)}return null}function p(_,w,N,k){var R=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return R!==null?null:l(_,w,""+N,k);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ed:return N.key===R?c(_,w,N,k):null;case ha:return N.key===R?u(_,w,N,k):null;case ri:return R=N._init,p(_,w,R(N._payload),k)}if(fc(N)||nc(N))return R!==null?null:h(_,w,N,k,null);Od(_,N)}return null}function g(_,w,N,k,R){if(typeof k=="string"&&k!==""||typeof k=="number")return _=_.get(N)||null,l(w,_,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ed:return _=_.get(k.key===null?N:k.key)||null,c(w,_,k,R);case ha:return _=_.get(k.key===null?N:k.key)||null,u(w,_,k,R);case ri:var M=k._init;return g(_,w,N,M(k._payload),R)}if(fc(k)||nc(k))return _=_.get(N)||null,h(w,_,k,R,null);Od(w,k)}return null}function v(_,w,N,k){for(var R=null,M=null,S=w,C=w=0,T=null;S!==null&&C<N.length;C++){S.index>C?(T=S,S=null):T=S.sibling;var j=p(_,S,N[C],k);if(j===null){S===null&&(S=T);break}t&&S&&j.alternate===null&&e(_,S),w=i(j,w,C),M===null?R=j:M.sibling=j,M=j,S=T}if(C===N.length)return n(_,S),rt&&go(_,C),R;if(S===null){for(;C<N.length;C++)S=f(_,N[C],k),S!==null&&(w=i(S,w,C),M===null?R=S:M.sibling=S,M=S);return rt&&go(_,C),R}for(S=r(_,S);C<N.length;C++)T=g(S,_,C,N[C],k),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?C:T.key),w=i(T,w,C),M===null?R=T:M.sibling=T,M=T);return t&&S.forEach(function(A){return e(_,A)}),rt&&go(_,C),R}function x(_,w,N,k){var R=nc(N);if(typeof R!="function")throw Error(Z(150));if(N=R.call(N),N==null)throw Error(Z(151));for(var M=R=null,S=w,C=w=0,T=null,j=N.next();S!==null&&!j.done;C++,j=N.next()){S.index>C?(T=S,S=null):T=S.sibling;var A=p(_,S,j.value,k);if(A===null){S===null&&(S=T);break}t&&S&&A.alternate===null&&e(_,S),w=i(A,w,C),M===null?R=A:M.sibling=A,M=A,S=T}if(j.done)return n(_,S),rt&&go(_,C),R;if(S===null){for(;!j.done;C++,j=N.next())j=f(_,j.value,k),j!==null&&(w=i(j,w,C),M===null?R=j:M.sibling=j,M=j);return rt&&go(_,C),R}for(S=r(_,S);!j.done;C++,j=N.next())j=g(S,_,C,j.value,k),j!==null&&(t&&j.alternate!==null&&S.delete(j.key===null?C:j.key),w=i(j,w,C),M===null?R=j:M.sibling=j,M=j);return t&&S.forEach(function(D){return e(_,D)}),rt&&go(_,C),R}function b(_,w,N,k){if(typeof N=="object"&&N!==null&&N.type===fa&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ed:e:{for(var R=N.key,M=w;M!==null;){if(M.key===R){if(R=N.type,R===fa){if(M.tag===7){n(_,M.sibling),w=s(M,N.props.children),w.return=_,_=w;break e}}else if(M.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===ri&&o1(R)===M.type){n(_,M.sibling),w=s(M,N.props),w.ref=ac(_,M,N),w.return=_,_=w;break e}n(_,M);break}else e(_,M);M=M.sibling}N.type===fa?(w=ko(N.props.children,_.mode,k,N.key),w.return=_,_=w):(k=xh(N.type,N.key,N.props,null,_.mode,k),k.ref=ac(_,w,N),k.return=_,_=k)}return a(_);case ha:e:{for(M=N.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){n(_,w.sibling),w=s(w,N.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=Yp(N,_.mode,k),w.return=_,_=w}return a(_);case ri:return M=N._init,b(_,w,M(N._payload),k)}if(fc(N))return v(_,w,N,k);if(nc(N))return x(_,w,N,k);Od(_,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,N),w.return=_,_=w):(n(_,w),w=Xp(N,_.mode,k),w.return=_,_=w),a(_)):n(_,w)}return b}var tl=XE(!0),YE=XE(!1),Qh=Yi(null),Xh=null,ba=null,sv=null;function iv(){sv=ba=Xh=null}function ov(t){var e=Qh.current;tt(Qh),t._currentValue=e}function ax(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Aa(t,e){Xh=t,sv=ba=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(_n=!0),t.firstContext=null)}function or(t){var e=t._currentValue;if(sv!==t)if(t={context:t,memoizedValue:e,next:null},ba===null){if(Xh===null)throw Error(Z(308));ba=t,Xh.dependencies={lanes:0,firstContext:t}}else ba=ba.next=t;return e}var wo=null;function av(t){wo===null?wo=[t]:wo.push(t)}function JE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,av(e)):(n.next=s.next,s.next=n),e.interleaved=n,ks(t,r)}function ks(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var si=!1;function lv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ks(t,n)}return s=r.interleaved,s===null?(e.next=e,av(r)):(e.next=s.next,s.next=e),r.interleaved=e,ks(t,n)}function dh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gy(t,n)}}function a1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yh(t,e,n,r){var s=t.updateQueue;si=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=u=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,x=l;switch(p=e,g=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(g,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(g,f,p):v,p==null)break e;f=lt({},f,p);break e;case 2:si=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Lo|=a,t.lanes=a,t.memoizedState=f}}function l1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var Iu={},Jr=Yi(Iu),eu=Yi(Iu),tu=Yi(Iu);function bo(t){if(t===Iu)throw Error(Z(174));return t}function cv(t,e){switch(Ye(tu,e),Ye(eu,t),Ye(Jr,Iu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ug(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ug(e,t)}tt(Jr),Ye(Jr,e)}function nl(){tt(Jr),tt(eu),tt(tu)}function eT(t){bo(tu.current);var e=bo(Jr.current),n=Ug(e,t.type);e!==n&&(Ye(eu,t),Ye(Jr,n))}function uv(t){eu.current===t&&(tt(Jr),tt(eu))}var it=Yi(0);function Jh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wp=[];function dv(){for(var t=0;t<Wp.length;t++)Wp[t]._workInProgressVersionPrimary=null;Wp.length=0}var hh=zs.ReactCurrentDispatcher,Hp=zs.ReactCurrentBatchConfig,Oo=0,at=null,Ct=null,Dt=null,Zh=!1,Ec=!1,nu=0,J4=0;function Kt(){throw Error(Z(321))}function hv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ir(t[n],e[n]))return!1;return!0}function fv(t,e,n,r,s,i){if(Oo=i,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hh.current=t===null||t.memoizedState===null?n5:r5,t=n(r,s),Ec){i=0;do{if(Ec=!1,nu=0,25<=i)throw Error(Z(301));i+=1,Dt=Ct=null,e.updateQueue=null,hh.current=s5,t=n(r,s)}while(Ec)}if(hh.current=ef,e=Ct!==null&&Ct.next!==null,Oo=0,Dt=Ct=at=null,Zh=!1,e)throw Error(Z(300));return t}function mv(){var t=nu!==0;return nu=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?at.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function ar(){if(Ct===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Dt===null?at.memoizedState:Dt.next;if(e!==null)Dt=e,Ct=t;else{if(t===null)throw Error(Z(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Dt===null?at.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function ru(t,e){return typeof e=="function"?e(t):e}function qp(t){var e=ar(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=Ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var h=u.lane;if((Oo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,at.lanes|=h,Lo|=h}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Ir(r,e.memoizedState)||(_n=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,at.lanes|=i,Lo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gp(t){var e=ar(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ir(i,e.memoizedState)||(_n=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function tT(){}function nT(t,e){var n=at,r=ar(),s=e(),i=!Ir(r.memoizedState,s);if(i&&(r.memoizedState=s,_n=!0),r=r.queue,pv(iT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,su(9,sT.bind(null,n,r,s,e),void 0,null),Lt===null)throw Error(Z(349));Oo&30||rT(n,e,s)}return s}function rT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sT(t,e,n,r){e.value=n,e.getSnapshot=r,oT(e)&&aT(t)}function iT(t,e,n){return n(function(){oT(e)&&aT(t)})}function oT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ir(t,n)}catch{return!0}}function aT(t){var e=ks(t,1);e!==null&&Tr(e,t,1,-1)}function c1(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:t},e.queue=t,t=t.dispatch=t5.bind(null,at,t),[e.memoizedState,t]}function su(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function lT(){return ar().memoizedState}function fh(t,e,n,r){var s=Wr();at.flags|=t,s.memoizedState=su(1|e,n,void 0,r===void 0?null:r)}function Jf(t,e,n,r){var s=ar();r=r===void 0?null:r;var i=void 0;if(Ct!==null){var a=Ct.memoizedState;if(i=a.destroy,r!==null&&hv(r,a.deps)){s.memoizedState=su(e,n,i,r);return}}at.flags|=t,s.memoizedState=su(1|e,n,i,r)}function u1(t,e){return fh(8390656,8,t,e)}function pv(t,e){return Jf(2048,8,t,e)}function cT(t,e){return Jf(4,2,t,e)}function uT(t,e){return Jf(4,4,t,e)}function dT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function hT(t,e,n){return n=n!=null?n.concat([t]):null,Jf(4,4,dT.bind(null,e,t),n)}function gv(){}function fT(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function mT(t,e){var n=ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&hv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pT(t,e,n){return Oo&21?(Ir(n,e)||(n=wE(),at.lanes|=n,Lo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,_n=!0),t.memoizedState=n)}function Z4(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=Hp.transition;Hp.transition={};try{t(!1),e()}finally{$e=n,Hp.transition=r}}function gT(){return ar().memoizedState}function e5(t,e,n){var r=Ei(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xT(t))yT(e,n);else if(n=JE(t,e,n,r),n!==null){var s=un();Tr(n,t,r,s),vT(n,e,r)}}function t5(t,e,n){var r=Ei(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xT(t))yT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ir(l,a)){var c=e.interleaved;c===null?(s.next=s,av(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=JE(t,e,s,r),n!==null&&(s=un(),Tr(n,t,r,s),vT(n,e,r))}}function xT(t){var e=t.alternate;return t===at||e!==null&&e===at}function yT(t,e){Ec=Zh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gy(t,n)}}var ef={readContext:or,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},n5={readContext:or,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:or,useEffect:u1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fh(4194308,4,dT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fh(4194308,4,t,e)},useInsertionEffect:function(t,e){return fh(4,2,t,e)},useMemo:function(t,e){var n=Wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=e5.bind(null,at,t),[r.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:c1,useDebugValue:gv,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=c1(!1),e=t[0];return t=Z4.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=at,s=Wr();if(rt){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Lt===null)throw Error(Z(349));Oo&30||rT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,u1(iT.bind(null,r,i,t),[t]),r.flags|=2048,su(9,sT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wr(),e=Lt.identifierPrefix;if(rt){var n=bs,r=ws;n=(r&~(1<<32-Er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=nu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=J4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},r5={readContext:or,useCallback:fT,useContext:or,useEffect:pv,useImperativeHandle:hT,useInsertionEffect:cT,useLayoutEffect:uT,useMemo:mT,useReducer:qp,useRef:lT,useState:function(){return qp(ru)},useDebugValue:gv,useDeferredValue:function(t){var e=ar();return pT(e,Ct.memoizedState,t)},useTransition:function(){var t=qp(ru)[0],e=ar().memoizedState;return[t,e]},useMutableSource:tT,useSyncExternalStore:nT,useId:gT,unstable_isNewReconciler:!1},s5={readContext:or,useCallback:fT,useContext:or,useEffect:pv,useImperativeHandle:hT,useInsertionEffect:cT,useLayoutEffect:uT,useMemo:mT,useReducer:Gp,useRef:lT,useState:function(){return Gp(ru)},useDebugValue:gv,useDeferredValue:function(t){var e=ar();return Ct===null?e.memoizedState=t:pT(e,Ct.memoizedState,t)},useTransition:function(){var t=Gp(ru)[0],e=ar().memoizedState;return[t,e]},useMutableSource:tT,useSyncExternalStore:nT,useId:gT,unstable_isNewReconciler:!1};function pr(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function lx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zf={isMounted:function(t){return(t=t._reactInternals)?Yo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=un(),s=Ei(t),i=Ss(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(Tr(e,t,s,r),dh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=un(),s=Ei(t),i=Ss(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ni(t,i,s),e!==null&&(Tr(e,t,s,r),dh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),r=Ei(t),s=Ss(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ni(t,s,r),e!==null&&(Tr(e,t,r,n),dh(e,t,r))}};function d1(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Xc(n,r)||!Xc(s,i):!0}function wT(t,e,n){var r=!1,s=Oi,i=e.contextType;return typeof i=="object"&&i!==null?i=or(i):(s=Sn(e)?Do:nn.current,r=e.contextTypes,i=(r=r!=null)?Za(t,s):Oi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function h1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zf.enqueueReplaceState(e,e.state,null)}function cx(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},lv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=or(i):(i=Sn(e)?Do:nn.current,s.context=Za(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(lx(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Zf.enqueueReplaceState(s,s.state,null),Yh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function rl(t,e){try{var n="",r=e;do n+=RD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Kp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ux(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var i5=typeof WeakMap=="function"?WeakMap:Map;function bT(t,e,n){n=Ss(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nf||(nf=!0,wx=r),ux(t,e)},n}function _T(t,e,n){n=Ss(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ux(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ux(t,e),typeof r!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function f1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new i5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=v5.bind(null,t,e,n),e.then(t,t))}function m1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function p1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ss(-1,1),e.tag=2,Ni(n,e,1))),n.lanes|=1),t)}var o5=zs.ReactCurrentOwner,_n=!1;function an(t,e,n,r){e.child=t===null?YE(e,null,n,r):tl(e,t.child,n,r)}function g1(t,e,n,r,s){n=n.render;var i=e.ref;return Aa(e,s),r=fv(t,e,n,r,i,s),n=mv(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,As(t,e,s)):(rt&&n&&tv(e),e.flags|=1,an(t,e,r,s),e.child)}function x1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Sv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,NT(t,e,i,r,s)):(t=xh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Xc,n(a,r)&&t.ref===e.ref)return As(t,e,s)}return e.flags|=1,t=Ti(i,r),t.ref=e.ref,t.return=e,e.child=t}function NT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Xc(i,r)&&t.ref===e.ref)if(_n=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(_n=!0);else return e.lanes=t.lanes,As(t,e,s)}return dx(t,e,n,r,s)}function ST(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Na,On),On|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(Na,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ye(Na,On),On|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ye(Na,On),On|=r;return an(t,e,s,n),e.child}function ET(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dx(t,e,n,r,s){var i=Sn(n)?Do:nn.current;return i=Za(e,i),Aa(e,s),n=fv(t,e,n,r,i,s),r=mv(),t!==null&&!_n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,As(t,e,s)):(rt&&r&&tv(e),e.flags|=1,an(t,e,n,s),e.child)}function y1(t,e,n,r,s){if(Sn(n)){var i=!0;qh(e)}else i=!1;if(Aa(e,s),e.stateNode===null)mh(t,e),wT(e,n,r),cx(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=or(u):(u=Sn(n)?Do:nn.current,u=Za(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&h1(e,a,r,u),si=!1;var p=e.memoizedState;a.state=p,Yh(e,r,a,s),c=e.memoizedState,l!==r||p!==c||Nn.current||si?(typeof h=="function"&&(lx(e,n,h,r),c=e.memoizedState),(l=si||d1(e,n,l,r,p,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,ZE(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:pr(e.type,l),a.props=u,f=e.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=or(c):(c=Sn(n)?Do:nn.current,c=Za(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==c)&&h1(e,a,r,c),si=!1,p=e.memoizedState,a.state=p,Yh(e,r,a,s);var v=e.memoizedState;l!==f||p!==v||Nn.current||si?(typeof g=="function"&&(lx(e,n,g,r),v=e.memoizedState),(u=si||d1(e,n,u,r,p,v,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,v,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),a.props=r,a.state=v,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return hx(t,e,n,r,i,s)}function hx(t,e,n,r,s,i){ET(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&r1(e,n,!1),As(t,e,i);r=e.stateNode,o5.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=tl(e,t.child,null,i),e.child=tl(e,null,l,i)):an(t,e,l,i),e.memoizedState=r.state,s&&r1(e,n,!0),e.child}function TT(t){var e=t.stateNode;e.pendingContext?n1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&n1(t,e.context,!1),cv(t,e.containerInfo)}function v1(t,e,n,r,s){return el(),rv(s),e.flags|=256,an(t,e,n,r),e.child}var fx={dehydrated:null,treeContext:null,retryLane:0};function mx(t){return{baseLanes:t,cachePool:null,transitions:null}}function CT(t,e,n){var r=e.pendingProps,s=it.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ye(it,s&1),t===null)return ox(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=nm(a,r,0,null),t=ko(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mx(n),e.memoizedState=fx,t):xv(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return a5(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ti(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ti(l,i):(i=ko(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?mx(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=fx,r}return i=t.child,t=i.sibling,r=Ti(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xv(t,e){return e=nm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ld(t,e,n,r){return r!==null&&rv(r),tl(e,t.child,null,n),t=xv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function a5(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Kp(Error(Z(422))),Ld(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=nm({mode:"visible",children:r.children},s,0,null),i=ko(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&tl(e,t.child,null,a),e.child.memoizedState=mx(a),e.memoizedState=fx,i);if(!(e.mode&1))return Ld(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Z(419)),r=Kp(i,r,void 0),Ld(t,e,a,r)}if(l=(a&t.childLanes)!==0,_n||l){if(r=Lt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ks(t,s),Tr(r,t,s,-1))}return Nv(),r=Kp(Error(Z(421))),Ld(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=w5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zn=_i(s.nextSibling),Bn=e,rt=!0,vr=null,t!==null&&(Zn[er++]=ws,Zn[er++]=bs,Zn[er++]=Mo,ws=t.id,bs=t.overflow,Mo=e),e=xv(e,r.children),e.flags|=4096,e)}function w1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ax(t.return,e,n)}function Qp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function jT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(an(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&w1(t,n,e);else if(t.tag===19)w1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(it,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Qp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Qp(e,!0,n,null,i);break;case"together":Qp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function As(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Ti(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ti(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function l5(t,e,n){switch(e.tag){case 3:TT(e),el();break;case 5:eT(e);break;case 1:Sn(e.type)&&qh(e);break;case 4:cv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ye(Qh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?CT(t,e,n):(Ye(it,it.current&1),t=As(t,e,n),t!==null?t.sibling:null);Ye(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ye(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,ST(t,e,n)}return As(t,e,n)}var kT,px,AT,IT;kT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};px=function(){};AT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,bo(Jr.current);var i=null;switch(n){case"input":s=Lg(t,s),r=Lg(t,r),i=[];break;case"select":s=lt({},s,{value:void 0}),r=lt({},r,{value:void 0}),i=[];break;case"textarea":s=zg(t,s),r=zg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wh)}$g(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&et("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};IT=function(t,e,n,r){n!==r&&(e.flags|=4)};function lc(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function c5(t,e,n){var r=e.pendingProps;switch(nv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return Sn(e.type)&&Hh(),Qt(e),null;case 3:return r=e.stateNode,nl(),tt(Nn),tt(nn),dv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Md(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,vr!==null&&(Nx(vr),vr=null))),px(t,e),Qt(e),null;case 5:uv(e);var s=bo(tu.current);if(n=e.type,t!==null&&e.stateNode!=null)AT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Qt(e),null}if(t=bo(Jr.current),Md(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qr]=e,r[Zc]=i,t=(e.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(s=0;s<pc.length;s++)et(pc[s],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":kb(r,i),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},et("invalid",r);break;case"textarea":Ib(r,i),et("invalid",r)}$g(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Dd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Dd(r.textContent,l,t),s=["children",""+l]):Bc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&et("scroll",r)}switch(n){case"input":Td(r),Ab(r,i,!0);break;case"textarea":Td(r),Rb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=iE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Qr]=e,t[Zc]=r,kT(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bg(n,r),n){case"dialog":et("cancel",t),et("close",t),s=r;break;case"iframe":case"object":case"embed":et("load",t),s=r;break;case"video":case"audio":for(s=0;s<pc.length;s++)et(pc[s],t);s=r;break;case"source":et("error",t),s=r;break;case"img":case"image":case"link":et("error",t),et("load",t),s=r;break;case"details":et("toggle",t),s=r;break;case"input":kb(t,r),s=Lg(t,r),et("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=lt({},r,{value:void 0}),et("invalid",t);break;case"textarea":Ib(t,r),s=zg(t,r),et("invalid",t);break;default:s=r}$g(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?lE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&oE(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wc(t,c):typeof c=="number"&&Wc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&et("scroll",t):c!=null&&Uy(t,i,c,a))}switch(n){case"input":Td(t),Ab(t,r,!1);break;case"textarea":Td(t),Rb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ta(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)IT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=bo(tu.current),bo(Jr.current),Md(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qr]=e,(i=r.nodeValue!==n)&&(t=Bn,t!==null))switch(t.tag){case 3:Dd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qr]=e,e.stateNode=r}return Qt(e),null;case 13:if(tt(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&zn!==null&&e.mode&1&&!(e.flags&128))QE(),el(),e.flags|=98560,i=!1;else if(i=Md(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[Qr]=e}else el(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),i=!1}else vr!==null&&(Nx(vr),vr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?At===0&&(At=3):Nv())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return nl(),px(t,e),t===null&&Yc(e.stateNode.containerInfo),Qt(e),null;case 10:return ov(e.type._context),Qt(e),null;case 17:return Sn(e.type)&&Hh(),Qt(e),null;case 19:if(tt(it),i=e.memoizedState,i===null)return Qt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)lc(i,!1);else{if(At!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Jh(t),a!==null){for(e.flags|=128,lc(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(it,it.current&1|2),e.child}t=t.sibling}i.tail!==null&&xt()>sl&&(e.flags|=128,r=!0,lc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Jh(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!rt)return Qt(e),null}else 2*xt()-i.renderingStartTime>sl&&n!==1073741824&&(e.flags|=128,r=!0,lc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xt(),e.sibling=null,n=it.current,Ye(it,r?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return _v(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?On&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function u5(t,e){switch(nv(e),e.tag){case 1:return Sn(e.type)&&Hh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return nl(),tt(Nn),tt(nn),dv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return uv(e),null;case 13:if(tt(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));el()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(it),null;case 4:return nl(),null;case 10:return ov(e.type._context),null;case 22:case 23:return _v(),null;case 24:return null;default:return null}}var Vd=!1,en=!1,d5=typeof WeakSet=="function"?WeakSet:Set,fe=null;function _a(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function gx(t,e,n){try{n()}catch(r){ht(t,e,r)}}var b1=!1;function h5(t,e){if(Zg=Uh,t=OE(),ev(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=a),p===i&&++h===r&&(c=a),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ex={focusedElem:t,selectionRange:n},Uh=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,b=v.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:pr(e.type,x),b);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(k){ht(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return v=b1,b1=!1,v}function Tc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&gx(e,n,i)}s=s.next}while(s!==r)}}function em(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RT(t){var e=t.alternate;e!==null&&(t.alternate=null,RT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qr],delete e[Zc],delete e[rx],delete e[K4],delete e[Q4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function PT(t){return t.tag===5||t.tag===3||t.tag===4}function _1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wh));else if(r!==4&&(t=t.child,t!==null))for(yx(t,e,n),t=t.sibling;t!==null;)yx(t,e,n),t=t.sibling}function vx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vx(t,e,n),t=t.sibling;t!==null;)vx(t,e,n),t=t.sibling}var Ut=null,yr=!1;function Xs(t,e,n){for(n=n.child;n!==null;)DT(t,e,n),n=n.sibling}function DT(t,e,n){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(qf,n)}catch{}switch(n.tag){case 5:en||_a(n,e);case 6:var r=Ut,s=yr;Ut=null,Xs(t,e,n),Ut=r,yr=s,Ut!==null&&(yr?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(yr?(t=Ut,n=n.stateNode,t.nodeType===8?$p(t.parentNode,n):t.nodeType===1&&$p(t,n),Kc(t)):$p(Ut,n.stateNode));break;case 4:r=Ut,s=yr,Ut=n.stateNode.containerInfo,yr=!0,Xs(t,e,n),Ut=r,yr=s;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&gx(n,e,a),s=s.next}while(s!==r)}Xs(t,e,n);break;case 1:if(!en&&(_a(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ht(n,e,l)}Xs(t,e,n);break;case 21:Xs(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,Xs(t,e,n),en=r):Xs(t,e,n);break;default:Xs(t,e,n)}}function N1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new d5),e.forEach(function(r){var s=b5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ut=l.stateNode,yr=!1;break e;case 3:Ut=l.stateNode.containerInfo,yr=!0;break e;case 4:Ut=l.stateNode.containerInfo,yr=!0;break e}l=l.return}if(Ut===null)throw Error(Z(160));DT(i,a,s),Ut=null,yr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ht(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MT(e,t),e=e.sibling}function MT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hr(e,t),Br(t),r&4){try{Tc(3,t,t.return),em(3,t)}catch(x){ht(t,t.return,x)}try{Tc(5,t,t.return)}catch(x){ht(t,t.return,x)}}break;case 1:hr(e,t),Br(t),r&512&&n!==null&&_a(n,n.return);break;case 5:if(hr(e,t),Br(t),r&512&&n!==null&&_a(n,n.return),t.flags&32){var s=t.stateNode;try{Wc(s,"")}catch(x){ht(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&rE(s,i),Bg(l,a);var u=Bg(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?lE(s,f):h==="dangerouslySetInnerHTML"?oE(s,f):h==="children"?Wc(s,f):Uy(s,h,f,u)}switch(l){case"input":Vg(s,i);break;case"textarea":sE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ta(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ta(s,!!i.multiple,i.defaultValue,!0):Ta(s,!!i.multiple,i.multiple?[]:"",!1))}s[Zc]=i}catch(x){ht(t,t.return,x)}}break;case 6:if(hr(e,t),Br(t),r&4){if(t.stateNode===null)throw Error(Z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){ht(t,t.return,x)}}break;case 3:if(hr(e,t),Br(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kc(e.containerInfo)}catch(x){ht(t,t.return,x)}break;case 4:hr(e,t),Br(t);break;case 13:hr(e,t),Br(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(wv=xt())),r&4&&N1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(en=(u=en)||h,hr(e,t),en=u):hr(e,t),Br(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(fe=t,h=t.child;h!==null;){for(f=fe=h;fe!==null;){switch(p=fe,g=p.child,p.tag){case 0:case 11:case 14:case 15:Tc(4,p,p.return);break;case 1:_a(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){ht(r,n,x)}}break;case 5:_a(p,p.return);break;case 22:if(p.memoizedState!==null){E1(f);continue}}g!==null?(g.return=p,fe=g):E1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=aE("display",a))}catch(x){ht(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){ht(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:hr(e,t),Br(t),r&4&&N1(t);break;case 21:break;default:hr(e,t),Br(t)}}function Br(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(PT(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wc(s,""),r.flags&=-33);var i=_1(t);vx(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=_1(t);yx(t,l,a);break;default:throw Error(Z(161))}}catch(c){ht(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function f5(t,e,n){fe=t,OT(t)}function OT(t,e,n){for(var r=(t.mode&1)!==0;fe!==null;){var s=fe,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Vd;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||en;l=Vd;var u=en;if(Vd=a,(en=c)&&!u)for(fe=s;fe!==null;)a=fe,c=a.child,a.tag===22&&a.memoizedState!==null?T1(s):c!==null?(c.return=a,fe=c):T1(s);for(;i!==null;)fe=i,OT(i),i=i.sibling;fe=s,Vd=l,en=u}S1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,fe=i):S1(t)}}function S1(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||em(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&l1(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}l1(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Kc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}en||e.flags&512&&xx(e)}catch(p){ht(e,e.return,p)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function E1(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function T1(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{em(4,e)}catch(c){ht(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ht(e,s,c)}}var i=e.return;try{xx(e)}catch(c){ht(e,i,c)}break;case 5:var a=e.return;try{xx(e)}catch(c){ht(e,a,c)}}}catch(c){ht(e,e.return,c)}if(e===t){fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,fe=l;break}fe=e.return}}var m5=Math.ceil,tf=zs.ReactCurrentDispatcher,yv=zs.ReactCurrentOwner,sr=zs.ReactCurrentBatchConfig,Oe=0,Lt=null,vt=null,Bt=0,On=0,Na=Yi(0),At=0,iu=null,Lo=0,tm=0,vv=0,Cc=null,vn=null,wv=0,sl=1/0,ys=null,nf=!1,wx=null,Si=null,Fd=!1,xi=null,rf=0,jc=0,bx=null,ph=-1,gh=0;function un(){return Oe&6?xt():ph!==-1?ph:ph=xt()}function Ei(t){return t.mode&1?Oe&2&&Bt!==0?Bt&-Bt:Y4.transition!==null?(gh===0&&(gh=wE()),gh):(t=$e,t!==0||(t=window.event,t=t===void 0?16:CE(t.type)),t):1}function Tr(t,e,n,r){if(50<jc)throw jc=0,bx=null,Error(Z(185));ju(t,n,r),(!(Oe&2)||t!==Lt)&&(t===Lt&&(!(Oe&2)&&(tm|=n),At===4&&ai(t,Bt)),En(t,r),n===1&&Oe===0&&!(e.mode&1)&&(sl=xt()+500,Yf&&Ji()))}function En(t,e){var n=t.callbackNode;YD(t,e);var r=zh(t,t===Lt?Bt:0);if(r===0)n!==null&&Mb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mb(n),e===1)t.tag===0?X4(C1.bind(null,t)):qE(C1.bind(null,t)),q4(function(){!(Oe&6)&&Ji()}),n=null;else{switch(bE(r)){case 1:n=qy;break;case 4:n=yE;break;case 16:n=Fh;break;case 536870912:n=vE;break;default:n=Fh}n=WT(n,LT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function LT(t,e){if(ph=-1,gh=0,Oe&6)throw Error(Z(327));var n=t.callbackNode;if(Ia()&&t.callbackNode!==n)return null;var r=zh(t,t===Lt?Bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sf(t,r);else{e=r;var s=Oe;Oe|=2;var i=FT();(Lt!==t||Bt!==e)&&(ys=null,sl=xt()+500,jo(t,e));do try{x5();break}catch(l){VT(t,l)}while(!0);iv(),tf.current=i,Oe=s,vt!==null?e=0:(Lt=null,Bt=0,e=At)}if(e!==0){if(e===2&&(s=Kg(t),s!==0&&(r=s,e=_x(t,s))),e===1)throw n=iu,jo(t,0),ai(t,r),En(t,xt()),n;if(e===6)ai(t,r);else{if(s=t.current.alternate,!(r&30)&&!p5(s)&&(e=sf(t,r),e===2&&(i=Kg(t),i!==0&&(r=i,e=_x(t,i))),e===1))throw n=iu,jo(t,0),ai(t,r),En(t,xt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:xo(t,vn,ys);break;case 3:if(ai(t,r),(r&130023424)===r&&(e=wv+500-xt(),10<e)){if(zh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){un(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nx(xo.bind(null,t,vn,ys),e);break}xo(t,vn,ys);break;case 4:if(ai(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Er(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*m5(r/1960))-r,10<r){t.timeoutHandle=nx(xo.bind(null,t,vn,ys),r);break}xo(t,vn,ys);break;case 5:xo(t,vn,ys);break;default:throw Error(Z(329))}}}return En(t,xt()),t.callbackNode===n?LT.bind(null,t):null}function _x(t,e){var n=Cc;return t.current.memoizedState.isDehydrated&&(jo(t,e).flags|=256),t=sf(t,e),t!==2&&(e=vn,vn=n,e!==null&&Nx(e)),t}function Nx(t){vn===null?vn=t:vn.push.apply(vn,t)}function p5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ir(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ai(t,e){for(e&=~vv,e&=~tm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Er(e),r=1<<n;t[n]=-1,e&=~r}}function C1(t){if(Oe&6)throw Error(Z(327));Ia();var e=zh(t,0);if(!(e&1))return En(t,xt()),null;var n=sf(t,e);if(t.tag!==0&&n===2){var r=Kg(t);r!==0&&(e=r,n=_x(t,r))}if(n===1)throw n=iu,jo(t,0),ai(t,e),En(t,xt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xo(t,vn,ys),En(t,xt()),null}function bv(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(sl=xt()+500,Yf&&Ji())}}function Vo(t){xi!==null&&xi.tag===0&&!(Oe&6)&&Ia();var e=Oe;Oe|=1;var n=sr.transition,r=$e;try{if(sr.transition=null,$e=1,t)return t()}finally{$e=r,sr.transition=n,Oe=e,!(Oe&6)&&Ji()}}function _v(){On=Na.current,tt(Na)}function jo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,H4(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(nv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hh();break;case 3:nl(),tt(Nn),tt(nn),dv();break;case 5:uv(r);break;case 4:nl();break;case 13:tt(it);break;case 19:tt(it);break;case 10:ov(r.type._context);break;case 22:case 23:_v()}n=n.return}if(Lt=t,vt=t=Ti(t.current,null),Bt=On=e,At=0,iu=null,vv=tm=Lo=0,vn=Cc=null,wo!==null){for(e=0;e<wo.length;e++)if(n=wo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}wo=null}return t}function VT(t,e){do{var n=vt;try{if(iv(),hh.current=ef,Zh){for(var r=at.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zh=!1}if(Oo=0,Dt=Ct=at=null,Ec=!1,nu=0,yv.current=null,n===null||n.return===null){At=1,iu=e,vt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Bt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=m1(a);if(g!==null){g.flags&=-257,p1(g,a,l,i,e),g.mode&1&&f1(i,u,e),e=g,c=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(c),e.updateQueue=x}else v.add(c);break e}else{if(!(e&1)){f1(i,u,e),Nv();break e}c=Error(Z(426))}}else if(rt&&l.mode&1){var b=m1(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),p1(b,a,l,i,e),rv(rl(c,l));break e}}i=c=rl(c,l),At!==4&&(At=2),Cc===null?Cc=[i]:Cc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=bT(i,c,e);a1(i,_);break e;case 1:l=c;var w=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Si===null||!Si.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=_T(i,l,e);a1(i,k);break e}}i=i.return}while(i!==null)}UT(n)}catch(R){e=R,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function FT(){var t=tf.current;return tf.current=ef,t===null?ef:t}function Nv(){(At===0||At===3||At===2)&&(At=4),Lt===null||!(Lo&268435455)&&!(tm&268435455)||ai(Lt,Bt)}function sf(t,e){var n=Oe;Oe|=2;var r=FT();(Lt!==t||Bt!==e)&&(ys=null,jo(t,e));do try{g5();break}catch(s){VT(t,s)}while(!0);if(iv(),Oe=n,tf.current=r,vt!==null)throw Error(Z(261));return Lt=null,Bt=0,At}function g5(){for(;vt!==null;)zT(vt)}function x5(){for(;vt!==null&&!$D();)zT(vt)}function zT(t){var e=BT(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?UT(t):vt=e,yv.current=null}function UT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=u5(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{At=6,vt=null;return}}else if(n=c5(n,e,On),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);At===0&&(At=5)}function xo(t,e,n){var r=$e,s=sr.transition;try{sr.transition=null,$e=1,y5(t,e,n,r)}finally{sr.transition=s,$e=r}return null}function y5(t,e,n,r){do Ia();while(xi!==null);if(Oe&6)throw Error(Z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(JD(t,i),t===Lt&&(vt=Lt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fd||(Fd=!0,WT(Fh,function(){return Ia(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=sr.transition,sr.transition=null;var a=$e;$e=1;var l=Oe;Oe|=4,yv.current=null,h5(t,n),MT(n,t),V4(ex),Uh=!!Zg,ex=Zg=null,t.current=n,f5(n),BD(),Oe=l,$e=a,sr.transition=i}else t.current=n;if(Fd&&(Fd=!1,xi=t,rf=s),i=t.pendingLanes,i===0&&(Si=null),qD(n.stateNode),En(t,xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nf)throw nf=!1,t=wx,wx=null,t;return rf&1&&t.tag!==0&&Ia(),i=t.pendingLanes,i&1?t===bx?jc++:(jc=0,bx=t):jc=0,Ji(),null}function Ia(){if(xi!==null){var t=bE(rf),e=sr.transition,n=$e;try{if(sr.transition=null,$e=16>t?16:t,xi===null)var r=!1;else{if(t=xi,xi=null,rf=0,Oe&6)throw Error(Z(331));var s=Oe;for(Oe|=4,fe=t.current;fe!==null;){var i=fe,a=i.child;if(fe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(fe=u;fe!==null;){var h=fe;switch(h.tag){case 0:case 11:case 15:Tc(8,h,i)}var f=h.child;if(f!==null)f.return=h,fe=f;else for(;fe!==null;){h=fe;var p=h.sibling,g=h.return;if(RT(h),h===u){fe=null;break}if(p!==null){p.return=g,fe=p;break}fe=g}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}fe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,fe=a;else e:for(;fe!==null;){if(i=fe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Tc(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,fe=_;break e}fe=i.return}}var w=t.current;for(fe=w;fe!==null;){a=fe;var N=a.child;if(a.subtreeFlags&2064&&N!==null)N.return=a,fe=N;else e:for(a=w;fe!==null;){if(l=fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:em(9,l)}}catch(R){ht(l,l.return,R)}if(l===a){fe=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,fe=k;break e}fe=l.return}}if(Oe=s,Ji(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(qf,t)}catch{}r=!0}return r}finally{$e=n,sr.transition=e}}return!1}function j1(t,e,n){e=rl(n,e),e=bT(t,e,1),t=Ni(t,e,1),e=un(),t!==null&&(ju(t,1,e),En(t,e))}function ht(t,e,n){if(t.tag===3)j1(t,t,n);else for(;e!==null;){if(e.tag===3){j1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Si===null||!Si.has(r))){t=rl(n,t),t=_T(e,t,1),e=Ni(e,t,1),t=un(),e!==null&&(ju(e,1,t),En(e,t));break}}e=e.return}}function v5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Bt&n)===n&&(At===4||At===3&&(Bt&130023424)===Bt&&500>xt()-wv?jo(t,0):vv|=n),En(t,e)}function $T(t,e){e===0&&(t.mode&1?(e=kd,kd<<=1,!(kd&130023424)&&(kd=4194304)):e=1);var n=un();t=ks(t,e),t!==null&&(ju(t,e,n),En(t,n))}function w5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$T(t,n)}function b5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),$T(t,n)}var BT;BT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)_n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return _n=!1,l5(t,e,n);_n=!!(t.flags&131072)}else _n=!1,rt&&e.flags&1048576&&GE(e,Kh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mh(t,e),t=e.pendingProps;var s=Za(e,nn.current);Aa(e,n),s=fv(null,e,r,t,s,n);var i=mv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Sn(r)?(i=!0,qh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,lv(e),s.updater=Zf,e.stateNode=s,s._reactInternals=e,cx(e,r,t,n),e=hx(null,e,r,!0,i,n)):(e.tag=0,rt&&i&&tv(e),an(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=N5(r),t=pr(r,t),s){case 0:e=dx(null,e,r,t,n);break e;case 1:e=y1(null,e,r,t,n);break e;case 11:e=g1(null,e,r,t,n);break e;case 14:e=x1(null,e,r,pr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),dx(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),y1(t,e,r,s,n);case 3:e:{if(TT(e),t===null)throw Error(Z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ZE(t,e),Yh(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=rl(Error(Z(423)),e),e=v1(t,e,r,n,s);break e}else if(r!==s){s=rl(Error(Z(424)),e),e=v1(t,e,r,n,s);break e}else for(zn=_i(e.stateNode.containerInfo.firstChild),Bn=e,rt=!0,vr=null,n=YE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(el(),r===s){e=As(t,e,n);break e}an(t,e,r,n)}e=e.child}return e;case 5:return eT(e),t===null&&ox(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,tx(r,s)?a=null:i!==null&&tx(r,i)&&(e.flags|=32),ET(t,e),an(t,e,a,n),e.child;case 6:return t===null&&ox(e),null;case 13:return CT(t,e,n);case 4:return cv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=tl(e,null,r,n):an(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),g1(t,e,r,s,n);case 7:return an(t,e,e.pendingProps,n),e.child;case 8:return an(t,e,e.pendingProps.children,n),e.child;case 12:return an(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ye(Qh,r._currentValue),r._currentValue=a,i!==null)if(Ir(i.value,a)){if(i.children===s.children&&!Nn.current){e=As(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ss(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ax(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Z(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ax(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}an(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Aa(e,n),s=or(s),r=r(s),e.flags|=1,an(t,e,r,n),e.child;case 14:return r=e.type,s=pr(r,e.pendingProps),s=pr(r.type,s),x1(t,e,r,s,n);case 15:return NT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pr(r,s),mh(t,e),e.tag=1,Sn(r)?(t=!0,qh(e)):t=!1,Aa(e,n),wT(e,r,s),cx(e,r,s,n),hx(null,e,r,!0,t,n);case 19:return jT(t,e,n);case 22:return ST(t,e,n)}throw Error(Z(156,e.tag))};function WT(t,e){return xE(t,e)}function _5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nr(t,e,n,r){return new _5(t,e,n,r)}function Sv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function N5(t){if(typeof t=="function")return Sv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===By)return 11;if(t===Wy)return 14}return 2}function Ti(t,e){var n=t.alternate;return n===null?(n=nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xh(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Sv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case fa:return ko(n.children,s,i,e);case $y:a=8,s|=8;break;case Pg:return t=nr(12,n,e,s|2),t.elementType=Pg,t.lanes=i,t;case Dg:return t=nr(13,n,e,s),t.elementType=Dg,t.lanes=i,t;case Mg:return t=nr(19,n,e,s),t.elementType=Mg,t.lanes=i,t;case eE:return nm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case JS:a=10;break e;case ZS:a=9;break e;case By:a=11;break e;case Wy:a=14;break e;case ri:a=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=nr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ko(t,e,n,r){return t=nr(7,t,r,e),t.lanes=n,t}function nm(t,e,n,r){return t=nr(22,t,r,e),t.elementType=eE,t.lanes=n,t.stateNode={isHidden:!1},t}function Xp(t,e,n){return t=nr(6,t,null,e),t.lanes=n,t}function Yp(t,e,n){return e=nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function S5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ip(0),this.expirationTimes=Ip(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ip(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ev(t,e,n,r,s,i,a,l,c){return t=new S5(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=nr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},lv(i),t}function E5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ha,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function HT(t){if(!t)return Oi;t=t._reactInternals;e:{if(Yo(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Sn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Sn(n))return HE(t,n,e)}return e}function qT(t,e,n,r,s,i,a,l,c){return t=Ev(n,r,!0,t,s,i,a,l,c),t.context=HT(null),n=t.current,r=un(),s=Ei(n),i=Ss(r,s),i.callback=e??null,Ni(n,i,s),t.current.lanes=s,ju(t,s,r),En(t,r),t}function rm(t,e,n,r){var s=e.current,i=un(),a=Ei(s);return n=HT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ss(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ni(s,e,a),t!==null&&(Tr(t,s,a,i),dh(t,s,a)),a}function of(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function k1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tv(t,e){k1(t,e),(t=t.alternate)&&k1(t,e)}function T5(){return null}var GT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cv(t){this._internalRoot=t}sm.prototype.render=Cv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));rm(t,e,null,null)};sm.prototype.unmount=Cv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vo(function(){rm(null,t,null,null)}),e[js]=null}};function sm(t){this._internalRoot=t}sm.prototype.unstable_scheduleHydration=function(t){if(t){var e=SE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<oi.length&&e!==0&&e<oi[n].priority;n++);oi.splice(n,0,t),n===0&&TE(t)}};function jv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function A1(){}function C5(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=of(a);i.call(u)}}var a=qT(e,r,t,0,null,!1,!1,"",A1);return t._reactRootContainer=a,t[js]=a.current,Yc(t.nodeType===8?t.parentNode:t),Vo(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=of(c);l.call(u)}}var c=Ev(t,0,!1,null,null,!1,!1,"",A1);return t._reactRootContainer=c,t[js]=c.current,Yc(t.nodeType===8?t.parentNode:t),Vo(function(){rm(e,c,n,r)}),c}function om(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=of(a);l.call(c)}}rm(e,a,t,s)}else a=C5(n,e,t,s,r);return of(a)}_E=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mc(e.pendingLanes);n!==0&&(Gy(e,n|1),En(e,xt()),!(Oe&6)&&(sl=xt()+500,Ji()))}break;case 13:Vo(function(){var r=ks(t,1);if(r!==null){var s=un();Tr(r,t,1,s)}}),Tv(t,1)}};Ky=function(t){if(t.tag===13){var e=ks(t,134217728);if(e!==null){var n=un();Tr(e,t,134217728,n)}Tv(t,134217728)}};NE=function(t){if(t.tag===13){var e=Ei(t),n=ks(t,e);if(n!==null){var r=un();Tr(n,t,e,r)}Tv(t,e)}};SE=function(){return $e};EE=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};Hg=function(t,e,n){switch(e){case"input":if(Vg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Xf(r);if(!s)throw Error(Z(90));nE(r),Vg(r,s)}}}break;case"textarea":sE(t,n);break;case"select":e=n.value,e!=null&&Ta(t,!!n.multiple,e,!1)}};dE=bv;hE=Vo;var j5={usingClientEntryPoint:!1,Events:[Au,xa,Xf,cE,uE,bv]},cc={findFiberByHostInstance:vo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k5={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=pE(t),t===null?null:t.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||T5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{qf=zd.inject(k5),Yr=zd}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j5;Gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jv(e))throw Error(Z(200));return E5(t,e,null,n)};Gn.createRoot=function(t,e){if(!jv(t))throw Error(Z(299));var n=!1,r="",s=GT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ev(t,1,!1,null,null,n,!1,r,s),t[js]=e.current,Yc(t.nodeType===8?t.parentNode:t),new Cv(e)};Gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=pE(e),t=t===null?null:t.stateNode,t};Gn.flushSync=function(t){return Vo(t)};Gn.hydrate=function(t,e,n){if(!im(e))throw Error(Z(200));return om(null,t,e,!0,n)};Gn.hydrateRoot=function(t,e,n){if(!jv(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=GT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=qT(e,null,t,1,n??null,s,!1,i,a),t[js]=e.current,Yc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new sm(e)};Gn.render=function(t,e,n){if(!im(e))throw Error(Z(200));return om(null,t,e,!1,n)};Gn.unmountComponentAtNode=function(t){if(!im(t))throw Error(Z(40));return t._reactRootContainer?(Vo(function(){om(null,null,t,!1,function(){t._reactRootContainer=null,t[js]=null})}),!0):!1};Gn.unstable_batchedUpdates=bv;Gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!im(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return om(t,e,n,!1,r)};Gn.version="18.3.1-next-f1338f8080-20240426";function KT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KT)}catch(t){console.error(t)}}KT(),KS.exports=Gn;var rr=KS.exports;const A5=MS(rr);var QT,I1=rr;QT=I1.createRoot,I1.hydrateRoot;function I5(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var XT={exports:{}},YT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var il=m;function R5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var P5=typeof Object.is=="function"?Object.is:R5,D5=il.useState,M5=il.useEffect,O5=il.useLayoutEffect,L5=il.useDebugValue;function V5(t,e){var n=e(),r=D5({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return O5(function(){s.value=n,s.getSnapshot=e,Jp(s)&&i({inst:s})},[t,n,e]),M5(function(){return Jp(s)&&i({inst:s}),t(function(){Jp(s)&&i({inst:s})})},[t]),L5(n),n}function Jp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!P5(t,n)}catch{return!0}}function F5(t,e){return e()}var z5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?F5:V5;YT.useSyncExternalStore=il.useSyncExternalStore!==void 0?il.useSyncExternalStore:z5;XT.exports=YT;var U5=XT.exports;const $5=qS.useInsertionEffect,B5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",W5=B5?m.useLayoutEffect:m.useEffect,H5=$5||W5,JT=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return H5(()=>{e[0]=t}),e[1]},q5="popstate",kv="pushState",Av="replaceState",G5="hashchange",R1=[q5,kv,Av,G5],K5=t=>{for(const e of R1)addEventListener(e,t);return()=>{for(const e of R1)removeEventListener(e,t)}},ZT=(t,e)=>U5.useSyncExternalStore(K5,t,e),Q5=()=>location.search,X5=({ssrSearch:t=""}={})=>ZT(Q5,()=>t),P1=()=>location.pathname,Y5=({ssrPath:t}={})=>ZT(P1,t?()=>t:P1),J5=(t,{replace:e=!1,state:n=null}={})=>history[e?Av:kv](n,"",t),Z5=(t={})=>[Y5(t),J5],D1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[D1]>"u"){for(const t of[kv,Av]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,D1,{value:!0})}const eM=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",eC=(t="")=>t==="/"?"":t,tM=(t,e)=>t[0]==="~"?t.slice(1):eC(e)+t,nM=(t="",e)=>eM(M1(eC(t)),M1(e)),M1=t=>{try{return decodeURI(t)}catch{return t}},tC={hook:Z5,searchHook:X5,parser:I5,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},nC=m.createContext(tC),Ru=()=>m.useContext(nC),rC={},sC=m.createContext(rC),rM=()=>m.useContext(sC),am=t=>{const[e,n]=t.hook(t);return[nM(t.base,e),JT((r,s)=>n(tM(r,t.base),s))]},Pu=()=>am(Ru()),iC=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):a.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},oC=({children:t,...e})=>{var h,f;const n=Ru(),r=e.hook?tC:n;let s=r;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in r){const g=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&g!==u[p]&&(l.current=u={...u}),u[p]=g,g!==r[p]&&(s=u)}return m.createElement(nC.Provider,{value:s,children:t})},O1=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,sM=t=>{let e=m.useRef(rC),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},fr=({path:t,nest:e,match:n,...r})=>{const s=Ru(),[i]=am(s),[a,l,c]=n??iC(s.parser,t,i,e),u=sM({...rM(),...l});if(!a)return null;const h=c?m.createElement(oC,{base:c},O1(r,u)):O1(r,u);return m.createElement(sC.Provider,{value:u,children:h})},Tn=m.forwardRef((t,e)=>{const n=Ru(),[r,s]=am(n),{to:i="",href:a=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...g}=t,v=JT(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(l==null||l(b),b.defaultPrevented||(b.preventDefault(),s(a,t)))}),x=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:v,href:x}):m.createElement("a",{...g,onClick:v,href:x,className:h!=null&&h.call?h(r===a):h,children:u,ref:e})}),aC=t=>Array.isArray(t)?t.flatMap(e=>aC(e&&e.type===m.Fragment?e.props.children:e)):[t],iM=({children:t,location:e})=>{const n=Ru(),[r]=am(n);for(const s of aC(t)){let i=0;if(m.isValidElement(s)&&(i=iC(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var lm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cm=typeof window>"u"||"Deno"in globalThis;function gr(){}function oM(t,e){return typeof t=="function"?t(e):t}function aM(t){return typeof t=="number"&&t>=0&&t!==1/0}function lM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function L1(t,e){return typeof t=="function"?t(e):t}function cM(t,e){return typeof t=="function"?t(e):t}function V1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==Iv(a,e.options))return!1}else if(!au(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function F1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(ou(e.options.mutationKey)!==ou(i))return!1}else if(!au(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Iv(t,e){return((e==null?void 0:e.queryKeyHashFn)||ou)(t)}function ou(t){return JSON.stringify(t,(e,n)=>Sx(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function au(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!au(t[n],e[n])):!1}function lC(t,e){if(t===e)return t;const n=z1(t)&&z1(e);if(n||Sx(t)&&Sx(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{};let c=0;for(let u=0;u<a;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=lC(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function z1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Sx(t){if(!U1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!U1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function U1(t){return Object.prototype.toString.call(t)==="[object Object]"}function uM(t){return new Promise(e=>{setTimeout(e,t)})}function dM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?lC(t,e):e}function hM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function fM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Rv=Symbol();function cC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Rv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var So,di,Ba,CS,mM=(CS=class extends lm{constructor(){super();Ve(this,So);Ve(this,di);Ve(this,Ba);Se(this,Ba,e=>{if(!cm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,di)||this.setEventListener(K(this,Ba))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,di))==null||e.call(this),Se(this,di,void 0))}setEventListener(e){var n;Se(this,Ba,e),(n=K(this,di))==null||n.call(this),Se(this,di,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,So)!==e&&(Se(this,So,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,So)=="boolean"?K(this,So):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},So=new WeakMap,di=new WeakMap,Ba=new WeakMap,CS),uC=new mM,Wa,hi,Ha,jS,pM=(jS=class extends lm{constructor(){super();Ve(this,Wa,!0);Ve(this,hi);Ve(this,Ha);Se(this,Ha,e=>{if(!cm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,hi)||this.setEventListener(K(this,Ha))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,hi))==null||e.call(this),Se(this,hi,void 0))}setEventListener(e){var n;Se(this,Ha,e),(n=K(this,hi))==null||n.call(this),Se(this,hi,e(this.setOnline.bind(this)))}setOnline(e){K(this,Wa)!==e&&(Se(this,Wa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,Wa)}},Wa=new WeakMap,hi=new WeakMap,Ha=new WeakMap,jS),af=new pM;function gM(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function xM(t){return Math.min(1e3*2**t,3e4)}function dC(t){return(t??"online")==="online"?af.isOnline():!0}var hC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Zp(t){return t instanceof hC}function fC(t){let e=!1,n=0,r=!1,s;const i=gM(),a=x=>{var b;r||(p(new hC(x)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>uC.isFocused()&&(t.networkMode==="always"||af.isOnline())&&t.canRun(),h=()=>dC(t.networkMode)&&t.canRun(),f=x=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,x),s==null||s(),i.resolve(x))},p=x=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,x),s==null||s(),i.reject(x))},g=()=>new Promise(x=>{var b;s=_=>{(r||u())&&x(_)},(b=t.onPause)==null||b.call(t)}).then(()=>{var x;s=void 0,r||(x=t.onContinue)==null||x.call(t)}),v=()=>{if(r)return;let x;const b=n===0?t.initialPromise:void 0;try{x=b??t.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(f).catch(_=>{var M;if(r)return;const w=t.retry??(cm?0:3),N=t.retryDelay??xM,k=typeof N=="function"?N(n,_):N,R=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(e||!R){p(_);return}n++,(M=t.onFail)==null||M.call(t,n,_),uM(k).then(()=>u()?void 0:g()).then(()=>{e?p(_):v()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?v():g().then(v),i)}}function yM(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var ln=yM(),Eo,kS,mC=(kS=class{constructor(){Ve(this,Eo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),aM(this.gcTime)&&Se(this,Eo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(cm?1/0:5*60*1e3))}clearGcTimeout(){K(this,Eo)&&(clearTimeout(K(this,Eo)),Se(this,Eo,void 0))}},Eo=new WeakMap,kS),qa,Ga,Yn,Yt,Eu,To,xr,xs,AS,vM=(AS=class extends mC{constructor(n){super();Ve(this,xr);Ve(this,qa);Ve(this,Ga);Ve(this,Yn);Ve(this,Yt);Ve(this,Eu);Ve(this,To);Se(this,To,!1),Se(this,Eu,n.defaultOptions),this.setOptions(n.options),this.observers=[],Se(this,Yn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Se(this,qa,bM(this.options)),this.state=n.state??K(this,qa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,Yt))==null?void 0:n.promise}setOptions(n){this.options={...K(this,Eu),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,Yn).remove(this)}setData(n,r){const s=dM(this.state.data,n,this.options);return Gt(this,xr,xs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gt(this,xr,xs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,Yt))==null?void 0:s.promise;return(i=K(this,Yt))==null||i.cancel(n),r?r.then(gr).catch(gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,qa))}isActive(){return this.observers.some(n=>cM(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Rv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!lM(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Yt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Yt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,Yn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,Yt)&&(K(this,To)?K(this,Yt).cancel({revert:!0}):K(this,Yt).cancelRetry()),this.scheduleGc()),K(this,Yn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,xr,xs).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,Yt))return K(this,Yt).continueRetry(),K(this,Yt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(g=>g.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Se(this,To,!0),s.signal)})},a=()=>{const p=cC(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),Se(this,To,!1),this.options.persister?this.options.persister(p,g,this):p(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Se(this,Ga,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gt(this,xr,xs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var g,v,x,b;Zp(p)&&p.silent||Gt(this,xr,xs).call(this,{type:"error",error:p}),Zp(p)||((v=(g=K(this,Yn).config).onError)==null||v.call(g,p,this),(b=(x=K(this,Yn).config).onSettled)==null||b.call(x,this.state.data,p,this)),this.scheduleGc()};return Se(this,Yt,fC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var g,v,x,b;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(_){c(_);return}(v=(g=K(this,Yn).config).onSuccess)==null||v.call(g,p,this),(b=(x=K(this,Yn).config).onSettled)==null||b.call(x,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,g)=>{Gt(this,xr,xs).call(this,{type:"failed",failureCount:p,error:g})},onPause:()=>{Gt(this,xr,xs).call(this,{type:"pause"})},onContinue:()=>{Gt(this,xr,xs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),K(this,Yt).start()}},qa=new WeakMap,Ga=new WeakMap,Yn=new WeakMap,Yt=new WeakMap,Eu=new WeakMap,To=new WeakMap,xr=new WeakSet,xs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...wM(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Zp(i)&&i.revert&&K(this,Ga)?{...K(this,Ga),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),ln.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,Yn).notify({query:this,type:"updated",action:n})})},AS);function wM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:dC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function bM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var qr,IS,_M=(IS=class extends lm{constructor(e={}){super();Ve(this,qr);this.config=e,Se(this,qr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Iv(s,n);let a=this.get(i);return a||(a=new vM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){K(this,qr).has(e.queryHash)||(K(this,qr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,qr).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,qr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,qr).get(e)}getAll(){return[...K(this,qr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>V1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>V1(e,r)):n}notify(e){ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ln.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ln.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},qr=new WeakMap,IS),Gr,on,Co,Kr,ei,RS,NM=(RS=class extends mC{constructor(n){super();Ve(this,Kr);Ve(this,Gr);Ve(this,on);Ve(this,Co);this.mutationId=n.mutationId,Se(this,on,n.mutationCache),Se(this,Gr,[]),this.state=n.state||SM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,Gr).includes(n)||(K(this,Gr).push(n),this.clearGcTimeout(),K(this,on).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Se(this,Gr,K(this,Gr).filter(r=>r!==n)),this.scheduleGc(),K(this,on).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,Gr).length||(this.state.status==="pending"?this.scheduleGc():K(this,on).remove(this))}continue(){var n;return((n=K(this,Co))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,a,l,c,u,h,f,p,g,v,x,b,_,w,N,k,R,M,S,C;Se(this,Co,fC({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(T,j)=>{Gt(this,Kr,ei).call(this,{type:"failed",failureCount:T,error:j})},onPause:()=>{Gt(this,Kr,ei).call(this,{type:"pause"})},onContinue:()=>{Gt(this,Kr,ei).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,on).canRun(this)}));const r=this.state.status==="pending",s=!K(this,Co).canStart();try{if(!r){Gt(this,Kr,ei).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(i=K(this,on).config).onMutate)==null?void 0:a.call(i,n,this));const j=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));j!==this.state.context&&Gt(this,Kr,ei).call(this,{type:"pending",context:j,variables:n,isPaused:s})}const T=await K(this,Co).start();return await((h=(u=K(this,on).config).onSuccess)==null?void 0:h.call(u,T,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,T,n,this.state.context)),await((v=(g=K(this,on).config).onSettled)==null?void 0:v.call(g,T,null,this.state.variables,this.state.context,this)),await((b=(x=this.options).onSettled)==null?void 0:b.call(x,T,null,n,this.state.context)),Gt(this,Kr,ei).call(this,{type:"success",data:T}),T}catch(T){try{throw await((w=(_=K(this,on).config).onError)==null?void 0:w.call(_,T,n,this.state.context,this)),await((k=(N=this.options).onError)==null?void 0:k.call(N,T,n,this.state.context)),await((M=(R=K(this,on).config).onSettled)==null?void 0:M.call(R,void 0,T,this.state.variables,this.state.context,this)),await((C=(S=this.options).onSettled)==null?void 0:C.call(S,void 0,T,n,this.state.context)),T}finally{Gt(this,Kr,ei).call(this,{type:"error",error:T})}}finally{K(this,on).runNext(this)}}},Gr=new WeakMap,on=new WeakMap,Co=new WeakMap,Kr=new WeakSet,ei=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ln.batch(()=>{K(this,Gr).forEach(s=>{s.onMutationUpdate(n)}),K(this,on).notify({mutation:this,type:"updated",action:n})})},RS);function SM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mn,Tu,PS,EM=(PS=class extends lm{constructor(e={}){super();Ve(this,Mn);Ve(this,Tu);this.config=e,Se(this,Mn,new Map),Se(this,Tu,Date.now())}build(e,n,r){const s=new NM({mutationCache:this,mutationId:++Nd(this,Tu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Ud(e),r=K(this,Mn).get(n)??[];r.push(e),K(this,Mn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Ud(e);if(K(this,Mn).has(n)){const s=(r=K(this,Mn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?K(this,Mn).delete(n):K(this,Mn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=K(this,Mn).get(Ud(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=K(this,Mn).get(Ud(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...K(this,Mn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>F1(n,r))}findAll(e={}){return this.getAll().filter(n=>F1(e,n))}notify(e){ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ln.batch(()=>Promise.all(e.map(n=>n.continue().catch(gr))))}},Mn=new WeakMap,Tu=new WeakMap,PS);function Ud(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function $1(t){return{onFetch:(e,n)=>{var h,f,p,g,v;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],a=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let x=!1;const b=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},_=cC(e.options,e.fetchOptions),w=async(N,k,R)=>{if(x)return Promise.reject();if(k==null&&N.pages.length)return Promise.resolve(N);const M={queryKey:e.queryKey,pageParam:k,direction:R?"backward":"forward",meta:e.options.meta};b(M);const S=await _(M),{maxPages:C}=e.options,T=R?fM:hM;return{pages:T(N.pages,S,C),pageParams:T(N.pageParams,k,C)}};if(s&&i.length){const N=s==="backward",k=N?TM:B1,R={pages:i,pageParams:a},M=k(r,R);l=await w(R,M,N)}else{const N=t??i.length;do{const k=c===0?a[0]??r.initialPageParam:B1(r,l);if(c>0&&k==null)break;l=await w(l,k),c++}while(c<N)}return l};e.options.persister?e.fetchFn=()=>{var x,b;return(b=(x=e.options).persister)==null?void 0:b.call(x,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function B1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function TM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var dt,fi,mi,Ka,Qa,pi,Xa,Ya,DS,CM=(DS=class{constructor(t={}){Ve(this,dt);Ve(this,fi);Ve(this,mi);Ve(this,Ka);Ve(this,Qa);Ve(this,pi);Ve(this,Xa);Ve(this,Ya);Se(this,dt,t.queryCache||new _M),Se(this,fi,t.mutationCache||new EM),Se(this,mi,t.defaultOptions||{}),Se(this,Ka,new Map),Se(this,Qa,new Map),Se(this,pi,0)}mount(){Nd(this,pi)._++,K(this,pi)===1&&(Se(this,Xa,uC.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,dt).onFocus())})),Se(this,Ya,af.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,dt).onOnline())})))}unmount(){var t,e;Nd(this,pi)._--,K(this,pi)===0&&((t=K(this,Xa))==null||t.call(this),Se(this,Xa,void 0),(e=K(this,Ya))==null||e.call(this),Se(this,Ya,void 0))}isFetching(t){return K(this,dt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,fi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,dt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=K(this,dt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(L1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return K(this,dt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,dt).get(r.queryHash),i=s==null?void 0:s.state.data,a=oM(e,i);if(a!==void 0)return K(this,dt).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return ln.batch(()=>K(this,dt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,dt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,dt);ln.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,dt),r={type:"active",...t};return ln.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=ln.batch(()=>K(this,dt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(gr).catch(gr)}invalidateQueries(t={},e={}){return ln.batch(()=>{if(K(this,dt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=ln.batch(()=>K(this,dt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(gr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(gr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,dt).build(this,e);return n.isStaleByTime(L1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(gr).catch(gr)}fetchInfiniteQuery(t){return t.behavior=$1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(gr).catch(gr)}ensureInfiniteQueryData(t){return t.behavior=$1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return af.isOnline()?K(this,fi).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,dt)}getMutationCache(){return K(this,fi)}getDefaultOptions(){return K(this,mi)}setDefaultOptions(t){Se(this,mi,t)}setQueryDefaults(t,e){K(this,Ka).set(ou(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,Ka).values()];let n={};return e.forEach(r=>{au(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){K(this,Qa).set(ou(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,Qa).values()];let n={};return e.forEach(r=>{au(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,mi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Iv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Rv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,mi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,dt).clear(),K(this,fi).clear()}},dt=new WeakMap,fi=new WeakMap,mi=new WeakMap,Ka=new WeakMap,Qa=new WeakMap,pi=new WeakMap,Xa=new WeakMap,Ya=new WeakMap,DS),jM=m.createContext(void 0),kM=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(jM.Provider,{value:t,children:e}));async function AM(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const IM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await AM(n),await n.json())},RM=new CM({defaultOptions:{queries:{queryFn:IM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),PM=1,DM=1e6;let eg=0;function MM(){return eg=(eg+1)%Number.MAX_SAFE_INTEGER,eg.toString()}const tg=new Map,W1=t=>{if(tg.has(t))return;const e=setTimeout(()=>{tg.delete(t),kc({type:"REMOVE_TOAST",toastId:t})},DM);tg.set(t,e)},OM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,PM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?W1(n):t.toasts.forEach(r=>{W1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},yh=[];let vh={toasts:[]};function kc(t){vh=OM(vh,t),yh.forEach(e=>{e(vh)})}function LM({...t}){const e=MM(),n=s=>kc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>kc({type:"DISMISS_TOAST",toastId:e});return kc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Zi(){const[t,e]=m.useState(vh);return m.useEffect(()=>(yh.push(e),()=>{const n=yh.indexOf(e);n>-1&&yh.splice(n,1)}),[t]),{...t,toast:LM,dismiss:n=>kc({type:"DISMISS_TOAST",toastId:n})}}function me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function H1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function pC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=H1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():H1(t[s],null)}}}}function Te(...t){return m.useCallback(pC(...t),t)}function VM(t,e){const n=m.createContext(e),r=i=>{const{children:a,...l}=i,c=m.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(i){const a=m.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Qn(t,e=[]){let n=[];function r(i,a){const l=m.createContext(a),c=n.length;n=[...n,a];const u=f=>{var _;const{scope:p,children:g,...v}=f,x=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,b=m.useMemo(()=>v,Object.values(v));return o.jsx(x.Provider,{value:b,children:g})};u.displayName=i+"Provider";function h(f,p){var x;const g=((x=p==null?void 0:p[t])==null?void 0:x[c])||l,v=m.useContext(g);if(v)return v;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,FM(s,...e)]}function FM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Fo(t){const e=UM(t),n=m.forwardRef((r,s)=>{const{children:i,...a}=r,l=m.Children.toArray(i),c=l.find($M);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return o.jsx(e,{...a,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var zM=Fo("Slot");function UM(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const a=WM(s),l=BM(i,s.props);return s.type!==m.Fragment&&(l.ref=r?pC(r,a):a),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var gC=Symbol("radix.slottable");function xC(t){const e=({children:n})=>o.jsx(o.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=gC,e}function $M(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gC}function BM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function WM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Pv(t){const e=t+"CollectionProvider",[n,r]=Qn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=x=>{const{scope:b,children:_}=x,w=ze.useRef(null),N=ze.useRef(new Map).current;return o.jsx(s,{scope:b,itemMap:N,collectionRef:w,children:_})};a.displayName=e;const l=t+"CollectionSlot",c=Fo(l),u=ze.forwardRef((x,b)=>{const{scope:_,children:w}=x,N=i(l,_),k=Te(b,N.collectionRef);return o.jsx(c,{ref:k,children:w})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Fo(h),g=ze.forwardRef((x,b)=>{const{scope:_,children:w,...N}=x,k=ze.useRef(null),R=Te(b,k),M=i(h,_);return ze.useEffect(()=>(M.itemMap.set(k,{ref:k,...N}),()=>void M.itemMap.delete(k))),o.jsx(p,{[f]:"",ref:R,children:w})});g.displayName=h;function v(x){const b=i(t+"CollectionConsumer",x);return ze.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const N=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((M,S)=>N.indexOf(M.ref.current)-N.indexOf(S.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},v,r]}var HM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],xe=HM.reduce((t,e)=>{const n=Fo(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function yC(t,e){t&&rr.flushSync(()=>t.dispatchEvent(e))}function mt(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function qM(t,e=globalThis==null?void 0:globalThis.document){const n=mt(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var GM="DismissableLayer",Ex="dismissableLayer.update",KM="dismissableLayer.pointerDownOutside",QM="dismissableLayer.focusOutside",q1,vC=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Nl=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=m.useContext(vC),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=m.useState({}),v=Te(e,S=>f(S)),x=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(b),w=h?x.indexOf(h):-1,N=u.layersWithOutsidePointerEventsDisabled.size>0,k=w>=_,R=YM(S=>{const C=S.target,T=[...u.branches].some(j=>j.contains(C));!k||T||(s==null||s(S),a==null||a(S),S.defaultPrevented||l==null||l())},p),M=JM(S=>{const C=S.target;[...u.branches].some(j=>j.contains(C))||(i==null||i(S),a==null||a(S),S.defaultPrevented||l==null||l())},p);return qM(S=>{w===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(q1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),G1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=q1)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),G1())},[h,u]),m.useEffect(()=>{const S=()=>g({});return document.addEventListener(Ex,S),()=>document.removeEventListener(Ex,S)},[]),o.jsx(xe.div,{...c,ref:v,style:{pointerEvents:N?k?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,M.onFocusCapture),onBlurCapture:me(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,R.onPointerDownCapture)})});Nl.displayName=GM;var XM="DismissableLayerBranch",wC=m.forwardRef((t,e)=>{const n=m.useContext(vC),r=m.useRef(null),s=Te(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(xe.div,{...t,ref:s})});wC.displayName=XM;function YM(t,e=globalThis==null?void 0:globalThis.document){const n=mt(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){bC(KM,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function JM(t,e=globalThis==null?void 0:globalThis.document){const n=mt(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&bC(QM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function G1(){const t=new CustomEvent(Ex);document.dispatchEvent(t)}function bC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?yC(s,i):s.dispatchEvent(i)}var ZM=Nl,eO=wC,_t=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},tO="Portal",Sl=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);_t(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?A5.createPortal(o.jsx(xe.div,{...r,ref:e}),a):null});Sl.displayName=tO;function nO(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var An=t=>{const{present:e,children:n}=t,r=rO(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Te(r.ref,sO(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};An.displayName="Presence";function rO(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),a=t?"mounted":"unmounted",[l,c]=nO(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=$d(r.current);i.current=l==="mounted"?u:"none"},[l]),_t(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=$d(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),_t(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const x=$d(r.current).includes(g.animationName);if(g.target===e&&x&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(i.current=$d(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function $d(t){return(t==null?void 0:t.animationName)||"none"}function sO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Is({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=iO({defaultProp:e,onChange:n}),i=t!==void 0,a=i?t:r,l=mt(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[a,c]}function iO({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=mt(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var oO="VisuallyHidden",Du=m.forwardRef((t,e)=>o.jsx(xe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Du.displayName=oO;var aO=Du,Dv="ToastProvider",[Mv,lO,cO]=Pv("Toast"),[_C,kG]=Qn("Toast",[cO]),[uO,um]=_C(Dv),NC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Dv}\`. Expected non-empty \`string\`.`),o.jsx(Mv.Provider,{scope:e,children:o.jsx(uO,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(g=>g+1),[]),onToastRemove:m.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:a})})};NC.displayName=Dv;var SC="ToastViewport",dO=["F8"],Tx="toast.viewportPause",Cx="toast.viewportResume",EC=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=dO,label:s="Notifications ({hotkey})",...i}=t,a=um(SC,n),l=lO(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Te(e,f,a.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=a.toastCount>0;m.useEffect(()=>{const b=_=>{var N;r.length!==0&&r.every(k=>_[k]||_.code===k)&&((N=f.current)==null||N.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),m.useEffect(()=>{const b=c.current,_=f.current;if(v&&b&&_){const w=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(Tx);_.dispatchEvent(M),a.isClosePausedRef.current=!0}},N=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(Cx);_.dispatchEvent(M),a.isClosePausedRef.current=!1}},k=M=>{!b.contains(M.relatedTarget)&&N()},R=()=>{b.contains(document.activeElement)||N()};return b.addEventListener("focusin",w),b.addEventListener("focusout",k),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",R),window.addEventListener("blur",w),window.addEventListener("focus",N),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",k),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",R),window.removeEventListener("blur",w),window.removeEventListener("focus",N)}}},[v,a.isClosePausedRef]);const x=m.useCallback(({tabbingDirection:b})=>{const w=l().map(N=>{const k=N.ref.current,R=[k,...SO(k)];return b==="forwards"?R:R.reverse()});return(b==="forwards"?w.reverse():w).flat()},[l]);return m.useEffect(()=>{const b=f.current;if(b){const _=w=>{var R,M,S;const N=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!N){const C=document.activeElement,T=w.shiftKey;if(w.target===b&&T){(R=u.current)==null||R.focus();return}const D=x({tabbingDirection:T?"backwards":"forwards"}),P=D.findIndex(B=>B===C);ng(D.slice(P+1))?w.preventDefault():T?(M=u.current)==null||M.focus():(S=h.current)==null||S.focus()}};return b.addEventListener("keydown",_),()=>b.removeEventListener("keydown",_)}},[l,x]),o.jsxs(eO,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&o.jsx(jx,{ref:u,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"forwards"});ng(b)}}),o.jsx(Mv.Slot,{scope:n,children:o.jsx(xe.ol,{tabIndex:-1,...i,ref:p})}),v&&o.jsx(jx,{ref:h,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"backwards"});ng(b)}})]})});EC.displayName=SC;var TC="ToastFocusProxy",jx=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=um(TC,n);return o.jsx(Du,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});jx.displayName=TC;var dm="Toast",hO="toast.swipeStart",fO="toast.swipeMove",mO="toast.swipeCancel",pO="toast.swipeEnd",CC=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=Is({prop:r,defaultProp:s,onChange:i});return o.jsx(An,{present:n||l,children:o.jsx(yO,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:mt(t.onPause),onResume:mt(t.onResume),onSwipeStart:me(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});CC.displayName=dm;var[gO,xO]=_C(dm,{onClose(){}}),yO=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:g,...v}=t,x=um(dm,n),[b,_]=m.useState(null),w=Te(e,B=>_(B)),N=m.useRef(null),k=m.useRef(null),R=s||x.duration,M=m.useRef(0),S=m.useRef(R),C=m.useRef(0),{onToastAdd:T,onToastRemove:j}=x,A=mt(()=>{var Q;(b==null?void 0:b.contains(document.activeElement))&&((Q=x.viewport)==null||Q.focus()),a()}),D=m.useCallback(B=>{!B||B===1/0||(window.clearTimeout(C.current),M.current=new Date().getTime(),C.current=window.setTimeout(A,B))},[A]);m.useEffect(()=>{const B=x.viewport;if(B){const Q=()=>{D(S.current),u==null||u()},ne=()=>{const ee=new Date().getTime()-M.current;S.current=S.current-ee,window.clearTimeout(C.current),c==null||c()};return B.addEventListener(Tx,ne),B.addEventListener(Cx,Q),()=>{B.removeEventListener(Tx,ne),B.removeEventListener(Cx,Q)}}},[x.viewport,R,c,u,D]),m.useEffect(()=>{i&&!x.isClosePausedRef.current&&D(R)},[i,R,x.isClosePausedRef,D]),m.useEffect(()=>(T(),()=>j()),[T,j]);const P=m.useMemo(()=>b?DC(b):null,[b]);return x.viewport?o.jsxs(o.Fragment,{children:[P&&o.jsx(vO,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),o.jsx(gO,{scope:n,onClose:A,children:rr.createPortal(o.jsx(Mv.ItemSlot,{scope:n,children:o.jsx(ZM,{asChild:!0,onEscapeKeyDown:me(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||A(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...v,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:me(t.onPointerDown,B=>{B.button===0&&(N.current={x:B.clientX,y:B.clientY})}),onPointerMove:me(t.onPointerMove,B=>{if(!N.current)return;const Q=B.clientX-N.current.x,ne=B.clientY-N.current.y,ee=!!k.current,L=["left","right"].includes(x.swipeDirection),z=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,G=L?z(0,Q):0,$=L?0:z(0,ne),W=B.pointerType==="touch"?10:2,J={x:G,y:$},re={originalEvent:B,delta:J};ee?(k.current=J,Bd(fO,f,re,{discrete:!1})):K1(J,x.swipeDirection,W)?(k.current=J,Bd(hO,h,re,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(Q)>W||Math.abs(ne)>W)&&(N.current=null)}),onPointerUp:me(t.onPointerUp,B=>{const Q=k.current,ne=B.target;if(ne.hasPointerCapture(B.pointerId)&&ne.releasePointerCapture(B.pointerId),k.current=null,N.current=null,Q){const ee=B.currentTarget,L={originalEvent:B,delta:Q};K1(Q,x.swipeDirection,x.swipeThreshold)?Bd(pO,g,L,{discrete:!0}):Bd(mO,p,L,{discrete:!0}),ee.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),vO=t=>{const{__scopeToast:e,children:n,...r}=t,s=um(dm,e),[i,a]=m.useState(!1),[l,c]=m.useState(!1);return _O(()=>a(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Sl,{asChild:!0,children:o.jsx(Du,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},wO="ToastTitle",jC=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(xe.div,{...r,ref:e})});jC.displayName=wO;var bO="ToastDescription",kC=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(xe.div,{...r,ref:e})});kC.displayName=bO;var AC="ToastAction",IC=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(PC,{altText:n,asChild:!0,children:o.jsx(Ov,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${AC}\`. Expected non-empty \`string\`.`),null)});IC.displayName=AC;var RC="ToastClose",Ov=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=xO(RC,n);return o.jsx(PC,{asChild:!0,children:o.jsx(xe.button,{type:"button",...r,ref:e,onClick:me(t.onClick,s.onClose)})})});Ov.displayName=RC;var PC=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function DC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),NO(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...DC(r))}}),e}function Bd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?yC(s,i):s.dispatchEvent(i)}var K1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function _O(t=()=>{}){const e=mt(t);_t(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function NO(t){return t.nodeType===t.ELEMENT_NODE}function SO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ng(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var EO=NC,MC=EC,OC=CC,LC=jC,VC=kC,FC=IC,zC=Ov;function UC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=UC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $C(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=UC(t))&&(r&&(r+=" "),r+=e);return r}const Q1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,X1=$C,Mu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return X1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=Q1(h)||Q1(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...g}=h;return Object.entries(g).every(v=>{let[x,b]=v;return Array.isArray(b)?b.includes({...i,...l}[x]):{...i,...l}[x]===b})?[...u,f,p]:u},[]);return X1(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>m.createElement("svg",{ref:c,...CO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:BC("lucide",s),...l},[...a.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(jO,{ref:i,iconNode:e,className:BC(`lucide-${TO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=ue("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=ue("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=ue("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=ue("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=ue("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=ue("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=ue("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=ue("ChartNoAxesGantt",[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cn=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=ue("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ue("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ue("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=ue("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=ue("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ue("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=ue("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=ue("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=ue("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=ue("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=ue("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zo=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=ue("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=ue("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=ue("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=ue("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=ue("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=ue("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=ue("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Hv="-",t3=t=>{const e=r3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Hv);return l[0]===""&&l.length!==1&&l.shift(),ZC(l,e)||n3(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},ZC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?ZC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Hv);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},t_=/^\[(.+)\]$/,n3=t=>{if(t_.test(t)){const e=t_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},r3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return i3(Object.entries(t.classGroups),n).forEach(([i,a])=>{Ox(a,r,i,e)}),r},Ox=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:n_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(s3(s)){Ox(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Ox(a,n_(e,i),n,r)})})},n_=(t,e)=>{let n=t;return e.split(Hv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},s3=t=>t.isThemeGetter,i3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,o3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},ej="!",a3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let u=0,h=0,f;for(let b=0;b<l.length;b++){let _=l[b];if(u===0){if(_===s&&(r||l.slice(b,b+i)===e)){c.push(l.slice(h,b)),h=b+i;continue}if(_==="/"){f=b;continue}}_==="["?u++:_==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(ej),v=g?p.substring(1):p,x=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:a}):a},l3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},c3=t=>({cache:o3(t.cacheSize),parseClassName:a3(t),...t3(t)}),u3=/\s+/,d3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(u3);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let v=!!g,x=r(v?p.substring(0,g):p);if(!x){if(!v){l=u+(l.length>0?" "+l:l);continue}if(x=r(p),!x){l=u+(l.length>0?" "+l:l);continue}v=!1}const b=l3(h).join(":"),_=f?b+ej:b,w=_+x;if(i.includes(w))continue;i.push(w);const N=s(x,v);for(let k=0;k<N.length;++k){const R=N[k];i.push(_+R)}l=u+(l.length>0?" "+l:l)}return l};function h3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=tj(e))&&(r&&(r+=" "),r+=n);return r}const tj=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=tj(t[r]))&&(n&&(n+=" "),n+=e);return n};function f3(t,...e){let n,r,s,i=a;function a(c){const u=e.reduce((h,f)=>f(h),t());return n=c3(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=d3(c,n);return s(c,h),h}return function(){return i(h3.apply(null,arguments))}}const Ze=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},nj=/^\[(?:([a-z-]+):)?(.+)\]$/i,m3=/^\d+\/\d+$/,p3=new Set(["px","full","screen"]),g3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,x3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,y3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,v3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,w3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gs=t=>Pa(t)||p3.has(t)||m3.test(t),Ys=t=>El(t,"length",j3),Pa=t=>!!t&&!Number.isNaN(Number(t)),rg=t=>El(t,"number",Pa),uc=t=>!!t&&Number.isInteger(Number(t)),b3=t=>t.endsWith("%")&&Pa(t.slice(0,-1)),_e=t=>nj.test(t),Js=t=>g3.test(t),_3=new Set(["length","size","percentage"]),N3=t=>El(t,_3,rj),S3=t=>El(t,"position",rj),E3=new Set(["image","url"]),T3=t=>El(t,E3,A3),C3=t=>El(t,"",k3),dc=()=>!0,El=(t,e,n)=>{const r=nj.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},j3=t=>x3.test(t)&&!y3.test(t),rj=()=>!1,k3=t=>v3.test(t),A3=t=>w3.test(t),I3=()=>{const t=Ze("colors"),e=Ze("spacing"),n=Ze("blur"),r=Ze("brightness"),s=Ze("borderColor"),i=Ze("borderRadius"),a=Ze("borderSpacing"),l=Ze("borderWidth"),c=Ze("contrast"),u=Ze("grayscale"),h=Ze("hueRotate"),f=Ze("invert"),p=Ze("gap"),g=Ze("gradientColorStops"),v=Ze("gradientColorStopPositions"),x=Ze("inset"),b=Ze("margin"),_=Ze("opacity"),w=Ze("padding"),N=Ze("saturate"),k=Ze("scale"),R=Ze("sepia"),M=Ze("skew"),S=Ze("space"),C=Ze("translate"),T=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",_e,e],D=()=>[_e,e],P=()=>["",gs,Ys],B=()=>["auto",Pa,_e],Q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ne=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",_e],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[Pa,_e];return{cacheSize:500,separator:":",theme:{colors:[dc],spacing:[gs,Ys],blur:["none","",Js,_e],brightness:$(),borderColor:[t],borderRadius:["none","","full",Js,_e],borderSpacing:D(),borderWidth:P(),contrast:$(),grayscale:z(),hueRotate:$(),invert:z(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[b3,Ys],inset:A(),margin:A(),opacity:$(),padding:D(),saturate:$(),scale:$(),sepia:z(),skew:$(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Js]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Q(),_e]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",uc,_e]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",uc,_e]}],"grid-cols":[{"grid-cols":[dc]}],"col-start-end":[{col:["auto",{span:["full",uc,_e]},_e]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[dc]}],"row-start-end":[{row:["auto",{span:[uc,_e]},_e]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[Js]},Js]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Js,Ys]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rg]}],"font-family":[{font:[dc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",Pa,rg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gs,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gs,Ys]}],"underline-offset":[{"underline-offset":["auto",gs,_e]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Q(),S3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",N3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},T3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ne(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ne()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ne()]}],"outline-offset":[{"outline-offset":[gs,_e]}],"outline-w":[{outline:[gs,Ys]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[gs,Ys]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Js,C3]}],"shadow-color":[{shadow:[dc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Js,_e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[N]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[uc,_e]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[gs,Ys,rg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},R3=f3(I3);function U(...t){return R3($C(t))}const P3=EO,sj=m.forwardRef(({className:t,...e},n)=>o.jsx(MC,{ref:n,className:U("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));sj.displayName=MC.displayName;const D3=Mu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ij=m.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(OC,{ref:r,className:U(D3({variant:e}),t),...n}));ij.displayName=OC.displayName;const M3=m.forwardRef(({className:t,...e},n)=>o.jsx(FC,{ref:n,className:U("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));M3.displayName=FC.displayName;const oj=m.forwardRef(({className:t,...e},n)=>o.jsx(zC,{ref:n,className:U("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(Li,{className:"h-4 w-4"})}));oj.displayName=zC.displayName;const aj=m.forwardRef(({className:t,...e},n)=>o.jsx(LC,{ref:n,className:U("text-sm font-semibold",t),...e}));aj.displayName=LC.displayName;const lj=m.forwardRef(({className:t,...e},n)=>o.jsx(VC,{ref:n,className:U("text-sm opacity-90",t),...e}));lj.displayName=VC.displayName;function O3(){const{toasts:t}=Zi();return o.jsxs(P3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return o.jsxs(ij,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(aj,{children:n}),r&&o.jsx(lj,{children:r})]}),s,o.jsx(oj,{})]},e)}),o.jsx(sj,{})]})}var L3=qS[" useId ".trim().toString()]||(()=>{}),V3=0;function Zr(t){const[e,n]=m.useState(L3());return _t(()=>{n(r=>r??String(V3++))},[t]),e?`radix-${e}`:""}const F3=["top","right","bottom","left"],Vi=Math.min,Ln=Math.max,cf=Math.round,Wd=Math.floor,es=t=>({x:t,y:t}),z3={left:"right",right:"left",bottom:"top",top:"bottom"},U3={start:"end",end:"start"};function Lx(t,e,n){return Ln(t,Vi(e,n))}function Rs(t,e){return typeof t=="function"?t(e):t}function Ps(t){return t.split("-")[0]}function Tl(t){return t.split("-")[1]}function qv(t){return t==="x"?"y":"x"}function Gv(t){return t==="y"?"height":"width"}function Fi(t){return["top","bottom"].includes(Ps(t))?"y":"x"}function Kv(t){return qv(Fi(t))}function $3(t,e,n){n===void 0&&(n=!1);const r=Tl(t),s=Kv(t),i=Gv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=uf(a)),[a,uf(a)]}function B3(t){const e=uf(t);return[Vx(t),e,Vx(e)]}function Vx(t){return t.replace(/start|end/g,e=>U3[e])}function W3(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function H3(t,e,n,r){const s=Tl(t);let i=W3(Ps(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(Vx)))),i}function uf(t){return t.replace(/left|right|bottom|top/g,e=>z3[e])}function q3(t){return{top:0,right:0,bottom:0,left:0,...t}}function cj(t){return typeof t!="number"?q3(t):{top:t,right:t,bottom:t,left:t}}function df(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function r_(t,e,n){let{reference:r,floating:s}=t;const i=Fi(e),a=Kv(e),l=Gv(a),c=Ps(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Tl(e)){case"start":g[a]-=p*(n&&u?-1:1);break;case"end":g[a]+=p*(n&&u?-1:1);break}return g}const G3=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=r_(u,r,c),p=r,g={},v=0;for(let x=0;x<l.length;x++){const{name:b,fn:_}=l[x],{x:w,y:N,data:k,reset:R}=await _({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});h=w??h,f=N??f,g={...g,[b]:{...g[b],...k}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(u=R.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:h,y:f}=r_(u,p,c)),x=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:g}};async function cu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Rs(e,t),v=cj(g),b=l[p?f==="floating"?"reference":"floating":f],_=df(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(N))?await(i.getScale==null?void 0:i.getScale(N))||{x:1,y:1}:{x:1,y:1},R=df(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:N,strategy:c}):w);return{top:(_.top-R.top+v.top)/k.y,bottom:(R.bottom-_.bottom+v.bottom)/k.y,left:(_.left-R.left+v.left)/k.x,right:(R.right-_.right+v.right)/k.x}}const K3=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Rs(t,e)||{};if(u==null)return{};const f=cj(h),p={x:n,y:r},g=Kv(s),v=Gv(g),x=await a.getDimensions(u),b=g==="y",_=b?"top":"left",w=b?"bottom":"right",N=b?"clientHeight":"clientWidth",k=i.reference[v]+i.reference[g]-p[g]-i.floating[v],R=p[g]-i.reference[g],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let S=M?M[N]:0;(!S||!await(a.isElement==null?void 0:a.isElement(M)))&&(S=l.floating[N]||i.floating[v]);const C=k/2-R/2,T=S/2-x[v]/2-1,j=Vi(f[_],T),A=Vi(f[w],T),D=j,P=S-x[v]-A,B=S/2-x[v]/2+C,Q=Lx(D,B,P),ne=!c.arrow&&Tl(s)!=null&&B!==Q&&i.reference[v]/2-(B<D?j:A)-x[v]/2<0,ee=ne?B<D?B-D:B-P:0;return{[g]:p[g]+ee,data:{[g]:Q,centerOffset:B-Q-ee,...ne&&{alignmentOffset:ee}},reset:ne}}}),Q3=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...b}=Rs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Ps(s),w=Fi(l),N=Ps(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(u.floating)),R=p||(N||!x?[uf(l)]:B3(l)),M=v!=="none";!p&&M&&R.push(...H3(l,x,v,k));const S=[l,...R],C=await cu(e,b),T=[];let j=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&T.push(C[_]),f){const B=$3(s,a,k);T.push(C[B[0]],C[B[1]])}if(j=[...j,{placement:s,overflows:T}],!T.every(B=>B<=0)){var A,D;const B=(((A=i.flip)==null?void 0:A.index)||0)+1,Q=S[B];if(Q)return{data:{index:B,overflows:j},reset:{placement:Q}};let ne=(D=j.filter(ee=>ee.overflows[0]<=0).sort((ee,L)=>ee.overflows[1]-L.overflows[1])[0])==null?void 0:D.placement;if(!ne)switch(g){case"bestFit":{var P;const ee=(P=j.filter(L=>{if(M){const z=Fi(L.placement);return z===w||z==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(z=>z>0).reduce((z,G)=>z+G,0)]).sort((L,z)=>L[1]-z[1])[0])==null?void 0:P[0];ee&&(ne=ee);break}case"initialPlacement":ne=l;break}if(s!==ne)return{reset:{placement:ne}}}return{}}}};function s_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function i_(t){return F3.some(e=>t[e]>=0)}const X3=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Rs(t,e);switch(r){case"referenceHidden":{const i=await cu(e,{...s,elementContext:"reference"}),a=s_(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:i_(a)}}}case"escaped":{const i=await cu(e,{...s,altBoundary:!0}),a=s_(i,n.floating);return{data:{escapedOffsets:a,escaped:i_(a)}}}default:return{}}}}};async function Y3(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Ps(n),l=Tl(n),c=Fi(n)==="y",u=["left","top"].includes(a)?-1:1,h=i&&c?-1:1,f=Rs(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof v=="number"&&(g=l==="end"?v*-1:v),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const J3=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await Y3(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},Z3=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:_,y:w}=b;return{x:_,y:w}}},...c}=Rs(t,e),u={x:n,y:r},h=await cu(e,c),f=Fi(Ps(s)),p=qv(f);let g=u[p],v=u[f];if(i){const b=p==="y"?"top":"left",_=p==="y"?"bottom":"right",w=g+h[b],N=g-h[_];g=Lx(w,g,N)}if(a){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",w=v+h[b],N=v-h[_];v=Lx(w,v,N)}const x=l.fn({...e,[p]:g,[f]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:i,[f]:a}}}}}},eL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Rs(t,e),h={x:n,y:r},f=Fi(s),p=qv(f);let g=h[p],v=h[f];const x=Rs(l,e),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const N=p==="y"?"height":"width",k=i.reference[p]-i.floating[N]+b.mainAxis,R=i.reference[p]+i.reference[N]-b.mainAxis;g<k?g=k:g>R&&(g=R)}if(u){var _,w;const N=p==="y"?"width":"height",k=["top","left"].includes(Ps(s)),R=i.reference[f]-i.floating[N]+(k&&((_=a.offset)==null?void 0:_[f])||0)+(k?0:b.crossAxis),M=i.reference[f]+i.reference[N]+(k?0:((w=a.offset)==null?void 0:w[f])||0)-(k?b.crossAxis:0);v<R?v=R:v>M&&(v=M)}return{[p]:g,[f]:v}}}},tL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=Rs(t,e),h=await cu(e,u),f=Ps(s),p=Tl(s),g=Fi(s)==="y",{width:v,height:x}=i.floating;let b,_;f==="top"||f==="bottom"?(b=f,_=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,b=p==="end"?"top":"bottom");const w=x-h.top-h.bottom,N=v-h.left-h.right,k=Vi(x-h[b],w),R=Vi(v-h[_],N),M=!e.middlewareData.shift;let S=k,C=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=w),M&&!p){const j=Ln(h.left,0),A=Ln(h.right,0),D=Ln(h.top,0),P=Ln(h.bottom,0);g?C=v-2*(j!==0||A!==0?j+A:Ln(h.left,h.right)):S=x-2*(D!==0||P!==0?D+P:Ln(h.top,h.bottom))}await c({...e,availableWidth:C,availableHeight:S});const T=await a.getDimensions(l.floating);return v!==T.width||x!==T.height?{reset:{rects:!0}}:{}}}};function pm(){return typeof window<"u"}function Cl(t){return uj(t)?(t.nodeName||"").toLowerCase():"#document"}function Wn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ds(t){var e;return(e=(uj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function uj(t){return pm()?t instanceof Node||t instanceof Wn(t).Node:!1}function Rr(t){return pm()?t instanceof Element||t instanceof Wn(t).Element:!1}function is(t){return pm()?t instanceof HTMLElement||t instanceof Wn(t).HTMLElement:!1}function o_(t){return!pm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Wn(t).ShadowRoot}function Lu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Pr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function nL(t){return["table","td","th"].includes(Cl(t))}function gm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Qv(t){const e=Xv(),n=Rr(t)?Pr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function rL(t){let e=zi(t);for(;is(e)&&!ol(e);){if(Qv(e))return e;if(gm(e))return null;e=zi(e)}return null}function Xv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ol(t){return["html","body","#document"].includes(Cl(t))}function Pr(t){return Wn(t).getComputedStyle(t)}function xm(t){return Rr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function zi(t){if(Cl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||o_(t)&&t.host||ds(t);return o_(e)?e.host:e}function dj(t){const e=zi(t);return ol(e)?t.ownerDocument?t.ownerDocument.body:t.body:is(e)&&Lu(e)?e:dj(e)}function uu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=dj(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Wn(s);if(i){const l=Fx(a);return e.concat(a,a.visualViewport||[],Lu(s)?s:[],l&&n?uu(l):[])}return e.concat(s,uu(s,[],n))}function Fx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function hj(t){const e=Pr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=is(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=cf(n)!==i||cf(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Yv(t){return Rr(t)?t:t.contextElement}function Da(t){const e=Yv(t);if(!is(e))return es(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=hj(e);let a=(i?cf(n.width):n.width)/r,l=(i?cf(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const sL=es(0);function fj(t){const e=Wn(t);return!Xv()||!e.visualViewport?sL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function iL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Wn(t)?!1:e}function $o(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Yv(t);let a=es(1);e&&(r?Rr(r)&&(a=Da(r)):a=Da(t));const l=iL(i,n,r)?fj(i):es(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const p=Wn(i),g=r&&Rr(r)?Wn(r):r;let v=p,x=Fx(v);for(;x&&r&&g!==v;){const b=Da(x),_=x.getBoundingClientRect(),w=Pr(x),N=_.left+(x.clientLeft+parseFloat(w.paddingLeft))*b.x,k=_.top+(x.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,h*=b.x,f*=b.y,c+=N,u+=k,v=Wn(x),x=Fx(v)}}return df({width:h,height:f,x:c,y:u})}function Jv(t,e){const n=xm(t).scrollLeft;return e?e.left+n:$o(ds(t)).left+n}function mj(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Jv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function oL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=ds(r),l=e?gm(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=es(1);const h=es(0),f=is(r);if((f||!f&&!i)&&((Cl(r)!=="body"||Lu(a))&&(c=xm(r)),is(r))){const g=$o(r);u=Da(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=a&&!f&&!i?mj(a,c,!0):es(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function aL(t){return Array.from(t.getClientRects())}function lL(t){const e=ds(t),n=xm(t),r=t.ownerDocument.body,s=Ln(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Ln(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Jv(t);const l=-n.scrollTop;return Pr(r).direction==="rtl"&&(a+=Ln(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function cL(t,e){const n=Wn(t),r=ds(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Xv();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function uL(t,e){const n=$o(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=is(t)?Da(t):es(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:a,height:l,x:c,y:u}}function a_(t,e,n){let r;if(e==="viewport")r=cL(t,n);else if(e==="document")r=lL(ds(t));else if(Rr(e))r=uL(e,n);else{const s=fj(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return df(r)}function pj(t,e){const n=zi(t);return n===e||!Rr(n)||ol(n)?!1:Pr(n).position==="fixed"||pj(n,e)}function dL(t,e){const n=e.get(t);if(n)return n;let r=uu(t,[],!1).filter(l=>Rr(l)&&Cl(l)!=="body"),s=null;const i=Pr(t).position==="fixed";let a=i?zi(t):t;for(;Rr(a)&&!ol(a);){const l=Pr(a),c=Qv(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Lu(a)&&!c&&pj(t,a))?r=r.filter(h=>h!==a):s=l,a=zi(a)}return e.set(t,r),r}function hL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?gm(e)?[]:dL(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,h)=>{const f=a_(e,h,s);return u.top=Ln(f.top,u.top),u.right=Vi(f.right,u.right),u.bottom=Vi(f.bottom,u.bottom),u.left=Ln(f.left,u.left),u},a_(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function fL(t){const{width:e,height:n}=hj(t);return{width:e,height:n}}function mL(t,e,n){const r=is(e),s=ds(e),i=n==="fixed",a=$o(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=es(0);if(r||!r&&!i)if((Cl(e)!=="body"||Lu(s))&&(l=xm(e)),r){const p=$o(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Jv(s));const u=s&&!r&&!i?mj(s,l):es(0),h=a.left+l.scrollLeft-c.x-u.x,f=a.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:a.width,height:a.height}}function sg(t){return Pr(t).position==="static"}function l_(t,e){if(!is(t)||Pr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return ds(t)===n&&(n=n.ownerDocument.body),n}function gj(t,e){const n=Wn(t);if(gm(t))return n;if(!is(t)){let s=zi(t);for(;s&&!ol(s);){if(Rr(s)&&!sg(s))return s;s=zi(s)}return n}let r=l_(t,e);for(;r&&nL(r)&&sg(r);)r=l_(r,e);return r&&ol(r)&&sg(r)&&!Qv(r)?n:r||rL(t)||n}const pL=async function(t){const e=this.getOffsetParent||gj,n=this.getDimensions,r=await n(t.floating);return{reference:mL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gL(t){return Pr(t).direction==="rtl"}const xL={convertOffsetParentRelativeRectToViewportRelativeRect:oL,getDocumentElement:ds,getClippingRect:hL,getOffsetParent:gj,getElementRects:pL,getClientRects:aL,getDimensions:fL,getScale:Da,isElement:Rr,isRTL:gL};function xj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function yL(t,e){let n=null,r;const s=ds(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=u;if(l||e(),!p||!g)return;const v=Wd(f),x=Wd(s.clientWidth-(h+p)),b=Wd(s.clientHeight-(f+g)),_=Wd(h),N={rootMargin:-v+"px "+-x+"px "+-b+"px "+-_+"px",threshold:Ln(0,Vi(1,c))||1};let k=!0;function R(M){const S=M[0].intersectionRatio;if(S!==c){if(!k)return a();S?a(!1,S):r=setTimeout(()=>{a(!1,1e-7)},1e3)}S===1&&!xj(u,t.getBoundingClientRect())&&a(),k=!1}try{n=new IntersectionObserver(R,{...N,root:s.ownerDocument})}catch{n=new IntersectionObserver(R,N)}n.observe(t)}return a(!0),i}function vL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Yv(t),h=s||i?[...u?uu(u):[],...uu(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=u&&l?yL(u,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(_=>{let[w]=_;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var N;(N=g)==null||N.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let v,x=c?$o(t):null;c&&b();function b(){const _=$o(t);x&&!xj(x,_)&&n(),x=_,v=requestAnimationFrame(b)}return n(),()=>{var _;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(v)}}const wL=J3,bL=Z3,_L=Q3,NL=tL,SL=X3,c_=K3,EL=eL,TL=(t,e,n)=>{const r=new Map,s={platform:xL,...n},i={...s.platform,_c:r};return G3(t,e,{...s,platform:i})};var wh=typeof document<"u"?m.useLayoutEffect:m.useEffect;function hf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!hf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!hf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function yj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function u_(t,e){const n=yj(t);return Math.round(e*n)/n}function ig(t){const e=m.useRef(t);return wh(()=>{e.current=t}),e}function CL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=m.useState(r);hf(p,r)||g(r);const[v,x]=m.useState(null),[b,_]=m.useState(null),w=m.useCallback(L=>{L!==M.current&&(M.current=L,x(L))},[]),N=m.useCallback(L=>{L!==S.current&&(S.current=L,_(L))},[]),k=i||v,R=a||b,M=m.useRef(null),S=m.useRef(null),C=m.useRef(h),T=c!=null,j=ig(c),A=ig(s),D=ig(u),P=m.useCallback(()=>{if(!M.current||!S.current)return;const L={placement:e,strategy:n,middleware:p};A.current&&(L.platform=A.current),TL(M.current,S.current,L).then(z=>{const G={...z,isPositioned:D.current!==!1};B.current&&!hf(C.current,G)&&(C.current=G,rr.flushSync(()=>{f(G)}))})},[p,e,n,A,D]);wh(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(L=>({...L,isPositioned:!1})))},[u]);const B=m.useRef(!1);wh(()=>(B.current=!0,()=>{B.current=!1}),[]),wh(()=>{if(k&&(M.current=k),R&&(S.current=R),k&&R){if(j.current)return j.current(k,R,P);P()}},[k,R,P,j,T]);const Q=m.useMemo(()=>({reference:M,floating:S,setReference:w,setFloating:N}),[w,N]),ne=m.useMemo(()=>({reference:k,floating:R}),[k,R]),ee=m.useMemo(()=>{const L={position:n,left:0,top:0};if(!ne.floating)return L;const z=u_(ne.floating,h.x),G=u_(ne.floating,h.y);return l?{...L,transform:"translate("+z+"px, "+G+"px)",...yj(ne.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:G}},[n,l,ne.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:P,refs:Q,elements:ne,floatingStyles:ee}),[h,P,Q,ne,ee])}const jL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?c_({element:r.current,padding:s}).fn(n):{}:r?c_({element:r,padding:s}).fn(n):{}}}},kL=(t,e)=>({...wL(t),options:[t,e]}),AL=(t,e)=>({...bL(t),options:[t,e]}),IL=(t,e)=>({...EL(t),options:[t,e]}),RL=(t,e)=>({..._L(t),options:[t,e]}),PL=(t,e)=>({...NL(t),options:[t,e]}),DL=(t,e)=>({...SL(t),options:[t,e]}),ML=(t,e)=>({...jL(t),options:[t,e]});var OL="Arrow",vj=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(xe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});vj.displayName=OL;var LL=vj;function wj(t){const[e,n]=m.useState(void 0);return _t(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Zv="Popper",[bj,jl]=Qn(Zv),[VL,_j]=bj(Zv),Nj=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return o.jsx(VL,{scope:e,anchor:r,onAnchorChange:s,children:n})};Nj.displayName=Zv;var Sj="PopperAnchor",Ej=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=_j(Sj,n),a=m.useRef(null),l=Te(e,a);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(xe.div,{...s,ref:l})});Ej.displayName=Sj;var e0="PopperContent",[FL,zL]=bj(e0),Tj=m.forwardRef((t,e)=>{var O,Y,ae,X,he,ie;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...x}=t,b=_j(e0,n),[_,w]=m.useState(null),N=Te(e,ge=>w(ge)),[k,R]=m.useState(null),M=wj(k),S=(M==null?void 0:M.width)??0,C=(M==null?void 0:M.height)??0,T=r+(i!=="center"?"-"+i:""),j=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},A=Array.isArray(u)?u:[u],D=A.length>0,P={padding:j,boundary:A.filter($L),altBoundary:D},{refs:B,floatingStyles:Q,placement:ne,isPositioned:ee,middlewareData:L}=CL({strategy:"fixed",placement:T,whileElementsMounted:(...ge)=>vL(...ge,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[kL({mainAxis:s+C,alignmentAxis:a}),c&&AL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?IL():void 0,...P}),c&&RL({...P}),PL({...P,apply:({elements:ge,rects:Ee,availableWidth:pt,availableHeight:Ie})=>{const{width:Be,height:Ft}=Ee.reference,He=ge.floating.style;He.setProperty("--radix-popper-available-width",`${pt}px`),He.setProperty("--radix-popper-available-height",`${Ie}px`),He.setProperty("--radix-popper-anchor-width",`${Be}px`),He.setProperty("--radix-popper-anchor-height",`${Ft}px`)}}),k&&ML({element:k,padding:l}),BL({arrowWidth:S,arrowHeight:C}),p&&DL({strategy:"referenceHidden",...P})]}),[z,G]=kj(ne),$=mt(v);_t(()=>{ee&&($==null||$())},[ee,$]);const W=(O=L.arrow)==null?void 0:O.x,J=(Y=L.arrow)==null?void 0:Y.y,re=((ae=L.arrow)==null?void 0:ae.centerOffset)!==0,[te,se]=m.useState();return _t(()=>{_&&se(window.getComputedStyle(_).zIndex)},[_]),o.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...Q,transform:ee?Q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(X=L.transformOrigin)==null?void 0:X.x,(he=L.transformOrigin)==null?void 0:he.y].join(" "),...((ie=L.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(FL,{scope:n,placedSide:z,onArrowChange:R,arrowX:W,arrowY:J,shouldHideArrow:re,children:o.jsx(xe.div,{"data-side":z,"data-align":G,...x,ref:N,style:{...x.style,animation:ee?void 0:"none"}})})})});Tj.displayName=e0;var Cj="PopperArrow",UL={top:"bottom",right:"left",bottom:"top",left:"right"},jj=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=zL(Cj,r),a=UL[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(LL,{...s,ref:n,style:{...s.style,display:"block"}})})});jj.displayName=Cj;function $L(t){return t!==null}var BL=t=>({name:"transformOrigin",options:t,fn(e){var b,_,w;const{placement:n,rects:r,middlewareData:s}=e,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,h]=kj(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let v="",x="";return u==="bottom"?(v=a?f:`${p}px`,x=`${-c}px`):u==="top"?(v=a?f:`${p}px`,x=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,x=a?f:`${g}px`):u==="left"&&(v=`${r.floating.width+c}px`,x=a?f:`${g}px`),{data:{x:v,y:x}}}});function kj(t){const[e,n="center"]=t.split("-");return[e,n]}var t0=Nj,ym=Ej,n0=Tj,r0=jj,[vm,AG]=Qn("Tooltip",[jl]),wm=jl(),Aj="TooltipProvider",WL=700,zx="tooltip.open",[HL,s0]=vm(Aj),Ij=t=>{const{__scopeTooltip:e,delayDuration:n=WL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(HL,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};Ij.displayName=Aj;var bm="Tooltip",[qL,Vu]=vm(bm),Rj=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:a,delayDuration:l}=t,c=s0(bm,t.__scopeTooltip),u=wm(e),[h,f]=m.useState(null),p=Zr(),g=m.useRef(0),v=a??c.disableHoverableContent,x=l??c.delayDuration,b=m.useRef(!1),[_=!1,w]=Is({prop:r,defaultProp:s,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent(zx))):c.onClose(),i==null||i(S)}}),N=m.useMemo(()=>_?b.current?"delayed-open":"instant-open":"closed",[_]),k=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,w(!0)},[w]),R=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w(!1)},[w]),M=m.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,w(!0),g.current=0},x)},[x,w]);return m.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),o.jsx(t0,{...u,children:o.jsx(qL,{scope:e,contentId:p,open:_,stateAttribute:N,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?M():k()},[c.isOpenDelayedRef,M,k]),onTriggerLeave:m.useCallback(()=>{v?R():(window.clearTimeout(g.current),g.current=0)},[R,v]),onOpen:k,onClose:R,disableHoverableContent:v,children:n})})};Rj.displayName=bm;var Ux="TooltipTrigger",Pj=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Vu(Ux,n),i=s0(Ux,n),a=wm(n),l=m.useRef(null),c=Te(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(ym,{asChild:!0,...a,children:o.jsx(xe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:me(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:me(t.onBlur,s.onClose),onClick:me(t.onClick,s.onClose)})})});Pj.displayName=Ux;var i0="TooltipPortal",[GL,KL]=vm(i0,{forceMount:void 0}),Dj=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=Vu(i0,e);return o.jsx(GL,{scope:e,forceMount:n,children:o.jsx(An,{present:n||i.open,children:o.jsx(Sl,{asChild:!0,container:s,children:r})})})};Dj.displayName=i0;var al="TooltipContent",Mj=m.forwardRef((t,e)=>{const n=KL(al,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=Vu(al,t.__scopeTooltip);return o.jsx(An,{present:r||a.open,children:a.disableHoverableContent?o.jsx(Oj,{side:s,...i,ref:e}):o.jsx(QL,{side:s,...i,ref:e})})}),QL=m.forwardRef((t,e)=>{const n=Vu(al,t.__scopeTooltip),r=s0(al,t.__scopeTooltip),s=m.useRef(null),i=Te(e,s),[a,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),g=m.useCallback((v,x)=>{const b=v.currentTarget,_={x:v.clientX,y:v.clientY},w=e6(_,b.getBoundingClientRect()),N=t6(_,w),k=n6(x.getBoundingClientRect()),R=s6([...N,...k]);l(R),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const v=b=>g(b,h),x=b=>g(b,c);return c.addEventListener("pointerleave",v),h.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",v),h.removeEventListener("pointerleave",x)}}},[c,h,g,p]),m.useEffect(()=>{if(a){const v=x=>{const b=x.target,_={x:x.clientX,y:x.clientY},w=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),N=!r6(_,a);w?p():N&&(p(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,h,a,u,p]),o.jsx(Oj,{...t,ref:i})}),[XL,YL]=vm(bm,{isInside:!1}),JL=xC("TooltipContent"),Oj=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=Vu(al,n),u=wm(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(zx,h),()=>document.removeEventListener(zx,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),o.jsx(Nl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:o.jsxs(n0,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(JL,{children:r}),o.jsx(XL,{scope:n,isInside:!0,children:o.jsx(aO,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Mj.displayName=al;var Lj="TooltipArrow",ZL=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=wm(n);return YL(Lj,n).isInside?null:o.jsx(r0,{...s,...r,ref:e})});ZL.displayName=Lj;function e6(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function t6(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function n6(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function r6(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,h=e[a].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function s6(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),i6(e)}function i6(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var o6=Ij,a6=Rj,l6=Pj,o0=Dj,Vj=Mj;const Ui=o6,Ds=a6,Ms=l6,os=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(o0,{children:o.jsx(Vj,{ref:r,sideOffset:e,className:U("z-[100] overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n})}));os.displayName=Vj.displayName;const c6="modulepreload",u6=function(t){return"/"+t},d_={},Sa=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=u6(c),c in d_)return;d_[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":c6,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},d6=()=>{};var h_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},h6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},zj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,a||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):h6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new f6;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const v=u<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class f6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m6=function(t){const e=Fj(t);return zj.encodeByteArray(e,!0)},ff=function(t){return m6(t).replace(/\./g,"")},Uj=function(t){try{return zj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6=()=>p6().__FIREBASE_DEFAULTS__,x6=()=>{if(typeof process>"u"||typeof h_>"u")return;const t=h_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},y6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uj(t[1]);return e&&JSON.parse(e)},_m=()=>{try{return d6()||g6()||x6()||y6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$j=t=>{var e,n;return(n=(e=_m())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},v6=t=>{const e=$j(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bj=()=>{var t;return(t=_m())==null?void 0:t.config},Wj=t=>{var e;return(e=_m())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ff(JSON.stringify(n)),ff(JSON.stringify(a)),""].join(".")}const Rc={};function _6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Rc))Rc[e]?t.emulator.push(e):t.prod.push(e);return t}function N6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let f_=!1;function qj(t,e){if(typeof window>"u"||typeof document>"u"||!kl(window.location.host)||Rc[t]===e||Rc[t]||f_)return;Rc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=_6().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{f_=!0,a()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=N6(r),g=n("text"),v=document.getElementById(g)||document.createElement("span"),x=n("learnmore"),b=document.getElementById(x)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const N=p.element;l(N),h(b,x);const k=u();c(w,_),N.append(w,v,b,k),document.body.appendChild(N)}i?(v.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function S6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function E6(){var e;const t=(e=_m())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function T6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function C6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function j6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function k6(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function A6(){return!E6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I6(){try{return typeof indexedDB=="object"}catch{return!1}}function R6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="FirebaseError";class Us extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=P6,Object.setPrototypeOf(this,Us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fu.prototype.create)}}class Fu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?D6(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Us(s,l,r)}}function D6(t,e){return t.replace(M6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const M6=/\{\$([^}]+)}/g;function O6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $i(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(m_(i)&&m_(a)){if(!$i(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function m_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function L6(t,e){const n=new V6(t,e);return n.subscribe.bind(n)}class V6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");F6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=og),s.error===void 0&&(s.error=og),s.complete===void 0&&(s.complete=og);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function og(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){return t&&t._delegate?t._delegate:t}class Bo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new w6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($6(e))try{this.getOrInitializeService({instanceIdentifier:yo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yo){return this.instances.has(e)}getOptions(e=yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yo){return this.component?this.component.multipleInstances?e:yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U6(t){return t===yo?void 0:t}function $6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new z6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const W6={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},H6=je.INFO,q6={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},G6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=q6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class a0{constructor(e){this.name=e,this._logLevel=H6,this._logHandler=G6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?W6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const K6=(t,e)=>e.some(n=>t instanceof n);let p_,g_;function Q6(){return p_||(p_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X6(){return g_||(g_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gj=new WeakMap,$x=new WeakMap,Kj=new WeakMap,ag=new WeakMap,l0=new WeakMap;function Y6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(ji(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Gj.set(n,t)}).catch(()=>{}),l0.set(e,t),e}function J6(t){if($x.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});$x.set(t,e)}let Bx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $x.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ji(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Z6(t){Bx=t(Bx)}function eV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lg(this),e,...n);return Kj.set(r,e.sort?e.sort():[e]),ji(r)}:X6().includes(t)?function(...e){return t.apply(lg(this),e),ji(Gj.get(this))}:function(...e){return ji(t.apply(lg(this),e))}}function tV(t){return typeof t=="function"?eV(t):(t instanceof IDBTransaction&&J6(t),K6(t,Q6())?new Proxy(t,Bx):t)}function ji(t){if(t instanceof IDBRequest)return Y6(t);if(ag.has(t))return ag.get(t);const e=tV(t);return e!==t&&(ag.set(t,e),l0.set(e,t)),e}const lg=t=>l0.get(t);function nV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=ji(a);return r&&a.addEventListener("upgradeneeded",c=>{r(ji(a.result),c.oldVersion,c.newVersion,ji(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const rV=["get","getKey","getAll","getAllKeys","count"],sV=["put","add","delete","clear"],cg=new Map;function x_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cg.get(e))return cg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=sV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||rV.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return cg.set(e,i),i}Z6(t=>({...t,get:(e,n,r)=>x_(e,n)||t.get(e,n,r),has:(e,n)=>!!x_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wx="@firebase/app",y_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new a0("@firebase/app"),aV="@firebase/app-compat",lV="@firebase/analytics-compat",cV="@firebase/analytics",uV="@firebase/app-check-compat",dV="@firebase/app-check",hV="@firebase/auth",fV="@firebase/auth-compat",mV="@firebase/database",pV="@firebase/data-connect",gV="@firebase/database-compat",xV="@firebase/functions",yV="@firebase/functions-compat",vV="@firebase/installations",wV="@firebase/installations-compat",bV="@firebase/messaging",_V="@firebase/messaging-compat",NV="@firebase/performance",SV="@firebase/performance-compat",EV="@firebase/remote-config",TV="@firebase/remote-config-compat",CV="@firebase/storage",jV="@firebase/storage-compat",kV="@firebase/firestore",AV="@firebase/ai",IV="@firebase/firestore-compat",RV="firebase",PV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hx="[DEFAULT]",DV={[Wx]:"fire-core",[aV]:"fire-core-compat",[cV]:"fire-analytics",[lV]:"fire-analytics-compat",[dV]:"fire-app-check",[uV]:"fire-app-check-compat",[hV]:"fire-auth",[fV]:"fire-auth-compat",[mV]:"fire-rtdb",[pV]:"fire-data-connect",[gV]:"fire-rtdb-compat",[xV]:"fire-fn",[yV]:"fire-fn-compat",[vV]:"fire-iid",[wV]:"fire-iid-compat",[bV]:"fire-fcm",[_V]:"fire-fcm-compat",[NV]:"fire-perf",[SV]:"fire-perf-compat",[EV]:"fire-rc",[TV]:"fire-rc-compat",[CV]:"fire-gcs",[jV]:"fire-gcs-compat",[kV]:"fire-fst",[IV]:"fire-fst-compat",[AV]:"fire-vertex","fire-js":"fire-js",[RV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new Map,MV=new Map,qx=new Map;function v_(t,e){try{t.container.addComponent(e)}catch(n){Os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ll(t){const e=t.name;if(qx.has(e))return Os.debug(`There were multiple attempts to register component ${e}.`),!1;qx.set(e,t);for(const n of mf.values())v_(n,t);for(const n of MV.values())v_(n,t);return!0}function c0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ki=new Fu("app","Firebase",OV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=PV;function Qj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Hx,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ki.create("bad-app-name",{appName:String(s)});if(n||(n=Bj()),!n)throw ki.create("no-options");const i=mf.get(s);if(i){if($i(n,i.options)&&$i(r,i.config))return i;throw ki.create("duplicate-app",{appName:s})}const a=new B6(s);for(const c of qx.values())a.addComponent(c);const l=new LV(n,r,a);return mf.set(s,l),l}function Xj(t=Hx){const e=mf.get(t);if(!e&&t===Hx&&Bj())return Qj();if(!e)throw ki.create("no-app",{appName:t});return e}function Ai(t,e,n){let r=DV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Os.warn(a.join(" "));return}ll(new Bo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV="firebase-heartbeat-database",FV=1,du="firebase-heartbeat-store";let ug=null;function Yj(){return ug||(ug=nV(VV,FV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(du)}catch(n){console.warn(n)}}}}).catch(t=>{throw ki.create("idb-open",{originalErrorMessage:t.message})})),ug}async function zV(t){try{const n=(await Yj()).transaction(du),r=await n.objectStore(du).get(Jj(t));return await n.done,r}catch(e){if(e instanceof Us)Os.warn(e.message);else{const n=ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Os.warn(n.message)}}}async function w_(t,e){try{const r=(await Yj()).transaction(du,"readwrite");await r.objectStore(du).put(e,Jj(t)),await r.done}catch(n){if(n instanceof Us)Os.warn(n.message);else{const r=ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Os.warn(r.message)}}}function Jj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UV=1024,$V=30;class BV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=b_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>$V){const a=qV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Os.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b_(),{heartbeatsToSend:r,unsentEntries:s}=WV(this._heartbeatsCache.heartbeats),i=ff(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Os.warn(n),""}}}function b_(){return new Date().toISOString().substring(0,10)}function WV(t,e=UV){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),__(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),__(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return I6()?R6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return w_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return w_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function __(t){return ff(JSON.stringify({version:2,heartbeats:t})).length}function qV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(t){ll(new Bo("platform-logger",e=>new iV(e),"PRIVATE")),ll(new Bo("heartbeat",e=>new BV(e),"PRIVATE")),Ai(Wx,y_,t),Ai(Wx,y_,"esm2020"),Ai("fire-js","")}GV("");function Zj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KV=Zj,e2=new Fu("auth","Firebase",Zj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=new a0("@firebase/auth");function QV(t,...e){pf.logLevel<=je.WARN&&pf.warn(`Auth (${Al}): ${t}`,...e)}function bh(t,...e){pf.logLevel<=je.ERROR&&pf.error(`Auth (${Al}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,...e){throw d0(t,...e)}function Cr(t,...e){return d0(t,...e)}function u0(t,e,n){const r={...KV(),[e]:n};return new Fu("auth","Firebase",r).create(e,{appName:t.name})}function Ro(t){return u0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&as(t,"argument-error"),u0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function d0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return e2.create(t,...e)}function ve(t,e,...n){if(!t)throw d0(e,...n)}function _s(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bh(e),new Error(e)}function Ls(t,e){t||_s(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function YV(){return N_()==="http:"||N_()==="https:"}function N_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YV()||C6()||"connection"in navigator)?navigator.onLine:!0}function ZV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ls(n>e,"Short delay should be less than long delay!"),this.isMobile=S6()||j6()}get(){return JV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t,e){Ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nF=new Uu(3e4,6e4);function f0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Jo(t,e,n,r,s={}){return n2(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=zu({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return T6()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&kl(t.emulatorConfig.host)&&(u.credentials="include"),t2.fetch()(await r2(t,t.config.apiHost,n,l),u)})}async function n2(t,e,n){t._canInitEmulator=!1;const r={...eF,...e};try{const s=new sF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Hd(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Hd(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Hd(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Hd(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw u0(t,h,u);as(t,h)}}catch(s){if(s instanceof Us)throw s;as(t,"network-request-failed",{message:String(s)})}}async function rF(t,e,n,r,s={}){const i=await Jo(t,e,n,r,s);return"mfaPendingCredential"in i&&as(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function r2(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?h0(t.config,s):`${t.config.apiScheme}://${s}`;return tF.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class sF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cr(this.auth,"network-request-failed")),nF.get())})}}function Hd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iF(t,e){return Jo(t,"POST","/v1/accounts:delete",e)}async function gf(t,e){return Jo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oF(t,e=!1){const n=Nt(t),r=await n.getIdToken(e),s=m0(r);ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Pc(dg(s.auth_time)),issuedAtTime:Pc(dg(s.iat)),expirationTime:Pc(dg(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dg(t){return Number(t)*1e3}function m0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Uj(n);return s?JSON.parse(s):(bh("Failed to decode base64 JWT payload"),null)}catch(s){return bh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function S_(t){const e=m0(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Us&&aF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xf(t){var f;const e=t.auth,n=await t.getIdToken(),r=await cl(t,gf(e,{idToken:n}));ve(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?s2(s.providerUserInfo):[],a=uF(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kx(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function cF(t){const e=Nt(t);await xf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function s2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dF(t,e){const n=await n2(t,{},async()=>{const r=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await r2(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&kl(t.emulatorConfig.host)&&(c.credentials="include"),t2.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hF(t,e){return Jo(t,"POST","/v2/accounts:revokeToken",f0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=S_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await dF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Ma;return r&&(ve(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ve(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ve(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ma,this.toJSON())}_performRefresh(){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new lF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kx(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await cl(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oF(this,e)}reload(){return cF(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wr(this.auth.app))return Promise.reject(Ro(this.auth));const e=await this.getIdToken();return await cl(this,iF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:v,stsTokenManager:x}=n;ve(f&&x,e,"internal-error");const b=Ma.fromJSON(this.name,x);ve(typeof f=="string",e,"internal-error"),Zs(r,e.name),Zs(s,e.name),ve(typeof p=="boolean",e,"internal-error"),ve(typeof g=="boolean",e,"internal-error"),Zs(i,e.name),Zs(a,e.name),Zs(l,e.name),Zs(c,e.name),Zs(u,e.name),Zs(h,e.name);const _=new Sr({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:b,createdAt:u,lastLoginAt:h});return v&&Array.isArray(v)&&(_.providerData=v.map(w=>({...w}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ma;s.updateFromServerResponse(n);const i=new Sr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ve(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?s2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ma;l.updateFromIdToken(r);const c=new Sr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Kx(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Map;function Ns(t){Ls(t instanceof Function,"Expected a class definition");let e=E_.get(t);return e?(Ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}i2.type="NONE";const T_=i2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t,e,n){return`firebase:${t}:${e}:${n}`}class Oa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=_h(this.userKey,s.apiKey,i),this.fullPersistenceKey=_h("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await gf(this.auth,{idToken:e}).catch(()=>{});return n?Sr._fromGetAccountInfoResponse(this.auth,n,e):null}return Sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Oa(Ns(T_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Ns(T_);const a=_h(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const p=await gf(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Sr._fromGetAccountInfoResponse(e,p,h)}else f=Sr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Oa(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Oa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d2(e))return"Blackberry";if(h2(e))return"Webos";if(a2(e))return"Safari";if((e.includes("chrome/")||l2(e))&&!e.includes("edge/"))return"Chrome";if(u2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function o2(t=rn()){return/firefox\//i.test(t)}function a2(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l2(t=rn()){return/crios\//i.test(t)}function c2(t=rn()){return/iemobile/i.test(t)}function u2(t=rn()){return/android/i.test(t)}function d2(t=rn()){return/blackberry/i.test(t)}function h2(t=rn()){return/webos/i.test(t)}function p0(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fF(t=rn()){var e;return p0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function mF(){return k6()&&document.documentMode===10}function f2(t=rn()){return p0(t)||u2(t)||h2(t)||d2(t)||/windows phone/i.test(t)||c2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t,e=[]){let n;switch(t){case"Browser":n=C_(rn());break;case"Worker":n=`${C_(rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gF(t,e={}){return Jo(t,"GET","/v2/passwordPolicy",f0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF=6;class yF{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??xF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new j_(this),this.idTokenSubscription=new j_(this),this.beforeStateQueue=new pF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ns(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Oa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await gf(this,{idToken:e}),r=await Sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(wr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ZV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wr(this.app))return Promise.reject(Ro(this));const n=e?Nt(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wr(this.app)?Promise.reject(Ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wr(this.app)?Promise.reject(Ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gF(this),n=new yF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ns(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Oa.create(this,[Ns(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&QV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Nm(t){return Nt(t)}class j_{constructor(e){this.auth=e,this.observer=null,this.addObserver=L6(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wF(t){g0=t}function bF(t){return g0.loadJS(t)}function _F(){return g0.gapiScript}function NF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SF(t,e){const n=c0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if($i(i,e??{}))return s;as(s,"already-initialized")}return n.initialize({options:e})}function EF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ns);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TF(t,e,n){const r=Nm(t);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=p2(e),{host:a,port:l}=CF(e),c=l===null?"":`:${l}`,u={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve($i(u,r.config.emulator)&&$i(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,kl(a)?(Hj(`${i}//${a}${c}`),qj("Auth",!0)):jF()}function p2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CF(t){const e=p2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:k_(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:k_(a)}}}function k_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _s("not implemented")}_getIdTokenResponse(e){return _s("not implemented")}_linkToIdToken(e,n){return _s("not implemented")}_getReauthenticationResolver(e){return _s("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function La(t,e){return rF(t,"POST","/v1/accounts:signInWithIdp",f0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF="http://localhost";class Wo extends g2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):as("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new Wo(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return La(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,La(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,La(e,n)}buildRequest(){const e={requestUri:kF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=zu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u extends x0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends $u{constructor(){super("facebook.com")}static credential(e){return Wo._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt extends $u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wo._fromParams({providerId:Zt.PROVIDER_ID,signInMethod:Zt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zt.credentialFromTaggedObject(e)}static credentialFromError(e){return Zt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zt.credential(n,r)}catch{return null}}}Zt.GOOGLE_SIGN_IN_METHOD="google.com";Zt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends $u{constructor(){super("github.com")}static credential(e){return Wo._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends $u{constructor(){super("twitter.com")}static credential(e,n){return Wo._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ui.credential(n,r)}catch{return null}}}ui.TWITTER_SIGN_IN_METHOD="twitter.com";ui.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Sr._fromIdTokenResponse(e,r,s),a=A_(r);return new ul({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=A_(r);return new ul({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function A_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends Us{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,yf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new yf(e,n,r,s)}}function x2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?yf._fromErrorAndOperation(t,i,e,r):i})}async function AF(t,e,n=!1){const r=await cl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ul._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(t,e,n=!1){const{auth:r}=t;if(wr(r.app))return Promise.reject(Ro(r));const s="reauthenticate";try{const i=await cl(t,x2(r,s,e,t),n);ve(i.idToken,r,"internal-error");const a=m0(i.idToken);ve(a,r,"internal-error");const{sub:l}=a;return ve(t.uid===l,r,"user-mismatch"),ul._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&as(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RF(t,e,n=!1){if(wr(t.app))return Promise.reject(Ro(t));const r="signIn",s=await x2(t,r,e),i=await ul._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PF(t,e){return Jo(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DF(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Nt(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await cl(r,PF(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MF(t,e){return Nt(t).setPersistence(e)}function OF(t,e,n,r){return Nt(t).onIdTokenChanged(e,n,r)}function LF(t,e,n){return Nt(t).beforeAuthStateChanged(e,n)}function VF(t,e,n,r){return Nt(t).onAuthStateChanged(e,n,r)}function FF(t){return Nt(t).signOut()}const vf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vf,"1"),this.storage.removeItem(vf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=1e3,UF=10;class v2 extends y2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);mF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}v2.type="LOCAL";const w2=v2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2 extends y2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}b2.type="SESSION";const _2=b2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Sm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async u=>u(n.origin,i)),c=await $F(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const u=y0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function WF(t){ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function HF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function GF(){return N2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="firebaseLocalStorageDb",KF=1,wf="firebaseLocalStorage",E2="fbase_key";class Bu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Em(t,e){return t.transaction([wf],e?"readwrite":"readonly").objectStore(wf)}function QF(){const t=indexedDB.deleteDatabase(S2);return new Bu(t).toPromise()}function Qx(){const t=indexedDB.open(S2,KF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wf,{keyPath:E2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wf)?e(r):(r.close(),await QF(),e(await Qx()))})})}async function I_(t,e,n){const r=Em(t,!0).put({[E2]:e,value:n});return new Bu(r).toPromise()}async function XF(t,e){const n=Em(t,!1).get(e),r=await new Bu(n).toPromise();return r===void 0?null:r.value}function R_(t,e){const n=Em(t,!0).delete(e);return new Bu(n).toPromise()}const YF=800,JF=3;class T2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sm._getInstance(GF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await HF(),!this.activeServiceWorker)return;this.sender=new BF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qx();return await I_(e,vf,"1"),await R_(e,vf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>I_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>XF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>R_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Em(s,!1).getAll();return new Bu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}T2.type="LOCAL";const ZF=T2;new Uu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t,e){return e?Ns(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0 extends g2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return La(e,this._buildIdpRequest())}_linkToIdToken(e,n){return La(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return La(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function e9(t){return RF(t.auth,new v0(t),t.bypassAuthState)}function t9(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),IF(n,new v0(t),t.bypassAuthState)}async function n9(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),AF(n,new v0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e9;case"linkViaPopup":case"linkViaRedirect":return n9;case"reauthViaPopup":case"reauthViaRedirect":return t9;default:as(this.auth,"internal-error")}}resolve(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9=new Uu(2e3,1e4);async function qd(t,e,n){if(wr(t.app))return Promise.reject(Cr(t,"operation-not-supported-in-this-environment"));const r=Nm(t);XV(t,e,x0);const s=C2(r,n);return new _o(r,"signInViaPopup",e,s).executeNotNull()}class _o extends j2{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Ls(this.filter.length===1,"Popup operations only handle one event");const e=y0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r9.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="pendingRedirect",Nh=new Map;class i9 extends j2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nh.get(this.auth._key());if(!e){try{const r=await o9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nh.set(this.auth._key(),e)}return this.bypassAuthState||Nh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o9(t,e){const n=c9(e),r=l9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function a9(t,e){Nh.set(t._key(),e)}function l9(t){return Ns(t._redirectPersistence)}function c9(t){return _h(s9,t.config.apiKey,t.name)}async function u9(t,e,n=!1){if(wr(t.app))return Promise.reject(Ro(t));const r=Nm(t),s=C2(r,e),a=await new i9(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=10*60*1e3;class h9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!k2(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d9&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(e))}saveEventToCache(e){this.cachedEventUids.add(P_(e)),this.lastProcessedEventTime=Date.now()}}function P_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function k2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m9(t,e={}){return Jo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g9=/^https?/;async function x9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await m9(t);for(const n of e)try{if(y9(n))return}catch{}as(t,"unauthorized-domain")}function y9(t){const e=Gx(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!g9.test(n))return!1;if(p9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=new Uu(3e4,6e4);function D_(){const t=ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function w9(t){return new Promise((e,n)=>{var s,i,a;function r(){D_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D_(),n(Cr(t,"network-request-failed"))},timeout:v9.get()})}if((i=(s=ts().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=ts().gapi)!=null&&a.load)r();else{const l=NF("iframefcb");return ts()[l]=()=>{gapi.load?r():n(Cr(t,"network-request-failed"))},bF(`${_F()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Sh=null,e})}let Sh=null;function b9(t){return Sh=Sh||w9(t),Sh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=new Uu(5e3,15e3),N9="__/auth/iframe",S9="emulator/auth/iframe",E9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function C9(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?h0(e,S9):`https://${t.config.authDomain}/${N9}`,r={apiKey:e.apiKey,appName:t.name,v:Al},s=T9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${zu(r).slice(1)}`}async function j9(t){const e=await b9(t),n=ts().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:C9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:E9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Cr(t,"network-request-failed"),l=ts().setTimeout(()=>{i(a)},_9.get());function c(){ts().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A9=500,I9=600,R9="_blank",P9="http://localhost";class M_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D9(t,e,n,r=A9,s=I9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...k9,width:r.toString(),height:s.toString(),top:i,left:a},u=rn().toLowerCase();n&&(l=l2(u)?R9:n),o2(u)&&(e=e||P9,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,v])=>`${p}${g}=${v},`,"");if(fF(u)&&l!=="_self")return M9(e||"",l),new M_(null);const f=window.open(e||"",l,h);ve(f,t,"popup-blocked");try{f.focus()}catch{}return new M_(f)}function M9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="__/auth/handler",L9="emulator/auth/handler",V9=encodeURIComponent("fac");async function O_(t,e,n,r,s,i){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Al,eventId:s};if(e instanceof x0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",O6(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof $u){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${V9}=${encodeURIComponent(c)}`:"";return`${F9(t)}?${zu(l).slice(1)}${u}`}function F9({config:t}){return t.emulator?h0(t,L9):`https://${t.authDomain}/${O9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="webStorageSupport";class z9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_2,this._completeRedirectFn=u9,this._overrideRedirectResult=a9}async _openPopup(e,n,r,s){var a;Ls((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await O_(e,n,r,Gx(),s);return D9(e,i,y0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await O_(e,n,r,Gx(),s);return WF(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ls(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await j9(e),r=new h9(e);return n.register("authEvent",s=>(ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hg,{type:hg},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[hg];i!==void 0&&n(!!i),as(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=x9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return f2()||a2()||p0()}}const U9=z9;var L_="@firebase/auth",V_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W9(t){ll(new Bo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;ve(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m2(t)},u=new vF(r,s,i,c);return EF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ll(new Bo("auth-internal",e=>{const n=Nm(e.getProvider("auth").getImmediate());return(r=>new $9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(L_,V_,B9(t)),Ai(L_,V_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9=5*60,q9=Wj("authIdTokenMaxAge")||H9;let F_=null;const G9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>q9)return;const s=n==null?void 0:n.token;F_!==s&&(F_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K9(t=Xj()){const e=c0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=SF(t,{popupRedirectResolver:U9,persistence:[ZF,w2,_2]}),r=Wj("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=G9(i.toString());LF(n,a,()=>a(n.currentUser)),OF(n,l=>a(l))}}const s=$j("auth");return s&&TF(n,`http://${s}`),n}function Q9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}wF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Q9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W9("Browser");var X9="firebase",Y9="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(X9,Y9,"app");var z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ii,A2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,C){function T(){}T.prototype=C.prototype,S.F=C.prototype,S.prototype=new T,S.prototype.constructor=S,S.D=function(j,A,D){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return C.prototype[A].apply(j,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,C,T){T||(T=0);const j=Array(16);if(typeof C=="string")for(var A=0;A<16;++A)j[A]=C.charCodeAt(T++)|C.charCodeAt(T++)<<8|C.charCodeAt(T++)<<16|C.charCodeAt(T++)<<24;else for(A=0;A<16;++A)j[A]=C[T++]|C[T++]<<8|C[T++]<<16|C[T++]<<24;C=S.g[0],T=S.g[1],A=S.g[2];let D=S.g[3],P;P=C+(D^T&(A^D))+j[0]+3614090360&4294967295,C=T+(P<<7&4294967295|P>>>25),P=D+(A^C&(T^A))+j[1]+3905402710&4294967295,D=C+(P<<12&4294967295|P>>>20),P=A+(T^D&(C^T))+j[2]+606105819&4294967295,A=D+(P<<17&4294967295|P>>>15),P=T+(C^A&(D^C))+j[3]+3250441966&4294967295,T=A+(P<<22&4294967295|P>>>10),P=C+(D^T&(A^D))+j[4]+4118548399&4294967295,C=T+(P<<7&4294967295|P>>>25),P=D+(A^C&(T^A))+j[5]+1200080426&4294967295,D=C+(P<<12&4294967295|P>>>20),P=A+(T^D&(C^T))+j[6]+2821735955&4294967295,A=D+(P<<17&4294967295|P>>>15),P=T+(C^A&(D^C))+j[7]+4249261313&4294967295,T=A+(P<<22&4294967295|P>>>10),P=C+(D^T&(A^D))+j[8]+1770035416&4294967295,C=T+(P<<7&4294967295|P>>>25),P=D+(A^C&(T^A))+j[9]+2336552879&4294967295,D=C+(P<<12&4294967295|P>>>20),P=A+(T^D&(C^T))+j[10]+4294925233&4294967295,A=D+(P<<17&4294967295|P>>>15),P=T+(C^A&(D^C))+j[11]+2304563134&4294967295,T=A+(P<<22&4294967295|P>>>10),P=C+(D^T&(A^D))+j[12]+1804603682&4294967295,C=T+(P<<7&4294967295|P>>>25),P=D+(A^C&(T^A))+j[13]+4254626195&4294967295,D=C+(P<<12&4294967295|P>>>20),P=A+(T^D&(C^T))+j[14]+2792965006&4294967295,A=D+(P<<17&4294967295|P>>>15),P=T+(C^A&(D^C))+j[15]+1236535329&4294967295,T=A+(P<<22&4294967295|P>>>10),P=C+(A^D&(T^A))+j[1]+4129170786&4294967295,C=T+(P<<5&4294967295|P>>>27),P=D+(T^A&(C^T))+j[6]+3225465664&4294967295,D=C+(P<<9&4294967295|P>>>23),P=A+(C^T&(D^C))+j[11]+643717713&4294967295,A=D+(P<<14&4294967295|P>>>18),P=T+(D^C&(A^D))+j[0]+3921069994&4294967295,T=A+(P<<20&4294967295|P>>>12),P=C+(A^D&(T^A))+j[5]+3593408605&4294967295,C=T+(P<<5&4294967295|P>>>27),P=D+(T^A&(C^T))+j[10]+38016083&4294967295,D=C+(P<<9&4294967295|P>>>23),P=A+(C^T&(D^C))+j[15]+3634488961&4294967295,A=D+(P<<14&4294967295|P>>>18),P=T+(D^C&(A^D))+j[4]+3889429448&4294967295,T=A+(P<<20&4294967295|P>>>12),P=C+(A^D&(T^A))+j[9]+568446438&4294967295,C=T+(P<<5&4294967295|P>>>27),P=D+(T^A&(C^T))+j[14]+3275163606&4294967295,D=C+(P<<9&4294967295|P>>>23),P=A+(C^T&(D^C))+j[3]+4107603335&4294967295,A=D+(P<<14&4294967295|P>>>18),P=T+(D^C&(A^D))+j[8]+1163531501&4294967295,T=A+(P<<20&4294967295|P>>>12),P=C+(A^D&(T^A))+j[13]+2850285829&4294967295,C=T+(P<<5&4294967295|P>>>27),P=D+(T^A&(C^T))+j[2]+4243563512&4294967295,D=C+(P<<9&4294967295|P>>>23),P=A+(C^T&(D^C))+j[7]+1735328473&4294967295,A=D+(P<<14&4294967295|P>>>18),P=T+(D^C&(A^D))+j[12]+2368359562&4294967295,T=A+(P<<20&4294967295|P>>>12),P=C+(T^A^D)+j[5]+4294588738&4294967295,C=T+(P<<4&4294967295|P>>>28),P=D+(C^T^A)+j[8]+2272392833&4294967295,D=C+(P<<11&4294967295|P>>>21),P=A+(D^C^T)+j[11]+1839030562&4294967295,A=D+(P<<16&4294967295|P>>>16),P=T+(A^D^C)+j[14]+4259657740&4294967295,T=A+(P<<23&4294967295|P>>>9),P=C+(T^A^D)+j[1]+2763975236&4294967295,C=T+(P<<4&4294967295|P>>>28),P=D+(C^T^A)+j[4]+1272893353&4294967295,D=C+(P<<11&4294967295|P>>>21),P=A+(D^C^T)+j[7]+4139469664&4294967295,A=D+(P<<16&4294967295|P>>>16),P=T+(A^D^C)+j[10]+3200236656&4294967295,T=A+(P<<23&4294967295|P>>>9),P=C+(T^A^D)+j[13]+681279174&4294967295,C=T+(P<<4&4294967295|P>>>28),P=D+(C^T^A)+j[0]+3936430074&4294967295,D=C+(P<<11&4294967295|P>>>21),P=A+(D^C^T)+j[3]+3572445317&4294967295,A=D+(P<<16&4294967295|P>>>16),P=T+(A^D^C)+j[6]+76029189&4294967295,T=A+(P<<23&4294967295|P>>>9),P=C+(T^A^D)+j[9]+3654602809&4294967295,C=T+(P<<4&4294967295|P>>>28),P=D+(C^T^A)+j[12]+3873151461&4294967295,D=C+(P<<11&4294967295|P>>>21),P=A+(D^C^T)+j[15]+530742520&4294967295,A=D+(P<<16&4294967295|P>>>16),P=T+(A^D^C)+j[2]+3299628645&4294967295,T=A+(P<<23&4294967295|P>>>9),P=C+(A^(T|~D))+j[0]+4096336452&4294967295,C=T+(P<<6&4294967295|P>>>26),P=D+(T^(C|~A))+j[7]+1126891415&4294967295,D=C+(P<<10&4294967295|P>>>22),P=A+(C^(D|~T))+j[14]+2878612391&4294967295,A=D+(P<<15&4294967295|P>>>17),P=T+(D^(A|~C))+j[5]+4237533241&4294967295,T=A+(P<<21&4294967295|P>>>11),P=C+(A^(T|~D))+j[12]+1700485571&4294967295,C=T+(P<<6&4294967295|P>>>26),P=D+(T^(C|~A))+j[3]+2399980690&4294967295,D=C+(P<<10&4294967295|P>>>22),P=A+(C^(D|~T))+j[10]+4293915773&4294967295,A=D+(P<<15&4294967295|P>>>17),P=T+(D^(A|~C))+j[1]+2240044497&4294967295,T=A+(P<<21&4294967295|P>>>11),P=C+(A^(T|~D))+j[8]+1873313359&4294967295,C=T+(P<<6&4294967295|P>>>26),P=D+(T^(C|~A))+j[15]+4264355552&4294967295,D=C+(P<<10&4294967295|P>>>22),P=A+(C^(D|~T))+j[6]+2734768916&4294967295,A=D+(P<<15&4294967295|P>>>17),P=T+(D^(A|~C))+j[13]+1309151649&4294967295,T=A+(P<<21&4294967295|P>>>11),P=C+(A^(T|~D))+j[4]+4149444226&4294967295,C=T+(P<<6&4294967295|P>>>26),P=D+(T^(C|~A))+j[11]+3174756917&4294967295,D=C+(P<<10&4294967295|P>>>22),P=A+(C^(D|~T))+j[2]+718787259&4294967295,A=D+(P<<15&4294967295|P>>>17),P=T+(D^(A|~C))+j[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.v=function(S,C){C===void 0&&(C=S.length);const T=C-this.blockSize,j=this.C;let A=this.h,D=0;for(;D<C;){if(A==0)for(;D<=T;)s(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<C;)if(j[A++]=S.charCodeAt(D++),A==this.blockSize){s(this,j),A=0;break}}else for(;D<C;)if(j[A++]=S[D++],A==this.blockSize){s(this,j),A=0;break}}this.h=A,this.o+=C},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;C=this.o*8;for(var T=S.length-8;T<S.length;++T)S[T]=C&255,C/=256;for(this.v(S),S=Array(16),C=0,T=0;T<4;++T)for(let j=0;j<32;j+=8)S[C++]=this.g[T]>>>j&255;return S};function i(S,C){var T=l;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=C(S)}function a(S,C){this.h=C;const T=[];let j=!0;for(let A=S.length-1;A>=0;A--){const D=S[A]|0;j&&D==C||(T[A]=D,j=!1)}this.g=T}var l={};function c(S){return-128<=S&&S<128?i(S,function(C){return new a([C|0],C<0?-1:0)}):new a([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(S<0)return b(u(-S));const C=[];let T=1;for(let j=0;S>=T;j++)C[j]=S/T|0,T*=4294967296;return new a(C,0)}function h(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return b(h(S.substring(1),C));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=u(Math.pow(C,8));let j=f;for(let D=0;D<S.length;D+=8){var A=Math.min(8,S.length-D);const P=parseInt(S.substring(D,D+A),C);A<8?(A=u(Math.pow(C,A)),j=j.j(A).add(u(P))):(j=j.j(T),j=j.add(u(P)))}return j}var f=c(0),p=c(1),g=c(16777216);t=a.prototype,t.m=function(){if(x(this))return-b(this).m();let S=0,C=1;for(let T=0;T<this.g.length;T++){const j=this.i(T);S+=(j>=0?j:4294967296+j)*C,C*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(x(this))return"-"+b(this).toString(S);const C=u(Math.pow(S,6));var T=this;let j="";for(;;){const A=k(T,C).g;T=_(T,A.j(C));let D=((T.g.length>0?T.g[0]:T.h)>>>0).toString(S);if(T=A,v(T))return D+j;for(;D.length<6;)D="0"+D;j=D+j}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(let C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function x(S){return S.h==-1}t.l=function(S){return S=_(this,S),x(S)?-1:v(S)?0:1};function b(S){const C=S.g.length,T=[];for(let j=0;j<C;j++)T[j]=~S.g[j];return new a(T,~S.h).add(p)}t.abs=function(){return x(this)?b(this):this},t.add=function(S){const C=Math.max(this.g.length,S.g.length),T=[];let j=0;for(let A=0;A<=C;A++){let D=j+(this.i(A)&65535)+(S.i(A)&65535),P=(D>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);j=P>>>16,D&=65535,P&=65535,T[A]=P<<16|D}return new a(T,T[T.length-1]&-2147483648?-1:0)};function _(S,C){return S.add(b(C))}t.j=function(S){if(v(this)||v(S))return f;if(x(this))return x(S)?b(this).j(b(S)):b(b(this).j(S));if(x(S))return b(this.j(b(S)));if(this.l(g)<0&&S.l(g)<0)return u(this.m()*S.m());const C=this.g.length+S.g.length,T=[];for(var j=0;j<2*C;j++)T[j]=0;for(j=0;j<this.g.length;j++)for(let A=0;A<S.g.length;A++){const D=this.i(j)>>>16,P=this.i(j)&65535,B=S.i(A)>>>16,Q=S.i(A)&65535;T[2*j+2*A]+=P*Q,w(T,2*j+2*A),T[2*j+2*A+1]+=D*Q,w(T,2*j+2*A+1),T[2*j+2*A+1]+=P*B,w(T,2*j+2*A+1),T[2*j+2*A+2]+=D*B,w(T,2*j+2*A+2)}for(S=0;S<C;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=C;S<2*C;S++)T[S]=0;return new a(T,0)};function w(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function N(S,C){this.g=S,this.h=C}function k(S,C){if(v(C))throw Error("division by zero");if(v(S))return new N(f,f);if(x(S))return C=k(b(S),C),new N(b(C.g),b(C.h));if(x(C))return C=k(S,b(C)),new N(b(C.g),C.h);if(S.g.length>30){if(x(S)||x(C))throw Error("slowDivide_ only works with positive integers.");for(var T=p,j=C;j.l(S)<=0;)T=R(T),j=R(j);var A=M(T,1),D=M(j,1);for(j=M(j,2),T=M(T,2);!v(j);){var P=D.add(j);P.l(S)<=0&&(A=A.add(T),D=P),j=M(j,1),T=M(T,1)}return C=_(S,A.j(C)),new N(A,C)}for(A=f;S.l(C)>=0;){for(T=Math.max(1,Math.floor(S.m()/C.m())),j=Math.ceil(Math.log(T)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),D=u(T),P=D.j(C);x(P)||P.l(S)>0;)T-=j,D=u(T),P=D.j(C);v(D)&&(D=p),A=A.add(D),S=_(S,P)}return new N(A,S)}t.B=function(S){return k(this,S).h},t.and=function(S){const C=Math.max(this.g.length,S.g.length),T=[];for(let j=0;j<C;j++)T[j]=this.i(j)&S.i(j);return new a(T,this.h&S.h)},t.or=function(S){const C=Math.max(this.g.length,S.g.length),T=[];for(let j=0;j<C;j++)T[j]=this.i(j)|S.i(j);return new a(T,this.h|S.h)},t.xor=function(S){const C=Math.max(this.g.length,S.g.length),T=[];for(let j=0;j<C;j++)T[j]=this.i(j)^S.i(j);return new a(T,this.h^S.h)};function R(S){const C=S.g.length+1,T=[];for(let j=0;j<C;j++)T[j]=S.i(j)<<1|S.i(j-1)>>>31;return new a(T,S.h)}function M(S,C){const T=C>>5;C%=32;const j=S.g.length-T,A=[];for(let D=0;D<j;D++)A[D]=C>0?S.i(D+T)>>>C|S.i(D+T+1)<<32-C:S.i(D+T);return new a(A,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,A2=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Ii=a}).apply(typeof z_<"u"?z_:typeof self<"u"?self:typeof window<"u"?window:{});var Gd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var I2,gc,R2,Eh,Xx,P2,D2,M2;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Gd=="object"&&Gd];for(var y=0;y<d.length;++y){var E=d[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var E=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var V=d[I];if(!(V in E))break e;E=E[V]}d=d[d.length-1],I=E[d],y=y(I),y!=I&&y!=null&&e(E,d,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(y){var E=[],I;for(I in y)Object.prototype.hasOwnProperty.call(y,I)&&E.push([I,y[I]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function c(d,y,E){return d.call.apply(d.bind,arguments)}function u(d,y,E){return u=c,u.apply(null,arguments)}function h(d,y){var E=Array.prototype.slice.call(arguments,1);return function(){var I=E.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function f(d,y){function E(){}E.prototype=y.prototype,d.Z=y.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(I,V,F){for(var oe=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)oe[Ne-2]=arguments[Ne];return y.prototype[V].apply(I,oe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function g(d){const y=d.length;if(y>0){const E=Array(y);for(let I=0;I<y;I++)E[I]=d[I];return E}return[]}function v(d,y){for(let I=1;I<arguments.length;I++){const V=arguments[I];var E=typeof V;if(E=E!="object"?E:V?Array.isArray(V)?"array":E:"null",E=="array"||E=="object"&&typeof V.length=="number"){E=d.length||0;const F=V.length||0;d.length=E+F;for(let oe=0;oe<F;oe++)d[E+oe]=V[oe]}else d.push(V)}}class x{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function b(d){a.setTimeout(()=>{throw d},0)}function _(){var d=S;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class w{constructor(){this.h=this.g=null}add(y,E){const I=N.get();I.set(y,E),this.h?this.h.next=I:this.g=I,this.h=I}}var N=new x(()=>new k,d=>d.reset());class k{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let R,M=!1,S=new w,C=()=>{const d=Promise.resolve(void 0);R=()=>{d.then(T)}};function T(){for(var d;d=_();){try{d.h.call(d.g)}catch(E){b(E)}var y=N;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}M=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};a.addEventListener("test",E,y),a.removeEventListener("test",E,y)}catch{}return d}();function P(d){return/^[\s\xa0]*$/.test(d)}function B(d,y){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}f(B,A),B.prototype.init=function(d,y){const E=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(E=="mouseover"?y=d.fromElement:E=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),ne=0;function ee(d,y,E,I,V){this.listener=d,this.proxy=null,this.src=y,this.type=E,this.capture=!!I,this.ha=V,this.key=++ne,this.da=this.fa=!1}function L(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function z(d,y,E){for(const I in d)y.call(E,d[I],I,d)}function G(d,y){for(const E in d)y.call(void 0,d[E],E,d)}function $(d){const y={};for(const E in d)y[E]=d[E];return y}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(d,y){let E,I;for(let V=1;V<arguments.length;V++){I=arguments[V];for(E in I)d[E]=I[E];for(let F=0;F<W.length;F++)E=W[F],Object.prototype.hasOwnProperty.call(I,E)&&(d[E]=I[E])}}function re(d){this.src=d,this.g={},this.h=0}re.prototype.add=function(d,y,E,I,V){const F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);const oe=se(d,y,I,V);return oe>-1?(y=d[oe],E||(y.fa=!1)):(y=new ee(y,this.src,F,!!I,V),y.fa=E,d.push(y)),y};function te(d,y){const E=y.type;if(E in d.g){var I=d.g[E],V=Array.prototype.indexOf.call(I,y,void 0),F;(F=V>=0)&&Array.prototype.splice.call(I,V,1),F&&(L(y),d.g[E].length==0&&(delete d.g[E],d.h--))}}function se(d,y,E,I){for(let V=0;V<d.length;++V){const F=d[V];if(!F.da&&F.listener==y&&F.capture==!!E&&F.ha==I)return V}return-1}var O="closure_lm_"+(Math.random()*1e6|0),Y={};function ae(d,y,E,I,V){if(Array.isArray(y)){for(let F=0;F<y.length;F++)ae(d,y[F],E,I,V);return null}return E=Ft(E),d&&d[Q]?d.J(y,E,l(I)?!!I.capture:!!I,V):X(d,y,E,!1,I,V)}function X(d,y,E,I,V,F){if(!y)throw Error("Invalid event type");const oe=l(V)?!!V.capture:!!V;let Ne=Ie(d);if(Ne||(d[O]=Ne=new re(d)),E=Ne.add(y,E,I,oe,F),E.proxy)return E;if(I=he(),E.proxy=I,I.src=d,I.listener=E,d.addEventListener)D||(V=oe),V===void 0&&(V=!1),d.addEventListener(y.toString(),I,V);else if(d.attachEvent)d.attachEvent(Ee(y.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return E}function he(){function d(E){return y.call(d.src,d.listener,E)}const y=pt;return d}function ie(d,y,E,I,V){if(Array.isArray(y))for(var F=0;F<y.length;F++)ie(d,y[F],E,I,V);else I=l(I)?!!I.capture:!!I,E=Ft(E),d&&d[Q]?(d=d.i,F=String(y).toString(),F in d.g&&(y=d.g[F],E=se(y,E,I,V),E>-1&&(L(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete d.g[F],d.h--)))):d&&(d=Ie(d))&&(y=d.g[y.toString()],d=-1,y&&(d=se(y,E,I,V)),(E=d>-1?y[d]:null)&&ge(E))}function ge(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Q])te(y.i,d);else{var E=d.type,I=d.proxy;y.removeEventListener?y.removeEventListener(E,I,d.capture):y.detachEvent?y.detachEvent(Ee(E),I):y.addListener&&y.removeListener&&y.removeListener(I),(E=Ie(y))?(te(E,d),E.h==0&&(E.src=null,y[O]=null)):L(d)}}}function Ee(d){return d in Y?Y[d]:Y[d]="on"+d}function pt(d,y){if(d.da)d=!0;else{y=new B(y,this);const E=d.listener,I=d.ha||d.src;d.fa&&ge(d),d=E.call(I,y)}return d}function Ie(d){return d=d[O],d instanceof re?d:null}var Be="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ft(d){return typeof d=="function"?d:(d[Be]||(d[Be]=function(y){return d.handleEvent(y)}),d[Be])}function He(){j.call(this),this.i=new re(this),this.M=this,this.G=null}f(He,j),He.prototype[Q]=!0,He.prototype.removeEventListener=function(d,y,E,I){ie(this,d,y,E,I)};function Ke(d,y){var E,I=d.G;if(I)for(E=[];I;I=I.G)E.push(I);if(d=d.M,I=y.type||y,typeof y=="string")y=new A(y,d);else if(y instanceof A)y.target=y.target||d;else{var V=y;y=new A(I,d),J(y,V)}V=!0;let F,oe;if(E)for(oe=E.length-1;oe>=0;oe--)F=y.g=E[oe],V=cr(F,I,!0,y)&&V;if(F=y.g=d,V=cr(F,I,!0,y)&&V,V=cr(F,I,!1,y)&&V,E)for(oe=0;oe<E.length;oe++)F=y.g=E[oe],V=cr(F,I,!1,y)&&V}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const E=d.g[y];for(let I=0;I<E.length;I++)L(E[I]);delete d.g[y],d.h--}}this.G=null},He.prototype.J=function(d,y,E,I){return this.i.add(String(d),y,!1,E,I)},He.prototype.K=function(d,y,E,I){return this.i.add(String(d),y,!0,E,I)};function cr(d,y,E,I){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let V=!0;for(let F=0;F<y.length;++F){const oe=y[F];if(oe&&!oe.da&&oe.capture==E){const Ne=oe.listener,Tt=oe.ha||oe.src;oe.fa&&te(d.i,oe),V=Ne.call(Tt,I)!==!1&&V}}return V&&!I.defaultPrevented}function Bs(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(d,y||0)}function Bl(d){d.g=Bs(()=>{d.g=null,d.i&&(d.i=!1,Bl(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class ld extends j{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Bl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function io(d){j.call(this),this.h=d,this.g={}}f(io,j);var cd=[];function ms(d){z(d.g,function(y,E){this.g.hasOwnProperty(E)&&ge(y)},d),d.g={}}io.prototype.N=function(){io.Z.N.call(this),ms(this)},io.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=a.JSON.stringify,oo=a.JSON.parse,ud=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function ur(){}function Wl(){}var ao={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Hl(){A.call(this,"d")}f(Hl,A);function lo(){A.call(this,"c")}f(lo,A);var Fr={},dd=null;function co(){return dd=dd||new He}Fr.Ia="serverreachability";function hd(d){A.call(this,Fr.Ia,d)}f(hd,A);function uo(d){const y=co();Ke(y,new hd(y))}Fr.STAT_EVENT="statevent";function fd(d,y){A.call(this,Fr.STAT_EVENT,d),this.stat=y}f(fd,A);function Le(d){const y=co();Ke(y,new fd(y,d))}Fr.Ja="timingevent";function qt(d,y){A.call(this,Fr.Ja,d),this.size=y}f(qt,A);function St(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function mn(){this.g=!0}mn.prototype.ua=function(){this.g=!1};function pn(d,y,E,I,V,F){d.info(function(){if(d.g)if(F){var oe="",Ne=F.split("&");for(let qe=0;qe<Ne.length;qe++){var Tt=Ne[qe].split("=");if(Tt.length>1){const Rt=Tt[0];Tt=Tt[1];const $r=Rt.split("_");oe=$r.length>=2&&$r[1]=="type"?oe+(Rt+"="+Tt+"&"):oe+(Rt+"=redacted&")}}}else oe=null;else oe=F;return"XMLHTTP REQ ("+I+") [attempt "+V+"]: "+y+`
`+E+`
`+oe})}function sn(d,y,E,I,V,F,oe){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+V+"]: "+y+`
`+E+`
`+F+" "+oe})}function zt(d,y,E,I){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Et(d,E)+(I?" "+I:"")})}function Ws(d,y){d.info(function(){return"TIMEOUT: "+y})}mn.prototype.info=function(){};function Et(d,y){if(!d.g)return y;if(!y)return null;try{const F=JSON.parse(y);if(F){for(d=0;d<F.length;d++)if(Array.isArray(F[d])){var E=F[d];if(!(E.length<2)){var I=E[1];if(Array.isArray(I)&&!(I.length<1)){var V=I[0];if(V!="noop"&&V!="stop"&&V!="close")for(let oe=1;oe<I.length;oe++)I[oe]=""}}}}return Vr(F)}catch{return y}}var Rn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xn;function ps(){}f(ps,ur),ps.prototype.g=function(){return new XMLHttpRequest},Xn=new ps;function dr(d){return encodeURIComponent(String(d))}function zr(d){var y=1;d=d.split(":");const E=[];for(;y>0&&d.length;)E.push(d.shift()),y--;return d.length&&E.push(d.join(":")),E}function gn(d,y,E,I){this.j=d,this.i=y,this.l=E,this.S=I||1,this.V=new io(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ta}function ta(){this.i=null,this.g="",this.h=!1}var zw={},hp={};function fp(d,y,E){d.M=1,d.A=pd(Ur(y)),d.u=E,d.R=!0,Uw(d,null)}function Uw(d,y){d.F=Date.now(),md(d),d.B=Ur(d.A);var E=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),eb(E.i,"t",I),d.C=0,E=d.j.L,d.h=new ta,d.g=yb(d.j,E?y:null,!d.u),d.P>0&&(d.O=new ld(u(d.Y,d,d.g),d.P)),y=d.V,E=d.g,I=d.ba;var V="readystatechange";Array.isArray(V)||(V&&(cd[0]=V.toString()),V=cd);for(let F=0;F<V.length;F++){const oe=ae(E,V[F],I||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=d.J?$(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),uo(),pn(d.i,d.v,d.B,d.l,d.S,d.u)}gn.prototype.ba=function(d){d=d.target;const y=this.O;y&&Gs(d)==3?y.j():this.Y(d)},gn.prototype.Y=function(d){try{if(d==this.g)e:{const Ne=Gs(this.g),Tt=this.g.ya(),qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||ab(this.g)))){this.K||Ne!=4||Tt==7||(Tt==8||qe<=0?uo(3):uo(2)),mp(this);var y=this.g.ca();this.X=y;var E=UP(this);if(this.o=y==200,sn(this.i,this.v,this.B,this.l,this.S,Ne,y),this.o){if(this.U&&!this.L){t:{if(this.g){var I,V=this.g;if((I=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(I)){var F=I;break t}}F=null}if(d=F)zt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pp(this,d);else{this.o=!1,this.m=3,Le(12),ho(this),ql(this);break e}}if(this.R){d=!0;let Rt;for(;!this.K&&this.C<E.length;)if(Rt=$P(this,E),Rt==hp){Ne==4&&(this.m=4,Le(14),d=!1),zt(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==zw){this.m=4,Le(15),zt(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else zt(this.i,this.l,Rt,null),pp(this,Rt);if($w(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||E.length!=0||this.h.h||(this.m=1,Le(16),d=!1),this.o=this.o&&d,!d)zt(this.i,this.l,E,"[Invalid Chunked Response]"),ho(this),ql(this);else if(E.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Np(oe),oe.P=!0,Le(11))}}else zt(this.i,this.l,E,null),pp(this,E);Ne==4&&ho(this),this.o&&!this.K&&(Ne==4?mb(this.j,this):(this.o=!1,md(this)))}else nD(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,Le(12)):(this.m=0,Le(13)),ho(this),ql(this)}}}catch{}finally{}};function UP(d){if(!$w(d))return d.g.la();const y=ab(d.g);if(y==="")return"";let E="";const I=y.length,V=Gs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return ho(d),ql(d),"";d.h.i=new a.TextDecoder}for(let F=0;F<I;F++)d.h.h=!0,E+=d.h.i.decode(y[F],{stream:!(V&&F==I-1)});return y.length=0,d.h.g+=E,d.C=0,d.h.g}function $w(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function $P(d,y){var E=d.C,I=y.indexOf(`
`,E);return I==-1?hp:(E=Number(y.substring(E,I)),isNaN(E)?zw:(I+=1,I+E>y.length?hp:(y=y.slice(I,I+E),d.C=I+E,y)))}gn.prototype.cancel=function(){this.K=!0,ho(this)};function md(d){d.T=Date.now()+d.H,Bw(d,d.H)}function Bw(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=St(u(d.aa,d),y)}function mp(d){d.D&&(a.clearTimeout(d.D),d.D=null)}gn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ws(this.i,this.B),this.M!=2&&(uo(),Le(17)),ho(this),this.m=2,ql(this)):Bw(this,this.T-d)};function ql(d){d.j.I==0||d.K||mb(d.j,d)}function ho(d){mp(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,ms(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function pp(d,y){try{var E=d.j;if(E.I!=0&&(E.g==d||gp(E.h,d))){if(!d.L&&gp(E.h,d)&&E.I==3){try{var I=E.Ba.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var V=I;if(V[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)wd(E),yd(E);else break e;_p(E),Le(18)}}else E.xa=V[1],0<E.xa-E.K&&V[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=St(u(E.Va,E),6e3));qw(E.h)<=1&&E.ta&&(E.ta=void 0)}else mo(E,11)}else if((d.L||E.g==d)&&wd(E),!P(y))for(V=E.Ba.g.parse(y),y=0;y<V.length;y++){let qe=V[y];const Rt=qe[0];if(!(Rt<=E.K))if(E.K=Rt,qe=qe[1],E.I==2)if(qe[0]=="c"){E.M=qe[1],E.ba=qe[2];const $r=qe[3];$r!=null&&(E.ka=$r,E.j.info("VER="+E.ka));const po=qe[4];po!=null&&(E.za=po,E.j.info("SVER="+E.za));const Ks=qe[5];Ks!=null&&typeof Ks=="number"&&Ks>0&&(I=1.5*Ks,E.O=I,E.j.info("backChannelRequestTimeoutMs_="+I)),I=E;const Qs=d.g;if(Qs){const _d=Qs.g?Qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_d){var F=I.h;F.g||_d.indexOf("spdy")==-1&&_d.indexOf("quic")==-1&&_d.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(xp(F,F.h),F.h=null))}if(I.G){const Sp=Qs.g?Qs.g.getResponseHeader("X-HTTP-Session-Id"):null;Sp&&(I.wa=Sp,Je(I.J,I.G,Sp))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),I=E;var oe=d;if(I.na=xb(I,I.L?I.ba:null,I.W),oe.L){Gw(I.h,oe);var Ne=oe,Tt=I.O;Tt&&(Ne.H=Tt),Ne.D&&(mp(Ne),md(Ne)),I.g=oe}else hb(I);E.i.length>0&&vd(E)}else qe[0]!="stop"&&qe[0]!="close"||mo(E,7);else E.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?mo(E,7):bp(E):qe[0]!="noop"&&E.l&&E.l.qa(qe),E.A=0)}}uo(4)}catch{}}var BP=class{constructor(d,y){this.g=d,this.map=y}};function Ww(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Hw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function qw(d){return d.h?1:d.g?d.g.size:0}function gp(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function xp(d,y){d.g?d.g.add(y):d.h=y}function Gw(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Ww.prototype.cancel=function(){if(this.i=Kw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Kw(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const E of d.g.values())y=y.concat(E.G);return y}return g(d.i)}var Qw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WP(d,y){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const I=d[E].indexOf("=");let V,F=null;I>=0?(V=d[E].substring(0,I),F=d[E].substring(I+1)):V=d[E],y(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Hs(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Hs?(this.l=d.l,Gl(this,d.j),this.o=d.o,this.g=d.g,Kl(this,d.u),this.h=d.h,yp(this,tb(d.i)),this.m=d.m):d&&(y=String(d).match(Qw))?(this.l=!1,Gl(this,y[1]||"",!0),this.o=Ql(y[2]||""),this.g=Ql(y[3]||"",!0),Kl(this,y[4]),this.h=Ql(y[5]||"",!0),yp(this,y[6]||"",!0),this.m=Ql(y[7]||"")):(this.l=!1,this.i=new Yl(null,this.l))}Hs.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(Xl(y,Xw,!0),":");var E=this.g;return(E||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Xl(y,Xw,!0),"@"),d.push(dr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Xl(E,E.charAt(0)=="/"?GP:qP,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Xl(E,QP)),d.join("")},Hs.prototype.resolve=function(d){const y=Ur(this);let E=!!d.j;E?Gl(y,d.j):E=!!d.o,E?y.o=d.o:E=!!d.g,E?y.g=d.g:E=d.u!=null;var I=d.h;if(E)Kl(y,d.u);else if(E=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var V=y.h.lastIndexOf("/");V!=-1&&(I=y.h.slice(0,V+1)+I)}if(V=I,V==".."||V==".")I="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){I=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let oe=0;oe<V.length;){const Ne=V[oe++];Ne=="."?I&&oe==V.length&&F.push(""):Ne==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),I&&oe==V.length&&F.push("")):(F.push(Ne),I=!0)}I=F.join("/")}else I=V}return E?y.h=I:E=d.i.toString()!=="",E?yp(y,tb(d.i)):E=!!d.m,E&&(y.m=d.m),y};function Ur(d){return new Hs(d)}function Gl(d,y,E){d.j=E?Ql(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Kl(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function yp(d,y,E){y instanceof Yl?(d.i=y,XP(d.i,d.l)):(E||(y=Xl(y,KP)),d.i=new Yl(y,d.l))}function Je(d,y,E){d.i.set(y,E)}function pd(d){return Je(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ql(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Xl(d,y,E){return typeof d=="string"?(d=encodeURI(d).replace(y,HP),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function HP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Xw=/[#\/\?@]/g,qP=/[#\?:]/g,GP=/[#\?]/g,KP=/[#\?@]/g,QP=/#/g;function Yl(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function fo(d){d.g||(d.g=new Map,d.h=0,d.i&&WP(d.i,function(y,E){d.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}t=Yl.prototype,t.add=function(d,y){fo(this),this.i=null,d=na(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(y),this.h+=1,this};function Yw(d,y){fo(d),y=na(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Jw(d,y){return fo(d),y=na(d,y),d.g.has(y)}t.forEach=function(d,y){fo(this),this.g.forEach(function(E,I){E.forEach(function(V){d.call(y,V,I,this)},this)},this)};function Zw(d,y){fo(d);let E=[];if(typeof y=="string")Jw(d,y)&&(E=E.concat(d.g.get(na(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)E=E.concat(d[y]);return E}t.set=function(d,y){return fo(this),this.i=null,d=na(this,d),Jw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=Zw(this,d),d.length>0?String(d[0]):y):y};function eb(d,y,E){Yw(d,y),E.length>0&&(d.i=null,d.g.set(na(d,y),g(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let I=0;I<y.length;I++){var E=y[I];const V=dr(E);E=Zw(this,E);for(let F=0;F<E.length;F++){let oe=V;E[F]!==""&&(oe+="="+dr(E[F])),d.push(oe)}}return this.i=d.join("&")};function tb(d){const y=new Yl;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function na(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function XP(d,y){y&&!d.j&&(fo(d),d.i=null,d.g.forEach(function(E,I){const V=I.toLowerCase();I!=V&&(Yw(this,I),eb(this,V,E))},d)),d.j=y}function YP(d,y){const E=new mn;if(a.Image){const I=new Image;I.onload=h(qs,E,"TestLoadImage: loaded",!0,y,I),I.onerror=h(qs,E,"TestLoadImage: error",!1,y,I),I.onabort=h(qs,E,"TestLoadImage: abort",!1,y,I),I.ontimeout=h(qs,E,"TestLoadImage: timeout",!1,y,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else y(!1)}function JP(d,y){const E=new mn,I=new AbortController,V=setTimeout(()=>{I.abort(),qs(E,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:I.signal}).then(F=>{clearTimeout(V),F.ok?qs(E,"TestPingServer: ok",!0,y):qs(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(V),qs(E,"TestPingServer: error",!1,y)})}function qs(d,y,E,I,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),I(E)}catch{}}function ZP(){this.g=new ud}function vp(d){this.i=d.Sb||null,this.h=d.ab||!1}f(vp,ur),vp.prototype.g=function(){return new gd(this.i,this.h)};function gd(d,y){He.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(gd,He),t=gd.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,Zl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Jl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Zl(this)),this.g&&(this.readyState=3,Zl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;nb(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function nb(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Jl(this):Zl(this),this.readyState==3&&nb(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Jl(this))},t.Na=function(d){this.g&&(this.response=d,Jl(this))},t.ga=function(){this.g&&Jl(this)};function Jl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Zl(d)}t.setRequestHeader=function(d,y){this.A.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=y.next();return d.join(`\r
`)};function Zl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(gd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function rb(d){let y="";return z(d,function(E,I){y+=I,y+=":",y+=E,y+=`\r
`}),y}function wp(d,y,E){e:{for(I in E){var I=!1;break e}I=!0}I||(E=rb(E),typeof d=="string"?E!=null&&dr(E):Je(d,y,E))}function ut(d){He.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(ut,He);var eD=/^https?$/i,tD=["POST","PUT"];t=ut.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,y,E,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xn.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(F){sb(this,F);return}if(d=E||"",E=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var V in I)E.set(V,I[V]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const F of I.keys())E.set(F,I.get(F));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(E.keys()).find(F=>F.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(Array.prototype.indexOf.call(tD,y,void 0)>=0)||I||V||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,oe]of E)this.g.setRequestHeader(F,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(F){sb(this,F)}};function sb(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,ib(d),xd(d)}function ib(d){d.A||(d.A=!0,Ke(d,"complete"),Ke(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ke(this,"complete"),Ke(this,"abort"),xd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xd(this,!0)),ut.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ob(this):this.Xa())},t.Xa=function(){ob(this)};function ob(d){if(d.h&&typeof i<"u"){if(d.v&&Gs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ke(d,"readystatechange"),Gs(d)==4){d.h=!1;try{const F=d.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var I;if(I=F===0){let oe=String(d.D).match(Qw)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),I=!eD.test(oe?oe.toLowerCase():"")}E=I}if(E)Ke(d,"complete"),Ke(d,"success");else{d.o=6;try{var V=Gs(d)>2?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.ca()+"]",ib(d)}}finally{xd(d)}}}}function xd(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,y||Ke(d,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Gs(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Gs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),oo(y)}};function ab(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function nD(d){const y={};d=(d.g&&Gs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(P(d[I]))continue;var E=zr(d[I]);const V=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const F=y[V]||[];y[V]=F,F.push(E)}G(y,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ec(d,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||y}function lb(d){this.za=0,this.i=[],this.j=new mn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ec("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ec("baseRetryDelayMs",5e3,d),this.Za=ec("retryDelaySeedMs",1e4,d),this.Ta=ec("forwardChannelMaxRetries",2,d),this.va=ec("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Ww(d&&d.concurrentRequestLimit),this.Ba=new ZP,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=lb.prototype,t.ka=8,t.I=1,t.connect=function(d,y,E,I){Le(0),this.W=d,this.H=y||{},E&&I!==void 0&&(this.H.OSID=E,this.H.OAID=I),this.F=this.X,this.J=xb(this,null,this.W),vd(this)};function bp(d){if(cb(d),d.I==3){var y=d.V++,E=Ur(d.J);if(Je(E,"SID",d.M),Je(E,"RID",y),Je(E,"TYPE","terminate"),tc(d,E),y=new gn(d,d.j,y),y.M=2,y.A=pd(Ur(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&a.Image&&(new Image().src=y.A,E=!0),E||(y.g=yb(y.j,null),y.g.ea(y.A)),y.F=Date.now(),md(y)}gb(d)}function yd(d){d.g&&(Np(d),d.g.cancel(),d.g=null)}function cb(d){yd(d),d.v&&(a.clearTimeout(d.v),d.v=null),wd(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&a.clearTimeout(d.m),d.m=null)}function vd(d){if(!Hw(d.h)&&!d.m){d.m=!0;var y=d.Ea;R||C(),M||(R(),M=!0),S.add(y,d),d.D=0}}function rD(d,y){return qw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=St(u(d.Ea,d,y),pb(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const V=new gn(this,this.j,d);let F=this.o;if(this.U&&(F?(F=$(F),J(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var I=this.i[E];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=db(this,V,y),E=Ur(this.J),Je(E,"RID",d),Je(E,"CVER",22),this.G&&Je(E,"X-HTTP-Session-Id",this.G),tc(this,E),F&&(this.R?y="headers="+dr(rb(F))+"&"+y:this.u&&wp(E,this.u,F)),xp(this.h,V),this.Ra&&Je(E,"TYPE","init"),this.S?(Je(E,"$req",y),Je(E,"SID","null"),V.U=!0,fp(V,E,null)):fp(V,E,y),this.I=2}}else this.I==3&&(d?ub(this,d):this.i.length==0||Hw(this.h)||ub(this))};function ub(d,y){var E;y?E=y.l:E=d.V++;const I=Ur(d.J);Je(I,"SID",d.M),Je(I,"RID",E),Je(I,"AID",d.K),tc(d,I),d.u&&d.o&&wp(I,d.u,d.o),E=new gn(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),y&&(d.i=y.G.concat(d.i)),y=db(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),xp(d.h,E),fp(E,I,y)}function tc(d,y){d.H&&z(d.H,function(E,I){Je(y,I,E)}),d.l&&z({},function(E,I){Je(y,I,E)})}function db(d,y,E){E=Math.min(d.i.length,E);const I=d.l?u(d.l.Ka,d.l,d):null;e:{var V=d.i;let Ne=-1;for(;;){const Tt=["count="+E];Ne==-1?E>0?(Ne=V[0].g,Tt.push("ofs="+Ne)):Ne=0:Tt.push("ofs="+Ne);let qe=!0;for(let Rt=0;Rt<E;Rt++){var F=V[Rt].g;const $r=V[Rt].map;if(F-=Ne,F<0)Ne=Math.max(0,V[Rt].g-100),qe=!1;else try{F="req"+F+"_"||"";try{var oe=$r instanceof Map?$r:Object.entries($r);for(const[po,Ks]of oe){let Qs=Ks;l(Ks)&&(Qs=Vr(Ks)),Tt.push(F+po+"="+encodeURIComponent(Qs))}}catch(po){throw Tt.push(F+"type="+encodeURIComponent("_badmap")),po}}catch{I&&I($r)}}if(qe){oe=Tt.join("&");break e}}oe=void 0}return d=d.i.splice(0,E),y.G=d,oe}function hb(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;R||C(),M||(R(),M=!0),S.add(y,d),d.A=0}}function _p(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=St(u(d.Da,d),pb(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,fb(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=St(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Le(10),yd(this),fb(this))};function Np(d){d.B!=null&&(a.clearTimeout(d.B),d.B=null)}function fb(d){d.g=new gn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=Ur(d.na);Je(y,"RID","rpc"),Je(y,"SID",d.M),Je(y,"AID",d.K),Je(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&Je(y,"TO",d.ia),Je(y,"TYPE","xmlhttp"),tc(d,y),d.u&&d.o&&wp(y,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=pd(Ur(y)),E.u=null,E.R=!0,Uw(E,d)}t.Va=function(){this.C!=null&&(this.C=null,yd(this),_p(this),Le(19))};function wd(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function mb(d,y){var E=null;if(d.g==y){wd(d),Np(d),d.g=null;var I=2}else if(gp(d.h,y))E=y.G,Gw(d.h,y),I=1;else return;if(d.I!=0){if(y.o)if(I==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var V=d.D;I=co(),Ke(I,new qt(I,E)),vd(d)}else hb(d);else if(V=y.m,V==3||V==0&&y.X>0||!(I==1&&rD(d,y)||I==2&&_p(d)))switch(E&&E.length>0&&(y=d.h,y.i=y.i.concat(E)),V){case 1:mo(d,5);break;case 4:mo(d,10);break;case 3:mo(d,6);break;default:mo(d,2)}}}function pb(d,y){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*y}function mo(d,y){if(d.j.info("Error code "+y),y==2){var E=u(d.bb,d),I=d.Ua;const V=!I;I=new Hs(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gl(I,"https"),pd(I),V?YP(I.toString(),E):JP(I.toString(),E)}else Le(2);d.I=0,d.l&&d.l.pa(y),gb(d),cb(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function gb(d){if(d.I=0,d.ja=[],d.l){const y=Kw(d.h);(y.length!=0||d.i.length!=0)&&(v(d.ja,y),v(d.ja,d.i),d.h.i.length=0,g(d.i),d.i.length=0),d.l.oa()}}function xb(d,y,E){var I=E instanceof Hs?Ur(E):new Hs(E);if(I.g!="")y&&(I.g=y+"."+I.g),Kl(I,I.u);else{var V=a.location;I=V.protocol,y=y?y+"."+V.hostname:V.hostname,V=+V.port;const F=new Hs(null);I&&Gl(F,I),y&&(F.g=y),V&&Kl(F,V),E&&(F.h=E),I=F}return E=d.G,y=d.wa,E&&y&&Je(I,E,y),Je(I,"VER",d.ka),tc(d,I),I}function yb(d,y,E){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new ut(new vp({ab:E})):new ut(d.ma),y.Fa(d.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vb(){}t=vb.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function bd(){}bd.prototype.g=function(d,y){return new Dn(d,y)};function Dn(d,y){He.call(this),this.g=new lb(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!P(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new ra(this)}f(Dn,He),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){bp(this.g)},Dn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=Vr(d),d=E);y.i.push(new BP(y.Ya++,d)),y.I==3&&vd(y)},Dn.prototype.N=function(){this.g.l=null,delete this.j,bp(this.g),delete this.g,Dn.Z.N.call(this)};function wb(d){Hl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const E in y){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}f(wb,Hl);function bb(){lo.call(this),this.status=1}f(bb,lo);function ra(d){this.g=d}f(ra,vb),ra.prototype.ra=function(){Ke(this.g,"a")},ra.prototype.qa=function(d){Ke(this.g,new wb(d))},ra.prototype.pa=function(d){Ke(this.g,new bb)},ra.prototype.oa=function(){Ke(this.g,"b")},bd.prototype.createWebChannel=bd.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,M2=function(){return new bd},D2=function(){return co()},P2=Fr,Xx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Rn.NO_ERROR=0,Rn.TIMEOUT=8,Rn.HTTP_ERROR=6,Eh=Rn,Pn.COMPLETE="complete",R2=Pn,Wl.EventType=ao,ao.OPEN="a",ao.CLOSE="b",ao.ERROR="c",ao.MESSAGE="d",He.prototype.listen=He.prototype.J,gc=Wl,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,I2=ut}).apply(typeof Gd<"u"?Gd:typeof self<"u"?self:typeof window<"u"?window:{});const U_="@firebase/firestore",$_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Il="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=new a0("@firebase/firestore");function la(){return Ho.logLevel}function de(t,...e){if(Ho.logLevel<=je.DEBUG){const n=e.map(w0);Ho.debug(`Firestore (${Il}): ${t}`,...n)}}function Vs(t,...e){if(Ho.logLevel<=je.ERROR){const n=e.map(w0);Ho.error(`Firestore (${Il}): ${t}`,...n)}}function qo(t,...e){if(Ho.logLevel<=je.WARN){const n=e.map(w0);Ho.warn(`Firestore (${Il}): ${t}`,...n)}}function w0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,O2(t,r,n)}function O2(t,e,n){let r=`FIRESTORE (${Il}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Vs(r),new Error(r)}function Fe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||O2(e,s,r)}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Us{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class J9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z9{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Es,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Es)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string",31837,{l:r}),new L2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class ez{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tz{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ez(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Fe(this.o===void 0,3512);const r=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,de("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new B_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new B_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=rz(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Yx(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return fg(s)===fg(i)?ke(s,i):fg(s)?1:-1}return ke(t.length,e.length)}const sz=55296,iz=57343;function fg(t){const e=t.charCodeAt(0);return e>=sz&&e<=iz}function dl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="__name__";class Hr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ye(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Hr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Hr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ke(e.length,n.length)}static compareSegments(e,n){const r=Hr.isNumericId(e),s=Hr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Hr.extractNumericId(e).compare(Hr.extractNumericId(n)):Yx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ii.fromString(e.substring(4,e.length-2))}}class Qe extends Hr{construct(e,n,r){return new Qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const oz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends Hr{construct(e,n,r){return new Ot(e,n,r)}static isValidIdentifier(e){return oz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===W_}static keyField(){return new Ot([W_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new le(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new le(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(n)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Qe.fromString(e))}static fromName(e){return new pe(Qe.fromString(e).popFirst(5))}static empty(){return new pe(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t,e,n){if(!n)throw new le(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function z2(t,e,n,r){if(e===!0&&r===!0)throw new le(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H_(t){if(!pe.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q_(t){if(pe.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function U2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye(12329,{type:typeof t})}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cm(t);throw new le(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function az(t,e){if(e<=0)throw new le(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Wu(t,e){if(!U2(t))throw new le(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new le(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=-62135596800,K_=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*K_);return new Xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<G_)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/K_}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wu(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-G_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:bt("string",Xe._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Xe(0,0))}static max(){return new we(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=-1;function lz(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Bi(s,pe.empty(),e)}function cz(t){return new Bi(t.readTime,t.key,hu)}class Bi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Bi(we.min(),pe.empty(),hu)}static max(){return new Bi(we.max(),pe.empty(),hu)}}function uz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==dz)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{a[u]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function fz(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=-1;function km(t){return t==null}function bf(t){return t===0&&1/t==-1/0}function mz(t){return typeof t=="number"&&Number.isInteger(t)&&!bf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="";function pz(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Q_(e)),e=gz(t.get(n),e);return Q_(e)}function gz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case $2:n+="";break;default:n+=i}}return n}function Q_(t){return t+$2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function B2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kd(this.root,e,this.comparator,!0)}}class Kd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??$t.RED,this.left=s??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new $t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return $t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y_(this.data.getIterator())}getIteratorFrom(e){return new Y_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class Y_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new Un([])}unionWith(e){let n=new It(Ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Un(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new W2("Invalid base64 string: "+i):i}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const xz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wi(t){if(Fe(!!t,39018),typeof t=="string"){let e=0;const n=xz.exec(t);if(Fe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hi(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="server_timestamp",q2="__type__",G2="__previous_value__",K2="__local_write_time__";function _0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[q2])==null?void 0:r.stringValue)===H2}function Am(t){const e=t.mapValue.fields[G2];return _0(e)?Am(e):e}function fu(t){const e=Wi(t.mapValue.fields[K2].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e,n,r,s,i,a,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const _f="(default)";class hl{constructor(e,n){this.projectId=e,this.database=n||_f}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database===_f}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2="__type__",X2="__max__",Qd={mapValue:{fields:{__type__:{stringValue:X2}}}},Y2="__vector__",Nf="value";function qi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_0(t)?4:wz(t)?9007199254740991:vz(t)?10:11:ye(28295,{value:t})}function ls(t,e){if(t===e)return!0;const n=qi(t);if(n!==qi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fu(t).isEqual(fu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Wi(s.timestampValue),l=Wi(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Hi(s.bytesValue).isEqual(Hi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return gt(s.geoPointValue.latitude)===gt(i.geoPointValue.latitude)&&gt(s.geoPointValue.longitude)===gt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return gt(s.integerValue)===gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=gt(s.doubleValue),l=gt(i.doubleValue);return a===l?bf(a)===bf(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(X_(a)!==X_(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!ls(a[c],l[c])))return!1;return!0}(t,e);default:return ye(52216,{left:t})}}function mu(t,e){return(t.values||[]).find(n=>ls(n,e))!==void 0}function fl(t,e){if(t===e)return 0;const n=qi(t),r=qi(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=gt(i.integerValue||i.doubleValue),c=gt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return J_(t.timestampValue,e.timestampValue);case 4:return J_(fu(t),fu(e));case 5:return Yx(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Hi(i),c=Hi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=ke(l[u],c[u]);if(h!==0)return h}return ke(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ke(gt(i.latitude),gt(a.latitude));return l!==0?l:ke(gt(i.longitude),gt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Z_(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,g,v,x;const l=i.fields||{},c=a.fields||{},u=(p=l[Nf])==null?void 0:p.arrayValue,h=(g=c[Nf])==null?void 0:g.arrayValue,f=ke(((v=u==null?void 0:u.values)==null?void 0:v.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return f!==0?f:Z_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Qd.mapValue&&a===Qd.mapValue)return 0;if(i===Qd.mapValue)return 1;if(a===Qd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=a.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Yx(c[f],h[f]);if(p!==0)return p;const g=fl(l[c[f]],u[h[f]]);if(g!==0)return g}return ke(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ye(23264,{he:n})}}function J_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=Wi(t),r=Wi(e),s=ke(n.seconds,r.seconds);return s!==0?s:ke(n.nanos,r.nanos)}function Z_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=fl(n[s],r[s]);if(i)return i}return ke(n.length,r.length)}function ml(t){return Jx(t)}function Jx(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Jx(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Jx(n.fields[a])}`;return s+"}"}(t.mapValue):ye(61005,{value:t})}function Th(t){switch(qi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Am(t);return e?16+Th(e):16;case 5:return 2*t.stringValue.length;case 6:return Hi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Th(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return eo(r.fields,(i,a)=>{s+=i.length+Th(a)}),s}(t.mapValue);default:throw ye(13486,{value:t})}}function eN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zx(t){return!!t&&"integerValue"in t}function N0(t){return!!t&&"arrayValue"in t}function tN(t){return!!t&&"nullValue"in t}function nN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ch(t){return!!t&&"mapValue"in t}function vz(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Q2])==null?void 0:r.stringValue)===Y2}function Dc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Dc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dc(t.arrayValue.values[n]);return e}return{...t}}function wz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===X2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.value=e}static empty(){return new wn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ch(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dc(n)}setAll(e){let n=Ot.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Dc(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ch(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ch(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){eo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new wn(Dc(this.value))}}function J2(t){const e=[];return eo(t.fields,(n,r)=>{const s=new Ot([n]);if(Ch(r)){const i=J2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new tn(e,0,we.min(),we.min(),we.min(),wn.empty(),0)}static newFoundDocument(e,n,r,s){return new tn(e,1,n,we.min(),r,s,0)}static newNoDocument(e,n){return new tn(e,2,n,we.min(),we.min(),wn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,we.min(),we.min(),wn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){this.position=e,this.inclusive=n}}function rN(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=pe.comparator(pe.fromName(a.referenceValue),n.key):r=fl(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function sN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ls(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n="asc"){this.field=e,this.dir=n}}function bz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{}class wt extends Z2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Nz(e,n,r):n==="array-contains"?new Tz(e,r):n==="in"?new Cz(e,r):n==="not-in"?new jz(e,r):n==="array-contains-any"?new kz(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Sz(e,r):new Ez(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fl(n,this.value)):n!==null&&qi(this.value)===qi(n)&&this.matchesComparison(fl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dr extends Z2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Dr(e,n)}matches(e){return ek(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ek(t){return t.op==="and"}function tk(t){return _z(t)&&ek(t)}function _z(t){for(const e of t.filters)if(e instanceof Dr)return!1;return!0}function ey(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+ml(t.value);if(tk(t))return t.filters.map(e=>ey(e)).join(",");{const e=t.filters.map(n=>ey(n)).join(",");return`${t.op}(${e})`}}function nk(t,e){return t instanceof wt?function(r,s){return s instanceof wt&&r.op===s.op&&r.field.isEqual(s.field)&&ls(r.value,s.value)}(t,e):t instanceof Dr?function(r,s){return s instanceof Dr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&nk(a,s.filters[l]),!0):!1}(t,e):void ye(19439)}function rk(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${ml(n.value)}`}(t):t instanceof Dr?function(n){return n.op.toString()+" {"+n.getFilters().map(rk).join(" ,")+"}"}(t):"Filter"}class Nz extends wt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Sz extends wt{constructor(e,n){super(e,"in",n),this.keys=sk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ez extends wt{constructor(e,n){super(e,"not-in",n),this.keys=sk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class Tz extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return N0(n)&&mu(n.arrayValue,this.value)}}class Cz extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mu(this.value.arrayValue,n)}}class jz extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!mu(this.value.arrayValue,n)}}class kz extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!N0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function iN(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Az(t,e,n,r,s,i,a)}function S0(t){const e=be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ey(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),km(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ml(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ml(r)).join(",")),e.Te=n}return e.Te}function E0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sN(t.startAt,e.startAt)&&sN(t.endAt,e.endAt)}function ty(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Iz(t,e,n,r,s,i,a,l){return new Dl(t,e,n,r,s,i,a,l)}function Im(t){return new Dl(t)}function oN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ik(t){return t.collectionGroup!==null}function Mc(t){const e=be(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new It(Ot.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new pu(i,r))}),n.has(Ot.keyField().canonicalString())||e.Ie.push(new pu(Ot.keyField(),r))}return e.Ie}function ns(t){const e=be(t);return e.Ee||(e.Ee=Rz(e,Mc(t))),e.Ee}function Rz(t,e){if(t.limitType==="F")return iN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new pu(s.field,i)});const n=t.endAt?new Sf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sf(t.startAt.position,t.startAt.inclusive):null;return iN(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ny(t,e){const n=t.filters.concat([e]);return new Dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ef(t,e,n){return new Dl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rm(t,e){return E0(ns(t),ns(e))&&t.limitType===e.limitType}function ok(t){return`${S0(ns(t))}|lt:${t.limitType}`}function ca(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>rk(s)).join(", ")}]`),km(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ml(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ml(s)).join(",")),`Target(${r})`}(ns(t))}; limitType=${t.limitType})`}function Pm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):pe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Mc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const u=rN(a,l,c);return a.inclusive?u<=0:u<0}(r.startAt,Mc(r),s)||r.endAt&&!function(a,l,c){const u=rN(a,l,c);return a.inclusive?u>=0:u>0}(r.endAt,Mc(r),s))}(t,e)}function Pz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ak(t){return(e,n)=>{let r=!1;for(const s of Mc(t)){const i=Dz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Dz(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),u=l.data.field(i);return c!==null&&u!==null?fl(c,u):ye(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return B2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mz=new ct(pe.comparator);function Fs(){return Mz}const lk=new ct(pe.comparator);function xc(...t){let e=lk;for(const n of t)e=e.insert(n.key,n);return e}function ck(t){let e=lk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function No(){return Oc()}function uk(){return Oc()}function Oc(){return new Zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Oz=new ct(pe.comparator),Lz=new It(pe.comparator);function Ae(...t){let e=Lz;for(const n of t)e=e.add(n);return e}const Vz=new It(ke);function Fz(){return Vz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bf(e)?"-0":e}}function dk(t){return{integerValue:""+t}}function zz(t,e){return mz(e)?dk(e):T0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this._=void 0}}function Uz(t,e,n){return t instanceof gu?function(s,i){const a={fields:{[q2]:{stringValue:H2},[K2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&_0(i)&&(i=Am(i)),i&&(a.fields[G2]=i),{mapValue:a}}(n,e):t instanceof pl?fk(t,e):t instanceof xu?mk(t,e):function(s,i){const a=hk(s,i),l=aN(a)+aN(s.Ae);return Zx(a)&&Zx(s.Ae)?dk(l):T0(s.serializer,l)}(t,e)}function $z(t,e,n){return t instanceof pl?fk(t,e):t instanceof xu?mk(t,e):n}function hk(t,e){return t instanceof Tf?function(r){return Zx(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class gu extends Dm{}class pl extends Dm{constructor(e){super(),this.elements=e}}function fk(t,e){const n=pk(e);for(const r of t.elements)n.some(s=>ls(s,r))||n.push(r);return{arrayValue:{values:n}}}class xu extends Dm{constructor(e){super(),this.elements=e}}function mk(t,e){let n=pk(e);for(const r of t.elements)n=n.filter(s=>!ls(s,r));return{arrayValue:{values:n}}}class Tf extends Dm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function aN(t){return gt(t.integerValue||t.doubleValue)}function pk(t){return N0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n){this.field=e,this.transform=n}}function Bz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof pl&&s instanceof pl||r instanceof xu&&s instanceof xu?dl(r.elements,s.elements,ls):r instanceof Tf&&s instanceof Tf?ls(r.Ae,s.Ae):r instanceof gu&&s instanceof gu}(t.transform,e.transform)}class Wz{constructor(e,n){this.version=e,this.transformResults=n}}class ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mm{}function xk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new C0(t.key,ir.none()):new Hu(t.key,t.data,ir.none());{const n=t.data,r=wn.empty();let s=new It(Ot.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new to(t.key,r,new Un(s.toArray()),ir.none())}}function Hz(t,e,n){t instanceof Hu?function(s,i,a){const l=s.value.clone(),c=cN(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof to?function(s,i,a){if(!jh(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=cN(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(yk(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Lc(t,e,n,r){return t instanceof Hu?function(i,a,l,c){if(!jh(i.precondition,a))return l;const u=i.value.clone(),h=uN(i.fieldTransforms,c,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof to?function(i,a,l,c){if(!jh(i.precondition,a))return l;const u=uN(i.fieldTransforms,c,a),h=a.data;return h.setAll(yk(i)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return jh(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function qz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=hk(r.transform,s||null);i!=null&&(n===null&&(n=wn.empty()),n.set(r.field,i))}return n||null}function lN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dl(r,s,(i,a)=>Bz(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Hu extends Mm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class to extends Mm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cN(t,e,n){const r=new Map;Fe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,$z(a,l,n[s]))}return r}function uN(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Uz(i,a,e))}return r}class C0 extends Mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gz extends Mm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Hz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Lc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Lc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uk();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=xk(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(n,r)=>lN(n,r))&&dl(this.baseMutations,e.baseMutations,(n,r)=>lN(n,r))}}class j0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Fe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Oz}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new j0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qz=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,De;function Yz(t){switch(t){case H.OK:return ye(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ye(15467,{code:t})}}function vk(t){if(t===void 0)return Vs("GRPC error has no .code"),H.UNKNOWN;switch(t){case yt.OK:return H.OK;case yt.CANCELLED:return H.CANCELLED;case yt.UNKNOWN:return H.UNKNOWN;case yt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case yt.INTERNAL:return H.INTERNAL;case yt.UNAVAILABLE:return H.UNAVAILABLE;case yt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case yt.NOT_FOUND:return H.NOT_FOUND;case yt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case yt.ABORTED:return H.ABORTED;case yt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case yt.DATA_LOSS:return H.DATA_LOSS;default:return ye(39323,{code:t})}}(De=yt||(yt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz=new Ii([4294967295,4294967295],0);function dN(t){const e=Jz().encode(t),n=new A2;return n.update(e),new Uint8Array(n.digest())}function hN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ii([n,r],0),new Ii([s,i],0)]}class k0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yc(`Invalid padding: ${n}`);if(r<0)throw new yc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new yc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ii.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ii.fromNumber(r)));return s.compare(Zz)===1&&(s=new Ii([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dN(e),[r,s]=hN(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new k0(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=dN(e),[r,s]=hN(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class yc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,qu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Om(we.min(),s,new ct(ke),Fs(),Ae())}}class qu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qu(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class wk{constructor(e,n){this.targetId=e,this.Ce=n}}class bk{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class fN{constructor(){this.ve=0,this.Fe=mN(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),r=Ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ye(38017,{changeType:i})}}),new qu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=mN()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Fe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class e8{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fs(),this.Je=Xd(),this.He=Xd(),this.Ye=new ct(ke)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ty(i))if(r===0){const a=new pe(i.path);this.et(n,a,tn.newNoDocument(a,we.min()))}else Fe(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Hi(r).toUint8Array()}catch(c){if(c instanceof W2)return qo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new k0(a,s,i)}catch(c){return qo(c instanceof yc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&ty(l.target)){const c=new pe(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,tn.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Ae();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Om(e,n,this.Ye,this.je,r);return this.je=Fs(),this.Je=Xd(),this.He=Xd(),this.Ye=new ct(ke),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fN,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new It(ke),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new It(ke),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fN),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xd(){return new ct(pe.comparator)}function mN(){return new ct(pe.comparator)}const t8={asc:"ASCENDING",desc:"DESCENDING"},n8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r8={and:"AND",or:"OR"};class s8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ry(t,e){return t.useProto3Json||km(e)?e:{value:e}}function Cf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _k(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i8(t,e){return Cf(t,e.toTimestamp())}function rs(t){return Fe(!!t,49232),we.fromTimestamp(function(n){const r=Wi(n);return new Xe(r.seconds,r.nanos)}(t))}function A0(t,e){return sy(t,e).canonicalString()}function sy(t,e){const n=function(s){return new Qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Nk(t){const e=Qe.fromString(t);return Fe(jk(e),10190,{key:e.toString()}),e}function iy(t,e){return A0(t.databaseId,e.path)}function mg(t,e){const n=Nk(e);if(n.get(1)!==t.databaseId.projectId)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(Ek(n))}function Sk(t,e){return A0(t.databaseId,e)}function o8(t){const e=Nk(t);return e.length===4?Qe.emptyPath():Ek(e)}function oy(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ek(t){return Fe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function pN(t,e,n){return{name:iy(t,e),fields:n.value.mapValue.fields}}function a8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ye(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Fe(h===void 0||typeof h=="string",58123),Vt.fromBase64String(h||"")):(Fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const h=u.code===void 0?H.UNKNOWN:vk(u.code);return new le(h,u.message||"")}(a);n=new bk(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=mg(t,r.document.name),i=rs(r.document.updateTime),a=r.document.createTime?rs(r.document.createTime):we.min(),l=new wn({mapValue:{fields:r.document.fields}}),c=tn.newFoundDocument(s,i,a,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new kh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=mg(t,r.document),i=r.readTime?rs(r.readTime):we.min(),a=tn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new kh([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=mg(t,r.document),i=r.removedTargetIds||[];n=new kh([],i,s,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new Xz(s,i),l=r.targetId;n=new wk(l,a)}}return n}function l8(t,e){let n;if(e instanceof Hu)n={update:pN(t,e.key,e.value)};else if(e instanceof C0)n={delete:iy(t,e.key)};else if(e instanceof to)n={update:pN(t,e.key,e.data),updateMask:x8(e.fieldMask)};else{if(!(e instanceof Gz))return ye(16599,{Vt:e.type});n={verify:iy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof gu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof pl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Tf)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ye(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:i8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ye(27497)}(t,e.precondition)),n}function c8(t,e){return t&&t.length>0?(Fe(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?rs(s.updateTime):rs(i);return a.isEqual(we.min())&&(a=rs(i)),new Wz(a,s.transformResults||[])}(n,e))):[]}function u8(t,e){return{documents:[Sk(t,e.path)]}}function d8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Sk(t,s);const i=function(u){if(u.length!==0)return Ck(Dr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:ua(p.field),direction:m8(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=ry(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function h8(t){let e=o8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Fe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=Tk(f);return p instanceof Dr&&tk(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(p=>function(v){return new pu(da(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,km(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new Sf(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new Sf(g,p)}(n.endAt)),Iz(e,s,a,i,l,"F",c,u)}function f8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Tk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=da(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=da(n.unaryFilter.field);return wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=da(n.unaryFilter.field);return wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=da(n.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}}(t):t.fieldFilter!==void 0?function(n){return wt.create(da(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dr.create(n.compositeFilter.filters.map(r=>Tk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye(1026)}}(n.compositeFilter.op))}(t):ye(30097,{filter:t})}function m8(t){return t8[t]}function p8(t){return n8[t]}function g8(t){return r8[t]}function ua(t){return{fieldPath:t.canonicalString()}}function da(t){return Ot.fromServerFormat(t.fieldPath)}function Ck(t){return t instanceof wt?function(n){if(n.op==="=="){if(nN(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NAN"}};if(tN(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nN(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NAN"}};if(tN(n.value))return{unaryFilter:{field:ua(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(n.field),op:p8(n.op),value:n.value}}}(t):t instanceof Dr?function(n){const r=n.getFilters().map(s=>Ck(s));return r.length===1?r[0]:{compositeFilter:{op:g8(n.op),filters:r}}}(t):ye(54877,{filter:t})}function x8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function jk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n,r,s,i=we.min(),a=we.min(),l=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e){this.yt=e}}function v8(t){const e=h8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ef(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.Cn=new b8}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Bi.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class b8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(Qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kk=41943040;class xn{static withCacheSize(e){return new xn(e,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn.DEFAULT_COLLECTION_PERCENTILE=10,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xn.DEFAULT=new xn(kk,xn.DEFAULT_COLLECTION_PERCENTILE,xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xn.DISABLED=new xn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new gl(0)}static cr(){return new gl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="LruGarbageCollector",_8=1048576;function yN([t,e],[n,r]){const s=ke(t,n);return s===0?ke(e,r):s}class N8{constructor(e){this.Ir=e,this.buffer=new It(yN),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class S8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(xN,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Pl(n)?de(xN,"Ignoring IndexedDB error during garbage collection: ",n):await Rl(n)}await this.Vr(3e5)})}}class E8{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(jm.ce);const r=new N8(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(gN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gN):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),la()<=je.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function T8(t,e){return new E8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(){this.changes=new Zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Lc(r.mutation,s,Un.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=No();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=xc();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=No();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Fs();const a=Oc(),l=function(){return Oc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof to)?i=i.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Lc(h.mutation,u,h.mutation.getFieldMask(),Xe.now())):a.set(u.key,Un.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>l.set(u,new j8(h,a.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Oc();let s=new ct((a,l)=>a-l),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Un.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ae()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=uk();h.forEach(p=>{if(!i.has(p)){const g=xk(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return pe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ik(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(No());let l=hu,c=i;return a.next(u=>q.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ae())).next(h=>({batchId:l,changes:ck(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let s=xc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=xc();return this.indexManager.getCollectionParents(e,i).next(l=>q.forEach(l,c=>{const u=function(f,p){return new Dl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,tn.newInvalidDocument(h)))});let l=xc();return a.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Lc(h.mutation,u,Un.empty(),Xe.now()),Pm(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:rs(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:v8(s.bundledQuery),readTime:rs(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(){this.overlays=new ct(pe.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=No();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=No(),i=n.length+1,a=new pe(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ct((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=No(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=No(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return q.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Qz(n,r));let i=this.qr.get(n);i===void 0&&(i=Ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(){this.Qr=new It(Pt.$r),this.Ur=new It(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Pt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new pe(new Qe([])),r=new Pt(n,e),s=new Pt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new Qe([])),r=new Pt(n,e),s=new Pt(n,e+1);let i=Ae();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Pt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||ke(e.Yr,n.Yr)}static Kr(e,n){return ke(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new It(Pt.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Kz(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Pt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?b0:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),s=new Pt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(ke);return n.forEach(s=>{const i=new Pt(s,0),a=new Pt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;pe.isDocumentKey(i)||(i=i.child(""));const a=new Pt(new pe(i),0);let l=new It(ke);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},a),q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Fe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,s=>{const i=new Pt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Pt(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(e){this.ri=e,this.docs=function(){return new ct(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=Fs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():tn.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Fs();const a=n.path,l=new pe(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||uz(cz(h),r)<=0||(s.has(h.key)||Pm(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ye(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new M8(this)}getSize(e){return q.resolve(this.size)}}class M8 extends C8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e){this.persistence=e,this.si=new Zo(n=>S0(n),E0),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new I0,this.targetCount=0,this.ai=gl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new gl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n){this.ui={},this.overlays={},this.ci=new jm(0),this.li=!1,this.li=!0,this.hi=new R8,this.referenceDelegate=e(this),this.Pi=new O8(this),this.indexManager=new w8,this.remoteDocumentCache=function(s){return new D8(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new y8(n),this.Ii=new A8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new P8(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const s=new L8(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class L8 extends hz{constructor(e){super(),this.currentSequenceNumber=e}}class R0{constructor(e){this.persistence=e,this.Ri=new I0,this.Vi=null}static mi(e){return new R0(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const s=pe.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jf{constructor(e,n){this.persistence=e,this.pi=new Zo(r=>pz(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=T8(this,n)}static mi(e,n){return new jf(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,we.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Th(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new P0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return A6()?8:fz(rn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new V8;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(la()<=je.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ca(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(la()<=je.DEBUG&&de("QueryEngine","Query:",ca(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(la()<=je.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ca(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ns(n))):q.resolve())}ys(e,n){if(oN(n))return q.resolve(null);let r=ns(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ef(n,null,"F"),r=ns(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Ae(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,a,c.readTime)?this.ys(e,Ef(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return oN(n)||s.isEqual(we.min())?q.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?q.resolve(null):(la()<=je.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ca(n)),this.vs(e,a,n,lz(s,hu)).next(l=>l))})}Ds(e,n){let r=new It(ak(e));return n.forEach((s,i)=>{Pm(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return la()<=je.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ca(n)),this.ps.getDocumentsMatchingQuery(e,n,Bi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="LocalStore",z8=3e8;class U8{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ct(ke),this.xs=new Zo(i=>S0(i),E0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function $8(t,e,n,r){return new U8(t,e,n,r)}async function Ik(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Ae();for(const u of s){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:l}))})})}function B8(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let g=q.resolve();return p.forEach(v=>{g=g.next(()=>h.getEntry(c,v)).next(x=>{const b=u.docVersions.get(v);Fe(b!==null,48541),x.version.compareTo(b)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ae();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Rk(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function W8(t,e){const n=be(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Vt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(x,b,_){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=z8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(i,g))});let c=Fs(),u=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(H8(i,a,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(we.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return q.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function H8(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Fs();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):de(D0,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:a,qs:s}})}function q8(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=b0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function G8(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new yi(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ay(t,e,n){const r=be(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Pl(a))throw a;de(D0,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function vN(t,e,n){const r=be(t);let s=we.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,h){const f=be(c),p=f.xs.get(h);return p!==void 0?q.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,a,ns(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:we.min(),n?i:Ae())).next(l=>(K8(r,Pz(e),l),{documents:l,Qs:i})))}function K8(t,e,n){let r=t.Os.get(e)||we.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class wN{constructor(){this.activeTargetIds=Fz()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q8{constructor(){this.Mo=new wN,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wN,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="ConnectivityMonitor";class _N{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(bN,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(bN,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yd=null;function ly(){return Yd===null?Yd=function(){return 268435456+Math.round(2147483648*Math.random())}():Yd++,"0x"+Yd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="RestConnection",Y8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class J8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===_f?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=ly(),l=this.zo(e,n.toUriEncodedString());de(pg,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=kl(u);return this.Jo(e,l,c,r,h).then(f=>(de(pg,`Received RPC '${e}' ${a}: `,f),f),f=>{throw qo(pg,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Il}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Y8[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class eU extends J8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=ly();return new Promise((l,c)=>{const u=new I2;u.setWithCredentials(!0),u.listenOnce(R2.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Eh.NO_ERROR:const f=u.getResponseJson();de(Xt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case Eh.TIMEOUT:de(Xt,`RPC '${e}' ${a} timed out`),c(new le(H.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const p=u.getStatus();if(de(Xt,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const x=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(w)>=0?w:H.UNKNOWN}(v.status);c(new le(x,v.message))}else c(new le(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new le(H.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{de(Xt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);de(Xt,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=ly(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=M2(),l=D2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");de(Xt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let p=!1,g=!1;const v=new Z8({Yo:b=>{g?de(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(de(Xt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),de(Xt,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Zo:()=>f.close()}),x=(b,_,w)=>{b.listen(_,N=>{try{w(N)}catch(k){setTimeout(()=>{throw k},0)}})};return x(f,gc.EventType.OPEN,()=>{g||(de(Xt,`RPC '${e}' stream ${s} transport opened.`),v.o_())}),x(f,gc.EventType.CLOSE,()=>{g||(g=!0,de(Xt,`RPC '${e}' stream ${s} transport closed`),v.a_(),this.E_(f))}),x(f,gc.EventType.ERROR,b=>{g||(g=!0,qo(Xt,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),v.a_(new le(H.UNAVAILABLE,"The operation could not be completed")))}),x(f,gc.EventType.MESSAGE,b=>{var _;if(!g){const w=b.data[0];Fe(!!w,16349);const N=w,k=(N==null?void 0:N.error)||((_=N[0])==null?void 0:_.error);if(k){de(Xt,`RPC '${e}' stream ${s} received error:`,k);const R=k.status;let M=function(T){const j=yt[T];if(j!==void 0)return vk(j)}(R),S=k.message;M===void 0&&(M=H.INTERNAL,S="Unknown error status: "+R+" with message "+k.message),g=!0,v.a_(new le(M,S)),f.close()}else de(Xt,`RPC '${e}' stream ${s} received:`,w),v.u_(w)}}),x(l,P2.STAT_EVENT,b=>{b.stat===Xx.PROXY?de(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Xx.NOPROXY&&de(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.__()},0),v}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function gg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){return new s8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="PersistentStream";class Dk{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Vs(n.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new le(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return de(NN,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(de(NN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tU extends Dk{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=a8(this.serializer,e),r=function(i){if(!("targetChange"in i))return we.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?we.min():a.readTime?rs(a.readTime):we.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=oy(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=ty(c)?{documents:u8(i,c)}:{query:d8(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=_k(i,a.resumeToken);const u=ry(i,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(we.min())>0){l.readTime=Cf(i,a.snapshotVersion.toTimestamp());const u=ry(i,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=f8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=oy(this.serializer),n.removeTarget=e,this.q_(n)}}class nU extends Dk{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Fe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Fe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=c8(e.writeResults,e.commitTime),r=rs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=oy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>l8(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{}class sU extends rU{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,sy(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(H.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,sy(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(H.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class iU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vs(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class oU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{ea(this)&&(de(Go,"Restarting streams for network reachability change."),await async function(c){const u=be(c);u.Ea.add(4),await Gu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Vm(u)}(this))})}),this.Ra=new iU(r,s)}}async function Vm(t){if(ea(t))for(const e of t.da)await e(!0)}async function Gu(t){for(const e of t.da)await e(!1)}function Mk(t,e){const n=be(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),V0(n)?L0(n):Ml(n).O_()&&O0(n,e))}function M0(t,e){const n=be(t),r=Ml(n);n.Ia.delete(e),r.O_()&&Ok(n,e),n.Ia.size===0&&(r.O_()?r.L_():ea(n)&&n.Ra.set("Unknown"))}function O0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ml(t).Y_(e)}function Ok(t,e){t.Va.Ue(e),Ml(t).Z_(e)}function L0(t){t.Va=new e8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ml(t).start(),t.Ra.ua()}function V0(t){return ea(t)&&!Ml(t).x_()&&t.Ia.size>0}function ea(t){return be(t).Ea.size===0}function Lk(t){t.Va=void 0}async function aU(t){t.Ra.set("Online")}async function lU(t){t.Ia.forEach((e,n)=>{O0(t,e)})}async function cU(t,e){Lk(t),V0(t)?(t.Ra.ha(e),L0(t)):t.Ra.set("Unknown")}async function uU(t,e,n){if(t.Ra.set("Online"),e instanceof bk&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){de(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await kf(t,r)}else if(e instanceof kh?t.Va.Ze(e):e instanceof wk?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const r=await Rk(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Vt.EMPTY_BYTE_STRING,h.snapshotVersion)),Ok(i,c);const f=new yi(h.target,c,u,h.sequenceNumber);O0(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){de(Go,"Failed to raise snapshot:",r),await kf(t,r)}}async function kf(t,e,n){if(!Pl(e))throw e;t.Ea.add(1),await Gu(t),t.Ra.set("Offline"),n||(n=()=>Rk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de(Go,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Vm(t)})}function Vk(t,e){return e().catch(n=>kf(t,n,e))}async function Fm(t){const e=be(t),n=Gi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:b0;for(;dU(e);)try{const s=await q8(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,hU(e,s)}catch(s){await kf(e,s)}Fk(e)&&zk(e)}function dU(t){return ea(t)&&t.Ta.length<10}function hU(t,e){t.Ta.push(e);const n=Gi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Fk(t){return ea(t)&&!Gi(t).x_()&&t.Ta.length>0}function zk(t){Gi(t).start()}async function fU(t){Gi(t).ra()}async function mU(t){const e=Gi(t);for(const n of t.Ta)e.ea(n.mutations)}async function pU(t,e,n){const r=t.Ta.shift(),s=j0.from(r,e,n);await Vk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fm(t)}async function gU(t,e){e&&Gi(t).X_&&await async function(r,s){if(function(a){return Yz(a)&&a!==H.ABORTED}(s.code)){const i=r.Ta.shift();Gi(r).B_(),await Vk(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Fm(r)}}(t,e),Fk(t)&&zk(t)}async function SN(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),de(Go,"RemoteStore received new credentials");const r=ea(n);n.Ea.add(3),await Gu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vm(n)}async function xU(t,e){const n=be(t);e?(n.Ea.delete(2),await Vm(n)):e||(n.Ea.add(2),await Gu(n),n.Ra.set("Unknown"))}function Ml(t){return t.ma||(t.ma=function(n,r,s){const i=be(n);return i.sa(),new tU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:aU.bind(null,t),t_:lU.bind(null,t),r_:cU.bind(null,t),H_:uU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),V0(t)?L0(t):t.Ra.set("Unknown")):(await t.ma.stop(),Lk(t))})),t.ma}function Gi(t){return t.fa||(t.fa=function(n,r,s){const i=be(n);return i.sa(),new nU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:fU.bind(null,t),r_:gU.bind(null,t),ta:mU.bind(null,t),na:pU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Fm(t)):(await t.fa.stop(),t.Ta.length>0&&(de(Go,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new F0(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function z0(t,e){if(Vs("AsyncQueue",`${e}: ${t}`),Pl(t))return new le(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{static emptySet(e){return new Va(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=xc(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Va)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Va;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(){this.ga=new ct(pe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class xl{constructor(e,n,r,s,i,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new xl(e,n,Va.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class vU{constructor(){this.queries=TN(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=be(n),i=s.queries;s.queries=TN(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new le(H.ABORTED,"Firestore shutting down"))}}function TN(){return new Zo(t=>ok(t),Rm)}async function U0(t,e){const n=be(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new yU,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=z0(a,`Initialization of query '${ca(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&B0(n)}async function $0(t,e){const n=be(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wU(t,e){const n=be(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&B0(n)}function bU(t,e,n){const r=be(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function B0(t){t.Ca.forEach(e=>{e.next()})}var cy,CN;(CN=cy||(cy={})).Ma="default",CN.Cache="cache";class W0{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new xl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e){this.key=e}}class $k{constructor(e){this.key=e}}class _U{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=ak(e),this.tu=new Va(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new EN,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=Pm(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?v!==x&&(r.track({type:3,doc:g}),b=!0):this.su(p,g)||(r.track({type:2,doc:g}),b=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),b=!0):p&&!g&&(r.track({type:1,doc:p}),b=!0,(c||u)&&(l=!0)),b&&(g?(a=a.add(g),i=x?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(g,v){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:b})}};return x(g)-x(v)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new xl(this.query,e.tu,i,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EN,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new $k(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Uk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return xl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const H0="SyncEngine";class NU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SU{constructor(e){this.key=e,this.hu=!1}}class EU{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Zo(l=>ok(l),Rm),this.Iu=new Map,this.Eu=new Set,this.du=new ct(pe.comparator),this.Au=new Map,this.Ru=new I0,this.Vu={},this.mu=new Map,this.fu=gl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TU(t,e,n=!0){const r=Kk(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Bk(r,e,n,!0),s}async function CU(t,e){const n=Kk(t);await Bk(n,e,!0,!1)}async function Bk(t,e,n,r){const s=await G8(t.localStore,ns(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await jU(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Mk(t.remoteStore,s),l}async function jU(t,e,n,r,s){t.pu=(f,p,g)=>async function(x,b,_,w){let N=b.view.ru(_);N.Cs&&(N=await vN(x.localStore,b.query,!1).then(({documents:S})=>b.view.ru(S,N)));const k=w&&w.targetChanges.get(b.targetId),R=w&&w.targetMismatches.get(b.targetId)!=null,M=b.view.applyChanges(N,x.isPrimaryClient,k,R);return kN(x,b.targetId,M.au),M.snapshot}(t,f,p,g);const i=await vN(t.localStore,e,!0),a=new _U(e,i.Qs),l=a.ru(i.documents),c=qu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);kN(t,n,u.au);const h=new NU(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function kU(t,e,n){const r=be(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Rm(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ay(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&M0(r.remoteStore,s.targetId),uy(r,s.targetId)}).catch(Rl)):(uy(r,s.targetId),await ay(r.localStore,s.targetId,!0))}async function AU(t,e){const n=be(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),M0(n.remoteStore,r.targetId))}async function IU(t,e,n){const r=VU(t);try{const s=await function(a,l){const c=be(a),u=Xe.now(),h=l.reduce((g,v)=>g.add(v.key),Ae());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Fs(),x=Ae();return c.Ns.getEntries(g,h).next(b=>{v=b,v.forEach((_,w)=>{w.isValidDocument()||(x=x.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,v)).next(b=>{f=b;const _=[];for(const w of l){const N=qz(w,f.get(w.key).overlayedDocument);N!=null&&_.push(new to(w.key,N,J2(N.value.mapValue),ir.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,_,l)}).next(b=>{p=b;const _=b.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(g,b.batchId,_)})}).then(()=>({batchId:p.batchId,changes:ck(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new ct(ke)),u=u.insert(l,c),a.Vu[a.currentUser.toKey()]=u}(r,s.batchId,n),await Ku(r,s.changes),await Fm(r.remoteStore)}catch(s){const i=z0(s,"Failed to persist write");n.reject(i)}}async function Wk(t,e){const n=be(t);try{const r=await W8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Fe(a.hu,14607):s.removedDocuments.size>0&&(Fe(a.hu,42227),a.hu=!1))}),await Ku(n,r,e)}catch(r){await Rl(r)}}function jN(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=be(a);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&B0(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RU(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new ct(pe.comparator);a=a.insert(i,tn.newNoDocument(i,we.min()));const l=Ae().add(i),c=new Om(we.min(),new Map,new ct(ke),a,l);await Wk(r,c),r.du=r.du.remove(i),r.Au.delete(e),q0(r)}else await ay(r.localStore,e,!1).then(()=>uy(r,e,n)).catch(Rl)}async function PU(t,e){const n=be(t),r=e.batch.batchId;try{const s=await B8(n.localStore,e);qk(n,r,null),Hk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ku(n,s)}catch(s){await Rl(s)}}async function DU(t,e,n){const r=be(t);try{const s=await function(a,l){const c=be(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Fe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);qk(r,e,n),Hk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ku(r,s)}catch(s){await Rl(s)}}function Hk(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function qk(t,e,n){const r=be(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function uy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Gk(t,r)})}function Gk(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(M0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),q0(t))}function kN(t,e,n){for(const r of n)r instanceof Uk?(t.Ru.addReference(r.key,e),MU(t,r)):r instanceof $k?(de(H0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Gk(t,r.key)):ye(19791,{wu:r})}function MU(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(de(H0,"New document in limbo: "+n),t.Eu.add(r),q0(t))}function q0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new pe(Qe.fromString(e)),r=t.fu.next();t.Au.set(r,new SU(n)),t.du=t.du.insert(n,r),Mk(t.remoteStore,new yi(ns(Im(n.path)),r,"TargetPurposeLimboResolution",jm.ce))}}async function Ku(t,e,n){const r=be(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=P0.As(c.targetId,u);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,u){const h=be(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(u,p=>q.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>q.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Pl(f))throw f;de(D0,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),v=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(v);h.Ms=h.Ms.insert(p,x)}}}(r.localStore,i))}async function OU(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){de(H0,"User change. New user:",e.toKey());const r=await Ik(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new le(H.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ku(n,r.Ls)}}function LU(t,e){const n=be(t),r=n.Au.get(e);if(r&&r.hu)return Ae().add(r.key);{let s=Ae();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Kk(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=LU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RU.bind(null,e),e.Pu.H_=wU.bind(null,e.eventManager),e.Pu.yu=bU.bind(null,e.eventManager),e}function VU(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DU.bind(null,e),e}class Af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return $8(this.persistence,new F8,e.initialUser,this.serializer)}Cu(e){return new Ak(R0.mi,this.serializer)}Du(e){return new Q8}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Af.provider={build:()=>new Af};class FU extends Af{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Fe(this.persistence.referenceDelegate instanceof jf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new S8(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?xn.withCacheSize(this.cacheSizeBytes):xn.DEFAULT;return new Ak(r=>jf.mi(r,n),this.serializer)}}class dy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OU.bind(null,this.syncEngine),await xU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vU}()}createDatastore(e){const n=Lm(e.databaseInfo.databaseId),r=function(i){return new eU(i)}(e.databaseInfo);return function(i,a,l,c){return new sU(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new oU(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>jN(this.syncEngine,n,0),function(){return _N.v()?new _N:new X8}())}createSyncEngine(e,n){return function(s,i,a,l,c,u,h){const f=new EU(s,i,a,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=be(s);de(Go,"RemoteStore shutting down."),i.Ea.add(5),await Gu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}dy.provider={build:()=>new dy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki="FirestoreClient";class zU{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jt.UNAUTHENTICATED,this.clientId=Tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{de(Ki,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(de(Ki,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=z0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xg(t,e){t.asyncQueue.verifyOperationInProgress(),de(Ki,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ik(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function AN(t,e){t.asyncQueue.verifyOperationInProgress();const n=await UU(t);de(Ki,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>SN(e.remoteStore,s)),t._onlineComponents=e}async function UU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(Ki,"Using user provided OfflineComponentProvider");try{await xg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;qo("Error using user provided cache. Falling back to memory cache: "+n),await xg(t,new Af)}}else de(Ki,"Using default OfflineComponentProvider"),await xg(t,new FU(void 0));return t._offlineComponents}async function Qk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(Ki,"Using user provided OnlineComponentProvider"),await AN(t,t._uninitializedComponentsProvider._online)):(de(Ki,"Using default OnlineComponentProvider"),await AN(t,new dy))),t._onlineComponents}function $U(t){return Qk(t).then(e=>e.syncEngine)}async function If(t){const e=await Qk(t),n=e.eventManager;return n.onListen=TU.bind(null,e.syncEngine),n.onUnlisten=kU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AU.bind(null,e.syncEngine),n}function BU(t,e,n={}){const r=new Es;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new G0({next:p=>{h.Nu(),a.enqueueAndForget(()=>$0(i,f));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new le(H.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new le(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new W0(Im(l.path),h,{includeMetadataChanges:!0,qa:!0});return U0(i,f)}(await If(t),t.asyncQueue,e,n,r)),r.promise}function WU(t,e,n={}){const r=new Es;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new G0({next:p=>{h.Nu(),a.enqueueAndForget(()=>$0(i,f)),p.fromCache&&c.source==="server"?u.reject(new le(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new W0(l,h,{includeMetadataChanges:!0,qa:!0});return U0(i,f)}(await If(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="firestore.googleapis.com",RN=!0;class PN{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Yk,this.ssl=RN}else this.host=e.host,this.ssl=e.ssl??RN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_8)throw new le(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xk(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PN({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PN(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new V2;switch(r.type){case"firstParty":return new tz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=IN.get(n);r&&(de("ComponentProvider","Removing Datastore"),IN.delete(n),r.terminate())}(this),Promise.resolve()}}function Jk(t,e,n,r={}){var u;t=dn(t,zm);const s=kl(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Hj(`https://${l}`),qj("Firestore",!0)),i.host!==Yk&&i.host!==l&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!$i(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Jt.MOCK_USER;else{h=b6(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new le(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Jt(p)}t._authCredentials=new J9(new L2(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Wu(n,ot._jsonSchema))return new ot(e,r||null,new pe(Qe.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:bt("string",ot._jsonSchemaVersion),referencePath:bt("string")};class Ts extends hs{constructor(e,n,r){super(e,n,Im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new pe(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function Qi(t,e,...n){if(t=Nt(t),F2("collection","path",e),t instanceof zm){const r=Qe.fromString(e,...n);return q_(r),new Ts(t,null,r)}{if(!(t instanceof ot||t instanceof Ts))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return q_(r),new Ts(t.firestore,null,r)}}function We(t,e,...n){if(t=Nt(t),arguments.length===1&&(e=Tm.newId()),F2("doc","path",e),t instanceof zm){const r=Qe.fromString(e,...n);return H_(r),new ot(t,null,new pe(r))}{if(!(t instanceof ot||t instanceof Ts))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return H_(r),new ot(t.firestore,t instanceof Ts?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="AsyncQueue";class MN{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pk(this,"async_queue_retry"),this._c=()=>{const r=gg();r&&de(DN,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=gg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Es;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Pl(e))throw e;de(DN,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Vs("INTERNAL UNHANDLED ERROR: ",ON(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=F0.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ye(47125,{Pc:ON(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ON(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class cs extends zm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new MN,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new MN(e),this._firestoreClient=void 0,await e}}}function Zk(t,e){const n=typeof t=="object"?t:Xj(),r=typeof t=="string"?t:_f,s=c0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=v6("firestore");i&&Jk(s,...i)}return s}function Qu(t){if(t._terminated)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HU(t),t._firestoreClient}function HU(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new yz(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Xk(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new zU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vn(Vt.fromBase64String(e))}catch(n){throw new le(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wu(e,Vn._jsonSchema))return Vn.fromBase64String(e.bytes)}}Vn._jsonSchemaVersion="firestore/bytes/1.0",Vn._jsonSchema={type:bt("string",Vn._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:jr._jsonSchemaVersion}}static fromJSON(e){if(Wu(e,jr._jsonSchema))return new jr(e.latitude,e.longitude)}}jr._jsonSchemaVersion="firestore/geoPoint/1.0",jr._jsonSchema={type:bt("string",jr._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wu(e,kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new kr(e.vectorValues);throw new le(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:bt("string",kr._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU=/^__.*__$/;class GU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new to(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hu(e,this.data,n,this.fieldTransforms)}}class eA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new to(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:t})}}class Um{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Um({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tA(this.Ac)&&qU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class KU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lm(e)}Cc(e,n,r,s=!1){return new Um({Ac:e,methodName:n,Dc:r,path:Ot.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $m(t){const e=t._freezeSettings(),n=Lm(t._databaseId);return new KU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nA(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);X0("Data must be an object, but it was:",a,r);const l=rA(r,a);let c,u;if(i.merge)c=new Un(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=hy(e,f,n);if(!a.contains(p))throw new le(H.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);iA(h,p)||h.push(p)}c=new Un(h),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new GU(new wn(l),c,u)}class Bm extends Ol{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bm}}function QU(t,e,n){return new Um({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class K0 extends Ol{_toFieldTransform(e){return new gk(e.path,new gu)}isEqual(e){return e instanceof K0}}class Q0 extends Ol{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=QU(this,e,!0),r=this.vc.map(i=>Ll(i,n)),s=new pl(r);return new gk(e.path,s)}isEqual(e){return e instanceof Q0&&$i(this.vc,e.vc)}}function XU(t,e,n,r){const s=t.Cc(1,e,n);X0("Data must be an object, but it was:",s,r);const i=[],a=wn.empty();eo(r,(c,u)=>{const h=Y0(e,c,n);u=Nt(u);const f=s.yc(h);if(u instanceof Bm)i.push(h);else{const p=Ll(u,f);p!=null&&(i.push(h),a.set(h,p))}});const l=new Un(i);return new eA(a,l,s.fieldTransforms)}function YU(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[hy(e,r,n)],c=[s];if(i.length%2!=0)throw new le(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(hy(e,i[p])),c.push(i[p+1]);const u=[],h=wn.empty();for(let p=l.length-1;p>=0;--p)if(!iA(u,l[p])){const g=l[p];let v=c[p];v=Nt(v);const x=a.yc(g);if(v instanceof Bm)u.push(g);else{const b=Ll(v,x);b!=null&&(u.push(g),h.set(g,b))}}const f=new Un(u);return new eA(h,f,a.fieldTransforms)}function JU(t,e,n,r=!1){return Ll(n,t.Cc(r?4:3,e))}function Ll(t,e){if(sA(t=Nt(t)))return X0("Unsupported field value:",e,t),rA(t,e);if(t instanceof Ol)return function(r,s){if(!tA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Ll(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:Cf(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cf(s.serializer,i)}}if(r instanceof jr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vn)return{bytesValue:_k(s.serializer,r._byteString)};if(r instanceof ot){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:A0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof kr)return function(a,l){return{mapValue:{fields:{[Q2]:{stringValue:Y2},[Nf]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return T0(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Cm(r)}`)}(t,e)}function rA(t,e){const n={};return B2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(t,(r,s)=>{const i=Ll(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function sA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof jr||t instanceof Vn||t instanceof ot||t instanceof Ol||t instanceof kr)}function X0(t,e,n){if(!sA(n)||!U2(n)){const r=Cm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function hy(t,e,n){if((e=Nt(e))instanceof Xu)return e._internalPath;if(typeof e=="string")return Y0(t,e);throw Rf("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZU=new RegExp("[~\\*/\\[\\]]");function Y0(t,e,n){if(e.search(ZU)>=0)throw Rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xu(...e.split("."))._internalPath}catch{throw Rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rf(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new le(H.INVALID_ARGUMENT,l+t+c)}function iA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class e7 extends oA{data(){return super.data()}}function Wm(t,e){return typeof e=="string"?Y0(t,e):e instanceof Xu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class J0{}class Hm extends J0{}function Po(t,e,...n){let r=[];e instanceof J0&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof qm).length,l=i.filter(c=>c instanceof Yu).length;if(a>1||a>0&&l>0)throw new le(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Yu extends Hm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yu(e,n,r)}_apply(e){const n=this._parse(e);return lA(e._query,n),new hs(e.firestore,e.converter,ny(e._query,n))}_parse(e){const n=$m(e.firestore);return function(i,a,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){FN(f,h);const v=[];for(const x of f)v.push(VN(c,i,x));p={arrayValue:{values:v}}}else p=VN(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||FN(f,h),p=JU(l,a,f,h==="in"||h==="not-in");return wt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Z0(t,e,n){const r=e,s=Wm("where",t);return Yu._create(s,r,n)}class qm extends J0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Dr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)lA(a,c),a=ny(a,c)}(e._query,n),new hs(e.firestore,e.converter,ny(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gm extends Hm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gm(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pu(i,a)}(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Dl(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Fa(t,e="asc"){const n=e,r=Wm("orderBy",t);return Gm._create(r,n)}class Km extends Hm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Km(e,n,r)}_apply(e){return new hs(e.firestore,e.converter,Ef(e._query,this._limit,this._limitType))}}function Vc(t){return az("limit",t),Km._create("limit",t,"F")}function VN(t,e,n){if(typeof(n=Nt(n))=="string"){if(n==="")throw new le(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ik(e)&&n.indexOf("/")!==-1)throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Qe.fromString(n));if(!pe.isDocumentKey(r))throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eN(t,new pe(r))}if(n instanceof ot)return eN(t,n._key);throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cm(n)}.`)}function FN(t,e){if(!Array.isArray(t)||t.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lA(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cA{convertValue(e,n="none"){switch(qi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return eo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Nf].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>gt(a.doubleValue));return new kr(n)}convertGeoPoint(e){return new jr(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Am(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(fu(e));default:return null}}convertTimestamp(e){const n=Wi(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Qe.fromString(e);Fe(jk(r),9688,{name:e});const s=new hl(r.get(1),r.get(3)),i=new pe(r.popFirst(5));return s.isEqual(n)||Vs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ea{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ri extends oA{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ri._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ri._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ri._jsonSchema={type:bt("string",Ri._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Fc extends Ri{data(e={}){return super.data(e)}}class Pi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ea(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fc(this._firestore,this._userDataWriter,r.key,r,new Ea(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Fc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ea(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Fc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ea(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:t7(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function t7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t){t=dn(t,ot);const e=dn(t.firestore,cs);return BU(Qu(e),t._key).then(n=>mA(e,t,n))}Pi._jsonSchemaVersion="firestore/querySnapshot/1.0",Pi._jsonSchema={type:bt("string",Pi._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class ew extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function dA(t){t=dn(t,hs);const e=dn(t.firestore,cs),n=Qu(e),r=new ew(e);return aA(t._query),WU(n,t._query).then(s=>new Pi(e,r,t,s))}function Wt(t,e,n){t=dn(t,ot);const r=dn(t.firestore,cs),s=uA(t.converter,e,n);return Ju(r,[nA($m(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ir.none())])}function hA(t,e,n,...r){t=dn(t,ot);const s=dn(t.firestore,cs),i=$m(s);let a;return a=typeof(e=Nt(e))=="string"||e instanceof Xu?YU(i,"updateDoc",t._key,e,n,r):XU(i,"updateDoc",t._key,e),Ju(s,[a.toMutation(t._key,ir.exists(!0))])}function fA(t){return Ju(dn(t.firestore,cs),[new C0(t._key,ir.none())])}function tw(t,e){const n=dn(t.firestore,cs),r=We(t),s=uA(t.converter,e);return Ju(n,[nA($m(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}function Ar(t,...e){var c,u,h;t=Nt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||LN(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(LN(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof ot)a=dn(t.firestore,cs),l=Im(t._key.path),i={next:f=>{e[r]&&e[r](mA(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=dn(t,hs);a=dn(f.firestore,cs),l=f._query;const p=new ew(a);i={next:g=>{e[r]&&e[r](new Pi(a,p,f,g))},error:e[r+1],complete:e[r+2]},aA(t._query)}return function(p,g,v,x){const b=new G0(x),_=new W0(g,b,v);return p.asyncQueue.enqueueAndForget(async()=>U0(await If(p),_)),()=>{b.Nu(),p.asyncQueue.enqueueAndForget(async()=>$0(await If(p),_))}}(Qu(a),l,s,i)}function Ju(t,e){return function(r,s){const i=new Es;return r.asyncQueue.enqueueAndForget(async()=>IU(await $U(r),s,i)),i.promise}(Qu(t),e)}function mA(t,e,n){const r=n.docs.get(e._key),s=new ew(t);return new Ri(t,s,e._key,r,new Ea(n.hasPendingWrites,n.fromCache),e.converter)}function yu(){return new K0("serverTimestamp")}function pA(...t){return new Q0("arrayUnion",t)}(function(e,n=!0){(function(s){Il=s})(Al),ll(new Bo("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new cs(new Z9(r.getProvider("auth-internal")),new nz(a,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new le(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(u.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ai(U_,$_,e),Ai(U_,$_,"esm2020")})();const zN=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:cA,Bytes:Vn,CollectionReference:Ts,DocumentReference:ot,DocumentSnapshot:Ri,FieldPath:Xu,FieldValue:Ol,Firestore:cs,FirestoreError:le,GeoPoint:jr,Query:hs,QueryCompositeFilterConstraint:qm,QueryConstraint:Hm,QueryDocumentSnapshot:Fc,QueryFieldFilterConstraint:Yu,QueryLimitConstraint:Km,QueryOrderByConstraint:Gm,QuerySnapshot:Pi,SnapshotMetadata:Ea,Timestamp:Xe,VectorValue:kr,_AutoId:Tm,_ByteString:Vt,_DatabaseId:hl,_DocumentKey:pe,_EmptyAuthCredentialsProvider:V2,_FieldPath:Ot,_cast:dn,_logWarn:qo,_validateIsNotUsedTogether:z2,addDoc:tw,arrayUnion:pA,collection:Qi,connectFirestoreEmulator:Jk,deleteDoc:fA,doc:We,ensureFirestoreConfigured:Qu,executeWrite:Ju,getDoc:ss,getDocs:dA,getFirestore:Zk,limit:Vc,onSnapshot:Ar,orderBy:Fa,query:Po,serverTimestamp:yu,setDoc:Wt,updateDoc:hA,where:Z0},Symbol.toStringTag,{value:"Module"})),n7={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},nw=Qj(n7),ti=K9(nw),Me=Zk(nw),Mr=new Zt;Mr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Mr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Mr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Mr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Mr.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly");Mr.addScope("https://www.googleapis.com/auth/calendar");Mr.addScope("https://www.googleapis.com/auth/gmail.send");Mr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const UN=Object.freeze(Object.defineProperty({__proto__:null,app:nw,auth:ti,db:Me,googleProvider:Mr},Symbol.toStringTag,{value:"Module"})),Ah="trace_current_user_id",r7=["theme","trace_docs_seen"];function s7(){const t={};r7.forEach(e=>{const n=localStorage.getItem(e);n&&(t[e]=n)}),localStorage.clear(),Object.entries(t).forEach(([e,n])=>{localStorage.setItem(e,n)})}function i7(t){const e=localStorage.getItem(Ah);return e?e!==t?(console.log(" Account switch detected. Clearing old user data..."),s7(),localStorage.setItem(Ah,t),!0):!1:(localStorage.setItem(Ah,t),!1)}function $N(){localStorage.removeItem(Ah)}const gA=m.createContext(void 0);function o7({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,a]=m.useState(!1),[l,c]=m.useState(()=>localStorage.getItem("google_access_token")),[u,h]=m.useState(null),[f,p]=m.useState(()=>localStorage.getItem("user_role")),[g,v]=m.useState(0),[x,b]=m.useState(null),_=m.useMemo(()=>e?x?new Proxy(e,{get(T,j){return j==="photoURL"?x:T[j]}}):e:null,[e,x,g]);m.useEffect(()=>VF(ti,j=>{if(j&&i7(j.uid)){window.location.reload();return}n(j),j||(p(null),s(!1),c(null),$N())}),[]),m.useEffect(()=>{async function T(){if(!e||!l){if(e&&!l){const j=localStorage.getItem("google_access_token");if(j){c(j);return}}e||s(!1);return}try{s(!0);const j=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${l}`}});if(j.status===401){console.log("Token expired (401). Attempting to refresh session..."),await R()||(h("Session expired. Please sign in again."),p(null),s(!1),localStorage.removeItem("google_access_token"));return}let A=!1;if(j.ok){const B=await j.json();B.courses&&B.courses.length>0&&(A=!0)}if(A){p("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const D=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${l}`}});let P=!1;if(D.ok){const B=await D.json();B.courses&&B.courses.length>0&&(P=!0)}P?(p("student"),localStorage.setItem("user_role","student")):(p("no_access"),localStorage.setItem("user_role","no_access"))}catch(j){console.error("Role detection failed:",j),p("no_access")}finally{s(!1),a(!1)}}T()},[e,l]);const w=async()=>{try{h(null),a(!0),await MF(ti,w2),Mr.setCustomParameters({prompt:"consent",access_type:"offline"});const T=await qd(ti,Mr),j=Zt.credentialFromResult(T);j!=null&&j.accessToken&&(c(j.accessToken),localStorage.setItem("google_access_token",j.accessToken))}catch(T){const j=T instanceof Error?T.message:"Failed to sign in";h(j),a(!1),console.error("Sign in error:",T)}},N=async()=>{try{h(null);const T=new Zt;T.addScope("https://www.googleapis.com/auth/gmail.send"),T.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),T.setCustomParameters({access_type:"offline",prompt:"consent"});const j=await qd(ti,T),A=Zt.credentialFromResult(j),D=j._tokenResponse;if(A!=null&&A.accessToken&&(c(A.accessToken),localStorage.setItem("google_access_token",A.accessToken)),D!=null&&D.oauthRefreshToken){const{doc:P,setDoc:B,serverTimestamp:Q}=await Sa(async()=>{const{doc:ee,setDoc:L,serverTimestamp:z}=await Promise.resolve().then(()=>zN);return{doc:ee,setDoc:L,serverTimestamp:z}},void 0),{db:ne}=await Sa(async()=>{const{db:ee}=await Promise.resolve().then(()=>UN);return{db:ee}},void 0);if(e&&D.oauthRefreshToken)return await B(P(ne,"users",e.uid,"private_tokens","google"),{refreshToken:D.oauthRefreshToken,updatedAt:Q()}),!0}return!!(A!=null&&A.accessToken)}catch(T){const j=T instanceof Error?T.message:"Failed to get Gmail permissions";return h(j),console.error("Permission error:",T),!1}},k=async()=>{try{h(null);const T=new Zt;T.addScope("https://www.googleapis.com/auth/calendar.events"),T.setCustomParameters({access_type:"offline",prompt:"consent"});const j=await qd(ti,T),A=Zt.credentialFromResult(j),D=j._tokenResponse;if(A!=null&&A.accessToken&&(c(A.accessToken),localStorage.setItem("google_access_token",A.accessToken)),e&&(D!=null&&D.oauthRefreshToken)){const{doc:P,setDoc:B,serverTimestamp:Q}=await Sa(async()=>{const{doc:ee,setDoc:L,serverTimestamp:z}=await Promise.resolve().then(()=>zN);return{doc:ee,setDoc:L,serverTimestamp:z}},void 0),{db:ne}=await Sa(async()=>{const{db:ee}=await Promise.resolve().then(()=>UN);return{db:ee}},void 0);return await B(P(ne,"users",e.uid,"private_tokens","calendar"),{refreshToken:D.oauthRefreshToken,updatedAt:Q(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(T){const j=T instanceof Error?T.message:"Failed to get Calendar permissions";return h(j),console.error("Permission error:",T),!1}},R=async()=>{if(!e)return!1;try{console.log("Attempting silent token refresh via backend...");const T=await fetch("/api/auth/google/refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:e.uid})});if(T.ok){const j=await T.json();if(j.accessToken)return c(j.accessToken),localStorage.setItem("google_access_token",j.accessToken),console.log("Silent refresh successful! "),!0}else console.warn("Silent refresh failed, falling back to popup...",T.status)}catch(T){console.warn("Silent refresh error:",T)}try{const T=new Zt;T.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),T.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),T.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),T.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly"),T.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),T.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const j=await qd(ti,T),A=Zt.credentialFromResult(j);return A!=null&&A.accessToken?(c(A.accessToken),localStorage.setItem("google_access_token",A.accessToken),console.log("Access token refreshed successfully (Interactive)"),!0):!1}catch(T){return console.error("Failed to refresh access token:",T),!1}},M=async()=>R(),S=async()=>{try{await FF(ti),c(null),p(null),localStorage.removeItem("google_access_token"),localStorage.removeItem("user_role"),$N()}catch(T){const j=T instanceof Error?T.message:"Failed to sign out";h(j)}},C=async T=>{if(e)try{await DF(e,T),T.photoURL!==void 0&&b(T.photoURL),v(j=>j+1)}catch(j){const A=j instanceof Error?j.message:"Failed to update profile";throw h(A),j}};return o.jsx(gA.Provider,{value:{user:_,loading:r,authenticating:i,role:f,accessToken:l,signInWithGoogle:w,requestGmailPermissions:N,requestCalendarPermissions:k,refreshAccessToken:M,signOut:S,updateUserProfile:C,error:u},children:t})}function st(){const t=m.useContext(gA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const xA=m.createContext(void 0);function a7({children:t}){const[e,n]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});m.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return o.jsx(xA.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function rw(){const t=m.useContext(xA);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}class l7{static calculateXP(e){let n=0;const r=[];let s=null;for(const i of e)if(i.systemStatus==="submitted"||i.systemStatus==="graded"){if(n+=100,i.submittedAt&&i.dueDate){const l=new Date(i.submittedAt).getTime();(!s||l>s)&&(s=l),(new Date(i.dueDate).getTime()-l)/(1e3*60*60)>48&&(n+=50)}else if(i.submittedAt){const l=new Date(i.submittedAt).getTime();(!s||l>s)&&(s=l)}r.push(i.id)}return{totalXP:n,processedIds:r,lastSubmissionTime:s}}static calculateBadges(e,n){const r=new Set(n);return e>=10&&r.add("10-submissions"),e>=25&&r.add("25-submissions"),e>=50&&r.add("50-submissions"),Array.from(r)}static async syncUserLeaderboard(e,n,r,s,i,a,l="student"){var c;try{const{totalXP:u,processedIds:h,lastSubmissionTime:f}=this.calculateXP(i),p=n.includes("@")?n.split("@")[1]:"",g=a.map(N=>N.id),v=We(Me,"leaderboards","all-courses","students",e),x=await ss(v),b=x.exists()?x.data().badges||[]:[],_=this.calculateBadges(h.length,b);await Wt(v,{displayName:r||"Anonymous",photoUrl:s||"",email:n,emailDomain:p,enrolledCourseIds:g,totalXP:u,processedAssignmentIds:h,lastSubmissionTime:f,lastSyncedAt:yu(),badges:_,role:l},{merge:!0});const w=_.filter(N=>!b.includes(N));if(w.length>0){const{BADGES:N}=await Sa(async()=>{const{BADGES:k}=await Promise.resolve().then(()=>GR);return{BADGES:k}},void 0);for(const k of w)await tw(Qi(Me,"activities"),{userId:e,userName:r||"Anonymous",userAvatar:s||null,type:"badge_earned",content:`${r||"Anonymous"} earned the '${((c=N[k])==null?void 0:c.label)||"New Badge"}' badge!`,courseId:"all-courses",emailDomain:p,visibility:"public",createdAt:new Date().toISOString()})}}catch(u){throw console.error(" Failed to sync leaderboard:",u),u}}static async resetLeaderboardForSemester(e){try{const n=We(Me,"leaderboards","all-courses","students",e),r=await ss(n),s=r.exists()?r.data().badges||[]:[];await Wt(n,{badges:s,totalXP:0,processedAssignmentIds:[],enrolledCourseIds:[],lastSyncedAt:yu()})}catch(n){throw console.error(" Failed to reset leaderboard:",n),n}}static async hasCoursesChanged(e,n){try{const r=We(Me,"leaderboards","all-courses","students",e),s=await ss(r);if(!s.exists())return!1;const i=s.data().enrolledCourseIds||[],a=new Set(n),l=new Set(i);if(a.size!==l.size)return!0;for(const c of n)if(!l.has(c))return!0;for(const c of i)if(!a.has(c))return!0;return!1}catch(r){return console.error(" Failed to check course changes:",r),!1}}static async autoSyncOnLogin(e,n,r,s,i,a,l){try{const c=a.map(h=>h.id);await this.hasCoursesChanged(e,c)&&await this.resetLeaderboardForSemester(e),await this.syncUserLeaderboard(e,n,r,s,i,a,l)}catch(c){throw console.error(" Auto-sync failed:",c),c}}}const bn={get:t=>{try{const e=localStorage.getItem(`trace_cache_${t}`);if(!e)return null;const n=JSON.parse(e);return Date.now()>n.expiresAt?(localStorage.removeItem(`trace_cache_${t}`),null):n.data}catch(e){return console.warn("Cache parse error",e),null}},set:(t,e,n)=>{try{const r={data:e,timestamp:Date.now(),expiresAt:Date.now()+n*1e3};localStorage.setItem(`trace_cache_${t}`,JSON.stringify(r))}catch(r){console.warn("Cache write error (quota?)",r)}},remove:t=>{localStorage.removeItem(`trace_cache_${t}`)},clearPattern:t=>{Object.keys(localStorage).forEach(e=>{e.startsWith("trace_cache_")&&e.includes(t)&&localStorage.removeItem(e)})},clearAll:()=>{Object.keys(localStorage).forEach(t=>{t.startsWith("trace_cache_")&&localStorage.removeItem(t)})}},BN={async fetchCourses(t,e){const n=bn.get(`courses_${e}`);if(n)return n;const r="https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE&fields=courses(id,name,section,descriptionHeading,room,ownerId,enrollmentCode,courseState,alternateLink)";let s=[],i="";try{do{const l=`${r}${i?`&pageToken=${i}`:""}`,c=await fetch(l,{headers:{Authorization:`Bearer ${t}`}});if(!c.ok)throw new Error("Failed to fetch courses");const u=await c.json();u.courses&&(s=s.concat(u.courses)),i=u.nextPageToken}while(i)}catch(l){return console.warn("Fetch courses error",l),[]}const a=s.map(l=>({id:l.id,userId:e,classroomId:l.id,name:l.name,section:l.section||null,descriptionHeading:l.descriptionHeading||null,room:l.room||null,ownerId:l.ownerId||null,enrollmentCode:l.enrollmentCode||null,courseState:l.courseState||"ACTIVE",alternateLink:l.alternateLink||null,lastSyncedAt:new Date().toISOString(),color:c7(l.name)}));return bn.set(`courses_${e}`,a,60*60*24),a},async fetchAssignmentsParallel(t,e){const n=[];return(await Promise.allSettled(e.map(async s=>{const i=`assignments_${s.id}`,a=bn.get(i);if(a)return console.log(`[CACHE HIT] Using cached assignments for ${s.name}`),a;console.log(`[CACHE MISS] Fetching fresh data for ${s.name}`);const l=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork?courseWorkStates=PUBLISHED&fields=courseWork(id,title,description,dueDate,dueTime,maxPoints,alternateLink,workType,creationTime,updateTime)`,c=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork/-/studentSubmissions?userId=me&fields=studentSubmissions(id,courseWorkId,state,assignedGrade,updateTime)`,[u,h]=await Promise.all([fetch(l,{headers:{Authorization:`Bearer ${t}`}}).then(v=>(v.ok||console.error(`Coursework fetch failed: ${v.status} ${v.statusText}`),v.ok?v.json():{courseWork:[]})),fetch(c,{headers:{Authorization:`Bearer ${t}`}}).then(async v=>{if(!v.ok){console.error(` Submissions fetch failed: ${v.status} ${v.statusText}`),console.error(" This usually means missing OAuth scope: classroom.student-submissions.me.readonly"),console.error(" Please sign out and sign in again to grant permissions");const x=await v.text();return console.error(" Error response:",x),{studentSubmissions:[]}}return v.json()})]),f=u.courseWork||[],p=h.studentSubmissions||[];console.log(`[API DATA] Course: ${s.name}`),console.log(`  - Coursework items: ${f.length}`),console.log(`  - Submissions: ${p.length}`),console.log("  - Submission states:",p.map(v=>({id:v.courseWorkId,state:v.state})));const g=f.filter(v=>!v.workType||v.workType==="ASSIGNMENT"||v.workType==="MULTIPLE_CHOICE_QUESTION").map(v=>{const x=p.find(b=>b.courseWorkId===v.id);return u7(v,s,x)});return bn.set(i,g,300),g}))).forEach(s=>{s.status==="fulfilled"&&n.push(...s.value)}),n}},WN=[["#E0F2FE","#0369A1"],["#EDE9FE","#7C3AED"],["#FCE7F3","#BE185D"],["#D1FAE5","#047857"],["#FED7AA","#C2410C"],["#CCFBF1","#0F766E"],["#FECACA","#B91C1C"],["#DBEAFE","#1E40AF"],["#A5F3FC","#0E7490"],["#FDE68A","#92400E"],["#D9F99D","#4D7C0F"],["#F3E8FF","#6B21A8"]];function c7(t){let e=t.toLowerCase().trim();const n=[/\blab(oratory)?\b/g,/\bpractical\b/g,/\btheory\b/g,/\btutorial\b/g,/\blecture\b/g,/\bcourse\b/g,/\bsection\b/g,/\bmini project\b/g,/\sproject\b/g,/\s\d+[a-z]?\b/g];for(const l of n)e=e.replace(l,"");e=e.replace(/[^a-z0-9\s]/g,"").trim(),e=e.replace(/\s+/g," "),e||(e=t.toLowerCase().trim());let r=0;for(let l=0;l<e.length;l++)r=e.charCodeAt(l)+((r<<5)-r);const s=Math.abs(r)%WN.length,[i,a]=WN[s];return i}function u7(t,e,n){var f,p;let r=null,s=null;t.dueDate&&(r=new Date(t.dueDate.year,t.dueDate.month-1,t.dueDate.day,((f=t.dueTime)==null?void 0:f.hours)||23,((p=t.dueTime)==null?void 0:p.minutes)||59).toISOString(),t.dueTime&&(s=`${String(t.dueTime.hours).padStart(2,"0")}:${String(t.dueTime.minutes).padStart(2,"0")}`));const i=new Date;let a="backlog",l="backlog",c=null,u=null,h=null;return n&&(console.log(`Assignment "${t.title}" submission state:`,n.state),n.state==="TURNED_IN"||n.state==="SUBMITTED"?(a="submitted",l="submitted",u=n.updateTime):n.state==="RETURNED"?(a="graded",l="graded",c=n.assignedGrade,u=n.updateTime,h=n.updateTime):(n.state==="reclaimed_by_student"||n.state==="NEW"||n.state==="CREATED")&&(a="backlog",l="backlog")),r&&new Date(r)<i&&l==="backlog"&&(l="overdue",a="overdue"),{id:`assign-${t.id}`,uniqueId:`${e.id}-${t.id}`,userId:e.userId,courseId:e.id,courseName:e.name,classroomId:t.id,title:t.title,description:t.description||null,dueDate:r,dueTime:s,maxPoints:t.maxPoints||null,systemStatus:l,userStatus:a,submissionId:(n==null?void 0:n.id)||null,submittedAt:u?new Date(u).toISOString():null,gradedAt:h?new Date(h).toISOString():null,grade:c||null,alternateLink:t.alternateLink||null,createdAt:t.creationTime||i.toISOString(),lastSyncedAt:i.toISOString()}}async function d7(t,e,n,r){const s=We(Me,"users",n,"settings","calendar"),i=await ss(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],f={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Trace`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),f.end.date=p.toISOString().split("T")[0];const g=We(Me,"users",n,"calendarEvents",c.id),v=await ss(g),x="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let b;if(v.exists()){const{calendarEventId:_}=v.data();b=await fetch(`${x}/${_}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(b=await fetch(x,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),b.ok){const _=await b.json();await Wt(g,{calendarEventId:_.id,assignmentId:c.id,updatedAt:yu()})}if(!b.ok&&b.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(b){console.warn(`Failed to sync assignment ${c.id} to calendar`,b)}}}const yA=m.createContext(void 0);function h7(){return Math.random().toString(36).substring(2,15)}async function HN(t,e,n,r){var a;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e,u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,g={};try{const v=await u.json();g=v,p=((a=v.error)==null?void 0:a.message)||v.message||p,console.error("API Error Response:",v)}catch{const x=await u.text().catch(()=>"");console.error("API Error (non-JSON):",x)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}const f7=[["#FEE2E2","#991B1B"],["#FFEDD5","#9A3412"],["#FEF3C7","#92400E"],["#D9F99D","#3F6212"],["#D1FAE5","#065F46"],["#CCFBF1","#115E59"],["#DBEAFE","#1E40AF"],["#BAE6FD","#075985"],["#E0E7FF","#3730A3"],["#EDE9FE","#6B21A8"],["#F5D0FE","#A21CAF"],["#FCE7F3","#9F1239"],["#FFE4E6","#BE123C"],["#FDE68A","#78350F"],["#CFFAFE","#155E75"],["#DDD6FE","#5B21B6"],["#FECACA","#991B1B"],["#D1FAE5","#047857"],["#E9D5FF","#7E22CE"],["#FED7AA","#C2410C"],["#A5F3FC","#0E7490"],["#FAE8FF","#A21CAF"],["#ECFCCB","#4D7C0F"],["#99F6E4","#0F766E"]];function Qm(t){const e=f7.find(([r])=>r===t);return e?e[1]:m7(t)>.6?"#52525b":"#FFFFFF"}function m7(t){const e=t.replace("#",""),n=parseInt(e.substring(0,2),16)/255,r=parseInt(e.substring(2,4),16)/255,s=parseInt(e.substring(4,6),16)/255,i=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),a=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),l=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4);return .2126*i+.7152*a+.0722*l}async function p7(t,e,n,r,s){const i=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`,a=`https://classroom.googleapis.com/v1/courses/${e}/announcements?announcementStates=PUBLISHED`;try{const[l,c]=await Promise.all([HN(t,i,p=>p.courseWorkMaterial||[],p=>p.nextPageToken).catch(p=>(console.warn(`Failed to fetch courseWorkMaterials for ${e}:`,p),[])),HN(t,a,p=>p.announcements||[],p=>p.nextPageToken).catch(p=>{var g,v;return((g=p.message)!=null&&g.includes("insufficient authentication scopes")||(v=p.message)!=null&&v.includes("403"))&&(s==null||s()),console.warn(`Failed to fetch announcements for ${e}:`,p),[]})]),u=new Date().toISOString(),h=l.map(p=>({id:`mat-${p.id}`,uniqueId:`${e}-${p.id}`,userId:r,courseId:e,courseName:n,title:p.title,description:p.description||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u})),f=c.filter(p=>p.materials&&p.materials.length>0).map(p=>{const g=p.text||"Announcement Material",v=g.split(`
`)[0].length>60?g.split(`
`)[0].substring(0,57)+"...":g.split(`
`)[0];return{id:`ann-${p.id}`,uniqueId:`${e}-ann-${p.id}`,userId:r,courseId:e,courseName:n,title:v,description:p.text||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u}});return[...h,...f]}catch(l){return console.warn(`Failed to fetch materials for course ${e}:`,l),[]}}function g7({children:t}){const{user:e,role:n,accessToken:r,refreshAccessToken:s,loading:i}=st(),{toast:a}=Zi(),[l,c]=m.useState(()=>{if(!e)return[];const $=bn.get(`courses_${e.uid}`);if($)return $;const W=localStorage.getItem("classroom_courses");return W?JSON.parse(W):[]}),[u,h]=m.useState(()=>{if(!e)return[];const $=localStorage.getItem("classroom_assignments");return $?JSON.parse($):[]}),[f,p]=m.useState(()=>{const $=localStorage.getItem("classroom_materials");return $?JSON.parse($):[]}),[g,v]=m.useState(()=>{const $=localStorage.getItem("classroom_notes");return $?new Map(JSON.parse($)):new Map}),[x,b]=m.useState(()=>e&&bn.get(`courses_${e.uid}`)?!1:!localStorage.getItem("classroom_courses")),[_,w]=m.useState(!1),[N,k]=m.useState(()=>{const $=localStorage.getItem("classroom_lastSyncedAt");return $?new Date($):null}),[R,M]=m.useState(null),[S,C]=m.useState(!1),[T,j]=m.useState(!1);m.useEffect(()=>{!i&&!e&&(c([]),h([]),p([]),v(new Map),k(null),C(!1),bn.clearAll(),localStorage.removeItem("classroom_courses"),localStorage.removeItem("classroom_assignments"),localStorage.removeItem("classroom_materials"),localStorage.removeItem("classroom_notes"),localStorage.removeItem("classroom_lastSyncedAt"))},[i,e]);const A=m.useCallback(async($=!1)=>{if(!e)return;let W=r;if(!W)try{await s()&&(W=localStorage.getItem("google_access_token"))}catch(J){console.error(J)}if(!W){M("Session expired. Please sign in again.");return}w(!0),M(null),$||bn.clearPattern("assignments_");try{let J;try{J=await BN.fetchCourses(W,e.uid)}catch(te){throw te.message&&te.message.includes("401")?(console.log("Sync 401. Session expired."),M("Your session has expired. Please sign out and sign in again."),a({variant:"destructive",title:"Session Expired",description:"Please sign out and sign in again to continue."}),new Error("Session expired")):te}c(te=>JSON.stringify(te)!==JSON.stringify(J)?J:te);const re=await BN.fetchAssignmentsParallel(W,J);h(re),k(new Date),Promise.all(J.map(te=>p7(W,te.classroomId,te.name,e.uid,()=>j(!0)))).then(te=>{const se=te.flat();p(se)}),d7(re,W,e.uid,a).catch(te=>console.warn(te)),l7.autoSyncOnLogin(e.uid,e.email||"",e.displayName||"Anonymous",e.photoURL||"",re,J,n).catch(console.warn)}catch(J){console.error("Sync Error",J),M(J.message||"Failed to sync"),$||a({variant:"destructive",title:"Sync Failed",description:J.message})}finally{w(!1),b(!1)}},[e,n,r,s,a]);m.useEffect(()=>{i||!e||!r||!S&&!_&&(C(!0),A(!0))},[e,r,S,_,A]),m.useEffect(()=>{if(!e||!r)return;const $=setInterval(()=>{console.log("Running periodic sync to check for submission updates..."),A(!0)},10*60*1e3);return()=>clearInterval($)},[e,r,A]),m.useEffect(()=>{localStorage.setItem("classroom_courses",JSON.stringify(l))},[l]),m.useEffect(()=>{localStorage.setItem("classroom_materials",JSON.stringify(f))},[f]),m.useEffect(()=>{localStorage.setItem("classroom_notes",JSON.stringify(Array.from(g.entries())))},[g]),m.useEffect(()=>{localStorage.setItem("classroom_assignments",JSON.stringify(u))},[u]),m.useEffect(()=>{N&&localStorage.setItem("classroom_lastSyncedAt",N.toISOString())},[N]);const D=m.useCallback(($,W)=>{h(J=>J.map(re=>re.id===$?{...re,userStatus:W}:re))},[]),P=m.useCallback(($,W,J=!1)=>{const re={id:h7(),userId:(e==null?void 0:e.uid)||"",assignmentId:$,content:W,isImportant:J,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};v(te=>{const se=new Map(te),O=se.get($)||[];return se.set($,[...O,re]),se})},[e]),B=m.useCallback(($,W,J)=>{v(re=>{const te=new Map(re);for(const[se,O]of Array.from(te.entries())){const Y=O.findIndex(ae=>ae.id===$);if(Y!==-1){const ae=[...O];ae[Y]={...ae[Y],content:W,isImportant:J??ae[Y].isImportant,updatedAt:new Date().toISOString()},te.set(se,ae);break}}return te})},[]),Q=m.useCallback(($,W)=>{v(J=>{const re=new Map(J),te=re.get(W)||[];return re.set(W,te.filter(se=>se.id!==$)),re})},[]),ne=m.useCallback(()=>{const $=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return u.forEach(W=>{let J=W.systemStatus;W.userStatus==="in_progress"&&J!=="submitted"&&J!=="graded"&&(J="in_progress");const re=$.find(te=>te.id===J);re&&re.assignments.push(W)}),$.forEach(W=>{W.assignments.sort((J,re)=>J.dueDate?re.dueDate?new Date(J.dueDate).getTime()-new Date(re.dueDate).getTime():-1:1)}),$},[u]),ee=m.useCallback(()=>{const $=new Date,W=new Date($);W.setDate(W.getDate()+3);const J=new Date($);J.setDate(J.getDate()+7);const re=u.filter(ie=>ie.systemStatus!=="graded"&&ie.systemStatus!=="submitted"),te=u.filter(ie=>{if(!ie.dueDate||ie.systemStatus==="graded"||ie.systemStatus==="submitted")return!1;const ge=new Date(ie.dueDate);return ge>=$&&ge<=W}),se=u.filter(ie=>{if(!ie.dueDate||ie.systemStatus==="graded"||ie.systemStatus==="submitted")return!1;const ge=new Date(ie.dueDate);return ge>=$&&ge<=J}),O=u.filter(ie=>ie.systemStatus==="overdue"),Y=[],ae=new Date,X=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let ie=0;ie<7;ie++){const ge=new Date(ae);ge.setDate(ge.getDate()+ie);const Ee=ge.toISOString().split("T")[0],pt=u.filter(Ie=>Ie.dueDate&&Ie.dueDate.startsWith(Ee)).length;Y.push({day:X[ge.getDay()],count:pt,isToday:ie===0})}const he=[...re].filter(ie=>ie.dueDate).sort((ie,ge)=>new Date(ie.dueDate).getTime()-new Date(ge.dueDate).getTime()).slice(0,5);return{totalActive:re.length,upcoming3Days:te.length,upcoming7Days:se.length,overdue:O.length,weeklyWorkload:Y,nextActions:he}},[u]),L=m.useCallback($=>{let W=[...u];$!=null&&$.courseId&&(W=W.filter(se=>se.courseId===$.courseId)),$!=null&&$.status&&(W=W.filter(se=>se.systemStatus===$.status)),W.sort((se,O)=>se.dueDate?O.dueDate?new Date(se.dueDate).getTime()-new Date(O.dueDate).getTime():-1:1);const J=new Map,re=new Date,te=new Date(re);return te.setDate(te.getDate()+1),W.forEach(se=>{if(!se.dueDate)return;const O=se.dueDate.split("T")[0],Y=new Date(se.dueDate);let ae=O===re.toISOString().split("T")[0]?"Today":O===te.toISOString().split("T")[0]?"Tomorrow":Y.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});J.has(O)||J.set(O,{date:O,dateLabel:ae,assignments:[]}),J.get(O).assignments.push(se)}),Array.from(J.values())},[u]),z=m.useCallback($=>u.find(W=>W.id===$),[u]),G=m.useCallback($=>g.get($)||[],[g]);return o.jsx(yA.Provider,{value:{courses:l,assignments:u,notes:g,isLoading:x,isSyncing:_,lastSyncedAt:N,error:R,syncClassroom:A,updateAssignmentStatus:D,addNote:P,updateNote:B,deleteNote:Q,getPipelineColumns:ne,getDashboardMetrics:ee,getTimelineGroups:L,getAssignmentById:z,getNotesForAssignment:G,materials:f,reauthRequired:T},children:t})}function cn(){const t=m.useContext(yA);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}const yg=768;function Xm(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${yg-1}px)`),r=()=>{e(window.innerWidth<yg)};return n.addEventListener("change",r),e(window.innerWidth<yg),()=>n.removeEventListener("change",r)},[]),!!t}var sw="Avatar",[x7,PG]=Qn(sw),[y7,vA]=x7(sw),wA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return o.jsx(y7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(xe.span,{...r,ref:e})})});wA.displayName=sw;var bA="AvatarImage",_A=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=vA(bA,n),l=v7(r,i),c=mt(u=>{s(u),a.onImageLoadingStatusChange(u)});return _t(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(xe.img,{...i,ref:e,src:r}):null});_A.displayName=bA;var NA="AvatarFallback",SA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=vA(NA,n),[a,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(xe.span,{...s,ref:e}):null});SA.displayName=NA;function qN(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function v7(t,{referrerPolicy:e,crossOrigin:n}){const r=b7(),s=m.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=m.useState(()=>qN(i,t));return _t(()=>{l(qN(i,t))},[i,t]),_t(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),a}function w7(){return()=>{}}function b7(){return m.useSyncExternalStore(w7,()=>!0,()=>!1)}var EA=wA,TA=_A,CA=SA;const br=m.forwardRef(({className:t,...e},n)=>o.jsx(EA,{ref:n,className:U(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));br.displayName=EA.displayName;const _r=m.forwardRef(({className:t,...e},n)=>o.jsx(TA,{ref:n,className:U("aspect-square h-full w-full",t),...e}));_r.displayName=TA.displayName;const Nr=m.forwardRef(({className:t,...e},n)=>o.jsx(CA,{ref:n,className:U("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Nr.displayName=CA.displayName;function _7({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=Pu(),r=Xm(),{user:s,signOut:i}=st(),{theme:a,toggleTheme:l}=rw(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>o.jsxs("div",{className:"flex flex-col h-full bg-background",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&o.jsx("button",{className:"ml-auto",onClick:e,children:o.jsx(Li,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-4 border-b shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(br,{className:"h-8 w-8",children:[o.jsx(_r,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(Nr,{className:"text-xs",children:c})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsxs("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Academic"}),[{path:"/dashboard",label:"Dashboard",icon:HC},{path:"/pipeline",label:"Pipeline",icon:Vv},{path:"/timeline",label:"Timeline",icon:qn},{path:"/notes",label:"Notes",icon:Ao}].map(p=>o.jsxs(Tn,{href:p.path,onClick:e,className:U("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n===p.path?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[o.jsx(p.icon,{className:"w-4 h-4 mr-3"}),p.label]},p.path))]}),o.jsxs("div",{className:"mt-8",children:[o.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Performance"}),[{path:"/attendance",label:"Attendance",icon:Mx},{path:"/leaderboard",label:"Leaderboard",icon:Ra}].map(p=>o.jsxs(Tn,{href:p.path,onClick:e,className:U("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n===p.path?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[o.jsx(p.icon,{className:"w-4 h-4 mr-3"}),p.label]},p.path))]})]}),o.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx(Bv,{className:"w-4 h-4 mr-3"}):o.jsx(mm,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(Tn,{href:"/settings",onClick:e,className:U("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[o.jsx(YC,{className:"w-4 h-4 mr-3"}),"Settings"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:U("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:o.jsx(u,{})}),r&&t&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const iw=Mu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ce=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?zM:"button";return o.jsx(a,{className:U(iw({variant:e,size:n,className:t})),ref:i,...s})});ce.displayName="Button";var vg=0;function ow(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??GN()),document.body.insertAdjacentElement("beforeend",t[1]??GN()),vg++,()=>{vg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),vg--}},[])}function GN(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var wg="focusScope.autoFocusOnMount",bg="focusScope.autoFocusOnUnmount",KN={bubbles:!1,cancelable:!0},N7="FocusScope",Ym=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=m.useState(null),u=mt(s),h=mt(i),f=m.useRef(null),p=Te(e,x=>c(x)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let x=function(N){if(g.paused||!l)return;const k=N.target;l.contains(k)?f.current=k:ni(f.current,{select:!0})},b=function(N){if(g.paused||!l)return;const k=N.relatedTarget;k!==null&&(l.contains(k)||ni(f.current,{select:!0}))},_=function(N){if(document.activeElement===document.body)for(const R of N)R.removedNodes.length>0&&ni(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const w=new MutationObserver(_);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),w.disconnect()}}},[r,l,g.paused]),m.useEffect(()=>{if(l){XN.add(g);const x=document.activeElement;if(!l.contains(x)){const _=new CustomEvent(wg,KN);l.addEventListener(wg,u),l.dispatchEvent(_),_.defaultPrevented||(S7(k7(jA(l)),{select:!0}),document.activeElement===x&&ni(l))}return()=>{l.removeEventListener(wg,u),setTimeout(()=>{const _=new CustomEvent(bg,KN);l.addEventListener(bg,h),l.dispatchEvent(_),_.defaultPrevented||ni(x??document.body,{select:!0}),l.removeEventListener(bg,h),XN.remove(g)},0)}}},[l,u,h,g]);const v=m.useCallback(x=>{if(!n&&!r||g.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,_=document.activeElement;if(b&&_){const w=x.currentTarget,[N,k]=E7(w);N&&k?!x.shiftKey&&_===k?(x.preventDefault(),n&&ni(N,{select:!0})):x.shiftKey&&_===N&&(x.preventDefault(),n&&ni(k,{select:!0})):_===w&&x.preventDefault()}},[n,r,g.paused]);return o.jsx(xe.div,{tabIndex:-1,...a,ref:p,onKeyDown:v})});Ym.displayName=N7;function S7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ni(r,{select:e}),document.activeElement!==n)return}function E7(t){const e=jA(t),n=QN(e,t),r=QN(e.reverse(),t);return[n,r]}function jA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function QN(t,e){for(const n of t)if(!T7(n,{upTo:e}))return n}function T7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function C7(t){return t instanceof HTMLInputElement&&"select"in t}function ni(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&C7(t)&&e&&t.select()}}var XN=j7();function j7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=YN(t,e),t.unshift(e)},remove(e){var n;t=YN(t,e),(n=t[0])==null||n.resume()}}}function YN(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function k7(t){return t.filter(e=>e.tagName!=="A")}var A7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ia=new WeakMap,Jd=new WeakMap,Zd={},_g=0,kA=function(t){return t&&(t.host||kA(t.parentNode))},I7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=kA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},R7=function(t,e,n,r){var s=I7(e,Array.isArray(t)?t:[t]);Zd[n]||(Zd[n]=new WeakMap);var i=Zd[n],a=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",x=(ia.get(p)||0)+1,b=(i.get(p)||0)+1;ia.set(p,x),i.set(p,b),a.push(p),x===1&&v&&Jd.set(p,!0),b===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return h(e),l.clear(),_g++,function(){a.forEach(function(f){var p=ia.get(f)-1,g=i.get(f)-1;ia.set(f,p),i.set(f,g),p||(Jd.has(f)||f.removeAttribute(r),Jd.delete(f)),g||f.removeAttribute(n)}),_g--,_g||(ia=new WeakMap,ia=new WeakMap,Jd=new WeakMap,Zd={})}},aw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=A7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),R7(r,s,n,"aria-hidden")):function(){return null}},Xr=function(){return Xr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xr.apply(this,arguments)};function AA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function P7(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Ih="right-scroll-bar-position",Rh="width-before-scroll-bar",D7="with-scroll-bars-hidden",M7="--removed-body-scroll-bar-size";function Ng(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function O7(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var L7=typeof window<"u"?m.useLayoutEffect:m.useEffect,JN=new WeakMap;function V7(t,e){var n=O7(null,function(r){return t.forEach(function(s){return Ng(s,r)})});return L7(function(){var r=JN.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Ng(l,null)}),i.forEach(function(l){s.has(l)||Ng(l,a)})}JN.set(n,t)},[t]),n}function F7(t){return t}function z7(t,e){e===void 0&&(e=F7);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),n}}}};return s}function U7(t){t===void 0&&(t={});var e=z7(null);return e.options=Xr({async:!0,ssr:!1},t),e}var IA=function(t){var e=t.sideCar,n=AA(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Xr({},n))};IA.isSideCarExport=!0;function $7(t,e){return t.useMedium(e),IA}var RA=U7(),Sg=function(){},Jm=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Sg,onWheelCapture:Sg,onTouchMoveCapture:Sg}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,g=t.noIsolation,v=t.inert,x=t.allowPinchZoom,b=t.as,_=b===void 0?"div":b,w=t.gapMode,N=AA(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=p,R=V7([n,e]),M=Xr(Xr({},N),s);return m.createElement(m.Fragment,null,h&&m.createElement(k,{sideCar:RA,removeScrollBar:u,shards:f,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:w}),a?m.cloneElement(m.Children.only(l),Xr(Xr({},M),{ref:R})):m.createElement(_,Xr({},M,{className:c,ref:R}),l))});Jm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jm.classNames={fullWidth:Rh,zeroRight:Ih};var B7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function W7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=B7();return e&&t.setAttribute("nonce",e),t}function H7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function q7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var G7=function(){var t=0,e=null;return{add:function(n){t==0&&(e=W7())&&(H7(e,n),q7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},K7=function(){var t=G7();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},PA=function(){var t=K7(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Q7={left:0,top:0,right:0,gap:0},Eg=function(t){return parseInt(t||"",10)||0},X7=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Eg(n),Eg(r),Eg(s)]},Y7=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Q7;var e=X7(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},J7=PA(),za="data-scroll-locked",Z7=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(D7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(za,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ih,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Rh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ih," .").concat(Ih,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rh," .").concat(Rh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(za,`] {
    `).concat(M7,": ").concat(l,`px;
  }
`)},ZN=function(){var t=parseInt(document.body.getAttribute(za)||"0",10);return isFinite(t)?t:0},e$=function(){m.useEffect(function(){return document.body.setAttribute(za,(ZN()+1).toString()),function(){var t=ZN()-1;t<=0?document.body.removeAttribute(za):document.body.setAttribute(za,t.toString())}},[])},t$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;e$();var i=m.useMemo(function(){return Y7(s)},[s]);return m.createElement(J7,{styles:Z7(i,!e,s,n?"":"!important")})},fy=!1;if(typeof window<"u")try{var eh=Object.defineProperty({},"passive",{get:function(){return fy=!0,!0}});window.addEventListener("test",eh,eh),window.removeEventListener("test",eh,eh)}catch{fy=!1}var oa=fy?{passive:!1}:!1,n$=function(t){return t.tagName==="TEXTAREA"},DA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!n$(t)&&n[e]==="visible")},r$=function(t){return DA(t,"overflowY")},s$=function(t){return DA(t,"overflowX")},eS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=MA(t,r);if(s){var i=OA(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},i$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},o$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},MA=function(t,e){return t==="v"?r$(e):s$(e)},OA=function(t,e){return t==="v"?i$(e):o$(e)},a$=function(t,e){return t==="h"&&e==="rtl"?-1:1},l$=function(t,e,n,r,s){var i=a$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),u=!1,h=a>0,f=0,p=0;do{var g=OA(t,l),v=g[0],x=g[1],b=g[2],_=x-b-i*v;(v||_)&&MA(t,l)&&(f+=_,p+=v),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},th=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},tS=function(t){return[t.deltaX,t.deltaY]},nS=function(t){return t&&"current"in t?t.current:t},c$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},u$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},d$=0,aa=[];function h$(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(d$++)[0],i=m.useState(PA)[0],a=m.useRef(t);m.useEffect(function(){a.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=P7([t.lockRef.current],(t.shards||[]).map(nS),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!a.current.allowPinchZoom;var _=th(x),w=n.current,N="deltaX"in x?x.deltaX:w[0]-_[0],k="deltaY"in x?x.deltaY:w[1]-_[1],R,M=x.target,S=Math.abs(N)>Math.abs(k)?"h":"v";if("touches"in x&&S==="h"&&M.type==="range")return!1;var C=eS(S,M);if(!C)return!0;if(C?R=S:(R=S==="v"?"h":"v",C=eS(S,M)),!C)return!1;if(!r.current&&"changedTouches"in x&&(N||k)&&(r.current=R),!R)return!0;var T=r.current||R;return l$(T,b,x,T==="h"?N:k,!0)},[]),c=m.useCallback(function(x){var b=x;if(!(!aa.length||aa[aa.length-1]!==i)){var _="deltaY"in b?tS(b):th(b),w=e.current.filter(function(R){return R.name===b.type&&(R.target===b.target||b.target===R.shadowParent)&&c$(R.delta,_)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var N=(a.current.shards||[]).map(nS).filter(Boolean).filter(function(R){return R.contains(b.target)}),k=N.length>0?l(b,N[0]):!a.current.noIsolation;k&&b.cancelable&&b.preventDefault()}}},[]),u=m.useCallback(function(x,b,_,w){var N={name:x,delta:b,target:_,should:w,shadowParent:f$(_)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(k){return k!==N})},1)},[]),h=m.useCallback(function(x){n.current=th(x),r.current=void 0},[]),f=m.useCallback(function(x){u(x.type,tS(x),x.target,l(x,t.lockRef.current))},[]),p=m.useCallback(function(x){u(x.type,th(x),x.target,l(x,t.lockRef.current))},[]);m.useEffect(function(){return aa.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,oa),document.addEventListener("touchmove",c,oa),document.addEventListener("touchstart",h,oa),function(){aa=aa.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,oa),document.removeEventListener("touchmove",c,oa),document.removeEventListener("touchstart",h,oa)}},[]);var g=t.removeScrollBar,v=t.inert;return m.createElement(m.Fragment,null,v?m.createElement(i,{styles:u$(s)}):null,g?m.createElement(t$,{gapMode:t.gapMode}):null)}function f$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const m$=$7(RA,h$);var Zm=m.forwardRef(function(t,e){return m.createElement(Jm,Xr({},t,{ref:e,sideCar:m$}))});Zm.classNames=Jm.classNames;var lw="Popover",[LA,DG]=Qn(lw,[jl]),Zu=jl(),[p$,no]=LA(lw),VA=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=t,l=Zu(e),c=m.useRef(null),[u,h]=m.useState(!1),[f=!1,p]=Is({prop:r,defaultProp:s,onChange:i});return o.jsx(t0,{...l,children:o.jsx(p$,{scope:e,contentId:Zr(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:m.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:m.useCallback(()=>h(!0),[]),onCustomAnchorRemove:m.useCallback(()=>h(!1),[]),modal:a,children:n})})};VA.displayName=lw;var FA="PopoverAnchor",g$=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=no(FA,n),i=Zu(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return m.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(ym,{...i,...r,ref:e})});g$.displayName=FA;var zA="PopoverTrigger",UA=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=no(zA,n),i=Zu(n),a=Te(e,s.triggerRef),l=o.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":qA(s.open),...r,ref:a,onClick:me(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(ym,{asChild:!0,...i,children:l})});UA.displayName=zA;var cw="PopoverPortal",[x$,y$]=LA(cw,{forceMount:void 0}),$A=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=no(cw,e);return o.jsx(x$,{scope:e,forceMount:n,children:o.jsx(An,{present:n||i.open,children:o.jsx(Sl,{asChild:!0,container:s,children:r})})})};$A.displayName=cw;var yl="PopoverContent",BA=m.forwardRef((t,e)=>{const n=y$(yl,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=no(yl,t.__scopePopover);return o.jsx(An,{present:r||i.open,children:i.modal?o.jsx(w$,{...s,ref:e}):o.jsx(b$,{...s,ref:e})})});BA.displayName=yl;var v$=Fo("PopoverContent.RemoveScroll"),w$=m.forwardRef((t,e)=>{const n=no(yl,t.__scopePopover),r=m.useRef(null),s=Te(e,r),i=m.useRef(!1);return m.useEffect(()=>{const a=r.current;if(a)return aw(a)},[]),o.jsx(Zm,{as:v$,allowPinchZoom:!0,children:o.jsx(WA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:me(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),b$=m.forwardRef((t,e)=>{const n=no(yl,t.__scopePopover),r=m.useRef(!1),s=m.useRef(!1);return o.jsx(WA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),WA=m.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...f}=t,p=no(yl,n),g=Zu(n);return ow(),o.jsx(Ym,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Nl,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:o.jsx(n0,{"data-state":qA(p.open),role:"dialog",id:p.contentId,...g,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),HA="PopoverClose",_$=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=no(HA,n);return o.jsx(xe.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});_$.displayName=HA;var N$="PopoverArrow",S$=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Zu(n);return o.jsx(r0,{...s,...r,ref:e})});S$.displayName=N$;function qA(t){return t?"open":"closed"}var E$=VA,T$=UA,C$=$A,GA=BA;const j$=E$,k$=T$,KA=m.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>o.jsx(C$,{children:o.jsx(GA,{ref:s,align:e,sideOffset:n,className:U("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));KA.displayName=GA.displayName;var A$=m.createContext(void 0);function ep(t){const e=m.useContext(A$);return t||e||"ltr"}function my(t,[e,n]){return Math.min(n,Math.max(e,t))}function I$(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var uw="ScrollArea",[QA,MG]=Qn(uw),[R$,lr]=QA(uw),XA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=t,[l,c]=m.useState(null),[u,h]=m.useState(null),[f,p]=m.useState(null),[g,v]=m.useState(null),[x,b]=m.useState(null),[_,w]=m.useState(0),[N,k]=m.useState(0),[R,M]=m.useState(!1),[S,C]=m.useState(!1),T=Te(e,A=>c(A)),j=ep(s);return o.jsx(R$,{scope:n,type:r,dir:j,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:h,content:f,onContentChange:p,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:R,onScrollbarXEnabledChange:M,scrollbarY:x,onScrollbarYChange:b,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:w,onCornerHeightChange:k,children:o.jsx(xe.div,{dir:j,...a,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});XA.displayName=uw;var YA="ScrollAreaViewport",JA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,a=lr(YA,n),l=m.useRef(null),c=Te(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});JA.displayName=YA;var fs="ScrollAreaScrollbar",dw=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=lr(fs,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=t.orientation==="horizontal";return m.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(P$,{...r,ref:e,forceMount:n}):s.type==="scroll"?o.jsx(D$,{...r,ref:e,forceMount:n}):s.type==="auto"?o.jsx(ZA,{...r,ref:e,forceMount:n}):s.type==="always"?o.jsx(hw,{...r,ref:e}):null});dw.displayName=fs;var P$=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=lr(fs,t.__scopeScrollArea),[i,a]=m.useState(!1);return m.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},h=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(An,{present:n||i,children:o.jsx(ZA,{"data-state":i?"visible":"hidden",...r,ref:e})})}),D$=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=lr(fs,t.__scopeScrollArea),i=t.orientation==="horizontal",a=np(()=>c("SCROLL_END"),100),[l,c]=I$("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const p=()=>{const g=u[h];f!==g&&(c("SCROLL"),a()),f=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,a]),o.jsx(An,{present:n||l!=="hidden",children:o.jsx(hw,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:me(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),ZA=m.forwardRef((t,e)=>{const n=lr(fs,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,a]=m.useState(!1),l=t.orientation==="horizontal",c=np(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:h)}},10);return vl(n.viewport,c),vl(n.content,c),o.jsx(An,{present:r||i,children:o.jsx(hw,{"data-state":i?"visible":"hidden",...s,ref:e})})}),hw=m.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=lr(fs,t.__scopeScrollArea),i=m.useRef(null),a=m.useRef(0),[l,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=sI(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function f(p,g){return z$(p,a.current,l,g)}return n==="horizontal"?o.jsx(M$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,g=rS(p,l,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=f(p,s.dir))}}):n==="vertical"?o.jsx(O$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,g=rS(p,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=f(p))}}):null}),M$=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=lr(fs,t.__scopeScrollArea),[a,l]=m.useState(),c=m.useRef(null),u=Te(e,c,i.onScrollbarXChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(tI,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":tp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(p),oI(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Df(a.paddingLeft),paddingEnd:Df(a.paddingRight)}})}})}),O$=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=lr(fs,t.__scopeScrollArea),[a,l]=m.useState(),c=m.useRef(null),u=Te(e,c,i.onScrollbarYChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(tI,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":tp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(p),oI(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Df(a.paddingTop),paddingEnd:Df(a.paddingBottom)}})}})}),[L$,eI]=QA(fs),tI=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...p}=t,g=lr(fs,n),[v,x]=m.useState(null),b=Te(e,T=>x(T)),_=m.useRef(null),w=m.useRef(""),N=g.viewport,k=r.content-r.viewport,R=mt(h),M=mt(c),S=np(f,10);function C(T){if(_.current){const j=T.clientX-_.current.left,A=T.clientY-_.current.top;u({x:j,y:A})}}return m.useEffect(()=>{const T=j=>{const A=j.target;(v==null?void 0:v.contains(A))&&R(j,k)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[N,v,k,R]),m.useEffect(M,[r,M]),vl(v,S),vl(g.content,S),o.jsx(L$,{scope:n,scrollbar:v,hasThumb:s,onThumbChange:mt(i),onThumbPointerUp:mt(a),onThumbPositionChange:M,onThumbPointerDown:mt(l),children:o.jsx(xe.div,{...p,ref:b,style:{position:"absolute",...p.style},onPointerDown:me(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),_.current=v.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),C(T))}),onPointerMove:me(t.onPointerMove,C),onPointerUp:me(t.onPointerUp,T=>{const j=T.target;j.hasPointerCapture(T.pointerId)&&j.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),_.current=null})})})}),Pf="ScrollAreaThumb",nI=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=eI(Pf,t.__scopeScrollArea);return o.jsx(An,{present:n||s.hasThumb,children:o.jsx(V$,{ref:e,...r})})}),V$=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=lr(Pf,n),a=eI(Pf,n),{onThumbPositionChange:l}=a,c=Te(e,f=>a.onThumbChange(f)),u=m.useRef(void 0),h=np(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const f=i.viewport;if(f){const p=()=>{if(h(),!u.current){const g=U$(f,l);u.current=g,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[i.viewport,h,l]),o.jsx(xe.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:me(t.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),v=f.clientX-g.left,x=f.clientY-g.top;a.onThumbPointerDown({x:v,y:x})}),onPointerUp:me(t.onPointerUp,a.onThumbPointerUp)})});nI.displayName=Pf;var fw="ScrollAreaCorner",rI=m.forwardRef((t,e)=>{const n=lr(fw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(F$,{...t,ref:e}):null});rI.displayName=fw;var F$=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=lr(fw,n),[i,a]=m.useState(0),[l,c]=m.useState(0),u=!!(i&&l);return vl(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),vl(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),u?o.jsx(xe.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Df(t){return t?parseInt(t,10):0}function sI(t,e){const n=t/e;return isNaN(n)?0:n}function tp(t){const e=sI(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function z$(t,e,n,r="ltr"){const s=tp(n),i=s/2,a=e||i,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return iI([c,u],f)(t)}function rS(t,e,n="ltr"){const r=tp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,a]:[a*-1,0],u=my(t,c);return iI([0,a],[0,l])(u)}function iI(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function oI(t,e){return t>0&&t<e}var U$=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function np(t,e){const n=mt(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function vl(t,e){const n=mt(e);_t(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var aI=XA,$$=JA,B$=rI;const lI=m.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(aI,{ref:r,className:U("relative overflow-hidden",t),...n,children:[o.jsx($$,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(cI,{}),o.jsx(B$,{})]}));lI.displayName=aI.displayName;const cI=m.forwardRef(({className:t,orientation:e="vertical",...n},r)=>o.jsx(dw,{ref:r,orientation:e,className:U("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:o.jsx(nI,{className:"relative flex-1 rounded-full bg-border"})}));cI.displayName=dw.displayName;const W$=Mu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}}),jn=m.forwardRef(({className:t,variant:e,...n},r)=>o.jsx("div",{ref:r,className:U(W$({variant:e}),t),...n}));jn.displayName="Badge";function H$(){const{user:t}=st();Zi();const[e,n]=m.useState([]),[r,s]=m.useState(0),[i,a]=m.useState(!1),[l,c]=m.useState(()=>parseInt(localStorage.getItem("lastNotificationRead")||"0"));m.useEffect(()=>{if(!t)return;const g=Po(Qi(Me,"activities"),Fa("createdAt","desc"),Vc(20)),v=Ar(g,x=>{const _=x.docs.map(w=>({id:w.id,...w.data()})).filter(w=>{if(!w.userId||w.userId===t.uid)return!1;if(w.emailDomain&&t.email){const N=t.email.split("@")[1];if(w.emailDomain!==N)return!1}return!0});n(_)});return()=>{v()}},[t]),m.useEffect(()=>{const g=e.filter(v=>new Date(v.createdAt).getTime()>l).length;s(g)},[e,l]),m.useEffect(()=>{if(!t)return;const g=async()=>{try{const x=new Date;x.setHours(x.getHours()-24);const b=Qi(Me,"activities"),_=Po(b,Z0("createdAt","<",x.toISOString())),w=await dA(_),N=w.docs.map(k=>fA(k.ref));await Promise.all(N),w.docs.length>0&&console.log(`Cleaned up ${w.docs.length} old activities`)}catch(x){console.error("Error cleaning up old data:",x)}};g();const v=setInterval(g,60*60*1e3);return()=>clearInterval(v)},[t]);const u=g=>{if(a(g),g){const v=Date.now();c(v),localStorage.setItem("lastNotificationRead",v.toString())}},h=g=>{if(!g)return"";const v=new Date(g),b=(new Date().getTime()-v.getTime())/1e3;return b<60?"Just now":b<3600?`${Math.floor(b/60)}m`:b<86400?`${Math.floor(b/3600)}h`:b<604800?`${Math.floor(b/86400)}d`:`${Math.floor(b/604800)}w`},f=g=>{switch(g){case"badge_earned":return o.jsx(Ra,{className:"h-3 w-3 text-white fill-amber-100"});case"streak_milestone":return o.jsx(zO,{className:"h-3 w-3 text-white fill-orange-100"});case"assignment_completed":return o.jsx(fm,{className:"h-3 w-3 text-white"});default:return o.jsx(Ac,{className:"h-3 w-3 text-white"})}},p=g=>{switch(g){case"badge_earned":return"bg-amber-500 border-amber-200";case"streak_milestone":return"bg-orange-500 border-orange-200";case"assignment_completed":return"bg-emerald-500 border-emerald-200";default:return"bg-blue-500 border-blue-200"}};return o.jsxs(j$,{open:i,onOpenChange:u,children:[o.jsx(k$,{asChild:!0,children:o.jsxs(ce,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground rounded-full w-9 h-9",children:[o.jsx(Ac,{className:"h-5 w-5"}),r>0&&o.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background animate-pulse"})]})}),o.jsxs(KA,{className:"w-80 p-0 mr-2 shadow-xl border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",align:"end",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsx("h4",{className:"font-semibold text-sm",children:"Notifications"}),r>0&&o.jsxs(jn,{variant:"secondary",className:"text-[10px] h-5 px-1.5",children:[r," new"]})]}),o.jsx(lI,{className:"h-[300px]",children:e.length>0?o.jsx("div",{className:"flex flex-col",children:e.map(g=>{var v;return o.jsxs("div",{className:"flex items-start gap-3 p-4 hover:bg-muted/50 transition-colors border-b last:border-0 relative group",children:[o.jsxs("div",{className:"relative shrink-0",children:[o.jsxs(br,{className:"h-10 w-10 border border-border",children:[o.jsx(_r,{src:g.userAvatar||void 0}),o.jsx(Nr,{children:((v=g.userName)==null?void 0:v[0])||"?"})]}),o.jsx("div",{className:U("absolute -bottom-1 -right-1 rounded-full p-0.5 border-[2px] border-background flex items-center justify-center w-5 h-5",p(g.type)),children:f(g.type)})]}),o.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[o.jsxs("p",{className:"text-sm text-foreground leading-snug",children:[o.jsx("span",{className:"font-semibold",children:g.userName})," ",o.jsx("span",{className:"text-muted-foreground font-normal",children:g.content.replace(g.userName,"").trim()})]}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:h(g.createdAt)})]}),new Date(g.createdAt).getTime()>l&&o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-blue-500 rounded-full"})]},g.id)})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-[200px] text-muted-foreground gap-2",children:[o.jsx("div",{className:"p-3 bg-muted rounded-full",children:o.jsx(Ac,{className:"h-6 w-6 opacity-20"})}),o.jsx("p",{className:"text-sm",children:"No new activity"})]})})]})]})}function q$({onMobileMenuClick:t}){var x;const{syncClassroom:e,isSyncing:n}=cn(),[r]=Pu(),s=Xm(),{user:i}=st(),[a,l]=m.useState(!1);m.useEffect(()=>{if(i&&!localStorage.getItem("trace_docs_seen")){l(!0);const _=setTimeout(()=>{l(!1),localStorage.setItem("trace_docs_seen","true")},1e4);return()=>clearTimeout(_)}},[i]);const c=()=>{l(!1),localStorage.setItem("trace_docs_seen","true"),window.location.href="/docs"},u=()=>{console.log("[GLOBAL REFRESH] Clearing all caches..."),bn.clearAll(),console.log("[GLOBAL REFRESH] Cache cleared. Starting sync..."),e().catch(b=>{console.error("Sync failed:",b)}),setTimeout(()=>{console.log("[GLOBAL REFRESH] Reloading page..."),window.location.reload()},1e3)},h=((x=i==null?void 0:i.email)==null?void 0:x.split("@")[1])||"",p=h&&!["gmail.com","yahoo.com","outlook.com","hotmail.com","live.com","aol.com","icloud.com","protonmail.com","mail.com","zoho.com","yandex.com"].includes(h.toLowerCase())&&!h.endsWith(".com")&&h.includes("."),v={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return o.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[o.jsxs("div",{className:"flex items-center flex-1",children:[s&&o.jsx(ce,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:o.jsx(QC,{className:"h-5 w-5"})}),o.jsx("span",{className:"md:hidden font-medium text-lg",children:v}),!s&&p&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(UO,{className:"h-3.5 w-3.5 text-muted-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:h})]})]}),o.jsxs("div",{className:"flex items-center ml-4 gap-2",children:[o.jsx(H$,{}),o.jsxs(Ds,{open:a,children:[o.jsx(Ms,{asChild:!0,children:o.jsx(ce,{variant:"ghost",size:"icon",onClick:c,title:"Documentation",children:o.jsx(KC,{className:"w-5 h-5"})})}),o.jsx(os,{side:"bottom",className:"max-w-xs",children:o.jsx("p",{className:"text-sm",children:"New to Trace? Check out our documentation to learn all features!"})})]}),o.jsx(ce,{variant:"ghost",size:"icon",onClick:u,disabled:n,className:U(n&&"animate-spin"),title:"Refresh Everything",children:o.jsx(Uo,{className:"w-5 h-5"})})]})]})}var uI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sS=ze.createContext&&ze.createContext(uI),G$=["attr","size","title"];function K$(t,e){if(t==null)return{};var n=Q$(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Q$(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Mf(){return Mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mf.apply(this,arguments)}function iS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Of(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iS(Object(n),!0).forEach(function(r){X$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function X$(t,e,n){return e=Y$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Y$(t){var e=J$(t,"string");return typeof e=="symbol"?e:e+""}function J$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dI(t){return t&&t.map((e,n)=>ze.createElement(e.tag,Of({key:n},e.attr),dI(e.child)))}function mw(t){return e=>ze.createElement(Z$,Mf({attr:Of({},t.attr)},e),dI(t.child))}function Z$(t){var e=n=>{var{attr:r,size:s,title:i}=t,a=K$(t,G$),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),ze.createElement("svg",Mf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:Of(Of({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&ze.createElement("title",null,i),t.children)};return sS!==void 0?ze.createElement(sS.Consumer,null,n=>e(n)):e(uI)}function hI(t){return mw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function eB(t){return mw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const tB=[{icon:eB,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:HO,title:"Kanban Board",description:"Visual assignment tracking."},{icon:AO,title:"Linear Timeline",description:"Chronological deadline view."},{icon:IO,title:"Performance Metrics",description:"Grade & workload analytics."}];function nB(){const{signInWithGoogle:t,loading:e,authenticating:n,error:r}=st();return o.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[o.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),o.jsx("header",{className:"px-10 py-8 z-10",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),o.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",o.jsx("br",{}),o.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),o.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),o.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:tB.map(s=>o.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[o.jsx(s.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),o.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:s.title}),o.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:s.description})]},s.title))})]})}),o.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:o.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),o.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[o.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),o.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[o.jsx(Cn,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",o.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),o.jsxs(ce,{onClick:t,disabled:e||n,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md disabled:opacity-50","data-testid":"button-signin-google",children:[o.jsx(hI,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:n?"Signing in...":"Continue with Google"})]}),r&&o.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[o.jsx(Cn,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:r})]})]}),o.jsx("div",{className:"pt-8 border-t border-zinc-100",children:o.jsxs("div",{className:"flex gap-4",children:[o.jsx(QO,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),o.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),o.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[o.jsx("span",{children:" 2024 Trace Inc."}),o.jsxs("div",{className:"flex gap-6",children:[o.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),o.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function Ue({className:t,...e}){return o.jsx("div",{className:U("animate-pulse rounded-md bg-muted",t),...e})}const Pe=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Pe.displayName="Card";const nt=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("flex flex-col space-y-1.5 p-6",t),...e}));nt.displayName="CardHeader";const ft=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("text-2xl font-semibold leading-none tracking-tight",t),...e}));ft.displayName="CardTitle";const yn=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("text-sm text-muted-foreground",t),...e}));yn.displayName="CardDescription";const Ge=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("p-6 pt-0",t),...e}));Ge.displayName="CardContent";const pw=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("flex items-center p-6 pt-0",t),...e}));pw.displayName="CardFooter";function fI(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],a=r.toISOString().split("T")[0];return s===i?"Today":s===a?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function mI(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function rB({assignment:t,onClick:e,hasNotes:n}){const{courses:r}=cn(),s=mI(t.dueDate),i=s!==null&&s<=1&&s>=0,a=t.systemStatus==="overdue"||s!==null&&s<0,l=r.find(u=>u.id===t.courseId),c=l==null?void 0:l.color;return o.jsx(Pe,{className:U("p-4 cursor-pointer transition-all duration-200 hover-elevate group",a&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"flex items-start justify-between gap-2",children:o.jsx(Ui,{children:o.jsxs(Ds,{delayDuration:0,children:[o.jsx(Ms,{asChild:!0,children:o.jsx(jn,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-medium truncate max-w-[180px] border-0",style:{backgroundColor:c||void 0,color:c?Qm(c):void 0},children:t.courseName})}),o.jsx(os,{children:o.jsx("p",{children:t.courseName})})]})})}),o.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(qn,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:U(a&&"text-destructive",i&&!a&&"text-foreground font-medium"),children:fI(t.dueDate)}),a&&o.jsx(Cn,{className:"h-3.5 w-3.5 text-destructive"}),i&&!a&&o.jsx(GC,{className:"h-3.5 w-3.5 text-foreground"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&o.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o.jsx(Ci,{className:"h-3.5 w-3.5 text-muted-foreground"}),o.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(Ci,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Submitted"})]})]}),o.jsx("div",{className:"flex items-center gap-1",children:n&&o.jsx(Ao,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function sB({assignment:t,onClick:e}){const n=mI(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[o.jsx("span",{className:U("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:fI(t.dueDate)}),r&&o.jsx(Cn,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const gw=m.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:U("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));gw.displayName="Textarea";var iB="Separator",oS="horizontal",oB=["horizontal","vertical"],pI=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=oS,...s}=t,i=aB(r)?r:oS,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(xe.div,{"data-orientation":i,...l,...s,ref:e})});pI.displayName=iB;function aB(t){return oB.includes(t)}var gI=pI;const $n=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>o.jsx(gI,{ref:s,decorative:n,orientation:e,className:U("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));$n.displayName=gI.displayName;var xw="Dialog",[xI,yI]=Qn(xw),[lB,Lr]=xI(xw),vI=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=m.useRef(null),c=m.useRef(null),[u=!1,h]=Is({prop:r,defaultProp:s,onChange:i});return o.jsx(lB,{scope:e,triggerRef:l,contentRef:c,contentId:Zr(),titleId:Zr(),descriptionId:Zr(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:a,children:n})};vI.displayName=xw;var wI="DialogTrigger",bI=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(wI,n),i=Te(e,s.triggerRef);return o.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":ww(s.open),...r,ref:i,onClick:me(t.onClick,s.onOpenToggle)})});bI.displayName=wI;var yw="DialogPortal",[cB,_I]=xI(yw,{forceMount:void 0}),NI=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Lr(yw,e);return o.jsx(cB,{scope:e,forceMount:n,children:m.Children.map(r,a=>o.jsx(An,{present:n||i.open,children:o.jsx(Sl,{asChild:!0,container:s,children:a})}))})};NI.displayName=yw;var Lf="DialogOverlay",SI=m.forwardRef((t,e)=>{const n=_I(Lf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Lr(Lf,t.__scopeDialog);return i.modal?o.jsx(An,{present:r||i.open,children:o.jsx(dB,{...s,ref:e})}):null});SI.displayName=Lf;var uB=Fo("DialogOverlay.RemoveScroll"),dB=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(Lf,n);return o.jsx(Zm,{as:uB,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(xe.div,{"data-state":ww(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ko="DialogContent",EI=m.forwardRef((t,e)=>{const n=_I(Ko,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Lr(Ko,t.__scopeDialog);return o.jsx(An,{present:r||i.open,children:i.modal?o.jsx(hB,{...s,ref:e}):o.jsx(fB,{...s,ref:e})})});EI.displayName=Ko;var hB=m.forwardRef((t,e)=>{const n=Lr(Ko,t.__scopeDialog),r=m.useRef(null),s=Te(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return aw(i)},[]),o.jsx(TI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:me(t.onFocusOutside,i=>i.preventDefault())})}),fB=m.forwardRef((t,e)=>{const n=Lr(Ko,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return o.jsx(TI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),TI=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=Lr(Ko,n),c=m.useRef(null),u=Te(e,c);return ow(),o.jsxs(o.Fragment,{children:[o.jsx(Ym,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Nl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":ww(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(pB,{titleId:l.titleId}),o.jsx(xB,{contentRef:c,descriptionId:l.descriptionId})]})]})}),vw="DialogTitle",CI=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(vw,n);return o.jsx(xe.h2,{id:s.titleId,...r,ref:e})});CI.displayName=vw;var jI="DialogDescription",kI=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(jI,n);return o.jsx(xe.p,{id:s.descriptionId,...r,ref:e})});kI.displayName=jI;var AI="DialogClose",II=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(AI,n);return o.jsx(xe.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});II.displayName=AI;function ww(t){return t?"open":"closed"}var RI="DialogTitleWarning",[mB,PI]=VM(RI,{contentName:Ko,titleName:vw,docsSlug:"dialog"}),pB=({titleId:t})=>{const e=PI(RI),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},gB="DialogDescriptionWarning",xB=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${PI(gB).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},bw=vI,yB=bI,_w=NI,ed=SI,td=EI,nd=CI,rd=kI,rp=II;const DI=bw,vB=_w,MI=m.forwardRef(({className:t,...e},n)=>o.jsx(ed,{className:U("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));MI.displayName=ed.displayName;const wB=Mu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Nw=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>o.jsxs(vB,{children:[o.jsx(MI,{}),o.jsxs(td,{ref:s,className:U(wB({side:t}),e),...r,children:[n,o.jsxs(rp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(Li,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Nw.displayName=td.displayName;const Sw=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",t),...e});Sw.displayName="SheetHeader";const Ew=m.forwardRef(({className:t,...e},n)=>o.jsx(nd,{ref:n,className:U("text-lg font-semibold text-foreground",t),...e}));Ew.displayName=nd.displayName;const OI=m.forwardRef(({className:t,...e},n)=>o.jsx(rd,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));OI.displayName=rd.displayName;function bB(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function _B(t){return t?` at ${t}`:""}function NB({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),o.jsx("div",{className:"space-y-4",children:r.map((s,i)=>o.jsxs("div",{className:"flex items-start gap-3 relative",children:[o.jsx("div",{className:U("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&o.jsx(Ci,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:U("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function SB({note:t,onUpdate:e,onDelete:n}){const[r,s]=m.useState(!1),[i,a]=m.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return o.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&o.jsx(Dx,{className:"h-3.5 w-3.5 fill-current text-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:o.jsx(Dx,{className:U("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:o.jsx(GO,{className:"h-3.5 w-3.5"})}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:o.jsx(YO,{className:"h-3.5 w-3.5"})})]})]}),r?o.jsxs("div",{className:"space-y-2",children:[o.jsx(gw,{value:i,onChange:c=>a(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),o.jsxs(ce,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[o.jsx($v,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function Tw({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:a}=cn(),[l,c]=m.useState(""),[u,h]=m.useState(!1);if(!t)return null;const f=r(t.id),p=t.systemStatus==="overdue",g=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return o.jsx(DI,{open:e,onOpenChange:n,children:o.jsxs(Nw,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[o.jsx(Sw,{className:"space-y-4",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[o.jsx(jn,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),o.jsx(Ew,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),o.jsxs("div",{className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(qn,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("span",{className:U(p&&"text-destructive"),children:[bB(t.dueDate),_B(t.dueTime)]}),p&&o.jsx(Cn,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?o.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):o.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),o.jsx($n,{}),t.description&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),o.jsx($n,{})]}),o.jsx(NB,{assignment:t}),o.jsx($n,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&o.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[o.jsx(KO,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(gw,{value:l,onChange:v=>c(v.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),o.jsxs(ce,{size:"sm",onClick:g,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[o.jsx($v,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?o.jsx("div",{className:"space-y-2",children:f.map(v=>o.jsx(SB,{note:v,onUpdate:(x,b)=>i(v.id,x,b),onDelete:()=>a(v.id,t.id)},v.id))}):!u&&o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&o.jsxs(o.Fragment,{children:[o.jsx($n,{}),o.jsxs(ce,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[o.jsx(kx,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function Vl(){const{refreshAccessToken:t,signOut:e}=st(),[n,r]=m.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),o.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:o.jsx(Uo,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),o.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),o.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[o.jsx(ce,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?o.jsxs(o.Fragment,{children:[o.jsx(Uo,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{className:"font-medium",children:"Signing In..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(hI,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),o.jsx(ce,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),o.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[o.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function EB({title:t,assignments:e,onCardClick:n,notes:r}){return o.jsxs("div",{className:"flex flex-col min-w-[280px] w-[280px] h-full",children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[o.jsx("h3",{className:"text-sm font-medium",children:t}),o.jsx(jn,{variant:"secondary",className:"text-xs font-mono",children:e.length})]}),o.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:e.length>0?e.map(s=>{var i;return o.jsx(rB,{assignment:s,onClick:()=>n(s),hasNotes:(((i=r.get(s.id))==null?void 0:i.length)||0)>0},s.id)}):o.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})]})}function TB(){return o.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6 opacity-40 pointer-events-none select-none filter grayscale",children:[1,2,3,4,5].map(t=>o.jsxs("div",{className:"flex flex-col min-w-[280px] w-[280px]",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx(Ue,{className:"h-5 w-24"}),o.jsx(Ue,{className:"h-5 w-8"})]}),o.jsx("div",{className:"p-3 space-y-3",children:[1,2,3].map(e=>o.jsx(Ue,{className:"h-32 w-full"},e))})]},t))})}function CB(){const{getPipelineColumns:t,isLoading:e,notes:n,assignments:r,error:s}=cn(),[i,a]=m.useState(null);if(s&&s.toLowerCase().includes("session")&&!(r.length>0))return o.jsx(Vl,{});if(e)return o.jsx(TB,{});const l=m.useRef(null),[c,u]=m.useState(!1),h=m.useRef({x:0,left:0}),f=t().filter(x=>x.id!=="in_progress"),p=x=>{x.button===2&&l.current&&(x.preventDefault(),u(!0),h.current={x:x.pageX,left:l.current.scrollLeft})},g=m.useCallback(x=>{if(!c||!l.current)return;x.preventDefault();const _=(x.pageX-h.current.x)*1.5;l.current.scrollLeft=h.current.left-_},[c]),v=m.useCallback(()=>{u(!1)},[]);return m.useEffect(()=>(c?(window.addEventListener("mousemove",g),window.addEventListener("mouseup",v)):(window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",v)}),[c,g,v]),o.jsxs(o.Fragment,{children:[s&&s.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Cn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:x=>{x.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"relative h-full flex flex-col",children:[o.jsx("div",{ref:l,className:U("flex gap-4 flex-1 overflow-x-auto p-6 pb-0 select-none",c?"cursor-grabbing":"cursor-grab"),onMouseDown:p,onContextMenu:x=>x.preventDefault(),children:f.map(x=>o.jsx(EB,{id:x.id,title:x.title,assignments:x.assignments,onCardClick:a,notes:n},x.id))}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx(Px,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]}),o.jsx(Tw,{assignment:i,isOpen:!!i,onClose:()=>a(null)})]})}function LI(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var jB=[" ","Enter","ArrowUp","ArrowDown"],kB=[" ","Enter"],sd="Select",[sp,ip,AB]=Pv(sd),[Fl,OG]=Qn(sd,[AB,jl]),op=jl(),[IB,ro]=Fl(sd),[RB,PB]=Fl(sd),VI=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:g,form:v}=t,x=op(e),[b,_]=m.useState(null),[w,N]=m.useState(null),[k,R]=m.useState(!1),M=ep(u),[S=!1,C]=Is({prop:r,defaultProp:s,onChange:i}),[T,j]=Is({prop:a,defaultProp:l,onChange:c}),A=m.useRef(null),D=b?v||!!b.closest("form"):!0,[P,B]=m.useState(new Set),Q=Array.from(P).map(ne=>ne.props.value).join(";");return o.jsx(t0,{...x,children:o.jsxs(IB,{required:g,scope:e,trigger:b,onTriggerChange:_,valueNode:w,onValueNodeChange:N,valueNodeHasChildren:k,onValueNodeHasChildrenChange:R,contentId:Zr(),value:T,onValueChange:j,open:S,onOpenChange:C,dir:M,triggerPointerDownPosRef:A,disabled:p,children:[o.jsx(sp.Provider,{scope:e,children:o.jsx(RB,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(ne=>{B(ee=>new Set(ee).add(ne))},[]),onNativeOptionRemove:m.useCallback(ne=>{B(ee=>{const L=new Set(ee);return L.delete(ne),L})},[]),children:n})}),D?o.jsxs(cR,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:ne=>j(ne.target.value),disabled:p,form:v,children:[T===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},Q):null]})})};VI.displayName=sd;var FI="SelectTrigger",zI=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=op(n),a=ro(FI,n),l=a.disabled||r,c=Te(e,a.onTriggerChange),u=ip(n),h=m.useRef("touch"),[f,p,g]=uR(x=>{const b=u().filter(N=>!N.disabled),_=b.find(N=>N.value===a.value),w=dR(b,x,_);w!==void 0&&a.onValueChange(w.value)}),v=x=>{l||(a.onOpenChange(!0),g()),x&&(a.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return o.jsx(ym,{asChild:!0,...i,children:o.jsx(xe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":lR(a.value)?"":void 0,...s,ref:c,onClick:me(s.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&v(x)}),onPointerDown:me(s.onPointerDown,x=>{h.current=x.pointerType;const b=x.target;b.hasPointerCapture(x.pointerId)&&b.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(v(x),x.preventDefault())}),onKeyDown:me(s.onKeyDown,x=>{const b=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(b&&x.key===" ")&&jB.includes(x.key)&&(v(),x.preventDefault())})})})});zI.displayName=FI;var UI="SelectValue",$I=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=ro(UI,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Te(e,c.onValueNodeChange);return _t(()=>{u(h)},[u,h]),o.jsx(xe.span,{...l,ref:f,style:{pointerEvents:"none"},children:lR(c.value)?o.jsx(o.Fragment,{children:a}):i})});$I.displayName=UI;var DB="SelectIcon",BI=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(xe.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});BI.displayName=DB;var MB="SelectPortal",WI=t=>o.jsx(Sl,{asChild:!0,...t});WI.displayName=MB;var Qo="SelectContent",HI=m.forwardRef((t,e)=>{const n=ro(Qo,t.__scopeSelect),[r,s]=m.useState();if(_t(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?rr.createPortal(o.jsx(qI,{scope:t.__scopeSelect,children:o.jsx(sp.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(GI,{...t,ref:e})});HI.displayName=Qo;var mr=10,[qI,so]=Fl(Qo),OB="SelectContentImpl",LB=Fo("SelectContent.RemoveScroll"),GI=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:x,avoidCollisions:b,..._}=t,w=ro(Qo,n),[N,k]=m.useState(null),[R,M]=m.useState(null),S=Te(e,O=>k(O)),[C,T]=m.useState(null),[j,A]=m.useState(null),D=ip(n),[P,B]=m.useState(!1),Q=m.useRef(!1);m.useEffect(()=>{if(N)return aw(N)},[N]),ow();const ne=m.useCallback(O=>{const[Y,...ae]=D().map(ie=>ie.ref.current),[X]=ae.slice(-1),he=document.activeElement;for(const ie of O)if(ie===he||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===Y&&R&&(R.scrollTop=0),ie===X&&R&&(R.scrollTop=R.scrollHeight),ie==null||ie.focus(),document.activeElement!==he))return},[D,R]),ee=m.useCallback(()=>ne([C,N]),[ne,C,N]);m.useEffect(()=>{P&&ee()},[P,ee]);const{onOpenChange:L,triggerPointerDownPosRef:z}=w;m.useEffect(()=>{if(N){let O={x:0,y:0};const Y=X=>{var he,ie;O={x:Math.abs(Math.round(X.pageX)-(((he=z.current)==null?void 0:he.x)??0)),y:Math.abs(Math.round(X.pageY)-(((ie=z.current)==null?void 0:ie.y)??0))}},ae=X=>{O.x<=10&&O.y<=10?X.preventDefault():N.contains(X.target)||L(!1),document.removeEventListener("pointermove",Y),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",ae,{capture:!0})}}},[N,L,z]),m.useEffect(()=>{const O=()=>L(!1);return window.addEventListener("blur",O),window.addEventListener("resize",O),()=>{window.removeEventListener("blur",O),window.removeEventListener("resize",O)}},[L]);const[G,$]=uR(O=>{const Y=D().filter(he=>!he.disabled),ae=Y.find(he=>he.ref.current===document.activeElement),X=dR(Y,O,ae);X&&setTimeout(()=>X.ref.current.focus())}),W=m.useCallback((O,Y,ae)=>{const X=!Q.current&&!ae;(w.value!==void 0&&w.value===Y||X)&&(T(O),X&&(Q.current=!0))},[w.value]),J=m.useCallback(()=>N==null?void 0:N.focus(),[N]),re=m.useCallback((O,Y,ae)=>{const X=!Q.current&&!ae;(w.value!==void 0&&w.value===Y||X)&&A(O)},[w.value]),te=r==="popper"?py:KI,se=te===py?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:x,avoidCollisions:b}:{};return o.jsx(qI,{scope:n,content:N,viewport:R,onViewportChange:M,itemRefCallback:W,selectedItem:C,onItemLeave:J,itemTextRefCallback:re,focusSelectedItem:ee,selectedItemText:j,position:r,isPositioned:P,searchRef:G,children:o.jsx(Zm,{as:LB,allowPinchZoom:!0,children:o.jsx(Ym,{asChild:!0,trapped:w.open,onMountAutoFocus:O=>{O.preventDefault()},onUnmountAutoFocus:me(s,O=>{var Y;(Y=w.trigger)==null||Y.focus({preventScroll:!0}),O.preventDefault()}),children:o.jsx(Nl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:O=>O.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(te,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:O=>O.preventDefault(),..._,...se,onPlaced:()=>B(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:me(_.onKeyDown,O=>{const Y=O.ctrlKey||O.altKey||O.metaKey;if(O.key==="Tab"&&O.preventDefault(),!Y&&O.key.length===1&&$(O.key),["ArrowUp","ArrowDown","Home","End"].includes(O.key)){let X=D().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(O.key)&&(X=X.slice().reverse()),["ArrowUp","ArrowDown"].includes(O.key)){const he=O.target,ie=X.indexOf(he);X=X.slice(ie+1)}setTimeout(()=>ne(X)),O.preventDefault()}})})})})})})});GI.displayName=OB;var VB="SelectItemAlignedPosition",KI=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=ro(Qo,n),a=so(Qo,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=Te(e,S=>h(S)),p=ip(n),g=m.useRef(!1),v=m.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:_,focusSelectedItem:w}=a,N=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&x&&b&&_){const S=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),j=_.getBoundingClientRect();if(i.dir!=="rtl"){const he=j.left-C.left,ie=T.left-he,ge=S.left-ie,Ee=S.width+ge,pt=Math.max(Ee,C.width),Ie=window.innerWidth-mr,Be=my(ie,[mr,Math.max(mr,Ie-pt)]);l.style.minWidth=Ee+"px",l.style.left=Be+"px"}else{const he=C.right-j.right,ie=window.innerWidth-T.right-he,ge=window.innerWidth-S.right-ie,Ee=S.width+ge,pt=Math.max(Ee,C.width),Ie=window.innerWidth-mr,Be=my(ie,[mr,Math.max(mr,Ie-pt)]);l.style.minWidth=Ee+"px",l.style.right=Be+"px"}const A=p(),D=window.innerHeight-mr*2,P=x.scrollHeight,B=window.getComputedStyle(u),Q=parseInt(B.borderTopWidth,10),ne=parseInt(B.paddingTop,10),ee=parseInt(B.borderBottomWidth,10),L=parseInt(B.paddingBottom,10),z=Q+ne+P+L+ee,G=Math.min(b.offsetHeight*5,z),$=window.getComputedStyle(x),W=parseInt($.paddingTop,10),J=parseInt($.paddingBottom,10),re=S.top+S.height/2-mr,te=D-re,se=b.offsetHeight/2,O=b.offsetTop+se,Y=Q+ne+O,ae=z-Y;if(Y<=re){const he=A.length>0&&b===A[A.length-1].ref.current;l.style.bottom="0px";const ie=u.clientHeight-x.offsetTop-x.offsetHeight,ge=Math.max(te,se+(he?J:0)+ie+ee),Ee=Y+ge;l.style.height=Ee+"px"}else{const he=A.length>0&&b===A[0].ref.current;l.style.top="0px";const ge=Math.max(re,Q+x.offsetTop+(he?W:0)+se)+ae;l.style.height=ge+"px",x.scrollTop=Y-re+x.offsetTop}l.style.margin=`${mr}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,x,b,_,i.dir,r]);_t(()=>N(),[N]);const[k,R]=m.useState();_t(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);const M=m.useCallback(S=>{S&&v.current===!0&&(N(),w==null||w(),v.current=!1)},[N,w]);return o.jsx(zB,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:o.jsx(xe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});KI.displayName=VB;var FB="SelectPopperPosition",py=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=mr,...i}=t,a=op(n);return o.jsx(n0,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});py.displayName=FB;var[zB,Cw]=Fl(Qo,{}),gy="SelectViewport",QI=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=so(gy,n),a=Cw(gy,n),l=Te(e,i.onViewportChange),c=m.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(sp.Slot,{scope:n,children:o.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const v=window.innerHeight-mr*2,x=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),_=Math.max(x,b);if(_<v){const w=_+g,N=Math.min(v,w),k=w-N;f.style.height=N+"px",f.style.bottom==="0px"&&(h.scrollTop=k>0?k:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});QI.displayName=gy;var XI="SelectGroup",[UB,$B]=Fl(XI),BB=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Zr();return o.jsx(UB,{scope:n,id:s,children:o.jsx(xe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});BB.displayName=XI;var YI="SelectLabel",JI=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=$B(YI,n);return o.jsx(xe.div,{id:s.id,...r,ref:e})});JI.displayName=YI;var Vf="SelectItem",[WB,ZI]=Fl(Vf),eR=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=ro(Vf,n),c=so(Vf,n),u=l.value===r,[h,f]=m.useState(i??""),[p,g]=m.useState(!1),v=Te(e,w=>{var N;return(N=c.itemRefCallback)==null?void 0:N.call(c,w,r,s)}),x=Zr(),b=m.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(WB,{scope:n,value:r,disabled:s,textId:x,isSelected:u,onItemTextChange:m.useCallback(w=>{f(N=>N||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(sp.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(xe.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:v,onFocus:me(a.onFocus,()=>g(!0)),onBlur:me(a.onBlur,()=>g(!1)),onClick:me(a.onClick,()=>{b.current!=="mouse"&&_()}),onPointerUp:me(a.onPointerUp,()=>{b.current==="mouse"&&_()}),onPointerDown:me(a.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:me(a.onPointerMove,w=>{var N;b.current=w.pointerType,s?(N=c.onItemLeave)==null||N.call(c):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(a.onPointerLeave,w=>{var N;w.currentTarget===document.activeElement&&((N=c.onItemLeave)==null||N.call(c))}),onKeyDown:me(a.onKeyDown,w=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&w.key===" "||(kB.includes(w.key)&&_(),w.key===" "&&w.preventDefault())})})})})});eR.displayName=Vf;var vc="SelectItemText",tR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=ro(vc,n),l=so(vc,n),c=ZI(vc,n),u=PB(vc,n),[h,f]=m.useState(null),p=Te(e,_=>f(_),c.onItemTextChange,_=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,_,c.value,c.disabled)}),g=h==null?void 0:h.textContent,v=m.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=u;return _t(()=>(x(v),()=>b(v)),[x,b,v]),o.jsxs(o.Fragment,{children:[o.jsx(xe.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?rr.createPortal(i.children,a.valueNode):null]})});tR.displayName=vc;var nR="SelectItemIndicator",rR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return ZI(nR,n).isSelected?o.jsx(xe.span,{"aria-hidden":!0,...r,ref:e}):null});rR.displayName=nR;var xy="SelectScrollUpButton",sR=m.forwardRef((t,e)=>{const n=so(xy,t.__scopeSelect),r=Cw(xy,t.__scopeSelect),[s,i]=m.useState(!1),a=Te(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(oR,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});sR.displayName=xy;var yy="SelectScrollDownButton",iR=m.forwardRef((t,e)=>{const n=so(yy,t.__scopeSelect),r=Cw(yy,t.__scopeSelect),[s,i]=m.useState(!1),a=Te(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(oR,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});iR.displayName=yy;var oR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=so("SelectScrollButton",n),a=m.useRef(null),l=ip(n),c=m.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),_t(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(xe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:me(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:me(s.onPointerLeave,()=>{c()})})}),HB="SelectSeparator",aR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(xe.div,{"aria-hidden":!0,...r,ref:e})});aR.displayName=HB;var vy="SelectArrow",qB=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=op(n),i=ro(vy,n),a=so(vy,n);return i.open&&a.position==="popper"?o.jsx(r0,{...s,...r,ref:e}):null});qB.displayName=vy;function lR(t){return t===""||t===void 0}var cR=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=Te(e,s),a=LI(n);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[a,n]),o.jsx(Du,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});cR.displayName="BubbleSelect";function uR(t){const e=mt(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(a=>{const l=n.current+a;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function dR(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=GB(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function GB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var KB=VI,hR=zI,QB=$I,XB=BI,YB=WI,fR=HI,JB=QI,mR=JI,pR=eR,ZB=tR,eW=rR,gR=sR,xR=iR,yR=aR;const Ff=KB,zf=QB,vu=m.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(hR,{ref:r,className:U("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(XB,{asChild:!0,children:o.jsx(qC,{className:"h-4 w-4 opacity-50"})})]}));vu.displayName=hR.displayName;const vR=m.forwardRef(({className:t,...e},n)=>o.jsx(gR,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(MO,{className:"h-4 w-4"})}));vR.displayName=gR.displayName;const wR=m.forwardRef(({className:t,...e},n)=>o.jsx(xR,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(qC,{className:"h-4 w-4"})}));wR.displayName=xR.displayName;const wu=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(YB,{children:o.jsxs(fR,{ref:s,className:U("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(vR,{}),o.jsx(JB,{className:U("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(wR,{})]})}));wu.displayName=fR.displayName;const tW=m.forwardRef(({className:t,...e},n)=>o.jsx(mR,{ref:n,className:U("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));tW.displayName=mR.displayName;const jt=m.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(pR,{ref:r,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(eW,{children:o.jsx(Ic,{className:"h-4 w-4"})})}),o.jsx(ZB,{children:e})]}));jt.displayName=pR.displayName;const nW=m.forwardRef(({className:t,...e},n)=>o.jsx(yR,{ref:n,className:U("-mx-1 my-1 h-px bg-muted",t),...e}));nW.displayName=yR.displayName;function rW(t){return mw({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function sW(){return o.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ue,{className:"h-10 w-40"}),o.jsx(Ue,{className:"h-10 w-40"})]}),[1,2,3].map(t=>o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ue,{className:"h-6 w-32"}),o.jsx("div",{className:"space-y-2",children:[1,2].map(e=>o.jsx(Ue,{className:"h-16 w-full"},e))})]},t))]})}const nh={backlog:{label:"Backlog",color:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300",border:"border-slate-200 dark:border-slate-700",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700 dark:bg-blue-900/40 dark:text-blue-200",border:"border-blue-100 dark:border-blue-800",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700 dark:bg-purple-900/40 dark:text-purple-200",border:"border-purple-100 dark:border-purple-800",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200",border:"border-emerald-100 dark:border-emerald-800",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700 dark:bg-red-900/40 dark:text-red-200",border:"border-red-100 dark:border-red-800",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},iW=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},oW=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},Tg=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,aS=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function aW(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=cn();st();const[a,l]=m.useState(null),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,g]=m.useState("timeline"),[v,x]=m.useState(1),[b,_]=m.useState(!1),[w]=m.useState([]);if(n)return o.jsx(sW,{});const N=m.useMemo(()=>{let T=[...s,...w];return a&&(T=T.filter(j=>j.courseId===a)),c&&(T=T.filter(j=>j.systemStatus===c)),T},[s,w,a,c]),k=()=>{l(null),u(null)},R=a||c,M=()=>{const T=m.useRef(null),[j,A]=m.useState(!1),D=m.useRef({x:0,left:0}),B=60*v,{earliestDate:Q,latestDate:ne,initialScrollPosition:ee}=m.useMemo(()=>{const O=new Date;O.setHours(0,0,0,0);let Y=new Date,ae=new Date;if(N.length>0){const Ie=N.flatMap(Be=>{const Ft=[];return Be.dueDate&&Ft.push(new Date(Be.dueDate)),Be.createdAt&&Ft.push(new Date(Be.createdAt)),Ft});Ie.length>0&&(Y=new Date(Math.min(...Ie.map(Be=>Be.getTime()))),ae=new Date(Math.max(...Ie.map(Be=>Be.getTime()))))}const X=new Date(Y);X.setDate(X.getDate()-30);const he=new Date(ae);he.setDate(he.getDate()+30);let ie=O;const ge=N.filter(Ie=>Ie.dueDate&&new Date(Ie.dueDate)>=O).sort((Ie,Be)=>new Date(Ie.dueDate).getTime()-new Date(Be.dueDate).getTime());ge.length>0&&(ie=new Date(ge[0].dueDate));const pt=Math.ceil((ie.getTime()-X.getTime())/(1e3*3600*24))*B+B/2-window.innerWidth/2;return{earliestDate:X,latestDate:he,initialScrollPosition:Math.max(0,pt)}},[N,B]),L=m.useMemo(()=>iW(Q,ne),[Q,ne]);m.useEffect(()=>{T.current&&(T.current.scrollLeft=ee)},[ee]);const z=O=>{O.button===2&&T.current&&(O.preventDefault(),A(!0),D.current={x:O.pageX,left:T.current.scrollLeft})},G=m.useCallback(O=>{if(!j||!T.current)return;O.preventDefault();const ae=(O.pageX-D.current.x)*1.5;T.current.scrollLeft=D.current.left-ae},[j]),$=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(j?(window.addEventListener("mousemove",G),window.addEventListener("mouseup",$)):(window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",$)),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",$)}),[j,G,$]);const[W,J]=m.useState(!1),[re,te]=m.useState(!1),se=m.useRef(null);return m.useEffect(()=>{const O=()=>{if(se.current){const{scrollHeight:ae,clientHeight:X,scrollTop:he}=se.current;J(ae>X),te(he+X>=ae-10)}};O();const Y=se.current;return Y==null||Y.addEventListener("scroll",O),window.addEventListener("resize",O),()=>{Y==null||Y.removeEventListener("scroll",O),window.removeEventListener("resize",O)}},[N,b]),o.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[o.jsx("div",{ref:O=>{T.current!==O&&(T.current=O),se.current!==O&&(se.current=O)},className:U("flex-1 overflow-auto relative select-none",j?"cursor-grabbing":"cursor-default"),onMouseDown:z,onContextMenu:O=>O.preventDefault(),children:o.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${L.length*B}px`},children:[o.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:L.map((O,Y)=>{const ae=aS(O);return o.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:B},children:[o.jsx("span",{className:U("text-[10px] uppercase font-bold tracking-wider mb-1",ae?"text-foreground":"text-muted-foreground"),children:O.toLocaleDateString("en-US",{weekday:"narrow"})}),o.jsx("span",{className:U("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",ae?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:O.getDate()}),o.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},Y)})}),o.jsxs("div",{className:"relative pt-6",style:{minHeight:b?`${Math.max(300,N.filter(O=>O.dueDate).length*40)}px`:`${Math.max(400,N.filter(O=>O.dueDate).length*60)}px`},children:[o.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:L.map((O,Y)=>{const ae=aS(O);return o.jsx("div",{className:U("flex-shrink-0 h-full border-r border-border relative",ae?"bg-accent/50":""),style:{width:B},children:ae&&o.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},Y)})}),o.jsx("div",{className:U("px-0 relative z-10 mt-2",b?"space-y-1":"space-y-3"),children:N.filter(O=>O.dueDate).map(O=>{const Y=e.find(Bs=>Bs.id===O.courseId),ae=Y==null?void 0:Y.color,X=O.systemStatus==="submitted"||O.systemStatus==="graded",he=O.createdAt?new Date(O.createdAt):new Date,ie=new Date(O.dueDate),ge=(he.getTime()-Q.getTime())/(1e3*3600*24),Ee=(ie.getTime()-he.getTime())/(1e3*3600*24),pt=Math.max(0,ge*B),Ie=Math.max(B,Ee*B),Be={left:`${pt}px`,width:`${Ie}px`,minWidth:b?"100px":"140px",backgroundColor:X?void 0:ae,borderColor:X?void 0:ae?"rgba(0,0,0,0.1)":void 0,color:X?void 0:ae?Qm(ae):void 0};nh[O.systemStatus]||nh.backlog;const Ft="bg-green-100/80 border-green-300 text-green-800",He="bg-card border shadow-sm",Ke=b?"h-8":"h-12",cr=b?"h-9":"h-14";return o.jsx("div",{className:U("relative group",cr),children:o.jsxs("div",{onClick:()=>f(O),className:U("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",Ke,b?"px-2":"px-3",X?Ft:He),style:Be,children:[o.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:o.jsxs("span",{className:U("truncate font-bold leading-none flex items-center gap-1",b?"text-[10px]":"text-xs"),children:[O.courseId==="system"&&o.jsx(zv,{className:U("inline-block",b?"h-2.5 w-2.5":"h-3 w-3")}),X&&o.jsx(Ic,{className:U("inline-block mr-0.5",b?"h-2.5 w-2.5":"h-3 w-3")}),O.title]})}),!b&&o.jsx("div",{className:"flex items-center justify-between opacity-80",children:o.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:O.courseName})})]})},O.id)})})]})]})}),W&&!re&&N.length>0&&o.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[o.jsx(Y1,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),o.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),o.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[o.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const O=T.current,Y=(O==null?void 0:O.scrollLeft)||0,ae=(O==null?void 0:O.scrollTop)||0,X=Math.min(2,v+.25);x(X),X>.75&&_(!1),setTimeout(()=>{O&&(O.scrollLeft=Y*(X/v),O.scrollTop=ae)},0)},disabled:v>=2,title:"Zoom In (Normal View)",children:o.jsx(ZO,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),o.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const O=T.current,Y=(O==null?void 0:O.scrollLeft)||0,ae=(O==null?void 0:O.scrollTop)||0,X=Math.max(.5,v-.25);x(X),X<=.75&&_(!0),setTimeout(()=>{O&&(O.scrollLeft=Y*(X/v),O.scrollTop=ae)},0)},disabled:v<=.5,title:"Zoom Out (Compact View)",children:o.jsx(e3,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[o.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(v*100),"%"]}),b&&o.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx(Px,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},S=()=>{const T=m.useRef(null),[j,A]=m.useState(!1),D=m.useRef({y:0,top:0}),P=m.useRef({}),[B,Q]=m.useState(!1),{startMonth:ne,endMonth:ee}=m.useMemo(()=>{let te=new Date,se=new Date;if(N.length>0){const ae=N.filter(X=>X.dueDate).map(X=>new Date(X.dueDate));ae.length>0&&(te=new Date(Math.min(...ae.map(X=>X.getTime()))),se=new Date(Math.max(...ae.map(X=>X.getTime()))))}const O=new Date(te);O.setMonth(O.getMonth()-2),O.setDate(1);const Y=new Date(se);return Y.setMonth(Y.getMonth()+4),Y.setDate(1),{startMonth:O,endMonth:Y}},[N]),L=m.useMemo(()=>oW(ne,ee),[ne,ee]),z=m.useCallback(()=>{var ae;const te=Tg(new Date),se=P.current[te];if(!se){Q(!0);return}const O=se.getBoundingClientRect(),Y=(ae=T.current)==null?void 0:ae.getBoundingClientRect();Y&&Q(O.bottom<Y.top||O.top>Y.bottom)},[L]);m.useEffect(()=>{const te=T.current;return te&&(te.addEventListener("scroll",z),z()),()=>te==null?void 0:te.removeEventListener("scroll",z)},[z]),m.useEffect(()=>{setTimeout(()=>G(),100)},[]);const G=()=>{const te=Tg(new Date),se=P.current[te];se&&se.scrollIntoView({behavior:"smooth",block:"center"})},$=te=>{te.button===2&&T.current&&(te.preventDefault(),A(!0),D.current={y:te.pageY,top:T.current.scrollTop})},W=m.useCallback(te=>{if(!j||!T.current)return;te.preventDefault();const O=(te.pageY-D.current.y)*1.5;T.current.scrollTop=D.current.top-O},[j]),J=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(j?(window.addEventListener("mousemove",W),window.addEventListener("mouseup",J)):(window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",J)),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",J)}),[j,W,J]);const re=te=>{const se=te.getFullYear(),O=te.getMonth(),Y=new Date(se,O,1),ae=new Date(se,O+1,0),X=[];for(let he=0;he<Y.getDay();he++)X.push({date:new Date(se,O,-Y.getDay()+1+he),isCurrentMonth:!1});for(let he=1;he<=ae.getDate();he++)X.push({date:new Date(se,O,he),isCurrentMonth:!0});for(;X.length%7!==0;){const he=X.length-(Y.getDay()+ae.getDate())+1,ie=new Date(se,O+1,he);X.push({date:ie,isCurrentMonth:!1})}return X};return o.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[B&&o.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:o.jsxs("button",{onClick:G,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[o.jsx(Y1,{size:14})," Jump to Today"]})}),o.jsx("div",{ref:T,className:U("flex-1 overflow-y-auto",j?"cursor-grabbing":"cursor-default"),onMouseDown:$,onContextMenu:te=>te.preventDefault(),children:o.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:L.map(te=>{const se=re(te),O=Tg(te);return o.jsxs("div",{ref:Y=>P.current[O]=Y,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[o.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:o.jsx("h3",{className:"text-lg font-bold",children:te.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),o.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Y=>o.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:Y},Y))}),o.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:se.map((Y,ae)=>{const X=N.filter(ie=>{if(!ie.dueDate)return!1;const ge=new Date(ie.dueDate);ge.setHours(0,0,0,0);const Ee=new Date(Y.date);return Ee.setHours(0,0,0,0),Ee.toDateString()===ge.toDateString()}),he=Y.date.toDateString()===new Date().toDateString();return o.jsxs("div",{className:U("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",Y.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[o.jsx("span",{className:U("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",he&&Y.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:Y.date.getDate()}),o.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:X.map(ie=>{const ge=e.find(Ft=>Ft.id===ie.courseId),Ee=ge==null?void 0:ge.color,Ie=!["submitted","graded"].includes(ie.systemStatus)&&Ee,Be=nh[ie.systemStatus]||nh.backlog;return o.jsx("div",{onClick:Ft=>{Ft.stopPropagation(),f(ie)},className:U("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",!Ie&&Be.color,!Ie&&Be.border,Ie&&"text-slate-900 border-transparent/20"),style:Ie?{backgroundColor:Ee}:void 0,title:ie.title,children:ie.title},ie.id)})})]},ae)})})]},O)})})}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[o.jsx(Px,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};if(cn().error&&cn().error.toLowerCase().includes("session")){const{assignments:T,courses:j}=cn();if(!T.length&&!j.length)return o.jsx(Vl,{})}const{error:C}=cn();return o.jsxs(o.Fragment,{children:[C&&C.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Cn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx(Tn,{href:"/auth/refresh",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col h-full w-full bg-background overflow-hidden relative",children:[o.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Timeline"}),o.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[o.jsxs("button",{onClick:()=>g("timeline"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="timeline"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(RO,{className:"h-3.5 w-3.5"}),"Timeline"]}),o.jsx(Ui,{children:o.jsxs(Ds,{delayDuration:0,children:[o.jsx(Ms,{asChild:!0,children:o.jsxs("button",{onClick:()=>g("calendar"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="calendar"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(lu,{className:"h-3.5 w-3.5"}),"Calendar"]})}),o.jsx(os,{side:"bottom",children:o.jsx("p",{children:"Switch to monthly calendar view"})})]})})]})]})}),o.jsxs("div",{className:"px-4 md:px-6 py-2 border-b flex items-center gap-3 bg-muted/30 shrink-0 overflow-x-auto no-scrollbar",children:[o.jsx(FO,{className:"h-4 w-4 text-muted-foreground shrink-0 hidden sm:block"}),o.jsxs(Ff,{value:a||"all",onValueChange:T=>l(T==="all"?null:T),children:[o.jsx(vu,{className:"w-[140px] sm:w-[240px] h-8 text-xs","data-testid":"select-course-filter",children:o.jsx(zf,{placeholder:"All Courses"})}),o.jsxs(wu,{children:[o.jsx(jt,{value:"all",children:"All Courses"}),e.map(T=>o.jsx(jt,{value:T.id,children:T.name},T.id))]})]}),o.jsxs(Ff,{value:c||"all",onValueChange:T=>u(T==="all"?null:T),children:[o.jsx(vu,{className:"w-[110px] sm:w-[140px] h-8 text-xs","data-testid":"select-status-filter",children:o.jsx(zf,{placeholder:"All Status"})}),o.jsxs(wu,{children:[o.jsx(jt,{value:"all",children:"All Status"}),o.jsx(jt,{value:"backlog",children:"Backlog"}),o.jsx(jt,{value:"in_progress",children:"In Progress"}),o.jsx(jt,{value:"submitted",children:"Submitted"}),o.jsx(jt,{value:"graded",children:"Graded"}),o.jsx(jt,{value:"overdue",children:"Overdue"})]})]}),R&&o.jsxs(ce,{variant:"ghost",size:"sm",onClick:k,className:"text-muted-foreground h-8 px-2","data-testid":"button-clear-filters",children:[o.jsx(Li,{className:"h-3.5 w-3.5 md:mr-1"}),o.jsx("span",{className:"hidden md:inline",children:"Clear filters"})]}),o.jsx("div",{className:"ml-auto pl-2",children:o.jsx(Ui,{children:o.jsxs(Ds,{children:[o.jsx(Ms,{asChild:!0,children:o.jsx(Tn,{href:"/settings/integrations",children:o.jsxs(ce,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap h-8",children:[o.jsx(rW,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Sync with Google Calendar"}),o.jsx("span",{className:"sm:hidden",children:"Sync"})]})})}),o.jsxs(os,{side:"left",className:"max-w-xs",children:[o.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),o.jsx("div",{className:"flex-1 overflow-hidden h-full",children:p==="timeline"?o.jsx(M,{}):o.jsx(S,{})})]}),o.jsx(Tw,{assignment:h,isOpen:!!h,onClose:()=>f(null)})]})}function lW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const ap=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function zl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function jw(t){return"nodeType"in t}function In(t){var e,n;return t?zl(t)?t:jw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function kw(t){const{Document:e}=In(t);return t instanceof e}function id(t){return zl(t)?!1:t instanceof In(t).HTMLElement}function bR(t){return t instanceof In(t).SVGElement}function Ul(t){return t?zl(t)?t.document:jw(t)?kw(t)?t:id(t)||bR(t)?t.ownerDocument:document:document:document}const us=ap?m.useLayoutEffect:m.useEffect;function Aw(t){const e=m.useRef(t);return us(()=>{e.current=t}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function cW(){const t=m.useRef(null),e=m.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=m.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function bu(t,e){e===void 0&&(e=[t]);const n=m.useRef(t);return us(()=>{n.current!==t&&(n.current=t)},e),n}function od(t,e){const n=m.useRef();return m.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Uf(t){const e=Aw(t),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function wy(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}let Cg={};function ad(t,e){return m.useMemo(()=>{if(e)return e;const n=Cg[t]==null?0:Cg[t]+1;return Cg[t]=n,t+"-"+n},[t,e])}function _R(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const l=Object.entries(a);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const Ua=_R(1),_u=_R(-1);function uW(t){return"clientX"in t&&"clientY"in t}function Iw(t){if(!t)return!1;const{KeyboardEvent:e}=In(t.target);return e&&t instanceof e}function dW(t){if(!t)return!1;const{TouchEvent:e}=In(t.target);return e&&t instanceof e}function by(t){if(dW(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return uW(t)?{x:t.clientX,y:t.clientY}:null}const Nu=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Nu.Translate.toString(t),Nu.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),lS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function hW(t){return t.matches(lS)?t:t.querySelector(lS)}const fW={display:"none"};function mW(t){let{id:e,value:n}=t;return ze.createElement("div",{id:e,style:fW},n)}function pW(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ze.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function gW(){const[t,e]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const NR=m.createContext(null);function xW(t){const e=m.useContext(NR);m.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function yW(){const[t]=m.useState(()=>new Set),e=m.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[m.useCallback(r=>{let{type:s,event:i}=r;t.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,i)})},[t]),e]}const vW={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},wW={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function bW(t){let{announcements:e=wW,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=vW}=t;const{announce:i,announcement:a}=gW(),l=ad("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),xW(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;e.onDragMove&&i(e.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;i(e.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;i(e.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;i(e.onDragCancel({active:p,over:g}))}}),[i,e])),!c)return null;const h=ze.createElement(ze.Fragment,null,ze.createElement(mW,{id:r,value:s.draggable}),ze.createElement(pW,{id:l,announcement:a}));return n?rr.createPortal(h,n):h}var kt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(kt||(kt={}));function $f(){}function cS(t,e){return m.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function _W(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Or=Object.freeze({x:0,y:0});function SR(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ER(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function NW(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function uS(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function TR(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function dS(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const SW=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=dS(e,e.left,e.top),i=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const u=SR(dS(c),s);i.push({id:l,data:{droppableContainer:a,value:u}})}}return i.sort(ER)},EW=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=uS(e),i=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const u=uS(c),h=s.reduce((p,g,v)=>p+SR(u[v],g),0),f=Number((h/4).toFixed(4));i.push({id:l,data:{droppableContainer:a,value:f}})}}return i.sort(ER)};function TW(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=a*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const CW=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=TW(l,e);c>0&&s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(NW)};function jW(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function CR(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Or}function kW(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>({...a,top:a.top+t*l.y,bottom:a.bottom+t*l.y,left:a.left+t*l.x,right:a.right+t*l.x}),{...n})}}const AW=kW(1);function IW(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function RW(t,e,n){const r=IW(e);if(!r)return t;const{scaleX:s,scaleY:i,x:a,y:l}=r,c=t.left-a-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const PW={ignoreTransform:!1};function $l(t,e){e===void 0&&(e=PW);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=In(t).getComputedStyle(t);u&&(n=RW(n,u,h))}const{top:r,left:s,width:i,height:a,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:a,bottom:l,right:c}}function hS(t){return $l(t,{ignoreTransform:!0})}function DW(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function MW(t,e){return e===void 0&&(e=In(t).getComputedStyle(t)),e.position==="fixed"}function OW(t,e){e===void 0&&(e=In(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function lp(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(kw(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!id(s)||bR(s)||n.includes(s))return n;const i=In(t).getComputedStyle(s);return s!==t&&OW(s,i)&&n.push(s),MW(s,i)?n:r(s.parentNode)}return t?r(t):n}function jR(t){const[e]=lp(t,1);return e??null}function jg(t){return!ap||!t?null:zl(t)?t:jw(t)?kw(t)||t===Ul(t).scrollingElement?window:id(t)?t:null:null}function kR(t){return zl(t)?t.scrollX:t.scrollLeft}function AR(t){return zl(t)?t.scrollY:t.scrollTop}function _y(t){return{x:kR(t),y:AR(t)}}var Mt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Mt||(Mt={}));function IR(t){return!ap||!t?!1:t===document.scrollingElement}function RR(t){const e={x:0,y:0},n=IR(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:l,maxScroll:r,minScroll:e}}const LW={x:.2,y:.2};function VW(t,e,n,r,s){let{top:i,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=LW);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=RR(t),g={x:0,y:0},v={x:0,y:0},x={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+x.height?(g.y=Mt.Backward,v.y=r*Math.abs((e.top+x.height-i)/x.height)):!h&&c>=e.bottom-x.height&&(g.y=Mt.Forward,v.y=r*Math.abs((e.bottom-x.height-c)/x.height)),!p&&l>=e.right-x.width?(g.x=Mt.Forward,v.x=r*Math.abs((e.right-x.width-l)/x.width)):!f&&a<=e.left+x.width&&(g.x=Mt.Backward,v.x=r*Math.abs((e.left+x.width-a)/x.width)),{direction:g,speed:v}}function FW(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function PR(t){return t.reduce((e,n)=>Ua(e,_y(n)),Or)}function zW(t){return t.reduce((e,n)=>e+kR(n),0)}function UW(t){return t.reduce((e,n)=>e+AR(n),0)}function $W(t,e){if(e===void 0&&(e=$l),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);jR(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const BW=[["x",["left","right"],zW],["y",["top","bottom"],UW]];class Rw{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=lp(n),s=PR(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,a,l]of BW)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class zc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function WW(t){const{EventTarget:e}=In(t);return t instanceof e?t:Ul(t)}function kg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Jn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Jn||(Jn={}));function fS(t){t.preventDefault()}function HW(t){t.stopPropagation()}var Re;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Re||(Re={}));const DR={start:[Re.Space,Re.Enter],cancel:[Re.Esc],end:[Re.Space,Re.Enter,Re.Tab]},qW=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Re.Right:return{...n,x:n.x+25};case Re.Left:return{...n,x:n.x-25};case Re.Down:return{...n,y:n.y+25};case Re.Up:return{...n,y:n.y-25}}};class Pw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new zc(Ul(n)),this.windowListeners=new zc(In(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Jn.Resize,this.handleCancel),this.windowListeners.add(Jn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Jn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&$W(r),n(Or)}handleKeyDown(e){if(Iw(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=DR,coordinateGetter:a=qW,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Or;this.referenceCoordinates||(this.referenceCoordinates=h);const f=a(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=_u(f,h),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const x of v){const b=e.code,{isTop:_,isRight:w,isLeft:N,isBottom:k,maxScroll:R,minScroll:M}=RR(x),S=FW(x),C={x:Math.min(b===Re.Right?S.right-S.width/2:S.right,Math.max(b===Re.Right?S.left:S.left+S.width/2,f.x)),y:Math.min(b===Re.Down?S.bottom-S.height/2:S.bottom,Math.max(b===Re.Down?S.top:S.top+S.height/2,f.y))},T=b===Re.Right&&!w||b===Re.Left&&!N,j=b===Re.Down&&!k||b===Re.Up&&!_;if(T&&C.x!==f.x){const A=x.scrollLeft+p.x,D=b===Re.Right&&A<=R.x||b===Re.Left&&A>=M.x;if(D&&!p.y){x.scrollTo({left:A,behavior:l});return}D?g.x=x.scrollLeft-A:g.x=b===Re.Right?x.scrollLeft-R.x:x.scrollLeft-M.x,g.x&&x.scrollBy({left:-g.x,behavior:l});break}else if(j&&C.y!==f.y){const A=x.scrollTop+p.y,D=b===Re.Down&&A<=R.y||b===Re.Up&&A>=M.y;if(D&&!p.x){x.scrollTo({top:A,behavior:l});return}D?g.y=x.scrollTop-A:g.y=b===Re.Down?x.scrollTop-R.y:x.scrollTop-M.y,g.y&&x.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(e,Ua(_u(f,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Pw.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=DR,onActivation:s}=e,{active:i}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function mS(t){return!!(t&&"distance"in t)}function pS(t){return!!(t&&"delay"in t)}class Dw{constructor(e,n,r){var s;r===void 0&&(r=WW(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:a}=i;this.props=e,this.events=n,this.document=Ul(a),this.documentListeners=new zc(this.document),this.listeners=new zc(r),this.windowListeners=new zc(In(a)),this.initialCoordinates=(s=by(i))!=null?s:Or,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Jn.Resize,this.handleCancel),this.windowListeners.add(Jn.DragStart,fS),this.windowListeners.add(Jn.VisibilityChange,this.handleCancel),this.windowListeners.add(Jn.ContextMenu,fS),this.documentListeners.add(Jn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(pS(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(mS(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Jn.Click,HW,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Jn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=by(e))!=null?n:Or,u=_u(s,c);if(!r&&l){if(mS(l)){if(l.tolerance!=null&&kg(u,l.tolerance))return this.handleCancel();if(kg(u,l.distance))return this.handleStart()}if(pS(l)&&kg(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),a(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Re.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const GW={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Mw extends Dw{constructor(e){const{event:n}=e,r=Ul(n.target);super(e,GW,r)}}Mw.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const KW={move:{name:"mousemove"},end:{name:"mouseup"}};var Ny;(function(t){t[t.RightClick=2]="RightClick"})(Ny||(Ny={}));class QW extends Dw{constructor(e){super(e,KW,Ul(e.event.target))}}QW.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Ny.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ag={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class XW extends Dw{constructor(e){super(e,Ag)}static setup(){return window.addEventListener(Ag.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ag.move.name,e)};function e(){}}}XW.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Uc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Uc||(Uc={}));var Bf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Bf||(Bf={}));function YW(t){let{acceleration:e,activator:n=Uc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:l=Bf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=t;const g=ZW({delta:f,disabled:!i}),[v,x]=cW(),b=m.useRef({x:0,y:0}),_=m.useRef({x:0,y:0}),w=m.useMemo(()=>{switch(n){case Uc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Uc.DraggableRect:return s}},[n,s,c]),N=m.useRef(null),k=m.useCallback(()=>{const M=N.current;if(!M)return;const S=b.current.x*_.current.x,C=b.current.y*_.current.y;M.scrollBy(S,C)},[]),R=m.useMemo(()=>l===Bf.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!w){x();return}for(const M of R){if((r==null?void 0:r(M))===!1)continue;const S=u.indexOf(M),C=h[S];if(!C)continue;const{direction:T,speed:j}=VW(M,C,w,e,p);for(const A of["x","y"])g[A][T[A]]||(j[A]=0,T[A]=0);if(j.x>0||j.y>0){x(),N.current=M,v(k,a),b.current=j,_.current=T;return}}b.current={x:0,y:0},_.current={x:0,y:0},x()},[e,k,r,x,i,a,JSON.stringify(w),JSON.stringify(g),v,u,R,h,JSON.stringify(p)])}const JW={x:{[Mt.Backward]:!1,[Mt.Forward]:!1},y:{[Mt.Backward]:!1,[Mt.Forward]:!1}};function ZW(t){let{delta:e,disabled:n}=t;const r=wy(e);return od(s=>{if(n||!r||!s)return JW;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Mt.Backward]:s.x[Mt.Backward]||i.x===-1,[Mt.Forward]:s.x[Mt.Forward]||i.x===1},y:{[Mt.Backward]:s.y[Mt.Backward]||i.y===-1,[Mt.Forward]:s.y[Mt.Forward]||i.y===1}}},[n,e,r])}function eH(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return od(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function tH(t,e){return m.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...i]},[]),[t,e])}var Su;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Su||(Su={}));var Sy;(function(t){t.Optimized="optimized"})(Sy||(Sy={}));const gS=new Map;function nH(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,a]=m.useState(null),{frequency:l,measure:c,strategy:u}=s,h=m.useRef(t),f=b(),p=bu(f),g=m.useCallback(function(_){_===void 0&&(_=[]),!p.current&&a(w=>w===null?_:w.concat(_.filter(N=>!w.includes(N))))},[p]),v=m.useRef(null),x=od(_=>{if(f&&!n)return gS;if(!_||_===gS||h.current!==t||i!=null){const w=new Map;for(let N of t){if(!N)continue;if(i&&i.length>0&&!i.includes(N.id)&&N.rect.current){w.set(N.id,N.rect.current);continue}const k=N.node.current,R=k?new Rw(c(k),k):null;N.rect.current=R,R&&w.set(N.id,R)}return w}return _},[t,i,n,f,c]);return m.useEffect(()=>{h.current=t},[t]),m.useEffect(()=>{f||g()},[n,f]),m.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},l))},[l,f,g,...r]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:i!=null};function b(){switch(u){case Su.Always:return!1;case Su.BeforeDragging:return n;default:return!n}}}function MR(t,e){return od(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function rH(t,e){return MR(t,e)}function sH(t){let{callback:e,disabled:n}=t;const r=Aw(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function cp(t){let{callback:e,disabled:n}=t;const r=Aw(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function iH(t){return new Rw($l(t),t)}function xS(t,e,n){e===void 0&&(e=iH);const[r,s]=m.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const a=sH({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=cp({callback:i});return us(()=>{i(),t?(l==null||l.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[t]),r}function oH(t){const e=MR(t);return CR(t,e)}const yS=[];function aH(t){const e=m.useRef(t),n=od(r=>t?r&&r!==yS&&t&&e.current&&t.parentNode===e.current.parentNode?r:lp(t):yS,[t]);return m.useEffect(()=>{e.current=t},[t]),n}function lH(t){const[e,n]=m.useState(null),r=m.useRef(t),s=m.useCallback(i=>{const a=jg(i.target);a&&n(l=>l?(l.set(a,_y(a)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=r.current;if(t!==i){a(i);const l=t.map(c=>{const u=jg(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,_y(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{a(t),a(i)};function a(l){l.forEach(c=>{const u=jg(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),m.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>Ua(i,a),Or):PR(t):Or,[t,e])}function vS(t,e){e===void 0&&(e=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},e),m.useEffect(()=>{const r=t!==Or;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?_u(t,n.current):Or}function cH(t){m.useEffect(()=>{if(!ap)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function uH(t,e){return m.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,e)},n},{}),[t,e])}function OR(t){return m.useMemo(()=>t?DW(t):null,[t])}const wS=[];function dH(t,e){e===void 0&&(e=$l);const[n]=t,r=OR(n?In(n):null),[s,i]=m.useState(wS);function a(){i(()=>t.length?t.map(c=>IR(c)?r:new Rw(e(c),c)):wS)}const l=cp({callback:a});return us(()=>{l==null||l.disconnect(),a(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function hH(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return id(e)?e:t}function fH(t){let{measure:e}=t;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:h}of u)if(id(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),i=cp({callback:s}),a=m.useCallback(u=>{const h=hH(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=Uf(a);return m.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const mH=[{sensor:Mw,options:{}},{sensor:Pw,options:{}}],pH={current:{}},Ph={draggable:{measure:hS},droppable:{measure:hS,strategy:Su.WhileDragging,frequency:Sy.Optimized},dragOverlay:{measure:$l}};class $c extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const gH={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new $c,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$f},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ph,measureDroppableContainers:$f,windowRect:null,measuringScheduled:!1},xH={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$f,draggableNodes:new Map,over:null,measureDroppableContainers:$f},up=m.createContext(xH),LR=m.createContext(gH);function yH(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new $c}}}function vH(t,e){switch(e.type){case kt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case kt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case kt.DragEnd:case kt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case kt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new $c(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case kt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new $c(t.droppable.containers);return a.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case kt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new $c(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function wH(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(up),i=wy(r),a=wy(n==null?void 0:n.id);return m.useEffect(()=>{if(!e&&!r&&i&&a!=null){if(!Iw(i)||document.activeElement===i.target)return;const l=s.get(a);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=hW(h);if(f){f.focus();break}}})}},[r,e,s,a,i]),null}function bH(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function _H(t){return m.useMemo(()=>({draggable:{...Ph.draggable,...t==null?void 0:t.draggable},droppable:{...Ph.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Ph.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function NH(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=m.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;us(()=>{if(!a&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=CR(h,r);if(a||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=jR(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,a,l,r,n])}const VR=m.createContext({...Or,scaleX:1,scaleY:1});var ii;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ii||(ii={}));const SH=m.memo(function(e){var n,r,s,i;let{id:a,accessibility:l,autoScroll:c=!0,children:u,sensors:h=mH,collisionDetection:f=CW,measuring:p,modifiers:g,...v}=e;const x=m.useReducer(vH,void 0,yH),[b,_]=x,[w,N]=yW(),[k,R]=m.useState(ii.Uninitialized),M=k===ii.Initialized,{draggable:{active:S,nodes:C,translate:T},droppable:{containers:j}}=b,A=S!=null?C.get(S):null,D=m.useRef({initial:null,translated:null}),P=m.useMemo(()=>{var Le;return S!=null?{id:S,data:(Le=A==null?void 0:A.data)!=null?Le:pH,rect:D}:null},[S,A]),B=m.useRef(null),[Q,ne]=m.useState(null),[ee,L]=m.useState(null),z=bu(v,Object.values(v)),G=ad("DndDescribedBy",a),$=m.useMemo(()=>j.getEnabled(),[j]),W=_H(p),{droppableRects:J,measureDroppableContainers:re,measuringScheduled:te}=nH($,{dragging:M,dependencies:[T.x,T.y],config:W.droppable}),se=eH(C,S),O=m.useMemo(()=>ee?by(ee):null,[ee]),Y=fd(),ae=rH(se,W.draggable.measure);NH({activeNode:S!=null?C.get(S):null,config:Y.layoutShiftCompensation,initialRect:ae,measure:W.draggable.measure});const X=xS(se,W.draggable.measure,ae),he=xS(se?se.parentElement:null),ie=m.useRef({activatorEvent:null,active:null,activeNode:se,collisionRect:null,collisions:null,droppableRects:J,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ge=j.getNodeFor((n=ie.current.over)==null?void 0:n.id),Ee=fH({measure:W.dragOverlay.measure}),pt=(r=Ee.nodeRef.current)!=null?r:se,Ie=M?(s=Ee.rect)!=null?s:X:null,Be=!!(Ee.nodeRef.current&&Ee.rect),Ft=oH(Be?null:X),He=OR(pt?In(pt):null),Ke=aH(M?ge??se:null),cr=dH(Ke),Bs=bH(g,{transform:{x:T.x-Ft.x,y:T.y-Ft.y,scaleX:1,scaleY:1},activatorEvent:ee,active:P,activeNodeRect:X,containerNodeRect:he,draggingNodeRect:Ie,over:ie.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:Ke,scrollableAncestorRects:cr,windowRect:He}),Bl=O?Ua(O,T):null,ld=lH(Ke),io=vS(ld),cd=vS(ld,[X]),ms=Ua(Bs,io),Vr=Ie?AW(Ie,Bs):null,oo=P&&Vr?f({active:P,collisionRect:Vr,droppableRects:J,droppableContainers:$,pointerCoordinates:Bl}):null,ud=TR(oo,"id"),[ur,Wl]=m.useState(null),ao=Be?Bs:Ua(Bs,cd),Hl=jW(ao,(i=ur==null?void 0:ur.rect)!=null?i:null,X),lo=m.useRef(null),Fr=m.useCallback((Le,qt)=>{let{sensor:St,options:mn}=qt;if(B.current==null)return;const pn=C.get(B.current);if(!pn)return;const sn=Le.nativeEvent,zt=new St({active:B.current,activeNode:pn,event:sn,options:mn,context:ie,onAbort(Et){if(!C.get(Et))return;const{onDragAbort:Pn}=z.current,Xn={id:Et};Pn==null||Pn(Xn),w({type:"onDragAbort",event:Xn})},onPending(Et,Rn,Pn,Xn){if(!C.get(Et))return;const{onDragPending:dr}=z.current,zr={id:Et,constraint:Rn,initialCoordinates:Pn,offset:Xn};dr==null||dr(zr),w({type:"onDragPending",event:zr})},onStart(Et){const Rn=B.current;if(Rn==null)return;const Pn=C.get(Rn);if(!Pn)return;const{onDragStart:Xn}=z.current,ps={activatorEvent:sn,active:{id:Rn,data:Pn.data,rect:D}};rr.unstable_batchedUpdates(()=>{Xn==null||Xn(ps),R(ii.Initializing),_({type:kt.DragStart,initialCoordinates:Et,active:Rn}),w({type:"onDragStart",event:ps}),ne(lo.current),L(sn)})},onMove(Et){_({type:kt.DragMove,coordinates:Et})},onEnd:Ws(kt.DragEnd),onCancel:Ws(kt.DragCancel)});lo.current=zt;function Ws(Et){return async function(){const{active:Pn,collisions:Xn,over:ps,scrollAdjustedTranslate:dr}=ie.current;let zr=null;if(Pn&&dr){const{cancelDrop:gn}=z.current;zr={activatorEvent:sn,active:Pn,collisions:Xn,delta:dr,over:ps},Et===kt.DragEnd&&typeof gn=="function"&&await Promise.resolve(gn(zr))&&(Et=kt.DragCancel)}B.current=null,rr.unstable_batchedUpdates(()=>{_({type:Et}),R(ii.Uninitialized),Wl(null),ne(null),L(null),lo.current=null;const gn=Et===kt.DragEnd?"onDragEnd":"onDragCancel";if(zr){const ta=z.current[gn];ta==null||ta(zr),w({type:gn,event:zr})}})}}},[C]),dd=m.useCallback((Le,qt)=>(St,mn)=>{const pn=St.nativeEvent,sn=C.get(mn);if(B.current!==null||!sn||pn.dndKit||pn.defaultPrevented)return;const zt={active:sn};Le(St,qt.options,zt)===!0&&(pn.dndKit={capturedBy:qt.sensor},B.current=mn,Fr(St,qt))},[C,Fr]),co=tH(h,dd);cH(h),us(()=>{X&&k===ii.Initializing&&R(ii.Initialized)},[X,k]),m.useEffect(()=>{const{onDragMove:Le}=z.current,{active:qt,activatorEvent:St,collisions:mn,over:pn}=ie.current;if(!qt||!St)return;const sn={active:qt,activatorEvent:St,collisions:mn,delta:{x:ms.x,y:ms.y},over:pn};rr.unstable_batchedUpdates(()=>{Le==null||Le(sn),w({type:"onDragMove",event:sn})})},[ms.x,ms.y]),m.useEffect(()=>{const{active:Le,activatorEvent:qt,collisions:St,droppableContainers:mn,scrollAdjustedTranslate:pn}=ie.current;if(!Le||B.current==null||!qt||!pn)return;const{onDragOver:sn}=z.current,zt=mn.get(ud),Ws=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,Et={active:Le,activatorEvent:qt,collisions:St,delta:{x:pn.x,y:pn.y},over:Ws};rr.unstable_batchedUpdates(()=>{Wl(Ws),sn==null||sn(Et),w({type:"onDragOver",event:Et})})},[ud]),us(()=>{ie.current={activatorEvent:ee,active:P,activeNode:se,collisionRect:Vr,collisions:oo,droppableRects:J,draggableNodes:C,draggingNode:pt,draggingNodeRect:Ie,droppableContainers:j,over:ur,scrollableAncestors:Ke,scrollAdjustedTranslate:ms},D.current={initial:Ie,translated:Vr}},[P,se,oo,Vr,C,pt,Ie,J,j,ur,Ke,ms]),YW({...Y,delta:T,draggingRect:Vr,pointerCoordinates:Bl,scrollableAncestors:Ke,scrollableAncestorRects:cr});const hd=m.useMemo(()=>({active:P,activeNode:se,activeNodeRect:X,activatorEvent:ee,collisions:oo,containerNodeRect:he,dragOverlay:Ee,draggableNodes:C,droppableContainers:j,droppableRects:J,over:ur,measureDroppableContainers:re,scrollableAncestors:Ke,scrollableAncestorRects:cr,measuringConfiguration:W,measuringScheduled:te,windowRect:He}),[P,se,X,ee,oo,he,Ee,C,j,J,ur,re,Ke,cr,W,te,He]),uo=m.useMemo(()=>({activatorEvent:ee,activators:co,active:P,activeNodeRect:X,ariaDescribedById:{draggable:G},dispatch:_,draggableNodes:C,over:ur,measureDroppableContainers:re}),[ee,co,P,X,_,G,C,ur,re]);return ze.createElement(NR.Provider,{value:N},ze.createElement(up.Provider,{value:uo},ze.createElement(LR.Provider,{value:hd},ze.createElement(VR.Provider,{value:Hl},u)),ze.createElement(wH,{disabled:(l==null?void 0:l.restoreFocus)===!1})),ze.createElement(bW,{...l,hiddenTextDescribedById:G}));function fd(){const Le=(Q==null?void 0:Q.autoScrollEnabled)===!1,qt=typeof c=="object"?c.enabled===!1:c===!1,St=M&&!Le&&!qt;return typeof c=="object"?{...c,enabled:St}:{enabled:St}}}),EH=m.createContext(null),bS="button",TH="Draggable";function CH(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=ad(TH),{activators:a,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=m.useContext(up),{role:g=bS,roleDescription:v="draggable",tabIndex:x=0}=s??{},b=(c==null?void 0:c.id)===e,_=m.useContext(b?VR:EH),[w,N]=Uf(),[k,R]=Uf(),M=uH(a,e),S=bu(n);us(()=>(f.set(e,{id:e,key:i,node:w,activatorNode:k,data:S}),()=>{const T=f.get(e);T&&T.key===i&&f.delete(e)}),[f,e]);const C=m.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":r,"aria-pressed":b&&g===bS?!0:void 0,"aria-roledescription":v,"aria-describedby":h.draggable}),[r,g,x,b,v,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:C,isDragging:b,listeners:r?void 0:M,node:w,over:p,setNodeRef:N,setActivatorNodeRef:R,transform:_}}function jH(){return m.useContext(LR)}const kH="Droppable",AH={timeout:25};function IH(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=ad(kH),{active:a,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(up),h=m.useRef({disabled:n}),f=m.useRef(!1),p=m.useRef(null),g=m.useRef(null),{disabled:v,updateMeasurementsFor:x,timeout:b}={...AH,...s},_=bu(x??r),w=m.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(_.current)?_.current:[_.current]),g.current=null},b)},[b]),N=cp({callback:w,disabled:v||!a}),k=m.useCallback((C,T)=>{N&&(T&&(N.unobserve(T),f.current=!1),C&&N.observe(C))},[N]),[R,M]=Uf(k),S=bu(e);return m.useEffect(()=>{!N||!R.current||(N.disconnect(),f.current=!1,N.observe(R.current))},[R,N]),m.useEffect(()=>(l({type:kt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:R,rect:p,data:S}}),()=>l({type:kt.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==h.current.disabled&&(l({type:kt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:a,rect:p,isOver:(c==null?void 0:c.id)===r,node:R,over:c,setNodeRef:M}}function Ow(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function RH(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function rh(t){return t!==null&&t>=0}function PH(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function DH(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const FR=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=Ow(e,r,n),a=e[s],l=i[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},sh={scaleX:1,scaleY:1},MH=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:a}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[a];return u?{x:0,y:n<a?u.top+u.height-(l.top+l.height):u.top-l.top,...sh}:null}const c=OH(i,s,n);return s>n&&s<=a?{x:0,y:-l.height-c,...sh}:s<n&&s>=a?{x:0,y:l.height+c,...sh}:{x:0,y:0,...sh}};function OH(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const zR="Sortable",UR=ze.createContext({activeIndex:-1,containerId:zR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:FR,disabled:{draggable:!1,droppable:!1}});function LH(t){let{children:e,id:n,items:r,strategy:s=FR,disabled:i=!1}=t;const{active:a,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=jH(),f=ad(zR,n),p=l.rect!==null,g=m.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),v=a!=null,x=a?g.indexOf(a.id):-1,b=u?g.indexOf(u.id):-1,_=m.useRef(g),w=!PH(g,_.current),N=b!==-1&&x===-1||w,k=DH(i);us(()=>{w&&v&&h(g)},[w,g,v,h]),m.useEffect(()=>{_.current=g},[g]);const R=m.useMemo(()=>({activeIndex:x,containerId:f,disabled:k,disableTransforms:N,items:g,overIndex:b,useDragOverlay:p,sortedRects:RH(g,c),strategy:s}),[x,f,k.draggable,k.droppable,N,g,b,c,p,s]);return ze.createElement(UR.Provider,{value:R},e)}const VH=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Ow(n,r,s).indexOf(e)},FH=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===a?!1:n?!0:a!==s&&e===c},zH={duration:200,easing:"ease"},$R="transform",UH=Nu.Transition.toString({property:$R,duration:0,easing:"linear"}),$H={roleDescription:"sortable"};function BH(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,a]=m.useState(null),l=m.useRef(n);return us(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=$l(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&a(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),m.useEffect(()=>{i&&a(null)},[i]),i}function WH(t){let{animateLayoutChanges:e=FH,attributes:n,disabled:r,data:s,getNewIndex:i=VH,id:a,strategy:l,resizeObserverConfig:c,transition:u=zH}=t;const{items:h,containerId:f,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:x,overIndex:b,useDragOverlay:_,strategy:w}=m.useContext(UR),N=HH(r,g),k=h.indexOf(a),R=m.useMemo(()=>({sortable:{containerId:f,index:k,items:h},...s}),[f,s,k,h]),M=m.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:S,node:C,isOver:T,setNodeRef:j}=IH({id:a,data:R,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:A,activatorEvent:D,activeNodeRect:P,attributes:B,setNodeRef:Q,listeners:ne,isDragging:ee,over:L,setActivatorNodeRef:z,transform:G}=CH({id:a,data:R,attributes:{...$H,...n},disabled:N.draggable}),$=lW(j,Q),W=!!A,J=W&&!v&&rh(p)&&rh(b),re=!_&&ee,te=re&&J?G:null,O=J?te??(l??w)({rects:x,activeNodeRect:P,activeIndex:p,overIndex:b,index:k}):null,Y=rh(p)&&rh(b)?i({id:a,items:h,activeIndex:p,overIndex:b}):k,ae=A==null?void 0:A.id,X=m.useRef({activeId:ae,items:h,newIndex:Y,containerId:f}),he=h!==X.current.items,ie=e({active:A,containerId:f,isDragging:ee,isSorting:W,id:a,index:k,items:h,newIndex:X.current.newIndex,previousItems:X.current.items,previousContainerId:X.current.containerId,transition:u,wasDragging:X.current.activeId!=null}),ge=BH({disabled:!ie,index:k,node:C,rect:S});return m.useEffect(()=>{W&&X.current.newIndex!==Y&&(X.current.newIndex=Y),f!==X.current.containerId&&(X.current.containerId=f),h!==X.current.items&&(X.current.items=h)},[W,Y,f,h]),m.useEffect(()=>{if(ae===X.current.activeId)return;if(ae!=null&&X.current.activeId==null){X.current.activeId=ae;return}const pt=setTimeout(()=>{X.current.activeId=ae},50);return()=>clearTimeout(pt)},[ae]),{active:A,activeIndex:p,attributes:B,data:R,rect:S,index:k,newIndex:Y,items:h,isOver:T,isSorting:W,isDragging:ee,listeners:ne,node:C,overIndex:b,over:L,setNodeRef:$,setActivatorNodeRef:z,setDroppableNodeRef:j,setDraggableNodeRef:Q,transform:ge??O,transition:Ee()};function Ee(){if(ge||he&&X.current.newIndex===k)return UH;if(!(re&&!Iw(D)||!u)&&(W||ie))return Nu.Transition.toString({...u,property:$R})}}function HH(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Wf(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const qH=[Re.Down,Re.Right,Re.Up,Re.Left],GH=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:a,scrollableAncestors:l}}=e;if(qH.includes(t.code)){if(t.preventDefault(),!n||!r)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=s.get(f.id);if(p)switch(t.code){case Re.Down:r.top<p.top&&c.push(f);break;case Re.Up:r.top>p.top&&c.push(f);break;case Re.Left:r.left>p.left&&c.push(f);break;case Re.Right:r.left<p.left&&c.push(f);break}});const u=EW({active:n,collisionRect:r,droppableRects:s,droppableContainers:c,pointerCoordinates:null});let h=TR(u,"id");if(h===(a==null?void 0:a.id)&&u.length>1&&(h=u[1].id),h!=null){const f=i.get(n.id),p=i.get(h),g=p?s.get(p.id):null,v=p==null?void 0:p.node.current;if(v&&g&&f&&p){const b=lp(v).some((M,S)=>l[S]!==M),_=BR(f,p),w=KH(f,p),N=b||!_?{x:0,y:0}:{x:w?r.width-g.width:0,y:w?r.height-g.height:0},k={x:g.left,y:g.top};return N.x&&N.y?k:_u(k,N)}}}};function BR(t,e){return!Wf(t)||!Wf(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function KH(t,e){return!Wf(t)||!Wf(e)||!BR(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}const QH=bw,XH=_w,WR=m.forwardRef(({className:t,...e},n)=>o.jsx(ed,{ref:n,className:U("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));WR.displayName=ed.displayName;const HR=m.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(XH,{children:[o.jsx(WR,{}),o.jsxs(td,{ref:r,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(rp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Li,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));HR.displayName=td.displayName;const YH=m.forwardRef(({className:t,...e},n)=>o.jsx(nd,{ref:n,className:U("text-lg font-semibold leading-none tracking-tight",t),...e}));YH.displayName=nd.displayName;const JH=m.forwardRef(({className:t,...e},n)=>o.jsx(rd,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));JH.displayName=rd.displayName;function ZH(){const[t,e]=m.useState(!1),[n,r]=m.useState(0);m.useEffect(()=>{if(!localStorage.getItem("trace-onboarding-completed")){const c=setTimeout(()=>e(!0),1500);return()=>clearTimeout(c)}},[]);const s=()=>{localStorage.setItem("trace-onboarding-completed","true"),e(!1)},i=()=>{n<a.length-1?r(n+1):s()},a=[{title:"Welcome to Trace",description:"Your intelligent cockpit for academic success. Let's take a quick tour.",icon:o.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center text-primary mb-4 mx-auto",children:o.jsx(e_,{className:"h-6 w-6"})})},{title:"Focus on Next Actions",description:"Your most urgent assignment is always highlighted at the top-left. Click 'Start Next Task' to dive right in.",icon:o.jsx("div",{className:"h-12 w-12 rounded-full bg-orange-100 dark:bg-orange-900/20 flex items-center justify-center text-orange-600 dark:text-orange-400 mb-4 mx-auto",children:o.jsx(e_,{className:"h-6 w-6"})})},{title:"Plan with Timeline",description:"Use the 'Timeline' in the sidebar to visualize your semester and spot busy weeks ahead.",icon:o.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400 mb-4 mx-auto",children:o.jsx(qn,{className:"h-6 w-6"})})},{title:"Manage in Pipeline",description:"Track assignment status (Todo, In Progress, Done) using the Kanban-style 'Pipeline' view.",icon:o.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 dark:bg-purple-900/20 flex items-center justify-center text-purple-600 dark:text-purple-400 mb-4 mx-auto",children:o.jsx(Vv,{className:"h-6 w-6"})})}];return o.jsx(QH,{open:t,onOpenChange:l=>!l&&s(),children:o.jsxs(HR,{className:"sm:max-w-md p-0 overflow-hidden gap-0 border-0 shadow-2xl",children:[o.jsx("div",{className:"p-8 text-center bg-card",children:o.jsxs("div",{className:"transition-all duration-300 ease-in-out transform",children:[a[n].icon,o.jsx("h2",{className:"text-xl font-bold mb-2 tracking-tight",children:a[n].title}),o.jsx("p",{className:"text-muted-foreground text-sm leading-relaxed max-w-[280px] mx-auto",children:a[n].description})]})}),o.jsxs("div",{className:"p-4 bg-muted/30 border-t flex items-center justify-between",children:[o.jsx("div",{className:"flex gap-1.5 ml-2",children:a.map((l,c)=>o.jsx("div",{className:U("h-1.5 rounded-full transition-all duration-300",c===n?"w-6 bg-primary":"w-1.5 bg-primary/20")},c))}),o.jsx(ce,{onClick:i,size:"sm",className:"gap-2",children:n===a.length-1?o.jsxs(o.Fragment,{children:["Get Started ",o.jsx(fm,{className:"h-4 w-4"})]}):o.jsxs(o.Fragment,{children:["Next ",o.jsx(kO,{className:"h-4 w-4"})]})})]})]})})}const _S="attendance_configs",tr={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await Wt(We(Me,_S,t),n),bn.remove(`attn_config_${t}`)},async getCourseConfig(t){try{const e=`attn_config_${t}`,n=bn.get(e);if(n)return n;const r=We(Me,_S,t),s=await ss(r);if(s.exists()){const i=s.data();return bn.set(e,i,60*60),i}else return null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var N,k;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=`attn_data_${t}_${n}`,i=bn.get(s);if(i)return i;const a=r.toUpperCase().charCodeAt(0)-65,c=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:ZZ500?majorDimension=ROWS`,u=await fetch(c,{headers:{Authorization:`Bearer ${e}`}});if(!u.ok)throw u.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):u.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const f=(await u.json()).values;if(!f||f.length<2)throw new Error("Sheet is empty or invalid format.");const p=f[0],g=f.find(R=>{var S;return((S=R[a])==null?void 0:S.toLowerCase().trim())===n.toLowerCase().trim()});if(!g)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let v=0,x=0;const b=[];for(let R=1;R<p.length;R++){const M=(N=p[R])==null?void 0:N.trim();if(!M)break;const S=(k=g[R])==null?void 0:k.toUpperCase().trim();let C="Unknown";S==="P"||S==="PRESENT"||S==="1"?(C="Present",x++,v++):(S==="A"||S==="ABSENT"||S==="0")&&(C="Absent",v++),C!=="Unknown"&&b.push({date:M,status:C})}const _=v===0?0:Math.round(x/v*100),w={courseId:t,stats:{totalClasses:v,attendedClasses:x,percentage:_},history:b.reverse()};return bn.set(s,w,60*30),w}},Di={"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:Wv,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:XC,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:Dx,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:lu,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:fm,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},qR=Object.keys(Di),GR=Object.freeze(Object.defineProperty({__proto__:null,BADGES:Di,BADGE_IDS:qR},Symbol.toStringTag,{value:"Module"}));function eq(){const{user:t}=st(),[e,n]=m.useState([]),[r,s]=m.useState(0),[i,a]=m.useState(0),[l,c]=m.useState(!0);m.useEffect(()=>{if(!t)return;const f=Ar(We(Me,"leaderboards","all-courses","students",t.uid),p=>{var g;if(p.exists()){const v=p.data();n(v.badges||[]),s(v.loginStreak||0),a(((g=v.processedAssignmentIds)==null?void 0:g.length)||0)}c(!1)});return()=>f()},[t]);const h=(()=>{const f=[];return e.includes("10-submissions")||f.push({badge:Di["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),e.includes("perfect-week")||f.push({badge:Di["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),e.includes("attendance-champion")||f.push({badge:Di["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),f.length===0?null:f.reduce((p,g)=>g.percentage>p.percentage?g:p)})();return o.jsxs(Pe,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[o.jsxs(nt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(ft,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),o.jsx(Rx,{className:"h-5 w-5 text-purple-500"})]}),o.jsx(Ge,{className:"flex-1 flex flex-col",children:l?o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{className:"h-8 w-8 rounded-full"}),o.jsx(Ue,{className:"h-3 w-20"})]}):h?o.jsxs("div",{className:"flex flex-col gap-3 justify-between h-full",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[h.badge.imageSrc?o.jsx("img",{src:h.badge.imageSrc,alt:h.badge.label,className:"h-8 w-8 object-contain"}):h.type==="submission"?o.jsx("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:o.jsx(Wv,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}):o.jsx("div",{className:"p-1.5 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:o.jsx(lu,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-bold text-foreground truncate",children:h.badge.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:"Next to unlock"})]})]}),o.jsxs("div",{className:"space-y-1.5 pt-1",children:[o.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[o.jsx("span",{className:"font-medium text-muted-foreground",children:"Progress"}),o.jsxs("span",{className:"font-bold text-foreground",children:[Math.round(h.percentage),"%"]})]}),o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:U("h-full rounded-full transition-all duration-500",h.type==="submission"?"bg-blue-500":"bg-emerald-500"),style:{width:`${h.percentage}%`}})}),o.jsxs("p",{className:"text-[10px] text-muted-foreground text-right font-medium",children:[h.target-h.current," more needed"]})]})]}),o.jsx("div",{className:"pt-2 mt-auto border-t border-border/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"text-[10px] font-semibold text-muted-foreground uppercase tracking-wider",children:[e.length," Unlocked"]}),o.jsx(Tn,{href:"/settings?tab=badges",children:o.jsx(ce,{variant:"ghost",size:"sm",className:"h-6 text-[10px] px-2 hover:bg-secondary",children:"View All"})})]})})]}):o.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-center p-4",children:[o.jsx("div",{className:"p-3 bg-amber-100 dark:bg-amber-900/20 rounded-full mb-3",children:o.jsx(Rx,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})}),o.jsx("p",{className:"text-sm font-bold",children:"All Badges Unlocked!"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You are a legend."}),o.jsx(Tn,{href:"/settings?tab=badges",className:"mt-4 w-full",children:o.jsx(ce,{variant:"outline",size:"sm",className:"w-full h-7 text-xs",children:"View Collection"})})]})})]})}function tq(){return o.jsxs(Pe,{className:"overflow-hidden",children:[o.jsx(nt,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ue,{className:"h-4 w-24"}),o.jsx(Ue,{className:"h-8 w-8 rounded-lg"})]})}),o.jsx(Ge,{className:"pt-2",children:o.jsx(Ue,{className:"h-9 w-16"})})]})}function nq(){return o.jsxs("div",{className:"flex items-center space-x-4 py-3",children:[o.jsx(Ue,{className:"h-12 w-12 rounded-full"}),o.jsxs("div",{className:"space-y-2 max-w-[200px] w-full",children:[o.jsx(Ue,{className:"h-4 w-[200px]"}),o.jsx(Ue,{className:"h-4 w-[150px]"})]})]})}function rq({courses:t,assignments:e}){const{user:n}=st(),[r,s]=m.useState(null),[i,a]=m.useState(!0);return m.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(f=>f.id)])),c=[],u=new Map,h=()=>{const f=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,g=t.map(w=>w.id),v=new Set(e.map(w=>w.id)),x=f.filter(w=>{const N=w.email||"",k=w.emailDomain||(N.includes("@")?N.split("@")[1]:""),R=w.enrolledCourseIds||[],M=w.processedAssignmentIds||[],S=p&&k&&p===k,C=g.some(A=>R.includes(A)),j=!k&&M.some(A=>v.has(A));return w.id===n.uid?!0:S&&C||j});x.sort((w,N)=>N.totalXP-w.totalXP);const b=x.length;if(b===0){s(null),a(!1);return}const _=x.findIndex(w=>w.id===n.uid);if(_!==-1){const w=_+1,N=Math.round((b-w+1)/b*100),k=x[_];s({rank:w,total:b,percentile:N,xp:k.totalXP||0,badges:k.badges||[]})}else s(null);a(!1)};return l.forEach(f=>{const p=Po(Qi(Me,"leaderboards",f,"students"),Fa("totalXP","desc")),g=Ar(p,v=>{v.docs.forEach(x=>{const b=x.data(),_={id:x.id,...b,email:b.email||"",emailDomain:b.emailDomain||(b.email?b.email.split("@")[1]:""),enrolledCourseIds:b.enrolledCourseIds||b.subjects||[],processedAssignmentIds:b.processedAssignmentIds||b.completedTasks||[],totalXP:b.totalXP||b.xp||0,badges:b.badges||[]},w=u.get(x.id);(!w||_.totalXP>=w.totalXP)&&u.set(x.id,_)}),h()},v=>{console.error(`Error fetching leaderboard source ${f}:`,v),h()});c.push(g)}),()=>{c.forEach(f=>f())}},[n,t,e]),o.jsxs(Pe,{"data-testid":"card-class-rank",className:"flex flex-col h-full border-zinc-200 dark:border-zinc-800 shadow-sm transition-all duration-300 hover:shadow-md hover:-translate-y-0.5 group",children:[o.jsxs(nt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(ft,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Ranking"}),o.jsx("div",{className:"p-1.5 rounded-md bg-amber-50 dark:bg-amber-900/20 text-amber-500 shadow-sm group-hover:scale-110 transition-transform",children:o.jsx(Ra,{className:"h-4 w-4"})})]}),o.jsx(Ge,{className:"flex-1 flex flex-col justify-between pt-0 relative",children:i?o.jsxs("div",{className:"space-y-3 mt-2",children:[o.jsx(Ue,{className:"h-8 w-16"}),o.jsx(Ue,{className:"h-3 w-24"})]}):r?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mt-2",children:[o.jsxs("div",{className:"mt-2 text-center sm:text-left",children:[o.jsx("p",{className:"text-xl font-bold text-foreground leading-tight",children:r.total-r.rank>0?`You are ahead of ${r.total-r.rank} classmates`:"You are leading the class!"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1 text-sm text-muted-foreground font-medium",children:[o.jsxs("span",{children:["Rank #",r.rank]}),o.jsx("span",{children:""}),o.jsxs("span",{children:[r.xp.toLocaleString()," XP"]})]})]}),o.jsxs("div",{className:"mt-4 space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground uppercase tracking-wider mb-1",children:[o.jsx("span",{children:"Class Performance"}),o.jsxs("span",{children:["Top ",100-r.percentile,"%"]})]}),o.jsx("div",{className:"w-full h-2 bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full",style:{width:`${r.percentile}%`}})})]})]}),o.jsx("div",{className:"pt-4 mt-auto",children:o.jsx(Tn,{href:"/leaderboard",children:o.jsxs(ce,{variant:"outline",size:"sm",className:"h-8 text-xs w-full border-zinc-200 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-800 text-muted-foreground hover:text-foreground",children:["View Leaderboard",o.jsx(Lv,{className:"ml-1.5 h-3 w-3"})]})})})]}):o.jsxs("div",{className:"flex flex-col gap-2 justify-between flex-1 mt-2",children:[o.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),o.jsx(Tn,{href:"/leaderboard",className:"mt-auto",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function sq({courses:t}){const{user:e,accessToken:n}=st(),[r,s]=m.useState(null),[i,a]=m.useState(!0);return m.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){a(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async f=>{try{const p=await tr.getCourseConfig(f.id);if(!p||!p.isVisible||!p.sheetUrl)return;const g=tr.extractSheetId(p.sheetUrl);if(!g)return;const v=await tr.fetchAttendanceFromSheet(g,n,e.email,p.emailColumn||"A");v&&(c+=v.stats.attendedClasses,u+=v.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const f=Math.round(c/u*100);let p="safe";f<70?p="danger":f<75&&(p="warning"),s({percentage:f,status:p,present:c,total:u})}a(!1)}l()},[t,e,n]),o.jsxs(Pe,{"data-testid":"card-attendance-overall",className:"flex flex-col h-full border-emerald-100 dark:border-emerald-900/30 overflow-hidden relative group",children:[o.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity",children:o.jsx(Mx,{className:"w-24 h-24 text-emerald-500"})}),o.jsxs(nt,{className:"flex flex-row items-center justify-between gap-2 pb-2 relative z-10",children:[o.jsx(ft,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),o.jsx("div",{className:"p-1.5 rounded-md bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400",children:o.jsx(Mx,{className:"h-4 w-4"})})]}),o.jsx(Ge,{className:"relative z-10 flex-1 flex flex-col justify-end",children:i?o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{className:"h-8 w-16"}),o.jsx(Ue,{className:"h-3 w-24"})]}):r?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:U("text-4xl font-bold tracking-tight",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:r.percentage}),o.jsx("span",{className:"text-xl font-medium text-muted-foreground",children:"%"})]}),o.jsxs("div",{className:"mt-2 space-y-1",children:[o.jsx("div",{className:"w-full h-1.5 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:U("h-full rounded-full transition-all duration-1000 ease-out",r.status==="danger"?"bg-red-500":r.status==="warning"?"bg-amber-500":"bg-emerald-500"),style:{width:`${r.percentage}%`}})}),o.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground pt-1",children:[o.jsxs("span",{children:[r.present,"/",r.total," Classes"]}),o.jsx("span",{className:U("font-bold uppercase text-[10px]",r.status==="safe"?"text-emerald-600 dark:text-emerald-400":r.status==="warning"?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"),children:r.status==="safe"?"On Track":"Low"})]})]})]}):o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Data Yet"}),o.jsx("p",{className:"text-[10px] text-muted-foreground/70 leading-snug",children:"Ask your teacher to use Trace for attendance."})]}),o.jsx(Tn,{href:"/attendance",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-8 text-xs w-full bg-transparent border-dashed hover:border-solid hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:text-emerald-600 hover:border-emerald-200 transition-all",children:"Check Details"})})]})})]})}function iq(){return o.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>o.jsx(tq,{},t))}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"md:col-span-2 space-y-6",children:[o.jsx(Ue,{className:"h-[300px] w-full rounded-xl"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ue,{className:"h-8 w-40"}),[1,2,3].map(t=>o.jsx(nq,{},t))]})]}),o.jsx("div",{className:"space-y-6",children:o.jsx(Ue,{className:"h-[400px] w-full rounded-xl"})})]})]})}function NS({title:t,value:e,icon:n,description:r,variant:s="default",onClick:i,className:a}){const l={default:{bg:"bg-white dark:bg-zinc-950",iconBg:"bg-zinc-100 dark:bg-zinc-800",iconColor:"text-zinc-600 dark:text-zinc-400",valueColor:"text-zinc-900 dark:text-zinc-50",border:"border-zinc-200 dark:border-zinc-800",ring:"group-hover:ring-zinc-200 dark:group-hover:ring-zinc-800"},warning:{bg:"bg-amber-50/30 dark:bg-amber-950/10",iconBg:"bg-amber-100 dark:bg-amber-900/30",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-400",border:"border-amber-200/60 dark:border-amber-800/60",ring:"group-hover:ring-amber-200 dark:group-hover:ring-amber-800/50"},danger:{bg:"bg-red-50/30 dark:bg-red-950/10",iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400",valueColor:"text-red-700 dark:text-red-400",border:"border-red-200/60 dark:border-red-800/60",ring:"group-hover:ring-red-200 dark:group-hover:ring-red-800/50"},success:{bg:"bg-emerald-50/30 dark:bg-emerald-950/10",iconBg:"bg-emerald-100 dark:bg-emerald-900/30",iconColor:"text-emerald-600 dark:text-emerald-400",valueColor:"text-emerald-700 dark:text-emerald-400",border:"border-emerald-200/60 dark:border-emerald-800/60",ring:"group-hover:ring-emerald-200 dark:group-hover:ring-emerald-800/50"}},c=l[s]||l.default,u=o.jsxs(Pe,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:U("group overflow-hidden transition-all duration-300 hover:shadow-md hover:-translate-y-0.5",c.bg,c.border,i&&"cursor-pointer active:scale-95 transition-transform","hover:ring-1",c.ring,a),onClick:i,children:[o.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-1 p-3",children:[o.jsx(ft,{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:t}),o.jsx("div",{className:U("p-1.5 rounded-lg transition-all duration-300 group-hover:scale-110",c.iconBg),children:o.jsx(n,{className:U("h-3.5 w-3.5",c.iconColor)})})]}),o.jsx(Ge,{className:"p-3 pt-0",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("div",{className:"flex items-baseline gap-2",children:o.jsx("div",{className:U("text-2xl font-bold tracking-tight tabular-nums",c.valueColor),children:e})}),r&&o.jsx("p",{className:"text-[10px] font-medium text-muted-foreground",children:r})]})})]});return i?o.jsx(Ui,{children:o.jsxs(Ds,{delayDuration:0,children:[o.jsx(Ms,{asChild:!0,children:u}),o.jsx(os,{children:o.jsx("p",{className:"font-medium",children:"Click to see filtered assignments"})})]})}):u}function oq({assignments:t}){const e=new Date,n=new Date;n.setDate(e.getDate()+7);const s=t.filter(a=>{if(!a.dueDate)return!1;const l=new Date(a.dueDate);return l>=e&&l<=n}).reduce((a,l)=>{if(!l.dueDate)return a;const c=new Date(l.dueDate),u=c.toDateString();return a[u]||(a[u]={date:c,dayLabel:c.toLocaleDateString(void 0,{weekday:"short"}),items:[]}),a[u].items.push(l),a},{}),i=Object.values(s).sort((a,l)=>a.date.getTime()-l.date.getTime()).slice(0,3);return o.jsxs(Pe,{className:"overflow-hidden border-zinc-100 dark:border-zinc-800/60 shadow-none bg-card/60 flex flex-col h-full",children:[o.jsx(nt,{className:"pb-2",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ft,{className:"text-base font-semibold flex items-center gap-2",children:[o.jsx(qn,{className:"h-4 w-4 text-purple-500"}),"This Week"]}),o.jsx(Tn,{href:"/timeline",children:o.jsxs(ce,{variant:"ghost",size:"sm",className:"h-6 text-xs text-muted-foreground hover:text-foreground",children:["View Full Timeline ",o.jsx(Lv,{className:"ml-1 h-3 w-3"})]})})]})}),o.jsx(Ge,{className:"flex-1 overflow-y-auto px-4 pb-4",children:i.length>0?o.jsx("div",{className:"space-y-4",children:i.map((a,l)=>o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:a.dayLabel}),o.jsx("div",{className:"h-px flex-1 bg-border/50"}),o.jsxs("span",{className:"text-[10px] text-muted-foreground font-medium uppercase tracking-wide",children:[a.items.length," assignment",a.items.length!==1?"s":""]})]}),o.jsx("div",{className:"space-y-1 ml-2 border-l-2 border-muted pl-3",children:a.items.map(c=>o.jsx("div",{className:"text-sm text-foreground/90 truncate",children:c.title},c.id))})]},l))}):o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4 opacity-60",children:[o.jsx(qn,{className:"h-8 w-8 text-muted-foreground mb-2"}),o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No assignments due fast."})]})})]})}function aq({assignments:t,onSelectAssignment:e,courses:n}){const[r,s]=m.useState(!1),i=[...t].sort((p,g)=>p.systemStatus==="overdue"&&g.systemStatus!=="overdue"?-1:g.systemStatus==="overdue"&&p.systemStatus!=="overdue"||!p.dueDate?1:g.dueDate?new Date(p.dueDate).getTime()-new Date(g.dueDate).getTime():-1),a=i[0],l=i.slice(1),c=r?l:l.slice(0,3),u=p=>{if(!p)return"No Due Date";const g=new Date(p),v=new Date,x=g.getTime()-v.getTime(),b=Math.ceil(x/(1e3*60*60*24));return b<0?"Overdue":b===0?"Due Today":b===1?"Due Tomorrow":`Due ${g.toLocaleDateString(void 0,{month:"short",day:"numeric"})}`};if(!a)return o.jsx(Pe,{className:"flex flex-col h-full border-zinc-200 dark:border-zinc-800 shadow-sm overflow-hidden min-h-[300px]",children:o.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 p-6 text-center",children:[o.jsx("div",{className:"h-16 w-16 rounded-full bg-emerald-50 dark:bg-emerald-900/20 flex items-center justify-center mb-4",children:o.jsx(Ci,{className:"h-8 w-8 text-emerald-500"})}),o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"All caught up!"}),o.jsx("p",{className:"text-sm text-muted-foreground max-w-[250px] mt-2",children:"No pending assignments. Take a break or check upcoming work in the timeline."})]})});const h=n.find(p=>p.id===a.courseId),f=a.systemStatus==="overdue";return o.jsxs(Pe,{className:"flex flex-col h-full border-zinc-300 dark:border-zinc-700 shadow-md ring-1 ring-black/5 dark:ring-white/5 overflow-hidden",children:[o.jsxs("div",{className:"p-6 pb-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"flex items-center justify-center h-6 w-6 rounded bg-primary/10 text-primary",children:o.jsx(Fv,{className:"h-4 w-4"})}),o.jsx("h2",{className:"text-lg font-semibold tracking-tight",children:"Next Action"})]}),o.jsxs(jn,{variant:"outline",className:"font-mono text-xs",children:[i.length," pending"]})]}),o.jsx("div",{className:U("relative p-4 rounded-xl border-2 transition-all cursor-pointer group bg-card hover:border-primary/50",f?"border-red-500/20 bg-red-500/5":"border-primary/20 bg-primary/5"),onClick:()=>e(a),children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-start gap-4",children:[o.jsxs("div",{children:[o.jsx(jn,{variant:"secondary",className:"mb-2 text-[10px] px-2 py-0.5 border-0",style:{backgroundColor:(h==null?void 0:h.color)||void 0,color:h!=null&&h.color?Qm(h.color):void 0},children:a.courseName}),o.jsx("h3",{className:"text-xl font-bold leading-tight group-hover:text-primary transition-colors",children:a.title})]}),f&&o.jsx(jn,{variant:"destructive",className:"shrink-0 animate-pulse",children:"Overdue"})]}),o.jsxs("div",{className:"flex flex-col items-center mt-6 gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[o.jsx(GC,{className:"h-4 w-4"}),o.jsx("span",{className:f?"text-red-500 font-bold":"",children:u(a.dueDate)})]}),o.jsxs(ce,{size:"sm",className:"w-[60%] gap-2 shadow-lg hover:translate-y-[-2px] transition-transform",children:["Start Next Task ",o.jsx(Lv,{className:"h-4 w-4"})]})]})]})})]}),o.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col px-6 pb-4",children:[l.length>0&&o.jsx("div",{className:"mt-6 mb-3",children:o.jsx("h4",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Up Next"})}),o.jsx("div",{className:"flex-1 overflow-y-auto -mx-2 px-2 space-y-2",children:c.map(p=>{n.find(v=>v.id===p.courseId);const g=p.systemStatus==="overdue";return o.jsxs("div",{onClick:()=>e(p),className:"flex items-center gap-3 p-3 rounded-lg border border-transparent hover:border-border hover:bg-muted/50 transition-colors cursor-pointer group/item",children:[o.jsx("div",{className:U("w-1 h-8 rounded-full shrink-0",g?"bg-red-500":"bg-muted-foreground/30")}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate group-hover/item:text-primary transition-colors",children:p.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx("span",{className:"truncate max-w-[120px]",children:p.courseName}),o.jsx("span",{children:""}),o.jsx("span",{children:u(p.dueDate)})]})]})]},p.id)})}),l.length>3&&o.jsx(ce,{variant:"ghost",size:"sm",className:"w-full mt-2 text-xs text-muted-foreground hover:text-foreground",onClick:()=>s(!r),children:r?"Show Less":`View All (${l.length})`})]})]})}function lq({id:t,children:e}){const{attributes:n,listeners:r,setNodeRef:s,transform:i,transition:a,isDragging:l}=WH({id:t}),c={transform:Nu.Transform.toString(i),transition:a,opacity:l?.5:1};return o.jsxs("div",{ref:s,style:c,className:"relative group",children:[o.jsx("div",{...n,...r,className:"absolute -left-8 top-1/2 -translate-y-1/2 cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-60 hover:!opacity-100 transition-opacity z-10",children:o.jsx("div",{className:"bg-muted border border-border rounded p-1",children:o.jsx($O,{className:"h-4 w-4 text-muted-foreground"})})}),e]})}function cq(){var w,N;const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:a}=cn();st();const[l,c]=m.useState(null),[u,h]=m.useState(()=>{const k=localStorage.getItem("dashboard_section_order");return k?JSON.parse(k):["metrics","features","charts"]}),[f,p]=m.useState(null),g=_W(cS(Mw),cS(Pw,{coordinateGetter:GH})),v=k=>{const{active:R,over:M}=k;M&&R.id!==M.id&&h(S=>{const C=S.indexOf(R.id),T=S.indexOf(M.id),j=Ow(S,C,T);return localStorage.setItem("dashboard_section_order",JSON.stringify(j)),j})};if(e)return o.jsx(iq,{});const x=t(),b=r.filter(k=>k.systemStatus!=="graded"&&k.systemStatus!=="submitted"),_=f?r.filter(k=>{const R=k.systemStatus==="graded"||k.systemStatus==="submitted";if(f.type==="active")return!R;if(R)return!1;const M=new Date,S=k.dueDate?new Date(k.dueDate):null;if(f.type==="urgent"){if(k.systemStatus==="overdue")return!0;if(!S)return!1;const C=new Date(M);return C.setDate(C.getDate()+3),S<=C}if(f.type==="upcoming"){if(!S)return!1;const C=new Date(M);return C.setDate(C.getDate()+7),S>=M&&S<=C}return!1}).sort((k,R)=>k.dueDate?R.dueDate?new Date(k.dueDate).getTime()-new Date(R.dueDate).getTime():-1:1):[];return a&&a.toLowerCase().includes("session")&&!(r.length>0||i.length>0||x.upcoming7Days>0)?o.jsx(Vl,{}):o.jsxs(o.Fragment,{children:[a&&a.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3",children:o.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Cn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Sign in to update your assignments."})]}),o.jsx(Tn,{href:"/auth/refresh",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 space-y-8",children:[b.length>0&&o.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[o.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),o.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:o.jsx(Fv,{className:"h-5 w-5"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:"This Week's Focus"}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["Complete"," ",o.jsxs("span",{className:"font-bold text-foreground",children:['"',((w=b[0])==null?void 0:w.title)||"Upcoming tasks",'"']})," ","by"," ",(N=b[0])!=null&&N.dueDate?new Date(b[0].dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"}):"the deadline"]})]})]}),b[0]&&o.jsx(ce,{variant:"outline",size:"sm",onClick:()=>c(b[0]),className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50",children:"View Assignment"})]})]}),o.jsx(SH,{sensors:g,collisionDetection:SW,onDragEnd:v,children:o.jsx(LH,{items:u,strategy:MH,children:o.jsx("div",{className:"space-y-6",children:u.map(k=>{const R={metrics:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 mt-6",children:[o.jsx("div",{className:"lg:col-span-3 h-full",children:o.jsx(NS,{title:"Urgent",value:x.overdue+x.upcoming3Days,description:x.overdue+x.upcoming3Days===0?"You're all caught up":"Overdue + due in 3 days",icon:x.overdue+x.upcoming3Days===0?Ci:Cn,variant:x.overdue+x.upcoming3Days===0?"success":"danger",className:"h-full",onClick:()=>p({type:"urgent",label:"Urgent Assignments"})})}),o.jsx("div",{className:"lg:col-span-2 h-full",children:o.jsx(NS,{title:"Upcoming",value:x.upcoming7Days,description:"Due this week",icon:qn,variant:"default",className:"h-full",onClick:()=>p({type:"upcoming",label:"Upcoming (7 Days)"})})})]}),features:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-10 gap-6",children:[o.jsx("div",{className:"lg:col-span-4 h-full",children:o.jsx(rq,{courses:i,assignments:r})}),o.jsx("div",{className:"lg:col-span-3 h-full",children:o.jsx(sq,{courses:i})}),o.jsx("div",{className:"lg:col-span-3 h-full",children:o.jsx(eq,{})})]}),charts:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6 lg:h-[450px]",children:[o.jsx("div",{className:"lg:col-span-3 h-full min-h-[300px]",children:o.jsx(aq,{assignments:b,onSelectAssignment:c,courses:i})}),o.jsx("div",{className:"lg:col-span-2 h-full min-h-[300px]",children:o.jsx(oq,{assignments:b})})]})};return o.jsx(lq,{id:k,children:R[k]},k)})})})})]}),o.jsx(Tw,{assignment:l,isOpen:!!l,onClose:()=>c(null)}),o.jsx(DI,{open:!!f,onOpenChange:k=>!k&&p(null),children:o.jsxs(Nw,{className:"overflow-y-auto sm:max-w-md",children:[o.jsxs(Sw,{className:"mb-6",children:[o.jsxs(Ew,{className:"flex items-center gap-2",children:[(f==null?void 0:f.type)==="urgent"&&o.jsx(Cn,{className:"h-5 w-5 text-red-500"}),(f==null?void 0:f.type)==="upcoming"&&o.jsx(qn,{className:"h-5 w-5 text-blue-500"}),(f==null?void 0:f.type)==="active"&&o.jsx(Ci,{className:"h-5 w-5 text-emerald-500"}),f==null?void 0:f.label]}),o.jsxs(OI,{children:["You have ",_.length," assignments in this category."]})]}),o.jsx("div",{className:"space-y-3",children:_.length>0?_.map(k=>o.jsx(sB,{assignment:k,onClick:()=>{p(null),c(k)}},k.id)):o.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center text-muted-foreground",children:[o.jsx("div",{className:"h-12 w-12 rounded-full bg-muted/50 flex items-center justify-center mb-3",children:o.jsx(Ci,{className:"h-6 w-6"})}),o.jsx("p",{children:"No assignments found."})]})})]})}),o.jsx(ZH,{})]})}function uq(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s,reauthRequired:i}=cn();st();const[a,l]=m.useState(null),[c,u]=m.useState("grid"),h=Xm(),f=t.find(v=>v.id===a),g=e.filter(v=>v.courseId===a).flatMap(v=>v.materials?v.materials.flatMap(x=>{let b=[];if(x.driveFile){const _=x.driveFile.driveFile;let w=_.thumbnailUrl||_.iconUrl||null;!w&&_.id&&(w=`https://drive.google.com/thumbnail?id=${_.id}&sz=w800`),b.push({id:_.id,title:_.title,link:_.alternateLink,thumbnail:w,type:"driveFile"})}return b}):[]).filter(v=>!!v.title);return n&&t.length===0?o.jsx(dq,{}):i&&t.length===0?o.jsx("div",{className:"h-full flex items-center justify-center p-4",children:o.jsx(Vl,{})}):o.jsxs("div",{className:"flex h-full overflow-hidden bg-background flex-col",children:[i&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Cn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached notes are shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:v=>{v.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[o.jsxs("div",{className:U("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&a?"hidden":"flex"),children:[o.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:o.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:o.jsx(Ui,{children:t.map(v=>o.jsxs(Ds,{delayDuration:0,children:[o.jsx(Ms,{asChild:!0,children:o.jsxs("button",{onClick:()=>l(v.id),className:U("w-full text-left px-3 py-3.5 rounded-md transition-all group flex items-center gap-3 outline-none focus:ring-2 focus:ring-primary/20",a===v.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[o.jsx("div",{className:U("h-8 w-8 rounded-full flex items-center justify-center shrink-0 border border-transparent",a===v.id?"ring-2 ring-primary-foreground/20":""),style:{backgroundColor:v.color||"#e4e4e7"},children:o.jsx(Z1,{className:"h-4 w-4",style:{color:v.color?Qm(v.color):void 0}})}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[o.jsx("p",{className:"text-sm font-semibold leading-tight mb-0.5 truncate",children:v.name}),o.jsx("p",{className:U("text-[10px] uppercase tracking-wider font-medium leading-tight",a===v.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:v.section||"No Section"})]}),o.jsx(DO,{className:U("h-4 w-4 transition-transform shrink-0",a===v.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]})}),o.jsx(os,{side:"right",children:o.jsx("p",{children:v.name})})]},v.id))})})]}),o.jsxs("div",{className:U("flex-1 overflow-y-auto bg-background",h&&!a?"hidden":"flex flex-col"),children:[h&&a&&o.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:o.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[o.jsx(Ou,{className:"h-4 w-4"}),"Back to Courses"]})}),a?o.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[o.jsxs("div",{className:"space-y-1 max-w-full",children:[o.jsx(jn,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),o.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:f==null?void 0:f.name}),o.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(f==null?void 0:f.descriptionHeading)||"Curated academic materials and notes."})]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),o.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[g.length," Documents"]})]}),o.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[o.jsx(ce,{variant:"ghost",size:"icon",className:U("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:o.jsx(Vv,{className:"h-4 w-4"})}),o.jsx(ce,{variant:"ghost",size:"icon",className:U("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:o.jsx(qO,{className:"h-4 w-4"})})]})]})]}),g.length>0?c==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:g.map((v,x)=>{var R;const b=((R=v.title)==null?void 0:R.toLowerCase())||"",_=b.endsWith(".pdf"),w=b.endsWith(".ppt")||b.endsWith(".pptx");let N="bg-zinc-100 text-zinc-600",k="FILE";return _?(N="bg-red-100 text-red-600",k="PDF DOCUMENT"):w?(N="bg-orange-100 text-orange-600",k="PRESENTATION"):(N="bg-blue-100 text-blue-600",k="DOCUMENT"),o.jsxs(Pe,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[o.jsx(nt,{className:"p-3 border-b border-border space-y-0 pb-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:U("h-8 w-8 rounded-full flex items-center justify-center shrink-0",N),children:o.jsx(Ao,{className:"h-4 w-4"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:v.title}),o.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:k})]})]})}),o.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[v.thumbnail&&o.jsx("img",{src:v.thumbnail.includes("s220")?v.thumbnail.replace("s220","s800"):v.thumbnail,alt:v.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:M=>{var C;console.log("Thumbnail failed to load:",v.thumbnail),M.currentTarget.style.display="none";const S=(C=M.currentTarget.parentElement)==null?void 0:C.querySelector(".fallback-viewer");S&&(S.classList.remove("hidden"),S.classList.add("block"))}}),o.jsx("div",{className:U("fallback-viewer absolute inset-0 w-full h-full",v.thumbnail?"hidden":"block"),children:o.jsx(hq,{type:_?"pdf":w?"ppt":"doc"})}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:o.jsx(ce,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:o.jsxs("a",{href:v.link,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(kx,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${v.id}-${x}`)})}):o.jsx("div",{className:"space-y-2 pb-20",children:g.map((v,x)=>{var R;const b=((R=v.title)==null?void 0:R.toLowerCase())||"",_=b.endsWith(".pdf"),w=b.endsWith(".ppt")||b.endsWith(".pptx");let N="bg-zinc-100 text-zinc-600",k="File";return _?(N="bg-red-100 text-red-600",k="PDF Document"):w?(N="bg-orange-100 text-orange-600",k="Presentation"):(N="bg-blue-100 text-blue-600",k="Document"),o.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[o.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[v.thumbnail?o.jsx("img",{src:v.thumbnail.includes("s220")?v.thumbnail.replace("s220","s400"):v.thumbnail,alt:v.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:M=>{M.currentTarget.style.display="none";const S=M.currentTarget.nextElementSibling;S&&S.classList.remove("hidden")}}):null,o.jsx("div",{className:U("absolute inset-0 flex items-center justify-center",v.thumbnail?"hidden":"flex",N),children:o.jsx(Ao,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:v.title}),o.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[k,"  Read Only"]})]}),o.jsx(ce,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:o.jsxs("a",{href:v.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[o.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),o.jsx(kx,{className:"h-4 w-4"})]})})]},`${v.id}-${x}`)})}):o.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[o.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:o.jsx(Z1,{className:"h-8 w-8 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[o.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:o.jsx(Ao,{className:"h-10 w-10 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})]})}function dq(){return o.jsxs("div",{className:"flex h-full overflow-hidden",children:[o.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[o.jsx(Ue,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>o.jsx(Ue,{className:"h-16 w-full rounded-xl"},t))]}),o.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[o.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ue,{className:"h-4 w-20"}),o.jsx(Ue,{className:"h-10 w-80"}),o.jsx(Ue,{className:"h-4 w-64"})]}),o.jsx(Ue,{className:"h-10 w-32 rounded-lg"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>o.jsx(Ue,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function hq({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return o.jsxs("div",{className:U("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[o.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[o.jsxs("div",{className:"flex gap-2 mb-1",children:[o.jsx("div",{className:U("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:o.jsx(Ao,{className:"h-6 w-6"})}),o.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[o.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),o.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),o.jsxs("div",{className:"space-y-2 flex-1",children:[o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&o.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),o.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:o.jsx(Ao,{className:"h-40 w-40"})})]})}function fq({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),o.jsx("div",{className:"space-y-8",children:s.map(a=>{const l=qR.map(c=>Di[c]).filter(c=>c.category===a.id);return l.length===0?null:o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:a.label}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);let h=!1;return u||(a.id==="consistency"?h=!0:a.id==="productivity"?h=(n||0)>0:a.id==="reliability"&&(h=((r==null?void 0:r.total)||0)>0)),o.jsxs("div",{className:U("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":h?"bg-muted/40 border-dashed border-border/60":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[o.jsx("div",{className:U("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?U(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:o.jsx(c.icon,{className:U("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:U("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&o.jsx(Ix,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),o.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&a.id==="consistency"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let f=0;if(c.id==="5-day-consistent"?f=5:c.id==="10-day-consistent"?f=10:c.id==="30-day-consistent"&&(f=30),f>0){const p=Number(e)||1,g=Math.min(p/f*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${g}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(g),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[p," / ",f," Days"]})]})]})}return null})()}),!u&&a.id==="productivity"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let f=0;if(c.id==="10-submissions"?f=10:c.id==="25-submissions"?f=25:c.id==="50-submissions"&&(f=50),f>0){const p=Number(n)||0,g=Math.min(p/f*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${g}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(g),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[p," / ",f," Submissions"]})]})]})}return null})()}),!u&&a.id==="reliability"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:f,attended:p}=r||{total:0,attended:0};let g=0,v=0;if(c.id==="perfect-week"?(g=7,v=100):c.id==="attendance-champion"&&(g=30,v=90),g>0){const x=f>0?p/f*100:0,b=Math.min(f/g*100,100),_=Math.min(x/v*100,100),w=Math.min((b+_)/2,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${w}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(w),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," days "," ",Math.round(x),"% attended"]})]})]})}return null})()})]}),u&&o.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},a.id)})})}var Lw="Switch",[mq,LG]=Qn(Lw),[pq,gq]=mq(Lw),KR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,g]=m.useState(null),v=Te(e,N=>g(N)),x=m.useRef(!1),b=p?h||!!p.closest("form"):!0,[_=!1,w]=Is({prop:s,defaultProp:i,onChange:u});return o.jsxs(pq,{scope:n,checked:_,disabled:l,children:[o.jsx(xe.button,{type:"button",role:"switch","aria-checked":_,"aria-required":a,"data-state":YR(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:v,onClick:me(t.onClick,N=>{w(k=>!k),b&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),b&&o.jsx(xq,{control:p,bubbles:!x.current,name:r,value:c,checked:_,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});KR.displayName=Lw;var QR="SwitchThumb",XR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=gq(QR,n);return o.jsx(xe.span,{"data-state":YR(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});XR.displayName=QR;var xq=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),a=LI(n),l=wj(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function YR(t){return t?"checked":"unchecked"}var JR=KR,yq=XR;const kn=m.forwardRef(({className:t,...e},n)=>o.jsx(JR,{className:U("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(yq,{className:U("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));kn.displayName=JR.displayName;var vq="Label",ZR=m.forwardRef((t,e)=>o.jsx(xe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));ZR.displayName=vq;var eP=ZR;const wq=Mu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Fn=m.forwardRef(({className:t,...e},n)=>o.jsx(eP,{ref:n,className:U(wq(),t),...e}));Fn.displayName=eP.displayName;var tP="AlertDialog",[bq,VG]=Qn(tP,[yI]),$s=yI(),nP=t=>{const{__scopeAlertDialog:e,...n}=t,r=$s(e);return o.jsx(bw,{...r,...n,modal:!0})};nP.displayName=tP;var _q="AlertDialogTrigger",rP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=$s(n);return o.jsx(yB,{...s,...r,ref:e})});rP.displayName=_q;var Nq="AlertDialogPortal",sP=t=>{const{__scopeAlertDialog:e,...n}=t,r=$s(e);return o.jsx(_w,{...r,...n})};sP.displayName=Nq;var Sq="AlertDialogOverlay",iP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=$s(n);return o.jsx(ed,{...s,...r,ref:e})});iP.displayName=Sq;var $a="AlertDialogContent",[Eq,Tq]=bq($a),Cq=xC("AlertDialogContent"),oP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=$s(n),a=m.useRef(null),l=Te(e,a),c=m.useRef(null);return o.jsx(mB,{contentName:$a,titleName:aP,docsSlug:"alert-dialog",children:o.jsx(Eq,{scope:n,cancelRef:c,children:o.jsxs(td,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:me(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(Cq,{children:r}),o.jsx(kq,{contentRef:a})]})})})});oP.displayName=$a;var aP="AlertDialogTitle",lP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=$s(n);return o.jsx(nd,{...s,...r,ref:e})});lP.displayName=aP;var cP="AlertDialogDescription",uP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=$s(n);return o.jsx(rd,{...s,...r,ref:e})});uP.displayName=cP;var jq="AlertDialogAction",dP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=$s(n);return o.jsx(rp,{...s,...r,ref:e})});dP.displayName=jq;var hP="AlertDialogCancel",fP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=Tq(hP,n),i=$s(n),a=Te(e,s);return o.jsx(rp,{...i,...r,ref:a})});fP.displayName=hP;var kq=({contentRef:t})=>{const e=`\`${$a}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${$a}\` by passing a \`${cP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${$a}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Aq=nP,Iq=rP,Rq=sP,mP=iP,pP=oP,gP=dP,xP=fP,yP=lP,vP=uP;const SS=Aq,ES=Iq,Pq=Rq,wP=m.forwardRef(({className:t,...e},n)=>o.jsx(mP,{className:U("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));wP.displayName=mP.displayName;const Ey=m.forwardRef(({className:t,...e},n)=>o.jsxs(Pq,{children:[o.jsx(wP,{}),o.jsx(pP,{ref:n,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Ey.displayName=pP.displayName;const Ty=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",t),...e});Ty.displayName="AlertDialogHeader";const Cy=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Cy.displayName="AlertDialogFooter";const jy=m.forwardRef(({className:t,...e},n)=>o.jsx(yP,{ref:n,className:U("text-lg font-semibold",t),...e}));jy.displayName=yP.displayName;const ky=m.forwardRef(({className:t,...e},n)=>o.jsx(vP,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));ky.displayName=vP.displayName;const Ay=m.forwardRef(({className:t,...e},n)=>o.jsx(gP,{ref:n,className:U(iw(),t),...e}));Ay.displayName=gP.displayName;const Iy=m.forwardRef(({className:t,...e},n)=>o.jsx(xP,{ref:n,className:U(iw({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Iy.displayName=xP.displayName;var Ig="rovingFocusGroup.onEntryFocus",Dq={bubbles:!1,cancelable:!0},dp="RovingFocusGroup",[Ry,bP,Mq]=Pv(dp),[Oq,_P]=Qn(dp,[Mq]),[Lq,Vq]=Oq(dp),NP=m.forwardRef((t,e)=>o.jsx(Ry.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Ry.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Fq,{...t,ref:e})})}));NP.displayName=dp;var Fq=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),g=Te(e,p),v=ep(i),[x=null,b]=Is({prop:a,defaultProp:l,onChange:c}),[_,w]=m.useState(!1),N=mt(u),k=bP(n),R=m.useRef(!1),[M,S]=m.useState(0);return m.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(Ig,N),()=>C.removeEventListener(Ig,N)},[N]),o.jsx(Lq,{scope:n,orientation:r,dir:v,loop:s,currentTabStopId:x,onItemFocus:m.useCallback(C=>b(C),[b]),onItemShiftTab:m.useCallback(()=>w(!0),[]),onFocusableItemAdd:m.useCallback(()=>S(C=>C+1),[]),onFocusableItemRemove:m.useCallback(()=>S(C=>C-1),[]),children:o.jsx(xe.div,{tabIndex:_||M===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{R.current=!0}),onFocus:me(t.onFocus,C=>{const T=!R.current;if(C.target===C.currentTarget&&T&&!_){const j=new CustomEvent(Ig,Dq);if(C.currentTarget.dispatchEvent(j),!j.defaultPrevented){const A=k().filter(ne=>ne.focusable),D=A.find(ne=>ne.active),P=A.find(ne=>ne.id===x),Q=[D,P,...A].filter(Boolean).map(ne=>ne.ref.current);TP(Q,h)}}R.current=!1}),onBlur:me(t.onBlur,()=>w(!1))})})}),SP="RovingFocusGroupItem",EP=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=t,l=Zr(),c=i||l,u=Vq(SP,n),h=u.currentTabStopId===c,f=bP(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=u;return m.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),o.jsx(Ry.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:me(t.onMouseDown,v=>{r?u.onItemFocus(c):v.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=$q(v,u.orientation,u.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let _=f().filter(w=>w.focusable).map(w=>w.ref.current);if(x==="last")_.reverse();else if(x==="prev"||x==="next"){x==="prev"&&_.reverse();const w=_.indexOf(v.currentTarget);_=u.loop?Bq(_,w+1):_.slice(w+1)}setTimeout(()=>TP(_))}})})})});EP.displayName=SP;var zq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Uq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function $q(t,e,n){const r=Uq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return zq[r]}function TP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Bq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Wq=NP,Hq=EP,Vw="Tabs",[qq,FG]=Qn(Vw,[_P]),CP=_P(),[Gq,Fw]=qq(Vw),jP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=ep(l),[f,p]=Is({prop:r,onChange:s,defaultProp:i});return o.jsx(Gq,{scope:n,baseId:Zr(),value:f,onValueChange:p,orientation:a,dir:h,activationMode:c,children:o.jsx(xe.div,{dir:h,"data-orientation":a,...u,ref:e})})});jP.displayName=Vw;var kP="TabsList",AP=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Fw(kP,n),a=CP(n);return o.jsx(Wq,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(xe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});AP.displayName=kP;var IP="TabsTrigger",RP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Fw(IP,n),l=CP(n),c=MP(a.baseId,r),u=OP(a.baseId,r),h=r===a.value;return o.jsx(Hq,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(xe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:me(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:me(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:me(t.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});RP.displayName=IP;var PP="TabsContent",DP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Fw(PP,n),c=MP(l.baseId,r),u=OP(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(An,{present:s||h,children:({present:p})=>o.jsx(xe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});DP.displayName=PP;function MP(t,e){return`${t}-trigger-${e}`}function OP(t,e){return`${t}-content-${e}`}var Kq=jP,LP=AP,VP=RP,FP=DP;const Qq=Kq,zP=m.forwardRef(({className:t,...e},n)=>o.jsx(LP,{ref:n,className:U("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));zP.displayName=LP.displayName;const Dh=m.forwardRef(({className:t,...e},n)=>o.jsx(VP,{ref:n,className:U("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Dh.displayName=VP.displayName;const Mh=m.forwardRef(({className:t,...e},n)=>o.jsx(FP,{ref:n,className:U("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Mh.displayName=FP.displayName;function Xq(){const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function Yq(){const{user:t,requestCalendarPermissions:e}=st(),[n,r]=m.useState(!1),[s,i]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!t)return;const u=Ar(We(Me,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const a=async()=>{r(!0);try{await e()&&await Wt(We(Me,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await Wt(We(Me,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(f=>({...f,[u]:h}));try{await Wt(We(Me,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Pe,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(qn,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&o.jsx(jn,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),o.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?o.jsx(ce,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):o.jsx(ce,{onClick:a,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?o.jsx(zo,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&o.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[o.jsx("div",{className:"h-px w-full bg-border mb-6"}),o.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",o.jsxs("div",{className:"grid gap-3 max-w-xl",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),o.jsx(kn,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),o.jsx(kn,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(Uo,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(Pe,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(zv,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),o.jsx("div",{className:"shrink-0",children:o.jsx(Tn,{href:"/settings/notifications",children:o.jsx(ce,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function Jq(){var ne,ee,L;const{user:t,signOut:e,updateUserProfile:n}=st(),{lastSyncedAt:r,isSyncing:s,syncClassroom:i,isLoading:a,courses:l}=cn(),{isInstallable:c,isInstalled:u,promptInstall:h}=Xq(),{theme:f,setTheme:p}=rw(),[g,v]=m.useState(!0),[x,b]=m.useState("auto"),[_,w]=m.useState(!1),[N,k]=m.useState([]),[R,M]=m.useState(0),[S,C]=m.useState(0),[T,j]=m.useState(),[A,D]=m.useState("general");m.useEffect(()=>{const G=new URLSearchParams(window.location.search).get("tab");G&&["general","badges","integrations"].includes(G)&&D(G)},[]),m.useEffect(()=>{if(!t)return;const z=Ar(We(Me,"leaderboards","all-courses","students",t.uid),G=>{var $;if(G.exists()){const W=G.data();k(W.badges||[]),M(W.loginStreak||0),C((($=W.processedAssignmentIds)==null?void 0:$.length)||0)}else k([]),M(0),C(0)});return()=>z()},[t]),m.useEffect(()=>{if(!l||l.length===0)return;let z=0,G=0;l.forEach($=>{if($.attendanceData&&typeof $.attendanceData=="object"){const W=Object.values($.attendanceData);z+=W.length,G+=W.filter(J=>typeof J=="string"?J.toLowerCase()==="present":J===!0||J===1).length}}),z>0&&j({total:z,attended:G})},[l]),m.useEffect(()=>{if(!t||A!=="badges")return;(async()=>{var se,O;const G=We(Me,"leaderboards","all-courses","students",t.uid),$=await ss(G);if(!$.exists())return;const W=$.data(),J=new Set(W.badges||[]);let re=!1;const te=((se=W.processedAssignmentIds)==null?void 0:se.length)||0;if(te>=10&&!J.has("10-submissions")&&(J.add("10-submissions"),re=!0),te>=25&&!J.has("25-submissions")&&(J.add("25-submissions"),re=!0),te>=50&&!J.has("50-submissions")&&(J.add("50-submissions"),re=!0),re){await Wt(G,{badges:Array.from(J)},{merge:!0});const Y=[],ae=new Set(W.badges||[]);J.forEach(he=>{ae.has(he)||Y.push(he)});const{BADGES:X}=await Sa(async()=>{const{BADGES:he}=await Promise.resolve().then(()=>GR);return{BADGES:he}},void 0);for(const he of Y)await tw(Qi(Me,"activities"),{userId:t.uid,userName:t.displayName||"User",userAvatar:t.photoURL,type:"badge_earned",content:`${t.displayName||"User"} earned the '${((O=X[he])==null?void 0:O.label)||"New Badge"}' badge!`,courseId:"all-courses",createdAt:new Date().toISOString()})}})()},[t,A]);const P=((ne=t==null?void 0:t.displayName)==null?void 0:ne.split(" ").map(z=>z[0]).join("").toUpperCase())||((ee=t==null?void 0:t.email)==null?void 0:ee[0].toUpperCase())||"U",B=()=>r?r.toLocaleString():"Never",Q=async()=>{w(!0);try{await h()}catch(z){console.error("Install failed:",z)}finally{w(!1)}};return o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),o.jsxs(Qq,{value:A,onValueChange:D,className:"w-full",children:[o.jsxs(zP,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[o.jsx(Dh,{value:"general",children:"General"}),o.jsx(Dh,{value:"badges",children:"Badges"}),o.jsx(Dh,{value:"integrations",children:"Integrations"})]}),o.jsxs(Mh,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[o.jsxs(Pe,{children:[o.jsxs(nt,{children:[o.jsx(ft,{className:"text-base",children:"Connected Account"}),o.jsx(yn,{children:"Your Google account linked to this app"})]}),o.jsxs(Ge,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(br,{className:"h-12 w-12",children:[o.jsx(_r,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(Nr,{children:P})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(Ic,{className:"h-3.5 w-3.5"}),"Connected"]})]}),o.jsx($n,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Fn,{children:"Profile Avatar"}),o.jsx("div",{className:"flex gap-4 items-center flex-wrap",children:[{id:"google",src:((L=t==null?void 0:t.providerData[0])==null?void 0:L.photoURL)||(t==null?void 0:t.photoURL),label:"Google"},{id:"male",src:"/avatars/avatar_male.jpg",label:"Avatar 1"},{id:"female",src:"/avatars/avatar_female.jpg",label:"Avatar 2"},{id:"male_men",src:"/avatars/avatar_male_men.jpg",label:"Avatar 3"},{id:"male_women",src:"/avatars/avatar_male_women.jpg",label:"Avatar 4"}].map(z=>o.jsxs("button",{onClick:async()=>{if(z.src&&z.src!==(t==null?void 0:t.photoURL))try{await n({photoURL:z.src})}catch(G){console.error("Failed to update avatar",G)}},className:`relative group rounded-full p-1 transition-all ${(t==null?void 0:t.photoURL)===z.src?"ring-2 ring-primary ring-offset-2 bg-background":"hover:bg-muted"}`,children:[o.jsxs(br,{className:"h-12 w-12 border border-border",children:[o.jsx(_r,{src:z.src||void 0}),o.jsx(Nr,{children:"?"})]}),(t==null?void 0:t.photoURL)===z.src&&o.jsx("div",{className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full w-4 h-4 flex items-center justify-center border-2 border-background",children:o.jsx(Ic,{className:"h-2.5 w-2.5"})})]},z.id))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose an avatar to represent you across the app."})]}),o.jsx($n,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",B()]})]}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:z=>{z.preventDefault(),i().catch(G=>{console.error("Sync failed:",G)})},disabled:s,"data-testid":"button-sync-settings",children:[o.jsx(Uo,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),s?"Syncing...":"Sync Now"]})]})]})]}),o.jsxs(Pe,{children:[o.jsxs(nt,{children:[o.jsx(ft,{className:"text-base",children:"Sync Settings"}),o.jsx(yn,{children:"Configure how your data syncs with Google Classroom"})]}),o.jsxs(Ge,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Fn,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),o.jsx(kn,{id:"background-sync",checked:g,onCheckedChange:v,"data-testid":"switch-background-sync"})]}),o.jsx($n,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Fn,{className:"text-sm font-medium",children:"Clear Cache"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Clear all locally stored data. Use this if you're experiencing issues after switching accounts."})]}),o.jsxs(SS,{children:[o.jsx(ES,{asChild:!0,children:o.jsxs(ce,{variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[o.jsx(Uo,{className:"h-4 w-4 mr-2"}),"Clear Cache & Refresh"]})}),o.jsxs(Ey,{children:[o.jsxs(Ty,{children:[o.jsx(jy,{children:"Clear all cached data?"}),o.jsx(ky,{children:"This will clear all locally stored data and refresh the page. You'll need to re-sync your assignments. Your theme preference will be preserved."})]}),o.jsxs(Cy,{children:[o.jsx(Iy,{children:"Cancel"}),o.jsx(Ay,{onClick:()=>{const{clearUserData:z,handleUserSwitch:G}=require("@/lib/storage-manager");t&&(z(),G(t.uid)),window.location.reload()},className:"bg-destructive hover:bg-destructive/90",children:"Clear & Refresh"})]})]})]})]})]})]}),o.jsxs(Pe,{children:[o.jsxs(nt,{children:[o.jsx(ft,{className:"text-base",children:"Theme"}),o.jsx(yn,{children:"Choose your preferred color theme"})]}),o.jsx(Ge,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Fn,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ce,{variant:f==="light"?"default":"outline",size:"sm",onClick:()=>p("light"),className:"flex items-center gap-2",children:[o.jsx(Bv,{className:"h-4 w-4"}),"Light"]}),o.jsxs(ce,{variant:f==="dark"?"default":"outline",size:"sm",onClick:()=>p("dark"),className:"flex items-center gap-2",children:[o.jsx(mm,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),o.jsxs(Pe,{className:"border-primary/20",children:[o.jsxs(nt,{children:[o.jsxs(ft,{className:"text-base flex items-center gap-2",children:[o.jsx(J1,{className:"h-4 w-4"}),"Install App"]}),o.jsx(yn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),o.jsx(Ge,{className:"space-y-4",children:u?o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[o.jsx(Ic,{className:"h-5 w-5 text-emerald-600"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),o.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):c?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[o.jsx(XO,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),o.jsxs(ce,{onClick:Q,disabled:_,className:"w-full",size:"lg","data-testid":"button-install-app",children:[o.jsx(J1,{className:"h-4 w-4 mr-2"}),_?"Installing...":"Install App"]}),o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[o.jsx(Io,{className:"h-5 w-5 text-muted-foreground"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[o.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),o.jsxs(Pe,{children:[o.jsxs(nt,{children:[o.jsx(ft,{className:"text-base",children:"Preferences"}),o.jsx(yn,{children:"Customize your experience"})]}),o.jsx(Ge,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Fn,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),o.jsxs(Ff,{value:x,onValueChange:b,children:[o.jsx(vu,{className:"w-[180px]","data-testid":"select-timezone",children:o.jsx(zf,{})}),o.jsxs(wu,{children:[o.jsx(jt,{value:"auto",children:"Auto-detect"}),o.jsx(jt,{value:"America/New_York",children:"Eastern Time"}),o.jsx(jt,{value:"America/Chicago",children:"Central Time"}),o.jsx(jt,{value:"America/Denver",children:"Mountain Time"}),o.jsx(jt,{value:"America/Los_Angeles",children:"Pacific Time"}),o.jsx(jt,{value:"Europe/London",children:"London"}),o.jsx(jt,{value:"Europe/Paris",children:"Paris"}),o.jsx(jt,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),o.jsxs(Pe,{children:[o.jsxs(nt,{children:[o.jsxs(ft,{className:"text-base flex items-center gap-2",children:[o.jsx(lf,{className:"h-4 w-4"}),"Account Actions"]}),o.jsx(yn,{children:"Manage your session"})]}),o.jsx(Ge,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),o.jsxs(SS,{children:[o.jsx(ES,{asChild:!0,children:o.jsxs(ce,{variant:"outline",size:"sm","data-testid":"button-signout",children:[o.jsx(lf,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),o.jsxs(Ey,{children:[o.jsxs(Ty,{children:[o.jsx(jy,{children:"Are you absolutely sure?"}),o.jsx(ky,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),o.jsxs(Cy,{children:[o.jsx(Iy,{children:"Cancel"}),o.jsx(Ay,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 border-0 border-none shadow-none ring-0 focus:ring-0 outline-none",children:"Sign Out"})]})]})]})]})})]})]}),o.jsx(Mh,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsxs(Pe,{children:[o.jsxs(nt,{children:[o.jsxs(ft,{className:"text-base flex items-center gap-2",children:[o.jsx(Rx,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),o.jsx(yn,{children:"Track your progress and unlock rewards by staying consistent."})]}),o.jsx(Ge,{children:o.jsx(fq,{earnedBadges:N,currentStreak:R,submissionCount:S,attendanceStats:T})})]})}),o.jsx(Mh,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsx(Yq,{})})]})]})}function Zq(){const{user:t,requestGmailPermissions:e,accessToken:n}=st(),{toast:r}=Zi(),[s,i]=m.useState(!1),[a,l]=m.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{async function v(){if(t)try{const x=We(Me,"users",t.uid,"settings","notifications"),b=await ss(x);if(b.exists()){const _=b.data();i(_.enabled??!1),l(_.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(x){console.error("Failed to load settings from Firestore",x)}finally{f(!1)}}v()},[t]),m.useEffect(()=>{async function v(){if(!(!t||h))try{const b=We(Me,"users",t.uid,"settings","notifications");await Wt(b,{enabled:s,config:a,updatedAt:new Date().toISOString()},{merge:!0})}catch(b){console.error("Failed to save settings",b)}}const x=setTimeout(v,1e3);return()=>clearTimeout(x)},[s,a,t,h]);const p=async()=>{u(!0);try{await e()?(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."})):r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(v){console.error(v),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},g=v=>{l(x=>({...x,[v]:!x[v]}))};return o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Tn,{href:"/settings",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"rounded-full",children:o.jsx(Ou,{className:"h-5 w-5"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),o.jsxs(Pe,{className:"border-border shadow-sm",children:[o.jsxs(nt,{className:"pb-4",children:[o.jsxs(ft,{className:"flex items-center gap-2 text-lg",children:[o.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:o.jsx(zv,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),o.jsxs(yn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),o.jsx($n,{}),o.jsxs(Ge,{className:"pt-6 space-y-6",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Fn,{className:"text-base font-medium",children:"Assignment due reminder"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),o.jsx(kn,{checked:a.dueReminder,onCheckedChange:()=>g("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx($n,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Fn,{className:"text-base font-medium",children:"Missed submission alert"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),o.jsx(kn,{checked:a.missedSubmission,onCheckedChange:()=>g("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx($n,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Fn,{className:"text-base font-medium",children:"Heavy workload warning"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),o.jsx(kn,{checked:a.workloadWarning,onCheckedChange:()=>g("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),o.jsxs(pw,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[o.jsx(Ci,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:"Academic alerts are active."})]}),o.jsx(ce,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[o.jsx(Io,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),o.jsxs(ce,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&o.jsx(zo,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function eG(){const[t,e]=Pu(),{user:n,requestCalendarPermissions:r}=st(),{toast:s}=Zi(),[i,a]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!n)return;const v=Ar(We(Me,"users",n.uid,"settings","calendar"),x=>{x.exists()&&h(x.data()),a(!1)});return()=>v()},[n]);const f=async()=>{c(!0);try{await r()?(await Wt(We(Me,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(v){console.error(v),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await Wt(We(Me,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(v){console.error(v)}},g=async(v,x)=>{h(b=>({...b,[v]:x}));try{await Wt(We(Me,"users",n.uid,"settings","calendar"),{[v]:x},{merge:!0})}catch(b){console.error(b)}};return i?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx(zo,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:o.jsx(PO,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),o.jsxs("div",{className:"grid gap-6",children:[o.jsxs(Pe,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(nt,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:o.jsx(qn,{className:"h-6 w-6"})}),o.jsx(ft,{className:"text-xl",children:"Google Calendar"}),u.enabled&&o.jsx(jn,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),o.jsx(yn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?o.jsx(ce,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ce,{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?o.jsx(zo,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&o.jsxs(Ge,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx($n,{className:"mb-6"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),o.jsx(kn,{checked:u.syncAssignments,onCheckedChange:v=>g("syncAssignments",v)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),o.jsx(kn,{checked:u.syncExams,onCheckedChange:v=>g("syncExams",v)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),o.jsx(kn,{checked:u.syncPersonal,onCheckedChange:v=>g("syncPersonal",v)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[o.jsx(Uo,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(tG,{})]})]})}function tG(){const{user:t,requestGmailPermissions:e}=st(),{toast:n}=Zi(),[r,s]=m.useState(!1),[i,a]=m.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});m.useEffect(()=>{if(!t)return;const h=Ar(We(Me,"users",t.uid,"settings","notifications"),f=>{f.exists()&&a(f.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await Wt(We(Me,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await Wt(We(Me,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{a(p=>({...p,[h]:f}));try{await Wt(We(Me,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(p){console.error(p)}};return o.jsxs(Pe,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(nt,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[o.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),o.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),o.jsx(ft,{className:"text-xl",children:"Email Notifications"}),i.enabled&&o.jsx(jn,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),o.jsx(yn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?o.jsx(ce,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ce,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?o.jsx(zo,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&o.jsxs(Ge,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx($n,{className:"mb-6"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),o.jsx(kn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),o.jsx(kn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}function nG({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=Di[t],[i,a]=m.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return o.jsx(Ui,{delayDuration:0,children:o.jsxs(Ds,{open:i,onOpenChange:a,children:[o.jsx(Ms,{asChild:!0,children:o.jsxs("div",{className:U("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),a(!i)},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[s.imageSrc?o.jsx("img",{src:s.imageSrc,alt:s.label,className:U(u[e],"object-contain")}):o.jsx(l,{className:U(u[e]),strokeWidth:2.5}),r&&o.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),o.jsx(o0,{children:o.jsxs(os,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>a(!1),children:[o.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function ih({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],a=i.length;return o.jsxs("div",{className:U("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>o.jsx(nG,{badgeId:l,size:n},l)),a>0&&o.jsx(Ui,{delayDuration:0,children:o.jsxs(Ds,{children:[o.jsx(Ms,{asChild:!0,children:o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",a]})}),o.jsx(o0,{children:o.jsx(os,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),o.jsx("span",{className:"text-xs font-medium",children:((c=Di[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function rG(){var T,j,A,D,P,B;const{user:t,signOut:e}=st(),{courses:n,assignments:r,isLoading:s,error:i}=cn();if(i&&i.toLowerCase().includes("session")&&!(n.length>0||r.length>0))return o.jsx(Vl,{});const[a,l]=m.useState("class"),[c,u]=m.useState([]),[h,f]=m.useState(!1),[p,g]=m.useState(!0),[v,x]=m.useState(!0);m.useEffect(()=>{if(!t)return;f(!0);const Q=[],ne=new Map,ee=()=>{const G=[],$=t!=null&&t.email?t.email.split("@")[1]:null,W=n.map(re=>re.id),J=new Set(r.map(re=>re.id));ne.forEach(re=>{if(re.role==="teacher")return;const te=re.email||"";let se=re.emailDomain||"";!se&&te.includes("@")&&(se=te.split("@")[1]);const O=re.enrolledCourseIds||[],Y=re.processedAssignmentIds||[],ae=$&&se&&$===se,X=W.some(Ee=>O.includes(Ee)),ie=!se&&Y.some(Ee=>J.has(Ee));let ge=!1;a==="college"?ge=!!ae:ge=ae&&X||ie,ge&&G.push(re)}),G.sort((re,te)=>{if(te.totalXP!==re.totalXP)return te.totalXP-re.totalXP;const se=re.lastSubmissionTime||Number.MAX_SAFE_INTEGER,O=te.lastSubmissionTime||Number.MAX_SAFE_INTEGER;return se-O}),u(G),f(!1)},L=G=>{G.forEach($=>{const W=$.data(),J={id:$.id,displayName:W.displayName||W.name||"Anonymous",photoUrl:W.photoUrl||W.avatar||"",totalXP:W.totalXP||W.xp||0,processedAssignmentIds:W.processedAssignmentIds||W.completedTasks||[],email:W.email||"",emailDomain:W.emailDomain||(W.email?W.email.split("@")[1]:""),enrolledCourseIds:W.enrolledCourseIds||W.subjects||[],badges:W.badges||[],role:W.role,lastSubmissionTime:W.lastSubmissionTime||0},re=ne.get($.id);(!re||J.totalXP>=re.totalXP)&&ne.set($.id,J)}),ee()},z=t.email?t.email.split("@")[1]:null;if(a==="college"&&z){const G=Qi(Me,"leaderboards","all-courses","students"),$=Po(G,Z0("emailDomain","==",z),Fa("totalXP","desc"),Vc(50)),W=Ar($,L,J=>{console.warn("College query failed (likely missing index). Falling back to global list.",J);const re=Po(G,Fa("totalXP","desc"),Vc(100));Ar(re,L)});Q.push(W)}else Array.from(new Set(["all-courses",...n.map($=>$.id)])).forEach($=>{const W=Qi(Me,"leaderboards",$,"students"),J=Po(W,Fa("totalXP","desc"),Vc(50)),re=Ar(J,L);Q.push(re)});return()=>{Q.forEach(G=>G())}},[a,t,n,r]);const b=a==="class"?"My Class":"My College",_=c.find(Q=>Q.id===(t==null?void 0:t.uid));_!=null&&_.totalXP;const w=!!_,N=c.filter(Q=>Q.totalXP>0),k=c.filter(Q=>Q.totalXP===0),R=c.length>0&&N.length===0,M=[...k].sort((Q,ne)=>{const ee=L=>L?typeof L.toMillis=="function"?L.toMillis():typeof L=="number"?L:L instanceof Date?L.getTime():typeof L=="string"?new Date(L).getTime():0:0;return ee(Q.lastSyncedAt)-ee(ne.lastSyncedAt)}),S=[...N,...M],C=!1;return o.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[i&&i.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Io,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:Q=>{Q.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between p-4 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("h1",{className:"text-lg sm:text-xl font-semibold tracking-tight text-foreground",children:"Ranking"}),o.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[b," Leaderboard"]})]}),o.jsx("div",{className:"w-full sm:w-[200px]",children:o.jsxs(Ff,{value:a,onValueChange:Q=>l(Q),children:[o.jsx(vu,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:o.jsx(zf,{placeholder:"Select View"})}),o.jsxs(wu,{children:[o.jsx(jt,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),o.jsx(jt,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p&&a==="class"&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>g(!1),children:o.jsx(Li,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:o.jsx(KC,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),o.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[o.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Submit"," ",o.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),a==="college"&&v&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>x(!1),children:o.jsx(Li,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:o.jsx(Io,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),o.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[o.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",o.jsx(JC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),o.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",o.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[o.jsx(Io,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!w&&!h?o.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(zo,{className:"h-6 w-6 text-primary animate-spin"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Syncing Your Progress"}),o.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Your leaderboard data is automatically syncing. Complete some assignments to start earning XP!"})]})]})}):null,h&&c.length===0?o.jsx("div",{className:"space-y-4",children:[1,2,3].map(Q=>o.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},Q))}):c.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:o.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):R?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 flex items-start gap-3",children:[o.jsx(Fv,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Be the first to climb the leaderboard!"}),o.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Submit your first assignment to earn 100 XP and claim the #1 spot. The competition starts now!"})]})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:S.map((Q,ne)=>{var L,z;const ee=Q.id===(t==null?void 0:t.uid);return o.jsxs("div",{className:U("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",ee?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30"),children:[o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(br,{className:U("h-10 w-10 border flex-shrink-0",ee?"border-primary/20":"border-border"),children:[o.jsx(_r,{src:Q.photoUrl}),o.jsx(Nr,{className:"text-xs bg-muted text-muted-foreground",children:(z=(L=Q.displayName)==null?void 0:L[0])==null?void 0:z.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("span",{className:U("text-sm font-medium truncate",ee?"text-primary":"text-foreground"),children:[Q.displayName,ee&&o.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(You)"})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready to start"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"0 XP"})}),C]},Q.id)})})]}):o.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[S.length>0&&o.jsxs("div",{className:U("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",p?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[o.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px] group relative",children:S[1]&&S[1].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[C,o.jsxs(br,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[o.jsx(_r,{src:S[1].photoUrl}),o.jsx(Nr,{className:"text-lg bg-zinc-100 text-zinc-500",children:(j=(T=S[1].displayName)==null?void 0:T[0])==null?void 0:j.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:S[1].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[S[1].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(ih,{badges:S[1].badges||[],limit:2,size:"sm"})})]})]}):N.length===1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Submit 1 assignment to claim 2nd place!"})]}):o.jsx("div",{className:"w-full"})}),o.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10 group relative",children:[o.jsxs("div",{className:"relative",children:[C,o.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:o.jsx(LO,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),o.jsxs(br,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[o.jsx(_r,{src:S[0].photoUrl}),o.jsx(Nr,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(D=(A=S[0].displayName)==null?void 0:A[0])==null?void 0:D.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),o.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:S[0].displayName}),o.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[S[0].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:o.jsx(ih,{badges:S[0].badges||[],limit:3,size:"sm"})})]})]}),o.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px] group relative",children:S[2]&&S[2].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[C,o.jsxs(br,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[o.jsx(_r,{src:S[2].photoUrl}),o.jsx(Nr,{className:"text-lg bg-amber-50 text-amber-700",children:(B=(P=S[2].displayName)==null?void 0:P[0])==null?void 0:B.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:S[2].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[S[2].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(ih,{badges:S[2].badges||[],limit:2,size:"sm"})})]})]}):N.length>=1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Spot open for 3rd place!"})]}):o.jsx("div",{className:"w-full"})})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:S.slice(Math.min(3,N.length)).map((Q,ne)=>{var z,G;const ee=Q.id===(t==null?void 0:t.uid),L=Math.min(3,N.length)+ne+1;return o.jsxs("div",{className:U("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",ee?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[o.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:o.jsx("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:Q.totalXP>0?`#${L}`:"-"})}),o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(br,{className:U("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",ee?"border-primary/20":"border-border"),children:[o.jsx(_r,{src:Q.photoUrl}),o.jsx(Nr,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(G=(z=Q.displayName)==null?void 0:z[0])==null?void 0:G.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[o.jsxs("span",{className:U("text-xs sm:text-sm font-medium truncate",ee?"text-primary":"text-foreground"),children:[Q.displayName," ",ee&&o.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),o.jsx(ih,{badges:Q.badges||[],limit:3,size:"md",className:"scale-100"})]}),o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[Q.processedAssignmentIds.length," ",o.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),o.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[o.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:Q.totalXP.toLocaleString()}),o.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]}),C]},Q.id)})})]})]})})]})}function sG(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const TS=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function iG(){return o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8 animate-pulse",children:[o.jsx(Skeleton,{className:"h-48 w-full rounded-xl"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>o.jsx(Skeleton,{className:"h-64 rounded-xl"},t))})]})}function oG(){const{courses:t,error:e,isLoading:n}=cn();if(n)return o.jsx(iG,{});if(e&&e.toLowerCase().includes("session")&&t.length===0)return o.jsx(Vl,{});const{accessToken:r,user:s}=st();Zi();const[i,a]=m.useState(""),[l,c]=m.useState({}),[u,h]=m.useState(null);m.useState("");const f=m.useMemo(()=>sG(),[]);m.useEffect(()=>{if(!t||!s||!r)return;(async()=>{const R=await Promise.all(t.map(async S=>{const C=await tr.getCourseConfig(S.id);return C?C.isVisible?{courseId:S.id,state:"loading"}:{courseId:S.id,state:"hidden"}:{courseId:S.id,state:"no-config"}})),M={};R.forEach(S=>{M[S.courseId]=S}),c(S=>({...S,...M}));for(const S of t){const C=await tr.getCourseConfig(S.id);C&&C.isVisible&&p(S.id,C.sheetUrl)}})()},[t,s,r]),m.useEffect(()=>{t.length>0&&!i&&a(t[0].id)},[t,i]);const p=async(k,R)=>{if(!r||!(s!=null&&s.email)){console.log("Missing accessToken or user email");return}const M=tr.extractSheetId(R);if(!M){c(T=>({...T,[k]:{courseId:k,state:"error",error:"Invalid configuration"}}));return}const S=await tr.getCourseConfig(k),C=(S==null?void 0:S.emailColumn)||"A";try{const T=await tr.fetchAttendanceFromSheet(M,r,s.email,C);c(j=>({...j,[k]:{courseId:k,state:"loaded",data:T}}))}catch(T){console.error("Attendance fetch error:",T),c(j=>({...j,[k]:{courseId:k,state:"error",error:T.message||"Failed to load"}}))}},g=Object.values(l).filter(k=>k.state==="loaded"&&k.data),v=g.reduce((k,R)=>{var M;return k+(((M=R.data)==null?void 0:M.stats.attendedClasses)||0)},0),x=g.reduce((k,R)=>{var M;return k+(((M=R.data)==null?void 0:M.stats.totalClasses)||0)},0),b=TS(v,x),_=l[i],w=t.find(k=>k.id===i),N=_==null?void 0:_.data;return m.useEffect(()=>{if(!s||x<5)return;const R=setTimeout(async()=>{const M=[],S=v,C=x,T=C>0?S/C:0;if(C>=10&&T===1&&M.push("perfect-week"),C>=30&&T>=.95&&M.push("attendance-champion"),M.length>0)try{const j=We(Me,"leaderboards","all-courses","students",s.uid);await hA(j,{badges:pA(...M)})}catch(j){console.debug("Could not award attendance badges:",j)}},3e3);return()=>clearTimeout(R)},[s,x,v]),o.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[o.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:o.jsx("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[o.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),o.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),o.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",f]})]})})}),e&&e.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(Io,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached courses shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:k=>{k.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[o.jsx("section",{children:g.length>0?o.jsx(Pe,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:o.jsx(Ge,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[o.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),o.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),o.jsx(jn,{variant:b.status==="safe"?"outline":"destructive",className:U("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",b.color),children:b.status==="safe"?"Safe Status":"Attention Needed"})]}),o.jsxs("div",{className:"flex items-baseline gap-3",children:[o.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[b.percentage,"%"]}),o.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",g.length," active courses"]})]})]})})}):o.jsx(Pe,{className:"border-border shadow-sm bg-card",children:o.jsxs(Ge,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[o.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:o.jsx(lu,{className:"h-8 w-8 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2 max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),o.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",o.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[o.jsx(Cn,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[o.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(k=>{var T,j;const R=l[k.id],M=(R==null?void 0:R.state)||"loading",S=R!=null&&R.data?TS(R.data.stats.attendedClasses,R.data.stats.totalClasses):null,C=i===k.id;return o.jsx(Pe,{className:U("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",C&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>a(k.id),children:o.jsxs(Ge,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[o.jsxs("div",{className:"flex justify-between items-start gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsxs(Ds,{children:[o.jsx(Ms,{asChild:!0,children:o.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:k.name})}),o.jsx(os,{children:o.jsx("p",{children:k.name})})]}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:k.section||"No Section"})]}),M==="loaded"&&S&&o.jsxs("span",{className:U("text-lg font-bold tabular-nums",S.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[S.percentage,"%"]}),M==="hidden"&&o.jsx(Ax,{className:"h-5 w-5 text-muted-foreground/50"}),M==="locked"&&o.jsx(Ix,{className:"h-5 w-5 text-amber-500/80"}),M==="error"&&o.jsx(Io,{className:"h-5 w-5 text-destructive/80"})]}),o.jsxs("div",{className:"mt-auto",children:[M==="loaded"&&S&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[o.jsxs("span",{children:[(T=R.data)==null?void 0:T.stats.attendedClasses,"/",(j=R.data)==null?void 0:j.stats.totalClasses," classes"]}),o.jsx("span",{className:S.status==="safe"?"text-emerald-500":"text-red-500",children:S.status==="safe"?"On Track":"Low Attendance"})]}),o.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:o.jsx("div",{className:U("h-full rounded-full transition-all duration-500",S.progressColor),style:{width:`${S.percentage}%`}})})]}),M==="locked"&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),o.jsxs(ce,{size:"sm",variant:"secondary",className:"w-full",onClick:A=>{A.stopPropagation(),h(k.id)},children:[o.jsx(BO,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),M==="hidden"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),M==="no-config"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),M==="error"&&o.jsx("p",{className:"text-xs text-destructive",children:R==null?void 0:R.error}),M==="loading"&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(Uv,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},k.id)})}),o.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between px-1",children:[o.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[o.jsx(lu,{className:"h-4 w-4"})," History"]}),o.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(w==null?void 0:w.section)||(w==null?void 0:w.name.slice(0,3).toUpperCase())})]}),o.jsx(Pe,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:N?o.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:o.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:N.history.map((k,R)=>{const M=k.status==="Present",S=R===0,C=R===5;return o.jsxs("div",{className:"group",children:[S&&o.jsx("div",{className:"ml-5 mb-3 mt-1",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),C&&o.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),o.jsxs("div",{className:"relative pl-5 select-none",children:[o.jsx("div",{className:U("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",M?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),R!==N.history.length-1&&o.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),o.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[o.jsx("div",{className:U("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",M?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:k.status}),o.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:k.date})]})})]})]},R)})})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(_==null?void 0:_.state)==="locked"&&o.jsxs(o.Fragment,{children:[o.jsx(Ix,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(_==null?void 0:_.state)==="hidden"&&o.jsxs(o.Fragment,{children:[o.jsx(Ax,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((_==null?void 0:_.state)==="error"||(_==null?void 0:_.state)==="no-config")&&o.jsxs(o.Fragment,{children:[o.jsx(Cn,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}function aG(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:o.jsx(Pe,{className:"w-full max-w-md mx-4",children:o.jsxs(Ge,{className:"pt-6",children:[o.jsxs("div",{className:"flex mb-4 gap-2",children:[o.jsx(Cn,{className:"h-8 w-8 text-red-500"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),o.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function lG(){const{user:t}=st(),e=m.useRef(!1);return m.useEffect(()=>{if(!t){e.current=!1;return}if(e.current)return;e.current=!0,(async()=>{try{const r=We(Me,"leaderboards","all-courses","students",t.uid),s=await ss(r),i=v=>v.toLocaleDateString("en-CA",{timeZone:"Asia/Kolkata"}),a=i(new Date),l=new Date;l.setDate(l.getDate()-1);const c=i(l);let u=0,h=0,f=null,p=[];if(s.exists()){const v=s.data();u=v.currentStreak||0,h=v.longestStreak||0,f=v.lastLoginDate||null,p=v.badges||[]}let g=!1;if(f?f===a||(f===c?(u+=1,g=!0):(u=1,g=!0)):(u=1,g=!0),g){u>h&&(h=u);const v=new Set(p);let x=!1;if(u>=7){const b="7-day-consistent"}u>=5&&v.add("5-day-consistent"),u>=10&&v.add("10-day-consistent"),u>=30&&v.add("30-day-consistent"),await Wt(r,{currentStreak:u,longestStreak:h,lastLoginDate:a,badges:Array.from(v),lastSyncedAt:yu(),loginStreak:u},{merge:!0})}}catch(r){console.error("Failed to update streak:",r)}})()},[t]),null}const cG=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function Py({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=m.useState(10),[i,a]=m.useState(0),l=n&&n.length>0?n:cG;return m.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const f=Math.random()*15;return Math.min(h+f,90)})},400),u=setInterval(()=>{a(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),o.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?o.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),o.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),o.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),o.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),o.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:o.jsx(zo,{className:"h-7 w-7 text-primary animate-spin"})}),o.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:o.jsx(JC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Trace Is Ready"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),o.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(WC,{className:"h-3 w-3"})," Optimizing"]}),o.jsxs("span",{children:[Math.round(r),"%"]})]})]}),o.jsxs("div",{className:"relative overflow-hidden group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),o.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[o.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:o.jsx(XC,{className:"h-4 w-4 text-primary"})}),o.jsxs("div",{className:"space-y-1 pt-0.5",children:[o.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),o.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const Dy=m.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:U("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Dy.displayName="Input";const uG=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function dG({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,g;const{user:s,signOut:i}=st(),{theme:a,toggleTheme:l}=rw(),c=Xm(),u=[{id:"dashboard",label:"Dashboard",icon:WO},{id:"courses",label:"Courses",icon:hm},{id:"settings",label:"Settings",icon:YC}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(v=>v[0]).join("").toUpperCase())||((g=s==null?void 0:s.email)==null?void 0:g[0].toUpperCase())||"U",f=()=>o.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),o.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&o.jsx("button",{className:"ml-auto",onClick:r,children:o.jsx(Li,{className:"w-5 h-5 text-muted-foreground"})})]}),o.jsx("div",{className:"p-4 border-b border-border shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(br,{className:"h-8 w-8",children:[o.jsx(_r,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(Nr,{className:"text-xs",children:h})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(v=>o.jsxs("button",{onClick:()=>{e(v.id),c&&r()},className:U("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===v.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[o.jsx(v.icon,{className:"h-4 w-4"}),v.label]},v.id))}),o.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx(Bv,{className:"w-4 h-4 mr-3"}):o.jsx(mm,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(ce,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[o.jsx(lf,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:U("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:o.jsx(f,{})}),c&&n&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function hG({courses:t}){const[e,n]=m.useState(0),[r,s]=m.useState(0);return m.useEffect(()=>{(async()=>{let a=0,l=0;(await Promise.all(t.map(u=>tr.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?a++:l++)}),n(a),s(l)})()},[t]),o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs(Pe,{className:"border-border shadow-sm",children:[o.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ft,{className:"text-sm font-medium",children:"Total Courses"}),o.jsx(hm,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(Ge,{children:o.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),o.jsxs(Pe,{className:"border-border shadow-sm",children:[o.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ft,{className:"text-sm font-medium",children:"Attendance Visible"}),o.jsx(VO,{className:"h-4 w-4 text-emerald-500"})]}),o.jsx(Ge,{children:o.jsx("div",{className:"text-2xl font-bold",children:e})})]}),o.jsxs(Pe,{className:"border-border shadow-sm",children:[o.jsxs(nt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ft,{className:"text-sm font-medium",children:"Attendance Hidden"}),o.jsx(Ax,{className:"h-4 w-4 text-amber-500"})]}),o.jsx(Ge,{children:o.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function fG({courses:t,onRefresh:e,isLoading:n}){const[r,s]=m.useState(null);return o.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[o.jsx(Uv,{className:U("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),o.jsxs("div",{className:"grid gap-6",children:[t.map(i=>o.jsxs(Pe,{className:"overflow-hidden border-border shadow-sm",children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),o.jsx(ce,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&o.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:o.jsx(mG,{courseId:i.id})})]},i.id)),t.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx("p",{children:"No active courses found where you are a teacher."}),o.jsx(ce,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function mG({courseId:t}){const{toast:e}=Zi(),[n,r]=m.useState(!1),[s,i]=m.useState(""),[a,l]=m.useState("A"),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{let g=!0;return(async()=>{f(!0);const x=await tr.getCourseConfig(t);g&&x&&(r(x.isVisible),i(x.sheetUrl),l(x.emailColumn||"A")),g&&f(!1)})(),()=>{g=!1}},[t]);const p=async()=>{if(!tr.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await tr.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:a.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?o.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[o.jsx(Uv,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):o.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(jn,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),o.jsx(kn,{checked:n,onCheckedChange:r})]})]}),o.jsxs("div",{className:"grid gap-4 max-w-xl",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Fn,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),o.jsx(Dy,{id:`sheet-${t}`,value:s,onChange:g=>i(g.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Fn,{htmlFor:`email-col-${t}`,children:"Email Column"}),o.jsx(Dy,{id:`email-col-${t}`,value:a,onChange:g=>l(g.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:o.jsx(ce,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?o.jsxs(o.Fragment,{children:[o.jsx(fm,{className:"w-4 h-4 mr-2"}),"Saved"]}):o.jsxs(o.Fragment,{children:[o.jsx($v,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function pG(){return o.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),o.jsxs(Pe,{children:[o.jsxs(nt,{children:[o.jsx(ft,{children:"Notifications"}),o.jsx(yn,{children:"Configure how you receive alerts."})]}),o.jsx(Ge,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ac,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Fn,{htmlFor:"email-notif",children:"Email Summaries"})]}),o.jsx(kn,{id:"email-notif",defaultChecked:!0})]})})]}),o.jsxs(Pe,{children:[o.jsxs(nt,{children:[o.jsx(ft,{children:"Display"}),o.jsx(yn,{children:"Customize your dashboard appearance."})]}),o.jsx(Ge,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(mm,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Fn,{children:"Dark Mode"})]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function gG(){const{accessToken:t}=st(),[e,n]=m.useState("dashboard"),[r,s]=m.useState([]),[i,a]=m.useState(!0),[l,c]=m.useState(!1);async function u(){if(t)try{a(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(f){console.error("Failed to fetch courses",f)}finally{setTimeout(()=>a(!1),1500)}}m.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?o.jsx(Py,{message:"Preparing Teacher Workspace...",tips:uG}):o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(dG,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),o.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[o.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:o.jsx(QC,{className:"h-5 w-5"})}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),o.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&o.jsx(hG,{courses:r}),e==="courses"&&o.jsx(fG,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&o.jsx(pG,{})]})]})]})}function xG(){const{signOut:t,signInWithGoogle:e}=st();return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:o.jsxs(Pe,{className:"max-w-md w-full border-border shadow-lg",children:[o.jsxs(nt,{className:"text-center space-y-2",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:o.jsx(OO,{className:"w-6 h-6 text-muted-foreground"})}),o.jsx(ft,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),o.jsx(yn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),o.jsxs(Ge,{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),o.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[o.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),o.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(HC,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(hm,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(WC,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(qn,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),o.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:o.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),o.jsxs(pw,{className:"flex flex-col gap-2",children:[o.jsx(ce,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),o.jsxs(ce,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[o.jsx(lf,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function yG(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ce,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(Ou,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),o.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),o.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Courses:"})," To display your active classes."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),o.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),o.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),o.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),o.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function vG(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ce,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(Ou,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),o.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),o.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Track attendance"})," and academic performance"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),o.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),o.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),o.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),o.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),o.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),o.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),o.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),o.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),o.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),o.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),o.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),o.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),o.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),o.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),o.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"The Service will be uninterrupted or error-free"}),o.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),o.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),o.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),o.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Violates these Terms of Service"}),o.jsx("li",{children:"Is harmful to other users or the Service"}),o.jsx("li",{children:"Exposes us to legal liability"})]}),o.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),o.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),o.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),o.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function wG(){return o.jsx("div",{className:"min-h-screen bg-background text-foreground font-sans p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-5xl mx-auto space-y-12",children:[o.jsxs("header",{className:"space-y-4 border-b border-border pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ce,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-muted-foreground hover:text-foreground",onClick:()=>window.location.href="/",children:[o.jsx(Ou,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Trace Documentation"}),o.jsx("p",{className:"text-muted-foreground text-lg",children:"A comprehensive guide to mastering every feature of Trace"})]}),o.jsxs("nav",{className:"bg-muted/30 rounded-xl p-6 border",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Navigation"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[o.jsx("a",{href:"#dashboard",className:"text-sm hover:text-primary transition-colors",children:" Dashboard Overview"}),o.jsx("a",{href:"#timeline",className:"text-sm hover:text-primary transition-colors",children:" Timeline View"}),o.jsx("a",{href:"#attendance",className:"text-sm hover:text-primary transition-colors",children:" Attendance Tracking"}),o.jsx("a",{href:"#leaderboard",className:"text-sm hover:text-primary transition-colors",children:" Leaderboard System"}),o.jsx("a",{href:"#notifications",className:"text-sm hover:text-primary transition-colors",children:" Notifications"}),o.jsx("a",{href:"#notes",className:"text-sm hover:text-primary transition-colors",children:" Class Materials"}),o.jsx("a",{href:"#badges",className:"text-sm hover:text-primary transition-colors",children:" Achievements & Badges"})]})]}),o.jsxs("div",{className:"space-y-16",children:[o.jsxs("section",{id:"dashboard",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-primary/10 rounded-xl",children:o.jsx(Wv,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Dashboard"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Your command center for all activities"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"20",y:"20",width:"180",height:"160",rx:"12",fill:"currentColor",className:"text-primary/10"}),o.jsx("rect",{x:"220",y:"20",width:"180",height:"160",rx:"12",fill:"currentColor",className:"text-emerald-500/10"}),o.jsx("rect",{x:"420",y:"20",width:"180",height:"160",rx:"12",fill:"currentColor",className:"text-amber-500/10"}),o.jsx("rect",{x:"620",y:"20",width:"160",height:"160",rx:"12",fill:"currentColor",className:"text-blue-500/10"}),o.jsx("text",{x:"110",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Metrics"}),o.jsx("text",{x:"310",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Attendance"}),o.jsx("text",{x:"510",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Due Soon"}),o.jsx("text",{x:"700",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Rank"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Assignment Metrics"})," - Quick overview of upcoming deadlines (3 days, 7 days, overdue)"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Overall Attendance"})," - Aggregated attendance percentage across all courses"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Ranking"})," - See your position in the class leaderboard based on XP"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Weekly Focus Alert"})," - Highlighted banner when you have tasks due in the next 7 days"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Next Actions"})," - Smart list of assignments prioritized by urgency"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Click on any assignment card to see full details and submission links!"]})})]}),o.jsxs("section",{id:"timeline",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:o.jsx(qn,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Timeline View"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Visual calendar of all your assignments"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-56 mx-auto",viewBox:"0 0 800 240",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"50",y:"40",width:"200",height:"24",rx:"4",fill:"currentColor",className:"text-blue-500/30"}),o.jsx("rect",{x:"280",y:"80",width:"150",height:"24",rx:"4",fill:"currentColor",className:"text-emerald-500/30"}),o.jsx("rect",{x:"150",y:"120",width:"180",height:"24",rx:"4",fill:"currentColor",className:"text-amber-500/30"}),o.jsx("rect",{x:"400",y:"160",width:"220",height:"24",rx:"4",fill:"currentColor",className:"text-red-500/30"}),o.jsx("rect",{x:"100",y:"200",width:"160",height:"24",rx:"4",fill:"currentColor",className:"text-purple-500/30"}),o.jsx("line",{x1:"40",y1:"10",x2:"760",y2:"10",stroke:"currentColor",strokeWidth:"2",className:"text-border"}),o.jsx("text",{x:"400",y:"250",textAnchor:"middle",className:"text-xs fill-current text-muted-foreground",children:"Time "})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Horizontal Gantt View"})," - See all assignments laid out chronologically"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Color-Coded Courses"})," - Each course has its unique color for easy identification"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Zoom Controls"})," - Adjust timeline scale to see days, weeks, or months"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Interactive Bars"})," - Click any assignment bar to view details and open submission link"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Use the zoom in/out buttons to adjust the timeline scale for better planning!"]})})]}),o.jsxs("section",{id:"attendance",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:o.jsx(qn,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Attendance Tracking"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time attendance monitoring from Google Sheets"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"none",stroke:"currentColor",strokeWidth:"12",className:"text-border"}),o.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"none",stroke:"currentColor",strokeWidth:"12",strokeDasharray:"283 377",className:"text-emerald-500"}),o.jsx("text",{x:"100",y:"105",textAnchor:"middle",className:"text-2xl font-bold fill-current",children:"75%"}),o.jsx("rect",{x:"250",y:"40",width:"500",height:"30",rx:"4",fill:"currentColor",className:"text-muted"}),o.jsx("rect",{x:"250",y:"40",width:"375",height:"30",rx:"4",fill:"currentColor",className:"text-emerald-500/50"}),o.jsx("text",{x:"500",y:"105",textAnchor:"middle",className:"text-sm fill-current",children:"15/20 Classes Attended"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Per-Course Tracking"})," - Individual attendance percentage for each subject"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Google Sheets Integration"})," - Teachers link their Google Sheets to automatically track attendance"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Status Indicators"})," - Color-coded alerts (Safe: 75%+, Warning: 70-75%, Danger: <70%)"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Privacy"})," - Password protection option for sensitive attendance sheets"]})]})]})]})]}),o.jsxs("div",{className:"bg-amber-500/5 border border-amber-500/20 rounded-lg p-4 space-y-2",children:[o.jsx("p",{className:"text-sm font-semibold",children:" Setup Required:"}),o.jsx("p",{className:"text-sm",children:"Teachers need to configure attendance sheets in Settings. Students see data only after teacher setup."})]})]}),o.jsxs("section",{id:"leaderboard",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-amber-500/10 rounded-xl",children:o.jsx(Ra,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Leaderboard & XP System"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Compete and earn rewards for academic progress"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-56 mx-auto",viewBox:"0 0 800 240",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"320",y:"60",width:"160",height:"120",fill:"currentColor",className:"text-amber-500/20"}),o.jsx("rect",{x:"140",y:"100",width:"160",height:"80",fill:"currentColor",className:"text-slate-400/20"}),o.jsx("rect",{x:"500",y:"120",width:"160",height:"60",fill:"currentColor",className:"text-orange-600/20"}),o.jsx("text",{x:"400",y:"130",textAnchor:"middle",className:"text-3xl font-bold fill-current text-amber-500",children:"1"}),o.jsx("text",{x:"220",y:"150",textAnchor:"middle",className:"text-2xl font-bold fill-current text-slate-500",children:"2"}),o.jsx("text",{x:"580",y:"160",textAnchor:"middle",className:"text-2xl font-bold fill-current text-orange-600",children:"3"}),o.jsx("text",{x:"400",y:"220",textAnchor:"middle",className:"text-sm fill-current",children:"Based on Total XP"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"How to Earn XP:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-emerald-500",children:"+50 XP"}),o.jsxs("div",{children:["Complete an assignment ",o.jsx("strong",{children:"before deadline"})]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-blue-500",children:"+100 XP"}),o.jsx("div",{children:"Unlock achievement badges"})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-purple-500",children:"+25 XP"}),o.jsx("div",{children:"Daily streak milestone"})]})]}),o.jsx("h3",{className:"font-semibold pt-4",children:"Leaderboard Views:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Class View"})," - Compete with classmates in your courses"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"College View"})," - See rankings across your entire institution"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Maintain a daily streak by completing at least one task each day to earn bonus XP!"]})})]}),o.jsxs("section",{id:"notifications",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-red-500/10 rounded-xl",children:o.jsx(Ac,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Activity Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay updated on classmate achievements"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-background rounded-lg border",children:[o.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-full mt-1",children:o.jsx(Ra,{className:"h-4 w-4 text-emerald-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Rahul Kumar"}),' earned the "Perfect Week" badge!']}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"2 hours ago"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-background rounded-lg border",children:[o.jsx("div",{className:"p-2 bg-blue-500/10 rounded-full mt-1",children:o.jsx(JO,{className:"h-4 w-4 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Priya Sharma"})," moved up to #3 on the leaderboard!"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"5 hours ago"})]})]})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"What You'll See:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Badge Achievements"})," - When classmates unlock new badges"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Leaderboard Updates"})," - Significant rank changes"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Squad Activities"})," - New members joining, achievements"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Red dot on bell icon indicates unread notifications!"]})})]}),o.jsxs("section",{id:"notes",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl",children:o.jsx(hm,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Class Materials & Notes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Access all study resources in one place"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"50",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-blue-500/10"}),o.jsx("rect",{x:"230",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-emerald-500/10"}),o.jsx("rect",{x:"410",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-purple-500/10"}),o.jsx("rect",{x:"590",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-amber-500/10"}),o.jsx("text",{x:"125",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"PDFs"}),o.jsx("text",{x:"305",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"Links"}),o.jsx("text",{x:"485",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"Videos"}),o.jsx("text",{x:"665",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"Docs"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"All File Types"})," - View PDFs, documents, links, videos, and more"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Auto-Sync from Classroom"})," - Automatically fetches materials posted by teachers"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Organized by Course"})," - Filter materials by subject for easy access"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Search Functionality"})," - Quickly find specific materials by title or description"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Use the course filter dropdown to view materials for specific subjects!"]})})]}),o.jsxs("section",{id:"badges",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-xl",children:o.jsx(Ra,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Achievements & Badges"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Unlock rewards for consistent performance"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Streak Master"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"7 day streak"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Book Worm"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"50 completed"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Perfect Week"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"100% attendance"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Early Bird"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Submit early"})]})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Available Badges:"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Academic Excellence"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" Task Crusher (50 assignments)"}),o.jsx("li",{children:" Centurion (100 assignments)"}),o.jsx("li",{children:" Maximum Effort (200 assignments)"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Attendance"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" Perfect Week (100% weekly)"}),o.jsx("li",{children:" Attendance Champion"}),o.jsx("li",{children:" Never Miss"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Consistency"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" On Fire (3 day streak)"}),o.jsx("li",{children:" Unstoppable (7 day streak)"}),o.jsx("li",{children:" Immortal (30 day streak)"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Time Management"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" Early Bird (submit early)"}),o.jsx("li",{children:" Just in Time (last minute)"}),o.jsx("li",{children:" Time Lord (never late)"})]})]})]})]})]}),o.jsx("div",{className:"bg-amber-500/5 border border-amber-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Challenge yourself:"})," Try to collect all badges! Each one awards bonus XP."]})})]})]}),o.jsxs("section",{className:"bg-gradient-to-br from-primary/5 to-primary/10 rounded-xl p-8 border border-primary/20",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6",children:" Quick Start Guide"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Sign in with Google"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your Google Classroom account to sync courses and assignments"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Explore the Dashboard"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Check your upcoming tasks, attendance, and Ranking"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Join or Create a Squad"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Team up with friends to compete on the leaderboard"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"4"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Start Earning XP"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete assignments and unlock badges to climb the leaderboard"})]})]})]})]}),o.jsxs("section",{className:"border-t pt-8",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Need Help?"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"If you have questions or need assistance with any feature, feel free to reach out:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-primary hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]}),o.jsxs("footer",{className:"pt-8 mt-8 border-t text-sm text-muted-foreground text-center",children:[" ",new Date().getFullYear()," Trace - Your Academic Command Center"]})]})})}const bG=()=>"/";function _G(){const[t,e]=Pu();return m.useEffect(()=>{t!=="/dashboard"&&e("/dashboard")},[]),null}function NG(){const[t,e]=m.useState(!1),n=bG();return o.jsxs(oC,{base:n,children:[o.jsx(_G,{}),o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(_7,{mobileOpen:t,onMobileClose:()=>e(!1)}),o.jsx(lG,{}),o.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[o.jsx(q$,{onMobileMenuClick:()=>e(!0)}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:o.jsxs(iM,{children:[o.jsx(fr,{path:"/pipeline",component:CB}),o.jsx(fr,{path:"/",children:()=>{const[,r]=Pu();return m.useEffect(()=>{r("/dashboard")},[r]),null}}),o.jsx(fr,{path:"/leaderboard",component:rG}),o.jsx(fr,{path:"/timeline",component:aW}),o.jsx(fr,{path:"/dashboard",component:cq}),o.jsx(fr,{path:"/notes",component:uq}),o.jsx(fr,{path:"/attendance",component:oG}),o.jsx(fr,{path:"/settings",component:Jq}),o.jsx(fr,{path:"/settings/notifications",component:Zq}),o.jsx(fr,{path:"/settings/integrations",component:eG}),o.jsx(fr,{component:aG})]})})]})]})]})}function SG(){const{user:t,loading:e,authenticating:n,role:r}=st();return cn(),window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy")?o.jsx(yG,{}):window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service")?o.jsx(vG,{}):window.location.pathname==="/docs"||window.location.pathname==="/docs/"||window.location.pathname.endsWith("/docs")?o.jsx(wG,{}):n?o.jsx(Py,{message:"Signing in..."}):e?o.jsx(Py,{message:"Authenticating..."}):t?r==="teacher"?o.jsx(gG,{}):r==="no_access"?o.jsx(xG,{}):o.jsx(NG,{}):o.jsx(nB,{})}function EG(){return o.jsx(kM,{client:RM,children:o.jsx(a7,{children:o.jsx(o7,{children:o.jsx(g7,{children:o.jsxs(Ui,{children:[o.jsx(O3,{}),o.jsx(SG,{})]})})})})})}QT(document.getElementById("root")).render(o.jsx(EG,{}));
