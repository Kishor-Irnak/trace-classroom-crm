var ex=t=>{throw TypeError(t)};var Np=(t,e,n)=>e.has(t)||ex("Cannot "+n);var G=(t,e,n)=>(Np(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?ex("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,r)=>(Np(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Mt=(t,e,n)=>(Np(t,e,"access private method"),n);var Pu=(t,e,n,r)=>({set _(s){Ee(t,e,s,n)},get _(){return G(t,e,r)}});function E2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function lE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cE={exports:{}},Yh={},uE={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wc=Symbol.for("react.element"),S2=Symbol.for("react.portal"),T2=Symbol.for("react.fragment"),C2=Symbol.for("react.strict_mode"),I2=Symbol.for("react.profiler"),A2=Symbol.for("react.provider"),N2=Symbol.for("react.context"),R2=Symbol.for("react.forward_ref"),k2=Symbol.for("react.suspense"),P2=Symbol.for("react.memo"),D2=Symbol.for("react.lazy"),tx=Symbol.iterator;function j2(t){return t===null||typeof t!="object"?null:(t=tx&&t[tx]||t["@@iterator"],typeof t=="function"?t:null)}var dE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hE=Object.assign,fE={};function Wa(t,e,n){this.props=t,this.context=e,this.refs=fE,this.updater=n||dE}Wa.prototype.isReactComponent={};Wa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Wa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pE(){}pE.prototype=Wa.prototype;function Cy(t,e,n){this.props=t,this.context=e,this.refs=fE,this.updater=n||dE}var Iy=Cy.prototype=new pE;Iy.constructor=Cy;hE(Iy,Wa.prototype);Iy.isPureReactComponent=!0;var nx=Array.isArray,mE=Object.prototype.hasOwnProperty,Ay={current:null},gE={key:!0,ref:!0,__self:!0,__source:!0};function yE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)mE.call(e,r)&&!gE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Wc,type:t,key:i,ref:o,props:s,_owner:Ay.current}}function O2(t,e){return{$$typeof:Wc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ny(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wc}function M2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var rx=/\/+/g;function Rp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?M2(""+t.key):e.toString(36)}function md(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wc:case S2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Rp(o,0):r,nx(s)?(n="",t!=null&&(n=t.replace(rx,"$&/")+"/"),md(s,e,n,"",function(u){return u})):s!=null&&(Ny(s)&&(s=O2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(rx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",nx(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Rp(i,a);o+=md(i,e,n,l,s)}else if(l=j2(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Rp(i,a++),o+=md(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Du(t,e,n){if(t==null)return t;var r=[],s=0;return md(t,r,"","",function(i){return e.call(n,i,s++)}),r}function L2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},gd={transition:null},V2={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:gd,ReactCurrentOwner:Ay};function vE(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Du,forEach:function(t,e,n){Du(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Du(t,function(){e++}),e},toArray:function(t){return Du(t,function(e){return e})||[]},only:function(t){if(!Ny(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Wa;Te.Fragment=T2;Te.Profiler=I2;Te.PureComponent=Cy;Te.StrictMode=C2;Te.Suspense=k2;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V2;Te.act=vE;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=hE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ay.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)mE.call(e,l)&&!gE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Wc,type:t.type,key:s,ref:i,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:N2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:A2,_context:t},t.Consumer=t};Te.createElement=yE;Te.createFactory=function(t){var e=yE.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:R2,render:t}};Te.isValidElement=Ny;Te.lazy=function(t){return{$$typeof:D2,_payload:{_status:-1,_result:t},_init:L2}};Te.memo=function(t,e){return{$$typeof:P2,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=gd.transition;gd.transition={};try{t()}finally{gd.transition=e}};Te.unstable_act=vE;Te.useCallback=function(t,e){return tn.current.useCallback(t,e)};Te.useContext=function(t){return tn.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};Te.useEffect=function(t,e){return tn.current.useEffect(t,e)};Te.useId=function(){return tn.current.useId()};Te.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return tn.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};Te.useRef=function(t){return tn.current.useRef(t)};Te.useState=function(t){return tn.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return tn.current.useTransition()};Te.version="18.3.1";uE.exports=Te;var p=uE.exports;const Se=lE(p),wE=E2({__proto__:null,default:Se},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F2=p,U2=Symbol.for("react.element"),z2=Symbol.for("react.fragment"),$2=Object.prototype.hasOwnProperty,B2=F2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,H2={key:!0,ref:!0,__self:!0,__source:!0};function xE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)$2.call(e,r)&&!H2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:U2,type:t,key:i,ref:o,props:s,_owner:B2.current}}Yh.Fragment=z2;Yh.jsx=xE;Yh.jsxs=xE;cE.exports=Yh;var c=cE.exports,_E={exports:{}},Nn={},bE={exports:{}},EE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,M){var z=V.length;V.push(M);e:for(;0<z;){var K=z-1>>>1,W=V[K];if(0<s(W,M))V[K]=M,V[z]=W,z=K;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var M=V[0],z=V.pop();if(z!==M){V[0]=z;e:for(var K=0,W=V.length,ne=W>>>1;K<ne;){var ee=2*(K+1)-1,ue=V[ee],le=ee+1,H=V[le];if(0>s(ue,z))le<W&&0>s(H,ue)?(V[K]=H,V[le]=z,K=le):(V[K]=ue,V[ee]=z,K=ee);else if(le<W&&0>s(H,z))V[K]=H,V[le]=z,K=le;else break e}}return M}function s(V,M){var z=V.sortIndex-M.sortIndex;return z!==0?z:V.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,m=3,y=!1,b=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(V){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=V)r(u),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(u)}}function k(V){if(v=!1,S(V),!b)if(n(l)!==null)b=!0,U(O);else{var M=n(u);M!==null&&Q(k,M.startTime-V)}}function O(V,M){b=!1,v&&(v=!1,x(T),T=-1),y=!0;var z=m;try{for(S(M),f=n(l);f!==null&&(!(f.expirationTime>M)||V&&!R());){var K=f.callback;if(typeof K=="function"){f.callback=null,m=f.priorityLevel;var W=K(f.expirationTime<=M);M=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(l)&&r(l),S(M)}else r(l);f=n(l)}if(f!==null)var ne=!0;else{var ee=n(u);ee!==null&&Q(k,ee.startTime-M),ne=!1}return ne}finally{f=null,m=z,y=!1}}var D=!1,C=null,T=-1,I=5,N=-1;function R(){return!(t.unstable_now()-N<I)}function j(){if(C!==null){var V=t.unstable_now();N=V;var M=!0;try{M=C(!0,V)}finally{M?P():(D=!1,C=null)}}else D=!1}var P;if(typeof w=="function")P=function(){w(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,oe=B.port2;B.port1.onmessage=j,P=function(){oe.postMessage(null)}}else P=function(){E(j,0)};function U(V){C=V,D||(D=!0,P())}function Q(V,M){T=E(function(){V(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,U(O))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(m){case 1:case 2:case 3:var M=3;break;default:M=m}var z=m;m=M;try{return V()}finally{m=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,M){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=m;m=V;try{return M()}finally{m=z}},t.unstable_scheduleCallback=function(V,M,z){var K=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?K+z:K):z=K,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=z+W,V={id:h++,callback:M,priorityLevel:V,startTime:z,expirationTime:W,sortIndex:-1},z>K?(V.sortIndex=z,e(u,V),n(l)===null&&V===n(u)&&(v?(x(T),T=-1):v=!0,Q(k,z-K))):(V.sortIndex=W,e(l,V),b||y||(b=!0,U(O))),V},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(V){var M=m;return function(){var z=m;m=M;try{return V.apply(this,arguments)}finally{m=z}}}})(EE);bE.exports=EE;var W2=bE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q2=p,An=W2;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var SE=new Set,lc={};function xo(t,e){Ea(t,e),Ea(t+"Capture",e)}function Ea(t,e){for(lc[t]=e,t=0;t<e.length;t++)SE.add(e[t])}var os=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lm=Object.prototype.hasOwnProperty,G2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sx={},ix={};function K2(t){return Lm.call(ix,t)?!0:Lm.call(sx,t)?!1:G2.test(t)?ix[t]=!0:(sx[t]=!0,!1)}function Q2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Y2(t,e,n,r){if(e===null||typeof e>"u"||Q2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ry=/[\-:]([a-z])/g;function ky(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ry,ky);Dt[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ry,ky);Dt[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ry,ky);Dt[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Py(t,e,n,r){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Y2(e,n,s,r)&&(n=null),r||s===null?K2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gs=q2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ju=Symbol.for("react.element"),Uo=Symbol.for("react.portal"),zo=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),Vm=Symbol.for("react.profiler"),TE=Symbol.for("react.provider"),CE=Symbol.for("react.context"),jy=Symbol.for("react.forward_ref"),Fm=Symbol.for("react.suspense"),Um=Symbol.for("react.suspense_list"),Oy=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),IE=Symbol.for("react.offscreen"),ox=Symbol.iterator;function El(t){return t===null||typeof t!="object"?null:(t=ox&&t[ox]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,kp;function Dl(t){if(kp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kp=e&&e[1]||""}return`
`+kp+t}var Pp=!1;function Dp(t,e){if(!t||Pp)return"";Pp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dl(t):""}function X2(t){switch(t.tag){case 5:return Dl(t.type);case 16:return Dl("Lazy");case 13:return Dl("Suspense");case 19:return Dl("SuspenseList");case 0:case 2:case 15:return t=Dp(t.type,!1),t;case 11:return t=Dp(t.type.render,!1),t;case 1:return t=Dp(t.type,!0),t;default:return""}}function zm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zo:return"Fragment";case Uo:return"Portal";case Vm:return"Profiler";case Dy:return"StrictMode";case Fm:return"Suspense";case Um:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CE:return(t.displayName||"Context")+".Consumer";case TE:return(t._context.displayName||"Context")+".Provider";case jy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Oy:return e=t.displayName||null,e!==null?e:zm(t.type)||"Memo";case Ds:e=t._payload,t=t._init;try{return zm(t(e))}catch{}}return null}function J2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zm(e);case 8:return e===Dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ci(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Z2(t){var e=AE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ou(t){t._valueTracker||(t._valueTracker=Z2(t))}function NE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=AE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $d(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $m(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ax(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ci(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RE(t,e){e=e.checked,e!=null&&Py(t,"checked",e,!1)}function Bm(t,e){RE(t,e);var n=ci(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hm(t,e.type,ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hm(t,e,n){(e!=="number"||$d(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jl=Array.isArray;function Zo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ci(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(jl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ci(n)}}function kE(t,e){var n=ci(e.value),r=ci(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ux(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mu,DE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mu=Mu||document.createElement("div"),Mu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eD=["Webkit","ms","Moz","O"];Object.keys(zl).forEach(function(t){eD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zl[e]=zl[t]})});function jE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||zl.hasOwnProperty(t)&&zl[t]?(""+e).trim():e+"px"}function OE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var tD=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gm(t,e){if(e){if(tD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Km(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qm=null;function My(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ym=null,ea=null,ta=null;function dx(t){if(t=Kc(t)){if(typeof Ym!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=tf(e),Ym(t.stateNode,t.type,e))}}function ME(t){ea?ta?ta.push(t):ta=[t]:ea=t}function LE(){if(ea){var t=ea,e=ta;if(ta=ea=null,dx(t),e)for(t=0;t<e.length;t++)dx(e[t])}}function VE(t,e){return t(e)}function FE(){}var jp=!1;function UE(t,e,n){if(jp)return t(e,n);jp=!0;try{return VE(t,e,n)}finally{jp=!1,(ea!==null||ta!==null)&&(FE(),LE())}}function uc(t,e){var n=t.stateNode;if(n===null)return null;var r=tf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Xm=!1;if(os)try{var Sl={};Object.defineProperty(Sl,"passive",{get:function(){Xm=!0}}),window.addEventListener("test",Sl,Sl),window.removeEventListener("test",Sl,Sl)}catch{Xm=!1}function nD(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var $l=!1,Bd=null,Hd=!1,Jm=null,rD={onError:function(t){$l=!0,Bd=t}};function sD(t,e,n,r,s,i,o,a,l){$l=!1,Bd=null,nD.apply(rD,arguments)}function iD(t,e,n,r,s,i,o,a,l){if(sD.apply(this,arguments),$l){if($l){var u=Bd;$l=!1,Bd=null}else throw Error(Y(198));Hd||(Hd=!0,Jm=u)}}function _o(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hx(t){if(_o(t)!==t)throw Error(Y(188))}function oD(t){var e=t.alternate;if(!e){if(e=_o(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hx(s),t;if(i===r)return hx(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function $E(t){return t=oD(t),t!==null?BE(t):null}function BE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=BE(t);if(e!==null)return e;t=t.sibling}return null}var HE=An.unstable_scheduleCallback,fx=An.unstable_cancelCallback,aD=An.unstable_shouldYield,lD=An.unstable_requestPaint,ot=An.unstable_now,cD=An.unstable_getCurrentPriorityLevel,Ly=An.unstable_ImmediatePriority,WE=An.unstable_UserBlockingPriority,Wd=An.unstable_NormalPriority,uD=An.unstable_LowPriority,qE=An.unstable_IdlePriority,Xh=null,kr=null;function dD(t){if(kr&&typeof kr.onCommitFiberRoot=="function")try{kr.onCommitFiberRoot(Xh,t,void 0,(t.current.flags&128)===128)}catch{}}var ir=Math.clz32?Math.clz32:pD,hD=Math.log,fD=Math.LN2;function pD(t){return t>>>=0,t===0?32:31-(hD(t)/fD|0)|0}var Lu=64,Vu=4194304;function Ol(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Ol(a):(i&=o,i!==0&&(r=Ol(i)))}else o=n&~s,o!==0?r=Ol(o):i!==0&&(r=Ol(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ir(e),s=1<<n,r|=t[n],e&=~s;return r}function mD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ir(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=mD(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Zm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function GE(){var t=Lu;return Lu<<=1,!(Lu&4194240)&&(Lu=64),t}function Op(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ir(e),t[e]=n}function yD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ir(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Vy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ir(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Me=0;function KE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QE,Fy,YE,XE,JE,eg=!1,Fu=[],Qs=null,Ys=null,Xs=null,dc=new Map,hc=new Map,Ms=[],vD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function px(t,e){switch(t){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":dc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hc.delete(e.pointerId)}}function Tl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Kc(e),e!==null&&Fy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function wD(t,e,n,r,s){switch(e){case"focusin":return Qs=Tl(Qs,t,e,n,r,s),!0;case"dragenter":return Ys=Tl(Ys,t,e,n,r,s),!0;case"mouseover":return Xs=Tl(Xs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return dc.set(i,Tl(dc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,hc.set(i,Tl(hc.get(i)||null,t,e,n,r,s)),!0}return!1}function ZE(t){var e=Hi(t.target);if(e!==null){var n=_o(e);if(n!==null){if(e=n.tag,e===13){if(e=zE(n),e!==null){t.blockedOn=e,JE(t.priority,function(){YE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qm=r,n.target.dispatchEvent(r),Qm=null}else return e=Kc(n),e!==null&&Fy(e),t.blockedOn=n,!1;e.shift()}return!0}function mx(t,e,n){yd(t)&&n.delete(e)}function xD(){eg=!1,Qs!==null&&yd(Qs)&&(Qs=null),Ys!==null&&yd(Ys)&&(Ys=null),Xs!==null&&yd(Xs)&&(Xs=null),dc.forEach(mx),hc.forEach(mx)}function Cl(t,e){t.blockedOn===e&&(t.blockedOn=null,eg||(eg=!0,An.unstable_scheduleCallback(An.unstable_NormalPriority,xD)))}function fc(t){function e(s){return Cl(s,t)}if(0<Fu.length){Cl(Fu[0],t);for(var n=1;n<Fu.length;n++){var r=Fu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qs!==null&&Cl(Qs,t),Ys!==null&&Cl(Ys,t),Xs!==null&&Cl(Xs,t),dc.forEach(e),hc.forEach(e),n=0;n<Ms.length;n++)r=Ms[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ms.length&&(n=Ms[0],n.blockedOn===null);)ZE(n),n.blockedOn===null&&Ms.shift()}var na=gs.ReactCurrentBatchConfig,Gd=!0;function _D(t,e,n,r){var s=Me,i=na.transition;na.transition=null;try{Me=1,Uy(t,e,n,r)}finally{Me=s,na.transition=i}}function bD(t,e,n,r){var s=Me,i=na.transition;na.transition=null;try{Me=4,Uy(t,e,n,r)}finally{Me=s,na.transition=i}}function Uy(t,e,n,r){if(Gd){var s=tg(t,e,n,r);if(s===null)Wp(t,e,r,Kd,n),px(t,r);else if(wD(s,t,e,n,r))r.stopPropagation();else if(px(t,r),e&4&&-1<vD.indexOf(t)){for(;s!==null;){var i=Kc(s);if(i!==null&&QE(i),i=tg(t,e,n,r),i===null&&Wp(t,e,r,Kd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wp(t,e,r,null,n)}}var Kd=null;function tg(t,e,n,r){if(Kd=null,t=My(r),t=Hi(t),t!==null)if(e=_o(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kd=t,null}function eS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cD()){case Ly:return 1;case WE:return 4;case Wd:case uD:return 16;case qE:return 536870912;default:return 16}default:return 16}}var qs=null,zy=null,vd=null;function tS(){if(vd)return vd;var t,e=zy,n=e.length,r,s="value"in qs?qs.value:qs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return vd=s.slice(t,1<r?1-r:void 0)}function wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uu(){return!0}function gx(){return!1}function Rn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Uu:gx,this.isPropagationStopped=gx,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uu)},persist:function(){},isPersistent:Uu}),e}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$y=Rn(qa),Gc=Je({},qa,{view:0,detail:0}),ED=Rn(Gc),Mp,Lp,Il,Jh=Je({},Gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:By,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Il&&(Il&&t.type==="mousemove"?(Mp=t.screenX-Il.screenX,Lp=t.screenY-Il.screenY):Lp=Mp=0,Il=t),Mp)},movementY:function(t){return"movementY"in t?t.movementY:Lp}}),yx=Rn(Jh),SD=Je({},Jh,{dataTransfer:0}),TD=Rn(SD),CD=Je({},Gc,{relatedTarget:0}),Vp=Rn(CD),ID=Je({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),AD=Rn(ID),ND=Je({},qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RD=Rn(ND),kD=Je({},qa,{data:0}),vx=Rn(kD),PD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jD[t])?!!e[t]:!1}function By(){return OD}var MD=Je({},Gc,{key:function(t){if(t.key){var e=PD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:By,charCode:function(t){return t.type==="keypress"?wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LD=Rn(MD),VD=Je({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wx=Rn(VD),FD=Je({},Gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:By}),UD=Rn(FD),zD=Je({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),$D=Rn(zD),BD=Je({},Jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HD=Rn(BD),WD=[9,13,27,32],Hy=os&&"CompositionEvent"in window,Bl=null;os&&"documentMode"in document&&(Bl=document.documentMode);var qD=os&&"TextEvent"in window&&!Bl,nS=os&&(!Hy||Bl&&8<Bl&&11>=Bl),xx=" ",_x=!1;function rS(t,e){switch(t){case"keyup":return WD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $o=!1;function GD(t,e){switch(t){case"compositionend":return sS(e);case"keypress":return e.which!==32?null:(_x=!0,xx);case"textInput":return t=e.data,t===xx&&_x?null:t;default:return null}}function KD(t,e){if($o)return t==="compositionend"||!Hy&&rS(t,e)?(t=tS(),vd=zy=qs=null,$o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return nS&&e.locale!=="ko"?null:e.data;default:return null}}var QD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!QD[t.type]:e==="textarea"}function iS(t,e,n,r){ME(r),e=Qd(e,"onChange"),0<e.length&&(n=new $y("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Hl=null,pc=null;function YD(t){gS(t,0)}function Zh(t){var e=Wo(t);if(NE(e))return t}function XD(t,e){if(t==="change")return e}var oS=!1;if(os){var Fp;if(os){var Up="oninput"in document;if(!Up){var Ex=document.createElement("div");Ex.setAttribute("oninput","return;"),Up=typeof Ex.oninput=="function"}Fp=Up}else Fp=!1;oS=Fp&&(!document.documentMode||9<document.documentMode)}function Sx(){Hl&&(Hl.detachEvent("onpropertychange",aS),pc=Hl=null)}function aS(t){if(t.propertyName==="value"&&Zh(pc)){var e=[];iS(e,pc,t,My(t)),UE(YD,e)}}function JD(t,e,n){t==="focusin"?(Sx(),Hl=e,pc=n,Hl.attachEvent("onpropertychange",aS)):t==="focusout"&&Sx()}function ZD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zh(pc)}function ej(t,e){if(t==="click")return Zh(e)}function tj(t,e){if(t==="input"||t==="change")return Zh(e)}function nj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ur=typeof Object.is=="function"?Object.is:nj;function mc(t,e){if(ur(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lm.call(e,s)||!ur(t[s],e[s]))return!1}return!0}function Tx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cx(t,e){var n=Tx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tx(n)}}function lS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?lS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cS(){for(var t=window,e=$d();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$d(t.document)}return e}function Wy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function rj(t){var e=cS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&lS(n.ownerDocument.documentElement,n)){if(r!==null&&Wy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Cx(n,i);var o=Cx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sj=os&&"documentMode"in document&&11>=document.documentMode,Bo=null,ng=null,Wl=null,rg=!1;function Ix(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rg||Bo==null||Bo!==$d(r)||(r=Bo,"selectionStart"in r&&Wy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Wl&&mc(Wl,r)||(Wl=r,r=Qd(ng,"onSelect"),0<r.length&&(e=new $y("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bo)))}function zu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ho={animationend:zu("Animation","AnimationEnd"),animationiteration:zu("Animation","AnimationIteration"),animationstart:zu("Animation","AnimationStart"),transitionend:zu("Transition","TransitionEnd")},zp={},uS={};os&&(uS=document.createElement("div").style,"AnimationEvent"in window||(delete Ho.animationend.animation,delete Ho.animationiteration.animation,delete Ho.animationstart.animation),"TransitionEvent"in window||delete Ho.transitionend.transition);function ef(t){if(zp[t])return zp[t];if(!Ho[t])return t;var e=Ho[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in uS)return zp[t]=e[n];return t}var dS=ef("animationend"),hS=ef("animationiteration"),fS=ef("animationstart"),pS=ef("transitionend"),mS=new Map,Ax="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(t,e){mS.set(t,e),xo(e,[t])}for(var $p=0;$p<Ax.length;$p++){var Bp=Ax[$p],ij=Bp.toLowerCase(),oj=Bp[0].toUpperCase()+Bp.slice(1);Si(ij,"on"+oj)}Si(dS,"onAnimationEnd");Si(hS,"onAnimationIteration");Si(fS,"onAnimationStart");Si("dblclick","onDoubleClick");Si("focusin","onFocus");Si("focusout","onBlur");Si(pS,"onTransitionEnd");Ea("onMouseEnter",["mouseout","mouseover"]);Ea("onMouseLeave",["mouseout","mouseover"]);Ea("onPointerEnter",["pointerout","pointerover"]);Ea("onPointerLeave",["pointerout","pointerover"]);xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ml));function Nx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iD(r,e,void 0,t),t.currentTarget=null}function gS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Nx(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Nx(s,a,u),i=l}}}if(Hd)throw t=Jm,Hd=!1,Jm=null,t}function qe(t,e){var n=e[lg];n===void 0&&(n=e[lg]=new Set);var r=t+"__bubble";n.has(r)||(yS(e,t,2,!1),n.add(r))}function Hp(t,e,n){var r=0;e&&(r|=4),yS(n,t,r,e)}var $u="_reactListening"+Math.random().toString(36).slice(2);function gc(t){if(!t[$u]){t[$u]=!0,SE.forEach(function(n){n!=="selectionchange"&&(aj.has(n)||Hp(n,!1,t),Hp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$u]||(e[$u]=!0,Hp("selectionchange",!1,e))}}function yS(t,e,n,r){switch(eS(e)){case 1:var s=_D;break;case 4:s=bD;break;default:s=Uy}n=s.bind(null,e,n,t),s=void 0,!Xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Hi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}UE(function(){var u=i,h=My(n),f=[];e:{var m=mS.get(t);if(m!==void 0){var y=$y,b=t;switch(t){case"keypress":if(wd(n)===0)break e;case"keydown":case"keyup":y=LD;break;case"focusin":b="focus",y=Vp;break;case"focusout":b="blur",y=Vp;break;case"beforeblur":case"afterblur":y=Vp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=yx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=TD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=UD;break;case dS:case hS:case fS:y=AD;break;case pS:y=$D;break;case"scroll":y=ED;break;case"wheel":y=HD;break;case"copy":case"cut":case"paste":y=RD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=wx}var v=(e&4)!==0,E=!v&&t==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var w=u,S;w!==null;){S=w;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,x!==null&&(k=uc(w,x),k!=null&&v.push(yc(w,k,S)))),E)break;w=w.return}0<v.length&&(m=new y(m,b,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Qm&&(b=n.relatedTarget||n.fromElement)&&(Hi(b)||b[as]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=u,b=b?Hi(b):null,b!==null&&(E=_o(b),b!==E||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=u),y!==b)){if(v=yx,k="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=wx,k="onPointerLeave",x="onPointerEnter",w="pointer"),E=y==null?m:Wo(y),S=b==null?m:Wo(b),m=new v(k,w+"leave",y,n,h),m.target=E,m.relatedTarget=S,k=null,Hi(h)===u&&(v=new v(x,w+"enter",b,n,h),v.target=S,v.relatedTarget=E,k=v),E=k,y&&b)t:{for(v=y,x=b,w=0,S=v;S;S=ko(S))w++;for(S=0,k=x;k;k=ko(k))S++;for(;0<w-S;)v=ko(v),w--;for(;0<S-w;)x=ko(x),S--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=ko(v),x=ko(x)}v=null}else v=null;y!==null&&Rx(f,m,y,v,!1),b!==null&&E!==null&&Rx(f,E,b,v,!0)}}e:{if(m=u?Wo(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var O=XD;else if(bx(m))if(oS)O=tj;else{O=ZD;var D=JD}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(O=ej);if(O&&(O=O(t,u))){iS(f,O,n,h);break e}D&&D(t,m,u),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&Hm(m,"number",m.value)}switch(D=u?Wo(u):window,t){case"focusin":(bx(D)||D.contentEditable==="true")&&(Bo=D,ng=u,Wl=null);break;case"focusout":Wl=ng=Bo=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,Ix(f,n,h);break;case"selectionchange":if(sj)break;case"keydown":case"keyup":Ix(f,n,h)}var C;if(Hy)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else $o?rS(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(nS&&n.locale!=="ko"&&($o||T!=="onCompositionStart"?T==="onCompositionEnd"&&$o&&(C=tS()):(qs=h,zy="value"in qs?qs.value:qs.textContent,$o=!0)),D=Qd(u,T),0<D.length&&(T=new vx(T,t,null,n,h),f.push({event:T,listeners:D}),C?T.data=C:(C=sS(n),C!==null&&(T.data=C)))),(C=qD?GD(t,n):KD(t,n))&&(u=Qd(u,"onBeforeInput"),0<u.length&&(h=new vx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=C))}gS(f,e)})}function yc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=uc(t,n),i!=null&&r.unshift(yc(t,i,s)),i=uc(t,e),i!=null&&r.push(yc(t,i,s))),t=t.return}return r}function ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Rx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=uc(n,i),l!=null&&o.unshift(yc(n,l,a))):s||(l=uc(n,i),l!=null&&o.push(yc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var lj=/\r\n?/g,cj=/\u0000|\uFFFD/g;function kx(t){return(typeof t=="string"?t:""+t).replace(lj,`
`).replace(cj,"")}function Bu(t,e,n){if(e=kx(e),kx(t)!==e&&n)throw Error(Y(425))}function Yd(){}var sg=null,ig=null;function og(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ag=typeof setTimeout=="function"?setTimeout:void 0,uj=typeof clearTimeout=="function"?clearTimeout:void 0,Px=typeof Promise=="function"?Promise:void 0,dj=typeof queueMicrotask=="function"?queueMicrotask:typeof Px<"u"?function(t){return Px.resolve(null).then(t).catch(hj)}:ag;function hj(t){setTimeout(function(){throw t})}function qp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),fc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);fc(e)}function Js(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ga=Math.random().toString(36).slice(2),Nr="__reactFiber$"+Ga,vc="__reactProps$"+Ga,as="__reactContainer$"+Ga,lg="__reactEvents$"+Ga,fj="__reactListeners$"+Ga,pj="__reactHandles$"+Ga;function Hi(t){var e=t[Nr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[as]||n[Nr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dx(t);t!==null;){if(n=t[Nr])return n;t=Dx(t)}return e}t=n,n=t.parentNode}return null}function Kc(t){return t=t[Nr]||t[as],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function tf(t){return t[vc]||null}var cg=[],qo=-1;function Ti(t){return{current:t}}function Ge(t){0>qo||(t.current=cg[qo],cg[qo]=null,qo--)}function $e(t,e){qo++,cg[qo]=t.current,t.current=e}var ui={},Wt=Ti(ui),fn=Ti(!1),so=ui;function Sa(t,e){var n=t.type.contextTypes;if(!n)return ui;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function pn(t){return t=t.childContextTypes,t!=null}function Xd(){Ge(fn),Ge(Wt)}function jx(t,e,n){if(Wt.current!==ui)throw Error(Y(168));$e(Wt,e),$e(fn,n)}function vS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,J2(t)||"Unknown",s));return Je({},n,r)}function Jd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ui,so=Wt.current,$e(Wt,t),$e(fn,fn.current),!0}function Ox(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=vS(t,e,so),r.__reactInternalMemoizedMergedChildContext=t,Ge(fn),Ge(Wt),$e(Wt,t)):Ge(fn),$e(fn,n)}var Qr=null,nf=!1,Gp=!1;function wS(t){Qr===null?Qr=[t]:Qr.push(t)}function mj(t){nf=!0,wS(t)}function Ci(){if(!Gp&&Qr!==null){Gp=!0;var t=0,e=Me;try{var n=Qr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qr=null,nf=!1}catch(s){throw Qr!==null&&(Qr=Qr.slice(t+1)),HE(Ly,Ci),s}finally{Me=e,Gp=!1}}return null}var Go=[],Ko=0,Zd=null,eh=0,On=[],Mn=0,io=null,Yr=1,Xr="";function zi(t,e){Go[Ko++]=eh,Go[Ko++]=Zd,Zd=t,eh=e}function xS(t,e,n){On[Mn++]=Yr,On[Mn++]=Xr,On[Mn++]=io,io=t;var r=Yr;t=Xr;var s=32-ir(r)-1;r&=~(1<<s),n+=1;var i=32-ir(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Yr=1<<32-ir(e)+s|n<<s|r,Xr=i+t}else Yr=1<<i|n<<s|r,Xr=t}function qy(t){t.return!==null&&(zi(t,1),xS(t,1,0))}function Gy(t){for(;t===Zd;)Zd=Go[--Ko],Go[Ko]=null,eh=Go[--Ko],Go[Ko]=null;for(;t===io;)io=On[--Mn],On[Mn]=null,Xr=On[--Mn],On[Mn]=null,Yr=On[--Mn],On[Mn]=null}var Cn=null,Tn=null,Qe=!1,er=null;function _S(t,e){var n=Vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cn=t,Tn=Js(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cn=t,Tn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=io!==null?{id:Yr,overflow:Xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Cn=t,Tn=null,!0):!1;default:return!1}}function ug(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dg(t){if(Qe){var e=Tn;if(e){var n=e;if(!Mx(t,e)){if(ug(t))throw Error(Y(418));e=Js(n.nextSibling);var r=Cn;e&&Mx(t,e)?_S(r,n):(t.flags=t.flags&-4097|2,Qe=!1,Cn=t)}}else{if(ug(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Qe=!1,Cn=t}}}function Lx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cn=t}function Hu(t){if(t!==Cn)return!1;if(!Qe)return Lx(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!og(t.type,t.memoizedProps)),e&&(e=Tn)){if(ug(t))throw bS(),Error(Y(418));for(;e;)_S(t,e),e=Js(e.nextSibling)}if(Lx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tn=Js(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tn=null}}else Tn=Cn?Js(t.stateNode.nextSibling):null;return!0}function bS(){for(var t=Tn;t;)t=Js(t.nextSibling)}function Ta(){Tn=Cn=null,Qe=!1}function Ky(t){er===null?er=[t]:er.push(t)}var gj=gs.ReactCurrentBatchConfig;function Al(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Wu(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vx(t){var e=t._init;return e(t._payload)}function ES(t){function e(x,w){if(t){var S=x.deletions;S===null?(x.deletions=[w],x.flags|=16):S.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=ni(x,w),x.index=0,x.sibling=null,x}function i(x,w,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<w?(x.flags|=2,w):S):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,w,S,k){return w===null||w.tag!==6?(w=em(S,x.mode,k),w.return=x,w):(w=s(w,S),w.return=x,w)}function l(x,w,S,k){var O=S.type;return O===zo?h(x,w,S.props.children,k,S.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ds&&Vx(O)===w.type)?(k=s(w,S.props),k.ref=Al(x,w,S),k.return=x,k):(k=Cd(S.type,S.key,S.props,null,x.mode,k),k.ref=Al(x,w,S),k.return=x,k)}function u(x,w,S,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=tm(S,x.mode,k),w.return=x,w):(w=s(w,S.children||[]),w.return=x,w)}function h(x,w,S,k,O){return w===null||w.tag!==7?(w=eo(S,x.mode,k,O),w.return=x,w):(w=s(w,S),w.return=x,w)}function f(x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=em(""+w,x.mode,S),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ju:return S=Cd(w.type,w.key,w.props,null,x.mode,S),S.ref=Al(x,null,w),S.return=x,S;case Uo:return w=tm(w,x.mode,S),w.return=x,w;case Ds:var k=w._init;return f(x,k(w._payload),S)}if(jl(w)||El(w))return w=eo(w,x.mode,S,null),w.return=x,w;Wu(x,w)}return null}function m(x,w,S,k){var O=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return O!==null?null:a(x,w,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ju:return S.key===O?l(x,w,S,k):null;case Uo:return S.key===O?u(x,w,S,k):null;case Ds:return O=S._init,m(x,w,O(S._payload),k)}if(jl(S)||El(S))return O!==null?null:h(x,w,S,k,null);Wu(x,S)}return null}function y(x,w,S,k,O){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(S)||null,a(w,x,""+k,O);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ju:return x=x.get(k.key===null?S:k.key)||null,l(w,x,k,O);case Uo:return x=x.get(k.key===null?S:k.key)||null,u(w,x,k,O);case Ds:var D=k._init;return y(x,w,S,D(k._payload),O)}if(jl(k)||El(k))return x=x.get(S)||null,h(w,x,k,O,null);Wu(w,k)}return null}function b(x,w,S,k){for(var O=null,D=null,C=w,T=w=0,I=null;C!==null&&T<S.length;T++){C.index>T?(I=C,C=null):I=C.sibling;var N=m(x,C,S[T],k);if(N===null){C===null&&(C=I);break}t&&C&&N.alternate===null&&e(x,C),w=i(N,w,T),D===null?O=N:D.sibling=N,D=N,C=I}if(T===S.length)return n(x,C),Qe&&zi(x,T),O;if(C===null){for(;T<S.length;T++)C=f(x,S[T],k),C!==null&&(w=i(C,w,T),D===null?O=C:D.sibling=C,D=C);return Qe&&zi(x,T),O}for(C=r(x,C);T<S.length;T++)I=y(C,x,T,S[T],k),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?T:I.key),w=i(I,w,T),D===null?O=I:D.sibling=I,D=I);return t&&C.forEach(function(R){return e(x,R)}),Qe&&zi(x,T),O}function v(x,w,S,k){var O=El(S);if(typeof O!="function")throw Error(Y(150));if(S=O.call(S),S==null)throw Error(Y(151));for(var D=O=null,C=w,T=w=0,I=null,N=S.next();C!==null&&!N.done;T++,N=S.next()){C.index>T?(I=C,C=null):I=C.sibling;var R=m(x,C,N.value,k);if(R===null){C===null&&(C=I);break}t&&C&&R.alternate===null&&e(x,C),w=i(R,w,T),D===null?O=R:D.sibling=R,D=R,C=I}if(N.done)return n(x,C),Qe&&zi(x,T),O;if(C===null){for(;!N.done;T++,N=S.next())N=f(x,N.value,k),N!==null&&(w=i(N,w,T),D===null?O=N:D.sibling=N,D=N);return Qe&&zi(x,T),O}for(C=r(x,C);!N.done;T++,N=S.next())N=y(C,x,T,N.value,k),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?T:N.key),w=i(N,w,T),D===null?O=N:D.sibling=N,D=N);return t&&C.forEach(function(j){return e(x,j)}),Qe&&zi(x,T),O}function E(x,w,S,k){if(typeof S=="object"&&S!==null&&S.type===zo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ju:e:{for(var O=S.key,D=w;D!==null;){if(D.key===O){if(O=S.type,O===zo){if(D.tag===7){n(x,D.sibling),w=s(D,S.props.children),w.return=x,x=w;break e}}else if(D.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ds&&Vx(O)===D.type){n(x,D.sibling),w=s(D,S.props),w.ref=Al(x,D,S),w.return=x,x=w;break e}n(x,D);break}else e(x,D);D=D.sibling}S.type===zo?(w=eo(S.props.children,x.mode,k,S.key),w.return=x,x=w):(k=Cd(S.type,S.key,S.props,null,x.mode,k),k.ref=Al(x,w,S),k.return=x,x=k)}return o(x);case Uo:e:{for(D=S.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(x,w.sibling),w=s(w,S.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=tm(S,x.mode,k),w.return=x,x=w}return o(x);case Ds:return D=S._init,E(x,w,D(S._payload),k)}if(jl(S))return b(x,w,S,k);if(El(S))return v(x,w,S,k);Wu(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(x,w.sibling),w=s(w,S),w.return=x,x=w):(n(x,w),w=em(S,x.mode,k),w.return=x,x=w),o(x)):n(x,w)}return E}var Ca=ES(!0),SS=ES(!1),th=Ti(null),nh=null,Qo=null,Qy=null;function Yy(){Qy=Qo=nh=null}function Xy(t){var e=th.current;Ge(th),t._currentValue=e}function hg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ra(t,e){nh=t,Qy=Qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hn=!0),t.firstContext=null)}function $n(t){var e=t._currentValue;if(Qy!==t)if(t={context:t,memoizedValue:e,next:null},Qo===null){if(nh===null)throw Error(Y(308));Qo=t,nh.dependencies={lanes:0,firstContext:t}}else Qo=Qo.next=t;return e}var Wi=null;function Jy(t){Wi===null?Wi=[t]:Wi.push(t)}function TS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jy(e)):(n.next=s.next,s.next=n),e.interleaved=n,ls(t,r)}function ls(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var js=!1;function Zy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function es(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ls(t,n)}return s=r.interleaved,s===null?(e.next=e,Jy(r)):(e.next=s.next,s.next=e),r.interleaved=e,ls(t,n)}function xd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vy(t,n)}}function Fx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function rh(t,e,n,r){var s=t.updateQueue;js=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=u=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,v=a;switch(m=e,y=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){f=b.call(y,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,m=typeof b=="function"?b.call(y,f,m):b,m==null)break e;f=Je({},f,m);break e;case 2:js=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ao|=o,t.lanes=o,t.memoizedState=f}}function Ux(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Qc={},Pr=Ti(Qc),wc=Ti(Qc),xc=Ti(Qc);function qi(t){if(t===Qc)throw Error(Y(174));return t}function ev(t,e){switch($e(xc,e),$e(wc,t),$e(Pr,Qc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qm(e,t)}Ge(Pr),$e(Pr,e)}function Ia(){Ge(Pr),Ge(wc),Ge(xc)}function IS(t){qi(xc.current);var e=qi(Pr.current),n=qm(e,t.type);e!==n&&($e(wc,t),$e(Pr,n))}function tv(t){wc.current===t&&(Ge(Pr),Ge(wc))}var Ye=Ti(0);function sh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kp=[];function nv(){for(var t=0;t<Kp.length;t++)Kp[t]._workInProgressVersionPrimary=null;Kp.length=0}var _d=gs.ReactCurrentDispatcher,Qp=gs.ReactCurrentBatchConfig,oo=0,Xe=null,mt=null,St=null,ih=!1,ql=!1,_c=0,yj=0;function Lt(){throw Error(Y(321))}function rv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ur(t[n],e[n]))return!1;return!0}function sv(t,e,n,r,s,i){if(oo=i,Xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_d.current=t===null||t.memoizedState===null?_j:bj,t=n(r,s),ql){i=0;do{if(ql=!1,_c=0,25<=i)throw Error(Y(301));i+=1,St=mt=null,e.updateQueue=null,_d.current=Ej,t=n(r,s)}while(ql)}if(_d.current=oh,e=mt!==null&&mt.next!==null,oo=0,St=mt=Xe=null,ih=!1,e)throw Error(Y(300));return t}function iv(){var t=_c!==0;return _c=0,t}function Er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Xe.memoizedState=St=t:St=St.next=t,St}function Bn(){if(mt===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=St===null?Xe.memoizedState:St.next;if(e!==null)St=e,mt=t;else{if(t===null)throw Error(Y(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},St===null?Xe.memoizedState=St=t:St=St.next=t}return St}function bc(t,e){return typeof e=="function"?e(t):e}function Yp(t){var e=Bn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=mt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if((oo&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Xe.lanes|=h,ao|=h}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,ur(r,e.memoizedState)||(hn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Xe.lanes|=i,ao|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xp(t){var e=Bn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ur(i,e.memoizedState)||(hn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function AS(){}function NS(t,e){var n=Xe,r=Bn(),s=e(),i=!ur(r.memoizedState,s);if(i&&(r.memoizedState=s,hn=!0),r=r.queue,ov(PS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,Ec(9,kS.bind(null,n,r,s,e),void 0,null),It===null)throw Error(Y(349));oo&30||RS(n,e,s)}return s}function RS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kS(t,e,n,r){e.value=n,e.getSnapshot=r,DS(e)&&jS(t)}function PS(t,e,n){return n(function(){DS(e)&&jS(t)})}function DS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ur(t,n)}catch{return!0}}function jS(t){var e=ls(t,1);e!==null&&or(e,t,1,-1)}function zx(t){var e=Er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bc,lastRenderedState:t},e.queue=t,t=t.dispatch=xj.bind(null,Xe,t),[e.memoizedState,t]}function Ec(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xe.updateQueue,e===null?(e={lastEffect:null,stores:null},Xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function OS(){return Bn().memoizedState}function bd(t,e,n,r){var s=Er();Xe.flags|=t,s.memoizedState=Ec(1|e,n,void 0,r===void 0?null:r)}function rf(t,e,n,r){var s=Bn();r=r===void 0?null:r;var i=void 0;if(mt!==null){var o=mt.memoizedState;if(i=o.destroy,r!==null&&rv(r,o.deps)){s.memoizedState=Ec(e,n,i,r);return}}Xe.flags|=t,s.memoizedState=Ec(1|e,n,i,r)}function $x(t,e){return bd(8390656,8,t,e)}function ov(t,e){return rf(2048,8,t,e)}function MS(t,e){return rf(4,2,t,e)}function LS(t,e){return rf(4,4,t,e)}function VS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function FS(t,e,n){return n=n!=null?n.concat([t]):null,rf(4,4,VS.bind(null,e,t),n)}function av(){}function US(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zS(t,e){var n=Bn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $S(t,e,n){return oo&21?(ur(n,e)||(n=GE(),Xe.lanes|=n,ao|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hn=!0),t.memoizedState=n)}function vj(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=Qp.transition;Qp.transition={};try{t(!1),e()}finally{Me=n,Qp.transition=r}}function BS(){return Bn().memoizedState}function wj(t,e,n){var r=ti(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},HS(t))WS(e,n);else if(n=TS(t,e,n,r),n!==null){var s=Jt();or(n,t,r,s),qS(n,e,r)}}function xj(t,e,n){var r=ti(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(HS(t))WS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ur(a,o)){var l=e.interleaved;l===null?(s.next=s,Jy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=TS(t,e,s,r),n!==null&&(s=Jt(),or(n,t,r,s),qS(n,e,r))}}function HS(t){var e=t.alternate;return t===Xe||e!==null&&e===Xe}function WS(t,e){ql=ih=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function qS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vy(t,n)}}var oh={readContext:$n,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},_j={readContext:$n,useCallback:function(t,e){return Er().memoizedState=[t,e===void 0?null:e],t},useContext:$n,useEffect:$x,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,bd(4194308,4,VS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return bd(4194308,4,t,e)},useInsertionEffect:function(t,e){return bd(4,2,t,e)},useMemo:function(t,e){var n=Er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=wj.bind(null,Xe,t),[r.memoizedState,t]},useRef:function(t){var e=Er();return t={current:t},e.memoizedState=t},useState:zx,useDebugValue:av,useDeferredValue:function(t){return Er().memoizedState=t},useTransition:function(){var t=zx(!1),e=t[0];return t=vj.bind(null,t[1]),Er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xe,s=Er();if(Qe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),It===null)throw Error(Y(349));oo&30||RS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,$x(PS.bind(null,r,i,t),[t]),r.flags|=2048,Ec(9,kS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Er(),e=It.identifierPrefix;if(Qe){var n=Xr,r=Yr;n=(r&~(1<<32-ir(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_c++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=yj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},bj={readContext:$n,useCallback:US,useContext:$n,useEffect:ov,useImperativeHandle:FS,useInsertionEffect:MS,useLayoutEffect:LS,useMemo:zS,useReducer:Yp,useRef:OS,useState:function(){return Yp(bc)},useDebugValue:av,useDeferredValue:function(t){var e=Bn();return $S(e,mt.memoizedState,t)},useTransition:function(){var t=Yp(bc)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:AS,useSyncExternalStore:NS,useId:BS,unstable_isNewReconciler:!1},Ej={readContext:$n,useCallback:US,useContext:$n,useEffect:ov,useImperativeHandle:FS,useInsertionEffect:MS,useLayoutEffect:LS,useMemo:zS,useReducer:Xp,useRef:OS,useState:function(){return Xp(bc)},useDebugValue:av,useDeferredValue:function(t){var e=Bn();return mt===null?e.memoizedState=t:$S(e,mt.memoizedState,t)},useTransition:function(){var t=Xp(bc)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:AS,useSyncExternalStore:NS,useId:BS,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function fg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sf={isMounted:function(t){return(t=t._reactInternals)?_o(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=ti(t),i=es(r,s);i.payload=e,n!=null&&(i.callback=n),e=Zs(t,i,s),e!==null&&(or(e,t,s,r),xd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=ti(t),i=es(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zs(t,i,s),e!==null&&(or(e,t,s,r),xd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=ti(t),s=es(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zs(t,s,r),e!==null&&(or(e,t,r,n),xd(e,t,r))}};function Bx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!mc(n,r)||!mc(s,i):!0}function GS(t,e,n){var r=!1,s=ui,i=e.contextType;return typeof i=="object"&&i!==null?i=$n(i):(s=pn(e)?so:Wt.current,r=e.contextTypes,i=(r=r!=null)?Sa(t,s):ui),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sf.enqueueReplaceState(e,e.state,null)}function pg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=$n(i):(i=pn(e)?so:Wt.current,s.context=Sa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(fg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sf.enqueueReplaceState(s,s.state,null),rh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Aa(t,e){try{var n="",r=e;do n+=X2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Jp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Sj=typeof WeakMap=="function"?WeakMap:Map;function KS(t,e,n){n=es(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){lh||(lh=!0,Tg=r),mg(t,e)},n}function QS(t,e,n){n=es(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){mg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){mg(t,e),typeof r!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Wx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Sj;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Vj.bind(null,t,e,n),e.then(t,t))}function qx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=es(-1,1),e.tag=2,Zs(n,e,1))),n.lanes|=1),t)}var Tj=gs.ReactCurrentOwner,hn=!1;function Qt(t,e,n,r){e.child=t===null?SS(e,null,n,r):Ca(e,t.child,n,r)}function Kx(t,e,n,r,s){n=n.render;var i=e.ref;return ra(e,s),r=sv(t,e,n,r,i,s),n=iv(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cs(t,e,s)):(Qe&&n&&qy(e),e.flags|=1,Qt(t,e,r,s),e.child)}function Qx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,YS(t,e,i,r,s)):(t=Cd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:mc,n(o,r)&&t.ref===e.ref)return cs(t,e,s)}return e.flags|=1,t=ni(i,r),t.ref=e.ref,t.return=e,e.child=t}function YS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(mc(i,r)&&t.ref===e.ref)if(hn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(hn=!0);else return e.lanes=t.lanes,cs(t,e,s)}return gg(t,e,n,r,s)}function XS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Xo,_n),_n|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Xo,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(Xo,_n),_n|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$e(Xo,_n),_n|=r;return Qt(t,e,s,n),e.child}function JS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gg(t,e,n,r,s){var i=pn(n)?so:Wt.current;return i=Sa(e,i),ra(e,s),n=sv(t,e,n,r,i,s),r=iv(),t!==null&&!hn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cs(t,e,s)):(Qe&&r&&qy(e),e.flags|=1,Qt(t,e,n,s),e.child)}function Yx(t,e,n,r,s){if(pn(n)){var i=!0;Jd(e)}else i=!1;if(ra(e,s),e.stateNode===null)Ed(t,e),GS(e,n,r),pg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=$n(u):(u=pn(n)?so:Wt.current,u=Sa(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Hx(e,o,r,u),js=!1;var m=e.memoizedState;o.state=m,rh(e,r,o,s),l=e.memoizedState,a!==r||m!==l||fn.current||js?(typeof h=="function"&&(fg(e,n,h,r),l=e.memoizedState),(a=js||Bx(e,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,CS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Yn(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=$n(l):(l=pn(n)?so:Wt.current,l=Sa(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&Hx(e,o,r,l),js=!1,m=e.memoizedState,o.state=m,rh(e,r,o,s);var b=e.memoizedState;a!==f||m!==b||fn.current||js?(typeof y=="function"&&(fg(e,n,y,r),b=e.memoizedState),(u=js||Bx(e,n,u,r,m,b,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return yg(t,e,n,r,i,s)}function yg(t,e,n,r,s,i){JS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ox(e,n,!1),cs(t,e,i);r=e.stateNode,Tj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ca(e,t.child,null,i),e.child=Ca(e,null,a,i)):Qt(t,e,a,i),e.memoizedState=r.state,s&&Ox(e,n,!0),e.child}function ZS(t){var e=t.stateNode;e.pendingContext?jx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jx(t,e.context,!1),ev(t,e.containerInfo)}function Xx(t,e,n,r,s){return Ta(),Ky(s),e.flags|=256,Qt(t,e,n,r),e.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function wg(t){return{baseLanes:t,cachePool:null,transitions:null}}function eT(t,e,n){var r=e.pendingProps,s=Ye.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Ye,s&1),t===null)return dg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lf(o,r,0,null),t=eo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wg(n),e.memoizedState=vg,t):lv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Cj(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ni(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ni(a,i):(i=eo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=vg,r}return i=t.child,t=i.sibling,r=ni(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lv(t,e){return e=lf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qu(t,e,n,r){return r!==null&&Ky(r),Ca(e,t.child,null,n),t=lv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Cj(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Jp(Error(Y(422))),qu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=lf({mode:"visible",children:r.children},s,0,null),i=eo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ca(e,t.child,null,o),e.child.memoizedState=wg(o),e.memoizedState=vg,i);if(!(e.mode&1))return qu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Y(419)),r=Jp(i,r,void 0),qu(t,e,o,r)}if(a=(o&t.childLanes)!==0,hn||a){if(r=It,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ls(t,s),or(r,t,s,-1))}return pv(),r=Jp(Error(Y(421))),qu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Fj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tn=Js(s.nextSibling),Cn=e,Qe=!0,er=null,t!==null&&(On[Mn++]=Yr,On[Mn++]=Xr,On[Mn++]=io,Yr=t.id,Xr=t.overflow,io=e),e=lv(e,r.children),e.flags|=4096,e)}function Jx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hg(t.return,e,n)}function Zp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Qt(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jx(t,n,e);else if(t.tag===19)Jx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&sh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Zp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&sh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Zp(e,!0,n,null,i);break;case"together":Zp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ed(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ao|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=ni(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ni(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Ij(t,e,n){switch(e.tag){case 3:ZS(e),Ta();break;case 5:IS(e);break;case 1:pn(e.type)&&Jd(e);break;case 4:ev(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(th,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?eT(t,e,n):($e(Ye,Ye.current&1),t=cs(t,e,n),t!==null?t.sibling:null);$e(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return tT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,XS(t,e,n)}return cs(t,e,n)}var nT,xg,rT,sT;nT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xg=function(){};rT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qi(Pr.current);var i=null;switch(n){case"input":s=$m(t,s),r=$m(t,r),i=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),i=[];break;case"textarea":s=Wm(t,s),r=Wm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yd)}Gm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(lc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(lc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&qe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};sT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Nl(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Aj(t,e,n){var r=e.pendingProps;switch(Gy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return pn(e.type)&&Xd(),Vt(e),null;case 3:return r=e.stateNode,Ia(),Ge(fn),Ge(Wt),nv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,er!==null&&(Ag(er),er=null))),xg(t,e),Vt(e),null;case 5:tv(e);var s=qi(xc.current);if(n=e.type,t!==null&&e.stateNode!=null)rT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Vt(e),null}if(t=qi(Pr.current),Hu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Nr]=e,r[vc]=i,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(s=0;s<Ml.length;s++)qe(Ml[s],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":ax(r,i),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},qe("invalid",r);break;case"textarea":cx(r,i),qe("invalid",r)}Gm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Bu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Bu(r.textContent,a,t),s=["children",""+a]):lc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",r)}switch(n){case"input":Ou(r),lx(r,i,!0);break;case"textarea":Ou(r),ux(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Yd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nr]=e,t[vc]=r,nT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Km(n,r),n){case"dialog":qe("cancel",t),qe("close",t),s=r;break;case"iframe":case"object":case"embed":qe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ml.length;s++)qe(Ml[s],t);s=r;break;case"source":qe("error",t),s=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),s=r;break;case"details":qe("toggle",t),s=r;break;case"input":ax(t,r),s=$m(t,r),qe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),qe("invalid",t);break;case"textarea":cx(t,r),s=Wm(t,r),qe("invalid",t);break;default:s=r}Gm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?OE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&DE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&cc(t,l):typeof l=="number"&&cc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(lc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&qe("scroll",t):l!=null&&Py(t,i,l,o))}switch(n){case"input":Ou(t),lx(t,r,!1);break;case"textarea":Ou(t),ux(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ci(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Zo(t,!!r.multiple,i,!1):r.defaultValue!=null&&Zo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Yd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)sT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=qi(xc.current),qi(Pr.current),Hu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nr]=e,(i=r.nodeValue!==n)&&(t=Cn,t!==null))switch(t.tag){case 3:Bu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nr]=e,e.stateNode=r}return Vt(e),null;case 13:if(Ge(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Tn!==null&&e.mode&1&&!(e.flags&128))bS(),Ta(),e.flags|=98560,i=!1;else if(i=Hu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[Nr]=e}else Ta(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),i=!1}else er!==null&&(Ag(er),er=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?wt===0&&(wt=3):pv())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Ia(),xg(t,e),t===null&&gc(e.stateNode.containerInfo),Vt(e),null;case 10:return Xy(e.type._context),Vt(e),null;case 17:return pn(e.type)&&Xd(),Vt(e),null;case 19:if(Ge(Ye),i=e.memoizedState,i===null)return Vt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Nl(i,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sh(t),o!==null){for(e.flags|=128,Nl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Ye,Ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&ot()>Na&&(e.flags|=128,r=!0,Nl(i,!1),e.lanes=4194304)}else{if(!r)if(t=sh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Qe)return Vt(e),null}else 2*ot()-i.renderingStartTime>Na&&n!==1073741824&&(e.flags|=128,r=!0,Nl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ot(),e.sibling=null,n=Ye.current,$e(Ye,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return fv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_n&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Nj(t,e){switch(Gy(e),e.tag){case 1:return pn(e.type)&&Xd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ia(),Ge(fn),Ge(Wt),nv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tv(e),null;case 13:if(Ge(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Ta()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Ye),null;case 4:return Ia(),null;case 10:return Xy(e.type._context),null;case 22:case 23:return fv(),null;case 24:return null;default:return null}}var Gu=!1,$t=!1,Rj=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Yo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function _g(t,e,n){try{n()}catch(r){nt(t,e,r)}}var Zx=!1;function kj(t,e){if(sg=Gd,t=cS(),Wy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ig={focusedElem:t,selectionRange:n},Gd=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,E=b.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Yn(e.type,v),E);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(k){nt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return b=Zx,Zx=!1,b}function Gl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&_g(e,n,i)}s=s.next}while(s!==r)}}function of(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iT(t){var e=t.alternate;e!==null&&(t.alternate=null,iT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nr],delete e[vc],delete e[lg],delete e[fj],delete e[pj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oT(t){return t.tag===5||t.tag===3||t.tag===4}function e_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yd));else if(r!==4&&(t=t.child,t!==null))for(Eg(t,e,n),t=t.sibling;t!==null;)Eg(t,e,n),t=t.sibling}function Sg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sg(t,e,n),t=t.sibling;t!==null;)Sg(t,e,n),t=t.sibling}var Rt=null,Zn=!1;function Is(t,e,n){for(n=n.child;n!==null;)aT(t,e,n),n=n.sibling}function aT(t,e,n){if(kr&&typeof kr.onCommitFiberUnmount=="function")try{kr.onCommitFiberUnmount(Xh,n)}catch{}switch(n.tag){case 5:$t||Yo(n,e);case 6:var r=Rt,s=Zn;Rt=null,Is(t,e,n),Rt=r,Zn=s,Rt!==null&&(Zn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Zn?(t=Rt,n=n.stateNode,t.nodeType===8?qp(t.parentNode,n):t.nodeType===1&&qp(t,n),fc(t)):qp(Rt,n.stateNode));break;case 4:r=Rt,s=Zn,Rt=n.stateNode.containerInfo,Zn=!0,Is(t,e,n),Rt=r,Zn=s;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&_g(n,e,o),s=s.next}while(s!==r)}Is(t,e,n);break;case 1:if(!$t&&(Yo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nt(n,e,a)}Is(t,e,n);break;case 21:Is(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,Is(t,e,n),$t=r):Is(t,e,n);break;default:Is(t,e,n)}}function t_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Rj),e.forEach(function(r){var s=Uj.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rt=a.stateNode,Zn=!1;break e;case 3:Rt=a.stateNode.containerInfo,Zn=!0;break e;case 4:Rt=a.stateNode.containerInfo,Zn=!0;break e}a=a.return}if(Rt===null)throw Error(Y(160));aT(i,o,s),Rt=null,Zn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){nt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)lT(e,t),e=e.sibling}function lT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),br(t),r&4){try{Gl(3,t,t.return),of(3,t)}catch(v){nt(t,t.return,v)}try{Gl(5,t,t.return)}catch(v){nt(t,t.return,v)}}break;case 1:Kn(e,t),br(t),r&512&&n!==null&&Yo(n,n.return);break;case 5:if(Kn(e,t),br(t),r&512&&n!==null&&Yo(n,n.return),t.flags&32){var s=t.stateNode;try{cc(s,"")}catch(v){nt(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&RE(s,i),Km(a,o);var u=Km(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?OE(s,f):h==="dangerouslySetInnerHTML"?DE(s,f):h==="children"?cc(s,f):Py(s,h,f,u)}switch(a){case"input":Bm(s,i);break;case"textarea":kE(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Zo(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Zo(s,!!i.multiple,i.defaultValue,!0):Zo(s,!!i.multiple,i.multiple?[]:"",!1))}s[vc]=i}catch(v){nt(t,t.return,v)}}break;case 6:if(Kn(e,t),br(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){nt(t,t.return,v)}}break;case 3:if(Kn(e,t),br(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fc(e.containerInfo)}catch(v){nt(t,t.return,v)}break;case 4:Kn(e,t),br(t);break;case 13:Kn(e,t),br(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dv=ot())),r&4&&t_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?($t=(u=$t)||h,Kn(e,t),$t=u):Kn(e,t),br(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ie=t,h=t.child;h!==null;){for(f=ie=h;ie!==null;){switch(m=ie,y=m.child,m.tag){case 0:case 11:case 14:case 15:Gl(4,m,m.return);break;case 1:Yo(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){nt(r,n,v)}}break;case 5:Yo(m,m.return);break;case 22:if(m.memoizedState!==null){r_(f);continue}}y!==null?(y.return=m,ie=y):r_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=jE("display",o))}catch(v){nt(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){nt(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Kn(e,t),br(t),r&4&&t_(t);break;case 21:break;default:Kn(e,t),br(t)}}function br(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oT(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(cc(s,""),r.flags&=-33);var i=e_(t);Sg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=e_(t);Eg(t,a,o);break;default:throw Error(Y(161))}}catch(l){nt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Pj(t,e,n){ie=t,cT(t)}function cT(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var s=ie,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Gu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||$t;a=Gu;var u=$t;if(Gu=o,($t=l)&&!u)for(ie=s;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?s_(s):l!==null?(l.return=o,ie=l):s_(s);for(;i!==null;)ie=i,cT(i),i=i.sibling;ie=s,Gu=a,$t=u}n_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ie=i):n_(t)}}function n_(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||of(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ux(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ux(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&fc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}$t||e.flags&512&&bg(e)}catch(m){nt(e,e.return,m)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function r_(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function s_(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{of(4,e)}catch(l){nt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){nt(e,s,l)}}var i=e.return;try{bg(e)}catch(l){nt(e,i,l)}break;case 5:var o=e.return;try{bg(e)}catch(l){nt(e,o,l)}}}catch(l){nt(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var Dj=Math.ceil,ah=gs.ReactCurrentDispatcher,cv=gs.ReactCurrentOwner,Un=gs.ReactCurrentBatchConfig,Re=0,It=null,lt=null,Pt=0,_n=0,Xo=Ti(0),wt=0,Sc=null,ao=0,af=0,uv=0,Kl=null,un=null,dv=0,Na=1/0,Gr=null,lh=!1,Tg=null,ei=null,Ku=!1,Gs=null,ch=0,Ql=0,Cg=null,Sd=-1,Td=0;function Jt(){return Re&6?ot():Sd!==-1?Sd:Sd=ot()}function ti(t){return t.mode&1?Re&2&&Pt!==0?Pt&-Pt:gj.transition!==null?(Td===0&&(Td=GE()),Td):(t=Me,t!==0||(t=window.event,t=t===void 0?16:eS(t.type)),t):1}function or(t,e,n,r){if(50<Ql)throw Ql=0,Cg=null,Error(Y(185));qc(t,n,r),(!(Re&2)||t!==It)&&(t===It&&(!(Re&2)&&(af|=n),wt===4&&Ls(t,Pt)),mn(t,r),n===1&&Re===0&&!(e.mode&1)&&(Na=ot()+500,nf&&Ci()))}function mn(t,e){var n=t.callbackNode;gD(t,e);var r=qd(t,t===It?Pt:0);if(r===0)n!==null&&fx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fx(n),e===1)t.tag===0?mj(i_.bind(null,t)):wS(i_.bind(null,t)),dj(function(){!(Re&6)&&Ci()}),n=null;else{switch(KE(r)){case 1:n=Ly;break;case 4:n=WE;break;case 16:n=Wd;break;case 536870912:n=qE;break;default:n=Wd}n=yT(n,uT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function uT(t,e){if(Sd=-1,Td=0,Re&6)throw Error(Y(327));var n=t.callbackNode;if(sa()&&t.callbackNode!==n)return null;var r=qd(t,t===It?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=uh(t,r);else{e=r;var s=Re;Re|=2;var i=hT();(It!==t||Pt!==e)&&(Gr=null,Na=ot()+500,Zi(t,e));do try{Mj();break}catch(a){dT(t,a)}while(!0);Yy(),ah.current=i,Re=s,lt!==null?e=0:(It=null,Pt=0,e=wt)}if(e!==0){if(e===2&&(s=Zm(t),s!==0&&(r=s,e=Ig(t,s))),e===1)throw n=Sc,Zi(t,0),Ls(t,r),mn(t,ot()),n;if(e===6)Ls(t,r);else{if(s=t.current.alternate,!(r&30)&&!jj(s)&&(e=uh(t,r),e===2&&(i=Zm(t),i!==0&&(r=i,e=Ig(t,i))),e===1))throw n=Sc,Zi(t,0),Ls(t,r),mn(t,ot()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:$i(t,un,Gr);break;case 3:if(Ls(t,r),(r&130023424)===r&&(e=dv+500-ot(),10<e)){if(qd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ag($i.bind(null,t,un,Gr),e);break}$i(t,un,Gr);break;case 4:if(Ls(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ir(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Dj(r/1960))-r,10<r){t.timeoutHandle=ag($i.bind(null,t,un,Gr),r);break}$i(t,un,Gr);break;case 5:$i(t,un,Gr);break;default:throw Error(Y(329))}}}return mn(t,ot()),t.callbackNode===n?uT.bind(null,t):null}function Ig(t,e){var n=Kl;return t.current.memoizedState.isDehydrated&&(Zi(t,e).flags|=256),t=uh(t,e),t!==2&&(e=un,un=n,e!==null&&Ag(e)),t}function Ag(t){un===null?un=t:un.push.apply(un,t)}function jj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ur(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ls(t,e){for(e&=~uv,e&=~af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ir(e),r=1<<n;t[n]=-1,e&=~r}}function i_(t){if(Re&6)throw Error(Y(327));sa();var e=qd(t,0);if(!(e&1))return mn(t,ot()),null;var n=uh(t,e);if(t.tag!==0&&n===2){var r=Zm(t);r!==0&&(e=r,n=Ig(t,r))}if(n===1)throw n=Sc,Zi(t,0),Ls(t,e),mn(t,ot()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$i(t,un,Gr),mn(t,ot()),null}function hv(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Na=ot()+500,nf&&Ci())}}function lo(t){Gs!==null&&Gs.tag===0&&!(Re&6)&&sa();var e=Re;Re|=1;var n=Un.transition,r=Me;try{if(Un.transition=null,Me=1,t)return t()}finally{Me=r,Un.transition=n,Re=e,!(Re&6)&&Ci()}}function fv(){_n=Xo.current,Ge(Xo)}function Zi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uj(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(Gy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xd();break;case 3:Ia(),Ge(fn),Ge(Wt),nv();break;case 5:tv(r);break;case 4:Ia();break;case 13:Ge(Ye);break;case 19:Ge(Ye);break;case 10:Xy(r.type._context);break;case 22:case 23:fv()}n=n.return}if(It=t,lt=t=ni(t.current,null),Pt=_n=e,wt=0,Sc=null,uv=af=ao=0,un=Kl=null,Wi!==null){for(e=0;e<Wi.length;e++)if(n=Wi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Wi=null}return t}function dT(t,e){do{var n=lt;try{if(Yy(),_d.current=oh,ih){for(var r=Xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ih=!1}if(oo=0,St=mt=Xe=null,ql=!1,_c=0,cv.current=null,n===null||n.return===null){wt=1,Sc=e,lt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=qx(o);if(y!==null){y.flags&=-257,Gx(y,o,a,i,e),y.mode&1&&Wx(i,u,e),e=y,l=u;var b=e.updateQueue;if(b===null){var v=new Set;v.add(l),e.updateQueue=v}else b.add(l);break e}else{if(!(e&1)){Wx(i,u,e),pv();break e}l=Error(Y(426))}}else if(Qe&&a.mode&1){var E=qx(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Gx(E,o,a,i,e),Ky(Aa(l,a));break e}}i=l=Aa(l,a),wt!==4&&(wt=2),Kl===null?Kl=[i]:Kl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=KS(i,l,e);Fx(i,x);break e;case 1:a=l;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ei===null||!ei.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=QS(i,a,e);Fx(i,k);break e}}i=i.return}while(i!==null)}pT(n)}catch(O){e=O,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function hT(){var t=ah.current;return ah.current=oh,t===null?oh:t}function pv(){(wt===0||wt===3||wt===2)&&(wt=4),It===null||!(ao&268435455)&&!(af&268435455)||Ls(It,Pt)}function uh(t,e){var n=Re;Re|=2;var r=hT();(It!==t||Pt!==e)&&(Gr=null,Zi(t,e));do try{Oj();break}catch(s){dT(t,s)}while(!0);if(Yy(),Re=n,ah.current=r,lt!==null)throw Error(Y(261));return It=null,Pt=0,wt}function Oj(){for(;lt!==null;)fT(lt)}function Mj(){for(;lt!==null&&!aD();)fT(lt)}function fT(t){var e=gT(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?pT(t):lt=e,cv.current=null}function pT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nj(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,lt=null;return}}else if(n=Aj(n,e,_n),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);wt===0&&(wt=5)}function $i(t,e,n){var r=Me,s=Un.transition;try{Un.transition=null,Me=1,Lj(t,e,n,r)}finally{Un.transition=s,Me=r}return null}function Lj(t,e,n,r){do sa();while(Gs!==null);if(Re&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(yD(t,i),t===It&&(lt=It=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ku||(Ku=!0,yT(Wd,function(){return sa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Un.transition,Un.transition=null;var o=Me;Me=1;var a=Re;Re|=4,cv.current=null,kj(t,n),lT(n,t),rj(ig),Gd=!!sg,ig=sg=null,t.current=n,Pj(n),lD(),Re=a,Me=o,Un.transition=i}else t.current=n;if(Ku&&(Ku=!1,Gs=t,ch=s),i=t.pendingLanes,i===0&&(ei=null),dD(n.stateNode),mn(t,ot()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(lh)throw lh=!1,t=Tg,Tg=null,t;return ch&1&&t.tag!==0&&sa(),i=t.pendingLanes,i&1?t===Cg?Ql++:(Ql=0,Cg=t):Ql=0,Ci(),null}function sa(){if(Gs!==null){var t=KE(ch),e=Un.transition,n=Me;try{if(Un.transition=null,Me=16>t?16:t,Gs===null)var r=!1;else{if(t=Gs,Gs=null,ch=0,Re&6)throw Error(Y(331));var s=Re;for(Re|=4,ie=t.current;ie!==null;){var i=ie,o=i.child;if(ie.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ie=u;ie!==null;){var h=ie;switch(h.tag){case 0:case 11:case 15:Gl(8,h,i)}var f=h.child;if(f!==null)f.return=h,ie=f;else for(;ie!==null;){h=ie;var m=h.sibling,y=h.return;if(iT(h),h===u){ie=null;break}if(m!==null){m.return=y,ie=m;break}ie=y}}}var b=i.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ie=o;else e:for(;ie!==null;){if(i=ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Gl(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,ie=x;break e}ie=i.return}}var w=t.current;for(ie=w;ie!==null;){o=ie;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ie=S;else e:for(o=w;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:of(9,a)}}catch(O){nt(a,a.return,O)}if(a===o){ie=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ie=k;break e}ie=a.return}}if(Re=s,Ci(),kr&&typeof kr.onPostCommitFiberRoot=="function")try{kr.onPostCommitFiberRoot(Xh,t)}catch{}r=!0}return r}finally{Me=n,Un.transition=e}}return!1}function o_(t,e,n){e=Aa(n,e),e=KS(t,e,1),t=Zs(t,e,1),e=Jt(),t!==null&&(qc(t,1,e),mn(t,e))}function nt(t,e,n){if(t.tag===3)o_(t,t,n);else for(;e!==null;){if(e.tag===3){o_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ei===null||!ei.has(r))){t=Aa(n,t),t=QS(e,t,1),e=Zs(e,t,1),t=Jt(),e!==null&&(qc(e,1,t),mn(e,t));break}}e=e.return}}function Vj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>ot()-dv?Zi(t,0):uv|=n),mn(t,e)}function mT(t,e){e===0&&(t.mode&1?(e=Vu,Vu<<=1,!(Vu&130023424)&&(Vu=4194304)):e=1);var n=Jt();t=ls(t,e),t!==null&&(qc(t,e,n),mn(t,n))}function Fj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),mT(t,n)}function Uj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),mT(t,n)}var gT;gT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fn.current)hn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return hn=!1,Ij(t,e,n);hn=!!(t.flags&131072)}else hn=!1,Qe&&e.flags&1048576&&xS(e,eh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ed(t,e),t=e.pendingProps;var s=Sa(e,Wt.current);ra(e,n),s=sv(null,e,r,t,s,n);var i=iv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,pn(r)?(i=!0,Jd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zy(e),s.updater=sf,e.stateNode=s,s._reactInternals=e,pg(e,r,t,n),e=yg(null,e,r,!0,i,n)):(e.tag=0,Qe&&i&&qy(e),Qt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ed(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=$j(r),t=Yn(r,t),s){case 0:e=gg(null,e,r,t,n);break e;case 1:e=Yx(null,e,r,t,n);break e;case 11:e=Kx(null,e,r,t,n);break e;case 14:e=Qx(null,e,r,Yn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),gg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Yx(t,e,r,s,n);case 3:e:{if(ZS(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,CS(t,e),rh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Aa(Error(Y(423)),e),e=Xx(t,e,r,n,s);break e}else if(r!==s){s=Aa(Error(Y(424)),e),e=Xx(t,e,r,n,s);break e}else for(Tn=Js(e.stateNode.containerInfo.firstChild),Cn=e,Qe=!0,er=null,n=SS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ta(),r===s){e=cs(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return IS(e),t===null&&dg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,og(r,s)?o=null:i!==null&&og(r,i)&&(e.flags|=32),JS(t,e),Qt(t,e,o,n),e.child;case 6:return t===null&&dg(e),null;case 13:return eT(t,e,n);case 4:return ev(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ca(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Kx(t,e,r,s,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,$e(th,r._currentValue),r._currentValue=o,i!==null)if(ur(i.value,o)){if(i.children===s.children&&!fn.current){e=cs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=es(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),hg(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Qt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ra(e,n),s=$n(s),r=r(s),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,s=Yn(r,e.pendingProps),s=Yn(r.type,s),Qx(t,e,r,s,n);case 15:return YS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Ed(t,e),e.tag=1,pn(r)?(t=!0,Jd(e)):t=!1,ra(e,n),GS(e,r,s),pg(e,r,s,n),yg(null,e,r,!0,t,n);case 19:return tT(t,e,n);case 22:return XS(t,e,n)}throw Error(Y(156,e.tag))};function yT(t,e){return HE(t,e)}function zj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,e,n,r){return new zj(t,e,n,r)}function mv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function $j(t){if(typeof t=="function")return mv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jy)return 11;if(t===Oy)return 14}return 2}function ni(t,e){var n=t.alternate;return n===null?(n=Vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")mv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zo:return eo(n.children,s,i,e);case Dy:o=8,s|=8;break;case Vm:return t=Vn(12,n,e,s|2),t.elementType=Vm,t.lanes=i,t;case Fm:return t=Vn(13,n,e,s),t.elementType=Fm,t.lanes=i,t;case Um:return t=Vn(19,n,e,s),t.elementType=Um,t.lanes=i,t;case IE:return lf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case TE:o=10;break e;case CE:o=9;break e;case jy:o=11;break e;case Oy:o=14;break e;case Ds:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Vn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function eo(t,e,n,r){return t=Vn(7,t,r,e),t.lanes=n,t}function lf(t,e,n,r){return t=Vn(22,t,r,e),t.elementType=IE,t.lanes=n,t.stateNode={isHidden:!1},t}function em(t,e,n){return t=Vn(6,t,null,e),t.lanes=n,t}function tm(t,e,n){return e=Vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Op(0),this.expirationTimes=Op(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Op(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gv(t,e,n,r,s,i,o,a,l){return t=new Bj(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zy(i),t}function Hj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vT(t){if(!t)return ui;t=t._reactInternals;e:{if(_o(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(pn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(pn(n))return vS(t,n,e)}return e}function wT(t,e,n,r,s,i,o,a,l){return t=gv(n,r,!0,t,s,i,o,a,l),t.context=vT(null),n=t.current,r=Jt(),s=ti(n),i=es(r,s),i.callback=e??null,Zs(n,i,s),t.current.lanes=s,qc(t,s,r),mn(t,r),t}function cf(t,e,n,r){var s=e.current,i=Jt(),o=ti(s);return n=vT(n),e.context===null?e.context=n:e.pendingContext=n,e=es(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zs(s,e,o),t!==null&&(or(t,s,o,i),xd(t,s,o)),o}function dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function a_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yv(t,e){a_(t,e),(t=t.alternate)&&a_(t,e)}function Wj(){return null}var xT=typeof reportError=="function"?reportError:function(t){console.error(t)};function vv(t){this._internalRoot=t}uf.prototype.render=vv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));cf(t,e,null,null)};uf.prototype.unmount=vv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;lo(function(){cf(null,t,null,null)}),e[as]=null}};function uf(t){this._internalRoot=t}uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=XE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ms.length&&e!==0&&e<Ms[n].priority;n++);Ms.splice(n,0,t),n===0&&ZE(t)}};function wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function l_(){}function qj(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=dh(o);i.call(u)}}var o=wT(e,r,t,0,null,!1,!1,"",l_);return t._reactRootContainer=o,t[as]=o.current,gc(t.nodeType===8?t.parentNode:t),lo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=dh(l);a.call(u)}}var l=gv(t,0,!1,null,null,!1,!1,"",l_);return t._reactRootContainer=l,t[as]=l.current,gc(t.nodeType===8?t.parentNode:t),lo(function(){cf(e,l,n,r)}),l}function hf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=dh(o);a.call(l)}}cf(e,o,t,s)}else o=qj(n,e,t,s,r);return dh(o)}QE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ol(e.pendingLanes);n!==0&&(Vy(e,n|1),mn(e,ot()),!(Re&6)&&(Na=ot()+500,Ci()))}break;case 13:lo(function(){var r=ls(t,1);if(r!==null){var s=Jt();or(r,t,1,s)}}),yv(t,1)}};Fy=function(t){if(t.tag===13){var e=ls(t,134217728);if(e!==null){var n=Jt();or(e,t,134217728,n)}yv(t,134217728)}};YE=function(t){if(t.tag===13){var e=ti(t),n=ls(t,e);if(n!==null){var r=Jt();or(n,t,e,r)}yv(t,e)}};XE=function(){return Me};JE=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};Ym=function(t,e,n){switch(e){case"input":if(Bm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tf(r);if(!s)throw Error(Y(90));NE(r),Bm(r,s)}}}break;case"textarea":kE(t,n);break;case"select":e=n.value,e!=null&&Zo(t,!!n.multiple,e,!1)}};VE=hv;FE=lo;var Gj={usingClientEntryPoint:!1,Events:[Kc,Wo,tf,ME,LE,hv]},Rl={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kj={bundleType:Rl.bundleType,version:Rl.version,rendererPackageName:Rl.rendererPackageName,rendererConfig:Rl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$E(t),t===null?null:t.stateNode},findFiberByHostInstance:Rl.findFiberByHostInstance||Wj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qu.isDisabled&&Qu.supportsFiber)try{Xh=Qu.inject(Kj),kr=Qu}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gj;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wv(e))throw Error(Y(200));return Hj(t,e,null,n)};Nn.createRoot=function(t,e){if(!wv(t))throw Error(Y(299));var n=!1,r="",s=xT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gv(t,1,!1,null,null,n,!1,r,s),t[as]=e.current,gc(t.nodeType===8?t.parentNode:t),new vv(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=$E(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return lo(t)};Nn.hydrate=function(t,e,n){if(!df(e))throw Error(Y(200));return hf(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!wv(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=xT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=wT(e,null,t,1,n??null,s,!1,i,o),t[as]=e.current,gc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uf(e)};Nn.render=function(t,e,n){if(!df(e))throw Error(Y(200));return hf(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!df(t))throw Error(Y(40));return t._reactRootContainer?(lo(function(){hf(null,null,t,!1,function(){t._reactRootContainer=null,t[as]=null})}),!0):!1};Nn.unstable_batchedUpdates=hv;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!df(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return hf(t,e,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function _T(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_T)}catch(t){console.error(t)}}_T(),_E.exports=Nn;var Fn=_E.exports;const Qj=lE(Fn);var bT,c_=Fn;bT=c_.createRoot,c_.hydrateRoot;function Yj(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var ET={exports:{}},ST={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ra=p;function Xj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jj=typeof Object.is=="function"?Object.is:Xj,Zj=Ra.useState,eO=Ra.useEffect,tO=Ra.useLayoutEffect,nO=Ra.useDebugValue;function rO(t,e){var n=e(),r=Zj({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return tO(function(){s.value=n,s.getSnapshot=e,nm(s)&&i({inst:s})},[t,n,e]),eO(function(){return nm(s)&&i({inst:s}),t(function(){nm(s)&&i({inst:s})})},[t]),nO(n),n}function nm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jj(t,n)}catch{return!0}}function sO(t,e){return e()}var iO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sO:rO;ST.useSyncExternalStore=Ra.useSyncExternalStore!==void 0?Ra.useSyncExternalStore:iO;ET.exports=ST;var oO=ET.exports;const aO=wE.useInsertionEffect,lO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cO=lO?p.useLayoutEffect:p.useEffect,uO=aO||cO,TT=t=>{const e=p.useRef([t,(...n)=>e[0](...n)]).current;return uO(()=>{e[0]=t}),e[1]},dO="popstate",xv="pushState",_v="replaceState",hO="hashchange",u_=[dO,xv,_v,hO],fO=t=>{for(const e of u_)addEventListener(e,t);return()=>{for(const e of u_)removeEventListener(e,t)}},CT=(t,e)=>oO.useSyncExternalStore(fO,t,e),pO=()=>location.search,mO=({ssrSearch:t=""}={})=>CT(pO,()=>t),d_=()=>location.pathname,gO=({ssrPath:t}={})=>CT(d_,t?()=>t:d_),yO=(t,{replace:e=!1,state:n=null}={})=>history[e?_v:xv](n,"",t),vO=(t={})=>[gO(t),yO],h_=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[h_]>"u"){for(const t of[xv,_v]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,h_,{value:!0})}const wO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",IT=(t="")=>t==="/"?"":t,xO=(t,e)=>t[0]==="~"?t.slice(1):IT(e)+t,_O=(t="",e)=>wO(f_(IT(t)),f_(e)),f_=t=>{try{return decodeURI(t)}catch{return t}},AT={hook:vO,searchHook:mO,parser:Yj,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},NT=p.createContext(AT),Yc=()=>p.useContext(NT),RT={},kT=p.createContext(RT),bO=()=>p.useContext(kT),ff=t=>{const[e,n]=t.hook(t);return[_O(t.base,e),TT((r,s)=>n(xO(r,t.base),s))]},bv=()=>ff(Yc()),PT=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,m)=>[f,l[m]])):o.groups;let h={...l};return u&&Object.assign(h,u),h})(),...r?[a]:[]]:[!1,null]},DT=({children:t,...e})=>{var h,f;const n=Yc(),r=e.hook?AT:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=p.useRef({}),l=a.current,u=l;for(let m in r){const y=m==="base"?r[m]+(e[m]||""):e[m]||r[m];l===u&&y!==u[m]&&(a.current=u={...u}),u[m]=y,y!==r[m]&&(s=u)}return p.createElement(NT.Provider,{value:s,children:t})},p_=({children:t,component:e},n)=>e?p.createElement(e,{params:n}):typeof t=="function"?t(n):t,EO=t=>{let e=p.useRef(RT),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Hr=({path:t,nest:e,match:n,...r})=>{const s=Yc(),[i]=ff(s),[o,a,l]=n??PT(s.parser,t,i,e),u=EO({...bO(),...a});if(!o)return null;const h=l?p.createElement(DT,{base:l},p_(r,u)):p_(r,u);return p.createElement(kT.Provider,{value:u,children:h})},co=p.forwardRef((t,e)=>{const n=Yc(),[r,s]=ff(n),{to:i="",href:o=i,onClick:a,asChild:l,children:u,className:h,replace:f,state:m,...y}=t,b=TT(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(a==null||a(E),E.defaultPrevented||(E.preventDefault(),s(o,t)))}),v=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return l&&p.isValidElement(u)?p.cloneElement(u,{onClick:b,href:v}):p.createElement("a",{...y,onClick:b,href:v,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),jT=t=>Array.isArray(t)?t.flatMap(e=>jT(e&&e.type===p.Fragment?e.props.children:e)):[t],SO=({children:t,location:e})=>{const n=Yc(),[r]=ff(n);for(const s of jT(t)){let i=0;if(p.isValidElement(s)&&(i=PT(n.parser,s.props.path,e||r,s.props.nest))[0])return p.cloneElement(s,{match:i})}return null};var pf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},mf=typeof window>"u"||"Deno"in globalThis;function Xn(){}function TO(t,e){return typeof t=="function"?t(e):t}function CO(t){return typeof t=="number"&&t>=0&&t!==1/0}function IO(t,e){return Math.max(t+(e||0)-Date.now(),0)}function m_(t,e){return typeof t=="function"?t(e):t}function AO(t,e){return typeof t=="function"?t(e):t}function g_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Ev(o,e.options))return!1}else if(!Cc(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function y_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Tc(e.options.mutationKey)!==Tc(i))return!1}else if(!Cc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Ev(t,e){return((e==null?void 0:e.queryKeyHashFn)||Tc)(t)}function Tc(t){return JSON.stringify(t,(e,n)=>Ng(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Cc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Cc(t[n],e[n])):!1}function OT(t,e){if(t===e)return t;const n=v_(t)&&v_(e);if(n||Ng(t)&&Ng(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,l++):(a[h]=OT(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function v_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ng(t){if(!w_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!w_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function w_(t){return Object.prototype.toString.call(t)==="[object Object]"}function NO(t){return new Promise(e=>{setTimeout(e,t)})}function RO(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?OT(t,e):e}function kO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function PO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Sv=Symbol();function MT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Sv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Qi,zs,pa,eE,DO=(eE=class extends pf{constructor(){super();De(this,Qi);De(this,zs);De(this,pa);Ee(this,pa,e=>{if(!mf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,zs)||this.setEventListener(G(this,pa))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,zs))==null||e.call(this),Ee(this,zs,void 0))}setEventListener(e){var n;Ee(this,pa,e),(n=G(this,zs))==null||n.call(this),Ee(this,zs,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){G(this,Qi)!==e&&(Ee(this,Qi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof G(this,Qi)=="boolean"?G(this,Qi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Qi=new WeakMap,zs=new WeakMap,pa=new WeakMap,eE),LT=new DO,ma,$s,ga,tE,jO=(tE=class extends pf{constructor(){super();De(this,ma,!0);De(this,$s);De(this,ga);Ee(this,ga,e=>{if(!mf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,$s)||this.setEventListener(G(this,ga))}onUnsubscribe(){var e;this.hasListeners()||((e=G(this,$s))==null||e.call(this),Ee(this,$s,void 0))}setEventListener(e){var n;Ee(this,ga,e),(n=G(this,$s))==null||n.call(this),Ee(this,$s,e(this.setOnline.bind(this)))}setOnline(e){G(this,ma)!==e&&(Ee(this,ma,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return G(this,ma)}},ma=new WeakMap,$s=new WeakMap,ga=new WeakMap,tE),hh=new jO;function OO(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function MO(t){return Math.min(1e3*2**t,3e4)}function VT(t){return(t??"online")==="online"?hh.isOnline():!0}var FT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function rm(t){return t instanceof FT}function UT(t){let e=!1,n=0,r=!1,s;const i=OO(),o=v=>{var E;r||(m(new FT(v)),(E=t.abort)==null||E.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>LT.isFocused()&&(t.networkMode==="always"||hh.isOnline())&&t.canRun(),h=()=>VT(t.networkMode)&&t.canRun(),f=v=>{var E;r||(r=!0,(E=t.onSuccess)==null||E.call(t,v),s==null||s(),i.resolve(v))},m=v=>{var E;r||(r=!0,(E=t.onError)==null||E.call(t,v),s==null||s(),i.reject(v))},y=()=>new Promise(v=>{var E;s=x=>{(r||u())&&v(x)},(E=t.onPause)==null||E.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),b=()=>{if(r)return;let v;const E=n===0?t.initialPromise:void 0;try{v=E??t.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{var D;if(r)return;const w=t.retry??(mf?0:3),S=t.retryDelay??MO,k=typeof S=="function"?S(n,x):S,O=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,x);if(e||!O){m(x);return}n++,(D=t.onFail)==null||D.call(t,n,x),NO(k).then(()=>u()?void 0:y()).then(()=>{e?m(x):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?b():y().then(b),i)}}function LO(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Yt=LO(),Yi,nE,zT=(nE=class{constructor(){De(this,Yi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),CO(this.gcTime)&&Ee(this,Yi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(mf?1/0:5*60*1e3))}clearGcTimeout(){G(this,Yi)&&(clearTimeout(G(this,Yi)),Ee(this,Yi,void 0))}},Yi=new WeakMap,nE),ya,va,Dn,Ut,Bc,Xi,Jn,qr,rE,VO=(rE=class extends zT{constructor(n){super();De(this,Jn);De(this,ya);De(this,va);De(this,Dn);De(this,Ut);De(this,Bc);De(this,Xi);Ee(this,Xi,!1),Ee(this,Bc,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ee(this,Dn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ee(this,ya,UO(this.options)),this.state=n.state??G(this,ya),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=G(this,Ut))==null?void 0:n.promise}setOptions(n){this.options={...G(this,Bc),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,Dn).remove(this)}setData(n,r){const s=RO(this.state.data,n,this.options);return Mt(this,Jn,qr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Mt(this,Jn,qr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=G(this,Ut))==null?void 0:s.promise;return(i=G(this,Ut))==null||i.cancel(n),r?r.then(Xn).catch(Xn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,ya))}isActive(){return this.observers.some(n=>AO(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!IO(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,Ut))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=G(this,Ut))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),G(this,Dn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(G(this,Ut)&&(G(this,Xi)?G(this,Ut).cancel({revert:!0}):G(this,Ut).cancelRetry()),this.scheduleGc()),G(this,Dn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mt(this,Jn,qr).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(G(this,Ut))return G(this,Ut).continueRetry(),G(this,Ut).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ee(this,Xi,!0),s.signal)})},o=()=>{const m=MT(this.options,r),y={queryKey:this.queryKey,meta:this.meta};return i(y),Ee(this,Xi,!1),this.options.persister?this.options.persister(m,y,this):m(y)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(a),(u=this.options.behavior)==null||u.onFetch(a,this),Ee(this,va,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&Mt(this,Jn,qr).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=m=>{var y,b,v,E;rm(m)&&m.silent||Mt(this,Jn,qr).call(this,{type:"error",error:m}),rm(m)||((b=(y=G(this,Dn).config).onError)==null||b.call(y,m,this),(E=(v=G(this,Dn).config).onSettled)==null||E.call(v,this.state.data,m,this)),this.scheduleGc()};return Ee(this,Ut,UT({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var y,b,v,E;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){l(x);return}(b=(y=G(this,Dn).config).onSuccess)==null||b.call(y,m,this),(E=(v=G(this,Dn).config).onSettled)==null||E.call(v,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,y)=>{Mt(this,Jn,qr).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Mt(this,Jn,qr).call(this,{type:"pause"})},onContinue:()=>{Mt(this,Jn,qr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),G(this,Ut).start()}},ya=new WeakMap,va=new WeakMap,Dn=new WeakMap,Ut=new WeakMap,Bc=new WeakMap,Xi=new WeakMap,Jn=new WeakSet,qr=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...FO(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return rm(i)&&i.revert&&G(this,va)?{...G(this,va),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Yt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),G(this,Dn).notify({query:this,type:"updated",action:n})})},rE);function FO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:VT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function UO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Tr,sE,zO=(sE=class extends pf{constructor(e={}){super();De(this,Tr);this.config=e,Ee(this,Tr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Ev(s,n);let o=this.get(i);return o||(o=new VO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){G(this,Tr).has(e.queryHash)||(G(this,Tr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=G(this,Tr).get(e.queryHash);n&&(e.destroy(),n===e&&G(this,Tr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return G(this,Tr).get(e)}getAll(){return[...G(this,Tr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>g_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>g_(e,r)):n}notify(e){Yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Tr=new WeakMap,sE),Cr,Kt,Ji,Ir,ks,iE,$O=(iE=class extends zT{constructor(n){super();De(this,Ir);De(this,Cr);De(this,Kt);De(this,Ji);this.mutationId=n.mutationId,Ee(this,Kt,n.mutationCache),Ee(this,Cr,[]),this.state=n.state||BO(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){G(this,Cr).includes(n)||(G(this,Cr).push(n),this.clearGcTimeout(),G(this,Kt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ee(this,Cr,G(this,Cr).filter(r=>r!==n)),this.scheduleGc(),G(this,Kt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){G(this,Cr).length||(this.state.status==="pending"?this.scheduleGc():G(this,Kt).remove(this))}continue(){var n;return((n=G(this,Ji))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,a,l,u,h,f,m,y,b,v,E,x,w,S,k,O,D,C,T;Ee(this,Ji,UT({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(I,N)=>{Mt(this,Ir,ks).call(this,{type:"failed",failureCount:I,error:N})},onPause:()=>{Mt(this,Ir,ks).call(this,{type:"pause"})},onContinue:()=>{Mt(this,Ir,ks).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,Kt).canRun(this)}));const r=this.state.status==="pending",s=!G(this,Ji).canStart();try{if(!r){Mt(this,Ir,ks).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=G(this,Kt).config).onMutate)==null?void 0:o.call(i,n,this));const N=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,n));N!==this.state.context&&Mt(this,Ir,ks).call(this,{type:"pending",context:N,variables:n,isPaused:s})}const I=await G(this,Ji).start();return await((h=(u=G(this,Kt).config).onSuccess)==null?void 0:h.call(u,I,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,I,n,this.state.context)),await((b=(y=G(this,Kt).config).onSettled)==null?void 0:b.call(y,I,null,this.state.variables,this.state.context,this)),await((E=(v=this.options).onSettled)==null?void 0:E.call(v,I,null,n,this.state.context)),Mt(this,Ir,ks).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(x=G(this,Kt).config).onError)==null?void 0:w.call(x,I,n,this.state.context,this)),await((k=(S=this.options).onError)==null?void 0:k.call(S,I,n,this.state.context)),await((D=(O=G(this,Kt).config).onSettled)==null?void 0:D.call(O,void 0,I,this.state.variables,this.state.context,this)),await((T=(C=this.options).onSettled)==null?void 0:T.call(C,void 0,I,n,this.state.context)),I}finally{Mt(this,Ir,ks).call(this,{type:"error",error:I})}}finally{G(this,Kt).runNext(this)}}},Cr=new WeakMap,Kt=new WeakMap,Ji=new WeakMap,Ir=new WeakSet,ks=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Yt.batch(()=>{G(this,Cr).forEach(s=>{s.onMutationUpdate(n)}),G(this,Kt).notify({mutation:this,type:"updated",action:n})})},iE);function BO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xn,Hc,oE,HO=(oE=class extends pf{constructor(e={}){super();De(this,xn);De(this,Hc);this.config=e,Ee(this,xn,new Map),Ee(this,Hc,Date.now())}build(e,n,r){const s=new $O({mutationCache:this,mutationId:++Pu(this,Hc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Yu(e),r=G(this,xn).get(n)??[];r.push(e),G(this,xn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Yu(e);if(G(this,xn).has(n)){const s=(r=G(this,xn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?G(this,xn).delete(n):G(this,xn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=G(this,xn).get(Yu(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=G(this,xn).get(Yu(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...G(this,xn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>y_(n,r))}findAll(e={}){return this.getAll().filter(n=>y_(e,n))}notify(e){Yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Yt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Xn))))}},xn=new WeakMap,Hc=new WeakMap,oE);function Yu(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function x_(t){return{onFetch:(e,n)=>{var h,f,m,y,b;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const E=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=MT(e.options,e.fetchOptions),w=async(S,k,O)=>{if(v)return Promise.reject();if(k==null&&S.pages.length)return Promise.resolve(S);const D={queryKey:e.queryKey,pageParam:k,direction:O?"backward":"forward",meta:e.options.meta};E(D);const C=await x(D),{maxPages:T}=e.options,I=O?PO:kO;return{pages:I(S.pages,C,T),pageParams:I(S.pageParams,k,T)}};if(s&&i.length){const S=s==="backward",k=S?WO:__,O={pages:i,pageParams:o},D=k(r,O);a=await w(O,D,S)}else{const S=t??i.length;do{const k=l===0?o[0]??r.initialPageParam:__(r,a);if(l>0&&k==null)break;a=await w(a,k),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var v,E;return(E=(v=e.options).persister)==null?void 0:E.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function __(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function WO(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var tt,Bs,Hs,wa,xa,Ws,_a,ba,aE,qO=(aE=class{constructor(t={}){De(this,tt);De(this,Bs);De(this,Hs);De(this,wa);De(this,xa);De(this,Ws);De(this,_a);De(this,ba);Ee(this,tt,t.queryCache||new zO),Ee(this,Bs,t.mutationCache||new HO),Ee(this,Hs,t.defaultOptions||{}),Ee(this,wa,new Map),Ee(this,xa,new Map),Ee(this,Ws,0)}mount(){Pu(this,Ws)._++,G(this,Ws)===1&&(Ee(this,_a,LT.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,tt).onFocus())})),Ee(this,ba,hh.subscribe(async t=>{t&&(await this.resumePausedMutations(),G(this,tt).onOnline())})))}unmount(){var t,e;Pu(this,Ws)._--,G(this,Ws)===0&&((t=G(this,_a))==null||t.call(this),Ee(this,_a,void 0),(e=G(this,ba))==null||e.call(this),Ee(this,ba,void 0))}isFetching(t){return G(this,tt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return G(this,Bs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,tt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=G(this,tt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(m_(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return G(this,tt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=G(this,tt).get(r.queryHash),i=s==null?void 0:s.state.data,o=TO(e,i);if(o!==void 0)return G(this,tt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Yt.batch(()=>G(this,tt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=G(this,tt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=G(this,tt);Yt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=G(this,tt),r={type:"active",...t};return Yt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Yt.batch(()=>G(this,tt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Xn).catch(Xn)}invalidateQueries(t={},e={}){return Yt.batch(()=>{if(G(this,tt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Yt.batch(()=>G(this,tt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Xn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Xn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=G(this,tt).build(this,e);return n.isStaleByTime(m_(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Xn).catch(Xn)}fetchInfiniteQuery(t){return t.behavior=x_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Xn).catch(Xn)}ensureInfiniteQueryData(t){return t.behavior=x_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return hh.isOnline()?G(this,Bs).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,tt)}getMutationCache(){return G(this,Bs)}getDefaultOptions(){return G(this,Hs)}setDefaultOptions(t){Ee(this,Hs,t)}setQueryDefaults(t,e){G(this,wa).set(Tc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...G(this,wa).values()];let n={};return e.forEach(r=>{Cc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){G(this,xa).set(Tc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...G(this,xa).values()];let n={};return e.forEach(r=>{Cc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...G(this,Hs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ev(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Sv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...G(this,Hs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){G(this,tt).clear(),G(this,Bs).clear()}},tt=new WeakMap,Bs=new WeakMap,Hs=new WeakMap,wa=new WeakMap,xa=new WeakMap,Ws=new WeakMap,_a=new WeakMap,ba=new WeakMap,aE),GO=p.createContext(void 0),KO=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(GO.Provider,{value:t,children:e}));async function QO(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const YO=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await QO(n),await n.json())},XO=new qO({defaultOptions:{queries:{queryFn:YO({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),JO=1,ZO=1e6;let sm=0;function eM(){return sm=(sm+1)%Number.MAX_SAFE_INTEGER,sm.toString()}const im=new Map,b_=t=>{if(im.has(t))return;const e=setTimeout(()=>{im.delete(t),Yl({type:"REMOVE_TOAST",toastId:t})},ZO);im.set(t,e)},tM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,JO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?b_(n):t.toasts.forEach(r=>{b_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Id=[];let Ad={toasts:[]};function Yl(t){Ad=tM(Ad,t),Id.forEach(e=>{e(Ad)})}function nM({...t}){const e=eM(),n=s=>Yl({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Yl({type:"DISMISS_TOAST",toastId:e});return Yl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Xc(){const[t,e]=p.useState(Ad);return p.useEffect(()=>(Id.push(e),()=>{const n=Id.indexOf(e);n>-1&&Id.splice(n,1)}),[t]),{...t,toast:nM,dismiss:n=>Yl({type:"DISMISS_TOAST",toastId:n})}}function ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function E_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $T(...t){return e=>{let n=!1;const r=t.map(s=>{const i=E_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():E_(t[s],null)}}}}function Le(...t){return p.useCallback($T(...t),t)}function rM(t,e){const n=p.createContext(e),r=i=>{const{children:o,...a}=i,l=p.useMemo(()=>a,Object.values(a));return c.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Hn(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),l=n.length;n=[...n,o];const u=f=>{var x;const{scope:m,children:y,...b}=f,v=((x=m==null?void 0:m[t])==null?void 0:x[l])||a,E=p.useMemo(()=>b,Object.values(b));return c.jsx(v.Provider,{value:E,children:y})};u.displayName=i+"Provider";function h(f,m){var v;const y=((v=m==null?void 0:m[t])==null?void 0:v[l])||a,b=p.useContext(y);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,sM(s,...e)]}function sM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(i)[`__scope${u}`];return{...a,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ka(t){const e=oM(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),l=a.find(aM);if(l){const u=l.props.children,h=a.map(f=>f===l?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return c.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return c.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var iM=ka("Slot");function oM(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const o=cM(s),a=lM(i,s.props);return s.type!==p.Fragment&&(a.ref=r?$T(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var BT=Symbol("radix.slottable");function HT(t){const e=({children:n})=>c.jsx(c.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=BT,e}function aM(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===BT}function lM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function cM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Tv(t){const e=t+"CollectionProvider",[n,r]=Hn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:E,children:x}=v,w=Se.useRef(null),S=Se.useRef(new Map).current;return c.jsx(s,{scope:E,itemMap:S,collectionRef:w,children:x})};o.displayName=e;const a=t+"CollectionSlot",l=ka(a),u=Se.forwardRef((v,E)=>{const{scope:x,children:w}=v,S=i(a,x),k=Le(E,S.collectionRef);return c.jsx(l,{ref:k,children:w})});u.displayName=a;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=ka(h),y=Se.forwardRef((v,E)=>{const{scope:x,children:w,...S}=v,k=Se.useRef(null),O=Le(E,k),D=i(h,x);return Se.useEffect(()=>(D.itemMap.set(k,{ref:k,...S}),()=>void D.itemMap.delete(k))),c.jsx(m,{[f]:"",ref:O,children:w})});y.displayName=h;function b(v){const E=i(t+"CollectionConsumer",v);return Se.useCallback(()=>{const w=E.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(E.itemMap.values()).sort((D,C)=>S.indexOf(D.ref.current)-S.indexOf(C.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:u,ItemSlot:y},b,r]}var uM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],me=uM.reduce((t,e)=>{const n=ka(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function WT(t,e){t&&Fn.flushSync(()=>t.dispatchEvent(e))}function Zt(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function dM(t,e=globalThis==null?void 0:globalThis.document){const n=Zt(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var hM="DismissableLayer",Rg="dismissableLayer.update",fM="dismissableLayer.pointerDownOutside",pM="dismissableLayer.focusOutside",S_,qT=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jc=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,u=p.useContext(qT),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=p.useState({}),b=Le(e,C=>f(C)),v=Array.from(u.layers),[E]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(E),w=h?v.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,k=w>=x,O=gM(C=>{const T=C.target,I=[...u.branches].some(N=>N.contains(T));!k||I||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},m),D=yM(C=>{const T=C.target;[...u.branches].some(N=>N.contains(T))||(i==null||i(C),o==null||o(C),C.defaultPrevented||a==null||a())},m);return dM(C=>{w===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},m),p.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(S_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),T_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=S_)}},[h,m,n,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),T_())},[h,u]),p.useEffect(()=>{const C=()=>y({});return document.addEventListener(Rg,C),()=>document.removeEventListener(Rg,C)},[]),c.jsx(me.div,{...l,ref:b,style:{pointerEvents:S?k?"auto":"none":void 0,...t.style},onFocusCapture:ce(t.onFocusCapture,D.onFocusCapture),onBlurCapture:ce(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ce(t.onPointerDownCapture,O.onPointerDownCapture)})});Jc.displayName=hM;var mM="DismissableLayerBranch",GT=p.forwardRef((t,e)=>{const n=p.useContext(qT),r=p.useRef(null),s=Le(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),c.jsx(me.div,{...t,ref:s})});GT.displayName=mM;function gM(t,e=globalThis==null?void 0:globalThis.document){const n=Zt(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){KT(fM,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function yM(t,e=globalThis==null?void 0:globalThis.document){const n=Zt(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&KT(pM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function T_(){const t=new CustomEvent(Rg);document.dispatchEvent(t)}function KT(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?WT(s,i):s.dispatchEvent(i)}var vM=Jc,wM=GT,_t=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},xM="Portal",gf=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=p.useState(!1);_t(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Qj.createPortal(c.jsx(me.div,{...r,ref:e}),o):null});gf.displayName=xM;function _M(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var bo=t=>{const{present:e,children:n}=t,r=bM(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Le(r.ref,EM(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};bo.displayName="Presence";function bM(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[a,l]=_M(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Xu(r.current);i.current=a==="mounted"?u:"none"},[a]),_t(()=>{const u=r.current,h=s.current;if(h!==t){const m=i.current,y=Xu(u);t?l("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),_t(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=y=>{const v=Xu(r.current).includes(y.animationName);if(y.target===e&&v&&(l("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},m=y=>{y.target===e&&(i.current=Xu(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Xu(t){return(t==null?void 0:t.animationName)||"none"}function EM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function di({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=SM({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Zt(n),l=p.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&a(f)}else s(u)},[i,t,s,a]);return[o,l]}function SM({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),i=Zt(e);return p.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var TM="VisuallyHidden",Zc=p.forwardRef((t,e)=>c.jsx(me.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Zc.displayName=TM;var CM=Zc,Cv="ToastProvider",[Iv,IM,AM]=Tv("Toast"),[QT,qH]=Hn("Toast",[AM]),[NM,yf]=QT(Cv),YT=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=p.useState(null),[u,h]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cv}\`. Expected non-empty \`string\`.`),c.jsx(Iv.Provider,{scope:e,children:c.jsx(NM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:p.useCallback(()=>h(y=>y+1),[]),onToastRemove:p.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};YT.displayName=Cv;var XT="ToastViewport",RM=["F8"],kg="toast.viewportPause",Pg="toast.viewportResume",JT=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=RM,label:s="Notifications ({hotkey})",...i}=t,o=yf(XT,n),a=IM(n),l=p.useRef(null),u=p.useRef(null),h=p.useRef(null),f=p.useRef(null),m=Le(e,f,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;p.useEffect(()=>{const E=x=>{var S;r.length!==0&&r.every(k=>x[k]||x.code===k)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),p.useEffect(()=>{const E=l.current,x=f.current;if(b&&E&&x){const w=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(kg);x.dispatchEvent(D),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(Pg);x.dispatchEvent(D),o.isClosePausedRef.current=!1}},k=D=>{!E.contains(D.relatedTarget)&&S()},O=()=>{E.contains(document.activeElement)||S()};return E.addEventListener("focusin",w),E.addEventListener("focusout",k),E.addEventListener("pointermove",w),E.addEventListener("pointerleave",O),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{E.removeEventListener("focusin",w),E.removeEventListener("focusout",k),E.removeEventListener("pointermove",w),E.removeEventListener("pointerleave",O),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[b,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:E})=>{const w=a().map(S=>{const k=S.ref.current,O=[k,...BM(k)];return E==="forwards"?O:O.reverse()});return(E==="forwards"?w.reverse():w).flat()},[a]);return p.useEffect(()=>{const E=f.current;if(E){const x=w=>{var O,D,C;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const T=document.activeElement,I=w.shiftKey;if(w.target===E&&I){(O=u.current)==null||O.focus();return}const j=v({tabbingDirection:I?"backwards":"forwards"}),P=j.findIndex(B=>B===T);om(j.slice(P+1))?w.preventDefault():I?(D=u.current)==null||D.focus():(C=h.current)==null||C.focus()}};return E.addEventListener("keydown",x),()=>E.removeEventListener("keydown",x)}},[a,v]),c.jsxs(wM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&c.jsx(Dg,{ref:u,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"forwards"});om(E)}}),c.jsx(Iv.Slot,{scope:n,children:c.jsx(me.ol,{tabIndex:-1,...i,ref:m})}),b&&c.jsx(Dg,{ref:h,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"backwards"});om(E)}})]})});JT.displayName=XT;var ZT="ToastFocusProxy",Dg=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=yf(ZT,n);return c.jsx(Zc,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});Dg.displayName=ZT;var vf="Toast",kM="toast.swipeStart",PM="toast.swipeMove",DM="toast.swipeCancel",jM="toast.swipeEnd",eC=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,l]=di({prop:r,defaultProp:s,onChange:i});return c.jsx(bo,{present:n||a,children:c.jsx(LM,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Zt(t.onPause),onResume:Zt(t.onResume),onSwipeStart:ce(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ce(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ce(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ce(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});eC.displayName=vf;var[OM,MM]=QT(vf,{onClose(){}}),LM=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:y,...b}=t,v=yf(vf,n),[E,x]=p.useState(null),w=Le(e,B=>x(B)),S=p.useRef(null),k=p.useRef(null),O=s||v.duration,D=p.useRef(0),C=p.useRef(O),T=p.useRef(0),{onToastAdd:I,onToastRemove:N}=v,R=Zt(()=>{var oe;(E==null?void 0:E.contains(document.activeElement))&&((oe=v.viewport)==null||oe.focus()),o()}),j=p.useCallback(B=>{!B||B===1/0||(window.clearTimeout(T.current),D.current=new Date().getTime(),T.current=window.setTimeout(R,B))},[R]);p.useEffect(()=>{const B=v.viewport;if(B){const oe=()=>{j(C.current),u==null||u()},U=()=>{const Q=new Date().getTime()-D.current;C.current=C.current-Q,window.clearTimeout(T.current),l==null||l()};return B.addEventListener(kg,U),B.addEventListener(Pg,oe),()=>{B.removeEventListener(kg,U),B.removeEventListener(Pg,oe)}}},[v.viewport,O,l,u,j]),p.useEffect(()=>{i&&!v.isClosePausedRef.current&&j(O)},[i,O,v.isClosePausedRef,j]),p.useEffect(()=>(I(),()=>N()),[I,N]);const P=p.useMemo(()=>E?aC(E):null,[E]);return v.viewport?c.jsxs(c.Fragment,{children:[P&&c.jsx(VM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),c.jsx(OM,{scope:n,onClose:R,children:Fn.createPortal(c.jsx(Iv.ItemSlot,{scope:n,children:c.jsx(vM,{asChild:!0,onEscapeKeyDown:ce(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||R(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(me.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...b,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ce(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,R()))}),onPointerDown:ce(t.onPointerDown,B=>{B.button===0&&(S.current={x:B.clientX,y:B.clientY})}),onPointerMove:ce(t.onPointerMove,B=>{if(!S.current)return;const oe=B.clientX-S.current.x,U=B.clientY-S.current.y,Q=!!k.current,V=["left","right"].includes(v.swipeDirection),M=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,z=V?M(0,oe):0,K=V?0:M(0,U),W=B.pointerType==="touch"?10:2,ne={x:z,y:K},ee={originalEvent:B,delta:ne};Q?(k.current=ne,Ju(PM,f,ee,{discrete:!1})):C_(ne,v.swipeDirection,W)?(k.current=ne,Ju(kM,h,ee,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(oe)>W||Math.abs(U)>W)&&(S.current=null)}),onPointerUp:ce(t.onPointerUp,B=>{const oe=k.current,U=B.target;if(U.hasPointerCapture(B.pointerId)&&U.releasePointerCapture(B.pointerId),k.current=null,S.current=null,oe){const Q=B.currentTarget,V={originalEvent:B,delta:oe};C_(oe,v.swipeDirection,v.swipeThreshold)?Ju(jM,y,V,{discrete:!0}):Ju(DM,m,V,{discrete:!0}),Q.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),VM=t=>{const{__scopeToast:e,children:n,...r}=t,s=yf(vf,e),[i,o]=p.useState(!1),[a,l]=p.useState(!1);return zM(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:c.jsx(gf,{asChild:!0,children:c.jsx(Zc,{...r,children:i&&c.jsxs(c.Fragment,{children:[s.label," ",n]})})})},FM="ToastTitle",tC=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(me.div,{...r,ref:e})});tC.displayName=FM;var UM="ToastDescription",nC=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(me.div,{...r,ref:e})});nC.displayName=UM;var rC="ToastAction",sC=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?c.jsx(oC,{altText:n,asChild:!0,children:c.jsx(Av,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${rC}\`. Expected non-empty \`string\`.`),null)});sC.displayName=rC;var iC="ToastClose",Av=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=MM(iC,n);return c.jsx(oC,{asChild:!0,children:c.jsx(me.button,{type:"button",...r,ref:e,onClick:ce(t.onClick,s.onClose)})})});Av.displayName=iC;var oC=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return c.jsx(me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function aC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),$M(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...aC(r))}}),e}function Ju(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?WT(s,i):s.dispatchEvent(i)}var C_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function zM(t=()=>{}){const e=Zt(t);_t(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function $M(t){return t.nodeType===t.ELEMENT_NODE}function BM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function om(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var HM=YT,lC=JT,cC=eC,uC=tC,dC=nC,hC=sC,fC=Av;function pC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=pC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function mC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=pC(t))&&(r&&(r+=" "),r+=e);return r}const I_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,A_=mC,eu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return A_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const m=I_(h)||I_(f);return s[u][m]}),a=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...y}=h;return Object.entries(y).every(b=>{let[v,E]=b;return Array.isArray(E)?E.includes({...i,...a}[v]):{...i,...a}[v]===E})?[...u,f,m]:u},[]);return A_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>p.createElement("svg",{ref:l,...qM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gC("lucide",s),...a},[...o.map(([u,h])=>p.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(t,e)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(GM,{ref:i,iconNode:e,className:gC(`lucide-${WM(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=ge("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ge("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=ge("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=ge("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=ge("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=ge("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=ge("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=ge("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ge("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=ge("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=ge("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=ge("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fi=ge("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=ge("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ge("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=ge("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=ge("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=ge("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=ge("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=ge("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ge("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=ge("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=ge("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=ge("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=ge("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=ge("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=ge("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=ge("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ge("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=ge("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=ge("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=ge("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=ge("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=ge("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=ge("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=ge("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=ge("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=ge("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=ge("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=ge("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ge("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=ge("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=ge("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=ge("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=ge("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=ge("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kv="-",m4=t=>{const e=y4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(kv);return a[0]===""&&a.length!==1&&a.shift(),TC(a,e)||g4(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},TC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?TC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(kv);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},j_=/^\[(.+)\]$/,g4=t=>{if(j_.test(t)){const e=j_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},y4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return w4(Object.entries(t.classGroups),n).forEach(([i,o])=>{Lg(o,r,i,e)}),r},Lg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:O_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(v4(s)){Lg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Lg(o,O_(e,i),n,r)})})},O_=(t,e)=>{let n=t;return e.split(kv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},v4=t=>t.isThemeGetter,w4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,x4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},CC="!",_4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let u=0,h=0,f;for(let E=0;E<a.length;E++){let x=a[E];if(u===0){if(x===s&&(r||a.slice(E,E+i)===e)){l.push(a.slice(h,E)),h=E+i;continue}if(x==="/"){f=E;continue}}x==="["?u++:x==="]"&&u--}const m=l.length===0?a:a.substring(h),y=m.startsWith(CC),b=y?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},b4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},E4=t=>({cache:x4(t.cacheSize),parseClassName:_4(t),...m4(t)}),S4=/\s+/,T4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(S4);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=n(u);let b=!!y,v=r(b?m.substring(0,y):m);if(!v){if(!b){a=u+(a.length>0?" "+a:a);continue}if(v=r(m),!v){a=u+(a.length>0?" "+a:a);continue}b=!1}const E=b4(h).join(":"),x=f?E+CC:E,w=x+v;if(i.includes(w))continue;i.push(w);const S=s(v,b);for(let k=0;k<S.length;++k){const O=S[k];i.push(x+O)}a=u+(a.length>0?" "+a:a)}return a};function C4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=IC(e))&&(r&&(r+=" "),r+=n);return r}const IC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=IC(t[r]))&&(n&&(n+=" "),n+=e);return n};function I4(t,...e){let n,r,s,i=o;function o(l){const u=e.reduce((h,f)=>f(h),t());return n=E4(u),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const u=r(l);if(u)return u;const h=T4(l,n);return s(l,h),h}return function(){return i(C4.apply(null,arguments))}}const We=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},AC=/^\[(?:([a-z-]+):)?(.+)\]$/i,A4=/^\d+\/\d+$/,N4=new Set(["px","full","screen"]),R4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,k4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,P4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,D4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,j4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wr=t=>ia(t)||N4.has(t)||A4.test(t),As=t=>Ka(t,"length",$4),ia=t=>!!t&&!Number.isNaN(Number(t)),am=t=>Ka(t,"number",ia),kl=t=>!!t&&Number.isInteger(Number(t)),O4=t=>t.endsWith("%")&&ia(t.slice(0,-1)),_e=t=>AC.test(t),Ns=t=>R4.test(t),M4=new Set(["length","size","percentage"]),L4=t=>Ka(t,M4,NC),V4=t=>Ka(t,"position",NC),F4=new Set(["image","url"]),U4=t=>Ka(t,F4,H4),z4=t=>Ka(t,"",B4),Pl=()=>!0,Ka=(t,e,n)=>{const r=AC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},$4=t=>k4.test(t)&&!P4.test(t),NC=()=>!1,B4=t=>D4.test(t),H4=t=>j4.test(t),W4=()=>{const t=We("colors"),e=We("spacing"),n=We("blur"),r=We("brightness"),s=We("borderColor"),i=We("borderRadius"),o=We("borderSpacing"),a=We("borderWidth"),l=We("contrast"),u=We("grayscale"),h=We("hueRotate"),f=We("invert"),m=We("gap"),y=We("gradientColorStops"),b=We("gradientColorStopPositions"),v=We("inset"),E=We("margin"),x=We("opacity"),w=We("padding"),S=We("saturate"),k=We("scale"),O=We("sepia"),D=We("skew"),C=We("space"),T=We("translate"),I=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto",_e,e],j=()=>[_e,e],P=()=>["",Wr,As],B=()=>["auto",ia,_e],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",_e],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],K=()=>[ia,_e];return{cacheSize:500,separator:":",theme:{colors:[Pl],spacing:[Wr,As],blur:["none","",Ns,_e],brightness:K(),borderColor:[t],borderRadius:["none","","full",Ns,_e],borderSpacing:j(),borderWidth:P(),contrast:K(),grayscale:M(),hueRotate:K(),invert:M(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[O4,As],inset:R(),margin:R(),opacity:K(),padding:j(),saturate:K(),scale:K(),sepia:M(),skew:K(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Ns]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),_e]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",kl,_e]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",kl,_e]}],"grid-cols":[{"grid-cols":[Pl]}],"col-start-end":[{col:["auto",{span:["full",kl,_e]},_e]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Pl]}],"row-start-end":[{row:["auto",{span:[kl,_e]},_e]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[Ns]},Ns]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ns,As]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",am]}],"font-family":[{font:[Pl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",ia,am]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Wr,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Wr,As]}],"underline-offset":[{"underline-offset":["auto",Wr,_e]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),V4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",L4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},U4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:U()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Wr,_e]}],"outline-w":[{outline:[Wr,As]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Wr,As]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ns,z4]}],"shadow-color":[{shadow:[Pl]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ns,_e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[kl,_e]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Wr,As,am]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},q4=I4(W4);function X(...t){return q4(mC(t))}const G4=HM,RC=p.forwardRef(({className:t,...e},n)=>c.jsx(lC,{ref:n,className:X("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));RC.displayName=lC.displayName;const K4=eu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),kC=p.forwardRef(({className:t,variant:e,...n},r)=>c.jsx(cC,{ref:r,className:X(K4({variant:e}),t),...n}));kC.displayName=cC.displayName;const Q4=p.forwardRef(({className:t,...e},n)=>c.jsx(hC,{ref:n,className:X("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Q4.displayName=hC.displayName;const PC=p.forwardRef(({className:t,...e},n)=>c.jsx(fC,{ref:n,className:X("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:c.jsx(xf,{className:"h-4 w-4"})}));PC.displayName=fC.displayName;const DC=p.forwardRef(({className:t,...e},n)=>c.jsx(uC,{ref:n,className:X("text-sm font-semibold",t),...e}));DC.displayName=uC.displayName;const jC=p.forwardRef(({className:t,...e},n)=>c.jsx(dC,{ref:n,className:X("text-sm opacity-90",t),...e}));jC.displayName=dC.displayName;function Y4(){const{toasts:t}=Xc();return c.jsxs(G4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return c.jsxs(kC,{...i,children:[c.jsxs("div",{className:"grid gap-1",children:[n&&c.jsx(DC,{children:n}),r&&c.jsx(jC,{children:r})]}),s,c.jsx(PC,{})]},e)}),c.jsx(RC,{})]})}var X4=wE[" useId ".trim().toString()]||(()=>{}),J4=0;function ts(t){const[e,n]=p.useState(X4());return _t(()=>{n(r=>r??String(J4++))},[t]),e?`radix-${e}`:""}const Z4=["top","right","bottom","left"],pi=Math.min,bn=Math.max,fh=Math.round,Zu=Math.floor,Dr=t=>({x:t,y:t}),eL={left:"right",right:"left",bottom:"top",top:"bottom"},tL={start:"end",end:"start"};function Vg(t,e,n){return bn(t,pi(e,n))}function us(t,e){return typeof t=="function"?t(e):t}function ds(t){return t.split("-")[0]}function Qa(t){return t.split("-")[1]}function Pv(t){return t==="x"?"y":"x"}function Dv(t){return t==="y"?"height":"width"}function mi(t){return["top","bottom"].includes(ds(t))?"y":"x"}function jv(t){return Pv(mi(t))}function nL(t,e,n){n===void 0&&(n=!1);const r=Qa(t),s=jv(t),i=Dv(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=ph(o)),[o,ph(o)]}function rL(t){const e=ph(t);return[Fg(t),e,Fg(e)]}function Fg(t){return t.replace(/start|end/g,e=>tL[e])}function sL(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function iL(t,e,n,r){const s=Qa(t);let i=sL(ds(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Fg)))),i}function ph(t){return t.replace(/left|right|bottom|top/g,e=>eL[e])}function oL(t){return{top:0,right:0,bottom:0,left:0,...t}}function OC(t){return typeof t!="number"?oL(t):{top:t,right:t,bottom:t,left:t}}function mh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function M_(t,e,n){let{reference:r,floating:s}=t;const i=mi(e),o=jv(e),a=Dv(o),l=ds(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let y;switch(l){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Qa(e)){case"start":y[o]-=m*(n&&u?-1:1);break;case"end":y[o]+=m*(n&&u?-1:1);break}return y}const aL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=M_(u,r,l),m=r,y={},b=0;for(let v=0;v<a.length;v++){const{name:E,fn:x}=a[v],{x:w,y:S,data:k,reset:O}=await x({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:u,platform:o,elements:{reference:t,floating:e}});h=w??h,f=S??f,y={...y,[E]:{...y[E],...k}},O&&b<=50&&(b++,typeof O=="object"&&(O.placement&&(m=O.placement),O.rects&&(u=O.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):O.rects),{x:h,y:f}=M_(u,m,l)),v=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:y}};async function Ac(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:y=0}=us(e,t),b=OC(y),E=a[m?f==="floating"?"reference":"floating":f],x=mh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:l})),w=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},O=mh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(x.top-O.top+b.top)/k.y,bottom:(O.bottom-x.bottom+b.bottom)/k.y,left:(x.left-O.left+b.left)/k.x,right:(O.right-x.right+b.right)/k.x}}const lL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:h=0}=us(t,e)||{};if(u==null)return{};const f=OC(h),m={x:n,y:r},y=jv(s),b=Dv(y),v=await o.getDimensions(u),E=y==="y",x=E?"top":"left",w=E?"bottom":"right",S=E?"clientHeight":"clientWidth",k=i.reference[b]+i.reference[y]-m[y]-i.floating[b],O=m[y]-i.reference[y],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=D?D[S]:0;(!C||!await(o.isElement==null?void 0:o.isElement(D)))&&(C=a.floating[S]||i.floating[b]);const T=k/2-O/2,I=C/2-v[b]/2-1,N=pi(f[x],I),R=pi(f[w],I),j=N,P=C-v[b]-R,B=C/2-v[b]/2+T,oe=Vg(j,B,P),U=!l.arrow&&Qa(s)!=null&&B!==oe&&i.reference[b]/2-(B<j?N:R)-v[b]/2<0,Q=U?B<j?B-j:B-P:0;return{[y]:m[y]+Q,data:{[y]:oe,centerOffset:B-oe-Q,...U&&{alignmentOffset:Q}},reset:U}}}),cL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...E}=us(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=ds(s),w=mi(a),S=ds(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(u.floating)),O=m||(S||!v?[ph(a)]:rL(a)),D=b!=="none";!m&&D&&O.push(...iL(a,v,b,k));const C=[a,...O],T=await Ac(e,E),I=[];let N=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&I.push(T[x]),f){const B=nL(s,o,k);I.push(T[B[0]],T[B[1]])}if(N=[...N,{placement:s,overflows:I}],!I.every(B=>B<=0)){var R,j;const B=(((R=i.flip)==null?void 0:R.index)||0)+1,oe=C[B];if(oe)return{data:{index:B,overflows:N},reset:{placement:oe}};let U=(j=N.filter(Q=>Q.overflows[0]<=0).sort((Q,V)=>Q.overflows[1]-V.overflows[1])[0])==null?void 0:j.placement;if(!U)switch(y){case"bestFit":{var P;const Q=(P=N.filter(V=>{if(D){const M=mi(V.placement);return M===w||M==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(M=>M>0).reduce((M,z)=>M+z,0)]).sort((V,M)=>V[1]-M[1])[0])==null?void 0:P[0];Q&&(U=Q);break}case"initialPlacement":U=a;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function L_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function V_(t){return Z4.some(e=>t[e]>=0)}const uL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=us(t,e);switch(r){case"referenceHidden":{const i=await Ac(e,{...s,elementContext:"reference"}),o=L_(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:V_(o)}}}case"escaped":{const i=await Ac(e,{...s,altBoundary:!0}),o=L_(i,n.floating);return{data:{escapedOffsets:o,escaped:V_(o)}}}default:return{}}}}};async function dL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ds(n),a=Qa(n),l=mi(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&l?-1:1,f=us(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof b=="number"&&(y=a==="end"?b*-1:b),l?{x:y*h,y:m*u}:{x:m*u,y:y*h}}const hL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await dL(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},fL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x,y:w}=E;return{x,y:w}}},...l}=us(t,e),u={x:n,y:r},h=await Ac(e,l),f=mi(ds(s)),m=Pv(f);let y=u[m],b=u[f];if(i){const E=m==="y"?"top":"left",x=m==="y"?"bottom":"right",w=y+h[E],S=y-h[x];y=Vg(w,y,S)}if(o){const E=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=b+h[E],S=b-h[x];b=Vg(w,b,S)}const v=a.fn({...e,[m]:y,[f]:b});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[f]:o}}}}}},pL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=us(t,e),h={x:n,y:r},f=mi(s),m=Pv(f);let y=h[m],b=h[f];const v=us(a,e),E=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const S=m==="y"?"height":"width",k=i.reference[m]-i.floating[S]+E.mainAxis,O=i.reference[m]+i.reference[S]-E.mainAxis;y<k?y=k:y>O&&(y=O)}if(u){var x,w;const S=m==="y"?"width":"height",k=["top","left"].includes(ds(s)),O=i.reference[f]-i.floating[S]+(k&&((x=o.offset)==null?void 0:x[f])||0)+(k?0:E.crossAxis),D=i.reference[f]+i.reference[S]+(k?0:((w=o.offset)==null?void 0:w[f])||0)-(k?E.crossAxis:0);b<O?b=O:b>D&&(b=D)}return{[m]:y,[f]:b}}}},mL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=us(t,e),h=await Ac(e,u),f=ds(s),m=Qa(s),y=mi(s)==="y",{width:b,height:v}=i.floating;let E,x;f==="top"||f==="bottom"?(E=f,x=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=f,E=m==="end"?"top":"bottom");const w=v-h.top-h.bottom,S=b-h.left-h.right,k=pi(v-h[E],w),O=pi(b-h[x],S),D=!e.middlewareData.shift;let C=k,T=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(C=w),D&&!m){const N=bn(h.left,0),R=bn(h.right,0),j=bn(h.top,0),P=bn(h.bottom,0);y?T=b-2*(N!==0||R!==0?N+R:bn(h.left,h.right)):C=v-2*(j!==0||P!==0?j+P:bn(h.top,h.bottom))}await l({...e,availableWidth:T,availableHeight:C});const I=await o.getDimensions(a.floating);return b!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function _f(){return typeof window<"u"}function Ya(t){return MC(t)?(t.nodeName||"").toLowerCase():"#document"}function In(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ur(t){var e;return(e=(MC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function MC(t){return _f()?t instanceof Node||t instanceof In(t).Node:!1}function dr(t){return _f()?t instanceof Element||t instanceof In(t).Element:!1}function Lr(t){return _f()?t instanceof HTMLElement||t instanceof In(t).HTMLElement:!1}function F_(t){return!_f()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof In(t).ShadowRoot}function tu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=hr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function gL(t){return["table","td","th"].includes(Ya(t))}function bf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Ov(t){const e=Mv(),n=dr(t)?hr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function yL(t){let e=gi(t);for(;Lr(e)&&!Da(e);){if(Ov(e))return e;if(bf(e))return null;e=gi(e)}return null}function Mv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Da(t){return["html","body","#document"].includes(Ya(t))}function hr(t){return In(t).getComputedStyle(t)}function Ef(t){return dr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function gi(t){if(Ya(t)==="html")return t;const e=t.assignedSlot||t.parentNode||F_(t)&&t.host||Ur(t);return F_(e)?e.host:e}function LC(t){const e=gi(t);return Da(e)?t.ownerDocument?t.ownerDocument.body:t.body:Lr(e)&&tu(e)?e:LC(e)}function Nc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=LC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=In(s);if(i){const a=Ug(o);return e.concat(o,o.visualViewport||[],tu(s)?s:[],a&&n?Nc(a):[])}return e.concat(s,Nc(s,[],n))}function Ug(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function VC(t){const e=hr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Lr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=fh(n)!==i||fh(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Lv(t){return dr(t)?t:t.contextElement}function oa(t){const e=Lv(t);if(!Lr(e))return Dr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=VC(e);let o=(i?fh(n.width):n.width)/r,a=(i?fh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const vL=Dr(0);function FC(t){const e=In(t);return!Mv()||!e.visualViewport?vL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function wL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==In(t)?!1:e}function uo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Lv(t);let o=Dr(1);e&&(r?dr(r)&&(o=oa(r)):o=oa(t));const a=wL(i,n,r)?FC(i):Dr(0);let l=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=In(i),y=r&&dr(r)?In(r):r;let b=m,v=Ug(b);for(;v&&r&&y!==b;){const E=oa(v),x=v.getBoundingClientRect(),w=hr(v),S=x.left+(v.clientLeft+parseFloat(w.paddingLeft))*E.x,k=x.top+(v.clientTop+parseFloat(w.paddingTop))*E.y;l*=E.x,u*=E.y,h*=E.x,f*=E.y,l+=S,u+=k,b=In(v),v=Ug(b)}}return mh({width:h,height:f,x:l,y:u})}function Vv(t,e){const n=Ef(t).scrollLeft;return e?e.left+n:uo(Ur(t)).left+n}function UC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Vv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function xL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Ur(r),a=e?bf(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Dr(1);const h=Dr(0),f=Lr(r);if((f||!f&&!i)&&((Ya(r)!=="body"||tu(o))&&(l=Ef(r)),Lr(r))){const y=uo(r);u=oa(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const m=o&&!f&&!i?UC(o,l,!0):Dr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-l.scrollTop*u.y+h.y+m.y}}function _L(t){return Array.from(t.getClientRects())}function bL(t){const e=Ur(t),n=Ef(t),r=t.ownerDocument.body,s=bn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=bn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Vv(t);const a=-n.scrollTop;return hr(r).direction==="rtl"&&(o+=bn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function EL(t,e){const n=In(t),r=Ur(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=Mv();(!u||u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function SL(t,e){const n=uo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Lr(t)?oa(t):Dr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,u=r*i.y;return{width:o,height:a,x:l,y:u}}function U_(t,e,n){let r;if(e==="viewport")r=EL(t,n);else if(e==="document")r=bL(Ur(t));else if(dr(e))r=SL(e,n);else{const s=FC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return mh(r)}function zC(t,e){const n=gi(t);return n===e||!dr(n)||Da(n)?!1:hr(n).position==="fixed"||zC(n,e)}function TL(t,e){const n=e.get(t);if(n)return n;let r=Nc(t,[],!1).filter(a=>dr(a)&&Ya(a)!=="body"),s=null;const i=hr(t).position==="fixed";let o=i?gi(t):t;for(;dr(o)&&!Da(o);){const a=hr(o),l=Ov(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||tu(o)&&!l&&zC(t,o))?r=r.filter(h=>h!==o):s=a,o=gi(o)}return e.set(t,r),r}function CL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?bf(e)?[]:TL(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,h)=>{const f=U_(e,h,s);return u.top=bn(f.top,u.top),u.right=pi(f.right,u.right),u.bottom=pi(f.bottom,u.bottom),u.left=bn(f.left,u.left),u},U_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IL(t){const{width:e,height:n}=VC(t);return{width:e,height:n}}function AL(t,e,n){const r=Lr(e),s=Ur(e),i=n==="fixed",o=uo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Dr(0);if(r||!r&&!i)if((Ya(e)!=="body"||tu(s))&&(a=Ef(e)),r){const m=uo(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&(l.x=Vv(s));const u=s&&!r&&!i?UC(s,a):Dr(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function lm(t){return hr(t).position==="static"}function z_(t,e){if(!Lr(t)||hr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ur(t)===n&&(n=n.ownerDocument.body),n}function $C(t,e){const n=In(t);if(bf(t))return n;if(!Lr(t)){let s=gi(t);for(;s&&!Da(s);){if(dr(s)&&!lm(s))return s;s=gi(s)}return n}let r=z_(t,e);for(;r&&gL(r)&&lm(r);)r=z_(r,e);return r&&Da(r)&&lm(r)&&!Ov(r)?n:r||yL(t)||n}const NL=async function(t){const e=this.getOffsetParent||$C,n=this.getDimensions,r=await n(t.floating);return{reference:AL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function RL(t){return hr(t).direction==="rtl"}const kL={convertOffsetParentRelativeRectToViewportRelativeRect:xL,getDocumentElement:Ur,getClippingRect:CL,getOffsetParent:$C,getElementRects:NL,getClientRects:_L,getDimensions:IL,getScale:oa,isElement:dr,isRTL:RL};function BC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function PL(t,e){let n=null,r;const s=Ur(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:m,height:y}=u;if(a||e(),!m||!y)return;const b=Zu(f),v=Zu(s.clientWidth-(h+m)),E=Zu(s.clientHeight-(f+y)),x=Zu(h),S={rootMargin:-b+"px "+-v+"px "+-E+"px "+-x+"px",threshold:bn(0,pi(1,l))||1};let k=!0;function O(D){const C=D[0].intersectionRatio;if(C!==l){if(!k)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!BC(u,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(O,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(O,S)}n.observe(t)}return o(!0),i}function DL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Lv(t),h=s||i?[...u?Nc(u):[],...Nc(e)]:[];h.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const f=u&&a?PL(u,n):null;let m=-1,y=null;o&&(y=new ResizeObserver(x=>{let[w]=x;w&&w.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=y)==null||S.observe(e)})),n()}),u&&!l&&y.observe(u),y.observe(e));let b,v=l?uo(t):null;l&&E();function E(){const x=uo(t);v&&!BC(v,x)&&n(),v=x,b=requestAnimationFrame(E)}return n(),()=>{var x;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(x=y)==null||x.disconnect(),y=null,l&&cancelAnimationFrame(b)}}const jL=hL,OL=fL,ML=cL,LL=mL,VL=uL,$_=lL,FL=pL,UL=(t,e,n)=>{const r=new Map,s={platform:kL,...n},i={...s.platform,_c:r};return aL(t,e,{...s,platform:i})};var Nd=typeof document<"u"?p.useLayoutEffect:p.useEffect;function gh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!gh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!gh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function HC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function B_(t,e){const n=HC(t);return Math.round(e*n)/n}function cm(t){const e=p.useRef(t);return Nd(()=>{e.current=t}),e}function zL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[h,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=p.useState(r);gh(m,r)||y(r);const[b,v]=p.useState(null),[E,x]=p.useState(null),w=p.useCallback(V=>{V!==D.current&&(D.current=V,v(V))},[]),S=p.useCallback(V=>{V!==C.current&&(C.current=V,x(V))},[]),k=i||b,O=o||E,D=p.useRef(null),C=p.useRef(null),T=p.useRef(h),I=l!=null,N=cm(l),R=cm(s),j=cm(u),P=p.useCallback(()=>{if(!D.current||!C.current)return;const V={placement:e,strategy:n,middleware:m};R.current&&(V.platform=R.current),UL(D.current,C.current,V).then(M=>{const z={...M,isPositioned:j.current!==!1};B.current&&!gh(T.current,z)&&(T.current=z,Fn.flushSync(()=>{f(z)}))})},[m,e,n,R,j]);Nd(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[u]);const B=p.useRef(!1);Nd(()=>(B.current=!0,()=>{B.current=!1}),[]),Nd(()=>{if(k&&(D.current=k),O&&(C.current=O),k&&O){if(N.current)return N.current(k,O,P);P()}},[k,O,P,N,I]);const oe=p.useMemo(()=>({reference:D,floating:C,setReference:w,setFloating:S}),[w,S]),U=p.useMemo(()=>({reference:k,floating:O}),[k,O]),Q=p.useMemo(()=>{const V={position:n,left:0,top:0};if(!U.floating)return V;const M=B_(U.floating,h.x),z=B_(U.floating,h.y);return a?{...V,transform:"translate("+M+"px, "+z+"px)",...HC(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:z}},[n,a,U.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:P,refs:oe,elements:U,floatingStyles:Q}),[h,P,oe,U,Q])}const $L=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?$_({element:r.current,padding:s}).fn(n):{}:r?$_({element:r,padding:s}).fn(n):{}}}},BL=(t,e)=>({...jL(t),options:[t,e]}),HL=(t,e)=>({...OL(t),options:[t,e]}),WL=(t,e)=>({...FL(t),options:[t,e]}),qL=(t,e)=>({...ML(t),options:[t,e]}),GL=(t,e)=>({...LL(t),options:[t,e]}),KL=(t,e)=>({...VL(t),options:[t,e]}),QL=(t,e)=>({...$L(t),options:[t,e]});var YL="Arrow",WC=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return c.jsx(me.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});WC.displayName=YL;var XL=WC;function qC(t){const[e,n]=p.useState(void 0);return _t(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Fv="Popper",[GC,Sf]=Hn(Fv),[JL,KC]=GC(Fv),QC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return c.jsx(JL,{scope:e,anchor:r,onAnchorChange:s,children:n})};QC.displayName=Fv;var YC="PopperAnchor",XC=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=KC(YC,n),o=p.useRef(null),a=Le(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:c.jsx(me.div,{...s,ref:a})});XC.displayName=YC;var Uv="PopperContent",[ZL,eV]=GC(Uv),JC=p.forwardRef((t,e)=>{var H,re,we,te,de,he;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:b,...v}=t,E=KC(Uv,n),[x,w]=p.useState(null),S=Le(e,Oe=>w(Oe)),[k,O]=p.useState(null),D=qC(k),C=(D==null?void 0:D.width)??0,T=(D==null?void 0:D.height)??0,I=r+(i!=="center"?"-"+i:""),N=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},R=Array.isArray(u)?u:[u],j=R.length>0,P={padding:N,boundary:R.filter(nV),altBoundary:j},{refs:B,floatingStyles:oe,placement:U,isPositioned:Q,middlewareData:V}=zL({strategy:"fixed",placement:I,whileElementsMounted:(...Oe)=>DL(...Oe,{animationFrame:y==="always"}),elements:{reference:E.anchor},middleware:[BL({mainAxis:s+T,alignmentAxis:o}),l&&HL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?WL():void 0,...P}),l&&qL({...P}),GL({...P,apply:({elements:Oe,rects:Ve,availableWidth:sn,availableHeight:jt})=>{const{width:kn,height:Ri}=Ve.reference,Be=Oe.floating.style;Be.setProperty("--radix-popper-available-width",`${sn}px`),Be.setProperty("--radix-popper-available-height",`${jt}px`),Be.setProperty("--radix-popper-anchor-width",`${kn}px`),Be.setProperty("--radix-popper-anchor-height",`${Ri}px`)}}),k&&QL({element:k,padding:a}),rV({arrowWidth:C,arrowHeight:T}),m&&KL({strategy:"referenceHidden",...P})]}),[M,z]=tI(U),K=Zt(b);_t(()=>{Q&&(K==null||K())},[Q,K]);const W=(H=V.arrow)==null?void 0:H.x,ne=(re=V.arrow)==null?void 0:re.y,ee=((we=V.arrow)==null?void 0:we.centerOffset)!==0,[ue,le]=p.useState();return _t(()=>{x&&le(window.getComputedStyle(x).zIndex)},[x]),c.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...oe,transform:Q?oe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ue,"--radix-popper-transform-origin":[(te=V.transformOrigin)==null?void 0:te.x,(de=V.transformOrigin)==null?void 0:de.y].join(" "),...((he=V.hide)==null?void 0:he.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(ZL,{scope:n,placedSide:M,onArrowChange:O,arrowX:W,arrowY:ne,shouldHideArrow:ee,children:c.jsx(me.div,{"data-side":M,"data-align":z,...v,ref:S,style:{...v.style,animation:Q?void 0:"none"}})})})});JC.displayName=Uv;var ZC="PopperArrow",tV={top:"bottom",right:"left",bottom:"top",left:"right"},eI=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=eV(ZC,r),o=tV[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(XL,{...s,ref:n,style:{...s.style,display:"block"}})})});eI.displayName=ZC;function nV(t){return t!==null}var rV=t=>({name:"transformOrigin",options:t,fn(e){var E,x,w;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,h]=tI(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,y=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let b="",v="";return u==="bottom"?(b=o?f:`${m}px`,v=`${-l}px`):u==="top"?(b=o?f:`${m}px`,v=`${r.floating.height+l}px`):u==="right"?(b=`${-l}px`,v=o?f:`${y}px`):u==="left"&&(b=`${r.floating.width+l}px`,v=o?f:`${y}px`),{data:{x:b,y:v}}}});function tI(t){const[e,n="center"]=t.split("-");return[e,n]}var nI=QC,rI=XC,sI=JC,iI=eI,[Tf,GH]=Hn("Tooltip",[Sf]),Cf=Sf(),oI="TooltipProvider",sV=700,zg="tooltip.open",[iV,zv]=Tf(oI),aI=t=>{const{__scopeTooltip:e,delayDuration:n=sV,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=p.useRef(!0),a=p.useRef(!1),l=p.useRef(0);return p.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c.jsx(iV,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:p.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};aI.displayName=oI;var If="Tooltip",[oV,Af]=Tf(If),lI=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=zv(If,t.__scopeTooltip),u=Cf(e),[h,f]=p.useState(null),m=ts(),y=p.useRef(0),b=o??l.disableHoverableContent,v=a??l.delayDuration,E=p.useRef(!1),[x=!1,w]=di({prop:r,defaultProp:s,onChange:C=>{C?(l.onOpen(),document.dispatchEvent(new CustomEvent(zg))):l.onClose(),i==null||i(C)}}),S=p.useMemo(()=>x?E.current?"delayed-open":"instant-open":"closed",[x]),k=p.useCallback(()=>{window.clearTimeout(y.current),y.current=0,E.current=!1,w(!0)},[w]),O=p.useCallback(()=>{window.clearTimeout(y.current),y.current=0,w(!1)},[w]),D=p.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{E.current=!0,w(!0),y.current=0},v)},[v,w]);return p.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),c.jsx(nI,{...u,children:c.jsx(oV,{scope:e,contentId:m,open:x,stateAttribute:S,trigger:h,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{l.isOpenDelayedRef.current?D():k()},[l.isOpenDelayedRef,D,k]),onTriggerLeave:p.useCallback(()=>{b?O():(window.clearTimeout(y.current),y.current=0)},[O,b]),onOpen:k,onClose:O,disableHoverableContent:b,children:n})})};lI.displayName=If;var $g="TooltipTrigger",cI=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Af($g,n),i=zv($g,n),o=Cf(n),a=p.useRef(null),l=Le(e,a,s.onTriggerChange),u=p.useRef(!1),h=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),c.jsx(rI,{asChild:!0,...o,children:c.jsx(me.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:ce(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:ce(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:ce(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ce(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ce(t.onBlur,s.onClose),onClick:ce(t.onClick,s.onClose)})})});cI.displayName=$g;var aV="TooltipPortal",[KH,lV]=Tf(aV,{forceMount:void 0}),ja="TooltipContent",uI=p.forwardRef((t,e)=>{const n=lV(ja,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Af(ja,t.__scopeTooltip);return c.jsx(bo,{present:r||o.open,children:o.disableHoverableContent?c.jsx(dI,{side:s,...i,ref:e}):c.jsx(cV,{side:s,...i,ref:e})})}),cV=p.forwardRef((t,e)=>{const n=Af(ja,t.__scopeTooltip),r=zv(ja,t.__scopeTooltip),s=p.useRef(null),i=Le(e,s),[o,a]=p.useState(null),{trigger:l,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{a(null),f(!1)},[f]),y=p.useCallback((b,v)=>{const E=b.currentTarget,x={x:b.clientX,y:b.clientY},w=pV(x,E.getBoundingClientRect()),S=mV(x,w),k=gV(v.getBoundingClientRect()),O=vV([...S,...k]);a(O),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(l&&h){const b=E=>y(E,h),v=E=>y(E,l);return l.addEventListener("pointerleave",b),h.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",v)}}},[l,h,y,m]),p.useEffect(()=>{if(o){const b=v=>{const E=v.target,x={x:v.clientX,y:v.clientY},w=(l==null?void 0:l.contains(E))||(h==null?void 0:h.contains(E)),S=!yV(x,o);w?m():S&&(m(),u())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[l,h,o,u,m]),c.jsx(dI,{...t,ref:i})}),[uV,dV]=Tf(If,{isInside:!1}),hV=HT("TooltipContent"),dI=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Af(ja,n),u=Cf(n),{onClose:h}=l;return p.useEffect(()=>(document.addEventListener(zg,h),()=>document.removeEventListener(zg,h)),[h]),p.useEffect(()=>{if(l.trigger){const f=m=>{const y=m.target;y!=null&&y.contains(l.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,h]),c.jsx(Jc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:c.jsxs(sI,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(hV,{children:r}),c.jsx(uV,{scope:n,isInside:!0,children:c.jsx(CM,{id:l.contentId,role:"tooltip",children:s||r})})]})})});uI.displayName=ja;var hI="TooltipArrow",fV=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Cf(n);return dV(hI,n).isInside?null:c.jsx(iI,{...s,...r,ref:e})});fV.displayName=hI;function pV(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function mV(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function gV(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function yV(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,u=e[o].x,h=e[o].y;l>r!=h>r&&n<(u-a)*(r-l)/(h-l)+a&&(s=!s)}return s}function vV(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),wV(e)}function wV(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var xV=aI,_V=lI,bV=cI,fI=uI;const pI=xV,EV=_V,SV=bV,mI=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>c.jsx(fI,{ref:r,sideOffset:e,className:X("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));mI.displayName=fI.displayName;const TV="modulepreload",CV=function(t){return"/trace-classroom-crm/"+t},H_={},ed=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=CV(l),l in H_)return;H_[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":TV,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},IV=()=>{};var W_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},AV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},yI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new NV;const m=i<<2|a>>4;if(r.push(m),u!==64){const y=a<<4&240|u>>2;if(r.push(y),f!==64){const b=u<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class NV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RV=function(t){const e=gI(t);return yI.encodeByteArray(e,!0)},yh=function(t){return RV(t).replace(/\./g,"")},vI=function(t){try{return yI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=()=>kV().__FIREBASE_DEFAULTS__,DV=()=>{if(typeof process>"u"||typeof W_>"u")return;const t=W_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vI(t[1]);return e&&JSON.parse(e)},Nf=()=>{try{return IV()||PV()||DV()||jV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wI=t=>{var e,n;return(n=(e=Nf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},OV=t=>{const e=wI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xI=()=>{var t;return(t=Nf())==null?void 0:t.config},_I=t=>{var e;return(e=Nf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[yh(JSON.stringify(n)),yh(JSON.stringify(o)),""].join(".")}const Jl={};function VV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?t.emulator.push(e):t.prod.push(e);return t}function FV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let q_=!1;function EI(t,e){if(typeof window>"u"||typeof document>"u"||!Xa(window.location.host)||Jl[t]===e||Jl[t]||q_)return;Jl[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=VV().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{q_=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=FV(r),y=n("text"),b=document.getElementById(y)||document.createElement("span"),v=n("learnmore"),E=document.getElementById(v)||document.createElement("a"),x=n("preprendIcon"),w=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;a(S),h(E,v);const k=u();l(w,x),S.append(w,b,E,k),document.body.appendChild(S)}i?(b.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function zV(){var e;const t=(e=Nf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $V(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WV(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qV(){return!zV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GV(){try{return typeof indexedDB=="object"}catch{return!1}}function KV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="FirebaseError";class ys extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QV,Object.setPrototypeOf(this,ys.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nu.prototype.create)}}class nu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?YV(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ys(s,a,r)}}function YV(t,e){return t.replace(XV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const XV=/\{\$([^}]+)}/g;function JV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ho(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(G_(i)&&G_(o)){if(!ho(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function G_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ZV(t,e){const n=new e3(t,e);return n.subscribe.bind(n)}class e3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");t3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=um),s.error===void 0&&(s.error=um),s.complete===void 0&&(s.complete=um);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){return t&&t._delegate?t._delegate:t}class fo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new MV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s3(e))try{this.getOrInitializeService({instanceIdentifier:Bi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bi){return this.instances.has(e)}getOptions(e=Bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bi){return this.component?this.component.multipleInstances?e:Bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r3(t){return t===Bi?void 0:t}function s3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new n3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const o3={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},a3=Ce.INFO,l3={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},c3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=l3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $v{constructor(e){this.name=e,this._logLevel=a3,this._logHandler=c3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const u3=(t,e)=>e.some(n=>t instanceof n);let K_,Q_;function d3(){return K_||(K_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h3(){return Q_||(Q_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SI=new WeakMap,Bg=new WeakMap,TI=new WeakMap,dm=new WeakMap,Bv=new WeakMap;function f3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ri(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&SI.set(n,t)}).catch(()=>{}),Bv.set(e,t),e}function p3(t){if(Bg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bg.set(t,e)}let Hg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ri(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function m3(t){Hg=t(Hg)}function g3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hm(this),e,...n);return TI.set(r,e.sort?e.sort():[e]),ri(r)}:h3().includes(t)?function(...e){return t.apply(hm(this),e),ri(SI.get(this))}:function(...e){return ri(t.apply(hm(this),e))}}function y3(t){return typeof t=="function"?g3(t):(t instanceof IDBTransaction&&p3(t),u3(t,d3())?new Proxy(t,Hg):t)}function ri(t){if(t instanceof IDBRequest)return f3(t);if(dm.has(t))return dm.get(t);const e=y3(t);return e!==t&&(dm.set(t,e),Bv.set(e,t)),e}const hm=t=>Bv.get(t);function v3(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ri(o);return r&&o.addEventListener("upgradeneeded",l=>{r(ri(o.result),l.oldVersion,l.newVersion,ri(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const w3=["get","getKey","getAll","getAllKeys","count"],x3=["put","add","delete","clear"],fm=new Map;function Y_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fm.get(e))return fm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=x3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||w3.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return fm.set(e,i),i}m3(t=>({...t,get:(e,n,r)=>Y_(e,n)||t.get(e,n,r),has:(e,n)=>!!Y_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function b3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wg="@firebase/app",X_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new $v("@firebase/app"),E3="@firebase/app-compat",S3="@firebase/analytics-compat",T3="@firebase/analytics",C3="@firebase/app-check-compat",I3="@firebase/app-check",A3="@firebase/auth",N3="@firebase/auth-compat",R3="@firebase/database",k3="@firebase/data-connect",P3="@firebase/database-compat",D3="@firebase/functions",j3="@firebase/functions-compat",O3="@firebase/installations",M3="@firebase/installations-compat",L3="@firebase/messaging",V3="@firebase/messaging-compat",F3="@firebase/performance",U3="@firebase/performance-compat",z3="@firebase/remote-config",$3="@firebase/remote-config-compat",B3="@firebase/storage",H3="@firebase/storage-compat",W3="@firebase/firestore",q3="@firebase/ai",G3="@firebase/firestore-compat",K3="firebase",Q3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="[DEFAULT]",Y3={[Wg]:"fire-core",[E3]:"fire-core-compat",[T3]:"fire-analytics",[S3]:"fire-analytics-compat",[I3]:"fire-app-check",[C3]:"fire-app-check-compat",[A3]:"fire-auth",[N3]:"fire-auth-compat",[R3]:"fire-rtdb",[k3]:"fire-data-connect",[P3]:"fire-rtdb-compat",[D3]:"fire-fn",[j3]:"fire-fn-compat",[O3]:"fire-iid",[M3]:"fire-iid-compat",[L3]:"fire-fcm",[V3]:"fire-fcm-compat",[F3]:"fire-perf",[U3]:"fire-perf-compat",[z3]:"fire-rc",[$3]:"fire-rc-compat",[B3]:"fire-gcs",[H3]:"fire-gcs-compat",[W3]:"fire-fst",[G3]:"fire-fst-compat",[q3]:"fire-vertex","fire-js":"fire-js",[K3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Map,X3=new Map,Gg=new Map;function J_(t,e){try{t.container.addComponent(e)}catch(n){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Oa(t){const e=t.name;if(Gg.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;Gg.set(e,t);for(const n of vh.values())J_(n,t);for(const n of X3.values())J_(n,t);return!0}function Hv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function tr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},si=new nu("app","Firebase",J3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=Q3;function CI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:qg,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw si.create("bad-app-name",{appName:String(s)});if(n||(n=xI()),!n)throw si.create("no-options");const i=vh.get(s);if(i){if(ho(n,i.options)&&ho(r,i.config))return i;throw si.create("duplicate-app",{appName:s})}const o=new i3(s);for(const l of Gg.values())o.addComponent(l);const a=new Z3(n,r,o);return vh.set(s,a),a}function II(t=qg){const e=vh.get(t);if(!e&&t===qg&&xI())return CI();if(!e)throw si.create("no-app",{appName:t});return e}function ii(t,e,n){let r=Y3[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(o.join(" "));return}Oa(new fo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6="firebase-heartbeat-database",t6=1,Rc="firebase-heartbeat-store";let pm=null;function AI(){return pm||(pm=v3(e6,t6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rc)}catch(n){console.warn(n)}}}}).catch(t=>{throw si.create("idb-open",{originalErrorMessage:t.message})})),pm}async function n6(t){try{const n=(await AI()).transaction(Rc),r=await n.objectStore(Rc).get(NI(t));return await n.done,r}catch(e){if(e instanceof ys)hs.warn(e.message);else{const n=si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hs.warn(n.message)}}}async function Z_(t,e){try{const r=(await AI()).transaction(Rc,"readwrite");await r.objectStore(Rc).put(e,NI(t)),await r.done}catch(n){if(n instanceof ys)hs.warn(n.message);else{const r=si.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hs.warn(r.message)}}}function NI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=1024,s6=30;class i6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=e1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>s6){const o=l6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=e1(),{heartbeatsToSend:r,unsentEntries:s}=o6(this._heartbeatsCache.heartbeats),i=yh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return hs.warn(n),""}}}function e1(){return new Date().toISOString().substring(0,10)}function o6(t,e=r6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),t1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),t1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GV()?KV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Z_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function t1(t){return yh(JSON.stringify({version:2,heartbeats:t})).length}function l6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){Oa(new fo("platform-logger",e=>new _3(e),"PRIVATE")),Oa(new fo("heartbeat",e=>new i6(e),"PRIVATE")),ii(Wg,X_,t),ii(Wg,X_,"esm2020"),ii("fire-js","")}c6("");function RI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u6=RI,kI=new nu("auth","Firebase",RI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new $v("@firebase/auth");function d6(t,...e){wh.logLevel<=Ce.WARN&&wh.warn(`Auth (${Ja}): ${t}`,...e)}function Rd(t,...e){wh.logLevel<=Ce.ERROR&&wh.error(`Auth (${Ja}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(t,...e){throw qv(t,...e)}function ar(t,...e){return qv(t,...e)}function Wv(t,e,n){const r={...u6(),[e]:n};return new nu("auth","Firebase",r).create(e,{appName:t.name})}function to(t){return Wv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function h6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Vr(t,"argument-error"),Wv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kI.create(t,...e)}function pe(t,e,...n){if(!t)throw qv(e,...n)}function Jr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rd(e),new Error(e)}function fs(t,e){t||Jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function f6(){return n1()==="http:"||n1()==="https:"}function n1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f6()||BV()||"connection"in navigator)?navigator.onLine:!0}function m6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.shortDelay=e,this.longDelay=n,fs(n>e,"Short delay should be less than long delay!"),this.isMobile=UV()||HV()}get(){return p6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e){fs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v6=new su(3e4,6e4);function Kv(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Za(t,e,n,r,s={}){return DI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=ru({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return $V()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Xa(t.emulatorConfig.host)&&(u.credentials="include"),PI.fetch()(await jI(t,t.config.apiHost,n,a),u)})}async function DI(t,e,n){t._canInitEmulator=!1;const r={...g6,...e};try{const s=new x6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw td(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw td(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw td(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Wv(t,h,u);Vr(t,h)}}catch(s){if(s instanceof ys)throw s;Vr(t,"network-request-failed",{message:String(s)})}}async function w6(t,e,n,r,s={}){const i=await Za(t,e,n,r,s);return"mfaPendingCredential"in i&&Vr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function jI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Gv(t.config,s):`${t.config.apiScheme}://${s}`;return y6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class x6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ar(this.auth,"network-request-failed")),v6.get())})}}function td(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ar(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _6(t,e){return Za(t,"POST","/v1/accounts:delete",e)}async function xh(t,e){return Za(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b6(t,e=!1){const n=en(t),r=await n.getIdToken(e),s=Qv(r);pe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Zl(mm(s.auth_time)),issuedAtTime:Zl(mm(s.iat)),expirationTime:Zl(mm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function mm(t){return Number(t)*1e3}function Qv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Rd("JWT malformed, contained fewer than 3 sections"),null;try{const s=vI(n);return s?JSON.parse(s):(Rd("Failed to decode base64 JWT payload"),null)}catch(s){return Rd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function r1(t){const e=Qv(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ys&&E6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function E6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t){var f;const e=t.auth,n=await t.getIdToken(),r=await kc(t,xh(e,{idToken:n}));pe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?OI(s.providerUserInfo):[],o=C6(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Qg(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function T6(t){const e=en(t);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C6(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function OI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I6(t,e){const n=await DI(t,{},async()=>{const r=ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await jI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Xa(t.emulatorConfig.host)&&(l.credentials="include"),PI.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function A6(t,e){return Za(t,"POST","/v2/accounts:revokeToken",Kv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):r1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=r1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await I6(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new aa;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new S6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await kc(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return b6(this,e)}reload(){return T6(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await _h(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(to(this.auth));const e=await this.getIdToken();return await kc(this,_6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:b,stsTokenManager:v}=n;pe(f&&v,e,"internal-error");const E=aa.fromJSON(this.name,v);pe(typeof f=="string",e,"internal-error"),Rs(r,e.name),Rs(s,e.name),pe(typeof m=="boolean",e,"internal-error"),pe(typeof y=="boolean",e,"internal-error"),Rs(i,e.name),Rs(o,e.name),Rs(a,e.name),Rs(l,e.name),Rs(u,e.name),Rs(h,e.name);const x=new nr({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:E,createdAt:u,lastLoginAt:h});return b&&Array.isArray(b)&&(x.providerData=b.map(w=>({...w}))),l&&(x._redirectEventId=l),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new aa;s.updateFromServerResponse(n);const i=new nr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await _h(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?OI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new aa;a.updateFromIdToken(r);const l=new nr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new Map;function Zr(t){fs(t instanceof Function,"Expected a class definition");let e=s1.get(t);return e?(fs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,s1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}MI.type="NONE";const i1=MI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,e,n){return`firebase:${t}:${e}:${n}`}class la{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=kd(this.userKey,s.apiKey,i),this.fullPersistenceKey=kd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await xh(this.auth,{idToken:e}).catch(()=>{});return n?nr._fromGetAccountInfoResponse(this.auth,n,e):null}return nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new la(Zr(i1),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Zr(i1);const o=kd(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await xh(e,{idToken:h}).catch(()=>{});if(!m)break;f=await nr._fromGetAccountInfoResponse(e,m,h)}else f=nr._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new la(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new la(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($I(e))return"Blackberry";if(BI(e))return"Webos";if(VI(e))return"Safari";if((e.includes("chrome/")||FI(e))&&!e.includes("edge/"))return"Chrome";if(zI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LI(t=qt()){return/firefox\//i.test(t)}function VI(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FI(t=qt()){return/crios\//i.test(t)}function UI(t=qt()){return/iemobile/i.test(t)}function zI(t=qt()){return/android/i.test(t)}function $I(t=qt()){return/blackberry/i.test(t)}function BI(t=qt()){return/webos/i.test(t)}function Yv(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function N6(t=qt()){var e;return Yv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function R6(){return WV()&&document.documentMode===10}function HI(t=qt()){return Yv(t)||zI(t)||BI(t)||$I(t)||/windows phone/i.test(t)||UI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t,e=[]){let n;switch(t){case"Browser":n=o1(qt());break;case"Worker":n=`${o1(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ja}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6(t,e={}){return Za(t,"GET","/v2/passwordPolicy",Kv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=6;class j6{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??D6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a1(this),this.idTokenSubscription=new a1(this),this.beforeStateQueue=new k6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await la.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await xh(this,{idToken:e}),r=await nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(tr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(to(this));const n=e?en(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(to(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(to(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P6(this),n=new j6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new nu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await A6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zr(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[Zr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=WI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(tr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&d6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Rf(t){return en(t)}class a1{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZV(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M6(t){Xv=t}function L6(t){return Xv.loadJS(t)}function V6(){return Xv.gapiScript}function F6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t,e){const n=Hv(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ho(i,e??{}))return s;Vr(s,"already-initialized")}return n.initialize({options:e})}function z6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $6(t,e,n){const r=Rf(t);pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=qI(e),{host:o,port:a}=B6(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),pe(ho(u,r.config.emulator)&&ho(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Xa(o)?(bI(`${i}//${o}${l}`),EI("Auth",!0)):H6()}function qI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function B6(t){const e=qI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:l1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:l1(o)}}}function l1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function H6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Jr("not implemented")}_getIdTokenResponse(e){return Jr("not implemented")}_linkToIdToken(e,n){return Jr("not implemented")}_getReauthenticationResolver(e){return Jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ca(t,e){return w6(t,"POST","/v1/accounts:signInWithIdp",Kv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6="http://localhost";class po extends GI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new po(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ca(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ca(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ca(e,n)}buildRequest(){const e={requestUri:W6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ru(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Jv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends iu{constructor(){super("facebook.com")}static credential(e){return po._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En extends iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return po._fromParams({providerId:En.PROVIDER_ID,signInMethod:En.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return En.credentialFromTaggedObject(e)}static credentialFromError(e){return En.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return En.credential(n,r)}catch{return null}}}En.GOOGLE_SIGN_IN_METHOD="google.com";En.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends iu{constructor(){super("github.com")}static credential(e){return po._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends iu{constructor(){super("twitter.com")}static credential(e,n){return po._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Us.credential(n,r)}catch{return null}}}Us.TWITTER_SIGN_IN_METHOD="twitter.com";Us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await nr._fromIdTokenResponse(e,r,s),o=c1(r);return new Ma({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=c1(r);return new Ma({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function c1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends ys{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new bh(e,n,r,s)}}function KI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(t,i,e,r):i})}async function q6(t,e,n=!1){const r=await kc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ma._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t,e,n=!1){const{auth:r}=t;if(tr(r.app))return Promise.reject(to(r));const s="reauthenticate";try{const i=await kc(t,KI(r,s,e,t),n);pe(i.idToken,r,"internal-error");const o=Qv(i.idToken);pe(o,r,"internal-error");const{sub:a}=o;return pe(t.uid===a,r,"user-mismatch"),Ma._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Vr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(t,e,n=!1){if(tr(t.app))return Promise.reject(to(t));const r="signIn",s=await KI(t,r,e),i=await Ma._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Q6(t,e,n,r){return en(t).onIdTokenChanged(e,n,r)}function Y6(t,e,n){return en(t).beforeAuthStateChanged(e,n)}function X6(t,e,n,r){return en(t).onAuthStateChanged(e,n,r)}function J6(t){return en(t).signOut()}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=1e3,e5=10;class YI extends QI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);R6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,e5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Z6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}YI.type="LOCAL";const t5=YI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI extends QI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XI.type="SESSION";const JI=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new kf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await n5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Zv("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(){return window}function s5(t){jr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}async function i5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function a5(){return ZI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="firebaseLocalStorageDb",l5=1,Sh="firebaseLocalStorage",tA="fbase_key";class ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pf(t,e){return t.transaction([Sh],e?"readwrite":"readonly").objectStore(Sh)}function c5(){const t=indexedDB.deleteDatabase(eA);return new ou(t).toPromise()}function Yg(){const t=indexedDB.open(eA,l5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Sh,{keyPath:tA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Sh)?e(r):(r.close(),await c5(),e(await Yg()))})})}async function u1(t,e,n){const r=Pf(t,!0).put({[tA]:e,value:n});return new ou(r).toPromise()}async function u5(t,e){const n=Pf(t,!1).get(e),r=await new ou(n).toPromise();return r===void 0?null:r.value}function d1(t,e){const n=Pf(t,!0).delete(e);return new ou(n).toPromise()}const d5=800,h5=3;class nA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>h5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kf._getInstance(a5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await i5(),!this.activeServiceWorker)return;this.sender=new r5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yg();return await u1(e,Eh,"1"),await d1(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>u1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>u5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>d1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Pf(s,!1).getAll();return new ou(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nA.type="LOCAL";const f5=nA;new su(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t,e){return e?Zr(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew extends GI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ca(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ca(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ca(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p5(t){return K6(t.auth,new ew(t),t.bypassAuthState)}function m5(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),G6(n,new ew(t),t.bypassAuthState)}async function g5(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),q6(n,new ew(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p5;case"linkViaPopup":case"linkViaRedirect":return g5;case"reauthViaPopup":case"reauthViaRedirect":return m5;default:Vr(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=new su(2e3,1e4);async function gm(t,e,n){if(tr(t.app))return Promise.reject(ar(t,"operation-not-supported-in-this-environment"));const r=Rf(t);h6(t,e,Jv);const s=rA(r,n);return new Gi(r,"signInViaPopup",e,s).executeNotNull()}class Gi extends sA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Gi.currentPopupAction&&Gi.currentPopupAction.cancel(),Gi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=Zv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y5.get())};e()}}Gi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="pendingRedirect",Pd=new Map;class w5 extends sA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pd.get(this.auth._key());if(!e){try{const r=await x5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pd.set(this.auth._key(),e)}return this.bypassAuthState||Pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x5(t,e){const n=E5(e),r=b5(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _5(t,e){Pd.set(t._key(),e)}function b5(t){return Zr(t._redirectPersistence)}function E5(t){return kd(v5,t.config.apiKey,t.name)}async function S5(t,e,n=!1){if(tr(t.app))return Promise.reject(to(t));const r=Rf(t),s=rA(r,e),o=await new w5(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=10*60*1e3;class C5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!I5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iA(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ar(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T5&&this.cachedEventUids.clear(),this.cachedEventUids.has(h1(e))}saveEventToCache(e){this.cachedEventUids.add(h1(e)),this.lastProcessedEventTime=Date.now()}}function h1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function I5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(t,e={}){return Za(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,R5=/^https?/;async function k5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await A5(t);for(const n of e)try{if(P5(n))return}catch{}Vr(t,"unauthorized-domain")}function P5(t){const e=Kg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!R5.test(n))return!1;if(N5.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=new su(3e4,6e4);function f1(){const t=jr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function j5(t){return new Promise((e,n)=>{var s,i,o;function r(){f1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{f1(),n(ar(t,"network-request-failed"))},timeout:D5.get()})}if((i=(s=jr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=jr().gapi)!=null&&o.load)r();else{const a=F6("iframefcb");return jr()[a]=()=>{gapi.load?r():n(ar(t,"network-request-failed"))},L6(`${V6()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Dd=null,e})}let Dd=null;function O5(t){return Dd=Dd||j5(t),Dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=new su(5e3,15e3),L5="__/auth/iframe",V5="emulator/auth/iframe",F5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z5(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gv(e,V5):`https://${t.config.authDomain}/${L5}`,r={apiKey:e.apiKey,appName:t.name,v:Ja},s=U5.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ru(r).slice(1)}`}async function $5(t){const e=await O5(t),n=jr().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:z5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F5,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ar(t,"network-request-failed"),a=jr().setTimeout(()=>{i(o)},M5.get());function l(){jr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H5=500,W5=600,q5="_blank",G5="http://localhost";class p1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K5(t,e,n,r=H5,s=W5){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...B5,width:r.toString(),height:s.toString(),top:i,left:o},u=qt().toLowerCase();n&&(a=FI(u)?q5:n),LI(u)&&(e=e||G5,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(N6(u)&&a!=="_self")return Q5(e||"",a),new p1(null);const f=window.open(e||"",a,h);pe(f,t,"popup-blocked");try{f.focus()}catch{}return new p1(f)}function Q5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="__/auth/handler",X5="emulator/auth/handler",J5=encodeURIComponent("fac");async function m1(t,e,n,r,s,i){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ja,eventId:s};if(e instanceof Jv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",JV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof iu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${J5}=${encodeURIComponent(l)}`:"";return`${Z5(t)}?${ru(a).slice(1)}${u}`}function Z5({config:t}){return t.emulator?Gv(t,X5):`https://${t.authDomain}/${Y5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="webStorageSupport";class eF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JI,this._completeRedirectFn=S5,this._overrideRedirectResult=_5}async _openPopup(e,n,r,s){var o;fs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await m1(e,n,r,Kg(),s);return K5(e,i,Zv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await m1(e,n,r,Kg(),s);return s5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(fs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $5(e),r=new C5(e);return n.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ym,{type:ym},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[ym];i!==void 0&&n(!!i),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HI()||VI()||Yv()}}const tF=eF;var g1="@firebase/auth",y1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sF(t){Oa(new fo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:WI(t)},u=new O6(r,s,i,l);return z6(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Oa(new fo("auth-internal",e=>{const n=Rf(e.getProvider("auth").getImmediate());return(r=>new nF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ii(g1,y1,rF(t)),ii(g1,y1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=5*60,oF=_I("authIdTokenMaxAge")||iF;let v1=null;const aF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oF)return;const s=n==null?void 0:n.token;v1!==s&&(v1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lF(t=II()){const e=Hv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=U6(t,{popupRedirectResolver:tF,persistence:[f5,t5,JI]}),r=_I("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=aF(i.toString());Y6(n,o,()=>o(n.currentUser)),Q6(n,a=>o(a))}}const s=wI("auth");return s&&$6(n,`http://${s}`),n}function cF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}M6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ar("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",cF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sF("Browser");var uF="firebase",dF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii(uF,dF,"app");var w1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oi,oA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,T){function I(){}I.prototype=T.prototype,C.F=T.prototype,C.prototype=new I,C.prototype.constructor=C,C.D=function(N,R,j){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return T.prototype[R].apply(N,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,T,I){I||(I=0);const N=Array(16);if(typeof T=="string")for(var R=0;R<16;++R)N[R]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(R=0;R<16;++R)N[R]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=C.g[0],I=C.g[1],R=C.g[2];let j=C.g[3],P;P=T+(j^I&(R^j))+N[0]+3614090360&4294967295,T=I+(P<<7&4294967295|P>>>25),P=j+(R^T&(I^R))+N[1]+3905402710&4294967295,j=T+(P<<12&4294967295|P>>>20),P=R+(I^j&(T^I))+N[2]+606105819&4294967295,R=j+(P<<17&4294967295|P>>>15),P=I+(T^R&(j^T))+N[3]+3250441966&4294967295,I=R+(P<<22&4294967295|P>>>10),P=T+(j^I&(R^j))+N[4]+4118548399&4294967295,T=I+(P<<7&4294967295|P>>>25),P=j+(R^T&(I^R))+N[5]+1200080426&4294967295,j=T+(P<<12&4294967295|P>>>20),P=R+(I^j&(T^I))+N[6]+2821735955&4294967295,R=j+(P<<17&4294967295|P>>>15),P=I+(T^R&(j^T))+N[7]+4249261313&4294967295,I=R+(P<<22&4294967295|P>>>10),P=T+(j^I&(R^j))+N[8]+1770035416&4294967295,T=I+(P<<7&4294967295|P>>>25),P=j+(R^T&(I^R))+N[9]+2336552879&4294967295,j=T+(P<<12&4294967295|P>>>20),P=R+(I^j&(T^I))+N[10]+4294925233&4294967295,R=j+(P<<17&4294967295|P>>>15),P=I+(T^R&(j^T))+N[11]+2304563134&4294967295,I=R+(P<<22&4294967295|P>>>10),P=T+(j^I&(R^j))+N[12]+1804603682&4294967295,T=I+(P<<7&4294967295|P>>>25),P=j+(R^T&(I^R))+N[13]+4254626195&4294967295,j=T+(P<<12&4294967295|P>>>20),P=R+(I^j&(T^I))+N[14]+2792965006&4294967295,R=j+(P<<17&4294967295|P>>>15),P=I+(T^R&(j^T))+N[15]+1236535329&4294967295,I=R+(P<<22&4294967295|P>>>10),P=T+(R^j&(I^R))+N[1]+4129170786&4294967295,T=I+(P<<5&4294967295|P>>>27),P=j+(I^R&(T^I))+N[6]+3225465664&4294967295,j=T+(P<<9&4294967295|P>>>23),P=R+(T^I&(j^T))+N[11]+643717713&4294967295,R=j+(P<<14&4294967295|P>>>18),P=I+(j^T&(R^j))+N[0]+3921069994&4294967295,I=R+(P<<20&4294967295|P>>>12),P=T+(R^j&(I^R))+N[5]+3593408605&4294967295,T=I+(P<<5&4294967295|P>>>27),P=j+(I^R&(T^I))+N[10]+38016083&4294967295,j=T+(P<<9&4294967295|P>>>23),P=R+(T^I&(j^T))+N[15]+3634488961&4294967295,R=j+(P<<14&4294967295|P>>>18),P=I+(j^T&(R^j))+N[4]+3889429448&4294967295,I=R+(P<<20&4294967295|P>>>12),P=T+(R^j&(I^R))+N[9]+568446438&4294967295,T=I+(P<<5&4294967295|P>>>27),P=j+(I^R&(T^I))+N[14]+3275163606&4294967295,j=T+(P<<9&4294967295|P>>>23),P=R+(T^I&(j^T))+N[3]+4107603335&4294967295,R=j+(P<<14&4294967295|P>>>18),P=I+(j^T&(R^j))+N[8]+1163531501&4294967295,I=R+(P<<20&4294967295|P>>>12),P=T+(R^j&(I^R))+N[13]+2850285829&4294967295,T=I+(P<<5&4294967295|P>>>27),P=j+(I^R&(T^I))+N[2]+4243563512&4294967295,j=T+(P<<9&4294967295|P>>>23),P=R+(T^I&(j^T))+N[7]+1735328473&4294967295,R=j+(P<<14&4294967295|P>>>18),P=I+(j^T&(R^j))+N[12]+2368359562&4294967295,I=R+(P<<20&4294967295|P>>>12),P=T+(I^R^j)+N[5]+4294588738&4294967295,T=I+(P<<4&4294967295|P>>>28),P=j+(T^I^R)+N[8]+2272392833&4294967295,j=T+(P<<11&4294967295|P>>>21),P=R+(j^T^I)+N[11]+1839030562&4294967295,R=j+(P<<16&4294967295|P>>>16),P=I+(R^j^T)+N[14]+4259657740&4294967295,I=R+(P<<23&4294967295|P>>>9),P=T+(I^R^j)+N[1]+2763975236&4294967295,T=I+(P<<4&4294967295|P>>>28),P=j+(T^I^R)+N[4]+1272893353&4294967295,j=T+(P<<11&4294967295|P>>>21),P=R+(j^T^I)+N[7]+4139469664&4294967295,R=j+(P<<16&4294967295|P>>>16),P=I+(R^j^T)+N[10]+3200236656&4294967295,I=R+(P<<23&4294967295|P>>>9),P=T+(I^R^j)+N[13]+681279174&4294967295,T=I+(P<<4&4294967295|P>>>28),P=j+(T^I^R)+N[0]+3936430074&4294967295,j=T+(P<<11&4294967295|P>>>21),P=R+(j^T^I)+N[3]+3572445317&4294967295,R=j+(P<<16&4294967295|P>>>16),P=I+(R^j^T)+N[6]+76029189&4294967295,I=R+(P<<23&4294967295|P>>>9),P=T+(I^R^j)+N[9]+3654602809&4294967295,T=I+(P<<4&4294967295|P>>>28),P=j+(T^I^R)+N[12]+3873151461&4294967295,j=T+(P<<11&4294967295|P>>>21),P=R+(j^T^I)+N[15]+530742520&4294967295,R=j+(P<<16&4294967295|P>>>16),P=I+(R^j^T)+N[2]+3299628645&4294967295,I=R+(P<<23&4294967295|P>>>9),P=T+(R^(I|~j))+N[0]+4096336452&4294967295,T=I+(P<<6&4294967295|P>>>26),P=j+(I^(T|~R))+N[7]+1126891415&4294967295,j=T+(P<<10&4294967295|P>>>22),P=R+(T^(j|~I))+N[14]+2878612391&4294967295,R=j+(P<<15&4294967295|P>>>17),P=I+(j^(R|~T))+N[5]+4237533241&4294967295,I=R+(P<<21&4294967295|P>>>11),P=T+(R^(I|~j))+N[12]+1700485571&4294967295,T=I+(P<<6&4294967295|P>>>26),P=j+(I^(T|~R))+N[3]+2399980690&4294967295,j=T+(P<<10&4294967295|P>>>22),P=R+(T^(j|~I))+N[10]+4293915773&4294967295,R=j+(P<<15&4294967295|P>>>17),P=I+(j^(R|~T))+N[1]+2240044497&4294967295,I=R+(P<<21&4294967295|P>>>11),P=T+(R^(I|~j))+N[8]+1873313359&4294967295,T=I+(P<<6&4294967295|P>>>26),P=j+(I^(T|~R))+N[15]+4264355552&4294967295,j=T+(P<<10&4294967295|P>>>22),P=R+(T^(j|~I))+N[6]+2734768916&4294967295,R=j+(P<<15&4294967295|P>>>17),P=I+(j^(R|~T))+N[13]+1309151649&4294967295,I=R+(P<<21&4294967295|P>>>11),P=T+(R^(I|~j))+N[4]+4149444226&4294967295,T=I+(P<<6&4294967295|P>>>26),P=j+(I^(T|~R))+N[11]+3174756917&4294967295,j=T+(P<<10&4294967295|P>>>22),P=R+(T^(j|~I))+N[2]+718787259&4294967295,R=j+(P<<15&4294967295|P>>>17),P=I+(j^(R|~T))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+T&4294967295,C.g[1]=C.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+j&4294967295}r.prototype.v=function(C,T){T===void 0&&(T=C.length);const I=T-this.blockSize,N=this.C;let R=this.h,j=0;for(;j<T;){if(R==0)for(;j<=I;)s(this,C,j),j+=this.blockSize;if(typeof C=="string"){for(;j<T;)if(N[R++]=C.charCodeAt(j++),R==this.blockSize){s(this,N),R=0;break}}else for(;j<T;)if(N[R++]=C[j++],R==this.blockSize){s(this,N),R=0;break}}this.h=R,this.o+=T},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var T=1;T<C.length-8;++T)C[T]=0;T=this.o*8;for(var I=C.length-8;I<C.length;++I)C[I]=T&255,T/=256;for(this.v(C),C=Array(16),T=0,I=0;I<4;++I)for(let N=0;N<32;N+=8)C[T++]=this.g[I]>>>N&255;return C};function i(C,T){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=T(C)}function o(C,T){this.h=T;const I=[];let N=!0;for(let R=C.length-1;R>=0;R--){const j=C[R]|0;N&&j==T||(I[R]=j,N=!1)}this.g=I}var a={};function l(C){return-128<=C&&C<128?i(C,function(T){return new o([T|0],T<0?-1:0)}):new o([C|0],C<0?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return f;if(C<0)return E(u(-C));const T=[];let I=1;for(let N=0;C>=I;N++)T[N]=C/I|0,I*=4294967296;return new o(T,0)}function h(C,T){if(C.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(C.charAt(0)=="-")return E(h(C.substring(1),T));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=u(Math.pow(T,8));let N=f;for(let j=0;j<C.length;j+=8){var R=Math.min(8,C.length-j);const P=parseInt(C.substring(j,j+R),T);R<8?(R=u(Math.pow(T,R)),N=N.j(R).add(u(P))):(N=N.j(I),N=N.add(u(P)))}return N}var f=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-E(this).m();let C=0,T=1;for(let I=0;I<this.g.length;I++){const N=this.i(I);C+=(N>=0?N:4294967296+N)*T,T*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(v(this))return"-"+E(this).toString(C);const T=u(Math.pow(C,6));var I=this;let N="";for(;;){const R=k(I,T).g;I=x(I,R.j(T));let j=((I.g.length>0?I.g[0]:I.h)>>>0).toString(C);if(I=R,b(I))return j+N;for(;j.length<6;)j="0"+j;N=j+N}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(let T=0;T<C.g.length;T++)if(C.g[T]!=0)return!1;return!0}function v(C){return C.h==-1}t.l=function(C){return C=x(this,C),v(C)?-1:b(C)?0:1};function E(C){const T=C.g.length,I=[];for(let N=0;N<T;N++)I[N]=~C.g[N];return new o(I,~C.h).add(m)}t.abs=function(){return v(this)?E(this):this},t.add=function(C){const T=Math.max(this.g.length,C.g.length),I=[];let N=0;for(let R=0;R<=T;R++){let j=N+(this.i(R)&65535)+(C.i(R)&65535),P=(j>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);N=P>>>16,j&=65535,P&=65535,I[R]=P<<16|j}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(C,T){return C.add(E(T))}t.j=function(C){if(b(this)||b(C))return f;if(v(this))return v(C)?E(this).j(E(C)):E(E(this).j(C));if(v(C))return E(this.j(E(C)));if(this.l(y)<0&&C.l(y)<0)return u(this.m()*C.m());const T=this.g.length+C.g.length,I=[];for(var N=0;N<2*T;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(let R=0;R<C.g.length;R++){const j=this.i(N)>>>16,P=this.i(N)&65535,B=C.i(R)>>>16,oe=C.i(R)&65535;I[2*N+2*R]+=P*oe,w(I,2*N+2*R),I[2*N+2*R+1]+=j*oe,w(I,2*N+2*R+1),I[2*N+2*R+1]+=P*B,w(I,2*N+2*R+1),I[2*N+2*R+2]+=j*B,w(I,2*N+2*R+2)}for(C=0;C<T;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=T;C<2*T;C++)I[C]=0;return new o(I,0)};function w(C,T){for(;(C[T]&65535)!=C[T];)C[T+1]+=C[T]>>>16,C[T]&=65535,T++}function S(C,T){this.g=C,this.h=T}function k(C,T){if(b(T))throw Error("division by zero");if(b(C))return new S(f,f);if(v(C))return T=k(E(C),T),new S(E(T.g),E(T.h));if(v(T))return T=k(C,E(T)),new S(E(T.g),T.h);if(C.g.length>30){if(v(C)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var I=m,N=T;N.l(C)<=0;)I=O(I),N=O(N);var R=D(I,1),j=D(N,1);for(N=D(N,2),I=D(I,2);!b(N);){var P=j.add(N);P.l(C)<=0&&(R=R.add(I),j=P),N=D(N,1),I=D(I,1)}return T=x(C,R.j(T)),new S(R,T)}for(R=f;C.l(T)>=0;){for(I=Math.max(1,Math.floor(C.m()/T.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),j=u(I),P=j.j(T);v(P)||P.l(C)>0;)I-=N,j=u(I),P=j.j(T);b(j)&&(j=m),R=R.add(j),C=x(C,P)}return new S(R,C)}t.B=function(C){return k(this,C).h},t.and=function(C){const T=Math.max(this.g.length,C.g.length),I=[];for(let N=0;N<T;N++)I[N]=this.i(N)&C.i(N);return new o(I,this.h&C.h)},t.or=function(C){const T=Math.max(this.g.length,C.g.length),I=[];for(let N=0;N<T;N++)I[N]=this.i(N)|C.i(N);return new o(I,this.h|C.h)},t.xor=function(C){const T=Math.max(this.g.length,C.g.length),I=[];for(let N=0;N<T;N++)I[N]=this.i(N)^C.i(N);return new o(I,this.h^C.h)};function O(C){const T=C.g.length+1,I=[];for(let N=0;N<T;N++)I[N]=C.i(N)<<1|C.i(N-1)>>>31;return new o(I,C.h)}function D(C,T){const I=T>>5;T%=32;const N=C.g.length-I,R=[];for(let j=0;j<N;j++)R[j]=T>0?C.i(j+I)>>>T|C.i(j+I+1)<<32-T:C.i(j+I);return new o(R,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,oA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,oi=o}).apply(typeof w1<"u"?w1:typeof self<"u"?self:typeof window<"u"?window:{});var nd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aA,Ll,lA,jd,Xg,cA,uA,dA;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof nd=="object"&&nd];for(var g=0;g<d.length;++g){var _=d[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var _=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var L=d[A];if(!(L in _))break e;_=_[L]}d=d[d.length-1],A=_[d],g=g(A),g!=A&&g!=null&&e(_,d,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(g){var _=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&_.push([A,g[A]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function l(d,g,_){return d.call.apply(d.bind,arguments)}function u(d,g,_){return u=l,u.apply(null,arguments)}function h(d,g){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function f(d,g){function _(){}_.prototype=g.prototype,d.Z=g.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(A,L,F){for(var J=Array(arguments.length-2),be=2;be<arguments.length;be++)J[be-2]=arguments[be];return g.prototype[L].apply(A,J)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function y(d){const g=d.length;if(g>0){const _=Array(g);for(let A=0;A<g;A++)_[A]=d[A];return _}return[]}function b(d,g){for(let A=1;A<arguments.length;A++){const L=arguments[A];var _=typeof L;if(_=_!="object"?_:L?Array.isArray(L)?"array":_:"null",_=="array"||_=="object"&&typeof L.length=="number"){_=d.length||0;const F=L.length||0;d.length=_+F;for(let J=0;J<F;J++)d[_+J]=L[J]}else d.push(L)}}class v{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function E(d){o.setTimeout(()=>{throw d},0)}function x(){var d=C;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class w{constructor(){this.h=this.g=null}add(g,_){const A=S.get();A.set(g,_),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new v(()=>new k,d=>d.reset());class k{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let O,D=!1,C=new w,T=()=>{const d=Promise.resolve(void 0);O=()=>{d.then(I)}};function I(){for(var d;d=x();){try{d.h.call(d.g)}catch(_){E(_)}var g=S;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}D=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};o.addEventListener("test",_,g),o.removeEventListener("test",_,g)}catch{}return d}();function P(d){return/^[\s\xa0]*$/.test(d)}function B(d,g){R.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}f(B,R),B.prototype.init=function(d,g){const _=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(_=="mouseover"?g=d.fromElement:_=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),U=0;function Q(d,g,_,A,L){this.listener=d,this.proxy=null,this.src=g,this.type=_,this.capture=!!A,this.ha=L,this.key=++U,this.da=this.fa=!1}function V(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function M(d,g,_){for(const A in d)g.call(_,d[A],A,d)}function z(d,g){for(const _ in d)g.call(void 0,d[_],_,d)}function K(d){const g={};for(const _ in d)g[_]=d[_];return g}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(d,g){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)d[_]=A[_];for(let F=0;F<W.length;F++)_=W[F],Object.prototype.hasOwnProperty.call(A,_)&&(d[_]=A[_])}}function ee(d){this.src=d,this.g={},this.h=0}ee.prototype.add=function(d,g,_,A,L){const F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);const J=le(d,g,A,L);return J>-1?(g=d[J],_||(g.fa=!1)):(g=new Q(g,this.src,F,!!A,L),g.fa=_,d.push(g)),g};function ue(d,g){const _=g.type;if(_ in d.g){var A=d.g[_],L=Array.prototype.indexOf.call(A,g,void 0),F;(F=L>=0)&&Array.prototype.splice.call(A,L,1),F&&(V(g),d.g[_].length==0&&(delete d.g[_],d.h--))}}function le(d,g,_,A){for(let L=0;L<d.length;++L){const F=d[L];if(!F.da&&F.listener==g&&F.capture==!!_&&F.ha==A)return L}return-1}var H="closure_lm_"+(Math.random()*1e6|0),re={};function we(d,g,_,A,L){if(Array.isArray(g)){for(let F=0;F<g.length;F++)we(d,g[F],_,A,L);return null}return _=Ri(_),d&&d[oe]?d.J(g,_,a(A)?!!A.capture:!!A,L):te(d,g,_,!1,A,L)}function te(d,g,_,A,L,F){if(!g)throw Error("Invalid event type");const J=a(L)?!!L.capture:!!L;let be=jt(d);if(be||(d[H]=be=new ee(d)),_=be.add(g,_,A,J,F),_.proxy)return _;if(A=de(),_.proxy=A,A.src=d,A.listener=_,d.addEventListener)j||(L=J),L===void 0&&(L=!1),d.addEventListener(g.toString(),A,L);else if(d.attachEvent)d.attachEvent(Ve(g.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function de(){function d(_){return g.call(d.src,d.listener,_)}const g=sn;return d}function he(d,g,_,A,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)he(d,g[F],_,A,L);else A=a(A)?!!A.capture:!!A,_=Ri(_),d&&d[oe]?(d=d.i,F=String(g).toString(),F in d.g&&(g=d.g[F],_=le(g,_,A,L),_>-1&&(V(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete d.g[F],d.h--)))):d&&(d=jt(d))&&(g=d.g[g.toString()],d=-1,g&&(d=le(g,_,A,L)),(_=d>-1?g[d]:null)&&Oe(_))}function Oe(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[oe])ue(g.i,d);else{var _=d.type,A=d.proxy;g.removeEventListener?g.removeEventListener(_,A,d.capture):g.detachEvent?g.detachEvent(Ve(_),A):g.addListener&&g.removeListener&&g.removeListener(A),(_=jt(g))?(ue(_,d),_.h==0&&(_.src=null,g[H]=null)):V(d)}}}function Ve(d){return d in re?re[d]:re[d]="on"+d}function sn(d,g){if(d.da)d=!0;else{g=new B(g,this);const _=d.listener,A=d.ha||d.src;d.fa&&Oe(d),d=_.call(A,g)}return d}function jt(d){return d=d[H],d instanceof ee?d:null}var kn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ri(d){return typeof d=="function"?d:(d[kn]||(d[kn]=function(g){return d.handleEvent(g)}),d[kn])}function Be(){N.call(this),this.i=new ee(this),this.M=this,this.G=null}f(Be,N),Be.prototype[oe]=!0,Be.prototype.removeEventListener=function(d,g,_,A){he(this,d,g,_,A)};function Ke(d,g){var _,A=d.G;if(A)for(_=[];A;A=A.G)_.push(A);if(d=d.M,A=g.type||g,typeof g=="string")g=new R(g,d);else if(g instanceof R)g.target=g.target||d;else{var L=g;g=new R(A,d),ne(g,L)}L=!0;let F,J;if(_)for(J=_.length-1;J>=0;J--)F=g.g=_[J],L=zr(F,A,!0,g)&&L;if(F=g.g=d,L=zr(F,A,!0,g)&&L,L=zr(F,A,!1,g)&&L,_)for(J=0;J<_.length;J++)F=g.g=_[J],L=zr(F,A,!1,g)&&L}Be.prototype.N=function(){if(Be.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const _=d.g[g];for(let A=0;A<_.length;A++)V(_[A]);delete d.g[g],d.h--}}this.G=null},Be.prototype.J=function(d,g,_,A){return this.i.add(String(d),g,!1,_,A)},Be.prototype.K=function(d,g,_,A){return this.i.add(String(d),g,!0,_,A)};function zr(d,g,_,A){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let F=0;F<g.length;++F){const J=g[F];if(J&&!J.da&&J.capture==_){const be=J.listener,pt=J.ha||J.src;J.fa&&ue(d.i,J),L=be.call(pt,A)!==!1&&L}}return L&&!A.defaultPrevented}function Io(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function ul(d){d.g=Io(()=>{d.g=null,d.i&&(d.i=!1,ul(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class yu extends N{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ul(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(d){N.call(this),this.h=d,this.g={}}f(ki,N);var vu=[];function $r(d){M(d.g,function(g,_){this.g.hasOwnProperty(_)&&Oe(g)},d),d.g={}}ki.prototype.N=function(){ki.Z.N.call(this),$r(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yr=o.JSON.stringify,Pi=o.JSON.parse,wu=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function qn(){}function dl(){}var Di={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function hl(){R.call(this,"d")}f(hl,R);function ji(){R.call(this,"c")}f(ji,R);var vr={},xu=null;function Oi(){return xu=xu||new Be}vr.Ia="serverreachability";function _u(d){R.call(this,vr.Ia,d)}f(_u,R);function Mi(d){const g=Oi();Ke(g,new _u(g))}vr.STAT_EVENT="statevent";function bu(d,g){R.call(this,vr.STAT_EVENT,d),this.stat=g}f(bu,R);function ke(d){const g=Oi();Ke(g,new bu(g,d))}vr.Ja="timingevent";function Ot(d,g){R.call(this,vr.Ja,d),this.size=g}f(Ot,R);function ht(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function on(){this.g=!0}on.prototype.ua=function(){this.g=!1};function an(d,g,_,A,L,F){d.info(function(){if(d.g)if(F){var J="",be=F.split("&");for(let Fe=0;Fe<be.length;Fe++){var pt=be[Fe].split("=");if(pt.length>1){const bt=pt[0];pt=pt[1];const _r=bt.split("_");J=_r.length>=2&&_r[1]=="type"?J+(bt+"="+pt+"&"):J+(bt+"=redacted&")}}}else J=null;else J=F;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+_+`
`+J})}function Gt(d,g,_,A,L,F,J){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+_+`
`+F+" "+J})}function Nt(d,g,_,A){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+ft(d,_)+(A?" "+A:"")})}function _s(d,g){d.info(function(){return"TIMEOUT: "+g})}on.prototype.info=function(){};function ft(d,g){if(!d.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(d=0;d<F.length;d++)if(Array.isArray(F[d])){var _=F[d];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var L=A[0];if(L!="noop"&&L!="stop"&&L!="close")for(let J=1;J<A.length;J++)A[J]=""}}}}return yr(F)}catch{return g}}var yn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},vn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Pn;function Br(){}f(Br,qn),Br.prototype.g=function(){return new XMLHttpRequest},Pn=new Br;function Gn(d){return encodeURIComponent(String(d))}function wr(d){var g=1;d=d.split(":");const _=[];for(;g>0&&d.length;)_.push(d.shift()),g--;return d.length&&_.push(d.join(":")),_}function ln(d,g,_,A){this.j=d,this.i=g,this.l=_,this.S=A||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ao}function Ao(){this.i=null,this.g="",this.h=!1}var v0={},gp={};function yp(d,g,_){d.M=1,d.A=Su(xr(g)),d.u=_,d.R=!0,w0(d,null)}function w0(d,g){d.F=Date.now(),Eu(d),d.B=xr(d.A);var _=d.B,A=d.S;Array.isArray(A)||(A=[String(A)]),P0(_.i,"t",A),d.C=0,_=d.j.L,d.h=new Ao,d.g=Y0(d.j,_?g:null,!d.u),d.P>0&&(d.O=new yu(u(d.Y,d,d.g),d.P)),g=d.V,_=d.g,A=d.ba;var L="readystatechange";Array.isArray(L)||(L&&(vu[0]=L.toString()),L=vu);for(let F=0;F<L.length;F++){const J=we(_,L[F],A||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=d.J?K(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Mi(),an(d.i,d.v,d.B,d.l,d.S,d.u)}ln.prototype.ba=function(d){d=d.target;const g=this.O;g&&Ss(d)==3?g.j():this.Y(d)},ln.prototype.Y=function(d){try{if(d==this.g)e:{const be=Ss(this.g),pt=this.g.ya(),Fe=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||F0(this.g)))){this.K||be!=4||pt==7||(pt==8||Fe<=0?Mi(3):Mi(2)),vp(this);var g=this.g.ca();this.X=g;var _=o2(this);if(this.o=g==200,Gt(this.i,this.v,this.B,this.l,this.S,be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,L=this.g;if((A=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(A)){var F=A;break t}}F=null}if(d=F)Nt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wp(this,d);else{this.o=!1,this.m=3,ke(12),Li(this),fl(this);break e}}if(this.R){d=!0;let bt;for(;!this.K&&this.C<_.length;)if(bt=a2(this,_),bt==gp){be==4&&(this.m=4,ke(14),d=!1),Nt(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==v0){this.m=4,ke(15),Nt(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else Nt(this.i,this.l,bt,null),wp(this,bt);if(x0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||_.length!=0||this.h.h||(this.m=1,ke(16),d=!1),this.o=this.o&&d,!d)Nt(this.i,this.l,_,"[Invalid Chunked Response]"),Li(this),fl(this);else if(_.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Ip(J),J.P=!0,ke(11))}}else Nt(this.i,this.l,_,null),wp(this,_);be==4&&Li(this),this.o&&!this.K&&(be==4?q0(this.j,this):(this.o=!1,Eu(this)))}else _2(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,ke(12)):(this.m=0,ke(13)),Li(this),fl(this)}}}catch{}finally{}};function o2(d){if(!x0(d))return d.g.la();const g=F0(d.g);if(g==="")return"";let _="";const A=g.length,L=Ss(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Li(d),fl(d),"";d.h.i=new o.TextDecoder}for(let F=0;F<A;F++)d.h.h=!0,_+=d.h.i.decode(g[F],{stream:!(L&&F==A-1)});return g.length=0,d.h.g+=_,d.C=0,d.h.g}function x0(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function a2(d,g){var _=d.C,A=g.indexOf(`
`,_);return A==-1?gp:(_=Number(g.substring(_,A)),isNaN(_)?v0:(A+=1,A+_>g.length?gp:(g=g.slice(A,A+_),d.C=A+_,g)))}ln.prototype.cancel=function(){this.K=!0,Li(this)};function Eu(d){d.T=Date.now()+d.H,_0(d,d.H)}function _0(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ht(u(d.aa,d),g)}function vp(d){d.D&&(o.clearTimeout(d.D),d.D=null)}ln.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(_s(this.i,this.B),this.M!=2&&(Mi(),ke(17)),Li(this),this.m=2,fl(this)):_0(this,this.T-d)};function fl(d){d.j.I==0||d.K||q0(d.j,d)}function Li(d){vp(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,$r(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function wp(d,g){try{var _=d.j;if(_.I!=0&&(_.g==d||xp(_.h,d))){if(!d.L&&xp(_.h,d)&&_.I==3){try{var A=_.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)Nu(_),Iu(_);else break e;Cp(_),ke(18)}}else _.xa=L[1],0<_.xa-_.K&&L[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ht(u(_.Va,_),6e3));S0(_.h)<=1&&_.ta&&(_.ta=void 0)}else Fi(_,11)}else if((d.L||_.g==d)&&Nu(_),!P(g))for(L=_.Ba.g.parse(g),g=0;g<L.length;g++){let Fe=L[g];const bt=Fe[0];if(!(bt<=_.K))if(_.K=bt,Fe=Fe[1],_.I==2)if(Fe[0]=="c"){_.M=Fe[1],_.ba=Fe[2];const _r=Fe[3];_r!=null&&(_.ka=_r,_.j.info("VER="+_.ka));const Ui=Fe[4];Ui!=null&&(_.za=Ui,_.j.info("SVER="+_.za));const Ts=Fe[5];Ts!=null&&typeof Ts=="number"&&Ts>0&&(A=1.5*Ts,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Cs=d.g;if(Cs){const ku=Cs.g?Cs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ku){var F=A.h;F.g||ku.indexOf("spdy")==-1&&ku.indexOf("quic")==-1&&ku.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(_p(F,F.h),F.h=null))}if(A.G){const Ap=Cs.g?Cs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ap&&(A.wa=Ap,He(A.J,A.G,Ap))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var J=d;if(A.na=Q0(A,A.L?A.ba:null,A.W),J.L){T0(A.h,J);var be=J,pt=A.O;pt&&(be.H=pt),be.D&&(vp(be),Eu(be)),A.g=J}else H0(A);_.i.length>0&&Au(_)}else Fe[0]!="stop"&&Fe[0]!="close"||Fi(_,7);else _.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Fi(_,7):Tp(_):Fe[0]!="noop"&&_.l&&_.l.qa(Fe),_.A=0)}}Mi(4)}catch{}}var l2=class{constructor(d,g){this.g=d,this.map=g}};function b0(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function E0(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function S0(d){return d.h?1:d.g?d.g.size:0}function xp(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function _p(d,g){d.g?d.g.add(g):d.h=g}function T0(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}b0.prototype.cancel=function(){if(this.i=C0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function C0(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const _ of d.g.values())g=g.concat(_.G);return g}return y(d.i)}var I0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function c2(d,g){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const A=d[_].indexOf("=");let L,F=null;A>=0?(L=d[_].substring(0,A),F=d[_].substring(A+1)):L=d[_],g(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function bs(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof bs?(this.l=d.l,pl(this,d.j),this.o=d.o,this.g=d.g,ml(this,d.u),this.h=d.h,bp(this,D0(d.i)),this.m=d.m):d&&(g=String(d).match(I0))?(this.l=!1,pl(this,g[1]||"",!0),this.o=gl(g[2]||""),this.g=gl(g[3]||"",!0),ml(this,g[4]),this.h=gl(g[5]||"",!0),bp(this,g[6]||"",!0),this.m=gl(g[7]||"")):(this.l=!1,this.i=new vl(null,this.l))}bs.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(yl(g,A0,!0),":");var _=this.g;return(_||g=="file")&&(d.push("//"),(g=this.o)&&d.push(yl(g,A0,!0),"@"),d.push(Gn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(yl(_,_.charAt(0)=="/"?h2:d2,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",yl(_,p2)),d.join("")},bs.prototype.resolve=function(d){const g=xr(this);let _=!!d.j;_?pl(g,d.j):_=!!d.o,_?g.o=d.o:_=!!d.g,_?g.g=d.g:_=d.u!=null;var A=d.h;if(_)ml(g,d.u);else if(_=!!d.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var L=g.h.lastIndexOf("/");L!=-1&&(A=g.h.slice(0,L+1)+A)}if(L=A,L==".."||L==".")A="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){A=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let J=0;J<L.length;){const be=L[J++];be=="."?A&&J==L.length&&F.push(""):be==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),A&&J==L.length&&F.push("")):(F.push(be),A=!0)}A=F.join("/")}else A=L}return _?g.h=A:_=d.i.toString()!=="",_?bp(g,D0(d.i)):_=!!d.m,_&&(g.m=d.m),g};function xr(d){return new bs(d)}function pl(d,g,_){d.j=_?gl(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function ml(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function bp(d,g,_){g instanceof vl?(d.i=g,m2(d.i,d.l)):(_||(g=yl(g,f2)),d.i=new vl(g,d.l))}function He(d,g,_){d.i.set(g,_)}function Su(d){return He(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function gl(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function yl(d,g,_){return typeof d=="string"?(d=encodeURI(d).replace(g,u2),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function u2(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var A0=/[#\/\?@]/g,d2=/[#\?:]/g,h2=/[#\?]/g,f2=/[#\?@]/g,p2=/#/g;function vl(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Vi(d){d.g||(d.g=new Map,d.h=0,d.i&&c2(d.i,function(g,_){d.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=vl.prototype,t.add=function(d,g){Vi(this),this.i=null,d=No(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(g),this.h+=1,this};function N0(d,g){Vi(d),g=No(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function R0(d,g){return Vi(d),g=No(d,g),d.g.has(g)}t.forEach=function(d,g){Vi(this),this.g.forEach(function(_,A){_.forEach(function(L){d.call(g,L,A,this)},this)},this)};function k0(d,g){Vi(d);let _=[];if(typeof g=="string")R0(d,g)&&(_=_.concat(d.g.get(No(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)_=_.concat(d[g]);return _}t.set=function(d,g){return Vi(this),this.i=null,d=No(this,d),R0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=k0(this,d),d.length>0?String(d[0]):g):g};function P0(d,g,_){N0(d,g),_.length>0&&(d.i=null,d.g.set(No(d,g),y(_)),d.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var _=g[A];const L=Gn(_);_=k0(this,_);for(let F=0;F<_.length;F++){let J=L;_[F]!==""&&(J+="="+Gn(_[F])),d.push(J)}}return this.i=d.join("&")};function D0(d){const g=new vl;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function No(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function m2(d,g){g&&!d.j&&(Vi(d),d.i=null,d.g.forEach(function(_,A){const L=A.toLowerCase();A!=L&&(N0(this,A),P0(this,L,_))},d)),d.j=g}function g2(d,g){const _=new on;if(o.Image){const A=new Image;A.onload=h(Es,_,"TestLoadImage: loaded",!0,g,A),A.onerror=h(Es,_,"TestLoadImage: error",!1,g,A),A.onabort=h(Es,_,"TestLoadImage: abort",!1,g,A),A.ontimeout=h(Es,_,"TestLoadImage: timeout",!1,g,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else g(!1)}function y2(d,g){const _=new on,A=new AbortController,L=setTimeout(()=>{A.abort(),Es(_,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:A.signal}).then(F=>{clearTimeout(L),F.ok?Es(_,"TestPingServer: ok",!0,g):Es(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Es(_,"TestPingServer: error",!1,g)})}function Es(d,g,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function v2(){this.g=new wu}function Ep(d){this.i=d.Sb||null,this.h=d.ab||!1}f(Ep,qn),Ep.prototype.g=function(){return new Tu(this.i,this.h)};function Tu(d,g){Be.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Tu,Be),t=Tu.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,xl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,xl(this)),this.g&&(this.readyState=3,xl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;j0(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function j0(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?wl(this):xl(this),this.readyState==3&&j0(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,wl(this))},t.Na=function(d){this.g&&(this.response=d,wl(this))},t.ga=function(){this.g&&wl(this)};function wl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,xl(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=g.next();return d.join(`\r
`)};function xl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Tu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function O0(d){let g="";return M(d,function(_,A){g+=A,g+=":",g+=_,g+=`\r
`}),g}function Sp(d,g,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=O0(_),typeof d=="string"?_!=null&&Gn(_):He(d,g,_))}function et(d){Be.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(et,Be);var w2=/^https?$/i,x2=["POST","PUT"];t=et.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Pn.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(F){M0(this,F);return}if(d=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const F of A.keys())_.set(F,A.get(F));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),L=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(x2,g,void 0)>=0)||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,J]of _)this.g.setRequestHeader(F,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(F){M0(this,F)}};function M0(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,L0(d),Cu(d)}function L0(d){d.A||(d.A=!0,Ke(d,"complete"),Ke(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ke(this,"complete"),Ke(this,"abort"),Cu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cu(this,!0)),et.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?V0(this):this.Xa())},t.Xa=function(){V0(this)};function V0(d){if(d.h&&typeof i<"u"){if(d.v&&Ss(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ke(d,"readystatechange"),Ss(d)==4){d.h=!1;try{const F=d.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var A;if(A=F===0){let J=String(d.D).match(I0)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),A=!w2.test(J?J.toLowerCase():"")}_=A}if(_)Ke(d,"complete"),Ke(d,"success");else{d.o=6;try{var L=Ss(d)>2?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.ca()+"]",L0(d)}}finally{Cu(d)}}}}function Cu(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,g||Ke(d,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ss(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Ss(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Pi(g)}};function F0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function _2(d){const g={};d=(d.g&&Ss(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(P(d[A]))continue;var _=wr(d[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=g[L]||[];g[L]=F,F.push(_)}z(g,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _l(d,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||g}function U0(d){this.za=0,this.i=[],this.j=new on,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_l("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_l("baseRetryDelayMs",5e3,d),this.Za=_l("retryDelaySeedMs",1e4,d),this.Ta=_l("forwardChannelMaxRetries",2,d),this.va=_l("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new b0(d&&d.concurrentRequestLimit),this.Ba=new v2,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=U0.prototype,t.ka=8,t.I=1,t.connect=function(d,g,_,A){ke(0),this.W=d,this.H=g||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=Q0(this,null,this.W),Au(this)};function Tp(d){if(z0(d),d.I==3){var g=d.V++,_=xr(d.J);if(He(_,"SID",d.M),He(_,"RID",g),He(_,"TYPE","terminate"),bl(d,_),g=new ln(d,d.j,g),g.M=2,g.A=Su(xr(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=g.A,_=!0),_||(g.g=Y0(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Eu(g)}K0(d)}function Iu(d){d.g&&(Ip(d),d.g.cancel(),d.g=null)}function z0(d){Iu(d),d.v&&(o.clearTimeout(d.v),d.v=null),Nu(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Au(d){if(!E0(d.h)&&!d.m){d.m=!0;var g=d.Ea;O||T(),D||(O(),D=!0),C.add(g,d),d.D=0}}function b2(d,g){return S0(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ht(u(d.Ea,d,g),G0(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const L=new ln(this,this.j,d);let F=this.o;if(this.U&&(F?(F=K(F),ne(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=B0(this,L,g),_=xr(this.J),He(_,"RID",d),He(_,"CVER",22),this.G&&He(_,"X-HTTP-Session-Id",this.G),bl(this,_),F&&(this.R?g="headers="+Gn(O0(F))+"&"+g:this.u&&Sp(_,this.u,F)),_p(this.h,L),this.Ra&&He(_,"TYPE","init"),this.S?(He(_,"$req",g),He(_,"SID","null"),L.U=!0,yp(L,_,null)):yp(L,_,g),this.I=2}}else this.I==3&&(d?$0(this,d):this.i.length==0||E0(this.h)||$0(this))};function $0(d,g){var _;g?_=g.l:_=d.V++;const A=xr(d.J);He(A,"SID",d.M),He(A,"RID",_),He(A,"AID",d.K),bl(d,A),d.u&&d.o&&Sp(A,d.u,d.o),_=new ln(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),g&&(d.i=g.G.concat(d.i)),g=B0(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),_p(d.h,_),yp(_,A,g)}function bl(d,g){d.H&&M(d.H,function(_,A){He(g,A,_)}),d.l&&M({},function(_,A){He(g,A,_)})}function B0(d,g,_){_=Math.min(d.i.length,_);const A=d.l?u(d.l.Ka,d.l,d):null;e:{var L=d.i;let be=-1;for(;;){const pt=["count="+_];be==-1?_>0?(be=L[0].g,pt.push("ofs="+be)):be=0:pt.push("ofs="+be);let Fe=!0;for(let bt=0;bt<_;bt++){var F=L[bt].g;const _r=L[bt].map;if(F-=be,F<0)be=Math.max(0,L[bt].g-100),Fe=!1;else try{F="req"+F+"_"||"";try{var J=_r instanceof Map?_r:Object.entries(_r);for(const[Ui,Ts]of J){let Cs=Ts;a(Ts)&&(Cs=yr(Ts)),pt.push(F+Ui+"="+encodeURIComponent(Cs))}}catch(Ui){throw pt.push(F+"type="+encodeURIComponent("_badmap")),Ui}}catch{A&&A(_r)}}if(Fe){J=pt.join("&");break e}}J=void 0}return d=d.i.splice(0,_),g.G=d,J}function H0(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;O||T(),D||(O(),D=!0),C.add(g,d),d.A=0}}function Cp(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ht(u(d.Da,d),G0(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,W0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ht(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ke(10),Iu(this),W0(this))};function Ip(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function W0(d){d.g=new ln(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=xr(d.na);He(g,"RID","rpc"),He(g,"SID",d.M),He(g,"AID",d.K),He(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&He(g,"TO",d.ia),He(g,"TYPE","xmlhttp"),bl(d,g),d.u&&d.o&&Sp(g,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=Su(xr(g)),_.u=null,_.R=!0,w0(_,d)}t.Va=function(){this.C!=null&&(this.C=null,Iu(this),Cp(this),ke(19))};function Nu(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function q0(d,g){var _=null;if(d.g==g){Nu(d),Ip(d),d.g=null;var A=2}else if(xp(d.h,g))_=g.G,T0(d.h,g),A=1;else return;if(d.I!=0){if(g.o)if(A==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var L=d.D;A=Oi(),Ke(A,new Ot(A,_)),Au(d)}else H0(d);else if(L=g.m,L==3||L==0&&g.X>0||!(A==1&&b2(d,g)||A==2&&Cp(d)))switch(_&&_.length>0&&(g=d.h,g.i=g.i.concat(_)),L){case 1:Fi(d,5);break;case 4:Fi(d,10);break;case 3:Fi(d,6);break;default:Fi(d,2)}}}function G0(d,g){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*g}function Fi(d,g){if(d.j.info("Error code "+g),g==2){var _=u(d.bb,d),A=d.Ua;const L=!A;A=new bs(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||pl(A,"https"),Su(A),L?g2(A.toString(),_):y2(A.toString(),_)}else ke(2);d.I=0,d.l&&d.l.pa(g),K0(d),z0(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))};function K0(d){if(d.I=0,d.ja=[],d.l){const g=C0(d.h);(g.length!=0||d.i.length!=0)&&(b(d.ja,g),b(d.ja,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.oa()}}function Q0(d,g,_){var A=_ instanceof bs?xr(_):new bs(_);if(A.g!="")g&&(A.g=g+"."+A.g),ml(A,A.u);else{var L=o.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const F=new bs(null);A&&pl(F,A),g&&(F.g=g),L&&ml(F,L),_&&(F.h=_),A=F}return _=d.G,g=d.wa,_&&g&&He(A,_,g),He(A,"VER",d.ka),bl(d,A),A}function Y0(d,g,_){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new et(new Ep({ab:_})):new et(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function X0(){}t=X0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ru(){}Ru.prototype.g=function(d,g){return new wn(d,g)};function wn(d,g){Be.call(this),this.g=new U0(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!P(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!P(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Ro(this)}f(wn,Be),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Tp(this.g)},wn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=yr(d),d=_);g.i.push(new l2(g.Ya++,d)),g.I==3&&Au(g)},wn.prototype.N=function(){this.g.l=null,delete this.j,Tp(this.g),delete this.g,wn.Z.N.call(this)};function J0(d){hl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const _ in g){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}f(J0,hl);function Z0(){ji.call(this),this.status=1}f(Z0,ji);function Ro(d){this.g=d}f(Ro,X0),Ro.prototype.ra=function(){Ke(this.g,"a")},Ro.prototype.qa=function(d){Ke(this.g,new J0(d))},Ro.prototype.pa=function(d){Ke(this.g,new Z0)},Ro.prototype.oa=function(){Ke(this.g,"b")},Ru.prototype.createWebChannel=Ru.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,dA=function(){return new Ru},uA=function(){return Oi()},cA=vr,Xg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yn.NO_ERROR=0,yn.TIMEOUT=8,yn.HTTP_ERROR=6,jd=yn,vn.COMPLETE="complete",lA=vn,dl.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",Be.prototype.listen=Be.prototype.J,Ll=dl,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,aA=et}).apply(typeof nd<"u"?nd:typeof self<"u"?self:typeof window<"u"?window:{});const x1="@firebase/firestore",_1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new $v("@firebase/firestore");function Oo(){return mo.logLevel}function se(t,...e){if(mo.logLevel<=Ce.DEBUG){const n=e.map(tw);mo.debug(`Firestore (${el}): ${t}`,...n)}}function ps(t,...e){if(mo.logLevel<=Ce.ERROR){const n=e.map(tw);mo.error(`Firestore (${el}): ${t}`,...n)}}function go(t,...e){if(mo.logLevel<=Ce.WARN){const n=e.map(tw);mo.warn(`Firestore (${el}): ${t}`,...n)}}function tw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,hA(t,r,n)}function hA(t,e,n){let r=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ps(r),new Error(r)}function je(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||hA(e,s,r)}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends ys{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class hF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fF{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ai;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ai,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ai)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string",31837,{l:r}),new fA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class pF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new pF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){je(this.o===void 0,3512);const r=i=>{i.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new b1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new b1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=yF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function Jg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return vm(s)===vm(i)?Ie(s,i):vm(s)?1:-1}return Ie(t.length,e.length)}const vF=55296,wF=57343;function vm(t){const e=t.charCodeAt(0);return e>=vF&&e<=wF}function La(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="__name__";class Sr{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Sr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Sr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Sr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ie(e.length,n.length)}static compareSegments(e,n){const r=Sr.isNumericId(e),s=Sr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Sr.extractNumericId(e).compare(Sr.extractNumericId(n)):Jg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oi.fromString(e.substring(4,e.length-2))}}class Ue extends Sr{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const xF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Sr{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return xF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===E1}static keyField(){return new Ct([E1])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Z($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Z($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ue.fromString(e))}static fromName(e){return new ae(Ue.fromString(e).popFirst(5))}static empty(){return new ae(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t,e,n){if(!n)throw new Z($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gA(t,e,n,r){if(e===!0&&r===!0)throw new Z($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function S1(t){if(!ae.isDocumentKey(t))throw new Z($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function T1(t){if(ae.isDocumentKey(t))throw new Z($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jf(t);throw new Z($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function au(t,e){if(!yA(t))throw new Z($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Z($.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1=-62135596800,I1=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*I1);return new ze(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<C1)throw new Z($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I1}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(au(e,ze._jsonSchema))return new ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-C1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:ut("string",ze._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new ze(0,0))}static max(){return new ye(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function _F(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new yi(s,ae.empty(),e)}function bF(t){return new yi(t.readTime,t.key,Pc)}class yi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yi(ye.min(),ae.empty(),Pc)}static max(){return new yi(ye.max(),ae.empty(),Pc)}}function EF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==SF)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function CF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Of.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=-1;function Mf(t){return t==null}function Th(t){return t===0&&1/t==-1/0}function IF(t){return typeof t=="number"&&Number.isInteger(t)&&!Th(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="";function AF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=A1(e)),e=NF(t.get(n),e);return A1(e)}function NF(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case vA:n+="";break;default:n+=i}}return n}function A1(t){return t+vA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??kt.RED,this.left=s??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new kt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new R1(this.data.getIterator())}getIteratorFrom(e){return new R1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class R1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new rr([])}unionWith(e){let n=new xt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new rr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xA("Invalid base64 string: "+i):i}}(e);return new At(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new At(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const RF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(t){if(je(!!t,39018),typeof t=="string"){let e=0;const n=RF.exec(t);if(je(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wi(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="server_timestamp",bA="__type__",EA="__previous_value__",SA="__local_write_time__";function rw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bA])==null?void 0:r.stringValue)===_A}function Lf(t){const e=t.mapValue.fields[EA];return rw(e)?Lf(e):e}function Dc(t){const e=vi(t.mapValue.fields[SA].timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,n,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const Ch="(default)";class Va{constructor(e,n){this.projectId=e,this.database=n||Ch}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===Ch}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="__type__",CA="__max__",sd={mapValue:{fields:{__type__:{stringValue:CA}}}},IA="__vector__",Ih="value";function xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rw(t)?4:DF(t)?9007199254740991:PF(t)?10:11:fe(28295,{value:t})}function Fr(t,e){if(t===e)return!0;const n=xi(t);if(n!==xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dc(t).isEqual(Dc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=vi(s.timestampValue),a=vi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return wi(s.bytesValue).isEqual(wi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return it(s.geoPointValue.latitude)===it(i.geoPointValue.latitude)&&it(s.geoPointValue.longitude)===it(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return it(s.integerValue)===it(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=it(s.doubleValue),a=it(i.doubleValue);return o===a?Th(o)===Th(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return La(t.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(N1(o)!==N1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Fr(o[l],a[l])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function jc(t,e){return(t.values||[]).find(n=>Fr(n,e))!==void 0}function Fa(t,e){if(t===e)return 0;const n=xi(t),r=xi(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=it(i.integerValue||i.doubleValue),l=it(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return k1(t.timestampValue,e.timestampValue);case 4:return k1(Dc(t),Dc(e));case 5:return Jg(t.stringValue,e.stringValue);case 6:return function(i,o){const a=wi(i),l=wi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ie(a[u],l[u]);if(h!==0)return h}return Ie(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ie(it(i.latitude),it(o.latitude));return a!==0?a:Ie(it(i.longitude),it(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return P1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,y,b,v;const a=i.fields||{},l=o.fields||{},u=(m=a[Ih])==null?void 0:m.arrayValue,h=(y=l[Ih])==null?void 0:y.arrayValue,f=Ie(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:P1(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===sd.mapValue&&o===sd.mapValue)return 0;if(i===sd.mapValue)return 1;if(o===sd.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Jg(l[f],h[f]);if(m!==0)return m;const y=Fa(a[l[f]],u[h[f]]);if(y!==0)return y}return Ie(l.length,h.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function k1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=vi(t),r=vi(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function P1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Fa(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function Ua(t){return Zg(t)}function Zg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Zg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Zg(n.fields[o])}`;return s+"}"}(t.mapValue):fe(61005,{value:t})}function Od(t){switch(xi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lf(t);return e?16+Od(e):16;case 5:return 2*t.stringValue.length;case 6:return wi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Od(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Eo(r.fields,(i,o)=>{s+=i.length+Od(o)}),s}(t.mapValue);default:throw fe(13486,{value:t})}}function D1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ey(t){return!!t&&"integerValue"in t}function sw(t){return!!t&&"arrayValue"in t}function j1(t){return!!t&&"nullValue"in t}function O1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Md(t){return!!t&&"mapValue"in t}function PF(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[TA])==null?void 0:r.stringValue)===IA}function ec(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Eo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ec(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ec(t.arrayValue.values[n]);return e}return{...t}}function DF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===CA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Md(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(n)}setAll(e){let n=Ct.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ec(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Md(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Md(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Eo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ln(ec(this.value))}}function AA(t){const e=[];return Eo(t.fields,(n,r)=>{const s=new Ct([n]);if(Md(r)){const i=AA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Bt(e,0,ye.min(),ye.min(),ye.min(),Ln.empty(),0)}static newFoundDocument(e,n,r,s){return new Bt(e,1,n,ye.min(),r,s,0)}static newNoDocument(e,n){return new Bt(e,2,n,ye.min(),ye.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,ye.min(),ye.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.position=e,this.inclusive=n}}function M1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=Fa(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function L1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function jF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{}class ct extends NA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MF(e,n,r):n==="array-contains"?new FF(e,r):n==="in"?new UF(e,r):n==="not-in"?new zF(e,r):n==="array-contains-any"?new $F(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LF(e,r):new VF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Fa(n,this.value)):n!==null&&xi(this.value)===xi(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends NA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fr(e,n)}matches(e){return RA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function RA(t){return t.op==="and"}function kA(t){return OF(t)&&RA(t)}function OF(t){for(const e of t.filters)if(e instanceof fr)return!1;return!0}function ty(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+Ua(t.value);if(kA(t))return t.filters.map(e=>ty(e)).join(",");{const e=t.filters.map(n=>ty(n)).join(",");return`${t.op}(${e})`}}function PA(t,e){return t instanceof ct?function(r,s){return s instanceof ct&&r.op===s.op&&r.field.isEqual(s.field)&&Fr(r.value,s.value)}(t,e):t instanceof fr?function(r,s){return s instanceof fr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&PA(o,s.filters[a]),!0):!1}(t,e):void fe(19439)}function DA(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Ua(n.value)}`}(t):t instanceof fr?function(n){return n.op.toString()+" {"+n.getFilters().map(DA).join(" ,")+"}"}(t):"Filter"}class MF extends ct{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class LF extends ct{constructor(e,n){super(e,"in",n),this.keys=jA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VF extends ct{constructor(e,n){super(e,"not-in",n),this.keys=jA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function jA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class FF extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sw(n)&&jc(n.arrayValue,this.value)}}class UF extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&jc(this.value.arrayValue,n)}}class zF extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(jc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!jc(this.value.arrayValue,n)}}class $F extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>jc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function V1(t,e=null,n=[],r=[],s=null,i=null,o=null){return new BF(t,e,n,r,s,i,o)}function iw(t){const e=ve(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ty(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Mf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ua(r)).join(",")),e.Te=n}return e.Te}function ow(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!PA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!L1(t.startAt,e.startAt)&&L1(t.endAt,e.endAt)}function ny(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HF(t,e,n,r,s,i,o,a){return new rl(t,e,n,r,s,i,o,a)}function Vf(t){return new rl(t)}function F1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function OA(t){return t.collectionGroup!==null}function tc(t){const e=ve(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xt(Ct.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Oc(i,r))}),n.has(Ct.keyField().canonicalString())||e.Ie.push(new Oc(Ct.keyField(),r))}return e.Ie}function Or(t){const e=ve(t);return e.Ee||(e.Ee=WF(e,tc(t))),e.Ee}function WF(t,e){if(t.limitType==="F")return V1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Oc(s.field,i)});const n=t.endAt?new Ah(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ah(t.startAt.position,t.startAt.inclusive):null;return V1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ry(t,e){const n=t.filters.concat([e]);return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Nh(t,e,n){return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ff(t,e){return ow(Or(t),Or(e))&&t.limitType===e.limitType}function MA(t){return`${iw(Or(t))}|lt:${t.limitType}`}function Mo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>DA(s)).join(", ")}]`),Mf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ua(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ua(s)).join(",")),`Target(${r})`}(Or(t))}; limitType=${t.limitType})`}function Uf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of tc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=M1(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,tc(r),s)||r.endAt&&!function(o,a,l){const u=M1(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,tc(r),s))}(t,e)}function qF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LA(t){return(e,n)=>{let r=!1;for(const s of tc(t)){const i=GF(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function GF(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?Fa(l,u):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Eo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return wA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=new Ze(ae.comparator);function ms(){return KF}const VA=new Ze(ae.comparator);function Vl(...t){let e=VA;for(const n of t)e=e.insert(n.key,n);return e}function FA(t){let e=VA;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ki(){return nc()}function UA(){return nc()}function nc(){return new So(t=>t.toString(),(t,e)=>t.isEqual(e))}const QF=new Ze(ae.comparator),YF=new xt(ae.comparator);function Ae(...t){let e=YF;for(const n of t)e=e.add(n);return e}const XF=new xt(Ie);function JF(){return XF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Th(e)?"-0":e}}function zA(t){return{integerValue:""+t}}function ZF(t,e){return IF(e)?zA(e):aw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this._=void 0}}function e9(t,e,n){return t instanceof Mc?function(s,i){const o={fields:{[bA]:{stringValue:_A},[SA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rw(i)&&(i=Lf(i)),i&&(o.fields[EA]=i),{mapValue:o}}(n,e):t instanceof Lc?BA(t,e):t instanceof Vc?HA(t,e):function(s,i){const o=$A(s,i),a=U1(o)+U1(s.Ae);return ey(o)&&ey(s.Ae)?zA(a):aw(s.serializer,a)}(t,e)}function t9(t,e,n){return t instanceof Lc?BA(t,e):t instanceof Vc?HA(t,e):n}function $A(t,e){return t instanceof Rh?function(r){return ey(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Mc extends zf{}class Lc extends zf{constructor(e){super(),this.elements=e}}function BA(t,e){const n=WA(e);for(const r of t.elements)n.some(s=>Fr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Vc extends zf{constructor(e){super(),this.elements=e}}function HA(t,e){let n=WA(e);for(const r of t.elements)n=n.filter(s=>!Fr(s,r));return{arrayValue:{values:n}}}class Rh extends zf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function U1(t){return it(t.integerValue||t.doubleValue)}function WA(t){return sw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,n){this.field=e,this.transform=n}}function r9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Lc&&s instanceof Lc||r instanceof Vc&&s instanceof Vc?La(r.elements,s.elements,Fr):r instanceof Rh&&s instanceof Rh?Fr(r.Ae,s.Ae):r instanceof Mc&&s instanceof Mc}(t.transform,e.transform)}class s9{constructor(e,n){this.version=e,this.transformResults=n}}class rs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rs}static exists(e){return new rs(void 0,e)}static updateTime(e){return new rs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ld(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $f{}function qA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new KA(t.key,rs.none()):new lu(t.key,t.data,rs.none());{const n=t.data,r=Ln.empty();let s=new xt(Ct.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new To(t.key,r,new rr(s.toArray()),rs.none())}}function i9(t,e,n){t instanceof lu?function(s,i,o){const a=s.value.clone(),l=$1(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof To?function(s,i,o){if(!Ld(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=$1(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(GA(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function rc(t,e,n,r){return t instanceof lu?function(i,o,a,l){if(!Ld(i.precondition,o))return a;const u=i.value.clone(),h=B1(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof To?function(i,o,a,l){if(!Ld(i.precondition,o))return a;const u=B1(i.fieldTransforms,l,o),h=o.data;return h.setAll(GA(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Ld(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function o9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=$A(r.transform,s||null);i!=null&&(n===null&&(n=Ln.empty()),n.set(r.field,i))}return n||null}function z1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&La(r,s,(i,o)=>r9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class lu extends $f{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class To extends $f{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function GA(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function $1(t,e,n){const r=new Map;je(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,t9(o,a,n[s]))}return r}function B1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,e9(i,o,e))}return r}class KA extends $f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class a9 extends $f{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&i9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=rc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=rc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=UA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=qA(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,(n,r)=>z1(n,r))&&La(this.baseMutations,e.baseMutations,(n,r)=>z1(n,r))}}class lw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return QF}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new lw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c9=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ne;function d9(t){switch(t){case $.OK:return fe(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function QA(t){if(t===void 0)return ps("GRPC error has no .code"),$.UNKNOWN;switch(t){case at.OK:return $.OK;case at.CANCELLED:return $.CANCELLED;case at.UNKNOWN:return $.UNKNOWN;case at.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case at.INTERNAL:return $.INTERNAL;case at.UNAVAILABLE:return $.UNAVAILABLE;case at.UNAUTHENTICATED:return $.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case at.NOT_FOUND:return $.NOT_FOUND;case at.ALREADY_EXISTS:return $.ALREADY_EXISTS;case at.PERMISSION_DENIED:return $.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case at.ABORTED:return $.ABORTED;case at.OUT_OF_RANGE:return $.OUT_OF_RANGE;case at.UNIMPLEMENTED:return $.UNIMPLEMENTED;case at.DATA_LOSS:return $.DATA_LOSS;default:return fe(39323,{code:t})}}(Ne=at||(at={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=new oi([4294967295,4294967295],0);function H1(t){const e=h9().encode(t),n=new oA;return n.update(e),new Uint8Array(n.digest())}function W1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new oi([n,r],0),new oi([s,i],0)]}class cw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fl(`Invalid padding: ${n}`);if(r<0)throw new Fl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=oi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(oi.fromNumber(r)));return s.compare(f9)===1&&(s=new oi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=H1(e),[r,s]=W1(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new cw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=H1(e),[r,s]=W1(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,cu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bf(ye.min(),s,new Ze(Ie),ms(),Ae())}}class cu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new cu(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class YA{constructor(e,n){this.targetId=e,this.Ce=n}}class XA{constructor(e,n,r=At.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class q1{constructor(){this.ve=0,this.Fe=G1(),this.Me=At.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),r=Ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:fe(38017,{changeType:i})}}),new cu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=G1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class p9{constructor(e){this.Ge=e,this.ze=new Map,this.je=ms(),this.Je=id(),this.He=id(),this.Ye=new Ze(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ny(i))if(r===0){const o=new ae(i.path);this.et(n,o,Bt.newNoDocument(o,ye.min()))}else je(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=wi(r).toUint8Array()}catch(l){if(l instanceof xA)return go("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cw(o,s,i)}catch(l){return go(l instanceof Fl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&ny(a.target)){const l=new ae(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Bt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ae();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Bf(e,n,this.Ye,this.je,r);return this.je=ms(),this.Je=id(),this.He=id(),this.Ye=new Ze(Ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new q1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xt(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xt(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new q1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function id(){return new Ze(ae.comparator)}function G1(){return new Ze(ae.comparator)}const m9={asc:"ASCENDING",desc:"DESCENDING"},g9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y9={and:"AND",or:"OR"};class v9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sy(t,e){return t.useProto3Json||Mf(e)?e:{value:e}}function kh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w9(t,e){return kh(t,e.toTimestamp())}function Mr(t){return je(!!t,49232),ye.fromTimestamp(function(n){const r=vi(n);return new ze(r.seconds,r.nanos)}(t))}function uw(t,e){return iy(t,e).canonicalString()}function iy(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ZA(t){const e=Ue.fromString(t);return je(sN(e),10190,{key:e.toString()}),e}function oy(t,e){return uw(t.databaseId,e.path)}function wm(t,e){const n=ZA(e);if(n.get(1)!==t.databaseId.projectId)throw new Z($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(tN(n))}function eN(t,e){return uw(t.databaseId,e)}function x9(t){const e=ZA(t);return e.length===4?Ue.emptyPath():tN(e)}function ay(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tN(t){return je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function K1(t,e,n){return{name:oy(t,e),fields:n.value.mapValue.fields}}function _9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(je(h===void 0||typeof h=="string",58123),At.fromBase64String(h||"")):(je(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),At.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?$.UNKNOWN:QA(u.code);return new Z(h,u.message||"")}(o);n=new XA(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wm(t,r.document.name),i=Mr(r.document.updateTime),o=r.document.createTime?Mr(r.document.createTime):ye.min(),a=new Ln({mapValue:{fields:r.document.fields}}),l=Bt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Vd(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wm(t,r.document),i=r.readTime?Mr(r.readTime):ye.min(),o=Bt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Vd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wm(t,r.document),i=r.removedTargetIds||[];n=new Vd([],i,s,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new u9(s,i),a=r.targetId;n=new YA(a,o)}}return n}function b9(t,e){let n;if(e instanceof lu)n={update:K1(t,e.key,e.value)};else if(e instanceof KA)n={delete:oy(t,e.key)};else if(e instanceof To)n={update:K1(t,e.key,e.data),updateMask:k9(e.fieldMask)};else{if(!(e instanceof a9))return fe(16599,{Vt:e.type});n={verify:oy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Rh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:w9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe(27497)}(t,e.precondition)),n}function E9(t,e){return t&&t.length>0?(je(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Mr(s.updateTime):Mr(i);return o.isEqual(ye.min())&&(o=Mr(i)),new s9(o,s.transformResults||[])}(n,e))):[]}function S9(t,e){return{documents:[eN(t,e.path)]}}function T9(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=eN(t,s);const i=function(u){if(u.length!==0)return rN(fr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Lo(m.field),direction:A9(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=sy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function C9(t){let e=x9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){je(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=nN(f);return m instanceof fr&&kA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new Oc(Vo(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Mf(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,y=f.values||[];return new Ah(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,y=f.values||[];return new Ah(y,m)}(n.endAt)),HF(e,s,o,i,a,"F",l,u)}function I9(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Vo(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vo(n.unaryFilter.field);return ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Vo(n.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Vo(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return ct.create(Vo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fr.create(n.compositeFilter.filters.map(r=>nN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function A9(t){return m9[t]}function N9(t){return g9[t]}function R9(t){return y9[t]}function Lo(t){return{fieldPath:t.canonicalString()}}function Vo(t){return Ct.fromServerFormat(t.fieldPath)}function rN(t){return t instanceof ct?function(n){if(n.op==="=="){if(O1(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(j1(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(O1(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(j1(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:N9(n.op),value:n.value}}}(t):t instanceof fr?function(n){const r=n.getFilters().map(s=>rN(s));return r.length===1?r[0]:{compositeFilter:{op:R9(n.op),filters:r}}}(t):fe(54877,{filter:t})}function k9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function sN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n,r,s,i=ye.min(),o=ye.min(),a=At.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.yt=e}}function D9(t){const e=C9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(){this.Cn=new O9}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(yi.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(yi.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class O9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xt(Ue.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iN=41943040;class cn{static withCacheSize(e){return new cn(e,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(iN,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new za(0)}static cr(){return new za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="LruGarbageCollector",M9=1048576;function X1([t,e],[n,r]){const s=Ie(t,n);return s===0?Ie(e,r):s}class L9{constructor(e){this.Ir=e,this.buffer=new xt(X1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();X1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(Y1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nl(n)?se(Y1,"Ignoring IndexedDB error during garbage collection: ",n):await tl(n)}await this.Vr(3e5)})}}class F9{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Of.ce);const r=new L9(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Q1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Oo()<=Ce.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function U9(t,e){return new F9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(){this.changes=new So(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&rc(r.mutation,s,rr.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=Ki();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Vl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ms();const o=nc(),a=function(){return nc()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof To)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),rc(h.mutation,u,h.mutation.getFieldMask(),ze.now())):o.set(u.key,rr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new $9(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=nc();let s=new Ze((o,a)=>o-a),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||rr.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||Ae()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=UA();h.forEach(m=>{if(!i.has(m)){const y=qA(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Ki());let a=Pc,l=i;return o.next(u=>q.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Ae())).next(h=>({batchId:a,changes:FA(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=Vl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Vl();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,l=>{const u=function(f,m){return new rl(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Bt.newInvalidDocument(h)))});let a=Vl();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&rc(h.mutation,u,rr.empty(),ze.now()),Uf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Mr(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:D9(s.bundledQuery),readTime:Mr(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(){this.overlays=new Ze(ae.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ki();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Ki(),i=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ze((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Ki(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Ki(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return q.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new c9(n,r));let i=this.qr.get(n);i===void 0&&(i=Ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.Qr=new xt(Et.$r),this.Ur=new xt(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ae(new Ue([])),r=new Et(n,e),s=new Et(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new Ue([])),r=new Et(n,e),s=new Et(n,e+1);let i=Ae();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Et.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new l9(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Et(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?nw:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(Ie);return n.forEach(s=>{const i=new Et(s,0),o=new Et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ae.isDocumentKey(i)||(i=i.child(""));const o=new Et(new ae(i),0);let a=new xt(Ie);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)},o),q.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,s=>{const i=new Et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Et(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e){this.ri=e,this.docs=function(){return new Ze(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=ms();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Bt.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ms();const o=n.path,a=new ae(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||EF(bF(h),r)<=0||(s.has(h.key)||Uf(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){fe(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Q9(this)}getSize(e){return q.resolve(this.size)}}class Q9 extends z9{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e){this.persistence=e,this.si=new So(n=>iw(n),ow),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new dw,this.targetCount=0,this.ai=za.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new za(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n){this.ui={},this.overlays={},this.ci=new Of(0),this.li=!1,this.li=!0,this.hi=new q9,this.referenceDelegate=e(this),this.Pi=new Y9(this),this.indexManager=new j9,this.remoteDocumentCache=function(s){return new K9(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new P9(n),this.Ii=new H9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new G9(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const s=new X9(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class X9 extends TF{constructor(e){super(),this.currentSequenceNumber=e}}class hw{constructor(e){this.persistence=e,this.Ri=new dw,this.Vi=null}static mi(e){return new hw(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const s=ae.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ye.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ph{constructor(e,n){this.persistence=e,this.pi=new So(r=>AF(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=U9(this,n)}static mi(e,n){return new Ph(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,ye.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Od(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new fw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qV()?8:CF(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new J9;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Oo()<=Ce.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Mo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Oo()<=Ce.DEBUG&&se("QueryEngine","Query:",Mo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Oo()<=Ce.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Mo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Or(n))):q.resolve())}ys(e,n){if(F1(n))return q.resolve(null);let r=Or(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Nh(n,null,"F"),r=Or(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ae(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Nh(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,s){return F1(n)||s.isEqual(ye.min())?q.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?q.resolve(null):(Oo()<=Ce.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Mo(n)),this.vs(e,o,n,_F(s,Pc)).next(a=>a))})}Ds(e,n){let r=new xt(LA(e));return n.forEach((s,i)=>{Uf(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Oo()<=Ce.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Mo(n)),this.ps.getDocumentsMatchingQuery(e,n,yi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="LocalStore",eU=3e8;class tU{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ze(Ie),this.xs=new So(i=>iw(i),ow),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function nU(t,e,n,r){return new tU(t,e,n,r)}async function aN(t,e){const n=ve(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ae();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function rU(t,e){const n=ve(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,m=f.keys();let y=q.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(l,b)).next(v=>{const E=u.docVersions.get(b);je(E!==null,48541),v.version.compareTo(E)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ae();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function lN(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function sU(t,e){const n=ve(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(At.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(v,E,x){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=eU?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,h)&&a.push(n.Pi.updateTargetData(i,y))});let l=ms(),u=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(iU(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(ye.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=s,i))}function iU(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ms();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ye.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se(pw,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:s}})}function oU(t,e){const n=ve(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=nw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aU(t,e){const n=ve(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Ks(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ly(t,e,n){const r=ve(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!nl(o))throw o;se(pw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function J1(t,e,n){const r=ve(t);let s=ye.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=ve(l),m=f.xs.get(h);return m!==void 0?q.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,h)}(r,o,Or(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:ye.min(),n?i:Ae())).next(a=>(lU(r,qF(e),a),{documents:a,Qs:i})))}function lU(t,e,n){let r=t.Os.get(e)||ye.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Z1{constructor(){this.activeTargetIds=JF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cU{constructor(){this.Mo=new Z1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Z1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="ConnectivityMonitor";class tb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(eb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(eb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od=null;function cy(){return od===null?od=function(){return 268435456+Math.round(2147483648*Math.random())}():od++,"0x"+od.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="RestConnection",dU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Ch?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=cy(),a=this.zo(e,n.toUriEncodedString());se(xm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(a),h=Xa(u);return this.Jo(e,a,l,r,h).then(f=>(se(xm,`Received RPC '${e}' ${o}: `,f),f),f=>{throw go(xm,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+el}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=dU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class pU extends hU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=cy();return new Promise((a,l)=>{const u=new aA;u.setWithCredentials(!0),u.listenOnce(lA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case jd.NO_ERROR:const f=u.getResponseJson();se(Ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case jd.TIMEOUT:se(Ft,`RPC '${e}' ${o} timed out`),l(new Z($.DEADLINE_EXCEEDED,"Request time out"));break;case jd.HTTP_ERROR:const m=u.getStatus();if(se(Ft,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const v=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(w)>=0?w:$.UNKNOWN}(b.status);l(new Z(v,b.message))}else l(new Z($.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Z($.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{se(Ft,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);se(Ft,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=cy(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=dA(),a=uA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");se(Ft,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let m=!1,y=!1;const b=new fU({Yo:E=>{y?se(Ft,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(m||(se(Ft,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),se(Ft,`RPC '${e}' stream ${s} sending:`,E),f.send(E))},Zo:()=>f.close()}),v=(E,x,w)=>{E.listen(x,S=>{try{w(S)}catch(k){setTimeout(()=>{throw k},0)}})};return v(f,Ll.EventType.OPEN,()=>{y||(se(Ft,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),v(f,Ll.EventType.CLOSE,()=>{y||(y=!0,se(Ft,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(f))}),v(f,Ll.EventType.ERROR,E=>{y||(y=!0,go(Ft,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),b.a_(new Z($.UNAVAILABLE,"The operation could not be completed")))}),v(f,Ll.EventType.MESSAGE,E=>{var x;if(!y){const w=E.data[0];je(!!w,16349);const S=w,k=(S==null?void 0:S.error)||((x=S[0])==null?void 0:x.error);if(k){se(Ft,`RPC '${e}' stream ${s} received error:`,k);const O=k.status;let D=function(I){const N=at[I];if(N!==void 0)return QA(N)}(O),C=k.message;D===void 0&&(D=$.INTERNAL,C="Unknown error status: "+O+" with message "+k.message),y=!0,b.a_(new Z(D,C)),f.close()}else se(Ft,`RPC '${e}' stream ${s} received:`,w),b.u_(w)}}),v(a,cA.STAT_EVENT,E=>{E.stat===Xg.PROXY?se(Ft,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Xg.NOPROXY&&se(Ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function _m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t){return new v9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="PersistentStream";class uN{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(ps(n.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Z($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(nb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(nb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mU extends uN{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_9(this.serializer,e),r=function(i){if(!("targetChange"in i))return ye.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?Mr(o.readTime):ye.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ay(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ny(l)?{documents:S9(i,l)}:{query:T9(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=JA(i,o.resumeToken);const u=sy(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ye.min())>0){a.readTime=kh(i,o.snapshotVersion.toTimestamp());const u=sy(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=I9(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ay(this.serializer),n.removeTarget=e,this.q_(n)}}class gU extends uN{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=E9(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ay(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>b9(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{}class vU extends yU{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Z($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,iy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z($.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,iy(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z($.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class wU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ps(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="RemoteStore";class xU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Co(this)&&(se(yo,"Restarting streams for network reachability change."),await async function(l){const u=ve(l);u.Ea.add(4),await uu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Wf(u)}(this))})}),this.Ra=new wU(r,s)}}async function Wf(t){if(Co(t))for(const e of t.da)await e(!0)}async function uu(t){for(const e of t.da)await e(!1)}function dN(t,e){const n=ve(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),vw(n)?yw(n):sl(n).O_()&&gw(n,e))}function mw(t,e){const n=ve(t),r=sl(n);n.Ia.delete(e),r.O_()&&hN(n,e),n.Ia.size===0&&(r.O_()?r.L_():Co(n)&&n.Ra.set("Unknown"))}function gw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sl(t).Y_(e)}function hN(t,e){t.Va.Ue(e),sl(t).Z_(e)}function yw(t){t.Va=new p9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),sl(t).start(),t.Ra.ua()}function vw(t){return Co(t)&&!sl(t).x_()&&t.Ia.size>0}function Co(t){return ve(t).Ea.size===0}function fN(t){t.Va=void 0}async function _U(t){t.Ra.set("Online")}async function bU(t){t.Ia.forEach((e,n)=>{gw(t,e)})}async function EU(t,e){fN(t),vw(t)?(t.Ra.ha(e),yw(t)):t.Ra.set("Unknown")}async function SU(t,e,n){if(t.Ra.set("Online"),e instanceof XA&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){se(yo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dh(t,r)}else if(e instanceof Vd?t.Va.Ze(e):e instanceof YA?t.Va.st(e):t.Va.tt(e),!n.isEqual(ye.min()))try{const r=await lN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(At.EMPTY_BYTE_STRING,h.snapshotVersion)),hN(i,l);const f=new Ks(h.target,l,u,h.sequenceNumber);gw(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){se(yo,"Failed to raise snapshot:",r),await Dh(t,r)}}async function Dh(t,e,n){if(!nl(e))throw e;t.Ea.add(1),await uu(t),t.Ra.set("Offline"),n||(n=()=>lN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(yo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Wf(t)})}function pN(t,e){return e().catch(n=>Dh(t,n,e))}async function qf(t){const e=ve(t),n=_i(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:nw;for(;TU(e);)try{const s=await oU(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,CU(e,s)}catch(s){await Dh(e,s)}mN(e)&&gN(e)}function TU(t){return Co(t)&&t.Ta.length<10}function CU(t,e){t.Ta.push(e);const n=_i(t);n.O_()&&n.X_&&n.ea(e.mutations)}function mN(t){return Co(t)&&!_i(t).x_()&&t.Ta.length>0}function gN(t){_i(t).start()}async function IU(t){_i(t).ra()}async function AU(t){const e=_i(t);for(const n of t.Ta)e.ea(n.mutations)}async function NU(t,e,n){const r=t.Ta.shift(),s=lw.from(r,e,n);await pN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qf(t)}async function RU(t,e){e&&_i(t).X_&&await async function(r,s){if(function(o){return d9(o)&&o!==$.ABORTED}(s.code)){const i=r.Ta.shift();_i(r).B_(),await pN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qf(r)}}(t,e),mN(t)&&gN(t)}async function rb(t,e){const n=ve(t);n.asyncQueue.verifyOperationInProgress(),se(yo,"RemoteStore received new credentials");const r=Co(n);n.Ea.add(3),await uu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wf(n)}async function kU(t,e){const n=ve(t);e?(n.Ea.delete(2),await Wf(n)):e||(n.Ea.add(2),await uu(n),n.Ra.set("Unknown"))}function sl(t){return t.ma||(t.ma=function(n,r,s){const i=ve(n);return i.sa(),new mU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:_U.bind(null,t),t_:bU.bind(null,t),r_:EU.bind(null,t),H_:SU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),vw(t)?yw(t):t.Ra.set("Unknown")):(await t.ma.stop(),fN(t))})),t.ma}function _i(t){return t.fa||(t.fa=function(n,r,s){const i=ve(n);return i.sa(),new gU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:IU.bind(null,t),r_:RU.bind(null,t),ta:AU.bind(null,t),na:NU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await qf(t)):(await t.fa.stop(),t.Ta.length>0&&(se(yo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new ww(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xw(t,e){if(ps("AsyncQueue",`${e}: ${t}`),nl(t))return new Z($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{static emptySet(e){return new ua(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Vl(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ua)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ua;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.ga=new Ze(ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class $a{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $a(e,n,ua.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ff(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class DU{constructor(){this.queries=ib(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ve(n),i=s.queries;s.queries=ib(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new Z($.ABORTED,"Firestore shutting down"))}}function ib(){return new So(t=>MA(t),Ff)}async function yN(t,e){const n=ve(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new PU,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=xw(o,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&_w(n)}async function vN(t,e){const n=ve(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jU(t,e){const n=ve(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&_w(n)}function OU(t,e,n){const r=ve(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function _w(t){t.Ca.forEach(e=>{e.next()})}var uy,ob;(ob=uy||(uy={})).Ma="default",ob.Cache="cache";class wN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $a(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=$a.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e){this.key=e}}class _N{constructor(e){this.key=e}}class MU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=LA(e),this.tu=new ua(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new sb,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=Uf(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),v=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;m&&y?m.data.isEqual(y.data)?b!==v&&(r.track({type:3,doc:y}),E=!0):this.su(m,y)||(r.track({type:2,doc:y}),E=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),E=!0):m&&!y&&(r.track({type:1,doc:m}),E=!0,(l||u)&&(a=!0)),E&&(y?(o=o.add(y),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,b){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:E})}};return v(y)-v(b)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new $a(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new _N(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new xN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return $a.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const bw="SyncEngine";class LU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class VU{constructor(e){this.key=e,this.hu=!1}}class FU{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new So(a=>MA(a),Ff),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(ae.comparator),this.Au=new Map,this.Ru=new dw,this.Vu={},this.mu=new Map,this.fu=za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UU(t,e,n=!0){const r=IN(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await bN(r,e,n,!0),s}async function zU(t,e){const n=IN(t);await bN(n,e,!0,!1)}async function bN(t,e,n,r){const s=await aU(t.localStore,Or(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await $U(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&dN(t.remoteStore,s),a}async function $U(t,e,n,r,s){t.pu=(f,m,y)=>async function(v,E,x,w){let S=E.view.ru(x);S.Cs&&(S=await J1(v.localStore,E.query,!1).then(({documents:C})=>E.view.ru(C,S)));const k=w&&w.targetChanges.get(E.targetId),O=w&&w.targetMismatches.get(E.targetId)!=null,D=E.view.applyChanges(S,v.isPrimaryClient,k,O);return lb(v,E.targetId,D.au),D.snapshot}(t,f,m,y);const i=await J1(t.localStore,e,!0),o=new MU(e,i.Qs),a=o.ru(i.documents),l=cu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);lb(t,n,u.au);const h=new LU(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function BU(t,e,n){const r=ve(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Ff(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ly(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&mw(r.remoteStore,s.targetId),dy(r,s.targetId)}).catch(tl)):(dy(r,s.targetId),await ly(r.localStore,s.targetId,!0))}async function HU(t,e){const n=ve(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mw(n.remoteStore,r.targetId))}async function WU(t,e,n){const r=JU(t);try{const s=await function(o,a){const l=ve(o),u=ze.now(),h=a.reduce((y,b)=>y.add(b.key),Ae());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=ms(),v=Ae();return l.Ns.getEntries(y,h).next(E=>{b=E,b.forEach((x,w)=>{w.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,b)).next(E=>{f=E;const x=[];for(const w of a){const S=o9(w,f.get(w.key).overlayedDocument);S!=null&&x.push(new To(w.key,S,AA(S.value.mapValue),rs.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,x,a)}).next(E=>{m=E;const x=E.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(y,E.batchId,x)})}).then(()=>({batchId:m.batchId,changes:FA(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ze(Ie)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await du(r,s.changes),await qf(r.remoteStore)}catch(s){const i=xw(s,"Failed to persist write");n.reject(i)}}async function EN(t,e){const n=ve(t);try{const r=await sU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?je(o.hu,14607):s.removedDocuments.size>0&&(je(o.hu,42227),o.hu=!1))}),await du(n,r,e)}catch(r){await tl(r)}}function ab(t,e,n){const r=ve(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ve(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(a)&&(u=!0)}),u&&_w(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qU(t,e,n){const r=ve(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ze(ae.comparator);o=o.insert(i,Bt.newNoDocument(i,ye.min()));const a=Ae().add(i),l=new Bf(ye.min(),new Map,new Ze(Ie),o,a);await EN(r,l),r.du=r.du.remove(i),r.Au.delete(e),Ew(r)}else await ly(r.localStore,e,!1).then(()=>dy(r,e,n)).catch(tl)}async function GU(t,e){const n=ve(t),r=e.batch.batchId;try{const s=await rU(n.localStore,e);TN(n,r,null),SN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await du(n,s)}catch(s){await tl(s)}}async function KU(t,e,n){const r=ve(t);try{const s=await function(o,a){const l=ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(je(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);TN(r,e,n),SN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await du(r,s)}catch(s){await tl(s)}}function SN(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function TN(t,e,n){const r=ve(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function dy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||CN(t,r)})}function CN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(mw(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ew(t))}function lb(t,e,n){for(const r of n)r instanceof xN?(t.Ru.addReference(r.key,e),QU(t,r)):r instanceof _N?(se(bw,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||CN(t,r.key)):fe(19791,{wu:r})}function QU(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(se(bw,"New document in limbo: "+n),t.Eu.add(r),Ew(t))}function Ew(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(Ue.fromString(e)),r=t.fu.next();t.Au.set(r,new VU(n)),t.du=t.du.insert(n,r),dN(t.remoteStore,new Ks(Or(Vf(n.path)),r,"TargetPurposeLimboResolution",Of.ce))}}async function du(t,e,n){const r=ve(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=fw.As(l.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,u){const h=ve(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(u,m=>q.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>q.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!nl(f))throw f;se(pw,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),b=y.snapshotVersion,v=y.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(m,v)}}}(r.localStore,i))}async function YU(t,e){const n=ve(t);if(!n.currentUser.isEqual(e)){se(bw,"User change. New user:",e.toKey());const r=await aN(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new Z($.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await du(n,r.Ls)}}function XU(t,e){const n=ve(t),r=n.Au.get(e);if(r&&r.hu)return Ae().add(r.key);{let s=Ae();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function IN(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qU.bind(null,e),e.Pu.H_=jU.bind(null,e.eventManager),e.Pu.yu=OU.bind(null,e.eventManager),e}function JU(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KU.bind(null,e),e}class jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return nU(this.persistence,new Z9,e.initialUser,this.serializer)}Cu(e){return new oN(hw.mi,this.serializer)}Du(e){return new cU}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jh.provider={build:()=>new jh};class ZU extends jh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){je(this.persistence.referenceDelegate instanceof Ph,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new V9(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?cn.withCacheSize(this.cacheSizeBytes):cn.DEFAULT;return new oN(r=>Ph.mi(r,n),this.serializer)}}class hy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ab(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=YU.bind(null,this.syncEngine),await kU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DU}()}createDatastore(e){const n=Hf(e.databaseInfo.databaseId),r=function(i){return new pU(i)}(e.databaseInfo);return function(i,o,a,l){return new vU(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new xU(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>ab(this.syncEngine,n,0),function(){return tb.v()?new tb:new uU}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const f=new FU(s,i,o,a,l,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ve(s);se(yo,"RemoteStore shutting down."),i.Ea.add(5),await uu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}hy.provider={build:()=>new hy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class ez{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=zt.UNAUTHENTICATED,this.clientId=Df.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{se(bi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se(bi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=xw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bm(t,e){t.asyncQueue.verifyOperationInProgress(),se(bi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await aN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tz(t);se(bi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>rb(e.remoteStore,s)),t._onlineComponents=e}async function tz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(bi,"Using user provided OfflineComponentProvider");try{await bm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;go("Error using user provided cache. Falling back to memory cache: "+n),await bm(t,new jh)}}else se(bi,"Using default OfflineComponentProvider"),await bm(t,new ZU(void 0));return t._offlineComponents}async function NN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(bi,"Using user provided OnlineComponentProvider"),await cb(t,t._uninitializedComponentsProvider._online)):(se(bi,"Using default OnlineComponentProvider"),await cb(t,new hy))),t._onlineComponents}function nz(t){return NN(t).then(e=>e.syncEngine)}async function fy(t){const e=await NN(t),n=e.eventManager;return n.onListen=UU.bind(null,e.syncEngine),n.onUnlisten=BU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HU.bind(null,e.syncEngine),n}function rz(t,e,n={}){const r=new ai;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new AN({next:m=>{h.Nu(),o.enqueueAndForget(()=>vN(i,f));const y=m.docs.has(a);!y&&m.fromCache?u.reject(new Z($.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?u.reject(new Z($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new wN(Vf(a.path),h,{includeMetadataChanges:!0,qa:!0});return yN(i,f)}(await fy(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="firestore.googleapis.com",db=!0;class hb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Z($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kN,this.ssl=db}else this.host=e.host,this.ssl=e.ssl??db;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M9)throw new Z($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z($.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pA;switch(r.type){case"firstParty":return new mF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ub.get(n);r&&(se("ComponentProvider","Removing Datastore"),ub.delete(n),r.terminate())}(this),Promise.resolve()}}function PN(t,e,n,r={}){var u;t=ns(t,Gf);const s=Xa(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(bI(`https://${a}`),EI("Firestore",!0)),i.host!==kN&&i.host!==a&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!ho(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=zt.MOCK_USER;else{h=LV(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Z($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new zt(m)}t._authCredentials=new hF(new fA(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(au(n,rt._jsonSchema))return new rt(e,r||null,new ae(Ue.fromString(n.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:ut("string",rt._jsonSchemaVersion),referencePath:ut("string")};class ss extends vs{constructor(e,n,r){super(e,n,Vf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new ae(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function Sw(t,e,...n){if(t=en(t),mA("collection","path",e),t instanceof Gf){const r=Ue.fromString(e,...n);return T1(r),new ss(t,null,r)}{if(!(t instanceof rt||t instanceof ss))throw new Z($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return T1(r),new ss(t.firestore,null,r)}}function dt(t,e,...n){if(t=en(t),arguments.length===1&&(e=Df.newId()),mA("doc","path",e),t instanceof Gf){const r=Ue.fromString(e,...n);return S1(r),new rt(t,null,new ae(r))}{if(!(t instanceof rt||t instanceof ss))throw new Z($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return S1(r),new rt(t.firestore,t instanceof ss?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="AsyncQueue";class pb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cN(this,"async_queue_retry"),this._c=()=>{const r=_m();r&&se(fb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ai;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nl(e))throw e;se(fb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ps("INTERNAL UNHANDLED ERROR: ",mb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ww.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&fe(47125,{Pc:mb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function mb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ba extends Gf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new pb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pb(e),this._firestoreClient=void 0,await e}}}function DN(t,e){const n=typeof t=="object"?t:II(),r=typeof t=="string"?t:Ch,s=Hv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=OV("firestore");i&&PN(s,...i)}return s}function Kf(t){if(t._terminated)throw new Z($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sz(t),t._firestoreClient}function sz(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,u,h){return new kF(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,RN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ez(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sn(At.fromBase64String(e))}catch(n){throw new Z($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sn(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Sn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(au(e,Sn._jsonSchema))return Sn.fromBase64String(e.bytes)}}Sn._jsonSchemaVersion="firestore/bytes/1.0",Sn._jsonSchema={type:ut("string",Sn._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lr._jsonSchemaVersion}}static fromJSON(e){if(au(e,lr._jsonSchema))return new lr(e.latitude,e.longitude)}}lr._jsonSchemaVersion="firestore/geoPoint/1.0",lr._jsonSchema={type:ut("string",lr._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:cr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(au(e,cr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new cr(e.vectorValues);throw new Z($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}cr._jsonSchemaVersion="firestore/vectorValue/1.0",cr._jsonSchema={type:ut("string",cr._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=/^__.*__$/;class oz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new To(e,this.data,this.fieldMask,n,this.fieldTransforms):new lu(e,this.data,n,this.fieldTransforms)}}function jN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class Tw{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Tw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Oh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jN(this.Ac)&&iz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class az{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hf(e)}Cc(e,n,r,s=!1){return new Tw({Ac:e,methodName:n,Dc:r,path:Ct.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ON(t){const e=t._freezeSettings(),n=Hf(t._databaseId);return new az(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lz(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);VN("Data must be an object, but it was:",o,r);const a=MN(r,o);let l,u;if(i.merge)l=new rr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=uz(e,f,n);if(!o.contains(m))throw new Z($.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);hz(h,m)||h.push(m)}l=new rr(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new oz(new Ln(a),l,u)}class Cw extends Yf{_toFieldTransform(e){return new n9(e.path,new Mc)}isEqual(e){return e instanceof Cw}}function cz(t,e,n,r=!1){return Iw(n,t.Cc(r?4:3,e))}function Iw(t,e){if(LN(t=en(t)))return VN("Unsupported field value:",e,t),MN(t,e);if(t instanceof Yf)return function(r,s){if(!jN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Iw(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZF(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:kh(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:kh(s.serializer,i)}}if(r instanceof lr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sn)return{bytesValue:JA(s.serializer,r._byteString)};if(r instanceof rt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof cr)return function(o,a){return{mapValue:{fields:{[TA]:{stringValue:IA},[Ih]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return aw(a.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${jf(r)}`)}(t,e)}function MN(t,e){const n={};return wA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Eo(t,(r,s)=>{const i=Iw(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function LN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof lr||t instanceof Sn||t instanceof rt||t instanceof Yf||t instanceof cr)}function VN(t,e,n){if(!LN(n)||!yA(n)){const r=jf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function uz(t,e,n){if((e=en(e))instanceof Qf)return e._internalPath;if(typeof e=="string")return FN(t,e);throw Oh("Field path arguments must be of type string or ",t,!1,void 0,n)}const dz=new RegExp("[~\\*/\\[\\]]");function FN(t,e,n){if(e.search(dz)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qf(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Oh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new Z($.INVALID_ARGUMENT,a+t+l)}function hz(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Aw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fz extends UN{data(){return super.data()}}function Aw(t,e){return typeof e=="string"?FN(t,e):e instanceof Qf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nw{}class Xf extends Nw{}function Rw(t,e,...n){let r=[];e instanceof Nw&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Zf).length,a=i.filter(l=>l instanceof Jf).length;if(o>1||o>0&&a>0)throw new Z($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Jf extends Xf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Jf(e,n,r)}_apply(e){const n=this._parse(e);return $N(e._query,n),new vs(e.firestore,e.converter,ry(e._query,n))}_parse(e){const n=ON(e.firestore);return function(i,o,a,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){vb(f,h);const b=[];for(const v of f)b.push(yb(l,i,v));m={arrayValue:{values:b}}}else m=yb(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||vb(f,h),m=cz(a,o,f,h==="in"||h==="not-in");return ct.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zf extends Nw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)$N(o,l),o=ry(o,l)}(e._query,n),new vs(e.firestore,e.converter,ry(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ep extends Xf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ep(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new Z($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Z($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Oc(i,o)}(e._query,this._field,this._direction);return new vs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new rl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function kw(t,e="asc"){const n=e,r=Aw("orderBy",t);return ep._create(r,n)}class tp extends Xf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new tp(e,n,r)}_apply(e){return new vs(e.firestore,e.converter,Nh(e._query,this._limit,this._limitType))}}function zN(t){return tp._create("limit",t,"F")}function yb(t,e,n){if(typeof(n=en(n))=="string"){if(n==="")throw new Z($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OA(e)&&n.indexOf("/")!==-1)throw new Z($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!ae.isDocumentKey(r))throw new Z($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return D1(t,new ae(r))}if(n instanceof rt)return D1(t,n._key);throw new Z($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jf(n)}.`)}function vb(t,e){if(!Array.isArray(t)||t.length===0)throw new Z($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $N(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BN{convertValue(e,n="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Eo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Ih].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>it(o.doubleValue));return new cr(n)}convertGeoPoint(e){return new lr(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Lf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){const n=vi(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);je(sN(r),9688,{name:e});const s=new Va(r.get(1),r.get(3)),i=new ae(r.popFirst(5));return s.isEqual(n)||ps(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Jo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class li extends UN{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Aw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=li._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}li._jsonSchemaVersion="firestore/documentSnapshot/1.0",li._jsonSchema={type:ut("string",li._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class sc extends li{data(e={}){return super.data(e)}}class no{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Jo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sc(this._firestore,this._userDataWriter,r.key,r,new Jo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new sc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Jo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new sc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Jo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:gz(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=no._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Df.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){t=ns(t,rt);const e=ns(t.firestore,Ba);return rz(Kf(e),t._key).then(n=>qN(e,t,n))}no._jsonSchemaVersion="firestore/querySnapshot/1.0",no._jsonSchema={type:ut("string",no._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class HN extends BN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}function gn(t,e,n){t=ns(t,rt);const r=ns(t.firestore,Ba),s=mz(t.converter,e,n);return WN(r,[lz(ON(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,rs.none())])}function il(t,...e){var l,u,h;t=en(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||gb(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(gb(e[r])){const f=e[r];e[r]=(l=f.next)==null?void 0:l.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,a;if(t instanceof rt)o=ns(t.firestore,Ba),a=Vf(t._key.path),i={next:f=>{e[r]&&e[r](qN(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=ns(t,vs);o=ns(f.firestore,Ba),a=f._query;const m=new HN(o);i={next:y=>{e[r]&&e[r](new no(o,m,f,y))},error:e[r+1],complete:e[r+2]},pz(t._query)}return function(m,y,b,v){const E=new AN(v),x=new wN(y,E,b);return m.asyncQueue.enqueueAndForget(async()=>yN(await fy(m),x)),()=>{E.Nu(),m.asyncQueue.enqueueAndForget(async()=>vN(await fy(m),x))}}(Kf(o),a,s,i)}function WN(t,e){return function(r,s){const i=new ai;return r.asyncQueue.enqueueAndForget(async()=>WU(await nz(r),s,i)),i.promise}(Kf(t),e)}function qN(t,e,n){const r=n.docs.get(e._key),s=new HN(t);return new li(t,s,e._key,r,new Jo(n.hasPendingWrites,n.fromCache),e.converter)}function np(){return new Cw("serverTimestamp")}(function(e,n=!0){(function(s){el=s})(Ja),Oa(new fo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ba(new fF(r.getProvider("auth-internal")),new gF(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Z($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ii(x1,_1,e),ii(x1,_1,"esm2020")})();const wb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:BN,Bytes:Sn,CollectionReference:ss,DocumentReference:rt,DocumentSnapshot:li,FieldPath:Qf,FieldValue:Yf,Firestore:Ba,FirestoreError:Z,GeoPoint:lr,Query:vs,QueryCompositeFilterConstraint:Zf,QueryConstraint:Xf,QueryDocumentSnapshot:sc,QueryFieldFilterConstraint:Jf,QueryLimitConstraint:tp,QueryOrderByConstraint:ep,QuerySnapshot:no,SnapshotMetadata:Jo,Timestamp:ze,VectorValue:cr,_AutoId:Df,_ByteString:At,_DatabaseId:Va,_DocumentKey:ae,_EmptyAuthCredentialsProvider:pA,_FieldPath:Ct,_cast:ns,_logWarn:go,_validateIsNotUsedTogether:gA,collection:Sw,connectFirestoreEmulator:PN,doc:dt,ensureFirestoreConfigured:Kf,executeWrite:WN,getDoc:Ha,getFirestore:DN,limit:zN,onSnapshot:il,orderBy:kw,query:Rw,serverTimestamp:np,setDoc:gn},Symbol.toStringTag,{value:"Module"})),yz={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},Pw=CI(yz),Fo=lF(Pw),st=DN(Pw),Ii=new En;Ii.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Ii.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Ii.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Ii.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Ii.addScope("https://www.googleapis.com/auth/calendar");Ii.addScope("https://www.googleapis.com/auth/gmail.send");const xb=Object.freeze(Object.defineProperty({__proto__:null,app:Pw,auth:Fo,db:st,googleProvider:Ii},Symbol.toStringTag,{value:"Module"})),GN=p.createContext(void 0);function vz({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(!0),[i,o]=p.useState(null),[a,l]=p.useState(null);p.useEffect(()=>X6(Fo,b=>{n(b),s(!1)}),[]);const u=async()=>{try{l(null);const y=await gm(Fo,Ii),b=En.credentialFromResult(y);b!=null&&b.accessToken&&o(b.accessToken)}catch(y){const b=y instanceof Error?y.message:"Failed to sign in";l(b),console.error("Sign in error:",y)}},h=async()=>{try{l(null);const y=new En;y.addScope("https://www.googleapis.com/auth/gmail.send"),y.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const b=await gm(Fo,y),v=En.credentialFromResult(b),E=b._tokenResponse;if(E!=null&&E.oauthRefreshToken){const{doc:x,setDoc:w,serverTimestamp:S}=await ed(async()=>{const{doc:O,setDoc:D,serverTimestamp:C}=await Promise.resolve().then(()=>wb);return{doc:O,setDoc:D,serverTimestamp:C}},void 0),{db:k}=await ed(async()=>{const{db:O}=await Promise.resolve().then(()=>xb);return{db:O}},void 0);if(e&&E.oauthRefreshToken)return await w(x(k,"users",e.uid,"private_tokens","google"),{refreshToken:E.oauthRefreshToken,updatedAt:S()}),!0}return!!(v!=null&&v.accessToken)}catch(y){const b=y instanceof Error?y.message:"Failed to get Gmail permissions";return l(b),console.error("Permission error:",y),!1}},f=async()=>{try{l(null);const y=new En;y.addScope("https://www.googleapis.com/auth/calendar.events"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const v=(await gm(Fo,y))._tokenResponse;if(e&&(v!=null&&v.oauthRefreshToken)){const{doc:E,setDoc:x,serverTimestamp:w}=await ed(async()=>{const{doc:k,setDoc:O,serverTimestamp:D}=await Promise.resolve().then(()=>wb);return{doc:k,setDoc:O,serverTimestamp:D}},void 0),{db:S}=await ed(async()=>{const{db:k}=await Promise.resolve().then(()=>xb);return{db:k}},void 0);return await x(E(S,"users",e.uid,"private_tokens","calendar"),{refreshToken:v.oauthRefreshToken,updatedAt:w(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(y){const b=y instanceof Error?y.message:"Failed to get Calendar permissions";return l(b),console.error("Permission error:",y),!1}},m=async()=>{try{await J6(Fo),o(null)}catch(y){const b=y instanceof Error?y.message:"Failed to sign out";l(b)}};return c.jsx(GN.Provider,{value:{user:e,loading:r,accessToken:i,signInWithGoogle:u,requestGmailPermissions:h,requestCalendarPermissions:f,signOut:m,error:a},children:t})}function Wn(){const t=p.useContext(GN);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const KN=p.createContext(void 0);function wz({children:t}){const[e,n]=p.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});p.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return c.jsx(KN.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function QN(){const t=p.useContext(KN);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}async function xz(t,e,n,r){const i=[`To: ${t}`,"Subject: "+e,"Content-Type: text/html; charset=utf-8","MIME-Version: 1.0","",n].join(`\r
`),o=btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({raw:o})})}async function _z(t,e,n,r){const s=dt(st,"users",n,"settings","calendar"),i=await Ha(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let a=!1;for(const l of t){if(!l.dueDate)continue;const u=new Date(l.dueDate),h=u.toISOString().split("T")[0],f={summary:` ${l.title}`,description:`Course: ${l.courseName}
${l.description||""}

Synced via Student Sphere`,start:{date:h},end:{date:h}},m=new Date(u);m.setDate(m.getDate()+1),f.end.date=m.toISOString().split("T")[0];const y=dt(st,"users",n,"calendarEvents",l.id),b=await Ha(y),v="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let E;if(b.exists()){const{calendarEventId:x}=b.data();E=await fetch(`${v}/${x}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(E=await fetch(v,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),E.ok){const x=await E.json();await gn(y,{calendarEventId:x.id,assignmentId:l.id,updatedAt:np()})}if(!E.ok&&E.status===403&&!a){a=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(E){console.warn(`Failed to sync assignment ${l.id} to calendar`,E)}}}const YN=p.createContext(void 0);function bz(){return Math.random().toString(36).substring(2,15)}async function Mh(t,e,n,r){var o;const s=[];let i;do{const a=e.includes("?")?"&":"?",l=i?`${e}${a}pageToken=${i}`:e;console.log(`Fetching: ${l.substring(0,100)}...`);const u=await fetch(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let m=u.statusText,y={};try{const b=await u.json();y=b,m=((o=b.error)==null?void 0:o.message)||b.message||m,console.error("API Error Response:",b)}catch{const v=await u.text().catch(()=>"");console.error("API Error (non-JSON):",v)}throw new Error(`${m} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}async function Ez(t,e){const r=await Mh(t,"https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE",i=>i.courses||[],i=>i.nextPageToken),s=new Date().toISOString();return r.map(i=>({id:`course-${i.id}`,userId:e,classroomId:i.id,name:i.name,section:i.section||null,descriptionHeading:i.descriptionHeading||null,room:i.room||null,ownerId:i.ownerId||null,enrollmentCode:i.enrollmentCode||null,courseState:i.courseState||null,alternateLink:i.alternateLink||null,lastSyncedAt:s}))}async function Sz(t,e,n,r){var a,l;const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWork?courseWorkStates=PUBLISHED`,i=await Mh(t,s,u=>u.courseWork||[],u=>u.nextPageToken);new Date().toISOString();const o=[];for(const u of i){if(u.workType&&u.workType!=="ASSIGNMENT"&&u.workType!=="MULTIPLE_CHOICE_QUESTION")continue;let h=null;try{const E=`https://classroom.googleapis.com/v1/courses/${e}/courseWork/${u.id}/studentSubmissions?userId=me`;h=(await Mh(t,E,w=>w.studentSubmissions||[],w=>w.nextPageToken))[0]||null}catch(E){console.warn(`Failed to fetch submissions for coursework ${u.id}:`,E)}let f=null,m=null;u.dueDate&&(f=new Date(u.dueDate.year,u.dueDate.month-1,u.dueDate.day,((a=u.dueTime)==null?void 0:a.hours)||23,((l=u.dueTime)==null?void 0:l.minutes)||59).toISOString(),u.dueTime&&(m=`${String(u.dueTime.hours).padStart(2,"0")}:${String(u.dueTime.minutes).padStart(2,"0")}`));const y=new Date;let b="backlog";h?h.state==="RETURNED"||h.returnedGrade!==void 0?b="graded":h.state==="TURNED_IN"||h.turnInTime?b="submitted":h.state==="CREATED"&&(b=f&&new Date(f)<y?"overdue":"backlog"):f&&new Date(f)<y?b="overdue":b="backlog";const v={id:`assign-${u.id}`,uniqueId:`${e}-${u.id}`,userId:r,courseId:`course-${e}`,courseName:n,classroomId:u.id,title:u.title,description:u.description||null,dueDate:f,dueTime:m,maxPoints:u.maxPoints||null,systemStatus:b,userStatus:null,submissionId:(h==null?void 0:h.id)||null,submittedAt:(h==null?void 0:h.turnInTime)||null,gradedAt:h!=null&&h.updateTime&&h.state==="RETURNED"?h.updateTime:null,grade:(h==null?void 0:h.returnedGrade)||(h==null?void 0:h.assignedGrade)||null,alternateLink:u.alternateLink||null,createdAt:y.toISOString(),lastSyncedAt:y.toISOString()};o.push(v)}return o}async function Tz(t,e,n,r){const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`;try{const i=await Mh(t,s,a=>a.courseWorkMaterial||[],a=>a.nextPageToken),o=new Date().toISOString();return i.map(a=>({id:`mat-${a.id}`,uniqueId:`${e}-${a.id}`,userId:r,courseId:`course-${e}`,courseName:n,title:a.title,description:a.description||null,alternateLink:a.alternateLink||null,materials:a.materials||null,createdAt:a.updateTime||o,lastSyncedAt:o}))}catch(i){return console.warn(`Failed to fetch materials for course ${e}:`,i),[]}}function Cz({children:t}){const{user:e,accessToken:n}=Wn(),[r,s]=p.useState(()=>{const U=sessionStorage.getItem("classroom_courses");return U?JSON.parse(U):[]}),[i,o]=p.useState(()=>{const U=sessionStorage.getItem("classroom_assignments");return U?JSON.parse(U):[]}),[a,l]=p.useState(()=>{const U=sessionStorage.getItem("classroom_materials");return U?JSON.parse(U):[]}),[u,h]=p.useState(()=>{const U=sessionStorage.getItem("classroom_notes");return U?new Map(JSON.parse(U)):new Map}),[f,m]=p.useState(()=>!sessionStorage.getItem("classroom_courses")),[y,b]=p.useState(!1),[v,E]=p.useState(()=>{const U=sessionStorage.getItem("classroom_lastSyncedAt");return U?new Date(U):null}),[x,w]=p.useState(null),[S,k]=p.useState(!1),{toast:O}=Xc(),D=p.useCallback(async(U=!1)=>{var V;if(!e){w("Please sign in with Google to sync your Classroom data"),m(!1);return}let Q=n;if(!Q)try{const M=await e.getIdToken();console.log("Got ID token, but need OAuth access token for Classroom API"),w("Access token expired. Please sign out and sign in again to refresh your token."),m(!1);return}catch{w("Unable to authenticate. Please sign in again."),m(!1);return}b(!0),i.length===0&&m(!0),w(null);try{console.log("Starting sync...",{userId:e.uid,hasToken:!!Q});const M=await Ez(Q,e.uid);if(console.log(`Fetched ${M.length} courses`),M.length===0){w("No active courses found. Make sure you're enrolled in at least one Google Classroom course."),s([]),o([]),E(new Date),b(!1),m(!1);return}const z=[],K=[];for(const W of M)try{console.log(`Fetching data for course: ${W.name}`);const[ne,ee]=await Promise.all([Sz(Q,W.classroomId,W.name,e.uid),Tz(Q,W.classroomId,W.name,e.uid)]);console.log(`Found ${ne.length} assignments and ${ee.length} materials for ${W.name}`),z.push(...ne),K.push(...ee)}catch(ne){console.warn(`Failed to fetch data for course ${W.name}:`,ne)}console.log(`Sync complete: ${M.length} courses, ${z.length} assignments, ${K.length} materials`),s(M),o(z),l(K),E(new Date),m(!1);try{await _z(z,Q,e.uid,O)}catch(W){console.error("Calendar sync failed:",W)}try{const W=dt(st,"users",e.uid,"settings","notifications"),ne=await Ha(W);if(ne.exists()&&ne.data().enabled&&ne.data().notifyDueSoon){const ue=dt(st,"users",e.uid,"notifications","digest"),le=await Ha(ue),H=le.exists()?(V=le.data().lastSent)==null?void 0:V.toDate():null,re=new Date;if(!(H&&H.getDate()===re.getDate()&&H.getMonth()===re.getMonth()&&H.getFullYear()===re.getFullYear())){const te=new Date(re);te.setDate(te.getDate()+1),te.setHours(23,59,59,999);const de=z.filter(he=>{if(!he.dueDate||he.systemStatus==="submitted"||he.systemStatus==="graded")return!1;const Oe=new Date(he.dueDate);return Oe>=re&&Oe<=te});if(de.length>0&&e.email){const he=de.map(Ve=>`<li><strong>${Ve.title}</strong> <span style="color:#666">(${Ve.courseName})</span><br>Due: ${new Date(Ve.dueDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</li>`).join(""),Oe=`
                         <div style="font-family: sans-serif; max-width: 600px; margin: 0 auto;">
                           <h2 style="color: #2563eb;"> Daily Digest</h2>
                           <p>You have <strong>${de.length} assignments</strong> coming up in the next 24 hours:</p>
                           <ul style="line-height: 1.6;">${he}</ul>
                           <a href="http://localhost:3000" style="display: inline-block; background: #2563eb; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-top: 20px;">Open Student Sphere</a>
                         </div>
                       `;await xz(e.email,`Student Sphere: ${de.length} Tasks Due Soon`,Oe,Q),await gn(ue,{lastSent:np()}),console.log("Daily digest email delivered.")}}}}catch(W){console.warn("Notification sync failed (non-critical):",W)}U||O({title:"Sync Complete",description:`Successfully synced ${M.length} courses, ${z.length} assignments, and updated Google Calendar.`})}catch(M){console.error("Sync error details:",M);let z="Failed to sync";if(M!=null&&M.message){const K=M.message.toLowerCase();K.includes("401")||K.includes("unauthorized")||K.includes("invalid_token")||K.includes("token expired")?z="Authentication failed. Your access token may have expired. Please sign out and sign in again.":K.includes("403")||K.includes("forbidden")||K.includes("permission denied")?z="Permission denied. Please make sure you granted Classroom access permissions when signing in. Sign out and sign in again, then grant all requested permissions.":K.includes("quota")||K.includes("rate")||K.includes("429")?z="API quota exceeded. Please try again later.":K.includes("cors")||K.includes("network")?z="Network error. Please check your internet connection and try again.":z=`Sync failed: ${M.message}`}else M instanceof TypeError&&M.message.includes("fetch")&&(z="Network error. Please check your internet connection.");w(z),console.error("Sync error:",M),U||O({variant:"destructive",title:"Sync Failed",description:z})}finally{b(!1),m(!1)}},[e,n]);p.useEffect(()=>{if(!e){k(!1),m(!1);return}if(!n){m(!1);return}!S&&!y&&(k(!0),D(!0))},[e,n,S,r.length,i.length,y]),p.useEffect(()=>{sessionStorage.setItem("classroom_courses",JSON.stringify(r))},[r]),p.useEffect(()=>{sessionStorage.setItem("classroom_materials",JSON.stringify(a))},[a]),p.useEffect(()=>{sessionStorage.setItem("classroom_notes",JSON.stringify(Array.from(u.entries())))},[u]),p.useEffect(()=>{sessionStorage.setItem("classroom_assignments",JSON.stringify(i))},[i]),p.useEffect(()=>{v?sessionStorage.setItem("classroom_lastSyncedAt",v.toISOString()):sessionStorage.removeItem("classroom_lastSyncedAt")},[v]);const C=p.useCallback((U,Q)=>{o(V=>V.map(M=>M.id===U?{...M,userStatus:Q}:M))},[]),T=p.useCallback((U,Q,V=!1)=>{const M={id:bz(),userId:(e==null?void 0:e.uid)||"",assignmentId:U,content:Q,isImportant:V,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};h(z=>{const K=new Map(z),W=K.get(U)||[];return K.set(U,[...W,M]),K})},[e]),I=p.useCallback((U,Q,V)=>{h(M=>{const z=new Map(M);for(const[K,W]of Array.from(z.entries())){const ne=W.findIndex(ee=>ee.id===U);if(ne!==-1){const ee=[...W];ee[ne]={...ee[ne],content:Q,isImportant:V??ee[ne].isImportant,updatedAt:new Date().toISOString()},z.set(K,ee);break}}return z})},[]),N=p.useCallback((U,Q)=>{h(V=>{const M=new Map(V),z=M.get(Q)||[];return M.set(Q,z.filter(K=>K.id!==U)),M})},[]),R=p.useCallback(()=>{const U=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return i.forEach(Q=>{const V=Q.userStatus==="in_progress"?"in_progress":Q.systemStatus,M=U.find(z=>z.id===V);M&&M.assignments.push(Q)}),U.forEach(Q=>{Q.assignments.sort((V,M)=>V.dueDate?M.dueDate?new Date(V.dueDate).getTime()-new Date(M.dueDate).getTime():-1:1)}),U},[i]),j=p.useCallback(()=>{const U=new Date,Q=new Date(U);Q.setDate(Q.getDate()+3);const V=new Date(U);V.setDate(V.getDate()+7);const M=i.filter(H=>H.systemStatus!=="graded"&&H.systemStatus!=="submitted"),z=i.filter(H=>{if(!H.dueDate||H.systemStatus==="graded"||H.systemStatus==="submitted")return!1;const re=new Date(H.dueDate);return re>=U&&re<=Q}),K=i.filter(H=>{if(!H.dueDate||H.systemStatus==="graded"||H.systemStatus==="submitted")return!1;const re=new Date(H.dueDate);return re>=U&&re<=V}),W=i.filter(H=>H.systemStatus==="overdue"),ne=[],ee=new Date,ue=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let H=0;H<7;H++){const re=new Date(ee);re.setDate(re.getDate()+H);const we=re.toISOString().split("T")[0],te=i.filter(de=>de.dueDate?de.dueDate.split("T")[0]===we:!1).length;ne.push({day:ue[re.getDay()],count:te,isToday:H===0})}const le=[...M].filter(H=>H.dueDate).sort((H,re)=>new Date(H.dueDate).getTime()-new Date(re.dueDate).getTime()).slice(0,5);return{totalActive:M.length,upcoming3Days:z.length,upcoming7Days:K.length,overdue:W.length,weeklyWorkload:ne,nextActions:le}},[i]),P=p.useCallback(U=>{let Q=[...i];U!=null&&U.courseId&&(Q=Q.filter(K=>K.courseId===U.courseId)),U!=null&&U.status&&(Q=Q.filter(K=>K.systemStatus===U.status)),Q.sort((K,W)=>K.dueDate?W.dueDate?new Date(K.dueDate).getTime()-new Date(W.dueDate).getTime():-1:1);const V=new Map,M=new Date,z=new Date(M);return z.setDate(z.getDate()+1),Q.forEach(K=>{if(!K.dueDate)return;const W=K.dueDate.split("T")[0],ne=new Date(K.dueDate);let ee;W===M.toISOString().split("T")[0]?ee="Today":W===z.toISOString().split("T")[0]?ee="Tomorrow":ee=ne.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),V.has(W)||V.set(W,{date:W,dateLabel:ee,assignments:[]}),V.get(W).assignments.push(K)}),Array.from(V.values())},[i]),B=p.useCallback(U=>i.find(Q=>Q.id===U),[i]),oe=p.useCallback(U=>u.get(U)||[],[u]);return c.jsx(YN.Provider,{value:{courses:r,assignments:i,notes:u,isLoading:f,isSyncing:y,lastSyncedAt:v,error:x,syncClassroom:D,updateAssignmentStatus:C,addNote:T,updateNote:I,deleteNote:N,getPipelineColumns:R,getDashboardMetrics:j,getTimelineGroups:P,getAssignmentById:B,getNotesForAssignment:oe,materials:a},children:t})}function ws(){const t=p.useContext(YN);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}var Em="focusScope.autoFocusOnMount",Sm="focusScope.autoFocusOnUnmount",_b={bubbles:!1,cancelable:!0},Iz="FocusScope",Dw=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),u=Zt(s),h=Zt(i),f=p.useRef(null),m=Le(e,v=>l(v)),y=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(S){if(y.paused||!a)return;const k=S.target;a.contains(k)?f.current=k:Ps(f.current,{select:!0})},E=function(S){if(y.paused||!a)return;const k=S.relatedTarget;k!==null&&(a.contains(k)||Ps(f.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const O of S)O.removedNodes.length>0&&Ps(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",E);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",E),w.disconnect()}}},[r,a,y.paused]),p.useEffect(()=>{if(a){Eb.add(y);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(Em,_b);a.addEventListener(Em,u),a.dispatchEvent(x),x.defaultPrevented||(Az(Dz(XN(a)),{select:!0}),document.activeElement===v&&Ps(a))}return()=>{a.removeEventListener(Em,u),setTimeout(()=>{const x=new CustomEvent(Sm,_b);a.addEventListener(Sm,h),a.dispatchEvent(x),x.defaultPrevented||Ps(v??document.body,{select:!0}),a.removeEventListener(Sm,h),Eb.remove(y)},0)}}},[a,u,h,y]);const b=p.useCallback(v=>{if(!n&&!r||y.paused)return;const E=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(E&&x){const w=v.currentTarget,[S,k]=Nz(w);S&&k?!v.shiftKey&&x===k?(v.preventDefault(),n&&Ps(S,{select:!0})):v.shiftKey&&x===S&&(v.preventDefault(),n&&Ps(k,{select:!0})):x===w&&v.preventDefault()}},[n,r,y.paused]);return c.jsx(me.div,{tabIndex:-1,...o,ref:m,onKeyDown:b})});Dw.displayName=Iz;function Az(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ps(r,{select:e}),document.activeElement!==n)return}function Nz(t){const e=XN(t),n=bb(e,t),r=bb(e.reverse(),t);return[n,r]}function XN(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bb(t,e){for(const n of t)if(!Rz(n,{upTo:e}))return n}function Rz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function kz(t){return t instanceof HTMLInputElement&&"select"in t}function Ps(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&kz(t)&&e&&t.select()}}var Eb=Pz();function Pz(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Sb(t,e),t.unshift(e)},remove(e){var n;t=Sb(t,e),(n=t[0])==null||n.resume()}}}function Sb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Dz(t){return t.filter(e=>e.tagName!=="A")}var Tm=0;function JN(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Tb()),document.body.insertAdjacentElement("beforeend",t[1]??Tb()),Tm++,()=>{Tm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Tm--}},[])}function Tb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Rr=function(){return Rr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Rr.apply(this,arguments)};function ZN(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function jz(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Fd="right-scroll-bar-position",Ud="width-before-scroll-bar",Oz="with-scroll-bars-hidden",Mz="--removed-body-scroll-bar-size";function Cm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Lz(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Vz=typeof window<"u"?p.useLayoutEffect:p.useEffect,Cb=new WeakMap;function Fz(t,e){var n=Lz(null,function(r){return t.forEach(function(s){return Cm(s,r)})});return Vz(function(){var r=Cb.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Cm(a,null)}),i.forEach(function(a){s.has(a)||Cm(a,o)})}Cb.set(n,t)},[t]),n}function Uz(t){return t}function zz(t,e){e===void 0&&(e=Uz);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function $z(t){t===void 0&&(t={});var e=zz(null);return e.options=Rr({async:!0,ssr:!1},t),e}var eR=function(t){var e=t.sideCar,n=ZN(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Rr({},n))};eR.isSideCarExport=!0;function Bz(t,e){return t.useMedium(e),eR}var tR=$z(),Im=function(){},rp=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Im,onWheelCapture:Im,onTouchMoveCapture:Im}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,y=t.noIsolation,b=t.inert,v=t.allowPinchZoom,E=t.as,x=E===void 0?"div":E,w=t.gapMode,S=ZN(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,O=Fz([n,e]),D=Rr(Rr({},S),s);return p.createElement(p.Fragment,null,h&&p.createElement(k,{sideCar:tR,removeScrollBar:u,shards:f,noIsolation:y,inert:b,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?p.cloneElement(p.Children.only(a),Rr(Rr({},D),{ref:O})):p.createElement(x,Rr({},D,{className:l,ref:O}),a))});rp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rp.classNames={fullWidth:Ud,zeroRight:Fd};var Hz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Wz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Hz();return e&&t.setAttribute("nonce",e),t}function qz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Gz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Kz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Wz())&&(qz(e,n),Gz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Qz=function(){var t=Kz();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},nR=function(){var t=Qz(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Yz={left:0,top:0,right:0,gap:0},Am=function(t){return parseInt(t||"",10)||0},Xz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Am(n),Am(r),Am(s)]},Jz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Yz;var e=Xz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Zz=nR(),da="data-scroll-locked",e$=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Oz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(da,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Fd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ud,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Fd," .").concat(Fd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ud," .").concat(Ud,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(da,`] {
    `).concat(Mz,": ").concat(a,`px;
  }
`)},Ib=function(){var t=parseInt(document.body.getAttribute(da)||"0",10);return isFinite(t)?t:0},t$=function(){p.useEffect(function(){return document.body.setAttribute(da,(Ib()+1).toString()),function(){var t=Ib()-1;t<=0?document.body.removeAttribute(da):document.body.setAttribute(da,t.toString())}},[])},n$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;t$();var i=p.useMemo(function(){return Jz(s)},[s]);return p.createElement(Zz,{styles:e$(i,!e,s,n?"":"!important")})},py=!1;if(typeof window<"u")try{var ad=Object.defineProperty({},"passive",{get:function(){return py=!0,!0}});window.addEventListener("test",ad,ad),window.removeEventListener("test",ad,ad)}catch{py=!1}var Po=py?{passive:!1}:!1,r$=function(t){return t.tagName==="TEXTAREA"},rR=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!r$(t)&&n[e]==="visible")},s$=function(t){return rR(t,"overflowY")},i$=function(t){return rR(t,"overflowX")},Ab=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=sR(t,r);if(s){var i=iR(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},o$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},a$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},sR=function(t,e){return t==="v"?s$(e):i$(e)},iR=function(t,e){return t==="v"?o$(e):a$(e)},l$=function(t,e){return t==="h"&&e==="rtl"?-1:1},c$=function(t,e,n,r,s){var i=l$(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),u=!1,h=o>0,f=0,m=0;do{var y=iR(t,a),b=y[0],v=y[1],E=y[2],x=v-E-i*b;(b||x)&&sR(t,a)&&(f+=x,m+=b),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},ld=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Nb=function(t){return[t.deltaX,t.deltaY]},Rb=function(t){return t&&"current"in t?t.current:t},u$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},d$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},h$=0,Do=[];function f$(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(h$++)[0],i=p.useState(nR)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=jz([t.lockRef.current],(t.shards||[]).map(Rb),!0).filter(Boolean);return v.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,E){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=ld(v),w=n.current,S="deltaX"in v?v.deltaX:w[0]-x[0],k="deltaY"in v?v.deltaY:w[1]-x[1],O,D=v.target,C=Math.abs(S)>Math.abs(k)?"h":"v";if("touches"in v&&C==="h"&&D.type==="range")return!1;var T=Ab(C,D);if(!T)return!0;if(T?O=C:(O=C==="v"?"h":"v",T=Ab(C,D)),!T)return!1;if(!r.current&&"changedTouches"in v&&(S||k)&&(r.current=O),!O)return!0;var I=r.current||O;return c$(I,E,v,I==="h"?S:k,!0)},[]),l=p.useCallback(function(v){var E=v;if(!(!Do.length||Do[Do.length-1]!==i)){var x="deltaY"in E?Nb(E):ld(E),w=e.current.filter(function(O){return O.name===E.type&&(O.target===E.target||E.target===O.shadowParent)&&u$(O.delta,x)})[0];if(w&&w.should){E.cancelable&&E.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(Rb).filter(Boolean).filter(function(O){return O.contains(E.target)}),k=S.length>0?a(E,S[0]):!o.current.noIsolation;k&&E.cancelable&&E.preventDefault()}}},[]),u=p.useCallback(function(v,E,x,w){var S={name:v,delta:E,target:x,should:w,shadowParent:p$(x)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(k){return k!==S})},1)},[]),h=p.useCallback(function(v){n.current=ld(v),r.current=void 0},[]),f=p.useCallback(function(v){u(v.type,Nb(v),v.target,a(v,t.lockRef.current))},[]),m=p.useCallback(function(v){u(v.type,ld(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return Do.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Po),document.addEventListener("touchmove",l,Po),document.addEventListener("touchstart",h,Po),function(){Do=Do.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,Po),document.removeEventListener("touchmove",l,Po),document.removeEventListener("touchstart",h,Po)}},[]);var y=t.removeScrollBar,b=t.inert;return p.createElement(p.Fragment,null,b?p.createElement(i,{styles:d$(s)}):null,y?p.createElement(n$,{gapMode:t.gapMode}):null)}function p$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const m$=Bz(tR,f$);var jw=p.forwardRef(function(t,e){return p.createElement(rp,Rr({},t,{ref:e,sideCar:m$}))});jw.classNames=rp.classNames;var g$=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},jo=new WeakMap,cd=new WeakMap,ud={},Nm=0,oR=function(t){return t&&(t.host||oR(t.parentNode))},y$=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=oR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},v$=function(t,e,n,r){var s=y$(e,Array.isArray(t)?t:[t]);ud[n]||(ud[n]=new WeakMap);var i=ud[n],o=[],a=new Set,l=new Set(s),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))h(m);else try{var y=m.getAttribute(r),b=y!==null&&y!=="false",v=(jo.get(m)||0)+1,E=(i.get(m)||0)+1;jo.set(m,v),i.set(m,E),o.push(m),v===1&&b&&cd.set(m,!0),E===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return h(e),a.clear(),Nm++,function(){o.forEach(function(f){var m=jo.get(f)-1,y=i.get(f)-1;jo.set(f,m),i.set(f,y),m||(cd.has(f)||f.removeAttribute(r),cd.delete(f)),y||f.removeAttribute(n)}),Nm--,Nm||(jo=new WeakMap,jo=new WeakMap,cd=new WeakMap,ud={})}},aR=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=g$(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),v$(r,s,n,"aria-hidden")):function(){return null}},Ow="Dialog",[lR,cR]=Hn(Ow),[w$,gr]=lR(Ow),uR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=p.useRef(null),l=p.useRef(null),[u=!1,h]=di({prop:r,defaultProp:s,onChange:i});return c.jsx(w$,{scope:e,triggerRef:a,contentRef:l,contentId:ts(),titleId:ts(),descriptionId:ts(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};uR.displayName=Ow;var dR="DialogTrigger",hR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=gr(dR,n),i=Le(e,s.triggerRef);return c.jsx(me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Vw(s.open),...r,ref:i,onClick:ce(t.onClick,s.onOpenToggle)})});hR.displayName=dR;var Mw="DialogPortal",[x$,fR]=lR(Mw,{forceMount:void 0}),pR=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=gr(Mw,e);return c.jsx(x$,{scope:e,forceMount:n,children:p.Children.map(r,o=>c.jsx(bo,{present:n||i.open,children:c.jsx(gf,{asChild:!0,container:s,children:o})}))})};pR.displayName=Mw;var Lh="DialogOverlay",mR=p.forwardRef((t,e)=>{const n=fR(Lh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=gr(Lh,t.__scopeDialog);return i.modal?c.jsx(bo,{present:r||i.open,children:c.jsx(b$,{...s,ref:e})}):null});mR.displayName=Lh;var _$=ka("DialogOverlay.RemoveScroll"),b$=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=gr(Lh,n);return c.jsx(jw,{as:_$,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(me.div,{"data-state":Vw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),vo="DialogContent",gR=p.forwardRef((t,e)=>{const n=fR(vo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=gr(vo,t.__scopeDialog);return c.jsx(bo,{present:r||i.open,children:i.modal?c.jsx(E$,{...s,ref:e}):c.jsx(S$,{...s,ref:e})})});gR.displayName=vo;var E$=p.forwardRef((t,e)=>{const n=gr(vo,t.__scopeDialog),r=p.useRef(null),s=Le(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return aR(i)},[]),c.jsx(yR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ce(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ce(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:ce(t.onFocusOutside,i=>i.preventDefault())})}),S$=p.forwardRef((t,e)=>{const n=gr(vo,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return c.jsx(yR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),yR=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=gr(vo,n),l=p.useRef(null),u=Le(e,l);return JN(),c.jsxs(c.Fragment,{children:[c.jsx(Dw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(Jc,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Vw(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(C$,{titleId:a.titleId}),c.jsx(A$,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Lw="DialogTitle",vR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=gr(Lw,n);return c.jsx(me.h2,{id:s.titleId,...r,ref:e})});vR.displayName=Lw;var wR="DialogDescription",xR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=gr(wR,n);return c.jsx(me.p,{id:s.descriptionId,...r,ref:e})});xR.displayName=wR;var _R="DialogClose",bR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=gr(_R,n);return c.jsx(me.button,{type:"button",...r,ref:e,onClick:ce(t.onClick,()=>s.onOpenChange(!1))})});bR.displayName=_R;function Vw(t){return t?"open":"closed"}var ER="DialogTitleWarning",[T$,SR]=rM(ER,{contentName:vo,titleName:Lw,docsSlug:"dialog"}),C$=({titleId:t})=>{const e=SR(ER),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},I$="DialogDescriptionWarning",A$=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${SR(I$).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},TR=uR,N$=hR,CR=pR,Fw=mR,Uw=gR,zw=vR,$w=xR,Bw=bR,IR="AlertDialog",[R$,XH]=Hn(IR,[cR]),xs=cR(),AR=t=>{const{__scopeAlertDialog:e,...n}=t,r=xs(e);return c.jsx(TR,{...r,...n,modal:!0})};AR.displayName=IR;var k$="AlertDialogTrigger",NR=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=xs(n);return c.jsx(N$,{...s,...r,ref:e})});NR.displayName=k$;var P$="AlertDialogPortal",RR=t=>{const{__scopeAlertDialog:e,...n}=t,r=xs(e);return c.jsx(CR,{...r,...n})};RR.displayName=P$;var D$="AlertDialogOverlay",kR=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=xs(n);return c.jsx(Fw,{...s,...r,ref:e})});kR.displayName=D$;var ha="AlertDialogContent",[j$,O$]=R$(ha),M$=HT("AlertDialogContent"),PR=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=xs(n),o=p.useRef(null),a=Le(e,o),l=p.useRef(null);return c.jsx(T$,{contentName:ha,titleName:DR,docsSlug:"alert-dialog",children:c.jsx(j$,{scope:n,cancelRef:l,children:c.jsxs(Uw,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:ce(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=l.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[c.jsx(M$,{children:r}),c.jsx(V$,{contentRef:o})]})})})});PR.displayName=ha;var DR="AlertDialogTitle",jR=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=xs(n);return c.jsx(zw,{...s,...r,ref:e})});jR.displayName=DR;var OR="AlertDialogDescription",MR=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=xs(n);return c.jsx($w,{...s,...r,ref:e})});MR.displayName=OR;var L$="AlertDialogAction",LR=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=xs(n);return c.jsx(Bw,{...s,...r,ref:e})});LR.displayName=L$;var VR="AlertDialogCancel",FR=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=O$(VR,n),i=xs(n),o=Le(e,s);return c.jsx(Bw,{...i,...r,ref:o})});FR.displayName=VR;var V$=({contentRef:t})=>{const e=`\`${ha}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ha}\` by passing a \`${OR}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ha}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},F$=AR,U$=NR,z$=RR,UR=kR,zR=PR,$R=LR,BR=FR,HR=jR,WR=MR;const Hw=eu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),xe=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?iM:"button";return c.jsx(o,{className:X(Hw({variant:e,size:n,className:t})),ref:i,...s})});xe.displayName="Button";const qR=F$,GR=U$,$$=z$,KR=p.forwardRef(({className:t,...e},n)=>c.jsx(UR,{className:X("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));KR.displayName=UR.displayName;const Ww=p.forwardRef(({className:t,...e},n)=>c.jsxs($$,{children:[c.jsx(KR,{}),c.jsx(zR,{ref:n,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Ww.displayName=zR.displayName;const qw=({className:t,...e})=>c.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",t),...e});qw.displayName="AlertDialogHeader";const Gw=({className:t,...e})=>c.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Gw.displayName="AlertDialogFooter";const Kw=p.forwardRef(({className:t,...e},n)=>c.jsx(HR,{ref:n,className:X("text-lg font-semibold",t),...e}));Kw.displayName=HR.displayName;const Qw=p.forwardRef(({className:t,...e},n)=>c.jsx(WR,{ref:n,className:X("text-sm text-muted-foreground",t),...e}));Qw.displayName=WR.displayName;const Yw=p.forwardRef(({className:t,...e},n)=>c.jsx($R,{ref:n,className:X(Hw(),t),...e}));Yw.displayName=$R.displayName;const Xw=p.forwardRef(({className:t,...e},n)=>c.jsx(BR,{ref:n,className:X(Hw({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Xw.displayName=BR.displayName;const Rm=768;function Jw(){const[t,e]=p.useState(void 0);return p.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Rm-1}px)`),r=()=>{e(window.innerWidth<Rm)};return n.addEventListener("change",r),e(window.innerWidth<Rm),()=>n.removeEventListener("change",r)},[]),!!t}var Zw="Avatar",[B$,JH]=Hn(Zw),[H$,QR]=B$(Zw),YR=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=p.useState("idle");return c.jsx(H$,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:c.jsx(me.span,{...r,ref:e})})});YR.displayName=Zw;var XR="AvatarImage",JR=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=QR(XR,n),a=W$(r,i),l=Zt(u=>{s(u),o.onImageLoadingStatusChange(u)});return _t(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?c.jsx(me.img,{...i,ref:e,src:r}):null});JR.displayName=XR;var ZR="AvatarFallback",ek=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=QR(ZR,n),[o,a]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?c.jsx(me.span,{...s,ref:e}):null});ek.displayName=ZR;function kb(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function W$(t,{referrerPolicy:e,crossOrigin:n}){const r=G$(),s=p.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,a]=p.useState(()=>kb(i,t));return _t(()=>{a(kb(i,t))},[i,t]),_t(()=>{const l=f=>()=>{a(f)};if(!i)return;const u=l("loaded"),h=l("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function q$(){return()=>{}}function G$(){return p.useSyncExternalStore(q$,()=>!0,()=>!1)}var tk=YR,nk=JR,rk=ek;const sp=p.forwardRef(({className:t,...e},n)=>c.jsx(tk,{ref:n,className:X(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));sp.displayName=tk.displayName;const ip=p.forwardRef(({className:t,...e},n)=>c.jsx(nk,{ref:n,className:X("aspect-square h-full w-full",t),...e}));ip.displayName=nk.displayName;const op=p.forwardRef(({className:t,...e},n)=>c.jsx(rk,{ref:n,className:X("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));op.displayName=rk.displayName;const K$=[{path:"/dashboard",label:"Dashboard",icon:XM},{path:"/",label:"Pipeline",icon:xC},{path:"/leaderboard",label:"Leaderboard",icon:Rv},{path:"/timeline",label:"Timeline",icon:hi},{path:"/notes",label:"Notes",icon:Xl}];function Q$({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=bv(),r=Jw(),{user:s,signOut:i}=Wn(),{theme:o,toggleTheme:a}=QN(),l=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(m=>m[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>c.jsxs("div",{className:"flex flex-col h-full bg-background",children:[c.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[c.jsx("img",{src:"/trace-classroom-crm/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),c.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&c.jsx("button",{className:"ml-auto",onClick:e,children:c.jsx(xf,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-4 border-b shrink-0",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs(sp,{className:"h-8 w-8",children:[c.jsx(ip,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),c.jsx(op,{className:"text-xs",children:l})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),c.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),K$.map(m=>{const y=n===m.path,b=m.icon;return c.jsxs(co,{href:m.path,onClick:e,className:X("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",y?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${m.label.toLowerCase()}`,children:[c.jsx(b,{className:"w-4 h-4 mr-3"}),m.label]},m.path)})]})}),c.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[c.jsxs("button",{onClick:a,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?c.jsx(EC,{className:"w-4 h-4 mr-3"}):c.jsx(_C,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),c.jsxs(co,{href:"/settings",onClick:e,className:X("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[c.jsx(u4,{className:"w-4 h-4 mr-3"}),"Settings"]}),c.jsxs(qR,{children:[c.jsx(GR,{asChild:!0,children:c.jsxs("button",{className:"w-full flex items-center px-3 py-2 text-sm font-medium text-destructive rounded-md hover:bg-destructive/10 transition-colors",children:[c.jsx(Mg,{className:"w-4 h-4 mr-3"}),"Sign Out"]})}),c.jsxs(Ww,{children:[c.jsxs(qw,{children:[c.jsx(Kw,{children:"Are you absolutely sure?"}),c.jsx(Qw,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),c.jsxs(Gw,{children:[c.jsx(Xw,{children:"Cancel"}),c.jsx(Yw,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})]});return c.jsxs(c.Fragment,{children:[c.jsx("aside",{className:X("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:c.jsx(u,{})}),r&&t&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const sk=p.forwardRef(({className:t,type:e,...n},r)=>c.jsx("input",{type:e,className:X("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));sk.displayName="Input";function Y$({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=ws(),[r]=bv(),[s,i]=p.useState(""),o=Jw(),l={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/notes":"Notes","/settings":"Settings"}[r]||"Pipeline";return c.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[c.jsxs("div",{className:"flex items-center flex-1",children:[o&&c.jsx(xe,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:c.jsx(i4,{className:"h-5 w-5"})}),c.jsx("span",{className:"md:hidden font-medium text-lg",children:l}),c.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(c4,{className:"h-4 w-4 text-muted-foreground"})}),c.jsx(sk,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),c.jsx("div",{className:"flex items-center ml-4",children:c.jsx(xe,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:X(n&&"animate-spin"),title:"Sync with Classroom",children:c.jsx(wf,{className:"w-5 h-5"})})})]})}var ik={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pb=Se.createContext&&Se.createContext(ik),X$=["attr","size","title"];function J$(t,e){if(t==null)return{};var n=Z$(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Z$(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Vh(){return Vh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vh.apply(this,arguments)}function Db(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Fh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Db(Object(n),!0).forEach(function(r){e8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Db(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e8(t,e,n){return e=t8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t8(t){var e=n8(t,"string");return typeof e=="symbol"?e:e+""}function n8(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ok(t){return t&&t.map((e,n)=>Se.createElement(e.tag,Fh({key:n},e.attr),ok(e.child)))}function e0(t){return e=>Se.createElement(r8,Vh({attr:Fh({},t.attr)},e),ok(t.child))}function r8(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=J$(t,X$),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Se.createElement("svg",Vh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Fh(Fh({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&Se.createElement("title",null,i),t.children)};return Pb!==void 0?Se.createElement(Pb.Consumer,null,n=>e(n)):e(ik)}function s8(t){return e0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function i8(t){return e0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const o8=[{icon:i8,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:r4,title:"Kanban Board",description:"Visual assignment tracking."},{icon:YM,title:"Linear Timeline",description:"Chronological deadline view."},{icon:JM,title:"Performance Metrics",description:"Grade & workload analytics."}];function a8(){const{signInWithGoogle:t,loading:e,error:n}=Wn();return c.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[c.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),c.jsx("header",{className:"px-10 py-8 z-10",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:"/trace-classroom-crm/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),c.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",c.jsx("br",{}),c.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),c.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),c.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:o8.map(r=>c.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[c.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),c.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),c.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),c.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[c.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),c.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[c.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[c.jsx("img",{src:"/trace-classroom-crm/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),c.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:c.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),c.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[c.jsx(fi,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),c.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",c.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),c.jsxs(xe,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[c.jsx(s8,{className:"h-4 w-4"}),c.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&c.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[c.jsx(fi,{className:"h-4 w-4 shrink-0"}),c.jsx("p",{children:n})]})]}),c.jsx("div",{className:"pt-8 border-t border-zinc-100",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx(d4,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),c.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),c.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[c.jsx("span",{children:" 2024 Trace Inc."}),c.jsxs("div",{className:"flex gap-6",children:[c.jsx("a",{href:"#",className:"hover:text-zinc-900 transition-colors",children:"Privacy"}),c.jsx("a",{href:"#",className:"hover:text-zinc-900 transition-colors",children:"Terms"})]})]})})]})]})}function l8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const ap=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ol(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function t0(t){return"nodeType"in t}function rn(t){var e,n;return t?ol(t)?t:t0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function n0(t){const{Document:e}=rn(t);return t instanceof e}function hu(t){return ol(t)?!1:t instanceof rn(t).HTMLElement}function ak(t){return t instanceof rn(t).SVGElement}function al(t){return t?ol(t)?t.document:t0(t)?n0(t)?t:hu(t)||ak(t)?t.ownerDocument:document:document:document}const pr=ap?p.useLayoutEffect:p.useEffect;function lp(t){const e=p.useRef(t);return pr(()=>{e.current=t}),p.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function c8(){const t=p.useRef(null),e=p.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=p.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Fc(t,e){e===void 0&&(e=[t]);const n=p.useRef(t);return pr(()=>{n.current!==t&&(n.current=t)},e),n}function fu(t,e){const n=p.useRef();return p.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Uh(t){const e=lp(t),n=p.useRef(null),r=p.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function zh(t){const e=p.useRef();return p.useEffect(()=>{e.current=t},[t]),e.current}let km={};function pu(t,e){return p.useMemo(()=>{if(e)return e;const n=km[t]==null?0:km[t]+1;return km[t]=n,t+"-"+n},[t,e])}function lk(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const a=Object.entries(o);for(const[l,u]of a){const h=i[l];h!=null&&(i[l]=h+t*u)}return i},{...e})}}const fa=lk(1),$h=lk(-1);function u8(t){return"clientX"in t&&"clientY"in t}function cp(t){if(!t)return!1;const{KeyboardEvent:e}=rn(t.target);return e&&t instanceof e}function d8(t){if(!t)return!1;const{TouchEvent:e}=rn(t.target);return e&&t instanceof e}function Bh(t){if(d8(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return u8(t)?{x:t.clientX,y:t.clientY}:null}const Ei=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ei.Translate.toString(t),Ei.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),jb="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function h8(t){return t.matches(jb)?t:t.querySelector(jb)}const f8={display:"none"};function p8(t){let{id:e,value:n}=t;return Se.createElement("div",{id:e,style:f8},n)}function m8(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Se.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function g8(){const[t,e]=p.useState("");return{announce:p.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const ck=p.createContext(null);function y8(t){const e=p.useContext(ck);p.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function v8(){const[t]=p.useState(()=>new Set),e=p.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[p.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[t]),e]}const w8={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},x8={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function _8(t){let{announcements:e=x8,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=w8}=t;const{announce:i,announcement:o}=g8(),a=pu("DndLiveRegion"),[l,u]=p.useState(!1);if(p.useEffect(()=>{u(!0)},[]),y8(p.useMemo(()=>({onDragStart(f){let{active:m}=f;i(e.onDragStart({active:m}))},onDragMove(f){let{active:m,over:y}=f;e.onDragMove&&i(e.onDragMove({active:m,over:y}))},onDragOver(f){let{active:m,over:y}=f;i(e.onDragOver({active:m,over:y}))},onDragEnd(f){let{active:m,over:y}=f;i(e.onDragEnd({active:m,over:y}))},onDragCancel(f){let{active:m,over:y}=f;i(e.onDragCancel({active:m,over:y}))}}),[i,e])),!l)return null;const h=Se.createElement(Se.Fragment,null,Se.createElement(p8,{id:r,value:s.draggable}),Se.createElement(m8,{id:a,announcement:o}));return n?Fn.createPortal(h,n):h}var yt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(yt||(yt={}));function Hh(){}function Ob(t,e){return p.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function b8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const mr=Object.freeze({x:0,y:0});function E8(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function S8(t,e){const n=Bh(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function T8(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function C8(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function I8(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function Mb(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const A8=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=Mb(e,e.left,e.top),i=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const u=E8(Mb(l),s);i.push({id:a,data:{droppableContainer:o,value:u}})}}return i.sort(T8)};function N8(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,a=i-n;if(r<s&&n<i){const l=e.width*e.height,u=t.width*t.height,h=o*a,f=h/(l+u-h);return Number(f.toFixed(4))}return 0}const R8=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,a=n.get(o);if(a){const l=N8(a,e);l>0&&s.push({id:o,data:{droppableContainer:i,value:l}})}}return s.sort(C8)};function k8(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function uk(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:mr}function P8(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const D8=P8(1);function dk(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function j8(t,e,n){const r=dk(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:a}=r,l=t.left-o-(1-s)*parseFloat(n),u=t.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:l+h,bottom:u+f,left:l}}const O8={ignoreTransform:!1};function ll(t,e){e===void 0&&(e=O8);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=rn(t).getComputedStyle(t);u&&(n=j8(n,u,h))}const{top:r,left:s,width:i,height:o,bottom:a,right:l}=n;return{top:r,left:s,width:i,height:o,bottom:a,right:l}}function Lb(t){return ll(t,{ignoreTransform:!0})}function M8(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function L8(t,e){return e===void 0&&(e=rn(t).getComputedStyle(t)),e.position==="fixed"}function V8(t,e){e===void 0&&(e=rn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function r0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(n0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!hu(s)||ak(s)||n.includes(s))return n;const i=rn(t).getComputedStyle(s);return s!==t&&V8(s,i)&&n.push(s),L8(s,i)?n:r(s.parentNode)}return t?r(t):n}function hk(t){const[e]=r0(t,1);return e??null}function Pm(t){return!ap||!t?null:ol(t)?t:t0(t)?n0(t)||t===al(t).scrollingElement?window:hu(t)?t:null:null}function fk(t){return ol(t)?t.scrollX:t.scrollLeft}function pk(t){return ol(t)?t.scrollY:t.scrollTop}function my(t){return{x:fk(t),y:pk(t)}}var Tt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Tt||(Tt={}));function mk(t){return!ap||!t?!1:t===document.scrollingElement}function gk(t){const e={x:0,y:0},n=mk(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const F8={x:.2,y:.2};function U8(t,e,n,r,s){let{top:i,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=F8);const{isTop:u,isBottom:h,isLeft:f,isRight:m}=gk(t),y={x:0,y:0},b={x:0,y:0},v={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+v.height?(y.y=Tt.Backward,b.y=r*Math.abs((e.top+v.height-i)/v.height)):!h&&l>=e.bottom-v.height&&(y.y=Tt.Forward,b.y=r*Math.abs((e.bottom-v.height-l)/v.height)),!m&&a>=e.right-v.width?(y.x=Tt.Forward,b.x=r*Math.abs((e.right-v.width-a)/v.width)):!f&&o<=e.left+v.width&&(y.x=Tt.Backward,b.x=r*Math.abs((e.left+v.width-o)/v.width)),{direction:y,speed:b}}function z8(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function yk(t){return t.reduce((e,n)=>fa(e,my(n)),mr)}function $8(t){return t.reduce((e,n)=>e+fk(n),0)}function B8(t){return t.reduce((e,n)=>e+pk(n),0)}function vk(t,e){if(e===void 0&&(e=ll),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);hk(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const H8=[["x",["left","right"],$8],["y",["top","bottom"],B8]];class s0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=r0(n),s=yk(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,a]of H8)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(r),h=s[i]-u;return this.rect[l]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ic{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function W8(t){const{EventTarget:e}=rn(t);return t instanceof e?t:al(t)}function Dm(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var jn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(jn||(jn={}));function Vb(t){t.preventDefault()}function q8(t){t.stopPropagation()}var Pe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Pe||(Pe={}));const wk={start:[Pe.Space,Pe.Enter],cancel:[Pe.Esc],end:[Pe.Space,Pe.Enter,Pe.Tab]},G8=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Pe.Right:return{...n,x:n.x+25};case Pe.Left:return{...n,x:n.x-25};case Pe.Down:return{...n,y:n.y+25};case Pe.Up:return{...n,y:n.y-25}}};class i0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ic(al(n)),this.windowListeners=new ic(rn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(jn.Resize,this.handleCancel),this.windowListeners.add(jn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(jn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&vk(r),n(mr)}handleKeyDown(e){if(cp(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=wk,coordinateGetter:o=G8,scrollBehavior:a="smooth"}=s,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:mr;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const m=$h(f,h),y={x:0,y:0},{scrollableAncestors:b}=r.current;for(const v of b){const E=e.code,{isTop:x,isRight:w,isLeft:S,isBottom:k,maxScroll:O,minScroll:D}=gk(v),C=z8(v),T={x:Math.min(E===Pe.Right?C.right-C.width/2:C.right,Math.max(E===Pe.Right?C.left:C.left+C.width/2,f.x)),y:Math.min(E===Pe.Down?C.bottom-C.height/2:C.bottom,Math.max(E===Pe.Down?C.top:C.top+C.height/2,f.y))},I=E===Pe.Right&&!w||E===Pe.Left&&!S,N=E===Pe.Down&&!k||E===Pe.Up&&!x;if(I&&T.x!==f.x){const R=v.scrollLeft+m.x,j=E===Pe.Right&&R<=O.x||E===Pe.Left&&R>=D.x;if(j&&!m.y){v.scrollTo({left:R,behavior:a});return}j?y.x=v.scrollLeft-R:y.x=E===Pe.Right?v.scrollLeft-O.x:v.scrollLeft-D.x,y.x&&v.scrollBy({left:-y.x,behavior:a});break}else if(N&&T.y!==f.y){const R=v.scrollTop+m.y,j=E===Pe.Down&&R<=O.y||E===Pe.Up&&R>=D.y;if(j&&!m.x){v.scrollTo({top:R,behavior:a});return}j?y.y=v.scrollTop-R:y.y=E===Pe.Down?v.scrollTop-O.y:v.scrollTop-D.y,y.y&&v.scrollBy({top:-y.y,behavior:a});break}}this.handleMove(e,fa($h(f,this.referenceCoordinates),y))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}i0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=wk,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=i.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Fb(t){return!!(t&&"distance"in t)}function Ub(t){return!!(t&&"delay"in t)}class o0{constructor(e,n,r){var s;r===void 0&&(r=W8(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=al(o),this.documentListeners=new ic(this.document),this.listeners=new ic(r),this.windowListeners=new ic(rn(o)),this.initialCoordinates=(s=Bh(i))!=null?s:mr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(jn.Resize,this.handleCancel),this.windowListeners.add(jn.DragStart,Vb),this.windowListeners.add(jn.VisibilityChange,this.handleCancel),this.windowListeners.add(jn.ContextMenu,Vb),this.documentListeners.add(jn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ub(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Fb(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(jn.Click,q8,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(jn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const l=(n=Bh(e))!=null?n:mr,u=$h(s,l);if(!r&&a){if(Fb(a)){if(a.tolerance!=null&&Dm(u,a.tolerance))return this.handleCancel();if(Dm(u,a.distance))return this.handleStart()}if(Ub(a)&&Dm(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Pe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const K8={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class a0 extends o0{constructor(e){const{event:n}=e,r=al(n.target);super(e,K8,r)}}a0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Q8={move:{name:"mousemove"},end:{name:"mouseup"}};var gy;(function(t){t[t.RightClick=2]="RightClick"})(gy||(gy={}));class Y8 extends o0{constructor(e){super(e,Q8,al(e.event.target))}}Y8.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===gy.RightClick?!1:(r==null||r({event:n}),!0)}}];const jm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class X8 extends o0{constructor(e){super(e,jm)}static setup(){return window.addEventListener(jm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(jm.move.name,e)};function e(){}}}X8.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var oc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(oc||(oc={}));var Wh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Wh||(Wh={}));function J8(t){let{acceleration:e,activator:n=oc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:a=Wh.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:m}=t;const y=e7({delta:f,disabled:!i}),[b,v]=c8(),E=p.useRef({x:0,y:0}),x=p.useRef({x:0,y:0}),w=p.useMemo(()=>{switch(n){case oc.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case oc.DraggableRect:return s}},[n,s,l]),S=p.useRef(null),k=p.useCallback(()=>{const D=S.current;if(!D)return;const C=E.current.x*x.current.x,T=E.current.y*x.current.y;D.scrollBy(C,T)},[]),O=p.useMemo(()=>a===Wh.TreeOrder?[...u].reverse():u,[a,u]);p.useEffect(()=>{if(!i||!u.length||!w){v();return}for(const D of O){if((r==null?void 0:r(D))===!1)continue;const C=u.indexOf(D),T=h[C];if(!T)continue;const{direction:I,speed:N}=U8(D,T,w,e,m);for(const R of["x","y"])y[R][I[R]]||(N[R]=0,I[R]=0);if(N.x>0||N.y>0){v(),S.current=D,b(k,o),E.current=N,x.current=I;return}}E.current={x:0,y:0},x.current={x:0,y:0},v()},[e,k,r,v,i,o,JSON.stringify(w),JSON.stringify(y),b,u,O,h,JSON.stringify(m)])}const Z8={x:{[Tt.Backward]:!1,[Tt.Forward]:!1},y:{[Tt.Backward]:!1,[Tt.Forward]:!1}};function e7(t){let{delta:e,disabled:n}=t;const r=zh(e);return fu(s=>{if(n||!r||!s)return Z8;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Tt.Backward]:s.x[Tt.Backward]||i.x===-1,[Tt.Forward]:s.x[Tt.Forward]||i.x===1},y:{[Tt.Backward]:s.y[Tt.Backward]||i.y===-1,[Tt.Forward]:s.y[Tt.Forward]||i.y===1}}},[n,e,r])}function t7(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return fu(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function n7(t,e){return p.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Uc;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Uc||(Uc={}));var yy;(function(t){t.Optimized="optimized"})(yy||(yy={}));const zb=new Map;function r7(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=p.useState(null),{frequency:a,measure:l,strategy:u}=s,h=p.useRef(t),f=E(),m=Fc(f),y=p.useCallback(function(x){x===void 0&&(x=[]),!m.current&&o(w=>w===null?x:w.concat(x.filter(S=>!w.includes(S))))},[m]),b=p.useRef(null),v=fu(x=>{if(f&&!n)return zb;if(!x||x===zb||h.current!==t||i!=null){const w=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const k=S.node.current,O=k?new s0(l(k),k):null;S.rect.current=O,O&&w.set(S.id,O)}return w}return x},[t,i,n,f,l]);return p.useEffect(()=>{h.current=t},[t]),p.useEffect(()=>{f||y()},[n,f]),p.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),p.useEffect(()=>{f||typeof a!="number"||b.current!==null||(b.current=setTimeout(()=>{y(),b.current=null},a))},[a,f,y,...r]),{droppableRects:v,measureDroppableContainers:y,measuringScheduled:i!=null};function E(){switch(u){case Uc.Always:return!1;case Uc.BeforeDragging:return n;default:return!n}}}function l0(t,e){return fu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function s7(t,e){return l0(t,e)}function i7(t){let{callback:e,disabled:n}=t;const r=lp(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function up(t){let{callback:e,disabled:n}=t;const r=lp(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function o7(t){return new s0(ll(t),t)}function $b(t,e,n){e===void 0&&(e=o7);const[r,s]=p.useState(null);function i(){s(l=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const h=e(t);return JSON.stringify(l)===JSON.stringify(h)?l:h})}const o=i7({callback(l){if(t)for(const u of l){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),a=up({callback:i});return pr(()=>{i(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function a7(t){const e=l0(t);return uk(t,e)}const Bb=[];function l7(t){const e=p.useRef(t),n=fu(r=>t?r&&r!==Bb&&t&&e.current&&t.parentNode===e.current.parentNode?r:r0(t):Bb,[t]);return p.useEffect(()=>{e.current=t},[t]),n}function c7(t){const[e,n]=p.useState(null),r=p.useRef(t),s=p.useCallback(i=>{const o=Pm(i.target);o&&n(a=>a?(a.set(o,my(o)),new Map(a)):null)},[]);return p.useEffect(()=>{const i=r.current;if(t!==i){o(i);const a=t.map(l=>{const u=Pm(l);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,my(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(i)};function o(a){a.forEach(l=>{const u=Pm(l);u==null||u.removeEventListener("scroll",s)})}},[s,t]),p.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>fa(i,o),mr):yk(t):mr,[t,e])}function Hb(t,e){e===void 0&&(e=[]);const n=p.useRef(null);return p.useEffect(()=>{n.current=null},e),p.useEffect(()=>{const r=t!==mr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?$h(t,n.current):mr}function u7(t){p.useEffect(()=>{if(!ap)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function d7(t,e){return p.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function xk(t){return p.useMemo(()=>t?M8(t):null,[t])}const Wb=[];function h7(t,e){e===void 0&&(e=ll);const[n]=t,r=xk(n?rn(n):null),[s,i]=p.useState(Wb);function o(){i(()=>t.length?t.map(l=>mk(l)?r:new s0(e(l),l)):Wb)}const a=up({callback:o});return pr(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),s}function _k(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return hu(e)?e:t}function f7(t){let{measure:e}=t;const[n,r]=p.useState(null),s=p.useCallback(u=>{for(const{target:h}of u)if(hu(h)){r(f=>{const m=e(h);return f?{...f,width:m.width,height:m.height}:m});break}},[e]),i=up({callback:s}),o=p.useCallback(u=>{const h=_k(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[a,l]=Uh(o);return p.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const p7=[{sensor:a0,options:{}},{sensor:i0,options:{}}],m7={current:{}},zd={draggable:{measure:Lb},droppable:{measure:Lb,strategy:Uc.WhileDragging,frequency:yy.Optimized},dragOverlay:{measure:ll}};class ac extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const g7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ac,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Hh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:zd,measureDroppableContainers:Hh,windowRect:null,measuringScheduled:!1},bk={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Hh,draggableNodes:new Map,over:null,measureDroppableContainers:Hh},mu=p.createContext(bk),Ek=p.createContext(g7);function y7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ac}}}function v7(t,e){switch(e.type){case yt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case yt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case yt.DragEnd:case yt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case yt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new ac(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case yt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new ac(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case yt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new ac(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function w7(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=p.useContext(mu),i=zh(r),o=zh(n==null?void 0:n.id);return p.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!cp(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[l.current,u.current]){if(!h)continue;const f=h8(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function Sk(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function x7(t){return p.useMemo(()=>({draggable:{...zd.draggable,...t==null?void 0:t.draggable},droppable:{...zd.droppable,...t==null?void 0:t.droppable},dragOverlay:{...zd.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function _7(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=p.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;pr(()=>{if(!o&&!a||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=uk(h,r);if(o||(f.x=0),a||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=hk(u);m&&m.scrollBy({top:f.y,left:f.x})}},[e,o,a,r,n])}const dp=p.createContext({...mr,scaleX:1,scaleY:1});var Os;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Os||(Os={}));const b7=p.memo(function(e){var n,r,s,i;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:h=p7,collisionDetection:f=R8,measuring:m,modifiers:y,...b}=e;const v=p.useReducer(v7,void 0,y7),[E,x]=v,[w,S]=v8(),[k,O]=p.useState(Os.Uninitialized),D=k===Os.Initialized,{draggable:{active:C,nodes:T,translate:I},droppable:{containers:N}}=E,R=C!=null?T.get(C):null,j=p.useRef({initial:null,translated:null}),P=p.useMemo(()=>{var ke;return C!=null?{id:C,data:(ke=R==null?void 0:R.data)!=null?ke:m7,rect:j}:null},[C,R]),B=p.useRef(null),[oe,U]=p.useState(null),[Q,V]=p.useState(null),M=Fc(b,Object.values(b)),z=pu("DndDescribedBy",o),K=p.useMemo(()=>N.getEnabled(),[N]),W=x7(m),{droppableRects:ne,measureDroppableContainers:ee,measuringScheduled:ue}=r7(K,{dragging:D,dependencies:[I.x,I.y],config:W.droppable}),le=t7(T,C),H=p.useMemo(()=>Q?Bh(Q):null,[Q]),re=bu(),we=s7(le,W.draggable.measure);_7({activeNode:C!=null?T.get(C):null,config:re.layoutShiftCompensation,initialRect:we,measure:W.draggable.measure});const te=$b(le,W.draggable.measure,we),de=$b(le?le.parentElement:null),he=p.useRef({activatorEvent:null,active:null,activeNode:le,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Oe=N.getNodeFor((n=he.current.over)==null?void 0:n.id),Ve=f7({measure:W.dragOverlay.measure}),sn=(r=Ve.nodeRef.current)!=null?r:le,jt=D?(s=Ve.rect)!=null?s:te:null,kn=!!(Ve.nodeRef.current&&Ve.rect),Ri=a7(kn?null:te),Be=xk(sn?rn(sn):null),Ke=l7(D?Oe??le:null),zr=h7(Ke),Io=Sk(y,{transform:{x:I.x-Ri.x,y:I.y-Ri.y,scaleX:1,scaleY:1},activatorEvent:Q,active:P,activeNodeRect:te,containerNodeRect:de,draggingNodeRect:jt,over:he.current.over,overlayNodeRect:Ve.rect,scrollableAncestors:Ke,scrollableAncestorRects:zr,windowRect:Be}),ul=H?fa(H,I):null,yu=c7(Ke),ki=Hb(yu),vu=Hb(yu,[te]),$r=fa(Io,ki),yr=jt?D8(jt,Io):null,Pi=P&&yr?f({active:P,collisionRect:yr,droppableRects:ne,droppableContainers:K,pointerCoordinates:ul}):null,wu=I8(Pi,"id"),[qn,dl]=p.useState(null),Di=kn?Io:fa(Io,vu),hl=k8(Di,(i=qn==null?void 0:qn.rect)!=null?i:null,te),ji=p.useRef(null),vr=p.useCallback((ke,Ot)=>{let{sensor:ht,options:on}=Ot;if(B.current==null)return;const an=T.get(B.current);if(!an)return;const Gt=ke.nativeEvent,Nt=new ht({active:B.current,activeNode:an,event:Gt,options:on,context:he,onAbort(ft){if(!T.get(ft))return;const{onDragAbort:vn}=M.current,Pn={id:ft};vn==null||vn(Pn),w({type:"onDragAbort",event:Pn})},onPending(ft,yn,vn,Pn){if(!T.get(ft))return;const{onDragPending:Gn}=M.current,wr={id:ft,constraint:yn,initialCoordinates:vn,offset:Pn};Gn==null||Gn(wr),w({type:"onDragPending",event:wr})},onStart(ft){const yn=B.current;if(yn==null)return;const vn=T.get(yn);if(!vn)return;const{onDragStart:Pn}=M.current,Br={activatorEvent:Gt,active:{id:yn,data:vn.data,rect:j}};Fn.unstable_batchedUpdates(()=>{Pn==null||Pn(Br),O(Os.Initializing),x({type:yt.DragStart,initialCoordinates:ft,active:yn}),w({type:"onDragStart",event:Br}),U(ji.current),V(Gt)})},onMove(ft){x({type:yt.DragMove,coordinates:ft})},onEnd:_s(yt.DragEnd),onCancel:_s(yt.DragCancel)});ji.current=Nt;function _s(ft){return async function(){const{active:vn,collisions:Pn,over:Br,scrollAdjustedTranslate:Gn}=he.current;let wr=null;if(vn&&Gn){const{cancelDrop:ln}=M.current;wr={activatorEvent:Gt,active:vn,collisions:Pn,delta:Gn,over:Br},ft===yt.DragEnd&&typeof ln=="function"&&await Promise.resolve(ln(wr))&&(ft=yt.DragCancel)}B.current=null,Fn.unstable_batchedUpdates(()=>{x({type:ft}),O(Os.Uninitialized),dl(null),U(null),V(null),ji.current=null;const ln=ft===yt.DragEnd?"onDragEnd":"onDragCancel";if(wr){const Ao=M.current[ln];Ao==null||Ao(wr),w({type:ln,event:wr})}})}}},[T]),xu=p.useCallback((ke,Ot)=>(ht,on)=>{const an=ht.nativeEvent,Gt=T.get(on);if(B.current!==null||!Gt||an.dndKit||an.defaultPrevented)return;const Nt={active:Gt};ke(ht,Ot.options,Nt)===!0&&(an.dndKit={capturedBy:Ot.sensor},B.current=on,vr(ht,Ot))},[T,vr]),Oi=n7(h,xu);u7(h),pr(()=>{te&&k===Os.Initializing&&O(Os.Initialized)},[te,k]),p.useEffect(()=>{const{onDragMove:ke}=M.current,{active:Ot,activatorEvent:ht,collisions:on,over:an}=he.current;if(!Ot||!ht)return;const Gt={active:Ot,activatorEvent:ht,collisions:on,delta:{x:$r.x,y:$r.y},over:an};Fn.unstable_batchedUpdates(()=>{ke==null||ke(Gt),w({type:"onDragMove",event:Gt})})},[$r.x,$r.y]),p.useEffect(()=>{const{active:ke,activatorEvent:Ot,collisions:ht,droppableContainers:on,scrollAdjustedTranslate:an}=he.current;if(!ke||B.current==null||!Ot||!an)return;const{onDragOver:Gt}=M.current,Nt=on.get(wu),_s=Nt&&Nt.rect.current?{id:Nt.id,rect:Nt.rect.current,data:Nt.data,disabled:Nt.disabled}:null,ft={active:ke,activatorEvent:Ot,collisions:ht,delta:{x:an.x,y:an.y},over:_s};Fn.unstable_batchedUpdates(()=>{dl(_s),Gt==null||Gt(ft),w({type:"onDragOver",event:ft})})},[wu]),pr(()=>{he.current={activatorEvent:Q,active:P,activeNode:le,collisionRect:yr,collisions:Pi,droppableRects:ne,draggableNodes:T,draggingNode:sn,draggingNodeRect:jt,droppableContainers:N,over:qn,scrollableAncestors:Ke,scrollAdjustedTranslate:$r},j.current={initial:jt,translated:yr}},[P,le,Pi,yr,T,sn,jt,ne,N,qn,Ke,$r]),J8({...re,delta:I,draggingRect:yr,pointerCoordinates:ul,scrollableAncestors:Ke,scrollableAncestorRects:zr});const _u=p.useMemo(()=>({active:P,activeNode:le,activeNodeRect:te,activatorEvent:Q,collisions:Pi,containerNodeRect:de,dragOverlay:Ve,draggableNodes:T,droppableContainers:N,droppableRects:ne,over:qn,measureDroppableContainers:ee,scrollableAncestors:Ke,scrollableAncestorRects:zr,measuringConfiguration:W,measuringScheduled:ue,windowRect:Be}),[P,le,te,Q,Pi,de,Ve,T,N,ne,qn,ee,Ke,zr,W,ue,Be]),Mi=p.useMemo(()=>({activatorEvent:Q,activators:Oi,active:P,activeNodeRect:te,ariaDescribedById:{draggable:z},dispatch:x,draggableNodes:T,over:qn,measureDroppableContainers:ee}),[Q,Oi,P,te,x,z,T,qn,ee]);return Se.createElement(ck.Provider,{value:S},Se.createElement(mu.Provider,{value:Mi},Se.createElement(Ek.Provider,{value:_u},Se.createElement(dp.Provider,{value:hl},u)),Se.createElement(w7,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Se.createElement(_8,{...a,hiddenTextDescribedById:z}));function bu(){const ke=(oe==null?void 0:oe.autoScrollEnabled)===!1,Ot=typeof l=="object"?l.enabled===!1:l===!1,ht=D&&!ke&&!Ot;return typeof l=="object"?{...l,enabled:ht}:{enabled:ht}}}),E7=p.createContext(null),qb="button",S7="Draggable";function T7(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=pu(S7),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:m}=p.useContext(mu),{role:y=qb,roleDescription:b="draggable",tabIndex:v=0}=s??{},E=(l==null?void 0:l.id)===e,x=p.useContext(E?dp:E7),[w,S]=Uh(),[k,O]=Uh(),D=d7(o,e),C=Fc(n);pr(()=>(f.set(e,{id:e,key:i,node:w,activatorNode:k,data:C}),()=>{const I=f.get(e);I&&I.key===i&&f.delete(e)}),[f,e]);const T=p.useMemo(()=>({role:y,tabIndex:v,"aria-disabled":r,"aria-pressed":E&&y===qb?!0:void 0,"aria-roledescription":b,"aria-describedby":h.draggable}),[r,y,v,E,b,h.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:T,isDragging:E,listeners:r?void 0:D,node:w,over:m,setNodeRef:S,setActivatorNodeRef:O,transform:x}}function Tk(){return p.useContext(Ek)}const C7="Droppable",I7={timeout:25};function Ck(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=pu(C7),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=p.useContext(mu),h=p.useRef({disabled:n}),f=p.useRef(!1),m=p.useRef(null),y=p.useRef(null),{disabled:b,updateMeasurementsFor:v,timeout:E}={...I7,...s},x=Fc(v??r),w=p.useCallback(()=>{if(!f.current){f.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),y.current=null},E)},[E]),S=up({callback:w,disabled:b||!o}),k=p.useCallback((T,I)=>{S&&(I&&(S.unobserve(I),f.current=!1),T&&S.observe(T))},[S]),[O,D]=Uh(k),C=Fc(e);return p.useEffect(()=>{!S||!O.current||(S.disconnect(),f.current=!1,S.observe(O.current))},[O,S]),p.useEffect(()=>(a({type:yt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:O,rect:m,data:C}}),()=>a({type:yt.UnregisterDroppable,key:i,id:r})),[r]),p.useEffect(()=>{n!==h.current.disabled&&(a({type:yt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,a]),{active:o,rect:m,isOver:(l==null?void 0:l.id)===r,node:O,over:l,setNodeRef:D}}function A7(t){let{animation:e,children:n}=t;const[r,s]=p.useState(null),[i,o]=p.useState(null),a=zh(n);return!n&&!r&&a&&s(a),pr(()=>{if(!i)return;const l=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(l==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Se.createElement(Se.Fragment,null,n,r?p.cloneElement(r,{ref:o}):null)}const N7={x:0,y:0,scaleX:1,scaleY:1};function R7(t){let{children:e}=t;return Se.createElement(mu.Provider,{value:bk},Se.createElement(dp.Provider,{value:N7},e))}const k7={position:"fixed",touchAction:"none"},P7=t=>cp(t)?"transform 250ms ease":void 0,D7=p.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:a,style:l,transform:u,transition:h=P7}=t;if(!a)return null;const f=s?u:{...u,scaleX:1,scaleY:1},m={...k7,width:a.width,height:a.height,top:a.top,left:a.left,transform:Ei.Transform.toString(f),transformOrigin:s&&r?S8(r,a):void 0,transition:typeof h=="function"?h(r):h,...l};return Se.createElement(n,{className:o,style:m,ref:e},i)}),j7=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[a,l]of Object.entries(i.active))l!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(i!=null&&i.dragOverlay)for(const[a,l]of Object.entries(i.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,u]of Object.entries(s))n.node.style.setProperty(l,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},O7=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ei.Transform.toString(e)},{transform:Ei.Transform.toString(n)}]},M7={duration:250,easing:"ease",keyframes:O7,sideEffects:j7({styles:{active:{opacity:"0"}}})};function L7(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return lp((i,o)=>{if(e===null)return;const a=n.get(i);if(!a)return;const l=a.node.current;if(!l)return;const u=_k(o);if(!u)return;const{transform:h}=rn(o).getComputedStyle(o),f=dk(h);if(!f)return;const m=typeof e=="function"?e:V7(e);return vk(l,s.draggable.measure),m({active:{id:i,data:a.data,node:l,rect:s.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function V7(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...M7,...t};return i=>{let{active:o,dragOverlay:a,transform:l,...u}=i;if(!e)return;const h={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},f={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},m={x:l.x-h.x,y:l.y-h.y,...f},y=s({...u,active:o,dragOverlay:a,transform:{initial:l,final:m}}),[b]=y,v=y[y.length-1];if(JSON.stringify(b)===JSON.stringify(v))return;const E=r==null?void 0:r({active:o,dragOverlay:a,...u}),x=a.node.animate(y,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{x.onfinish=()=>{E==null||E(),w()}})}}let Gb=0;function F7(t){return p.useMemo(()=>{if(t!=null)return Gb++,Gb},[t])}const U7=Se.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:a="div",className:l,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:y,draggableNodes:b,droppableContainers:v,dragOverlay:E,over:x,measuringConfiguration:w,scrollableAncestors:S,scrollableAncestorRects:k,windowRect:O}=Tk(),D=p.useContext(dp),C=F7(f==null?void 0:f.id),T=Sk(o,{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:y,draggingNodeRect:E.rect,over:x,overlayNodeRect:E.rect,scrollableAncestors:S,scrollableAncestorRects:k,transform:D,windowRect:O}),I=l0(m),N=L7({config:r,draggableNodes:b,droppableContainers:v,measuringConfiguration:w}),R=I?E.setRef:void 0;return Se.createElement(R7,null,Se.createElement(A7,{animation:N},f&&C?Se.createElement(D7,{key:C,id:f.id,ref:R,as:a,activatorEvent:h,adjustScale:e,className:l,transition:i,rect:I,style:{zIndex:u,...s},transform:T},n):null))});function Ik(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function z7(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function dd(t){return t!==null&&t>=0}function $7(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function B7(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const Ak=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=Ik(e,r,n),o=e[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},hd={scaleX:1,scaleY:1},H7=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const a=(e=i[n])!=null?e:r;if(!a)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(a.top+a.height):u.top-a.top,...hd}:null}const l=W7(i,s,n);return s>n&&s<=o?{x:0,y:-a.height-l,...hd}:s<n&&s>=o?{x:0,y:a.height+l,...hd}:{x:0,y:0,...hd}};function W7(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const Nk="Sortable",Rk=Se.createContext({activeIndex:-1,containerId:Nk,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ak,disabled:{draggable:!1,droppable:!1}});function q7(t){let{children:e,id:n,items:r,strategy:s=Ak,disabled:i=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:h}=Tk(),f=pu(Nk,n),m=a.rect!==null,y=p.useMemo(()=>r.map(D=>typeof D=="object"&&"id"in D?D.id:D),[r]),b=o!=null,v=o?y.indexOf(o.id):-1,E=u?y.indexOf(u.id):-1,x=p.useRef(y),w=!$7(y,x.current),S=E!==-1&&v===-1||w,k=B7(i);pr(()=>{w&&b&&h(y)},[w,y,b,h]),p.useEffect(()=>{x.current=y},[y]);const O=p.useMemo(()=>({activeIndex:v,containerId:f,disabled:k,disableTransforms:S,items:y,overIndex:E,useDragOverlay:m,sortedRects:z7(y,l),strategy:s}),[v,f,k.draggable,k.droppable,S,y,E,l,m,s]);return Se.createElement(Rk.Provider,{value:O},e)}const G7=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return Ik(n,r,s).indexOf(e)},K7=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:l,transition:u}=t;return!u||!r||a!==i&&s===o?!1:n?!0:o!==s&&e===l},Q7={duration:200,easing:"ease"},kk="transform",Y7=Ei.Transition.toString({property:kk,duration:0,easing:"linear"}),X7={roleDescription:"sortable"};function J7(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=p.useState(null),a=p.useRef(n);return pr(()=>{if(!e&&n!==a.current&&r.current){const l=s.current;if(l){const u=ll(r.current,{ignoreTransform:!0}),h={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(h.x||h.y)&&o(h)}}n!==a.current&&(a.current=n)},[e,n,r,s]),p.useEffect(()=>{i&&o(null)},[i]),i}function Z7(t){let{animateLayoutChanges:e=K7,attributes:n,disabled:r,data:s,getNewIndex:i=G7,id:o,strategy:a,resizeObserverConfig:l,transition:u=Q7}=t;const{items:h,containerId:f,activeIndex:m,disabled:y,disableTransforms:b,sortedRects:v,overIndex:E,useDragOverlay:x,strategy:w}=p.useContext(Rk),S=eB(r,y),k=h.indexOf(o),O=p.useMemo(()=>({sortable:{containerId:f,index:k,items:h},...s}),[f,s,k,h]),D=p.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:C,node:T,isOver:I,setNodeRef:N}=Ck({id:o,data:O,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...l}}),{active:R,activatorEvent:j,activeNodeRect:P,attributes:B,setNodeRef:oe,listeners:U,isDragging:Q,over:V,setActivatorNodeRef:M,transform:z}=T7({id:o,data:O,attributes:{...X7,...n},disabled:S.draggable}),K=l8(N,oe),W=!!R,ne=W&&!b&&dd(m)&&dd(E),ee=!x&&Q,ue=ee&&ne?z:null,H=ne?ue??(a??w)({rects:v,activeNodeRect:P,activeIndex:m,overIndex:E,index:k}):null,re=dd(m)&&dd(E)?i({id:o,items:h,activeIndex:m,overIndex:E}):k,we=R==null?void 0:R.id,te=p.useRef({activeId:we,items:h,newIndex:re,containerId:f}),de=h!==te.current.items,he=e({active:R,containerId:f,isDragging:Q,isSorting:W,id:o,index:k,items:h,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:u,wasDragging:te.current.activeId!=null}),Oe=J7({disabled:!he,index:k,node:T,rect:C});return p.useEffect(()=>{W&&te.current.newIndex!==re&&(te.current.newIndex=re),f!==te.current.containerId&&(te.current.containerId=f),h!==te.current.items&&(te.current.items=h)},[W,re,f,h]),p.useEffect(()=>{if(we===te.current.activeId)return;if(we!=null&&te.current.activeId==null){te.current.activeId=we;return}const sn=setTimeout(()=>{te.current.activeId=we},50);return()=>clearTimeout(sn)},[we]),{active:R,activeIndex:m,attributes:B,data:O,rect:C,index:k,newIndex:re,items:h,isOver:I,isSorting:W,isDragging:Q,listeners:U,node:T,overIndex:E,over:V,setNodeRef:K,setActivatorNodeRef:M,setDroppableNodeRef:N,setDraggableNodeRef:oe,transform:Oe??H,transition:Ve()};function Ve(){if(Oe||de&&te.current.newIndex===k)return Y7;if(!(ee&&!cp(j)||!u)&&(W||he))return Ei.Transition.toString({...u,property:kk})}}function eB(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Pe.Down,Pe.Right,Pe.Up,Pe.Left;const tB=eu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function is({className:t,variant:e,...n}){return c.jsx("div",{className:X(tB({variant:e}),t),...n})}function Kr({className:t,...e}){return c.jsx("div",{className:X("animate-pulse rounded-md bg-muted",t),...e})}const vt=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));vt.displayName="Card";const Xt=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("flex flex-col space-y-1.5 p-6",t),...e}));Xt.displayName="CardHeader";const dn=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("text-2xl font-semibold leading-none tracking-tight",t),...e}));dn.displayName="CardTitle";const Ar=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("text-sm text-muted-foreground",t),...e}));Ar.displayName="CardDescription";const Ht=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("p-6 pt-0",t),...e}));Ht.displayName="CardContent";const Pk=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("flex items-center p-6 pt-0",t),...e}));Pk.displayName="CardFooter";function Dk(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function jk(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function Ok({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:l,isDragging:u}=Z7({id:t.id}),h={transform:Ei.Transform.toString(a),transition:l},f=jk(t.dueDate),m=f!==null&&f<=1&&f>=0,y=t.systemStatus==="overdue"||f!==null&&f<0;return c.jsx(vt,{ref:o,style:h,className:X("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",y&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx(is,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),c.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:b=>b.stopPropagation(),children:c.jsx(n4,{className:"h-4 w-4 text-muted-foreground"})})]}),c.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(hi,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:X(y&&"text-destructive",m&&!y&&"text-foreground font-medium"),children:Dk(t.dueDate)}),y&&c.jsx(fi,{className:"h-3.5 w-3.5 text-destructive"}),m&&!y&&c.jsx(wC,{className:"h-3.5 w-3.5 text-foreground"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx(Pa,{className:"h-3.5 w-3.5 text-muted-foreground"}),c.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(Pa,{className:"h-3.5 w-3.5"}),c.jsx("span",{children:"Submitted"})]})]}),c.jsx("div",{className:"flex items-center gap-1",children:n&&c.jsx(Xl,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function nB({assignment:t,onClick:e}){const n=jk(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return c.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[c.jsx("span",{className:X("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:Dk(t.dueDate)}),r&&c.jsx(fi,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const c0=p.forwardRef(({className:t,...e},n)=>c.jsx("textarea",{className:X("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));c0.displayName="Textarea";var rB="Separator",Kb="horizontal",sB=["horizontal","vertical"],Mk=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=Kb,...s}=t,i=iB(r)?r:Kb,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return c.jsx(me.div,{"data-orientation":i,...a,...s,ref:e})});Mk.displayName=rB;function iB(t){return sB.includes(t)}var Lk=Mk;const sr=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>c.jsx(Lk,{ref:s,decorative:n,orientation:e,className:X("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));sr.displayName=Lk.displayName;const oB=TR,aB=CR,Vk=p.forwardRef(({className:t,...e},n)=>c.jsx(Fw,{className:X("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Vk.displayName=Fw.displayName;const lB=eu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Fk=p.forwardRef(({side:t="right",className:e,children:n,...r},s)=>c.jsxs(aB,{children:[c.jsx(Vk,{}),c.jsxs(Uw,{ref:s,className:X(lB({side:t}),e),...r,children:[n,c.jsxs(Bw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[c.jsx(xf,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Fk.displayName=Uw.displayName;const Uk=({className:t,...e})=>c.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",t),...e});Uk.displayName="SheetHeader";const zk=p.forwardRef(({className:t,...e},n)=>c.jsx(zw,{ref:n,className:X("text-lg font-semibold text-foreground",t),...e}));zk.displayName=zw.displayName;const cB=p.forwardRef(({className:t,...e},n)=>c.jsx($w,{ref:n,className:X("text-sm text-muted-foreground",t),...e}));cB.displayName=$w.displayName;function uB(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function dB(t){return t?` at ${t}`:""}function hB({assignment:t}){const e=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:!!t.submittedAt,date:t.submittedAt},{id:"graded",label:"Graded",completed:!!t.gradedAt,date:t.gradedAt}];return c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),c.jsx("div",{className:"space-y-4",children:e.map((n,r)=>c.jsxs("div",{className:"flex items-start gap-3 relative",children:[c.jsx("div",{className:X("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",n.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:n.completed&&c.jsx(Pa,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:X("text-sm",n.completed?"font-medium":"text-muted-foreground"),children:n.label}),n.date&&n.completed&&c.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(n.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},n.id))})]})]})}function fB({note:t,onUpdate:e,onDelete:n}){const[r,s]=p.useState(!1),[i,o]=p.useState(t.content),a=()=>{e(i,t.isImportant),s(!1)};return c.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&c.jsx(D_,{className:"h-3.5 w-3.5 fill-current text-foreground"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(xe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:c.jsx(D_,{className:X("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),c.jsx(xe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:c.jsx(o4,{className:"h-3.5 w-3.5"})}),c.jsx(xe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:c.jsx(f4,{className:"h-3.5 w-3.5"})})]})]}),r?c.jsxs("div",{className:"space-y-2",children:[c.jsx(c0,{value:i,onChange:l=>o(l.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),c.jsxs(xe,{size:"sm",onClick:a,"data-testid":`button-save-note-${t.id}`,children:[c.jsx(bC,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function u0({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=ws(),[a,l]=p.useState(""),[u,h]=p.useState(!1);if(!t)return null;const f=r(t.id),m=t.systemStatus==="overdue",y=()=>{a.trim()&&(s(t.id,a.trim()),l(""),h(!1))};return c.jsx(oB,{open:e,onOpenChange:n,children:c.jsxs(Fk,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[c.jsx(Uk,{className:"space-y-4",children:c.jsx("div",{className:"flex items-start justify-between gap-4",children:c.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[c.jsx(is,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),c.jsx(zk,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),c.jsxs("div",{className:"mt-6 space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(hi,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("span",{className:X(m&&"text-destructive"),children:[uB(t.dueDate),dB(t.dueTime)]}),m&&c.jsx(fi,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?c.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):c.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),c.jsx(sr,{}),t.description&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Description"}),c.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),c.jsx(sr,{})]}),c.jsx(hB,{assignment:t}),c.jsx(sr,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&c.jsxs(xe,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[c.jsx(a4,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(c0,{value:a,onChange:b=>l(b.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>{h(!1),l("")},children:"Cancel"}),c.jsxs(xe,{size:"sm",onClick:y,disabled:!a.trim(),"data-testid":"button-save-new-note",children:[c.jsx(bC,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?c.jsx("div",{className:"space-y-2",children:f.map(b=>c.jsx(fB,{note:b,onUpdate:(v,E)=>i(b.id,v,E),onDelete:()=>o(b.id,t.id)},b.id))}):!u&&c.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&c.jsxs(c.Fragment,{children:[c.jsx(sr,{}),c.jsxs(xe,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[c.jsx(Og,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function pB({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=Ck({id:t});return c.jsxs("div",{ref:o,className:X("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[c.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[c.jsx("h3",{className:"text-sm font-medium",children:e}),c.jsx(is,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),c.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:c.jsx(q7,{items:n.map(a=>a.id),strategy:H7,children:n.length>0?n.map(a=>{var l;return c.jsx(Ok,{assignment:a,onClick:()=>r(a),hasNotes:(((l=s.get(a.id))==null?void 0:l.length)||0)>0},a.id)}):c.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function mB(){var E;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o}=ws(),[a,l]=p.useState(null),[u,h]=p.useState(null),f=b8(Ob(a0,{activationConstraint:{distance:8}}),Ob(i0)),m=t(),y=u?i.find(x=>x.id===u):null,b=x=>{h(x.active.id)},v=x=>{const{active:w,over:S}=x;if(h(null),!S)return;const k=w.id,O=S.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(O)){const D=i.find(C=>C.id===k);D&&D.systemStatus!==O&&(O==="in_progress"?e(k,"in_progress"):e(k,"backlog"))}};return i.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("h2",{className:"text-lg font-medium",children:"No assignments yet"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Sync your Google Classroom to see your assignments organized in a Kanban-style board."})]}),c.jsx("button",{onClick:x=>{x.preventDefault(),o().catch(w=>{console.error("Sync failed:",w)})},className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover-elevate","data-testid":"button-sync-empty",children:"Sync Google Classroom"})]}):c.jsxs(c.Fragment,{children:[c.jsxs(b7,{sensors:f,collisionDetection:A8,onDragStart:b,onDragEnd:v,children:[c.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6",children:m.map(x=>c.jsx(pB,{id:x.id,title:x.title,assignments:x.assignments,onCardClick:l,notes:s},x.id))}),c.jsx(U7,{children:y&&c.jsx(Ok,{assignment:y,isDragging:!0,hasNotes:(((E=s.get(y.id))==null?void 0:E.length)||0)>0})})]}),c.jsx(u0,{assignment:a,isOpen:!!a,onClose:()=>l(null)})]})}function Qb(t,[e,n]){return Math.min(n,Math.max(e,t))}var gB=p.createContext(void 0);function d0(t){const e=p.useContext(gB);return t||e||"ltr"}function $k(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var yB=[" ","Enter","ArrowUp","ArrowDown"],vB=[" ","Enter"],gu="Select",[hp,fp,wB]=Tv(gu),[cl,ZH]=Hn(gu,[wB,Sf]),pp=Sf(),[xB,Ai]=cl(gu),[_B,bB]=cl(gu),Bk=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:u,name:h,autoComplete:f,disabled:m,required:y,form:b}=t,v=pp(e),[E,x]=p.useState(null),[w,S]=p.useState(null),[k,O]=p.useState(!1),D=d0(u),[C=!1,T]=di({prop:r,defaultProp:s,onChange:i}),[I,N]=di({prop:o,defaultProp:a,onChange:l}),R=p.useRef(null),j=E?b||!!E.closest("form"):!0,[P,B]=p.useState(new Set),oe=Array.from(P).map(U=>U.props.value).join(";");return c.jsx(nI,{...v,children:c.jsxs(xB,{required:y,scope:e,trigger:E,onTriggerChange:x,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:k,onValueNodeHasChildrenChange:O,contentId:ts(),value:I,onValueChange:N,open:C,onOpenChange:T,dir:D,triggerPointerDownPosRef:R,disabled:m,children:[c.jsx(hp.Provider,{scope:e,children:c.jsx(_B,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(U=>{B(Q=>new Set(Q).add(U))},[]),onNativeOptionRemove:p.useCallback(U=>{B(Q=>{const V=new Set(Q);return V.delete(U),V})},[]),children:n})}),j?c.jsxs(pP,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:f,value:I,onChange:U=>N(U.target.value),disabled:m,form:b,children:[I===void 0?c.jsx("option",{value:""}):null,Array.from(P)]},oe):null]})})};Bk.displayName=gu;var Hk="SelectTrigger",Wk=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=pp(n),o=Ai(Hk,n),a=o.disabled||r,l=Le(e,o.onTriggerChange),u=fp(n),h=p.useRef("touch"),[f,m,y]=mP(v=>{const E=u().filter(S=>!S.disabled),x=E.find(S=>S.value===o.value),w=gP(E,v,x);w!==void 0&&o.onValueChange(w.value)}),b=v=>{a||(o.onOpenChange(!0),y()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return c.jsx(rI,{asChild:!0,...i,children:c.jsx(me.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":fP(o.value)?"":void 0,...s,ref:l,onClick:ce(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&b(v)}),onPointerDown:ce(s.onPointerDown,v=>{h.current=v.pointerType;const E=v.target;E.hasPointerCapture(v.pointerId)&&E.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(b(v),v.preventDefault())}),onKeyDown:ce(s.onKeyDown,v=>{const E=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(E&&v.key===" ")&&yB.includes(v.key)&&(b(),v.preventDefault())})})})});Wk.displayName=Hk;var qk="SelectValue",Gk=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=Ai(qk,n),{onValueNodeHasChildrenChange:u}=l,h=i!==void 0,f=Le(e,l.onValueNodeChange);return _t(()=>{u(h)},[u,h]),c.jsx(me.span,{...a,ref:f,style:{pointerEvents:"none"},children:fP(l.value)?c.jsx(c.Fragment,{children:o}):i})});Gk.displayName=qk;var EB="SelectIcon",Kk=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return c.jsx(me.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Kk.displayName=EB;var SB="SelectPortal",Qk=t=>c.jsx(gf,{asChild:!0,...t});Qk.displayName=SB;var wo="SelectContent",Yk=p.forwardRef((t,e)=>{const n=Ai(wo,t.__scopeSelect),[r,s]=p.useState();if(_t(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Fn.createPortal(c.jsx(Xk,{scope:t.__scopeSelect,children:c.jsx(hp.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),i):null}return c.jsx(Jk,{...t,ref:e})});Yk.displayName=wo;var Qn=10,[Xk,Ni]=cl(wo),TB="SelectContentImpl",CB=ka("SelectContent.RemoveScroll"),Jk=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:b,hideWhenDetached:v,avoidCollisions:E,...x}=t,w=Ai(wo,n),[S,k]=p.useState(null),[O,D]=p.useState(null),C=Le(e,H=>k(H)),[T,I]=p.useState(null),[N,R]=p.useState(null),j=fp(n),[P,B]=p.useState(!1),oe=p.useRef(!1);p.useEffect(()=>{if(S)return aR(S)},[S]),JN();const U=p.useCallback(H=>{const[re,...we]=j().map(he=>he.ref.current),[te]=we.slice(-1),de=document.activeElement;for(const he of H)if(he===de||(he==null||he.scrollIntoView({block:"nearest"}),he===re&&O&&(O.scrollTop=0),he===te&&O&&(O.scrollTop=O.scrollHeight),he==null||he.focus(),document.activeElement!==de))return},[j,O]),Q=p.useCallback(()=>U([T,S]),[U,T,S]);p.useEffect(()=>{P&&Q()},[P,Q]);const{onOpenChange:V,triggerPointerDownPosRef:M}=w;p.useEffect(()=>{if(S){let H={x:0,y:0};const re=te=>{var de,he;H={x:Math.abs(Math.round(te.pageX)-(((de=M.current)==null?void 0:de.x)??0)),y:Math.abs(Math.round(te.pageY)-(((he=M.current)==null?void 0:he.y)??0))}},we=te=>{H.x<=10&&H.y<=10?te.preventDefault():S.contains(te.target)||V(!1),document.removeEventListener("pointermove",re),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",we,{capture:!0})}}},[S,V,M]),p.useEffect(()=>{const H=()=>V(!1);return window.addEventListener("blur",H),window.addEventListener("resize",H),()=>{window.removeEventListener("blur",H),window.removeEventListener("resize",H)}},[V]);const[z,K]=mP(H=>{const re=j().filter(de=>!de.disabled),we=re.find(de=>de.ref.current===document.activeElement),te=gP(re,H,we);te&&setTimeout(()=>te.ref.current.focus())}),W=p.useCallback((H,re,we)=>{const te=!oe.current&&!we;(w.value!==void 0&&w.value===re||te)&&(I(H),te&&(oe.current=!0))},[w.value]),ne=p.useCallback(()=>S==null?void 0:S.focus(),[S]),ee=p.useCallback((H,re,we)=>{const te=!oe.current&&!we;(w.value!==void 0&&w.value===re||te)&&R(H)},[w.value]),ue=r==="popper"?vy:Zk,le=ue===vy?{side:a,sideOffset:l,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:b,hideWhenDetached:v,avoidCollisions:E}:{};return c.jsx(Xk,{scope:n,content:S,viewport:O,onViewportChange:D,itemRefCallback:W,selectedItem:T,onItemLeave:ne,itemTextRefCallback:ee,focusSelectedItem:Q,selectedItemText:N,position:r,isPositioned:P,searchRef:z,children:c.jsx(jw,{as:CB,allowPinchZoom:!0,children:c.jsx(Dw,{asChild:!0,trapped:w.open,onMountAutoFocus:H=>{H.preventDefault()},onUnmountAutoFocus:ce(s,H=>{var re;(re=w.trigger)==null||re.focus({preventScroll:!0}),H.preventDefault()}),children:c.jsx(Jc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:H=>H.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:c.jsx(ue,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:H=>H.preventDefault(),...x,...le,onPlaced:()=>B(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ce(x.onKeyDown,H=>{const re=H.ctrlKey||H.altKey||H.metaKey;if(H.key==="Tab"&&H.preventDefault(),!re&&H.key.length===1&&K(H.key),["ArrowUp","ArrowDown","Home","End"].includes(H.key)){let te=j().filter(de=>!de.disabled).map(de=>de.ref.current);if(["ArrowUp","End"].includes(H.key)&&(te=te.slice().reverse()),["ArrowUp","ArrowDown"].includes(H.key)){const de=H.target,he=te.indexOf(de);te=te.slice(he+1)}setTimeout(()=>U(te)),H.preventDefault()}})})})})})})});Jk.displayName=TB;var IB="SelectItemAlignedPosition",Zk=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ai(wo,n),o=Ni(wo,n),[a,l]=p.useState(null),[u,h]=p.useState(null),f=Le(e,C=>h(C)),m=fp(n),y=p.useRef(!1),b=p.useRef(!0),{viewport:v,selectedItem:E,selectedItemText:x,focusSelectedItem:w}=o,S=p.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&v&&E&&x){const C=i.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),N=x.getBoundingClientRect();if(i.dir!=="rtl"){const de=N.left-T.left,he=I.left-de,Oe=C.left-he,Ve=C.width+Oe,sn=Math.max(Ve,T.width),jt=window.innerWidth-Qn,kn=Qb(he,[Qn,Math.max(Qn,jt-sn)]);a.style.minWidth=Ve+"px",a.style.left=kn+"px"}else{const de=T.right-N.right,he=window.innerWidth-I.right-de,Oe=window.innerWidth-C.right-he,Ve=C.width+Oe,sn=Math.max(Ve,T.width),jt=window.innerWidth-Qn,kn=Qb(he,[Qn,Math.max(Qn,jt-sn)]);a.style.minWidth=Ve+"px",a.style.right=kn+"px"}const R=m(),j=window.innerHeight-Qn*2,P=v.scrollHeight,B=window.getComputedStyle(u),oe=parseInt(B.borderTopWidth,10),U=parseInt(B.paddingTop,10),Q=parseInt(B.borderBottomWidth,10),V=parseInt(B.paddingBottom,10),M=oe+U+P+V+Q,z=Math.min(E.offsetHeight*5,M),K=window.getComputedStyle(v),W=parseInt(K.paddingTop,10),ne=parseInt(K.paddingBottom,10),ee=C.top+C.height/2-Qn,ue=j-ee,le=E.offsetHeight/2,H=E.offsetTop+le,re=oe+U+H,we=M-re;if(re<=ee){const de=R.length>0&&E===R[R.length-1].ref.current;a.style.bottom="0px";const he=u.clientHeight-v.offsetTop-v.offsetHeight,Oe=Math.max(ue,le+(de?ne:0)+he+Q),Ve=re+Oe;a.style.height=Ve+"px"}else{const de=R.length>0&&E===R[0].ref.current;a.style.top="0px";const Oe=Math.max(ee,oe+v.offsetTop+(de?W:0)+le)+we;a.style.height=Oe+"px",v.scrollTop=re-ee+v.offsetTop}a.style.margin=`${Qn}px 0`,a.style.minHeight=z+"px",a.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,a,u,v,E,x,i.dir,r]);_t(()=>S(),[S]);const[k,O]=p.useState();_t(()=>{u&&O(window.getComputedStyle(u).zIndex)},[u]);const D=p.useCallback(C=>{C&&b.current===!0&&(S(),w==null||w(),b.current=!1)},[S,w]);return c.jsx(NB,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:y,onScrollButtonChange:D,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:c.jsx(me.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Zk.displayName=IB;var AB="SelectPopperPosition",vy=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Qn,...i}=t,o=pp(n);return c.jsx(sI,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vy.displayName=AB;var[NB,h0]=cl(wo,{}),wy="SelectViewport",eP=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Ni(wy,n),o=h0(wy,n),a=Le(e,i.onViewportChange),l=p.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(hp.Slot,{scope:n,children:c.jsx(me.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ce(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const y=Math.abs(l.current-h.scrollTop);if(y>0){const b=window.innerHeight-Qn*2,v=parseFloat(f.style.minHeight),E=parseFloat(f.style.height),x=Math.max(v,E);if(x<b){const w=x+y,S=Math.min(b,w),k=w-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=k>0?k:0,f.style.justifyContent="flex-end")}}}l.current=h.scrollTop})})})]})});eP.displayName=wy;var tP="SelectGroup",[RB,kB]=cl(tP),PB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ts();return c.jsx(RB,{scope:n,id:s,children:c.jsx(me.div,{role:"group","aria-labelledby":s,...r,ref:e})})});PB.displayName=tP;var nP="SelectLabel",rP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=kB(nP,n);return c.jsx(me.div,{id:s.id,...r,ref:e})});rP.displayName=nP;var qh="SelectItem",[DB,sP]=cl(qh),iP=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Ai(qh,n),l=Ni(qh,n),u=a.value===r,[h,f]=p.useState(i??""),[m,y]=p.useState(!1),b=Le(e,w=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,w,r,s)}),v=ts(),E=p.useRef("touch"),x=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(DB,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:p.useCallback(w=>{f(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:c.jsx(hp.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:c.jsx(me.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:ce(o.onFocus,()=>y(!0)),onBlur:ce(o.onBlur,()=>y(!1)),onClick:ce(o.onClick,()=>{E.current!=="mouse"&&x()}),onPointerUp:ce(o.onPointerUp,()=>{E.current==="mouse"&&x()}),onPointerDown:ce(o.onPointerDown,w=>{E.current=w.pointerType}),onPointerMove:ce(o.onPointerMove,w=>{var S;E.current=w.pointerType,s?(S=l.onItemLeave)==null||S.call(l):E.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ce(o.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:ce(o.onKeyDown,w=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&w.key===" "||(vB.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});iP.displayName=qh;var Ul="SelectItemText",oP=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Ai(Ul,n),a=Ni(Ul,n),l=sP(Ul,n),u=bB(Ul,n),[h,f]=p.useState(null),m=Le(e,x=>f(x),l.onItemTextChange,x=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,x,l.value,l.disabled)}),y=h==null?void 0:h.textContent,b=p.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:v,onNativeOptionRemove:E}=u;return _t(()=>(v(b),()=>E(b)),[v,E,b]),c.jsxs(c.Fragment,{children:[c.jsx(me.span,{id:l.textId,...i,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Fn.createPortal(i.children,o.valueNode):null]})});oP.displayName=Ul;var aP="SelectItemIndicator",lP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return sP(aP,n).isSelected?c.jsx(me.span,{"aria-hidden":!0,...r,ref:e}):null});lP.displayName=aP;var xy="SelectScrollUpButton",cP=p.forwardRef((t,e)=>{const n=Ni(xy,t.__scopeSelect),r=h0(xy,t.__scopeSelect),[s,i]=p.useState(!1),o=Le(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?c.jsx(dP,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});cP.displayName=xy;var _y="SelectScrollDownButton",uP=p.forwardRef((t,e)=>{const n=Ni(_y,t.__scopeSelect),r=h0(_y,t.__scopeSelect),[s,i]=p.useState(!1),o=Le(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,h=Math.ceil(l.scrollTop)<u;i(h)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?c.jsx(dP,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});uP.displayName=_y;var dP=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Ni("SelectScrollButton",n),o=p.useRef(null),a=fp(n),l=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),_t(()=>{var h;const u=a().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),c.jsx(me.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ce(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ce(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ce(s.onPointerLeave,()=>{l()})})}),jB="SelectSeparator",hP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return c.jsx(me.div,{"aria-hidden":!0,...r,ref:e})});hP.displayName=jB;var by="SelectArrow",OB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=pp(n),i=Ai(by,n),o=Ni(by,n);return i.open&&o.position==="popper"?c.jsx(iI,{...s,...r,ref:e}):null});OB.displayName=by;function fP(t){return t===""||t===void 0}var pP=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),i=Le(e,s),o=$k(n);return p.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(a,n),a.dispatchEvent(f)}},[o,n]),c.jsx(Zc,{asChild:!0,children:c.jsx("select",{...r,ref:i,defaultValue:n})})});pP.displayName="BubbleSelect";function mP(t){const e=Zt(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function gP(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=MB(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function MB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var LB=Bk,yP=Wk,VB=Gk,FB=Kk,UB=Qk,vP=Yk,zB=eP,wP=rP,xP=iP,$B=oP,BB=lP,_P=cP,bP=uP,EP=hP;const Gh=LB,Kh=VB,zc=p.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(yP,{ref:r,className:X("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,c.jsx(FB,{asChild:!0,children:c.jsx(vC,{className:"h-4 w-4 opacity-50"})})]}));zc.displayName=yP.displayName;const SP=p.forwardRef(({className:t,...e},n)=>c.jsx(_P,{ref:n,className:X("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(t4,{className:"h-4 w-4"})}));SP.displayName=_P.displayName;const TP=p.forwardRef(({className:t,...e},n)=>c.jsx(bP,{ref:n,className:X("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(vC,{className:"h-4 w-4"})}));TP.displayName=bP.displayName;const $c=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>c.jsx(UB,{children:c.jsxs(vP,{ref:s,className:X("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[c.jsx(SP,{}),c.jsx(zB,{className:X("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(TP,{})]})}));$c.displayName=vP.displayName;const HB=p.forwardRef(({className:t,...e},n)=>c.jsx(wP,{ref:n,className:X("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));HB.displayName=wP.displayName;const gt=p.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(xP,{ref:r,className:X("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(BB,{children:c.jsx(jg,{className:"h-4 w-4"})})}),c.jsx($B,{children:e})]}));gt.displayName=xP.displayName;const WB=p.forwardRef(({className:t,...e},n)=>c.jsx(EP,{ref:n,className:X("-mx-1 my-1 h-px bg-muted",t),...e}));WB.displayName=EP.displayName;function qB(t){return e0({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const fd={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},GB=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},KB=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},Om=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,Yb=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function QB(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=ws(),{user:o}=Wn(),[a,l]=p.useState(null),[u,h]=p.useState(null),[f,m]=p.useState(null),[y,b]=p.useState("timeline"),[v,E]=p.useState([]);p.useEffect(()=>{if(o)try{const D=`trace_email_events_${o.uid}`,T=JSON.parse(localStorage.getItem(D)||"[]").map(I=>({id:I.id,uniqueId:I.id,userId:o.uid,courseId:"system",courseName:"System",classroomId:"system",title:I.title,description:I.body,dueDate:I.timestamp,dueTime:null,maxPoints:null,systemStatus:"submitted",userStatus:null,submissionId:null,submittedAt:null,gradedAt:null,grade:null,alternateLink:null,createdAt:I.timestamp,lastSyncedAt:I.timestamp}));E(T)}catch{}},[o]);const x=p.useMemo(()=>{let D=[...s,...v];return a&&(D=D.filter(C=>C.courseId===a)),u&&(D=D.filter(C=>C.systemStatus===u)),D},[s,v,a,u]),w=()=>{l(null),h(null)},S=a||u;if(s.length===0)return c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(hi,{className:"h-12 w-12 mx-auto text-muted-foreground"}),c.jsx("h2",{className:"text-lg font-medium",children:"No assignments yet"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Sync your Google Classroom to see your assignments organized by date."})]}),c.jsx("button",{onClick:D=>{D.preventDefault(),i().catch(C=>{console.error("Sync failed:",C)})},className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover-elevate","data-testid":"button-sync-empty-timeline",children:"Sync Google Classroom"})]});const k=()=>{const D=p.useRef(null),[C,T]=p.useState(!1),I=p.useRef({x:0,left:0}),N=60,{earliestDate:R,latestDate:j,initialScrollPosition:P}=p.useMemo(()=>{const M=new Date;M.setHours(0,0,0,0);let z=new Date,K=new Date;if(x.length>0){const le=x.filter(H=>H.dueDate).map(H=>new Date(H.dueDate));le.length>0&&(z=new Date(Math.min(...le.map(H=>H.getTime()))),K=new Date(Math.max(...le.map(H=>H.getTime()))))}const W=new Date(z);W.setDate(W.getDate()-30);const ne=new Date(K);ne.setDate(ne.getDate()+30);const ue=Math.ceil((M.getTime()-W.getTime())/(1e3*3600*24))*N+N/2-window.innerWidth/2;return{earliestDate:W,latestDate:ne,initialScrollPosition:Math.max(0,ue)}},[x]),B=p.useMemo(()=>GB(R,j),[R,j]);p.useEffect(()=>{D.current&&(D.current.scrollLeft=P)},[P]);const oe=M=>{M.button===2&&D.current&&(M.preventDefault(),T(!0),I.current={x:M.pageX,left:D.current.scrollLeft})},U=p.useCallback(M=>{if(!C||!D.current)return;M.preventDefault();const K=(M.pageX-I.current.x)*1.5;D.current.scrollLeft=I.current.left-K},[C]),Q=p.useCallback(()=>{T(!1)},[]);p.useEffect(()=>(C?(window.addEventListener("mousemove",U),window.addEventListener("mouseup",Q)):(window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",Q)),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",Q)}),[C,U,Q]);const V=M=>{if(!M)return{left:"0px",width:"0px"};const z=new Date(M);return z.setHours(0,0,0,0),{left:`${(z.getTime()-R.getTime())/(1e3*3600*24)*N}px`,width:`${N}px`}};return c.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[c.jsx("div",{ref:D,className:X("flex-1 overflow-auto relative select-none",C?"cursor-grabbing":"cursor-default"),onMouseDown:oe,onContextMenu:M=>M.preventDefault(),children:c.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${B.length*N}px`},children:[c.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:B.map((M,z)=>{const K=Yb(M);return c.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:N},children:[c.jsx("span",{className:X("text-[10px] uppercase font-bold tracking-wider mb-1",K?"text-foreground":"text-muted-foreground"),children:M.toLocaleDateString("en-US",{weekday:"narrow"})}),c.jsx("span",{className:X("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",K?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:M.getDate()}),c.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border/50"})]},z)})}),c.jsxs("div",{className:"relative pt-6 min-h-[500px]",children:[c.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:B.map((M,z)=>{const K=Yb(M);return c.jsx("div",{className:X("flex-shrink-0 h-full border-r border-border/40 relative",K?"bg-accent/50":""),style:{width:N},children:K&&c.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},z)})}),c.jsx("div",{className:"space-y-3 px-0 relative z-10 mt-2",children:x.filter(M=>M.dueDate).map(M=>{const z=V(M.dueDate),K=fd[M.systemStatus]||fd.backlog;return c.jsx("div",{className:"relative h-14 group",children:c.jsxs("div",{onClick:()=>m(M),className:X("absolute top-0 h-12 rounded-lg border shadow-sm transition-all cursor-pointer flex flex-col justify-center px-3 overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",K.timelineStyle),style:{left:z.left,width:z.width,minWidth:"140px"},children:[c.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:c.jsxs("span",{className:"truncate text-xs font-bold leading-none flex items-center gap-1",children:[M.courseId==="system"&&c.jsx(Nv,{className:"h-3 w-3 inline-block"}),M.title]})}),c.jsx("div",{className:"flex items-center justify-between opacity-80",children:c.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:M.courseName})})]})},M.id)})})]})]})}),c.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[c.jsx(P_,{size:14,className:"mr-2"}),"Tip: Hold"," ",c.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},O=()=>{const D=p.useRef(null),[C,T]=p.useState(!1),I=p.useRef({y:0,top:0}),N=p.useRef({}),[R,j]=p.useState(!1),{startMonth:P,endMonth:B}=p.useMemo(()=>{let W=new Date,ne=new Date;if(x.length>0){const le=x.filter(H=>H.dueDate).map(H=>new Date(H.dueDate));le.length>0&&(W=new Date(Math.min(...le.map(H=>H.getTime()))),ne=new Date(Math.max(...le.map(H=>H.getTime()))))}const ee=new Date(W);ee.setMonth(ee.getMonth()-2),ee.setDate(1);const ue=new Date(ne);return ue.setMonth(ue.getMonth()+4),ue.setDate(1),{startMonth:ee,endMonth:ue}},[x]),oe=p.useMemo(()=>KB(P,B),[P,B]),U=p.useCallback(()=>{var le;const W=Om(new Date),ne=N.current[W];if(!ne){j(!0);return}const ee=ne.getBoundingClientRect(),ue=(le=D.current)==null?void 0:le.getBoundingClientRect();ue&&j(ee.bottom<ue.top||ee.top>ue.bottom)},[oe]);p.useEffect(()=>{const W=D.current;return W&&(W.addEventListener("scroll",U),U()),()=>W==null?void 0:W.removeEventListener("scroll",U)},[U]),p.useEffect(()=>{setTimeout(()=>Q(),100)},[]);const Q=()=>{const W=Om(new Date),ne=N.current[W];ne&&ne.scrollIntoView({behavior:"smooth",block:"center"})},V=W=>{W.button===2&&D.current&&(W.preventDefault(),T(!0),I.current={y:W.pageY,top:D.current.scrollTop})},M=p.useCallback(W=>{if(!C||!D.current)return;W.preventDefault();const ee=(W.pageY-I.current.y)*1.5;D.current.scrollTop=I.current.top-ee},[C]),z=p.useCallback(()=>{T(!1)},[]);p.useEffect(()=>(C?(window.addEventListener("mousemove",M),window.addEventListener("mouseup",z)):(window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",z)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",z)}),[C,M,z]);const K=W=>{const ne=W.getFullYear(),ee=W.getMonth(),ue=new Date(ne,ee,1),le=new Date(ne,ee+1,0),H=[];for(let re=0;re<ue.getDay();re++)H.push({date:new Date(ne,ee,-ue.getDay()+1+re),isCurrentMonth:!1});for(let re=1;re<=le.getDate();re++)H.push({date:new Date(ne,ee,re),isCurrentMonth:!0});for(;H.length%7!==0;){const re=H.length-(ue.getDay()+le.getDate())+1,we=new Date(ne,ee+1,re);H.push({date:we,isCurrentMonth:!1})}return H};return c.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[R&&c.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:c.jsxs("button",{onClick:Q,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[c.jsx(KM,{size:14})," Jump to Today"]})}),c.jsx("div",{ref:D,className:X("flex-1 overflow-y-auto",C?"cursor-grabbing":"cursor-default"),onMouseDown:V,onContextMenu:W=>W.preventDefault(),children:c.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:oe.map(W=>{const ne=K(W),ee=Om(W);return c.jsxs("div",{ref:ue=>N.current[ee]=ue,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[c.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:c.jsx("h3",{className:"text-lg font-bold",children:W.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),c.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ue=>c.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:ue},ue))}),c.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:ne.map((ue,le)=>{const H=x.filter(we=>{if(!we.dueDate)return!1;const te=new Date(we.dueDate);te.setHours(0,0,0,0);const de=new Date(ue.date);return de.setHours(0,0,0,0),de.toDateString()===te.toDateString()}),re=ue.date.toDateString()===new Date().toDateString();return c.jsxs("div",{className:X("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",ue.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[c.jsx("span",{className:X("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",re?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:ue.date.getDate()}),c.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:H.map(we=>{const te=fd[we.systemStatus]||fd.backlog;return c.jsx("div",{onClick:de=>{de.stopPropagation(),m(we)},className:X("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",te.color,te.border),title:we.title,children:we.title},we.id)})})]},le)})})]},ee)})})}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[c.jsx(P_,{size:14,className:"mr-2"}),"Tip: Hold"," ",c.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] overflow-hidden",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-3 sticky top-0 bg-background py-3 z-10 border-b px-4 sm:px-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(xe,{variant:y==="timeline"?"default":"ghost",size:"sm",onClick:()=>b("timeline"),className:"gap-2",children:[c.jsx(hi,{size:14}),"Timeline"]}),c.jsxs(xe,{variant:y==="calendar"?"default":"ghost",size:"sm",onClick:()=>b("calendar"),className:"gap-2",children:[c.jsx(QM,{size:14}),"Calendar"]})]}),c.jsxs(Gh,{value:a||"all",onValueChange:D=>l(D==="all"?null:D),children:[c.jsx(zc,{className:"w-[140px] sm:w-[180px]","data-testid":"select-course-filter",children:c.jsx(Kh,{placeholder:"All Courses"})}),c.jsxs($c,{children:[c.jsx(gt,{value:"all",children:"All Courses"}),e.map(D=>c.jsx(gt,{value:D.id,children:D.name},D.id))]})]}),c.jsxs(Gh,{value:u||"all",onValueChange:D=>h(D==="all"?null:D),children:[c.jsx(zc,{className:"w-[120px] sm:w-[140px]","data-testid":"select-status-filter",children:c.jsx(Kh,{placeholder:"All Status"})}),c.jsxs($c,{children:[c.jsx(gt,{value:"all",children:"All Status"}),c.jsx(gt,{value:"backlog",children:"Backlog"}),c.jsx(gt,{value:"in_progress",children:"In Progress"}),c.jsx(gt,{value:"submitted",children:"Submitted"}),c.jsx(gt,{value:"graded",children:"Graded"}),c.jsx(gt,{value:"overdue",children:"Overdue"})]})]}),S&&c.jsxs(xe,{variant:"ghost",size:"sm",onClick:w,className:"text-muted-foreground","data-testid":"button-clear-filters",children:[c.jsx(xf,{className:"h-3.5 w-3.5 mr-1"}),"Clear filters"]}),c.jsx("div",{className:"ml-auto",children:c.jsx(pI,{children:c.jsxs(EV,{children:[c.jsx(SV,{asChild:!0,children:c.jsx(co,{href:"/settings/integrations",children:c.jsxs(xe,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap",children:[c.jsx(qB,{className:"h-4 w-4"}),"Sync with Google Calendar"]})})}),c.jsxs(mI,{side:"left",className:"max-w-xs",children:[c.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),c.jsx("div",{className:"flex-1 overflow-hidden",children:y==="timeline"?c.jsx(k,{}):c.jsx(O,{})})]}),c.jsx(u0,{assignment:f,isOpen:!!f,onClose:()=>m(null)})]})}function pd({title:t,value:e,icon:n,variant:r="default"}){return c.jsxs(vt,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,children:[c.jsxs(Xt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[c.jsx(dn,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:t}),c.jsx(n,{className:X("h-5 w-5",r==="default"&&"text-muted-foreground",r==="warning"&&"text-foreground",r==="danger"&&"text-destructive")})]}),c.jsx(Ht,{children:c.jsx("div",{className:X("text-3xl font-semibold font-mono tracking-tight",r==="danger"&&"text-destructive"),children:e})})]})}function YB({data:t}){const e=Math.max(...t.map(n=>n.count),1);return c.jsxs(vt,{children:[c.jsx(Xt,{className:"pb-2",children:c.jsx(dn,{className:"text-sm font-medium",children:"Weekly Workload"})}),c.jsx(Ht,{children:c.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:t.map((n,r)=>c.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[c.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:n.count>0?n.count:""}),c.jsx("div",{className:X("w-full rounded-t-sm transition-all",n.isToday?"bg-foreground":"bg-muted",n.count===0&&"min-h-[4px]"),style:{height:n.count>0?`${n.count/e*80}px`:"4px"}}),c.jsx("span",{className:X("text-xs",n.isToday?"font-medium":"text-muted-foreground"),children:n.day})]},r))})})]})}function XB({courses:t}){const{user:e}=Wn(),[n,r]=p.useState(null),[s,i]=p.useState(!0);return p.useEffect(()=>{if(!e)return;const o=Rw(Sw(st,"leaderboards","all-courses","students"),kw("totalXP","desc")),a=il(o,l=>{const u=l.docs.map(m=>({id:m.id,...m.data()})),h=u.length;if(h===0){r(null),i(!1);return}const f=u.findIndex(m=>m.id===e.uid);if(f!==-1){const m=f+1,y=Math.round((h-m+1)/h*100),b=u[f];r({rank:m,total:h,percentile:y,xp:b.totalXP||0})}else r(null);i(!1)},l=>{console.error("Error fetching leaderboard for dashboard:",l),i(!1)});return()=>a()},[e]),c.jsxs(vt,{"data-testid":"card-class-rank",children:[c.jsxs(Xt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[c.jsx(dn,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),c.jsx(Rv,{className:"h-5 w-5 text-amber-500"})]}),c.jsx(Ht,{children:s?c.jsxs("div",{className:"space-y-2",children:[c.jsx(Kr,{className:"h-8 w-16"}),c.jsx(Kr,{className:"h-3 w-24"})]}):n?c.jsxs("div",{children:[c.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",n.rank,c.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",n.total]})]}),c.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[c.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top ",100-n.percentile<1?1:100-n.percentile,"% of class"]}),c.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[n.xp.toLocaleString()," Total XP"]})]})]}):c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),c.jsx(co,{href:"/leaderboard",children:c.jsx(xe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function JB(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i}=ws(),[o,a]=p.useState(null),l=t();return r.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(p4,{className:"h-12 w-12 mx-auto text-muted-foreground"}),c.jsx("h2",{className:"text-lg font-medium",children:"No data yet"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Sync your Google Classroom to see your dashboard with metrics and insights."})]}),c.jsx("button",{onClick:u=>{u.preventDefault(),s().catch(h=>{console.error("Sync failed:",h)})},className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover-elevate","data-testid":"button-sync-empty-dashboard",children:"Sync Google Classroom"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[l.upcoming7Days>0&&c.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-900/30 rounded-lg animate-in slide-in-from-top-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/40 rounded-md text-blue-700 dark:text-blue-300",children:c.jsx(fi,{className:"h-4 w-4"})}),c.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100 font-medium",children:[" ",l.upcoming7Days," assignment",l.upcoming7Days!==1?"s":""," due this week"]})]}),c.jsx(co,{href:"/settings/notifications",children:c.jsx(xe,{variant:"ghost",size:"sm",className:"text-blue-700 dark:text-blue-300 hover:text-blue-800 hover:bg-blue-100/50 h-8",children:"Enable email reminders"})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsx(pd,{title:"Due in 3 Days",value:l.upcoming3Days,icon:wC,variant:l.upcoming3Days>3?"warning":"default"}),c.jsx(pd,{title:"Due in 7 Days",value:l.upcoming7Days,icon:hi}),c.jsx(pd,{title:"Overdue",value:l.overdue,icon:fi,variant:l.overdue>0?"danger":"default"}),c.jsx(pd,{title:"Total Active",value:l.totalActive,icon:Pa}),c.jsx(XB,{courses:i})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsx(YB,{data:l.weeklyWorkload}),c.jsxs(vt,{children:[c.jsx(Xt,{className:"pb-2",children:c.jsx(dn,{className:"text-sm font-medium",children:"Next Actions"})}),c.jsx(Ht,{className:"space-y-2",children:l.nextActions.length>0?l.nextActions.map(u=>c.jsx(nB,{assignment:u,onClick:()=>a(u)},u.id)):c.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[c.jsx(Pa,{className:"h-8 w-8 mb-2"}),c.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),c.jsx(u0,{assignment:o,isOpen:!!o,onClose:()=>a(null)})]})}function ZB(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s}=ws(),[i,o]=p.useState(null),[a,l]=p.useState("grid"),u=Jw(),h=t.find(y=>y.id===i),m=e.filter(y=>y.courseId===i).flatMap(y=>y.materials?y.materials.flatMap(b=>{let v=[];return b.driveFile&&v.push({id:b.driveFile.driveFile.id,title:b.driveFile.driveFile.title,link:b.driveFile.driveFile.alternateLink,thumbnail:b.driveFile.driveFile.thumbnailUrl,type:"driveFile"}),v}):[]).filter(y=>y.title&&y.title.toLowerCase().endsWith(".pdf"));return n&&t.length===0?c.jsx(eH,{}):c.jsxs("div",{className:"flex h-full overflow-hidden bg-background",children:[c.jsxs("div",{className:X("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",u&&i?"hidden":"flex"),children:[c.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:c.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(y=>c.jsxs("button",{onClick:()=>o(y.id),className:X("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",i===y.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[c.jsx("div",{className:X("h-8 w-8 rounded-full flex items-center justify-center shrink-0",i===y.id?"bg-primary-foreground/20":"bg-muted"),children:c.jsx(R_,{className:X("h-4 w-4",i===y.id?"text-primary-foreground":"text-muted-foreground")})}),c.jsxs("div",{className:"truncate flex-1",children:[c.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:y.name}),c.jsx("p",{className:X("text-[10px] uppercase tracking-wider font-medium",i===y.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:y.section||"No Section"})]}),c.jsx(e4,{className:X("h-4 w-4 transition-transform",i===y.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},y.id))})]}),c.jsxs("div",{className:X("flex-1 overflow-y-auto bg-background",u&&!i?"hidden":"flex flex-col"),children:[u&&i&&c.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:c.jsxs(xe,{variant:"ghost",size:"sm",onClick:()=>o(null),className:"gap-2 pl-2",children:[c.jsx(yC,{className:"h-4 w-4"}),"Back to Courses"]})}),i?c.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[c.jsxs("div",{className:"space-y-1 max-w-full",children:[c.jsx(is,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),c.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:h==null?void 0:h.name}),c.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(h==null?void 0:h.descriptionHeading)||"Curated academic materials and notes."})]}),c.jsxs("div",{className:"flex gap-2 shrink-0",children:[c.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[c.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),c.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[m.length," PDF Assets"]})]}),c.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[c.jsx(xe,{variant:"ghost",size:"icon",className:X("h-6 w-6 rounded-sm",a==="grid"&&"bg-background shadow-sm"),onClick:()=>l("grid"),children:c.jsx(xC,{className:"h-4 w-4"})}),c.jsx(xe,{variant:"ghost",size:"icon",className:X("h-6 w-6 rounded-sm",a==="list"&&"bg-background shadow-sm"),onClick:()=>l("list"),children:c.jsx(s4,{className:"h-4 w-4"})})]})]})]}),m.length>0?a==="grid"?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:m.map((y,b)=>c.jsxs(vt,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm",children:[c.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:c.jsx(xe,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-lg",asChild:!0,children:c.jsx("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",children:c.jsx(Og,{className:"h-4 w-4"})})})}),c.jsx(Xt,{className:"p-0 border-b border-border",children:c.jsxs("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center overflow-hidden relative group-hover:bg-muted/80 transition-colors",children:[c.jsx(Xl,{className:"h-16 w-16 text-muted-foreground/30 transition-transform group-hover:scale-110 duration-500"}),c.jsxs("div",{className:"absolute bottom-3 left-3 flex gap-1",children:[c.jsx(is,{className:"bg-red-500 hover:bg-red-600 text-[9px] font-black italic rounded-sm text-white",children:"PDF"}),c.jsx(is,{variant:"outline",className:"bg-background/80 backdrop-blur text-[9px] font-black rounded-sm border-border text-foreground",children:"READONLY"})]})]})}),c.jsxs(Ht,{className:"p-5 space-y-4",children:[c.jsx("h4",{className:"font-bold text-sm tracking-tight leading-snug line-clamp-2 min-h-[2.5rem] text-card-foreground group-hover:text-primary transition-colors",children:y.title}),c.jsxs("div",{className:"pt-4 flex items-center justify-between border-t border-border/50",children:[c.jsx("span",{className:"text-[10px] font-mono font-bold text-muted-foreground uppercase tracking-widest",children:"Secured Asset"}),c.jsx(xe,{size:"sm",variant:"ghost",asChild:!0,className:"h-8 text-[11px] font-black uppercase tracking-tighter hover:bg-primary hover:text-primary-foreground border border-border rounded-md",children:c.jsx("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",children:"Open Material"})})]})]})]},`${y.id}-${b}`))}):c.jsx("div",{className:"space-y-2 pb-20",children:m.map((y,b)=>c.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[c.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-md bg-muted text-red-500 shrink-0",children:c.jsx(Xl,{className:"h-5 w-5"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:y.title}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"PDF Document  Read Only"})]}),c.jsx(xe,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:c.jsxs("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[c.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),c.jsx(Og,{className:"h-4 w-4"})]})})]},`${y.id}-${b}`))}):c.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[c.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:c.jsx(R_,{className:"h-8 w-8 text-muted-foreground"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No PDF Documents Found"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no PDF files uploaded to Classroom yet. Make sure your materials are in .pdf format."})]})]})]}):c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[c.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:c.jsx(Xl,{className:"h-10 w-10 text-muted-foreground/50"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),c.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})}function eH(){return c.jsxs("div",{className:"flex h-full overflow-hidden",children:[c.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[c.jsx(Kr,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>c.jsx(Kr,{className:"h-16 w-full rounded-xl"},t))]}),c.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[c.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(Kr,{className:"h-4 w-20"}),c.jsx(Kr,{className:"h-10 w-80"}),c.jsx(Kr,{className:"h-4 w-64"})]}),c.jsx(Kr,{className:"h-10 w-32 rounded-lg"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>c.jsx(Kr,{className:"h-64 w-full rounded-2xl"},t))})]})]})}var f0="Switch",[tH,eW]=Hn(f0),[nH,rH]=tH(f0),CP=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:u,form:h,...f}=t,[m,y]=p.useState(null),b=Le(e,S=>y(S)),v=p.useRef(!1),E=m?h||!!m.closest("form"):!0,[x=!1,w]=di({prop:s,defaultProp:i,onChange:u});return c.jsxs(nH,{scope:n,checked:x,disabled:a,children:[c.jsx(me.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":NP(x),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:b,onClick:ce(t.onClick,S=>{w(k=>!k),E&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),E&&c.jsx(sH,{control:m,bubbles:!v.current,name:r,value:l,checked:x,required:o,disabled:a,form:h,style:{transform:"translateX(-100%)"}})]})});CP.displayName=f0;var IP="SwitchThumb",AP=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=rH(IP,n);return c.jsx(me.span,{"data-state":NP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});AP.displayName=IP;var sH=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=p.useRef(null),o=$k(n),a=qC(e);return p.useEffect(()=>{const l=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(m)}},[o,n,r]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function NP(t){return t?"checked":"unchecked"}var RP=CP,iH=AP;const zn=p.forwardRef(({className:t,...e},n)=>c.jsx(RP,{className:X("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:c.jsx(iH,{className:X("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));zn.displayName=RP.displayName;var oH="Label",kP=p.forwardRef((t,e)=>c.jsx(me.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));kP.displayName=oH;var PP=kP;const aH=eu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ro=p.forwardRef(({className:t,...e},n)=>c.jsx(PP,{ref:n,className:X(aH(),t),...e}));ro.displayName=PP.displayName;var Mm="rovingFocusGroup.onEntryFocus",lH={bubbles:!1,cancelable:!0},mp="RovingFocusGroup",[Ey,DP,cH]=Tv(mp),[uH,jP]=Hn(mp,[cH]),[dH,hH]=uH(mp),OP=p.forwardRef((t,e)=>c.jsx(Ey.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(Ey.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(fH,{...t,ref:e})})}));OP.displayName=mp;var fH=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=p.useRef(null),y=Le(e,m),b=d0(i),[v=null,E]=di({prop:o,defaultProp:a,onChange:l}),[x,w]=p.useState(!1),S=Zt(u),k=DP(n),O=p.useRef(!1),[D,C]=p.useState(0);return p.useEffect(()=>{const T=m.current;if(T)return T.addEventListener(Mm,S),()=>T.removeEventListener(Mm,S)},[S]),c.jsx(dH,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(T=>E(T),[E]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>C(T=>T+1),[]),onFocusableItemRemove:p.useCallback(()=>C(T=>T-1),[]),children:c.jsx(me.div,{tabIndex:x||D===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:ce(t.onMouseDown,()=>{O.current=!0}),onFocus:ce(t.onFocus,T=>{const I=!O.current;if(T.target===T.currentTarget&&I&&!x){const N=new CustomEvent(Mm,lH);if(T.currentTarget.dispatchEvent(N),!N.defaultPrevented){const R=k().filter(U=>U.focusable),j=R.find(U=>U.active),P=R.find(U=>U.id===v),oe=[j,P,...R].filter(Boolean).map(U=>U.ref.current);VP(oe,h)}}O.current=!1}),onBlur:ce(t.onBlur,()=>w(!1))})})}),MP="RovingFocusGroupItem",LP=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=ts(),l=i||a,u=hH(MP,n),h=u.currentTabStopId===l,f=DP(n),{onFocusableItemAdd:m,onFocusableItemRemove:y}=u;return p.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),c.jsx(Ey.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:c.jsx(me.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ce(t.onMouseDown,b=>{r?u.onItemFocus(l):b.preventDefault()}),onFocus:ce(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:ce(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const v=gH(b,u.orientation,u.dir);if(v!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let x=f().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const w=x.indexOf(b.currentTarget);x=u.loop?yH(x,w+1):x.slice(w+1)}setTimeout(()=>VP(x))}})})})});LP.displayName=MP;var pH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mH(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function gH(t,e,n){const r=mH(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return pH[r]}function VP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function yH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var vH=OP,wH=LP,p0="Tabs",[xH,tW]=Hn(p0,[jP]),FP=jP(),[_H,m0]=xH(p0),UP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,h=d0(a),[f,m]=di({prop:r,onChange:s,defaultProp:i});return c.jsx(_H,{scope:n,baseId:ts(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:l,children:c.jsx(me.div,{dir:h,"data-orientation":o,...u,ref:e})})});UP.displayName=p0;var zP="TabsList",$P=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=m0(zP,n),o=FP(n);return c.jsx(vH,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:c.jsx(me.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});$P.displayName=zP;var BP="TabsTrigger",HP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=m0(BP,n),a=FP(n),l=GP(o.baseId,r),u=KP(o.baseId,r),h=r===o.value;return c.jsx(wH,{asChild:!0,...a,focusable:!s,active:h,children:c.jsx(me.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:ce(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:ce(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:ce(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});HP.displayName=BP;var WP="TabsContent",qP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=m0(WP,n),l=GP(a.baseId,r),u=KP(a.baseId,r),h=r===a.value,f=p.useRef(h);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),c.jsx(bo,{present:s||h,children:({present:m})=>c.jsx(me.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});qP.displayName=WP;function GP(t,e){return`${t}-trigger-${e}`}function KP(t,e){return`${t}-content-${e}`}var bH=UP,QP=$P,YP=HP,XP=qP;const EH=bH,JP=p.forwardRef(({className:t,...e},n)=>c.jsx(QP,{ref:n,className:X("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));JP.displayName=QP.displayName;const Sy=p.forwardRef(({className:t,...e},n)=>c.jsx(YP,{ref:n,className:X("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Sy.displayName=YP.displayName;const Ty=p.forwardRef(({className:t,...e},n)=>c.jsx(XP,{ref:n,className:X("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ty.displayName=XP.displayName;function SH(){const[t,e]=p.useState(null),[n,r]=p.useState(!1),[s,i]=p.useState(!1);return p.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const a=u=>{u.preventDefault(),e(u),r(!0)},l=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",a),window.addEventListener("appinstalled",l),()=>{window.removeEventListener("beforeinstallprompt",a),window.removeEventListener("appinstalled",l)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:a}=await t.userChoice;return a==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(a){return console.error("Error showing install prompt:",a),!1}}}}function TH(){const{user:t,requestCalendarPermissions:e}=Wn(),[n,r]=p.useState(!1),[s,i]=p.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});p.useEffect(()=>{if(!t)return;const u=il(dt(st,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const o=async()=>{r(!0);try{await e()&&await gn(dt(st,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},a=async()=>{try{await gn(dt(st,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},l=async(u,h)=>{i(f=>({...f,[u]:h}));try{await gn(dt(st,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(vt,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[c.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[c.jsx("div",{className:"flex-1 space-y-2",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border/50",children:c.jsx(hi,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&c.jsx(is,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),c.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),c.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?c.jsx(xe,{variant:"ghost",size:"sm",onClick:a,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):c.jsx(xe,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?c.jsx(Ic,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&c.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[c.jsx("div",{className:"h-px w-full bg-border/50 mb-6"}),c.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",c.jsxs("div",{className:"grid gap-3 max-w-xl",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border/50 bg-background/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),c.jsx(zn,{checked:s.syncAssignments,onCheckedChange:u=>l("syncAssignments",u)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border/50 bg-background/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),c.jsx(zn,{checked:s.syncExams,onCheckedChange:u=>l("syncExams",u)})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(wf,{className:"h-3 w-3"}),c.jsxs("span",{children:["Last synced: ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),c.jsx(vt,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:c.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[c.jsx("div",{className:"flex-1 space-y-2",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border/50",children:c.jsx(Nv,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),c.jsx("div",{className:"shrink-0",children:c.jsx(co,{href:"/settings/notifications",children:c.jsx(xe,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function CH(){var k,O;const{user:t,signOut:e}=Wn(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i}=ws(),{isInstallable:o,isInstalled:a,promptInstall:l}=SH(),{theme:u,setTheme:h}=QN(),[f,m]=p.useState(!0),[y,b]=p.useState("auto"),[v,E]=p.useState(!1),x=((k=t==null?void 0:t.displayName)==null?void 0:k.split(" ").map(D=>D[0]).join("").toUpperCase())||((O=t==null?void 0:t.email)==null?void 0:O[0].toUpperCase())||"U",w=()=>n?n.toLocaleString():"Never",S=async()=>{E(!0);try{await l()}catch(D){console.error("Install failed:",D)}finally{E(!1)}};return c.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),c.jsxs(EH,{defaultValue:"general",className:"w-full",children:[c.jsxs(JP,{className:"grid w-full grid-cols-2 lg:w-[400px] mb-6",children:[c.jsx(Sy,{value:"general",children:"General"}),c.jsx(Sy,{value:"integrations",children:"Integrations"})]}),c.jsxs(Ty,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[c.jsxs(vt,{children:[c.jsxs(Xt,{children:[c.jsx(dn,{className:"text-base",children:"Connected Account"}),c.jsx(Ar,{children:"Your Google account linked to this app"})]}),c.jsxs(Ht,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(sp,{className:"h-12 w-12",children:[c.jsx(ip,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),c.jsx(op,{children:x})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),c.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(jg,{className:"h-3.5 w-3.5"}),"Connected"]})]}),c.jsx(sr,{}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",w()]})]}),c.jsxs(xe,{variant:"outline",size:"sm",onClick:D=>{D.preventDefault(),s().catch(C=>{console.error("Sync failed:",C)})},disabled:r,"data-testid":"button-sync-settings",children:[c.jsx(wf,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),c.jsxs(vt,{children:[c.jsxs(Xt,{children:[c.jsx(dn,{className:"text-base",children:"Sync Settings"}),c.jsx(Ar,{children:"Configure how your data syncs with Google Classroom"})]}),c.jsx(Ht,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(ro,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),c.jsx(zn,{id:"background-sync",checked:f,onCheckedChange:m,"data-testid":"switch-background-sync"})]})})]}),c.jsxs(vt,{children:[c.jsxs(Xt,{children:[c.jsx(dn,{className:"text-base",children:"Theme"}),c.jsx(Ar,{children:"Choose your preferred color theme"})]}),c.jsx(Ht,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(ro,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(xe,{variant:u==="light"?"default":"outline",size:"sm",onClick:()=>h("light"),className:"flex items-center gap-2",children:[c.jsx(EC,{className:"h-4 w-4"}),"Light"]}),c.jsxs(xe,{variant:u==="dark"?"default":"outline",size:"sm",onClick:()=>h("dark"),className:"flex items-center gap-2",children:[c.jsx(_C,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),c.jsxs(vt,{className:"border-primary/20",children:[c.jsxs(Xt,{children:[c.jsxs(dn,{className:"text-base flex items-center gap-2",children:[c.jsx(N_,{className:"h-4 w-4"}),"Install App"]}),c.jsx(Ar,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),c.jsx(Ht,{className:"space-y-4",children:a?c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[c.jsx(jg,{className:"h-5 w-5 text-emerald-600"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),c.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):o?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[c.jsx(h4,{className:"h-5 w-5 text-primary"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),c.jsxs(xe,{onClick:S,disabled:v,className:"w-full",size:"lg","data-testid":"button-install-app",children:[c.jsx(N_,{className:"h-4 w-4 mr-2"}),v?"Installing...":"Install App"]}),c.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[c.jsx(SC,{className:"h-5 w-5 text-muted-foreground"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),c.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[c.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),c.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),c.jsxs(vt,{children:[c.jsxs(Xt,{children:[c.jsx(dn,{className:"text-base",children:"Preferences"}),c.jsx(Ar,{children:"Customize your experience"})]}),c.jsx(Ht,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(ro,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),c.jsxs(Gh,{value:y,onValueChange:b,children:[c.jsx(zc,{className:"w-[180px]","data-testid":"select-timezone",children:c.jsx(Kh,{})}),c.jsxs($c,{children:[c.jsx(gt,{value:"auto",children:"Auto-detect"}),c.jsx(gt,{value:"America/New_York",children:"Eastern Time"}),c.jsx(gt,{value:"America/Chicago",children:"Central Time"}),c.jsx(gt,{value:"America/Denver",children:"Mountain Time"}),c.jsx(gt,{value:"America/Los_Angeles",children:"Pacific Time"}),c.jsx(gt,{value:"Europe/London",children:"London"}),c.jsx(gt,{value:"Europe/Paris",children:"Paris"}),c.jsx(gt,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),c.jsxs(vt,{children:[c.jsxs(Xt,{children:[c.jsxs(dn,{className:"text-base flex items-center gap-2",children:[c.jsx(Mg,{className:"h-4 w-4"}),"Account Actions"]}),c.jsx(Ar,{children:"Manage your session"})]}),c.jsx(Ht,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),c.jsxs(qR,{children:[c.jsx(GR,{asChild:!0,children:c.jsxs(xe,{variant:"outline",size:"sm","data-testid":"button-signout",children:[c.jsx(Mg,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),c.jsxs(Ww,{children:[c.jsxs(qw,{children:[c.jsx(Kw,{children:"Are you absolutely sure?"}),c.jsx(Qw,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),c.jsxs(Gw,{children:[c.jsx(Xw,{children:"Cancel"}),c.jsx(Yw,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})})]})]}),c.jsx(Ty,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:c.jsx(TH,{})})]})]})}function IH(){const{user:t,requestGmailPermissions:e,accessToken:n}=Wn(),{toast:r}=Xc(),[s,i]=p.useState(!1),[o,a]=p.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[l,u]=p.useState(!1),[h,f]=p.useState(!0);p.useEffect(()=>{async function b(){if(t)try{const v=dt(st,"users",t.uid,"settings","notifications"),E=await Ha(v);if(E.exists()){const x=E.data();i(x.enabled??!1),a(x.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(v){console.error("Failed to load settings from Firestore",v)}finally{f(!1)}}b()},[t]),p.useEffect(()=>{async function b(){if(!(!t||h))try{const E=dt(st,"users",t.uid,"settings","notifications");await gn(E,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(E){console.error("Failed to save settings",E)}}const v=setTimeout(b,1e3);return()=>clearTimeout(v)},[s,o,t,h]);const m=async()=>{u(!0);try{if(await e()){if(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."}),t!=null&&t.uid){const v={id:`email-${Date.now()}`,title:"Assignment due reminder email sent",body:"This is a test alert to confirm your notifications are working.",timestamp:new Date().toISOString(),type:"email"},E=`trace_email_events_${t.uid}`,x=JSON.parse(localStorage.getItem(E)||"[]");localStorage.setItem(E,JSON.stringify([...x,v]))}}else r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(b){console.error(b),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},y=b=>{a(v=>({...v,[b]:!v[b]}))};return c.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(co,{href:"/settings",children:c.jsx(xe,{variant:"ghost",size:"icon",className:"rounded-full",children:c.jsx(yC,{className:"h-5 w-5"})})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),c.jsxs(vt,{className:"border-border/60 shadow-sm",children:[c.jsxs(Xt,{className:"pb-4",children:[c.jsxs(dn,{className:"flex items-center gap-2 text-lg",children:[c.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:c.jsx(Nv,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),c.jsxs(Ar,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),c.jsx(sr,{}),c.jsxs(Ht,{className:"pt-6 space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(ro,{className:"text-base font-medium",children:"Assignment due reminder"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),c.jsx(zn,{checked:o.dueReminder,onCheckedChange:()=>y("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),c.jsx(sr,{className:"opacity-50"}),c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(ro,{className:"text-base font-medium",children:"Missed submission alert"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),c.jsx(zn,{checked:o.missedSubmission,onCheckedChange:()=>y("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),c.jsx(sr,{className:"opacity-50"}),c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(ro,{className:"text-base font-medium",children:"Heavy workload warning"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),c.jsx(zn,{checked:o.workloadWarning,onCheckedChange:()=>y("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),c.jsxs(Pk,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?c.jsxs("div",{className:"w-full space-y-4",children:[c.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[c.jsx(Pa,{className:"h-4 w-4 shrink-0"}),c.jsx("p",{children:"Academic alerts are active."})]}),c.jsx(xe,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):c.jsxs("div",{className:"w-full space-y-4",children:[c.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[c.jsx(SC,{className:"h-4 w-4 shrink-0 mt-0.5"}),c.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),c.jsxs(xe,{onClick:m,disabled:l,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[l&&c.jsx(Ic,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function AH(){const[t,e]=bv(),{user:n,requestCalendarPermissions:r}=Wn(),{toast:s}=Xc(),[i,o]=p.useState(!0),[a,l]=p.useState(!1),[u,h]=p.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});p.useEffect(()=>{if(!n)return;const b=il(dt(st,"users",n.uid,"settings","calendar"),v=>{v.exists()&&h(v.data()),o(!1)});return()=>b()},[n]);const f=async()=>{l(!0);try{await r()?(await gn(dt(st,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(b){console.error(b),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{l(!1)}},m=async()=>{try{await gn(dt(st,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(b){console.error(b)}},y=async(b,v)=>{h(E=>({...E,[b]:v}));try{await gn(dt(st,"users",n.uid,"settings","calendar"),{[b]:v},{merge:!0})}catch(E){console.error(E)}};return i?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx(Ic,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(xe,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:c.jsx(ZM,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),c.jsxs("div",{className:"grid gap-6",children:[c.jsxs(vt,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[c.jsxs(Xt,{className:"flex flex-row items-start justify-between pb-2",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:c.jsx(hi,{className:"h-6 w-6"})}),c.jsx(dn,{className:"text-xl",children:"Google Calendar"}),u.enabled&&c.jsx(is,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),c.jsx(Ar,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?c.jsx(xe,{variant:"outline",size:"sm",onClick:m,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):c.jsx(xe,{onClick:f,disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:a?c.jsx(Ic,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&c.jsxs(Ht,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[c.jsx(sr,{className:"mb-6"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid gap-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),c.jsx(zn,{checked:u.syncAssignments,onCheckedChange:b=>y("syncAssignments",b)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),c.jsx(zn,{checked:u.syncExams,onCheckedChange:b=>y("syncExams",b)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),c.jsx(zn,{checked:u.syncPersonal,onCheckedChange:b=>y("syncPersonal",b)})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[c.jsx(wf,{className:"h-3 w-3"}),c.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),c.jsx(NH,{})]})]})}function NH(){const{user:t,requestGmailPermissions:e}=Wn(),{toast:n}=Xc(),[r,s]=p.useState(!1),[i,o]=p.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});p.useEffect(()=>{if(!t)return;const h=il(dt(st,"users",t.uid,"settings","notifications"),f=>{f.exists()&&o(f.data())});return()=>h()},[t]);const a=async()=>{s(!0);try{await e()?(await gn(dt(st,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},l=async()=>{try{await gn(dt(st,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{o(m=>({...m,[h]:f}));try{await gn(dt(st,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(m){console.error(m)}};return c.jsxs(vt,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[c.jsxs(Xt,{className:"flex flex-row items-start justify-between pb-2",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[c.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),c.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),c.jsx(dn,{className:"text-xl",children:"Email Notifications"}),i.enabled&&c.jsx(is,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),c.jsx(Ar,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?c.jsx(xe,{variant:"outline",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):c.jsx(xe,{onClick:a,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?c.jsx(Ic,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&c.jsxs(Ht,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[c.jsx(sr,{className:"mb-6"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),c.jsx(zn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),c.jsx(zn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}var g0="Progress",y0=100,[RH,nW]=Hn(g0),[kH,PH]=RH(g0),ZP=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=DH,...o}=t;(s||s===0)&&!Xb(s)&&console.error(jH(`${s}`,"Progress"));const a=Xb(s)?s:y0;r!==null&&!Jb(r,a)&&console.error(OH(`${r}`,"Progress"));const l=Jb(r,a)?r:null,u=Qh(l)?i(l,a):void 0;return c.jsx(kH,{scope:n,value:l,max:a,children:c.jsx(me.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Qh(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":n2(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});ZP.displayName=g0;var e2="ProgressIndicator",t2=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=PH(e2,n);return c.jsx(me.div,{"data-state":n2(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});t2.displayName=e2;function DH(t,e){return`${Math.round(t/e*100)}%`}function n2(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Qh(t){return typeof t=="number"}function Xb(t){return Qh(t)&&!isNaN(t)&&t>0}function Jb(t,e){return Qh(t)&&!isNaN(t)&&t<=e&&t>=0}function jH(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${y0}\`.`}function OH(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${y0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var r2=ZP,MH=t2;const s2=p.forwardRef(({className:t,value:e,...n},r)=>c.jsx(r2,{ref:r,className:X("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:c.jsx(MH,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));s2.displayName=r2.displayName;function LH(){var O;const{user:t}=Wn(),{courses:e,assignments:n,isLoading:r}=ws(),[s,i]=p.useState(null),[o,a]=p.useState([]),[l,u]=p.useState(!1),[h,f]=p.useState(!1),[m,y]=p.useState(0),[b,v]=p.useState("Initializing...");p.useEffect(()=>{e.length>0&&!s&&i("all-courses")},[e,s]),p.useEffect(()=>{if(!s)return;u(!0);const D=Sw(st,"leaderboards",s,"students"),C=Rw(D,kw("totalXP","desc"),zN(50)),T=il(C,I=>{const N=[];I.forEach(R=>{const j=R.data();N.push({id:R.id,displayName:j.displayName||j.name||"Anonymous",photoUrl:j.photoUrl||j.avatar||"",totalXP:j.totalXP||j.xp||0,processedAssignmentIds:j.processedAssignmentIds||j.completedTasks||[]})}),a(N),u(!1)});return()=>T()},[s]);const E=async()=>{if(!t||!s)return;f(!0),y(5),v("Fetching historical classroom data...");const D=s==="all-courses"?n:n.filter(R=>R.courseId===s);y(20),v(`Scanning ${D.length} past assignments...`);let C=0;const T=[],I=R=>new Promise(j=>setTimeout(j,R));let N=0;for(const R of D)if(N++,N%5===0&&(y(20+N/D.length*60),await I(10)),R.userStatus==="submitted"||R.systemStatus==="submitted"||R.systemStatus==="graded"){if(C+=100,R.submittedAt&&R.dueDate){const P=new Date(R.submittedAt).getTime();(new Date(R.dueDate).getTime()-P)/(1e3*60*60)>48&&(C+=50)}T.push(R.id)}y(90),v("Syncing to leaderboard...");try{const R=dt(st,"leaderboards",s,"students",t.uid);await gn(R,{displayName:t.displayName||"Anonymous",photoUrl:t.photoURL||"",totalXP:C,processedAssignmentIds:T,lastSyncedAt:np()},{merge:!0}),y(100),v("Synchronization Complete!"),await I(500)}catch(R){console.error("Sync Failed",R),v("Sync Failed. Please try again.")}finally{f(!1)}},x=s==="all-courses"?"All Courses":((O=e.find(D=>D.id===s))==null?void 0:O.name)||"Select a Course",w=o.find(D=>D.id===(t==null?void 0:t.uid)),S=(w==null?void 0:w.totalXP)||0,k=!!w&&S>0;return c.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),c.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:x})]}),c.jsx("div",{className:"w-full sm:w-[240px]",children:c.jsxs(Gh,{value:s||"",onValueChange:i,children:[c.jsx(zc,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:c.jsx(Kh,{placeholder:"Select Class"})}),c.jsxs($c,{children:[c.jsx(gt,{value:"all-courses",className:"font-semibold border-b border-border mb-1 pb-1",children:"All Courses"}),e.map(D=>c.jsx(gt,{value:D.id,className:"text-xs",children:D.name},D.id))]})]})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[!k&&!l||h?c.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:h?c.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs font-mono uppercase text-muted-foreground",children:[c.jsx("span",{children:b}),c.jsxs("span",{children:[Math.round(m),"%"]})]}),c.jsx(s2,{value:m,className:"h-2"})]}):c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:c.jsx(l4,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-lg font-medium",children:"No Score Detected"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Calculate your XP based on all your past submitted assignments to join the leaderboard."})]}),c.jsx(xe,{onClick:E,size:"lg",className:"mt-2 font-semibold w-full sm:w-auto",children:"Calculate My Archive Score"})]})}):null,l&&o.length===0?c.jsx("div",{className:"space-y-4",children:[1,2,3].map(D=>c.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},D))}):o.length===0&&!h?c.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:c.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):c.jsx("div",{className:"flex flex-col space-y-2",children:o.map((D,C)=>{var N,R;const T=D.id===(t==null?void 0:t.uid),I=C+1;return c.jsxs("div",{className:X("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",T?"bg-card border-border shadow-sm ring-1 ring-border":"bg-transparent border-transparent hover:bg-muted/30 hover:border-border/50"),children:[c.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:I===1?c.jsx(Rv,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-500 fill-yellow-500/20"}):I===2?c.jsx(k_,{className:"h-4 w-4 sm:h-5 sm:w-5 text-zinc-400 fill-zinc-400/20"}):I===3?c.jsx(k_,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-700 fill-amber-700/20"}):c.jsxs("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm ml-1",children:["#",I]})}),c.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[c.jsxs(sp,{className:X("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",T?"border-foreground/10":"border-border"),children:[c.jsx(ip,{src:D.photoUrl}),c.jsx(op,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(R=(N=D.displayName)==null?void 0:N[0])==null?void 0:R.toUpperCase()})]}),c.jsxs("div",{className:"flex flex-col min-w-0",children:[c.jsxs("span",{className:X("text-xs sm:text-sm font-medium truncate",T?"text-foreground":"text-foreground/80 group-hover:text-foreground"),children:[D.displayName," ",T&&c.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-1 sm:ml-2",children:"(You)"})]}),c.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[D.processedAssignmentIds.length," ",c.jsx("span",{className:"hidden sm:inline",children:"missions completed"}),c.jsx("span",{className:"sm:hidden",children:"missions"})]})]})]}),c.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[c.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:D.totalXP.toLocaleString()}),c.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},D.id)})})]})})]})}function VH(){return c.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:c.jsx(vt,{className:"w-full max-w-md mx-4",children:c.jsxs(Ht,{className:"pt-6",children:[c.jsxs("div",{className:"flex mb-4 gap-2",children:[c.jsx(fi,{className:"h-8 w-8 text-red-500"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),c.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const FH=()=>{const t="/trace-classroom-crm/";return t.endsWith("/")?t.slice(0,-1):t};function UH(){const[t,e]=p.useState(!1),{isLoading:n}=ws(),r=FH();return n?c.jsx(i2,{message:"Setting up your workspace..."}):c.jsx(DT,{base:r,children:c.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[c.jsx(Q$,{mobileOpen:t,onMobileClose:()=>e(!1)}),c.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[c.jsx(Y$,{onMobileMenuClick:()=>e(!0)}),c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:c.jsxs(SO,{children:[c.jsx(Hr,{path:"/",component:mB}),c.jsx(Hr,{path:"/leaderboard",component:LH}),c.jsx(Hr,{path:"/timeline",component:QB}),c.jsx(Hr,{path:"/dashboard",component:JB}),c.jsx(Hr,{path:"/notes",component:ZB}),c.jsx(Hr,{path:"/settings",component:CH}),c.jsx(Hr,{path:"/settings/notifications",component:IH}),c.jsx(Hr,{path:"/settings/integrations",component:AH}),c.jsx(Hr,{component:VH})]})})]})]})})}const Zb=["You can sync your deadlines directly to Google Calendar.","Check the Pipeline view to drag and drop assignments between statuses.","The Dashboard gives you a quick overview of your weekly workload.","Enable email notifications to get a daily digest of your tasks.","You can access your course PDF materials in the Notes section."];function i2({message:t="Loading..."}){const[e,n]=p.useState(13),[r,s]=p.useState(0);return p.useEffect(()=>{const i=setInterval(()=>{n(a=>{if(a===100)return 100;const l=Math.random()*10;return Math.min(a+l,90)})},500),o=setInterval(()=>{s(a=>(a+1)%Zb.length)},3e3);return()=>{clearInterval(i),clearInterval(o)}},[]),c.jsx("div",{className:"h-screen flex flex-col items-center justify-center bg-background p-4",children:c.jsxs("div",{className:"w-full max-w-md space-y-8 text-center animate-in fade-in duration-500",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-16 w-16 bg-primary/10 rounded-2xl flex items-center justify-center mx-auto mb-6",children:c.jsx("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),c.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:t}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:`${e}%`}})}),c.jsxs("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest text-right",children:[Math.round(e),"%"]})]})]}),c.jsxs("div",{className:"bg-muted/30 border border-muted p-6 rounded-xl relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-primary/50"}),c.jsxs("p",{className:"text-sm font-medium text-muted-foreground animate-in slide-in-from-bottom-2 fade-in duration-500 key={tipIndex}",children:[c.jsx("span",{className:"block text-xs font-black uppercase text-foreground/80 mb-2 tracking-wider",children:"Use Tip"}),'"',Zb[r],'"']})]})]})})}function zH(){const{user:t,loading:e}=Wn();return e?c.jsx(i2,{message:"Authenticating..."}):t?c.jsx(Cz,{children:c.jsx(UH,{})}):c.jsx(a8,{})}function $H(){return c.jsx(KO,{client:XO,children:c.jsx(wz,{children:c.jsx(vz,{children:c.jsxs(pI,{children:[c.jsx(Y4,{}),c.jsx(zH,{})]})})})})}bT(document.getElementById("root")).render(c.jsx($H,{}));
