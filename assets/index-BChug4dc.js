var Pw=t=>{throw TypeError(t)};var Jm=(t,e,n)=>e.has(t)||Pw("Cannot "+n);var Q=(t,e,n)=>(Jm(t,e,"read from private field"),n?n.call(t):e.get(t)),Ve=(t,e,n)=>e.has(t)?Pw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Te=(t,e,n,r)=>(Jm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Wt=(t,e,n)=>(Jm(t,e,"access private method"),n);var Qu=(t,e,n,r)=>({set _(s){Te(t,e,s,n)},get _(){return Q(t,e,r)}});function lP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function BE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var HE={exports:{}},wf={},WE={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ou=Symbol.for("react.element"),cP=Symbol.for("react.portal"),uP=Symbol.for("react.fragment"),dP=Symbol.for("react.strict_mode"),hP=Symbol.for("react.profiler"),fP=Symbol.for("react.provider"),mP=Symbol.for("react.context"),pP=Symbol.for("react.forward_ref"),gP=Symbol.for("react.suspense"),yP=Symbol.for("react.memo"),vP=Symbol.for("react.lazy"),Dw=Symbol.iterator;function xP(t){return t===null||typeof t!="object"?null:(t=Dw&&t[Dw]||t["@@iterator"],typeof t=="function"?t:null)}var qE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GE=Object.assign,KE={};function ol(t,e,n){this.props=t,this.context=e,this.refs=KE,this.updater=n||qE}ol.prototype.isReactComponent={};ol.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ol.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function QE(){}QE.prototype=ol.prototype;function Qy(t,e,n){this.props=t,this.context=e,this.refs=KE,this.updater=n||qE}var Yy=Qy.prototype=new QE;Yy.constructor=Qy;GE(Yy,ol.prototype);Yy.isPureReactComponent=!0;var Mw=Array.isArray,YE=Object.prototype.hasOwnProperty,Xy={current:null},XE={key:!0,ref:!0,__self:!0,__source:!0};function JE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)YE.call(e,r)&&!XE.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ou,type:t,key:i,ref:o,props:s,_owner:Xy.current}}function wP(t,e){return{$$typeof:ou,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Jy(t){return typeof t=="object"&&t!==null&&t.$$typeof===ou}function bP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ow=/\/+/g;function Zm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bP(""+t.key):e.toString(36)}function Pd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ou:case cP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Zm(o,0):r,Mw(s)?(n="",t!=null&&(n=t.replace(Ow,"$&/")+"/"),Pd(s,e,n,"",function(u){return u})):s!=null&&(Jy(s)&&(s=wP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ow,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Mw(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Zm(i,l);o+=Pd(i,e,n,c,s)}else if(c=xP(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Zm(i,l++),o+=Pd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yu(t,e,n){if(t==null)return t;var r=[],s=0;return Pd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function _P(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var un={current:null},Dd={transition:null},EP={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:Dd,ReactCurrentOwner:Xy};function ZE(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Yu,forEach:function(t,e,n){Yu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yu(t,function(){e++}),e},toArray:function(t){return Yu(t,function(e){return e})||[]},only:function(t){if(!Jy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=ol;Ie.Fragment=uP;Ie.Profiler=hP;Ie.PureComponent=Qy;Ie.StrictMode=dP;Ie.Suspense=gP;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EP;Ie.act=ZE;Ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=GE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)YE.call(e,c)&&!XE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ou,type:t.type,key:s,ref:i,props:r,_owner:o}};Ie.createContext=function(t){return t={$$typeof:mP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fP,_context:t},t.Consumer=t};Ie.createElement=JE;Ie.createFactory=function(t){var e=JE.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:pP,render:t}};Ie.isValidElement=Jy;Ie.lazy=function(t){return{$$typeof:vP,_payload:{_status:-1,_result:t},_init:_P}};Ie.memo=function(t,e){return{$$typeof:yP,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Dd.transition;Dd.transition={};try{t()}finally{Dd.transition=e}};Ie.unstable_act=ZE;Ie.useCallback=function(t,e){return un.current.useCallback(t,e)};Ie.useContext=function(t){return un.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return un.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return un.current.useEffect(t,e)};Ie.useId=function(){return un.current.useId()};Ie.useImperativeHandle=function(t,e,n){return un.current.useImperativeHandle(t,e,n)};Ie.useInsertionEffect=function(t,e){return un.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return un.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return un.current.useMemo(t,e)};Ie.useReducer=function(t,e,n){return un.current.useReducer(t,e,n)};Ie.useRef=function(t){return un.current.useRef(t)};Ie.useState=function(t){return un.current.useState(t)};Ie.useSyncExternalStore=function(t,e,n){return un.current.useSyncExternalStore(t,e,n)};Ie.useTransition=function(){return un.current.useTransition()};Ie.version="18.3.1";WE.exports=Ie;var m=WE.exports;const Ce=BE(m),eS=lP({__proto__:null,default:Ce},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=m,TP=Symbol.for("react.element"),NP=Symbol.for("react.fragment"),CP=Object.prototype.hasOwnProperty,IP=SP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kP={key:!0,ref:!0,__self:!0,__source:!0};function tS(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CP.call(e,r)&&!kP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:TP,type:t,key:i,ref:o,props:s,_owner:IP.current}}wf.Fragment=NP;wf.jsx=tS;wf.jsxs=tS;HE.exports=wf;var a=HE.exports,nS={exports:{}},Ln={},rS={exports:{}},sS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var V=O.length;O.push(F);e:for(;0<V;){var B=V-1>>>1,G=O[B];if(0<s(G,F))O[B]=F,O[V]=G,V=B;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],V=O.pop();if(V!==F){O[0]=V;e:for(var B=0,G=O.length,re=G>>>1;B<re;){var ne=2*(B+1)-1,he=O[ne],ue=ne+1,J=O[ue];if(0>s(he,V))ue<G&&0>s(J,he)?(O[B]=J,O[ue]=V,B=ue):(O[B]=he,O[ne]=V,B=ne);else if(ue<G&&0>s(J,V))O[B]=J,O[ue]=V,B=ue;else break e}}return F}function s(O,F){var V=O.sortIndex-F.sortIndex;return V!==0?V:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,g=!1,E=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(O){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=O)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function C(O){if(x=!1,_(O),!E)if(n(c)!==null)E=!0,X(R);else{var F=n(u);F!==null&&U(C,F.startTime-O)}}function R(O,F){E=!1,x&&(x=!1,w(T),T=-1),g=!0;var V=p;try{for(_(F),f=n(c);f!==null&&(!(f.expirationTime>F)||O&&!k());){var B=f.callback;if(typeof B=="function"){f.callback=null,p=f.priorityLevel;var G=B(f.expirationTime<=F);F=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(c)&&r(c),_(F)}else r(c);f=n(c)}if(f!==null)var re=!0;else{var ne=n(u);ne!==null&&U(C,ne.startTime-F),re=!1}return re}finally{f=null,p=V,g=!1}}var D=!1,N=null,T=-1,I=5,j=-1;function k(){return!(t.unstable_now()-j<I)}function M(){if(N!==null){var O=t.unstable_now();j=O;var F=!0;try{F=N(!0,O)}finally{F?P():(D=!1,N=null)}}else D=!1}var P;if(typeof v=="function")P=function(){v(M)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ae=H.port2;H.port1.onmessage=M,P=function(){ae.postMessage(null)}}else P=function(){b(M,0)};function X(O){N=O,D||(D=!0,P())}function U(O,F){T=b(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){E||g||(E=!0,X(R))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var F=3;break;default:F=p}var V=p;p=F;try{return O()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=p;p=O;try{return F()}finally{p=V}},t.unstable_scheduleCallback=function(O,F,V){var B=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?B+V:B):V=B,O){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=V+G,O={id:h++,callback:F,priorityLevel:O,startTime:V,expirationTime:G,sortIndex:-1},V>B?(O.sortIndex=V,e(u,O),n(c)===null&&O===n(u)&&(x?(w(T),T=-1):x=!0,U(C,V-B))):(O.sortIndex=G,e(c,O),E||g||(E=!0,X(R))),O},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(O){var F=p;return function(){var V=p;p=F;try{return O.apply(this,arguments)}finally{p=V}}}})(sS);rS.exports=sS;var AP=rS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jP=m,On=AP;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iS=new Set,Ec={};function Oo(t,e){Oa(t,e),Oa(t+"Capture",e)}function Oa(t,e){for(Ec[t]=e,t=0;t<e.length;t++)iS.add(e[t])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ig=Object.prototype.hasOwnProperty,RP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lw={},Vw={};function PP(t){return ig.call(Vw,t)?!0:ig.call(Lw,t)?!1:RP.test(t)?Vw[t]=!0:(Lw[t]=!0,!1)}function DP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MP(t,e,n,r){if(e===null||typeof e>"u"||DP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function dn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new dn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new dn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new dn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new dn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new dn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new dn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new dn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new dn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new dn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zy=/[\-:]([a-z])/g;function ev(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zy,ev);$t[e]=new dn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zy,ev);$t[e]=new dn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zy,ev);$t[e]=new dn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new dn(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new dn(t,1,!1,t.toLowerCase(),null,!0,!0)});function tv(t,e,n,r){var s=$t.hasOwnProperty(e)?$t[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MP(e,n,s,r)&&(n=null),r||s===null?PP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Es=jP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xu=Symbol.for("react.element"),Zo=Symbol.for("react.portal"),ea=Symbol.for("react.fragment"),nv=Symbol.for("react.strict_mode"),og=Symbol.for("react.profiler"),oS=Symbol.for("react.provider"),aS=Symbol.for("react.context"),rv=Symbol.for("react.forward_ref"),ag=Symbol.for("react.suspense"),lg=Symbol.for("react.suspense_list"),sv=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),lS=Symbol.for("react.offscreen"),Fw=Symbol.iterator;function Vl(t){return t===null||typeof t!="object"?null:(t=Fw&&t[Fw]||t["@@iterator"],typeof t=="function"?t:null)}var lt=Object.assign,ep;function Kl(t){if(ep===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ep=e&&e[1]||""}return`
`+ep+t}var tp=!1;function np(t,e){if(!t||tp)return"";tp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{tp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Kl(t):""}function OP(t){switch(t.tag){case 5:return Kl(t.type);case 16:return Kl("Lazy");case 13:return Kl("Suspense");case 19:return Kl("SuspenseList");case 0:case 2:case 15:return t=np(t.type,!1),t;case 11:return t=np(t.type.render,!1),t;case 1:return t=np(t.type,!0),t;default:return""}}function cg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ea:return"Fragment";case Zo:return"Portal";case og:return"Profiler";case nv:return"StrictMode";case ag:return"Suspense";case lg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case aS:return(t.displayName||"Context")+".Consumer";case oS:return(t._context.displayName||"Context")+".Provider";case rv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sv:return e=t.displayName||null,e!==null?e:cg(t.type)||"Memo";case $s:e=t._payload,t=t._init;try{return cg(t(e))}catch{}}return null}function LP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cg(e);case 8:return e===nv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function cS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VP(t){var e=cS(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ju(t){t._valueTracker||(t._valueTracker=VP(t))}function uS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=cS(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ug(t,e){var n=e.checked;return lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function zw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_i(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dS(t,e){e=e.checked,e!=null&&tv(t,"checked",e,!1)}function dg(t,e){dS(t,e);var n=_i(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hg(t,e.type,n):e.hasOwnProperty("defaultValue")&&hg(t,e.type,_i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hg(t,e,n){(e!=="number"||lh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ql=Array.isArray;function ha(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_i(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function fg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $w(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Ql(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_i(n)}}function hS(t,e){var n=_i(e.value),r=_i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Bw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function fS(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?fS(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zu,mS=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zu=Zu||document.createElement("div"),Zu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Sc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var rc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FP=["Webkit","ms","Moz","O"];Object.keys(rc).forEach(function(t){FP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),rc[e]=rc[t]})});function pS(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rc.hasOwnProperty(t)&&rc[t]?(""+e).trim():e+"px"}function gS(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=pS(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var zP=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pg(t,e){if(e){if(zP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function gg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yg=null;function iv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vg=null,fa=null,ma=null;function Hw(t){if(t=cu(t)){if(typeof vg!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Tf(e),vg(t.stateNode,t.type,e))}}function yS(t){fa?ma?ma.push(t):ma=[t]:fa=t}function vS(){if(fa){var t=fa,e=ma;if(ma=fa=null,Hw(t),e)for(t=0;t<e.length;t++)Hw(e[t])}}function xS(t,e){return t(e)}function wS(){}var rp=!1;function bS(t,e,n){if(rp)return t(e,n);rp=!0;try{return xS(t,e,n)}finally{rp=!1,(fa!==null||ma!==null)&&(wS(),vS())}}function Tc(t,e){var n=t.stateNode;if(n===null)return null;var r=Tf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var xg=!1;if(fs)try{var Fl={};Object.defineProperty(Fl,"passive",{get:function(){xg=!0}}),window.addEventListener("test",Fl,Fl),window.removeEventListener("test",Fl,Fl)}catch{xg=!1}function UP(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var sc=!1,ch=null,uh=!1,wg=null,$P={onError:function(t){sc=!0,ch=t}};function BP(t,e,n,r,s,i,o,l,c){sc=!1,ch=null,UP.apply($P,arguments)}function HP(t,e,n,r,s,i,o,l,c){if(BP.apply(this,arguments),sc){if(sc){var u=ch;sc=!1,ch=null}else throw Error(ee(198));uh||(uh=!0,wg=u)}}function Lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _S(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ww(t){if(Lo(t)!==t)throw Error(ee(188))}function WP(t){var e=t.alternate;if(!e){if(e=Lo(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ww(s),t;if(i===r)return Ww(s),e;i=i.sibling}throw Error(ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function ES(t){return t=WP(t),t!==null?SS(t):null}function SS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=SS(t);if(e!==null)return e;t=t.sibling}return null}var TS=On.unstable_scheduleCallback,qw=On.unstable_cancelCallback,qP=On.unstable_shouldYield,GP=On.unstable_requestPaint,mt=On.unstable_now,KP=On.unstable_getCurrentPriorityLevel,ov=On.unstable_ImmediatePriority,NS=On.unstable_UserBlockingPriority,dh=On.unstable_NormalPriority,QP=On.unstable_LowPriority,CS=On.unstable_IdlePriority,bf=null,Fr=null;function YP(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(bf,t,void 0,(t.current.flags&128)===128)}catch{}}var ur=Math.clz32?Math.clz32:ZP,XP=Math.log,JP=Math.LN2;function ZP(t){return t>>>=0,t===0?32:31-(XP(t)/JP|0)|0}var ed=64,td=4194304;function Yl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Yl(l):(i&=o,i!==0&&(r=Yl(i)))}else o=n&~s,o!==0?r=Yl(o):i!==0&&(r=Yl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ur(e),s=1<<n,r|=t[n],e&=~s;return r}function eD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ur(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=eD(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function bg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function IS(){var t=ed;return ed<<=1,!(ed&4194240)&&(ed=64),t}function sp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function au(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ur(e),t[e]=n}function nD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ur(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function av(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ur(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function kS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var AS,lv,jS,RS,PS,_g=!1,nd=[],li=null,ci=null,ui=null,Nc=new Map,Cc=new Map,Ws=[],rD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gw(t,e){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":Nc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cc.delete(e.pointerId)}}function zl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=cu(e),e!==null&&lv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function sD(t,e,n,r,s){switch(e){case"focusin":return li=zl(li,t,e,n,r,s),!0;case"dragenter":return ci=zl(ci,t,e,n,r,s),!0;case"mouseover":return ui=zl(ui,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Nc.set(i,zl(Nc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Cc.set(i,zl(Cc.get(i)||null,t,e,n,r,s)),!0}return!1}function DS(t){var e=oo(t.target);if(e!==null){var n=Lo(e);if(n!==null){if(e=n.tag,e===13){if(e=_S(n),e!==null){t.blockedOn=e,PS(t.priority,function(){jS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Md(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Eg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yg=r,n.target.dispatchEvent(r),yg=null}else return e=cu(n),e!==null&&lv(e),t.blockedOn=n,!1;e.shift()}return!0}function Kw(t,e,n){Md(t)&&n.delete(e)}function iD(){_g=!1,li!==null&&Md(li)&&(li=null),ci!==null&&Md(ci)&&(ci=null),ui!==null&&Md(ui)&&(ui=null),Nc.forEach(Kw),Cc.forEach(Kw)}function Ul(t,e){t.blockedOn===e&&(t.blockedOn=null,_g||(_g=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,iD)))}function Ic(t){function e(s){return Ul(s,t)}if(0<nd.length){Ul(nd[0],t);for(var n=1;n<nd.length;n++){var r=nd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(li!==null&&Ul(li,t),ci!==null&&Ul(ci,t),ui!==null&&Ul(ui,t),Nc.forEach(e),Cc.forEach(e),n=0;n<Ws.length;n++)r=Ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ws.length&&(n=Ws[0],n.blockedOn===null);)DS(n),n.blockedOn===null&&Ws.shift()}var pa=Es.ReactCurrentBatchConfig,fh=!0;function oD(t,e,n,r){var s=$e,i=pa.transition;pa.transition=null;try{$e=1,cv(t,e,n,r)}finally{$e=s,pa.transition=i}}function aD(t,e,n,r){var s=$e,i=pa.transition;pa.transition=null;try{$e=4,cv(t,e,n,r)}finally{$e=s,pa.transition=i}}function cv(t,e,n,r){if(fh){var s=Eg(t,e,n,r);if(s===null)mp(t,e,r,mh,n),Gw(t,r);else if(sD(s,t,e,n,r))r.stopPropagation();else if(Gw(t,r),e&4&&-1<rD.indexOf(t)){for(;s!==null;){var i=cu(s);if(i!==null&&AS(i),i=Eg(t,e,n,r),i===null&&mp(t,e,r,mh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else mp(t,e,r,null,n)}}var mh=null;function Eg(t,e,n,r){if(mh=null,t=iv(r),t=oo(t),t!==null)if(e=Lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_S(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mh=t,null}function MS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KP()){case ov:return 1;case NS:return 4;case dh:case QP:return 16;case CS:return 536870912;default:return 16}default:return 16}}var ti=null,uv=null,Od=null;function OS(){if(Od)return Od;var t,e=uv,n=e.length,r,s="value"in ti?ti.value:ti.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Od=s.slice(t,1<r?1-r:void 0)}function Ld(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rd(){return!0}function Qw(){return!1}function Vn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?rd:Qw,this.isPropagationStopped=Qw,this}return lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rd)},persist:function(){},isPersistent:rd}),e}var al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dv=Vn(al),lu=lt({},al,{view:0,detail:0}),lD=Vn(lu),ip,op,$l,_f=lt({},lu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$l&&($l&&t.type==="mousemove"?(ip=t.screenX-$l.screenX,op=t.screenY-$l.screenY):op=ip=0,$l=t),ip)},movementY:function(t){return"movementY"in t?t.movementY:op}}),Yw=Vn(_f),cD=lt({},_f,{dataTransfer:0}),uD=Vn(cD),dD=lt({},lu,{relatedTarget:0}),ap=Vn(dD),hD=lt({},al,{animationName:0,elapsedTime:0,pseudoElement:0}),fD=Vn(hD),mD=lt({},al,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pD=Vn(mD),gD=lt({},al,{data:0}),Xw=Vn(gD),yD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xD[t])?!!e[t]:!1}function hv(){return wD}var bD=lt({},lu,{key:function(t){if(t.key){var e=yD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ld(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hv,charCode:function(t){return t.type==="keypress"?Ld(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ld(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_D=Vn(bD),ED=lt({},_f,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jw=Vn(ED),SD=lt({},lu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hv}),TD=Vn(SD),ND=lt({},al,{propertyName:0,elapsedTime:0,pseudoElement:0}),CD=Vn(ND),ID=lt({},_f,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kD=Vn(ID),AD=[9,13,27,32],fv=fs&&"CompositionEvent"in window,ic=null;fs&&"documentMode"in document&&(ic=document.documentMode);var jD=fs&&"TextEvent"in window&&!ic,LS=fs&&(!fv||ic&&8<ic&&11>=ic),Zw=" ",e1=!1;function VS(t,e){switch(t){case"keyup":return AD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function FS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ta=!1;function RD(t,e){switch(t){case"compositionend":return FS(e);case"keypress":return e.which!==32?null:(e1=!0,Zw);case"textInput":return t=e.data,t===Zw&&e1?null:t;default:return null}}function PD(t,e){if(ta)return t==="compositionend"||!fv&&VS(t,e)?(t=OS(),Od=uv=ti=null,ta=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return LS&&e.locale!=="ko"?null:e.data;default:return null}}var DD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function t1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DD[t.type]:e==="textarea"}function zS(t,e,n,r){yS(r),e=ph(e,"onChange"),0<e.length&&(n=new dv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oc=null,kc=null;function MD(t){XS(t,0)}function Ef(t){var e=sa(t);if(uS(e))return t}function OD(t,e){if(t==="change")return e}var US=!1;if(fs){var lp;if(fs){var cp="oninput"in document;if(!cp){var n1=document.createElement("div");n1.setAttribute("oninput","return;"),cp=typeof n1.oninput=="function"}lp=cp}else lp=!1;US=lp&&(!document.documentMode||9<document.documentMode)}function r1(){oc&&(oc.detachEvent("onpropertychange",$S),kc=oc=null)}function $S(t){if(t.propertyName==="value"&&Ef(kc)){var e=[];zS(e,kc,t,iv(t)),bS(MD,e)}}function LD(t,e,n){t==="focusin"?(r1(),oc=e,kc=n,oc.attachEvent("onpropertychange",$S)):t==="focusout"&&r1()}function VD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ef(kc)}function FD(t,e){if(t==="click")return Ef(e)}function zD(t,e){if(t==="input"||t==="change")return Ef(e)}function UD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yr=typeof Object.is=="function"?Object.is:UD;function Ac(t,e){if(yr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ig.call(e,s)||!yr(t[s],e[s]))return!1}return!0}function s1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i1(t,e){var n=s1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s1(n)}}function BS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function HS(){for(var t=window,e=lh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lh(t.document)}return e}function mv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $D(t){var e=HS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BS(n.ownerDocument.documentElement,n)){if(r!==null&&mv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=i1(n,i);var o=i1(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BD=fs&&"documentMode"in document&&11>=document.documentMode,na=null,Sg=null,ac=null,Tg=!1;function o1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Tg||na==null||na!==lh(r)||(r=na,"selectionStart"in r&&mv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ac&&Ac(ac,r)||(ac=r,r=ph(Sg,"onSelect"),0<r.length&&(e=new dv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=na)))}function sd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ra={animationend:sd("Animation","AnimationEnd"),animationiteration:sd("Animation","AnimationIteration"),animationstart:sd("Animation","AnimationStart"),transitionend:sd("Transition","TransitionEnd")},up={},WS={};fs&&(WS=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function Sf(t){if(up[t])return up[t];if(!ra[t])return t;var e=ra[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in WS)return up[t]=e[n];return t}var qS=Sf("animationend"),GS=Sf("animationiteration"),KS=Sf("animationstart"),QS=Sf("transitionend"),YS=new Map,a1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(t,e){YS.set(t,e),Oo(e,[t])}for(var dp=0;dp<a1.length;dp++){var hp=a1[dp],HD=hp.toLowerCase(),WD=hp[0].toUpperCase()+hp.slice(1);Li(HD,"on"+WD)}Li(qS,"onAnimationEnd");Li(GS,"onAnimationIteration");Li(KS,"onAnimationStart");Li("dblclick","onDoubleClick");Li("focusin","onFocus");Li("focusout","onBlur");Li(QS,"onTransitionEnd");Oa("onMouseEnter",["mouseout","mouseover"]);Oa("onMouseLeave",["mouseout","mouseover"]);Oa("onPointerEnter",["pointerout","pointerover"]);Oa("onPointerLeave",["pointerout","pointerover"]);Oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xl));function l1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HP(r,e,void 0,t),t.currentTarget=null}function XS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;l1(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;l1(s,l,u),i=c}}}if(uh)throw t=wg,uh=!1,wg=null,t}function Je(t,e){var n=e[Ag];n===void 0&&(n=e[Ag]=new Set);var r=t+"__bubble";n.has(r)||(JS(e,t,2,!1),n.add(r))}function fp(t,e,n){var r=0;e&&(r|=4),JS(n,t,r,e)}var id="_reactListening"+Math.random().toString(36).slice(2);function jc(t){if(!t[id]){t[id]=!0,iS.forEach(function(n){n!=="selectionchange"&&(qD.has(n)||fp(n,!1,t),fp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[id]||(e[id]=!0,fp("selectionchange",!1,e))}}function JS(t,e,n,r){switch(MS(e)){case 1:var s=oD;break;case 4:s=aD;break;default:s=cv}n=s.bind(null,e,n,t),s=void 0,!xg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function mp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=oo(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}bS(function(){var u=i,h=iv(n),f=[];e:{var p=YS.get(t);if(p!==void 0){var g=dv,E=t;switch(t){case"keypress":if(Ld(n)===0)break e;case"keydown":case"keyup":g=_D;break;case"focusin":E="focus",g=ap;break;case"focusout":E="blur",g=ap;break;case"beforeblur":case"afterblur":g=ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Yw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=uD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=TD;break;case qS:case GS:case KS:g=fD;break;case QS:g=CD;break;case"scroll":g=lD;break;case"wheel":g=kD;break;case"copy":case"cut":case"paste":g=pD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Jw}var x=(e&4)!==0,b=!x&&t==="scroll",w=x?p!==null?p+"Capture":null:p;x=[];for(var v=u,_;v!==null;){_=v;var C=_.stateNode;if(_.tag===5&&C!==null&&(_=C,w!==null&&(C=Tc(v,w),C!=null&&x.push(Rc(v,C,_)))),b)break;v=v.return}0<x.length&&(p=new g(p,E,null,n,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==yg&&(E=n.relatedTarget||n.fromElement)&&(oo(E)||E[ms]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(E=n.relatedTarget||n.toElement,g=u,E=E?oo(E):null,E!==null&&(b=Lo(E),E!==b||E.tag!==5&&E.tag!==6)&&(E=null)):(g=null,E=u),g!==E)){if(x=Yw,C="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(x=Jw,C="onPointerLeave",w="onPointerEnter",v="pointer"),b=g==null?p:sa(g),_=E==null?p:sa(E),p=new x(C,v+"leave",g,n,h),p.target=b,p.relatedTarget=_,C=null,oo(h)===u&&(x=new x(w,v+"enter",E,n,h),x.target=_,x.relatedTarget=b,C=x),b=C,g&&E)t:{for(x=g,w=E,v=0,_=x;_;_=Wo(_))v++;for(_=0,C=w;C;C=Wo(C))_++;for(;0<v-_;)x=Wo(x),v--;for(;0<_-v;)w=Wo(w),_--;for(;v--;){if(x===w||w!==null&&x===w.alternate)break t;x=Wo(x),w=Wo(w)}x=null}else x=null;g!==null&&c1(f,p,g,x,!1),E!==null&&b!==null&&c1(f,b,E,x,!0)}}e:{if(p=u?sa(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var R=OD;else if(t1(p))if(US)R=zD;else{R=VD;var D=LD}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=FD);if(R&&(R=R(t,u))){zS(f,R,n,h);break e}D&&D(t,p,u),t==="focusout"&&(D=p._wrapperState)&&D.controlled&&p.type==="number"&&hg(p,"number",p.value)}switch(D=u?sa(u):window,t){case"focusin":(t1(D)||D.contentEditable==="true")&&(na=D,Sg=u,ac=null);break;case"focusout":ac=Sg=na=null;break;case"mousedown":Tg=!0;break;case"contextmenu":case"mouseup":case"dragend":Tg=!1,o1(f,n,h);break;case"selectionchange":if(BD)break;case"keydown":case"keyup":o1(f,n,h)}var N;if(fv)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ta?VS(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(LS&&n.locale!=="ko"&&(ta||T!=="onCompositionStart"?T==="onCompositionEnd"&&ta&&(N=OS()):(ti=h,uv="value"in ti?ti.value:ti.textContent,ta=!0)),D=ph(u,T),0<D.length&&(T=new Xw(T,t,null,n,h),f.push({event:T,listeners:D}),N?T.data=N:(N=FS(n),N!==null&&(T.data=N)))),(N=jD?RD(t,n):PD(t,n))&&(u=ph(u,"onBeforeInput"),0<u.length&&(h=new Xw("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=N))}XS(f,e)})}function Rc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ph(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Tc(t,n),i!=null&&r.unshift(Rc(t,i,s)),i=Tc(t,e),i!=null&&r.push(Rc(t,i,s))),t=t.return}return r}function Wo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c1(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Tc(n,i),c!=null&&o.unshift(Rc(n,c,l))):s||(c=Tc(n,i),c!=null&&o.push(Rc(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GD=/\r\n?/g,KD=/\u0000|\uFFFD/g;function u1(t){return(typeof t=="string"?t:""+t).replace(GD,`
`).replace(KD,"")}function od(t,e,n){if(e=u1(e),u1(t)!==e&&n)throw Error(ee(425))}function gh(){}var Ng=null,Cg=null;function Ig(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kg=typeof setTimeout=="function"?setTimeout:void 0,QD=typeof clearTimeout=="function"?clearTimeout:void 0,d1=typeof Promise=="function"?Promise:void 0,YD=typeof queueMicrotask=="function"?queueMicrotask:typeof d1<"u"?function(t){return d1.resolve(null).then(t).catch(XD)}:kg;function XD(t){setTimeout(function(){throw t})}function pp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ic(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ic(e)}function di(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ll=Math.random().toString(36).slice(2),Lr="__reactFiber$"+ll,Pc="__reactProps$"+ll,ms="__reactContainer$"+ll,Ag="__reactEvents$"+ll,JD="__reactListeners$"+ll,ZD="__reactHandles$"+ll;function oo(t){var e=t[Lr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ms]||n[Lr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h1(t);t!==null;){if(n=t[Lr])return n;t=h1(t)}return e}t=n,n=t.parentNode}return null}function cu(t){return t=t[Lr]||t[ms],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Tf(t){return t[Pc]||null}var jg=[],ia=-1;function Vi(t){return{current:t}}function et(t){0>ia||(t.current=jg[ia],jg[ia]=null,ia--)}function Qe(t,e){ia++,jg[ia]=t.current,t.current=e}var Ei={},en=Vi(Ei),bn=Vi(!1),bo=Ei;function La(t,e){var n=t.type.contextTypes;if(!n)return Ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function _n(t){return t=t.childContextTypes,t!=null}function yh(){et(bn),et(en)}function f1(t,e,n){if(en.current!==Ei)throw Error(ee(168));Qe(en,e),Qe(bn,n)}function ZS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ee(108,LP(t)||"Unknown",s));return lt({},n,r)}function vh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ei,bo=en.current,Qe(en,t),Qe(bn,bn.current),!0}function m1(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=ZS(t,e,bo),r.__reactInternalMemoizedMergedChildContext=t,et(bn),et(en),Qe(en,t)):et(bn),Qe(bn,n)}var is=null,Nf=!1,gp=!1;function eT(t){is===null?is=[t]:is.push(t)}function e4(t){Nf=!0,eT(t)}function Fi(){if(!gp&&is!==null){gp=!0;var t=0,e=$e;try{var n=is;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}is=null,Nf=!1}catch(s){throw is!==null&&(is=is.slice(t+1)),TS(ov,Fi),s}finally{$e=e,gp=!1}}return null}var oa=[],aa=0,xh=null,wh=0,$n=[],Bn=0,_o=null,os=1,as="";function no(t,e){oa[aa++]=wh,oa[aa++]=xh,xh=t,wh=e}function tT(t,e,n){$n[Bn++]=os,$n[Bn++]=as,$n[Bn++]=_o,_o=t;var r=os;t=as;var s=32-ur(r)-1;r&=~(1<<s),n+=1;var i=32-ur(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,os=1<<32-ur(e)+s|n<<s|r,as=i+t}else os=1<<i|n<<s|r,as=t}function pv(t){t.return!==null&&(no(t,1),tT(t,1,0))}function gv(t){for(;t===xh;)xh=oa[--aa],oa[aa]=null,wh=oa[--aa],oa[aa]=null;for(;t===_o;)_o=$n[--Bn],$n[Bn]=null,as=$n[--Bn],$n[Bn]=null,os=$n[--Bn],$n[Bn]=null}var Dn=null,Rn=null,rt=!1,or=null;function nT(t,e){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dn=t,Rn=di(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dn=t,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_o!==null?{id:os,overflow:as}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dn=t,Rn=null,!0):!1;default:return!1}}function Rg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pg(t){if(rt){var e=Rn;if(e){var n=e;if(!p1(t,e)){if(Rg(t))throw Error(ee(418));e=di(n.nextSibling);var r=Dn;e&&p1(t,e)?nT(r,n):(t.flags=t.flags&-4097|2,rt=!1,Dn=t)}}else{if(Rg(t))throw Error(ee(418));t.flags=t.flags&-4097|2,rt=!1,Dn=t}}}function g1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dn=t}function ad(t){if(t!==Dn)return!1;if(!rt)return g1(t),rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ig(t.type,t.memoizedProps)),e&&(e=Rn)){if(Rg(t))throw rT(),Error(ee(418));for(;e;)nT(t,e),e=di(e.nextSibling)}if(g1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rn=di(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rn=null}}else Rn=Dn?di(t.stateNode.nextSibling):null;return!0}function rT(){for(var t=Rn;t;)t=di(t.nextSibling)}function Va(){Rn=Dn=null,rt=!1}function yv(t){or===null?or=[t]:or.push(t)}var t4=Es.ReactCurrentBatchConfig;function Bl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function ld(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function y1(t){var e=t._init;return e(t._payload)}function sT(t){function e(w,v){if(t){var _=w.deletions;_===null?(w.deletions=[v],w.flags|=16):_.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=pi(w,v),w.index=0,w.sibling=null,w}function i(w,v,_){return w.index=_,t?(_=w.alternate,_!==null?(_=_.index,_<v?(w.flags|=2,v):_):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,v,_,C){return v===null||v.tag!==6?(v=Ep(_,w.mode,C),v.return=w,v):(v=s(v,_),v.return=w,v)}function c(w,v,_,C){var R=_.type;return R===ea?h(w,v,_.props.children,C,_.key):v!==null&&(v.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===$s&&y1(R)===v.type)?(C=s(v,_.props),C.ref=Bl(w,v,_),C.return=w,C):(C=Hd(_.type,_.key,_.props,null,w.mode,C),C.ref=Bl(w,v,_),C.return=w,C)}function u(w,v,_,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Sp(_,w.mode,C),v.return=w,v):(v=s(v,_.children||[]),v.return=w,v)}function h(w,v,_,C,R){return v===null||v.tag!==7?(v=yo(_,w.mode,C,R),v.return=w,v):(v=s(v,_),v.return=w,v)}function f(w,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ep(""+v,w.mode,_),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xu:return _=Hd(v.type,v.key,v.props,null,w.mode,_),_.ref=Bl(w,null,v),_.return=w,_;case Zo:return v=Sp(v,w.mode,_),v.return=w,v;case $s:var C=v._init;return f(w,C(v._payload),_)}if(Ql(v)||Vl(v))return v=yo(v,w.mode,_,null),v.return=w,v;ld(w,v)}return null}function p(w,v,_,C){var R=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return R!==null?null:l(w,v,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Xu:return _.key===R?c(w,v,_,C):null;case Zo:return _.key===R?u(w,v,_,C):null;case $s:return R=_._init,p(w,v,R(_._payload),C)}if(Ql(_)||Vl(_))return R!==null?null:h(w,v,_,C,null);ld(w,_)}return null}function g(w,v,_,C,R){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(_)||null,l(v,w,""+C,R);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Xu:return w=w.get(C.key===null?_:C.key)||null,c(v,w,C,R);case Zo:return w=w.get(C.key===null?_:C.key)||null,u(v,w,C,R);case $s:var D=C._init;return g(w,v,_,D(C._payload),R)}if(Ql(C)||Vl(C))return w=w.get(_)||null,h(v,w,C,R,null);ld(v,C)}return null}function E(w,v,_,C){for(var R=null,D=null,N=v,T=v=0,I=null;N!==null&&T<_.length;T++){N.index>T?(I=N,N=null):I=N.sibling;var j=p(w,N,_[T],C);if(j===null){N===null&&(N=I);break}t&&N&&j.alternate===null&&e(w,N),v=i(j,v,T),D===null?R=j:D.sibling=j,D=j,N=I}if(T===_.length)return n(w,N),rt&&no(w,T),R;if(N===null){for(;T<_.length;T++)N=f(w,_[T],C),N!==null&&(v=i(N,v,T),D===null?R=N:D.sibling=N,D=N);return rt&&no(w,T),R}for(N=r(w,N);T<_.length;T++)I=g(N,w,T,_[T],C),I!==null&&(t&&I.alternate!==null&&N.delete(I.key===null?T:I.key),v=i(I,v,T),D===null?R=I:D.sibling=I,D=I);return t&&N.forEach(function(k){return e(w,k)}),rt&&no(w,T),R}function x(w,v,_,C){var R=Vl(_);if(typeof R!="function")throw Error(ee(150));if(_=R.call(_),_==null)throw Error(ee(151));for(var D=R=null,N=v,T=v=0,I=null,j=_.next();N!==null&&!j.done;T++,j=_.next()){N.index>T?(I=N,N=null):I=N.sibling;var k=p(w,N,j.value,C);if(k===null){N===null&&(N=I);break}t&&N&&k.alternate===null&&e(w,N),v=i(k,v,T),D===null?R=k:D.sibling=k,D=k,N=I}if(j.done)return n(w,N),rt&&no(w,T),R;if(N===null){for(;!j.done;T++,j=_.next())j=f(w,j.value,C),j!==null&&(v=i(j,v,T),D===null?R=j:D.sibling=j,D=j);return rt&&no(w,T),R}for(N=r(w,N);!j.done;T++,j=_.next())j=g(N,w,T,j.value,C),j!==null&&(t&&j.alternate!==null&&N.delete(j.key===null?T:j.key),v=i(j,v,T),D===null?R=j:D.sibling=j,D=j);return t&&N.forEach(function(M){return e(w,M)}),rt&&no(w,T),R}function b(w,v,_,C){if(typeof _=="object"&&_!==null&&_.type===ea&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Xu:e:{for(var R=_.key,D=v;D!==null;){if(D.key===R){if(R=_.type,R===ea){if(D.tag===7){n(w,D.sibling),v=s(D,_.props.children),v.return=w,w=v;break e}}else if(D.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===$s&&y1(R)===D.type){n(w,D.sibling),v=s(D,_.props),v.ref=Bl(w,D,_),v.return=w,w=v;break e}n(w,D);break}else e(w,D);D=D.sibling}_.type===ea?(v=yo(_.props.children,w.mode,C,_.key),v.return=w,w=v):(C=Hd(_.type,_.key,_.props,null,w.mode,C),C.ref=Bl(w,v,_),C.return=w,w=C)}return o(w);case Zo:e:{for(D=_.key;v!==null;){if(v.key===D)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(w,v.sibling),v=s(v,_.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Sp(_,w.mode,C),v.return=w,w=v}return o(w);case $s:return D=_._init,b(w,v,D(_._payload),C)}if(Ql(_))return E(w,v,_,C);if(Vl(_))return x(w,v,_,C);ld(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,_),v.return=w,w=v):(n(w,v),v=Ep(_,w.mode,C),v.return=w,w=v),o(w)):n(w,v)}return b}var Fa=sT(!0),iT=sT(!1),bh=Vi(null),_h=null,la=null,vv=null;function xv(){vv=la=_h=null}function wv(t){var e=bh.current;et(bh),t._currentValue=e}function Dg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ga(t,e){_h=t,vv=la=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function Kn(t){var e=t._currentValue;if(vv!==t)if(t={context:t,memoizedValue:e,next:null},la===null){if(_h===null)throw Error(ee(308));la=t,_h.dependencies={lanes:0,firstContext:t}}else la=la.next=t;return e}var ao=null;function bv(t){ao===null?ao=[t]:ao.push(t)}function oT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bv(e)):(n.next=s.next,s.next=n),e.interleaved=n,ps(t,r)}function ps(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bs=!1;function _v(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function aT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function us(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ps(t,n)}return s=r.interleaved,s===null?(e.next=e,bv(r)):(e.next=s.next,s.next=e),r.interleaved=e,ps(t,n)}function Vd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,av(t,n)}}function v1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Eh(t,e,n,r){var s=t.updateQueue;Bs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var E=t,x=l;switch(p=e,g=n,x.tag){case 1:if(E=x.payload,typeof E=="function"){f=E.call(g,f,p);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=x.payload,p=typeof E=="function"?E.call(g,f,p):E,p==null)break e;f=lt({},f,p);break e;case 2:Bs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);So|=o,t.lanes=o,t.memoizedState=f}}function x1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ee(191,s));s.call(r)}}}var uu={},zr=Vi(uu),Dc=Vi(uu),Mc=Vi(uu);function lo(t){if(t===uu)throw Error(ee(174));return t}function Ev(t,e){switch(Qe(Mc,e),Qe(Dc,t),Qe(zr,uu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mg(e,t)}et(zr),Qe(zr,e)}function za(){et(zr),et(Dc),et(Mc)}function lT(t){lo(Mc.current);var e=lo(zr.current),n=mg(e,t.type);e!==n&&(Qe(Dc,t),Qe(zr,n))}function Sv(t){Dc.current===t&&(et(zr),et(Dc))}var it=Vi(0);function Sh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yp=[];function Tv(){for(var t=0;t<yp.length;t++)yp[t]._workInProgressVersionPrimary=null;yp.length=0}var Fd=Es.ReactCurrentDispatcher,vp=Es.ReactCurrentBatchConfig,Eo=0,at=null,_t=null,jt=null,Th=!1,lc=!1,Oc=0,n4=0;function qt(){throw Error(ee(321))}function Nv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!yr(t[n],e[n]))return!1;return!0}function Cv(t,e,n,r,s,i){if(Eo=i,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fd.current=t===null||t.memoizedState===null?o4:a4,t=n(r,s),lc){i=0;do{if(lc=!1,Oc=0,25<=i)throw Error(ee(301));i+=1,jt=_t=null,e.updateQueue=null,Fd.current=l4,t=n(r,s)}while(lc)}if(Fd.current=Nh,e=_t!==null&&_t.next!==null,Eo=0,jt=_t=at=null,Th=!1,e)throw Error(ee(300));return t}function Iv(){var t=Oc!==0;return Oc=0,t}function Rr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?at.memoizedState=jt=t:jt=jt.next=t,jt}function Qn(){if(_t===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=jt===null?at.memoizedState:jt.next;if(e!==null)jt=e,_t=t;else{if(t===null)throw Error(ee(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},jt===null?at.memoizedState=jt=t:jt=jt.next=t}return jt}function Lc(t,e){return typeof e=="function"?e(t):e}function xp(t){var e=Qn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=_t,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((Eo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,at.lanes|=h,So|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,yr(r,e.memoizedState)||(wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,at.lanes|=i,So|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wp(t){var e=Qn(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);yr(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function cT(){}function uT(t,e){var n=at,r=Qn(),s=e(),i=!yr(r.memoizedState,s);if(i&&(r.memoizedState=s,wn=!0),r=r.queue,kv(fT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,Vc(9,hT.bind(null,n,r,s,e),void 0,null),Dt===null)throw Error(ee(349));Eo&30||dT(n,e,s)}return s}function dT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hT(t,e,n,r){e.value=n,e.getSnapshot=r,mT(e)&&pT(t)}function fT(t,e,n){return n(function(){mT(e)&&pT(t)})}function mT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yr(t,n)}catch{return!0}}function pT(t){var e=ps(t,1);e!==null&&dr(e,t,1,-1)}function w1(t){var e=Rr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:t},e.queue=t,t=t.dispatch=i4.bind(null,at,t),[e.memoizedState,t]}function Vc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function gT(){return Qn().memoizedState}function zd(t,e,n,r){var s=Rr();at.flags|=t,s.memoizedState=Vc(1|e,n,void 0,r===void 0?null:r)}function Cf(t,e,n,r){var s=Qn();r=r===void 0?null:r;var i=void 0;if(_t!==null){var o=_t.memoizedState;if(i=o.destroy,r!==null&&Nv(r,o.deps)){s.memoizedState=Vc(e,n,i,r);return}}at.flags|=t,s.memoizedState=Vc(1|e,n,i,r)}function b1(t,e){return zd(8390656,8,t,e)}function kv(t,e){return Cf(2048,8,t,e)}function yT(t,e){return Cf(4,2,t,e)}function vT(t,e){return Cf(4,4,t,e)}function xT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wT(t,e,n){return n=n!=null?n.concat([t]):null,Cf(4,4,xT.bind(null,e,t),n)}function Av(){}function bT(t,e){var n=Qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _T(t,e){var n=Qn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ET(t,e,n){return Eo&21?(yr(n,e)||(n=IS(),at.lanes|=n,So|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function r4(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=vp.transition;vp.transition={};try{t(!1),e()}finally{$e=n,vp.transition=r}}function ST(){return Qn().memoizedState}function s4(t,e,n){var r=mi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TT(t))NT(e,n);else if(n=oT(t,e,n,r),n!==null){var s=ln();dr(n,t,r,s),CT(n,e,r)}}function i4(t,e,n){var r=mi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TT(t))NT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,yr(l,o)){var c=e.interleaved;c===null?(s.next=s,bv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=oT(t,e,s,r),n!==null&&(s=ln(),dr(n,t,r,s),CT(n,e,r))}}function TT(t){var e=t.alternate;return t===at||e!==null&&e===at}function NT(t,e){lc=Th=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function CT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,av(t,n)}}var Nh={readContext:Kn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},o4={readContext:Kn,useCallback:function(t,e){return Rr().memoizedState=[t,e===void 0?null:e],t},useContext:Kn,useEffect:b1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zd(4194308,4,xT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zd(4194308,4,t,e)},useInsertionEffect:function(t,e){return zd(4,2,t,e)},useMemo:function(t,e){var n=Rr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Rr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=s4.bind(null,at,t),[r.memoizedState,t]},useRef:function(t){var e=Rr();return t={current:t},e.memoizedState=t},useState:w1,useDebugValue:Av,useDeferredValue:function(t){return Rr().memoizedState=t},useTransition:function(){var t=w1(!1),e=t[0];return t=r4.bind(null,t[1]),Rr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=at,s=Rr();if(rt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),Dt===null)throw Error(ee(349));Eo&30||dT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,b1(fT.bind(null,r,i,t),[t]),r.flags|=2048,Vc(9,hT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Rr(),e=Dt.identifierPrefix;if(rt){var n=as,r=os;n=(r&~(1<<32-ur(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Oc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=n4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},a4={readContext:Kn,useCallback:bT,useContext:Kn,useEffect:kv,useImperativeHandle:wT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:_T,useReducer:xp,useRef:gT,useState:function(){return xp(Lc)},useDebugValue:Av,useDeferredValue:function(t){var e=Qn();return ET(e,_t.memoizedState,t)},useTransition:function(){var t=xp(Lc)[0],e=Qn().memoizedState;return[t,e]},useMutableSource:cT,useSyncExternalStore:uT,useId:ST,unstable_isNewReconciler:!1},l4={readContext:Kn,useCallback:bT,useContext:Kn,useEffect:kv,useImperativeHandle:wT,useInsertionEffect:yT,useLayoutEffect:vT,useMemo:_T,useReducer:wp,useRef:gT,useState:function(){return wp(Lc)},useDebugValue:Av,useDeferredValue:function(t){var e=Qn();return _t===null?e.memoizedState=t:ET(e,_t.memoizedState,t)},useTransition:function(){var t=wp(Lc)[0],e=Qn().memoizedState;return[t,e]},useMutableSource:cT,useSyncExternalStore:uT,useId:ST,unstable_isNewReconciler:!1};function nr(t,e){if(t&&t.defaultProps){e=lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Mg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var If={isMounted:function(t){return(t=t._reactInternals)?Lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ln(),s=mi(t),i=us(r,s);i.payload=e,n!=null&&(i.callback=n),e=hi(t,i,s),e!==null&&(dr(e,t,s,r),Vd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ln(),s=mi(t),i=us(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=hi(t,i,s),e!==null&&(dr(e,t,s,r),Vd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),r=mi(t),s=us(n,r);s.tag=2,e!=null&&(s.callback=e),e=hi(t,s,r),e!==null&&(dr(e,t,r,n),Vd(e,t,r))}};function _1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ac(n,r)||!Ac(s,i):!0}function IT(t,e,n){var r=!1,s=Ei,i=e.contextType;return typeof i=="object"&&i!==null?i=Kn(i):(s=_n(e)?bo:en.current,r=e.contextTypes,i=(r=r!=null)?La(t,s):Ei),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=If,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function E1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&If.enqueueReplaceState(e,e.state,null)}function Og(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_v(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Kn(i):(i=_n(e)?bo:en.current,s.context=La(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Mg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&If.enqueueReplaceState(s,s.state,null),Eh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ua(t,e){try{var n="",r=e;do n+=OP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var c4=typeof WeakMap=="function"?WeakMap:Map;function kT(t,e,n){n=us(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ih||(Ih=!0,Gg=r),Lg(t,e)},n}function AT(t,e,n){n=us(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Lg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Lg(t,e),typeof r!="function"&&(fi===null?fi=new Set([this]):fi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function S1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new c4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=E4.bind(null,t,e,n),e.then(t,t))}function T1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function N1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=us(-1,1),e.tag=2,hi(n,e,1))),n.lanes|=1),t)}var u4=Es.ReactCurrentOwner,wn=!1;function sn(t,e,n,r){e.child=t===null?iT(e,null,n,r):Fa(e,t.child,n,r)}function C1(t,e,n,r,s){n=n.render;var i=e.ref;return ga(e,s),r=Cv(t,e,n,r,i,s),n=Iv(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gs(t,e,s)):(rt&&n&&pv(e),e.flags|=1,sn(t,e,r,s),e.child)}function I1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Vv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,jT(t,e,i,r,s)):(t=Hd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ac,n(o,r)&&t.ref===e.ref)return gs(t,e,s)}return e.flags|=1,t=pi(i,r),t.ref=e.ref,t.return=e,e.child=t}function jT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ac(i,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,gs(t,e,s)}return Vg(t,e,n,r,s)}function RT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ua,kn),kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(ua,kn),kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Qe(ua,kn),kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Qe(ua,kn),kn|=r;return sn(t,e,s,n),e.child}function PT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Vg(t,e,n,r,s){var i=_n(n)?bo:en.current;return i=La(e,i),ga(e,s),n=Cv(t,e,n,r,i,s),r=Iv(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gs(t,e,s)):(rt&&r&&pv(e),e.flags|=1,sn(t,e,n,s),e.child)}function k1(t,e,n,r,s){if(_n(n)){var i=!0;vh(e)}else i=!1;if(ga(e,s),e.stateNode===null)Ud(t,e),IT(e,n,r),Og(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Kn(u):(u=_n(n)?bo:en.current,u=La(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&E1(e,o,r,u),Bs=!1;var p=e.memoizedState;o.state=p,Eh(e,r,o,s),c=e.memoizedState,l!==r||p!==c||bn.current||Bs?(typeof h=="function"&&(Mg(e,n,h,r),c=e.memoizedState),(l=Bs||_1(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,aT(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:nr(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Kn(c):(c=_n(n)?bo:en.current,c=La(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&E1(e,o,r,c),Bs=!1,p=e.memoizedState,o.state=p,Eh(e,r,o,s);var E=e.memoizedState;l!==f||p!==E||bn.current||Bs?(typeof g=="function"&&(Mg(e,n,g,r),E=e.memoizedState),(u=Bs||_1(e,n,u,r,p,E,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Fg(t,e,n,r,i,s)}function Fg(t,e,n,r,s,i){PT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&m1(e,n,!1),gs(t,e,i);r=e.stateNode,u4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Fa(e,t.child,null,i),e.child=Fa(e,null,l,i)):sn(t,e,l,i),e.memoizedState=r.state,s&&m1(e,n,!0),e.child}function DT(t){var e=t.stateNode;e.pendingContext?f1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f1(t,e.context,!1),Ev(t,e.containerInfo)}function A1(t,e,n,r,s){return Va(),yv(s),e.flags|=256,sn(t,e,n,r),e.child}var zg={dehydrated:null,treeContext:null,retryLane:0};function Ug(t){return{baseLanes:t,cachePool:null,transitions:null}}function MT(t,e,n){var r=e.pendingProps,s=it.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Qe(it,s&1),t===null)return Pg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jf(o,r,0,null),t=yo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ug(n),e.memoizedState=zg,t):jv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return d4(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=pi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=pi(l,i):(i=yo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ug(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=zg,r}return i=t.child,t=i.sibling,r=pi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function jv(t,e){return e=jf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cd(t,e,n,r){return r!==null&&yv(r),Fa(e,t.child,null,n),t=jv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function d4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=bp(Error(ee(422))),cd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=jf({mode:"visible",children:r.children},s,0,null),i=yo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Fa(e,t.child,null,o),e.child.memoizedState=Ug(o),e.memoizedState=zg,i);if(!(e.mode&1))return cd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ee(419)),r=bp(i,r,void 0),cd(t,e,o,r)}if(l=(o&t.childLanes)!==0,wn||l){if(r=Dt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ps(t,s),dr(r,t,s,-1))}return Lv(),r=bp(Error(ee(421))),cd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=S4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Rn=di(s.nextSibling),Dn=e,rt=!0,or=null,t!==null&&($n[Bn++]=os,$n[Bn++]=as,$n[Bn++]=_o,os=t.id,as=t.overflow,_o=e),e=jv(e,r.children),e.flags|=4096,e)}function j1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dg(t.return,e,n)}function _p(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function OT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(sn(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&j1(t,n,e);else if(t.tag===19)j1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qe(it,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Sh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),_p(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Sh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}_p(e,!0,n,null,i);break;case"together":_p(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ud(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),So|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function h4(t,e,n){switch(e.tag){case 3:DT(e),Va();break;case 5:lT(e);break;case 1:_n(e.type)&&vh(e);break;case 4:Ev(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Qe(bh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?MT(t,e,n):(Qe(it,it.current&1),t=gs(t,e,n),t!==null?t.sibling:null);Qe(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Qe(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,RT(t,e,n)}return gs(t,e,n)}var LT,$g,VT,FT;LT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$g=function(){};VT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,lo(zr.current);var i=null;switch(n){case"input":s=ug(t,s),r=ug(t,r),i=[];break;case"select":s=lt({},s,{value:void 0}),r=lt({},r,{value:void 0}),i=[];break;case"textarea":s=fg(t,s),r=fg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gh)}pg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ec.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ec.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Je("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};FT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Hl(t,e){if(!rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function f4(t,e,n){var r=e.pendingProps;switch(gv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return _n(e.type)&&yh(),Gt(e),null;case 3:return r=e.stateNode,za(),et(bn),et(en),Tv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ad(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,or!==null&&(Yg(or),or=null))),$g(t,e),Gt(e),null;case 5:Sv(e);var s=lo(Mc.current);if(n=e.type,t!==null&&e.stateNode!=null)VT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Gt(e),null}if(t=lo(zr.current),ad(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Lr]=e,r[Pc]=i,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(s=0;s<Xl.length;s++)Je(Xl[s],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":zw(r,i),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Je("invalid",r);break;case"textarea":$w(r,i),Je("invalid",r)}pg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&od(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&od(r.textContent,l,t),s=["children",""+l]):Ec.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":Ju(r),Uw(r,i,!0);break;case"textarea":Ju(r),Bw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=fS(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Lr]=e,t[Pc]=r,LT(t,e,!1,!1),e.stateNode=t;e:{switch(o=gg(n,r),n){case"dialog":Je("cancel",t),Je("close",t),s=r;break;case"iframe":case"object":case"embed":Je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Xl.length;s++)Je(Xl[s],t);s=r;break;case"source":Je("error",t),s=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),s=r;break;case"details":Je("toggle",t),s=r;break;case"input":zw(t,r),s=ug(t,r),Je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=lt({},r,{value:void 0}),Je("invalid",t);break;case"textarea":$w(t,r),s=fg(t,r),Je("invalid",t);break;default:s=r}pg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?gS(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mS(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Sc(t,c):typeof c=="number"&&Sc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ec.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Je("scroll",t):c!=null&&tv(t,i,c,o))}switch(n){case"input":Ju(t),Uw(t,r,!1);break;case"textarea":Ju(t),Bw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_i(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ha(t,!!r.multiple,i,!1):r.defaultValue!=null&&ha(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=gh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)FT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=lo(Mc.current),lo(zr.current),ad(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lr]=e,(i=r.nodeValue!==n)&&(t=Dn,t!==null))switch(t.tag){case 3:od(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&od(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lr]=e,e.stateNode=r}return Gt(e),null;case 13:if(et(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(rt&&Rn!==null&&e.mode&1&&!(e.flags&128))rT(),Va(),e.flags|=98560,i=!1;else if(i=ad(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[Lr]=e}else Va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),i=!1}else or!==null&&(Yg(or),or=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?Tt===0&&(Tt=3):Lv())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return za(),$g(t,e),t===null&&jc(e.stateNode.containerInfo),Gt(e),null;case 10:return wv(e.type._context),Gt(e),null;case 17:return _n(e.type)&&yh(),Gt(e),null;case 19:if(et(it),i=e.memoizedState,i===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Hl(i,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Sh(t),o!==null){for(e.flags|=128,Hl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(it,it.current&1|2),e.child}t=t.sibling}i.tail!==null&&mt()>$a&&(e.flags|=128,r=!0,Hl(i,!1),e.lanes=4194304)}else{if(!r)if(t=Sh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Hl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rt)return Gt(e),null}else 2*mt()-i.renderingStartTime>$a&&n!==1073741824&&(e.flags|=128,r=!0,Hl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=mt(),e.sibling=null,n=it.current,Qe(it,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return Ov(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kn&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function m4(t,e){switch(gv(e),e.tag){case 1:return _n(e.type)&&yh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return za(),et(bn),et(en),Tv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sv(e),null;case 13:if(et(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(it),null;case 4:return za(),null;case 10:return wv(e.type._context),null;case 22:case 23:return Ov(),null;case 24:return null;default:return null}}var ud=!1,Jt=!1,p4=typeof WeakSet=="function"?WeakSet:Set,de=null;function ca(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ht(t,e,r)}else n.current=null}function Bg(t,e,n){try{n()}catch(r){ht(t,e,r)}}var R1=!1;function g4(t,e){if(Ng=fh,t=HS(),mv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Cg={focusedElem:t,selectionRange:n},fh=!1,de=e;de!==null;)if(e=de,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,de=t;else for(;de!==null;){e=de;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var x=E.memoizedProps,b=E.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:nr(e.type,x),b);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(C){ht(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}return E=R1,R1=!1,E}function cc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bg(e,n,i)}s=s.next}while(s!==r)}}function kf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function zT(t){var e=t.alternate;e!==null&&(t.alternate=null,zT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lr],delete e[Pc],delete e[Ag],delete e[JD],delete e[ZD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function UT(t){return t.tag===5||t.tag===3||t.tag===4}function P1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||UT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gh));else if(r!==4&&(t=t.child,t!==null))for(Wg(t,e,n),t=t.sibling;t!==null;)Wg(t,e,n),t=t.sibling}function qg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qg(t,e,n),t=t.sibling;t!==null;)qg(t,e,n),t=t.sibling}var Vt=null,ir=!1;function Os(t,e,n){for(n=n.child;n!==null;)$T(t,e,n),n=n.sibling}function $T(t,e,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(bf,n)}catch{}switch(n.tag){case 5:Jt||ca(n,e);case 6:var r=Vt,s=ir;Vt=null,Os(t,e,n),Vt=r,ir=s,Vt!==null&&(ir?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(ir?(t=Vt,n=n.stateNode,t.nodeType===8?pp(t.parentNode,n):t.nodeType===1&&pp(t,n),Ic(t)):pp(Vt,n.stateNode));break;case 4:r=Vt,s=ir,Vt=n.stateNode.containerInfo,ir=!0,Os(t,e,n),Vt=r,ir=s;break;case 0:case 11:case 14:case 15:if(!Jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bg(n,e,o),s=s.next}while(s!==r)}Os(t,e,n);break;case 1:if(!Jt&&(ca(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ht(n,e,l)}Os(t,e,n);break;case 21:Os(t,e,n);break;case 22:n.mode&1?(Jt=(r=Jt)||n.memoizedState!==null,Os(t,e,n),Jt=r):Os(t,e,n);break;default:Os(t,e,n)}}function D1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new p4),e.forEach(function(r){var s=T4.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function er(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Vt=l.stateNode,ir=!1;break e;case 3:Vt=l.stateNode.containerInfo,ir=!0;break e;case 4:Vt=l.stateNode.containerInfo,ir=!0;break e}l=l.return}if(Vt===null)throw Error(ee(160));$T(i,o,s),Vt=null,ir=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ht(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BT(e,t),e=e.sibling}function BT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(er(e,t),Ar(t),r&4){try{cc(3,t,t.return),kf(3,t)}catch(x){ht(t,t.return,x)}try{cc(5,t,t.return)}catch(x){ht(t,t.return,x)}}break;case 1:er(e,t),Ar(t),r&512&&n!==null&&ca(n,n.return);break;case 5:if(er(e,t),Ar(t),r&512&&n!==null&&ca(n,n.return),t.flags&32){var s=t.stateNode;try{Sc(s,"")}catch(x){ht(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&dS(s,i),gg(l,o);var u=gg(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?gS(s,f):h==="dangerouslySetInnerHTML"?mS(s,f):h==="children"?Sc(s,f):tv(s,h,f,u)}switch(l){case"input":dg(s,i);break;case"textarea":hS(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ha(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?ha(s,!!i.multiple,i.defaultValue,!0):ha(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pc]=i}catch(x){ht(t,t.return,x)}}break;case 6:if(er(e,t),Ar(t),r&4){if(t.stateNode===null)throw Error(ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){ht(t,t.return,x)}}break;case 3:if(er(e,t),Ar(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ic(e.containerInfo)}catch(x){ht(t,t.return,x)}break;case 4:er(e,t),Ar(t);break;case 13:er(e,t),Ar(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Dv=mt())),r&4&&D1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(u=Jt)||h,er(e,t),Jt=u):er(e,t),Ar(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(de=t,h=t.child;h!==null;){for(f=de=h;de!==null;){switch(p=de,g=p.child,p.tag){case 0:case 11:case 14:case 15:cc(4,p,p.return);break;case 1:ca(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(x){ht(r,n,x)}}break;case 5:ca(p,p.return);break;case 22:if(p.memoizedState!==null){O1(f);continue}}g!==null?(g.return=p,de=g):O1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=pS("display",o))}catch(x){ht(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){ht(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:er(e,t),Ar(t),r&4&&D1(t);break;case 21:break;default:er(e,t),Ar(t)}}function Ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(UT(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Sc(s,""),r.flags&=-33);var i=P1(t);qg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=P1(t);Wg(t,l,o);break;default:throw Error(ee(161))}}catch(c){ht(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function y4(t,e,n){de=t,HT(t)}function HT(t,e,n){for(var r=(t.mode&1)!==0;de!==null;){var s=de,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ud;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Jt;l=ud;var u=Jt;if(ud=o,(Jt=c)&&!u)for(de=s;de!==null;)o=de,c=o.child,o.tag===22&&o.memoizedState!==null?L1(s):c!==null?(c.return=o,de=c):L1(s);for(;i!==null;)de=i,HT(i),i=i.sibling;de=s,ud=l,Jt=u}M1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,de=i):M1(t)}}function M1(t){for(;de!==null;){var e=de;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||kf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&x1(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}x1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ic(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Jt||e.flags&512&&Hg(e)}catch(p){ht(e,e.return,p)}}if(e===t){de=null;break}if(n=e.sibling,n!==null){n.return=e.return,de=n;break}de=e.return}}function O1(t){for(;de!==null;){var e=de;if(e===t){de=null;break}var n=e.sibling;if(n!==null){n.return=e.return,de=n;break}de=e.return}}function L1(t){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{kf(4,e)}catch(c){ht(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ht(e,s,c)}}var i=e.return;try{Hg(e)}catch(c){ht(e,i,c)}break;case 5:var o=e.return;try{Hg(e)}catch(c){ht(e,o,c)}}}catch(c){ht(e,e.return,c)}if(e===t){de=null;break}var l=e.sibling;if(l!==null){l.return=e.return,de=l;break}de=e.return}}var v4=Math.ceil,Ch=Es.ReactCurrentDispatcher,Rv=Es.ReactCurrentOwner,Gn=Es.ReactCurrentBatchConfig,De=0,Dt=null,gt=null,zt=0,kn=0,ua=Vi(0),Tt=0,Fc=null,So=0,Af=0,Pv=0,uc=null,vn=null,Dv=0,$a=1/0,ss=null,Ih=!1,Gg=null,fi=null,dd=!1,ni=null,kh=0,dc=0,Kg=null,$d=-1,Bd=0;function ln(){return De&6?mt():$d!==-1?$d:$d=mt()}function mi(t){return t.mode&1?De&2&&zt!==0?zt&-zt:t4.transition!==null?(Bd===0&&(Bd=IS()),Bd):(t=$e,t!==0||(t=window.event,t=t===void 0?16:MS(t.type)),t):1}function dr(t,e,n,r){if(50<dc)throw dc=0,Kg=null,Error(ee(185));au(t,n,r),(!(De&2)||t!==Dt)&&(t===Dt&&(!(De&2)&&(Af|=n),Tt===4&&qs(t,zt)),En(t,r),n===1&&De===0&&!(e.mode&1)&&($a=mt()+500,Nf&&Fi()))}function En(t,e){var n=t.callbackNode;tD(t,e);var r=hh(t,t===Dt?zt:0);if(r===0)n!==null&&qw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qw(n),e===1)t.tag===0?e4(V1.bind(null,t)):eT(V1.bind(null,t)),YD(function(){!(De&6)&&Fi()}),n=null;else{switch(kS(r)){case 1:n=ov;break;case 4:n=NS;break;case 16:n=dh;break;case 536870912:n=CS;break;default:n=dh}n=JT(n,WT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function WT(t,e){if($d=-1,Bd=0,De&6)throw Error(ee(327));var n=t.callbackNode;if(ya()&&t.callbackNode!==n)return null;var r=hh(t,t===Dt?zt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ah(t,r);else{e=r;var s=De;De|=2;var i=GT();(Dt!==t||zt!==e)&&(ss=null,$a=mt()+500,go(t,e));do try{b4();break}catch(l){qT(t,l)}while(!0);xv(),Ch.current=i,De=s,gt!==null?e=0:(Dt=null,zt=0,e=Tt)}if(e!==0){if(e===2&&(s=bg(t),s!==0&&(r=s,e=Qg(t,s))),e===1)throw n=Fc,go(t,0),qs(t,r),En(t,mt()),n;if(e===6)qs(t,r);else{if(s=t.current.alternate,!(r&30)&&!x4(s)&&(e=Ah(t,r),e===2&&(i=bg(t),i!==0&&(r=i,e=Qg(t,i))),e===1))throw n=Fc,go(t,0),qs(t,r),En(t,mt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:ro(t,vn,ss);break;case 3:if(qs(t,r),(r&130023424)===r&&(e=Dv+500-mt(),10<e)){if(hh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ln(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=kg(ro.bind(null,t,vn,ss),e);break}ro(t,vn,ss);break;case 4:if(qs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ur(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*v4(r/1960))-r,10<r){t.timeoutHandle=kg(ro.bind(null,t,vn,ss),r);break}ro(t,vn,ss);break;case 5:ro(t,vn,ss);break;default:throw Error(ee(329))}}}return En(t,mt()),t.callbackNode===n?WT.bind(null,t):null}function Qg(t,e){var n=uc;return t.current.memoizedState.isDehydrated&&(go(t,e).flags|=256),t=Ah(t,e),t!==2&&(e=vn,vn=n,e!==null&&Yg(e)),t}function Yg(t){vn===null?vn=t:vn.push.apply(vn,t)}function x4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!yr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function qs(t,e){for(e&=~Pv,e&=~Af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ur(e),r=1<<n;t[n]=-1,e&=~r}}function V1(t){if(De&6)throw Error(ee(327));ya();var e=hh(t,0);if(!(e&1))return En(t,mt()),null;var n=Ah(t,e);if(t.tag!==0&&n===2){var r=bg(t);r!==0&&(e=r,n=Qg(t,r))}if(n===1)throw n=Fc,go(t,0),qs(t,e),En(t,mt()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ro(t,vn,ss),En(t,mt()),null}function Mv(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&($a=mt()+500,Nf&&Fi())}}function To(t){ni!==null&&ni.tag===0&&!(De&6)&&ya();var e=De;De|=1;var n=Gn.transition,r=$e;try{if(Gn.transition=null,$e=1,t)return t()}finally{$e=r,Gn.transition=n,De=e,!(De&6)&&Fi()}}function Ov(){kn=ua.current,et(ua)}function go(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QD(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(gv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yh();break;case 3:za(),et(bn),et(en),Tv();break;case 5:Sv(r);break;case 4:za();break;case 13:et(it);break;case 19:et(it);break;case 10:wv(r.type._context);break;case 22:case 23:Ov()}n=n.return}if(Dt=t,gt=t=pi(t.current,null),zt=kn=e,Tt=0,Fc=null,Pv=Af=So=0,vn=uc=null,ao!==null){for(e=0;e<ao.length;e++)if(n=ao[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ao=null}return t}function qT(t,e){do{var n=gt;try{if(xv(),Fd.current=Nh,Th){for(var r=at.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Th=!1}if(Eo=0,jt=_t=at=null,lc=!1,Oc=0,Rv.current=null,n===null||n.return===null){Tt=1,Fc=e,gt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=zt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=T1(o);if(g!==null){g.flags&=-257,N1(g,o,l,i,e),g.mode&1&&S1(i,u,e),e=g,c=u;var E=e.updateQueue;if(E===null){var x=new Set;x.add(c),e.updateQueue=x}else E.add(c);break e}else{if(!(e&1)){S1(i,u,e),Lv();break e}c=Error(ee(426))}}else if(rt&&l.mode&1){var b=T1(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),N1(b,o,l,i,e),yv(Ua(c,l));break e}}i=c=Ua(c,l),Tt!==4&&(Tt=2),uc===null?uc=[i]:uc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=kT(i,c,e);v1(i,w);break e;case 1:l=c;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(fi===null||!fi.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=AT(i,l,e);v1(i,C);break e}}i=i.return}while(i!==null)}QT(n)}catch(R){e=R,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(!0)}function GT(){var t=Ch.current;return Ch.current=Nh,t===null?Nh:t}function Lv(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Dt===null||!(So&268435455)&&!(Af&268435455)||qs(Dt,zt)}function Ah(t,e){var n=De;De|=2;var r=GT();(Dt!==t||zt!==e)&&(ss=null,go(t,e));do try{w4();break}catch(s){qT(t,s)}while(!0);if(xv(),De=n,Ch.current=r,gt!==null)throw Error(ee(261));return Dt=null,zt=0,Tt}function w4(){for(;gt!==null;)KT(gt)}function b4(){for(;gt!==null&&!qP();)KT(gt)}function KT(t){var e=XT(t.alternate,t,kn);t.memoizedProps=t.pendingProps,e===null?QT(t):gt=e,Rv.current=null}function QT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=m4(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,gt=null;return}}else if(n=f4(n,e,kn),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);Tt===0&&(Tt=5)}function ro(t,e,n){var r=$e,s=Gn.transition;try{Gn.transition=null,$e=1,_4(t,e,n,r)}finally{Gn.transition=s,$e=r}return null}function _4(t,e,n,r){do ya();while(ni!==null);if(De&6)throw Error(ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(nD(t,i),t===Dt&&(gt=Dt=null,zt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dd||(dd=!0,JT(dh,function(){return ya(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gn.transition,Gn.transition=null;var o=$e;$e=1;var l=De;De|=4,Rv.current=null,g4(t,n),BT(n,t),$D(Cg),fh=!!Ng,Cg=Ng=null,t.current=n,y4(n),GP(),De=l,$e=o,Gn.transition=i}else t.current=n;if(dd&&(dd=!1,ni=t,kh=s),i=t.pendingLanes,i===0&&(fi=null),YP(n.stateNode),En(t,mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ih)throw Ih=!1,t=Gg,Gg=null,t;return kh&1&&t.tag!==0&&ya(),i=t.pendingLanes,i&1?t===Kg?dc++:(dc=0,Kg=t):dc=0,Fi(),null}function ya(){if(ni!==null){var t=kS(kh),e=Gn.transition,n=$e;try{if(Gn.transition=null,$e=16>t?16:t,ni===null)var r=!1;else{if(t=ni,ni=null,kh=0,De&6)throw Error(ee(331));var s=De;for(De|=4,de=t.current;de!==null;){var i=de,o=i.child;if(de.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(de=u;de!==null;){var h=de;switch(h.tag){case 0:case 11:case 15:cc(8,h,i)}var f=h.child;if(f!==null)f.return=h,de=f;else for(;de!==null;){h=de;var p=h.sibling,g=h.return;if(zT(h),h===u){de=null;break}if(p!==null){p.return=g,de=p;break}de=g}}}var E=i.alternate;if(E!==null){var x=E.child;if(x!==null){E.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}de=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,de=o;else e:for(;de!==null;){if(i=de,i.flags&2048)switch(i.tag){case 0:case 11:case 15:cc(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,de=w;break e}de=i.return}}var v=t.current;for(de=v;de!==null;){o=de;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,de=_;else e:for(o=v;de!==null;){if(l=de,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kf(9,l)}}catch(R){ht(l,l.return,R)}if(l===o){de=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,de=C;break e}de=l.return}}if(De=s,Fi(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(bf,t)}catch{}r=!0}return r}finally{$e=n,Gn.transition=e}}return!1}function F1(t,e,n){e=Ua(n,e),e=kT(t,e,1),t=hi(t,e,1),e=ln(),t!==null&&(au(t,1,e),En(t,e))}function ht(t,e,n){if(t.tag===3)F1(t,t,n);else for(;e!==null;){if(e.tag===3){F1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fi===null||!fi.has(r))){t=Ua(n,t),t=AT(e,t,1),e=hi(e,t,1),t=ln(),e!==null&&(au(e,1,t),En(e,t));break}}e=e.return}}function E4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ln(),t.pingedLanes|=t.suspendedLanes&n,Dt===t&&(zt&n)===n&&(Tt===4||Tt===3&&(zt&130023424)===zt&&500>mt()-Dv?go(t,0):Pv|=n),En(t,e)}function YT(t,e){e===0&&(t.mode&1?(e=td,td<<=1,!(td&130023424)&&(td=4194304)):e=1);var n=ln();t=ps(t,e),t!==null&&(au(t,e,n),En(t,n))}function S4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),YT(t,n)}function T4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),YT(t,n)}var XT;XT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,h4(t,e,n);wn=!!(t.flags&131072)}else wn=!1,rt&&e.flags&1048576&&tT(e,wh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ud(t,e),t=e.pendingProps;var s=La(e,en.current);ga(e,n),s=Cv(null,e,r,t,s,n);var i=Iv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(r)?(i=!0,vh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_v(e),s.updater=If,e.stateNode=s,s._reactInternals=e,Og(e,r,t,n),e=Fg(null,e,r,!0,i,n)):(e.tag=0,rt&&i&&pv(e),sn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ud(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=C4(r),t=nr(r,t),s){case 0:e=Vg(null,e,r,t,n);break e;case 1:e=k1(null,e,r,t,n);break e;case 11:e=C1(null,e,r,t,n);break e;case 14:e=I1(null,e,r,nr(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nr(r,s),Vg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nr(r,s),k1(t,e,r,s,n);case 3:e:{if(DT(e),t===null)throw Error(ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,aT(t,e),Eh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ua(Error(ee(423)),e),e=A1(t,e,r,n,s);break e}else if(r!==s){s=Ua(Error(ee(424)),e),e=A1(t,e,r,n,s);break e}else for(Rn=di(e.stateNode.containerInfo.firstChild),Dn=e,rt=!0,or=null,n=iT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Va(),r===s){e=gs(t,e,n);break e}sn(t,e,r,n)}e=e.child}return e;case 5:return lT(e),t===null&&Pg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ig(r,s)?o=null:i!==null&&Ig(r,i)&&(e.flags|=32),PT(t,e),sn(t,e,o,n),e.child;case 6:return t===null&&Pg(e),null;case 13:return MT(t,e,n);case 4:return Ev(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Fa(e,null,r,n):sn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nr(r,s),C1(t,e,r,s,n);case 7:return sn(t,e,e.pendingProps,n),e.child;case 8:return sn(t,e,e.pendingProps.children,n),e.child;case 12:return sn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Qe(bh,r._currentValue),r._currentValue=o,i!==null)if(yr(i.value,o)){if(i.children===s.children&&!bn.current){e=gs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=us(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Dg(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ee(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Dg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}sn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ga(e,n),s=Kn(s),r=r(s),e.flags|=1,sn(t,e,r,n),e.child;case 14:return r=e.type,s=nr(r,e.pendingProps),s=nr(r.type,s),I1(t,e,r,s,n);case 15:return jT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nr(r,s),Ud(t,e),e.tag=1,_n(r)?(t=!0,vh(e)):t=!1,ga(e,n),IT(e,r,s),Og(e,r,s,n),Fg(null,e,r,!0,t,n);case 19:return OT(t,e,n);case 22:return RT(t,e,n)}throw Error(ee(156,e.tag))};function JT(t,e){return TS(t,e)}function N4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,r){return new N4(t,e,n,r)}function Vv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function C4(t){if(typeof t=="function")return Vv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rv)return 11;if(t===sv)return 14}return 2}function pi(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Vv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ea:return yo(n.children,s,i,e);case nv:o=8,s|=8;break;case og:return t=Wn(12,n,e,s|2),t.elementType=og,t.lanes=i,t;case ag:return t=Wn(13,n,e,s),t.elementType=ag,t.lanes=i,t;case lg:return t=Wn(19,n,e,s),t.elementType=lg,t.lanes=i,t;case lS:return jf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case oS:o=10;break e;case aS:o=9;break e;case rv:o=11;break e;case sv:o=14;break e;case $s:o=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Wn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function yo(t,e,n,r){return t=Wn(7,t,r,e),t.lanes=n,t}function jf(t,e,n,r){return t=Wn(22,t,r,e),t.elementType=lS,t.lanes=n,t.stateNode={isHidden:!1},t}function Ep(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function Sp(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function I4(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sp(0),this.expirationTimes=sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Fv(t,e,n,r,s,i,o,l,c){return t=new I4(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_v(i),t}function k4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ZT(t){if(!t)return Ei;t=t._reactInternals;e:{if(Lo(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(_n(n))return ZS(t,n,e)}return e}function eN(t,e,n,r,s,i,o,l,c){return t=Fv(n,r,!0,t,s,i,o,l,c),t.context=ZT(null),n=t.current,r=ln(),s=mi(n),i=us(r,s),i.callback=e??null,hi(n,i,s),t.current.lanes=s,au(t,s,r),En(t,r),t}function Rf(t,e,n,r){var s=e.current,i=ln(),o=mi(s);return n=ZT(n),e.context===null?e.context=n:e.pendingContext=n,e=us(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hi(s,e,o),t!==null&&(dr(t,s,o,i),Vd(t,s,o)),o}function jh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function z1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function zv(t,e){z1(t,e),(t=t.alternate)&&z1(t,e)}function A4(){return null}var tN=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uv(t){this._internalRoot=t}Pf.prototype.render=Uv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Rf(t,e,null,null)};Pf.prototype.unmount=Uv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;To(function(){Rf(null,t,null,null)}),e[ms]=null}};function Pf(t){this._internalRoot=t}Pf.prototype.unstable_scheduleHydration=function(t){if(t){var e=RS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ws.length&&e!==0&&e<Ws[n].priority;n++);Ws.splice(n,0,t),n===0&&DS(t)}};function $v(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function U1(){}function j4(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=jh(o);i.call(u)}}var o=eN(e,r,t,0,null,!1,!1,"",U1);return t._reactRootContainer=o,t[ms]=o.current,jc(t.nodeType===8?t.parentNode:t),To(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=jh(c);l.call(u)}}var c=Fv(t,0,!1,null,null,!1,!1,"",U1);return t._reactRootContainer=c,t[ms]=c.current,jc(t.nodeType===8?t.parentNode:t),To(function(){Rf(e,c,n,r)}),c}function Mf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=jh(o);l.call(c)}}Rf(e,o,t,s)}else o=j4(n,e,t,s,r);return jh(o)}AS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yl(e.pendingLanes);n!==0&&(av(e,n|1),En(e,mt()),!(De&6)&&($a=mt()+500,Fi()))}break;case 13:To(function(){var r=ps(t,1);if(r!==null){var s=ln();dr(r,t,1,s)}}),zv(t,1)}};lv=function(t){if(t.tag===13){var e=ps(t,134217728);if(e!==null){var n=ln();dr(e,t,134217728,n)}zv(t,134217728)}};jS=function(t){if(t.tag===13){var e=mi(t),n=ps(t,e);if(n!==null){var r=ln();dr(n,t,e,r)}zv(t,e)}};RS=function(){return $e};PS=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};vg=function(t,e,n){switch(e){case"input":if(dg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Tf(r);if(!s)throw Error(ee(90));uS(r),dg(r,s)}}}break;case"textarea":hS(t,n);break;case"select":e=n.value,e!=null&&ha(t,!!n.multiple,e,!1)}};xS=Mv;wS=To;var R4={usingClientEntryPoint:!1,Events:[cu,sa,Tf,yS,vS,Mv]},Wl={findFiberByHostInstance:oo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P4={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ES(t),t===null?null:t.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||A4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{bf=hd.inject(P4),Fr=hd}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R4;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$v(e))throw Error(ee(200));return k4(t,e,null,n)};Ln.createRoot=function(t,e){if(!$v(t))throw Error(ee(299));var n=!1,r="",s=tN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Fv(t,1,!1,null,null,n,!1,r,s),t[ms]=e.current,jc(t.nodeType===8?t.parentNode:t),new Uv(e)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=ES(e),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return To(t)};Ln.hydrate=function(t,e,n){if(!Df(e))throw Error(ee(200));return Mf(null,t,e,!0,n)};Ln.hydrateRoot=function(t,e,n){if(!$v(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=tN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=eN(e,null,t,1,n??null,s,!1,i,o),t[ms]=e.current,jc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Pf(e)};Ln.render=function(t,e,n){if(!Df(e))throw Error(ee(200));return Mf(null,t,e,!1,n)};Ln.unmountComponentAtNode=function(t){if(!Df(t))throw Error(ee(40));return t._reactRootContainer?(To(function(){Mf(null,null,t,!1,function(){t._reactRootContainer=null,t[ms]=null})}),!0):!1};Ln.unstable_batchedUpdates=Mv;Ln.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Df(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Mf(t,e,n,!1,r)};Ln.version="18.3.1-next-f1338f8080-20240426";function nN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nN)}catch(t){console.error(t)}}nN(),nS.exports=Ln;var qn=nS.exports;const D4=BE(qn);var rN,$1=qn;rN=$1.createRoot,$1.hydrateRoot;function M4(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var sN={exports:{}},iN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=m;function O4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var L4=typeof Object.is=="function"?Object.is:O4,V4=Ba.useState,F4=Ba.useEffect,z4=Ba.useLayoutEffect,U4=Ba.useDebugValue;function $4(t,e){var n=e(),r=V4({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return z4(function(){s.value=n,s.getSnapshot=e,Tp(s)&&i({inst:s})},[t,n,e]),F4(function(){return Tp(s)&&i({inst:s}),t(function(){Tp(s)&&i({inst:s})})},[t]),U4(n),n}function Tp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!L4(t,n)}catch{return!0}}function B4(t,e){return e()}var H4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?B4:$4;iN.useSyncExternalStore=Ba.useSyncExternalStore!==void 0?Ba.useSyncExternalStore:H4;sN.exports=iN;var W4=sN.exports;const q4=eS.useInsertionEffect,G4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",K4=G4?m.useLayoutEffect:m.useEffect,Q4=q4||K4,oN=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return Q4(()=>{e[0]=t}),e[1]},Y4="popstate",Bv="pushState",Hv="replaceState",X4="hashchange",B1=[Y4,Bv,Hv,X4],J4=t=>{for(const e of B1)addEventListener(e,t);return()=>{for(const e of B1)removeEventListener(e,t)}},aN=(t,e)=>W4.useSyncExternalStore(J4,t,e),Z4=()=>location.search,eM=({ssrSearch:t=""}={})=>aN(Z4,()=>t),H1=()=>location.pathname,tM=({ssrPath:t}={})=>aN(H1,t?()=>t:H1),nM=(t,{replace:e=!1,state:n=null}={})=>history[e?Hv:Bv](n,"",t),rM=(t={})=>[tM(t),nM],W1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[W1]>"u"){for(const t of[Bv,Hv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,W1,{value:!0})}const sM=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",lN=(t="")=>t==="/"?"":t,iM=(t,e)=>t[0]==="~"?t.slice(1):lN(e)+t,oM=(t="",e)=>sM(q1(lN(t)),q1(e)),q1=t=>{try{return decodeURI(t)}catch{return t}},cN={hook:rM,searchHook:eM,parser:M4,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},uN=m.createContext(cN),du=()=>m.useContext(uN),dN={},hN=m.createContext(dN),aM=()=>m.useContext(hN),Of=t=>{const[e,n]=t.hook(t);return[oM(t.base,e),oN((r,s)=>n(iM(r,t.base),s))]},Wv=()=>Of(du()),fN=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},mN=({children:t,...e})=>{var h,f;const n=du(),r=e.hook?cN:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in r){const g=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&g!==u[p]&&(l.current=u={...u}),u[p]=g,g!==r[p]&&(s=u)}return m.createElement(uN.Provider,{value:s,children:t})},G1=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,lM=t=>{let e=m.useRef(dN),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},jr=({path:t,nest:e,match:n,...r})=>{const s=du(),[i]=Of(s),[o,l,c]=n??fN(s.parser,t,i,e),u=lM({...aM(),...l});if(!o)return null;const h=c?m.createElement(mN,{base:c},G1(r,u)):G1(r,u);return m.createElement(hN.Provider,{value:u,children:h})},Si=m.forwardRef((t,e)=>{const n=du(),[r,s]=Of(n),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...g}=t,E=oN(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(l==null||l(b),b.defaultPrevented||(b.preventDefault(),s(o,t)))}),x=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:E,href:x}):m.createElement("a",{...g,onClick:E,href:x,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),pN=t=>Array.isArray(t)?t.flatMap(e=>pN(e&&e.type===m.Fragment?e.props.children:e)):[t],cM=({children:t,location:e})=>{const n=du(),[r]=Of(n);for(const s of pN(t)){let i=0;if(m.isValidElement(s)&&(i=fN(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var Lf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vf=typeof window>"u"||"Deno"in globalThis;function rr(){}function uM(t,e){return typeof t=="function"?t(e):t}function dM(t){return typeof t=="number"&&t>=0&&t!==1/0}function hM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function K1(t,e){return typeof t=="function"?t(e):t}function fM(t,e){return typeof t=="function"?t(e):t}function Q1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==qv(o,e.options))return!1}else if(!Uc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function Y1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(zc(e.options.mutationKey)!==zc(i))return!1}else if(!Uc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function qv(t,e){return((e==null?void 0:e.queryKeyHashFn)||zc)(t)}function zc(t){return JSON.stringify(t,(e,n)=>Xg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Uc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Uc(t[n],e[n])):!1}function gN(t,e){if(t===e)return t;const n=X1(t)&&X1(e);if(n||Xg(t)&&Xg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=gN(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function X1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Xg(t){if(!J1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!J1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function J1(t){return Object.prototype.toString.call(t)==="[object Object]"}function mM(t){return new Promise(e=>{setTimeout(e,t)})}function pM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?gN(t,e):e}function gM(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function yM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Gv=Symbol();function yN(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Gv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ho,Ys,Ca,ME,vM=(ME=class extends Lf{constructor(){super();Ve(this,ho);Ve(this,Ys);Ve(this,Ca);Te(this,Ca,e=>{if(!Vf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,Ys)||this.setEventListener(Q(this,Ca))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Ys))==null||e.call(this),Te(this,Ys,void 0))}setEventListener(e){var n;Te(this,Ca,e),(n=Q(this,Ys))==null||n.call(this),Te(this,Ys,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,ho)!==e&&(Te(this,ho,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,ho)=="boolean"?Q(this,ho):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ho=new WeakMap,Ys=new WeakMap,Ca=new WeakMap,ME),vN=new vM,Ia,Xs,ka,OE,xM=(OE=class extends Lf{constructor(){super();Ve(this,Ia,!0);Ve(this,Xs);Ve(this,ka);Te(this,ka,e=>{if(!Vf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,Xs)||this.setEventListener(Q(this,ka))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,Xs))==null||e.call(this),Te(this,Xs,void 0))}setEventListener(e){var n;Te(this,ka,e),(n=Q(this,Xs))==null||n.call(this),Te(this,Xs,e(this.setOnline.bind(this)))}setOnline(e){Q(this,Ia)!==e&&(Te(this,Ia,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,Ia)}},Ia=new WeakMap,Xs=new WeakMap,ka=new WeakMap,OE),Rh=new xM;function wM(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function bM(t){return Math.min(1e3*2**t,3e4)}function xN(t){return(t??"online")==="online"?Rh.isOnline():!0}var wN=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Np(t){return t instanceof wN}function bN(t){let e=!1,n=0,r=!1,s;const i=wM(),o=x=>{var b;r||(p(new wN(x)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>vN.isFocused()&&(t.networkMode==="always"||Rh.isOnline())&&t.canRun(),h=()=>xN(t.networkMode)&&t.canRun(),f=x=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,x),s==null||s(),i.resolve(x))},p=x=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,x),s==null||s(),i.reject(x))},g=()=>new Promise(x=>{var b;s=w=>{(r||u())&&x(w)},(b=t.onPause)==null||b.call(t)}).then(()=>{var x;s=void 0,r||(x=t.onContinue)==null||x.call(t)}),E=()=>{if(r)return;let x;const b=n===0?t.initialPromise:void 0;try{x=b??t.fn()}catch(w){x=Promise.reject(w)}Promise.resolve(x).then(f).catch(w=>{var D;if(r)return;const v=t.retry??(Vf?0:3),_=t.retryDelay??bM,C=typeof _=="function"?_(n,w):_,R=v===!0||typeof v=="number"&&n<v||typeof v=="function"&&v(n,w);if(e||!R){p(w);return}n++,(D=t.onFail)==null||D.call(t,n,w),mM(C).then(()=>u()?void 0:g()).then(()=>{e?p(w):E()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?E():g().then(E),i)}}function _M(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var an=_M(),fo,LE,_N=(LE=class{constructor(){Ve(this,fo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),dM(this.gcTime)&&Te(this,fo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Vf?1/0:5*60*1e3))}clearGcTimeout(){Q(this,fo)&&(clearTimeout(Q(this,fo)),Te(this,fo,void 0))}},fo=new WeakMap,LE),Aa,ja,zn,Qt,su,mo,sr,rs,VE,EM=(VE=class extends _N{constructor(n){super();Ve(this,sr);Ve(this,Aa);Ve(this,ja);Ve(this,zn);Ve(this,Qt);Ve(this,su);Ve(this,mo);Te(this,mo,!1),Te(this,su,n.defaultOptions),this.setOptions(n.options),this.observers=[],Te(this,zn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Te(this,Aa,TM(this.options)),this.state=n.state??Q(this,Aa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,Qt))==null?void 0:n.promise}setOptions(n){this.options={...Q(this,su),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,zn).remove(this)}setData(n,r){const s=pM(this.state.data,n,this.options);return Wt(this,sr,rs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Wt(this,sr,rs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Q(this,Qt))==null?void 0:s.promise;return(i=Q(this,Qt))==null||i.cancel(n),r?r.then(rr).catch(rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,Aa))}isActive(){return this.observers.some(n=>fM(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!hM(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Qt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Qt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,zn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,Qt)&&(Q(this,mo)?Q(this,Qt).cancel({revert:!0}):Q(this,Qt).cancelRetry()),this.scheduleGc()),Q(this,zn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Wt(this,sr,rs).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,Qt))return Q(this,Qt).continueRetry(),Q(this,Qt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(g=>g.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Te(this,mo,!0),s.signal)})},o=()=>{const p=yN(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),Te(this,mo,!1),this.options.persister?this.options.persister(p,g,this):p(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Te(this,ja,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Wt(this,sr,rs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var g,E,x,b;Np(p)&&p.silent||Wt(this,sr,rs).call(this,{type:"error",error:p}),Np(p)||((E=(g=Q(this,zn).config).onError)==null||E.call(g,p,this),(b=(x=Q(this,zn).config).onSettled)==null||b.call(x,this.state.data,p,this)),this.scheduleGc()};return Te(this,Qt,bN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var g,E,x,b;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(w){c(w);return}(E=(g=Q(this,zn).config).onSuccess)==null||E.call(g,p,this),(b=(x=Q(this,zn).config).onSettled)==null||b.call(x,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,g)=>{Wt(this,sr,rs).call(this,{type:"failed",failureCount:p,error:g})},onPause:()=>{Wt(this,sr,rs).call(this,{type:"pause"})},onContinue:()=>{Wt(this,sr,rs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Q(this,Qt).start()}},Aa=new WeakMap,ja=new WeakMap,zn=new WeakMap,Qt=new WeakMap,su=new WeakMap,mo=new WeakMap,sr=new WeakSet,rs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...SM(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Np(i)&&i.revert&&Q(this,ja)?{...Q(this,ja),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),an.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,zn).notify({query:this,type:"updated",action:n})})},VE);function SM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:xN(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function TM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Dr,FE,NM=(FE=class extends Lf{constructor(e={}){super();Ve(this,Dr);this.config=e,Te(this,Dr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??qv(s,n);let o=this.get(i);return o||(o=new EM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){Q(this,Dr).has(e.queryHash)||(Q(this,Dr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,Dr).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,Dr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){an.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,Dr).get(e)}getAll(){return[...Q(this,Dr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Q1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Q1(e,r)):n}notify(e){an.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){an.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){an.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Dr=new WeakMap,FE),Mr,rn,po,Or,zs,zE,CM=(zE=class extends _N{constructor(n){super();Ve(this,Or);Ve(this,Mr);Ve(this,rn);Ve(this,po);this.mutationId=n.mutationId,Te(this,rn,n.mutationCache),Te(this,Mr,[]),this.state=n.state||IM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,Mr).includes(n)||(Q(this,Mr).push(n),this.clearGcTimeout(),Q(this,rn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Te(this,Mr,Q(this,Mr).filter(r=>r!==n)),this.scheduleGc(),Q(this,rn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,Mr).length||(this.state.status==="pending"?this.scheduleGc():Q(this,rn).remove(this))}continue(){var n;return((n=Q(this,po))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,l,c,u,h,f,p,g,E,x,b,w,v,_,C,R,D,N,T;Te(this,po,bN({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(I,j)=>{Wt(this,Or,zs).call(this,{type:"failed",failureCount:I,error:j})},onPause:()=>{Wt(this,Or,zs).call(this,{type:"pause"})},onContinue:()=>{Wt(this,Or,zs).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,rn).canRun(this)}));const r=this.state.status==="pending",s=!Q(this,po).canStart();try{if(!r){Wt(this,Or,zs).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=Q(this,rn).config).onMutate)==null?void 0:o.call(i,n,this));const j=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));j!==this.state.context&&Wt(this,Or,zs).call(this,{type:"pending",context:j,variables:n,isPaused:s})}const I=await Q(this,po).start();return await((h=(u=Q(this,rn).config).onSuccess)==null?void 0:h.call(u,I,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,I,n,this.state.context)),await((E=(g=Q(this,rn).config).onSettled)==null?void 0:E.call(g,I,null,this.state.variables,this.state.context,this)),await((b=(x=this.options).onSettled)==null?void 0:b.call(x,I,null,n,this.state.context)),Wt(this,Or,zs).call(this,{type:"success",data:I}),I}catch(I){try{throw await((v=(w=Q(this,rn).config).onError)==null?void 0:v.call(w,I,n,this.state.context,this)),await((C=(_=this.options).onError)==null?void 0:C.call(_,I,n,this.state.context)),await((D=(R=Q(this,rn).config).onSettled)==null?void 0:D.call(R,void 0,I,this.state.variables,this.state.context,this)),await((T=(N=this.options).onSettled)==null?void 0:T.call(N,void 0,I,n,this.state.context)),I}finally{Wt(this,Or,zs).call(this,{type:"error",error:I})}}finally{Q(this,rn).runNext(this)}}},Mr=new WeakMap,rn=new WeakMap,po=new WeakMap,Or=new WeakSet,zs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),an.batch(()=>{Q(this,Mr).forEach(s=>{s.onMutationUpdate(n)}),Q(this,rn).notify({mutation:this,type:"updated",action:n})})},zE);function IM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var In,iu,UE,kM=(UE=class extends Lf{constructor(e={}){super();Ve(this,In);Ve(this,iu);this.config=e,Te(this,In,new Map),Te(this,iu,Date.now())}build(e,n,r){const s=new CM({mutationCache:this,mutationId:++Qu(this,iu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=fd(e),r=Q(this,In).get(n)??[];r.push(e),Q(this,In).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=fd(e);if(Q(this,In).has(n)){const s=(r=Q(this,In).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?Q(this,In).delete(n):Q(this,In).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=Q(this,In).get(fd(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=Q(this,In).get(fd(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){an.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Q(this,In).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Y1(n,r))}findAll(e={}){return this.getAll().filter(n=>Y1(e,n))}notify(e){an.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return an.batch(()=>Promise.all(e.map(n=>n.continue().catch(rr))))}},In=new WeakMap,iu=new WeakMap,UE);function fd(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function Z1(t){return{onFetch:(e,n)=>{var h,f,p,g,E;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((E=e.state.data)==null?void 0:E.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let x=!1;const b=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},w=yN(e.options,e.fetchOptions),v=async(_,C,R)=>{if(x)return Promise.reject();if(C==null&&_.pages.length)return Promise.resolve(_);const D={queryKey:e.queryKey,pageParam:C,direction:R?"backward":"forward",meta:e.options.meta};b(D);const N=await w(D),{maxPages:T}=e.options,I=R?yM:gM;return{pages:I(_.pages,N,T),pageParams:I(_.pageParams,C,T)}};if(s&&i.length){const _=s==="backward",C=_?AM:eb,R={pages:i,pageParams:o},D=C(r,R);l=await v(R,D,_)}else{const _=t??i.length;do{const C=c===0?o[0]??r.initialPageParam:eb(r,l);if(c>0&&C==null)break;l=await v(l,C),c++}while(c<_)}return l};e.options.persister?e.fetchFn=()=>{var x,b;return(b=(x=e.options).persister)==null?void 0:b.call(x,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function eb(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function AM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var dt,Js,Zs,Ra,Pa,ei,Da,Ma,$E,jM=($E=class{constructor(t={}){Ve(this,dt);Ve(this,Js);Ve(this,Zs);Ve(this,Ra);Ve(this,Pa);Ve(this,ei);Ve(this,Da);Ve(this,Ma);Te(this,dt,t.queryCache||new NM),Te(this,Js,t.mutationCache||new kM),Te(this,Zs,t.defaultOptions||{}),Te(this,Ra,new Map),Te(this,Pa,new Map),Te(this,ei,0)}mount(){Qu(this,ei)._++,Q(this,ei)===1&&(Te(this,Da,vN.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,dt).onFocus())})),Te(this,Ma,Rh.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,dt).onOnline())})))}unmount(){var t,e;Qu(this,ei)._--,Q(this,ei)===0&&((t=Q(this,Da))==null||t.call(this),Te(this,Da,void 0),(e=Q(this,Ma))==null||e.call(this),Te(this,Ma,void 0))}isFetching(t){return Q(this,dt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,Js).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,dt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=Q(this,dt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(K1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return Q(this,dt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,dt).get(r.queryHash),i=s==null?void 0:s.state.data,o=uM(e,i);if(o!==void 0)return Q(this,dt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return an.batch(()=>Q(this,dt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,dt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,dt);an.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,dt),r={type:"active",...t};return an.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=an.batch(()=>Q(this,dt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(rr).catch(rr)}invalidateQueries(t={},e={}){return an.batch(()=>{if(Q(this,dt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=an.batch(()=>Q(this,dt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(rr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(rr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,dt).build(this,e);return n.isStaleByTime(K1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(rr).catch(rr)}fetchInfiniteQuery(t){return t.behavior=Z1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(rr).catch(rr)}ensureInfiniteQueryData(t){return t.behavior=Z1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Rh.isOnline()?Q(this,Js).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,dt)}getMutationCache(){return Q(this,Js)}getDefaultOptions(){return Q(this,Zs)}setDefaultOptions(t){Te(this,Zs,t)}setQueryDefaults(t,e){Q(this,Ra).set(zc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,Ra).values()];let n={};return e.forEach(r=>{Uc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){Q(this,Pa).set(zc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,Pa).values()];let n={};return e.forEach(r=>{Uc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,Zs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=qv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Gv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,Zs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,dt).clear(),Q(this,Js).clear()}},dt=new WeakMap,Js=new WeakMap,Zs=new WeakMap,Ra=new WeakMap,Pa=new WeakMap,ei=new WeakMap,Da=new WeakMap,Ma=new WeakMap,$E),RM=m.createContext(void 0),PM=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(RM.Provider,{value:t,children:e}));async function DM(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const MM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await DM(n),await n.json())},OM=new jM({defaultOptions:{queries:{queryFn:MM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),LM=1,VM=1e6;let Cp=0;function FM(){return Cp=(Cp+1)%Number.MAX_SAFE_INTEGER,Cp.toString()}const Ip=new Map,tb=t=>{if(Ip.has(t))return;const e=setTimeout(()=>{Ip.delete(t),hc({type:"REMOVE_TOAST",toastId:t})},VM);Ip.set(t,e)},zM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,LM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?tb(n):t.toasts.forEach(r=>{tb(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Wd=[];let qd={toasts:[]};function hc(t){qd=zM(qd,t),Wd.forEach(e=>{e(qd)})}function UM({...t}){const e=FM(),n=s=>hc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>hc({type:"DISMISS_TOAST",toastId:e});return hc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Vo(){const[t,e]=m.useState(qd);return m.useEffect(()=>(Wd.push(e),()=>{const n=Wd.indexOf(e);n>-1&&Wd.splice(n,1)}),[t]),{...t,toast:UM,dismiss:n=>hc({type:"DISMISS_TOAST",toastId:n})}}function ge(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function nb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function EN(...t){return e=>{let n=!1;const r=t.map(s=>{const i=nb(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():nb(t[s],null)}}}}function Be(...t){return m.useCallback(EN(...t),t)}function $M(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Yn(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var w;const{scope:p,children:g,...E}=f,x=((w=p==null?void 0:p[t])==null?void 0:w[c])||l,b=m.useMemo(()=>E,Object.values(E));return a.jsx(x.Provider,{value:b,children:g})};u.displayName=i+"Provider";function h(f,p){var x;const g=((x=p==null?void 0:p[t])==null?void 0:x[c])||l,E=m.useContext(g);if(E)return E;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,BM(s,...e)]}function BM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Ha(t){const e=WM(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(qM);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var HM=Ha("Slot");function WM(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=KM(s),l=GM(i,s.props);return s.type!==m.Fragment&&(l.ref=r?EN(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SN=Symbol("radix.slottable");function TN(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=SN,e}function qM(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SN}function GM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function KM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Kv(t){const e=t+"CollectionProvider",[n,r]=Yn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:b,children:w}=x,v=Ce.useRef(null),_=Ce.useRef(new Map).current;return a.jsx(s,{scope:b,itemMap:_,collectionRef:v,children:w})};o.displayName=e;const l=t+"CollectionSlot",c=Ha(l),u=Ce.forwardRef((x,b)=>{const{scope:w,children:v}=x,_=i(l,w),C=Be(b,_.collectionRef);return a.jsx(c,{ref:C,children:v})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Ha(h),g=Ce.forwardRef((x,b)=>{const{scope:w,children:v,..._}=x,C=Ce.useRef(null),R=Be(b,C),D=i(h,w);return Ce.useEffect(()=>(D.itemMap.set(C,{ref:C,..._}),()=>void D.itemMap.delete(C))),a.jsx(p,{[f]:"",ref:R,children:v})});g.displayName=h;function E(x){const b=i(t+"CollectionConsumer",x);return Ce.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const _=Array.from(v.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((D,N)=>_.indexOf(D.ref.current)-_.indexOf(N.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},E,r]}var QM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],we=QM.reduce((t,e)=>{const n=Ha(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function NN(t,e){t&&qn.flushSync(()=>t.dispatchEvent(e))}function cn(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function YM(t,e=globalThis==null?void 0:globalThis.document){const n=cn(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var XM="DismissableLayer",Jg="dismissableLayer.update",JM="dismissableLayer.pointerDownOutside",ZM="dismissableLayer.focusOutside",rb,CN=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hu=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(CN),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=m.useState({}),E=Be(e,N=>f(N)),x=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(b),v=h?x.indexOf(h):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,C=v>=w,R=tO(N=>{const T=N.target,I=[...u.branches].some(j=>j.contains(T));!C||I||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},p),D=nO(N=>{const T=N.target;[...u.branches].some(j=>j.contains(T))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},p);return YM(N=>{v===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(rb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),sb(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=rb)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),sb())},[h,u]),m.useEffect(()=>{const N=()=>g({});return document.addEventListener(Jg,N),()=>document.removeEventListener(Jg,N)},[]),a.jsx(we.div,{...c,ref:E,style:{pointerEvents:_?C?"auto":"none":void 0,...t.style},onFocusCapture:ge(t.onFocusCapture,D.onFocusCapture),onBlurCapture:ge(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ge(t.onPointerDownCapture,R.onPointerDownCapture)})});hu.displayName=XM;var eO="DismissableLayerBranch",IN=m.forwardRef((t,e)=>{const n=m.useContext(CN),r=m.useRef(null),s=Be(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(we.div,{...t,ref:s})});IN.displayName=eO;function tO(t,e=globalThis==null?void 0:globalThis.document){const n=cn(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){kN(JM,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function nO(t,e=globalThis==null?void 0:globalThis.document){const n=cn(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&kN(ZM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function sb(){const t=new CustomEvent(Jg);document.dispatchEvent(t)}function kN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?NN(s,i):s.dispatchEvent(i)}var rO=hu,sO=IN,Ct=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},iO="Portal",fu=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);Ct(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?D4.createPortal(a.jsx(we.div,{...r,ref:e}),o):null});fu.displayName=iO;function oO(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var zi=t=>{const{present:e,children:n}=t,r=aO(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Be(r.ref,lO(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};zi.displayName="Presence";function aO(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=oO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=md(r.current);i.current=l==="mounted"?u:"none"},[l]),Ct(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=md(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Ct(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const x=md(r.current).includes(g.animationName);if(g.target===e&&x&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(i.current=md(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function md(t){return(t==null?void 0:t.animationName)||"none"}function lO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ti({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=cO({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,l=cn(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function cO({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=cn(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var uO="VisuallyHidden",mu=m.forwardRef((t,e)=>a.jsx(we.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));mu.displayName=uO;var dO=mu,Qv="ToastProvider",[Yv,hO,fO]=Kv("Toast"),[AN,sq]=Yn("Toast",[fO]),[mO,Ff]=AN(Qv),jN=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Qv}\`. Expected non-empty \`string\`.`),a.jsx(Yv.Provider,{scope:e,children:a.jsx(mO,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(g=>g+1),[]),onToastRemove:m.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};jN.displayName=Qv;var RN="ToastViewport",pO=["F8"],Zg="toast.viewportPause",ey="toast.viewportResume",PN=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=pO,label:s="Notifications ({hotkey})",...i}=t,o=Ff(RN,n),l=hO(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Be(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=o.toastCount>0;m.useEffect(()=>{const b=w=>{var _;r.length!==0&&r.every(C=>w[C]||w.code===C)&&((_=f.current)==null||_.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),m.useEffect(()=>{const b=c.current,w=f.current;if(E&&b&&w){const v=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(Zg);w.dispatchEvent(D),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(ey);w.dispatchEvent(D),o.isClosePausedRef.current=!1}},C=D=>{!b.contains(D.relatedTarget)&&_()},R=()=>{b.contains(document.activeElement)||_()};return b.addEventListener("focusin",v),b.addEventListener("focusout",C),b.addEventListener("pointermove",v),b.addEventListener("pointerleave",R),window.addEventListener("blur",v),window.addEventListener("focus",_),()=>{b.removeEventListener("focusin",v),b.removeEventListener("focusout",C),b.removeEventListener("pointermove",v),b.removeEventListener("pointerleave",R),window.removeEventListener("blur",v),window.removeEventListener("focus",_)}}},[E,o.isClosePausedRef]);const x=m.useCallback(({tabbingDirection:b})=>{const v=l().map(_=>{const C=_.ref.current,R=[C,...IO(C)];return b==="forwards"?R:R.reverse()});return(b==="forwards"?v.reverse():v).flat()},[l]);return m.useEffect(()=>{const b=f.current;if(b){const w=v=>{var R,D,N;const _=v.altKey||v.ctrlKey||v.metaKey;if(v.key==="Tab"&&!_){const T=document.activeElement,I=v.shiftKey;if(v.target===b&&I){(R=u.current)==null||R.focus();return}const M=x({tabbingDirection:I?"backwards":"forwards"}),P=M.findIndex(H=>H===T);kp(M.slice(P+1))?v.preventDefault():I?(D=u.current)==null||D.focus():(N=h.current)==null||N.focus()}};return b.addEventListener("keydown",w),()=>b.removeEventListener("keydown",w)}},[l,x]),a.jsxs(sO,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:E?void 0:"none"},children:[E&&a.jsx(ty,{ref:u,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"forwards"});kp(b)}}),a.jsx(Yv.Slot,{scope:n,children:a.jsx(we.ol,{tabIndex:-1,...i,ref:p})}),E&&a.jsx(ty,{ref:h,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"backwards"});kp(b)}})]})});PN.displayName=RN;var DN="ToastFocusProxy",ty=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Ff(DN,n);return a.jsx(mu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});ty.displayName=DN;var zf="Toast",gO="toast.swipeStart",yO="toast.swipeMove",vO="toast.swipeCancel",xO="toast.swipeEnd",MN=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=Ti({prop:r,defaultProp:s,onChange:i});return a.jsx(zi,{present:n||l,children:a.jsx(_O,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:cn(t.onPause),onResume:cn(t.onResume),onSwipeStart:ge(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ge(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ge(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ge(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});MN.displayName=zf;var[wO,bO]=AN(zf,{onClose(){}}),_O=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:g,...E}=t,x=Ff(zf,n),[b,w]=m.useState(null),v=Be(e,H=>w(H)),_=m.useRef(null),C=m.useRef(null),R=s||x.duration,D=m.useRef(0),N=m.useRef(R),T=m.useRef(0),{onToastAdd:I,onToastRemove:j}=x,k=cn(()=>{var ae;(b==null?void 0:b.contains(document.activeElement))&&((ae=x.viewport)==null||ae.focus()),o()}),M=m.useCallback(H=>{!H||H===1/0||(window.clearTimeout(T.current),D.current=new Date().getTime(),T.current=window.setTimeout(k,H))},[k]);m.useEffect(()=>{const H=x.viewport;if(H){const ae=()=>{M(N.current),u==null||u()},X=()=>{const U=new Date().getTime()-D.current;N.current=N.current-U,window.clearTimeout(T.current),c==null||c()};return H.addEventListener(Zg,X),H.addEventListener(ey,ae),()=>{H.removeEventListener(Zg,X),H.removeEventListener(ey,ae)}}},[x.viewport,R,c,u,M]),m.useEffect(()=>{i&&!x.isClosePausedRef.current&&M(R)},[i,R,x.isClosePausedRef,M]),m.useEffect(()=>(I(),()=>j()),[I,j]);const P=m.useMemo(()=>b?$N(b):null,[b]);return x.viewport?a.jsxs(a.Fragment,{children:[P&&a.jsx(EO,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),a.jsx(wO,{scope:n,onClose:k,children:qn.createPortal(a.jsx(Yv.ItemSlot,{scope:n,children:a.jsx(rO,{asChild:!0,onEscapeKeyDown:ge(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||k(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(we.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...E,ref:v,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ge(t.onKeyDown,H=>{H.key==="Escape"&&(l==null||l(H.nativeEvent),H.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:ge(t.onPointerDown,H=>{H.button===0&&(_.current={x:H.clientX,y:H.clientY})}),onPointerMove:ge(t.onPointerMove,H=>{if(!_.current)return;const ae=H.clientX-_.current.x,X=H.clientY-_.current.y,U=!!C.current,O=["left","right"].includes(x.swipeDirection),F=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,V=O?F(0,ae):0,B=O?0:F(0,X),G=H.pointerType==="touch"?10:2,re={x:V,y:B},ne={originalEvent:H,delta:re};U?(C.current=re,pd(yO,f,ne,{discrete:!1})):ib(re,x.swipeDirection,G)?(C.current=re,pd(gO,h,ne,{discrete:!1}),H.target.setPointerCapture(H.pointerId)):(Math.abs(ae)>G||Math.abs(X)>G)&&(_.current=null)}),onPointerUp:ge(t.onPointerUp,H=>{const ae=C.current,X=H.target;if(X.hasPointerCapture(H.pointerId)&&X.releasePointerCapture(H.pointerId),C.current=null,_.current=null,ae){const U=H.currentTarget,O={originalEvent:H,delta:ae};ib(ae,x.swipeDirection,x.swipeThreshold)?pd(xO,g,O,{discrete:!0}):pd(vO,p,O,{discrete:!0}),U.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),EO=t=>{const{__scopeToast:e,children:n,...r}=t,s=Ff(zf,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return NO(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(fu,{asChild:!0,children:a.jsx(mu,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},SO="ToastTitle",ON=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(we.div,{...r,ref:e})});ON.displayName=SO;var TO="ToastDescription",LN=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(we.div,{...r,ref:e})});LN.displayName=TO;var VN="ToastAction",FN=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(UN,{altText:n,asChild:!0,children:a.jsx(Xv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${VN}\`. Expected non-empty \`string\`.`),null)});FN.displayName=VN;var zN="ToastClose",Xv=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=bO(zN,n);return a.jsx(UN,{asChild:!0,children:a.jsx(we.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,s.onClose)})})});Xv.displayName=zN;var UN=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(we.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function $N(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),CO(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...$N(r))}}),e}function pd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?NN(s,i):s.dispatchEvent(i)}var ib=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function NO(t=()=>{}){const e=cn(t);Ct(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function CO(t){return t.nodeType===t.ELEMENT_NODE}function IO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function kp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var kO=jN,BN=PN,HN=MN,WN=ON,qN=LN,GN=FN,KN=Xv;function QN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=QN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function YN(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=QN(t))&&(r&&(r+=" "),r+=e);return r}const ob=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ab=YN,pu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return ab(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=ob(h)||ob(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...g}=h;return Object.entries(g).every(E=>{let[x,b]=E;return Array.isArray(b)?b.includes({...i,...l}[x]):{...i,...l}[x]===b})?[...u,f,p]:u},[]);return ab(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),XN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...jO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:XN("lucide",s),...l},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(RO,{ref:i,iconNode:e,className:XN(`lucide-${AO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=ce("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=ce("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=ce("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=ce("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=ce("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=ce("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=ce("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=ce("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=ce("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=ce("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=ce("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=ce("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=ce("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ub=ce("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=ce("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=ce("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=ce("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=ce("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=ce("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=ce("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=ce("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=ce("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=ce("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dh=ce("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=ce("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=ce("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=ce("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=ce("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=ce("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=ce("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=ce("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),sx="-",o5=t=>{const e=l5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(sx);return l[0]===""&&l.length!==1&&l.shift(),dC(l,e)||a5(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},dC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?dC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(sx);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},hb=/^\[(.+)\]$/,a5=t=>{if(hb.test(t)){const e=hb.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},l5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return u5(Object.entries(t.classGroups),n).forEach(([i,o])=>{oy(o,r,i,e)}),r},oy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:fb(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(c5(s)){oy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{oy(o,fb(e,i),n,r)})})},fb=(t,e)=>{let n=t;return e.split(sx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},c5=t=>t.isThemeGetter,u5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,d5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},hC="!",h5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let b=0;b<l.length;b++){let w=l[b];if(u===0){if(w===s&&(r||l.slice(b,b+i)===e)){c.push(l.slice(h,b)),h=b+i;continue}if(w==="/"){f=b;continue}}w==="["?u++:w==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(hC),E=g?p.substring(1):p,x=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:E,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:o}):o},f5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},m5=t=>({cache:d5(t.cacheSize),parseClassName:h5(t),...o5(t)}),p5=/\s+/,g5=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(p5);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let E=!!g,x=r(E?p.substring(0,g):p);if(!x){if(!E){l=u+(l.length>0?" "+l:l);continue}if(x=r(p),!x){l=u+(l.length>0?" "+l:l);continue}E=!1}const b=f5(h).join(":"),w=f?b+hC:b,v=w+x;if(i.includes(v))continue;i.push(v);const _=s(x,E);for(let C=0;C<_.length;++C){const R=_[C];i.push(w+R)}l=u+(l.length>0?" "+l:l)}return l};function y5(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=fC(e))&&(r&&(r+=" "),r+=n);return r}const fC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=fC(t[r]))&&(n&&(n+=" "),n+=e);return n};function v5(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=m5(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=g5(c,n);return s(c,h),h}return function(){return i(y5.apply(null,arguments))}}const Xe=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},mC=/^\[(?:([a-z-]+):)?(.+)\]$/i,x5=/^\d+\/\d+$/,w5=new Set(["px","full","screen"]),b5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,S5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ns=t=>va(t)||w5.has(t)||x5.test(t),Ls=t=>cl(t,"length",P5),va=t=>!!t&&!Number.isNaN(Number(t)),Ap=t=>cl(t,"number",va),ql=t=>!!t&&Number.isInteger(Number(t)),N5=t=>t.endsWith("%")&&va(t.slice(0,-1)),Ee=t=>mC.test(t),Vs=t=>b5.test(t),C5=new Set(["length","size","percentage"]),I5=t=>cl(t,C5,pC),k5=t=>cl(t,"position",pC),A5=new Set(["image","url"]),j5=t=>cl(t,A5,M5),R5=t=>cl(t,"",D5),Gl=()=>!0,cl=(t,e,n)=>{const r=mC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},P5=t=>_5.test(t)&&!E5.test(t),pC=()=>!1,D5=t=>S5.test(t),M5=t=>T5.test(t),O5=()=>{const t=Xe("colors"),e=Xe("spacing"),n=Xe("blur"),r=Xe("brightness"),s=Xe("borderColor"),i=Xe("borderRadius"),o=Xe("borderSpacing"),l=Xe("borderWidth"),c=Xe("contrast"),u=Xe("grayscale"),h=Xe("hueRotate"),f=Xe("invert"),p=Xe("gap"),g=Xe("gradientColorStops"),E=Xe("gradientColorStopPositions"),x=Xe("inset"),b=Xe("margin"),w=Xe("opacity"),v=Xe("padding"),_=Xe("saturate"),C=Xe("scale"),R=Xe("sepia"),D=Xe("skew"),N=Xe("space"),T=Xe("translate"),I=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",Ee,e],M=()=>[Ee,e],P=()=>["",ns,Ls],H=()=>["auto",va,Ee],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],U=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",Ee],V=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[va,Ee];return{cacheSize:500,separator:":",theme:{colors:[Gl],spacing:[ns,Ls],blur:["none","",Vs,Ee],brightness:B(),borderColor:[t],borderRadius:["none","","full",Vs,Ee],borderSpacing:M(),borderWidth:P(),contrast:B(),grayscale:F(),hueRotate:B(),invert:F(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[N5,Ls],inset:k(),margin:k(),opacity:B(),padding:M(),saturate:B(),scale:B(),sepia:F(),skew:B(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",Ee]}],container:["container"],columns:[{columns:[Vs]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),Ee]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ql,Ee]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ee]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",ql,Ee]}],"grid-cols":[{"grid-cols":[Gl]}],"col-start-end":[{col:["auto",{span:["full",ql,Ee]},Ee]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Gl]}],"row-start-end":[{row:["auto",{span:[ql,Ee]},Ee]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ee]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ee,e]}],"min-w":[{"min-w":[Ee,e,"min","max","fit"]}],"max-w":[{"max-w":[Ee,e,"none","full","min","max","fit","prose",{screen:[Vs]},Vs]}],h:[{h:[Ee,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ee,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ee,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ee,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Vs,Ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ap]}],"font-family":[{font:[Gl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ee]}],"line-clamp":[{"line-clamp":["none",va,Ap]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ns,Ee]}],"list-image":[{"list-image":["none",Ee]}],"list-style-type":[{list:["none","disc","decimal",Ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ns,Ls]}],"underline-offset":[{"underline-offset":["auto",ns,Ee]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),k5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",I5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},j5]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:X()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[ns,Ee]}],"outline-w":[{outline:[ns,Ls]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[ns,Ls]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Vs,R5]}],"shadow-color":[{shadow:[Gl]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":[...U(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":U()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Vs,Ee]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[_]}],sepia:[{sepia:[R]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[R]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ee]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",Ee]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[ql,Ee]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ee]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ee]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ee]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ns,Ls,Ap]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},L5=v5(O5);function W(...t){return L5(YN(t))}const V5=kO,gC=m.forwardRef(({className:t,...e},n)=>a.jsx(BN,{ref:n,className:W("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));gC.displayName=BN.displayName;const F5=pu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),yC=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(HN,{ref:r,className:W(F5({variant:e}),t),...n}));yC.displayName=HN.displayName;const z5=m.forwardRef(({className:t,...e},n)=>a.jsx(GN,{ref:n,className:W("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));z5.displayName=GN.displayName;const vC=m.forwardRef(({className:t,...e},n)=>a.jsx(KN,{ref:n,className:W("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(No,{className:"h-4 w-4"})}));vC.displayName=KN.displayName;const xC=m.forwardRef(({className:t,...e},n)=>a.jsx(WN,{ref:n,className:W("text-sm font-semibold",t),...e}));xC.displayName=WN.displayName;const wC=m.forwardRef(({className:t,...e},n)=>a.jsx(qN,{ref:n,className:W("text-sm opacity-90",t),...e}));wC.displayName=qN.displayName;function U5(){const{toasts:t}=Vo();return a.jsxs(V5,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(yC,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(xC,{children:n}),r&&a.jsx(wC,{children:r})]}),s,a.jsx(vC,{})]},e)}),a.jsx(gC,{})]})}var $5=eS[" useId ".trim().toString()]||(()=>{}),B5=0;function ds(t){const[e,n]=m.useState($5());return Ct(()=>{n(r=>r??String(B5++))},[t]),e?`radix-${e}`:""}const H5=["top","right","bottom","left"],Ni=Math.min,An=Math.max,Mh=Math.round,gd=Math.floor,Ur=t=>({x:t,y:t}),W5={left:"right",right:"left",bottom:"top",top:"bottom"},q5={start:"end",end:"start"};function ay(t,e,n){return An(t,Ni(e,n))}function ys(t,e){return typeof t=="function"?t(e):t}function vs(t){return t.split("-")[0]}function ul(t){return t.split("-")[1]}function ix(t){return t==="x"?"y":"x"}function ox(t){return t==="y"?"height":"width"}function Ci(t){return["top","bottom"].includes(vs(t))?"y":"x"}function ax(t){return ix(Ci(t))}function G5(t,e,n){n===void 0&&(n=!1);const r=ul(t),s=ax(t),i=ox(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Oh(o)),[o,Oh(o)]}function K5(t){const e=Oh(t);return[ly(t),e,ly(e)]}function ly(t){return t.replace(/start|end/g,e=>q5[e])}function Q5(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function Y5(t,e,n,r){const s=ul(t);let i=Q5(vs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(ly)))),i}function Oh(t){return t.replace(/left|right|bottom|top/g,e=>W5[e])}function X5(t){return{top:0,right:0,bottom:0,left:0,...t}}function bC(t){return typeof t!="number"?X5(t):{top:t,right:t,bottom:t,left:t}}function Lh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function mb(t,e,n){let{reference:r,floating:s}=t;const i=Ci(e),o=ax(e),l=ox(o),c=vs(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(ul(e)){case"start":g[o]-=p*(n&&u?-1:1);break;case"end":g[o]+=p*(n&&u?-1:1);break}return g}const J5=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=mb(u,r,c),p=r,g={},E=0;for(let x=0;x<l.length;x++){const{name:b,fn:w}=l[x],{x:v,y:_,data:C,reset:R}=await w({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=v??h,f=_??f,g={...g,[b]:{...g[b],...C}},R&&E<=50&&(E++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(u=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):R.rects),{x:h,y:f}=mb(u,p,c)),x=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:g}};async function Hc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=ys(e,t),E=bC(g),b=l[p?f==="floating"?"reference":"floating":f],w=Lh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),v=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},R=Lh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:_,strategy:c}):v);return{top:(w.top-R.top+E.top)/C.y,bottom:(R.bottom-w.bottom+E.bottom)/C.y,left:(w.left-R.left+E.left)/C.x,right:(R.right-w.right+E.right)/C.x}}const Z5=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=ys(t,e)||{};if(u==null)return{};const f=bC(h),p={x:n,y:r},g=ax(s),E=ox(g),x=await o.getDimensions(u),b=g==="y",w=b?"top":"left",v=b?"bottom":"right",_=b?"clientHeight":"clientWidth",C=i.reference[E]+i.reference[g]-p[g]-i.floating[E],R=p[g]-i.reference[g],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=D?D[_]:0;(!N||!await(o.isElement==null?void 0:o.isElement(D)))&&(N=l.floating[_]||i.floating[E]);const T=C/2-R/2,I=N/2-x[E]/2-1,j=Ni(f[w],I),k=Ni(f[v],I),M=j,P=N-x[E]-k,H=N/2-x[E]/2+T,ae=ay(M,H,P),X=!c.arrow&&ul(s)!=null&&H!==ae&&i.reference[E]/2-(H<M?j:k)-x[E]/2<0,U=X?H<M?H-M:H-P:0;return{[g]:p[g]+U,data:{[g]:ae,centerOffset:H-ae-U,...X&&{alignmentOffset:U}},reset:X}}}),eL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:x=!0,...b}=ys(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const w=vs(s),v=Ci(l),_=vs(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),R=p||(_||!x?[Oh(l)]:K5(l)),D=E!=="none";!p&&D&&R.push(...Y5(l,x,E,C));const N=[l,...R],T=await Hc(e,b),I=[];let j=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&I.push(T[w]),f){const H=G5(s,o,C);I.push(T[H[0]],T[H[1]])}if(j=[...j,{placement:s,overflows:I}],!I.every(H=>H<=0)){var k,M;const H=(((k=i.flip)==null?void 0:k.index)||0)+1,ae=N[H];if(ae)return{data:{index:H,overflows:j},reset:{placement:ae}};let X=(M=j.filter(U=>U.overflows[0]<=0).sort((U,O)=>U.overflows[1]-O.overflows[1])[0])==null?void 0:M.placement;if(!X)switch(g){case"bestFit":{var P;const U=(P=j.filter(O=>{if(D){const F=Ci(O.placement);return F===v||F==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(F=>F>0).reduce((F,V)=>F+V,0)]).sort((O,F)=>O[1]-F[1])[0])==null?void 0:P[0];U&&(X=U);break}case"initialPlacement":X=l;break}if(s!==X)return{reset:{placement:X}}}return{}}}};function pb(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function gb(t){return H5.some(e=>t[e]>=0)}const tL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ys(t,e);switch(r){case"referenceHidden":{const i=await Hc(e,{...s,elementContext:"reference"}),o=pb(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:gb(o)}}}case"escaped":{const i=await Hc(e,{...s,altBoundary:!0}),o=pb(i,n.floating);return{data:{escapedOffsets:o,escaped:gb(o)}}}default:return{}}}}};async function nL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=vs(n),l=ul(n),c=Ci(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=ys(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:E}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof E=="number"&&(g=l==="end"?E*-1:E),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const rL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await nL(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},sL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:w,y:v}=b;return{x:w,y:v}}},...c}=ys(t,e),u={x:n,y:r},h=await Hc(e,c),f=Ci(vs(s)),p=ix(f);let g=u[p],E=u[f];if(i){const b=p==="y"?"top":"left",w=p==="y"?"bottom":"right",v=g+h[b],_=g-h[w];g=ay(v,g,_)}if(o){const b=f==="y"?"top":"left",w=f==="y"?"bottom":"right",v=E+h[b],_=E-h[w];E=ay(v,E,_)}const x=l.fn({...e,[p]:g,[f]:E});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:i,[f]:o}}}}}},iL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ys(t,e),h={x:n,y:r},f=Ci(s),p=ix(f);let g=h[p],E=h[f];const x=ys(l,e),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const _=p==="y"?"height":"width",C=i.reference[p]-i.floating[_]+b.mainAxis,R=i.reference[p]+i.reference[_]-b.mainAxis;g<C?g=C:g>R&&(g=R)}if(u){var w,v;const _=p==="y"?"width":"height",C=["top","left"].includes(vs(s)),R=i.reference[f]-i.floating[_]+(C&&((w=o.offset)==null?void 0:w[f])||0)+(C?0:b.crossAxis),D=i.reference[f]+i.reference[_]+(C?0:((v=o.offset)==null?void 0:v[f])||0)-(C?b.crossAxis:0);E<R?E=R:E>D&&(E=D)}return{[p]:g,[f]:E}}}},oL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ys(t,e),h=await Hc(e,u),f=vs(s),p=ul(s),g=Ci(s)==="y",{width:E,height:x}=i.floating;let b,w;f==="top"||f==="bottom"?(b=f,w=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(w=f,b=p==="end"?"top":"bottom");const v=x-h.top-h.bottom,_=E-h.left-h.right,C=Ni(x-h[b],v),R=Ni(E-h[w],_),D=!e.middlewareData.shift;let N=C,T=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=v),D&&!p){const j=An(h.left,0),k=An(h.right,0),M=An(h.top,0),P=An(h.bottom,0);g?T=E-2*(j!==0||k!==0?j+k:An(h.left,h.right)):N=x-2*(M!==0||P!==0?M+P:An(h.top,h.bottom))}await c({...e,availableWidth:T,availableHeight:N});const I=await o.getDimensions(l.floating);return E!==I.width||x!==I.height?{reset:{rects:!0}}:{}}}};function Hf(){return typeof window<"u"}function dl(t){return _C(t)?(t.nodeName||"").toLowerCase():"#document"}function Mn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Jr(t){var e;return(e=(_C(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function _C(t){return Hf()?t instanceof Node||t instanceof Mn(t).Node:!1}function vr(t){return Hf()?t instanceof Element||t instanceof Mn(t).Element:!1}function Gr(t){return Hf()?t instanceof HTMLElement||t instanceof Mn(t).HTMLElement:!1}function yb(t){return!Hf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Mn(t).ShadowRoot}function gu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=xr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function aL(t){return["table","td","th"].includes(dl(t))}function Wf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function lx(t){const e=cx(),n=vr(t)?xr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function lL(t){let e=Ii(t);for(;Gr(e)&&!Ka(e);){if(lx(e))return e;if(Wf(e))return null;e=Ii(e)}return null}function cx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ka(t){return["html","body","#document"].includes(dl(t))}function xr(t){return Mn(t).getComputedStyle(t)}function qf(t){return vr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ii(t){if(dl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||yb(t)&&t.host||Jr(t);return yb(e)?e.host:e}function EC(t){const e=Ii(t);return Ka(e)?t.ownerDocument?t.ownerDocument.body:t.body:Gr(e)&&gu(e)?e:EC(e)}function Wc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=EC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Mn(s);if(i){const l=cy(o);return e.concat(o,o.visualViewport||[],gu(s)?s:[],l&&n?Wc(l):[])}return e.concat(s,Wc(s,[],n))}function cy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function SC(t){const e=xr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Gr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Mh(n)!==i||Mh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function ux(t){return vr(t)?t:t.contextElement}function xa(t){const e=ux(t);if(!Gr(e))return Ur(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=SC(e);let o=(i?Mh(n.width):n.width)/r,l=(i?Mh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const cL=Ur(0);function TC(t){const e=Mn(t);return!cx()||!e.visualViewport?cL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function uL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Mn(t)?!1:e}function Co(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=ux(t);let o=Ur(1);e&&(r?vr(r)&&(o=xa(r)):o=xa(t));const l=uL(i,n,r)?TC(i):Ur(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=Mn(i),g=r&&vr(r)?Mn(r):r;let E=p,x=cy(E);for(;x&&r&&g!==E;){const b=xa(x),w=x.getBoundingClientRect(),v=xr(x),_=w.left+(x.clientLeft+parseFloat(v.paddingLeft))*b.x,C=w.top+(x.clientTop+parseFloat(v.paddingTop))*b.y;c*=b.x,u*=b.y,h*=b.x,f*=b.y,c+=_,u+=C,E=Mn(x),x=cy(E)}}return Lh({width:h,height:f,x:c,y:u})}function dx(t,e){const n=qf(t).scrollLeft;return e?e.left+n:Co(Jr(t)).left+n}function NC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:dx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function dL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Jr(r),l=e?Wf(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Ur(1);const h=Ur(0),f=Gr(r);if((f||!f&&!i)&&((dl(r)!=="body"||gu(o))&&(c=qf(r)),Gr(r))){const g=Co(r);u=xa(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=o&&!f&&!i?NC(o,c,!0):Ur(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function hL(t){return Array.from(t.getClientRects())}function fL(t){const e=Jr(t),n=qf(t),r=t.ownerDocument.body,s=An(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=An(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+dx(t);const l=-n.scrollTop;return xr(r).direction==="rtl"&&(o+=An(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function mL(t,e){const n=Mn(t),r=Jr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=cx();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function pL(t,e){const n=Co(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Gr(t)?xa(t):Ur(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function vb(t,e,n){let r;if(e==="viewport")r=mL(t,n);else if(e==="document")r=fL(Jr(t));else if(vr(e))r=pL(e,n);else{const s=TC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Lh(r)}function CC(t,e){const n=Ii(t);return n===e||!vr(n)||Ka(n)?!1:xr(n).position==="fixed"||CC(n,e)}function gL(t,e){const n=e.get(t);if(n)return n;let r=Wc(t,[],!1).filter(l=>vr(l)&&dl(l)!=="body"),s=null;const i=xr(t).position==="fixed";let o=i?Ii(t):t;for(;vr(o)&&!Ka(o);){const l=xr(o),c=lx(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||gu(o)&&!c&&CC(t,o))?r=r.filter(h=>h!==o):s=l,o=Ii(o)}return e.set(t,r),r}function yL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Wf(e)?[]:gL(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=vb(e,h,s);return u.top=An(f.top,u.top),u.right=Ni(f.right,u.right),u.bottom=Ni(f.bottom,u.bottom),u.left=An(f.left,u.left),u},vb(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function vL(t){const{width:e,height:n}=SC(t);return{width:e,height:n}}function xL(t,e,n){const r=Gr(e),s=Jr(e),i=n==="fixed",o=Co(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Ur(0);if(r||!r&&!i)if((dl(e)!=="body"||gu(s))&&(l=qf(e)),r){const p=Co(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=dx(s));const u=s&&!r&&!i?NC(s,l):Ur(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function jp(t){return xr(t).position==="static"}function xb(t,e){if(!Gr(t)||xr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Jr(t)===n&&(n=n.ownerDocument.body),n}function IC(t,e){const n=Mn(t);if(Wf(t))return n;if(!Gr(t)){let s=Ii(t);for(;s&&!Ka(s);){if(vr(s)&&!jp(s))return s;s=Ii(s)}return n}let r=xb(t,e);for(;r&&aL(r)&&jp(r);)r=xb(r,e);return r&&Ka(r)&&jp(r)&&!lx(r)?n:r||lL(t)||n}const wL=async function(t){const e=this.getOffsetParent||IC,n=this.getDimensions,r=await n(t.floating);return{reference:xL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function bL(t){return xr(t).direction==="rtl"}const _L={convertOffsetParentRelativeRectToViewportRelativeRect:dL,getDocumentElement:Jr,getClippingRect:yL,getOffsetParent:IC,getElementRects:wL,getClientRects:hL,getDimensions:vL,getScale:xa,isElement:vr,isRTL:bL};function kC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function EL(t,e){let n=null,r;const s=Jr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=u;if(l||e(),!p||!g)return;const E=gd(f),x=gd(s.clientWidth-(h+p)),b=gd(s.clientHeight-(f+g)),w=gd(h),_={rootMargin:-E+"px "+-x+"px "+-b+"px "+-w+"px",threshold:An(0,Ni(1,c))||1};let C=!0;function R(D){const N=D[0].intersectionRatio;if(N!==c){if(!C)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!kC(u,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(R,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(R,_)}n.observe(t)}return o(!0),i}function SL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=ux(t),h=s||i?[...u?Wc(u):[],...Wc(e)]:[];h.forEach(w=>{s&&w.addEventListener("scroll",n,{passive:!0}),i&&w.addEventListener("resize",n)});const f=u&&l?EL(u,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(w=>{let[v]=w;v&&v.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=g)==null||_.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let E,x=c?Co(t):null;c&&b();function b(){const w=Co(t);x&&!kC(x,w)&&n(),x=w,E=requestAnimationFrame(b)}return n(),()=>{var w;h.forEach(v=>{s&&v.removeEventListener("scroll",n),i&&v.removeEventListener("resize",n)}),f==null||f(),(w=g)==null||w.disconnect(),g=null,c&&cancelAnimationFrame(E)}}const TL=rL,NL=sL,CL=eL,IL=oL,kL=tL,wb=Z5,AL=iL,jL=(t,e,n)=>{const r=new Map,s={platform:_L,...n},i={...s.platform,_c:r};return J5(t,e,{...s,platform:i})};var Gd=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Vh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Vh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Vh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function AC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function bb(t,e){const n=AC(t);return Math.round(e*n)/n}function Rp(t){const e=m.useRef(t);return Gd(()=>{e.current=t}),e}function RL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=m.useState(r);Vh(p,r)||g(r);const[E,x]=m.useState(null),[b,w]=m.useState(null),v=m.useCallback(O=>{O!==D.current&&(D.current=O,x(O))},[]),_=m.useCallback(O=>{O!==N.current&&(N.current=O,w(O))},[]),C=i||E,R=o||b,D=m.useRef(null),N=m.useRef(null),T=m.useRef(h),I=c!=null,j=Rp(c),k=Rp(s),M=Rp(u),P=m.useCallback(()=>{if(!D.current||!N.current)return;const O={placement:e,strategy:n,middleware:p};k.current&&(O.platform=k.current),jL(D.current,N.current,O).then(F=>{const V={...F,isPositioned:M.current!==!1};H.current&&!Vh(T.current,V)&&(T.current=V,qn.flushSync(()=>{f(V)}))})},[p,e,n,k,M]);Gd(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const H=m.useRef(!1);Gd(()=>(H.current=!0,()=>{H.current=!1}),[]),Gd(()=>{if(C&&(D.current=C),R&&(N.current=R),C&&R){if(j.current)return j.current(C,R,P);P()}},[C,R,P,j,I]);const ae=m.useMemo(()=>({reference:D,floating:N,setReference:v,setFloating:_}),[v,_]),X=m.useMemo(()=>({reference:C,floating:R}),[C,R]),U=m.useMemo(()=>{const O={position:n,left:0,top:0};if(!X.floating)return O;const F=bb(X.floating,h.x),V=bb(X.floating,h.y);return l?{...O,transform:"translate("+F+"px, "+V+"px)",...AC(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:V}},[n,l,X.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:P,refs:ae,elements:X,floatingStyles:U}),[h,P,ae,X,U])}const PL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?wb({element:r.current,padding:s}).fn(n):{}:r?wb({element:r,padding:s}).fn(n):{}}}},DL=(t,e)=>({...TL(t),options:[t,e]}),ML=(t,e)=>({...NL(t),options:[t,e]}),OL=(t,e)=>({...AL(t),options:[t,e]}),LL=(t,e)=>({...CL(t),options:[t,e]}),VL=(t,e)=>({...IL(t),options:[t,e]}),FL=(t,e)=>({...kL(t),options:[t,e]}),zL=(t,e)=>({...PL(t),options:[t,e]});var UL="Arrow",jC=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(we.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});jC.displayName=UL;var $L=jC;function RC(t){const[e,n]=m.useState(void 0);return Ct(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var hx="Popper",[PC,Gf]=Yn(hx),[BL,DC]=PC(hx),MC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(BL,{scope:e,anchor:r,onAnchorChange:s,children:n})};MC.displayName=hx;var OC="PopperAnchor",LC=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=DC(OC,n),o=m.useRef(null),l=Be(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(we.div,{...s,ref:l})});LC.displayName=OC;var fx="PopperContent",[HL,WL]=PC(fx),VC=m.forwardRef((t,e)=>{var J,Z,$,Y,ie,te;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:E,...x}=t,b=DC(fx,n),[w,v]=m.useState(null),_=Be(e,me=>v(me)),[C,R]=m.useState(null),D=RC(C),N=(D==null?void 0:D.width)??0,T=(D==null?void 0:D.height)??0,I=r+(i!=="center"?"-"+i:""),j=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},k=Array.isArray(u)?u:[u],M=k.length>0,P={padding:j,boundary:k.filter(GL),altBoundary:M},{refs:H,floatingStyles:ae,placement:X,isPositioned:U,middlewareData:O}=RL({strategy:"fixed",placement:I,whileElementsMounted:(...me)=>SL(...me,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[DL({mainAxis:s+T,alignmentAxis:o}),c&&ML({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?OL():void 0,...P}),c&&LL({...P}),VL({...P,apply:({elements:me,rects:ye,availableWidth:Ue,availableHeight:tt})=>{const{width:Bt,height:It}=ye.reference,Ne=me.floating.style;Ne.setProperty("--radix-popper-available-width",`${Ue}px`),Ne.setProperty("--radix-popper-available-height",`${tt}px`),Ne.setProperty("--radix-popper-anchor-width",`${Bt}px`),Ne.setProperty("--radix-popper-anchor-height",`${It}px`)}}),C&&zL({element:C,padding:l}),KL({arrowWidth:N,arrowHeight:T}),p&&FL({strategy:"referenceHidden",...P})]}),[F,V]=UC(X),B=cn(E);Ct(()=>{U&&(B==null||B())},[U,B]);const G=(J=O.arrow)==null?void 0:J.x,re=(Z=O.arrow)==null?void 0:Z.y,ne=(($=O.arrow)==null?void 0:$.centerOffset)!==0,[he,ue]=m.useState();return Ct(()=>{w&&ue(window.getComputedStyle(w).zIndex)},[w]),a.jsx("div",{ref:H.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:U?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[(Y=O.transformOrigin)==null?void 0:Y.x,(ie=O.transformOrigin)==null?void 0:ie.y].join(" "),...((te=O.hide)==null?void 0:te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(HL,{scope:n,placedSide:F,onArrowChange:R,arrowX:G,arrowY:re,shouldHideArrow:ne,children:a.jsx(we.div,{"data-side":F,"data-align":V,...x,ref:_,style:{...x.style,animation:U?void 0:"none"}})})})});VC.displayName=fx;var FC="PopperArrow",qL={top:"bottom",right:"left",bottom:"top",left:"right"},zC=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=WL(FC,r),o=qL[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx($L,{...s,ref:n,style:{...s.style,display:"block"}})})});zC.displayName=FC;function GL(t){return t!==null}var KL=t=>({name:"transformOrigin",options:t,fn(e){var b,w,v;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=UC(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((w=s.arrow)==null?void 0:w.x)??0)+l/2,g=(((v=s.arrow)==null?void 0:v.y)??0)+c/2;let E="",x="";return u==="bottom"?(E=o?f:`${p}px`,x=`${-c}px`):u==="top"?(E=o?f:`${p}px`,x=`${r.floating.height+c}px`):u==="right"?(E=`${-c}px`,x=o?f:`${g}px`):u==="left"&&(E=`${r.floating.width+c}px`,x=o?f:`${g}px`),{data:{x:E,y:x}}}});function UC(t){const[e,n="center"]=t.split("-");return[e,n]}var $C=MC,BC=LC,HC=VC,WC=zC,[Kf,iq]=Yn("Tooltip",[Gf]),Qf=Gf(),qC="TooltipProvider",QL=700,uy="tooltip.open",[YL,mx]=Kf(qC),GC=t=>{const{__scopeTooltip:e,delayDuration:n=QL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(YL,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};GC.displayName=qC;var Yf="Tooltip",[XL,yu]=Kf(Yf),KC=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=mx(Yf,t.__scopeTooltip),u=Qf(e),[h,f]=m.useState(null),p=ds(),g=m.useRef(0),E=o??c.disableHoverableContent,x=l??c.delayDuration,b=m.useRef(!1),[w=!1,v]=Ti({prop:r,defaultProp:s,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(uy))):c.onClose(),i==null||i(N)}}),_=m.useMemo(()=>w?b.current?"delayed-open":"instant-open":"closed",[w]),C=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,v(!0)},[v]),R=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,v(!1)},[v]),D=m.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,v(!0),g.current=0},x)},[x,v]);return m.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),a.jsx($C,{...u,children:a.jsx(XL,{scope:e,contentId:p,open:w,stateAttribute:_,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?D():C()},[c.isOpenDelayedRef,D,C]),onTriggerLeave:m.useCallback(()=>{E?R():(window.clearTimeout(g.current),g.current=0)},[R,E]),onOpen:C,onClose:R,disableHoverableContent:E,children:n})})};KC.displayName=Yf;var dy="TooltipTrigger",QC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=yu(dy,n),i=mx(dy,n),o=Qf(n),l=m.useRef(null),c=Be(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(BC,{asChild:!0,...o,children:a.jsx(we.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ge(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:ge(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:ge(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ge(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ge(t.onBlur,s.onClose),onClick:ge(t.onClick,s.onClose)})})});QC.displayName=dy;var px="TooltipPortal",[JL,ZL]=Kf(px,{forceMount:void 0}),YC=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=yu(px,e);return a.jsx(JL,{scope:e,forceMount:n,children:a.jsx(zi,{present:n||i.open,children:a.jsx(fu,{asChild:!0,container:s,children:r})})})};YC.displayName=px;var Qa="TooltipContent",XC=m.forwardRef((t,e)=>{const n=ZL(Qa,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=yu(Qa,t.__scopeTooltip);return a.jsx(zi,{present:r||o.open,children:o.disableHoverableContent?a.jsx(JC,{side:s,...i,ref:e}):a.jsx(e3,{side:s,...i,ref:e})})}),e3=m.forwardRef((t,e)=>{const n=yu(Qa,t.__scopeTooltip),r=mx(Qa,t.__scopeTooltip),s=m.useRef(null),i=Be(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),g=m.useCallback((E,x)=>{const b=E.currentTarget,w={x:E.clientX,y:E.clientY},v=i3(w,b.getBoundingClientRect()),_=o3(w,v),C=a3(x.getBoundingClientRect()),R=c3([..._,...C]);l(R),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const E=b=>g(b,h),x=b=>g(b,c);return c.addEventListener("pointerleave",E),h.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",E),h.removeEventListener("pointerleave",x)}}},[c,h,g,p]),m.useEffect(()=>{if(o){const E=x=>{const b=x.target,w={x:x.clientX,y:x.clientY},v=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),_=!l3(w,o);v?p():_&&(p(),u())};return document.addEventListener("pointermove",E),()=>document.removeEventListener("pointermove",E)}},[c,h,o,u,p]),a.jsx(JC,{...t,ref:i})}),[t3,n3]=Kf(Yf,{isInside:!1}),r3=TN("TooltipContent"),JC=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=yu(Qa,n),u=Qf(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(uy,h),()=>document.removeEventListener(uy,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(hu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(HC,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(r3,{children:r}),a.jsx(t3,{scope:n,isInside:!0,children:a.jsx(dO,{id:c.contentId,role:"tooltip",children:s||r})})]})})});XC.displayName=Qa;var ZC="TooltipArrow",s3=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Qf(n);return n3(ZC,n).isInside?null:a.jsx(WC,{...s,...r,ref:e})});s3.displayName=ZC;function i3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function o3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function a3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function l3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function c3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),u3(e)}function u3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var d3=GC,h3=KC,f3=QC,eI=YC,tI=XC;const Xf=d3,Jf=h3,Zf=f3,vu=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(tI,{ref:r,sideOffset:e,className:W("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));vu.displayName=tI.displayName;const m3="modulepreload",p3=function(t){return"/"+t},_b={},yd=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=p3(c),c in _b)return;_b[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":m3,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},g3=()=>{};var Eb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},y3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},rI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):y3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new v3;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const E=u<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class v3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const x3=function(t){const e=nI(t);return rI.encodeByteArray(e,!0)},Fh=function(t){return x3(t).replace(/\./g,"")},sI=function(t){try{return rI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=()=>w3().__FIREBASE_DEFAULTS__,_3=()=>{if(typeof process>"u"||typeof Eb>"u")return;const t=Eb.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},E3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sI(t[1]);return e&&JSON.parse(e)},em=()=>{try{return g3()||b3()||_3()||E3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},iI=t=>{var e,n;return(n=(e=em())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},S3=t=>{const e=iI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oI=()=>{var t;return(t=em())==null?void 0:t.config},aI=t=>{var e;return(e=em())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Fh(JSON.stringify(n)),Fh(JSON.stringify(o)),""].join(".")}const fc={};function C3(){const t={prod:[],emulator:[]};for(const e of Object.keys(fc))fc[e]?t.emulator.push(e):t.prod.push(e);return t}function I3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Sb=!1;function cI(t,e){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||fc[t]===e||fc[t]||Sb)return;fc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=C3().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Sb=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=I3(r),g=n("text"),E=document.getElementById(g)||document.createElement("span"),x=n("learnmore"),b=document.getElementById(x)||document.createElement("a"),w=n("preprendIcon"),v=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const _=p.element;l(_),h(b,x);const C=u();c(v,w),_.append(v,E,b,C),document.body.appendChild(_)}i?(E.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function k3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(tn())}function A3(){var e;const t=(e=em())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function j3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function R3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function P3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D3(){const t=tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function M3(){return!A3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function O3(){try{return typeof indexedDB=="object"}catch{return!1}}function L3(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="FirebaseError";class Ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=V3,Object.setPrototypeOf(this,Ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xu.prototype.create)}}class xu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?F3(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ts(s,l,r)}}function F3(t,e){return t.replace(z3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const z3=/\{\$([^}]+)}/g;function U3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ki(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Tb(i)&&Tb(o)){if(!ki(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Tb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $3(t,e){const n=new B3(t,e);return n.subscribe.bind(n)}class B3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");H3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Pp),s.error===void 0&&(s.error=Pp),s.complete===void 0&&(s.complete=Pp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){return t&&t._delegate?t._delegate:t}class Io{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new T3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(G3(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:q3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function q3(t){return t===so?void 0:t}function G3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new W3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const Q3={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Y3=ke.INFO,X3={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},J3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=X3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class gx{constructor(e){this.name=e,this._logLevel=Y3,this._logHandler=J3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Q3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const Z3=(t,e)=>e.some(n=>t instanceof n);let Nb,Cb;function e6(){return Nb||(Nb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function t6(){return Cb||(Cb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uI=new WeakMap,hy=new WeakMap,dI=new WeakMap,Dp=new WeakMap,yx=new WeakMap;function n6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(gi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&uI.set(n,t)}).catch(()=>{}),yx.set(e,t),e}function r6(t){if(hy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});hy.set(t,e)}let fy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s6(t){fy=t(fy)}function i6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mp(this),e,...n);return dI.set(r,e.sort?e.sort():[e]),gi(r)}:t6().includes(t)?function(...e){return t.apply(Mp(this),e),gi(uI.get(this))}:function(...e){return gi(t.apply(Mp(this),e))}}function o6(t){return typeof t=="function"?i6(t):(t instanceof IDBTransaction&&r6(t),Z3(t,e6())?new Proxy(t,fy):t)}function gi(t){if(t instanceof IDBRequest)return n6(t);if(Dp.has(t))return Dp.get(t);const e=o6(t);return e!==t&&(Dp.set(t,e),yx.set(e,t)),e}const Mp=t=>yx.get(t);function a6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=gi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(gi(o.result),c.oldVersion,c.newVersion,gi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const l6=["get","getKey","getAll","getAllKeys","count"],c6=["put","add","delete","clear"],Op=new Map;function Ib(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Op.get(e))return Op.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=c6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||l6.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Op.set(e,i),i}s6(t=>({...t,get:(e,n,r)=>Ib(e,n)||t.get(e,n,r),has:(e,n)=>!!Ib(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function d6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const my="@firebase/app",kb="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new gx("@firebase/app"),h6="@firebase/app-compat",f6="@firebase/analytics-compat",m6="@firebase/analytics",p6="@firebase/app-check-compat",g6="@firebase/app-check",y6="@firebase/auth",v6="@firebase/auth-compat",x6="@firebase/database",w6="@firebase/data-connect",b6="@firebase/database-compat",_6="@firebase/functions",E6="@firebase/functions-compat",S6="@firebase/installations",T6="@firebase/installations-compat",N6="@firebase/messaging",C6="@firebase/messaging-compat",I6="@firebase/performance",k6="@firebase/performance-compat",A6="@firebase/remote-config",j6="@firebase/remote-config-compat",R6="@firebase/storage",P6="@firebase/storage-compat",D6="@firebase/firestore",M6="@firebase/ai",O6="@firebase/firestore-compat",L6="firebase",V6="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="[DEFAULT]",F6={[my]:"fire-core",[h6]:"fire-core-compat",[m6]:"fire-analytics",[f6]:"fire-analytics-compat",[g6]:"fire-app-check",[p6]:"fire-app-check-compat",[y6]:"fire-auth",[v6]:"fire-auth-compat",[x6]:"fire-rtdb",[w6]:"fire-data-connect",[b6]:"fire-rtdb-compat",[_6]:"fire-fn",[E6]:"fire-fn-compat",[S6]:"fire-iid",[T6]:"fire-iid-compat",[N6]:"fire-fcm",[C6]:"fire-fcm-compat",[I6]:"fire-perf",[k6]:"fire-perf-compat",[A6]:"fire-rc",[j6]:"fire-rc-compat",[R6]:"fire-gcs",[P6]:"fire-gcs-compat",[D6]:"fire-fst",[O6]:"fire-fst-compat",[M6]:"fire-vertex","fire-js":"fire-js",[L6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,z6=new Map,gy=new Map;function Ab(t,e){try{t.container.addComponent(e)}catch(n){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ya(t){const e=t.name;if(gy.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;gy.set(e,t);for(const n of zh.values())Ab(n,t);for(const n of z6.values())Ab(n,t);return!0}function vx(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ar(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yi=new xu("app","Firebase",U6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Io("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fl=V6;function hI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:py,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw yi.create("bad-app-name",{appName:String(s)});if(n||(n=oI()),!n)throw yi.create("no-options");const i=zh.get(s);if(i){if(ki(n,i.options)&&ki(r,i.config))return i;throw yi.create("duplicate-app",{appName:s})}const o=new K3(s);for(const c of gy.values())o.addComponent(c);const l=new $6(n,r,o);return zh.set(s,l),l}function fI(t=py){const e=zh.get(t);if(!e&&t===py&&oI())return hI();if(!e)throw yi.create("no-app",{appName:t});return e}function vi(t,e,n){let r=F6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(o.join(" "));return}Ya(new Io(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="firebase-heartbeat-database",H6=1,qc="firebase-heartbeat-store";let Lp=null;function mI(){return Lp||(Lp=a6(B6,H6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(qc)}catch(n){console.warn(n)}}}}).catch(t=>{throw yi.create("idb-open",{originalErrorMessage:t.message})})),Lp}async function W6(t){try{const n=(await mI()).transaction(qc),r=await n.objectStore(qc).get(pI(t));return await n.done,r}catch(e){if(e instanceof Ts)xs.warn(e.message);else{const n=yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(n.message)}}}async function jb(t,e){try{const r=(await mI()).transaction(qc,"readwrite");await r.objectStore(qc).put(e,pI(t)),await r.done}catch(n){if(n instanceof Ts)xs.warn(n.message);else{const r=yi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});xs.warn(r.message)}}}function pI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6=1024,G6=30;class K6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Y6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>G6){const o=X6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rb(),{heartbeatsToSend:r,unsentEntries:s}=Q6(this._heartbeatsCache.heartbeats),i=Fh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return xs.warn(n),""}}}function Rb(){return new Date().toISOString().substring(0,10)}function Q6(t,e=q6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Pb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Pb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Y6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return O3()?L3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await W6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return jb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Pb(t){return Fh(JSON.stringify({version:2,heartbeats:t})).length}function X6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(t){Ya(new Io("platform-logger",e=>new u6(e),"PRIVATE")),Ya(new Io("heartbeat",e=>new K6(e),"PRIVATE")),vi(my,kb,t),vi(my,kb,"esm2020"),vi("fire-js","")}J6("");function gI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z6=gI,yI=new xu("auth","Firebase",gI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new gx("@firebase/auth");function eV(t,...e){Uh.logLevel<=ke.WARN&&Uh.warn(`Auth (${fl}): ${t}`,...e)}function Kd(t,...e){Uh.logLevel<=ke.ERROR&&Uh.error(`Auth (${fl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,...e){throw wx(t,...e)}function hr(t,...e){return wx(t,...e)}function xx(t,e,n){const r={...Z6(),[e]:n};return new xu("auth","Firebase",r).create(e,{appName:t.name})}function xo(t){return xx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Kr(t,"argument-error"),xx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return yI.create(t,...e)}function xe(t,e,...n){if(!t)throw wx(e,...n)}function ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kd(e),new Error(e)}function ws(t,e){t||ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function nV(){return Db()==="http:"||Db()==="https:"}function Db(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nV()||R3()||"connection"in navigator)?navigator.onLine:!0}function sV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ws(n>e,"Short delay should be less than long delay!"),this.isMobile=k3()||P3()}get(){return rV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t,e){ws(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aV=new bu(3e4,6e4);function _x(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ml(t,e,n,r,s={}){return xI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=wu({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return j3()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&hl(t.emulatorConfig.host)&&(u.credentials="include"),vI.fetch()(await wI(t,t.config.apiHost,n,l),u)})}async function xI(t,e,n){t._canInitEmulator=!1;const r={...iV,...e};try{const s=new cV(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw vd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw vd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw vd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw vd(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw xx(t,h,u);Kr(t,h)}}catch(s){if(s instanceof Ts)throw s;Kr(t,"network-request-failed",{message:String(s)})}}async function lV(t,e,n,r,s={}){const i=await ml(t,e,n,r,s);return"mfaPendingCredential"in i&&Kr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function wI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?bx(t.config,s):`${t.config.apiScheme}://${s}`;return oV.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class cV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hr(this.auth,"network-request-failed")),aV.get())})}}function vd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(t,e){return ml(t,"POST","/v1/accounts:delete",e)}async function $h(t,e){return ml(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dV(t,e=!1){const n=Mt(t),r=await n.getIdToken(e),s=Ex(r);xe(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:mc(Vp(s.auth_time)),issuedAtTime:mc(Vp(s.iat)),expirationTime:mc(Vp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Vp(t){return Number(t)*1e3}function Ex(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Kd("JWT malformed, contained fewer than 3 sections"),null;try{const s=sI(n);return s?JSON.parse(s):(Kd("Failed to decode base64 JWT payload"),null)}catch(s){return Kd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Mb(t){const e=Ex(t);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ts&&hV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function hV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mc(this.lastLoginAt),this.creationTime=mc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Gc(t,$h(e,{idToken:n}));xe(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?bI(s.providerUserInfo):[],o=pV(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new vy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function mV(t){const e=Mt(t);await Bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pV(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function bI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(t,e){const n=await xI(t,{},async()=>{const r=wu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await wI(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&hl(t.emulatorConfig.host)&&(c.credentials="include"),vI.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yV(t,e){return ml(t,"POST","/v2/accounts:revokeToken",_x(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=Mb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await gV(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new wa;return r&&(xe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(xe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(xe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t,e){xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class lr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new fV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Gc(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dV(this,e)}reload(){return mV(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ar(this.auth.app))return Promise.reject(xo(this.auth));const e=await this.getIdToken();return await Gc(this,uV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:E,stsTokenManager:x}=n;xe(f&&x,e,"internal-error");const b=wa.fromJSON(this.name,x);xe(typeof f=="string",e,"internal-error"),Fs(r,e.name),Fs(s,e.name),xe(typeof p=="boolean",e,"internal-error"),xe(typeof g=="boolean",e,"internal-error"),Fs(i,e.name),Fs(o,e.name),Fs(l,e.name),Fs(c,e.name),Fs(u,e.name),Fs(h,e.name);const w=new lr({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:b,createdAt:u,lastLoginAt:h});return E&&Array.isArray(E)&&(w.providerData=E.map(v=>({...v}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new wa;s.updateFromServerResponse(n);const i=new lr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];xe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?bI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new wa;l.updateFromIdToken(r);const c=new lr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=new Map;function cs(t){ws(t instanceof Function,"Expected a class definition");let e=Ob.get(t);return e?(ws(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ob.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_I.type="NONE";const Lb=_I;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t,e,n){return`firebase:${t}:${e}:${n}`}class ba{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Qd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Qd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $h(this.auth,{idToken:e}).catch(()=>{});return n?lr._fromGetAccountInfoResponse(this.auth,n,e):null}return lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ba(cs(Lb),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||cs(Lb);const o=Qd(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await $h(e,{idToken:h}).catch(()=>{});if(!p)break;f=await lr._fromGetAccountInfoResponse(e,p,h)}else f=lr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new ba(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new ba(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(II(e))return"Blackberry";if(kI(e))return"Webos";if(SI(e))return"Safari";if((e.includes("chrome/")||TI(e))&&!e.includes("edge/"))return"Chrome";if(CI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function EI(t=tn()){return/firefox\//i.test(t)}function SI(t=tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function TI(t=tn()){return/crios\//i.test(t)}function NI(t=tn()){return/iemobile/i.test(t)}function CI(t=tn()){return/android/i.test(t)}function II(t=tn()){return/blackberry/i.test(t)}function kI(t=tn()){return/webos/i.test(t)}function Sx(t=tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vV(t=tn()){var e;return Sx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function xV(){return D3()&&document.documentMode===10}function AI(t=tn()){return Sx(t)||CI(t)||kI(t)||II(t)||/windows phone/i.test(t)||NI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t,e=[]){let n;switch(t){case"Browser":n=Vb(tn());break;case"Worker":n=`${Vb(tn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bV(t,e={}){return ml(t,"GET","/v2/passwordPolicy",_x(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=6;class EV{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??_V,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fb(this),this.idTokenSubscription=new Fb(this),this.beforeStateQueue=new wV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await ba.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $h(this,{idToken:e}),r=await lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(ar(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ar(this.app))return Promise.reject(xo(this));const n=e?Mt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ar(this.app)?Promise.reject(xo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ar(this.app)?Promise.reject(xo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(cs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await bV(this),n=new EV(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new xu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cs(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await ba.create(this,[cs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ar(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&eV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function tm(t){return Mt(t)}class Fb{constructor(e){this.auth=e,this.observer=null,this.addObserver=$3(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TV(t){Tx=t}function NV(t){return Tx.loadJS(t)}function CV(){return Tx.gapiScript}function IV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kV(t,e){const n=vx(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ki(i,e??{}))return s;Kr(s,"already-initialized")}return n.initialize({options:e})}function AV(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jV(t,e,n){const r=tm(t);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=RI(e),{host:o,port:l}=RV(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(ki(u,r.config.emulator)&&ki(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,hl(o)?(lI(`${i}//${o}${c}`),cI("Auth",!0)):PV()}function RI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RV(t){const e=RI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:zb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:zb(o)}}}function zb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PV(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,n){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t,e){return lV(t,"POST","/v1/accounts:signInWithIdp",_x(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="http://localhost";class ko extends PI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ko(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _a(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_a(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_a(e,n)}buildRequest(){const e={requestUri:DV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u extends Nx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends _u{constructor(){super("facebook.com")}static credential(e){return ko._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Gs.credential(e.oauthAccessToken)}catch{return null}}}Gs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Gs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt extends _u{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ko._fromParams({providerId:Xt.PROVIDER_ID,signInMethod:Xt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xt.credentialFromTaggedObject(e)}static credentialFromError(e){return Xt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xt.credential(n,r)}catch{return null}}}Xt.GOOGLE_SIGN_IN_METHOD="google.com";Xt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends _u{constructor(){super("github.com")}static credential(e){return ko._fromParams({providerId:Ks.PROVIDER_ID,signInMethod:Ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ks.credentialFromTaggedObject(e)}static credentialFromError(e){return Ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ks.credential(e.oauthAccessToken)}catch{return null}}}Ks.GITHUB_SIGN_IN_METHOD="github.com";Ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs extends _u{constructor(){super("twitter.com")}static credential(e,n){return ko._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Qs.credential(n,r)}catch{return null}}}Qs.TWITTER_SIGN_IN_METHOD="twitter.com";Qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await lr._fromIdTokenResponse(e,r,s),o=Ub(r);return new Xa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ub(r);return new Xa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ub(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends Ts{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Hh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Hh(e,n,r,s)}}function DI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Hh._fromErrorAndOperation(t,i,e,r):i})}async function MV(t,e,n=!1){const r=await Gc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OV(t,e,n=!1){const{auth:r}=t;if(ar(r.app))return Promise.reject(xo(r));const s="reauthenticate";try{const i=await Gc(t,DI(r,s,e,t),n);xe(i.idToken,r,"internal-error");const o=Ex(i.idToken);xe(o,r,"internal-error");const{sub:l}=o;return xe(t.uid===l,r,"user-mismatch"),Xa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Kr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LV(t,e,n=!1){if(ar(t.app))return Promise.reject(xo(t));const r="signIn",s=await DI(t,r,e),i=await Xa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function VV(t,e,n,r){return Mt(t).onIdTokenChanged(e,n,r)}function FV(t,e,n){return Mt(t).beforeAuthStateChanged(e,n)}function zV(t,e,n,r){return Mt(t).onAuthStateChanged(e,n,r)}function UV(t){return Mt(t).signOut()}const Wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $V=1e3,BV=10;class OI extends MI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);xV()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,BV):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$V)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}OI.type="LOCAL";const HV=OI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI extends MI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LI.type="SESSION";const VI=LI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new nm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await WV(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Cx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(){return window}function GV(t){$r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){return typeof $r().WorkerGlobalScope<"u"&&typeof $r().importScripts=="function"}async function KV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function QV(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function YV(){return FI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="firebaseLocalStorageDb",XV=1,qh="firebaseLocalStorage",UI="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rm(t,e){return t.transaction([qh],e?"readwrite":"readonly").objectStore(qh)}function JV(){const t=indexedDB.deleteDatabase(zI);return new Eu(t).toPromise()}function xy(){const t=indexedDB.open(zI,XV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(qh,{keyPath:UI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(qh)?e(r):(r.close(),await JV(),e(await xy()))})})}async function $b(t,e,n){const r=rm(t,!0).put({[UI]:e,value:n});return new Eu(r).toPromise()}async function ZV(t,e){const n=rm(t,!1).get(e),r=await new Eu(n).toPromise();return r===void 0?null:r.value}function Bb(t,e){const n=rm(t,!0).delete(e);return new Eu(n).toPromise()}const eF=800,tF=3;class $I{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await xy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nm._getInstance(YV()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await KV(),!this.activeServiceWorker)return;this.sender=new qV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||QV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await xy();return await $b(e,Wh,"1"),await Bb(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$b(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZV(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=rm(s,!1).getAll();return new Eu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$I.type="LOCAL";const nF=$I;new bu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t,e){return e?cs(e):(xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix extends PI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _a(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rF(t){return LV(t.auth,new Ix(t),t.bypassAuthState)}function sF(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),OV(n,new Ix(t),t.bypassAuthState)}async function iF(t){const{auth:e,user:n}=t;return xe(n,e,"internal-error"),MV(n,new Ix(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rF;case"linkViaPopup":case"linkViaRedirect":return iF;case"reauthViaPopup":case"reauthViaRedirect":return sF;default:Kr(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oF=new bu(2e3,1e4);async function xd(t,e,n){if(ar(t.app))return Promise.reject(hr(t,"operation-not-supported-in-this-environment"));const r=tm(t);tV(t,e,Nx);const s=BI(r,n);return new co(r,"signInViaPopup",e,s).executeNotNull()}class co extends HI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,co.currentPopupAction&&co.currentPopupAction.cancel(),co.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){ws(this.filter.length===1,"Popup operations only handle one event");const e=Cx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,co.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oF.get())};e()}}co.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="pendingRedirect",Yd=new Map;class lF extends HI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yd.get(this.auth._key());if(!e){try{const r=await cF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yd.set(this.auth._key(),e)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cF(t,e){const n=hF(e),r=dF(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function uF(t,e){Yd.set(t._key(),e)}function dF(t){return cs(t._redirectPersistence)}function hF(t){return Qd(aF,t.config.apiKey,t.name)}async function fF(t,e,n=!1){if(ar(t.app))return Promise.reject(xo(t));const r=tm(t),s=BI(r,e),o=await new lF(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=10*60*1e3;class pF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gF(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(hr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mF&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hb(e))}saveEventToCache(e){this.cachedEventUids.add(Hb(e)),this.lastProcessedEventTime=Date.now()}}function Hb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gF(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(t,e={}){return ml(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xF=/^https?/;async function wF(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yF(t);for(const n of e)try{if(bF(n))return}catch{}Kr(t,"unauthorized-domain")}function bF(t){const e=yy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xF.test(n))return!1;if(vF.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=new bu(3e4,6e4);function Wb(){const t=$r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function EF(t){return new Promise((e,n)=>{var s,i,o;function r(){Wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wb(),n(hr(t,"network-request-failed"))},timeout:_F.get()})}if((i=(s=$r().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=$r().gapi)!=null&&o.load)r();else{const l=IV("iframefcb");return $r()[l]=()=>{gapi.load?r():n(hr(t,"network-request-failed"))},NV(`${CV()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Xd=null,e})}let Xd=null;function SF(t){return Xd=Xd||EF(t),Xd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=new bu(5e3,15e3),NF="__/auth/iframe",CF="emulator/auth/iframe",IF={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kF=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AF(t){const e=t.config;xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?bx(e,CF):`https://${t.config.authDomain}/${NF}`,r={apiKey:e.apiKey,appName:t.name,v:fl},s=kF.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${wu(r).slice(1)}`}async function jF(t){const e=await SF(t),n=$r().gapi;return xe(n,t,"internal-error"),e.open({where:document.body,url:AF(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IF,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=hr(t,"network-request-failed"),l=$r().setTimeout(()=>{i(o)},TF.get());function c(){$r().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PF=500,DF=600,MF="_blank",OF="http://localhost";class qb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LF(t,e,n,r=PF,s=DF){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...RF,width:r.toString(),height:s.toString(),top:i,left:o},u=tn().toLowerCase();n&&(l=TI(u)?MF:n),EI(u)&&(e=e||OF,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,E])=>`${p}${g}=${E},`,"");if(vV(u)&&l!=="_self")return VF(e||"",l),new qb(null);const f=window.open(e||"",l,h);xe(f,t,"popup-blocked");try{f.focus()}catch{}return new qb(f)}function VF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF="__/auth/handler",zF="emulator/auth/handler",UF=encodeURIComponent("fac");async function Gb(t,e,n,r,s,i){xe(t.config.authDomain,t,"auth-domain-config-required"),xe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fl,eventId:s};if(e instanceof Nx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",U3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof _u){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${UF}=${encodeURIComponent(c)}`:"";return`${$F(t)}?${wu(l).slice(1)}${u}`}function $F({config:t}){return t.emulator?bx(t,zF):`https://${t.authDomain}/${FF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp="webStorageSupport";class BF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=VI,this._completeRedirectFn=fF,this._overrideRedirectResult=uF}async _openPopup(e,n,r,s){var o;ws((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Gb(e,n,r,yy(),s);return LF(e,i,Cx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Gb(e,n,r,yy(),s);return GV(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ws(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await jF(e),r=new pF(e);return n.register("authEvent",s=>(xe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fp,{type:Fp},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Fp];i!==void 0&&n(!!i),Kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wF(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return AI()||SI()||Sx()}}const HF=BF;var Kb="@firebase/auth",Qb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GF(t){Ya(new Io("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;xe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jI(t)},u=new SV(r,s,i,c);return AV(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ya(new Io("auth-internal",e=>{const n=tm(e.getProvider("auth").getImmediate());return(r=>new WF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vi(Kb,Qb,qF(t)),vi(Kb,Qb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=5*60,QF=aI("authIdTokenMaxAge")||KF;let Yb=null;const YF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QF)return;const s=n==null?void 0:n.token;Yb!==s&&(Yb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function XF(t=fI()){const e=vx(t,"auth");if(e.isInitialized())return e.getImmediate();const n=kV(t,{popupRedirectResolver:HF,persistence:[nF,HV,VI]}),r=aI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=YF(i.toString());FV(n,o,()=>o(n.currentUser)),VV(n,l=>o(l))}}const s=iI("auth");return s&&jV(n,`http://${s}`),n}function JF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}TV({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",JF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GF("Browser");var ZF="firebase",e9="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vi(ZF,e9,"app");var Xb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xi,qI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,T){function I(){}I.prototype=T.prototype,N.F=T.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(j,k,M){for(var P=Array(arguments.length-2),H=2;H<arguments.length;H++)P[H-2]=arguments[H];return T.prototype[k].apply(j,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,T,I){I||(I=0);const j=Array(16);if(typeof T=="string")for(var k=0;k<16;++k)j[k]=T.charCodeAt(I++)|T.charCodeAt(I++)<<8|T.charCodeAt(I++)<<16|T.charCodeAt(I++)<<24;else for(k=0;k<16;++k)j[k]=T[I++]|T[I++]<<8|T[I++]<<16|T[I++]<<24;T=N.g[0],I=N.g[1],k=N.g[2];let M=N.g[3],P;P=T+(M^I&(k^M))+j[0]+3614090360&4294967295,T=I+(P<<7&4294967295|P>>>25),P=M+(k^T&(I^k))+j[1]+3905402710&4294967295,M=T+(P<<12&4294967295|P>>>20),P=k+(I^M&(T^I))+j[2]+606105819&4294967295,k=M+(P<<17&4294967295|P>>>15),P=I+(T^k&(M^T))+j[3]+3250441966&4294967295,I=k+(P<<22&4294967295|P>>>10),P=T+(M^I&(k^M))+j[4]+4118548399&4294967295,T=I+(P<<7&4294967295|P>>>25),P=M+(k^T&(I^k))+j[5]+1200080426&4294967295,M=T+(P<<12&4294967295|P>>>20),P=k+(I^M&(T^I))+j[6]+2821735955&4294967295,k=M+(P<<17&4294967295|P>>>15),P=I+(T^k&(M^T))+j[7]+4249261313&4294967295,I=k+(P<<22&4294967295|P>>>10),P=T+(M^I&(k^M))+j[8]+1770035416&4294967295,T=I+(P<<7&4294967295|P>>>25),P=M+(k^T&(I^k))+j[9]+2336552879&4294967295,M=T+(P<<12&4294967295|P>>>20),P=k+(I^M&(T^I))+j[10]+4294925233&4294967295,k=M+(P<<17&4294967295|P>>>15),P=I+(T^k&(M^T))+j[11]+2304563134&4294967295,I=k+(P<<22&4294967295|P>>>10),P=T+(M^I&(k^M))+j[12]+1804603682&4294967295,T=I+(P<<7&4294967295|P>>>25),P=M+(k^T&(I^k))+j[13]+4254626195&4294967295,M=T+(P<<12&4294967295|P>>>20),P=k+(I^M&(T^I))+j[14]+2792965006&4294967295,k=M+(P<<17&4294967295|P>>>15),P=I+(T^k&(M^T))+j[15]+1236535329&4294967295,I=k+(P<<22&4294967295|P>>>10),P=T+(k^M&(I^k))+j[1]+4129170786&4294967295,T=I+(P<<5&4294967295|P>>>27),P=M+(I^k&(T^I))+j[6]+3225465664&4294967295,M=T+(P<<9&4294967295|P>>>23),P=k+(T^I&(M^T))+j[11]+643717713&4294967295,k=M+(P<<14&4294967295|P>>>18),P=I+(M^T&(k^M))+j[0]+3921069994&4294967295,I=k+(P<<20&4294967295|P>>>12),P=T+(k^M&(I^k))+j[5]+3593408605&4294967295,T=I+(P<<5&4294967295|P>>>27),P=M+(I^k&(T^I))+j[10]+38016083&4294967295,M=T+(P<<9&4294967295|P>>>23),P=k+(T^I&(M^T))+j[15]+3634488961&4294967295,k=M+(P<<14&4294967295|P>>>18),P=I+(M^T&(k^M))+j[4]+3889429448&4294967295,I=k+(P<<20&4294967295|P>>>12),P=T+(k^M&(I^k))+j[9]+568446438&4294967295,T=I+(P<<5&4294967295|P>>>27),P=M+(I^k&(T^I))+j[14]+3275163606&4294967295,M=T+(P<<9&4294967295|P>>>23),P=k+(T^I&(M^T))+j[3]+4107603335&4294967295,k=M+(P<<14&4294967295|P>>>18),P=I+(M^T&(k^M))+j[8]+1163531501&4294967295,I=k+(P<<20&4294967295|P>>>12),P=T+(k^M&(I^k))+j[13]+2850285829&4294967295,T=I+(P<<5&4294967295|P>>>27),P=M+(I^k&(T^I))+j[2]+4243563512&4294967295,M=T+(P<<9&4294967295|P>>>23),P=k+(T^I&(M^T))+j[7]+1735328473&4294967295,k=M+(P<<14&4294967295|P>>>18),P=I+(M^T&(k^M))+j[12]+2368359562&4294967295,I=k+(P<<20&4294967295|P>>>12),P=T+(I^k^M)+j[5]+4294588738&4294967295,T=I+(P<<4&4294967295|P>>>28),P=M+(T^I^k)+j[8]+2272392833&4294967295,M=T+(P<<11&4294967295|P>>>21),P=k+(M^T^I)+j[11]+1839030562&4294967295,k=M+(P<<16&4294967295|P>>>16),P=I+(k^M^T)+j[14]+4259657740&4294967295,I=k+(P<<23&4294967295|P>>>9),P=T+(I^k^M)+j[1]+2763975236&4294967295,T=I+(P<<4&4294967295|P>>>28),P=M+(T^I^k)+j[4]+1272893353&4294967295,M=T+(P<<11&4294967295|P>>>21),P=k+(M^T^I)+j[7]+4139469664&4294967295,k=M+(P<<16&4294967295|P>>>16),P=I+(k^M^T)+j[10]+3200236656&4294967295,I=k+(P<<23&4294967295|P>>>9),P=T+(I^k^M)+j[13]+681279174&4294967295,T=I+(P<<4&4294967295|P>>>28),P=M+(T^I^k)+j[0]+3936430074&4294967295,M=T+(P<<11&4294967295|P>>>21),P=k+(M^T^I)+j[3]+3572445317&4294967295,k=M+(P<<16&4294967295|P>>>16),P=I+(k^M^T)+j[6]+76029189&4294967295,I=k+(P<<23&4294967295|P>>>9),P=T+(I^k^M)+j[9]+3654602809&4294967295,T=I+(P<<4&4294967295|P>>>28),P=M+(T^I^k)+j[12]+3873151461&4294967295,M=T+(P<<11&4294967295|P>>>21),P=k+(M^T^I)+j[15]+530742520&4294967295,k=M+(P<<16&4294967295|P>>>16),P=I+(k^M^T)+j[2]+3299628645&4294967295,I=k+(P<<23&4294967295|P>>>9),P=T+(k^(I|~M))+j[0]+4096336452&4294967295,T=I+(P<<6&4294967295|P>>>26),P=M+(I^(T|~k))+j[7]+1126891415&4294967295,M=T+(P<<10&4294967295|P>>>22),P=k+(T^(M|~I))+j[14]+2878612391&4294967295,k=M+(P<<15&4294967295|P>>>17),P=I+(M^(k|~T))+j[5]+4237533241&4294967295,I=k+(P<<21&4294967295|P>>>11),P=T+(k^(I|~M))+j[12]+1700485571&4294967295,T=I+(P<<6&4294967295|P>>>26),P=M+(I^(T|~k))+j[3]+2399980690&4294967295,M=T+(P<<10&4294967295|P>>>22),P=k+(T^(M|~I))+j[10]+4293915773&4294967295,k=M+(P<<15&4294967295|P>>>17),P=I+(M^(k|~T))+j[1]+2240044497&4294967295,I=k+(P<<21&4294967295|P>>>11),P=T+(k^(I|~M))+j[8]+1873313359&4294967295,T=I+(P<<6&4294967295|P>>>26),P=M+(I^(T|~k))+j[15]+4264355552&4294967295,M=T+(P<<10&4294967295|P>>>22),P=k+(T^(M|~I))+j[6]+2734768916&4294967295,k=M+(P<<15&4294967295|P>>>17),P=I+(M^(k|~T))+j[13]+1309151649&4294967295,I=k+(P<<21&4294967295|P>>>11),P=T+(k^(I|~M))+j[4]+4149444226&4294967295,T=I+(P<<6&4294967295|P>>>26),P=M+(I^(T|~k))+j[11]+3174756917&4294967295,M=T+(P<<10&4294967295|P>>>22),P=k+(T^(M|~I))+j[2]+718787259&4294967295,k=M+(P<<15&4294967295|P>>>17),P=I+(M^(k|~T))+j[9]+3951481745&4294967295,N.g[0]=N.g[0]+T&4294967295,N.g[1]=N.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+M&4294967295}r.prototype.v=function(N,T){T===void 0&&(T=N.length);const I=T-this.blockSize,j=this.C;let k=this.h,M=0;for(;M<T;){if(k==0)for(;M<=I;)s(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<T;)if(j[k++]=N.charCodeAt(M++),k==this.blockSize){s(this,j),k=0;break}}else for(;M<T;)if(j[k++]=N[M++],k==this.blockSize){s(this,j),k=0;break}}this.h=k,this.o+=T},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var T=1;T<N.length-8;++T)N[T]=0;T=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=T&255,T/=256;for(this.v(N),N=Array(16),T=0,I=0;I<4;++I)for(let j=0;j<32;j+=8)N[T++]=this.g[I]>>>j&255;return N};function i(N,T){var I=l;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=T(N)}function o(N,T){this.h=T;const I=[];let j=!0;for(let k=N.length-1;k>=0;k--){const M=N[k]|0;j&&M==T||(I[k]=M,j=!1)}this.g=I}var l={};function c(N){return-128<=N&&N<128?i(N,function(T){return new o([T|0],T<0?-1:0)}):new o([N|0],N<0?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return f;if(N<0)return b(u(-N));const T=[];let I=1;for(let j=0;N>=I;j++)T[j]=N/I|0,I*=4294967296;return new o(T,0)}function h(N,T){if(N.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(N.charAt(0)=="-")return b(h(N.substring(1),T));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=u(Math.pow(T,8));let j=f;for(let M=0;M<N.length;M+=8){var k=Math.min(8,N.length-M);const P=parseInt(N.substring(M,M+k),T);k<8?(k=u(Math.pow(T,k)),j=j.j(k).add(u(P))):(j=j.j(I),j=j.add(u(P)))}return j}var f=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-b(this).m();let N=0,T=1;for(let I=0;I<this.g.length;I++){const j=this.i(I);N+=(j>=0?j:4294967296+j)*T,T*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(E(this))return"0";if(x(this))return"-"+b(this).toString(N);const T=u(Math.pow(N,6));var I=this;let j="";for(;;){const k=C(I,T).g;I=w(I,k.j(T));let M=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=k,E(I))return M+j;for(;M.length<6;)M="0"+M;j=M+j}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function E(N){if(N.h!=0)return!1;for(let T=0;T<N.g.length;T++)if(N.g[T]!=0)return!1;return!0}function x(N){return N.h==-1}t.l=function(N){return N=w(this,N),x(N)?-1:E(N)?0:1};function b(N){const T=N.g.length,I=[];for(let j=0;j<T;j++)I[j]=~N.g[j];return new o(I,~N.h).add(p)}t.abs=function(){return x(this)?b(this):this},t.add=function(N){const T=Math.max(this.g.length,N.g.length),I=[];let j=0;for(let k=0;k<=T;k++){let M=j+(this.i(k)&65535)+(N.i(k)&65535),P=(M>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);j=P>>>16,M&=65535,P&=65535,I[k]=P<<16|M}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(N,T){return N.add(b(T))}t.j=function(N){if(E(this)||E(N))return f;if(x(this))return x(N)?b(this).j(b(N)):b(b(this).j(N));if(x(N))return b(this.j(b(N)));if(this.l(g)<0&&N.l(g)<0)return u(this.m()*N.m());const T=this.g.length+N.g.length,I=[];for(var j=0;j<2*T;j++)I[j]=0;for(j=0;j<this.g.length;j++)for(let k=0;k<N.g.length;k++){const M=this.i(j)>>>16,P=this.i(j)&65535,H=N.i(k)>>>16,ae=N.i(k)&65535;I[2*j+2*k]+=P*ae,v(I,2*j+2*k),I[2*j+2*k+1]+=M*ae,v(I,2*j+2*k+1),I[2*j+2*k+1]+=P*H,v(I,2*j+2*k+1),I[2*j+2*k+2]+=M*H,v(I,2*j+2*k+2)}for(N=0;N<T;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=T;N<2*T;N++)I[N]=0;return new o(I,0)};function v(N,T){for(;(N[T]&65535)!=N[T];)N[T+1]+=N[T]>>>16,N[T]&=65535,T++}function _(N,T){this.g=N,this.h=T}function C(N,T){if(E(T))throw Error("division by zero");if(E(N))return new _(f,f);if(x(N))return T=C(b(N),T),new _(b(T.g),b(T.h));if(x(T))return T=C(N,b(T)),new _(b(T.g),T.h);if(N.g.length>30){if(x(N)||x(T))throw Error("slowDivide_ only works with positive integers.");for(var I=p,j=T;j.l(N)<=0;)I=R(I),j=R(j);var k=D(I,1),M=D(j,1);for(j=D(j,2),I=D(I,2);!E(j);){var P=M.add(j);P.l(N)<=0&&(k=k.add(I),M=P),j=D(j,1),I=D(I,1)}return T=w(N,k.j(T)),new _(k,T)}for(k=f;N.l(T)>=0;){for(I=Math.max(1,Math.floor(N.m()/T.m())),j=Math.ceil(Math.log(I)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),M=u(I),P=M.j(T);x(P)||P.l(N)>0;)I-=j,M=u(I),P=M.j(T);E(M)&&(M=p),k=k.add(M),N=w(N,P)}return new _(k,N)}t.B=function(N){return C(this,N).h},t.and=function(N){const T=Math.max(this.g.length,N.g.length),I=[];for(let j=0;j<T;j++)I[j]=this.i(j)&N.i(j);return new o(I,this.h&N.h)},t.or=function(N){const T=Math.max(this.g.length,N.g.length),I=[];for(let j=0;j<T;j++)I[j]=this.i(j)|N.i(j);return new o(I,this.h|N.h)},t.xor=function(N){const T=Math.max(this.g.length,N.g.length),I=[];for(let j=0;j<T;j++)I[j]=this.i(j)^N.i(j);return new o(I,this.h^N.h)};function R(N){const T=N.g.length+1,I=[];for(let j=0;j<T;j++)I[j]=N.i(j)<<1|N.i(j-1)>>>31;return new o(I,N.h)}function D(N,T){const I=T>>5;T%=32;const j=N.g.length-I,k=[];for(let M=0;M<j;M++)k[M]=T>0?N.i(M+I)>>>T|N.i(M+I+1)<<32-T:N.i(M+I);return new o(k,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,qI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,xi=o}).apply(typeof Xb<"u"?Xb:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GI,Jl,KI,Jd,wy,QI,YI,XI;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var y=0;y<d.length;++y){var S=d[y];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var S=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var L=d[A];if(!(L in S))break e;S=S[L]}d=d[d.length-1],A=S[d],y=y(A),y!=A&&y!=null&&e(S,d,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(y){var S=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&S.push([A,y[A]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function c(d,y,S){return d.call.apply(d.bind,arguments)}function u(d,y,S){return u=c,u.apply(null,arguments)}function h(d,y){var S=Array.prototype.slice.call(arguments,1);return function(){var A=S.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function f(d,y){function S(){}S.prototype=y.prototype,d.Z=y.prototype,d.prototype=new S,d.prototype.constructor=d,d.Ob=function(A,L,z){for(var se=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)se[Se-2]=arguments[Se];return y.prototype[L].apply(A,se)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function g(d){const y=d.length;if(y>0){const S=Array(y);for(let A=0;A<y;A++)S[A]=d[A];return S}return[]}function E(d,y){for(let A=1;A<arguments.length;A++){const L=arguments[A];var S=typeof L;if(S=S!="object"?S:L?Array.isArray(L)?"array":S:"null",S=="array"||S=="object"&&typeof L.length=="number"){S=d.length||0;const z=L.length||0;d.length=S+z;for(let se=0;se<z;se++)d[S+se]=L[se]}else d.push(L)}}class x{constructor(y,S){this.i=y,this.j=S,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function b(d){o.setTimeout(()=>{throw d},0)}function w(){var d=N;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class v{constructor(){this.h=this.g=null}add(y,S){const A=_.get();A.set(y,S),this.h?this.h.next=A:this.g=A,this.h=A}}var _=new x(()=>new C,d=>d.reset());class C{constructor(){this.next=this.g=this.h=null}set(y,S){this.h=y,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let R,D=!1,N=new v,T=()=>{const d=Promise.resolve(void 0);R=()=>{d.then(I)}};function I(){for(var d;d=w();){try{d.h.call(d.g)}catch(S){b(S)}var y=_;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}D=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};o.addEventListener("test",S,y),o.removeEventListener("test",S,y)}catch{}return d}();function P(d){return/^[\s\xa0]*$/.test(d)}function H(d,y){k.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}f(H,k),H.prototype.init=function(d,y){const S=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(S=="mouseover"?y=d.fromElement:S=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&H.Z.h.call(this)},H.prototype.h=function(){H.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),X=0;function U(d,y,S,A,L){this.listener=d,this.proxy=null,this.src=y,this.type=S,this.capture=!!A,this.ha=L,this.key=++X,this.da=this.fa=!1}function O(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function F(d,y,S){for(const A in d)y.call(S,d[A],A,d)}function V(d,y){for(const S in d)y.call(void 0,d[S],S,d)}function B(d){const y={};for(const S in d)y[S]=d[S];return y}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(d,y){let S,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(S in A)d[S]=A[S];for(let z=0;z<G.length;z++)S=G[z],Object.prototype.hasOwnProperty.call(A,S)&&(d[S]=A[S])}}function ne(d){this.src=d,this.g={},this.h=0}ne.prototype.add=function(d,y,S,A,L){const z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);const se=ue(d,y,A,L);return se>-1?(y=d[se],S||(y.fa=!1)):(y=new U(y,this.src,z,!!A,L),y.fa=S,d.push(y)),y};function he(d,y){const S=y.type;if(S in d.g){var A=d.g[S],L=Array.prototype.indexOf.call(A,y,void 0),z;(z=L>=0)&&Array.prototype.splice.call(A,L,1),z&&(O(y),d.g[S].length==0&&(delete d.g[S],d.h--))}}function ue(d,y,S,A){for(let L=0;L<d.length;++L){const z=d[L];if(!z.da&&z.listener==y&&z.capture==!!S&&z.ha==A)return L}return-1}var J="closure_lm_"+(Math.random()*1e6|0),Z={};function $(d,y,S,A,L){if(Array.isArray(y)){for(let z=0;z<y.length;z++)$(d,y[z],S,A,L);return null}return S=It(S),d&&d[ae]?d.J(y,S,l(A)?!!A.capture:!!A,L):Y(d,y,S,!1,A,L)}function Y(d,y,S,A,L,z){if(!y)throw Error("Invalid event type");const se=l(L)?!!L.capture:!!L;let Se=tt(d);if(Se||(d[J]=Se=new ne(d)),S=Se.add(y,S,A,se,z),S.proxy)return S;if(A=ie(),S.proxy=A,A.src=d,A.listener=S,d.addEventListener)M||(L=se),L===void 0&&(L=!1),d.addEventListener(y.toString(),A,L);else if(d.attachEvent)d.attachEvent(ye(y.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return S}function ie(){function d(S){return y.call(d.src,d.listener,S)}const y=Ue;return d}function te(d,y,S,A,L){if(Array.isArray(y))for(var z=0;z<y.length;z++)te(d,y[z],S,A,L);else A=l(A)?!!A.capture:!!A,S=It(S),d&&d[ae]?(d=d.i,z=String(y).toString(),z in d.g&&(y=d.g[z],S=ue(y,S,A,L),S>-1&&(O(y[S]),Array.prototype.splice.call(y,S,1),y.length==0&&(delete d.g[z],d.h--)))):d&&(d=tt(d))&&(y=d.g[y.toString()],d=-1,y&&(d=ue(y,S,A,L)),(S=d>-1?y[d]:null)&&me(S))}function me(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ae])he(y.i,d);else{var S=d.type,A=d.proxy;y.removeEventListener?y.removeEventListener(S,A,d.capture):y.detachEvent?y.detachEvent(ye(S),A):y.addListener&&y.removeListener&&y.removeListener(A),(S=tt(y))?(he(S,d),S.h==0&&(S.src=null,y[J]=null)):O(d)}}}function ye(d){return d in Z?Z[d]:Z[d]="on"+d}function Ue(d,y){if(d.da)d=!0;else{y=new H(y,this);const S=d.listener,A=d.ha||d.src;d.fa&&me(d),d=S.call(A,y)}return d}function tt(d){return d=d[J],d instanceof ne?d:null}var Bt="__closure_events_fn_"+(Math.random()*1e9>>>0);function It(d){return typeof d=="function"?d:(d[Bt]||(d[Bt]=function(y){return d.handleEvent(y)}),d[Bt])}function Ne(){j.call(this),this.i=new ne(this),this.M=this,this.G=null}f(Ne,j),Ne.prototype[ae]=!0,Ne.prototype.removeEventListener=function(d,y,S,A){te(this,d,y,S,A)};function Le(d,y){var S,A=d.G;if(A)for(S=[];A;A=A.G)S.push(A);if(d=d.M,A=y.type||y,typeof y=="string")y=new k(y,d);else if(y instanceof k)y.target=y.target||d;else{var L=y;y=new k(A,d),re(y,L)}L=!0;let z,se;if(S)for(se=S.length-1;se>=0;se--)z=y.g=S[se],L=Xn(z,A,!0,y)&&L;if(z=y.g=d,L=Xn(z,A,!0,y)&&L,L=Xn(z,A,!1,y)&&L,S)for(se=0;se<S.length;se++)z=y.g=S[se],L=Xn(z,A,!1,y)&&L}Ne.prototype.N=function(){if(Ne.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const S=d.g[y];for(let A=0;A<S.length;A++)O(S[A]);delete d.g[y],d.h--}}this.G=null},Ne.prototype.J=function(d,y,S,A){return this.i.add(String(d),y,!1,S,A)},Ne.prototype.K=function(d,y,S,A){return this.i.add(String(d),y,!0,S,A)};function Xn(d,y,S,A){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let L=!0;for(let z=0;z<y.length;++z){const se=y[z];if(se&&!se.da&&se.capture==S){const Se=se.listener,bt=se.ha||se.src;se.fa&&he(d.i,se),L=Se.call(bt,A)!==!1&&L}}return L&&!A.defaultPrevented}function ks(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(d,y||0)}function Wi(d){d.g=ks(()=>{d.g=null,d.i&&(d.i=!1,Wi(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Uo extends j{constructor(y,S){super(),this.m=y,this.l=S,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Wi(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qi(d){j.call(this),this.h=d,this.g={}}f(qi,j);var Mu=[];function es(d){F(d.g,function(y,S){this.g.hasOwnProperty(S)&&me(y)},d),d.g={}}qi.prototype.N=function(){qi.Z.N.call(this),es(this)},qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tr=o.JSON.stringify,Gi=o.JSON.parse,Ou=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Jn(){}function Nl(){}var Ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Cl(){k.call(this,"d")}f(Cl,k);function Qi(){k.call(this,"c")}f(Qi,k);var Nr={},Lu=null;function Yi(){return Lu=Lu||new Ne}Nr.Ia="serverreachability";function Vu(d){k.call(this,Nr.Ia,d)}f(Vu,k);function Xi(d){const y=Yi();Le(y,new Vu(y))}Nr.STAT_EVENT="statevent";function Fu(d,y){k.call(this,Nr.STAT_EVENT,d),this.stat=y}f(Fu,k);function Me(d){const y=Yi();Le(y,new Fu(y,d))}Nr.Ja="timingevent";function Ht(d,y){k.call(this,Nr.Ja,d),this.size=y}f(Ht,k);function xt(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},y)}function fn(){this.g=!0}fn.prototype.ua=function(){this.g=!1};function mn(d,y,S,A,L,z){d.info(function(){if(d.g)if(z){var se="",Se=z.split("&");for(let qe=0;qe<Se.length;qe++){var bt=Se[qe].split("=");if(bt.length>1){const kt=bt[0];bt=bt[1];const kr=kt.split("_");se=kr.length>=2&&kr[1]=="type"?se+(kt+"="+bt+"&"):se+(kt+"=redacted&")}}}else se=null;else se=z;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+y+`
`+S+`
`+se})}function nn(d,y,S,A,L,z,se){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+y+`
`+S+`
`+z+" "+se})}function Lt(d,y,S,A){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+wt(d,S)+(A?" "+A:"")})}function As(d,y){d.info(function(){return"TIMEOUT: "+y})}fn.prototype.info=function(){};function wt(d,y){if(!d.g)return y;if(!y)return null;try{const z=JSON.parse(y);if(z){for(d=0;d<z.length;d++)if(Array.isArray(z[d])){var S=z[d];if(!(S.length<2)){var A=S[1];if(Array.isArray(A)&&!(A.length<1)){var L=A[0];if(L!="noop"&&L!="stop"&&L!="close")for(let se=1;se<A.length;se++)A[se]=""}}}}return Tr(z)}catch{return y}}var Tn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Nn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fn;function ts(){}f(ts,Jn),ts.prototype.g=function(){return new XMLHttpRequest},Fn=new ts;function Zn(d){return encodeURIComponent(String(d))}function Cr(d){var y=1;d=d.split(":");const S=[];for(;y>0&&d.length;)S.push(d.shift()),y--;return d.length&&S.push(d.join(":")),S}function pn(d,y,S,A){this.j=d,this.i=y,this.l=S,this.S=A||1,this.V=new qi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $o}function $o(){this.i=null,this.g="",this.h=!1}var X0={},Fm={};function zm(d,y,S){d.M=1,d.A=Uu(Ir(y)),d.u=S,d.R=!0,J0(d,null)}function J0(d,y){d.F=Date.now(),zu(d),d.B=Ir(d.A);var S=d.B,A=d.S;Array.isArray(A)||(A=[String(A)]),dw(S.i,"t",A),d.C=0,S=d.j.L,d.h=new $o,d.g=kw(d.j,S?y:null,!d.u),d.P>0&&(d.O=new Uo(u(d.Y,d,d.g),d.P)),y=d.V,S=d.g,A=d.ba;var L="readystatechange";Array.isArray(L)||(L&&(Mu[0]=L.toString()),L=Mu);for(let z=0;z<L.length;z++){const se=$(S,L[z],A||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=d.J?B(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),Xi(),mn(d.i,d.v,d.B,d.l,d.S,d.u)}pn.prototype.ba=function(d){d=d.target;const y=this.O;y&&Ps(d)==3?y.j():this.Y(d)},pn.prototype.Y=function(d){try{if(d==this.g)e:{const Se=Ps(this.g),bt=this.g.ya(),qe=this.g.ca();if(!(Se<3)&&(Se!=3||this.g&&(this.h.h||this.g.la()||vw(this.g)))){this.K||Se!=4||bt==7||(bt==8||qe<=0?Xi(3):Xi(2)),Um(this);var y=this.g.ca();this.X=y;var S=WR(this);if(this.o=y==200,nn(this.i,this.v,this.B,this.l,this.S,Se,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,L=this.g;if((A=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(A)){var z=A;break t}}z=null}if(d=z)Lt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$m(this,d);else{this.o=!1,this.m=3,Me(12),Ji(this),Il(this);break e}}if(this.R){d=!0;let kt;for(;!this.K&&this.C<S.length;)if(kt=qR(this,S),kt==Fm){Se==4&&(this.m=4,Me(14),d=!1),Lt(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==X0){this.m=4,Me(15),Lt(this.i,this.l,S,"[Invalid Chunk]"),d=!1;break}else Lt(this.i,this.l,kt,null),$m(this,kt);if(Z0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||S.length!=0||this.h.h||(this.m=1,Me(16),d=!1),this.o=this.o&&d,!d)Lt(this.i,this.l,S,"[Invalid Chunked Response]"),Ji(this),Il(this);else if(S.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Ym(se),se.P=!0,Me(11))}}else Lt(this.i,this.l,S,null),$m(this,S);Se==4&&Ji(this),this.o&&!this.K&&(Se==4?Tw(this.j,this):(this.o=!1,zu(this)))}else oP(this.g),y==400&&S.indexOf("Unknown SID")>0?(this.m=3,Me(12)):(this.m=0,Me(13)),Ji(this),Il(this)}}}catch{}finally{}};function WR(d){if(!Z0(d))return d.g.la();const y=vw(d.g);if(y==="")return"";let S="";const A=y.length,L=Ps(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ji(d),Il(d),"";d.h.i=new o.TextDecoder}for(let z=0;z<A;z++)d.h.h=!0,S+=d.h.i.decode(y[z],{stream:!(L&&z==A-1)});return y.length=0,d.h.g+=S,d.C=0,d.h.g}function Z0(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function qR(d,y){var S=d.C,A=y.indexOf(`
`,S);return A==-1?Fm:(S=Number(y.substring(S,A)),isNaN(S)?X0:(A+=1,A+S>y.length?Fm:(y=y.slice(A,A+S),d.C=A+S,y)))}pn.prototype.cancel=function(){this.K=!0,Ji(this)};function zu(d){d.T=Date.now()+d.H,ew(d,d.H)}function ew(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=xt(u(d.aa,d),y)}function Um(d){d.D&&(o.clearTimeout(d.D),d.D=null)}pn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(As(this.i,this.B),this.M!=2&&(Xi(),Me(17)),Ji(this),this.m=2,Il(this)):ew(this,this.T-d)};function Il(d){d.j.I==0||d.K||Tw(d.j,d)}function Ji(d){Um(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,es(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function $m(d,y){try{var S=d.j;if(S.I!=0&&(S.g==d||Bm(S.h,d))){if(!d.L&&Bm(S.h,d)&&S.I==3){try{var A=S.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<d.F)qu(S),Hu(S);else break e;Qm(S),Me(18)}}else S.xa=L[1],0<S.xa-S.K&&L[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=xt(u(S.Va,S),6e3));rw(S.h)<=1&&S.ta&&(S.ta=void 0)}else eo(S,11)}else if((d.L||S.g==d)&&qu(S),!P(y))for(L=S.Ba.g.parse(y),y=0;y<L.length;y++){let qe=L[y];const kt=qe[0];if(!(kt<=S.K))if(S.K=kt,qe=qe[1],S.I==2)if(qe[0]=="c"){S.M=qe[1],S.ba=qe[2];const kr=qe[3];kr!=null&&(S.ka=kr,S.j.info("VER="+S.ka));const to=qe[4];to!=null&&(S.za=to,S.j.info("SVER="+S.za));const Ds=qe[5];Ds!=null&&typeof Ds=="number"&&Ds>0&&(A=1.5*Ds,S.O=A,S.j.info("backChannelRequestTimeoutMs_="+A)),A=S;const Ms=d.g;if(Ms){const Ku=Ms.g?Ms.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ku){var z=A.h;z.g||Ku.indexOf("spdy")==-1&&Ku.indexOf("quic")==-1&&Ku.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Hm(z,z.h),z.h=null))}if(A.G){const Xm=Ms.g?Ms.g.getResponseHeader("X-HTTP-Session-Id"):null;Xm&&(A.wa=Xm,Ye(A.J,A.G,Xm))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-d.F,S.j.info("Handshake RTT: "+S.T+"ms")),A=S;var se=d;if(A.na=Iw(A,A.L?A.ba:null,A.W),se.L){sw(A.h,se);var Se=se,bt=A.O;bt&&(Se.H=bt),Se.D&&(Um(Se),zu(Se)),A.g=se}else Ew(A);S.i.length>0&&Wu(S)}else qe[0]!="stop"&&qe[0]!="close"||eo(S,7);else S.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?eo(S,7):Km(S):qe[0]!="noop"&&S.l&&S.l.qa(qe),S.A=0)}}Xi(4)}catch{}}var GR=class{constructor(d,y){this.g=d,this.map=y}};function tw(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function nw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function rw(d){return d.h?1:d.g?d.g.size:0}function Bm(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Hm(d,y){d.g?d.g.add(y):d.h=y}function sw(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}tw.prototype.cancel=function(){if(this.i=iw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function iw(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const S of d.g.values())y=y.concat(S.G);return y}return g(d.i)}var ow=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function KR(d,y){if(d){d=d.split("&");for(let S=0;S<d.length;S++){const A=d[S].indexOf("=");let L,z=null;A>=0?(L=d[S].substring(0,A),z=d[S].substring(A+1)):L=d[S],y(L,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function js(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof js?(this.l=d.l,kl(this,d.j),this.o=d.o,this.g=d.g,Al(this,d.u),this.h=d.h,Wm(this,hw(d.i)),this.m=d.m):d&&(y=String(d).match(ow))?(this.l=!1,kl(this,y[1]||"",!0),this.o=jl(y[2]||""),this.g=jl(y[3]||"",!0),Al(this,y[4]),this.h=jl(y[5]||"",!0),Wm(this,y[6]||"",!0),this.m=jl(y[7]||"")):(this.l=!1,this.i=new Pl(null,this.l))}js.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(Rl(y,aw,!0),":");var S=this.g;return(S||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Rl(y,aw,!0),"@"),d.push(Zn(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&d.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(Rl(S,S.charAt(0)=="/"?XR:YR,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",Rl(S,ZR)),d.join("")},js.prototype.resolve=function(d){const y=Ir(this);let S=!!d.j;S?kl(y,d.j):S=!!d.o,S?y.o=d.o:S=!!d.g,S?y.g=d.g:S=d.u!=null;var A=d.h;if(S)Al(y,d.u);else if(S=!!d.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var L=y.h.lastIndexOf("/");L!=-1&&(A=y.h.slice(0,L+1)+A)}if(L=A,L==".."||L==".")A="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){A=L.lastIndexOf("/",0)==0,L=L.split("/");const z=[];for(let se=0;se<L.length;){const Se=L[se++];Se=="."?A&&se==L.length&&z.push(""):Se==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),A&&se==L.length&&z.push("")):(z.push(Se),A=!0)}A=z.join("/")}else A=L}return S?y.h=A:S=d.i.toString()!=="",S?Wm(y,hw(d.i)):S=!!d.m,S&&(y.m=d.m),y};function Ir(d){return new js(d)}function kl(d,y,S){d.j=S?jl(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Al(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Wm(d,y,S){y instanceof Pl?(d.i=y,eP(d.i,d.l)):(S||(y=Rl(y,JR)),d.i=new Pl(y,d.l))}function Ye(d,y,S){d.i.set(y,S)}function Uu(d){return Ye(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function jl(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Rl(d,y,S){return typeof d=="string"?(d=encodeURI(d).replace(y,QR),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function QR(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var aw=/[#\/\?@]/g,YR=/[#\?:]/g,XR=/[#\?]/g,JR=/[#\?@]/g,ZR=/#/g;function Pl(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Zi(d){d.g||(d.g=new Map,d.h=0,d.i&&KR(d.i,function(y,S){d.add(decodeURIComponent(y.replace(/\+/g," ")),S)}))}t=Pl.prototype,t.add=function(d,y){Zi(this),this.i=null,d=Bo(this,d);let S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(y),this.h+=1,this};function lw(d,y){Zi(d),y=Bo(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function cw(d,y){return Zi(d),y=Bo(d,y),d.g.has(y)}t.forEach=function(d,y){Zi(this),this.g.forEach(function(S,A){S.forEach(function(L){d.call(y,L,A,this)},this)},this)};function uw(d,y){Zi(d);let S=[];if(typeof y=="string")cw(d,y)&&(S=S.concat(d.g.get(Bo(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)S=S.concat(d[y]);return S}t.set=function(d,y){return Zi(this),this.i=null,d=Bo(this,d),cw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=uw(this,d),d.length>0?String(d[0]):y):y};function dw(d,y,S){lw(d,y),S.length>0&&(d.i=null,d.g.set(Bo(d,y),g(S)),d.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var S=y[A];const L=Zn(S);S=uw(this,S);for(let z=0;z<S.length;z++){let se=L;S[z]!==""&&(se+="="+Zn(S[z])),d.push(se)}}return this.i=d.join("&")};function hw(d){const y=new Pl;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function Bo(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function eP(d,y){y&&!d.j&&(Zi(d),d.i=null,d.g.forEach(function(S,A){const L=A.toLowerCase();A!=L&&(lw(this,A),dw(this,L,S))},d)),d.j=y}function tP(d,y){const S=new fn;if(o.Image){const A=new Image;A.onload=h(Rs,S,"TestLoadImage: loaded",!0,y,A),A.onerror=h(Rs,S,"TestLoadImage: error",!1,y,A),A.onabort=h(Rs,S,"TestLoadImage: abort",!1,y,A),A.ontimeout=h(Rs,S,"TestLoadImage: timeout",!1,y,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else y(!1)}function nP(d,y){const S=new fn,A=new AbortController,L=setTimeout(()=>{A.abort(),Rs(S,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:A.signal}).then(z=>{clearTimeout(L),z.ok?Rs(S,"TestPingServer: ok",!0,y):Rs(S,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(L),Rs(S,"TestPingServer: error",!1,y)})}function Rs(d,y,S,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(S)}catch{}}function rP(){this.g=new Ou}function qm(d){this.i=d.Sb||null,this.h=d.ab||!1}f(qm,Jn),qm.prototype.g=function(){return new $u(this.i,this.h)};function $u(d,y){Ne.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f($u,Ne),t=$u.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,Ml(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Dl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ml(this)),this.g&&(this.readyState=3,Ml(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;fw(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function fw(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Dl(this):Ml(this),this.readyState==3&&fw(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Dl(this))},t.Na=function(d){this.g&&(this.response=d,Dl(this))},t.ga=function(){this.g&&Dl(this)};function Dl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ml(d)}t.setRequestHeader=function(d,y){this.A.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var S=y.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=y.next();return d.join(`\r
`)};function Ml(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty($u.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function mw(d){let y="";return F(d,function(S,A){y+=A,y+=":",y+=S,y+=`\r
`}),y}function Gm(d,y,S){e:{for(A in S){var A=!1;break e}A=!0}A||(S=mw(S),typeof d=="string"?S!=null&&Zn(S):Ye(d,y,S))}function ut(d){Ne.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(ut,Ne);var sP=/^https?$/i,iP=["POST","PUT"];t=ut.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,y,S,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fn.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(z){pw(this,z);return}if(d=S||"",S=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)S.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const z of A.keys())S.set(z,A.get(z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(S.keys()).find(z=>z.toLowerCase()=="content-type"),L=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(iP,y,void 0)>=0)||A||L||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,se]of S)this.g.setRequestHeader(z,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(z){pw(this,z)}};function pw(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,gw(d),Bu(d)}function gw(d){d.A||(d.A=!0,Le(d,"complete"),Le(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Le(this,"complete"),Le(this,"abort"),Bu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bu(this,!0)),ut.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?yw(this):this.Xa())},t.Xa=function(){yw(this)};function yw(d){if(d.h&&typeof i<"u"){if(d.v&&Ps(d)==4)setTimeout(d.Ca.bind(d),0);else if(Le(d,"readystatechange"),Ps(d)==4){d.h=!1;try{const z=d.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var S;if(!(S=y)){var A;if(A=z===0){let se=String(d.D).match(ow)[1]||null;!se&&o.self&&o.self.location&&(se=o.self.location.protocol.slice(0,-1)),A=!sP.test(se?se.toLowerCase():"")}S=A}if(S)Le(d,"complete"),Le(d,"success");else{d.o=6;try{var L=Ps(d)>2?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.ca()+"]",gw(d)}}finally{Bu(d)}}}}function Bu(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const S=d.g;d.g=null,y||Le(d,"ready");try{S.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ps(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Ps(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Gi(y)}};function vw(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function oP(d){const y={};d=(d.g&&Ps(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(P(d[A]))continue;var S=Cr(d[A]);const L=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const z=y[L]||[];y[L]=z,z.push(S)}V(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ol(d,y,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||y}function xw(d){this.za=0,this.i=[],this.j=new fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ol("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ol("baseRetryDelayMs",5e3,d),this.Za=Ol("retryDelaySeedMs",1e4,d),this.Ta=Ol("forwardChannelMaxRetries",2,d),this.va=Ol("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new tw(d&&d.concurrentRequestLimit),this.Ba=new rP,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=xw.prototype,t.ka=8,t.I=1,t.connect=function(d,y,S,A){Me(0),this.W=d,this.H=y||{},S&&A!==void 0&&(this.H.OSID=S,this.H.OAID=A),this.F=this.X,this.J=Iw(this,null,this.W),Wu(this)};function Km(d){if(ww(d),d.I==3){var y=d.V++,S=Ir(d.J);if(Ye(S,"SID",d.M),Ye(S,"RID",y),Ye(S,"TYPE","terminate"),Ll(d,S),y=new pn(d,d.j,y),y.M=2,y.A=Uu(Ir(S)),S=!1,o.navigator&&o.navigator.sendBeacon)try{S=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!S&&o.Image&&(new Image().src=y.A,S=!0),S||(y.g=kw(y.j,null),y.g.ea(y.A)),y.F=Date.now(),zu(y)}Cw(d)}function Hu(d){d.g&&(Ym(d),d.g.cancel(),d.g=null)}function ww(d){Hu(d),d.v&&(o.clearTimeout(d.v),d.v=null),qu(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Wu(d){if(!nw(d.h)&&!d.m){d.m=!0;var y=d.Ea;R||T(),D||(R(),D=!0),N.add(y,d),d.D=0}}function aP(d,y){return rw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=xt(u(d.Ea,d,y),Nw(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const L=new pn(this,this.j,d);let z=this.o;if(this.U&&(z?(z=B(z),re(z,this.U)):z=this.U),this.u!==null||this.R||(L.J=z,z=null),this.S)e:{for(var y=0,S=0;S<this.i.length;S++){t:{var A=this.i[S];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=S;break e}if(y===4096||S===this.i.length-1){y=S+1;break e}}y=1e3}else y=1e3;y=_w(this,L,y),S=Ir(this.J),Ye(S,"RID",d),Ye(S,"CVER",22),this.G&&Ye(S,"X-HTTP-Session-Id",this.G),Ll(this,S),z&&(this.R?y="headers="+Zn(mw(z))+"&"+y:this.u&&Gm(S,this.u,z)),Hm(this.h,L),this.Ra&&Ye(S,"TYPE","init"),this.S?(Ye(S,"$req",y),Ye(S,"SID","null"),L.U=!0,zm(L,S,null)):zm(L,S,y),this.I=2}}else this.I==3&&(d?bw(this,d):this.i.length==0||nw(this.h)||bw(this))};function bw(d,y){var S;y?S=y.l:S=d.V++;const A=Ir(d.J);Ye(A,"SID",d.M),Ye(A,"RID",S),Ye(A,"AID",d.K),Ll(d,A),d.u&&d.o&&Gm(A,d.u,d.o),S=new pn(d,d.j,S,d.D+1),d.u===null&&(S.J=d.o),y&&(d.i=y.G.concat(d.i)),y=_w(d,S,1e3),S.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Hm(d.h,S),zm(S,A,y)}function Ll(d,y){d.H&&F(d.H,function(S,A){Ye(y,A,S)}),d.l&&F({},function(S,A){Ye(y,A,S)})}function _w(d,y,S){S=Math.min(d.i.length,S);const A=d.l?u(d.l.Ka,d.l,d):null;e:{var L=d.i;let Se=-1;for(;;){const bt=["count="+S];Se==-1?S>0?(Se=L[0].g,bt.push("ofs="+Se)):Se=0:bt.push("ofs="+Se);let qe=!0;for(let kt=0;kt<S;kt++){var z=L[kt].g;const kr=L[kt].map;if(z-=Se,z<0)Se=Math.max(0,L[kt].g-100),qe=!1;else try{z="req"+z+"_"||"";try{var se=kr instanceof Map?kr:Object.entries(kr);for(const[to,Ds]of se){let Ms=Ds;l(Ds)&&(Ms=Tr(Ds)),bt.push(z+to+"="+encodeURIComponent(Ms))}}catch(to){throw bt.push(z+"type="+encodeURIComponent("_badmap")),to}}catch{A&&A(kr)}}if(qe){se=bt.join("&");break e}}se=void 0}return d=d.i.splice(0,S),y.G=d,se}function Ew(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;R||T(),D||(R(),D=!0),N.add(y,d),d.A=0}}function Qm(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=xt(u(d.Da,d),Nw(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Sw(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=xt(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Me(10),Hu(this),Sw(this))};function Ym(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function Sw(d){d.g=new pn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=Ir(d.na);Ye(y,"RID","rpc"),Ye(y,"SID",d.M),Ye(y,"AID",d.K),Ye(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ye(y,"TO",d.ia),Ye(y,"TYPE","xmlhttp"),Ll(d,y),d.u&&d.o&&Gm(y,d.u,d.o),d.O&&(d.g.H=d.O);var S=d.g;d=d.ba,S.M=1,S.A=Uu(Ir(y)),S.u=null,S.R=!0,J0(S,d)}t.Va=function(){this.C!=null&&(this.C=null,Hu(this),Qm(this),Me(19))};function qu(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Tw(d,y){var S=null;if(d.g==y){qu(d),Ym(d),d.g=null;var A=2}else if(Bm(d.h,y))S=y.G,sw(d.h,y),A=1;else return;if(d.I!=0){if(y.o)if(A==1){S=y.u?y.u.length:0,y=Date.now()-y.F;var L=d.D;A=Yi(),Le(A,new Ht(A,S)),Wu(d)}else Ew(d);else if(L=y.m,L==3||L==0&&y.X>0||!(A==1&&aP(d,y)||A==2&&Qm(d)))switch(S&&S.length>0&&(y=d.h,y.i=y.i.concat(S)),L){case 1:eo(d,5);break;case 4:eo(d,10);break;case 3:eo(d,6);break;default:eo(d,2)}}}function Nw(d,y){let S=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(S*=2),S*y}function eo(d,y){if(d.j.info("Error code "+y),y==2){var S=u(d.bb,d),A=d.Ua;const L=!A;A=new js(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||kl(A,"https"),Uu(A),L?tP(A.toString(),S):nP(A.toString(),S)}else Me(2);d.I=0,d.l&&d.l.pa(y),Cw(d),ww(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function Cw(d){if(d.I=0,d.ja=[],d.l){const y=iw(d.h);(y.length!=0||d.i.length!=0)&&(E(d.ja,y),E(d.ja,d.i),d.h.i.length=0,g(d.i),d.i.length=0),d.l.oa()}}function Iw(d,y,S){var A=S instanceof js?Ir(S):new js(S);if(A.g!="")y&&(A.g=y+"."+A.g),Al(A,A.u);else{var L=o.location;A=L.protocol,y=y?y+"."+L.hostname:L.hostname,L=+L.port;const z=new js(null);A&&kl(z,A),y&&(z.g=y),L&&Al(z,L),S&&(z.h=S),A=z}return S=d.G,y=d.wa,S&&y&&Ye(A,S,y),Ye(A,"VER",d.ka),Ll(d,A),A}function kw(d,y,S){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new ut(new qm({ab:S})):new ut(d.ma),y.Fa(d.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Aw(){}t=Aw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Gu(){}Gu.prototype.g=function(d,y){return new Cn(d,y)};function Cn(d,y){Ne.call(this),this.g=new xw(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!P(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Ho(this)}f(Cn,Ne),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Km(this.g)},Cn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.v&&(S={},S.__data__=Tr(d),d=S);y.i.push(new GR(y.Ya++,d)),y.I==3&&Wu(y)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Km(this.g),delete this.g,Cn.Z.N.call(this)};function jw(d){Cl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const S in y){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}f(jw,Cl);function Rw(){Qi.call(this),this.status=1}f(Rw,Qi);function Ho(d){this.g=d}f(Ho,Aw),Ho.prototype.ra=function(){Le(this.g,"a")},Ho.prototype.qa=function(d){Le(this.g,new jw(d))},Ho.prototype.pa=function(d){Le(this.g,new Rw)},Ho.prototype.oa=function(){Le(this.g,"b")},Gu.prototype.createWebChannel=Gu.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,XI=function(){return new Gu},YI=function(){return Yi()},QI=Nr,wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Tn.NO_ERROR=0,Tn.TIMEOUT=8,Tn.HTTP_ERROR=6,Jd=Tn,Nn.COMPLETE="complete",KI=Nn,Nl.EventType=Ki,Ki.OPEN="a",Ki.CLOSE="b",Ki.ERROR="c",Ki.MESSAGE="d",Ne.prototype.listen=Ne.prototype.J,Jl=Nl,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,GI=ut}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});const Jb="@firebase/firestore",Zb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new gx("@firebase/firestore");function Qo(){return Ao.logLevel}function le(t,...e){if(Ao.logLevel<=ke.DEBUG){const n=e.map(kx);Ao.debug(`Firestore (${pl}): ${t}`,...n)}}function bs(t,...e){if(Ao.logLevel<=ke.ERROR){const n=e.map(kx);Ao.error(`Firestore (${pl}): ${t}`,...n)}}function jo(t,...e){if(Ao.logLevel<=ke.WARN){const n=e.map(kx);Ao.warn(`Firestore (${pl}): ${t}`,...n)}}function kx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,JI(t,r,n)}function JI(t,e,n){let r=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw bs(r),new Error(r)}function ze(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||JI(e,s,r)}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ek{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class t9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class n9{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new wi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new wi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new ZI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class r9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class s9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new r9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ar(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=i=>{i.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new e_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new e_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=o9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function by(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return zp(s)===zp(i)?Ae(s,i):zp(s)?1:-1}return Ae(t.length,e.length)}const a9=55296,l9=57343;function zp(t){const e=t.charCodeAt(0);return e>=a9&&e<=l9}function Ja(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="__name__";class Pr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Pr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ae(e.length,n.length)}static compareSegments(e,n){const r=Pr.isNumericId(e),s=Pr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Pr.extractNumericId(e).compare(Pr.extractNumericId(n)):by(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}}class Ge extends Pr{construct(e,n,r){return new Ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const c9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Pr{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return c9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t_}static keyField(){return new Pt([t_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new oe(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new oe(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new oe(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Ge.fromString(e))}static fromName(e){return new pe(Ge.fromString(e).popFirst(5))}static empty(){return new pe(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t,e,n){if(!n)throw new oe(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function nk(t,e,n,r){if(e===!0&&r===!0)throw new oe(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function n_(t){if(!pe.isDocumentKey(t))throw new oe(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function r_(t){if(pe.isDocumentKey(t))throw new oe(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function im(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve(12329,{type:typeof t})}function fr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=im(t);throw new oe(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Su(t,e){if(!rk(t))throw new oe(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new oe(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=-62135596800,i_=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*i_);return new Ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<s_)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/i_}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-s_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:vt("string",Ke._jsonSchemaVersion),seconds:vt("number"),nanoseconds:vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new Ke(0,0))}static max(){return new be(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=-1;function u9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=be.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Ai(s,pe.empty(),e)}function d9(t){return new Ai(t.readTime,t.key,Kc)}class Ai{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ai(be.min(),pe.empty(),Kc)}static max(){return new Ai(be.max(),pe.empty(),Kc)}}function h9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gl(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==f9)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new K((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof K?n:K.resolve(n)}catch(n){return K.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):K.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):K.reject(n)}static resolve(e){return new K((n,r)=>{n(e)})}static reject(e){return new K((n,r)=>{r(e)})}static waitFor(e){return new K((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=K.resolve(!1);for(const r of e)n=n.next(s=>s?K.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new K((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new K((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function p9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}om.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=-1;function am(t){return t==null}function Gh(t){return t===0&&1/t==-1/0}function g9(t){return typeof t=="number"&&Number.isInteger(t)&&!Gh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk="";function y9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=o_(e)),e=v9(t.get(n),e);return o_(e)}function v9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case sk:n+="";break;default:n+=i}}return n}function o_(t){return t+sk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ui(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ik(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bd(this.root,e,this.comparator,!0)}}class bd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=i??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ft(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new l_(this.data.getIterator())}getIteratorFrom(e){return new l_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class l_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Pn([])}unionWith(e){let n=new Nt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Pn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ja(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ok("Invalid base64 string: "+i):i}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const x9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ji(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=x9.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(t.seconds),nanos:ft(t.nanos)}}function ft(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ri(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="server_timestamp",lk="__type__",ck="__previous_value__",uk="__local_write_time__";function jx(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lk])==null?void 0:r.stringValue)===ak}function lm(t){const e=t.mapValue.fields[ck];return jx(e)?lm(e):e}function Qc(t){const e=ji(t.mapValue.fields[uk].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Kh="(default)";class Za{constructor(e,n){this.projectId=e,this.database=n||Kh}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database===Kh}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="__type__",hk="__max__",_d={mapValue:{fields:{__type__:{stringValue:hk}}}},fk="__vector__",Qh="value";function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jx(t)?4:_9(t)?9007199254740991:b9(t)?10:11:ve(28295,{value:t})}function Qr(t,e){if(t===e)return!0;const n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Qc(t).isEqual(Qc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ji(s.timestampValue),l=ji(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ri(s.bytesValue).isEqual(Ri(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ft(s.geoPointValue.latitude)===ft(i.geoPointValue.latitude)&&ft(s.geoPointValue.longitude)===ft(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ft(s.integerValue)===ft(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ft(s.doubleValue),l=ft(i.doubleValue);return o===l?Gh(o)===Gh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ja(t.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(a_(o)!==a_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Qr(o[c],l[c])))return!1;return!0}(t,e);default:return ve(52216,{left:t})}}function Yc(t,e){return(t.values||[]).find(n=>Qr(n,e))!==void 0}function el(t,e){if(t===e)return 0;const n=Pi(t),r=Pi(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=ft(i.integerValue||i.doubleValue),c=ft(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return c_(t.timestampValue,e.timestampValue);case 4:return c_(Qc(t),Qc(e));case 5:return by(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ri(i),c=Ri(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ae(l[u],c[u]);if(h!==0)return h}return Ae(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ae(ft(i.latitude),ft(o.latitude));return l!==0?l:Ae(ft(i.longitude),ft(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return u_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,g,E,x;const l=i.fields||{},c=o.fields||{},u=(p=l[Qh])==null?void 0:p.arrayValue,h=(g=c[Qh])==null?void 0:g.arrayValue,f=Ae(((E=u==null?void 0:u.values)==null?void 0:E.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return f!==0?f:u_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===_d.mapValue&&o===_d.mapValue)return 0;if(i===_d.mapValue)return 1;if(o===_d.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=by(c[f],h[f]);if(p!==0)return p;const g=el(l[c[f]],u[h[f]]);if(g!==0)return g}return Ae(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function c_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=ji(t),r=ji(e),s=Ae(n.seconds,r.seconds);return s!==0?s:Ae(n.nanos,r.nanos)}function u_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=el(n[s],r[s]);if(i)return i}return Ae(n.length,r.length)}function tl(t){return _y(t)}function _y(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ji(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=_y(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${_y(n.fields[o])}`;return s+"}"}(t.mapValue):ve(61005,{value:t})}function Zd(t){switch(Pi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lm(t);return e?16+Zd(e):16;case 5:return 2*t.stringValue.length;case 6:return Ri(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Zd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ui(r.fields,(i,o)=>{s+=i.length+Zd(o)}),s}(t.mapValue);default:throw ve(13486,{value:t})}}function d_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ey(t){return!!t&&"integerValue"in t}function Rx(t){return!!t&&"arrayValue"in t}function h_(t){return!!t&&"nullValue"in t}function f_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function eh(t){return!!t&&"mapValue"in t}function b9(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[dk])==null?void 0:r.stringValue)===fk}function pc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ui(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=pc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pc(t.arrayValue.values[n]);return e}return{...t}}function _9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===hk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(n)}setAll(e){let n=Pt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=pc(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];eh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ui(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xn(pc(this.value))}}function mk(t){const e=[];return Ui(t.fields,(n,r)=>{const s=new Pt([n]);if(eh(r)){const i=mk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Pn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Zt(e,0,be.min(),be.min(),be.min(),xn.empty(),0)}static newFoundDocument(e,n,r,s){return new Zt(e,1,n,be.min(),r,s,0)}static newNoDocument(e,n){return new Zt(e,2,n,be.min(),be.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,be.min(),be.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.position=e,this.inclusive=n}}function m_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),n.key):r=el(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function p_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function E9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{}class yt extends pk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new T9(e,n,r):n==="array-contains"?new I9(e,r):n==="in"?new k9(e,r):n==="not-in"?new A9(e,r):n==="array-contains-any"?new j9(e,r):new yt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new N9(e,r):new C9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(el(n,this.value)):n!==null&&Pi(this.value)===Pi(n)&&this.matchesComparison(el(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wr extends pk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new wr(e,n)}matches(e){return gk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function gk(t){return t.op==="and"}function yk(t){return S9(t)&&gk(t)}function S9(t){for(const e of t.filters)if(e instanceof wr)return!1;return!0}function Sy(t){if(t instanceof yt)return t.field.canonicalString()+t.op.toString()+tl(t.value);if(yk(t))return t.filters.map(e=>Sy(e)).join(",");{const e=t.filters.map(n=>Sy(n)).join(",");return`${t.op}(${e})`}}function vk(t,e){return t instanceof yt?function(r,s){return s instanceof yt&&r.op===s.op&&r.field.isEqual(s.field)&&Qr(r.value,s.value)}(t,e):t instanceof wr?function(r,s){return s instanceof wr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&vk(o,s.filters[l]),!0):!1}(t,e):void ve(19439)}function xk(t){return t instanceof yt?function(n){return`${n.field.canonicalString()} ${n.op} ${tl(n.value)}`}(t):t instanceof wr?function(n){return n.op.toString()+" {"+n.getFilters().map(xk).join(" ,")+"}"}(t):"Filter"}class T9 extends yt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class N9 extends yt{constructor(e,n){super(e,"in",n),this.keys=wk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class C9 extends yt{constructor(e,n){super(e,"not-in",n),this.keys=wk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function wk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class I9 extends yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rx(n)&&Yc(n.arrayValue,this.value)}}class k9 extends yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yc(this.value.arrayValue,n)}}class A9 extends yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yc(this.value.arrayValue,n)}}class j9 extends yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function g_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new R9(t,e,n,r,s,i,o)}function Px(t){const e=_e(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),am(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>tl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>tl(r)).join(",")),e.Te=n}return e.Te}function Dx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!E9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!vk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p_(t.startAt,e.startAt)&&p_(t.endAt,e.endAt)}function Ty(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function P9(t,e,n,r,s,i,o,l){return new vl(t,e,n,r,s,i,o,l)}function cm(t){return new vl(t)}function y_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bk(t){return t.collectionGroup!==null}function gc(t){const e=_e(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Nt(Pt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Xc(i,r))}),n.has(Pt.keyField().canonicalString())||e.Ie.push(new Xc(Pt.keyField(),r))}return e.Ie}function Br(t){const e=_e(t);return e.Ee||(e.Ee=D9(e,gc(t))),e.Ee}function D9(t,e){if(t.limitType==="F")return g_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Xc(s.field,i)});const n=t.endAt?new Yh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Yh(t.startAt.position,t.startAt.inclusive):null;return g_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ny(t,e){const n=t.filters.concat([e]);return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xh(t,e,n){return new vl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function um(t,e){return Dx(Br(t),Br(e))&&t.limitType===e.limitType}function _k(t){return`${Px(Br(t))}|lt:${t.limitType}`}function Yo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>xk(s)).join(", ")}]`),am(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>tl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>tl(s)).join(",")),`Target(${r})`}(Br(t))}; limitType=${t.limitType})`}function dm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):pe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of gc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=m_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,gc(r),s)||r.endAt&&!function(o,l,c){const u=m_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,gc(r),s))}(t,e)}function M9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ek(t){return(e,n)=>{let r=!1;for(const s of gc(t)){const i=O9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function O9(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?el(c,u):ve(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ui(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ik(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L9=new ct(pe.comparator);function _s(){return L9}const Sk=new ct(pe.comparator);function Zl(...t){let e=Sk;for(const n of t)e=e.insert(n.key,n);return e}function Tk(t){let e=Sk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function uo(){return yc()}function Nk(){return yc()}function yc(){return new Fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const V9=new ct(pe.comparator),F9=new Nt(pe.comparator);function je(...t){let e=F9;for(const n of t)e=e.add(n);return e}const z9=new Nt(Ae);function U9(){return z9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function Ck(t){return{integerValue:""+t}}function $9(t,e){return g9(e)?Ck(e):Mx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this._=void 0}}function B9(t,e,n){return t instanceof Jc?function(s,i){const o={fields:{[lk]:{stringValue:ak},[uk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&jx(i)&&(i=lm(i)),i&&(o.fields[ck]=i),{mapValue:o}}(n,e):t instanceof nl?kk(t,e):t instanceof Zc?Ak(t,e):function(s,i){const o=Ik(s,i),l=v_(o)+v_(s.Ae);return Ey(o)&&Ey(s.Ae)?Ck(l):Mx(s.serializer,l)}(t,e)}function H9(t,e,n){return t instanceof nl?kk(t,e):t instanceof Zc?Ak(t,e):n}function Ik(t,e){return t instanceof Jh?function(r){return Ey(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Jc extends hm{}class nl extends hm{constructor(e){super(),this.elements=e}}function kk(t,e){const n=jk(e);for(const r of t.elements)n.some(s=>Qr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Zc extends hm{constructor(e){super(),this.elements=e}}function Ak(t,e){let n=jk(e);for(const r of t.elements)n=n.filter(s=>!Qr(s,r));return{arrayValue:{values:n}}}class Jh extends hm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function v_(t){return ft(t.integerValue||t.doubleValue)}function jk(t){return Rx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.field=e,this.transform=n}}function W9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof nl&&s instanceof nl||r instanceof Zc&&s instanceof Zc?Ja(r.elements,s.elements,Qr):r instanceof Jh&&s instanceof Jh?Qr(r.Ae,s.Ae):r instanceof Jc&&s instanceof Jc}(t.transform,e.transform)}class q9{constructor(e,n){this.version=e,this.transformResults=n}}class Hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function th(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fm{}function Pk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Mk(t.key,Hr.none()):new Tu(t.key,t.data,Hr.none());{const n=t.data,r=xn.empty();let s=new Nt(Pt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new $i(t.key,r,new Pn(s.toArray()),Hr.none())}}function G9(t,e,n){t instanceof Tu?function(s,i,o){const l=s.value.clone(),c=w_(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof $i?function(s,i,o){if(!th(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=w_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Dk(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function vc(t,e,n,r){return t instanceof Tu?function(i,o,l,c){if(!th(i.precondition,o))return l;const u=i.value.clone(),h=b_(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof $i?function(i,o,l,c){if(!th(i.precondition,o))return l;const u=b_(i.fieldTransforms,c,o),h=o.data;return h.setAll(Dk(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return th(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function K9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ik(r.transform,s||null);i!=null&&(n===null&&(n=xn.empty()),n.set(r.field,i))}return n||null}function x_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ja(r,s,(i,o)=>W9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Tu extends fm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $i extends fm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Dk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function w_(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,H9(o,l,n[s]))}return r}function b_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,B9(i,o,e))}return r}class Mk extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Q9 extends fm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&G9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nk();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=Pk(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Ja(this.mutations,e.mutations,(n,r)=>x_(n,r))&&Ja(this.baseMutations,e.baseMutations,(n,r)=>x_(n,r))}}class Ox{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return V9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ox(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X9=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Re;function Z9(t){switch(t){case q.OK:return ve(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return ve(15467,{code:t})}}function Ok(t){if(t===void 0)return bs("GRPC error has no .code"),q.UNKNOWN;switch(t){case pt.OK:return q.OK;case pt.CANCELLED:return q.CANCELLED;case pt.UNKNOWN:return q.UNKNOWN;case pt.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case pt.INTERNAL:return q.INTERNAL;case pt.UNAVAILABLE:return q.UNAVAILABLE;case pt.UNAUTHENTICATED:return q.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case pt.NOT_FOUND:return q.NOT_FOUND;case pt.ALREADY_EXISTS:return q.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return q.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case pt.ABORTED:return q.ABORTED;case pt.OUT_OF_RANGE:return q.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return q.UNIMPLEMENTED;case pt.DATA_LOSS:return q.DATA_LOSS;default:return ve(39323,{code:t})}}(Re=pt||(pt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=new xi([4294967295,4294967295],0);function __(t){const e=ez().encode(t),n=new qI;return n.update(e),new Uint8Array(n.digest())}function E_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xi([n,r],0),new xi([s,i],0)]}class Lx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ec(`Invalid padding: ${n}`);if(r<0)throw new ec(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ec(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ec(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(xi.fromNumber(r)));return s.compare(tz)===1&&(s=new xi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=__(e),[r,s]=E_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Lx(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=__(e),[r,s]=E_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Nu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mm(be.min(),s,new ct(Ae),_s(),je())}}class Nu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Nu(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Lk{constructor(e,n){this.targetId=e,this.Ce=n}}class Vk{constructor(e,n,r=Ot.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class S_{constructor(){this.ve=0,this.Fe=T_(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),n=je(),r=je();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve(38017,{changeType:i})}}),new Nu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=T_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nz{constructor(e){this.Ge=e,this.ze=new Map,this.je=_s(),this.Je=Ed(),this.He=Ed(),this.Ye=new ct(Ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Ty(i))if(r===0){const o=new pe(i.path);this.et(n,o,Zt.newNoDocument(o,be.min()))}else ze(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Ri(r).toUint8Array()}catch(c){if(c instanceof ok)return jo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Lx(o,s,i)}catch(c){return jo(c instanceof ec?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Ty(l.target)){const c=new pe(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Zt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=je();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new mm(e,n,this.Ye,this.je,r);return this.je=_s(),this.Je=Ed(),this.He=Ed(),this.Ye=new ct(Ae),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new S_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Nt(Ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Nt(Ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new S_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ed(){return new ct(pe.comparator)}function T_(){return new ct(pe.comparator)}const rz={asc:"ASCENDING",desc:"DESCENDING"},sz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iz={and:"AND",or:"OR"};class oz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cy(t,e){return t.useProto3Json||am(e)?e:{value:e}}function Zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function az(t,e){return Zh(t,e.toTimestamp())}function Wr(t){return ze(!!t,49232),be.fromTimestamp(function(n){const r=ji(n);return new Ke(r.seconds,r.nanos)}(t))}function Vx(t,e){return Iy(t,e).canonicalString()}function Iy(t,e){const n=function(s){return new Ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zk(t){const e=Ge.fromString(t);return ze(Wk(e),10190,{key:e.toString()}),e}function ky(t,e){return Vx(t.databaseId,e.path)}function Up(t,e){const n=zk(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe($k(n))}function Uk(t,e){return Vx(t.databaseId,e)}function lz(t){const e=zk(t);return e.length===4?Ge.emptyPath():$k(e)}function Ay(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $k(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function N_(t,e,n){return{name:ky(t,e),fields:n.value.mapValue.fields}}function cz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ve(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(ze(h===void 0||typeof h=="string",58123),Ot.fromBase64String(h||"")):(ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ot.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?q.UNKNOWN:Ok(u.code);return new oe(h,u.message||"")}(o);n=new Vk(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Up(t,r.document.name),i=Wr(r.document.updateTime),o=r.document.createTime?Wr(r.document.createTime):be.min(),l=new xn({mapValue:{fields:r.document.fields}}),c=Zt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new nh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Up(t,r.document),i=r.readTime?Wr(r.readTime):be.min(),o=Zt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new nh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Up(t,r.document),i=r.removedTargetIds||[];n=new nh([],i,s,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new J9(s,i),l=r.targetId;n=new Lk(l,o)}}return n}function uz(t,e){let n;if(e instanceof Tu)n={update:N_(t,e.key,e.value)};else if(e instanceof Mk)n={delete:ky(t,e.key)};else if(e instanceof $i)n={update:N_(t,e.key,e.data),updateMask:xz(e.fieldMask)};else{if(!(e instanceof Q9))return ve(16599,{Vt:e.type});n={verify:ky(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Jc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Jh)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ve(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:az(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ve(27497)}(t,e.precondition)),n}function dz(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Wr(s.updateTime):Wr(i);return o.isEqual(be.min())&&(o=Wr(i)),new q9(o,s.transformResults||[])}(n,e))):[]}function hz(t,e){return{documents:[Uk(t,e.path)]}}function fz(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Uk(t,s);const i=function(u){if(u.length!==0)return Hk(wr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Xo(p.field),direction:gz(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Cy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function mz(t){let e=lz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=Bk(f);return p instanceof wr&&yk(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(E){return new Xc(Jo(E.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,am(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new Yh(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new Yh(g,p)}(n.endAt)),P9(e,s,o,i,l,"F",c,u)}function pz(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Bk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jo(n.unaryFilter.field);return yt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Jo(n.unaryFilter.field);return yt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Jo(n.unaryFilter.field);return yt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jo(n.unaryFilter.field);return yt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}}(t):t.fieldFilter!==void 0?function(n){return yt.create(Jo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wr.create(n.compositeFilter.filters.map(r=>Bk(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve(1026)}}(n.compositeFilter.op))}(t):ve(30097,{filter:t})}function gz(t){return rz[t]}function yz(t){return sz[t]}function vz(t){return iz[t]}function Xo(t){return{fieldPath:t.canonicalString()}}function Jo(t){return Pt.fromServerFormat(t.fieldPath)}function Hk(t){return t instanceof yt?function(n){if(n.op==="=="){if(f_(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NAN"}};if(h_(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(f_(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NAN"}};if(h_(n.value))return{unaryFilter:{field:Xo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xo(n.field),op:yz(n.op),value:n.value}}}(t):t instanceof wr?function(n){const r=n.getFilters().map(s=>Hk(s));return r.length===1?r[0]:{compositeFilter:{op:vz(n.op),filters:r}}}(t):ve(54877,{filter:t})}function xz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Wk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n,r,s,i=be.min(),o=be.min(),l=Ot.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ri(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ri(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.yt=e}}function bz(t){const e=mz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(){this.Cn=new Ez}addToCollectionParentIndex(e,n){return this.Cn.add(n),K.resolve()}getCollectionParents(e,n){return K.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return K.resolve()}deleteFieldIndex(e,n){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,n){return K.resolve()}getDocumentsMatchingTarget(e,n){return K.resolve(null)}getIndexType(e,n){return K.resolve(0)}getFieldIndexes(e,n){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,n){return K.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,n){return K.resolve(Ai.min())}updateCollectionGroup(e,n,r){return K.resolve()}updateIndexEntries(e,n){return K.resolve()}}class Ez{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Nt(Ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Nt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qk=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(qk,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rl(0)}static cr(){return new rl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="LruGarbageCollector",Sz=1048576;function k_([t,e],[n,r]){const s=Ae(t,n);return s===0?Ae(e,r):s}class Tz{constructor(e){this.Ir=e,this.buffer=new Nt(k_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();k_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Nz{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(I_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yl(n)?le(I_,"Ignoring IndexedDB error during garbage collection: ",n):await gl(n)}await this.Vr(3e5)})}}class Cz{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return K.resolve(om.ce);const r=new Tz(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(C_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),C_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Qo()<=ke.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function Iz(t,e){return new Cz(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(){this.changes=new Fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?K.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&vc(r.mutation,s,Pn.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const s=uo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Zl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=uo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=_s();const o=yc(),l=function(){return yc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof $i)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),vc(h.mutation,u,h.mutation.getFieldMask(),Ke.now())):o.set(u.key,Pn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new Az(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=yc();let s=new ct((o,l)=>o-l),i=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Pn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||je()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=Nk();h.forEach(p=>{if(!i.has(p)){const g=Pk(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return K.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):K.resolve(uo());let l=Kc,c=i;return o.next(u=>K.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?K.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,je())).next(h=>({batchId:l,changes:Tk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let s=Zl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Zl();return this.indexManager.getCollectionParents(e,i).next(l=>K.forEach(l,c=>{const u=function(f,p){return new vl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Zt.newInvalidDocument(h)))});let l=Zl();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&vc(h.mutation,u,Pn.empty(),Ke.now()),dm(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return K.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Wr(s.createTime)}}(n)),K.resolve()}getNamedQuery(e,n){return K.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:bz(s.bundledQuery),readTime:Wr(s.readTime)}}(n)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(){this.overlays=new ct(pe.comparator),this.qr=new Map}getOverlay(e,n){return K.resolve(this.overlays.get(n))}getOverlays(e,n){const r=uo();return K.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),K.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),K.resolve()}getOverlaysForCollection(e,n,r){const s=uo(),i=n.length+1,o=new pe(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return K.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ct((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=uo(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=uo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return K.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new X9(n,r));let i=this.qr.get(n);i===void 0&&(i=je(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(){this.Qr=new Nt(At.$r),this.Ur=new Nt(At.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new At(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new At(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new pe(new Ge([])),r=new At(n,e),s=new At(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new Ge([])),r=new At(n,e),s=new At(n,e+1);let i=je();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new At(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||Ae(e.Yr,n.Yr)}static Kr(e,n){return Ae(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Nt(At.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Y9(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new At(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return K.resolve(o)}lookupMutationBatch(e,n){return K.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return K.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Ax:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),s=new At(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),K.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(Ae);return n.forEach(s=>{const i=new At(s,0),o=new At(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),K.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;pe.isDocumentKey(i)||(i=i.child(""));const o=new At(new pe(i),0);let l=new Nt(Ae);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),K.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return K.forEach(n.mutations,s=>{const i=new At(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new At(n,0),s=this.Zr.firstAfterOrEqual(r);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e){this.ri=e,this.docs=function(){return new ct(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return K.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=_s();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Zt.newInvalidDocument(s))}),K.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=_s();const o=n.path,l=new pe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||h9(d9(h),r)<=0||(s.has(h.key)||dm(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return K.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ve(9500)}ii(e,n){return K.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Lz(this)}getSize(e){return K.resolve(this.size)}}class Lz extends kz{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),K.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e){this.persistence=e,this.si=new Fo(n=>Px(n),Dx),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.oi=0,this._i=new Fx,this.targetCount=0,this.ai=rl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),K.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new rl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,K.resolve()}updateTargetData(e,n){return this.Pr(n),K.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),K.waitFor(i).next(()=>s)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return K.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),K.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),K.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),K.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return K.resolve(r)}containsKey(e,n){return K.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n){this.ui={},this.overlays={},this.ci=new om(0),this.li=!1,this.li=!0,this.hi=new Dz,this.referenceDelegate=e(this),this.Pi=new Vz(this),this.indexManager=new _z,this.remoteDocumentCache=function(s){return new Oz(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new wz(n),this.Ii=new Rz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Pz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Mz(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const s=new Fz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return K.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Fz extends m9{constructor(e){super(),this.currentSequenceNumber=e}}class zx{constructor(e){this.persistence=e,this.Ri=new Fx,this.Vi=null}static mi(e){return new zx(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),K.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),K.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,r=>{const s=pe.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,be.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return K.or([()=>K.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ef{constructor(e,n){this.persistence=e,this.pi=new Fo(r=>y9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Iz(this,n)}static mi(e,n){return new ef(e,n)}Ei(){}di(e){return K.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return K.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?K.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,be.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),K.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Zd(e.data.value)),n}br(e,n,r){return K.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return K.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=je(),s=je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Ux(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return M3()?8:p9(tn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zz;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Qo()<=ke.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Yo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Qo()<=ke.DEBUG&&le("QueryEngine","Query:",Yo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Qo()<=ke.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Yo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Br(n))):K.resolve())}ys(e,n){if(y_(n))return K.resolve(null);let r=Br(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Xh(n,null,"F"),r=Br(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=je(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,Xh(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return y_(n)||s.isEqual(be.min())?K.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?K.resolve(null):(Qo()<=ke.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Yo(n)),this.vs(e,o,n,u9(s,Kc)).next(l=>l))})}Ds(e,n){let r=new Nt(Ek(e));return n.forEach((s,i)=>{dm(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Qo()<=ke.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Yo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ai.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="LocalStore",$z=3e8;class Bz{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ct(Ae),this.xs=new Fo(i=>Px(i),Dx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jz(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Hz(t,e,n,r){return new Bz(t,e,n,r)}async function Kk(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=je();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function Wz(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let g=K.resolve();return p.forEach(E=>{g=g.next(()=>h.getEntry(c,E)).next(x=>{const b=u.docVersions.get(E);ze(b!==null,48541),x.version.compareTo(b)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=je();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Qk(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qz(t,e){const n=_e(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Ot.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(x,b,w){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=$z?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(i,g))});let c=_s(),u=je();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(Gz(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(be.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return K.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function Gz(t,e,n){let r=je(),s=je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=_s();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(be.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):le($x,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function Kz(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ax),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qz(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,K.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ri(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function jy(t,e,n){const r=_e(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!yl(o))throw o;le($x,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function A_(t,e,n){const r=_e(t);let s=be.min(),i=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=_e(c),p=f.xs.get(h);return p!==void 0?K.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,Br(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:be.min(),n?i:je())).next(l=>(Yz(r,M9(e),l),{documents:l,Qs:i})))}function Yz(t,e,n){let r=t.Os.get(e)||be.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class j_{constructor(){this.activeTargetIds=U9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xz{constructor(){this.Mo=new j_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new j_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="ConnectivityMonitor";class P_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(R_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(R_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd=null;function Ry(){return Sd===null?Sd=function(){return 268435456+Math.round(2147483648*Math.random())}():Sd++,"0x"+Sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="RestConnection",Zz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class e8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Kh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Ry(),l=this.zo(e,n.toUriEncodedString());le($p,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=hl(u);return this.Jo(e,l,c,r,h).then(f=>(le($p,`Received RPC '${e}' ${o}: `,f),f),f=>{throw jo($p,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Zz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class n8 extends e8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Ry();return new Promise((l,c)=>{const u=new GI;u.setWithCredentials(!0),u.listenOnce(KI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Jd.NO_ERROR:const f=u.getResponseJson();le(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Jd.TIMEOUT:le(Kt,`RPC '${e}' ${o} timed out`),c(new oe(q.DEADLINE_EXCEEDED,"Request time out"));break;case Jd.HTTP_ERROR:const p=u.getStatus();if(le(Kt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const x=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(v)>=0?v:q.UNKNOWN}(E.status);c(new oe(x,E.message))}else c(new oe(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new oe(q.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{le(Kt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);le(Kt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Ry(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=XI(),l=YI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");le(Kt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,g=!1;const E=new t8({Yo:b=>{g?le(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(le(Kt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),le(Kt,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Zo:()=>f.close()}),x=(b,w,v)=>{b.listen(w,_=>{try{v(_)}catch(C){setTimeout(()=>{throw C},0)}})};return x(f,Jl.EventType.OPEN,()=>{g||(le(Kt,`RPC '${e}' stream ${s} transport opened.`),E.o_())}),x(f,Jl.EventType.CLOSE,()=>{g||(g=!0,le(Kt,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(f))}),x(f,Jl.EventType.ERROR,b=>{g||(g=!0,jo(Kt,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),E.a_(new oe(q.UNAVAILABLE,"The operation could not be completed")))}),x(f,Jl.EventType.MESSAGE,b=>{var w;if(!g){const v=b.data[0];ze(!!v,16349);const _=v,C=(_==null?void 0:_.error)||((w=_[0])==null?void 0:w.error);if(C){le(Kt,`RPC '${e}' stream ${s} received error:`,C);const R=C.status;let D=function(I){const j=pt[I];if(j!==void 0)return Ok(j)}(R),N=C.message;D===void 0&&(D=q.INTERNAL,N="Unknown error status: "+R+" with message "+C.message),g=!0,E.a_(new oe(D,N)),f.close()}else le(Kt,`RPC '${e}' stream ${s} received:`,v),E.u_(v)}}),x(l,QI.STAT_EVENT,b=>{b.stat===wy.PROXY?le(Kt,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===wy.NOPROXY&&le(Kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.__()},0),E}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Bp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){return new oz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="PersistentStream";class Xk{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Yk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(bs(n.toString()),bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new oe(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return le(D_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(le(D_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r8 extends Xk{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cz(this.serializer,e),r=function(i){if(!("targetChange"in i))return be.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?Wr(o.readTime):be.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Ay(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Ty(c)?{documents:hz(i,c)}:{query:fz(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Fk(i,o.resumeToken);const u=Cy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(be.min())>0){l.readTime=Zh(i,o.snapshotVersion.toTimestamp());const u=Cy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=pz(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Ay(this.serializer),n.removeTarget=e,this.q_(n)}}class s8 extends Xk{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=dz(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Ay(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>uz(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{}class o8 extends i8{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Iy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(q.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Iy(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class a8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bs(n),this.aa=!1):le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro="RemoteStore";class l8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{zo(this)&&(le(Ro,"Restarting streams for network reachability change."),await async function(c){const u=_e(c);u.Ea.add(4),await Cu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await gm(u)}(this))})}),this.Ra=new a8(r,s)}}async function gm(t){if(zo(t))for(const e of t.da)await e(!0)}async function Cu(t){for(const e of t.da)await e(!1)}function Jk(t,e){const n=_e(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),qx(n)?Wx(n):xl(n).O_()&&Hx(n,e))}function Bx(t,e){const n=_e(t),r=xl(n);n.Ia.delete(e),r.O_()&&Zk(n,e),n.Ia.size===0&&(r.O_()?r.L_():zo(n)&&n.Ra.set("Unknown"))}function Hx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xl(t).Y_(e)}function Zk(t,e){t.Va.Ue(e),xl(t).Z_(e)}function Wx(t){t.Va=new nz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),xl(t).start(),t.Ra.ua()}function qx(t){return zo(t)&&!xl(t).x_()&&t.Ia.size>0}function zo(t){return _e(t).Ea.size===0}function e2(t){t.Va=void 0}async function c8(t){t.Ra.set("Online")}async function u8(t){t.Ia.forEach((e,n)=>{Hx(t,e)})}async function d8(t,e){e2(t),qx(t)?(t.Ra.ha(e),Wx(t)):t.Ra.set("Unknown")}async function h8(t,e,n){if(t.Ra.set("Online"),e instanceof Vk&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){le(Ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tf(t,r)}else if(e instanceof nh?t.Va.Ze(e):e instanceof Lk?t.Va.st(e):t.Va.tt(e),!n.isEqual(be.min()))try{const r=await Qk(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Ot.EMPTY_BYTE_STRING,h.snapshotVersion)),Zk(i,c);const f=new ri(h.target,c,u,h.sequenceNumber);Hx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){le(Ro,"Failed to raise snapshot:",r),await tf(t,r)}}async function tf(t,e,n){if(!yl(e))throw e;t.Ea.add(1),await Cu(t),t.Ra.set("Offline"),n||(n=()=>Qk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le(Ro,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gm(t)})}function t2(t,e){return e().catch(n=>tf(t,n,e))}async function ym(t){const e=_e(t),n=Di(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ax;for(;f8(e);)try{const s=await Kz(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,m8(e,s)}catch(s){await tf(e,s)}n2(e)&&r2(e)}function f8(t){return zo(t)&&t.Ta.length<10}function m8(t,e){t.Ta.push(e);const n=Di(t);n.O_()&&n.X_&&n.ea(e.mutations)}function n2(t){return zo(t)&&!Di(t).x_()&&t.Ta.length>0}function r2(t){Di(t).start()}async function p8(t){Di(t).ra()}async function g8(t){const e=Di(t);for(const n of t.Ta)e.ea(n.mutations)}async function y8(t,e,n){const r=t.Ta.shift(),s=Ox.from(r,e,n);await t2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ym(t)}async function v8(t,e){e&&Di(t).X_&&await async function(r,s){if(function(o){return Z9(o)&&o!==q.ABORTED}(s.code)){const i=r.Ta.shift();Di(r).B_(),await t2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ym(r)}}(t,e),n2(t)&&r2(t)}async function M_(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),le(Ro,"RemoteStore received new credentials");const r=zo(n);n.Ea.add(3),await Cu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gm(n)}async function x8(t,e){const n=_e(t);e?(n.Ea.delete(2),await gm(n)):e||(n.Ea.add(2),await Cu(n),n.Ra.set("Unknown"))}function xl(t){return t.ma||(t.ma=function(n,r,s){const i=_e(n);return i.sa(),new r8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:c8.bind(null,t),t_:u8.bind(null,t),r_:d8.bind(null,t),H_:h8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),qx(t)?Wx(t):t.Ra.set("Unknown")):(await t.ma.stop(),e2(t))})),t.ma}function Di(t){return t.fa||(t.fa=function(n,r,s){const i=_e(n);return i.sa(),new s8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:p8.bind(null,t),r_:v8.bind(null,t),ta:g8.bind(null,t),na:y8.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ym(t)):(await t.fa.stop(),t.Ta.length>0&&(le(Ro,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Gx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kx(t,e){if(bs("AsyncQueue",`${e}: ${t}`),yl(t))return new oe(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{static emptySet(e){return new Ea(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=Zl(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ea)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ea;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.ga=new ct(pe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class sl{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new sl(e,n,Ea.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&um(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class b8{constructor(){this.queries=L_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=_e(n),i=s.queries;s.queries=L_(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new oe(q.ABORTED,"Firestore shutting down"))}}function L_(){return new Fo(t=>_k(t),um)}async function s2(t,e){const n=_e(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new w8,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Kx(o,`Initialization of query '${Yo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Qx(n)}async function i2(t,e){const n=_e(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _8(t,e){const n=_e(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Qx(n)}function E8(t,e,n){const r=_e(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Qx(t){t.Ca.forEach(e=>{e.next()})}var Py,V_;(V_=Py||(Py={})).Ma="default",V_.Cache="cache";class o2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new sl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Py.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this.key=e}}class l2{constructor(e){this.key=e}}class S8{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=Ek(e),this.tu=new Ea(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new O_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=dm(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?E!==x&&(r.track({type:3,doc:g}),b=!0):this.su(p,g)||(r.track({type:2,doc:g}),b=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),b=!0):p&&!g&&(r.track({type:1,doc:p}),b=!0,(c||u)&&(l=!0)),b&&(g?(o=o.add(g),i=x?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,E){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:b})}};return x(g)-x(E)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new sl(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new O_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new l2(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new a2(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return sl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yx="SyncEngine";class T8{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class N8{constructor(e){this.key=e,this.hu=!1}}class C8{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Fo(l=>_k(l),um),this.Iu=new Map,this.Eu=new Set,this.du=new ct(pe.comparator),this.Au=new Map,this.Ru=new Fx,this.Vu={},this.mu=new Map,this.fu=rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function I8(t,e,n=!0){const r=m2(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await c2(r,e,n,!0),s}async function k8(t,e){const n=m2(t);await c2(n,e,!0,!1)}async function c2(t,e,n,r){const s=await Qz(t.localStore,Br(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await A8(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Jk(t.remoteStore,s),l}async function A8(t,e,n,r,s){t.pu=(f,p,g)=>async function(x,b,w,v){let _=b.view.ru(w);_.Cs&&(_=await A_(x.localStore,b.query,!1).then(({documents:N})=>b.view.ru(N,_)));const C=v&&v.targetChanges.get(b.targetId),R=v&&v.targetMismatches.get(b.targetId)!=null,D=b.view.applyChanges(_,x.isPrimaryClient,C,R);return z_(x,b.targetId,D.au),D.snapshot}(t,f,p,g);const i=await A_(t.localStore,e,!0),o=new S8(e,i.Qs),l=o.ru(i.documents),c=Nu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);z_(t,n,u.au);const h=new T8(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function j8(t,e,n){const r=_e(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!um(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await jy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Bx(r.remoteStore,s.targetId),Dy(r,s.targetId)}).catch(gl)):(Dy(r,s.targetId),await jy(r.localStore,s.targetId,!0))}async function R8(t,e){const n=_e(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bx(n.remoteStore,r.targetId))}async function P8(t,e,n){const r=z8(t);try{const s=await function(o,l){const c=_e(o),u=Ke.now(),h=l.reduce((g,E)=>g.add(E.key),je());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=_s(),x=je();return c.Ns.getEntries(g,h).next(b=>{E=b,E.forEach((w,v)=>{v.isValidDocument()||(x=x.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,E)).next(b=>{f=b;const w=[];for(const v of l){const _=K9(v,f.get(v.key).overlayedDocument);_!=null&&w.push(new $i(v.key,_,mk(_.value.mapValue),Hr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,w,l)}).next(b=>{p=b;const w=b.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(g,b.batchId,w)})}).then(()=>({batchId:p.batchId,changes:Tk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new ct(Ae)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Iu(r,s.changes),await ym(r.remoteStore)}catch(s){const i=Kx(s,"Failed to persist write");n.reject(i)}}async function u2(t,e){const n=_e(t);try{const r=await qz(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ze(o.hu,14607):s.removedDocuments.size>0&&(ze(o.hu,42227),o.hu=!1))}),await Iu(n,r,e)}catch(r){await gl(r)}}function F_(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=_e(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&Qx(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function D8(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ct(pe.comparator);o=o.insert(i,Zt.newNoDocument(i,be.min()));const l=je().add(i),c=new mm(be.min(),new Map,new ct(Ae),o,l);await u2(r,c),r.du=r.du.remove(i),r.Au.delete(e),Xx(r)}else await jy(r.localStore,e,!1).then(()=>Dy(r,e,n)).catch(gl)}async function M8(t,e){const n=_e(t),r=e.batch.batchId;try{const s=await Wz(n.localStore,e);h2(n,r,null),d2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Iu(n,s)}catch(s){await gl(s)}}async function O8(t,e,n){const r=_e(t);try{const s=await function(o,l){const c=_e(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ze(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);h2(r,e,n),d2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Iu(r,s)}catch(s){await gl(s)}}function d2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function h2(t,e,n){const r=_e(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Dy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||f2(t,r)})}function f2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Xx(t))}function z_(t,e,n){for(const r of n)r instanceof a2?(t.Ru.addReference(r.key,e),L8(t,r)):r instanceof l2?(le(Yx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||f2(t,r.key)):ve(19791,{wu:r})}function L8(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(le(Yx,"New document in limbo: "+n),t.Eu.add(r),Xx(t))}function Xx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new pe(Ge.fromString(e)),r=t.fu.next();t.Au.set(r,new N8(n)),t.du=t.du.insert(n,r),Jk(t.remoteStore,new ri(Br(cm(n.path)),r,"TargetPurposeLimboResolution",om.ce))}}async function Iu(t,e,n){const r=_e(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Ux.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=_e(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>K.forEach(u,p=>K.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>K.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!yl(f))throw f;le($x,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),E=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(E);h.Ms=h.Ms.insert(p,x)}}}(r.localStore,i))}async function V8(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){le(Yx,"User change. New user:",e.toKey());const r=await Kk(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new oe(q.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Iu(n,r.Ls)}}function F8(t,e){const n=_e(t),r=n.Au.get(e);if(r&&r.hu)return je().add(r.key);{let s=je();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function m2(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=u2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D8.bind(null,e),e.Pu.H_=_8.bind(null,e.eventManager),e.Pu.yu=E8.bind(null,e.eventManager),e}function z8(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=O8.bind(null,e),e}class nf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Hz(this.persistence,new Uz,e.initialUser,this.serializer)}Cu(e){return new Gk(zx.mi,this.serializer)}Du(e){return new Xz}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nf.provider={build:()=>new nf};class U8 extends nf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof ef,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Nz(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new Gk(r=>ef.mi(r,n),this.serializer)}}class My{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=V8.bind(null,this.syncEngine),await x8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new b8}()}createDatastore(e){const n=pm(e.databaseInfo.databaseId),r=function(i){return new n8(i)}(e.databaseInfo);return function(i,o,l,c){return new o8(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new l8(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>F_(this.syncEngine,n,0),function(){return P_.v()?new P_:new Jz}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new C8(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=_e(s);le(Ro,"RemoteStore shutting down."),i.Ea.add(5),await Cu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}My.provider={build:()=>new My};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="FirestoreClient";class $8{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Yt.UNAUTHENTICATED,this.clientId=sm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{le(Mi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(le(Mi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Kx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hp(t,e){t.asyncQueue.verifyOperationInProgress(),le(Mi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Kk(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function U_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await B8(t);le(Mi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>M_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>M_(e.remoteStore,s)),t._onlineComponents=e}async function B8(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le(Mi,"Using user provided OfflineComponentProvider");try{await Hp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;jo("Error using user provided cache. Falling back to memory cache: "+n),await Hp(t,new nf)}}else le(Mi,"Using default OfflineComponentProvider"),await Hp(t,new U8(void 0));return t._offlineComponents}async function g2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le(Mi,"Using user provided OnlineComponentProvider"),await U_(t,t._uninitializedComponentsProvider._online)):(le(Mi,"Using default OnlineComponentProvider"),await U_(t,new My))),t._onlineComponents}function H8(t){return g2(t).then(e=>e.syncEngine)}async function Oy(t){const e=await g2(t),n=e.eventManager;return n.onListen=I8.bind(null,e.syncEngine),n.onUnlisten=j8.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=k8.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=R8.bind(null,e.syncEngine),n}function W8(t,e,n={}){const r=new wi;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new p2({next:p=>{h.Nu(),o.enqueueAndForget(()=>i2(i,f));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new oe(q.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new oe(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new o2(cm(l.path),h,{includeMetadataChanges:!0,qa:!0});return s2(i,f)}(await Oy(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2="firestore.googleapis.com",B_=!0;class H_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v2,this.ssl=B_}else this.host=e.host,this.ssl=e.ssl??B_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Sz)throw new oe(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=y2(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ek;switch(r.type){case"firstParty":return new s9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$_.get(n);r&&(le("ComponentProvider","Removing Datastore"),$_.delete(n),r.terminate())}(this),Promise.resolve()}}function x2(t,e,n,r={}){var u;t=fr(t,vm);const s=hl(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(lI(`https://${l}`),cI("Firestore",!0)),i.host!==v2&&i.host!==l&&jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!ki(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Yt.MOCK_USER;else{h=N3(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new oe(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Yt(p)}t._authCredentials=new t9(new ZI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ns(this.firestore,e,this._query)}}class ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Su(n,ot._jsonSchema))return new ot(e,r||null,new pe(Ge.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:vt("string",ot._jsonSchemaVersion),referencePath:vt("string")};class hs extends Ns{constructor(e,n,r){super(e,n,cm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new pe(e))}withConverter(e){return new hs(this.firestore,e,this._path)}}function Jx(t,e,...n){if(t=Mt(t),tk("collection","path",e),t instanceof vm){const r=Ge.fromString(e,...n);return r_(r),new hs(t,null,r)}{if(!(t instanceof ot||t instanceof hs))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return r_(r),new hs(t.firestore,null,r)}}function We(t,e,...n){if(t=Mt(t),arguments.length===1&&(e=sm.newId()),tk("doc","path",e),t instanceof vm){const r=Ge.fromString(e,...n);return n_(r),new ot(t,null,new pe(r))}{if(!(t instanceof ot||t instanceof hs))throw new oe(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return n_(r),new ot(t.firestore,t instanceof hs?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="AsyncQueue";class q_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Yk(this,"async_queue_retry"),this._c=()=>{const r=Bp();r&&le(W_,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Bp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Bp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yl(e))throw e;le(W_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,bs("INTERNAL UNHANDLED ERROR: ",G_(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Gx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ve(47125,{Pc:G_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function G_(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Po extends vm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new q_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q_(e),this._firestoreClient=void 0,await e}}}function w2(t,e){const n=typeof t=="object"?t:fI(),r=typeof t=="string"?t:Kh,s=vx(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=S3("firestore");i&&x2(s,...i)}return s}function xm(t){if(t._terminated)throw new oe(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q8(t),t._firestoreClient}function q8(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new w9(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,y2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new $8(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Ot.fromBase64String(e))}catch(n){throw new oe(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:vt("string",jn._jsonSchemaVersion),bytes:vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mr._jsonSchemaVersion}}static fromJSON(e){if(Su(e,mr._jsonSchema))return new mr(e.latitude,e.longitude)}}mr._jsonSchemaVersion="firestore/geoPoint/1.0",mr._jsonSchema={type:vt("string",mr._jsonSchemaVersion),latitude:vt("number"),longitude:vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,pr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new pr(e.vectorValues);throw new oe(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pr._jsonSchemaVersion="firestore/vectorValue/1.0",pr._jsonSchema={type:vt("string",pr._jsonSchemaVersion),vectorValues:vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8=/^__.*__$/;class K8{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tu(e,this.data,n,this.fieldTransforms)}}class b2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new $i(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function _2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:t})}}class wm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new wm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return rf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(_2(this.Ac)&&G8.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Q8{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pm(e)}Cc(e,n,r,s=!1){return new wm({Ac:e,methodName:n,Dc:r,path:Pt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zx(t){const e=t._freezeSettings(),n=pm(t._databaseId);return new Q8(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Y8(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);n0("Data must be an object, but it was:",o,r);const l=E2(r,o);let c,u;if(i.merge)c=new Pn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=Ly(e,f,n);if(!o.contains(p))throw new oe(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);T2(h,p)||h.push(p)}c=new Pn(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new K8(new xn(l),c,u)}class bm extends wl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bm}}function X8(t,e,n){return new wm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class e0 extends wl{_toFieldTransform(e){return new Rk(e.path,new Jc)}isEqual(e){return e instanceof e0}}class t0 extends wl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=X8(this,e,!0),r=this.vc.map(i=>bl(i,n)),s=new nl(r);return new Rk(e.path,s)}isEqual(e){return e instanceof t0&&ki(this.vc,e.vc)}}function J8(t,e,n,r){const s=t.Cc(1,e,n);n0("Data must be an object, but it was:",s,r);const i=[],o=xn.empty();Ui(r,(c,u)=>{const h=r0(e,c,n);u=Mt(u);const f=s.yc(h);if(u instanceof bm)i.push(h);else{const p=bl(u,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new Pn(i);return new b2(o,l,s.fieldTransforms)}function Z8(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Ly(e,r,n)],c=[s];if(i.length%2!=0)throw new oe(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Ly(e,i[p])),c.push(i[p+1]);const u=[],h=xn.empty();for(let p=l.length-1;p>=0;--p)if(!T2(u,l[p])){const g=l[p];let E=c[p];E=Mt(E);const x=o.yc(g);if(E instanceof bm)u.push(g);else{const b=bl(E,x);b!=null&&(u.push(g),h.set(g,b))}}const f=new Pn(u);return new b2(h,f,o.fieldTransforms)}function eU(t,e,n,r=!1){return bl(n,t.Cc(r?4:3,e))}function bl(t,e){if(S2(t=Mt(t)))return n0("Unsupported field value:",e,t),E2(t,e);if(t instanceof wl)return function(r,s){if(!_2(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=bl(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Mt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:Zh(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zh(s.serializer,i)}}if(r instanceof mr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:Fk(s.serializer,r._byteString)};if(r instanceof ot){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Vx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pr)return function(o,l){return{mapValue:{fields:{[dk]:{stringValue:fk},[Qh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Mx(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${im(r)}`)}(t,e)}function E2(t,e){const n={};return ik(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ui(t,(r,s)=>{const i=bl(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function S2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof mr||t instanceof jn||t instanceof ot||t instanceof wl||t instanceof pr)}function n0(t,e,n){if(!S2(n)||!rk(n)){const r=im(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Ly(t,e,n){if((e=Mt(e))instanceof ku)return e._internalPath;if(typeof e=="string")return r0(t,e);throw rf("Field path arguments must be of type string or ",t,!1,void 0,n)}const tU=new RegExp("[~\\*/\\[\\]]");function r0(t,e,n){if(e.search(tU)>=0)throw rf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ku(...e.split("."))._internalPath}catch{throw rf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new oe(q.INVALID_ARGUMENT,l+t+c)}function T2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(s0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nU extends N2{data(){return super.data()}}function s0(t,e){return typeof e=="string"?r0(t,e):e instanceof ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class i0{}class _m extends i0{}function o0(t,e,...n){let r=[];e instanceof i0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Sm).length,l=i.filter(c=>c instanceof Em).length;if(o>1||o>0&&l>0)throw new oe(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Em extends _m{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Em(e,n,r)}_apply(e){const n=this._parse(e);return I2(e._query,n),new Ns(e.firestore,e.converter,Ny(e._query,n))}_parse(e){const n=Zx(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new oe(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Y_(f,h);const E=[];for(const x of f)E.push(Q_(c,i,x));p={arrayValue:{values:E}}}else p=Q_(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Y_(f,h),p=eU(l,o,f,h==="in"||h==="not-in");return yt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Sm extends i0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Sm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:wr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)I2(o,c),o=Ny(o,c)}(e._query,n),new Ns(e.firestore,e.converter,Ny(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Tm extends _m{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Tm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new oe(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xc(i,o)}(e._query,this._field,this._direction);return new Ns(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new vl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function a0(t,e="asc"){const n=e,r=s0("orderBy",t);return Tm._create(r,n)}class Nm extends _m{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Nm(e,n,r)}_apply(e){return new Ns(e.firestore,e.converter,Xh(e._query,this._limit,this._limitType))}}function C2(t){return Nm._create("limit",t,"F")}function Q_(t,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new oe(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bk(e)&&n.indexOf("/")!==-1)throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ge.fromString(n));if(!pe.isDocumentKey(r))throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return d_(t,new pe(r))}if(n instanceof ot)return d_(t,n._key);throw new oe(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${im(n)}.`)}function Y_(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I2(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new oe(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class k2{convertValue(e,n="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ui(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Qh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>ft(o.doubleValue));return new pr(n)}convertGeoPoint(e){return new mr(ft(e.latitude),ft(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=lm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const n=ji(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ge.fromString(e);ze(Wk(r),9688,{name:e});const s=new Za(r.get(1),r.get(3)),i=new pe(r.popFirst(5));return s.isEqual(n)||bs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bi extends N2{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(s0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=bi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",bi._jsonSchema={type:vt("string",bi._jsonSchemaVersion),bundleSource:vt("string","DocumentSnapshot"),bundleName:vt("string"),bundle:vt("string")};class xc extends bi{data(e={}){return super.data(e)}}class wo{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new da(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xc(this._firestore,this._userDataWriter,r.key,r,new da(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new xc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new da(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new xc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new da(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:iU(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t){t=fr(t,ot);const e=fr(t.firestore,Po);return W8(xm(e),t._key).then(n=>R2(e,t,n))}wo._jsonSchemaVersion="firestore/querySnapshot/1.0",wo._jsonSchema={type:vt("string",wo._jsonSchemaVersion),bundleSource:vt("string","QuerySnapshot"),bundleName:vt("string"),bundle:vt("string")};class A2 extends k2{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function Ut(t,e,n){t=fr(t,ot);const r=fr(t.firestore,Po),s=sU(t.converter,e,n);return l0(r,[Y8(Zx(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Hr.none())])}function j2(t,e,n,...r){t=fr(t,ot);const s=fr(t.firestore,Po),i=Zx(s);let o;return o=typeof(e=Mt(e))=="string"||e instanceof ku?Z8(i,"updateDoc",t._key,e,n,r):J8(i,"updateDoc",t._key,e),l0(s,[o.toMutation(t._key,Hr.exists(!0))])}function Cs(t,...e){var c,u,h;t=Mt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||K_(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(K_(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,l;if(t instanceof ot)o=fr(t.firestore,Po),l=cm(t._key.path),i={next:f=>{e[r]&&e[r](R2(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=fr(t,Ns);o=fr(f.firestore,Po),l=f._query;const p=new A2(o);i={next:g=>{e[r]&&e[r](new wo(o,p,f,g))},error:e[r+1],complete:e[r+2]},rU(t._query)}return function(p,g,E,x){const b=new p2(x),w=new o2(g,b,E);return p.asyncQueue.enqueueAndForget(async()=>s2(await Oy(p),w)),()=>{b.Nu(),p.asyncQueue.enqueueAndForget(async()=>i2(await Oy(p),w))}}(xm(o),l,s,i)}function l0(t,e){return function(r,s){const i=new wi;return r.asyncQueue.enqueueAndForget(async()=>P8(await H8(r),s,i)),i.promise}(xm(t),e)}function R2(t,e,n){const r=n.docs.get(e._key),s=new A2(t);return new bi(t,s,e._key,r,new da(n.hasPendingWrites,n.fromCache),e.converter)}function Cm(){return new e0("serverTimestamp")}function P2(...t){return new t0("arrayUnion",t)}(function(e,n=!0){(function(s){pl=s})(fl),Ya(new Io("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Po(new n9(r.getProvider("auth-internal")),new i9(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new oe(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),vi(Jb,Zb,e),vi(Jb,Zb,"esm2020")})();const X_=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:k2,Bytes:jn,CollectionReference:hs,DocumentReference:ot,DocumentSnapshot:bi,FieldPath:ku,FieldValue:wl,Firestore:Po,FirestoreError:oe,GeoPoint:mr,Query:Ns,QueryCompositeFilterConstraint:Sm,QueryConstraint:_m,QueryDocumentSnapshot:xc,QueryFieldFilterConstraint:Em,QueryLimitConstraint:Nm,QueryOrderByConstraint:Tm,QuerySnapshot:wo,SnapshotMetadata:da,Timestamp:Ke,VectorValue:pr,_AutoId:sm,_ByteString:Ot,_DatabaseId:Za,_DocumentKey:pe,_EmptyAuthCredentialsProvider:ek,_FieldPath:Pt,_cast:fr,_logWarn:jo,_validateIsNotUsedTogether:nk,arrayUnion:P2,collection:Jx,connectFirestoreEmulator:x2,doc:We,ensureFirestoreConfigured:xm,executeWrite:l0,getDoc:Yr,getFirestore:w2,limit:C2,onSnapshot:Cs,orderBy:a0,query:o0,serverTimestamp:Cm,setDoc:Ut,updateDoc:j2},Symbol.toStringTag,{value:"Module"})),oU={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},c0=hI(oU),io=XF(c0),Fe=w2(c0),Xr=new Xt;Xr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Xr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Xr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Xr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Xr.addScope("https://www.googleapis.com/auth/calendar");Xr.addScope("https://www.googleapis.com/auth/gmail.send");Xr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const J_=Object.freeze(Object.defineProperty({__proto__:null,app:c0,auth:io,db:Fe,googleProvider:Xr},Symbol.toStringTag,{value:"Module"})),D2=m.createContext(void 0);function aU({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(()=>sessionStorage.getItem("google_access_token")),[l,c]=m.useState(null),[u,h]=m.useState(()=>localStorage.getItem("user_role"));m.useEffect(()=>zV(io,v=>{n(v),v||(h(null),s(!1),o(null),sessionStorage.removeItem("google_access_token"))}),[]),m.useEffect(()=>{async function w(){if(!e||!i){if(e&&!i){const v=sessionStorage.getItem("google_access_token");if(v){o(v);return}}e||s(!1);return}try{s(!0);const v=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let _=!1;if(v.ok){const D=await v.json();D.courses&&D.courses.length>0&&(_=!0)}if(_){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const C=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let R=!1;if(C.ok){const D=await C.json();D.courses&&D.courses.length>0&&(R=!0)}R?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(v){console.error("Role detection failed:",v),h("no_access")}finally{s(!1)}}w()},[e,i]);const f=async()=>{try{c(null),Xr.setCustomParameters({prompt:"consent",access_type:"offline"});const w=await xd(io,Xr),v=Xt.credentialFromResult(w);v!=null&&v.accessToken&&(o(v.accessToken),sessionStorage.setItem("google_access_token",v.accessToken))}catch(w){const v=w instanceof Error?w.message:"Failed to sign in";c(v),console.error("Sign in error:",w)}},p=async()=>{try{c(null);const w=new Xt;w.addScope("https://www.googleapis.com/auth/gmail.send"),w.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),w.setCustomParameters({access_type:"offline",prompt:"consent"});const v=await xd(io,w),_=Xt.credentialFromResult(v),C=v._tokenResponse;if(_!=null&&_.accessToken&&(o(_.accessToken),sessionStorage.setItem("google_access_token",_.accessToken)),C!=null&&C.oauthRefreshToken){const{doc:R,setDoc:D,serverTimestamp:N}=await yd(async()=>{const{doc:I,setDoc:j,serverTimestamp:k}=await Promise.resolve().then(()=>X_);return{doc:I,setDoc:j,serverTimestamp:k}},void 0),{db:T}=await yd(async()=>{const{db:I}=await Promise.resolve().then(()=>J_);return{db:I}},void 0);if(e&&C.oauthRefreshToken)return await D(R(T,"users",e.uid,"private_tokens","google"),{refreshToken:C.oauthRefreshToken,updatedAt:N()}),!0}return!!(_!=null&&_.accessToken)}catch(w){const v=w instanceof Error?w.message:"Failed to get Gmail permissions";return c(v),console.error("Permission error:",w),!1}},g=async()=>{try{c(null);const w=new Xt;w.addScope("https://www.googleapis.com/auth/calendar.events"),w.setCustomParameters({access_type:"offline",prompt:"consent"});const v=await xd(io,w),_=Xt.credentialFromResult(v),C=v._tokenResponse;if(_!=null&&_.accessToken&&(o(_.accessToken),sessionStorage.setItem("google_access_token",_.accessToken)),e&&(C!=null&&C.oauthRefreshToken)){const{doc:R,setDoc:D,serverTimestamp:N}=await yd(async()=>{const{doc:I,setDoc:j,serverTimestamp:k}=await Promise.resolve().then(()=>X_);return{doc:I,setDoc:j,serverTimestamp:k}},void 0),{db:T}=await yd(async()=>{const{db:I}=await Promise.resolve().then(()=>J_);return{db:I}},void 0);return await D(R(T,"users",e.uid,"private_tokens","calendar"),{refreshToken:C.oauthRefreshToken,updatedAt:N(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(w){const v=w instanceof Error?w.message:"Failed to get Calendar permissions";return c(v),console.error("Permission error:",w),!1}},E=async()=>{if(!e)return!1;try{const w=new Xt;w.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),w.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),w.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),w.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),w.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const v=await xd(io,w),_=Xt.credentialFromResult(v);return _!=null&&_.accessToken?(o(_.accessToken),sessionStorage.setItem("google_access_token",_.accessToken),console.log("Access token refreshed successfully"),!0):!1}catch(w){return console.error("Failed to refresh access token:",w),!1}},x=async()=>E(),b=async()=>{try{await UV(io),o(null),h(null),sessionStorage.removeItem("google_access_token"),localStorage.removeItem("user_role")}catch(w){const v=w instanceof Error?w.message:"Failed to sign out";c(v)}};return a.jsx(D2.Provider,{value:{user:e,loading:r,role:u,accessToken:i,signInWithGoogle:f,requestGmailPermissions:p,requestCalendarPermissions:g,refreshAccessToken:x,signOut:b,error:l},children:t})}function st(){const t=m.useContext(D2);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const M2=m.createContext(void 0);function lU({children:t}){const[e,n]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});m.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return a.jsx(M2.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function u0(){const t=m.useContext(M2);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}async function cU(t,e,n,r){const i=[`To: ${t}`,"Subject: "+e,"Content-Type: text/html; charset=utf-8","MIME-Version: 1.0","",n].join(`\r
`),o=btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({raw:o})})}async function uU(t,e,n,r){const s=We(Fe,"users",n,"settings","calendar"),i=await Yr(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],f={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Student Sphere`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),f.end.date=p.toISOString().split("T")[0];const g=We(Fe,"users",n,"calendarEvents",c.id),E=await Yr(g),x="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let b;if(E.exists()){const{calendarEventId:w}=E.data();b=await fetch(`${x}/${w}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(b=await fetch(x,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),b.ok){const w=await b.json();await Ut(g,{calendarEventId:w.id,assignmentId:c.id,updatedAt:Cm()})}if(!b.ok&&b.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(b){console.warn(`Failed to sync assignment ${c.id} to calendar`,b)}}}const O2=m.createContext(void 0);function dU(){return Math.random().toString(36).substring(2,15)}async function sf(t,e,n,r){var o;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e;console.log(`Fetching: ${c.substring(0,100)}...`);const u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,g={};try{const E=await u.json();g=E,p=((o=E.error)==null?void 0:o.message)||E.message||p,console.error("API Error Response:",E)}catch{const x=await u.text().catch(()=>"");console.error("API Error (non-JSON):",x)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}const Z_=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function hU(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%Z_.length;return Z_[n]}async function fU(t,e){const r=await sf(t,"https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE",i=>i.courses||[],i=>i.nextPageToken),s=new Date().toISOString();return r.map(i=>({id:i.id,userId:e,classroomId:i.id,name:i.name,section:i.section||null,descriptionHeading:i.descriptionHeading||null,room:i.room||null,ownerId:i.ownerId||null,enrollmentCode:i.enrollmentCode||null,courseState:i.courseState||null,alternateLink:i.alternateLink||null,lastSyncedAt:s,color:hU(i.id)}))}async function mU(t,e,n,r){var l,c;const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWork?courseWorkStates=PUBLISHED`,i=await sf(t,s,u=>u.courseWork||[],u=>u.nextPageToken),o=[];for(const u of i){if(u.workType&&u.workType!=="ASSIGNMENT"&&u.workType!=="MULTIPLE_CHOICE_QUESTION")continue;let h=null;try{const b=`https://classroom.googleapis.com/v1/courses/${e}/courseWork/${u.id}/studentSubmissions?userId=me`;h=(await sf(t,b,v=>v.studentSubmissions||[],v=>v.nextPageToken))[0]||null}catch(b){console.warn(`Failed to fetch submissions for coursework ${u.id}:`,b)}let f=null,p=null;u.dueDate&&(f=new Date(u.dueDate.year,u.dueDate.month-1,u.dueDate.day,((l=u.dueTime)==null?void 0:l.hours)||23,((c=u.dueTime)==null?void 0:c.minutes)||59).toISOString(),u.dueTime&&(p=`${String(u.dueTime.hours).padStart(2,"0")}:${String(u.dueTime.minutes).padStart(2,"0")}`));const g=new Date;let E="backlog";h?h.state==="RETURNED"||h.returnedGrade!==void 0?E="graded":h.state==="TURNED_IN"||h.turnInTime?E="submitted":h.state==="CREATED"&&(E=f&&new Date(f)<g?"overdue":"backlog"):f&&new Date(f)<g?E="overdue":E="backlog";const x={id:`assign-${u.id}`,uniqueId:`${e}-${u.id}`,userId:r,courseId:e,courseName:n,classroomId:u.id,title:u.title,description:u.description||null,dueDate:f,dueTime:p,maxPoints:u.maxPoints||null,systemStatus:E,userStatus:null,submissionId:(h==null?void 0:h.id)||null,submittedAt:(h==null?void 0:h.turnInTime)||null,gradedAt:h!=null&&h.updateTime&&h.state==="RETURNED"?h.updateTime:null,grade:(h==null?void 0:h.returnedGrade)??(h==null?void 0:h.assignedGrade)??(h==null?void 0:h.draftGrade)??null,alternateLink:u.alternateLink||null,createdAt:u.creationTime||g.toISOString(),lastSyncedAt:g.toISOString()};o.push(x)}return o}async function pU(t,e,n,r){const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`;try{const i=await sf(t,s,l=>l.courseWorkMaterial||[],l=>l.nextPageToken),o=new Date().toISOString();return i.map(l=>({id:`mat-${l.id}`,uniqueId:`${e}-${l.id}`,userId:r,courseId:e,courseName:n,title:l.title,description:l.description||null,alternateLink:l.alternateLink||null,materials:l.materials||null,createdAt:l.updateTime||o,lastSyncedAt:o}))}catch(i){return console.warn(`Failed to fetch materials for course ${e}:`,i),[]}}function gU({children:t}){const{user:e,accessToken:n,refreshAccessToken:r}=st(),[s,i]=m.useState(()=>{const U=sessionStorage.getItem("classroom_courses");return U?JSON.parse(U):[]}),[o,l]=m.useState(()=>{const U=sessionStorage.getItem("classroom_assignments");return U?JSON.parse(U):[]}),[c,u]=m.useState(()=>{const U=sessionStorage.getItem("classroom_materials");return U?JSON.parse(U):[]}),[h,f]=m.useState(()=>{const U=sessionStorage.getItem("classroom_notes");return U?new Map(JSON.parse(U)):new Map}),[p,g]=m.useState(()=>!sessionStorage.getItem("classroom_courses")),[E,x]=m.useState(!1),[b,w]=m.useState(()=>{const U=sessionStorage.getItem("classroom_lastSyncedAt");return U?new Date(U):null}),[v,_]=m.useState(null),[C,R]=m.useState(!1),{toast:D}=Vo(),N=m.useCallback(async(U=!1)=>{var F;if(!e){_("Please sign in with Google to sync your Classroom data"),g(!1);return}let O=n;if(!O){console.log("No access token found, attempting to refresh...");try{if(await r()){await new Promise(G=>setTimeout(G,500));const B=sessionStorage.getItem("google_access_token");if(B)O=B,console.log("Successfully refreshed access token");else throw new Error("Token refresh succeeded but token not found")}else throw new Error("Token refresh failed")}catch(V){console.error("Failed to refresh token:",V),_("Your session has expired. Please click below to sign in again and refresh your access."),g(!1);return}}x(!0),o.length===0&&g(!0),_(null);try{console.log("Starting sync...",{userId:e.uid,hasToken:!!O});const V=await fU(O,e.uid);if(console.log(`Fetched ${V.length} courses`),V.length===0){_("No active courses found. Make sure you're enrolled in at least one Google Classroom course."),i([]),l([]),w(new Date),x(!1),g(!1);return}const B=[],G=[];for(const re of V)try{console.log(`Fetching data for course: ${re.name}`);const[ne,he]=await Promise.all([mU(O,re.classroomId,re.name,e.uid),pU(O,re.classroomId,re.name,e.uid)]);console.log(`Found ${ne.length} assignments and ${he.length} materials for ${re.name}`),B.push(...ne),G.push(...he)}catch(ne){console.warn(`Failed to fetch data for course ${re.name}:`,ne)}console.log(`Sync complete: ${V.length} courses, ${B.length} assignments, ${G.length} materials`),i(V),l(B),u(G),w(new Date),g(!1);try{await uU(B,O,e.uid,D)}catch(re){console.error("Calendar sync failed:",re)}try{const re=We(Fe,"users",e.uid,"settings","notifications"),ne=await Yr(re);if(ne.exists()&&ne.data().enabled&&ne.data().notifyDueSoon){const ue=We(Fe,"users",e.uid,"notifications","digest"),J=await Yr(ue),Z=J.exists()?(F=J.data().lastSent)==null?void 0:F.toDate():null,$=new Date;if(!(Z&&Z.getDate()===$.getDate()&&Z.getMonth()===$.getMonth()&&Z.getFullYear()===$.getFullYear())){const ie=new Date($);ie.setDate(ie.getDate()+1),ie.setHours(23,59,59,999);const te=B.filter(me=>{if(!me.dueDate||me.systemStatus==="submitted"||me.systemStatus==="graded")return!1;const ye=new Date(me.dueDate);return ye>=$&&ye<=ie});if(te.length>0&&e.email){const me=te.map(Ue=>`<li><strong>${Ue.title}</strong> <span style="color:#666">(${Ue.courseName})</span><br>Due: ${new Date(Ue.dueDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</li>`).join(""),ye=`
                         <div style="font-family: sans-serif; max-width: 600px; margin: 0 auto;">
                           <h2 style="color: #2563eb;">Daily Digest</h2>
                           <p>You have <strong>${te.length} assignments</strong> coming up in the next 24 hours:</p>
                           <ul style="line-height: 1.6;">${me}</ul>
                           <a href="http://localhost:3000" style="display: inline-block; background: #2563eb; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-top: 20px;">Open Student Sphere</a>
                         </div>
                       `;await cU(e.email,`Student Sphere: ${te.length} Tasks Due Soon`,ye,O),await Ut(ue,{lastSent:Cm()}),console.log("Daily digest email delivered.")}}}}catch(re){console.warn("Notification sync failed (non-critical):",re)}U||D({title:"Sync Complete",description:`Successfully synced ${V.length} courses, ${B.length} assignments, and updated Google Calendar.`})}catch(V){console.error("Sync error details:",V);let B="Failed to sync";if(V!=null&&V.message){const G=V.message.toLowerCase();G.includes("401")||G.includes("unauthorized")||G.includes("invalid_token")||G.includes("token expired")?B="Authentication failed. Your access token may have expired. Please sign out and sign in again.":G.includes("403")||G.includes("forbidden")||G.includes("permission denied")?B="Permission denied. Please make sure you granted Classroom access permissions when signing in. Sign out and sign in again, then grant all requested permissions.":G.includes("quota")||G.includes("rate")||G.includes("429")?B="API quota exceeded. Please try again later.":G.includes("cors")||G.includes("network")?B="Network error. Please check your internet connection and try again.":B=`Sync failed: ${V.message}`}else V instanceof TypeError&&V.message.includes("fetch")&&(B="Network error. Please check your internet connection.");_(B),console.error("Sync error:",V),U||D({variant:"destructive",title:"Sync Failed",description:B})}finally{x(!1),g(!1)}},[e,n,r,D]);m.useEffect(()=>{if(!e){R(!1),g(!1);return}if(!n){g(!1);return}!C&&!E&&(R(!0),N(!0))},[e,n,C,s.length,o.length,E]),m.useEffect(()=>{sessionStorage.setItem("classroom_courses",JSON.stringify(s))},[s]),m.useEffect(()=>{sessionStorage.setItem("classroom_materials",JSON.stringify(c))},[c]),m.useEffect(()=>{sessionStorage.setItem("classroom_notes",JSON.stringify(Array.from(h.entries())))},[h]),m.useEffect(()=>{sessionStorage.setItem("classroom_assignments",JSON.stringify(o))},[o]),m.useEffect(()=>{b?sessionStorage.setItem("classroom_lastSyncedAt",b.toISOString()):sessionStorage.removeItem("classroom_lastSyncedAt")},[b]);const T=m.useCallback((U,O)=>{l(F=>F.map(V=>V.id===U?{...V,userStatus:O}:V))},[]),I=m.useCallback((U,O,F=!1)=>{const V={id:dU(),userId:(e==null?void 0:e.uid)||"",assignmentId:U,content:O,isImportant:F,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};f(B=>{const G=new Map(B),re=G.get(U)||[];return G.set(U,[...re,V]),G})},[e]),j=m.useCallback((U,O,F)=>{f(V=>{const B=new Map(V);for(const[G,re]of Array.from(B.entries())){const ne=re.findIndex(he=>he.id===U);if(ne!==-1){const he=[...re];he[ne]={...he[ne],content:O,isImportant:F??he[ne].isImportant,updatedAt:new Date().toISOString()},B.set(G,he);break}}return B})},[]),k=m.useCallback((U,O)=>{f(F=>{const V=new Map(F),B=V.get(O)||[];return V.set(O,B.filter(G=>G.id!==U)),V})},[]),M=m.useCallback(()=>{const U=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return o.forEach(O=>{const F=O.userStatus==="in_progress"?"in_progress":O.systemStatus,V=U.find(B=>B.id===F);V&&V.assignments.push(O)}),U.forEach(O=>{O.assignments.sort((F,V)=>F.dueDate?V.dueDate?new Date(F.dueDate).getTime()-new Date(V.dueDate).getTime():-1:1)}),U},[o]),P=m.useCallback(()=>{const U=new Date,O=new Date(U);O.setDate(O.getDate()+3);const F=new Date(U);F.setDate(F.getDate()+7);const V=o.filter(Z=>Z.systemStatus!=="graded"&&Z.systemStatus!=="submitted"),B=o.filter(Z=>{if(!Z.dueDate||Z.systemStatus==="graded"||Z.systemStatus==="submitted")return!1;const $=new Date(Z.dueDate);return $>=U&&$<=O}),G=o.filter(Z=>{if(!Z.dueDate||Z.systemStatus==="graded"||Z.systemStatus==="submitted")return!1;const $=new Date(Z.dueDate);return $>=U&&$<=F}),re=o.filter(Z=>Z.systemStatus==="overdue"),ne=[],he=new Date,ue=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let Z=0;Z<7;Z++){const $=new Date(he);$.setDate($.getDate()+Z);const Y=$.toISOString().split("T")[0],ie=o.filter(te=>te.dueDate?te.dueDate.split("T")[0]===Y:!1).length;ne.push({day:ue[$.getDay()],count:ie,isToday:Z===0})}const J=[...V].filter(Z=>Z.dueDate).sort((Z,$)=>new Date(Z.dueDate).getTime()-new Date($.dueDate).getTime()).slice(0,5);return{totalActive:V.length,upcoming3Days:B.length,upcoming7Days:G.length,overdue:re.length,weeklyWorkload:ne,nextActions:J}},[o]),H=m.useCallback(U=>{let O=[...o];U!=null&&U.courseId&&(O=O.filter(G=>G.courseId===U.courseId)),U!=null&&U.status&&(O=O.filter(G=>G.systemStatus===U.status)),O.sort((G,re)=>G.dueDate?re.dueDate?new Date(G.dueDate).getTime()-new Date(re.dueDate).getTime():-1:1);const F=new Map,V=new Date,B=new Date(V);return B.setDate(B.getDate()+1),O.forEach(G=>{if(!G.dueDate)return;const re=G.dueDate.split("T")[0],ne=new Date(G.dueDate);let he;re===V.toISOString().split("T")[0]?he="Today":re===B.toISOString().split("T")[0]?he="Tomorrow":he=ne.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),F.has(re)||F.set(re,{date:re,dateLabel:he,assignments:[]}),F.get(re).assignments.push(G)}),Array.from(F.values())},[o]),ae=m.useCallback(U=>o.find(O=>O.id===U),[o]),X=m.useCallback(U=>h.get(U)||[],[h]);return a.jsx(O2.Provider,{value:{courses:s,assignments:o,notes:h,isLoading:p,isSyncing:E,lastSyncedAt:b,error:v,syncClassroom:N,updateAssignmentStatus:T,addNote:I,updateNote:j,deleteNote:k,getPipelineColumns:M,getDashboardMetrics:P,getTimelineGroups:H,getAssignmentById:ae,getNotesForAssignment:X,materials:c},children:t})}function Zr(){const t=m.useContext(O2);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}var Wp="focusScope.autoFocusOnMount",qp="focusScope.autoFocusOnUnmount",eE={bubbles:!1,cancelable:!0},yU="FocusScope",d0=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=cn(s),h=cn(i),f=m.useRef(null),p=Be(e,x=>c(x)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let x=function(_){if(g.paused||!l)return;const C=_.target;l.contains(C)?f.current=C:Us(f.current,{select:!0})},b=function(_){if(g.paused||!l)return;const C=_.relatedTarget;C!==null&&(l.contains(C)||Us(f.current,{select:!0}))},w=function(_){if(document.activeElement===document.body)for(const R of _)R.removedNodes.length>0&&Us(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const v=new MutationObserver(w);return l&&v.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),v.disconnect()}}},[r,l,g.paused]),m.useEffect(()=>{if(l){nE.add(g);const x=document.activeElement;if(!l.contains(x)){const w=new CustomEvent(Wp,eE);l.addEventListener(Wp,u),l.dispatchEvent(w),w.defaultPrevented||(vU(EU(L2(l)),{select:!0}),document.activeElement===x&&Us(l))}return()=>{l.removeEventListener(Wp,u),setTimeout(()=>{const w=new CustomEvent(qp,eE);l.addEventListener(qp,h),l.dispatchEvent(w),w.defaultPrevented||Us(x??document.body,{select:!0}),l.removeEventListener(qp,h),nE.remove(g)},0)}}},[l,u,h,g]);const E=m.useCallback(x=>{if(!n&&!r||g.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(b&&w){const v=x.currentTarget,[_,C]=xU(v);_&&C?!x.shiftKey&&w===C?(x.preventDefault(),n&&Us(_,{select:!0})):x.shiftKey&&w===_&&(x.preventDefault(),n&&Us(C,{select:!0})):w===v&&x.preventDefault()}},[n,r,g.paused]);return a.jsx(we.div,{tabIndex:-1,...o,ref:p,onKeyDown:E})});d0.displayName=yU;function vU(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Us(r,{select:e}),document.activeElement!==n)return}function xU(t){const e=L2(t),n=tE(e,t),r=tE(e.reverse(),t);return[n,r]}function L2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function tE(t,e){for(const n of t)if(!wU(n,{upTo:e}))return n}function wU(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function bU(t){return t instanceof HTMLInputElement&&"select"in t}function Us(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&bU(t)&&e&&t.select()}}var nE=_U();function _U(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=rE(t,e),t.unshift(e)},remove(e){var n;t=rE(t,e),(n=t[0])==null||n.resume()}}}function rE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function EU(t){return t.filter(e=>e.tagName!=="A")}var Gp=0;function V2(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??sE()),document.body.insertAdjacentElement("beforeend",t[1]??sE()),Gp++,()=>{Gp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Gp--}},[])}function sE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Vr=function(){return Vr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vr.apply(this,arguments)};function F2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function SU(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var rh="right-scroll-bar-position",sh="width-before-scroll-bar",TU="with-scroll-bars-hidden",NU="--removed-body-scroll-bar-size";function Kp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function CU(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var IU=typeof window<"u"?m.useLayoutEffect:m.useEffect,iE=new WeakMap;function kU(t,e){var n=CU(null,function(r){return t.forEach(function(s){return Kp(s,r)})});return IU(function(){var r=iE.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Kp(l,null)}),i.forEach(function(l){s.has(l)||Kp(l,o)})}iE.set(n,t)},[t]),n}function AU(t){return t}function jU(t,e){e===void 0&&(e=AU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function RU(t){t===void 0&&(t={});var e=jU(null);return e.options=Vr({async:!0,ssr:!1},t),e}var z2=function(t){var e=t.sideCar,n=F2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Vr({},n))};z2.isSideCarExport=!0;function PU(t,e){return t.useMedium(e),z2}var U2=RU(),Qp=function(){},Im=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Qp,onWheelCapture:Qp,onTouchMoveCapture:Qp}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,g=t.noIsolation,E=t.inert,x=t.allowPinchZoom,b=t.as,w=b===void 0?"div":b,v=t.gapMode,_=F2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,R=kU([n,e]),D=Vr(Vr({},_),s);return m.createElement(m.Fragment,null,h&&m.createElement(C,{sideCar:U2,removeScrollBar:u,shards:f,noIsolation:g,inert:E,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:v}),o?m.cloneElement(m.Children.only(l),Vr(Vr({},D),{ref:R})):m.createElement(w,Vr({},D,{className:c,ref:R}),l))});Im.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Im.classNames={fullWidth:sh,zeroRight:rh};var DU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function MU(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=DU();return e&&t.setAttribute("nonce",e),t}function OU(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function LU(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var VU=function(){var t=0,e=null;return{add:function(n){t==0&&(e=MU())&&(OU(e,n),LU(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},FU=function(){var t=VU();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},$2=function(){var t=FU(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},zU={left:0,top:0,right:0,gap:0},Yp=function(t){return parseInt(t||"",10)||0},UU=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Yp(n),Yp(r),Yp(s)]},$U=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return zU;var e=UU(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},BU=$2(),Sa="data-scroll-locked",HU=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(TU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Sa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(sh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(rh," .").concat(rh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(sh," .").concat(sh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Sa,`] {
    `).concat(NU,": ").concat(l,`px;
  }
`)},oE=function(){var t=parseInt(document.body.getAttribute(Sa)||"0",10);return isFinite(t)?t:0},WU=function(){m.useEffect(function(){return document.body.setAttribute(Sa,(oE()+1).toString()),function(){var t=oE()-1;t<=0?document.body.removeAttribute(Sa):document.body.setAttribute(Sa,t.toString())}},[])},qU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;WU();var i=m.useMemo(function(){return $U(s)},[s]);return m.createElement(BU,{styles:HU(i,!e,s,n?"":"!important")})},Vy=!1;if(typeof window<"u")try{var Td=Object.defineProperty({},"passive",{get:function(){return Vy=!0,!0}});window.addEventListener("test",Td,Td),window.removeEventListener("test",Td,Td)}catch{Vy=!1}var qo=Vy?{passive:!1}:!1,GU=function(t){return t.tagName==="TEXTAREA"},B2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!GU(t)&&n[e]==="visible")},KU=function(t){return B2(t,"overflowY")},QU=function(t){return B2(t,"overflowX")},aE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=H2(t,r);if(s){var i=W2(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},YU=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},XU=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},H2=function(t,e){return t==="v"?KU(e):QU(e)},W2=function(t,e){return t==="v"?YU(e):XU(e)},JU=function(t,e){return t==="h"&&e==="rtl"?-1:1},ZU=function(t,e,n,r,s){var i=JU(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{var g=W2(t,l),E=g[0],x=g[1],b=g[2],w=x-b-i*E;(E||w)&&H2(t,l)&&(f+=w,p+=E),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},Nd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},lE=function(t){return[t.deltaX,t.deltaY]},cE=function(t){return t&&"current"in t?t.current:t},e7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},t7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},n7=0,Go=[];function r7(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(n7++)[0],i=m.useState($2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=SU([t.lockRef.current],(t.shards||[]).map(cE),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var w=Nd(x),v=n.current,_="deltaX"in x?x.deltaX:v[0]-w[0],C="deltaY"in x?x.deltaY:v[1]-w[1],R,D=x.target,N=Math.abs(_)>Math.abs(C)?"h":"v";if("touches"in x&&N==="h"&&D.type==="range")return!1;var T=aE(N,D);if(!T)return!0;if(T?R=N:(R=N==="v"?"h":"v",T=aE(N,D)),!T)return!1;if(!r.current&&"changedTouches"in x&&(_||C)&&(r.current=R),!R)return!0;var I=r.current||R;return ZU(I,b,x,I==="h"?_:C,!0)},[]),c=m.useCallback(function(x){var b=x;if(!(!Go.length||Go[Go.length-1]!==i)){var w="deltaY"in b?lE(b):Nd(b),v=e.current.filter(function(R){return R.name===b.type&&(R.target===b.target||b.target===R.shadowParent)&&e7(R.delta,w)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var _=(o.current.shards||[]).map(cE).filter(Boolean).filter(function(R){return R.contains(b.target)}),C=_.length>0?l(b,_[0]):!o.current.noIsolation;C&&b.cancelable&&b.preventDefault()}}},[]),u=m.useCallback(function(x,b,w,v){var _={name:x,delta:b,target:w,should:v,shadowParent:s7(w)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(C){return C!==_})},1)},[]),h=m.useCallback(function(x){n.current=Nd(x),r.current=void 0},[]),f=m.useCallback(function(x){u(x.type,lE(x),x.target,l(x,t.lockRef.current))},[]),p=m.useCallback(function(x){u(x.type,Nd(x),x.target,l(x,t.lockRef.current))},[]);m.useEffect(function(){return Go.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,qo),document.addEventListener("touchmove",c,qo),document.addEventListener("touchstart",h,qo),function(){Go=Go.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,qo),document.removeEventListener("touchmove",c,qo),document.removeEventListener("touchstart",h,qo)}},[]);var g=t.removeScrollBar,E=t.inert;return m.createElement(m.Fragment,null,E?m.createElement(i,{styles:t7(s)}):null,g?m.createElement(qU,{gapMode:t.gapMode}):null)}function s7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const i7=PU(U2,r7);var h0=m.forwardRef(function(t,e){return m.createElement(Im,Vr({},t,{ref:e,sideCar:i7}))});h0.classNames=Im.classNames;var o7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ko=new WeakMap,Cd=new WeakMap,Id={},Xp=0,q2=function(t){return t&&(t.host||q2(t.parentNode))},a7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=q2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},l7=function(t,e,n,r){var s=a7(e,Array.isArray(t)?t:[t]);Id[n]||(Id[n]=new WeakMap);var i=Id[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),E=g!==null&&g!=="false",x=(Ko.get(p)||0)+1,b=(i.get(p)||0)+1;Ko.set(p,x),i.set(p,b),o.push(p),x===1&&E&&Cd.set(p,!0),b===1&&p.setAttribute(n,"true"),E||p.setAttribute(r,"true")}catch(w){console.error("aria-hidden: cannot operate on ",p,w)}})};return h(e),l.clear(),Xp++,function(){o.forEach(function(f){var p=Ko.get(f)-1,g=i.get(f)-1;Ko.set(f,p),i.set(f,g),p||(Cd.has(f)||f.removeAttribute(r),Cd.delete(f)),g||f.removeAttribute(n)}),Xp--,Xp||(Ko=new WeakMap,Ko=new WeakMap,Cd=new WeakMap,Id={})}},G2=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=o7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),l7(r,s,n,"aria-hidden")):function(){return null}},f0="Dialog",[K2,Q2]=Yn(f0),[c7,Er]=K2(f0),Y2=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u=!1,h]=Ti({prop:r,defaultProp:s,onChange:i});return a.jsx(c7,{scope:e,triggerRef:l,contentRef:c,contentId:ds(),titleId:ds(),descriptionId:ds(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};Y2.displayName=f0;var X2="DialogTrigger",J2=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Er(X2,n),i=Be(e,s.triggerRef);return a.jsx(we.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":g0(s.open),...r,ref:i,onClick:ge(t.onClick,s.onOpenToggle)})});J2.displayName=X2;var m0="DialogPortal",[u7,Z2]=K2(m0,{forceMount:void 0}),eA=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Er(m0,e);return a.jsx(u7,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(zi,{present:n||i.open,children:a.jsx(fu,{asChild:!0,container:s,children:o})}))})};eA.displayName=m0;var of="DialogOverlay",tA=m.forwardRef((t,e)=>{const n=Z2(of,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Er(of,t.__scopeDialog);return i.modal?a.jsx(zi,{present:r||i.open,children:a.jsx(h7,{...s,ref:e})}):null});tA.displayName=of;var d7=Ha("DialogOverlay.RemoveScroll"),h7=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Er(of,n);return a.jsx(h0,{as:d7,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(we.div,{"data-state":g0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Do="DialogContent",nA=m.forwardRef((t,e)=>{const n=Z2(Do,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Er(Do,t.__scopeDialog);return a.jsx(zi,{present:r||i.open,children:i.modal?a.jsx(f7,{...s,ref:e}):a.jsx(m7,{...s,ref:e})})});nA.displayName=Do;var f7=m.forwardRef((t,e)=>{const n=Er(Do,t.__scopeDialog),r=m.useRef(null),s=Be(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return G2(i)},[]),a.jsx(rA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ge(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ge(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ge(t.onFocusOutside,i=>i.preventDefault())})}),m7=m.forwardRef((t,e)=>{const n=Er(Do,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(rA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),rA=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Er(Do,n),c=m.useRef(null),u=Be(e,c);return V2(),a.jsxs(a.Fragment,{children:[a.jsx(d0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(hu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":g0(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(g7,{titleId:l.titleId}),a.jsx(v7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),p0="DialogTitle",sA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Er(p0,n);return a.jsx(we.h2,{id:s.titleId,...r,ref:e})});sA.displayName=p0;var iA="DialogDescription",oA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Er(iA,n);return a.jsx(we.p,{id:s.descriptionId,...r,ref:e})});oA.displayName=iA;var aA="DialogClose",lA=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Er(aA,n);return a.jsx(we.button,{type:"button",...r,ref:e,onClick:ge(t.onClick,()=>s.onOpenChange(!1))})});lA.displayName=aA;function g0(t){return t?"open":"closed"}var cA="DialogTitleWarning",[p7,uA]=$M(cA,{contentName:Do,titleName:p0,docsSlug:"dialog"}),g7=({titleId:t})=>{const e=uA(cA),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},y7="DialogDescriptionWarning",v7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${uA(y7).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},dA=Y2,x7=J2,hA=eA,y0=tA,v0=nA,x0=sA,w0=oA,b0=lA,fA="AlertDialog",[w7,lq]=Yn(fA,[Q2]),Is=Q2(),mA=t=>{const{__scopeAlertDialog:e,...n}=t,r=Is(e);return a.jsx(dA,{...r,...n,modal:!0})};mA.displayName=fA;var b7="AlertDialogTrigger",pA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Is(n);return a.jsx(x7,{...s,...r,ref:e})});pA.displayName=b7;var _7="AlertDialogPortal",gA=t=>{const{__scopeAlertDialog:e,...n}=t,r=Is(e);return a.jsx(hA,{...r,...n})};gA.displayName=_7;var E7="AlertDialogOverlay",yA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Is(n);return a.jsx(y0,{...s,...r,ref:e})});yA.displayName=E7;var Ta="AlertDialogContent",[S7,T7]=w7(Ta),N7=TN("AlertDialogContent"),vA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Is(n),o=m.useRef(null),l=Be(e,o),c=m.useRef(null);return a.jsx(p7,{contentName:Ta,titleName:xA,docsSlug:"alert-dialog",children:a.jsx(S7,{scope:n,cancelRef:c,children:a.jsxs(v0,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:ge(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(N7,{children:r}),a.jsx(I7,{contentRef:o})]})})})});vA.displayName=Ta;var xA="AlertDialogTitle",wA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Is(n);return a.jsx(x0,{...s,...r,ref:e})});wA.displayName=xA;var bA="AlertDialogDescription",_A=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Is(n);return a.jsx(w0,{...s,...r,ref:e})});_A.displayName=bA;var C7="AlertDialogAction",EA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Is(n);return a.jsx(b0,{...s,...r,ref:e})});EA.displayName=C7;var SA="AlertDialogCancel",TA=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=T7(SA,n),i=Is(n),o=Be(e,s);return a.jsx(b0,{...i,...r,ref:o})});TA.displayName=SA;var I7=({contentRef:t})=>{const e=`\`${Ta}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ta}\` by passing a \`${bA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ta}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},k7=mA,A7=pA,j7=gA,NA=yA,CA=vA,IA=EA,kA=TA,AA=wA,jA=_A;const _0=pu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),fe=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?HM:"button";return a.jsx(o,{className:W(_0({variant:e,size:n,className:t})),ref:i,...s})});fe.displayName="Button";const RA=k7,PA=A7,R7=j7,DA=m.forwardRef(({className:t,...e},n)=>a.jsx(NA,{className:W("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));DA.displayName=NA.displayName;const E0=m.forwardRef(({className:t,...e},n)=>a.jsxs(R7,{children:[a.jsx(DA,{}),a.jsx(CA,{ref:n,className:W("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));E0.displayName=CA.displayName;const S0=({className:t,...e})=>a.jsx("div",{className:W("flex flex-col space-y-2 text-center sm:text-left",t),...e});S0.displayName="AlertDialogHeader";const T0=({className:t,...e})=>a.jsx("div",{className:W("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});T0.displayName="AlertDialogFooter";const N0=m.forwardRef(({className:t,...e},n)=>a.jsx(AA,{ref:n,className:W("text-lg font-semibold",t),...e}));N0.displayName=AA.displayName;const C0=m.forwardRef(({className:t,...e},n)=>a.jsx(jA,{ref:n,className:W("text-sm text-muted-foreground",t),...e}));C0.displayName=jA.displayName;const I0=m.forwardRef(({className:t,...e},n)=>a.jsx(IA,{ref:n,className:W(_0(),t),...e}));I0.displayName=IA.displayName;const k0=m.forwardRef(({className:t,...e},n)=>a.jsx(kA,{ref:n,className:W(_0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));k0.displayName=kA.displayName;const Jp=768;function km(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Jp-1}px)`),r=()=>{e(window.innerWidth<Jp)};return n.addEventListener("change",r),e(window.innerWidth<Jp),()=>n.removeEventListener("change",r)},[]),!!t}var A0="Avatar",[P7,cq]=Yn(A0),[D7,MA]=P7(A0),OA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return a.jsx(D7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(we.span,{...r,ref:e})})});OA.displayName=A0;var LA="AvatarImage",VA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=MA(LA,n),l=M7(r,i),c=cn(u=>{s(u),o.onImageLoadingStatusChange(u)});return Ct(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(we.img,{...i,ref:e,src:r}):null});VA.displayName=LA;var FA="AvatarFallback",zA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=MA(FA,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(we.span,{...s,ref:e}):null});zA.displayName=FA;function uE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function M7(t,{referrerPolicy:e,crossOrigin:n}){const r=L7(),s=m.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>uE(i,t));return Ct(()=>{l(uE(i,t))},[i,t]),Ct(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function O7(){return()=>{}}function L7(){return m.useSyncExternalStore(O7,()=>!0,()=>!1)}var UA=OA,$A=VA,BA=zA;const si=m.forwardRef(({className:t,...e},n)=>a.jsx(UA,{ref:n,className:W(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));si.displayName=UA.displayName;const ii=m.forwardRef(({className:t,...e},n)=>a.jsx($A,{ref:n,className:W("aspect-square h-full w-full",t),...e}));ii.displayName=$A.displayName;const oi=m.forwardRef(({className:t,...e},n)=>a.jsx(BA,{ref:n,className:W("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));oi.displayName=BA.displayName;const V7=[{path:"/dashboard",label:"Dashboard",icon:ZN},{path:"/",label:"Pipeline",icon:rC},{path:"/leaderboard",label:"Leaderboard",icon:rx},{path:"/timeline",label:"Timeline",icon:Ss},{path:"/attendance",label:"Attendance",icon:uC},{path:"/notes",label:"Notes",icon:vo}];function F7({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=Wv(),r=km(),{user:s,signOut:i}=st(),{theme:o,toggleTheme:l}=u0(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>a.jsxs("div",{className:"flex flex-col h-full bg-background",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&a.jsx("button",{className:"ml-auto",onClick:e,children:a.jsx(No,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 border-b shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(si,{className:"h-8 w-8",children:[a.jsx(ii,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(oi,{className:"text-xs",children:c})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),V7.map(p=>{const g=n===p.path,E=p.icon;return a.jsxs(Si,{href:p.path,onClick:e,className:W("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",g?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[a.jsx(E,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),a.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(nx,{className:"w-4 h-4 mr-3"}):a.jsx($f,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(Si,{href:"/settings",onClick:e,className:W("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[a.jsx(aC,{className:"w-4 h-4 mr-3"}),"Settings"]}),a.jsxs(RA,{children:[a.jsx(PA,{asChild:!0,children:a.jsxs("button",{className:"w-full flex items-center px-3 py-2 text-sm font-medium text-destructive rounded-md hover:bg-destructive/10 transition-colors",children:[a.jsx(Bc,{className:"w-4 h-4 mr-3"}),"Sign Out"]})}),a.jsxs(E0,{children:[a.jsxs(S0,{children:[a.jsx(N0,{children:"Are you absolutely sure?"}),a.jsx(C0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(T0,{children:[a.jsx(k0,{children:"Cancel"}),a.jsx(I0,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:W("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:a.jsx(u,{})}),r&&t&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const af=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:W("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));af.displayName="Input";function z7({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=Zr(),[r]=Wv(),[s,i]=m.useState(""),o=km(),c={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return a.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[o&&a.jsx(fe,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:a.jsx(iC,{className:"h-5 w-5"})}),a.jsx("span",{className:"md:hidden font-medium text-lg",children:c}),a.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ZO,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx(af,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),a.jsx("div",{className:"flex items-center ml-4",children:a.jsx(fe,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:W(n&&"animate-spin"),title:"Sync with Classroom",children:a.jsx(Ga,{className:"w-5 h-5"})})})]})}var HA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dE=Ce.createContext&&Ce.createContext(HA),U7=["attr","size","title"];function $7(t,e){if(t==null)return{};var n=B7(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function B7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lf(){return lf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lf.apply(this,arguments)}function hE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function cf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hE(Object(n),!0).forEach(function(r){H7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function H7(t,e,n){return e=W7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W7(t){var e=q7(t,"string");return typeof e=="symbol"?e:e+""}function q7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function WA(t){return t&&t.map((e,n)=>Ce.createElement(e.tag,cf({key:n},e.attr),WA(e.child)))}function j0(t){return e=>Ce.createElement(G7,lf({attr:cf({},t.attr)},e),WA(t.child))}function G7(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=$7(t,U7),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Ce.createElement("svg",lf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:cf(cf({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Ce.createElement("title",null,i),t.children)};return dE!==void 0?Ce.createElement(dE.Consumer,null,n=>e(n)):e(HA)}function qA(t){return j0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function K7(t){return j0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const Q7=[{icon:K7,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:GO,title:"Kanban Board",description:"Visual assignment tracking."},{icon:MO,title:"Linear Timeline",description:"Chronological deadline view."},{icon:OO,title:"Performance Metrics",description:"Grade & workload analytics."}];function Y7(){const{signInWithGoogle:t,loading:e,error:n}=st();return a.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),a.jsx("header",{className:"px-10 py-8 z-10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),a.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",a.jsx("br",{}),a.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),a.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),a.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:Q7.map(r=>a.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[a.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),a.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),a.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),a.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),a.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[a.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),a.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[a.jsx(qr,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",a.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),a.jsxs(fe,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[a.jsx(qA,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&a.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[a.jsx(qr,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:n})]})]}),a.jsx("div",{className:"pt-8 border-t border-zinc-100",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(e5,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),a.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),a.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[a.jsx("span",{children:" 2024 Trace Inc."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),a.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function X7(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Am=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _l(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function R0(t){return"nodeType"in t}function hn(t){var e,n;return t?_l(t)?t:R0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function P0(t){const{Document:e}=hn(t);return t instanceof e}function Au(t){return _l(t)?!1:t instanceof hn(t).HTMLElement}function GA(t){return t instanceof hn(t).SVGElement}function El(t){return t?_l(t)?t.document:R0(t)?P0(t)?t:Au(t)||GA(t)?t.ownerDocument:document:document:document}const br=Am?m.useLayoutEffect:m.useEffect;function jm(t){const e=m.useRef(t);return br(()=>{e.current=t}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function J7(){const t=m.useRef(null),e=m.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=m.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function eu(t,e){e===void 0&&(e=[t]);const n=m.useRef(t);return br(()=>{n.current!==t&&(n.current=t)},e),n}function ju(t,e){const n=m.useRef();return m.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function uf(t){const e=jm(t),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function df(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}let Zp={};function Ru(t,e){return m.useMemo(()=>{if(e)return e;const n=Zp[t]==null?0:Zp[t]+1;return Zp[t]=n,t+"-"+n},[t,e])}function KA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const Na=KA(1),hf=KA(-1);function Z7(t){return"clientX"in t&&"clientY"in t}function Rm(t){if(!t)return!1;const{KeyboardEvent:e}=hn(t.target);return e&&t instanceof e}function e$(t){if(!t)return!1;const{TouchEvent:e}=hn(t.target);return e&&t instanceof e}function ff(t){if(e$(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Z7(t)?{x:t.clientX,y:t.clientY}:null}const Oi=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Oi.Translate.toString(t),Oi.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),fE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function t$(t){return t.matches(fE)?t:t.querySelector(fE)}const n$={display:"none"};function r$(t){let{id:e,value:n}=t;return Ce.createElement("div",{id:e,style:n$},n)}function s$(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function i$(){const[t,e]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const QA=m.createContext(null);function o$(t){const e=m.useContext(QA);m.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function a$(){const[t]=m.useState(()=>new Set),e=m.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[m.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const l$={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},c$={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function u$(t){let{announcements:e=c$,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=l$}=t;const{announce:i,announcement:o}=i$(),l=Ru("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),o$(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;e.onDragMove&&i(e.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;i(e.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;i(e.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;i(e.onDragCancel({active:p,over:g}))}}),[i,e])),!c)return null;const h=Ce.createElement(Ce.Fragment,null,Ce.createElement(r$,{id:r,value:s.draggable}),Ce.createElement(s$,{id:l,announcement:o}));return n?qn.createPortal(h,n):h}var St;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(St||(St={}));function mf(){}function mE(t,e){return m.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function d$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const _r=Object.freeze({x:0,y:0});function h$(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function f$(t,e){const n=ff(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function m$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function p$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function g$(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function pE(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const y$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=pE(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=h$(pE(c),s);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(m$)};function v$(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=o*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const x$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const c=v$(l,e);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(p$)};function w$(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function YA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:_r}function b$(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const _$=b$(1);function XA(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function E$(t,e,n){const r=XA(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,c=t.left-o-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const S$={ignoreTransform:!1};function Sl(t,e){e===void 0&&(e=S$);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=hn(t).getComputedStyle(t);u&&(n=E$(n,u,h))}const{top:r,left:s,width:i,height:o,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:c}}function gE(t){return Sl(t,{ignoreTransform:!0})}function T$(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function N$(t,e){return e===void 0&&(e=hn(t).getComputedStyle(t)),e.position==="fixed"}function C$(t,e){e===void 0&&(e=hn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function D0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(P0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Au(s)||GA(s)||n.includes(s))return n;const i=hn(t).getComputedStyle(s);return s!==t&&C$(s,i)&&n.push(s),N$(s,i)?n:r(s.parentNode)}return t?r(t):n}function JA(t){const[e]=D0(t,1);return e??null}function eg(t){return!Am||!t?null:_l(t)?t:R0(t)?P0(t)||t===El(t).scrollingElement?window:Au(t)?t:null:null}function ZA(t){return _l(t)?t.scrollX:t.scrollLeft}function ej(t){return _l(t)?t.scrollY:t.scrollTop}function Fy(t){return{x:ZA(t),y:ej(t)}}var Rt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Rt||(Rt={}));function tj(t){return!Am||!t?!1:t===document.scrollingElement}function nj(t){const e={x:0,y:0},n=tj(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const I$={x:.2,y:.2};function k$(t,e,n,r,s){let{top:i,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=I$);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=nj(t),g={x:0,y:0},E={x:0,y:0},x={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+x.height?(g.y=Rt.Backward,E.y=r*Math.abs((e.top+x.height-i)/x.height)):!h&&c>=e.bottom-x.height&&(g.y=Rt.Forward,E.y=r*Math.abs((e.bottom-x.height-c)/x.height)),!p&&l>=e.right-x.width?(g.x=Rt.Forward,E.x=r*Math.abs((e.right-x.width-l)/x.width)):!f&&o<=e.left+x.width&&(g.x=Rt.Backward,E.x=r*Math.abs((e.left+x.width-o)/x.width)),{direction:g,speed:E}}function A$(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function rj(t){return t.reduce((e,n)=>Na(e,Fy(n)),_r)}function j$(t){return t.reduce((e,n)=>e+ZA(n),0)}function R$(t){return t.reduce((e,n)=>e+ej(n),0)}function sj(t,e){if(e===void 0&&(e=Sl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);JA(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const P$=[["x",["left","right"],j$],["y",["top","bottom"],R$]];class M0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=D0(n),s=rj(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of P$)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class wc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function D$(t){const{EventTarget:e}=hn(t);return t instanceof e?t:El(t)}function tg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Un;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Un||(Un={}));function yE(t){t.preventDefault()}function M$(t){t.stopPropagation()}var Oe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Oe||(Oe={}));const ij={start:[Oe.Space,Oe.Enter],cancel:[Oe.Esc],end:[Oe.Space,Oe.Enter,Oe.Tab]},O$=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Oe.Right:return{...n,x:n.x+25};case Oe.Left:return{...n,x:n.x-25};case Oe.Down:return{...n,y:n.y+25};case Oe.Up:return{...n,y:n.y-25}}};class O0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new wc(El(n)),this.windowListeners=new wc(hn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Un.Resize,this.handleCancel),this.windowListeners.add(Un.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Un.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&sj(r),n(_r)}handleKeyDown(e){if(Rm(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=ij,coordinateGetter:o=O$,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:_r;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=hf(f,h),g={x:0,y:0},{scrollableAncestors:E}=r.current;for(const x of E){const b=e.code,{isTop:w,isRight:v,isLeft:_,isBottom:C,maxScroll:R,minScroll:D}=nj(x),N=A$(x),T={x:Math.min(b===Oe.Right?N.right-N.width/2:N.right,Math.max(b===Oe.Right?N.left:N.left+N.width/2,f.x)),y:Math.min(b===Oe.Down?N.bottom-N.height/2:N.bottom,Math.max(b===Oe.Down?N.top:N.top+N.height/2,f.y))},I=b===Oe.Right&&!v||b===Oe.Left&&!_,j=b===Oe.Down&&!C||b===Oe.Up&&!w;if(I&&T.x!==f.x){const k=x.scrollLeft+p.x,M=b===Oe.Right&&k<=R.x||b===Oe.Left&&k>=D.x;if(M&&!p.y){x.scrollTo({left:k,behavior:l});return}M?g.x=x.scrollLeft-k:g.x=b===Oe.Right?x.scrollLeft-R.x:x.scrollLeft-D.x,g.x&&x.scrollBy({left:-g.x,behavior:l});break}else if(j&&T.y!==f.y){const k=x.scrollTop+p.y,M=b===Oe.Down&&k<=R.y||b===Oe.Up&&k>=D.y;if(M&&!p.x){x.scrollTo({top:k,behavior:l});return}M?g.y=x.scrollTop-k:g.y=b===Oe.Down?x.scrollTop-R.y:x.scrollTop-D.y,g.y&&x.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(e,Na(hf(f,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}O0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=ij,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function vE(t){return!!(t&&"distance"in t)}function xE(t){return!!(t&&"delay"in t)}class L0{constructor(e,n,r){var s;r===void 0&&(r=D$(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=El(o),this.documentListeners=new wc(this.document),this.listeners=new wc(r),this.windowListeners=new wc(hn(o)),this.initialCoordinates=(s=ff(i))!=null?s:_r,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Un.Resize,this.handleCancel),this.windowListeners.add(Un.DragStart,yE),this.windowListeners.add(Un.VisibilityChange,this.handleCancel),this.windowListeners.add(Un.ContextMenu,yE),this.documentListeners.add(Un.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(xE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(vE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Un.Click,M$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Un.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=ff(e))!=null?n:_r,u=hf(s,c);if(!r&&l){if(vE(l)){if(l.tolerance!=null&&tg(u,l.tolerance))return this.handleCancel();if(tg(u,l.distance))return this.handleStart()}if(xE(l)&&tg(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Oe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const L$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class V0 extends L0{constructor(e){const{event:n}=e,r=El(n.target);super(e,L$,r)}}V0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const V$={move:{name:"mousemove"},end:{name:"mouseup"}};var zy;(function(t){t[t.RightClick=2]="RightClick"})(zy||(zy={}));class F$ extends L0{constructor(e){super(e,V$,El(e.event.target))}}F$.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===zy.RightClick?!1:(r==null||r({event:n}),!0)}}];const ng={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class z$ extends L0{constructor(e){super(e,ng)}static setup(){return window.addEventListener(ng.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(ng.move.name,e)};function e(){}}}z$.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var bc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(bc||(bc={}));var pf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(pf||(pf={}));function U$(t){let{acceleration:e,activator:n=bc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=pf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=t;const g=B$({delta:f,disabled:!i}),[E,x]=J7(),b=m.useRef({x:0,y:0}),w=m.useRef({x:0,y:0}),v=m.useMemo(()=>{switch(n){case bc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case bc.DraggableRect:return s}},[n,s,c]),_=m.useRef(null),C=m.useCallback(()=>{const D=_.current;if(!D)return;const N=b.current.x*w.current.x,T=b.current.y*w.current.y;D.scrollBy(N,T)},[]),R=m.useMemo(()=>l===pf.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!v){x();return}for(const D of R){if((r==null?void 0:r(D))===!1)continue;const N=u.indexOf(D),T=h[N];if(!T)continue;const{direction:I,speed:j}=k$(D,T,v,e,p);for(const k of["x","y"])g[k][I[k]]||(j[k]=0,I[k]=0);if(j.x>0||j.y>0){x(),_.current=D,E(C,o),b.current=j,w.current=I;return}}b.current={x:0,y:0},w.current={x:0,y:0},x()},[e,C,r,x,i,o,JSON.stringify(v),JSON.stringify(g),E,u,R,h,JSON.stringify(p)])}const $$={x:{[Rt.Backward]:!1,[Rt.Forward]:!1},y:{[Rt.Backward]:!1,[Rt.Forward]:!1}};function B$(t){let{delta:e,disabled:n}=t;const r=df(e);return ju(s=>{if(n||!r||!s)return $$;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Rt.Backward]:s.x[Rt.Backward]||i.x===-1,[Rt.Forward]:s.x[Rt.Forward]||i.x===1},y:{[Rt.Backward]:s.y[Rt.Backward]||i.y===-1,[Rt.Forward]:s.y[Rt.Forward]||i.y===1}}},[n,e,r])}function H$(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ju(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function W$(t,e){return m.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var tu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(tu||(tu={}));var Uy;(function(t){t.Optimized="optimized"})(Uy||(Uy={}));const wE=new Map;function q$(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=m.useState(null),{frequency:l,measure:c,strategy:u}=s,h=m.useRef(t),f=b(),p=eu(f),g=m.useCallback(function(w){w===void 0&&(w=[]),!p.current&&o(v=>v===null?w:v.concat(w.filter(_=>!v.includes(_))))},[p]),E=m.useRef(null),x=ju(w=>{if(f&&!n)return wE;if(!w||w===wE||h.current!==t||i!=null){const v=new Map;for(let _ of t){if(!_)continue;if(i&&i.length>0&&!i.includes(_.id)&&_.rect.current){v.set(_.id,_.rect.current);continue}const C=_.node.current,R=C?new M0(c(C),C):null;_.rect.current=R,R&&v.set(_.id,R)}return v}return w},[t,i,n,f,c]);return m.useEffect(()=>{h.current=t},[t]),m.useEffect(()=>{f||g()},[n,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||E.current!==null||(E.current=setTimeout(()=>{g(),E.current=null},l))},[l,f,g,...r]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:i!=null};function b(){switch(u){case tu.Always:return!1;case tu.BeforeDragging:return n;default:return!n}}}function F0(t,e){return ju(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function G$(t,e){return F0(t,e)}function K$(t){let{callback:e,disabled:n}=t;const r=jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Pm(t){let{callback:e,disabled:n}=t;const r=jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Q$(t){return new M0(Sl(t),t)}function bE(t,e,n){e===void 0&&(e=Q$);const[r,s]=m.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const o=K$({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=Pm({callback:i});return br(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function Y$(t){const e=F0(t);return YA(t,e)}const _E=[];function X$(t){const e=m.useRef(t),n=ju(r=>t?r&&r!==_E&&t&&e.current&&t.parentNode===e.current.parentNode?r:D0(t):_E,[t]);return m.useEffect(()=>{e.current=t},[t]),n}function J$(t){const[e,n]=m.useState(null),r=m.useRef(t),s=m.useCallback(i=>{const o=eg(i.target);o&&n(l=>l?(l.set(o,Fy(o)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(c=>{const u=eg(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Fy(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(c=>{const u=eg(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),m.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>Na(i,o),_r):rj(t):_r,[t,e])}function EE(t,e){e===void 0&&(e=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},e),m.useEffect(()=>{const r=t!==_r;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?hf(t,n.current):_r}function Z$(t){m.useEffect(()=>{if(!Am)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function eB(t,e){return m.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function oj(t){return m.useMemo(()=>t?T$(t):null,[t])}const SE=[];function tB(t,e){e===void 0&&(e=Sl);const[n]=t,r=oj(n?hn(n):null),[s,i]=m.useState(SE);function o(){i(()=>t.length?t.map(c=>tj(c)?r:new M0(e(c),c)):SE)}const l=Pm({callback:o});return br(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function aj(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Au(e)?e:t}function nB(t){let{measure:e}=t;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:h}of u)if(Au(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),i=Pm({callback:s}),o=m.useCallback(u=>{const h=aj(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=uf(o);return m.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const rB=[{sensor:V0,options:{}},{sensor:O0,options:{}}],sB={current:{}},ih={draggable:{measure:gE},droppable:{measure:gE,strategy:tu.WhileDragging,frequency:Uy.Optimized},dragOverlay:{measure:Sl}};class _c extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const iB={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new _c,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:mf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ih,measureDroppableContainers:mf,windowRect:null,measuringScheduled:!1},lj={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:mf,draggableNodes:new Map,over:null,measureDroppableContainers:mf},Pu=m.createContext(lj),cj=m.createContext(iB);function oB(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new _c}}}function aB(t,e){switch(e.type){case St.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case St.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case St.DragEnd:case St.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case St.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new _c(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case St.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new _c(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case St.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new _c(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function lB(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(Pu),i=df(r),o=df(n==null?void 0:n.id);return m.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Rm(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=t$(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function uj(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function cB(t){return m.useMemo(()=>({draggable:{...ih.draggable,...t==null?void 0:t.draggable},droppable:{...ih.droppable,...t==null?void 0:t.droppable},dragOverlay:{...ih.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function uB(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=m.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;br(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=YA(h,r);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=JA(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,l,r,n])}const Dm=m.createContext({..._r,scaleX:1,scaleY:1});var Hs;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Hs||(Hs={}));const dB=m.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:h=rB,collisionDetection:f=x$,measuring:p,modifiers:g,...E}=e;const x=m.useReducer(aB,void 0,oB),[b,w]=x,[v,_]=a$(),[C,R]=m.useState(Hs.Uninitialized),D=C===Hs.Initialized,{draggable:{active:N,nodes:T,translate:I},droppable:{containers:j}}=b,k=N!=null?T.get(N):null,M=m.useRef({initial:null,translated:null}),P=m.useMemo(()=>{var Me;return N!=null?{id:N,data:(Me=k==null?void 0:k.data)!=null?Me:sB,rect:M}:null},[N,k]),H=m.useRef(null),[ae,X]=m.useState(null),[U,O]=m.useState(null),F=eu(E,Object.values(E)),V=Ru("DndDescribedBy",o),B=m.useMemo(()=>j.getEnabled(),[j]),G=cB(p),{droppableRects:re,measureDroppableContainers:ne,measuringScheduled:he}=q$(B,{dragging:D,dependencies:[I.x,I.y],config:G.droppable}),ue=H$(T,N),J=m.useMemo(()=>U?ff(U):null,[U]),Z=Fu(),$=G$(ue,G.draggable.measure);uB({activeNode:N!=null?T.get(N):null,config:Z.layoutShiftCompensation,initialRect:$,measure:G.draggable.measure});const Y=bE(ue,G.draggable.measure,$),ie=bE(ue?ue.parentElement:null),te=m.useRef({activatorEvent:null,active:null,activeNode:ue,collisionRect:null,collisions:null,droppableRects:re,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=j.getNodeFor((n=te.current.over)==null?void 0:n.id),ye=nB({measure:G.dragOverlay.measure}),Ue=(r=ye.nodeRef.current)!=null?r:ue,tt=D?(s=ye.rect)!=null?s:Y:null,Bt=!!(ye.nodeRef.current&&ye.rect),It=Y$(Bt?null:Y),Ne=oj(Ue?hn(Ue):null),Le=X$(D?me??ue:null),Xn=tB(Le),ks=uj(g,{transform:{x:I.x-It.x,y:I.y-It.y,scaleX:1,scaleY:1},activatorEvent:U,active:P,activeNodeRect:Y,containerNodeRect:ie,draggingNodeRect:tt,over:te.current.over,overlayNodeRect:ye.rect,scrollableAncestors:Le,scrollableAncestorRects:Xn,windowRect:Ne}),Wi=J?Na(J,I):null,Uo=J$(Le),qi=EE(Uo),Mu=EE(Uo,[Y]),es=Na(ks,qi),Tr=tt?_$(tt,ks):null,Gi=P&&Tr?f({active:P,collisionRect:Tr,droppableRects:re,droppableContainers:B,pointerCoordinates:Wi}):null,Ou=g$(Gi,"id"),[Jn,Nl]=m.useState(null),Ki=Bt?ks:Na(ks,Mu),Cl=w$(Ki,(i=Jn==null?void 0:Jn.rect)!=null?i:null,Y),Qi=m.useRef(null),Nr=m.useCallback((Me,Ht)=>{let{sensor:xt,options:fn}=Ht;if(H.current==null)return;const mn=T.get(H.current);if(!mn)return;const nn=Me.nativeEvent,Lt=new xt({active:H.current,activeNode:mn,event:nn,options:fn,context:te,onAbort(wt){if(!T.get(wt))return;const{onDragAbort:Nn}=F.current,Fn={id:wt};Nn==null||Nn(Fn),v({type:"onDragAbort",event:Fn})},onPending(wt,Tn,Nn,Fn){if(!T.get(wt))return;const{onDragPending:Zn}=F.current,Cr={id:wt,constraint:Tn,initialCoordinates:Nn,offset:Fn};Zn==null||Zn(Cr),v({type:"onDragPending",event:Cr})},onStart(wt){const Tn=H.current;if(Tn==null)return;const Nn=T.get(Tn);if(!Nn)return;const{onDragStart:Fn}=F.current,ts={activatorEvent:nn,active:{id:Tn,data:Nn.data,rect:M}};qn.unstable_batchedUpdates(()=>{Fn==null||Fn(ts),R(Hs.Initializing),w({type:St.DragStart,initialCoordinates:wt,active:Tn}),v({type:"onDragStart",event:ts}),X(Qi.current),O(nn)})},onMove(wt){w({type:St.DragMove,coordinates:wt})},onEnd:As(St.DragEnd),onCancel:As(St.DragCancel)});Qi.current=Lt;function As(wt){return async function(){const{active:Nn,collisions:Fn,over:ts,scrollAdjustedTranslate:Zn}=te.current;let Cr=null;if(Nn&&Zn){const{cancelDrop:pn}=F.current;Cr={activatorEvent:nn,active:Nn,collisions:Fn,delta:Zn,over:ts},wt===St.DragEnd&&typeof pn=="function"&&await Promise.resolve(pn(Cr))&&(wt=St.DragCancel)}H.current=null,qn.unstable_batchedUpdates(()=>{w({type:wt}),R(Hs.Uninitialized),Nl(null),X(null),O(null),Qi.current=null;const pn=wt===St.DragEnd?"onDragEnd":"onDragCancel";if(Cr){const $o=F.current[pn];$o==null||$o(Cr),v({type:pn,event:Cr})}})}}},[T]),Lu=m.useCallback((Me,Ht)=>(xt,fn)=>{const mn=xt.nativeEvent,nn=T.get(fn);if(H.current!==null||!nn||mn.dndKit||mn.defaultPrevented)return;const Lt={active:nn};Me(xt,Ht.options,Lt)===!0&&(mn.dndKit={capturedBy:Ht.sensor},H.current=fn,Nr(xt,Ht))},[T,Nr]),Yi=W$(h,Lu);Z$(h),br(()=>{Y&&C===Hs.Initializing&&R(Hs.Initialized)},[Y,C]),m.useEffect(()=>{const{onDragMove:Me}=F.current,{active:Ht,activatorEvent:xt,collisions:fn,over:mn}=te.current;if(!Ht||!xt)return;const nn={active:Ht,activatorEvent:xt,collisions:fn,delta:{x:es.x,y:es.y},over:mn};qn.unstable_batchedUpdates(()=>{Me==null||Me(nn),v({type:"onDragMove",event:nn})})},[es.x,es.y]),m.useEffect(()=>{const{active:Me,activatorEvent:Ht,collisions:xt,droppableContainers:fn,scrollAdjustedTranslate:mn}=te.current;if(!Me||H.current==null||!Ht||!mn)return;const{onDragOver:nn}=F.current,Lt=fn.get(Ou),As=Lt&&Lt.rect.current?{id:Lt.id,rect:Lt.rect.current,data:Lt.data,disabled:Lt.disabled}:null,wt={active:Me,activatorEvent:Ht,collisions:xt,delta:{x:mn.x,y:mn.y},over:As};qn.unstable_batchedUpdates(()=>{Nl(As),nn==null||nn(wt),v({type:"onDragOver",event:wt})})},[Ou]),br(()=>{te.current={activatorEvent:U,active:P,activeNode:ue,collisionRect:Tr,collisions:Gi,droppableRects:re,draggableNodes:T,draggingNode:Ue,draggingNodeRect:tt,droppableContainers:j,over:Jn,scrollableAncestors:Le,scrollAdjustedTranslate:es},M.current={initial:tt,translated:Tr}},[P,ue,Gi,Tr,T,Ue,tt,re,j,Jn,Le,es]),U$({...Z,delta:I,draggingRect:Tr,pointerCoordinates:Wi,scrollableAncestors:Le,scrollableAncestorRects:Xn});const Vu=m.useMemo(()=>({active:P,activeNode:ue,activeNodeRect:Y,activatorEvent:U,collisions:Gi,containerNodeRect:ie,dragOverlay:ye,draggableNodes:T,droppableContainers:j,droppableRects:re,over:Jn,measureDroppableContainers:ne,scrollableAncestors:Le,scrollableAncestorRects:Xn,measuringConfiguration:G,measuringScheduled:he,windowRect:Ne}),[P,ue,Y,U,Gi,ie,ye,T,j,re,Jn,ne,Le,Xn,G,he,Ne]),Xi=m.useMemo(()=>({activatorEvent:U,activators:Yi,active:P,activeNodeRect:Y,ariaDescribedById:{draggable:V},dispatch:w,draggableNodes:T,over:Jn,measureDroppableContainers:ne}),[U,Yi,P,Y,w,V,T,Jn,ne]);return Ce.createElement(QA.Provider,{value:_},Ce.createElement(Pu.Provider,{value:Xi},Ce.createElement(cj.Provider,{value:Vu},Ce.createElement(Dm.Provider,{value:Cl},u)),Ce.createElement(lB,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Ce.createElement(u$,{...l,hiddenTextDescribedById:V}));function Fu(){const Me=(ae==null?void 0:ae.autoScrollEnabled)===!1,Ht=typeof c=="object"?c.enabled===!1:c===!1,xt=D&&!Me&&!Ht;return typeof c=="object"?{...c,enabled:xt}:{enabled:xt}}}),hB=m.createContext(null),TE="button",fB="Draggable";function mB(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=Ru(fB),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=m.useContext(Pu),{role:g=TE,roleDescription:E="draggable",tabIndex:x=0}=s??{},b=(c==null?void 0:c.id)===e,w=m.useContext(b?Dm:hB),[v,_]=uf(),[C,R]=uf(),D=eB(o,e),N=eu(n);br(()=>(f.set(e,{id:e,key:i,node:v,activatorNode:C,data:N}),()=>{const I=f.get(e);I&&I.key===i&&f.delete(e)}),[f,e]);const T=m.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":r,"aria-pressed":b&&g===TE?!0:void 0,"aria-roledescription":E,"aria-describedby":h.draggable}),[r,g,x,b,E,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:T,isDragging:b,listeners:r?void 0:D,node:v,over:p,setNodeRef:_,setActivatorNodeRef:R,transform:w}}function dj(){return m.useContext(cj)}const pB="Droppable",gB={timeout:25};function hj(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=Ru(pB),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(Pu),h=m.useRef({disabled:n}),f=m.useRef(!1),p=m.useRef(null),g=m.useRef(null),{disabled:E,updateMeasurementsFor:x,timeout:b}={...gB,...s},w=eu(x??r),v=m.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(w.current)?w.current:[w.current]),g.current=null},b)},[b]),_=Pm({callback:v,disabled:E||!o}),C=m.useCallback((T,I)=>{_&&(I&&(_.unobserve(I),f.current=!1),T&&_.observe(T))},[_]),[R,D]=uf(C),N=eu(e);return m.useEffect(()=>{!_||!R.current||(_.disconnect(),f.current=!1,_.observe(R.current))},[R,_]),m.useEffect(()=>(l({type:St.RegisterDroppable,element:{id:r,key:i,disabled:n,node:R,rect:p,data:N}}),()=>l({type:St.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==h.current.disabled&&(l({type:St.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===r,node:R,over:c,setNodeRef:D}}function yB(t){let{animation:e,children:n}=t;const[r,s]=m.useState(null),[i,o]=m.useState(null),l=df(n);return!n&&!r&&l&&s(l),br(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Ce.createElement(Ce.Fragment,null,n,r?m.cloneElement(r,{ref:o}):null)}const vB={x:0,y:0,scaleX:1,scaleY:1};function xB(t){let{children:e}=t;return Ce.createElement(Pu.Provider,{value:lj},Ce.createElement(Dm.Provider,{value:vB},e))}const wB={position:"fixed",touchAction:"none"},bB=t=>Rm(t)?"transform 250ms ease":void 0,_B=m.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:l,style:c,transform:u,transition:h=bB}=t;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},p={...wB,width:l.width,height:l.height,top:l.top,left:l.left,transform:Oi.Transform.toString(f),transformOrigin:s&&r?f$(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Ce.createElement(n,{className:o,style:p,ref:e},i)}),EB=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},SB=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Oi.Transform.toString(e)},{transform:Oi.Transform.toString(n)}]},TB={duration:250,easing:"ease",keyframes:SB,sideEffects:EB({styles:{active:{opacity:"0"}}})};function NB(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return jm((i,o)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=aj(o);if(!u)return;const{transform:h}=hn(o).getComputedStyle(o),f=XA(h);if(!f)return;const p=typeof e=="function"?e:CB(e);return sj(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function CB(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...TB,...t};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...f},g=s({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[E]=g,x=g[g.length-1];if(JSON.stringify(E)===JSON.stringify(x))return;const b=r==null?void 0:r({active:o,dragOverlay:l,...u}),w=l.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(v=>{w.onfinish=()=>{b==null||b(),v()}})}}let NE=0;function IB(t){return m.useMemo(()=>{if(t!=null)return NE++,NE},[t])}const kB=Ce.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:g,draggableNodes:E,droppableContainers:x,dragOverlay:b,over:w,measuringConfiguration:v,scrollableAncestors:_,scrollableAncestorRects:C,windowRect:R}=dj(),D=m.useContext(Dm),N=IB(f==null?void 0:f.id),T=uj(o,{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:g,draggingNodeRect:b.rect,over:w,overlayNodeRect:b.rect,scrollableAncestors:_,scrollableAncestorRects:C,transform:D,windowRect:R}),I=F0(p),j=NB({config:r,draggableNodes:E,droppableContainers:x,measuringConfiguration:v}),k=I?b.setRef:void 0;return Ce.createElement(xB,null,Ce.createElement(yB,{animation:j},f&&N?Ce.createElement(_B,{key:N,id:f.id,ref:k,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:I,style:{zIndex:u,...s},transform:T},n):null))});function fj(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function AB(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function kd(t){return t!==null&&t>=0}function jB(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function RB(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const mj=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=fj(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Ad={scaleX:1,scaleY:1},PB=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...Ad}:null}const c=DB(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-c,...Ad}:s<n&&s>=o?{x:0,y:l.height+c,...Ad}:{x:0,y:0,...Ad}};function DB(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const pj="Sortable",gj=Ce.createContext({activeIndex:-1,containerId:pj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:mj,disabled:{draggable:!1,droppable:!1}});function MB(t){let{children:e,id:n,items:r,strategy:s=mj,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=dj(),f=Ru(pj,n),p=l.rect!==null,g=m.useMemo(()=>r.map(D=>typeof D=="object"&&"id"in D?D.id:D),[r]),E=o!=null,x=o?g.indexOf(o.id):-1,b=u?g.indexOf(u.id):-1,w=m.useRef(g),v=!jB(g,w.current),_=b!==-1&&x===-1||v,C=RB(i);br(()=>{v&&E&&h(g)},[v,g,E,h]),m.useEffect(()=>{w.current=g},[g]);const R=m.useMemo(()=>({activeIndex:x,containerId:f,disabled:C,disableTransforms:_,items:g,overIndex:b,useDragOverlay:p,sortedRects:AB(g,c),strategy:s}),[x,f,C.draggable,C.droppable,_,g,b,c,p,s]);return Ce.createElement(gj.Provider,{value:R},e)}const OB=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return fj(n,r,s).indexOf(e)},LB=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===c},VB={duration:200,easing:"ease"},yj="transform",FB=Oi.Transition.toString({property:yj,duration:0,easing:"linear"}),zB={roleDescription:"sortable"};function UB(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=m.useState(null),l=m.useRef(n);return br(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=Sl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&o(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),m.useEffect(()=>{i&&o(null)},[i]),i}function $B(t){let{animateLayoutChanges:e=LB,attributes:n,disabled:r,data:s,getNewIndex:i=OB,id:o,strategy:l,resizeObserverConfig:c,transition:u=VB}=t;const{items:h,containerId:f,activeIndex:p,disabled:g,disableTransforms:E,sortedRects:x,overIndex:b,useDragOverlay:w,strategy:v}=m.useContext(gj),_=BB(r,g),C=h.indexOf(o),R=m.useMemo(()=>({sortable:{containerId:f,index:C,items:h},...s}),[f,s,C,h]),D=m.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:N,node:T,isOver:I,setNodeRef:j}=hj({id:o,data:R,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...c}}),{active:k,activatorEvent:M,activeNodeRect:P,attributes:H,setNodeRef:ae,listeners:X,isDragging:U,over:O,setActivatorNodeRef:F,transform:V}=mB({id:o,data:R,attributes:{...zB,...n},disabled:_.draggable}),B=X7(j,ae),G=!!k,re=G&&!E&&kd(p)&&kd(b),ne=!w&&U,he=ne&&re?V:null,J=re?he??(l??v)({rects:x,activeNodeRect:P,activeIndex:p,overIndex:b,index:C}):null,Z=kd(p)&&kd(b)?i({id:o,items:h,activeIndex:p,overIndex:b}):C,$=k==null?void 0:k.id,Y=m.useRef({activeId:$,items:h,newIndex:Z,containerId:f}),ie=h!==Y.current.items,te=e({active:k,containerId:f,isDragging:U,isSorting:G,id:o,index:C,items:h,newIndex:Y.current.newIndex,previousItems:Y.current.items,previousContainerId:Y.current.containerId,transition:u,wasDragging:Y.current.activeId!=null}),me=UB({disabled:!te,index:C,node:T,rect:N});return m.useEffect(()=>{G&&Y.current.newIndex!==Z&&(Y.current.newIndex=Z),f!==Y.current.containerId&&(Y.current.containerId=f),h!==Y.current.items&&(Y.current.items=h)},[G,Z,f,h]),m.useEffect(()=>{if($===Y.current.activeId)return;if($!=null&&Y.current.activeId==null){Y.current.activeId=$;return}const Ue=setTimeout(()=>{Y.current.activeId=$},50);return()=>clearTimeout(Ue)},[$]),{active:k,activeIndex:p,attributes:H,data:R,rect:N,index:C,newIndex:Z,items:h,isOver:I,isSorting:G,isDragging:U,listeners:X,node:T,overIndex:b,over:O,setNodeRef:B,setActivatorNodeRef:F,setDroppableNodeRef:j,setDraggableNodeRef:ae,transform:me??J,transition:ye()};function ye(){if(me||ie&&Y.current.newIndex===C)return FB;if(!(ne&&!Rm(M)||!u)&&(G||te))return Oi.Transition.toString({...u,property:yj})}}function BB(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Oe.Down,Oe.Right,Oe.Up,Oe.Left;const HB=pu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Sr({className:t,variant:e,...n}){return a.jsx("div",{className:W(HB({variant:e}),t),...n})}function on({className:t,...e}){return a.jsx("div",{className:W("animate-pulse rounded-md bg-muted",t),...e})}const Pe=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Pe.displayName="Card";const Ze=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("flex flex-col space-y-1.5 p-6",t),...e}));Ze.displayName="CardHeader";const nt=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("text-2xl font-semibold leading-none tracking-tight",t),...e}));nt.displayName="CardTitle";const yn=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("text-sm text-muted-foreground",t),...e}));yn.displayName="CardDescription";const He=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("p-6 pt-0",t),...e}));He.displayName="CardContent";const z0=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:W("flex items-center p-6 pt-0",t),...e}));z0.displayName="CardFooter";function vj(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function xj(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function wj({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:c,isDragging:u}=$B({id:t.id}),h={transform:Oi.Transform.toString(l),transition:c},f=xj(t.dueDate),p=f!==null&&f<=1&&f>=0,g=t.systemStatus==="overdue"||f!==null&&f<0;return a.jsx(Pe,{ref:o,style:h,className:W("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",g&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(Sr,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),a.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:E=>E.stopPropagation(),children:a.jsx(BO,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Ss,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:W(g&&"text-destructive",p&&!g&&"text-foreground font-medium"),children:vj(t.dueDate)}),g&&a.jsx(qr,{className:"h-3.5 w-3.5 text-destructive"}),p&&!g&&a.jsx(nC,{className:"h-3.5 w-3.5 text-foreground"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(Wa,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Wa,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Submitted"})]})]}),a.jsx("div",{className:"flex items-center gap-1",children:n&&a.jsx(vo,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function WB({assignment:t,onClick:e}){const n=xj(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[a.jsx("span",{className:W("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:vj(t.dueDate)}),r&&a.jsx(qr,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const U0=m.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:W("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));U0.displayName="Textarea";var qB="Separator",CE="horizontal",GB=["horizontal","vertical"],bj=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=CE,...s}=t,i=KB(r)?r:CE,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(we.div,{"data-orientation":i,...l,...s,ref:e})});bj.displayName=qB;function KB(t){return GB.includes(t)}var _j=bj;const cr=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(_j,{ref:s,decorative:n,orientation:e,className:W("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));cr.displayName=_j.displayName;const QB=dA,YB=hA,Ej=m.forwardRef(({className:t,...e},n)=>a.jsx(y0,{className:W("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Ej.displayName=y0.displayName;const XB=pu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Sj=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>a.jsxs(YB,{children:[a.jsx(Ej,{}),a.jsxs(v0,{ref:s,className:W(XB({side:t}),e),...r,children:[n,a.jsxs(b0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(No,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Sj.displayName=v0.displayName;const Tj=({className:t,...e})=>a.jsx("div",{className:W("flex flex-col space-y-2 text-center sm:text-left",t),...e});Tj.displayName="SheetHeader";const Nj=m.forwardRef(({className:t,...e},n)=>a.jsx(x0,{ref:n,className:W("text-lg font-semibold text-foreground",t),...e}));Nj.displayName=x0.displayName;const JB=m.forwardRef(({className:t,...e},n)=>a.jsx(w0,{ref:n,className:W("text-sm text-muted-foreground",t),...e}));JB.displayName=w0.displayName;function ZB(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function eH(t){return t?` at ${t}`:""}function tH({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),a.jsx("div",{className:"space-y-4",children:r.map((s,i)=>a.jsxs("div",{className:"flex items-start gap-3 relative",children:[a.jsx("div",{className:W("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&a.jsx(Wa,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:W("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function nH({note:t,onUpdate:e,onDelete:n}){const[r,s]=m.useState(!1),[i,o]=m.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return a.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&a.jsx(iy,{className:"h-3.5 w-3.5 fill-current text-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:a.jsx(iy,{className:W("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:a.jsx(YO,{className:"h-3.5 w-3.5"})}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:a.jsx(n5,{className:"h-3.5 w-3.5"})})]})]}),r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(U0,{value:i,onChange:c=>o(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),a.jsxs(fe,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[a.jsx(tx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function $0({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=Zr(),[l,c]=m.useState(""),[u,h]=m.useState(!1);if(!t)return null;const f=r(t.id),p=t.systemStatus==="overdue",g=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return a.jsx(QB,{open:e,onOpenChange:n,children:a.jsxs(Sj,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[a.jsx(Tj,{className:"space-y-4",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[a.jsx(Sr,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),a.jsx(Nj,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),a.jsxs("div",{className:"mt-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Ss,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:W(p&&"text-destructive"),children:[ZB(t.dueDate),eH(t.dueTime)]}),p&&a.jsx(qr,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?a.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):a.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),a.jsx(cr,{}),t.description&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),a.jsx(cr,{})]}),a.jsx(tH,{assignment:t}),a.jsx(cr,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[a.jsx(XO,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(U0,{value:l,onChange:E=>c(E.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(fe,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),a.jsxs(fe,{size:"sm",onClick:g,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[a.jsx(tx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?a.jsx("div",{className:"space-y-2",children:f.map(E=>a.jsx(nH,{note:E,onUpdate:(x,b)=>i(E.id,x,b),onDelete:()=>o(E.id,t.id)},E.id))}):!u&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&a.jsxs(a.Fragment,{children:[a.jsx(cr,{}),a.jsxs(fe,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[a.jsx(ny,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function il(){const{refreshAccessToken:t,signOut:e}=st(),[n,r]=m.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),a.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:a.jsx(Ga,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),a.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),a.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[a.jsx(fe,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Ga,{className:"h-4 w-4 animate-spin"}),a.jsx("span",{className:"font-medium",children:"Signing In..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(qA,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),a.jsx(fe,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),a.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[a.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function rH({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=hj({id:t});return a.jsxs("div",{ref:o,className:W("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[a.jsx("h3",{className:"text-sm font-medium",children:e}),a.jsx(Sr,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),a.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:a.jsx(MB,{items:n.map(l=>l.id),strategy:PB,children:n.length>0?n.map(l=>{var c;return a.jsx(wj,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):a.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function sH(){var b;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o}=Zr();st();const[l,c]=m.useState(null),[u,h]=m.useState(null),f=d$(mE(V0,{activationConstraint:{distance:8}}),mE(O0)),p=t(),g=u?i.find(w=>w.id===u):null,E=w=>{h(w.active.id)},x=w=>{const{active:v,over:_}=w;if(h(null),!_)return;const C=v.id,R=_.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(R)){const D=i.find(N=>N.id===C);D&&D.systemStatus!==R&&(R==="in_progress"?e(C,"in_progress"):e(C,"backlog"))}};return i.length===0?a.jsx(il,{}):a.jsxs(a.Fragment,{children:[a.jsxs(dB,{sensors:f,collisionDetection:y$,onDragStart:E,onDragEnd:x,children:[a.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6",children:p.map(w=>a.jsx(rH,{id:w.id,title:w.title,assignments:w.assignments,onCardClick:c,notes:s},w.id))}),a.jsx(kB,{children:g&&a.jsx(wj,{assignment:g,isDragging:!0,hasNotes:(((b=s.get(g.id))==null?void 0:b.length)||0)>0})})]}),a.jsx($0,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function IE(t,[e,n]){return Math.min(n,Math.max(e,t))}var iH=m.createContext(void 0);function B0(t){const e=m.useContext(iH);return t||e||"ltr"}function Cj(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var oH=[" ","Enter","ArrowUp","ArrowDown"],aH=[" ","Enter"],Du="Select",[Mm,Om,lH]=Kv(Du),[Tl,uq]=Yn(Du,[lH,Gf]),Lm=Gf(),[cH,Bi]=Tl(Du),[uH,dH]=Tl(Du),Ij=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:g,form:E}=t,x=Lm(e),[b,w]=m.useState(null),[v,_]=m.useState(null),[C,R]=m.useState(!1),D=B0(u),[N=!1,T]=Ti({prop:r,defaultProp:s,onChange:i}),[I,j]=Ti({prop:o,defaultProp:l,onChange:c}),k=m.useRef(null),M=b?E||!!b.closest("form"):!0,[P,H]=m.useState(new Set),ae=Array.from(P).map(X=>X.props.value).join(";");return a.jsx($C,{...x,children:a.jsxs(cH,{required:g,scope:e,trigger:b,onTriggerChange:w,valueNode:v,onValueNodeChange:_,valueNodeHasChildren:C,onValueNodeHasChildrenChange:R,contentId:ds(),value:I,onValueChange:j,open:N,onOpenChange:T,dir:D,triggerPointerDownPosRef:k,disabled:p,children:[a.jsx(Mm.Provider,{scope:e,children:a.jsx(uH,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(X=>{H(U=>new Set(U).add(X))},[]),onNativeOptionRemove:m.useCallback(X=>{H(U=>{const O=new Set(U);return O.delete(X),O})},[]),children:n})}),M?a.jsxs(Zj,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:I,onChange:X=>j(X.target.value),disabled:p,form:E,children:[I===void 0?a.jsx("option",{value:""}):null,Array.from(P)]},ae):null]})})};Ij.displayName=Du;var kj="SelectTrigger",Aj=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Lm(n),o=Bi(kj,n),l=o.disabled||r,c=Be(e,o.onTriggerChange),u=Om(n),h=m.useRef("touch"),[f,p,g]=eR(x=>{const b=u().filter(_=>!_.disabled),w=b.find(_=>_.value===o.value),v=tR(b,x,w);v!==void 0&&o.onValueChange(v.value)}),E=x=>{l||(o.onOpenChange(!0),g()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return a.jsx(BC,{asChild:!0,...i,children:a.jsx(we.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":Jj(o.value)?"":void 0,...s,ref:c,onClick:ge(s.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&E(x)}),onPointerDown:ge(s.onPointerDown,x=>{h.current=x.pointerType;const b=x.target;b.hasPointerCapture(x.pointerId)&&b.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(E(x),x.preventDefault())}),onKeyDown:ge(s.onKeyDown,x=>{const b=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(b&&x.key===" ")&&oH.includes(x.key)&&(E(),x.preventDefault())})})})});Aj.displayName=kj;var jj="SelectValue",Rj=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Bi(jj,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Be(e,c.onValueNodeChange);return Ct(()=>{u(h)},[u,h]),a.jsx(we.span,{...l,ref:f,style:{pointerEvents:"none"},children:Jj(c.value)?a.jsx(a.Fragment,{children:o}):i})});Rj.displayName=jj;var hH="SelectIcon",Pj=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(we.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Pj.displayName=hH;var fH="SelectPortal",Dj=t=>a.jsx(fu,{asChild:!0,...t});Dj.displayName=fH;var Mo="SelectContent",Mj=m.forwardRef((t,e)=>{const n=Bi(Mo,t.__scopeSelect),[r,s]=m.useState();if(Ct(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?qn.createPortal(a.jsx(Oj,{scope:t.__scopeSelect,children:a.jsx(Mm.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(Lj,{...t,ref:e})});Mj.displayName=Mo;var tr=10,[Oj,Hi]=Tl(Mo),mH="SelectContentImpl",pH=Ha("SelectContent.RemoveScroll"),Lj=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:E,hideWhenDetached:x,avoidCollisions:b,...w}=t,v=Bi(Mo,n),[_,C]=m.useState(null),[R,D]=m.useState(null),N=Be(e,J=>C(J)),[T,I]=m.useState(null),[j,k]=m.useState(null),M=Om(n),[P,H]=m.useState(!1),ae=m.useRef(!1);m.useEffect(()=>{if(_)return G2(_)},[_]),V2();const X=m.useCallback(J=>{const[Z,...$]=M().map(te=>te.ref.current),[Y]=$.slice(-1),ie=document.activeElement;for(const te of J)if(te===ie||(te==null||te.scrollIntoView({block:"nearest"}),te===Z&&R&&(R.scrollTop=0),te===Y&&R&&(R.scrollTop=R.scrollHeight),te==null||te.focus(),document.activeElement!==ie))return},[M,R]),U=m.useCallback(()=>X([T,_]),[X,T,_]);m.useEffect(()=>{P&&U()},[P,U]);const{onOpenChange:O,triggerPointerDownPosRef:F}=v;m.useEffect(()=>{if(_){let J={x:0,y:0};const Z=Y=>{var ie,te;J={x:Math.abs(Math.round(Y.pageX)-(((ie=F.current)==null?void 0:ie.x)??0)),y:Math.abs(Math.round(Y.pageY)-(((te=F.current)==null?void 0:te.y)??0))}},$=Y=>{J.x<=10&&J.y<=10?Y.preventDefault():_.contains(Y.target)||O(!1),document.removeEventListener("pointermove",Z),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",$,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",$,{capture:!0})}}},[_,O,F]),m.useEffect(()=>{const J=()=>O(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[O]);const[V,B]=eR(J=>{const Z=M().filter(ie=>!ie.disabled),$=Z.find(ie=>ie.ref.current===document.activeElement),Y=tR(Z,J,$);Y&&setTimeout(()=>Y.ref.current.focus())}),G=m.useCallback((J,Z,$)=>{const Y=!ae.current&&!$;(v.value!==void 0&&v.value===Z||Y)&&(I(J),Y&&(ae.current=!0))},[v.value]),re=m.useCallback(()=>_==null?void 0:_.focus(),[_]),ne=m.useCallback((J,Z,$)=>{const Y=!ae.current&&!$;(v.value!==void 0&&v.value===Z||Y)&&k(J)},[v.value]),he=r==="popper"?$y:Vj,ue=he===$y?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:E,hideWhenDetached:x,avoidCollisions:b}:{};return a.jsx(Oj,{scope:n,content:_,viewport:R,onViewportChange:D,itemRefCallback:G,selectedItem:T,onItemLeave:re,itemTextRefCallback:ne,focusSelectedItem:U,selectedItemText:j,position:r,isPositioned:P,searchRef:V,children:a.jsx(h0,{as:pH,allowPinchZoom:!0,children:a.jsx(d0,{asChild:!0,trapped:v.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:ge(s,J=>{var Z;(Z=v.trigger)==null||Z.focus({preventScroll:!0}),J.preventDefault()}),children:a.jsx(hu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:a.jsx(he,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:J=>J.preventDefault(),...w,...ue,onPlaced:()=>H(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:ge(w.onKeyDown,J=>{const Z=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!Z&&J.key.length===1&&B(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let Y=M().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);if(["ArrowUp","End"].includes(J.key)&&(Y=Y.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const ie=J.target,te=Y.indexOf(ie);Y=Y.slice(te+1)}setTimeout(()=>X(Y)),J.preventDefault()}})})})})})})});Lj.displayName=mH;var gH="SelectItemAlignedPosition",Vj=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Bi(Mo,n),o=Hi(Mo,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=Be(e,N=>h(N)),p=Om(n),g=m.useRef(!1),E=m.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:w,focusSelectedItem:v}=o,_=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&x&&b&&w){const N=i.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),j=w.getBoundingClientRect();if(i.dir!=="rtl"){const ie=j.left-T.left,te=I.left-ie,me=N.left-te,ye=N.width+me,Ue=Math.max(ye,T.width),tt=window.innerWidth-tr,Bt=IE(te,[tr,Math.max(tr,tt-Ue)]);l.style.minWidth=ye+"px",l.style.left=Bt+"px"}else{const ie=T.right-j.right,te=window.innerWidth-I.right-ie,me=window.innerWidth-N.right-te,ye=N.width+me,Ue=Math.max(ye,T.width),tt=window.innerWidth-tr,Bt=IE(te,[tr,Math.max(tr,tt-Ue)]);l.style.minWidth=ye+"px",l.style.right=Bt+"px"}const k=p(),M=window.innerHeight-tr*2,P=x.scrollHeight,H=window.getComputedStyle(u),ae=parseInt(H.borderTopWidth,10),X=parseInt(H.paddingTop,10),U=parseInt(H.borderBottomWidth,10),O=parseInt(H.paddingBottom,10),F=ae+X+P+O+U,V=Math.min(b.offsetHeight*5,F),B=window.getComputedStyle(x),G=parseInt(B.paddingTop,10),re=parseInt(B.paddingBottom,10),ne=N.top+N.height/2-tr,he=M-ne,ue=b.offsetHeight/2,J=b.offsetTop+ue,Z=ae+X+J,$=F-Z;if(Z<=ne){const ie=k.length>0&&b===k[k.length-1].ref.current;l.style.bottom="0px";const te=u.clientHeight-x.offsetTop-x.offsetHeight,me=Math.max(he,ue+(ie?re:0)+te+U),ye=Z+me;l.style.height=ye+"px"}else{const ie=k.length>0&&b===k[0].ref.current;l.style.top="0px";const me=Math.max(ne,ae+x.offsetTop+(ie?G:0)+ue)+$;l.style.height=me+"px",x.scrollTop=Z-ne+x.offsetTop}l.style.margin=`${tr}px 0`,l.style.minHeight=V+"px",l.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,x,b,w,i.dir,r]);Ct(()=>_(),[_]);const[C,R]=m.useState();Ct(()=>{u&&R(window.getComputedStyle(u).zIndex)},[u]);const D=m.useCallback(N=>{N&&E.current===!0&&(_(),v==null||v(),E.current=!1)},[_,v]);return a.jsx(vH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:D,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:a.jsx(we.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Vj.displayName=gH;var yH="SelectPopperPosition",$y=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=tr,...i}=t,o=Lm(n);return a.jsx(HC,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});$y.displayName=yH;var[vH,H0]=Tl(Mo,{}),By="SelectViewport",Fj=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Hi(By,n),o=H0(By,n),l=Be(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(Mm.Slot,{scope:n,children:a.jsx(we.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ge(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const E=window.innerHeight-tr*2,x=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),w=Math.max(x,b);if(w<E){const v=w+g,_=Math.min(E,v),C=v-_;f.style.height=_+"px",f.style.bottom==="0px"&&(h.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Fj.displayName=By;var zj="SelectGroup",[xH,wH]=Tl(zj),bH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ds();return a.jsx(xH,{scope:n,id:s,children:a.jsx(we.div,{role:"group","aria-labelledby":s,...r,ref:e})})});bH.displayName=zj;var Uj="SelectLabel",$j=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=wH(Uj,n);return a.jsx(we.div,{id:s.id,...r,ref:e})});$j.displayName=Uj;var gf="SelectItem",[_H,Bj]=Tl(gf),Hj=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Bi(gf,n),c=Hi(gf,n),u=l.value===r,[h,f]=m.useState(i??""),[p,g]=m.useState(!1),E=Be(e,v=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,v,r,s)}),x=ds(),b=m.useRef("touch"),w=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(_H,{scope:n,value:r,disabled:s,textId:x,isSelected:u,onItemTextChange:m.useCallback(v=>{f(_=>_||((v==null?void 0:v.textContent)??"").trim())},[]),children:a.jsx(Mm.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(we.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:E,onFocus:ge(o.onFocus,()=>g(!0)),onBlur:ge(o.onBlur,()=>g(!1)),onClick:ge(o.onClick,()=>{b.current!=="mouse"&&w()}),onPointerUp:ge(o.onPointerUp,()=>{b.current==="mouse"&&w()}),onPointerDown:ge(o.onPointerDown,v=>{b.current=v.pointerType}),onPointerMove:ge(o.onPointerMove,v=>{var _;b.current=v.pointerType,s?(_=c.onItemLeave)==null||_.call(c):b.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ge(o.onPointerLeave,v=>{var _;v.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:ge(o.onKeyDown,v=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&v.key===" "||(aH.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})})})})});Hj.displayName=gf;var tc="SelectItemText",Wj=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Bi(tc,n),l=Hi(tc,n),c=Bj(tc,n),u=dH(tc,n),[h,f]=m.useState(null),p=Be(e,w=>f(w),c.onItemTextChange,w=>{var v;return(v=l.itemTextRefCallback)==null?void 0:v.call(l,w,c.value,c.disabled)}),g=h==null?void 0:h.textContent,E=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=u;return Ct(()=>(x(E),()=>b(E)),[x,b,E]),a.jsxs(a.Fragment,{children:[a.jsx(we.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?qn.createPortal(i.children,o.valueNode):null]})});Wj.displayName=tc;var qj="SelectItemIndicator",Gj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Bj(qj,n).isSelected?a.jsx(we.span,{"aria-hidden":!0,...r,ref:e}):null});Gj.displayName=qj;var Hy="SelectScrollUpButton",Kj=m.forwardRef((t,e)=>{const n=Hi(Hy,t.__scopeSelect),r=H0(Hy,t.__scopeSelect),[s,i]=m.useState(!1),o=Be(e,r.onScrollButtonChange);return Ct(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(Yj,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});Kj.displayName=Hy;var Wy="SelectScrollDownButton",Qj=m.forwardRef((t,e)=>{const n=Hi(Wy,t.__scopeSelect),r=H0(Wy,t.__scopeSelect),[s,i]=m.useState(!1),o=Be(e,r.onScrollButtonChange);return Ct(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(Yj,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Qj.displayName=Wy;var Yj=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Hi("SelectScrollButton",n),o=m.useRef(null),l=Om(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),Ct(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(we.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ge(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ge(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ge(s.onPointerLeave,()=>{c()})})}),EH="SelectSeparator",Xj=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(we.div,{"aria-hidden":!0,...r,ref:e})});Xj.displayName=EH;var qy="SelectArrow",SH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Lm(n),i=Bi(qy,n),o=Hi(qy,n);return i.open&&o.position==="popper"?a.jsx(WC,{...s,...r,ref:e}):null});SH.displayName=qy;function Jj(t){return t===""||t===void 0}var Zj=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=Be(e,s),o=Cj(n);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),a.jsx(mu,{asChild:!0,children:a.jsx("select",{...r,ref:i,defaultValue:n})})});Zj.displayName="BubbleSelect";function eR(t){const e=cn(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function tR(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=TH(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function TH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var NH=Ij,nR=Aj,CH=Rj,IH=Pj,kH=Dj,rR=Mj,AH=Fj,sR=$j,iR=Hj,jH=Wj,RH=Gj,oR=Kj,aR=Qj,lR=Xj;const yf=NH,vf=CH,nu=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(nR,{ref:r,className:W("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(IH,{asChild:!0,children:a.jsx(eC,{className:"h-4 w-4 opacity-50"})})]}));nu.displayName=nR.displayName;const cR=m.forwardRef(({className:t,...e},n)=>a.jsx(oR,{ref:n,className:W("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(FO,{className:"h-4 w-4"})}));cR.displayName=oR.displayName;const uR=m.forwardRef(({className:t,...e},n)=>a.jsx(aR,{ref:n,className:W("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(eC,{className:"h-4 w-4"})}));uR.displayName=aR.displayName;const ru=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(kH,{children:a.jsxs(rR,{ref:s,className:W("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(cR,{}),a.jsx(AH,{className:W("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(uR,{})]})}));ru.displayName=rR.displayName;const PH=m.forwardRef(({className:t,...e},n)=>a.jsx(sR,{ref:n,className:W("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));PH.displayName=sR.displayName;const Et=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(iR,{ref:r,className:W("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(RH,{children:a.jsx(Ph,{className:"h-4 w-4"})})}),a.jsx(jH,{children:e})]}));Et.displayName=iR.displayName;const DH=m.forwardRef(({className:t,...e},n)=>a.jsx(lR,{ref:n,className:W("-mx-1 my-1 h-px bg-muted",t),...e}));DH.displayName=lR.displayName;function MH(t){return j0({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const jd={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},OH=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},LH=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},rg=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,kE=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function VH(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=Zr(),{user:o,signOut:l}=st(),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,g]=m.useState(null),[E,x]=m.useState("timeline"),[b,w]=m.useState(1),[v,_]=m.useState(!1),[C,R]=m.useState([]);m.useEffect(()=>{if(o)try{const k=`trace_email_events_${o.uid}`,P=JSON.parse(localStorage.getItem(k)||"[]").map(H=>({id:H.id,uniqueId:H.id,userId:o.uid,courseId:"system",courseName:"System",classroomId:"system",title:H.title,description:H.body,dueDate:H.timestamp,dueTime:null,maxPoints:null,systemStatus:"submitted",userStatus:null,submissionId:null,submittedAt:null,gradedAt:null,grade:null,alternateLink:null,createdAt:H.timestamp,lastSyncedAt:H.timestamp}));R(P)}catch{}},[o]);const D=m.useMemo(()=>{let k=[...s,...C];return c&&(k=k.filter(M=>M.courseId===c)),h&&(k=k.filter(M=>M.systemStatus===h)),k},[s,C,c,h]),N=()=>{u(null),f(null)},T=c||h;if(s.length===0)return a.jsx(il,{});const I=()=>{const k=m.useRef(null),[M,P]=m.useState(!1),H=m.useRef({x:0,left:0}),X=60*b,{earliestDate:U,latestDate:O,initialScrollPosition:F}=m.useMemo(()=>{const $=new Date;$.setHours(0,0,0,0);let Y=new Date,ie=new Date;if(D.length>0){const It=D.flatMap(Ne=>{const Le=[];return Ne.dueDate&&Le.push(new Date(Ne.dueDate)),Ne.createdAt&&Le.push(new Date(Ne.createdAt)),Le});It.length>0&&(Y=new Date(Math.min(...It.map(Ne=>Ne.getTime()))),ie=new Date(Math.max(...It.map(Ne=>Ne.getTime()))))}const te=new Date(Y);te.setDate(te.getDate()-30);const me=new Date(ie);me.setDate(me.getDate()+30);let ye=$;const Ue=D.filter(It=>It.dueDate&&new Date(It.dueDate)>=$).sort((It,Ne)=>new Date(It.dueDate).getTime()-new Date(Ne.dueDate).getTime());Ue.length>0&&(ye=new Date(Ue[0].dueDate));const Bt=Math.ceil((ye.getTime()-te.getTime())/(1e3*3600*24))*X+X/2-window.innerWidth/2;return{earliestDate:te,latestDate:me,initialScrollPosition:Math.max(0,Bt)}},[D,X]),V=m.useMemo(()=>OH(U,O),[U,O]);m.useEffect(()=>{k.current&&(k.current.scrollLeft=F)},[F]);const B=$=>{$.button===2&&k.current&&($.preventDefault(),P(!0),H.current={x:$.pageX,left:k.current.scrollLeft})},G=m.useCallback($=>{if(!M||!k.current)return;$.preventDefault();const ie=($.pageX-H.current.x)*1.5;k.current.scrollLeft=H.current.left-ie},[M]),re=m.useCallback(()=>{P(!1)},[]);m.useEffect(()=>(M?(window.addEventListener("mousemove",G),window.addEventListener("mouseup",re)):(window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",re)),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",re)}),[M,G,re]);const[ne,he]=m.useState(!1),[ue,J]=m.useState(!1),Z=m.useRef(null);return m.useEffect(()=>{const $=()=>{if(Z.current){const{scrollHeight:ie,clientHeight:te,scrollTop:me}=Z.current;he(ie>te),J(me+te>=ie-10)}};$();const Y=Z.current;return Y==null||Y.addEventListener("scroll",$),window.addEventListener("resize",$),()=>{Y==null||Y.removeEventListener("scroll",$),window.removeEventListener("resize",$)}},[D,v]),a.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[a.jsx("div",{ref:$=>{k.current=$,Z.current=$},className:W("flex-1 overflow-auto relative select-none",M?"cursor-grabbing":"cursor-default"),onMouseDown:B,onContextMenu:$=>$.preventDefault(),children:a.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${V.length*X}px`},children:[a.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:V.map(($,Y)=>{const ie=kE($);return a.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:X},children:[a.jsx("span",{className:W("text-[10px] uppercase font-bold tracking-wider mb-1",ie?"text-foreground":"text-muted-foreground"),children:$.toLocaleDateString("en-US",{weekday:"narrow"})}),a.jsx("span",{className:W("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",ie?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:$.getDate()}),a.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},Y)})}),a.jsxs("div",{className:"relative pt-6",style:{minHeight:v?`${Math.max(300,D.filter($=>$.dueDate).length*40)}px`:`${Math.max(400,D.filter($=>$.dueDate).length*60)}px`},children:[a.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:V.map(($,Y)=>{const ie=kE($);return a.jsx("div",{className:W("flex-shrink-0 h-full border-r border-border relative",ie?"bg-accent/50":""),style:{width:X},children:ie&&a.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},Y)})}),a.jsx("div",{className:W("px-0 relative z-10 mt-2",v?"space-y-1":"space-y-3"),children:D.filter($=>$.dueDate).map($=>{const Y=e.find(Uo=>Uo.id===$.courseId),ie=Y==null?void 0:Y.color,te=$.systemStatus==="submitted"||$.systemStatus==="graded",me=$.createdAt?new Date($.createdAt):new Date,ye=new Date($.dueDate),Ue=(me.getTime()-U.getTime())/(1e3*3600*24),tt=(ye.getTime()-me.getTime())/(1e3*3600*24),Bt=Math.max(0,Ue*X),It=Math.max(X,tt*X),Ne={left:`${Bt}px`,width:`${It}px`,minWidth:v?"100px":"140px",backgroundColor:te?void 0:ie,borderColor:te?void 0:ie?"rgba(0,0,0,0.1)":void 0};jd[$.systemStatus]||jd.backlog;const Le="bg-green-100/80 border-green-300 text-green-800",Xn="bg-card border shadow-sm "+(ie?"text-slate-900":"text-foreground"),ks=v?"h-8":"h-12",Wi=v?"h-9":"h-14";return a.jsx("div",{className:W("relative group",Wi),children:a.jsxs("div",{onClick:()=>g($),className:W("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",ks,v?"px-2":"px-3",te?Le:Xn),style:Ne,children:[a.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:a.jsxs("span",{className:W("truncate font-bold leading-none flex items-center gap-1",v?"text-[10px]":"text-xs"),children:[$.courseId==="system"&&a.jsx(ex,{className:W("inline-block",v?"h-2.5 w-2.5":"h-3 w-3")}),te&&a.jsx(Ph,{className:W("inline-block mr-0.5",v?"h-2.5 w-2.5":"h-3 w-3")}),$.title]})}),!v&&a.jsx("div",{className:"flex items-center justify-between opacity-80",children:a.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:$.courseName})})]})},$.id)})})]})]})}),ne&&!ue&&a.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(lb,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),a.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),a.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const $=k.current,Y=($==null?void 0:$.scrollLeft)||0,ie=($==null?void 0:$.scrollTop)||0,te=Math.min(2,b+.25);w(te),te>.75&&_(!1),setTimeout(()=>{$&&($.scrollLeft=Y*(te/b),$.scrollTop=ie)},0)},disabled:b>=2,title:"Zoom In (Normal View)",children:a.jsx(s5,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),a.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),a.jsx(fe,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const $=k.current,Y=($==null?void 0:$.scrollLeft)||0,ie=($==null?void 0:$.scrollTop)||0,te=Math.max(.5,b-.25);w(te),te<=.75&&_(!0),setTimeout(()=>{$&&($.scrollLeft=Y*(te/b),$.scrollTop=ie)},0)},disabled:b<=.5,title:"Zoom Out (Compact View)",children:a.jsx(i5,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[a.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(b*100),"%"]}),v&&a.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(db,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},j=()=>{const k=m.useRef(null),[M,P]=m.useState(!1),H=m.useRef({y:0,top:0}),ae=m.useRef({}),[X,U]=m.useState(!1),{startMonth:O,endMonth:F}=m.useMemo(()=>{let J=new Date,Z=new Date;if(D.length>0){const ie=D.filter(te=>te.dueDate).map(te=>new Date(te.dueDate));ie.length>0&&(J=new Date(Math.min(...ie.map(te=>te.getTime()))),Z=new Date(Math.max(...ie.map(te=>te.getTime()))))}const $=new Date(J);$.setMonth($.getMonth()-2),$.setDate(1);const Y=new Date(Z);return Y.setMonth(Y.getMonth()+4),Y.setDate(1),{startMonth:$,endMonth:Y}},[D]),V=m.useMemo(()=>LH(O,F),[O,F]),B=m.useCallback(()=>{var ie;const J=rg(new Date),Z=ae.current[J];if(!Z){U(!0);return}const $=Z.getBoundingClientRect(),Y=(ie=k.current)==null?void 0:ie.getBoundingClientRect();Y&&U($.bottom<Y.top||$.top>Y.bottom)},[V]);m.useEffect(()=>{const J=k.current;return J&&(J.addEventListener("scroll",B),B()),()=>J==null?void 0:J.removeEventListener("scroll",B)},[B]),m.useEffect(()=>{setTimeout(()=>G(),100)},[]);const G=()=>{const J=rg(new Date),Z=ae.current[J];Z&&Z.scrollIntoView({behavior:"smooth",block:"center"})},re=J=>{J.button===2&&k.current&&(J.preventDefault(),P(!0),H.current={y:J.pageY,top:k.current.scrollTop})},ne=m.useCallback(J=>{if(!M||!k.current)return;J.preventDefault();const $=(J.pageY-H.current.y)*1.5;k.current.scrollTop=H.current.top-$},[M]),he=m.useCallback(()=>{P(!1)},[]);m.useEffect(()=>(M?(window.addEventListener("mousemove",ne),window.addEventListener("mouseup",he)):(window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",he)),()=>{window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",he)}),[M,ne,he]);const ue=J=>{const Z=J.getFullYear(),$=J.getMonth(),Y=new Date(Z,$,1),ie=new Date(Z,$+1,0),te=[];for(let me=0;me<Y.getDay();me++)te.push({date:new Date(Z,$,-Y.getDay()+1+me),isCurrentMonth:!1});for(let me=1;me<=ie.getDate();me++)te.push({date:new Date(Z,$,me),isCurrentMonth:!0});for(;te.length%7!==0;){const me=te.length-(Y.getDay()+ie.getDate())+1,ye=new Date(Z,$+1,me);te.push({date:ye,isCurrentMonth:!1})}return te};return a.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[X&&a.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:a.jsxs("button",{onClick:G,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[a.jsx(lb,{size:14})," Jump to Today"]})}),a.jsx("div",{ref:k,className:W("flex-1 overflow-y-auto",M?"cursor-grabbing":"cursor-default"),onMouseDown:re,onContextMenu:J=>J.preventDefault(),children:a.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:V.map(J=>{const Z=ue(J),$=rg(J);return a.jsxs("div",{ref:Y=>ae.current[$]=Y,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[a.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold",children:J.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),a.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Y=>a.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:Y},Y))}),a.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:Z.map((Y,ie)=>{const te=D.filter(ye=>{if(!ye.dueDate)return!1;const Ue=new Date(ye.dueDate);Ue.setHours(0,0,0,0);const tt=new Date(Y.date);return tt.setHours(0,0,0,0),tt.toDateString()===Ue.toDateString()}),me=Y.date.toDateString()===new Date().toDateString();return a.jsxs("div",{className:W("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",Y.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[a.jsx("span",{className:W("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",me&&Y.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:Y.date.getDate()}),a.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:te.map(ye=>{const Ue=jd[ye.systemStatus]||jd.backlog;return a.jsx("div",{onClick:tt=>{tt.stopPropagation(),g(ye)},className:W("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",Ue.color,Ue.border),title:ye.title,children:ye.title},ye.id)})})]},ie)})})]},$)})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[a.jsx(db,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] overflow-hidden",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-3 sticky top-0 bg-background py-3 z-10 border-b px-4 sm:px-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:E==="timeline"?"default":"ghost",size:"sm",onClick:()=>x("timeline"),className:"gap-2",children:[a.jsx(Ss,{size:14}),"Timeline"]}),a.jsxs(fe,{variant:E==="calendar"?"default":"ghost",size:"sm",onClick:()=>x("calendar"),className:"gap-2",children:[a.jsx($c,{size:14}),"Calendar"]})]}),a.jsxs(yf,{value:c||"all",onValueChange:k=>u(k==="all"?null:k),children:[a.jsx(nu,{className:"w-[140px] sm:w-[180px]","data-testid":"select-course-filter",children:a.jsx(vf,{placeholder:"All Courses"})}),a.jsxs(ru,{children:[a.jsx(Et,{value:"all",children:"All Courses"}),e.map(k=>a.jsx(Et,{value:k.id,children:k.name},k.id))]})]}),a.jsxs(yf,{value:h||"all",onValueChange:k=>f(k==="all"?null:k),children:[a.jsx(nu,{className:"w-[120px] sm:w-[140px]","data-testid":"select-status-filter",children:a.jsx(vf,{placeholder:"All Status"})}),a.jsxs(ru,{children:[a.jsx(Et,{value:"all",children:"All Status"}),a.jsx(Et,{value:"backlog",children:"Backlog"}),a.jsx(Et,{value:"in_progress",children:"In Progress"}),a.jsx(Et,{value:"submitted",children:"Submitted"}),a.jsx(Et,{value:"graded",children:"Graded"}),a.jsx(Et,{value:"overdue",children:"Overdue"})]})]}),T&&a.jsxs(fe,{variant:"ghost",size:"sm",onClick:N,className:"text-muted-foreground","data-testid":"button-clear-filters",children:[a.jsx(No,{className:"h-3.5 w-3.5 mr-1"}),"Clear filters"]}),a.jsx("div",{className:"ml-auto",children:a.jsx(Xf,{children:a.jsxs(Jf,{children:[a.jsx(Zf,{asChild:!0,children:a.jsx(Si,{href:"/settings/integrations",children:a.jsxs(fe,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap",children:[a.jsx(MH,{className:"h-4 w-4"}),"Sync with Google Calendar"]})})}),a.jsxs(vu,{side:"left",className:"max-w-xs",children:[a.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:E==="timeline"?a.jsx(I,{}):a.jsx(j,{})})]}),a.jsx($0,{assignment:p,isOpen:!!p,onClose:()=>g(null)})]})}const AE="attendance_configs",Hn={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await Ut(We(Fe,AE,t),n)},async getCourseConfig(t){try{const e=We(Fe,AE,t),n=await Yr(e);return n.exists()?n.data():null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var b;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=r.toUpperCase().charCodeAt(0)-65,o=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:Z500?majorDimension=ROWS`,l=await fetch(o,{headers:{Authorization:`Bearer ${e}`}});if(!l.ok)throw l.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):l.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const u=(await l.json()).values;if(!u||u.length<2)throw new Error("Sheet is empty or invalid format.");const h=u[0],f=u.find(w=>{var _;return((_=w[s])==null?void 0:_.toLowerCase().trim())===n.toLowerCase().trim()});if(!f)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let p=0,g=0;const E=[];for(let w=1;w<h.length;w++){const v=h[w],_=(b=f[w])==null?void 0:b.toUpperCase().trim();if(!v)continue;let C="Unknown";_==="P"||_==="PRESENT"||_==="1"?(C="Present",g++,p++):(_==="A"||_==="ABSENT"||_==="0")&&(C="Absent",p++),C!=="Unknown"&&E.push({date:v,status:C})}const x=p===0?0:Math.round(g/p*100);return{courseId:t,stats:{totalClasses:p,attendedClasses:g,percentage:x},history:E.reverse()}}},ai={"5-day-consistent":{id:"5-day-consistent",label:"5-Day Streak",description:"Visited app for 5 consecutive days",category:"consistency",icon:Zv,color:"text-orange-500 bg-orange-50 dark:bg-orange-500/10"},"10-day-consistent":{id:"10-day-consistent",label:"10-Day Streak",description:"Visited app for 10 consecutive days",category:"consistency",icon:r5,color:"text-amber-500 bg-amber-50 dark:bg-amber-500/10"},"30-day-consistent":{id:"30-day-consistent",label:"Monthly Master",description:"Visited app for 30 consecutive days",category:"consistency",icon:rx,color:"text-purple-500 bg-purple-50 dark:bg-purple-500/10"},"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:cC,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:oC,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:iy,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:$c,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:tC,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},FH=Object.keys(ai);function zH({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=ai[t],[i,o]=m.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return a.jsx(Xf,{delayDuration:0,children:a.jsxs(Jf,{open:i,onOpenChange:o,children:[a.jsx(Zf,{asChild:!0,children:a.jsxs("div",{className:W("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),o(!i)},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[a.jsx(l,{className:W(u[e]),strokeWidth:2.5}),r&&a.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),a.jsx(eI,{children:a.jsxs(vu,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>o(!1),children:[a.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function nc({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],o=i.length;return a.jsxs("div",{className:W("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>a.jsx(zH,{badgeId:l,size:n},l)),o>0&&a.jsx(Xf,{delayDuration:0,children:a.jsxs(Jf,{children:[a.jsx(Zf,{asChild:!0,children:a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",o]})}),a.jsx(eI,{children:a.jsx(vu,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),a.jsx("span",{className:"text-xs font-medium",children:((c=ai[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function UH(){const{user:t}=st(),[e,n]=m.useState([]),[r,s]=m.useState(0),[i,o]=m.useState(0),[l,c]=m.useState(!0);m.useEffect(()=>{if(!t)return;const f=Cs(We(Fe,"leaderboards","all-courses","students",t.uid),p=>{var g;if(p.exists()){const E=p.data();n(E.badges||[]),s(E.loginStreak||0),o(((g=E.processedAssignmentIds)==null?void 0:g.length)||0)}c(!1)});return()=>f()},[t]);const u=()=>{const f=[];return f.push({badge:ai["5-day-consistent"],current:r||1,target:5,percentage:Math.min((r||1)/5*100,100),type:"streak",label:"Days"}),f.push({badge:ai["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),f.push({badge:ai["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),f.push({badge:ai["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),f.reduce((p,g)=>g.percentage>p.percentage?g:p)},h=e.length===0?u():null;return a.jsxs(Pe,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[a.jsxs(Ze,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),a.jsx(sC,{className:"h-5 w-5 text-purple-500"})]}),a.jsx(He,{className:"flex-1 flex flex-col",children:l?a.jsxs("div",{className:"space-y-2",children:[a.jsx(on,{className:"h-8 w-8 rounded-full"}),a.jsx(on,{className:"h-3 w-20"})]}):e.length>0?a.jsx("div",{className:"flex flex-col justify-between h-full gap-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,a.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),a.jsx(nc,{badges:e,limit:3,size:"md",className:"mt-2"})]})}):h?a.jsx("div",{className:"flex flex-col gap-3 justify-between h-full",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="streak"?a.jsx(Zv,{className:"h-5 w-5 text-orange-500"}):h.type==="submission"?a.jsx(cC,{className:"h-5 w-5 text-blue-500"}):a.jsx($c,{className:"h-5 w-5 text-emerald-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="streak"?"bg-orange-500":h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]})}):a.jsx("div",{className:"flex flex-col gap-2 justify-between h-full",children:a.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."})})})]})}function $H(){const{user:t}=st(),[e,n]=m.useState(null),[r,s]=m.useState(!0);return m.useEffect(()=>{if(!t)return;const i=Cs(We(Fe,"leaderboards","all-courses","students",t.uid),o=>{if(o.exists()){const l=o.data();n(l.loginStreak||0)}else n(0);s(!1)});return()=>i()},[t]),a.jsxs(Pe,{className:"flex flex-col h-full","data-testid":"card-streak",children:[a.jsxs(Ze,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Current Streak"}),a.jsx(Zv,{className:"h-5 w-5 text-orange-500 fill-orange-500"})]}),a.jsx(He,{className:"flex-1 flex flex-col justify-between",children:r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(on,{className:"h-8 w-16"}),a.jsx(on,{className:"h-3 w-24"})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:[e,a.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Days"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e&&e>0?"You're on fire! Keep coming back.":"Log in daily to build your streak!"})]})})]})}function BH({courses:t}){const{user:e,accessToken:n}=st(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){o(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async f=>{try{const p=await Hn.getCourseConfig(f.id);if(!p||!p.isVisible||!p.sheetUrl)return;const g=Hn.extractSheetId(p.sheetUrl);if(!g)return;const E=await Hn.fetchAttendanceFromSheet(g,n,e.email,p.emailColumn||"A");E&&(c+=E.stats.attendedClasses,u+=E.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const f=Math.round(c/u*100);let p="safe";f<70?p="danger":f<75&&(p="warning"),s({percentage:f,status:p,present:c,total:u})}o(!1)}l()},[t,e,n]),a.jsxs(Pe,{"data-testid":"card-attendance-overall",children:[a.jsxs(Ze,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),a.jsx(uC,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]}),a.jsx(He,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(on,{className:"h-8 w-16"}),a.jsx(on,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:W("text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:[r.percentage,"%"]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium text-muted-foreground",children:[r.present,"/",r.total," Classes Attended"]}),a.jsx("p",{className:W("text-[10px] uppercase tracking-wider font-bold",r.status==="safe"?"text-emerald-500":r.status==="warning"?"text-amber-500":"text-red-500"),children:r.status==="safe"?"On Track":"Low Attendance"})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Attendance Yet"}),a.jsx("p",{className:"text-xs text-muted-foreground/70 leading-relaxed",children:"Ask your teacher to login to Trace to track real-time attendance"})]}),a.jsx(Si,{href:"/attendance",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full mt-1",children:"View Details"})})]})})]})}function Rd({title:t,value:e,icon:n,variant:r="default"}){const i={default:{bg:"bg-gradient-to-br from-background to-muted/30",iconBg:"bg-primary/10",iconColor:"text-primary",valueColor:"text-foreground",border:"border-border hover:border-primary/50"},warning:{bg:"bg-gradient-to-br from-amber-50/50 to-amber-100/30 dark:from-amber-950/20 dark:to-amber-900/10",iconBg:"bg-amber-500/10",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800 hover:border-amber-400"},danger:{bg:"bg-gradient-to-br from-red-50/50 to-red-100/30 dark:from-red-950/20 dark:to-red-900/10",iconBg:"bg-destructive/10",iconColor:"text-destructive",valueColor:"text-destructive",border:"border-red-200 dark:border-red-800 hover:border-destructive"}}[r];return a.jsxs(Pe,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:W("overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",i.border),children:[a.jsx(Ze,{className:W("pb-3",i.bg),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(nt,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:t}),a.jsx("div",{className:W("p-2 rounded-lg",i.iconBg),children:a.jsx(n,{className:W("h-4 w-4",i.iconColor)})})]})}),a.jsx(He,{className:"pt-2",children:a.jsx("div",{className:W("text-3xl font-bold font-mono tracking-tight tabular-nums",i.valueColor),children:e})})]})}function HH({data:t}){const e=Math.max(...t.map(n=>n.count),1);return a.jsxs(Pe,{className:"overflow-hidden",children:[a.jsx(Ze,{className:"pb-3 bg-gradient-to-br from-background to-muted/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(nt,{className:"text-sm font-semibold flex items-center gap-2",children:[a.jsx(Ss,{className:"h-4 w-4 text-primary"}),"Weekly Workload"]}),a.jsxs(Sr,{variant:"outline",className:"text-xs font-mono",children:[t.reduce((n,r)=>n+r.count,0)," total"]})]})}),a.jsx(He,{className:"pt-4",children:a.jsx("div",{className:"flex items-end justify-between gap-3 h-36",children:t.map((n,r)=>a.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group",children:[a.jsx("span",{className:W("text-xs font-bold tabular-nums transition-all",n.count>0?n.isToday?"text-primary":"text-muted-foreground":"text-transparent"),children:n.count>0?n.count:"0"}),a.jsx("div",{className:"relative w-full",children:a.jsx("div",{className:W("w-full rounded-t-md transition-all duration-500 ease-out relative overflow-hidden",n.isToday?"bg-gradient-to-t from-primary to-primary/70 shadow-lg shadow-primary/20":"bg-gradient-to-t from-muted to-muted/50",n.count===0&&"min-h-[4px] opacity-30","group-hover:scale-105 group-hover:shadow-xl"),style:{height:n.count>0?`${n.count/e*96}px`:"4px"},children:n.count>0&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-white/10 to-white/20"})})}),a.jsx("span",{className:W("text-xs font-medium transition-colors",n.isToday?"text-primary font-bold":"text-muted-foreground group-hover:text-foreground"),children:n.day})]},r))})})]})}function WH({courses:t,assignments:e}){const{user:n}=st(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(f=>f.id)])),c=[],u=new Map,h=()=>{const f=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,g=t.map(v=>v.id),E=new Set(e.map(v=>v.id)),x=f.filter(v=>{const _=v.email||"",C=v.emailDomain||(_.includes("@")?_.split("@")[1]:""),R=v.enrolledCourseIds||[],D=v.processedAssignmentIds||[],N=p&&C&&p===C,T=g.some(k=>R.includes(k)),j=!C&&D.some(k=>E.has(k));return v.id===n.uid?!0:N&&T||j});x.sort((v,_)=>_.totalXP-v.totalXP);const b=x.length;if(b===0){s(null),o(!1);return}const w=x.findIndex(v=>v.id===n.uid);if(w!==-1){const v=w+1,_=Math.round((b-v+1)/b*100),C=x[w];s({rank:v,total:b,percentile:_,xp:C.totalXP||0,badges:C.badges||[]})}else s(null);o(!1)};return l.forEach(f=>{const p=o0(Jx(Fe,"leaderboards",f,"students"),a0("totalXP","desc")),g=Cs(p,E=>{E.docs.forEach(x=>{const b=x.data(),w={id:x.id,...b,email:b.email||"",emailDomain:b.emailDomain||(b.email?b.email.split("@")[1]:""),enrolledCourseIds:b.enrolledCourseIds||b.subjects||[],processedAssignmentIds:b.processedAssignmentIds||b.completedTasks||[],totalXP:b.totalXP||b.xp||0,badges:b.badges||[]},v=u.get(x.id);(!v||w.totalXP>=v.totalXP)&&u.set(x.id,w)}),h()},E=>{console.error(`Error fetching leaderboard source ${f}:`,E),h()});c.push(g)}),()=>{c.forEach(f=>f())}},[n,t,e]),a.jsxs(Pe,{"data-testid":"card-class-rank",children:[a.jsxs(Ze,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),a.jsx(rx,{className:"h-5 w-5 text-amber-500"})]}),a.jsx(He,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(on,{className:"h-8 w-16"}),a.jsx(on,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,a.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.xp.toLocaleString()," Total XP"]})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),a.jsx(Si,{href:"/leaderboard",children:a.jsx(fe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function qH(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:o}=Zr();st();const[l,c]=m.useState(null),u=t();return o&&o.toLowerCase().includes("session")?a.jsx(il,{}):r.length===0?a.jsx(il,{}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6 space-y-6",children:[u.upcoming7Days>0&&a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[a.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),a.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:a.jsx(KO,{className:"h-5 w-5"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:["Weekly Focus",a.jsxs(Sr,{variant:"secondary",className:"bg-amber-200/60 dark:bg-amber-800/40 text-amber-900 dark:text-amber-100 border-0 text-xs font-bold",children:[u.upcoming7Days," ",u.upcoming7Days===1?"task":"tasks"]})]}),a.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["You have"," ",a.jsxs("span",{className:"font-bold text-amber-900 dark:text-amber-100",children:[u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),a.jsx(Si,{href:"/timeline",children:a.jsxs(fe,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:border-amber-400 dark:hover:border-amber-600 shadow-sm",children:["View Timeline",a.jsx(PO,{className:"ml-1.5 h-3.5 w-3.5"})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(Rd,{title:"Due in 3 Days",value:u.upcoming3Days,icon:nC,variant:u.upcoming3Days>3?"warning":"default"}),a.jsx(Rd,{title:"Due in 7 Days",value:u.upcoming7Days,icon:Ss}),a.jsx(Rd,{title:"Overdue",value:u.overdue,icon:qr,variant:u.overdue>0?"danger":"default"}),a.jsx(Rd,{title:"Total Active",value:u.totalActive,icon:Wa}),a.jsx(WH,{courses:i,assignments:r}),a.jsx(BH,{courses:i}),a.jsx(UH,{}),a.jsx($H,{})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsx(HH,{data:u.weeklyWorkload}),a.jsxs(Pe,{children:[a.jsx(Ze,{className:"pb-2",children:a.jsx(nt,{className:"text-sm font-medium",children:"Next Actions"})}),a.jsx(He,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>a.jsx(WB,{assignment:h,onClick:()=>c(h)},h.id)):a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[a.jsx(Wa,{className:"h-8 w-8 mb-2"}),a.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),a.jsx($0,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function GH(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s}=Zr();st();const[i,o]=m.useState(null),[l,c]=m.useState("grid"),u=km(),h=t.find(g=>g.id===i),p=e.filter(g=>g.courseId===i).flatMap(g=>g.materials?g.materials.flatMap(E=>{let x=[];if(E.driveFile){const b=E.driveFile.driveFile;let w=b.thumbnailUrl||b.iconUrl||null;!w&&b.id&&(w=`https://drive.google.com/thumbnail?id=${b.id}&sz=w800`),x.push({id:b.id,title:b.title,link:b.alternateLink,thumbnail:w,type:"driveFile"})}return x}):[]).filter(g=>!!g.title);return n&&t.length===0?a.jsx(KH,{}):t.length===0?a.jsx(il,{}):a.jsxs("div",{className:"flex h-full overflow-hidden bg-background",children:[a.jsxs("div",{className:W("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",u&&i?"hidden":"flex"),children:[a.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:a.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(g=>a.jsxs("button",{onClick:()=>o(g.id),className:W("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",i===g.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[a.jsx("div",{className:W("h-8 w-8 rounded-full flex items-center justify-center shrink-0",i===g.id?"bg-primary-foreground/20":"bg-muted"),children:a.jsx(ub,{className:W("h-4 w-4",i===g.id?"text-primary-foreground":"text-muted-foreground")})}),a.jsxs("div",{className:"truncate flex-1",children:[a.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:g.name}),a.jsx("p",{className:W("text-[10px] uppercase tracking-wider font-medium",i===g.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:g.section||"No Section"})]}),a.jsx(VO,{className:W("h-4 w-4 transition-transform",i===g.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},g.id))})]}),a.jsxs("div",{className:W("flex-1 overflow-y-auto bg-background",u&&!i?"hidden":"flex flex-col"),children:[u&&i&&a.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:a.jsxs(fe,{variant:"ghost",size:"sm",onClick:()=>o(null),className:"gap-2 pl-2",children:[a.jsx(Uf,{className:"h-4 w-4"}),"Back to Courses"]})}),i?a.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[a.jsxs("div",{className:"space-y-1 max-w-full",children:[a.jsx(Sr,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),a.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:h==null?void 0:h.name}),a.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(h==null?void 0:h.descriptionHeading)||"Curated academic materials and notes."})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),a.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[p.length," Documents"]})]}),a.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[a.jsx(fe,{variant:"ghost",size:"icon",className:W("h-6 w-6 rounded-sm",l==="grid"&&"bg-background shadow-sm"),onClick:()=>c("grid"),children:a.jsx(rC,{className:"h-4 w-4"})}),a.jsx(fe,{variant:"ghost",size:"icon",className:W("h-6 w-6 rounded-sm",l==="list"&&"bg-background shadow-sm"),onClick:()=>c("list"),children:a.jsx(QO,{className:"h-4 w-4"})})]})]})]}),p.length>0?l==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:p.map((g,E)=>{var C;const x=((C=g.title)==null?void 0:C.toLowerCase())||"",b=x.endsWith(".pdf"),w=x.endsWith(".ppt")||x.endsWith(".pptx");let v="bg-zinc-100 text-zinc-600",_="FILE";return b?(v="bg-red-100 text-red-600",_="PDF DOCUMENT"):w?(v="bg-orange-100 text-orange-600",_="PRESENTATION"):(v="bg-blue-100 text-blue-600",_="DOCUMENT"),a.jsxs(Pe,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[a.jsx(Ze,{className:"p-3 border-b border-border space-y-0 pb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:W("h-8 w-8 rounded-full flex items-center justify-center shrink-0",v),children:a.jsx(vo,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:g.title}),a.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:_})]})]})}),a.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[g.thumbnail&&a.jsx("img",{src:g.thumbnail.includes("s220")?g.thumbnail.replace("s220","s800"):g.thumbnail,alt:g.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:R=>{var N;console.log("Thumbnail failed to load:",g.thumbnail),R.currentTarget.style.display="none";const D=(N=R.currentTarget.parentElement)==null?void 0:N.querySelector(".fallback-viewer");D&&(D.classList.remove("hidden"),D.classList.add("block"))}}),a.jsx("div",{className:W("fallback-viewer absolute inset-0 w-full h-full",g.thumbnail?"hidden":"block"),children:a.jsx(QH,{type:b?"pdf":w?"ppt":"doc"})}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:a.jsx(fe,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:a.jsxs("a",{href:g.link,target:"_blank",rel:"noopener noreferrer",children:[a.jsx(ny,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${g.id}-${E}`)})}):a.jsx("div",{className:"space-y-2 pb-20",children:p.map((g,E)=>{var C;const x=((C=g.title)==null?void 0:C.toLowerCase())||"",b=x.endsWith(".pdf"),w=x.endsWith(".ppt")||x.endsWith(".pptx");let v="bg-zinc-100 text-zinc-600",_="File";return b?(v="bg-red-100 text-red-600",_="PDF Document"):w?(v="bg-orange-100 text-orange-600",_="Presentation"):(v="bg-blue-100 text-blue-600",_="Document"),a.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[g.thumbnail?a.jsx("img",{src:g.thumbnail.includes("s220")?g.thumbnail.replace("s220","s400"):g.thumbnail,alt:g.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:R=>{R.currentTarget.style.display="none";const D=R.currentTarget.nextElementSibling;D&&D.classList.remove("hidden")}}):null,a.jsx("div",{className:W("absolute inset-0 flex items-center justify-center",g.thumbnail?"hidden":"flex",v),children:a.jsx(vo,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:g.title}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[_,"  Read Only"]})]}),a.jsx(fe,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:a.jsxs("a",{href:g.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),a.jsx(ny,{className:"h-4 w-4"})]})})]},`${g.id}-${E}`)})}):a.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[a.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:a.jsx(ub,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[a.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:a.jsx(vo,{className:"h-10 w-10 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})}function KH(){return a.jsxs("div",{className:"flex h-full overflow-hidden",children:[a.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[a.jsx(on,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>a.jsx(on,{className:"h-16 w-full rounded-xl"},t))]}),a.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[a.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(on,{className:"h-4 w-20"}),a.jsx(on,{className:"h-10 w-80"}),a.jsx(on,{className:"h-4 w-64"})]}),a.jsx(on,{className:"h-10 w-32 rounded-lg"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>a.jsx(on,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function QH({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return a.jsxs("div",{className:W("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[a.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[a.jsxs("div",{className:"flex gap-2 mb-1",children:[a.jsx("div",{className:W("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:a.jsx(vo,{className:"h-6 w-6"})}),a.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[a.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),a.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&a.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),a.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:a.jsx(vo,{className:"h-40 w-40"})})]})}function YH({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"consistency",label:"Consistency & Streaks"},{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),a.jsx("div",{className:"space-y-8",children:s.map(o=>{const l=FH.map(c=>ai[c]).filter(c=>c.category===o.id);return l.length===0?null:a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:o.label}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);return a.jsxs("div",{className:W("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[a.jsx("div",{className:W("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?W(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:a.jsx(c.icon,{className:W("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:W("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&a.jsx(sy,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),a.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&o.id==="consistency"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="5-day-consistent"?h=5:c.id==="10-day-consistent"?h=10:c.id==="30-day-consistent"&&(h=30),h>0){const f=Number(e)||1,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Days"]})]})]})}return null})()}),!u&&o.id==="productivity"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="10-submissions"?h=10:c.id==="25-submissions"?h=25:c.id==="50-submissions"&&(h=50),h>0){const f=Number(n)||0,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Submissions"]})]})]})}return null})()}),!u&&o.id==="reliability"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:h,attended:f}=r||{total:0,attended:0};let p=0,g=0;if(c.id==="perfect-week"?(p=7,g=100):c.id==="attendance-champion"&&(p=30,g=90),p>0){const E=h>0?f/h*100:0,x=Math.min(h/p*100,100),b=Math.min(E/g*100,100),w=Math.min((x+b)/2,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${w}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(w),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h," days "," ",Math.round(E),"% attended"]})]})]})}return null})()})]}),u&&a.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},o.id)})})}var W0="Switch",[XH,dq]=Yn(W0),[JH,ZH]=XH(W0),dR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,g]=m.useState(null),E=Be(e,_=>g(_)),x=m.useRef(!1),b=p?h||!!p.closest("form"):!0,[w=!1,v]=Ti({prop:s,defaultProp:i,onChange:u});return a.jsxs(JH,{scope:n,checked:w,disabled:l,children:[a.jsx(we.button,{type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":mR(w),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:E,onClick:ge(t.onClick,_=>{v(C=>!C),b&&(x.current=_.isPropagationStopped(),x.current||_.stopPropagation())})}),b&&a.jsx(eW,{control:p,bubbles:!x.current,name:r,value:c,checked:w,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});dR.displayName=W0;var hR="SwitchThumb",fR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=ZH(hR,n);return a.jsx(we.span,{"data-state":mR(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});fR.displayName=hR;var eW=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),o=Cj(n),l=RC(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[o,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function mR(t){return t?"checked":"unchecked"}var pR=dR,tW=fR;const Sn=m.forwardRef(({className:t,...e},n)=>a.jsx(pR,{className:W("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(tW,{className:W("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Sn.displayName=pR.displayName;var nW="Label",gR=m.forwardRef((t,e)=>a.jsx(we.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));gR.displayName=nW;var yR=gR;const rW=pu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),gr=m.forwardRef(({className:t,...e},n)=>a.jsx(yR,{ref:n,className:W(rW(),t),...e}));gr.displayName=yR.displayName;var sg="rovingFocusGroup.onEntryFocus",sW={bubbles:!1,cancelable:!0},Vm="RovingFocusGroup",[Gy,vR,iW]=Kv(Vm),[oW,xR]=Yn(Vm,[iW]),[aW,lW]=oW(Vm),wR=m.forwardRef((t,e)=>a.jsx(Gy.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Gy.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(cW,{...t,ref:e})})}));wR.displayName=Vm;var cW=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),g=Be(e,p),E=B0(i),[x=null,b]=Ti({prop:o,defaultProp:l,onChange:c}),[w,v]=m.useState(!1),_=cn(u),C=vR(n),R=m.useRef(!1),[D,N]=m.useState(0);return m.useEffect(()=>{const T=p.current;if(T)return T.addEventListener(sg,_),()=>T.removeEventListener(sg,_)},[_]),a.jsx(aW,{scope:n,orientation:r,dir:E,loop:s,currentTabStopId:x,onItemFocus:m.useCallback(T=>b(T),[b]),onItemShiftTab:m.useCallback(()=>v(!0),[]),onFocusableItemAdd:m.useCallback(()=>N(T=>T+1),[]),onFocusableItemRemove:m.useCallback(()=>N(T=>T-1),[]),children:a.jsx(we.div,{tabIndex:w||D===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:ge(t.onMouseDown,()=>{R.current=!0}),onFocus:ge(t.onFocus,T=>{const I=!R.current;if(T.target===T.currentTarget&&I&&!w){const j=new CustomEvent(sg,sW);if(T.currentTarget.dispatchEvent(j),!j.defaultPrevented){const k=C().filter(X=>X.focusable),M=k.find(X=>X.active),P=k.find(X=>X.id===x),ae=[M,P,...k].filter(Boolean).map(X=>X.ref.current);ER(ae,h)}}R.current=!1}),onBlur:ge(t.onBlur,()=>v(!1))})})}),bR="RovingFocusGroupItem",_R=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,l=ds(),c=i||l,u=lW(bR,n),h=u.currentTabStopId===c,f=vR(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=u;return m.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),a.jsx(Gy.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:a.jsx(we.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ge(t.onMouseDown,E=>{r?u.onItemFocus(c):E.preventDefault()}),onFocus:ge(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ge(t.onKeyDown,E=>{if(E.key==="Tab"&&E.shiftKey){u.onItemShiftTab();return}if(E.target!==E.currentTarget)return;const x=hW(E,u.orientation,u.dir);if(x!==void 0){if(E.metaKey||E.ctrlKey||E.altKey||E.shiftKey)return;E.preventDefault();let w=f().filter(v=>v.focusable).map(v=>v.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const v=w.indexOf(E.currentTarget);w=u.loop?fW(w,v+1):w.slice(v+1)}setTimeout(()=>ER(w))}})})})});_R.displayName=bR;var uW={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dW(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function hW(t,e,n){const r=dW(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return uW[r]}function ER(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function fW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var mW=wR,pW=_R,q0="Tabs",[gW,hq]=Yn(q0,[xR]),SR=xR(),[yW,G0]=gW(q0),TR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=B0(l),[f,p]=Ti({prop:r,onChange:s,defaultProp:i});return a.jsx(yW,{scope:n,baseId:ds(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(we.div,{dir:h,"data-orientation":o,...u,ref:e})})});TR.displayName=q0;var NR="TabsList",CR=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=G0(NR,n),o=SR(n);return a.jsx(mW,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(we.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});CR.displayName=NR;var IR="TabsTrigger",kR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=G0(IR,n),l=SR(n),c=RR(o.baseId,r),u=PR(o.baseId,r),h=r===o.value;return a.jsx(pW,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(we.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:ge(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:ge(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:ge(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});kR.displayName=IR;var AR="TabsContent",jR=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=G0(AR,n),c=RR(l.baseId,r),u=PR(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(zi,{present:s||h,children:({present:p})=>a.jsx(we.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});jR.displayName=AR;function RR(t,e){return`${t}-trigger-${e}`}function PR(t,e){return`${t}-content-${e}`}var vW=TR,DR=CR,MR=kR,OR=jR;const xW=vW,LR=m.forwardRef(({className:t,...e},n)=>a.jsx(DR,{ref:n,className:W("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));LR.displayName=DR.displayName;const oh=m.forwardRef(({className:t,...e},n)=>a.jsx(MR,{ref:n,className:W("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));oh.displayName=MR.displayName;const ah=m.forwardRef(({className:t,...e},n)=>a.jsx(OR,{ref:n,className:W("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));ah.displayName=OR.displayName;function wW(){const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function bW(){const{user:t,requestCalendarPermissions:e}=st(),[n,r]=m.useState(!1),[s,i]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!t)return;const u=Cs(We(Fe,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const o=async()=>{r(!0);try{await e()&&await Ut(We(Fe,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await Ut(We(Fe,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(f=>({...f,[u]:h}));try{await Ut(We(Fe,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(Pe,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(Ss,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&a.jsx(Sr,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),a.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?a.jsx(fe,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):a.jsx(fe,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?a.jsx(qa,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&a.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[a.jsx("div",{className:"h-px w-full bg-border mb-6"}),a.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",a.jsxs("div",{className:"grid gap-3 max-w-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),a.jsx(Sn,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),a.jsx(Sn,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Ga,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(Pe,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(ex,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),a.jsx("div",{className:"shrink-0",children:a.jsx(Si,{href:"/settings/notifications",children:a.jsx(fe,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function _W(){var ae,X;const{user:t,signOut:e}=st(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i,courses:o}=Zr(),{isInstallable:l,isInstalled:c,promptInstall:u}=wW(),{theme:h,setTheme:f}=u0(),[p,g]=m.useState(!0),[E,x]=m.useState("auto"),[b,w]=m.useState(!1),[v,_]=m.useState([]),[C,R]=m.useState(0),[D,N]=m.useState(0),[T,I]=m.useState(),[j,k]=m.useState("general");m.useEffect(()=>{const O=new URLSearchParams(window.location.search).get("tab");O&&["general","badges","integrations"].includes(O)&&k(O)},[]),m.useEffect(()=>{if(!t)return;const U=Cs(We(Fe,"leaderboards","all-courses","students",t.uid),O=>{var F;if(O.exists()){const V=O.data();_(V.badges||[]),R(V.loginStreak||0),N(((F=V.processedAssignmentIds)==null?void 0:F.length)||0)}else _([]),R(0),N(0)});return()=>U()},[t]),m.useEffect(()=>{if(!o||o.length===0)return;let U=0,O=0;o.forEach(F=>{if(F.attendanceData&&typeof F.attendanceData=="object"){const V=Object.values(F.attendanceData);U+=V.length,O+=V.filter(B=>typeof B=="string"?B.toLowerCase()==="present":B===!0||B===1).length}}),console.log("Attendance Stats Calculated:",{totalClasses:U,attendedClasses:O}),U>0&&I({total:U,attended:O})},[o]),m.useEffect(()=>{if(!t||j!=="badges")return;(async()=>{var he;const O=We(Fe,"leaderboards","all-courses","students",t.uid),F=await Yr(O);if(!F.exists())return;const V=F.data(),B=new Set(V.badges||[]);let G=!1;const re=V.loginStreak||0;re>=5&&!B.has("5-day-consistent")&&(B.add("5-day-consistent"),G=!0),re>=10&&!B.has("10-day-consistent")&&(B.add("10-day-consistent"),G=!0),re>=30&&!B.has("30-day-consistent")&&(B.add("30-day-consistent"),G=!0);const ne=((he=V.processedAssignmentIds)==null?void 0:he.length)||0;ne>=10&&!B.has("10-submissions")&&(B.add("10-submissions"),G=!0),ne>=25&&!B.has("25-submissions")&&(B.add("25-submissions"),G=!0),ne>=50&&!B.has("50-submissions")&&(B.add("50-submissions"),G=!0),G&&await Ut(O,{badges:Array.from(B)},{merge:!0})})()},[t,j]);const M=((ae=t==null?void 0:t.displayName)==null?void 0:ae.split(" ").map(U=>U[0]).join("").toUpperCase())||((X=t==null?void 0:t.email)==null?void 0:X[0].toUpperCase())||"U",P=()=>n?n.toLocaleString():"Never",H=async()=>{w(!0);try{await u()}catch(U){console.error("Install failed:",U)}finally{w(!1)}};return a.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),a.jsxs(xW,{value:j,onValueChange:k,className:"w-full",children:[a.jsxs(LR,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[a.jsx(oh,{value:"general",children:"General"}),a.jsx(oh,{value:"badges",children:"Badges"}),a.jsx(oh,{value:"integrations",children:"Integrations"})]}),a.jsxs(ah,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[a.jsxs(Pe,{children:[a.jsxs(Ze,{children:[a.jsx(nt,{className:"text-base",children:"Connected Account"}),a.jsx(yn,{children:"Your Google account linked to this app"})]}),a.jsxs(He,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(si,{className:"h-12 w-12",children:[a.jsx(ii,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(oi,{children:M})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Ph,{className:"h-3.5 w-3.5"}),"Connected"]})]}),a.jsx(cr,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",P()]})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:U=>{U.preventDefault(),s().catch(O=>{console.error("Sync failed:",O)})},disabled:r,"data-testid":"button-sync-settings",children:[a.jsx(Ga,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),a.jsxs(Pe,{children:[a.jsxs(Ze,{children:[a.jsx(nt,{className:"text-base",children:"Sync Settings"}),a.jsx(yn,{children:"Configure how your data syncs with Google Classroom"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(gr,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),a.jsx(Sn,{id:"background-sync",checked:p,onCheckedChange:g,"data-testid":"switch-background-sync"})]})})]}),a.jsxs(Pe,{children:[a.jsxs(Ze,{children:[a.jsx(nt,{className:"text-base",children:"Theme"}),a.jsx(yn,{children:"Choose your preferred color theme"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(gr,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(fe,{variant:h==="light"?"default":"outline",size:"sm",onClick:()=>f("light"),className:"flex items-center gap-2",children:[a.jsx(nx,{className:"h-4 w-4"}),"Light"]}),a.jsxs(fe,{variant:h==="dark"?"default":"outline",size:"sm",onClick:()=>f("dark"),className:"flex items-center gap-2",children:[a.jsx($f,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),a.jsxs(Pe,{className:"border-primary/20",children:[a.jsxs(Ze,{children:[a.jsxs(nt,{className:"text-base flex items-center gap-2",children:[a.jsx(cb,{className:"h-4 w-4"}),"Install App"]}),a.jsx(yn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),a.jsx(He,{className:"space-y-4",children:c?a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[a.jsx(Ph,{className:"h-5 w-5 text-emerald-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),a.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):l?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[a.jsx(t5,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),a.jsxs(fe,{onClick:H,disabled:b,className:"w-full",size:"lg","data-testid":"button-install-app",children:[a.jsx(cb,{className:"h-4 w-4 mr-2"}),b?"Installing...":"Install App"]}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[a.jsx(Bf,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),a.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),a.jsxs(Pe,{children:[a.jsxs(Ze,{children:[a.jsx(nt,{className:"text-base",children:"Preferences"}),a.jsx(yn,{children:"Customize your experience"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(gr,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),a.jsxs(yf,{value:E,onValueChange:x,children:[a.jsx(nu,{className:"w-[180px]","data-testid":"select-timezone",children:a.jsx(vf,{})}),a.jsxs(ru,{children:[a.jsx(Et,{value:"auto",children:"Auto-detect"}),a.jsx(Et,{value:"America/New_York",children:"Eastern Time"}),a.jsx(Et,{value:"America/Chicago",children:"Central Time"}),a.jsx(Et,{value:"America/Denver",children:"Mountain Time"}),a.jsx(Et,{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx(Et,{value:"Europe/London",children:"London"}),a.jsx(Et,{value:"Europe/Paris",children:"Paris"}),a.jsx(Et,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),a.jsxs(Pe,{children:[a.jsxs(Ze,{children:[a.jsxs(nt,{className:"text-base flex items-center gap-2",children:[a.jsx(Bc,{className:"h-4 w-4"}),"Account Actions"]}),a.jsx(yn,{children:"Manage your session"})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),a.jsxs(RA,{children:[a.jsx(PA,{asChild:!0,children:a.jsxs(fe,{variant:"outline",size:"sm","data-testid":"button-signout",children:[a.jsx(Bc,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),a.jsxs(E0,{children:[a.jsxs(S0,{children:[a.jsx(N0,{children:"Are you absolutely sure?"}),a.jsx(C0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(T0,{children:[a.jsx(k0,{children:"Cancel"}),a.jsx(I0,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})})]})]}),a.jsx(ah,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsxs(Pe,{children:[a.jsxs(Ze,{children:[a.jsxs(nt,{className:"text-base flex items-center gap-2",children:[a.jsx(sC,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),a.jsx(yn,{children:"Track your progress and unlock rewards by staying consistent."})]}),a.jsx(He,{children:a.jsx(YH,{earnedBadges:v,currentStreak:C,submissionCount:D,attendanceStats:T})})]})}),a.jsx(ah,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsx(bW,{})})]})]})}function EW(){const{user:t,requestGmailPermissions:e,accessToken:n}=st(),{toast:r}=Vo(),[s,i]=m.useState(!1),[o,l]=m.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{async function E(){if(t)try{const x=We(Fe,"users",t.uid,"settings","notifications"),b=await Yr(x);if(b.exists()){const w=b.data();i(w.enabled??!1),l(w.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(x){console.error("Failed to load settings from Firestore",x)}finally{f(!1)}}E()},[t]),m.useEffect(()=>{async function E(){if(!(!t||h))try{const b=We(Fe,"users",t.uid,"settings","notifications");await Ut(b,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(b){console.error("Failed to save settings",b)}}const x=setTimeout(E,1e3);return()=>clearTimeout(x)},[s,o,t,h]);const p=async()=>{u(!0);try{if(await e()){if(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."}),t!=null&&t.uid){const x={id:`email-${Date.now()}`,title:"Assignment due reminder email sent",body:"This is a test alert to confirm your notifications are working.",timestamp:new Date().toISOString(),type:"email"},b=`trace_email_events_${t.uid}`,w=JSON.parse(localStorage.getItem(b)||"[]");localStorage.setItem(b,JSON.stringify([...w,x]))}}else r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(E){console.error(E),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},g=E=>{l(x=>({...x,[E]:!x[E]}))};return a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Si,{href:"/settings",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"rounded-full",children:a.jsx(Uf,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(Ze,{className:"pb-4",children:[a.jsxs(nt,{className:"flex items-center gap-2 text-lg",children:[a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:a.jsx(ex,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),a.jsxs(yn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),a.jsx(cr,{}),a.jsxs(He,{className:"pt-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(gr,{className:"text-base font-medium",children:"Assignment due reminder"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),a.jsx(Sn,{checked:o.dueReminder,onCheckedChange:()=>g("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(cr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(gr,{className:"text-base font-medium",children:"Missed submission alert"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),a.jsx(Sn,{checked:o.missedSubmission,onCheckedChange:()=>g("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(cr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(gr,{className:"text-base font-medium",children:"Heavy workload warning"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),a.jsx(Sn,{checked:o.workloadWarning,onCheckedChange:()=>g("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),a.jsxs(z0,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[a.jsx(Wa,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:"Academic alerts are active."})]}),a.jsx(fe,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[a.jsx(Bf,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),a.jsxs(fe,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&a.jsx(qa,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function SW(){const[t,e]=Wv(),{user:n,requestCalendarPermissions:r}=st(),{toast:s}=Vo(),[i,o]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!n)return;const E=Cs(We(Fe,"users",n.uid,"settings","calendar"),x=>{x.exists()&&h(x.data()),o(!1)});return()=>E()},[n]);const f=async()=>{c(!0);try{await r()?(await Ut(We(Fe,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(E){console.error(E),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await Ut(We(Fe,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(E){console.error(E)}},g=async(E,x)=>{h(b=>({...b,[E]:x}));try{await Ut(We(Fe,"users",n.uid,"settings","calendar"),{[E]:x},{merge:!0})}catch(b){console.error(b)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(qa,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:a.jsx(LO,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(Pe,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(Ze,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:a.jsx(Ss,{className:"h-6 w-6"})}),a.jsx(nt,{className:"text-xl",children:"Google Calendar"}),u.enabled&&a.jsx(Sr,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),a.jsx(yn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?a.jsx(fe,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(fe,{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?a.jsx(qa,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&a.jsxs(He,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(cr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),a.jsx(Sn,{checked:u.syncAssignments,onCheckedChange:E=>g("syncAssignments",E)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),a.jsx(Sn,{checked:u.syncExams,onCheckedChange:E=>g("syncExams",E)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),a.jsx(Sn,{checked:u.syncPersonal,onCheckedChange:E=>g("syncPersonal",E)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[a.jsx(Ga,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(TW,{})]})]})}function TW(){const{user:t,requestGmailPermissions:e}=st(),{toast:n}=Vo(),[r,s]=m.useState(!1),[i,o]=m.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});m.useEffect(()=>{if(!t)return;const h=Cs(We(Fe,"users",t.uid,"settings","notifications"),f=>{f.exists()&&o(f.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await Ut(We(Fe,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await Ut(We(Fe,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{o(p=>({...p,[h]:f}));try{await Ut(We(Fe,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(p){console.error(p)}};return a.jsxs(Pe,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(Ze,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[a.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),a.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),a.jsx(nt,{className:"text-xl",children:"Email Notifications"}),i.enabled&&a.jsx(Sr,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),a.jsx(yn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?a.jsx(fe,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(fe,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?a.jsx(qa,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&a.jsxs(He,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(cr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),a.jsx(Sn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),a.jsx(Sn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}var K0="Progress",Q0=100,[NW,fq]=Yn(K0),[CW,IW]=NW(K0),VR=m.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=kW,...o}=t;(s||s===0)&&!jE(s)&&console.error(AW(`${s}`,"Progress"));const l=jE(s)?s:Q0;r!==null&&!RE(r,l)&&console.error(jW(`${r}`,"Progress"));const c=RE(r,l)?r:null,u=xf(c)?i(c,l):void 0;return a.jsx(CW,{scope:n,value:c,max:l,children:a.jsx(we.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":xf(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":UR(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});VR.displayName=K0;var FR="ProgressIndicator",zR=m.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=IW(FR,n);return a.jsx(we.div,{"data-state":UR(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});zR.displayName=FR;function kW(t,e){return`${Math.round(t/e*100)}%`}function UR(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function xf(t){return typeof t=="number"}function jE(t){return xf(t)&&!isNaN(t)&&t>0}function RE(t,e){return xf(t)&&!isNaN(t)&&t<=e&&t>=0}function AW(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Q0}\`.`}function jW(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Q0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var $R=VR,RW=zR;const BR=m.forwardRef(({className:t,value:e,...n},r)=>a.jsx($R,{ref:r,className:W("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(RW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));BR.displayName=$R.displayName;function PW(){var j,k,M,P,H,ae;const{user:t,signOut:e}=st(),{courses:n,assignments:r,isLoading:s}=Zr(),[i,o]=m.useState("class"),[l,c]=m.useState([]),[u,h]=m.useState(!1),[f,p]=m.useState(!0),[g,E]=m.useState(!0),[x,b]=m.useState(!1),[w,v]=m.useState(0),[_,C]=m.useState("Initializing...");m.useEffect(()=>{h(!0);const X=Array.from(new Set(["all-courses",...n.map(V=>V.id)])),U=[],O=new Map,F=()=>{const V=[],B=t!=null&&t.email?t.email.split("@")[1]:null,G=n.map(ne=>ne.id),re=new Set(r.map(ne=>ne.id));O.forEach(ne=>{const he=ne.email||"";let ue=ne.emailDomain||"";!ue&&he.includes("@")&&(ue=he.split("@")[1]);const J=ne.enrolledCourseIds||[],Z=ne.processedAssignmentIds||[],$=B&&ue&&B===ue,Y=G.some(ye=>J.includes(ye)),te=!ue&&Z.some(ye=>re.has(ye));let me=!1;i==="college"?(me=!!$,(ne.id===(t==null?void 0:t.uid)||$)&&console.log(`[College Filter] Student: ${ne.displayName}, Domain: ${ue}, User Domain: ${B}, Match: ${$}`)):me=$&&Y||te,me&&V.push(ne)}),V.sort((ne,he)=>he.totalXP-ne.totalXP),c(V),h(!1)};return X.forEach(V=>{const B=Jx(Fe,"leaderboards",V,"students"),G=o0(B,a0("totalXP","desc"),C2(50)),re=Cs(G,ne=>{ne.forEach(he=>{const ue=he.data(),J={id:he.id,displayName:ue.displayName||ue.name||"Anonymous",photoUrl:ue.photoUrl||ue.avatar||"",totalXP:ue.totalXP||ue.xp||0,processedAssignmentIds:ue.processedAssignmentIds||ue.completedTasks||[],email:ue.email||"",emailDomain:ue.emailDomain||(ue.email?ue.email.split("@")[1]:""),enrolledCourseIds:ue.enrolledCourseIds||ue.subjects||[],badges:ue.badges||[]},Z=O.get(he.id);(!Z||J.totalXP>=Z.totalXP)&&O.set(he.id,J)}),F()});U.push(re)}),()=>{U.forEach(V=>V())}},[i,t,n,r]);const R=async()=>{if(!t)return;b(!0),v(5),C("Fetching historical classroom data...");const X=r;v(20),C(`Scanning ${X.length} past assignments...`);let U=0;const O=[],F=B=>new Promise(G=>setTimeout(G,B));let V=0;for(const B of X)if(V++,V%5===0&&(v(20+V/X.length*60),await F(10)),B.systemStatus==="submitted"||B.systemStatus==="graded"){if(U+=100,B.submittedAt&&B.dueDate){const re=new Date(B.submittedAt).getTime();(new Date(B.dueDate).getTime()-re)/(1e3*60*60)>48&&(U+=50)}O.push(B.id)}v(90),C("Syncing to leaderboard...");try{const B=We(Fe,"leaderboards","all-courses","students",t.uid),G=await Yr(B),re=new Set(G.exists()?G.data().badges||[]:[]),ne=O.length;ne>=10&&re.add("10-submissions"),ne>=25&&re.add("25-submissions"),ne>=50&&re.add("50-submissions");const he=t.email||"",ue=he.includes("@")?he.split("@")[1]:"",J=n.map(Z=>Z.id);await Ut(B,{displayName:t.displayName||"Anonymous",photoUrl:t.photoURL||"",email:he,emailDomain:ue,enrolledCourseIds:J,totalXP:U,processedAssignmentIds:O,lastSyncedAt:Cm(),badges:Array.from(re)},{merge:!0}),v(100),C("Synchronization Complete!"),await F(500)}catch(B){console.error("Sync Failed",B),C("Sync Failed. Please try again.")}finally{b(!1)}},D=i==="class"?"My Class":"My College",N=l.find(X=>X.id===(t==null?void 0:t.uid)),T=(N==null?void 0:N.totalXP)||0,I=!!N&&T>0;return!s&&n.length===0?a.jsx(il,{}):a.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),a.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[D," Leaderboard"]})]}),a.jsx("div",{className:"w-full sm:w-[200px]",children:a.jsxs(yf,{value:i,onValueChange:X=>o(X),children:[a.jsx(nu,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:a.jsx(vf,{placeholder:"Select View"})}),a.jsxs(ru,{children:[a.jsx(Et,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),a.jsx(Et,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[f&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>p(!1),children:a.jsx(No,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:a.jsx(HO,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),a.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[a.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Submit"," ",a.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),i==="college"&&g&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(fe,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>E(!1),children:a.jsx(No,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:a.jsx(qr,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),a.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[a.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",a.jsx(lC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),a.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",a.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[a.jsx(Bf,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!I&&!u||x?a.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:x?a.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs font-mono uppercase text-muted-foreground",children:[a.jsx("span",{children:_}),a.jsxs("span",{children:[Math.round(w),"%"]})]}),a.jsx(BR,{value:w,className:"h-2"})]}):a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(JO,{className:"h-6 w-6 text-primary"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-medium",children:"No Score Detected"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Calculate your XP based on all your past submitted assignments to join the leaderboard."})]}),a.jsx(fe,{onClick:R,size:"lg",className:"mt-2 font-semibold w-full sm:w-auto",children:"Calculate My Archive Score"})]})}):null,u&&l.length===0?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(X=>a.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},X))}):l.length===0&&!x?a.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:a.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[l.length>0&&a.jsxs("div",{className:W("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",f?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[a.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:l[1]?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(si,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[a.jsx(ii,{src:l[1].photoUrl}),a.jsx(oi,{className:"text-lg bg-zinc-100 text-zinc-500",children:(k=(j=l[1].displayName)==null?void 0:j[0])==null?void 0:k.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:l[1].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[l[1].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(nc,{badges:l[1].badges||[],limit:2,size:"sm"})})]})]}):a.jsx("div",{className:"w-full"})}),a.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:a.jsx(UO,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),a.jsxs(si,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[a.jsx(ii,{src:l[0].photoUrl}),a.jsx(oi,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(P=(M=l[0].displayName)==null?void 0:M[0])==null?void 0:P.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),a.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:l[0].displayName}),a.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[l[0].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:a.jsx(nc,{badges:l[0].badges||[],limit:3,size:"sm"})})]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:l[2]?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(si,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[a.jsx(ii,{src:l[2].photoUrl}),a.jsx(oi,{className:"text-lg bg-amber-50 text-amber-700",children:(ae=(H=l[2].displayName)==null?void 0:H[0])==null?void 0:ae.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:l[2].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[l[2].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(nc,{badges:l[2].badges||[],limit:2,size:"sm"})})]})]}):a.jsx("div",{className:"w-full"})})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:l.slice(3).map((X,U)=>{var V,B;const O=X.id===(t==null?void 0:t.uid),F=U+4;return a.jsxs("div",{className:W("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",O?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[a.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:["#",F]})}),a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(si,{className:W("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",O?"border-primary/20":"border-border"),children:[a.jsx(ii,{src:X.photoUrl}),a.jsx(oi,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(B=(V=X.displayName)==null?void 0:V[0])==null?void 0:B.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsxs("span",{className:W("text-xs sm:text-sm font-medium truncate",O?"text-primary":"text-foreground"),children:[X.displayName," ",O&&a.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),a.jsx(nc,{badges:X.badges||[],limit:3,size:"md",className:"scale-100"})]}),a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[X.processedAssignmentIds.length," ",a.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),a.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[a.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:X.totalXP.toLocaleString()}),a.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},X.id)})})]})]})})]})}function DW(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const PE=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function MW(){const{courses:t}=Zr(),{accessToken:e,user:n}=st();Vo();const[r,s]=m.useState(""),[i,o]=m.useState({}),[l,c]=m.useState(!1),u=m.useMemo(()=>DW(),[]);m.useEffect(()=>{if(!t||!n)return;(async()=>{const C=await Promise.all(t.map(async D=>{var T;if(((T=i[D.id])==null?void 0:T.state)==="loaded")return i[D.id];const N=await Hn.getCourseConfig(D.id);return console.log(`[DEBUG] Course ${D.name} (${D.id}): Config =`,N),N?N.isVisible?(h(D.id,N.sheetUrl),{courseId:D.id,state:"loading"}):{courseId:D.id,state:"hidden"}:{courseId:D.id,state:"no-config"}})),R={};C.forEach(D=>{R[D.courseId]=D}),o(D=>({...D,...R}))})()},[t,n]),m.useEffect(()=>{t.length>0&&!r&&s(t[0].id)},[t,r]);const h=async(_,C)=>{if(!e||!(n!=null&&n.email))return;const R=Hn.extractSheetId(C);if(!R){o(T=>({...T,[_]:{courseId:_,state:"error",error:"Invalid configuration"}}));return}const D=await Hn.getCourseConfig(_),N=(D==null?void 0:D.emailColumn)||"A";try{const T=await Hn.fetchAttendanceFromSheet(R,e,n.email,N);o(I=>({...I,[_]:{courseId:_,state:"loaded",data:T}}))}catch(T){console.error(T),o(I=>({...I,[_]:{courseId:_,state:"error",error:T.message||"Failed to load"}}))}},f=async _=>{_==null||_.stopPropagation(),c(!0);const C=Object.values(i).filter(R=>R.state==="loaded"||R.state==="error"||R.state==="loading").map(async R=>{const D=await Hn.getCourseConfig(R.courseId);return D?h(R.courseId,D.sheetUrl):Promise.resolve()});await Promise.allSettled(C),c(!1)},p=Object.values(i).filter(_=>_.state==="loaded"&&_.data),g=p.reduce((_,C)=>{var R;return _+(((R=C.data)==null?void 0:R.stats.attendedClasses)||0)},0),E=p.reduce((_,C)=>{var R;return _+(((R=C.data)==null?void 0:R.stats.totalClasses)||0)},0),x=PE(g,E),b=i[r],w=t.find(_=>_.id===r),v=b==null?void 0:b.data;return m.useEffect(()=>{if(!n||E<5)return;const C=setTimeout(async()=>{const R=[],D=g,N=E,T=N>0?D/N:0;if(N>=10&&T===1&&R.push("perfect-week"),N>=30&&T>=.95&&R.push("attendance-champion"),R.length>0)try{const I=We(Fe,"leaderboards","all-courses","students",n.uid);await j2(I,{badges:P2(...R)})}catch(I){console.debug("Could not award attendance badges:",I)}},3e3);return()=>clearTimeout(C)},[n,E,g]),a.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[a.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[a.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),a.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),a.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",u]})]}),a.jsxs(fe,{variant:"ghost",size:"sm",onClick:f,className:W("text-muted-foreground h-8 shrink-0",l&&"opacity-70"),children:[a.jsx(Dh,{className:W("h-3.5 w-3.5 sm:mr-2",l&&"animate-spin")}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh Data"})]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[a.jsx("section",{children:p.length>0?a.jsx(Pe,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:a.jsx(He,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[a.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),a.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),a.jsx(Sr,{variant:x.status==="safe"?"outline":"destructive",className:W("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",x.color),children:x.status==="safe"?"Safe Status":"Attention Needed"})]}),a.jsxs("div",{className:"flex items-baseline gap-3",children:[a.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[x.percentage,"%"]}),a.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",p.length," active courses"]})]})]})})}):a.jsx(Pe,{className:"border-border shadow-sm bg-card",children:a.jsxs(He,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[a.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:a.jsx($c,{className:"h-8 w-8 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2 max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),a.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",a.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[a.jsx(qr,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[a.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(_=>{var T,I;const C=i[_.id],R=(C==null?void 0:C.state)||"loading",D=C!=null&&C.data?PE(C.data.stats.attendedClasses,C.data.stats.totalClasses):null,N=r===_.id;return a.jsx(Pe,{className:W("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",N&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>s(_.id),children:a.jsxs(He,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs(Jf,{children:[a.jsx(Zf,{asChild:!0,children:a.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:_.name})}),a.jsx(vu,{children:a.jsx("p",{children:_.name})})]}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:_.section||"No Section"})]}),R==="loaded"&&D&&a.jsxs("span",{className:W("text-lg font-bold tabular-nums",D.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[D.percentage,"%"]}),R==="hidden"&&a.jsx(ry,{className:"h-5 w-5 text-muted-foreground/50"}),R==="locked"&&a.jsx(sy,{className:"h-5 w-5 text-amber-500/80"}),R==="error"&&a.jsx(Bf,{className:"h-5 w-5 text-destructive/80"})]}),a.jsxs("div",{className:"mt-auto",children:[R==="loaded"&&D&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[a.jsxs("span",{children:[(T=C.data)==null?void 0:T.stats.attendedClasses,"/",(I=C.data)==null?void 0:I.stats.totalClasses," classes"]}),a.jsx("span",{className:D.status==="safe"?"text-emerald-500":"text-red-500",children:D.status==="safe"?"On Track":"Low Attendance"})]}),a.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:a.jsx("div",{className:W("h-full rounded-full transition-all duration-500",D.progressColor),style:{width:`${D.percentage}%`}})})]}),R==="locked"&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),a.jsxs(fe,{size:"sm",variant:"secondary",className:"w-full",onClick:j=>{j.stopPropagation(),setUnlockingCourseId(_.id)},children:[a.jsx(WO,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),R==="hidden"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),R==="no-config"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),R==="error"&&a.jsx("p",{className:"text-xs text-destructive",children:C==null?void 0:C.error}),R==="loading"&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Dh,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},_.id)})}),a.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx($c,{className:"h-4 w-4"})," History"]}),a.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(w==null?void 0:w.section)||(w==null?void 0:w.name.slice(0,3).toUpperCase())})]}),a.jsx(Pe,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:v?a.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:a.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:v.history.map((_,C)=>{const R=_.status==="Present",D=C===0,N=C===5;return a.jsxs("div",{className:"group",children:[D&&a.jsx("div",{className:"ml-5 mb-3 mt-1",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),N&&a.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),a.jsxs("div",{className:"relative pl-5 select-none",children:[a.jsx("div",{className:W("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",R?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),C!==v.history.length-1&&a.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),a.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[a.jsx("div",{className:W("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",R?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:_.status}),a.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:_.date})]})})]})]},C)})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(b==null?void 0:b.state)==="locked"&&a.jsxs(a.Fragment,{children:[a.jsx(sy,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(b==null?void 0:b.state)==="hidden"&&a.jsxs(a.Fragment,{children:[a.jsx(ry,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((b==null?void 0:b.state)==="error"||(b==null?void 0:b.state)==="no-config")&&a.jsxs(a.Fragment,{children:[a.jsx(qr,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}function OW(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(Pe,{className:"w-full max-w-md mx-4",children:a.jsxs(He,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(qr,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function HR(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}const LW=864e5;function Ky(t){const e=HR(t);return e.setHours(0,0,0,0),e}function DE(t){const e=HR(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function VW(t,e){const n=Ky(t),r=Ky(e),s=+n-DE(n),i=+r-DE(r);return Math.round((s-i)/LW)}function FW(){const{user:t}=st();return m.useEffect(()=>{if(!t)return;(async()=>{try{const n=We(Fe,"leaderboards","all-courses","students",t.uid),r=await Yr(n),s=Ky(new Date).getTime();let i=0,o=0,l=[];if(r.exists()){const f=r.data();i=f.loginStreak||0,o=f.lastLoginStreakDate?f.lastLoginStreakDate:0,l=f.badges||[]}if(o){const f=VW(s,o);if(f===0)return;f===1?i+=1:i=1}else i=1;const c=[...l];let u=!1;i>=5&&!c.includes("5-day-consistent")&&(c.push("5-day-consistent"),u=!0),i>=10&&!c.includes("10-day-consistent")&&(c.push("10-day-consistent"),u=!0),i>=30&&!c.includes("30-day-consistent")&&(c.push("30-day-consistent"),u=!0);const h={loginStreak:i,lastLoginStreakDate:s};u&&(h.badges=c),await Ut(n,h,{merge:!0}),console.debug("Streak updated to:",i)}catch(n){console.error("Failed to update streak:",n)}})()},[t]),null}const zW=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function Y0({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=m.useState(10),[i,o]=m.useState(0),l=n&&n.length>0?n:zW;return m.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const f=Math.random()*15;return Math.min(h+f,90)})},400),u=setInterval(()=>{o(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),a.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?a.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),a.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),a.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),a.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),a.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:a.jsx(qa,{className:"h-7 w-7 text-primary animate-spin"})}),a.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:a.jsx(lC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Student Sphere Is Ready"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),a.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(JN,{className:"h-3 w-3"})," Optimizing"]}),a.jsxs("span",{children:[Math.round(r),"%"]})]})]}),a.jsxs("div",{className:"relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),a.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[a.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:a.jsx(oC,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{className:"space-y-1 pt-0.5",children:[a.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const UW=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function $W({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,g;const{user:s,signOut:i}=st(),{theme:o,toggleTheme:l}=u0(),c=km(),u=[{id:"dashboard",label:"Dashboard",icon:qO},{id:"courses",label:"Courses",icon:Jv},{id:"settings",label:"Settings",icon:aC}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(E=>E[0]).join("").toUpperCase())||((g=s==null?void 0:s.email)==null?void 0:g[0].toUpperCase())||"U",f=()=>a.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),a.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&a.jsx("button",{className:"ml-auto",onClick:r,children:a.jsx(No,{className:"w-5 h-5 text-muted-foreground"})})]}),a.jsx("div",{className:"p-4 border-b border-border shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(si,{className:"h-8 w-8",children:[a.jsx(ii,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(oi,{className:"text-xs",children:h})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(E=>a.jsxs("button",{onClick:()=>{e(E.id),c&&r()},className:W("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===E.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[a.jsx(E.icon,{className:"h-4 w-4"}),E.label]},E.id))}),a.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(nx,{className:"w-4 h-4 mr-3"}):a.jsx($f,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(fe,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[a.jsx(Bc,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:W("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:a.jsx(f,{})}),c&&n&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function BW({courses:t}){const[e,n]=m.useState(0),[r,s]=m.useState(0);return m.useEffect(()=>{(async()=>{let o=0,l=0;(await Promise.all(t.map(u=>Hn.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?o++:l++)}),n(o),s(l)})()},[t]),a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(nt,{className:"text-sm font-medium",children:"Total Courses"}),a.jsx(Jv,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(He,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(nt,{className:"text-sm font-medium",children:"Attendance Visible"}),a.jsx($O,{className:"h-4 w-4 text-emerald-500"})]}),a.jsx(He,{children:a.jsx("div",{className:"text-2xl font-bold",children:e})})]}),a.jsxs(Pe,{className:"border-border shadow-sm",children:[a.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(nt,{className:"text-sm font-medium",children:"Attendance Hidden"}),a.jsx(ry,{className:"h-4 w-4 text-amber-500"})]}),a.jsx(He,{children:a.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function HW({courses:t,onRefresh:e,isLoading:n}){const[r,s]=m.useState(null);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),a.jsxs(fe,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[a.jsx(Dh,{className:W("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),a.jsxs("div",{className:"grid gap-6",children:[t.map(i=>a.jsxs(Pe,{className:"overflow-hidden border-border shadow-sm",children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),a.jsx(fe,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&a.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:a.jsx(WW,{courseId:i.id})})]},i.id)),t.length===0&&a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx("p",{children:"No active courses found where you are a teacher."}),a.jsx(fe,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function WW({courseId:t}){const{toast:e}=Vo(),[n,r]=m.useState(!1),[s,i]=m.useState(""),[o,l]=m.useState("A"),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{let g=!0;return(async()=>{f(!0);const x=await Hn.getCourseConfig(t);g&&x&&(r(x.isVisible),i(x.sheetUrl),l(x.emailColumn||"A")),g&&f(!1)})(),()=>{g=!1}},[t]);const p=async()=>{if(!Hn.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await Hn.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:o.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?a.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[a.jsx(Dh,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):a.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Sr,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),a.jsx(Sn,{checked:n,onCheckedChange:r})]})]}),a.jsxs("div",{className:"grid gap-4 max-w-xl",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(gr,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),a.jsx(af,{id:`sheet-${t}`,value:s,onChange:g=>i(g.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(gr,{htmlFor:`email-col-${t}`,children:"Email Column"}),a.jsx(af,{id:`email-col-${t}`,value:o,onChange:g=>l(g.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:a.jsx(fe,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?a.jsxs(a.Fragment,{children:[a.jsx(tC,{className:"w-4 h-4 mr-2"}),"Saved"]}):a.jsxs(a.Fragment,{children:[a.jsx(tx,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function qW(){return a.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),a.jsxs(Pe,{children:[a.jsxs(Ze,{children:[a.jsx(nt,{children:"Notifications"}),a.jsx(yn,{children:"Configure how you receive alerts."})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(DO,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(gr,{htmlFor:"email-notif",children:"Email Summaries"})]}),a.jsx(Sn,{id:"email-notif",defaultChecked:!0})]})})]}),a.jsxs(Pe,{children:[a.jsxs(Ze,{children:[a.jsx(nt,{children:"Display"}),a.jsx(yn,{children:"Customize your dashboard appearance."})]}),a.jsx(He,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($f,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(gr,{children:"Dark Mode"})]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function GW(){const{accessToken:t}=st(),[e,n]=m.useState("dashboard"),[r,s]=m.useState([]),[i,o]=m.useState(!0),[l,c]=m.useState(!1);async function u(){if(t)try{o(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(f){console.error("Failed to fetch courses",f)}finally{setTimeout(()=>o(!1),1500)}}m.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?a.jsx(Y0,{message:"Preparing Teacher Workspace...",tips:UW}):a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx($W,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),a.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[a.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[a.jsx(fe,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:a.jsx(iC,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),a.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&a.jsx(BW,{courses:r}),e==="courses"&&a.jsx(HW,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&a.jsx(qW,{})]})]})]})}function KW(){const{signOut:t,signInWithGoogle:e}=st();return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:a.jsxs(Pe,{className:"max-w-md w-full border-border shadow-lg",children:[a.jsxs(Ze,{className:"text-center space-y-2",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:a.jsx(zO,{className:"w-6 h-6 text-muted-foreground"})}),a.jsx(nt,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),a.jsx(yn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),a.jsxs(He,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),a.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(ZN,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Jv,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(JN,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Ss,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:a.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),a.jsxs(z0,{className:"flex flex-col gap-2",children:[a.jsx(fe,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),a.jsxs(fe,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[a.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function QW(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(fe,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx(Uf,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),a.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),a.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Courses:"})," To display your active classes."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),a.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),a.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),a.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),a.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function YW(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(fe,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx(Uf,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),a.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),a.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Track attendance"})," and academic performance"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),a.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),a.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),a.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),a.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),a.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),a.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),a.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),a.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),a.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),a.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),a.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),a.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),a.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),a.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),a.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"The Service will be uninterrupted or error-free"}),a.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),a.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),a.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),a.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Violates these Terms of Service"}),a.jsx("li",{children:"Is harmful to other users or the Service"}),a.jsx("li",{children:"Exposes us to legal liability"})]}),a.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),a.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),a.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),a.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}const XW=()=>"/";function JW(){const[t,e]=m.useState(!1),{isLoading:n}=Zr(),r=XW();return n?a.jsx(Y0,{message:"Setting up your workspace..."}):a.jsx(mN,{base:r,children:a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(F7,{mobileOpen:t,onMobileClose:()=>e(!1)}),a.jsx(FW,{}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[a.jsx(z7,{onMobileMenuClick:()=>e(!0)}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:a.jsxs(cM,{children:[a.jsx(jr,{path:"/",component:sH}),a.jsx(jr,{path:"/leaderboard",component:PW}),a.jsx(jr,{path:"/timeline",component:VH}),a.jsx(jr,{path:"/dashboard",component:qH}),a.jsx(jr,{path:"/notes",component:GH}),a.jsx(jr,{path:"/attendance",component:MW}),a.jsx(jr,{path:"/settings",component:_W}),a.jsx(jr,{path:"/settings/notifications",component:EW}),a.jsx(jr,{path:"/settings/integrations",component:SW}),a.jsx(jr,{component:OW})]})})]})]})})}function ZW(){if(window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy"))return a.jsx(QW,{});if(window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service"))return a.jsx(YW,{});const{user:t,loading:e,role:n}=st();return e?a.jsx(Y0,{message:"Authenticating..."}):t?n==="teacher"?a.jsx(GW,{}):n==="no_access"?a.jsx(KW,{}):a.jsx(gU,{children:a.jsx(JW,{})}):a.jsx(Y7,{})}function eq(){return a.jsx(PM,{client:OM,children:a.jsx(lU,{children:a.jsx(aU,{children:a.jsxs(Xf,{children:[a.jsx(U5,{}),a.jsx(ZW,{})]})})})})}rN(document.getElementById("root")).render(a.jsx(eq,{}));
