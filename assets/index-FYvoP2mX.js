var wb=t=>{throw TypeError(t)};var Lp=(t,e,n)=>e.has(t)||wb("Cannot "+n);var K=(t,e,n)=>(Lp(t,e,"read from private field"),n?n.call(t):e.get(t)),Ge=(t,e,n)=>e.has(t)?wb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ke=(t,e,n,r)=>(Lp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),on=(t,e,n)=>(Lp(t,e,"access private method"),n);var Cd=(t,e,n,r)=>({set _(s){ke(t,e,s,n)},get _(){return K(t,e,r)}});function mD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function PN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var RN={exports:{}},Yf={},DN={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ru=Symbol.for("react.element"),pD=Symbol.for("react.portal"),gD=Symbol.for("react.fragment"),yD=Symbol.for("react.strict_mode"),vD=Symbol.for("react.profiler"),xD=Symbol.for("react.provider"),wD=Symbol.for("react.context"),bD=Symbol.for("react.forward_ref"),_D=Symbol.for("react.suspense"),SD=Symbol.for("react.memo"),ND=Symbol.for("react.lazy"),bb=Symbol.iterator;function ED(t){return t===null||typeof t!="object"?null:(t=bb&&t[bb]||t["@@iterator"],typeof t=="function"?t:null)}var MN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ON=Object.assign,LN={};function Al(t,e,n){this.props=t,this.context=e,this.refs=LN,this.updater=n||MN}Al.prototype.isReactComponent={};Al.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Al.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function VN(){}VN.prototype=Al.prototype;function Lv(t,e,n){this.props=t,this.context=e,this.refs=LN,this.updater=n||MN}var Vv=Lv.prototype=new VN;Vv.constructor=Lv;ON(Vv,Al.prototype);Vv.isPureReactComponent=!0;var _b=Array.isArray,FN=Object.prototype.hasOwnProperty,Fv={current:null},zN={key:!0,ref:!0,__self:!0,__source:!0};function UN(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)FN.call(e,r)&&!zN.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ru,type:t,key:i,ref:a,props:s,_owner:Fv.current}}function TD(t,e){return{$$typeof:Ru,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ru}function CD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Sb=/\/+/g;function Vp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CD(""+t.key):e.toString(36)}function uh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ru:case pD:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Vp(a,0):r,_b(s)?(n="",t!=null&&(n=t.replace(Sb,"$&/")+"/"),uh(s,e,n,"",function(u){return u})):s!=null&&(zv(s)&&(s=TD(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Sb,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",_b(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Vp(i,l);a+=uh(i,e,n,c,s)}else if(c=ED(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Vp(i,l++),a+=uh(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function kd(t,e,n){if(t==null)return t;var r=[],s=0;return uh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function kD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},dh={transition:null},jD={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:dh,ReactCurrentOwner:Fv};function $N(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:kd,forEach:function(t,e,n){kd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return kd(t,function(){e++}),e},toArray:function(t){return kd(t,function(e){return e})||[]},only:function(t){if(!zv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Al;Re.Fragment=gD;Re.Profiler=vD;Re.PureComponent=Lv;Re.StrictMode=yD;Re.Suspense=_D;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jD;Re.act=$N;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ON({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Fv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)FN.call(e,c)&&!zN.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ru,type:t.type,key:s,ref:i,props:r,_owner:a}};Re.createContext=function(t){return t={$$typeof:wD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:xD,_context:t},t.Consumer=t};Re.createElement=UN;Re.createFactory=function(t){var e=UN.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:bD,render:t}};Re.isValidElement=zv;Re.lazy=function(t){return{$$typeof:ND,_payload:{_status:-1,_result:t},_init:kD}};Re.memo=function(t,e){return{$$typeof:SD,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=dh.transition;dh.transition={};try{t()}finally{dh.transition=e}};Re.unstable_act=$N;Re.useCallback=function(t,e){return Tn.current.useCallback(t,e)};Re.useContext=function(t){return Tn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return Tn.current.useEffect(t,e)};Re.useId=function(){return Tn.current.useId()};Re.useImperativeHandle=function(t,e,n){return Tn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return Tn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return Tn.current.useReducer(t,e,n)};Re.useRef=function(t){return Tn.current.useRef(t)};Re.useState=function(t){return Tn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return Tn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return Tn.current.useTransition()};Re.version="18.3.1";DN.exports=Re;var f=DN.exports;const Ie=PN(f),BN=mD({__proto__:null,default:Ie},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ID=f,AD=Symbol.for("react.element"),PD=Symbol.for("react.fragment"),RD=Object.prototype.hasOwnProperty,DD=ID.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MD={key:!0,ref:!0,__self:!0,__source:!0};function HN(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)RD.call(e,r)&&!MD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:AD,type:t,key:i,ref:a,props:s,_owner:DD.current}}Yf.Fragment=PD;Yf.jsx=HN;Yf.jsxs=HN;RN.exports=Yf;var o=RN.exports,WN={exports:{}},or={},qN={exports:{}},GN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,H){var z=L.length;L.push(H);e:for(;0<z;){var $=z-1>>>1,G=L[$];if(0<s(G,H))L[$]=H,L[z]=G,z=$;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var H=L[0],z=L.pop();if(z!==H){L[0]=z;e:for(var $=0,G=L.length,ee=G>>>1;$<ee;){var ie=2*($+1)-1,ne=L[ie],oe=ie+1,V=L[oe];if(0>s(ne,z))oe<G&&0>s(V,ne)?(L[$]=V,L[oe]=z,$=oe):(L[$]=ne,L[ie]=z,$=ie);else if(oe<G&&0>s(V,z))L[$]=V,L[oe]=z,$=oe;else break e}}return H}function s(L,H){var z=L.sortIndex-H.sortIndex;return z!==0?z:L.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,m=null,p=3,g=!1,w=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var H=n(u);H!==null;){if(H.callback===null)r(u);else if(H.startTime<=L)r(u),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(u)}}function j(L){if(v=!1,S(L),!w)if(n(c)!==null)w=!0,J(D);else{var H=n(u);H!==null&&X(j,H.startTime-L)}}function D(L,H){w=!1,v&&(v=!1,b(C),C=-1),g=!0;var z=p;try{for(S(H),m=n(c);m!==null&&(!(m.expirationTime>H)||L&&!I());){var $=m.callback;if(typeof $=="function"){m.callback=null,p=m.priorityLevel;var G=$(m.expirationTime<=H);H=t.unstable_now(),typeof G=="function"?m.callback=G:m===n(c)&&r(c),S(H)}else r(c);m=n(c)}if(m!==null)var ee=!0;else{var ie=n(u);ie!==null&&X(j,ie.startTime-H),ee=!1}return ee}finally{m=null,p=z,g=!1}}var M=!1,N=null,C=-1,T=5,k=-1;function I(){return!(t.unstable_now()-k<T)}function R(){if(N!==null){var L=t.unstable_now();k=L;var H=!0;try{H=N(!0,L)}finally{H?P():(M=!1,N=null)}}else M=!1}var P;if(typeof x=="function")P=function(){x(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,re=O.port2;O.port1.onmessage=R,P=function(){re.postMessage(null)}}else P=function(){_(R,0)};function J(L){N=L,M||(M=!0,P())}function X(L,H){C=_(function(){L(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,J(D))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(L){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var z=p;p=H;try{return L()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,H){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=p;p=L;try{return H()}finally{p=z}},t.unstable_scheduleCallback=function(L,H,z){var $=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?$+z:$):z=$,L){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=z+G,L={id:h++,callback:H,priorityLevel:L,startTime:z,expirationTime:G,sortIndex:-1},z>$?(L.sortIndex=z,e(u,L),n(c)===null&&L===n(u)&&(v?(b(C),C=-1):v=!0,X(j,z-$))):(L.sortIndex=G,e(c,L),w||g||(w=!0,J(D))),L},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(L){var H=p;return function(){var z=p;p=H;try{return L.apply(this,arguments)}finally{p=z}}}})(GN);qN.exports=GN;var OD=qN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LD=f,sr=OD;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KN=new Set,Jc={};function ta(t,e){sl(t,e),sl(t+"Capture",e)}function sl(t,e){for(Jc[t]=e,t=0;t<e.length;t++)KN.add(e[t])}var Bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hg=Object.prototype.hasOwnProperty,VD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nb={},Eb={};function FD(t){return Hg.call(Eb,t)?!0:Hg.call(Nb,t)?!1:VD.test(t)?Eb[t]=!0:(Nb[t]=!0,!1)}function zD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function UD(t,e,n,r){if(e===null||typeof e>"u"||zD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Cn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new Cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new Cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new Cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new Cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new Cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new Cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new Cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new Cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new Cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uv=/[\-:]([a-z])/g;function $v(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uv,$v);nn[e]=new Cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uv,$v);nn[e]=new Cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uv,$v);nn[e]=new Cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new Cn(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new Cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Bv(t,e,n,r){var s=nn.hasOwnProperty(e)?nn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(UD(e,n,s,r)&&(n=null),r||s===null?FD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ti=LD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jd=Symbol.for("react.element"),va=Symbol.for("react.portal"),xa=Symbol.for("react.fragment"),Hv=Symbol.for("react.strict_mode"),Wg=Symbol.for("react.profiler"),QN=Symbol.for("react.provider"),XN=Symbol.for("react.context"),Wv=Symbol.for("react.forward_ref"),qg=Symbol.for("react.suspense"),Gg=Symbol.for("react.suspense_list"),qv=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),YN=Symbol.for("react.offscreen"),Tb=Symbol.iterator;function cc(t){return t===null||typeof t!="object"?null:(t=Tb&&t[Tb]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,Fp;function xc(t){if(Fp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Fp=e&&e[1]||""}return`
`+Fp+t}var zp=!1;function Up(t,e){if(!t||zp)return"";zp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{zp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xc(t):""}function $D(t){switch(t.tag){case 5:return xc(t.type);case 16:return xc("Lazy");case 13:return xc("Suspense");case 19:return xc("SuspenseList");case 0:case 2:case 15:return t=Up(t.type,!1),t;case 11:return t=Up(t.type.render,!1),t;case 1:return t=Up(t.type,!0),t;default:return""}}function Kg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xa:return"Fragment";case va:return"Portal";case Wg:return"Profiler";case Hv:return"StrictMode";case qg:return"Suspense";case Gg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case XN:return(t.displayName||"Context")+".Consumer";case QN:return(t._context.displayName||"Context")+".Provider";case Wv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qv:return e=t.displayName||null,e!==null?e:Kg(t.type)||"Memo";case gi:e=t._payload,t=t._init;try{return Kg(t(e))}catch{}}return null}function BD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kg(e);case 8:return e===Hv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Gi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function JN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function HD(t){var e=JN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Id(t){t._valueTracker||(t._valueTracker=HD(t))}function ZN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=JN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Qg(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Gi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eE(t,e){e=e.checked,e!=null&&Bv(t,"checked",e,!1)}function Xg(t,e){eE(t,e);var n=Gi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yg(t,e.type,Gi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yg(t,e,n){(e!=="number"||zh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wc=Array.isArray;function Ra(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Gi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Jg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function jb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(wc(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Gi(n)}}function tE(t,e){var n=Gi(e.value),r=Gi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ib(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ad,rE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ad=Ad||document.createElement("div"),Ad.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ad.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WD=["Webkit","ms","Moz","O"];Object.keys(jc).forEach(function(t){WD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jc[e]=jc[t]})});function sE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jc.hasOwnProperty(t)&&jc[t]?(""+e).trim():e+"px"}function iE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var qD=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ey(t,e){if(e){if(qD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function ty(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ny=null;function Gv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ry=null,Da=null,Ma=null;function Ab(t){if(t=Ou(t)){if(typeof ry!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=nm(e),ry(t.stateNode,t.type,e))}}function oE(t){Da?Ma?Ma.push(t):Ma=[t]:Da=t}function aE(){if(Da){var t=Da,e=Ma;if(Ma=Da=null,Ab(t),e)for(t=0;t<e.length;t++)Ab(e[t])}}function lE(t,e){return t(e)}function cE(){}var $p=!1;function uE(t,e,n){if($p)return t(e,n);$p=!0;try{return lE(t,e,n)}finally{$p=!1,(Da!==null||Ma!==null)&&(cE(),aE())}}function eu(t,e){var n=t.stateNode;if(n===null)return null;var r=nm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var sy=!1;if(Bs)try{var uc={};Object.defineProperty(uc,"passive",{get:function(){sy=!0}}),window.addEventListener("test",uc,uc),window.removeEventListener("test",uc,uc)}catch{sy=!1}function GD(t,e,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Ic=!1,Uh=null,$h=!1,iy=null,KD={onError:function(t){Ic=!0,Uh=t}};function QD(t,e,n,r,s,i,a,l,c){Ic=!1,Uh=null,GD.apply(KD,arguments)}function XD(t,e,n,r,s,i,a,l,c){if(QD.apply(this,arguments),Ic){if(Ic){var u=Uh;Ic=!1,Uh=null}else throw Error(Z(198));$h||($h=!0,iy=u)}}function na(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pb(t){if(na(t)!==t)throw Error(Z(188))}function YD(t){var e=t.alternate;if(!e){if(e=na(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Pb(s),t;if(i===r)return Pb(s),e;i=i.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function hE(t){return t=YD(t),t!==null?fE(t):null}function fE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fE(t);if(e!==null)return e;t=t.sibling}return null}var mE=sr.unstable_scheduleCallback,Rb=sr.unstable_cancelCallback,JD=sr.unstable_shouldYield,ZD=sr.unstable_requestPaint,Tt=sr.unstable_now,e4=sr.unstable_getCurrentPriorityLevel,Kv=sr.unstable_ImmediatePriority,pE=sr.unstable_UserBlockingPriority,Bh=sr.unstable_NormalPriority,t4=sr.unstable_LowPriority,gE=sr.unstable_IdlePriority,Jf=null,ms=null;function n4(t){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(Jf,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:i4,r4=Math.log,s4=Math.LN2;function i4(t){return t>>>=0,t===0?32:31-(r4(t)/s4|0)|0}var Pd=64,Rd=4194304;function bc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Hh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=bc(l):(i&=a,i!==0&&(r=bc(i)))}else a=n&~s,a!==0?r=bc(a):i!==0&&(r=bc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zr(e),s=1<<n,r|=t[n],e&=~s;return r}function o4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-zr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=o4(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function oy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yE(){var t=Pd;return Pd<<=1,!(Pd&4194240)&&(Pd=64),t}function Bp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Du(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function l4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Qv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ye=0;function vE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xE,Xv,wE,bE,_E,ay=!1,Dd=[],Pi=null,Ri=null,Di=null,tu=new Map,nu=new Map,xi=[],c4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Db(t,e){switch(t){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Di=null;break;case"pointerover":case"pointerout":tu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(e.pointerId)}}function dc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ou(e),e!==null&&Xv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function u4(t,e,n,r,s){switch(e){case"focusin":return Pi=dc(Pi,t,e,n,r,s),!0;case"dragenter":return Ri=dc(Ri,t,e,n,r,s),!0;case"mouseover":return Di=dc(Di,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return tu.set(i,dc(tu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,nu.set(i,dc(nu.get(i)||null,t,e,n,r,s)),!0}return!1}function SE(t){var e=Co(t.target);if(e!==null){var n=na(e);if(n!==null){if(e=n.tag,e===13){if(e=dE(n),e!==null){t.blockedOn=e,_E(t.priority,function(){wE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ly(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ny=r,n.target.dispatchEvent(r),ny=null}else return e=Ou(n),e!==null&&Xv(e),t.blockedOn=n,!1;e.shift()}return!0}function Mb(t,e,n){hh(t)&&n.delete(e)}function d4(){ay=!1,Pi!==null&&hh(Pi)&&(Pi=null),Ri!==null&&hh(Ri)&&(Ri=null),Di!==null&&hh(Di)&&(Di=null),tu.forEach(Mb),nu.forEach(Mb)}function hc(t,e){t.blockedOn===e&&(t.blockedOn=null,ay||(ay=!0,sr.unstable_scheduleCallback(sr.unstable_NormalPriority,d4)))}function ru(t){function e(s){return hc(s,t)}if(0<Dd.length){hc(Dd[0],t);for(var n=1;n<Dd.length;n++){var r=Dd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pi!==null&&hc(Pi,t),Ri!==null&&hc(Ri,t),Di!==null&&hc(Di,t),tu.forEach(e),nu.forEach(e),n=0;n<xi.length;n++)r=xi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)SE(n),n.blockedOn===null&&xi.shift()}var Oa=ti.ReactCurrentBatchConfig,Wh=!0;function h4(t,e,n,r){var s=Ye,i=Oa.transition;Oa.transition=null;try{Ye=1,Yv(t,e,n,r)}finally{Ye=s,Oa.transition=i}}function f4(t,e,n,r){var s=Ye,i=Oa.transition;Oa.transition=null;try{Ye=4,Yv(t,e,n,r)}finally{Ye=s,Oa.transition=i}}function Yv(t,e,n,r){if(Wh){var s=ly(t,e,n,r);if(s===null)Zp(t,e,r,qh,n),Db(t,r);else if(u4(s,t,e,n,r))r.stopPropagation();else if(Db(t,r),e&4&&-1<c4.indexOf(t)){for(;s!==null;){var i=Ou(s);if(i!==null&&xE(i),i=ly(t,e,n,r),i===null&&Zp(t,e,r,qh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Zp(t,e,r,null,n)}}var qh=null;function ly(t,e,n,r){if(qh=null,t=Gv(r),t=Co(t),t!==null)if(e=na(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qh=t,null}function NE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e4()){case Kv:return 1;case pE:return 4;case Bh:case t4:return 16;case gE:return 536870912;default:return 16}default:return 16}}var ji=null,Jv=null,fh=null;function EE(){if(fh)return fh;var t,e=Jv,n=e.length,r,s="value"in ji?ji.value:ji.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return fh=s.slice(t,1<r?1-r:void 0)}function mh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Md(){return!0}function Ob(){return!1}function ar(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Md:Ob,this.isPropagationStopped=Ob,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Md)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Md)},persist:function(){},isPersistent:Md}),e}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zv=ar(Pl),Mu=yt({},Pl,{view:0,detail:0}),m4=ar(Mu),Hp,Wp,fc,Zf=yt({},Mu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ex,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fc&&(fc&&t.type==="mousemove"?(Hp=t.screenX-fc.screenX,Wp=t.screenY-fc.screenY):Wp=Hp=0,fc=t),Hp)},movementY:function(t){return"movementY"in t?t.movementY:Wp}}),Lb=ar(Zf),p4=yt({},Zf,{dataTransfer:0}),g4=ar(p4),y4=yt({},Mu,{relatedTarget:0}),qp=ar(y4),v4=yt({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),x4=ar(v4),w4=yt({},Pl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),b4=ar(w4),_4=yt({},Pl,{data:0}),Vb=ar(_4),S4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=E4[t])?!!e[t]:!1}function ex(){return T4}var C4=yt({},Mu,{key:function(t){if(t.key){var e=S4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=mh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?N4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ex,charCode:function(t){return t.type==="keypress"?mh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),k4=ar(C4),j4=yt({},Zf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fb=ar(j4),I4=yt({},Mu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ex}),A4=ar(I4),P4=yt({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),R4=ar(P4),D4=yt({},Zf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),M4=ar(D4),O4=[9,13,27,32],tx=Bs&&"CompositionEvent"in window,Ac=null;Bs&&"documentMode"in document&&(Ac=document.documentMode);var L4=Bs&&"TextEvent"in window&&!Ac,TE=Bs&&(!tx||Ac&&8<Ac&&11>=Ac),zb=" ",Ub=!1;function CE(t,e){switch(t){case"keyup":return O4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var wa=!1;function V4(t,e){switch(t){case"compositionend":return kE(e);case"keypress":return e.which!==32?null:(Ub=!0,zb);case"textInput":return t=e.data,t===zb&&Ub?null:t;default:return null}}function F4(t,e){if(wa)return t==="compositionend"||!tx&&CE(t,e)?(t=EE(),fh=Jv=ji=null,wa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return TE&&e.locale!=="ko"?null:e.data;default:return null}}var z4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $b(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!z4[t.type]:e==="textarea"}function jE(t,e,n,r){oE(r),e=Gh(e,"onChange"),0<e.length&&(n=new Zv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Pc=null,su=null;function U4(t){zE(t,0)}function em(t){var e=Sa(t);if(ZN(e))return t}function $4(t,e){if(t==="change")return e}var IE=!1;if(Bs){var Gp;if(Bs){var Kp="oninput"in document;if(!Kp){var Bb=document.createElement("div");Bb.setAttribute("oninput","return;"),Kp=typeof Bb.oninput=="function"}Gp=Kp}else Gp=!1;IE=Gp&&(!document.documentMode||9<document.documentMode)}function Hb(){Pc&&(Pc.detachEvent("onpropertychange",AE),su=Pc=null)}function AE(t){if(t.propertyName==="value"&&em(su)){var e=[];jE(e,su,t,Gv(t)),uE(U4,e)}}function B4(t,e,n){t==="focusin"?(Hb(),Pc=e,su=n,Pc.attachEvent("onpropertychange",AE)):t==="focusout"&&Hb()}function H4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return em(su)}function W4(t,e){if(t==="click")return em(e)}function q4(t,e){if(t==="input"||t==="change")return em(e)}function G4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wr=typeof Object.is=="function"?Object.is:G4;function iu(t,e){if(Wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Hg.call(e,s)||!Wr(t[s],e[s]))return!1}return!0}function Wb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qb(t,e){var n=Wb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wb(n)}}function PE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?PE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RE(){for(var t=window,e=zh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zh(t.document)}return e}function nx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function K4(t){var e=RE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&PE(n.ownerDocument.documentElement,n)){if(r!==null&&nx(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=qb(n,i);var a=qb(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Q4=Bs&&"documentMode"in document&&11>=document.documentMode,ba=null,cy=null,Rc=null,uy=!1;function Gb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uy||ba==null||ba!==zh(r)||(r=ba,"selectionStart"in r&&nx(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rc&&iu(Rc,r)||(Rc=r,r=Gh(cy,"onSelect"),0<r.length&&(e=new Zv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ba)))}function Od(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _a={animationend:Od("Animation","AnimationEnd"),animationiteration:Od("Animation","AnimationIteration"),animationstart:Od("Animation","AnimationStart"),transitionend:Od("Transition","TransitionEnd")},Qp={},DE={};Bs&&(DE=document.createElement("div").style,"AnimationEvent"in window||(delete _a.animationend.animation,delete _a.animationiteration.animation,delete _a.animationstart.animation),"TransitionEvent"in window||delete _a.transitionend.transition);function tm(t){if(Qp[t])return Qp[t];if(!_a[t])return t;var e=_a[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in DE)return Qp[t]=e[n];return t}var ME=tm("animationend"),OE=tm("animationiteration"),LE=tm("animationstart"),VE=tm("transitionend"),FE=new Map,Kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function io(t,e){FE.set(t,e),ta(e,[t])}for(var Xp=0;Xp<Kb.length;Xp++){var Yp=Kb[Xp],X4=Yp.toLowerCase(),Y4=Yp[0].toUpperCase()+Yp.slice(1);io(X4,"on"+Y4)}io(ME,"onAnimationEnd");io(OE,"onAnimationIteration");io(LE,"onAnimationStart");io("dblclick","onDoubleClick");io("focusin","onFocus");io("focusout","onBlur");io(VE,"onTransitionEnd");sl("onMouseEnter",["mouseout","mouseover"]);sl("onMouseLeave",["mouseout","mouseover"]);sl("onPointerEnter",["pointerout","pointerover"]);sl("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J4=new Set("cancel close invalid load scroll toggle".split(" ").concat(_c));function Qb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,XD(r,e,void 0,t),t.currentTarget=null}function zE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Qb(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Qb(s,l,u),i=c}}}if($h)throw t=iy,$h=!1,iy=null,t}function ut(t,e){var n=e[py];n===void 0&&(n=e[py]=new Set);var r=t+"__bubble";n.has(r)||(UE(e,t,2,!1),n.add(r))}function Jp(t,e,n){var r=0;e&&(r|=4),UE(n,t,r,e)}var Ld="_reactListening"+Math.random().toString(36).slice(2);function ou(t){if(!t[Ld]){t[Ld]=!0,KN.forEach(function(n){n!=="selectionchange"&&(J4.has(n)||Jp(n,!1,t),Jp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ld]||(e[Ld]=!0,Jp("selectionchange",!1,e))}}function UE(t,e,n,r){switch(NE(e)){case 1:var s=h4;break;case 4:s=f4;break;default:s=Yv}n=s.bind(null,e,n,t),s=void 0,!sy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Zp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Co(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}uE(function(){var u=i,h=Gv(n),m=[];e:{var p=FE.get(t);if(p!==void 0){var g=Zv,w=t;switch(t){case"keypress":if(mh(n)===0)break e;case"keydown":case"keyup":g=k4;break;case"focusin":w="focus",g=qp;break;case"focusout":w="blur",g=qp;break;case"beforeblur":case"afterblur":g=qp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Lb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=g4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=A4;break;case ME:case OE:case LE:g=x4;break;case VE:g=R4;break;case"scroll":g=m4;break;case"wheel":g=M4;break;case"copy":case"cut":case"paste":g=b4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Fb}var v=(e&4)!==0,_=!v&&t==="scroll",b=v?p!==null?p+"Capture":null:p;v=[];for(var x=u,S;x!==null;){S=x;var j=S.stateNode;if(S.tag===5&&j!==null&&(S=j,b!==null&&(j=eu(x,b),j!=null&&v.push(au(x,j,S)))),_)break;x=x.return}0<v.length&&(p=new g(p,w,null,n,h),m.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==ny&&(w=n.relatedTarget||n.fromElement)&&(Co(w)||w[Hs]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?Co(w):null,w!==null&&(_=na(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(v=Lb,j="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=Fb,j="onPointerLeave",b="onPointerEnter",x="pointer"),_=g==null?p:Sa(g),S=w==null?p:Sa(w),p=new v(j,x+"leave",g,n,h),p.target=_,p.relatedTarget=S,j=null,Co(h)===u&&(v=new v(b,x+"enter",w,n,h),v.target=S,v.relatedTarget=_,j=v),_=j,g&&w)t:{for(v=g,b=w,x=0,S=v;S;S=ua(S))x++;for(S=0,j=b;j;j=ua(j))S++;for(;0<x-S;)v=ua(v),x--;for(;0<S-x;)b=ua(b),S--;for(;x--;){if(v===b||b!==null&&v===b.alternate)break t;v=ua(v),b=ua(b)}v=null}else v=null;g!==null&&Xb(m,p,g,v,!1),w!==null&&_!==null&&Xb(m,_,w,v,!0)}}e:{if(p=u?Sa(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=$4;else if($b(p))if(IE)D=q4;else{D=H4;var M=B4}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=W4);if(D&&(D=D(t,u))){jE(m,D,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Yg(p,"number",p.value)}switch(M=u?Sa(u):window,t){case"focusin":($b(M)||M.contentEditable==="true")&&(ba=M,cy=u,Rc=null);break;case"focusout":Rc=cy=ba=null;break;case"mousedown":uy=!0;break;case"contextmenu":case"mouseup":case"dragend":uy=!1,Gb(m,n,h);break;case"selectionchange":if(Q4)break;case"keydown":case"keyup":Gb(m,n,h)}var N;if(tx)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else wa?CE(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(TE&&n.locale!=="ko"&&(wa||C!=="onCompositionStart"?C==="onCompositionEnd"&&wa&&(N=EE()):(ji=h,Jv="value"in ji?ji.value:ji.textContent,wa=!0)),M=Gh(u,C),0<M.length&&(C=new Vb(C,t,null,n,h),m.push({event:C,listeners:M}),N?C.data=N:(N=kE(n),N!==null&&(C.data=N)))),(N=L4?V4(t,n):F4(t,n))&&(u=Gh(u,"onBeforeInput"),0<u.length&&(h=new Vb("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:u}),h.data=N))}zE(m,e)})}function au(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Gh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=eu(t,n),i!=null&&r.unshift(au(t,i,s)),i=eu(t,e),i!=null&&r.push(au(t,i,s))),t=t.return}return r}function ua(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xb(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=eu(n,i),c!=null&&a.unshift(au(n,c,l))):s||(c=eu(n,i),c!=null&&a.push(au(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Z4=/\r\n?/g,e5=/\u0000|\uFFFD/g;function Yb(t){return(typeof t=="string"?t:""+t).replace(Z4,`
`).replace(e5,"")}function Vd(t,e,n){if(e=Yb(e),Yb(t)!==e&&n)throw Error(Z(425))}function Kh(){}var dy=null,hy=null;function fy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var my=typeof setTimeout=="function"?setTimeout:void 0,t5=typeof clearTimeout=="function"?clearTimeout:void 0,Jb=typeof Promise=="function"?Promise:void 0,n5=typeof queueMicrotask=="function"?queueMicrotask:typeof Jb<"u"?function(t){return Jb.resolve(null).then(t).catch(r5)}:my;function r5(t){setTimeout(function(){throw t})}function eg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ru(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ru(e)}function Mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rl=Math.random().toString(36).slice(2),ds="__reactFiber$"+Rl,lu="__reactProps$"+Rl,Hs="__reactContainer$"+Rl,py="__reactEvents$"+Rl,s5="__reactListeners$"+Rl,i5="__reactHandles$"+Rl;function Co(t){var e=t[ds];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hs]||n[ds]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zb(t);t!==null;){if(n=t[ds])return n;t=Zb(t)}return e}t=n,n=t.parentNode}return null}function Ou(t){return t=t[ds]||t[Hs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function nm(t){return t[lu]||null}var gy=[],Na=-1;function oo(t){return{current:t}}function dt(t){0>Na||(t.current=gy[Na],gy[Na]=null,Na--)}function it(t,e){Na++,gy[Na]=t.current,t.current=e}var Ki={},yn=oo(Ki),Vn=oo(!1),Uo=Ki;function il(t,e){var n=t.type.contextTypes;if(!n)return Ki;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Fn(t){return t=t.childContextTypes,t!=null}function Qh(){dt(Vn),dt(yn)}function e1(t,e,n){if(yn.current!==Ki)throw Error(Z(168));it(yn,e),it(Vn,n)}function $E(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,BD(t)||"Unknown",s));return yt({},n,r)}function Xh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ki,Uo=yn.current,it(yn,t),it(Vn,Vn.current),!0}function t1(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=$E(t,e,Uo),r.__reactInternalMemoizedMergedChildContext=t,dt(Vn),dt(yn),it(yn,t)):dt(Vn),it(Vn,n)}var Rs=null,rm=!1,tg=!1;function BE(t){Rs===null?Rs=[t]:Rs.push(t)}function o5(t){rm=!0,BE(t)}function ao(){if(!tg&&Rs!==null){tg=!0;var t=0,e=Ye;try{var n=Rs;for(Ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rs=null,rm=!1}catch(s){throw Rs!==null&&(Rs=Rs.slice(t+1)),mE(Kv,ao),s}finally{Ye=e,tg=!1}}return null}var Ea=[],Ta=0,Yh=null,Jh=0,mr=[],pr=0,$o=null,Ms=1,Os="";function So(t,e){Ea[Ta++]=Jh,Ea[Ta++]=Yh,Yh=t,Jh=e}function HE(t,e,n){mr[pr++]=Ms,mr[pr++]=Os,mr[pr++]=$o,$o=t;var r=Ms;t=Os;var s=32-zr(r)-1;r&=~(1<<s),n+=1;var i=32-zr(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Ms=1<<32-zr(e)+s|n<<s|r,Os=i+t}else Ms=1<<i|n<<s|r,Os=t}function rx(t){t.return!==null&&(So(t,1),HE(t,1,0))}function sx(t){for(;t===Yh;)Yh=Ea[--Ta],Ea[Ta]=null,Jh=Ea[--Ta],Ea[Ta]=null;for(;t===$o;)$o=mr[--pr],mr[pr]=null,Os=mr[--pr],mr[pr]=null,Ms=mr[--pr],mr[pr]=null}var nr=null,er=null,ht=!1,Mr=null;function WE(t,e){var n=xr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function n1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nr=t,er=Mi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nr=t,er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$o!==null?{id:Ms,overflow:Os}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=xr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nr=t,er=null,!0):!1;default:return!1}}function yy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vy(t){if(ht){var e=er;if(e){var n=e;if(!n1(t,e)){if(yy(t))throw Error(Z(418));e=Mi(n.nextSibling);var r=nr;e&&n1(t,e)?WE(r,n):(t.flags=t.flags&-4097|2,ht=!1,nr=t)}}else{if(yy(t))throw Error(Z(418));t.flags=t.flags&-4097|2,ht=!1,nr=t}}}function r1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nr=t}function Fd(t){if(t!==nr)return!1;if(!ht)return r1(t),ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!fy(t.type,t.memoizedProps)),e&&(e=er)){if(yy(t))throw qE(),Error(Z(418));for(;e;)WE(t,e),e=Mi(e.nextSibling)}if(r1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){er=Mi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}er=null}}else er=nr?Mi(t.stateNode.nextSibling):null;return!0}function qE(){for(var t=er;t;)t=Mi(t.nextSibling)}function ol(){er=nr=null,ht=!1}function ix(t){Mr===null?Mr=[t]:Mr.push(t)}var a5=ti.ReactCurrentBatchConfig;function mc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function zd(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function s1(t){var e=t._init;return e(t._payload)}function GE(t){function e(b,x){if(t){var S=b.deletions;S===null?(b.deletions=[x],b.flags|=16):S.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=Fi(b,x),b.index=0,b.sibling=null,b}function i(b,x,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<x?(b.flags|=2,x):S):(b.flags|=2,x)):(b.flags|=1048576,x)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,S,j){return x===null||x.tag!==6?(x=lg(S,b.mode,j),x.return=b,x):(x=s(x,S),x.return=b,x)}function c(b,x,S,j){var D=S.type;return D===xa?h(b,x,S.props.children,j,S.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===gi&&s1(D)===x.type)?(j=s(x,S.props),j.ref=mc(b,x,S),j.return=b,j):(j=bh(S.type,S.key,S.props,null,b.mode,j),j.ref=mc(b,x,S),j.return=b,j)}function u(b,x,S,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=cg(S,b.mode,j),x.return=b,x):(x=s(x,S.children||[]),x.return=b,x)}function h(b,x,S,j,D){return x===null||x.tag!==7?(x=Lo(S,b.mode,j,D),x.return=b,x):(x=s(x,S),x.return=b,x)}function m(b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=lg(""+x,b.mode,S),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jd:return S=bh(x.type,x.key,x.props,null,b.mode,S),S.ref=mc(b,null,x),S.return=b,S;case va:return x=cg(x,b.mode,S),x.return=b,x;case gi:var j=x._init;return m(b,j(x._payload),S)}if(wc(x)||cc(x))return x=Lo(x,b.mode,S,null),x.return=b,x;zd(b,x)}return null}function p(b,x,S,j){var D=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:l(b,x,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case jd:return S.key===D?c(b,x,S,j):null;case va:return S.key===D?u(b,x,S,j):null;case gi:return D=S._init,p(b,x,D(S._payload),j)}if(wc(S)||cc(S))return D!==null?null:h(b,x,S,j,null);zd(b,S)}return null}function g(b,x,S,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return b=b.get(S)||null,l(x,b,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case jd:return b=b.get(j.key===null?S:j.key)||null,c(x,b,j,D);case va:return b=b.get(j.key===null?S:j.key)||null,u(x,b,j,D);case gi:var M=j._init;return g(b,x,S,M(j._payload),D)}if(wc(j)||cc(j))return b=b.get(S)||null,h(x,b,j,D,null);zd(x,j)}return null}function w(b,x,S,j){for(var D=null,M=null,N=x,C=x=0,T=null;N!==null&&C<S.length;C++){N.index>C?(T=N,N=null):T=N.sibling;var k=p(b,N,S[C],j);if(k===null){N===null&&(N=T);break}t&&N&&k.alternate===null&&e(b,N),x=i(k,x,C),M===null?D=k:M.sibling=k,M=k,N=T}if(C===S.length)return n(b,N),ht&&So(b,C),D;if(N===null){for(;C<S.length;C++)N=m(b,S[C],j),N!==null&&(x=i(N,x,C),M===null?D=N:M.sibling=N,M=N);return ht&&So(b,C),D}for(N=r(b,N);C<S.length;C++)T=g(N,b,C,S[C],j),T!==null&&(t&&T.alternate!==null&&N.delete(T.key===null?C:T.key),x=i(T,x,C),M===null?D=T:M.sibling=T,M=T);return t&&N.forEach(function(I){return e(b,I)}),ht&&So(b,C),D}function v(b,x,S,j){var D=cc(S);if(typeof D!="function")throw Error(Z(150));if(S=D.call(S),S==null)throw Error(Z(151));for(var M=D=null,N=x,C=x=0,T=null,k=S.next();N!==null&&!k.done;C++,k=S.next()){N.index>C?(T=N,N=null):T=N.sibling;var I=p(b,N,k.value,j);if(I===null){N===null&&(N=T);break}t&&N&&I.alternate===null&&e(b,N),x=i(I,x,C),M===null?D=I:M.sibling=I,M=I,N=T}if(k.done)return n(b,N),ht&&So(b,C),D;if(N===null){for(;!k.done;C++,k=S.next())k=m(b,k.value,j),k!==null&&(x=i(k,x,C),M===null?D=k:M.sibling=k,M=k);return ht&&So(b,C),D}for(N=r(b,N);!k.done;C++,k=S.next())k=g(N,b,C,k.value,j),k!==null&&(t&&k.alternate!==null&&N.delete(k.key===null?C:k.key),x=i(k,x,C),M===null?D=k:M.sibling=k,M=k);return t&&N.forEach(function(R){return e(b,R)}),ht&&So(b,C),D}function _(b,x,S,j){if(typeof S=="object"&&S!==null&&S.type===xa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case jd:e:{for(var D=S.key,M=x;M!==null;){if(M.key===D){if(D=S.type,D===xa){if(M.tag===7){n(b,M.sibling),x=s(M,S.props.children),x.return=b,b=x;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===gi&&s1(D)===M.type){n(b,M.sibling),x=s(M,S.props),x.ref=mc(b,M,S),x.return=b,b=x;break e}n(b,M);break}else e(b,M);M=M.sibling}S.type===xa?(x=Lo(S.props.children,b.mode,j,S.key),x.return=b,b=x):(j=bh(S.type,S.key,S.props,null,b.mode,j),j.ref=mc(b,x,S),j.return=b,b=j)}return a(b);case va:e:{for(M=S.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(b,x.sibling),x=s(x,S.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=cg(S,b.mode,j),x.return=b,b=x}return a(b);case gi:return M=S._init,_(b,x,M(S._payload),j)}if(wc(S))return w(b,x,S,j);if(cc(S))return v(b,x,S,j);zd(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,S),x.return=b,b=x):(n(b,x),x=lg(S,b.mode,j),x.return=b,b=x),a(b)):n(b,x)}return _}var al=GE(!0),KE=GE(!1),Zh=oo(null),ef=null,Ca=null,ox=null;function ax(){ox=Ca=ef=null}function lx(t){var e=Zh.current;dt(Zh),t._currentValue=e}function xy(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function La(t,e){ef=t,ox=Ca=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ln=!0),t.firstContext=null)}function Nr(t){var e=t._currentValue;if(ox!==t)if(t={context:t,memoizedValue:e,next:null},Ca===null){if(ef===null)throw Error(Z(308));Ca=t,ef.dependencies={lanes:0,firstContext:t}}else Ca=Ca.next=t;return e}var ko=null;function cx(t){ko===null?ko=[t]:ko.push(t)}function QE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cx(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ws(t,r)}function Ws(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yi=!1;function ux(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Oi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ws(t,n)}return s=r.interleaved,s===null?(e.next=e,cx(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ws(t,n)}function ph(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qv(t,n)}}function i1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tf(t,e,n,r){var s=t.updateQueue;yi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var m=s.baseState;a=0,h=u=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,v=l;switch(p=e,g=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){m=w.call(g,m,p);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(g,m,p):w,p==null)break e;m=yt({},m,p);break e;case 2:yi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=m):h=h.next=g,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=m),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ho|=a,t.lanes=a,t.memoizedState=m}}function o1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var Lu={},ps=oo(Lu),cu=oo(Lu),uu=oo(Lu);function jo(t){if(t===Lu)throw Error(Z(174));return t}function dx(t,e){switch(it(uu,e),it(cu,t),it(ps,Lu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Zg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Zg(e,t)}dt(ps),it(ps,e)}function ll(){dt(ps),dt(cu),dt(uu)}function YE(t){jo(uu.current);var e=jo(ps.current),n=Zg(e,t.type);e!==n&&(it(cu,t),it(ps,n))}function hx(t){cu.current===t&&(dt(ps),dt(cu))}var mt=oo(0);function nf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ng=[];function fx(){for(var t=0;t<ng.length;t++)ng[t]._workInProgressVersionPrimary=null;ng.length=0}var gh=ti.ReactCurrentDispatcher,rg=ti.ReactCurrentBatchConfig,Bo=0,gt=null,Ot=null,Wt=null,rf=!1,Dc=!1,du=0,l5=0;function an(){throw Error(Z(321))}function mx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wr(t[n],e[n]))return!1;return!0}function px(t,e,n,r,s,i){if(Bo=i,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gh.current=t===null||t.memoizedState===null?h5:f5,t=n(r,s),Dc){i=0;do{if(Dc=!1,du=0,25<=i)throw Error(Z(301));i+=1,Wt=Ot=null,e.updateQueue=null,gh.current=m5,t=n(r,s)}while(Dc)}if(gh.current=sf,e=Ot!==null&&Ot.next!==null,Bo=0,Wt=Ot=gt=null,rf=!1,e)throw Error(Z(300));return t}function gx(){var t=du!==0;return du=0,t}function os(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?gt.memoizedState=Wt=t:Wt=Wt.next=t,Wt}function Er(){if(Ot===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=Wt===null?gt.memoizedState:Wt.next;if(e!==null)Wt=e,Ot=t;else{if(t===null)throw Error(Z(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Wt===null?gt.memoizedState=Wt=t:Wt=Wt.next=t}return Wt}function hu(t,e){return typeof e=="function"?e(t):e}function sg(t){var e=Er(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=Ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var h=u.lane;if((Bo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,gt.lanes|=h,Ho|=h}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Wr(r,e.memoizedState)||(Ln=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,gt.lanes|=i,Ho|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ig(t){var e=Er(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Wr(i,e.memoizedState)||(Ln=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function JE(){}function ZE(t,e){var n=gt,r=Er(),s=e(),i=!Wr(r.memoizedState,s);if(i&&(r.memoizedState=s,Ln=!0),r=r.queue,yx(nT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Wt!==null&&Wt.memoizedState.tag&1){if(n.flags|=2048,fu(9,tT.bind(null,n,r,s,e),void 0,null),Kt===null)throw Error(Z(349));Bo&30||eT(n,e,s)}return s}function eT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tT(t,e,n,r){e.value=n,e.getSnapshot=r,rT(e)&&sT(t)}function nT(t,e,n){return n(function(){rT(e)&&sT(t)})}function rT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wr(t,n)}catch{return!0}}function sT(t){var e=Ws(t,1);e!==null&&Ur(e,t,1,-1)}function a1(t){var e=os();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hu,lastRenderedState:t},e.queue=t,t=t.dispatch=d5.bind(null,gt,t),[e.memoizedState,t]}function fu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iT(){return Er().memoizedState}function yh(t,e,n,r){var s=os();gt.flags|=t,s.memoizedState=fu(1|e,n,void 0,r===void 0?null:r)}function sm(t,e,n,r){var s=Er();r=r===void 0?null:r;var i=void 0;if(Ot!==null){var a=Ot.memoizedState;if(i=a.destroy,r!==null&&mx(r,a.deps)){s.memoizedState=fu(e,n,i,r);return}}gt.flags|=t,s.memoizedState=fu(1|e,n,i,r)}function l1(t,e){return yh(8390656,8,t,e)}function yx(t,e){return sm(2048,8,t,e)}function oT(t,e){return sm(4,2,t,e)}function aT(t,e){return sm(4,4,t,e)}function lT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function cT(t,e,n){return n=n!=null?n.concat([t]):null,sm(4,4,lT.bind(null,e,t),n)}function vx(){}function uT(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mx(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dT(t,e){var n=Er();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mx(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hT(t,e,n){return Bo&21?(Wr(n,e)||(n=yE(),gt.lanes|=n,Ho|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ln=!0),t.memoizedState=n)}function c5(t,e){var n=Ye;Ye=n!==0&&4>n?n:4,t(!0);var r=rg.transition;rg.transition={};try{t(!1),e()}finally{Ye=n,rg.transition=r}}function fT(){return Er().memoizedState}function u5(t,e,n){var r=Vi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},mT(t))pT(e,n);else if(n=QE(t,e,n,r),n!==null){var s=Nn();Ur(n,t,r,s),gT(n,e,r)}}function d5(t,e,n){var r=Vi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(mT(t))pT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Wr(l,a)){var c=e.interleaved;c===null?(s.next=s,cx(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=QE(t,e,s,r),n!==null&&(s=Nn(),Ur(n,t,r,s),gT(n,e,r))}}function mT(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function pT(t,e){Dc=rf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qv(t,n)}}var sf={readContext:Nr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},h5={readContext:Nr,useCallback:function(t,e){return os().memoizedState=[t,e===void 0?null:e],t},useContext:Nr,useEffect:l1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yh(4194308,4,lT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yh(4194308,4,t,e)},useInsertionEffect:function(t,e){return yh(4,2,t,e)},useMemo:function(t,e){var n=os();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=os();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=u5.bind(null,gt,t),[r.memoizedState,t]},useRef:function(t){var e=os();return t={current:t},e.memoizedState=t},useState:a1,useDebugValue:vx,useDeferredValue:function(t){return os().memoizedState=t},useTransition:function(){var t=a1(!1),e=t[0];return t=c5.bind(null,t[1]),os().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gt,s=os();if(ht){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Kt===null)throw Error(Z(349));Bo&30||eT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,l1(nT.bind(null,r,i,t),[t]),r.flags|=2048,fu(9,tT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=os(),e=Kt.identifierPrefix;if(ht){var n=Os,r=Ms;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=du++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=l5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},f5={readContext:Nr,useCallback:uT,useContext:Nr,useEffect:yx,useImperativeHandle:cT,useInsertionEffect:oT,useLayoutEffect:aT,useMemo:dT,useReducer:sg,useRef:iT,useState:function(){return sg(hu)},useDebugValue:vx,useDeferredValue:function(t){var e=Er();return hT(e,Ot.memoizedState,t)},useTransition:function(){var t=sg(hu)[0],e=Er().memoizedState;return[t,e]},useMutableSource:JE,useSyncExternalStore:ZE,useId:fT,unstable_isNewReconciler:!1},m5={readContext:Nr,useCallback:uT,useContext:Nr,useEffect:yx,useImperativeHandle:cT,useInsertionEffect:oT,useLayoutEffect:aT,useMemo:dT,useReducer:ig,useRef:iT,useState:function(){return ig(hu)},useDebugValue:vx,useDeferredValue:function(t){var e=Er();return Ot===null?e.memoizedState=t:hT(e,Ot.memoizedState,t)},useTransition:function(){var t=ig(hu)[0],e=Er().memoizedState;return[t,e]},useMutableSource:JE,useSyncExternalStore:ZE,useId:fT,unstable_isNewReconciler:!1};function Ar(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function wy(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var im={isMounted:function(t){return(t=t._reactInternals)?na(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nn(),s=Vi(t),i=zs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Oi(t,i,s),e!==null&&(Ur(e,t,s,r),ph(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nn(),s=Vi(t),i=zs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Oi(t,i,s),e!==null&&(Ur(e,t,s,r),ph(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nn(),r=Vi(t),s=zs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Oi(t,s,r),e!==null&&(Ur(e,t,r,n),ph(e,t,r))}};function c1(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!iu(n,r)||!iu(s,i):!0}function yT(t,e,n){var r=!1,s=Ki,i=e.contextType;return typeof i=="object"&&i!==null?i=Nr(i):(s=Fn(e)?Uo:yn.current,r=e.contextTypes,i=(r=r!=null)?il(t,s):Ki),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=im,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function u1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&im.enqueueReplaceState(e,e.state,null)}function by(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ux(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Nr(i):(i=Fn(e)?Uo:yn.current,s.context=il(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(wy(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&im.enqueueReplaceState(s,s.state,null),tf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function cl(t,e){try{var n="",r=e;do n+=$D(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function og(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _y(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var p5=typeof WeakMap=="function"?WeakMap:Map;function vT(t,e,n){n=zs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){af||(af=!0,Py=r),_y(t,e)},n}function xT(t,e,n){n=zs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){_y(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_y(t,e),typeof r!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function d1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new p5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=j5.bind(null,t,e,n),e.then(t,t))}function h1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function f1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zs(-1,1),e.tag=2,Oi(n,e,1))),n.lanes|=1),t)}var g5=ti.ReactCurrentOwner,Ln=!1;function bn(t,e,n,r){e.child=t===null?KE(e,null,n,r):al(e,t.child,n,r)}function m1(t,e,n,r,s){n=n.render;var i=e.ref;return La(e,s),r=px(t,e,n,r,i,s),n=gx(),t!==null&&!Ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qs(t,e,s)):(ht&&n&&rx(e),e.flags|=1,bn(t,e,r,s),e.child)}function p1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Tx(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,wT(t,e,i,r,s)):(t=bh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:iu,n(a,r)&&t.ref===e.ref)return qs(t,e,s)}return e.flags|=1,t=Fi(i,r),t.ref=e.ref,t.return=e,e.child=t}function wT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(iu(i,r)&&t.ref===e.ref)if(Ln=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ln=!0);else return e.lanes=t.lanes,qs(t,e,s)}return Sy(t,e,n,r,s)}function bT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(ja,Kn),Kn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,it(ja,Kn),Kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,it(ja,Kn),Kn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,it(ja,Kn),Kn|=r;return bn(t,e,s,n),e.child}function _T(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sy(t,e,n,r,s){var i=Fn(n)?Uo:yn.current;return i=il(e,i),La(e,s),n=px(t,e,n,r,i,s),r=gx(),t!==null&&!Ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qs(t,e,s)):(ht&&r&&rx(e),e.flags|=1,bn(t,e,n,s),e.child)}function g1(t,e,n,r,s){if(Fn(n)){var i=!0;Xh(e)}else i=!1;if(La(e,s),e.stateNode===null)vh(t,e),yT(e,n,r),by(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Nr(u):(u=Fn(n)?Uo:yn.current,u=il(e,u));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&u1(e,a,r,u),yi=!1;var p=e.memoizedState;a.state=p,tf(e,r,a,s),c=e.memoizedState,l!==r||p!==c||Vn.current||yi?(typeof h=="function"&&(wy(e,n,h,r),c=e.memoizedState),(l=yi||c1(e,n,l,r,p,c,u))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,XE(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ar(e.type,l),a.props=u,m=e.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Nr(c):(c=Fn(n)?Uo:yn.current,c=il(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||p!==c)&&u1(e,a,r,c),yi=!1,p=e.memoizedState,a.state=p,tf(e,r,a,s);var w=e.memoizedState;l!==m||p!==w||Vn.current||yi?(typeof g=="function"&&(wy(e,n,g,r),w=e.memoizedState),(u=yi||c1(e,n,u,r,p,w,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,w,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,w,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),a.props=r,a.state=w,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Ny(t,e,n,r,i,s)}function Ny(t,e,n,r,s,i){_T(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&t1(e,n,!1),qs(t,e,i);r=e.stateNode,g5.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=al(e,t.child,null,i),e.child=al(e,null,l,i)):bn(t,e,l,i),e.memoizedState=r.state,s&&t1(e,n,!0),e.child}function ST(t){var e=t.stateNode;e.pendingContext?e1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&e1(t,e.context,!1),dx(t,e.containerInfo)}function y1(t,e,n,r,s){return ol(),ix(s),e.flags|=256,bn(t,e,n,r),e.child}var Ey={dehydrated:null,treeContext:null,retryLane:0};function Ty(t){return{baseLanes:t,cachePool:null,transitions:null}}function NT(t,e,n){var r=e.pendingProps,s=mt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),it(mt,s&1),t===null)return vy(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=lm(a,r,0,null),t=Lo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ty(n),e.memoizedState=Ey,t):xx(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return y5(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Fi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Fi(l,i):(i=Lo(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ty(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Ey,r}return i=t.child,t=i.sibling,r=Fi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xx(t,e){return e=lm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ud(t,e,n,r){return r!==null&&ix(r),al(e,t.child,null,n),t=xx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function y5(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=og(Error(Z(422))),Ud(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=lm({mode:"visible",children:r.children},s,0,null),i=Lo(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&al(e,t.child,null,a),e.child.memoizedState=Ty(a),e.memoizedState=Ey,i);if(!(e.mode&1))return Ud(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Z(419)),r=og(i,r,void 0),Ud(t,e,a,r)}if(l=(a&t.childLanes)!==0,Ln||l){if(r=Kt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ws(t,s),Ur(r,t,s,-1))}return Ex(),r=og(Error(Z(421))),Ud(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=I5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,er=Mi(s.nextSibling),nr=e,ht=!0,Mr=null,t!==null&&(mr[pr++]=Ms,mr[pr++]=Os,mr[pr++]=$o,Ms=t.id,Os=t.overflow,$o=e),e=xx(e,r.children),e.flags|=4096,e)}function v1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),xy(t.return,e,n)}function ag(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ET(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bn(t,e,r.children,n),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v1(t,n,e);else if(t.tag===19)v1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(it(mt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&nf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ag(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&nf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ag(e,!0,n,null,i);break;case"together":ag(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ho|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function v5(t,e,n){switch(e.tag){case 3:ST(e),ol();break;case 5:YE(e);break;case 1:Fn(e.type)&&Xh(e);break;case 4:dx(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;it(Zh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(it(mt,mt.current&1),e.flags|=128,null):n&e.child.childLanes?NT(t,e,n):(it(mt,mt.current&1),t=qs(t,e,n),t!==null?t.sibling:null);it(mt,mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ET(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),it(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,bT(t,e,n)}return qs(t,e,n)}var TT,Cy,CT,kT;TT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cy=function(){};CT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jo(ps.current);var i=null;switch(n){case"input":s=Qg(t,s),r=Qg(t,r),i=[];break;case"select":s=yt({},s,{value:void 0}),r=yt({},r,{value:void 0}),i=[];break;case"textarea":s=Jg(t,s),r=Jg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kh)}ey(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Jc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Jc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ut("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};kT=function(t,e,n,r){n!==r&&(e.flags|=4)};function pc(t,e){if(!ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function x5(t,e,n){var r=e.pendingProps;switch(sx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Fn(e.type)&&Qh(),ln(e),null;case 3:return r=e.stateNode,ll(),dt(Vn),dt(yn),fx(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Fd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mr!==null&&(My(Mr),Mr=null))),Cy(t,e),ln(e),null;case 5:hx(e);var s=jo(uu.current);if(n=e.type,t!==null&&e.stateNode!=null)CT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return ln(e),null}if(t=jo(ps.current),Fd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ds]=e,r[lu]=i,t=(e.mode&1)!==0,n){case"dialog":ut("cancel",r),ut("close",r);break;case"iframe":case"object":case"embed":ut("load",r);break;case"video":case"audio":for(s=0;s<_c.length;s++)ut(_c[s],r);break;case"source":ut("error",r);break;case"img":case"image":case"link":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"input":Cb(r,i),ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ut("invalid",r);break;case"textarea":jb(r,i),ut("invalid",r)}ey(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Vd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Vd(r.textContent,l,t),s=["children",""+l]):Jc.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ut("scroll",r)}switch(n){case"input":Id(r),kb(r,i,!0);break;case"textarea":Id(r),Ib(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Kh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[ds]=e,t[lu]=r,TT(t,e,!1,!1),e.stateNode=t;e:{switch(a=ty(n,r),n){case"dialog":ut("cancel",t),ut("close",t),s=r;break;case"iframe":case"object":case"embed":ut("load",t),s=r;break;case"video":case"audio":for(s=0;s<_c.length;s++)ut(_c[s],t);s=r;break;case"source":ut("error",t),s=r;break;case"img":case"image":case"link":ut("error",t),ut("load",t),s=r;break;case"details":ut("toggle",t),s=r;break;case"input":Cb(t,r),s=Qg(t,r),ut("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=yt({},r,{value:void 0}),ut("invalid",t);break;case"textarea":jb(t,r),s=Jg(t,r),ut("invalid",t);break;default:s=r}ey(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?iE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&rE(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Zc(t,c):typeof c=="number"&&Zc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ut("scroll",t):c!=null&&Bv(t,i,c,a))}switch(n){case"input":Id(t),kb(t,r,!1);break;case"textarea":Id(t),Ib(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Gi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ra(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ra(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Kh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)kT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=jo(uu.current),jo(ps.current),Fd(e)){if(r=e.stateNode,n=e.memoizedProps,r[ds]=e,(i=r.nodeValue!==n)&&(t=nr,t!==null))switch(t.tag){case 3:Vd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ds]=e,e.stateNode=r}return ln(e),null;case 13:if(dt(mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ht&&er!==null&&e.mode&1&&!(e.flags&128))qE(),ol(),e.flags|=98560,i=!1;else if(i=Fd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[ds]=e}else ol(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),i=!1}else Mr!==null&&(My(Mr),Mr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mt.current&1?Vt===0&&(Vt=3):Ex())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return ll(),Cy(t,e),t===null&&ou(e.stateNode.containerInfo),ln(e),null;case 10:return lx(e.type._context),ln(e),null;case 17:return Fn(e.type)&&Qh(),ln(e),null;case 19:if(dt(mt),i=e.memoizedState,i===null)return ln(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)pc(i,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=nf(t),a!==null){for(e.flags|=128,pc(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return it(mt,mt.current&1|2),e.child}t=t.sibling}i.tail!==null&&Tt()>ul&&(e.flags|=128,r=!0,pc(i,!1),e.lanes=4194304)}else{if(!r)if(t=nf(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ht)return ln(e),null}else 2*Tt()-i.renderingStartTime>ul&&n!==1073741824&&(e.flags|=128,r=!0,pc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Tt(),e.sibling=null,n=mt.current,it(mt,r?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return Nx(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kn&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function w5(t,e){switch(sx(e),e.tag){case 1:return Fn(e.type)&&Qh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ll(),dt(Vn),dt(yn),fx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hx(e),null;case 13:if(dt(mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));ol()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dt(mt),null;case 4:return ll(),null;case 10:return lx(e.type._context),null;case 22:case 23:return Nx(),null;case 24:return null;default:return null}}var $d=!1,fn=!1,b5=typeof WeakSet=="function"?WeakSet:Set,me=null;function ka(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(t,e,r)}else n.current=null}function ky(t,e,n){try{n()}catch(r){bt(t,e,r)}}var x1=!1;function _5(t,e){if(dy=Wh,t=RE(),nx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,m=t,p=null;t:for(;;){for(var g;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(g=m.firstChild)!==null;)p=m,m=g;for(;;){if(m===t)break t;if(p===n&&++u===s&&(l=a),p===i&&++h===r&&(c=a),(g=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(hy={focusedElem:t,selectionRange:n},Wh=!1,me=e;me!==null;)if(e=me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,me=t;else for(;me!==null;){e=me;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,_=w.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ar(e.type,v),_);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(j){bt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,me=t;break}me=e.return}return w=x1,x1=!1,w}function Mc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ky(e,n,i)}s=s.next}while(s!==r)}}function om(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jT(t){var e=t.alternate;e!==null&&(t.alternate=null,jT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ds],delete e[lu],delete e[py],delete e[s5],delete e[i5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function IT(t){return t.tag===5||t.tag===3||t.tag===4}function w1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||IT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Iy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kh));else if(r!==4&&(t=t.child,t!==null))for(Iy(t,e,n),t=t.sibling;t!==null;)Iy(t,e,n),t=t.sibling}function Ay(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ay(t,e,n),t=t.sibling;t!==null;)Ay(t,e,n),t=t.sibling}var Jt=null,Dr=!1;function ui(t,e,n){for(n=n.child;n!==null;)AT(t,e,n),n=n.sibling}function AT(t,e,n){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(Jf,n)}catch{}switch(n.tag){case 5:fn||ka(n,e);case 6:var r=Jt,s=Dr;Jt=null,ui(t,e,n),Jt=r,Dr=s,Jt!==null&&(Dr?(t=Jt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Jt.removeChild(n.stateNode));break;case 18:Jt!==null&&(Dr?(t=Jt,n=n.stateNode,t.nodeType===8?eg(t.parentNode,n):t.nodeType===1&&eg(t,n),ru(t)):eg(Jt,n.stateNode));break;case 4:r=Jt,s=Dr,Jt=n.stateNode.containerInfo,Dr=!0,ui(t,e,n),Jt=r,Dr=s;break;case 0:case 11:case 14:case 15:if(!fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ky(n,e,a),s=s.next}while(s!==r)}ui(t,e,n);break;case 1:if(!fn&&(ka(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){bt(n,e,l)}ui(t,e,n);break;case 21:ui(t,e,n);break;case 22:n.mode&1?(fn=(r=fn)||n.memoizedState!==null,ui(t,e,n),fn=r):ui(t,e,n);break;default:ui(t,e,n)}}function b1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new b5),e.forEach(function(r){var s=A5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function jr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Jt=l.stateNode,Dr=!1;break e;case 3:Jt=l.stateNode.containerInfo,Dr=!0;break e;case 4:Jt=l.stateNode.containerInfo,Dr=!0;break e}l=l.return}if(Jt===null)throw Error(Z(160));AT(i,a,s),Jt=null,Dr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){bt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PT(e,t),e=e.sibling}function PT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jr(e,t),ss(t),r&4){try{Mc(3,t,t.return),om(3,t)}catch(v){bt(t,t.return,v)}try{Mc(5,t,t.return)}catch(v){bt(t,t.return,v)}}break;case 1:jr(e,t),ss(t),r&512&&n!==null&&ka(n,n.return);break;case 5:if(jr(e,t),ss(t),r&512&&n!==null&&ka(n,n.return),t.flags&32){var s=t.stateNode;try{Zc(s,"")}catch(v){bt(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&eE(s,i),ty(l,a);var u=ty(l,i);for(a=0;a<c.length;a+=2){var h=c[a],m=c[a+1];h==="style"?iE(s,m):h==="dangerouslySetInnerHTML"?rE(s,m):h==="children"?Zc(s,m):Bv(s,h,m,u)}switch(l){case"input":Xg(s,i);break;case"textarea":tE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ra(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ra(s,!!i.multiple,i.defaultValue,!0):Ra(s,!!i.multiple,i.multiple?[]:"",!1))}s[lu]=i}catch(v){bt(t,t.return,v)}}break;case 6:if(jr(e,t),ss(t),r&4){if(t.stateNode===null)throw Error(Z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){bt(t,t.return,v)}}break;case 3:if(jr(e,t),ss(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ru(e.containerInfo)}catch(v){bt(t,t.return,v)}break;case 4:jr(e,t),ss(t);break;case 13:jr(e,t),ss(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_x=Tt())),r&4&&b1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(fn=(u=fn)||h,jr(e,t),fn=u):jr(e,t),ss(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(me=t,h=t.child;h!==null;){for(m=me=h;me!==null;){switch(p=me,g=p.child,p.tag){case 0:case 11:case 14:case 15:Mc(4,p,p.return);break;case 1:ka(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){bt(r,n,v)}}break;case 5:ka(p,p.return);break;case 22:if(p.memoizedState!==null){S1(m);continue}}g!==null?(g.return=p,me=g):S1(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=sE("display",a))}catch(v){bt(t,t.return,v)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(v){bt(t,t.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:jr(e,t),ss(t),r&4&&b1(t);break;case 21:break;default:jr(e,t),ss(t)}}function ss(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(IT(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Zc(s,""),r.flags&=-33);var i=w1(t);Ay(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=w1(t);Iy(t,l,a);break;default:throw Error(Z(161))}}catch(c){bt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function S5(t,e,n){me=t,RT(t)}function RT(t,e,n){for(var r=(t.mode&1)!==0;me!==null;){var s=me,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||$d;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||fn;l=$d;var u=fn;if($d=a,(fn=c)&&!u)for(me=s;me!==null;)a=me,c=a.child,a.tag===22&&a.memoizedState!==null?N1(s):c!==null?(c.return=a,me=c):N1(s);for(;i!==null;)me=i,RT(i),i=i.sibling;me=s,$d=l,fn=u}_1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,me=i):_1(t)}}function _1(t){for(;me!==null;){var e=me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fn||om(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!fn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ar(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&o1(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}o1(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&ru(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}fn||e.flags&512&&jy(e)}catch(p){bt(e,e.return,p)}}if(e===t){me=null;break}if(n=e.sibling,n!==null){n.return=e.return,me=n;break}me=e.return}}function S1(t){for(;me!==null;){var e=me;if(e===t){me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,me=n;break}me=e.return}}function N1(t){for(;me!==null;){var e=me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{om(4,e)}catch(c){bt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){bt(e,s,c)}}var i=e.return;try{jy(e)}catch(c){bt(e,i,c)}break;case 5:var a=e.return;try{jy(e)}catch(c){bt(e,a,c)}}}catch(c){bt(e,e.return,c)}if(e===t){me=null;break}var l=e.sibling;if(l!==null){l.return=e.return,me=l;break}me=e.return}}var N5=Math.ceil,of=ti.ReactCurrentDispatcher,wx=ti.ReactCurrentOwner,br=ti.ReactCurrentBatchConfig,Ue=0,Kt=null,kt=null,tn=0,Kn=0,ja=oo(0),Vt=0,mu=null,Ho=0,am=0,bx=0,Oc=null,Dn=null,_x=0,ul=1/0,Ps=null,af=!1,Py=null,Li=null,Bd=!1,Ii=null,lf=0,Lc=0,Ry=null,xh=-1,wh=0;function Nn(){return Ue&6?Tt():xh!==-1?xh:xh=Tt()}function Vi(t){return t.mode&1?Ue&2&&tn!==0?tn&-tn:a5.transition!==null?(wh===0&&(wh=yE()),wh):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:NE(t.type)),t):1}function Ur(t,e,n,r){if(50<Lc)throw Lc=0,Ry=null,Error(Z(185));Du(t,n,r),(!(Ue&2)||t!==Kt)&&(t===Kt&&(!(Ue&2)&&(am|=n),Vt===4&&wi(t,tn)),zn(t,r),n===1&&Ue===0&&!(e.mode&1)&&(ul=Tt()+500,rm&&ao()))}function zn(t,e){var n=t.callbackNode;a4(t,e);var r=Hh(t,t===Kt?tn:0);if(r===0)n!==null&&Rb(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rb(n),e===1)t.tag===0?o5(E1.bind(null,t)):BE(E1.bind(null,t)),n5(function(){!(Ue&6)&&ao()}),n=null;else{switch(vE(r)){case 1:n=Kv;break;case 4:n=pE;break;case 16:n=Bh;break;case 536870912:n=gE;break;default:n=Bh}n=UT(n,DT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function DT(t,e){if(xh=-1,wh=0,Ue&6)throw Error(Z(327));var n=t.callbackNode;if(Va()&&t.callbackNode!==n)return null;var r=Hh(t,t===Kt?tn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cf(t,r);else{e=r;var s=Ue;Ue|=2;var i=OT();(Kt!==t||tn!==e)&&(Ps=null,ul=Tt()+500,Oo(t,e));do try{C5();break}catch(l){MT(t,l)}while(!0);ax(),of.current=i,Ue=s,kt!==null?e=0:(Kt=null,tn=0,e=Vt)}if(e!==0){if(e===2&&(s=oy(t),s!==0&&(r=s,e=Dy(t,s))),e===1)throw n=mu,Oo(t,0),wi(t,r),zn(t,Tt()),n;if(e===6)wi(t,r);else{if(s=t.current.alternate,!(r&30)&&!E5(s)&&(e=cf(t,r),e===2&&(i=oy(t),i!==0&&(r=i,e=Dy(t,i))),e===1))throw n=mu,Oo(t,0),wi(t,r),zn(t,Tt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:No(t,Dn,Ps);break;case 3:if(wi(t,r),(r&130023424)===r&&(e=_x+500-Tt(),10<e)){if(Hh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Nn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=my(No.bind(null,t,Dn,Ps),e);break}No(t,Dn,Ps);break;case 4:if(wi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-zr(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*N5(r/1960))-r,10<r){t.timeoutHandle=my(No.bind(null,t,Dn,Ps),r);break}No(t,Dn,Ps);break;case 5:No(t,Dn,Ps);break;default:throw Error(Z(329))}}}return zn(t,Tt()),t.callbackNode===n?DT.bind(null,t):null}function Dy(t,e){var n=Oc;return t.current.memoizedState.isDehydrated&&(Oo(t,e).flags|=256),t=cf(t,e),t!==2&&(e=Dn,Dn=n,e!==null&&My(e)),t}function My(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function E5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Wr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wi(t,e){for(e&=~bx,e&=~am,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),r=1<<n;t[n]=-1,e&=~r}}function E1(t){if(Ue&6)throw Error(Z(327));Va();var e=Hh(t,0);if(!(e&1))return zn(t,Tt()),null;var n=cf(t,e);if(t.tag!==0&&n===2){var r=oy(t);r!==0&&(e=r,n=Dy(t,r))}if(n===1)throw n=mu,Oo(t,0),wi(t,e),zn(t,Tt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,No(t,Dn,Ps),zn(t,Tt()),null}function Sx(t,e){var n=Ue;Ue|=1;try{return t(e)}finally{Ue=n,Ue===0&&(ul=Tt()+500,rm&&ao())}}function Wo(t){Ii!==null&&Ii.tag===0&&!(Ue&6)&&Va();var e=Ue;Ue|=1;var n=br.transition,r=Ye;try{if(br.transition=null,Ye=1,t)return t()}finally{Ye=r,br.transition=n,Ue=e,!(Ue&6)&&ao()}}function Nx(){Kn=ja.current,dt(ja)}function Oo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,t5(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch(sx(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Qh();break;case 3:ll(),dt(Vn),dt(yn),fx();break;case 5:hx(r);break;case 4:ll();break;case 13:dt(mt);break;case 19:dt(mt);break;case 10:lx(r.type._context);break;case 22:case 23:Nx()}n=n.return}if(Kt=t,kt=t=Fi(t.current,null),tn=Kn=e,Vt=0,mu=null,bx=am=Ho=0,Dn=Oc=null,ko!==null){for(e=0;e<ko.length;e++)if(n=ko[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}ko=null}return t}function MT(t,e){do{var n=kt;try{if(ax(),gh.current=sf,rf){for(var r=gt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}rf=!1}if(Bo=0,Wt=Ot=gt=null,Dc=!1,du=0,wx.current=null,n===null||n.return===null){Vt=1,mu=e,kt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=tn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=h1(a);if(g!==null){g.flags&=-257,f1(g,a,l,i,e),g.mode&1&&d1(i,u,e),e=g,c=u;var w=e.updateQueue;if(w===null){var v=new Set;v.add(c),e.updateQueue=v}else w.add(c);break e}else{if(!(e&1)){d1(i,u,e),Ex();break e}c=Error(Z(426))}}else if(ht&&l.mode&1){var _=h1(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),f1(_,a,l,i,e),ix(cl(c,l));break e}}i=c=cl(c,l),Vt!==4&&(Vt=2),Oc===null?Oc=[i]:Oc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=vT(i,c,e);i1(i,b);break e;case 1:l=c;var x=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Li===null||!Li.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=xT(i,l,e);i1(i,j);break e}}i=i.return}while(i!==null)}VT(n)}catch(D){e=D,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function OT(){var t=of.current;return of.current=sf,t===null?sf:t}function Ex(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Kt===null||!(Ho&268435455)&&!(am&268435455)||wi(Kt,tn)}function cf(t,e){var n=Ue;Ue|=2;var r=OT();(Kt!==t||tn!==e)&&(Ps=null,Oo(t,e));do try{T5();break}catch(s){MT(t,s)}while(!0);if(ax(),Ue=n,of.current=r,kt!==null)throw Error(Z(261));return Kt=null,tn=0,Vt}function T5(){for(;kt!==null;)LT(kt)}function C5(){for(;kt!==null&&!JD();)LT(kt)}function LT(t){var e=zT(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,e===null?VT(t):kt=e,wx.current=null}function VT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=w5(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,kt=null;return}}else if(n=x5(n,e,Kn),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Vt===0&&(Vt=5)}function No(t,e,n){var r=Ye,s=br.transition;try{br.transition=null,Ye=1,k5(t,e,n,r)}finally{br.transition=s,Ye=r}return null}function k5(t,e,n,r){do Va();while(Ii!==null);if(Ue&6)throw Error(Z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(l4(t,i),t===Kt&&(kt=Kt=null,tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bd||(Bd=!0,UT(Bh,function(){return Va(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=br.transition,br.transition=null;var a=Ye;Ye=1;var l=Ue;Ue|=4,wx.current=null,_5(t,n),PT(n,t),K4(hy),Wh=!!dy,hy=dy=null,t.current=n,S5(n),ZD(),Ue=l,Ye=a,br.transition=i}else t.current=n;if(Bd&&(Bd=!1,Ii=t,lf=s),i=t.pendingLanes,i===0&&(Li=null),n4(n.stateNode),zn(t,Tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(af)throw af=!1,t=Py,Py=null,t;return lf&1&&t.tag!==0&&Va(),i=t.pendingLanes,i&1?t===Ry?Lc++:(Lc=0,Ry=t):Lc=0,ao(),null}function Va(){if(Ii!==null){var t=vE(lf),e=br.transition,n=Ye;try{if(br.transition=null,Ye=16>t?16:t,Ii===null)var r=!1;else{if(t=Ii,Ii=null,lf=0,Ue&6)throw Error(Z(331));var s=Ue;for(Ue|=4,me=t.current;me!==null;){var i=me,a=i.child;if(me.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(me=u;me!==null;){var h=me;switch(h.tag){case 0:case 11:case 15:Mc(8,h,i)}var m=h.child;if(m!==null)m.return=h,me=m;else for(;me!==null;){h=me;var p=h.sibling,g=h.return;if(jT(h),h===u){me=null;break}if(p!==null){p.return=g,me=p;break}me=g}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}me=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,me=a;else e:for(;me!==null;){if(i=me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mc(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,me=b;break e}me=i.return}}var x=t.current;for(me=x;me!==null;){a=me;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,me=S;else e:for(a=x;me!==null;){if(l=me,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:om(9,l)}}catch(D){bt(l,l.return,D)}if(l===a){me=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,me=j;break e}me=l.return}}if(Ue=s,ao(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(Jf,t)}catch{}r=!0}return r}finally{Ye=n,br.transition=e}}return!1}function T1(t,e,n){e=cl(n,e),e=vT(t,e,1),t=Oi(t,e,1),e=Nn(),t!==null&&(Du(t,1,e),zn(t,e))}function bt(t,e,n){if(t.tag===3)T1(t,t,n);else for(;e!==null;){if(e.tag===3){T1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Li===null||!Li.has(r))){t=cl(n,t),t=xT(e,t,1),e=Oi(e,t,1),t=Nn(),e!==null&&(Du(e,1,t),zn(e,t));break}}e=e.return}}function j5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nn(),t.pingedLanes|=t.suspendedLanes&n,Kt===t&&(tn&n)===n&&(Vt===4||Vt===3&&(tn&130023424)===tn&&500>Tt()-_x?Oo(t,0):bx|=n),zn(t,e)}function FT(t,e){e===0&&(t.mode&1?(e=Rd,Rd<<=1,!(Rd&130023424)&&(Rd=4194304)):e=1);var n=Nn();t=Ws(t,e),t!==null&&(Du(t,e,n),zn(t,n))}function I5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FT(t,n)}function A5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),FT(t,n)}var zT;zT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vn.current)Ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ln=!1,v5(t,e,n);Ln=!!(t.flags&131072)}else Ln=!1,ht&&e.flags&1048576&&HE(e,Jh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vh(t,e),t=e.pendingProps;var s=il(e,yn.current);La(e,n),s=px(null,e,r,t,s,n);var i=gx();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(r)?(i=!0,Xh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ux(e),s.updater=im,e.stateNode=s,s._reactInternals=e,by(e,r,t,n),e=Ny(null,e,r,!0,i,n)):(e.tag=0,ht&&i&&rx(e),bn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=R5(r),t=Ar(r,t),s){case 0:e=Sy(null,e,r,t,n);break e;case 1:e=g1(null,e,r,t,n);break e;case 11:e=m1(null,e,r,t,n);break e;case 14:e=p1(null,e,r,Ar(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ar(r,s),Sy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ar(r,s),g1(t,e,r,s,n);case 3:e:{if(ST(e),t===null)throw Error(Z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,XE(t,e),tf(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=cl(Error(Z(423)),e),e=y1(t,e,r,n,s);break e}else if(r!==s){s=cl(Error(Z(424)),e),e=y1(t,e,r,n,s);break e}else for(er=Mi(e.stateNode.containerInfo.firstChild),nr=e,ht=!0,Mr=null,n=KE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ol(),r===s){e=qs(t,e,n);break e}bn(t,e,r,n)}e=e.child}return e;case 5:return YE(e),t===null&&vy(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,fy(r,s)?a=null:i!==null&&fy(r,i)&&(e.flags|=32),_T(t,e),bn(t,e,a,n),e.child;case 6:return t===null&&vy(e),null;case 13:return NT(t,e,n);case 4:return dx(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=al(e,null,r,n):bn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ar(r,s),m1(t,e,r,s,n);case 7:return bn(t,e,e.pendingProps,n),e.child;case 8:return bn(t,e,e.pendingProps.children,n),e.child;case 12:return bn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,it(Zh,r._currentValue),r._currentValue=a,i!==null)if(Wr(i.value,a)){if(i.children===s.children&&!Vn.current){e=qs(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=zs(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),xy(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Z(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),xy(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}bn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,La(e,n),s=Nr(s),r=r(s),e.flags|=1,bn(t,e,r,n),e.child;case 14:return r=e.type,s=Ar(r,e.pendingProps),s=Ar(r.type,s),p1(t,e,r,s,n);case 15:return wT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ar(r,s),vh(t,e),e.tag=1,Fn(r)?(t=!0,Xh(e)):t=!1,La(e,n),yT(e,r,s),by(e,r,s,n),Ny(null,e,r,!0,t,n);case 19:return ET(t,e,n);case 22:return bT(t,e,n)}throw Error(Z(156,e.tag))};function UT(t,e){return mE(t,e)}function P5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(t,e,n,r){return new P5(t,e,n,r)}function Tx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R5(t){if(typeof t=="function")return Tx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wv)return 11;if(t===qv)return 14}return 2}function Fi(t,e){var n=t.alternate;return n===null?(n=xr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bh(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Tx(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case xa:return Lo(n.children,s,i,e);case Hv:a=8,s|=8;break;case Wg:return t=xr(12,n,e,s|2),t.elementType=Wg,t.lanes=i,t;case qg:return t=xr(13,n,e,s),t.elementType=qg,t.lanes=i,t;case Gg:return t=xr(19,n,e,s),t.elementType=Gg,t.lanes=i,t;case YN:return lm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case QN:a=10;break e;case XN:a=9;break e;case Wv:a=11;break e;case qv:a=14;break e;case gi:a=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=xr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Lo(t,e,n,r){return t=xr(7,t,r,e),t.lanes=n,t}function lm(t,e,n,r){return t=xr(22,t,r,e),t.elementType=YN,t.lanes=n,t.stateNode={isHidden:!1},t}function lg(t,e,n){return t=xr(6,t,null,e),t.lanes=n,t}function cg(t,e,n){return e=xr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function D5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bp(0),this.expirationTimes=Bp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Cx(t,e,n,r,s,i,a,l,c){return t=new D5(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=xr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ux(i),t}function M5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:va,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $T(t){if(!t)return Ki;t=t._reactInternals;e:{if(na(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Fn(n))return $E(t,n,e)}return e}function BT(t,e,n,r,s,i,a,l,c){return t=Cx(n,r,!0,t,s,i,a,l,c),t.context=$T(null),n=t.current,r=Nn(),s=Vi(n),i=zs(r,s),i.callback=e??null,Oi(n,i,s),t.current.lanes=s,Du(t,s,r),zn(t,r),t}function cm(t,e,n,r){var s=e.current,i=Nn(),a=Vi(s);return n=$T(n),e.context===null?e.context=n:e.pendingContext=n,e=zs(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Oi(s,e,a),t!==null&&(Ur(t,s,a,i),ph(t,s,a)),a}function uf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function C1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kx(t,e){C1(t,e),(t=t.alternate)&&C1(t,e)}function O5(){return null}var HT=typeof reportError=="function"?reportError:function(t){console.error(t)};function jx(t){this._internalRoot=t}um.prototype.render=jx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));cm(t,e,null,null)};um.prototype.unmount=jx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wo(function(){cm(null,t,null,null)}),e[Hs]=null}};function um(t){this._internalRoot=t}um.prototype.unstable_scheduleHydration=function(t){if(t){var e=bE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xi.length&&e!==0&&e<xi[n].priority;n++);xi.splice(n,0,t),n===0&&SE(t)}};function Ix(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function k1(){}function L5(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=uf(a);i.call(u)}}var a=BT(e,r,t,0,null,!1,!1,"",k1);return t._reactRootContainer=a,t[Hs]=a.current,ou(t.nodeType===8?t.parentNode:t),Wo(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=uf(c);l.call(u)}}var c=Cx(t,0,!1,null,null,!1,!1,"",k1);return t._reactRootContainer=c,t[Hs]=c.current,ou(t.nodeType===8?t.parentNode:t),Wo(function(){cm(e,c,n,r)}),c}function hm(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=uf(a);l.call(c)}}cm(e,a,t,s)}else a=L5(n,e,t,s,r);return uf(a)}xE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bc(e.pendingLanes);n!==0&&(Qv(e,n|1),zn(e,Tt()),!(Ue&6)&&(ul=Tt()+500,ao()))}break;case 13:Wo(function(){var r=Ws(t,1);if(r!==null){var s=Nn();Ur(r,t,1,s)}}),kx(t,1)}};Xv=function(t){if(t.tag===13){var e=Ws(t,134217728);if(e!==null){var n=Nn();Ur(e,t,134217728,n)}kx(t,134217728)}};wE=function(t){if(t.tag===13){var e=Vi(t),n=Ws(t,e);if(n!==null){var r=Nn();Ur(n,t,e,r)}kx(t,e)}};bE=function(){return Ye};_E=function(t,e){var n=Ye;try{return Ye=t,e()}finally{Ye=n}};ry=function(t,e,n){switch(e){case"input":if(Xg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=nm(r);if(!s)throw Error(Z(90));ZN(r),Xg(r,s)}}}break;case"textarea":tE(t,n);break;case"select":e=n.value,e!=null&&Ra(t,!!n.multiple,e,!1)}};lE=Sx;cE=Wo;var V5={usingClientEntryPoint:!1,Events:[Ou,Sa,nm,oE,aE,Sx]},gc={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F5={bundleType:gc.bundleType,version:gc.version,rendererPackageName:gc.rendererPackageName,rendererConfig:gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ti.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hE(t),t===null?null:t.stateNode},findFiberByHostInstance:gc.findFiberByHostInstance||O5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{Jf=Hd.inject(F5),ms=Hd}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V5;or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ix(e))throw Error(Z(200));return M5(t,e,null,n)};or.createRoot=function(t,e){if(!Ix(t))throw Error(Z(299));var n=!1,r="",s=HT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Cx(t,1,!1,null,null,n,!1,r,s),t[Hs]=e.current,ou(t.nodeType===8?t.parentNode:t),new jx(e)};or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=hE(e),t=t===null?null:t.stateNode,t};or.flushSync=function(t){return Wo(t)};or.hydrate=function(t,e,n){if(!dm(e))throw Error(Z(200));return hm(null,t,e,!0,n)};or.hydrateRoot=function(t,e,n){if(!Ix(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=HT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=BT(e,null,t,1,n??null,s,!1,i,a),t[Hs]=e.current,ou(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new um(e)};or.render=function(t,e,n){if(!dm(e))throw Error(Z(200));return hm(null,t,e,!1,n)};or.unmountComponentAtNode=function(t){if(!dm(t))throw Error(Z(40));return t._reactRootContainer?(Wo(function(){hm(null,null,t,!1,function(){t._reactRootContainer=null,t[Hs]=null})}),!0):!1};or.unstable_batchedUpdates=Sx;or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dm(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return hm(t,e,n,!1,r)};or.version="18.3.1-next-f1338f8080-20240426";function WT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WT)}catch(t){console.error(t)}}WT(),WN.exports=or;var wr=WN.exports;const z5=PN(wr);var qT,j1=wr;qT=j1.createRoot,j1.hydrateRoot;function U5(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var GT={exports:{}},KT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dl=f;function $5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var B5=typeof Object.is=="function"?Object.is:$5,H5=dl.useState,W5=dl.useEffect,q5=dl.useLayoutEffect,G5=dl.useDebugValue;function K5(t,e){var n=e(),r=H5({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return q5(function(){s.value=n,s.getSnapshot=e,ug(s)&&i({inst:s})},[t,n,e]),W5(function(){return ug(s)&&i({inst:s}),t(function(){ug(s)&&i({inst:s})})},[t]),G5(n),n}function ug(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!B5(t,n)}catch{return!0}}function Q5(t,e){return e()}var X5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Q5:K5;KT.useSyncExternalStore=dl.useSyncExternalStore!==void 0?dl.useSyncExternalStore:X5;GT.exports=KT;var Y5=GT.exports;const J5=BN.useInsertionEffect,Z5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eM=Z5?f.useLayoutEffect:f.useEffect,tM=J5||eM,QT=t=>{const e=f.useRef([t,(...n)=>e[0](...n)]).current;return tM(()=>{e[0]=t}),e[1]},nM="popstate",Ax="pushState",Px="replaceState",rM="hashchange",I1=[nM,Ax,Px,rM],sM=t=>{for(const e of I1)addEventListener(e,t);return()=>{for(const e of I1)removeEventListener(e,t)}},XT=(t,e)=>Y5.useSyncExternalStore(sM,t,e),iM=()=>location.search,oM=({ssrSearch:t=""}={})=>XT(iM,()=>t),A1=()=>location.pathname,aM=({ssrPath:t}={})=>XT(A1,t?()=>t:A1),lM=(t,{replace:e=!1,state:n=null}={})=>history[e?Px:Ax](n,"",t),cM=(t={})=>[aM(t),lM],P1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[P1]>"u"){for(const t of[Ax,Px]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,P1,{value:!0})}const uM=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",YT=(t="")=>t==="/"?"":t,dM=(t,e)=>t[0]==="~"?t.slice(1):YT(e)+t,hM=(t="",e)=>uM(R1(YT(t)),R1(e)),R1=t=>{try{return decodeURI(t)}catch{return t}},JT={hook:cM,searchHook:oM,parser:U5,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},ZT=f.createContext(JT),Vu=()=>f.useContext(ZT),eC={},tC=f.createContext(eC),fM=()=>f.useContext(tC),fm=t=>{const[e,n]=t.hook(t);return[hM(t.base,e),QT((r,s)=>n(dM(r,t.base),s))]},mm=()=>fm(Vu()),nC=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((m,p)=>[m,c[p]])):a.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},rC=({children:t,...e})=>{var h,m;const n=Vu(),r=e.hook?JT:n;let s=r;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((m=e.hook)==null?void 0:m.hrefs);let l=f.useRef({}),c=l.current,u=c;for(let p in r){const g=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&g!==u[p]&&(l.current=u={...u}),u[p]=g,g!==r[p]&&(s=u)}return f.createElement(ZT.Provider,{value:s,children:t})},D1=({children:t,component:e},n)=>e?f.createElement(e,{params:n}):typeof t=="function"?t(n):t,mM=t=>{let e=f.useRef(eC),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},dr=({path:t,nest:e,match:n,...r})=>{const s=Vu(),[i]=fm(s),[a,l,c]=n??nC(s.parser,t,i,e),u=mM({...fM(),...l});if(!a)return null;const h=c?f.createElement(rC,{base:c},D1(r,u)):D1(r,u);return f.createElement(tC.Provider,{value:u,children:h})},Un=f.forwardRef((t,e)=>{const n=Vu(),[r,s]=fm(n),{to:i="",href:a=i,onClick:l,asChild:c,children:u,className:h,replace:m,state:p,...g}=t,w=QT(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(l==null||l(_),_.defaultPrevented||(_.preventDefault(),s(a,t)))}),v=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&f.isValidElement(u)?f.cloneElement(u,{onClick:w,href:v}):f.createElement("a",{...g,onClick:w,href:v,className:h!=null&&h.call?h(r===a):h,children:u,ref:e})}),sC=t=>Array.isArray(t)?t.flatMap(e=>sC(e&&e.type===f.Fragment?e.props.children:e)):[t],pM=({children:t,location:e})=>{const n=Vu(),[r]=fm(n);for(const s of sC(t)){let i=0;if(f.isValidElement(s)&&(i=nC(n.parser,s.props.path,e||r,s.props.nest))[0])return f.cloneElement(s,{match:i})}return null};var pm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gm=typeof window>"u"||"Deno"in globalThis;function Pr(){}function gM(t,e){return typeof t=="function"?t(e):t}function yM(t){return typeof t=="number"&&t>=0&&t!==1/0}function vM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function M1(t,e){return typeof t=="function"?t(e):t}function xM(t,e){return typeof t=="function"?t(e):t}function O1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==Rx(a,e.options))return!1}else if(!gu(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function L1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(pu(e.options.mutationKey)!==pu(i))return!1}else if(!gu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Rx(t,e){return((e==null?void 0:e.queryKeyHashFn)||pu)(t)}function pu(t){return JSON.stringify(t,(e,n)=>Oy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function gu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!gu(t[n],e[n])):!1}function iC(t,e){if(t===e)return t;const n=V1(t)&&V1(e);if(n||Oy(t)&&Oy(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{};let c=0;for(let u=0;u<a;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=iC(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function V1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Oy(t){if(!F1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!F1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function F1(t){return Object.prototype.toString.call(t)==="[object Object]"}function wM(t){return new Promise(e=>{setTimeout(e,t)})}function bM(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?iC(t,e):e}function _M(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function SM(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Dx=Symbol();function oC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Dx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Po,Ni,Qa,NN,NM=(NN=class extends pm{constructor(){super();Ge(this,Po);Ge(this,Ni);Ge(this,Qa);ke(this,Qa,e=>{if(!gm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,Ni)||this.setEventListener(K(this,Qa))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,Ni))==null||e.call(this),ke(this,Ni,void 0))}setEventListener(e){var n;ke(this,Qa,e),(n=K(this,Ni))==null||n.call(this),ke(this,Ni,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,Po)!==e&&(ke(this,Po,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,Po)=="boolean"?K(this,Po):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Po=new WeakMap,Ni=new WeakMap,Qa=new WeakMap,NN),aC=new NM,Xa,Ei,Ya,EN,EM=(EN=class extends pm{constructor(){super();Ge(this,Xa,!0);Ge(this,Ei);Ge(this,Ya);ke(this,Ya,e=>{if(!gm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,Ei)||this.setEventListener(K(this,Ya))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,Ei))==null||e.call(this),ke(this,Ei,void 0))}setEventListener(e){var n;ke(this,Ya,e),(n=K(this,Ei))==null||n.call(this),ke(this,Ei,e(this.setOnline.bind(this)))}setOnline(e){K(this,Xa)!==e&&(ke(this,Xa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,Xa)}},Xa=new WeakMap,Ei=new WeakMap,Ya=new WeakMap,EN),df=new EM;function TM(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function CM(t){return Math.min(1e3*2**t,3e4)}function lC(t){return(t??"online")==="online"?df.isOnline():!0}var cC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function dg(t){return t instanceof cC}function uC(t){let e=!1,n=0,r=!1,s;const i=TM(),a=v=>{var _;r||(p(new cC(v)),(_=t.abort)==null||_.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>aC.isFocused()&&(t.networkMode==="always"||df.isOnline())&&t.canRun(),h=()=>lC(t.networkMode)&&t.canRun(),m=v=>{var _;r||(r=!0,(_=t.onSuccess)==null||_.call(t,v),s==null||s(),i.resolve(v))},p=v=>{var _;r||(r=!0,(_=t.onError)==null||_.call(t,v),s==null||s(),i.reject(v))},g=()=>new Promise(v=>{var _;s=b=>{(r||u())&&v(b)},(_=t.onPause)==null||_.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),w=()=>{if(r)return;let v;const _=n===0?t.initialPromise:void 0;try{v=_??t.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(m).catch(b=>{var M;if(r)return;const x=t.retry??(gm?0:3),S=t.retryDelay??CM,j=typeof S=="function"?S(n,b):S,D=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(e||!D){p(b);return}n++,(M=t.onFail)==null||M.call(t,n,b),wM(j).then(()=>u()?void 0:g()).then(()=>{e?p(b):w()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?w():g().then(w),i)}}function kM(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Sn=kM(),Ro,TN,dC=(TN=class{constructor(){Ge(this,Ro)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yM(this.gcTime)&&ke(this,Ro,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(gm?1/0:5*60*1e3))}clearGcTimeout(){K(this,Ro)&&(clearTimeout(K(this,Ro)),ke(this,Ro,void 0))}},Ro=new WeakMap,TN),Ja,Za,hr,un,Au,Do,Rr,As,CN,jM=(CN=class extends dC{constructor(n){super();Ge(this,Rr);Ge(this,Ja);Ge(this,Za);Ge(this,hr);Ge(this,un);Ge(this,Au);Ge(this,Do);ke(this,Do,!1),ke(this,Au,n.defaultOptions),this.setOptions(n.options),this.observers=[],ke(this,hr,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ke(this,Ja,AM(this.options)),this.state=n.state??K(this,Ja),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,un))==null?void 0:n.promise}setOptions(n){this.options={...K(this,Au),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,hr).remove(this)}setData(n,r){const s=bM(this.state.data,n,this.options);return on(this,Rr,As).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){on(this,Rr,As).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,un))==null?void 0:s.promise;return(i=K(this,un))==null||i.cancel(n),r?r.then(Pr).catch(Pr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,Ja))}isActive(){return this.observers.some(n=>xM(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!vM(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,un))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,un))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,hr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,un)&&(K(this,Do)?K(this,un).cancel({revert:!0}):K(this,un).cancelRetry()),this.scheduleGc()),K(this,hr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||on(this,Rr,As).call(this,{type:"invalidate"})}fetch(n,r){var u,h,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,un))return K(this,un).continueRetry(),K(this,un).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(g=>g.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(ke(this,Do,!0),s.signal)})},a=()=>{const p=oC(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),ke(this,Do,!1),this.options.persister?this.options.persister(p,g,this):p(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),ke(this,Za,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&on(this,Rr,As).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const c=p=>{var g,w,v,_;dg(p)&&p.silent||on(this,Rr,As).call(this,{type:"error",error:p}),dg(p)||((w=(g=K(this,hr).config).onError)==null||w.call(g,p,this),(_=(v=K(this,hr).config).onSettled)==null||_.call(v,this.state.data,p,this)),this.scheduleGc()};return ke(this,un,uC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var g,w,v,_;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(b){c(b);return}(w=(g=K(this,hr).config).onSuccess)==null||w.call(g,p,this),(_=(v=K(this,hr).config).onSettled)==null||_.call(v,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,g)=>{on(this,Rr,As).call(this,{type:"failed",failureCount:p,error:g})},onPause:()=>{on(this,Rr,As).call(this,{type:"pause"})},onContinue:()=>{on(this,Rr,As).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),K(this,un).start()}},Ja=new WeakMap,Za=new WeakMap,hr=new WeakMap,un=new WeakMap,Au=new WeakMap,Do=new WeakMap,Rr=new WeakSet,As=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...IM(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return dg(i)&&i.revert&&K(this,Za)?{...K(this,Za),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Sn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,hr).notify({query:this,type:"updated",action:n})})},CN);function IM(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:lC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function AM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var ls,kN,PM=(kN=class extends pm{constructor(e={}){super();Ge(this,ls);this.config=e,ke(this,ls,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Rx(s,n);let a=this.get(i);return a||(a=new jM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){K(this,ls).has(e.queryHash)||(K(this,ls).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,ls).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,ls).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Sn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,ls).get(e)}getAll(){return[...K(this,ls).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>O1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>O1(e,r)):n}notify(e){Sn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Sn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Sn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},ls=new WeakMap,kN),cs,wn,Mo,us,mi,jN,RM=(jN=class extends dC{constructor(n){super();Ge(this,us);Ge(this,cs);Ge(this,wn);Ge(this,Mo);this.mutationId=n.mutationId,ke(this,wn,n.mutationCache),ke(this,cs,[]),this.state=n.state||DM(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,cs).includes(n)||(K(this,cs).push(n),this.clearGcTimeout(),K(this,wn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ke(this,cs,K(this,cs).filter(r=>r!==n)),this.scheduleGc(),K(this,wn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,cs).length||(this.state.status==="pending"?this.scheduleGc():K(this,wn).remove(this))}continue(){var n;return((n=K(this,Mo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,a,l,c,u,h,m,p,g,w,v,_,b,x,S,j,D,M,N,C;ke(this,Mo,uC({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(T,k)=>{on(this,us,mi).call(this,{type:"failed",failureCount:T,error:k})},onPause:()=>{on(this,us,mi).call(this,{type:"pause"})},onContinue:()=>{on(this,us,mi).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,wn).canRun(this)}));const r=this.state.status==="pending",s=!K(this,Mo).canStart();try{if(!r){on(this,us,mi).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(i=K(this,wn).config).onMutate)==null?void 0:a.call(i,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&on(this,us,mi).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const T=await K(this,Mo).start();return await((h=(u=K(this,wn).config).onSuccess)==null?void 0:h.call(u,T,n,this.state.context,this)),await((p=(m=this.options).onSuccess)==null?void 0:p.call(m,T,n,this.state.context)),await((w=(g=K(this,wn).config).onSettled)==null?void 0:w.call(g,T,null,this.state.variables,this.state.context,this)),await((_=(v=this.options).onSettled)==null?void 0:_.call(v,T,null,n,this.state.context)),on(this,us,mi).call(this,{type:"success",data:T}),T}catch(T){try{throw await((x=(b=K(this,wn).config).onError)==null?void 0:x.call(b,T,n,this.state.context,this)),await((j=(S=this.options).onError)==null?void 0:j.call(S,T,n,this.state.context)),await((M=(D=K(this,wn).config).onSettled)==null?void 0:M.call(D,void 0,T,this.state.variables,this.state.context,this)),await((C=(N=this.options).onSettled)==null?void 0:C.call(N,void 0,T,n,this.state.context)),T}finally{on(this,us,mi).call(this,{type:"error",error:T})}}finally{K(this,wn).runNext(this)}}},cs=new WeakMap,wn=new WeakMap,Mo=new WeakMap,us=new WeakSet,mi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Sn.batch(()=>{K(this,cs).forEach(s=>{s.onMutationUpdate(n)}),K(this,wn).notify({mutation:this,type:"updated",action:n})})},jN);function DM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gn,Pu,IN,MM=(IN=class extends pm{constructor(e={}){super();Ge(this,Gn);Ge(this,Pu);this.config=e,ke(this,Gn,new Map),ke(this,Pu,Date.now())}build(e,n,r){const s=new RM({mutationCache:this,mutationId:++Cd(this,Pu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Wd(e),r=K(this,Gn).get(n)??[];r.push(e),K(this,Gn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Wd(e);if(K(this,Gn).has(n)){const s=(r=K(this,Gn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?K(this,Gn).delete(n):K(this,Gn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=K(this,Gn).get(Wd(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=K(this,Gn).get(Wd(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Sn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...K(this,Gn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>L1(n,r))}findAll(e={}){return this.getAll().filter(n=>L1(e,n))}notify(e){Sn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Sn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Pr))))}},Gn=new WeakMap,Pu=new WeakMap,IN);function Wd(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function z1(t){return{onFetch:(e,n)=>{var h,m,p,g,w;const r=e.options,s=(p=(m=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],a=((w=e.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},b=oC(e.options,e.fetchOptions),x=async(S,j,D)=>{if(v)return Promise.reject();if(j==null&&S.pages.length)return Promise.resolve(S);const M={queryKey:e.queryKey,pageParam:j,direction:D?"backward":"forward",meta:e.options.meta};_(M);const N=await b(M),{maxPages:C}=e.options,T=D?SM:_M;return{pages:T(S.pages,N,C),pageParams:T(S.pageParams,j,C)}};if(s&&i.length){const S=s==="backward",j=S?OM:U1,D={pages:i,pageParams:a},M=j(r,D);l=await x(D,M,S)}else{const S=t??i.length;do{const j=c===0?a[0]??r.initialPageParam:U1(r,l);if(c>0&&j==null)break;l=await x(l,j),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>{var v,_;return(_=(v=e.options).persister)==null?void 0:_.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function U1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function OM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var wt,Ti,Ci,el,tl,ki,nl,rl,AN,LM=(AN=class{constructor(t={}){Ge(this,wt);Ge(this,Ti);Ge(this,Ci);Ge(this,el);Ge(this,tl);Ge(this,ki);Ge(this,nl);Ge(this,rl);ke(this,wt,t.queryCache||new PM),ke(this,Ti,t.mutationCache||new MM),ke(this,Ci,t.defaultOptions||{}),ke(this,el,new Map),ke(this,tl,new Map),ke(this,ki,0)}mount(){Cd(this,ki)._++,K(this,ki)===1&&(ke(this,nl,aC.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,wt).onFocus())})),ke(this,rl,df.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,wt).onOnline())})))}unmount(){var t,e;Cd(this,ki)._--,K(this,ki)===0&&((t=K(this,nl))==null||t.call(this),ke(this,nl,void 0),(e=K(this,rl))==null||e.call(this),ke(this,rl,void 0))}isFetching(t){return K(this,wt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,Ti).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,wt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=K(this,wt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(M1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return K(this,wt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,wt).get(r.queryHash),i=s==null?void 0:s.state.data,a=gM(e,i);if(a!==void 0)return K(this,wt).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return Sn.batch(()=>K(this,wt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,wt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,wt);Sn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,wt),r={type:"active",...t};return Sn.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Sn.batch(()=>K(this,wt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Pr).catch(Pr)}invalidateQueries(t={},e={}){return Sn.batch(()=>{if(K(this,wt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Sn.batch(()=>K(this,wt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Pr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Pr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,wt).build(this,e);return n.isStaleByTime(M1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Pr).catch(Pr)}fetchInfiniteQuery(t){return t.behavior=z1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Pr).catch(Pr)}ensureInfiniteQueryData(t){return t.behavior=z1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return df.isOnline()?K(this,Ti).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,wt)}getMutationCache(){return K(this,Ti)}getDefaultOptions(){return K(this,Ci)}setDefaultOptions(t){ke(this,Ci,t)}setQueryDefaults(t,e){K(this,el).set(pu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,el).values()];let n={};return e.forEach(r=>{gu(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){K(this,tl).set(pu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,tl).values()];let n={};return e.forEach(r=>{gu(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,Ci).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Rx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Dx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,Ci).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,wt).clear(),K(this,Ti).clear()}},wt=new WeakMap,Ti=new WeakMap,Ci=new WeakMap,el=new WeakMap,tl=new WeakMap,ki=new WeakMap,nl=new WeakMap,rl=new WeakMap,AN),VM=f.createContext(void 0),FM=({client:t,children:e})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(VM.Provider,{value:t,children:e}));async function zM(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const UM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await zM(n),await n.json())},$M=new LM({defaultOptions:{queries:{queryFn:UM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),BM=1,HM=1e6;let hg=0;function WM(){return hg=(hg+1)%Number.MAX_SAFE_INTEGER,hg.toString()}const fg=new Map,$1=t=>{if(fg.has(t))return;const e=setTimeout(()=>{fg.delete(t),Vc({type:"REMOVE_TOAST",toastId:t})},HM);fg.set(t,e)},qM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,BM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?$1(n):t.toasts.forEach(r=>{$1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},_h=[];let Sh={toasts:[]};function Vc(t){Sh=qM(Sh,t),_h.forEach(e=>{e(Sh)})}function GM({...t}){const e=WM(),n=s=>Vc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Vc({type:"DISMISS_TOAST",toastId:e});return Vc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function lo(){const[t,e]=f.useState(Sh);return f.useEffect(()=>(_h.push(e),()=>{const n=_h.indexOf(e);n>-1&&_h.splice(n,1)}),[t]),{...t,toast:GM,dismiss:n=>Vc({type:"DISMISS_TOAST",toastId:n})}}function pe(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function B1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function hC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=B1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():B1(t[s],null)}}}}function Pe(...t){return f.useCallback(hC(...t),t)}function KM(t,e){const n=f.createContext(e),r=i=>{const{children:a,...l}=i,c=f.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(i){const a=f.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function lr(t,e=[]){let n=[];function r(i,a){const l=f.createContext(a),c=n.length;n=[...n,a];const u=m=>{var b;const{scope:p,children:g,...w}=m,v=((b=p==null?void 0:p[t])==null?void 0:b[c])||l,_=f.useMemo(()=>w,Object.values(w));return o.jsx(v.Provider,{value:_,children:g})};u.displayName=i+"Provider";function h(m,p){var v;const g=((v=p==null?void 0:p[t])==null?void 0:v[c])||l,w=f.useContext(g);if(w)return w;if(a!==void 0)return a;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(a=>f.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return f.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,QM(s,...e)]}function QM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(i)[`__scope${u}`];return{...l,...m}},{});return f.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function qo(t){const e=YM(t),n=f.forwardRef((r,s)=>{const{children:i,...a}=r,l=f.Children.toArray(i),c=l.find(JM);if(c){const u=c.props.children,h=l.map(m=>m===c?f.Children.count(u)>1?f.Children.only(null):f.isValidElement(u)?u.props.children:null:m);return o.jsx(e,{...a,ref:s,children:f.isValidElement(u)?f.cloneElement(u,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var XM=qo("Slot");function YM(t){const e=f.forwardRef((n,r)=>{const{children:s,...i}=n;if(f.isValidElement(s)){const a=eO(s),l=ZM(i,s.props);return s.type!==f.Fragment&&(l.ref=r?hC(r,a):a),f.cloneElement(s,l)}return f.Children.count(s)>1?f.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var fC=Symbol("radix.slottable");function mC(t){const e=({children:n})=>o.jsx(o.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=fC,e}function JM(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===fC}function ZM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function eO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Mx(t){const e=t+"CollectionProvider",[n,r]=lr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:_,children:b}=v,x=Ie.useRef(null),S=Ie.useRef(new Map).current;return o.jsx(s,{scope:_,itemMap:S,collectionRef:x,children:b})};a.displayName=e;const l=t+"CollectionSlot",c=qo(l),u=Ie.forwardRef((v,_)=>{const{scope:b,children:x}=v,S=i(l,b),j=Pe(_,S.collectionRef);return o.jsx(c,{ref:j,children:x})});u.displayName=l;const h=t+"CollectionItemSlot",m="data-radix-collection-item",p=qo(h),g=Ie.forwardRef((v,_)=>{const{scope:b,children:x,...S}=v,j=Ie.useRef(null),D=Pe(_,j),M=i(h,b);return Ie.useEffect(()=>(M.itemMap.set(j,{ref:j,...S}),()=>void M.itemMap.delete(j))),o.jsx(p,{[m]:"",ref:D,children:x})});g.displayName=h;function w(v){const _=i(t+"CollectionConsumer",v);return Ie.useCallback(()=>{const x=_.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${m}]`));return Array.from(_.itemMap.values()).sort((M,N)=>S.indexOf(M.ref.current)-S.indexOf(N.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},w,r]}var tO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ve=tO.reduce((t,e)=>{const n=qo(`Primitive.${e}`),r=f.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function pC(t,e){t&&wr.flushSync(()=>t.dispatchEvent(e))}function _t(t){const e=f.useRef(t);return f.useEffect(()=>{e.current=t}),f.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function nO(t,e=globalThis==null?void 0:globalThis.document){const n=_t(t);f.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var rO="DismissableLayer",Ly="dismissableLayer.update",sO="dismissableLayer.pointerDownOutside",iO="dismissableLayer.focusOutside",H1,gC=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Dl=f.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=f.useContext(gC),[h,m]=f.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=f.useState({}),w=Pe(e,N=>m(N)),v=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(_),x=h?v.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,j=x>=b,D=aO(N=>{const C=N.target,T=[...u.branches].some(k=>k.contains(C));!j||T||(s==null||s(N),a==null||a(N),N.defaultPrevented||l==null||l())},p),M=lO(N=>{const C=N.target;[...u.branches].some(k=>k.contains(C))||(i==null||i(N),a==null||a(N),N.defaultPrevented||l==null||l())},p);return nO(N=>{x===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},p),f.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(H1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),W1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=H1)}},[h,p,n,u]),f.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),W1())},[h,u]),f.useEffect(()=>{const N=()=>g({});return document.addEventListener(Ly,N),()=>document.removeEventListener(Ly,N)},[]),o.jsx(ve.div,{...c,ref:w,style:{pointerEvents:S?j?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,M.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,D.onPointerDownCapture)})});Dl.displayName=rO;var oO="DismissableLayerBranch",yC=f.forwardRef((t,e)=>{const n=f.useContext(gC),r=f.useRef(null),s=Pe(e,r);return f.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(ve.div,{...t,ref:s})});yC.displayName=oO;function aO(t,e=globalThis==null?void 0:globalThis.document){const n=_t(t),r=f.useRef(!1),s=f.useRef(()=>{});return f.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){vC(sO,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function lO(t,e=globalThis==null?void 0:globalThis.document){const n=_t(t),r=f.useRef(!1);return f.useEffect(()=>{const s=i=>{i.target&&!r.current&&vC(iO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function W1(){const t=new CustomEvent(Ly);document.dispatchEvent(t)}function vC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?pC(s,i):s.dispatchEvent(i)}var cO=Dl,uO=yC,At=globalThis!=null&&globalThis.document?f.useLayoutEffect:()=>{},dO="Portal",Ml=f.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=f.useState(!1);At(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?z5.createPortal(o.jsx(ve.div,{...r,ref:e}),a):null});Ml.displayName=dO;function hO(t,e){return f.useReducer((n,r)=>e[n][r]??n,t)}var Bn=t=>{const{present:e,children:n}=t,r=fO(e),s=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),i=Pe(r.ref,mO(s));return typeof n=="function"||r.isPresent?f.cloneElement(s,{ref:i}):null};Bn.displayName="Presence";function fO(t){const[e,n]=f.useState(),r=f.useRef({}),s=f.useRef(t),i=f.useRef("none"),a=t?"mounted":"unmounted",[l,c]=hO(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const u=qd(r.current);i.current=l==="mounted"?u:"none"},[l]),At(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=qd(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),At(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,m=g=>{const v=qd(r.current).includes(g.animationName);if(g.target===e&&v&&(c("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=g=>{g.target===e&&(i.current=qd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:f.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function qd(t){return(t==null?void 0:t.animationName)||"none"}function mO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Gs({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=pO({defaultProp:e,onChange:n}),i=t!==void 0,a=i?t:r,l=_t(n),c=f.useCallback(u=>{if(i){const m=typeof u=="function"?u(t):u;m!==t&&l(m)}else s(u)},[i,t,s,l]);return[a,c]}function pO({defaultProp:t,onChange:e}){const n=f.useState(t),[r]=n,s=f.useRef(r),i=_t(e);return f.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var gO="VisuallyHidden",Fu=f.forwardRef((t,e)=>o.jsx(ve.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Fu.displayName=gO;var yO=Fu,Ox="ToastProvider",[Lx,vO,xO]=Mx("Toast"),[xC,$G]=lr("Toast",[xO]),[wO,ym]=xC(Ox),wC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=f.useState(null),[u,h]=f.useState(0),m=f.useRef(!1),p=f.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ox}\`. Expected non-empty \`string\`.`),o.jsx(Lx.Provider,{scope:e,children:o.jsx(wO,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:f.useCallback(()=>h(g=>g+1),[]),onToastRemove:f.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:p,children:a})})};wC.displayName=Ox;var bC="ToastViewport",bO=["F8"],Vy="toast.viewportPause",Fy="toast.viewportResume",_C=f.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=bO,label:s="Notifications ({hotkey})",...i}=t,a=ym(bC,n),l=vO(n),c=f.useRef(null),u=f.useRef(null),h=f.useRef(null),m=f.useRef(null),p=Pe(e,m,a.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=a.toastCount>0;f.useEffect(()=>{const _=b=>{var S;r.length!==0&&r.every(j=>b[j]||b.code===j)&&((S=m.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),f.useEffect(()=>{const _=c.current,b=m.current;if(w&&_&&b){const x=()=>{if(!a.isClosePausedRef.current){const M=new CustomEvent(Vy);b.dispatchEvent(M),a.isClosePausedRef.current=!0}},S=()=>{if(a.isClosePausedRef.current){const M=new CustomEvent(Fy);b.dispatchEvent(M),a.isClosePausedRef.current=!1}},j=M=>{!_.contains(M.relatedTarget)&&S()},D=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",x),_.addEventListener("focusout",j),_.addEventListener("pointermove",x),_.addEventListener("pointerleave",D),window.addEventListener("blur",x),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",x),_.removeEventListener("focusout",j),_.removeEventListener("pointermove",x),_.removeEventListener("pointerleave",D),window.removeEventListener("blur",x),window.removeEventListener("focus",S)}}},[w,a.isClosePausedRef]);const v=f.useCallback(({tabbingDirection:_})=>{const x=l().map(S=>{const j=S.ref.current,D=[j,...DO(j)];return _==="forwards"?D:D.reverse()});return(_==="forwards"?x.reverse():x).flat()},[l]);return f.useEffect(()=>{const _=m.current;if(_){const b=x=>{var D,M,N;const S=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!S){const C=document.activeElement,T=x.shiftKey;if(x.target===_&&T){(D=u.current)==null||D.focus();return}const R=v({tabbingDirection:T?"backwards":"forwards"}),P=R.findIndex(O=>O===C);mg(R.slice(P+1))?x.preventDefault():T?(M=u.current)==null||M.focus():(N=h.current)==null||N.focus()}};return _.addEventListener("keydown",b),()=>_.removeEventListener("keydown",b)}},[l,v]),o.jsxs(uO,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&o.jsx(zy,{ref:u,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"forwards"});mg(_)}}),o.jsx(Lx.Slot,{scope:n,children:o.jsx(ve.ol,{tabIndex:-1,...i,ref:p})}),w&&o.jsx(zy,{ref:h,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"backwards"});mg(_)}})]})});_C.displayName=bC;var SC="ToastFocusProxy",zy=f.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=ym(SC,n);return o.jsx(Fu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});zy.displayName=SC;var vm="Toast",_O="toast.swipeStart",SO="toast.swipeMove",NO="toast.swipeCancel",EO="toast.swipeEnd",NC=f.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=Gs({prop:r,defaultProp:s,onChange:i});return o.jsx(Bn,{present:n||l,children:o.jsx(kO,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:_t(t.onPause),onResume:_t(t.onResume),onSwipeStart:pe(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(t.onSwipeMove,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:pe(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(t.onSwipeEnd,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});NC.displayName=vm;var[TO,CO]=xC(vm,{onClose(){}}),kO=f.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:p,onSwipeEnd:g,...w}=t,v=ym(vm,n),[_,b]=f.useState(null),x=Pe(e,O=>b(O)),S=f.useRef(null),j=f.useRef(null),D=s||v.duration,M=f.useRef(0),N=f.useRef(D),C=f.useRef(0),{onToastAdd:T,onToastRemove:k}=v,I=_t(()=>{var re;(_==null?void 0:_.contains(document.activeElement))&&((re=v.viewport)==null||re.focus()),a()}),R=f.useCallback(O=>{!O||O===1/0||(window.clearTimeout(C.current),M.current=new Date().getTime(),C.current=window.setTimeout(I,O))},[I]);f.useEffect(()=>{const O=v.viewport;if(O){const re=()=>{R(N.current),u==null||u()},J=()=>{const X=new Date().getTime()-M.current;N.current=N.current-X,window.clearTimeout(C.current),c==null||c()};return O.addEventListener(Vy,J),O.addEventListener(Fy,re),()=>{O.removeEventListener(Vy,J),O.removeEventListener(Fy,re)}}},[v.viewport,D,c,u,R]),f.useEffect(()=>{i&&!v.isClosePausedRef.current&&R(D)},[i,D,v.isClosePausedRef,R]),f.useEffect(()=>(T(),()=>k()),[T,k]);const P=f.useMemo(()=>_?AC(_):null,[_]);return v.viewport?o.jsxs(o.Fragment,{children:[P&&o.jsx(jO,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),o.jsx(TO,{scope:n,onClose:I,children:wr.createPortal(o.jsx(Lx.ItemSlot,{scope:n,children:o.jsx(cO,{asChild:!0,onEscapeKeyDown:pe(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:pe(t.onKeyDown,O=>{O.key==="Escape"&&(l==null||l(O.nativeEvent),O.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:pe(t.onPointerDown,O=>{O.button===0&&(S.current={x:O.clientX,y:O.clientY})}),onPointerMove:pe(t.onPointerMove,O=>{if(!S.current)return;const re=O.clientX-S.current.x,J=O.clientY-S.current.y,X=!!j.current,L=["left","right"].includes(v.swipeDirection),H=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,z=L?H(0,re):0,$=L?0:H(0,J),G=O.pointerType==="touch"?10:2,ee={x:z,y:$},ie={originalEvent:O,delta:ee};X?(j.current=ee,Gd(SO,m,ie,{discrete:!1})):q1(ee,v.swipeDirection,G)?(j.current=ee,Gd(_O,h,ie,{discrete:!1}),O.target.setPointerCapture(O.pointerId)):(Math.abs(re)>G||Math.abs(J)>G)&&(S.current=null)}),onPointerUp:pe(t.onPointerUp,O=>{const re=j.current,J=O.target;if(J.hasPointerCapture(O.pointerId)&&J.releasePointerCapture(O.pointerId),j.current=null,S.current=null,re){const X=O.currentTarget,L={originalEvent:O,delta:re};q1(re,v.swipeDirection,v.swipeThreshold)?Gd(EO,g,L,{discrete:!0}):Gd(NO,p,L,{discrete:!0}),X.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),jO=t=>{const{__scopeToast:e,children:n,...r}=t,s=ym(vm,e),[i,a]=f.useState(!1),[l,c]=f.useState(!1);return PO(()=>a(!0)),f.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(Ml,{asChild:!0,children:o.jsx(Fu,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},IO="ToastTitle",EC=f.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(ve.div,{...r,ref:e})});EC.displayName=IO;var AO="ToastDescription",TC=f.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(ve.div,{...r,ref:e})});TC.displayName=AO;var CC="ToastAction",kC=f.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(IC,{altText:n,asChild:!0,children:o.jsx(Vx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${CC}\`. Expected non-empty \`string\`.`),null)});kC.displayName=CC;var jC="ToastClose",Vx=f.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=CO(jC,n);return o.jsx(IC,{asChild:!0,children:o.jsx(ve.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,s.onClose)})})});Vx.displayName=jC;var IC=f.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function AC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),RO(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...AC(r))}}),e}function Gd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?pC(s,i):s.dispatchEvent(i)}var q1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function PO(t=()=>{}){const e=_t(t);At(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function RO(t){return t.nodeType===t.ELEMENT_NODE}function DO(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function mg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var MO=wC,PC=_C,RC=NC,DC=EC,MC=TC,OC=kC,LC=Vx;function VC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=VC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function FC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=VC(t))&&(r&&(r+=" "),r+=e);return r}const G1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,K1=FC,zu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return K1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],m=i==null?void 0:i[u];if(h===null)return null;const p=G1(h)||G1(m);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[m,p]=h;return p===void 0||(u[m]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:m,className:p,...g}=h;return Object.entries(g).every(w=>{let[v,_]=w;return Array.isArray(_)?_.includes({...i,...l}[v]):{...i,...l}[v]===_})?[...u,m,p]:u},[]);return K1(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=f.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>f.createElement("svg",{ref:c,...LO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:zC("lucide",s),...l},[...a.map(([u,h])=>f.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=(t,e)=>{const n=f.forwardRef(({className:r,...s},i)=>f.createElement(VO,{ref:i,iconNode:e,className:zC(`lucide-${OO(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=le("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xm=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=le("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wm=le("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=le("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=le("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=le("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=le("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=le("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=le("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=le("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=le("ChartNoAxesGantt",[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=le("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=le("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=le("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=le("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=le("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=le("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=le("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=le("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=le("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=le("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=le("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=le("Ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=le("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=le("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=le("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=le("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=le("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=le("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=le("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=le("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bm=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=le("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=le("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=le("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=le("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $x=le("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=le("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 4 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-8l4-2",key:"1vwozw"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 8-4 8 4",key:"1q0ilc"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=le("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=le("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=le("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=le("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=le("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=le("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=le("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=le("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=le("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=le("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),qx="-",p3=t=>{const e=y3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(qx);return l[0]===""&&l.length!==1&&l.shift(),JC(l,e)||g3(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},JC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?JC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(qx);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},e_=/^\[(.+)\]$/,g3=t=>{if(e_.test(t)){const e=e_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},y3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return x3(Object.entries(t.classGroups),n).forEach(([i,a])=>{Wy(a,r,i,e)}),r},Wy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:t_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(v3(s)){Wy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Wy(a,t_(e,i),n,r)})})},t_=(t,e)=>{let n=t;return e.split(qx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},v3=t=>t.isThemeGetter,x3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,w3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},ZC="!",b3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let u=0,h=0,m;for(let _=0;_<l.length;_++){let b=l[_];if(u===0){if(b===s&&(r||l.slice(_,_+i)===e)){c.push(l.slice(h,_)),h=_+i;continue}if(b==="/"){m=_;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(ZC),w=g?p.substring(1):p,v=m&&m>h?m-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:a}):a},_3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},S3=t=>({cache:w3(t.cacheSize),parseClassName:b3(t),...p3(t)}),N3=/\s+/,E3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(N3);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:h,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let w=!!g,v=r(w?p.substring(0,g):p);if(!v){if(!w){l=u+(l.length>0?" "+l:l);continue}if(v=r(p),!v){l=u+(l.length>0?" "+l:l);continue}w=!1}const _=_3(h).join(":"),b=m?_+ZC:_,x=b+v;if(i.includes(x))continue;i.push(x);const S=s(v,w);for(let j=0;j<S.length;++j){const D=S[j];i.push(b+D)}l=u+(l.length>0?" "+l:l)}return l};function T3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=ek(e))&&(r&&(r+=" "),r+=n);return r}const ek=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=ek(t[r]))&&(n&&(n+=" "),n+=e);return n};function C3(t,...e){let n,r,s,i=a;function a(c){const u=e.reduce((h,m)=>m(h),t());return n=S3(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=E3(c,n);return s(c,h),h}return function(){return i(T3.apply(null,arguments))}}const ct=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},tk=/^\[(?:([a-z-]+):)?(.+)\]$/i,k3=/^\d+\/\d+$/,j3=new Set(["px","full","screen"]),I3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,A3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,P3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,R3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,D3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Is=t=>Fa(t)||j3.has(t)||k3.test(t),di=t=>Ol(t,"length",$3),Fa=t=>!!t&&!Number.isNaN(Number(t)),pg=t=>Ol(t,"number",Fa),yc=t=>!!t&&Number.isInteger(Number(t)),M3=t=>t.endsWith("%")&&Fa(t.slice(0,-1)),Te=t=>tk.test(t),hi=t=>I3.test(t),O3=new Set(["length","size","percentage"]),L3=t=>Ol(t,O3,nk),V3=t=>Ol(t,"position",nk),F3=new Set(["image","url"]),z3=t=>Ol(t,F3,H3),U3=t=>Ol(t,"",B3),vc=()=>!0,Ol=(t,e,n)=>{const r=tk.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},$3=t=>A3.test(t)&&!P3.test(t),nk=()=>!1,B3=t=>R3.test(t),H3=t=>D3.test(t),W3=()=>{const t=ct("colors"),e=ct("spacing"),n=ct("blur"),r=ct("brightness"),s=ct("borderColor"),i=ct("borderRadius"),a=ct("borderSpacing"),l=ct("borderWidth"),c=ct("contrast"),u=ct("grayscale"),h=ct("hueRotate"),m=ct("invert"),p=ct("gap"),g=ct("gradientColorStops"),w=ct("gradientColorStopPositions"),v=ct("inset"),_=ct("margin"),b=ct("opacity"),x=ct("padding"),S=ct("saturate"),j=ct("scale"),D=ct("sepia"),M=ct("skew"),N=ct("space"),C=ct("translate"),T=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",Te,e],R=()=>[Te,e],P=()=>["",Is,di],O=()=>["auto",Fa,Te],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",Te],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],$=()=>[Fa,Te];return{cacheSize:500,separator:":",theme:{colors:[vc],spacing:[Is,di],blur:["none","",hi,Te],brightness:$(),borderColor:[t],borderRadius:["none","","full",hi,Te],borderSpacing:R(),borderWidth:P(),contrast:$(),grayscale:H(),hueRotate:$(),invert:H(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[M3,di],inset:I(),margin:I(),opacity:$(),padding:R(),saturate:$(),scale:$(),sepia:H(),skew:$(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",Te]}],container:["container"],columns:[{columns:[hi]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),Te]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",yc,Te]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Te]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",yc,Te]}],"grid-cols":[{"grid-cols":[vc]}],"col-start-end":[{col:["auto",{span:["full",yc,Te]},Te]}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":[vc]}],"row-start-end":[{row:["auto",{span:[yc,Te]},Te]}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Te]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Te]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Te,e]}],"min-w":[{"min-w":[Te,e,"min","max","fit"]}],"max-w":[{"max-w":[Te,e,"none","full","min","max","fit","prose",{screen:[hi]},hi]}],h:[{h:[Te,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Te,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Te,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Te,e,"auto","min","max","fit"]}],"font-size":[{text:["base",hi,di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pg]}],"font-family":[{font:[vc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Te]}],"line-clamp":[{"line-clamp":["none",Fa,pg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Is,Te]}],"list-image":[{"list-image":["none",Te]}],"list-style-type":[{list:["none","disc","decimal",Te]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Is,di]}],"underline-offset":[{"underline-offset":["auto",Is,Te]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Te]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Te]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),V3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",L3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},z3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[Is,Te]}],"outline-w":[{outline:[Is,di]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[Is,di]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",hi,U3]}],"shadow-color":[{shadow:[vc]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",hi,Te]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[S]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Te]}],duration:[{duration:$()}],ease:[{ease:["linear","in","out","in-out",Te]}],delay:[{delay:$()}],animate:[{animate:["none","spin","ping","pulse","bounce",Te]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[yc,Te]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Te]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Te]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Te]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Is,di,pg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},q3=C3(W3);function U(...t){return q3(FC(t))}const G3=MO,rk=f.forwardRef(({className:t,...e},n)=>o.jsx(PC,{ref:n,className:U("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));rk.displayName=PC.displayName;const K3=zu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sk=f.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(RC,{ref:r,className:U(K3({variant:e}),t),...n}));sk.displayName=RC.displayName;const Q3=f.forwardRef(({className:t,...e},n)=>o.jsx(OC,{ref:n,className:U("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Q3.displayName=OC.displayName;const ik=f.forwardRef(({className:t,...e},n)=>o.jsx(LC,{ref:n,className:U("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(bs,{className:"h-4 w-4"})}));ik.displayName=LC.displayName;const ok=f.forwardRef(({className:t,...e},n)=>o.jsx(DC,{ref:n,className:U("text-sm font-semibold",t),...e}));ok.displayName=DC.displayName;const ak=f.forwardRef(({className:t,...e},n)=>o.jsx(MC,{ref:n,className:U("text-sm opacity-90",t),...e}));ak.displayName=MC.displayName;function X3(){const{toasts:t}=lo();return o.jsxs(G3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return o.jsxs(sk,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(ok,{children:n}),r&&o.jsx(ak,{children:r})]}),s,o.jsx(ik,{})]},e)}),o.jsx(rk,{})]})}var Y3=BN[" useId ".trim().toString()]||(()=>{}),J3=0;function gs(t){const[e,n]=f.useState(Y3());return At(()=>{n(r=>r??String(J3++))},[t]),e?`radix-${e}`:""}const Z3=["top","right","bottom","left"],Qi=Math.min,Qn=Math.max,pf=Math.round,Kd=Math.floor,ys=t=>({x:t,y:t}),eL={left:"right",right:"left",bottom:"top",top:"bottom"},tL={start:"end",end:"start"};function qy(t,e,n){return Qn(t,Qi(e,n))}function Ks(t,e){return typeof t=="function"?t(e):t}function Qs(t){return t.split("-")[0]}function Ll(t){return t.split("-")[1]}function Gx(t){return t==="x"?"y":"x"}function Kx(t){return t==="y"?"height":"width"}function Xi(t){return["top","bottom"].includes(Qs(t))?"y":"x"}function Qx(t){return Gx(Xi(t))}function nL(t,e,n){n===void 0&&(n=!1);const r=Ll(t),s=Qx(t),i=Kx(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=gf(a)),[a,gf(a)]}function rL(t){const e=gf(t);return[Gy(t),e,Gy(e)]}function Gy(t){return t.replace(/start|end/g,e=>tL[e])}function sL(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function iL(t,e,n,r){const s=Ll(t);let i=sL(Qs(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(Gy)))),i}function gf(t){return t.replace(/left|right|bottom|top/g,e=>eL[e])}function oL(t){return{top:0,right:0,bottom:0,left:0,...t}}function lk(t){return typeof t!="number"?oL(t):{top:t,right:t,bottom:t,left:t}}function yf(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function n_(t,e,n){let{reference:r,floating:s}=t;const i=Xi(e),a=Qx(e),l=Kx(a),c=Qs(e),u=i==="y",h=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:m};break;case"left":g={x:r.x-s.width,y:m};break;default:g={x:r.x,y:r.y}}switch(Ll(e)){case"start":g[a]-=p*(n&&u?-1:1);break;case"end":g[a]+=p*(n&&u?-1:1);break}return g}const aL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:m}=n_(u,r,c),p=r,g={},w=0;for(let v=0;v<l.length;v++){const{name:_,fn:b}=l[v],{x,y:S,data:j,reset:D}=await b({x:h,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});h=x??h,m=S??m,g={...g,[_]:{...g[_],...j}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(p=D.placement),D.rects&&(u=D.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:h,y:m}=n_(u,p,c)),v=-1)}return{x:h,y:m,placement:p,strategy:s,middlewareData:g}};async function vu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:m="floating",altBoundary:p=!1,padding:g=0}=Ks(e,t),w=lk(g),_=l[p?m==="floating"?"reference":"floating":m],b=yf(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),x=m==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},D=yf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:S,strategy:c}):x);return{top:(b.top-D.top+w.top)/j.y,bottom:(D.bottom-b.bottom+w.bottom)/j.y,left:(b.left-D.left+w.left)/j.x,right:(D.right-b.right+w.right)/j.x}}const lL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Ks(t,e)||{};if(u==null)return{};const m=lk(h),p={x:n,y:r},g=Qx(s),w=Kx(g),v=await a.getDimensions(u),_=g==="y",b=_?"top":"left",x=_?"bottom":"right",S=_?"clientHeight":"clientWidth",j=i.reference[w]+i.reference[g]-p[g]-i.floating[w],D=p[g]-i.reference[g],M=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let N=M?M[S]:0;(!N||!await(a.isElement==null?void 0:a.isElement(M)))&&(N=l.floating[S]||i.floating[w]);const C=j/2-D/2,T=N/2-v[w]/2-1,k=Qi(m[b],T),I=Qi(m[x],T),R=k,P=N-v[w]-I,O=N/2-v[w]/2+C,re=qy(R,O,P),J=!c.arrow&&Ll(s)!=null&&O!==re&&i.reference[w]/2-(O<R?k:I)-v[w]/2<0,X=J?O<R?O-R:O-P:0;return{[g]:p[g]+X,data:{[g]:re,centerOffset:O-re-X,...J&&{alignmentOffset:X}},reset:J}}}),cL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,..._}=Ks(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=Qs(s),x=Xi(l),S=Qs(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),D=p||(S||!v?[gf(l)]:rL(l)),M=w!=="none";!p&&M&&D.push(...iL(l,v,w,j));const N=[l,...D],C=await vu(e,_),T=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&T.push(C[b]),m){const O=nL(s,a,j);T.push(C[O[0]],C[O[1]])}if(k=[...k,{placement:s,overflows:T}],!T.every(O=>O<=0)){var I,R;const O=(((I=i.flip)==null?void 0:I.index)||0)+1,re=N[O];if(re)return{data:{index:O,overflows:k},reset:{placement:re}};let J=(R=k.filter(X=>X.overflows[0]<=0).sort((X,L)=>X.overflows[1]-L.overflows[1])[0])==null?void 0:R.placement;if(!J)switch(g){case"bestFit":{var P;const X=(P=k.filter(L=>{if(M){const H=Xi(L.placement);return H===x||H==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(H=>H>0).reduce((H,z)=>H+z,0)]).sort((L,H)=>L[1]-H[1])[0])==null?void 0:P[0];X&&(J=X);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function r_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function s_(t){return Z3.some(e=>t[e]>=0)}const uL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ks(t,e);switch(r){case"referenceHidden":{const i=await vu(e,{...s,elementContext:"reference"}),a=r_(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:s_(a)}}}case"escaped":{const i=await vu(e,{...s,altBoundary:!0}),a=r_(i,n.floating);return{data:{escapedOffsets:a,escaped:s_(a)}}}default:return{}}}}};async function dL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Qs(n),l=Ll(n),c=Xi(n)==="y",u=["left","top"].includes(a)?-1:1,h=i&&c?-1:1,m=Ks(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:w}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof w=="number"&&(g=l==="end"?w*-1:w),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const hL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await dL(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},fL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:_=>{let{x:b,y:x}=_;return{x:b,y:x}}},...c}=Ks(t,e),u={x:n,y:r},h=await vu(e,c),m=Xi(Qs(s)),p=Gx(m);let g=u[p],w=u[m];if(i){const _=p==="y"?"top":"left",b=p==="y"?"bottom":"right",x=g+h[_],S=g-h[b];g=qy(x,g,S)}if(a){const _=m==="y"?"top":"left",b=m==="y"?"bottom":"right",x=w+h[_],S=w-h[b];w=qy(x,w,S)}const v=l.fn({...e,[p]:g,[m]:w});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:i,[m]:a}}}}}},mL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ks(t,e),h={x:n,y:r},m=Xi(s),p=Gx(m);let g=h[p],w=h[m];const v=Ks(l,e),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const S=p==="y"?"height":"width",j=i.reference[p]-i.floating[S]+_.mainAxis,D=i.reference[p]+i.reference[S]-_.mainAxis;g<j?g=j:g>D&&(g=D)}if(u){var b,x;const S=p==="y"?"width":"height",j=["top","left"].includes(Qs(s)),D=i.reference[m]-i.floating[S]+(j&&((b=a.offset)==null?void 0:b[m])||0)+(j?0:_.crossAxis),M=i.reference[m]+i.reference[S]+(j?0:((x=a.offset)==null?void 0:x[m])||0)-(j?_.crossAxis:0);w<D?w=D:w>M&&(w=M)}return{[p]:g,[m]:w}}}},pL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=Ks(t,e),h=await vu(e,u),m=Qs(s),p=Ll(s),g=Xi(s)==="y",{width:w,height:v}=i.floating;let _,b;m==="top"||m==="bottom"?(_=m,b=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(b=m,_=p==="end"?"top":"bottom");const x=v-h.top-h.bottom,S=w-h.left-h.right,j=Qi(v-h[_],x),D=Qi(w-h[b],S),M=!e.middlewareData.shift;let N=j,C=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=x),M&&!p){const k=Qn(h.left,0),I=Qn(h.right,0),R=Qn(h.top,0),P=Qn(h.bottom,0);g?C=w-2*(k!==0||I!==0?k+I:Qn(h.left,h.right)):N=v-2*(R!==0||P!==0?R+P:Qn(h.top,h.bottom))}await c({...e,availableWidth:C,availableHeight:N});const T=await a.getDimensions(l.floating);return w!==T.width||v!==T.height?{reset:{rects:!0}}:{}}}};function _m(){return typeof window<"u"}function Vl(t){return ck(t)?(t.nodeName||"").toLowerCase():"#document"}function rr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ts(t){var e;return(e=(ck(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ck(t){return _m()?t instanceof Node||t instanceof rr(t).Node:!1}function qr(t){return _m()?t instanceof Element||t instanceof rr(t).Element:!1}function _s(t){return _m()?t instanceof HTMLElement||t instanceof rr(t).HTMLElement:!1}function i_(t){return!_m()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof rr(t).ShadowRoot}function Bu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Gr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function gL(t){return["table","td","th"].includes(Vl(t))}function Sm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Xx(t){const e=Yx(),n=qr(t)?Gr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function yL(t){let e=Yi(t);for(;_s(e)&&!pl(e);){if(Xx(e))return e;if(Sm(e))return null;e=Yi(e)}return null}function Yx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function pl(t){return["html","body","#document"].includes(Vl(t))}function Gr(t){return rr(t).getComputedStyle(t)}function Nm(t){return qr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Yi(t){if(Vl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||i_(t)&&t.host||Ts(t);return i_(e)?e.host:e}function uk(t){const e=Yi(t);return pl(e)?t.ownerDocument?t.ownerDocument.body:t.body:_s(e)&&Bu(e)?e:uk(e)}function xu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=uk(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=rr(s);if(i){const l=Ky(a);return e.concat(a,a.visualViewport||[],Bu(s)?s:[],l&&n?xu(l):[])}return e.concat(s,xu(s,[],n))}function Ky(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function dk(t){const e=Gr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=_s(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=pf(n)!==i||pf(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Jx(t){return qr(t)?t:t.contextElement}function za(t){const e=Jx(t);if(!_s(e))return ys(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=dk(e);let a=(i?pf(n.width):n.width)/r,l=(i?pf(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const vL=ys(0);function hk(t){const e=rr(t);return!Yx()||!e.visualViewport?vL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function xL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==rr(t)?!1:e}function Go(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Jx(t);let a=ys(1);e&&(r?qr(r)&&(a=za(r)):a=za(t));const l=xL(i,n,r)?hk(i):ys(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,h=s.width/a.x,m=s.height/a.y;if(i){const p=rr(i),g=r&&qr(r)?rr(r):r;let w=p,v=Ky(w);for(;v&&r&&g!==w;){const _=za(v),b=v.getBoundingClientRect(),x=Gr(v),S=b.left+(v.clientLeft+parseFloat(x.paddingLeft))*_.x,j=b.top+(v.clientTop+parseFloat(x.paddingTop))*_.y;c*=_.x,u*=_.y,h*=_.x,m*=_.y,c+=S,u+=j,w=rr(v),v=Ky(w)}}return yf({width:h,height:m,x:c,y:u})}function Zx(t,e){const n=Nm(t).scrollLeft;return e?e.left+n:Go(Ts(t)).left+n}function fk(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Zx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function wL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=Ts(r),l=e?Sm(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=ys(1);const h=ys(0),m=_s(r);if((m||!m&&!i)&&((Vl(r)!=="body"||Bu(a))&&(c=Nm(r)),_s(r))){const g=Go(r);u=za(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=a&&!m&&!i?fk(a,c,!0):ys(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function bL(t){return Array.from(t.getClientRects())}function _L(t){const e=Ts(t),n=Nm(t),r=t.ownerDocument.body,s=Qn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Qn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Zx(t);const l=-n.scrollTop;return Gr(r).direction==="rtl"&&(a+=Qn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function SL(t,e){const n=rr(t),r=Ts(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Yx();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function NL(t,e){const n=Go(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=_s(t)?za(t):ys(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:a,height:l,x:c,y:u}}function o_(t,e,n){let r;if(e==="viewport")r=SL(t,n);else if(e==="document")r=_L(Ts(t));else if(qr(e))r=NL(e,n);else{const s=hk(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return yf(r)}function mk(t,e){const n=Yi(t);return n===e||!qr(n)||pl(n)?!1:Gr(n).position==="fixed"||mk(n,e)}function EL(t,e){const n=e.get(t);if(n)return n;let r=xu(t,[],!1).filter(l=>qr(l)&&Vl(l)!=="body"),s=null;const i=Gr(t).position==="fixed";let a=i?Yi(t):t;for(;qr(a)&&!pl(a);){const l=Gr(a),c=Xx(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Bu(a)&&!c&&mk(t,a))?r=r.filter(h=>h!==a):s=l,a=Yi(a)}return e.set(t,r),r}function TL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Sm(e)?[]:EL(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,h)=>{const m=o_(e,h,s);return u.top=Qn(m.top,u.top),u.right=Qi(m.right,u.right),u.bottom=Qi(m.bottom,u.bottom),u.left=Qn(m.left,u.left),u},o_(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function CL(t){const{width:e,height:n}=dk(t);return{width:e,height:n}}function kL(t,e,n){const r=_s(e),s=Ts(e),i=n==="fixed",a=Go(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=ys(0);if(r||!r&&!i)if((Vl(e)!=="body"||Bu(s))&&(l=Nm(e)),r){const p=Go(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Zx(s));const u=s&&!r&&!i?fk(s,l):ys(0),h=a.left+l.scrollLeft-c.x-u.x,m=a.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:a.width,height:a.height}}function gg(t){return Gr(t).position==="static"}function a_(t,e){if(!_s(t)||Gr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ts(t)===n&&(n=n.ownerDocument.body),n}function pk(t,e){const n=rr(t);if(Sm(t))return n;if(!_s(t)){let s=Yi(t);for(;s&&!pl(s);){if(qr(s)&&!gg(s))return s;s=Yi(s)}return n}let r=a_(t,e);for(;r&&gL(r)&&gg(r);)r=a_(r,e);return r&&pl(r)&&gg(r)&&!Xx(r)?n:r||yL(t)||n}const jL=async function(t){const e=this.getOffsetParent||pk,n=this.getDimensions,r=await n(t.floating);return{reference:kL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function IL(t){return Gr(t).direction==="rtl"}const AL={convertOffsetParentRelativeRectToViewportRelativeRect:wL,getDocumentElement:Ts,getClippingRect:TL,getOffsetParent:pk,getElementRects:jL,getClientRects:bL,getDimensions:CL,getScale:za,isElement:qr,isRTL:IL};function gk(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function PL(t,e){let n=null,r;const s=Ts(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:m,width:p,height:g}=u;if(l||e(),!p||!g)return;const w=Kd(m),v=Kd(s.clientWidth-(h+p)),_=Kd(s.clientHeight-(m+g)),b=Kd(h),S={rootMargin:-w+"px "+-v+"px "+-_+"px "+-b+"px",threshold:Qn(0,Qi(1,c))||1};let j=!0;function D(M){const N=M[0].intersectionRatio;if(N!==c){if(!j)return a();N?a(!1,N):r=setTimeout(()=>{a(!1,1e-7)},1e3)}N===1&&!gk(u,t.getBoundingClientRect())&&a(),j=!1}try{n=new IntersectionObserver(D,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,S)}n.observe(t)}return a(!0),i}function RL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Jx(t),h=s||i?[...u?xu(u):[],...xu(e)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const m=u&&l?PL(u,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let w,v=c?Go(t):null;c&&_();function _(){const b=Go(t);v&&!gk(v,b)&&n(),v=b,w=requestAnimationFrame(_)}return n(),()=>{var b;h.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),m==null||m(),(b=g)==null||b.disconnect(),g=null,c&&cancelAnimationFrame(w)}}const DL=hL,ML=fL,OL=cL,LL=pL,VL=uL,l_=lL,FL=mL,zL=(t,e,n)=>{const r=new Map,s={platform:AL,...n},i={...s.platform,_c:r};return aL(t,e,{...s,platform:i})};var Eh=typeof document<"u"?f.useLayoutEffect:f.useEffect;function vf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!vf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!vf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function yk(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function c_(t,e){const n=yk(t);return Math.round(e*n)/n}function yg(t){const e=f.useRef(t);return Eh(()=>{e.current=t}),e}function UL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,m]=f.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=f.useState(r);vf(p,r)||g(r);const[w,v]=f.useState(null),[_,b]=f.useState(null),x=f.useCallback(L=>{L!==M.current&&(M.current=L,v(L))},[]),S=f.useCallback(L=>{L!==N.current&&(N.current=L,b(L))},[]),j=i||w,D=a||_,M=f.useRef(null),N=f.useRef(null),C=f.useRef(h),T=c!=null,k=yg(c),I=yg(s),R=yg(u),P=f.useCallback(()=>{if(!M.current||!N.current)return;const L={placement:e,strategy:n,middleware:p};I.current&&(L.platform=I.current),zL(M.current,N.current,L).then(H=>{const z={...H,isPositioned:R.current!==!1};O.current&&!vf(C.current,z)&&(C.current=z,wr.flushSync(()=>{m(z)}))})},[p,e,n,I,R]);Eh(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,m(L=>({...L,isPositioned:!1})))},[u]);const O=f.useRef(!1);Eh(()=>(O.current=!0,()=>{O.current=!1}),[]),Eh(()=>{if(j&&(M.current=j),D&&(N.current=D),j&&D){if(k.current)return k.current(j,D,P);P()}},[j,D,P,k,T]);const re=f.useMemo(()=>({reference:M,floating:N,setReference:x,setFloating:S}),[x,S]),J=f.useMemo(()=>({reference:j,floating:D}),[j,D]),X=f.useMemo(()=>{const L={position:n,left:0,top:0};if(!J.floating)return L;const H=c_(J.floating,h.x),z=c_(J.floating,h.y);return l?{...L,transform:"translate("+H+"px, "+z+"px)",...yk(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:z}},[n,l,J.floating,h.x,h.y]);return f.useMemo(()=>({...h,update:P,refs:re,elements:J,floatingStyles:X}),[h,P,re,J,X])}const $L=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?l_({element:r.current,padding:s}).fn(n):{}:r?l_({element:r,padding:s}).fn(n):{}}}},BL=(t,e)=>({...DL(t),options:[t,e]}),HL=(t,e)=>({...ML(t),options:[t,e]}),WL=(t,e)=>({...FL(t),options:[t,e]}),qL=(t,e)=>({...OL(t),options:[t,e]}),GL=(t,e)=>({...LL(t),options:[t,e]}),KL=(t,e)=>({...VL(t),options:[t,e]}),QL=(t,e)=>({...$L(t),options:[t,e]});var XL="Arrow",vk=f.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(ve.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});vk.displayName=XL;var YL=vk;function xk(t){const[e,n]=f.useState(void 0);return At(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var e0="Popper",[wk,Fl]=lr(e0),[JL,bk]=wk(e0),_k=t=>{const{__scopePopper:e,children:n}=t,[r,s]=f.useState(null);return o.jsx(JL,{scope:e,anchor:r,onAnchorChange:s,children:n})};_k.displayName=e0;var Sk="PopperAnchor",Nk=f.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=bk(Sk,n),a=f.useRef(null),l=Pe(e,a);return f.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(ve.div,{...s,ref:l})});Nk.displayName=Sk;var t0="PopperContent",[ZL,e6]=wk(t0),Ek=f.forwardRef((t,e)=>{var V,Y,he,Q,te,ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:w,...v}=t,_=bk(t0,n),[b,x]=f.useState(null),S=Pe(e,Se=>x(Se)),[j,D]=f.useState(null),M=xk(j),N=(M==null?void 0:M.width)??0,C=(M==null?void 0:M.height)??0,T=r+(i!=="center"?"-"+i:""),k=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},I=Array.isArray(u)?u:[u],R=I.length>0,P={padding:k,boundary:I.filter(n6),altBoundary:R},{refs:O,floatingStyles:re,placement:J,isPositioned:X,middlewareData:L}=UL({strategy:"fixed",placement:T,whileElementsMounted:(...Se)=>RL(...Se,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[BL({mainAxis:s+C,alignmentAxis:a}),c&&HL({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?WL():void 0,...P}),c&&qL({...P}),GL({...P,apply:({elements:Se,rects:Le,availableWidth:ft,availableHeight:He})=>{const{width:Ze,height:rn}=Le.reference,Qe=Se.floating.style;Qe.setProperty("--radix-popper-available-width",`${ft}px`),Qe.setProperty("--radix-popper-available-height",`${He}px`),Qe.setProperty("--radix-popper-anchor-width",`${Ze}px`),Qe.setProperty("--radix-popper-anchor-height",`${rn}px`)}}),j&&QL({element:j,padding:l}),r6({arrowWidth:N,arrowHeight:C}),p&&KL({strategy:"referenceHidden",...P})]}),[H,z]=kk(J),$=_t(w);At(()=>{X&&($==null||$())},[X,$]);const G=(V=L.arrow)==null?void 0:V.x,ee=(Y=L.arrow)==null?void 0:Y.y,ie=((he=L.arrow)==null?void 0:he.centerOffset)!==0,[ne,oe]=f.useState();return At(()=>{b&&oe(window.getComputedStyle(b).zIndex)},[b]),o.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:X?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(Q=L.transformOrigin)==null?void 0:Q.x,(te=L.transformOrigin)==null?void 0:te.y].join(" "),...((ce=L.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(ZL,{scope:n,placedSide:H,onArrowChange:D,arrowX:G,arrowY:ee,shouldHideArrow:ie,children:o.jsx(ve.div,{"data-side":H,"data-align":z,...v,ref:S,style:{...v.style,animation:X?void 0:"none"}})})})});Ek.displayName=t0;var Tk="PopperArrow",t6={top:"bottom",right:"left",bottom:"top",left:"right"},Ck=f.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=e6(Tk,r),a=t6[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(YL,{...s,ref:n,style:{...s.style,display:"block"}})})});Ck.displayName=Tk;function n6(t){return t!==null}var r6=t=>({name:"transformOrigin",options:t,fn(e){var _,b,x;const{placement:n,rects:r,middlewareData:s}=e,a=((_=s.arrow)==null?void 0:_.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,h]=kk(n),m={start:"0%",center:"50%",end:"100%"}[h],p=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,g=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let w="",v="";return u==="bottom"?(w=a?m:`${p}px`,v=`${-c}px`):u==="top"?(w=a?m:`${p}px`,v=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,v=a?m:`${g}px`):u==="left"&&(w=`${r.floating.width+c}px`,v=a?m:`${g}px`),{data:{x:w,y:v}}}});function kk(t){const[e,n="center"]=t.split("-");return[e,n]}var n0=_k,Em=Nk,r0=Ek,s0=Ck,[Tm,BG]=lr("Tooltip",[Fl]),Cm=Fl(),jk="TooltipProvider",s6=700,Qy="tooltip.open",[i6,i0]=Tm(jk),Ik=t=>{const{__scopeTooltip:e,delayDuration:n=s6,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=f.useRef(!0),l=f.useRef(!1),c=f.useRef(0);return f.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(i6,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:f.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};Ik.displayName=jk;var km="Tooltip",[o6,Hu]=Tm(km),Ak=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:a,delayDuration:l}=t,c=i0(km,t.__scopeTooltip),u=Cm(e),[h,m]=f.useState(null),p=gs(),g=f.useRef(0),w=a??c.disableHoverableContent,v=l??c.delayDuration,_=f.useRef(!1),[b=!1,x]=Gs({prop:r,defaultProp:s,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(Qy))):c.onClose(),i==null||i(N)}}),S=f.useMemo(()=>b?_.current?"delayed-open":"instant-open":"closed",[b]),j=f.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,x(!0)},[x]),D=f.useCallback(()=>{window.clearTimeout(g.current),g.current=0,x(!1)},[x]),M=f.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,x(!0),g.current=0},v)},[v,x]);return f.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),o.jsx(n0,{...u,children:o.jsx(o6,{scope:e,contentId:p,open:b,stateAttribute:S,trigger:h,onTriggerChange:m,onTriggerEnter:f.useCallback(()=>{c.isOpenDelayedRef.current?M():j()},[c.isOpenDelayedRef,M,j]),onTriggerLeave:f.useCallback(()=>{w?D():(window.clearTimeout(g.current),g.current=0)},[D,w]),onOpen:j,onClose:D,disableHoverableContent:w,children:n})})};Ak.displayName=km;var Xy="TooltipTrigger",Pk=f.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Hu(Xy,n),i=i0(Xy,n),a=Cm(n),l=f.useRef(null),c=Pe(e,l,s.onTriggerChange),u=f.useRef(!1),h=f.useRef(!1),m=f.useCallback(()=>u.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(Em,{asChild:!0,...a,children:o.jsx(ve.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:pe(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:pe(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:pe(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:pe(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:pe(t.onBlur,s.onClose),onClick:pe(t.onClick,s.onClose)})})});Pk.displayName=Xy;var o0="TooltipPortal",[a6,l6]=Tm(o0,{forceMount:void 0}),Rk=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=Hu(o0,e);return o.jsx(a6,{scope:e,forceMount:n,children:o.jsx(Bn,{present:n||i.open,children:o.jsx(Ml,{asChild:!0,container:s,children:r})})})};Rk.displayName=o0;var gl="TooltipContent",Dk=f.forwardRef((t,e)=>{const n=l6(gl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=Hu(gl,t.__scopeTooltip);return o.jsx(Bn,{present:r||a.open,children:a.disableHoverableContent?o.jsx(Mk,{side:s,...i,ref:e}):o.jsx(c6,{side:s,...i,ref:e})})}),c6=f.forwardRef((t,e)=>{const n=Hu(gl,t.__scopeTooltip),r=i0(gl,t.__scopeTooltip),s=f.useRef(null),i=Pe(e,s),[a,l]=f.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:m}=r,p=f.useCallback(()=>{l(null),m(!1)},[m]),g=f.useCallback((w,v)=>{const _=w.currentTarget,b={x:w.clientX,y:w.clientY},x=m6(b,_.getBoundingClientRect()),S=p6(b,x),j=g6(v.getBoundingClientRect()),D=v6([...S,...j]);l(D),m(!0)},[m]);return f.useEffect(()=>()=>p(),[p]),f.useEffect(()=>{if(c&&h){const w=_=>g(_,h),v=_=>g(_,c);return c.addEventListener("pointerleave",w),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",w),h.removeEventListener("pointerleave",v)}}},[c,h,g,p]),f.useEffect(()=>{if(a){const w=v=>{const _=v.target,b={x:v.clientX,y:v.clientY},x=(c==null?void 0:c.contains(_))||(h==null?void 0:h.contains(_)),S=!y6(b,a);x?p():S&&(p(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,h,a,u,p]),o.jsx(Mk,{...t,ref:i})}),[u6,d6]=Tm(km,{isInside:!1}),h6=mC("TooltipContent"),Mk=f.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=Hu(gl,n),u=Cm(n),{onClose:h}=c;return f.useEffect(()=>(document.addEventListener(Qy,h),()=>document.removeEventListener(Qy,h)),[h]),f.useEffect(()=>{if(c.trigger){const m=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,h]),o.jsx(Dl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:o.jsxs(r0,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(h6,{children:r}),o.jsx(u6,{scope:n,isInside:!0,children:o.jsx(yO,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Dk.displayName=gl;var Ok="TooltipArrow",f6=f.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Cm(n);return d6(Ok,n).isInside?null:o.jsx(s0,{...s,...r,ref:e})});f6.displayName=Ok;function m6(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function p6(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function g6(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function y6(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,h=e[a].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function v6(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),x6(e)}function x6(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var w6=Ik,b6=Ak,_6=Pk,Lk=Rk,Vk=Dk;const jm=w6,Im=b6,Am=_6,Wu=f.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(Vk,{ref:r,sideOffset:e,className:U("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));Wu.displayName=Vk.displayName;const S6="modulepreload",N6=function(t){return"/"+t},u_={},Ia=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=N6(c),c in u_)return;u_[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":S6,u||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((p,g)=>{m.addEventListener("load",p),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},E6=()=>{};var d_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},T6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},zk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,m=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,a||(p=64)),r.push(n[h],n[m],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):T6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||m==null)throw new C6;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),m!==64){const w=u<<6&192|m;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const k6=function(t){const e=Fk(t);return zk.encodeByteArray(e,!0)},xf=function(t){return k6(t).replace(/\./g,"")},Uk=function(t){try{return zk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=()=>j6().__FIREBASE_DEFAULTS__,A6=()=>{if(typeof process>"u"||typeof d_>"u")return;const t=d_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},P6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Uk(t[1]);return e&&JSON.parse(e)},Pm=()=>{try{return E6()||I6()||A6()||P6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$k=t=>{var e,n;return(n=(e=Pm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},R6=t=>{const e=$k(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Bk=()=>{var t;return(t=Pm())==null?void 0:t.config},Hk=t=>{var e;return(e=Pm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Wk(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xf(JSON.stringify(n)),xf(JSON.stringify(a)),""].join(".")}const Uc={};function O6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Uc))Uc[e]?t.emulator.push(e):t.prod.push(e);return t}function L6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let h_=!1;function qk(t,e){if(typeof window>"u"||typeof document>"u"||!zl(window.location.host)||Uc[t]===e||Uc[t]||h_)return;Uc[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=O6().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{h_=!0,a()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=L6(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),_=document.getElementById(v)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;l(S),h(_,v);const j=u();c(x,b),S.append(x,w,_,j),document.body.appendChild(S)}i?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function F6(){var e;const t=(e=Pm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function z6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function U6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function B6(){const t=vn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function H6(){return!F6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W6(){try{return typeof indexedDB=="object"}catch{return!1}}function q6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6="FirebaseError";class ni extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=G6,Object.setPrototypeOf(this,ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qu.prototype.create)}}class qu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?K6(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new ni(s,l,r)}}function K6(t,e){return t.replace(Q6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Q6=/\{\$([^}]+)}/g;function X6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(f_(i)&&f_(a)){if(!Xs(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function f_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Y6(t,e){const n=new J6(t,e);return n.subscribe.bind(n)}class J6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Z6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=vg),s.error===void 0&&(s.error=vg),s.complete===void 0&&(s.complete=vg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Z6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t){return t&&t._delegate?t._delegate:t}class Ko{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new D6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nV(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Eo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Eo){return this.instances.has(e)}getOptions(e=Eo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Eo){return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tV(t){return t===Eo?void 0:t}function nV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const sV={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},iV=De.INFO,oV={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},aV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=oV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class a0{constructor(e){this.name=e,this._logLevel=iV,this._logHandler=aV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const lV=(t,e)=>e.some(n=>t instanceof n);let m_,p_;function cV(){return m_||(m_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uV(){return p_||(p_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gk=new WeakMap,Yy=new WeakMap,Kk=new WeakMap,xg=new WeakMap,l0=new WeakMap;function dV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Ui(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Gk.set(n,t)}).catch(()=>{}),l0.set(e,t),e}function hV(t){if(Yy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Yy.set(t,e)}let Jy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ui(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fV(t){Jy=t(Jy)}function mV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wg(this),e,...n);return Kk.set(r,e.sort?e.sort():[e]),Ui(r)}:uV().includes(t)?function(...e){return t.apply(wg(this),e),Ui(Gk.get(this))}:function(...e){return Ui(t.apply(wg(this),e))}}function pV(t){return typeof t=="function"?mV(t):(t instanceof IDBTransaction&&hV(t),lV(t,cV())?new Proxy(t,Jy):t)}function Ui(t){if(t instanceof IDBRequest)return dV(t);if(xg.has(t))return xg.get(t);const e=pV(t);return e!==t&&(xg.set(t,e),l0.set(e,t)),e}const wg=t=>l0.get(t);function gV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Ui(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Ui(a.result),c.oldVersion,c.newVersion,Ui(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const yV=["get","getKey","getAll","getAllKeys","count"],vV=["put","add","delete","clear"],bg=new Map;function g_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bg.get(e))return bg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=vV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||yV.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return bg.set(e,i),i}fV(t=>({...t,get:(e,n,r)=>g_(e,n)||t.get(e,n,r),has:(e,n)=>!!g_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zy="@firebase/app",y_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new a0("@firebase/app"),bV="@firebase/app-compat",_V="@firebase/analytics-compat",SV="@firebase/analytics",NV="@firebase/app-check-compat",EV="@firebase/app-check",TV="@firebase/auth",CV="@firebase/auth-compat",kV="@firebase/database",jV="@firebase/data-connect",IV="@firebase/database-compat",AV="@firebase/functions",PV="@firebase/functions-compat",RV="@firebase/installations",DV="@firebase/installations-compat",MV="@firebase/messaging",OV="@firebase/messaging-compat",LV="@firebase/performance",VV="@firebase/performance-compat",FV="@firebase/remote-config",zV="@firebase/remote-config-compat",UV="@firebase/storage",$V="@firebase/storage-compat",BV="@firebase/firestore",HV="@firebase/ai",WV="@firebase/firestore-compat",qV="firebase",GV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="[DEFAULT]",KV={[Zy]:"fire-core",[bV]:"fire-core-compat",[SV]:"fire-analytics",[_V]:"fire-analytics-compat",[EV]:"fire-app-check",[NV]:"fire-app-check-compat",[TV]:"fire-auth",[CV]:"fire-auth-compat",[kV]:"fire-rtdb",[jV]:"fire-data-connect",[IV]:"fire-rtdb-compat",[AV]:"fire-fn",[PV]:"fire-fn-compat",[RV]:"fire-iid",[DV]:"fire-iid-compat",[MV]:"fire-fcm",[OV]:"fire-fcm-compat",[LV]:"fire-perf",[VV]:"fire-perf-compat",[FV]:"fire-rc",[zV]:"fire-rc-compat",[UV]:"fire-gcs",[$V]:"fire-gcs-compat",[BV]:"fire-fst",[WV]:"fire-fst-compat",[HV]:"fire-vertex","fire-js":"fire-js",[qV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=new Map,QV=new Map,tv=new Map;function v_(t,e){try{t.container.addComponent(e)}catch(n){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yl(t){const e=t.name;if(tv.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;tv.set(e,t);for(const n of wf.values())v_(n,t);for(const n of QV.values())v_(n,t);return!0}function c0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Or(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$i=new qu("app","Firebase",XV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ko("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=GV;function Qk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ev,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw $i.create("bad-app-name",{appName:String(s)});if(n||(n=Bk()),!n)throw $i.create("no-options");const i=wf.get(s);if(i){if(Xs(n,i.options)&&Xs(r,i.config))return i;throw $i.create("duplicate-app",{appName:s})}const a=new rV(s);for(const c of tv.values())a.addComponent(c);const l=new YV(n,r,a);return wf.set(s,l),l}function Xk(t=ev){const e=wf.get(t);if(!e&&t===ev&&Bk())return Qk();if(!e)throw $i.create("no-app",{appName:t});return e}function Bi(t,e,n){let r=KV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(a.join(" "));return}yl(new Ko(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV="firebase-heartbeat-database",ZV=1,wu="firebase-heartbeat-store";let _g=null;function Yk(){return _g||(_g=gV(JV,ZV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wu)}catch(n){console.warn(n)}}}}).catch(t=>{throw $i.create("idb-open",{originalErrorMessage:t.message})})),_g}async function eF(t){try{const n=(await Yk()).transaction(wu),r=await n.objectStore(wu).get(Jk(t));return await n.done,r}catch(e){if(e instanceof ni)Ys.warn(e.message);else{const n=$i.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ys.warn(n.message)}}}async function x_(t,e){try{const r=(await Yk()).transaction(wu,"readwrite");await r.objectStore(wu).put(e,Jk(t)),await r.done}catch(n){if(n instanceof ni)Ys.warn(n.message);else{const r=$i.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ys.warn(r.message)}}}function Jk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=1024,nF=30;class rF{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iF(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=w_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>nF){const a=oF(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ys.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=w_(),{heartbeatsToSend:r,unsentEntries:s}=sF(this._heartbeatsCache.heartbeats),i=xf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ys.warn(n),""}}}function w_(){return new Date().toISOString().substring(0,10)}function sF(t,e=tF){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),b_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),b_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iF{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return W6()?q6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return x_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return x_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function b_(t){return xf(JSON.stringify({version:2,heartbeats:t})).length}function oF(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aF(t){yl(new Ko("platform-logger",e=>new xV(e),"PRIVATE")),yl(new Ko("heartbeat",e=>new rF(e),"PRIVATE")),Bi(Zy,y_,t),Bi(Zy,y_,"esm2020"),Bi("fire-js","")}aF("");function Zk(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lF=Zk,e2=new qu("auth","Firebase",Zk());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=new a0("@firebase/auth");function cF(t,...e){bf.logLevel<=De.WARN&&bf.warn(`Auth (${Ul}): ${t}`,...e)}function Th(t,...e){bf.logLevel<=De.ERROR&&bf.error(`Auth (${Ul}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(t,...e){throw d0(t,...e)}function $r(t,...e){return d0(t,...e)}function u0(t,e,n){const r={...lF(),[e]:n};return new qu("auth","Firebase",r).create(e,{appName:t.name})}function Fo(t){return u0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ss(t,"argument-error"),u0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function d0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return e2.create(t,...e)}function we(t,e,...n){if(!t)throw d0(e,...n)}function Ls(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Th(e),new Error(e)}function Js(t,e){t||Ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function dF(){return __()==="http:"||__()==="https:"}function __(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dF()||U6()||"connection"in navigator)?navigator.onLine:!0}function fF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.shortDelay=e,this.longDelay=n,Js(n>e,"Short delay should be less than long delay!"),this.isMobile=V6()||$6()}get(){return hF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t,e){Js(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gF=new Ku(3e4,6e4);function f0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function $l(t,e,n,r,s={}){return n2(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=Gu({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return z6()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&zl(t.emulatorConfig.host)&&(u.credentials="include"),t2.fetch()(await r2(t,t.config.apiHost,n,l),u)})}async function n2(t,e,n){t._canInitEmulator=!1;const r={...mF,...e};try{const s=new vF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Qd(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qd(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Qd(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Qd(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw u0(t,h,u);Ss(t,h)}}catch(s){if(s instanceof ni)throw s;Ss(t,"network-request-failed",{message:String(s)})}}async function yF(t,e,n,r,s={}){const i=await $l(t,e,n,r,s);return"mfaPendingCredential"in i&&Ss(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function r2(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?h0(t.config,s):`${t.config.apiScheme}://${s}`;return pF.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class vF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($r(this.auth,"network-request-failed")),gF.get())})}}function Qd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=$r(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xF(t,e){return $l(t,"POST","/v1/accounts:delete",e)}async function _f(t,e){return $l(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wF(t,e=!1){const n=Qt(t),r=await n.getIdToken(e),s=m0(r);we(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:$c(Sg(s.auth_time)),issuedAtTime:$c(Sg(s.iat)),expirationTime:$c(Sg(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Sg(t){return Number(t)*1e3}function m0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Th("JWT malformed, contained fewer than 3 sections"),null;try{const s=Uk(n);return s?JSON.parse(s):(Th("Failed to decode base64 JWT payload"),null)}catch(s){return Th("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function S_(t){const e=m0(t);return we(e,"internal-error"),we(typeof e.exp<"u","internal-error"),we(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ni&&bF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function bF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$c(this.lastLoginAt),this.creationTime=$c(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(t){var m;const e=t.auth,n=await t.getIdToken(),r=await bu(t,_f(e,{idToken:n}));we(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?s2(s.providerUserInfo):[],a=NF(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new rv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function SF(t){const e=Qt(t);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function s2(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EF(t,e){const n=await n2(t,{},async()=>{const r=Gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await r2(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&zl(t.emulatorConfig.host)&&(c.credentials="include"),t2.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TF(t,e){return $l(t,"POST","/v2/accounts:revokeToken",f0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){we(e.idToken,"internal-error"),we(typeof e.idToken<"u","internal-error"),we(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):S_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){we(e.length!==0,"internal-error");const n=S_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(we(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await EF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Ua;return r&&(we(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(we(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(we(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ua,this.toJSON())}_performRefresh(){return Ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,e){we(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new _F(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new rv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await bu(this,this.stsTokenManager.getToken(this.auth,e));return we(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wF(this,e)}reload(){return SF(this)}_assign(e){this!==e&&(we(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){we(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Or(this.auth.app))return Promise.reject(Fo(this.auth));const e=await this.getIdToken();return await bu(this,xF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:v}=n;we(m&&v,e,"internal-error");const _=Ua.fromJSON(this.name,v);we(typeof m=="string",e,"internal-error"),fi(r,e.name),fi(s,e.name),we(typeof p=="boolean",e,"internal-error"),we(typeof g=="boolean",e,"internal-error"),fi(i,e.name),fi(a,e.name),fi(l,e.name),fi(c,e.name),fi(u,e.name),fi(h,e.name);const b=new Vr({uid:m,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(b.providerData=w.map(x=>({...x}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ua;s.updateFromServerResponse(n);const i=new Vr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Sf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];we(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?s2(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ua;l.updateFromIdToken(r);const c=new Vr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_=new Map;function Vs(t){Js(t instanceof Function,"Expected a class definition");let e=N_.get(t);return e?(Js(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,N_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}i2.type="NONE";const E_=i2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t,e,n){return`firebase:${t}:${e}:${n}`}class $a{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ch(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ch("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await _f(this.auth,{idToken:e}).catch(()=>{});return n?Vr._fromGetAccountInfoResponse(this.auth,n,e):null}return Vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $a(Vs(E_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Vs(E_);const a=Ch(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(a);if(h){let m;if(typeof h=="string"){const p=await _f(e,{idToken:h}).catch(()=>{});if(!p)break;m=await Vr._fromGetAccountInfoResponse(e,p,h)}else m=Vr._fromJSON(e,h);u!==i&&(l=m),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new $a(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new $a(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(d2(e))return"Blackberry";if(h2(e))return"Webos";if(a2(e))return"Safari";if((e.includes("chrome/")||l2(e))&&!e.includes("edge/"))return"Chrome";if(u2(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function o2(t=vn()){return/firefox\//i.test(t)}function a2(t=vn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function l2(t=vn()){return/crios\//i.test(t)}function c2(t=vn()){return/iemobile/i.test(t)}function u2(t=vn()){return/android/i.test(t)}function d2(t=vn()){return/blackberry/i.test(t)}function h2(t=vn()){return/webos/i.test(t)}function p0(t=vn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function CF(t=vn()){var e;return p0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function kF(){return B6()&&document.documentMode===10}function f2(t=vn()){return p0(t)||u2(t)||h2(t)||d2(t)||/windows phone/i.test(t)||c2(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t,e=[]){let n;switch(t){case"Browser":n=T_(vn());break;case"Worker":n=`${T_(vn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ul}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IF(t,e={}){return $l(t,"GET","/v2/passwordPolicy",f0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF=6;class PF{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??AF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C_(this),this.idTokenSubscription=new C_(this),this.beforeStateQueue=new jF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e2,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await $a.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await _f(this,{idToken:e}),r=await Vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Or(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return we(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Or(this.app))return Promise.reject(Fo(this));const n=e?Qt(e):null;return n&&we(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&we(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Or(this.app)?Promise.reject(Fo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Or(this.app)?Promise.reject(Fo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IF(this),n=new PF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vs(e)||this._popupRedirectResolver;we(n,this,"argument-error"),this.redirectPersistenceManager=await $a.create(this,[Vs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(we(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return we(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m2(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&cF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Rm(t){return Qt(t)}class C_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Y6(n=>this.observer=n)}get next(){return we(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let g0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DF(t){g0=t}function MF(t){return g0.loadJS(t)}function OF(){return g0.gapiScript}function LF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(t,e){const n=c0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Xs(i,e??{}))return s;Ss(s,"already-initialized")}return n.initialize({options:e})}function FF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zF(t,e,n){const r=Rm(t);we(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=p2(e),{host:a,port:l}=UF(e),c=l===null?"":`:${l}`,u={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){we(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),we(Xs(u,r.config.emulator)&&Xs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,zl(a)?(Wk(`${i}//${a}${c}`),qk("Auth",!0)):$F()}function p2(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UF(t){const e=p2(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:k_(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:k_(a)}}}function k_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $F(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ls("not implemented")}_getIdTokenResponse(e){return Ls("not implemented")}_linkToIdToken(e,n){return Ls("not implemented")}_getReauthenticationResolver(e){return Ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ba(t,e){return yF(t,"POST","/v1/accounts:signInWithIdp",f0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF="http://localhost";class Qo extends g2{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ss("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new Qo(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ba(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ba(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ba(e,n)}buildRequest(){const e={requestUri:BF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Gu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends y0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends Qu{constructor(){super("facebook.com")}static credential(e){return Qo._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qo._fromParams({providerId:hn.PROVIDER_ID,signInMethod:hn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return hn.credentialFromTaggedObject(e)}static credentialFromError(e){return hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return hn.credential(n,r)}catch{return null}}}hn.GOOGLE_SIGN_IN_METHOD="google.com";hn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i extends Qu{constructor(){super("github.com")}static credential(e){return Qo._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch{return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com";_i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si extends Qu{constructor(){super("twitter.com")}static credential(e,n){return Qo._fromParams({providerId:Si.PROVIDER_ID,signInMethod:Si.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Si.credentialFromTaggedObject(e)}static credentialFromError(e){return Si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Si.credential(n,r)}catch{return null}}}Si.TWITTER_SIGN_IN_METHOD="twitter.com";Si.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Vr._fromIdTokenResponse(e,r,s),a=j_(r);return new vl({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=j_(r);return new vl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function j_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends ni{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nf(e,n,r,s)}}function y2(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nf._fromErrorAndOperation(t,i,e,r):i})}async function HF(t,e,n=!1){const r=await bu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WF(t,e,n=!1){const{auth:r}=t;if(Or(r.app))return Promise.reject(Fo(r));const s="reauthenticate";try{const i=await bu(t,y2(r,s,e,t),n);we(i.idToken,r,"internal-error");const a=m0(i.idToken);we(a,r,"internal-error");const{sub:l}=a;return we(t.uid===l,r,"user-mismatch"),vl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Ss(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qF(t,e,n=!1){if(Or(t.app))return Promise.reject(Fo(t));const r="signIn",s=await y2(t,r,e),i=await vl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function GF(t,e,n,r){return Qt(t).onIdTokenChanged(e,n,r)}function KF(t,e,n){return Qt(t).beforeAuthStateChanged(e,n)}function QF(t,e,n,r){return Qt(t).onAuthStateChanged(e,n,r)}function XF(t){return Qt(t).signOut()}const Ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YF=1e3,JF=10;class x2 extends v2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=f2(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);kF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,JF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},YF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}x2.type="LOCAL";const ZF=x2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2 extends v2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}w2.type="SESSION";const b2=w2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Dm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async u=>u(n.origin,i)),c=await e9(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t9{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const u=v0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(){return window}function n9(t){vs().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(){return typeof vs().WorkerGlobalScope<"u"&&typeof vs().importScripts=="function"}async function r9(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function s9(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function i9(){return _2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="firebaseLocalStorageDb",o9=1,Tf="firebaseLocalStorage",N2="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mm(t,e){return t.transaction([Tf],e?"readwrite":"readonly").objectStore(Tf)}function a9(){const t=indexedDB.deleteDatabase(S2);return new Xu(t).toPromise()}function sv(){const t=indexedDB.open(S2,o9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tf,{keyPath:N2})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tf)?e(r):(r.close(),await a9(),e(await sv()))})})}async function I_(t,e,n){const r=Mm(t,!0).put({[N2]:e,value:n});return new Xu(r).toPromise()}async function l9(t,e){const n=Mm(t,!1).get(e),r=await new Xu(n).toPromise();return r===void 0?null:r.value}function A_(t,e){const n=Mm(t,!0).delete(e);return new Xu(n).toPromise()}const c9=800,u9=3;class E2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>u9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dm._getInstance(i9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await r9(),!this.activeServiceWorker)return;this.sender=new t9(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||s9()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sv();return await I_(e,Ef,"1"),await A_(e,Ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>I_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>l9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>A_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Mm(s,!1).getAll();return new Xu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),c9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}E2.type="LOCAL";const d9=E2;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e){return e?Vs(e):(we(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends g2{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ba(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ba(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ba(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function h9(t){return qF(t.auth,new x0(t),t.bypassAuthState)}function f9(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),WF(n,new x0(t),t.bypassAuthState)}async function m9(t){const{auth:e,user:n}=t;return we(n,e,"internal-error"),HF(n,new x0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return h9;case"linkViaPopup":case"linkViaRedirect":return m9;case"reauthViaPopup":case"reauthViaRedirect":return f9;default:Ss(this.auth,"internal-error")}}resolve(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9=new Ku(2e3,1e4);async function Xd(t,e,n){if(Or(t.app))return Promise.reject($r(t,"operation-not-supported-in-this-environment"));const r=Rm(t);uF(t,e,y0);const s=T2(r,n);return new Io(r,"signInViaPopup",e,s).executeNotNull()}class Io extends C2{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Io.currentPopupAction&&Io.currentPopupAction.cancel(),Io.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return we(e,this.auth,"internal-error"),e}async onExecution(){Js(this.filter.length===1,"Popup operations only handle one event");const e=v0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject($r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Io.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,p9.get())};e()}}Io.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="pendingRedirect",kh=new Map;class y9 extends C2{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=kh.get(this.auth._key());if(!e){try{const r=await v9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}kh.set(this.auth._key(),e)}return this.bypassAuthState||kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function v9(t,e){const n=b9(e),r=w9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function x9(t,e){kh.set(t._key(),e)}function w9(t){return Vs(t._redirectPersistence)}function b9(t){return Ch(g9,t.config.apiKey,t.name)}async function _9(t,e,n=!1){if(Or(t.app))return Promise.reject(Fo(t));const r=Rm(t),s=T2(r,e),a=await new y9(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9=10*60*1e3;class N9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!k2(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError($r(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S9&&this.cachedEventUids.clear(),this.cachedEventUids.has(P_(e))}saveEventToCache(e){this.cachedEventUids.add(P_(e)),this.lastProcessedEventTime=Date.now()}}function P_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function k2({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return k2(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T9(t,e={}){return $l(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k9=/^https?/;async function j9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T9(t);for(const n of e)try{if(I9(n))return}catch{}Ss(t,"unauthorized-domain")}function I9(t){const e=nv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!k9.test(n))return!1;if(C9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9=new Ku(3e4,6e4);function R_(){const t=vs().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function P9(t){return new Promise((e,n)=>{var s,i,a;function r(){R_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{R_(),n($r(t,"network-request-failed"))},timeout:A9.get()})}if((i=(s=vs().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=vs().gapi)!=null&&a.load)r();else{const l=LF("iframefcb");return vs()[l]=()=>{gapi.load?r():n($r(t,"network-request-failed"))},MF(`${OF()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw jh=null,e})}let jh=null;function R9(t){return jh=jh||P9(t),jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=new Ku(5e3,15e3),M9="__/auth/iframe",O9="emulator/auth/iframe",L9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},V9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function F9(t){const e=t.config;we(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?h0(e,O9):`https://${t.config.authDomain}/${M9}`,r={apiKey:e.apiKey,appName:t.name,v:Ul},s=V9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Gu(r).slice(1)}`}async function z9(t){const e=await R9(t),n=vs().gapi;return we(n,t,"internal-error"),e.open({where:document.body,url:F9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:L9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=$r(t,"network-request-failed"),l=vs().setTimeout(()=>{i(a)},D9.get());function c(){vs().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$9=500,B9=600,H9="_blank",W9="http://localhost";class D_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function q9(t,e,n,r=$9,s=B9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...U9,width:r.toString(),height:s.toString(),top:i,left:a},u=vn().toLowerCase();n&&(l=l2(u)?H9:n),o2(u)&&(e=e||W9,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(CF(u)&&l!=="_self")return G9(e||"",l),new D_(null);const m=window.open(e||"",l,h);we(m,t,"popup-blocked");try{m.focus()}catch{}return new D_(m)}function G9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9="__/auth/handler",Q9="emulator/auth/handler",X9=encodeURIComponent("fac");async function M_(t,e,n,r,s,i){we(t.config.authDomain,t,"auth-domain-config-required"),we(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ul,eventId:s};if(e instanceof y0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",X6(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof Qu){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${X9}=${encodeURIComponent(c)}`:"";return`${Y9(t)}?${Gu(l).slice(1)}${u}`}function Y9({config:t}){return t.emulator?h0(t,Q9):`https://${t.authDomain}/${K9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="webStorageSupport";class J9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b2,this._completeRedirectFn=_9,this._overrideRedirectResult=x9}async _openPopup(e,n,r,s){var a;Js((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await M_(e,n,r,nv(),s);return q9(e,i,v0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await M_(e,n,r,nv(),s);return n9(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Js(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await z9(e),r=new N9(e);return n.register("authEvent",s=>(we(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ng,{type:Ng},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[Ng];i!==void 0&&n(!!i),Ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=j9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return f2()||a2()||p0()}}const Z9=J9;var O_="@firebase/auth",L_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){we(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nz(t){yl(new Ko("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;we(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m2(t)},u=new RF(r,s,i,c);return FF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),yl(new Ko("auth-internal",e=>{const n=Rm(e.getProvider("auth").getImmediate());return(r=>new ez(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Bi(O_,L_,tz(t)),Bi(O_,L_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz=5*60,sz=Hk("authIdTokenMaxAge")||rz;let V_=null;const iz=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sz)return;const s=n==null?void 0:n.token;V_!==s&&(V_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function oz(t=Xk()){const e=c0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VF(t,{popupRedirectResolver:Z9,persistence:[d9,ZF,b2]}),r=Hk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=iz(i.toString());KF(n,a,()=>a(n.currentUser)),GF(n,l=>a(l))}}const s=$k("auth");return s&&zF(n,`http://${s}`),n}function az(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}DF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=$r("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",az().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nz("Browser");var lz="firebase",cz="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi(lz,cz,"app");var F_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hi,j2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function T(){}T.prototype=C.prototype,N.F=C.prototype,N.prototype=new T,N.prototype.constructor=N,N.D=function(k,I,R){for(var P=Array(arguments.length-2),O=2;O<arguments.length;O++)P[O-2]=arguments[O];return C.prototype[I].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,C,T){T||(T=0);const k=Array(16);if(typeof C=="string")for(var I=0;I<16;++I)k[I]=C.charCodeAt(T++)|C.charCodeAt(T++)<<8|C.charCodeAt(T++)<<16|C.charCodeAt(T++)<<24;else for(I=0;I<16;++I)k[I]=C[T++]|C[T++]<<8|C[T++]<<16|C[T++]<<24;C=N.g[0],T=N.g[1],I=N.g[2];let R=N.g[3],P;P=C+(R^T&(I^R))+k[0]+3614090360&4294967295,C=T+(P<<7&4294967295|P>>>25),P=R+(I^C&(T^I))+k[1]+3905402710&4294967295,R=C+(P<<12&4294967295|P>>>20),P=I+(T^R&(C^T))+k[2]+606105819&4294967295,I=R+(P<<17&4294967295|P>>>15),P=T+(C^I&(R^C))+k[3]+3250441966&4294967295,T=I+(P<<22&4294967295|P>>>10),P=C+(R^T&(I^R))+k[4]+4118548399&4294967295,C=T+(P<<7&4294967295|P>>>25),P=R+(I^C&(T^I))+k[5]+1200080426&4294967295,R=C+(P<<12&4294967295|P>>>20),P=I+(T^R&(C^T))+k[6]+2821735955&4294967295,I=R+(P<<17&4294967295|P>>>15),P=T+(C^I&(R^C))+k[7]+4249261313&4294967295,T=I+(P<<22&4294967295|P>>>10),P=C+(R^T&(I^R))+k[8]+1770035416&4294967295,C=T+(P<<7&4294967295|P>>>25),P=R+(I^C&(T^I))+k[9]+2336552879&4294967295,R=C+(P<<12&4294967295|P>>>20),P=I+(T^R&(C^T))+k[10]+4294925233&4294967295,I=R+(P<<17&4294967295|P>>>15),P=T+(C^I&(R^C))+k[11]+2304563134&4294967295,T=I+(P<<22&4294967295|P>>>10),P=C+(R^T&(I^R))+k[12]+1804603682&4294967295,C=T+(P<<7&4294967295|P>>>25),P=R+(I^C&(T^I))+k[13]+4254626195&4294967295,R=C+(P<<12&4294967295|P>>>20),P=I+(T^R&(C^T))+k[14]+2792965006&4294967295,I=R+(P<<17&4294967295|P>>>15),P=T+(C^I&(R^C))+k[15]+1236535329&4294967295,T=I+(P<<22&4294967295|P>>>10),P=C+(I^R&(T^I))+k[1]+4129170786&4294967295,C=T+(P<<5&4294967295|P>>>27),P=R+(T^I&(C^T))+k[6]+3225465664&4294967295,R=C+(P<<9&4294967295|P>>>23),P=I+(C^T&(R^C))+k[11]+643717713&4294967295,I=R+(P<<14&4294967295|P>>>18),P=T+(R^C&(I^R))+k[0]+3921069994&4294967295,T=I+(P<<20&4294967295|P>>>12),P=C+(I^R&(T^I))+k[5]+3593408605&4294967295,C=T+(P<<5&4294967295|P>>>27),P=R+(T^I&(C^T))+k[10]+38016083&4294967295,R=C+(P<<9&4294967295|P>>>23),P=I+(C^T&(R^C))+k[15]+3634488961&4294967295,I=R+(P<<14&4294967295|P>>>18),P=T+(R^C&(I^R))+k[4]+3889429448&4294967295,T=I+(P<<20&4294967295|P>>>12),P=C+(I^R&(T^I))+k[9]+568446438&4294967295,C=T+(P<<5&4294967295|P>>>27),P=R+(T^I&(C^T))+k[14]+3275163606&4294967295,R=C+(P<<9&4294967295|P>>>23),P=I+(C^T&(R^C))+k[3]+4107603335&4294967295,I=R+(P<<14&4294967295|P>>>18),P=T+(R^C&(I^R))+k[8]+1163531501&4294967295,T=I+(P<<20&4294967295|P>>>12),P=C+(I^R&(T^I))+k[13]+2850285829&4294967295,C=T+(P<<5&4294967295|P>>>27),P=R+(T^I&(C^T))+k[2]+4243563512&4294967295,R=C+(P<<9&4294967295|P>>>23),P=I+(C^T&(R^C))+k[7]+1735328473&4294967295,I=R+(P<<14&4294967295|P>>>18),P=T+(R^C&(I^R))+k[12]+2368359562&4294967295,T=I+(P<<20&4294967295|P>>>12),P=C+(T^I^R)+k[5]+4294588738&4294967295,C=T+(P<<4&4294967295|P>>>28),P=R+(C^T^I)+k[8]+2272392833&4294967295,R=C+(P<<11&4294967295|P>>>21),P=I+(R^C^T)+k[11]+1839030562&4294967295,I=R+(P<<16&4294967295|P>>>16),P=T+(I^R^C)+k[14]+4259657740&4294967295,T=I+(P<<23&4294967295|P>>>9),P=C+(T^I^R)+k[1]+2763975236&4294967295,C=T+(P<<4&4294967295|P>>>28),P=R+(C^T^I)+k[4]+1272893353&4294967295,R=C+(P<<11&4294967295|P>>>21),P=I+(R^C^T)+k[7]+4139469664&4294967295,I=R+(P<<16&4294967295|P>>>16),P=T+(I^R^C)+k[10]+3200236656&4294967295,T=I+(P<<23&4294967295|P>>>9),P=C+(T^I^R)+k[13]+681279174&4294967295,C=T+(P<<4&4294967295|P>>>28),P=R+(C^T^I)+k[0]+3936430074&4294967295,R=C+(P<<11&4294967295|P>>>21),P=I+(R^C^T)+k[3]+3572445317&4294967295,I=R+(P<<16&4294967295|P>>>16),P=T+(I^R^C)+k[6]+76029189&4294967295,T=I+(P<<23&4294967295|P>>>9),P=C+(T^I^R)+k[9]+3654602809&4294967295,C=T+(P<<4&4294967295|P>>>28),P=R+(C^T^I)+k[12]+3873151461&4294967295,R=C+(P<<11&4294967295|P>>>21),P=I+(R^C^T)+k[15]+530742520&4294967295,I=R+(P<<16&4294967295|P>>>16),P=T+(I^R^C)+k[2]+3299628645&4294967295,T=I+(P<<23&4294967295|P>>>9),P=C+(I^(T|~R))+k[0]+4096336452&4294967295,C=T+(P<<6&4294967295|P>>>26),P=R+(T^(C|~I))+k[7]+1126891415&4294967295,R=C+(P<<10&4294967295|P>>>22),P=I+(C^(R|~T))+k[14]+2878612391&4294967295,I=R+(P<<15&4294967295|P>>>17),P=T+(R^(I|~C))+k[5]+4237533241&4294967295,T=I+(P<<21&4294967295|P>>>11),P=C+(I^(T|~R))+k[12]+1700485571&4294967295,C=T+(P<<6&4294967295|P>>>26),P=R+(T^(C|~I))+k[3]+2399980690&4294967295,R=C+(P<<10&4294967295|P>>>22),P=I+(C^(R|~T))+k[10]+4293915773&4294967295,I=R+(P<<15&4294967295|P>>>17),P=T+(R^(I|~C))+k[1]+2240044497&4294967295,T=I+(P<<21&4294967295|P>>>11),P=C+(I^(T|~R))+k[8]+1873313359&4294967295,C=T+(P<<6&4294967295|P>>>26),P=R+(T^(C|~I))+k[15]+4264355552&4294967295,R=C+(P<<10&4294967295|P>>>22),P=I+(C^(R|~T))+k[6]+2734768916&4294967295,I=R+(P<<15&4294967295|P>>>17),P=T+(R^(I|~C))+k[13]+1309151649&4294967295,T=I+(P<<21&4294967295|P>>>11),P=C+(I^(T|~R))+k[4]+4149444226&4294967295,C=T+(P<<6&4294967295|P>>>26),P=R+(T^(C|~I))+k[11]+3174756917&4294967295,R=C+(P<<10&4294967295|P>>>22),P=I+(C^(R|~T))+k[2]+718787259&4294967295,I=R+(P<<15&4294967295|P>>>17),P=T+(R^(I|~C))+k[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(I+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+I&4294967295,N.g[3]=N.g[3]+R&4294967295}r.prototype.v=function(N,C){C===void 0&&(C=N.length);const T=C-this.blockSize,k=this.C;let I=this.h,R=0;for(;R<C;){if(I==0)for(;R<=T;)s(this,N,R),R+=this.blockSize;if(typeof N=="string"){for(;R<C;)if(k[I++]=N.charCodeAt(R++),I==this.blockSize){s(this,k),I=0;break}}else for(;R<C;)if(k[I++]=N[R++],I==this.blockSize){s(this,k),I=0;break}}this.h=I,this.o+=C},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;C=this.o*8;for(var T=N.length-8;T<N.length;++T)N[T]=C&255,C/=256;for(this.v(N),N=Array(16),C=0,T=0;T<4;++T)for(let k=0;k<32;k+=8)N[C++]=this.g[T]>>>k&255;return N};function i(N,C){var T=l;return Object.prototype.hasOwnProperty.call(T,N)?T[N]:T[N]=C(N)}function a(N,C){this.h=C;const T=[];let k=!0;for(let I=N.length-1;I>=0;I--){const R=N[I]|0;k&&R==C||(T[I]=R,k=!1)}this.g=T}var l={};function c(N){return-128<=N&&N<128?i(N,function(C){return new a([C|0],C<0?-1:0)}):new a([N|0],N<0?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return m;if(N<0)return _(u(-N));const C=[];let T=1;for(let k=0;N>=T;k++)C[k]=N/T|0,T*=4294967296;return new a(C,0)}function h(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return _(h(N.substring(1),C));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=u(Math.pow(C,8));let k=m;for(let R=0;R<N.length;R+=8){var I=Math.min(8,N.length-R);const P=parseInt(N.substring(R,R+I),C);I<8?(I=u(Math.pow(C,I)),k=k.j(I).add(u(P))):(k=k.j(T),k=k.add(u(P)))}return k}var m=c(0),p=c(1),g=c(16777216);t=a.prototype,t.m=function(){if(v(this))return-_(this).m();let N=0,C=1;for(let T=0;T<this.g.length;T++){const k=this.i(T);N+=(k>=0?k:4294967296+k)*C,C*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(w(this))return"0";if(v(this))return"-"+_(this).toString(N);const C=u(Math.pow(N,6));var T=this;let k="";for(;;){const I=j(T,C).g;T=b(T,I.j(C));let R=((T.g.length>0?T.g[0]:T.h)>>>0).toString(N);if(T=I,w(T))return R+k;for(;R.length<6;)R="0"+R;k=R+k}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function w(N){if(N.h!=0)return!1;for(let C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function v(N){return N.h==-1}t.l=function(N){return N=b(this,N),v(N)?-1:w(N)?0:1};function _(N){const C=N.g.length,T=[];for(let k=0;k<C;k++)T[k]=~N.g[k];return new a(T,~N.h).add(p)}t.abs=function(){return v(this)?_(this):this},t.add=function(N){const C=Math.max(this.g.length,N.g.length),T=[];let k=0;for(let I=0;I<=C;I++){let R=k+(this.i(I)&65535)+(N.i(I)&65535),P=(R>>>16)+(this.i(I)>>>16)+(N.i(I)>>>16);k=P>>>16,R&=65535,P&=65535,T[I]=P<<16|R}return new a(T,T[T.length-1]&-2147483648?-1:0)};function b(N,C){return N.add(_(C))}t.j=function(N){if(w(this)||w(N))return m;if(v(this))return v(N)?_(this).j(_(N)):_(_(this).j(N));if(v(N))return _(this.j(_(N)));if(this.l(g)<0&&N.l(g)<0)return u(this.m()*N.m());const C=this.g.length+N.g.length,T=[];for(var k=0;k<2*C;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(let I=0;I<N.g.length;I++){const R=this.i(k)>>>16,P=this.i(k)&65535,O=N.i(I)>>>16,re=N.i(I)&65535;T[2*k+2*I]+=P*re,x(T,2*k+2*I),T[2*k+2*I+1]+=R*re,x(T,2*k+2*I+1),T[2*k+2*I+1]+=P*O,x(T,2*k+2*I+1),T[2*k+2*I+2]+=R*O,x(T,2*k+2*I+2)}for(N=0;N<C;N++)T[N]=T[2*N+1]<<16|T[2*N];for(N=C;N<2*C;N++)T[N]=0;return new a(T,0)};function x(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function S(N,C){this.g=N,this.h=C}function j(N,C){if(w(C))throw Error("division by zero");if(w(N))return new S(m,m);if(v(N))return C=j(_(N),C),new S(_(C.g),_(C.h));if(v(C))return C=j(N,_(C)),new S(_(C.g),C.h);if(N.g.length>30){if(v(N)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var T=p,k=C;k.l(N)<=0;)T=D(T),k=D(k);var I=M(T,1),R=M(k,1);for(k=M(k,2),T=M(T,2);!w(k);){var P=R.add(k);P.l(N)<=0&&(I=I.add(T),R=P),k=M(k,1),T=M(T,1)}return C=b(N,I.j(C)),new S(I,C)}for(I=m;N.l(C)>=0;){for(T=Math.max(1,Math.floor(N.m()/C.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),R=u(T),P=R.j(C);v(P)||P.l(N)>0;)T-=k,R=u(T),P=R.j(C);w(R)&&(R=p),I=I.add(R),N=b(N,P)}return new S(I,N)}t.B=function(N){return j(this,N).h},t.and=function(N){const C=Math.max(this.g.length,N.g.length),T=[];for(let k=0;k<C;k++)T[k]=this.i(k)&N.i(k);return new a(T,this.h&N.h)},t.or=function(N){const C=Math.max(this.g.length,N.g.length),T=[];for(let k=0;k<C;k++)T[k]=this.i(k)|N.i(k);return new a(T,this.h|N.h)},t.xor=function(N){const C=Math.max(this.g.length,N.g.length),T=[];for(let k=0;k<C;k++)T[k]=this.i(k)^N.i(k);return new a(T,this.h^N.h)};function D(N){const C=N.g.length+1,T=[];for(let k=0;k<C;k++)T[k]=N.i(k)<<1|N.i(k-1)>>>31;return new a(T,N.h)}function M(N,C){const T=C>>5;C%=32;const k=N.g.length-T,I=[];for(let R=0;R<k;R++)I[R]=C>0?N.i(R+T)>>>C|N.i(R+T+1)<<32-C:N.i(R+T);return new a(I,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,j2=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,Hi=a}).apply(typeof F_<"u"?F_:typeof self<"u"?self:typeof window<"u"?window:{});var Yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var I2,Sc,A2,Ih,iv,P2,R2,D2;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yd=="object"&&Yd];for(var y=0;y<d.length;++y){var E=d[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var E=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var F=d[A];if(!(F in E))break e;E=E[F]}d=d[d.length-1],A=E[d],y=y(A),y!=A&&y!=null&&e(E,d,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(y){var E=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&E.push([A,y[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function c(d,y,E){return d.call.apply(d.bind,arguments)}function u(d,y,E){return u=c,u.apply(null,arguments)}function h(d,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function m(d,y){function E(){}E.prototype=y.prototype,d.Z=y.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(A,F,B){for(var se=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)se[Ce-2]=arguments[Ce];return y.prototype[F].apply(A,se)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function g(d){const y=d.length;if(y>0){const E=Array(y);for(let A=0;A<y;A++)E[A]=d[A];return E}return[]}function w(d,y){for(let A=1;A<arguments.length;A++){const F=arguments[A];var E=typeof F;if(E=E!="object"?E:F?Array.isArray(F)?"array":E:"null",E=="array"||E=="object"&&typeof F.length=="number"){E=d.length||0;const B=F.length||0;d.length=E+B;for(let se=0;se<B;se++)d[E+se]=F[se]}else d.push(F)}}class v{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function _(d){a.setTimeout(()=>{throw d},0)}function b(){var d=N;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class x{constructor(){this.h=this.g=null}add(y,E){const A=S.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new v(()=>new j,d=>d.reset());class j{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let D,M=!1,N=new x,C=()=>{const d=Promise.resolve(void 0);D=()=>{d.then(T)}};function T(){for(var d;d=b();){try{d.h.call(d.g)}catch(E){_(E)}var y=S;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}M=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};a.addEventListener("test",E,y),a.removeEventListener("test",E,y)}catch{}return d}();function P(d){return/^[\s\xa0]*$/.test(d)}function O(d,y){I.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}m(O,I),O.prototype.init=function(d,y){const E=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(E=="mouseover"?y=d.fromElement:E=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&O.Z.h.call(this)},O.prototype.h=function(){O.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),J=0;function X(d,y,E,A,F){this.listener=d,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=F,this.key=++J,this.da=this.fa=!1}function L(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function H(d,y,E){for(const A in d)y.call(E,d[A],A,d)}function z(d,y){for(const E in d)y.call(void 0,d[E],E,d)}function $(d){const y={};for(const E in d)y[E]=d[E];return y}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(d,y){let E,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(E in A)d[E]=A[E];for(let B=0;B<G.length;B++)E=G[B],Object.prototype.hasOwnProperty.call(A,E)&&(d[E]=A[E])}}function ie(d){this.src=d,this.g={},this.h=0}ie.prototype.add=function(d,y,E,A,F){const B=d.toString();d=this.g[B],d||(d=this.g[B]=[],this.h++);const se=oe(d,y,A,F);return se>-1?(y=d[se],E||(y.fa=!1)):(y=new X(y,this.src,B,!!A,F),y.fa=E,d.push(y)),y};function ne(d,y){const E=y.type;if(E in d.g){var A=d.g[E],F=Array.prototype.indexOf.call(A,y,void 0),B;(B=F>=0)&&Array.prototype.splice.call(A,F,1),B&&(L(y),d.g[E].length==0&&(delete d.g[E],d.h--))}}function oe(d,y,E,A){for(let F=0;F<d.length;++F){const B=d[F];if(!B.da&&B.listener==y&&B.capture==!!E&&B.ha==A)return F}return-1}var V="closure_lm_"+(Math.random()*1e6|0),Y={};function he(d,y,E,A,F){if(Array.isArray(y)){for(let B=0;B<y.length;B++)he(d,y[B],E,A,F);return null}return E=rn(E),d&&d[re]?d.J(y,E,l(A)?!!A.capture:!!A,F):Q(d,y,E,!1,A,F)}function Q(d,y,E,A,F,B){if(!y)throw Error("Invalid event type");const se=l(F)?!!F.capture:!!F;let Ce=He(d);if(Ce||(d[V]=Ce=new ie(d)),E=Ce.add(y,E,A,se,B),E.proxy)return E;if(A=te(),E.proxy=A,A.src=d,A.listener=E,d.addEventListener)R||(F=se),F===void 0&&(F=!1),d.addEventListener(y.toString(),A,F);else if(d.attachEvent)d.attachEvent(Le(y.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function te(){function d(E){return y.call(d.src,d.listener,E)}const y=ft;return d}function ce(d,y,E,A,F){if(Array.isArray(y))for(var B=0;B<y.length;B++)ce(d,y[B],E,A,F);else A=l(A)?!!A.capture:!!A,E=rn(E),d&&d[re]?(d=d.i,B=String(y).toString(),B in d.g&&(y=d.g[B],E=oe(y,E,A,F),E>-1&&(L(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete d.g[B],d.h--)))):d&&(d=He(d))&&(y=d.g[y.toString()],d=-1,y&&(d=oe(y,E,A,F)),(E=d>-1?y[d]:null)&&Se(E))}function Se(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[re])ne(y.i,d);else{var E=d.type,A=d.proxy;y.removeEventListener?y.removeEventListener(E,A,d.capture):y.detachEvent?y.detachEvent(Le(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=He(y))?(ne(E,d),E.h==0&&(E.src=null,y[V]=null)):L(d)}}}function Le(d){return d in Y?Y[d]:Y[d]="on"+d}function ft(d,y){if(d.da)d=!0;else{y=new O(y,this);const E=d.listener,A=d.ha||d.src;d.fa&&Se(d),d=E.call(A,y)}return d}function He(d){return d=d[V],d instanceof ie?d:null}var Ze="__closure_events_fn_"+(Math.random()*1e9>>>0);function rn(d){return typeof d=="function"?d:(d[Ze]||(d[Ze]=function(y){return d.handleEvent(y)}),d[Ze])}function Qe(){k.call(this),this.i=new ie(this),this.M=this,this.G=null}m(Qe,k),Qe.prototype[re]=!0,Qe.prototype.removeEventListener=function(d,y,E,A){ce(this,d,y,E,A)};function Je(d,y){var E,A=d.G;if(A)for(E=[];A;A=A.G)E.push(A);if(d=d.M,A=y.type||y,typeof y=="string")y=new I(y,d);else if(y instanceof I)y.target=y.target||d;else{var F=y;y=new I(A,d),ee(y,F)}F=!0;let B,se;if(E)for(se=E.length-1;se>=0;se--)B=y.g=E[se],F=jn(B,A,!0,y)&&F;if(B=y.g=d,F=jn(B,A,!0,y)&&F,F=jn(B,A,!1,y)&&F,E)for(se=0;se<E.length;se++)B=y.g=E[se],F=jn(B,A,!1,y)&&F}Qe.prototype.N=function(){if(Qe.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const E=d.g[y];for(let A=0;A<E.length;A++)L(E[A]);delete d.g[y],d.h--}}this.G=null},Qe.prototype.J=function(d,y,E,A){return this.i.add(String(d),y,!1,E,A)},Qe.prototype.K=function(d,y,E,A){return this.i.add(String(d),y,!0,E,A)};function jn(d,y,E,A){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let B=0;B<y.length;++B){const se=y[B];if(se&&!se.da&&se.capture==E){const Ce=se.listener,Mt=se.ha||se.src;se.fa&&ne(d.i,se),F=Ce.call(Mt,A)!==!1&&F}}return F&&!A.defaultPrevented}function es(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:a.setTimeout(d,y||0)}function go(d){d.g=es(()=>{d.g=null,d.i&&(d.i=!1,go(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class ue extends k{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:go(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(d){k.call(this),this.h=d,this.g={}}m(be,k);var Ve=[];function ge(d){H(d.g,function(y,E){this.g.hasOwnProperty(E)&&Se(y)},d),d.g={}}be.prototype.N=function(){be.Z.N.call(this),ge(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var je=a.JSON.stringify,at=a.JSON.parse,St=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function zt(){}function cr(){}var et={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ut(){I.call(this,"d")}m(Ut,I);function $t(){I.call(this,"c")}m($t,I);var Pt={},Cr=null;function yo(){return Cr=Cr||new Qe}Pt.Ia="serverreachability";function gd(d){I.call(this,Pt.Ia,d)}m(gd,I);function vo(d){const y=yo();Je(y,new gd(y))}Pt.STAT_EVENT="statevent";function yd(d,y){I.call(this,Pt.STAT_EVENT,d),this.stat=y}m(yd,I);function $e(d){const y=yo();Je(y,new yd(y,d))}Pt.Ja="timingevent";function sn(d,y){I.call(this,Pt.Ja,d),this.size=y}m(sn,I);function Rt(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},y)}function In(){this.g=!0}In.prototype.ua=function(){this.g=!1};function An(d,y,E,A,F,B){d.info(function(){if(d.g)if(B){var se="",Ce=B.split("&");for(let tt=0;tt<Ce.length;tt++){var Mt=Ce[tt].split("=");if(Mt.length>1){const Bt=Mt[0];Mt=Mt[1];const rs=Bt.split("_");se=rs.length>=2&&rs[1]=="type"?se+(Bt+"="+Mt+"&"):se+(Bt+"=redacted&")}}}else se=null;else se=B;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+y+`
`+E+`
`+se})}function xn(d,y,E,A,F,B,se){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+y+`
`+E+`
`+B+" "+se})}function Yt(d,y,E,A){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Dt(d,E)+(A?" "+A:"")})}function si(d,y){d.info(function(){return"TIMEOUT: "+y})}In.prototype.info=function(){};function Dt(d,y){if(!d.g)return y;if(!y)return null;try{const B=JSON.parse(y);if(B){for(d=0;d<B.length;d++)if(Array.isArray(B[d])){var E=B[d];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var F=A[0];if(F!="noop"&&F!="stop"&&F!="close")for(let se=1;se<A.length;se++)A[se]=""}}}}return je(B)}catch{return y}}var Hn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Wn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ur;function js(){}m(js,zt),js.prototype.g=function(){return new XMLHttpRequest},ur=new js;function kr(d){return encodeURIComponent(String(d))}function ts(d){var y=1;d=d.split(":");const E=[];for(;y>0&&d.length;)E.push(d.shift()),y--;return d.length&&E.push(d.join(":")),E}function Pn(d,y,E,A){this.j=d,this.i=y,this.l=E,this.S=A||1,this.V=new be(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new aa}function aa(){this.i=null,this.g="",this.h=!1}var Vw={},Np={};function Ep(d,y,E){d.M=1,d.A=xd(ns(y)),d.u=E,d.R=!0,Fw(d,null)}function Fw(d,y){d.F=Date.now(),vd(d),d.B=ns(d.A);var E=d.B,A=d.S;Array.isArray(A)||(A=[String(A)]),Jw(E.i,"t",A),d.C=0,E=d.j.L,d.h=new aa,d.g=gb(d.j,E?y:null,!d.u),d.P>0&&(d.O=new ue(u(d.Y,d,d.g),d.P)),y=d.V,E=d.g,A=d.ba;var F="readystatechange";Array.isArray(F)||(F&&(Ve[0]=F.toString()),F=Ve);for(let B=0;B<F.length;B++){const se=he(E,F[B],A||y.handleEvent,!1,y.h||y);if(!se)break;y.g[se.key]=se}y=d.J?$(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),vo(),An(d.i,d.v,d.B,d.l,d.S,d.u)}Pn.prototype.ba=function(d){d=d.target;const y=this.O;y&&ai(d)==3?y.j():this.Y(d)},Pn.prototype.Y=function(d){try{if(d==this.g)e:{const Ce=ai(this.g),Mt=this.g.ya(),tt=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||ib(this.g)))){this.K||Ce!=4||Mt==7||(Mt==8||tt<=0?vo(3):vo(2)),Tp(this);var y=this.g.ca();this.X=y;var E=YR(this);if(this.o=y==200,xn(this.i,this.v,this.B,this.l,this.S,Ce,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,F=this.g;if((A=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(A)){var B=A;break t}}B=null}if(d=B)Yt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Cp(this,d);else{this.o=!1,this.m=3,$e(12),xo(this),Zl(this);break e}}if(this.R){d=!0;let Bt;for(;!this.K&&this.C<E.length;)if(Bt=JR(this,E),Bt==Np){Ce==4&&(this.m=4,$e(14),d=!1),Yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Vw){this.m=4,$e(15),Yt(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else Yt(this.i,this.l,Bt,null),Cp(this,Bt);if(zw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||E.length!=0||this.h.h||(this.m=1,$e(16),d=!1),this.o=this.o&&d,!d)Yt(this.i,this.l,E,"[Invalid Chunked Response]"),xo(this),Zl(this);else if(E.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Mp(se),se.P=!0,$e(11))}}else Yt(this.i,this.l,E,null),Cp(this,E);Ce==4&&xo(this),this.o&&!this.K&&(Ce==4?hb(this.j,this):(this.o=!1,vd(this)))}else hD(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,$e(12)):(this.m=0,$e(13)),xo(this),Zl(this)}}}catch{}finally{}};function YR(d){if(!zw(d))return d.g.la();const y=ib(d.g);if(y==="")return"";let E="";const A=y.length,F=ai(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return xo(d),Zl(d),"";d.h.i=new a.TextDecoder}for(let B=0;B<A;B++)d.h.h=!0,E+=d.h.i.decode(y[B],{stream:!(F&&B==A-1)});return y.length=0,d.h.g+=E,d.C=0,d.h.g}function zw(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function JR(d,y){var E=d.C,A=y.indexOf(`
`,E);return A==-1?Np:(E=Number(y.substring(E,A)),isNaN(E)?Vw:(A+=1,A+E>y.length?Np:(y=y.slice(A,A+E),d.C=A+E,y)))}Pn.prototype.cancel=function(){this.K=!0,xo(this)};function vd(d){d.T=Date.now()+d.H,Uw(d,d.H)}function Uw(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Rt(u(d.aa,d),y)}function Tp(d){d.D&&(a.clearTimeout(d.D),d.D=null)}Pn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(si(this.i,this.B),this.M!=2&&(vo(),$e(17)),xo(this),this.m=2,Zl(this)):Uw(this,this.T-d)};function Zl(d){d.j.I==0||d.K||hb(d.j,d)}function xo(d){Tp(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,ge(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function Cp(d,y){try{var E=d.j;if(E.I!=0&&(E.g==d||kp(E.h,d))){if(!d.L&&kp(E.h,d)&&E.I==3){try{var A=E.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)Nd(E),_d(E);else break e;Dp(E),$e(18)}}else E.xa=F[1],0<E.xa-E.K&&F[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=Rt(u(E.Va,E),6e3));Hw(E.h)<=1&&E.ta&&(E.ta=void 0)}else bo(E,11)}else if((d.L||E.g==d)&&Nd(E),!P(y))for(F=E.Ba.g.parse(y),y=0;y<F.length;y++){let tt=F[y];const Bt=tt[0];if(!(Bt<=E.K))if(E.K=Bt,tt=tt[1],E.I==2)if(tt[0]=="c"){E.M=tt[1],E.ba=tt[2];const rs=tt[3];rs!=null&&(E.ka=rs,E.j.info("VER="+E.ka));const _o=tt[4];_o!=null&&(E.za=_o,E.j.info("SVER="+E.za));const li=tt[5];li!=null&&typeof li=="number"&&li>0&&(A=1.5*li,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const ci=d.g;if(ci){const Td=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Td){var B=A.h;B.g||Td.indexOf("spdy")==-1&&Td.indexOf("quic")==-1&&Td.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(jp(B,B.h),B.h=null))}if(A.G){const Op=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Op&&(A.wa=Op,lt(A.J,A.G,Op))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var se=d;if(A.na=pb(A,A.L?A.ba:null,A.W),se.L){Ww(A.h,se);var Ce=se,Mt=A.O;Mt&&(Ce.H=Mt),Ce.D&&(Tp(Ce),vd(Ce)),A.g=se}else ub(A);E.i.length>0&&Sd(E)}else tt[0]!="stop"&&tt[0]!="close"||bo(E,7);else E.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?bo(E,7):Rp(E):tt[0]!="noop"&&E.l&&E.l.qa(tt),E.A=0)}}vo(4)}catch{}}var ZR=class{constructor(d,y){this.g=d,this.map=y}};function $w(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Bw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Hw(d){return d.h?1:d.g?d.g.size:0}function kp(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function jp(d,y){d.g?d.g.add(y):d.h=y}function Ww(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}$w.prototype.cancel=function(){if(this.i=qw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function qw(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const E of d.g.values())y=y.concat(E.G);return y}return g(d.i)}var Gw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eD(d,y){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const A=d[E].indexOf("=");let F,B=null;A>=0?(F=d[E].substring(0,A),B=d[E].substring(A+1)):F=d[E],y(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function ii(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof ii?(this.l=d.l,ec(this,d.j),this.o=d.o,this.g=d.g,tc(this,d.u),this.h=d.h,Ip(this,Zw(d.i)),this.m=d.m):d&&(y=String(d).match(Gw))?(this.l=!1,ec(this,y[1]||"",!0),this.o=nc(y[2]||""),this.g=nc(y[3]||"",!0),tc(this,y[4]),this.h=nc(y[5]||"",!0),Ip(this,y[6]||"",!0),this.m=nc(y[7]||"")):(this.l=!1,this.i=new sc(null,this.l))}ii.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(rc(y,Kw,!0),":");var E=this.g;return(E||y=="file")&&(d.push("//"),(y=this.o)&&d.push(rc(y,Kw,!0),"@"),d.push(kr(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(rc(E,E.charAt(0)=="/"?rD:nD,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",rc(E,iD)),d.join("")},ii.prototype.resolve=function(d){const y=ns(this);let E=!!d.j;E?ec(y,d.j):E=!!d.o,E?y.o=d.o:E=!!d.g,E?y.g=d.g:E=d.u!=null;var A=d.h;if(E)tc(y,d.u);else if(E=!!d.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var F=y.h.lastIndexOf("/");F!=-1&&(A=y.h.slice(0,F+1)+A)}if(F=A,F==".."||F==".")A="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){A=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let se=0;se<F.length;){const Ce=F[se++];Ce=="."?A&&se==F.length&&B.push(""):Ce==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),A&&se==F.length&&B.push("")):(B.push(Ce),A=!0)}A=B.join("/")}else A=F}return E?y.h=A:E=d.i.toString()!=="",E?Ip(y,Zw(d.i)):E=!!d.m,E&&(y.m=d.m),y};function ns(d){return new ii(d)}function ec(d,y,E){d.j=E?nc(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function tc(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function Ip(d,y,E){y instanceof sc?(d.i=y,oD(d.i,d.l)):(E||(y=rc(y,sD)),d.i=new sc(y,d.l))}function lt(d,y,E){d.i.set(y,E)}function xd(d){return lt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function nc(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function rc(d,y,E){return typeof d=="string"?(d=encodeURI(d).replace(y,tD),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function tD(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Kw=/[#\/\?@]/g,nD=/[#\?:]/g,rD=/[#\?]/g,sD=/[#\?@]/g,iD=/#/g;function sc(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function wo(d){d.g||(d.g=new Map,d.h=0,d.i&&eD(d.i,function(y,E){d.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}t=sc.prototype,t.add=function(d,y){wo(this),this.i=null,d=la(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(y),this.h+=1,this};function Qw(d,y){wo(d),y=la(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Xw(d,y){return wo(d),y=la(d,y),d.g.has(y)}t.forEach=function(d,y){wo(this),this.g.forEach(function(E,A){E.forEach(function(F){d.call(y,F,A,this)},this)},this)};function Yw(d,y){wo(d);let E=[];if(typeof y=="string")Xw(d,y)&&(E=E.concat(d.g.get(la(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)E=E.concat(d[y]);return E}t.set=function(d,y){return wo(this),this.i=null,d=la(this,d),Xw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=Yw(this,d),d.length>0?String(d[0]):y):y};function Jw(d,y,E){Qw(d,y),E.length>0&&(d.i=null,d.g.set(la(d,y),g(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var E=y[A];const F=kr(E);E=Yw(this,E);for(let B=0;B<E.length;B++){let se=F;E[B]!==""&&(se+="="+kr(E[B])),d.push(se)}}return this.i=d.join("&")};function Zw(d){const y=new sc;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function la(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function oD(d,y){y&&!d.j&&(wo(d),d.i=null,d.g.forEach(function(E,A){const F=A.toLowerCase();A!=F&&(Qw(this,A),Jw(this,F,E))},d)),d.j=y}function aD(d,y){const E=new In;if(a.Image){const A=new Image;A.onload=h(oi,E,"TestLoadImage: loaded",!0,y,A),A.onerror=h(oi,E,"TestLoadImage: error",!1,y,A),A.onabort=h(oi,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=h(oi,E,"TestLoadImage: timeout",!1,y,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else y(!1)}function lD(d,y){const E=new In,A=new AbortController,F=setTimeout(()=>{A.abort(),oi(E,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:A.signal}).then(B=>{clearTimeout(F),B.ok?oi(E,"TestPingServer: ok",!0,y):oi(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),oi(E,"TestPingServer: error",!1,y)})}function oi(d,y,E,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(E)}catch{}}function cD(){this.g=new St}function Ap(d){this.i=d.Sb||null,this.h=d.ab||!1}m(Ap,zt),Ap.prototype.g=function(){return new wd(this.i,this.h)};function wd(d,y){Qe.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(wd,Qe),t=wd.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,oc(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||a).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ic(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,oc(this)),this.g&&(this.readyState=3,oc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;eb(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function eb(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?ic(this):oc(this),this.readyState==3&&eb(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,ic(this))},t.Na=function(d){this.g&&(this.response=d,ic(this))},t.ga=function(){this.g&&ic(this)};function ic(d){d.readyState=4,d.l=null,d.j=null,d.B=null,oc(d)}t.setRequestHeader=function(d,y){this.A.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=y.next();return d.join(`\r
`)};function oc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(wd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function tb(d){let y="";return H(d,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function Pp(d,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=tb(E),typeof d=="string"?E!=null&&kr(E):lt(d,y,E))}function xt(d){Qe.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(xt,Qe);var uD=/^https?$/i,dD=["POST","PUT"];t=xt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ur.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(B){nb(this,B);return}if(d=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)E.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const B of A.keys())E.set(B,A.get(B));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(B=>B.toLowerCase()=="content-type"),F=a.FormData&&d instanceof a.FormData,!(Array.prototype.indexOf.call(dD,y,void 0)>=0)||A||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,se]of E)this.g.setRequestHeader(B,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(B){nb(this,B)}};function nb(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,rb(d),bd(d)}function rb(d){d.A||(d.A=!0,Je(d,"complete"),Je(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Je(this,"complete"),Je(this,"abort"),bd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bd(this,!0)),xt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?sb(this):this.Xa())},t.Xa=function(){sb(this)};function sb(d){if(d.h&&typeof i<"u"){if(d.v&&ai(d)==4)setTimeout(d.Ca.bind(d),0);else if(Je(d,"readystatechange"),ai(d)==4){d.h=!1;try{const B=d.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=B===0){let se=String(d.D).match(Gw)[1]||null;!se&&a.self&&a.self.location&&(se=a.self.location.protocol.slice(0,-1)),A=!uD.test(se?se.toLowerCase():"")}E=A}if(E)Je(d,"complete"),Je(d,"success");else{d.o=6;try{var F=ai(d)>2?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.ca()+"]",rb(d)}}finally{bd(d)}}}}function bd(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,y||Je(d,"ready");try{E.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ai(d){return d.g?d.g.readyState:0}t.ca=function(){try{return ai(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),at(y)}};function ib(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function hD(d){const y={};d=(d.g&&ai(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(P(d[A]))continue;var E=ts(d[A]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const B=y[F]||[];y[F]=B,B.push(E)}z(y,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ac(d,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||y}function ob(d){this.za=0,this.i=[],this.j=new In,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ac("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ac("baseRetryDelayMs",5e3,d),this.Za=ac("retryDelaySeedMs",1e4,d),this.Ta=ac("forwardChannelMaxRetries",2,d),this.va=ac("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new $w(d&&d.concurrentRequestLimit),this.Ba=new cD,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ob.prototype,t.ka=8,t.I=1,t.connect=function(d,y,E,A){$e(0),this.W=d,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=pb(this,null,this.W),Sd(this)};function Rp(d){if(ab(d),d.I==3){var y=d.V++,E=ns(d.J);if(lt(E,"SID",d.M),lt(E,"RID",y),lt(E,"TYPE","terminate"),lc(d,E),y=new Pn(d,d.j,y),y.M=2,y.A=xd(ns(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&a.Image&&(new Image().src=y.A,E=!0),E||(y.g=gb(y.j,null),y.g.ea(y.A)),y.F=Date.now(),vd(y)}mb(d)}function _d(d){d.g&&(Mp(d),d.g.cancel(),d.g=null)}function ab(d){_d(d),d.v&&(a.clearTimeout(d.v),d.v=null),Nd(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&a.clearTimeout(d.m),d.m=null)}function Sd(d){if(!Bw(d.h)&&!d.m){d.m=!0;var y=d.Ea;D||C(),M||(D(),M=!0),N.add(y,d),d.D=0}}function fD(d,y){return Hw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Rt(u(d.Ea,d,y),fb(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const F=new Pn(this,this.j,d);let B=this.o;if(this.U&&(B?(B=$(B),ee(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=cb(this,F,y),E=ns(this.J),lt(E,"RID",d),lt(E,"CVER",22),this.G&&lt(E,"X-HTTP-Session-Id",this.G),lc(this,E),B&&(this.R?y="headers="+kr(tb(B))+"&"+y:this.u&&Pp(E,this.u,B)),jp(this.h,F),this.Ra&&lt(E,"TYPE","init"),this.S?(lt(E,"$req",y),lt(E,"SID","null"),F.U=!0,Ep(F,E,null)):Ep(F,E,y),this.I=2}}else this.I==3&&(d?lb(this,d):this.i.length==0||Bw(this.h)||lb(this))};function lb(d,y){var E;y?E=y.l:E=d.V++;const A=ns(d.J);lt(A,"SID",d.M),lt(A,"RID",E),lt(A,"AID",d.K),lc(d,A),d.u&&d.o&&Pp(A,d.u,d.o),E=new Pn(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),y&&(d.i=y.G.concat(d.i)),y=cb(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),jp(d.h,E),Ep(E,A,y)}function lc(d,y){d.H&&H(d.H,function(E,A){lt(y,A,E)}),d.l&&H({},function(E,A){lt(y,A,E)})}function cb(d,y,E){E=Math.min(d.i.length,E);const A=d.l?u(d.l.Ka,d.l,d):null;e:{var F=d.i;let Ce=-1;for(;;){const Mt=["count="+E];Ce==-1?E>0?(Ce=F[0].g,Mt.push("ofs="+Ce)):Ce=0:Mt.push("ofs="+Ce);let tt=!0;for(let Bt=0;Bt<E;Bt++){var B=F[Bt].g;const rs=F[Bt].map;if(B-=Ce,B<0)Ce=Math.max(0,F[Bt].g-100),tt=!1;else try{B="req"+B+"_"||"";try{var se=rs instanceof Map?rs:Object.entries(rs);for(const[_o,li]of se){let ci=li;l(li)&&(ci=je(li)),Mt.push(B+_o+"="+encodeURIComponent(ci))}}catch(_o){throw Mt.push(B+"type="+encodeURIComponent("_badmap")),_o}}catch{A&&A(rs)}}if(tt){se=Mt.join("&");break e}}se=void 0}return d=d.i.splice(0,E),y.G=d,se}function ub(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;D||C(),M||(D(),M=!0),N.add(y,d),d.A=0}}function Dp(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Rt(u(d.Da,d),fb(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,db(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Rt(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,$e(10),_d(this),db(this))};function Mp(d){d.B!=null&&(a.clearTimeout(d.B),d.B=null)}function db(d){d.g=new Pn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=ns(d.na);lt(y,"RID","rpc"),lt(y,"SID",d.M),lt(y,"AID",d.K),lt(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&lt(y,"TO",d.ia),lt(y,"TYPE","xmlhttp"),lc(d,y),d.u&&d.o&&Pp(y,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=xd(ns(y)),E.u=null,E.R=!0,Fw(E,d)}t.Va=function(){this.C!=null&&(this.C=null,_d(this),Dp(this),$e(19))};function Nd(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function hb(d,y){var E=null;if(d.g==y){Nd(d),Mp(d),d.g=null;var A=2}else if(kp(d.h,y))E=y.G,Ww(d.h,y),A=1;else return;if(d.I!=0){if(y.o)if(A==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var F=d.D;A=yo(),Je(A,new sn(A,E)),Sd(d)}else ub(d);else if(F=y.m,F==3||F==0&&y.X>0||!(A==1&&fD(d,y)||A==2&&Dp(d)))switch(E&&E.length>0&&(y=d.h,y.i=y.i.concat(E)),F){case 1:bo(d,5);break;case 4:bo(d,10);break;case 3:bo(d,6);break;default:bo(d,2)}}}function fb(d,y){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*y}function bo(d,y){if(d.j.info("Error code "+y),y==2){var E=u(d.bb,d),A=d.Ua;const F=!A;A=new ii(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ec(A,"https"),xd(A),F?aD(A.toString(),E):lD(A.toString(),E)}else $e(2);d.I=0,d.l&&d.l.pa(y),mb(d),ab(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),$e(2)):(this.j.info("Failed to ping google.com"),$e(1))};function mb(d){if(d.I=0,d.ja=[],d.l){const y=qw(d.h);(y.length!=0||d.i.length!=0)&&(w(d.ja,y),w(d.ja,d.i),d.h.i.length=0,g(d.i),d.i.length=0),d.l.oa()}}function pb(d,y,E){var A=E instanceof ii?ns(E):new ii(E);if(A.g!="")y&&(A.g=y+"."+A.g),tc(A,A.u);else{var F=a.location;A=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const B=new ii(null);A&&ec(B,A),y&&(B.g=y),F&&tc(B,F),E&&(B.h=E),A=B}return E=d.G,y=d.wa,E&&y&&lt(A,E,y),lt(A,"VER",d.ka),lc(d,A),A}function gb(d,y,E){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new xt(new Ap({ab:E})):new xt(d.ma),y.Fa(d.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yb(){}t=yb.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ed(){}Ed.prototype.g=function(d,y){return new qn(d,y)};function qn(d,y){Qe.call(this),this.g=new ob(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!P(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new ca(this)}m(qn,Qe),qn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){Rp(this.g)},qn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=je(d),d=E);y.i.push(new ZR(y.Ya++,d)),y.I==3&&Sd(y)},qn.prototype.N=function(){this.g.l=null,delete this.j,Rp(this.g),delete this.g,qn.Z.N.call(this)};function vb(d){Ut.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const E in y){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}m(vb,Ut);function xb(){$t.call(this),this.status=1}m(xb,$t);function ca(d){this.g=d}m(ca,yb),ca.prototype.ra=function(){Je(this.g,"a")},ca.prototype.qa=function(d){Je(this.g,new vb(d))},ca.prototype.pa=function(d){Je(this.g,new xb)},ca.prototype.oa=function(){Je(this.g,"b")},Ed.prototype.createWebChannel=Ed.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,D2=function(){return new Ed},R2=function(){return yo()},P2=Pt,iv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hn.NO_ERROR=0,Hn.TIMEOUT=8,Hn.HTTP_ERROR=6,Ih=Hn,Wn.COMPLETE="complete",A2=Wn,cr.EventType=et,et.OPEN="a",et.CLOSE="b",et.ERROR="c",et.MESSAGE="d",Qe.prototype.listen=Qe.prototype.J,Sc=cr,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,I2=xt}).apply(typeof Yd<"u"?Yd:typeof self<"u"?self:typeof window<"u"?window:{});const z_="@firebase/firestore",U_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=new a0("@firebase/firestore");function ma(){return Xo.logLevel}function fe(t,...e){if(Xo.logLevel<=De.DEBUG){const n=e.map(w0);Xo.debug(`Firestore (${Bl}): ${t}`,...n)}}function Zs(t,...e){if(Xo.logLevel<=De.ERROR){const n=e.map(w0);Xo.error(`Firestore (${Bl}): ${t}`,...n)}}function Yo(t,...e){if(Xo.logLevel<=De.WARN){const n=e.map(w0);Xo.warn(`Firestore (${Bl}): ${t}`,...n)}}function w0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,M2(t,r,n)}function M2(t,e,n){let r=`FIRESTORE (${Bl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Zs(r),new Error(r)}function Ke(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||M2(e,s,r)}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class L2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class uz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dz{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Us;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Us,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Us)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new O2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class hz{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class fz{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hz(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=i=>{i.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,fe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=pz(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function ov(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Eg(s)===Eg(i)?Me(s,i):Eg(s)?1:-1}return Me(t.length,e.length)}const gz=55296,yz=57343;function Eg(t){const e=t.charCodeAt(0);return e>=gz&&e<=yz}function xl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="__name__";class as{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&xe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return as.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof as?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=as.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Me(e.length,n.length)}static compareSegments(e,n){const r=as.isNumericId(e),s=as.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?as.extractNumericId(e).compare(as.extractNumericId(n)):ov(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hi.fromString(e.substring(4,e.length-2))}}class rt extends as{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const vz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends as{construct(e,n,r){return new Gt(e,n,r)}static isValidIdentifier(e){return vz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B_}static keyField(){return new Gt([B_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new de(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new de(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new de(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new de(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(n)}static emptyPath(){return new Gt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(rt.fromString(e))}static fromName(e){return new ye(rt.fromString(e).popFirst(5))}static empty(){return new ye(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V2(t,e,n){if(!n)throw new de(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function F2(t,e,n,r){if(e===!0&&r===!0)throw new de(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H_(t){if(!ye.isDocumentKey(t))throw new de(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function W_(t){if(ye.isDocumentKey(t))throw new de(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function z2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Lm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function En(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lm(t);throw new de(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xz(t,e){if(e<=0)throw new de(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yu(t,e){if(!z2(t))throw new de(W.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new de(W.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=-62135596800,G_=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*G_);return new st(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q_)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/G_}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yu(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:It("string",st._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new st(0,0))}static max(){return new _e(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=-1;function wz(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=_e.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new Ji(s,ye.empty(),e)}function bz(t){return new Ji(t.readTime,t.key,_u)}class Ji{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ji(_e.min(),ye.empty(),_u)}static max(){return new Ji(_e.max(),ye.empty(),_u)}}function _z(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hl(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==Sz)throw t;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{a[u]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Ez(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=-1;function Fm(t){return t==null}function Cf(t){return t===0&&1/t==-1/0}function Tz(t){return typeof t=="number"&&Number.isInteger(t)&&!Cf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="";function Cz(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=K_(e)),e=kz(t.get(n),e);return K_(e)}function kz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case U2:n+="";break;default:n+=i}}return n}function K_(t){return t+U2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function uo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jd(this.root,e,this.comparator,!0)}}class Jd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Zt.RED,this.left=s??Zt.EMPTY,this.right=i??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Zt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new X_(this.data.getIterator())}getIteratorFrom(e){return new X_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ft(this.comparator);return n.data=e,n}}class X_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new tr([])}unionWith(e){let n=new Ft(Gt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new tr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new B2("Invalid base64 string: "+i):i}}(e);return new Xt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const jz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=jz.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function eo(t){return typeof t=="string"?Xt.fromBase64String(t):Xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="server_timestamp",W2="__type__",q2="__previous_value__",G2="__local_write_time__";function _0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[W2])==null?void 0:r.stringValue)===H2}function zm(t){const e=t.mapValue.fields[q2];return _0(e)?zm(e):e}function Su(t){const e=Zi(t.mapValue.fields[G2].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e,n,r,s,i,a,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const kf="(default)";class wl{constructor(e,n){this.projectId=e,this.database=n||kf}static empty(){return new wl("","")}get isDefaultDatabase(){return this.database===kf}isEqual(e){return e instanceof wl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="__type__",Q2="__max__",Zd={mapValue:{fields:{__type__:{stringValue:Q2}}}},X2="__vector__",jf="value";function to(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_0(t)?4:Pz(t)?9007199254740991:Az(t)?10:11:xe(28295,{value:t})}function Ns(t,e){if(t===e)return!0;const n=to(t);if(n!==to(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Su(t).isEqual(Su(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Zi(s.timestampValue),l=Zi(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return eo(s.bytesValue).isEqual(eo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Nt(s.geoPointValue.latitude)===Nt(i.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Nt(s.integerValue)===Nt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Nt(s.doubleValue),l=Nt(i.doubleValue);return a===l?Cf(a)===Cf(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return xl(t.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Q_(a)!==Q_(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Ns(a[c],l[c])))return!1;return!0}(t,e);default:return xe(52216,{left:t})}}function Nu(t,e){return(t.values||[]).find(n=>Ns(n,e))!==void 0}function bl(t,e){if(t===e)return 0;const n=to(t),r=to(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Nt(i.integerValue||i.doubleValue),c=Nt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Y_(t.timestampValue,e.timestampValue);case 4:return Y_(Su(t),Su(e));case 5:return ov(t.stringValue,e.stringValue);case 6:return function(i,a){const l=eo(i),c=eo(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Me(l[u],c[u]);if(h!==0)return h}return Me(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Me(Nt(i.latitude),Nt(a.latitude));return l!==0?l:Me(Nt(i.longitude),Nt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return J_(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,g,w,v;const l=i.fields||{},c=a.fields||{},u=(p=l[jf])==null?void 0:p.arrayValue,h=(g=c[jf])==null?void 0:g.arrayValue,m=Me(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return m!==0?m:J_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Zd.mapValue&&a===Zd.mapValue)return 0;if(i===Zd.mapValue)return 1;if(a===Zd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=a.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const p=ov(c[m],h[m]);if(p!==0)return p;const g=bl(l[c[m]],u[h[m]]);if(g!==0)return g}return Me(c.length,h.length)}(t.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function Y_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=Zi(t),r=Zi(e),s=Me(n.seconds,r.seconds);return s!==0?s:Me(n.nanos,r.nanos)}function J_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=bl(n[s],r[s]);if(i)return i}return Me(n.length,r.length)}function _l(t){return av(t)}function av(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return eo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=av(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${av(n.fields[a])}`;return s+"}"}(t.mapValue):xe(61005,{value:t})}function Ah(t){switch(to(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zm(t);return e?16+Ah(e):16;case 5:return 2*t.stringValue.length;case 6:return eo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ah(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return uo(r.fields,(i,a)=>{s+=i.length+Ah(a)}),s}(t.mapValue);default:throw xe(13486,{value:t})}}function Z_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lv(t){return!!t&&"integerValue"in t}function S0(t){return!!t&&"arrayValue"in t}function eS(t){return!!t&&"nullValue"in t}function tS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ph(t){return!!t&&"mapValue"in t}function Az(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[K2])==null?void 0:r.stringValue)===X2}function Bc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return uo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Bc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Bc(t.arrayValue.values[n]);return e}return{...t}}function Pz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Q2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ph(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bc(n)}setAll(e){let n=Gt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Bc(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ph(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ph(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){uo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Mn(Bc(this.value))}}function Y2(t){const e=[];return uo(t.fields,(n,r)=>{const s=new Gt([n]);if(Ph(r)){const i=Y2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new mn(e,0,_e.min(),_e.min(),_e.min(),Mn.empty(),0)}static newFoundDocument(e,n,r,s){return new mn(e,1,n,_e.min(),r,s,0)}static newNoDocument(e,n){return new mn(e,2,n,_e.min(),_e.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,_e.min(),_e.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n){this.position=e,this.inclusive=n}}function nS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),n.key):r=bl(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function rS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ns(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Rz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{}class jt extends J2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Mz(e,n,r):n==="array-contains"?new Vz(e,r):n==="in"?new Fz(e,r):n==="not-in"?new zz(e,r):n==="array-contains-any"?new Uz(e,r):new jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Oz(e,r):new Lz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bl(n,this.value)):n!==null&&to(this.value)===to(n)&&this.matchesComparison(bl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kr extends J2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Kr(e,n)}matches(e){return Z2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Z2(t){return t.op==="and"}function ej(t){return Dz(t)&&Z2(t)}function Dz(t){for(const e of t.filters)if(e instanceof Kr)return!1;return!0}function cv(t){if(t instanceof jt)return t.field.canonicalString()+t.op.toString()+_l(t.value);if(ej(t))return t.filters.map(e=>cv(e)).join(",");{const e=t.filters.map(n=>cv(n)).join(",");return`${t.op}(${e})`}}function tj(t,e){return t instanceof jt?function(r,s){return s instanceof jt&&r.op===s.op&&r.field.isEqual(s.field)&&Ns(r.value,s.value)}(t,e):t instanceof Kr?function(r,s){return s instanceof Kr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&tj(a,s.filters[l]),!0):!1}(t,e):void xe(19439)}function nj(t){return t instanceof jt?function(n){return`${n.field.canonicalString()} ${n.op} ${_l(n.value)}`}(t):t instanceof Kr?function(n){return n.op.toString()+" {"+n.getFilters().map(nj).join(" ,")+"}"}(t):"Filter"}class Mz extends jt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class Oz extends jt{constructor(e,n){super(e,"in",n),this.keys=rj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Lz extends jt{constructor(e,n){super(e,"not-in",n),this.keys=rj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function rj(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ye.fromName(r.referenceValue))}class Vz extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return S0(n)&&Nu(n.arrayValue,this.value)}}class Fz extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nu(this.value.arrayValue,n)}}class zz extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Nu(this.value.arrayValue,n)}}class Uz extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!S0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function sS(t,e=null,n=[],r=[],s=null,i=null,a=null){return new $z(t,e,n,r,s,i,a)}function N0(t){const e=Ee(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_l(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_l(r)).join(",")),e.Te=n}return e.Te}function E0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Rz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rS(t.startAt,e.startAt)&&rS(t.endAt,e.endAt)}function uv(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Bz(t,e,n,r,s,i,a,l){return new ql(t,e,n,r,s,i,a,l)}function Um(t){return new ql(t)}function iS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sj(t){return t.collectionGroup!==null}function Hc(t){const e=Ee(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ft(Gt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Eu(i,r))}),n.has(Gt.keyField().canonicalString())||e.Ie.push(new Eu(Gt.keyField(),r))}return e.Ie}function xs(t){const e=Ee(t);return e.Ee||(e.Ee=Hz(e,Hc(t))),e.Ee}function Hz(t,e){if(t.limitType==="F")return sS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Eu(s.field,i)});const n=t.endAt?new If(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new If(t.startAt.position,t.startAt.inclusive):null;return sS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dv(t,e){const n=t.filters.concat([e]);return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Af(t,e,n){return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $m(t,e){return E0(xs(t),xs(e))&&t.limitType===e.limitType}function ij(t){return`${N0(xs(t))}|lt:${t.limitType}`}function pa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>nj(s)).join(", ")}]`),Fm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>_l(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>_l(s)).join(",")),`Target(${r})`}(xs(t))}; limitType=${t.limitType})`}function Bm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ye.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Hc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const u=nS(a,l,c);return a.inclusive?u<=0:u<0}(r.startAt,Hc(r),s)||r.endAt&&!function(a,l,c){const u=nS(a,l,c);return a.inclusive?u>=0:u>0}(r.endAt,Hc(r),s))}(t,e)}function Wz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oj(t){return(e,n)=>{let r=!1;for(const s of Hc(t)){const i=qz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function qz(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),u=l.data.field(i);return c!==null&&u!==null?bl(c,u):xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){uo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gz=new vt(ye.comparator);function ei(){return Gz}const aj=new vt(ye.comparator);function Nc(...t){let e=aj;for(const n of t)e=e.insert(n.key,n);return e}function lj(t){let e=aj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ao(){return Wc()}function cj(){return Wc()}function Wc(){return new ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const Kz=new vt(ye.comparator),Qz=new Ft(ye.comparator);function Oe(...t){let e=Qz;for(const n of t)e=e.add(n);return e}const Xz=new Ft(Me);function Yz(){return Xz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cf(e)?"-0":e}}function uj(t){return{integerValue:""+t}}function Jz(t,e){return Tz(e)?uj(e):T0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this._=void 0}}function Zz(t,e,n){return t instanceof Tu?function(s,i){const a={fields:{[W2]:{stringValue:H2},[G2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&_0(i)&&(i=zm(i)),i&&(a.fields[q2]=i),{mapValue:a}}(n,e):t instanceof Sl?hj(t,e):t instanceof Nl?fj(t,e):function(s,i){const a=dj(s,i),l=oS(a)+oS(s.Ae);return lv(a)&&lv(s.Ae)?uj(l):T0(s.serializer,l)}(t,e)}function e8(t,e,n){return t instanceof Sl?hj(t,e):t instanceof Nl?fj(t,e):n}function dj(t,e){return t instanceof Pf?function(r){return lv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Tu extends Hm{}class Sl extends Hm{constructor(e){super(),this.elements=e}}function hj(t,e){const n=mj(e);for(const r of t.elements)n.some(s=>Ns(s,r))||n.push(r);return{arrayValue:{values:n}}}class Nl extends Hm{constructor(e){super(),this.elements=e}}function fj(t,e){let n=mj(e);for(const r of t.elements)n=n.filter(s=>!Ns(s,r));return{arrayValue:{values:n}}}class Pf extends Hm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function oS(t){return Nt(t.integerValue||t.doubleValue)}function mj(t){return S0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n){this.field=e,this.transform=n}}function t8(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Sl&&s instanceof Sl||r instanceof Nl&&s instanceof Nl?xl(r.elements,s.elements,Ns):r instanceof Pf&&s instanceof Pf?Ns(r.Ae,s.Ae):r instanceof Tu&&s instanceof Tu}(t.transform,e.transform)}class n8{constructor(e,n){this.version=e,this.transformResults=n}}class _r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wm{}function pj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k0(t.key,_r.none()):new Ju(t.key,t.data,_r.none());{const n=t.data,r=Mn.empty();let s=new Ft(Gt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new ho(t.key,r,new tr(s.toArray()),_r.none())}}function r8(t,e,n){t instanceof Ju?function(s,i,a){const l=s.value.clone(),c=lS(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ho?function(s,i,a){if(!Rh(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=lS(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(gj(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function qc(t,e,n,r){return t instanceof Ju?function(i,a,l,c){if(!Rh(i.precondition,a))return l;const u=i.value.clone(),h=cS(i.fieldTransforms,c,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ho?function(i,a,l,c){if(!Rh(i.precondition,a))return l;const u=cS(i.fieldTransforms,c,a),h=a.data;return h.setAll(gj(i)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,l){return Rh(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function s8(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=dj(r.transform,s||null);i!=null&&(n===null&&(n=Mn.empty()),n.set(r.field,i))}return n||null}function aS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&xl(r,s,(i,a)=>t8(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ju extends Wm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ho extends Wm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function gj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lS(t,e,n){const r=new Map;Ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,e8(a,l,n[s]))}return r}function cS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Zz(i,a,e))}return r}class k0 extends Wm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class i8 extends Wm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&r8(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=cj();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=pj(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&xl(this.mutations,e.mutations,(n,r)=>aS(n,r))&&xl(this.baseMutations,e.baseMutations,(n,r)=>aS(n,r))}}class j0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Kz}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new j0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a8=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Fe;function c8(t){switch(t){case W.OK:return xe(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return xe(15467,{code:t})}}function yj(t){if(t===void 0)return Zs("GRPC error has no .code"),W.UNKNOWN;switch(t){case Ct.OK:return W.OK;case Ct.CANCELLED:return W.CANCELLED;case Ct.UNKNOWN:return W.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return W.INTERNAL;case Ct.UNAVAILABLE:return W.UNAVAILABLE;case Ct.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Ct.NOT_FOUND:return W.NOT_FOUND;case Ct.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Ct.ABORTED:return W.ABORTED;case Ct.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Ct.DATA_LOSS:return W.DATA_LOSS;default:return xe(39323,{code:t})}}(Fe=Ct||(Ct={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=new Hi([4294967295,4294967295],0);function uS(t){const e=u8().encode(t),n=new j2;return n.update(e),new Uint8Array(n.digest())}function dS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Hi([n,r],0),new Hi([s,i],0)]}class I0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ec(`Invalid padding: ${n}`);if(r<0)throw new Ec(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ec(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ec(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Hi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Hi.fromNumber(r)));return s.compare(d8)===1&&(s=new Hi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=uS(e),[r,s]=dS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new I0(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=uS(e),[r,s]=dS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qm(_e.min(),s,new vt(Me),ei(),Oe())}}class Zu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zu(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class vj{constructor(e,n){this.targetId=e,this.Ce=n}}class xj{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class hS{constructor(){this.ve=0,this.Fe=fS(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),n=Oe(),r=Oe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:xe(38017,{changeType:i})}}),new Zu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=fS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class h8{constructor(e){this.Ge=e,this.ze=new Map,this.je=ei(),this.Je=eh(),this.He=eh(),this.Ye=new vt(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(uv(i))if(r===0){const a=new ye(i.path);this.et(n,a,mn.newNoDocument(a,_e.min()))}else Ke(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=eo(r).toUint8Array()}catch(c){if(c instanceof B2)return Yo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new I0(a,s,i)}catch(c){return Yo(c instanceof Ec?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&uv(l.target)){const c=new ye(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,mn.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Oe();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new qm(e,n,this.Ye,this.je,r);return this.je=ei(),this.Je=eh(),this.He=eh(),this.Ye=new vt(Me),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new hS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ft(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ft(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function eh(){return new vt(ye.comparator)}function fS(){return new vt(ye.comparator)}const f8={asc:"ASCENDING",desc:"DESCENDING"},m8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},p8={and:"AND",or:"OR"};class g8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hv(t,e){return t.useProto3Json||Fm(e)?e:{value:e}}function Rf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function y8(t,e){return Rf(t,e.toTimestamp())}function ws(t){return Ke(!!t,49232),_e.fromTimestamp(function(n){const r=Zi(n);return new st(r.seconds,r.nanos)}(t))}function A0(t,e){return fv(t,e).canonicalString()}function fv(t,e){const n=function(s){return new rt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bj(t){const e=rt.fromString(t);return Ke(Tj(e),10190,{key:e.toString()}),e}function mv(t,e){return A0(t.databaseId,e.path)}function Tg(t,e){const n=bj(e);if(n.get(1)!==t.databaseId.projectId)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(Sj(n))}function _j(t,e){return A0(t.databaseId,e)}function v8(t){const e=bj(t);return e.length===4?rt.emptyPath():Sj(e)}function pv(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Sj(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mS(t,e,n){return{name:mv(t,e),fields:n.value.mapValue.fields}}function x8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Ke(h===void 0||typeof h=="string",58123),Xt.fromBase64String(h||"")):(Ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Xt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const h=u.code===void 0?W.UNKNOWN:yj(u.code);return new de(h,u.message||"")}(a);n=new xj(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Tg(t,r.document.name),i=ws(r.document.updateTime),a=r.document.createTime?ws(r.document.createTime):_e.min(),l=new Mn({mapValue:{fields:r.document.fields}}),c=mn.newFoundDocument(s,i,a,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Dh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Tg(t,r.document),i=r.readTime?ws(r.readTime):_e.min(),a=mn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Dh([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Tg(t,r.document),i=r.removedTargetIds||[];n=new Dh([],i,s,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new l8(s,i),l=r.targetId;n=new vj(l,a)}}return n}function w8(t,e){let n;if(e instanceof Ju)n={update:mS(t,e.key,e.value)};else if(e instanceof k0)n={delete:mv(t,e.key)};else if(e instanceof ho)n={update:mS(t,e.key,e.data),updateMask:j8(e.fieldMask)};else{if(!(e instanceof i8))return xe(16599,{Vt:e.type});n={verify:mv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Tu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Sl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Nl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Pf)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw xe(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:y8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:xe(27497)}(t,e.precondition)),n}function b8(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?ws(s.updateTime):ws(i);return a.isEqual(_e.min())&&(a=ws(i)),new n8(a,s.transformResults||[])}(n,e))):[]}function _8(t,e){return{documents:[_j(t,e.path)]}}function S8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_j(t,s);const i=function(u){if(u.length!==0)return Ej(Kr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:ga(p.field),direction:T8(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=hv(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function N8(t){let e=v8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ke(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const p=Nj(m);return p instanceof Kr&&ej(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(p=>function(w){return new Eu(ya(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Fm(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(m){const p=!!m.before,g=m.values||[];return new If(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const p=!m.before,g=m.values||[];return new If(g,p)}(n.endAt)),Bz(e,s,a,i,l,"F",c,u)}function E8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Nj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ya(n.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ya(n.unaryFilter.field);return jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ya(n.unaryFilter.field);return jt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ya(n.unaryFilter.field);return jt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return jt.create(ya(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Kr.create(n.compositeFilter.filters.map(r=>Nj(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(t):xe(30097,{filter:t})}function T8(t){return f8[t]}function C8(t){return m8[t]}function k8(t){return p8[t]}function ga(t){return{fieldPath:t.canonicalString()}}function ya(t){return Gt.fromServerFormat(t.fieldPath)}function Ej(t){return t instanceof jt?function(n){if(n.op==="=="){if(tS(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NAN"}};if(eS(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tS(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NAN"}};if(eS(n.value))return{unaryFilter:{field:ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ga(n.field),op:C8(n.op),value:n.value}}}(t):t instanceof Kr?function(n){const r=n.getFilters().map(s=>Ej(s));return r.length===1?r[0]:{compositeFilter:{op:k8(n.op),filters:r}}}(t):xe(54877,{filter:t})}function j8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n,r,s,i=_e.min(),a=_e.min(),l=Xt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ai(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ai(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e){this.yt=e}}function A8(t){const e=N8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Af(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{constructor(){this.Cn=new R8}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Ji.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class R8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ft(rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ft(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Cj=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(Cj,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new El(0)}static cr(){return new El(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="LruGarbageCollector",D8=1048576;function yS([t,e],[n,r]){const s=Me(t,n);return s===0?Me(e,r):s}class M8{constructor(e){this.Ir=e,this.buffer=new Ft(yS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class O8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(gS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Wl(n)?fe(gS,"Ignoring IndexedDB error during garbage collection: ",n):await Hl(n)}await this.Vr(3e5)})}}class L8{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Vm.ce);const r=new M8(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(pS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),ma()<=De.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function V8(t,e){return new L8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(){this.changes=new ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&qc(r.mutation,s,tr.empty(),st.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){const s=Ao();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Nc();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ao();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=ei();const a=Wc(),l=function(){return Wc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof ho)?i=i.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),qc(h.mutation,u,h.mutation.getFieldMask(),st.now())):a.set(u.key,tr.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>l.set(u,new z8(h,a.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Wc();let s=new vt((a,l)=>a-l),i=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||tr.empty();h=l.applyToLocalView(u,h),r.set(c,h);const m=(s.get(l.batchId)||Oe()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,m=cj();h.forEach(p=>{if(!i.has(p)){const g=pj(n.get(p),r.get(p));g!==null&&m.set(p,g),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,m))}return q.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):sj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Ao());let l=_u,c=i;return a.next(u=>q.forEach(u,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Oe())).next(h=>({batchId:l,changes:lj(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(r=>{let s=Nc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Nc();return this.indexManager.getCollectionParents(e,i).next(l=>q.forEach(l,c=>{const u=function(m,p){return new ql(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((m,p)=>{a=a.insert(m,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,mn.newInvalidDocument(h)))});let l=Nc();return a.forEach((c,u)=>{const h=i.get(c);h!==void 0&&qc(h.mutation,u,tr.empty(),st.now()),Bm(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ws(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:A8(s.bundledQuery),readTime:ws(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(){this.overlays=new vt(ye.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ao();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Ao(),i=n.length+1,a=new ye(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new vt((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Ao(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Ao(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return q.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new a8(n,r));let i=this.qr.get(n);i===void 0&&(i=Oe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.Qr=new Ft(Ht.$r),this.Ur=new Ft(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ht(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ht(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ye(new rt([])),r=new Ht(n,e),s=new Ht(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new rt([])),r=new Ht(n,e),s=new Ht(n,e+1);let i=Oe();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Ht(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ht{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ft(Ht.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new o8(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Ht(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return q.resolve(a)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?b0:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ht(n,0),s=new Ht(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ft(Me);return n.forEach(s=>{const i=new Ht(s,0),a=new Ht(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ye.isDocumentKey(i)||(i=i.child(""));const a=new Ht(new ye(i),0);let l=new Ft(Me);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},a),q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,s=>{const i=new Ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ht(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e){this.ri=e,this.docs=function(){return new vt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let r=ei();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mn.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ei();const a=n.path,l=new ye(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||_z(bz(h),r)<=0||(s.has(h.key)||Bm(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){xe(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G8(this)}getSize(e){return q.resolve(this.size)}}class G8 extends F8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e){this.persistence=e,this.si=new ra(n=>N0(n),E0),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new P0,this.targetCount=0,this.ai=El.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new El(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vm(0),this.li=!1,this.li=!0,this.hi=new H8,this.referenceDelegate=e(this),this.Pi=new K8(this),this.indexManager=new P8,this.remoteDocumentCache=function(s){return new q8(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new I8(n),this.Ii=new $8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new B8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new W8(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){fe("MemoryPersistence","Starting transaction:",e);const s=new Q8(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Q8 extends Nz{constructor(e){super(),this.currentSequenceNumber=e}}class R0{constructor(e){this.persistence=e,this.Ri=new P0,this.Vi=null}static mi(e){return new R0(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const s=ye.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,_e.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Df{constructor(e,n){this.persistence=e,this.pi=new ra(r=>Cz(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=V8(this,n)}static mi(e,n){return new Df(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,_e.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ah(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Oe(),s=Oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new D0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return H6()?8:Ez(vn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new X8;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ma()<=De.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",pa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(ma()<=De.DEBUG&&fe("QueryEngine","Query:",pa(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ma()<=De.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",pa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xs(n))):q.resolve())}ys(e,n){if(iS(n))return q.resolve(null);let r=xs(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Af(n,null,"F"),r=xs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Oe(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,a,c.readTime)?this.ys(e,Af(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return iS(n)||s.isEqual(_e.min())?q.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?q.resolve(null):(ma()<=De.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),pa(n)),this.vs(e,a,n,wz(s,_u)).next(l=>l))})}Ds(e,n){let r=new Ft(oj(e));return n.forEach((s,i)=>{Bm(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ma()<=De.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",pa(n)),this.ps.getDocumentsMatchingQuery(e,n,Ji.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="LocalStore",J8=3e8;class Z8{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new vt(Me),this.xs=new ra(i=>N0(i),E0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function eU(t,e,n,r){return new Z8(t,e,n,r)}async function jj(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Oe();for(const u of s){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:l}))})})}function tU(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const m=u.batch,p=m.keys();let g=q.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(c,w)).next(v=>{const _=u.docVersions.get(w);Ke(_!==null,48541),v.version.compareTo(_)<0&&(m.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Oe();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Ij(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function nU(t,e){const n=Ee(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,m)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(Xt.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(m,g),function(v,_,b){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=J8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(i,g))});let c=ei(),u=Oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(rU(i,a,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(_e.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return q.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function rU(t,e,n){let r=Oe(),s=Oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=ei();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(_e.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):fe(M0,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:a,qs:s}})}function sU(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=b0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iU(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new Ai(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function gv(t,e,n){const r=Ee(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Wl(a))throw a;fe(M0,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function vS(t,e,n){const r=Ee(t);let s=_e.min(),i=Oe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,h){const m=Ee(c),p=m.xs.get(h);return p!==void 0?q.resolve(m.Ms.get(p)):m.Pi.getTargetData(u,h)}(r,a,xs(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:_e.min(),n?i:Oe())).next(l=>(oU(r,Wz(e),l),{documents:l,Qs:i})))}function oU(t,e,n){let r=t.Os.get(e)||_e.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class xS{constructor(){this.activeTargetIds=Yz()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aU{constructor(){this.Mo=new xS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new xS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="ConnectivityMonitor";class bS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(wS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(wS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let th=null;function yv(){return th===null?th=function(){return 268435456+Math.round(2147483648*Math.random())}():th++,"0x"+th.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="RestConnection",cU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===kf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=yv(),l=this.zo(e,n.toUriEncodedString());fe(Cg,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=zl(u);return this.Jo(e,l,c,r,h).then(m=>(fe(Cg,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Yo(Cg,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=cU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class hU extends uU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=yv();return new Promise((l,c)=>{const u=new I2;u.setWithCredentials(!0),u.listenOnce(A2.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ih.NO_ERROR:const m=u.getResponseJson();fe(cn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case Ih.TIMEOUT:fe(cn,`RPC '${e}' ${a} timed out`),c(new de(W.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const p=u.getStatus();if(fe(cn,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const v=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(x)>=0?x:W.UNKNOWN}(w.status);c(new de(v,w.message))}else c(new de(W.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new de(W.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{fe(cn,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);fe(cn,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=yv(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=D2(),l=R2(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");fe(cn,`Creating RPC '${e}' stream ${s}: ${h}`,c);const m=a.createWebChannel(h,c);this.I_(m);let p=!1,g=!1;const w=new dU({Yo:_=>{g?fe(cn,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(fe(cn,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),fe(cn,`RPC '${e}' stream ${s} sending:`,_),m.send(_))},Zo:()=>m.close()}),v=(_,b,x)=>{_.listen(b,S=>{try{x(S)}catch(j){setTimeout(()=>{throw j},0)}})};return v(m,Sc.EventType.OPEN,()=>{g||(fe(cn,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),v(m,Sc.EventType.CLOSE,()=>{g||(g=!0,fe(cn,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(m))}),v(m,Sc.EventType.ERROR,_=>{g||(g=!0,Yo(cn,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),w.a_(new de(W.UNAVAILABLE,"The operation could not be completed")))}),v(m,Sc.EventType.MESSAGE,_=>{var b;if(!g){const x=_.data[0];Ke(!!x,16349);const S=x,j=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(j){fe(cn,`RPC '${e}' stream ${s} received error:`,j);const D=j.status;let M=function(T){const k=Ct[T];if(k!==void 0)return yj(k)}(D),N=j.message;M===void 0&&(M=W.INTERNAL,N="Unknown error status: "+D+" with message "+j.message),g=!0,w.a_(new de(M,N)),m.close()}else fe(cn,`RPC '${e}' stream ${s} received:`,x),w.u_(x)}}),v(l,P2.STAT_EVENT,_=>{_.stat===iv.PROXY?fe(cn,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===iv.NOPROXY&&fe(cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function kg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){return new g8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="PersistentStream";class Pj{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Aj(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Zs(n.toString()),Zs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new de(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return fe(_S,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(fe(_S,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fU extends Pj{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=x8(this.serializer,e),r=function(i){if(!("targetChange"in i))return _e.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?_e.min():a.readTime?ws(a.readTime):_e.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=pv(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=uv(c)?{documents:_8(i,c)}:{query:S8(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=wj(i,a.resumeToken);const u=hv(i,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(_e.min())>0){l.readTime=Rf(i,a.snapshotVersion.toTimestamp());const u=hv(i,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=E8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=pv(this.serializer),n.removeTarget=e,this.q_(n)}}class mU extends Pj{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=b8(e.writeResults,e.commitTime),r=ws(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=pv(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>w8(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{}class gU extends pU{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,fv(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new de(W.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,fv(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(W.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class yU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Zs(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="RemoteStore";class vU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{sa(this)&&(fe(Jo,"Restarting streams for network reachability change."),await async function(c){const u=Ee(c);u.Ea.add(4),await ed(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Km(u)}(this))})}),this.Ra=new yU(r,s)}}async function Km(t){if(sa(t))for(const e of t.da)await e(!0)}async function ed(t){for(const e of t.da)await e(!1)}function Rj(t,e){const n=Ee(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),F0(n)?V0(n):Gl(n).O_()&&L0(n,e))}function O0(t,e){const n=Ee(t),r=Gl(n);n.Ia.delete(e),r.O_()&&Dj(n,e),n.Ia.size===0&&(r.O_()?r.L_():sa(n)&&n.Ra.set("Unknown"))}function L0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gl(t).Y_(e)}function Dj(t,e){t.Va.Ue(e),Gl(t).Z_(e)}function V0(t){t.Va=new h8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Gl(t).start(),t.Ra.ua()}function F0(t){return sa(t)&&!Gl(t).x_()&&t.Ia.size>0}function sa(t){return Ee(t).Ea.size===0}function Mj(t){t.Va=void 0}async function xU(t){t.Ra.set("Online")}async function wU(t){t.Ia.forEach((e,n)=>{L0(t,e)})}async function bU(t,e){Mj(t),F0(t)?(t.Ra.ha(e),V0(t)):t.Ra.set("Unknown")}async function _U(t,e,n){if(t.Ra.set("Online"),e instanceof xj&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){fe(Jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Mf(t,r)}else if(e instanceof Dh?t.Va.Ze(e):e instanceof vj?t.Va.st(e):t.Va.tt(e),!n.isEqual(_e.min()))try{const r=await Ij(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Xt.EMPTY_BYTE_STRING,h.snapshotVersion)),Dj(i,c);const m=new Ai(h.target,c,u,h.sequenceNumber);L0(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){fe(Jo,"Failed to raise snapshot:",r),await Mf(t,r)}}async function Mf(t,e,n){if(!Wl(e))throw e;t.Ea.add(1),await ed(t),t.Ra.set("Offline"),n||(n=()=>Ij(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{fe(Jo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Km(t)})}function Oj(t,e){return e().catch(n=>Mf(t,n,e))}async function Qm(t){const e=Ee(t),n=no(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:b0;for(;SU(e);)try{const s=await sU(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,NU(e,s)}catch(s){await Mf(e,s)}Lj(e)&&Vj(e)}function SU(t){return sa(t)&&t.Ta.length<10}function NU(t,e){t.Ta.push(e);const n=no(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Lj(t){return sa(t)&&!no(t).x_()&&t.Ta.length>0}function Vj(t){no(t).start()}async function EU(t){no(t).ra()}async function TU(t){const e=no(t);for(const n of t.Ta)e.ea(n.mutations)}async function CU(t,e,n){const r=t.Ta.shift(),s=j0.from(r,e,n);await Oj(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qm(t)}async function kU(t,e){e&&no(t).X_&&await async function(r,s){if(function(a){return c8(a)&&a!==W.ABORTED}(s.code)){const i=r.Ta.shift();no(r).B_(),await Oj(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Qm(r)}}(t,e),Lj(t)&&Vj(t)}async function SS(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),fe(Jo,"RemoteStore received new credentials");const r=sa(n);n.Ea.add(3),await ed(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Km(n)}async function jU(t,e){const n=Ee(t);e?(n.Ea.delete(2),await Km(n)):e||(n.Ea.add(2),await ed(n),n.Ra.set("Unknown"))}function Gl(t){return t.ma||(t.ma=function(n,r,s){const i=Ee(n);return i.sa(),new fU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:xU.bind(null,t),t_:wU.bind(null,t),r_:bU.bind(null,t),H_:_U.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),F0(t)?V0(t):t.Ra.set("Unknown")):(await t.ma.stop(),Mj(t))})),t.ma}function no(t){return t.fa||(t.fa=function(n,r,s){const i=Ee(n);return i.sa(),new mU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:EU.bind(null,t),r_:kU.bind(null,t),ta:TU.bind(null,t),na:CU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Qm(t)):(await t.fa.stop(),t.Ta.length>0&&(fe(Jo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new z0(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function U0(t,e){if(Zs("AsyncQueue",`${e}: ${t}`),Wl(t))return new de(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{static emptySet(e){return new Ha(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=Nc(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ha)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ha;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.ga=new vt(ye.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tl{constructor(e,n,r,s,i,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Tl(e,n,Ha.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$m(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class AU{constructor(){this.queries=ES(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ee(n),i=s.queries;s.queries=ES(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new de(W.ABORTED,"Firestore shutting down"))}}function ES(){return new ra(t=>ij(t),$m)}async function $0(t,e){const n=Ee(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new IU,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=U0(a,`Initialization of query '${pa(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&H0(n)}async function B0(t,e){const n=Ee(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function PU(t,e){const n=Ee(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&H0(n)}function RU(t,e,n){const r=Ee(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function H0(t){t.Ca.forEach(e=>{e.next()})}var vv,TS;(TS=vv||(vv={})).Ma="default",TS.Cache="cache";class W0{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Tl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.key=e}}class zj{constructor(e){this.key=e}}class DU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=oj(e),this.tu=new Ha(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new NS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),g=Bm(this.query,m)?m:null,w=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;p&&g?p.data.isEqual(g.data)?w!==v&&(r.track({type:3,doc:g}),_=!0):this.su(p,g)||(r.track({type:2,doc:g}),_=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),_=!0):p&&!g&&(r.track({type:1,doc:p}),_=!0,(c||u)&&(l=!0)),_&&(g?(a=a.add(g),i=v?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,m)=>function(g,w){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:_})}};return v(g)-v(w)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new Tl(this.query,e.tu,i,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new NS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new zj(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Fj(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Tl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const q0="SyncEngine";class MU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OU{constructor(e){this.key=e,this.hu=!1}}class LU{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ra(l=>ij(l),$m),this.Iu=new Map,this.Eu=new Set,this.du=new vt(ye.comparator),this.Au=new Map,this.Ru=new P0,this.Vu={},this.mu=new Map,this.fu=El.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VU(t,e,n=!0){const r=qj(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Uj(r,e,n,!0),s}async function FU(t,e){const n=qj(t);await Uj(n,e,!0,!1)}async function Uj(t,e,n,r){const s=await iU(t.localStore,xs(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await zU(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Rj(t.remoteStore,s),l}async function zU(t,e,n,r,s){t.pu=(m,p,g)=>async function(v,_,b,x){let S=_.view.ru(b);S.Cs&&(S=await vS(v.localStore,_.query,!1).then(({documents:N})=>_.view.ru(N,S)));const j=x&&x.targetChanges.get(_.targetId),D=x&&x.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(S,v.isPrimaryClient,j,D);return kS(v,_.targetId,M.au),M.snapshot}(t,m,p,g);const i=await vS(t.localStore,e,!0),a=new DU(e,i.Qs),l=a.ru(i.documents),c=Zu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);kS(t,n,u.au);const h=new MU(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function UU(t,e,n){const r=Ee(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!$m(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&O0(r.remoteStore,s.targetId),xv(r,s.targetId)}).catch(Hl)):(xv(r,s.targetId),await gv(r.localStore,s.targetId,!0))}async function $U(t,e){const n=Ee(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),O0(n.remoteStore,r.targetId))}async function BU(t,e,n){const r=XU(t);try{const s=await function(a,l){const c=Ee(a),u=st.now(),h=l.reduce((g,w)=>g.add(w.key),Oe());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=ei(),v=Oe();return c.Ns.getEntries(g,h).next(_=>{w=_,w.forEach((b,x)=>{x.isValidDocument()||(v=v.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,w)).next(_=>{m=_;const b=[];for(const x of l){const S=s8(x,m.get(x.key).overlayedDocument);S!=null&&b.push(new ho(x.key,S,Y2(S.value.mapValue),_r.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,b,l)}).next(_=>{p=_;const b=_.applyToLocalDocumentSet(m,v);return c.documentOverlayCache.saveOverlays(g,_.batchId,b)})}).then(()=>({batchId:p.batchId,changes:lj(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new vt(Me)),u=u.insert(l,c),a.Vu[a.currentUser.toKey()]=u}(r,s.batchId,n),await td(r,s.changes),await Qm(r.remoteStore)}catch(s){const i=U0(s,"Failed to persist write");n.reject(i)}}async function $j(t,e){const n=Ee(t);try{const r=await nU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Ke(a.hu,14607):s.removedDocuments.size>0&&(Ke(a.hu,42227),a.hu=!1))}),await td(n,r,e)}catch(r){await Hl(r)}}function CS(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Ee(a);c.onlineState=l;let u=!1;c.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(l)&&(u=!0)}),u&&H0(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HU(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new vt(ye.comparator);a=a.insert(i,mn.newNoDocument(i,_e.min()));const l=Oe().add(i),c=new qm(_e.min(),new Map,new vt(Me),a,l);await $j(r,c),r.du=r.du.remove(i),r.Au.delete(e),G0(r)}else await gv(r.localStore,e,!1).then(()=>xv(r,e,n)).catch(Hl)}async function WU(t,e){const n=Ee(t),r=e.batch.batchId;try{const s=await tU(n.localStore,e);Hj(n,r,null),Bj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await td(n,s)}catch(s){await Hl(s)}}async function qU(t,e,n){const r=Ee(t);try{const s=await function(a,l){const c=Ee(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(m=>(Ke(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);Hj(r,e,n),Bj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await td(r,s)}catch(s){await Hl(s)}}function Bj(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Hj(t,e,n){const r=Ee(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function xv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Wj(t,r)})}function Wj(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(O0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),G0(t))}function kS(t,e,n){for(const r of n)r instanceof Fj?(t.Ru.addReference(r.key,e),GU(t,r)):r instanceof zj?(fe(q0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Wj(t,r.key)):xe(19791,{wu:r})}function GU(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(fe(q0,"New document in limbo: "+n),t.Eu.add(r),G0(t))}function G0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(rt.fromString(e)),r=t.fu.next();t.Au.set(r,new OU(n)),t.du=t.du.insert(n,r),Rj(t.remoteStore,new Ai(xs(Um(n.path)),r,"TargetPurposeLimboResolution",Vm.ce))}}async function td(t,e,n){const r=Ee(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const m=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){s.push(u);const m=D0.As(c.targetId,u);i.push(m)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,u){const h=Ee(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>q.forEach(u,p=>q.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(m,p.targetId,g)).next(()=>q.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(m,p.targetId,g)))))}catch(m){if(!Wl(m))throw m;fe(M0,"Failed to update sequence numbers: "+m)}for(const m of u){const p=m.targetId;if(!m.fromCache){const g=h.Ms.get(p),w=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,v)}}}(r.localStore,i))}async function KU(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){fe(q0,"User change. New user:",e.toKey());const r=await jj(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new de(W.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await td(n,r.Ls)}}function QU(t,e){const n=Ee(t),r=n.Au.get(e);if(r&&r.hu)return Oe().add(r.key);{let s=Oe();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function qj(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$j.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HU.bind(null,e),e.Pu.H_=PU.bind(null,e.eventManager),e.Pu.yu=RU.bind(null,e.eventManager),e}function XU(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qU.bind(null,e),e}class Of{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return eU(this.persistence,new Y8,e.initialUser,this.serializer)}Cu(e){return new kj(R0.mi,this.serializer)}Du(e){return new aU}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Of.provider={build:()=>new Of};class YU extends Of{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof Df,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new O8(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new kj(r=>Df.mi(r,n),this.serializer)}}class wv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>CS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KU.bind(null,this.syncEngine),await jU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AU}()}createDatastore(e){const n=Gm(e.databaseInfo.databaseId),r=function(i){return new hU(i)}(e.databaseInfo);return function(i,a,l,c){return new gU(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new vU(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>CS(this.syncEngine,n,0),function(){return bS.v()?new bS:new lU}())}createSyncEngine(e,n){return function(s,i,a,l,c,u,h){const m=new LU(s,i,a,l,c,u);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ee(s);fe(Jo,"RemoteStore shutting down."),i.Ea.add(5),await ed(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wv.provider={build:()=>new wv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Zs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="FirestoreClient";class JU{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dn.UNAUTHENTICATED,this.clientId=Om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{fe(ro,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(fe(ro,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=U0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jg(t,e){t.asyncQueue.verifyOperationInProgress(),fe(ro,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await jj(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZU(t);fe(ro,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>SS(e.remoteStore,s)),t._onlineComponents=e}async function ZU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(ro,"Using user provided OfflineComponentProvider");try{await jg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===W.FAILED_PRECONDITION||s.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Yo("Error using user provided cache. Falling back to memory cache: "+n),await jg(t,new Of)}}else fe(ro,"Using default OfflineComponentProvider"),await jg(t,new YU(void 0));return t._offlineComponents}async function Gj(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(ro,"Using user provided OnlineComponentProvider"),await jS(t,t._uninitializedComponentsProvider._online)):(fe(ro,"Using default OnlineComponentProvider"),await jS(t,new wv))),t._onlineComponents}function e7(t){return Gj(t).then(e=>e.syncEngine)}async function Lf(t){const e=await Gj(t),n=e.eventManager;return n.onListen=VU.bind(null,e.syncEngine),n.onUnlisten=UU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$U.bind(null,e.syncEngine),n}function t7(t,e,n={}){const r=new Us;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new K0({next:p=>{h.Nu(),a.enqueueAndForget(()=>B0(i,m));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new de(W.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new de(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new W0(Um(l.path),h,{includeMetadataChanges:!0,qa:!0});return $0(i,m)}(await Lf(t),t.asyncQueue,e,n,r)),r.promise}function n7(t,e,n={}){const r=new Us;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new K0({next:p=>{h.Nu(),a.enqueueAndForget(()=>B0(i,m)),p.fromCache&&c.source==="server"?u.reject(new de(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new W0(l,h,{includeMetadataChanges:!0,qa:!0});return $0(i,m)}(await Lf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj="firestore.googleapis.com",AS=!0;class PS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qj,this.ssl=AS}else this.host=e.host,this.ssl=e.ssl??AS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Cj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D8)throw new de(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kj(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new L2;switch(r.type){case"firstParty":return new fz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=IS.get(n);r&&(fe("ComponentProvider","Removing Datastore"),IS.delete(n),r.terminate())}(this),Promise.resolve()}}function Xj(t,e,n,r={}){var u;t=En(t,Xm);const s=zl(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Wk(`https://${l}`),qk("Firestore",!0)),i.host!==Qj&&i.host!==l&&Yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Xs(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=dn.MOCK_USER;else{h=M6(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new de(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new dn(p)}t._authCredentials=new uz(new O2(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Cs(this.firestore,e,this._query)}}class pt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pt(this.firestore,e,this._key)}toJSON(){return{type:pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Yu(n,pt._jsonSchema))return new pt(e,r||null,new ye(rt.fromString(n.referencePath)))}}pt._jsonSchemaVersion="firestore/documentReference/1.0",pt._jsonSchema={type:It("string",pt._jsonSchemaVersion),referencePath:It("string")};class $s extends Cs{constructor(e,n,r){super(e,n,Um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pt(this.firestore,null,new ye(e))}withConverter(e){return new $s(this.firestore,e,this._path)}}function gr(t,e,...n){if(t=Qt(t),V2("collection","path",e),t instanceof Xm){const r=rt.fromString(e,...n);return W_(r),new $s(t,null,r)}{if(!(t instanceof pt||t instanceof $s))throw new de(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return W_(r),new $s(t.firestore,null,r)}}function ze(t,e,...n){if(t=Qt(t),arguments.length===1&&(e=Om.newId()),V2("doc","path",e),t instanceof Xm){const r=rt.fromString(e,...n);return H_(r),new pt(t,null,new ye(r))}{if(!(t instanceof pt||t instanceof $s))throw new de(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return H_(r),new pt(t.firestore,t instanceof $s?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="AsyncQueue";class DS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Aj(this,"async_queue_retry"),this._c=()=>{const r=kg();r&&fe(RS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=kg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Us;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wl(e))throw e;fe(RS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Zs("INTERNAL UNHANDLED ERROR: ",MS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=z0.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&xe(47125,{Pc:MS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function MS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Es extends Xm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new DS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new DS(e),this._firestoreClient=void 0,await e}}}function Yj(t,e){const n=typeof t=="object"?t:Xk(),r=typeof t=="string"?t:kf,s=c0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=R6("firestore");i&&Xj(s,...i)}return s}function nd(t){if(t._terminated)throw new de(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||r7(t),t._firestoreClient}function r7(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new Iz(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Kj(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new JU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xn(Xt.fromBase64String(e))}catch(n){throw new de(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yu(e,Xn._jsonSchema))return Xn.fromBase64String(e.bytes)}}Xn._jsonSchemaVersion="firestore/bytes/1.0",Xn._jsonSchema={type:It("string",Xn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Yu(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:It("string",Br._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yu(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Hr(e.vectorValues);throw new de(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:It("string",Hr._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7=/^__.*__$/;class i7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ju(e,this.data,n,this.fieldTransforms)}}class Jj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ho(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Zj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:t})}}class Ym{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ym({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Zj(this.Ac)&&s7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class o7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gm(e)}Cc(e,n,r,s=!1){return new Ym({Ac:e,methodName:n,Dc:r,path:Gt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jm(t){const e=t._freezeSettings(),n=Gm(t._databaseId);return new o7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eI(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);J0("Data must be an object, but it was:",a,r);const l=nI(r,a);let c,u;if(i.merge)c=new tr(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const p=bv(e,m,n);if(!a.contains(p))throw new de(W.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);sI(h,p)||h.push(p)}c=new tr(h),u=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=a.fieldTransforms;return new i7(new Mn(l),c,u)}class Zm extends ia{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Zm}}function tI(t,e,n){return new Ym({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Q0 extends ia{_toFieldTransform(e){return new C0(e.path,new Tu)}isEqual(e){return e instanceof Q0}}class X0 extends ia{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=tI(this,e,!0),r=this.vc.map(i=>oa(i,n)),s=new Sl(r);return new C0(e.path,s)}isEqual(e){return e instanceof X0&&Xs(this.vc,e.vc)}}class Y0 extends ia{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=tI(this,e,!0),r=this.vc.map(i=>oa(i,n)),s=new Nl(r);return new C0(e.path,s)}isEqual(e){return e instanceof Y0&&Xs(this.vc,e.vc)}}function a7(t,e,n,r){const s=t.Cc(1,e,n);J0("Data must be an object, but it was:",s,r);const i=[],a=Mn.empty();uo(r,(c,u)=>{const h=Z0(e,c,n);u=Qt(u);const m=s.yc(h);if(u instanceof Zm)i.push(h);else{const p=oa(u,m);p!=null&&(i.push(h),a.set(h,p))}});const l=new tr(i);return new Jj(a,l,s.fieldTransforms)}function l7(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[bv(e,r,n)],c=[s];if(i.length%2!=0)throw new de(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(bv(e,i[p])),c.push(i[p+1]);const u=[],h=Mn.empty();for(let p=l.length-1;p>=0;--p)if(!sI(u,l[p])){const g=l[p];let w=c[p];w=Qt(w);const v=a.yc(g);if(w instanceof Zm)u.push(g);else{const _=oa(w,v);_!=null&&(u.push(g),h.set(g,_))}}const m=new tr(u);return new Jj(h,m,a.fieldTransforms)}function c7(t,e,n,r=!1){return oa(n,t.Cc(r?4:3,e))}function oa(t,e){if(rI(t=Qt(t)))return J0("Unsupported field value:",e,t),nI(t,e);if(t instanceof ia)return function(r,s){if(!Zj(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=oa(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Jz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=st.fromDate(r);return{timestampValue:Rf(s.serializer,i)}}if(r instanceof st){const i=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rf(s.serializer,i)}}if(r instanceof Br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xn)return{bytesValue:wj(s.serializer,r._byteString)};if(r instanceof pt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:A0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Hr)return function(a,l){return{mapValue:{fields:{[K2]:{stringValue:X2},[jf]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return T0(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Lm(r)}`)}(t,e)}function nI(t,e){const n={};return $2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uo(t,(r,s)=>{const i=oa(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function rI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Br||t instanceof Xn||t instanceof pt||t instanceof ia||t instanceof Hr)}function J0(t,e,n){if(!rI(n)||!z2(n)){const r=Lm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function bv(t,e,n){if((e=Qt(e))instanceof rd)return e._internalPath;if(typeof e=="string")return Z0(t,e);throw Vf("Field path arguments must be of type string or ",t,!1,void 0,n)}const u7=new RegExp("[~\\*/\\[\\]]");function Z0(t,e,n){if(e.search(u7)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rd(...e.split("."))._internalPath}catch{throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Vf(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new de(W.INVALID_ARGUMENT,l+t+c)}function sI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new d7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ep("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class d7 extends iI{data(){return super.data()}}function ep(t,e){return typeof e=="string"?Z0(t,e):e instanceof rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ew{}class tp extends ew{}function fs(t,e,...n){let r=[];e instanceof ew&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof np).length,l=i.filter(c=>c instanceof sd).length;if(a>1||a>0&&l>0)throw new de(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class sd extends tp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new sd(e,n,r)}_apply(e){const n=this._parse(e);return aI(e._query,n),new Cs(e.firestore,e.converter,dv(e._query,n))}_parse(e){const n=Jm(e.firestore);return function(i,a,l,c,u,h,m){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new de(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){VS(m,h);const w=[];for(const v of m)w.push(LS(c,i,v));p={arrayValue:{values:w}}}else p=LS(c,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||VS(m,h),p=c7(l,a,m,h==="in"||h==="not-in");return jt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gc(t,e,n){const r=e,s=ep("where",t);return sd._create(s,r,n)}class np extends ew{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new np(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Kr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)aI(a,c),a=dv(a,c)}(e._query,n),new Cs(e.firestore,e.converter,dv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rp extends tp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rp(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new de(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new de(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eu(i,a)}(e._query,this._field,this._direction);return new Cs(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new ql(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function zo(t,e="asc"){const n=e,r=ep("orderBy",t);return rp._create(r,n)}class sp extends tp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new sp(e,n,r)}_apply(e){return new Cs(e.firestore,e.converter,Af(e._query,this._limit,this._limitType))}}function Wa(t){return xz("limit",t),sp._create("limit",t,"F")}function LS(t,e,n){if(typeof(n=Qt(n))=="string"){if(n==="")throw new de(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sj(e)&&n.indexOf("/")!==-1)throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rt.fromString(n));if(!ye.isDocumentKey(r))throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Z_(t,new ye(r))}if(n instanceof pt)return Z_(t,n._key);throw new de(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lm(n)}.`)}function VS(t,e){if(!Array.isArray(t)||t.length===0)throw new de(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function aI(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new de(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lI{convertValue(e,n="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return uo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[jf].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Nt(a.doubleValue));return new Hr(n)}convertGeoPoint(e){return new Br(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const n=Zi(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);Ke(Tj(r),9688,{name:e});const s=new wl(r.get(1),r.get(3)),i=new ye(r.popFirst(5));return s.isEqual(n)||Zs(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Aa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wi extends iI{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ep("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wi._jsonSchema={type:It("string",Wi._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class Kc extends Wi{data(e={}){return super.data(e)}}class qi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Aa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kc(this._firestore,this._userDataWriter,r.key,r,new Aa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Kc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Aa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Kc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Aa(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:h7(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t){t=En(t,pt);const e=En(t.firestore,Es);return t7(nd(e),t._key).then(n=>uI(e,t,n))}qi._jsonSchemaVersion="firestore/querySnapshot/1.0",qi._jsonSchema={type:It("string",qi._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class tw extends lI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pt(this.firestore,null,n)}}function Tc(t){t=En(t,Cs);const e=En(t.firestore,Es),n=nd(e),r=new tw(e);return oI(t._query),n7(n,t._query).then(s=>new qi(e,r,t,s))}function gn(t,e,n){t=En(t,pt);const r=En(t.firestore,Es),s=cI(t.converter,e,n);return id(r,[eI(Jm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_r.none())])}function Pa(t,e,n,...r){t=En(t,pt);const s=En(t.firestore,Es),i=Jm(s);let a;return a=typeof(e=Qt(e))=="string"||e instanceof rd?l7(i,"updateDoc",t._key,e,n,r):a7(i,"updateDoc",t._key,e),id(s,[a.toMutation(t._key,_r.exists(!0))])}function nw(t){return id(En(t.firestore,Es),[new k0(t._key,_r.none())])}function ip(t,e){const n=En(t.firestore,Es),r=ze(t),s=cI(t.converter,e);return id(n,[eI(Jm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}function Sr(t,...e){var c,u,h;t=Qt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||OS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(OS(e[r])){const m=e[r];e[r]=(c=m.next)==null?void 0:c.bind(m),e[r+1]=(u=m.error)==null?void 0:u.bind(m),e[r+2]=(h=m.complete)==null?void 0:h.bind(m)}let i,a,l;if(t instanceof pt)a=En(t.firestore,Es),l=Um(t._key.path),i={next:m=>{e[r]&&e[r](uI(a,t,m))},error:e[r+1],complete:e[r+2]};else{const m=En(t,Cs);a=En(m.firestore,Es),l=m._query;const p=new tw(a);i={next:g=>{e[r]&&e[r](new qi(a,p,m,g))},error:e[r+1],complete:e[r+2]},oI(t._query)}return function(p,g,w,v){const _=new K0(v),b=new W0(g,_,w);return p.asyncQueue.enqueueAndForget(async()=>$0(await Lf(p),b)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>B0(await Lf(p),b))}}(nd(a),l,s,i)}function id(t,e){return function(r,s){const i=new Us;return r.asyncQueue.enqueueAndForget(async()=>BU(await e7(r),s,i)),i.promise}(nd(t),e)}function uI(t,e,n){const r=n.docs.get(e._key),s=new tw(t);return new Wi(t,s,e._key,r,new Aa(n.hasPendingWrites,n.fromCache),e.converter)}function op(){return new Q0("serverTimestamp")}function rw(...t){return new X0("arrayUnion",t)}function dI(...t){return new Y0("arrayRemove",t)}(function(e,n=!0){(function(s){Bl=s})(Ul),yl(new Ko("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Es(new dz(r.getProvider("auth-internal")),new mz(a,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new de(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wl(u.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Bi(z_,U_,e),Bi(z_,U_,"esm2020")})();const FS=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:lI,Bytes:Xn,CollectionReference:$s,DocumentReference:pt,DocumentSnapshot:Wi,FieldPath:rd,FieldValue:ia,Firestore:Es,FirestoreError:de,GeoPoint:Br,Query:Cs,QueryCompositeFilterConstraint:np,QueryConstraint:tp,QueryDocumentSnapshot:Kc,QueryFieldFilterConstraint:sd,QueryLimitConstraint:sp,QueryOrderByConstraint:rp,QuerySnapshot:qi,SnapshotMetadata:Aa,Timestamp:st,VectorValue:Hr,_AutoId:Om,_ByteString:Xt,_DatabaseId:wl,_DocumentKey:ye,_EmptyAuthCredentialsProvider:L2,_FieldPath:Gt,_cast:En,_logWarn:Yo,_validateIsNotUsedTogether:F2,addDoc:ip,arrayRemove:dI,arrayUnion:rw,collection:gr,connectFirestoreEmulator:Xj,deleteDoc:nw,doc:ze,ensureFirestoreConfigured:nd,executeWrite:id,getDoc:Qr,getDocs:Tc,getFirestore:Yj,limit:Wa,onSnapshot:Sr,orderBy:zo,query:fs,serverTimestamp:op,setDoc:gn,updateDoc:Pa,where:Gc},Symbol.toStringTag,{value:"Module"})),f7={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},sw=Qk(f7),To=oz(sw),Ne=Yj(sw),Xr=new hn;Xr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Xr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Xr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Xr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Xr.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly");Xr.addScope("https://www.googleapis.com/auth/calendar");Xr.addScope("https://www.googleapis.com/auth/gmail.send");Xr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const zS=Object.freeze(Object.defineProperty({__proto__:null,app:sw,auth:To,db:Ne,googleProvider:Xr},Symbol.toStringTag,{value:"Module"})),hI=f.createContext(void 0);function m7({children:t}){const[e,n]=f.useState(null),[r,s]=f.useState(!0),[i,a]=f.useState(()=>localStorage.getItem("google_access_token")),[l,c]=f.useState(null),[u,h]=f.useState(()=>localStorage.getItem("user_role"));f.useEffect(()=>QF(To,x=>{n(x),x||(h(null),s(!1),a(null),localStorage.removeItem("google_access_token"))}),[]),f.useEffect(()=>{async function b(){if(!e||!i){if(e&&!i){const x=localStorage.getItem("google_access_token");if(x){a(x);return}}e||s(!1);return}try{s(!0);const x=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let S=!1;if(x.ok){const M=await x.json();M.courses&&M.courses.length>0&&(S=!0)}if(S){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const j=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let D=!1;if(j.ok){const M=await j.json();M.courses&&M.courses.length>0&&(D=!0)}D?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(x){console.error("Role detection failed:",x),h("no_access")}finally{s(!1)}}b()},[e,i]);const m=async()=>{try{c(null),Xr.setCustomParameters({prompt:"consent",access_type:"offline"});const b=await Xd(To,Xr),x=hn.credentialFromResult(b);x!=null&&x.accessToken&&(a(x.accessToken),localStorage.setItem("google_access_token",x.accessToken))}catch(b){const x=b instanceof Error?b.message:"Failed to sign in";c(x),console.error("Sign in error:",b)}},p=async()=>{try{c(null);const b=new hn;b.addScope("https://www.googleapis.com/auth/gmail.send"),b.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),b.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await Xd(To,b),S=hn.credentialFromResult(x),j=x._tokenResponse;if(S!=null&&S.accessToken&&(a(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),j!=null&&j.oauthRefreshToken){const{doc:D,setDoc:M,serverTimestamp:N}=await Ia(async()=>{const{doc:T,setDoc:k,serverTimestamp:I}=await Promise.resolve().then(()=>FS);return{doc:T,setDoc:k,serverTimestamp:I}},void 0),{db:C}=await Ia(async()=>{const{db:T}=await Promise.resolve().then(()=>zS);return{db:T}},void 0);if(e&&j.oauthRefreshToken)return await M(D(C,"users",e.uid,"private_tokens","google"),{refreshToken:j.oauthRefreshToken,updatedAt:N()}),!0}return!!(S!=null&&S.accessToken)}catch(b){const x=b instanceof Error?b.message:"Failed to get Gmail permissions";return c(x),console.error("Permission error:",b),!1}},g=async()=>{try{c(null);const b=new hn;b.addScope("https://www.googleapis.com/auth/calendar.events"),b.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await Xd(To,b),S=hn.credentialFromResult(x),j=x._tokenResponse;if(S!=null&&S.accessToken&&(a(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),e&&(j!=null&&j.oauthRefreshToken)){const{doc:D,setDoc:M,serverTimestamp:N}=await Ia(async()=>{const{doc:T,setDoc:k,serverTimestamp:I}=await Promise.resolve().then(()=>FS);return{doc:T,setDoc:k,serverTimestamp:I}},void 0),{db:C}=await Ia(async()=>{const{db:T}=await Promise.resolve().then(()=>zS);return{db:T}},void 0);return await M(D(C,"users",e.uid,"private_tokens","calendar"),{refreshToken:j.oauthRefreshToken,updatedAt:N(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(b){const x=b instanceof Error?b.message:"Failed to get Calendar permissions";return c(x),console.error("Permission error:",b),!1}},w=async()=>{if(!e)return!1;try{const b=new hn;b.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),b.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),b.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const x=await Xd(To,b),S=hn.credentialFromResult(x);return S!=null&&S.accessToken?(a(S.accessToken),localStorage.setItem("google_access_token",S.accessToken),console.log("Access token refreshed successfully"),!0):!1}catch(b){return console.error("Failed to refresh access token:",b),!1}},v=async()=>w(),_=async()=>{try{await XF(To),a(null),h(null),localStorage.removeItem("google_access_token"),localStorage.removeItem("user_role")}catch(b){const x=b instanceof Error?b.message:"Failed to sign out";c(x)}};return o.jsx(hI.Provider,{value:{user:e,loading:r,role:u,accessToken:i,signInWithGoogle:m,requestGmailPermissions:p,requestCalendarPermissions:g,refreshAccessToken:v,signOut:_,error:l},children:t})}function ot(){const t=f.useContext(hI);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const fI=f.createContext(void 0);function p7({children:t}){const[e,n]=f.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});f.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return o.jsx(fI.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function iw(){const t=f.useContext(fI);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}class g7{static calculateXP(e){let n=0;const r=[];for(const s of e)if(s.systemStatus==="submitted"||s.systemStatus==="graded"){if(n+=100,s.submittedAt&&s.dueDate){const a=new Date(s.submittedAt).getTime();(new Date(s.dueDate).getTime()-a)/(1e3*60*60)>48&&(n+=50)}r.push(s.id)}return{totalXP:n,processedIds:r}}static calculateBadges(e,n){const r=new Set(n);return e>=10&&r.add("10-submissions"),e>=25&&r.add("25-submissions"),e>=50&&r.add("50-submissions"),Array.from(r)}static async syncUserLeaderboard(e,n,r,s,i,a){var l;try{const{totalXP:c,processedIds:u}=this.calculateXP(i),h=n.includes("@")?n.split("@")[1]:"",m=a.map(b=>b.id),p=ze(Ne,"leaderboards","all-courses","students",e),g=await Qr(p),w=g.exists()?g.data().badges||[]:[],v=this.calculateBadges(u.length,w);await gn(p,{displayName:r||"Anonymous",photoUrl:s||"",email:n,emailDomain:h,enrolledCourseIds:m,totalXP:c,processedAssignmentIds:u,lastSyncedAt:op(),badges:v},{merge:!0});const _=v.filter(b=>!w.includes(b));if(_.length>0){const{BADGES:b}=await Ia(async()=>{const{BADGES:x}=await Promise.resolve().then(()=>qP);return{BADGES:x}},void 0);for(const x of _)await ip(gr(Ne,"activities"),{userId:e,userName:r||"Anonymous",userAvatar:s||null,type:"badge_earned",content:`${r||"Anonymous"} earned the '${((l=b[x])==null?void 0:l.label)||"New Badge"}' badge!`,courseId:"all-courses",createdAt:new Date().toISOString()})}}catch(c){throw console.error(" Failed to sync leaderboard:",c),c}}static async resetLeaderboardForSemester(e){try{const n=ze(Ne,"leaderboards","all-courses","students",e);await nw(n),console.log(` Leaderboard reset for user ${e}`)}catch(n){throw console.error(" Failed to reset leaderboard:",n),n}}static async hasCoursesChanged(e,n){try{const r=ze(Ne,"leaderboards","all-courses","students",e),s=await Qr(r);if(!s.exists())return!1;const i=s.data().enrolledCourseIds||[],a=new Set(n),l=new Set(i);if(a.size!==l.size)return console.log("   Course count changed - semester change detected"),!0;for(const c of n)if(!l.has(c))return console.log(`   New course detected: ${c} - semester change detected`),!0;for(const c of i)if(!a.has(c))return console.log(`   Course removed: ${c} - semester change detected`),!0;return!1}catch(r){return console.error(" Failed to check course changes:",r),!1}}static async autoSyncOnLogin(e,n,r,s,i,a){try{const l=a.map(u=>u.id);await this.hasCoursesChanged(e,l)&&(console.log(" Semester change detected, resetting leaderboard..."),await this.resetLeaderboardForSemester(e)),await this.syncUserLeaderboard(e,n,r,s,i,a)}catch(l){throw console.error(" Auto-sync failed:",l),l}}}const yr={get:t=>{try{const e=localStorage.getItem(`trace_cache_${t}`);if(!e)return null;const n=JSON.parse(e);return Date.now()>n.expiresAt?(localStorage.removeItem(`trace_cache_${t}`),null):n.data}catch(e){return console.warn("Cache parse error",e),null}},set:(t,e,n)=>{try{const r={data:e,timestamp:Date.now(),expiresAt:Date.now()+n*1e3};localStorage.setItem(`trace_cache_${t}`,JSON.stringify(r))}catch(r){console.warn("Cache write error (quota?)",r)}},remove:t=>{localStorage.removeItem(`trace_cache_${t}`)},clearAll:()=>{Object.keys(localStorage).forEach(t=>{t.startsWith("trace_cache_")&&localStorage.removeItem(t)})}},US={async fetchCourses(t,e){const n=yr.get(`courses_${e}`);if(n)return n;const r="https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE&fields=courses(id,name,section,descriptionHeading,room,ownerId,enrollmentCode,courseState,alternateLink)";let s=[],i="";try{do{const l=`${r}${i?`&pageToken=${i}`:""}`,c=await fetch(l,{headers:{Authorization:`Bearer ${t}`}});if(!c.ok)throw new Error("Failed to fetch courses");const u=await c.json();u.courses&&(s=s.concat(u.courses)),i=u.nextPageToken}while(i)}catch(l){return console.warn("Fetch courses error",l),[]}const a=s.map(l=>({id:l.id,userId:e,classroomId:l.id,name:l.name,section:l.section||null,descriptionHeading:l.descriptionHeading||null,room:l.room||null,ownerId:l.ownerId||null,enrollmentCode:l.enrollmentCode||null,courseState:l.courseState||"ACTIVE",alternateLink:l.alternateLink||null,lastSyncedAt:new Date().toISOString(),color:y7(l.id)}));return yr.set(`courses_${e}`,a,60*60*24),a},async fetchAssignmentsParallel(t,e){const n=[];return(await Promise.allSettled(e.map(async s=>{const i=`assignments_${s.id}`,a=yr.get(i);if(a)return a;const l=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork?courseWorkStates=PUBLISHED&fields=courseWork(id,title,description,dueDate,dueTime,maxPoints,alternateLink,workType,creationTime,updateTime)`,c=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork/-/studentSubmissions?userId=me&fields=studentSubmissions(id,courseWorkId,state,assignedGrade,turnInTime,updateTime,late)`,[u,h]=await Promise.all([fetch(l,{headers:{Authorization:`Bearer ${t}`}}).then(w=>w.ok?w.json():{courseWork:[]}),fetch(c,{headers:{Authorization:`Bearer ${t}`}}).then(w=>w.ok?w.json():{studentSubmissions:[]})]),m=u.courseWork||[],p=h.studentSubmissions||[],g=m.filter(w=>!w.workType||w.workType==="ASSIGNMENT"||w.workType==="MULTIPLE_CHOICE_QUESTION").map(w=>{const v=p.find(_=>_.courseWorkId===w.id);return v7(w,s,v)});return yr.set(i,g,3600),g}))).forEach(s=>{s.status==="fulfilled"&&n.push(...s.value)}),n}},$S=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function y7(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%$S.length;return $S[n]}function v7(t,e,n){var m,p;let r=null,s=null;t.dueDate&&(r=new Date(t.dueDate.year,t.dueDate.month-1,t.dueDate.day,((m=t.dueTime)==null?void 0:m.hours)||23,((p=t.dueTime)==null?void 0:p.minutes)||59).toISOString(),t.dueTime&&(s=`${String(t.dueTime.hours).padStart(2,"0")}:${String(t.dueTime.minutes).padStart(2,"0")}`));const i=new Date;let a="backlog",l="backlog",c=null,u=null,h=null;return n&&(n.state==="TURNED_IN"?(a="submitted",l="submitted",u=n.turnInTime||n.updateTime):n.state==="RETURNED"&&(a="graded",l="graded",c=n.assignedGrade)),r&&new Date(r)<i&&l==="backlog"&&(l="overdue",a="overdue"),{id:`assign-${t.id}`,uniqueId:`${e.id}-${t.id}`,userId:e.userId,courseId:e.id,courseName:e.name,classroomId:t.id,title:t.title,description:t.description||null,dueDate:r,dueTime:s,maxPoints:t.maxPoints||null,systemStatus:l,userStatus:a,submissionId:(n==null?void 0:n.id)||null,submittedAt:u?new Date(u).toISOString():null,gradedAt:h?new Date(h).toISOString():null,grade:c||null,alternateLink:t.alternateLink||null,createdAt:t.creationTime||i.toISOString(),lastSyncedAt:i.toISOString()}}async function x7(t,e,n,r){const s=ze(Ne,"users",n,"settings","calendar"),i=await Qr(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],m={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Trace`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),m.end.date=p.toISOString().split("T")[0];const g=ze(Ne,"users",n,"calendarEvents",c.id),w=await Qr(g),v="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let _;if(w.exists()){const{calendarEventId:b}=w.data();_=await fetch(`${v}/${b}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(m)})}else if(_=await fetch(v,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(m)}),_.ok){const b=await _.json();await gn(g,{calendarEventId:b.id,assignmentId:c.id,updatedAt:op()})}if(!_.ok&&_.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(_){console.warn(`Failed to sync assignment ${c.id} to calendar`,_)}}}const mI=f.createContext(void 0);function w7(){return Math.random().toString(36).substring(2,15)}async function BS(t,e,n,r){var a;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e,u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,g={};try{const w=await u.json();g=w,p=((a=w.error)==null?void 0:a.message)||w.message||p,console.error("API Error Response:",w)}catch{const v=await u.text().catch(()=>"");console.error("API Error (non-JSON):",v)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),m=n(h);s.push(...m),i=r(h)}while(i);return s}async function b7(t,e,n,r,s){const i=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`,a=`https://classroom.googleapis.com/v1/courses/${e}/announcements?announcementStates=PUBLISHED`;try{const[l,c]=await Promise.all([BS(t,i,p=>p.courseWorkMaterial||[],p=>p.nextPageToken).catch(p=>(console.warn(`Failed to fetch courseWorkMaterials for ${e}:`,p),[])),BS(t,a,p=>p.announcements||[],p=>p.nextPageToken).catch(p=>{var g,w;return((g=p.message)!=null&&g.includes("insufficient authentication scopes")||(w=p.message)!=null&&w.includes("403"))&&(s==null||s()),console.warn(`Failed to fetch announcements for ${e}:`,p),[]})]),u=new Date().toISOString(),h=l.map(p=>({id:`mat-${p.id}`,uniqueId:`${e}-${p.id}`,userId:r,courseId:e,courseName:n,title:p.title,description:p.description||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u})),m=c.filter(p=>p.materials&&p.materials.length>0).map(p=>{const g=p.text||"Announcement Material",w=g.split(`
`)[0].length>60?g.split(`
`)[0].substring(0,57)+"...":g.split(`
`)[0];return{id:`ann-${p.id}`,uniqueId:`${e}-ann-${p.id}`,userId:r,courseId:e,courseName:n,title:w,description:p.text||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u}});return[...h,...m]}catch(l){return console.warn(`Failed to fetch materials for course ${e}:`,l),[]}}function _7({children:t}){const{user:e,accessToken:n,refreshAccessToken:r,loading:s}=ot(),{toast:i}=lo(),[a,l]=f.useState(()=>{if(!e)return[];const z=yr.get(`courses_${e.uid}`);if(z)return z;const $=localStorage.getItem("classroom_courses");return $?JSON.parse($):[]}),[c,u]=f.useState(()=>{if(!e)return[];const z=localStorage.getItem("classroom_assignments");return z?JSON.parse(z):[]}),[h,m]=f.useState(()=>{const z=localStorage.getItem("classroom_materials");return z?JSON.parse(z):[]}),[p,g]=f.useState(()=>{const z=localStorage.getItem("classroom_notes");return z?new Map(JSON.parse(z)):new Map}),[w,v]=f.useState(()=>e&&yr.get(`courses_${e.uid}`)?!1:!localStorage.getItem("classroom_courses")),[_,b]=f.useState(!1),[x,S]=f.useState(()=>{const z=localStorage.getItem("classroom_lastSyncedAt");return z?new Date(z):null}),[j,D]=f.useState(null),[M,N]=f.useState(!1),[C,T]=f.useState(!1);f.useEffect(()=>{!s&&!e&&(l([]),u([]),m([]),g(new Map),S(null),N(!1),yr.clearAll(),localStorage.removeItem("classroom_courses"),localStorage.removeItem("classroom_assignments"),localStorage.removeItem("classroom_materials"),localStorage.removeItem("classroom_notes"),localStorage.removeItem("classroom_lastSyncedAt"))},[s,e]);const k=f.useCallback(async(z=!1)=>{if(!e)return;let $=n;if(!$)try{await r()&&($=localStorage.getItem("google_access_token"))}catch(G){console.error(G)}if(!$){D("Session expired. Please sign in again.");return}b(!0),D(null);try{const G=await US.fetchCourses($,e.uid);l(ie=>JSON.stringify(ie)!==JSON.stringify(G)?G:ie);const ee=await US.fetchAssignmentsParallel($,G);u(ee),S(new Date),Promise.all(G.map(ie=>b7($,ie.classroomId,ie.name,e.uid,()=>T(!0)))).then(ie=>{const ne=ie.flat();m(ne)}),x7(ee,$,e.uid,i).catch(ie=>console.warn(ie)),g7.autoSyncOnLogin(e.uid,e.email||"",e.displayName||"Anonymous",e.photoURL||"",ee,G).catch(console.warn)}catch(G){console.error("Sync Error",G),D(G.message||"Failed to sync"),z||i({variant:"destructive",title:"Sync Failed",description:G.message})}finally{b(!1),v(!1)}},[e,n,r,i]);f.useEffect(()=>{!e||!n||!M&&!_&&(N(!0),k(!0))},[e,n,M,_,k]),f.useEffect(()=>{localStorage.setItem("classroom_courses",JSON.stringify(a))},[a]),f.useEffect(()=>{localStorage.setItem("classroom_materials",JSON.stringify(h))},[h]),f.useEffect(()=>{localStorage.setItem("classroom_notes",JSON.stringify(Array.from(p.entries())))},[p]),f.useEffect(()=>{localStorage.setItem("classroom_assignments",JSON.stringify(c))},[c]),f.useEffect(()=>{x&&localStorage.setItem("classroom_lastSyncedAt",x.toISOString())},[x]);const I=f.useCallback((z,$)=>{u(G=>G.map(ee=>ee.id===z?{...ee,userStatus:$}:ee))},[]),R=f.useCallback((z,$,G=!1)=>{const ee={id:w7(),userId:(e==null?void 0:e.uid)||"",assignmentId:z,content:$,isImportant:G,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};g(ie=>{const ne=new Map(ie),oe=ne.get(z)||[];return ne.set(z,[...oe,ee]),ne})},[e]),P=f.useCallback((z,$,G)=>{g(ee=>{const ie=new Map(ee);for(const[ne,oe]of Array.from(ie.entries())){const V=oe.findIndex(Y=>Y.id===z);if(V!==-1){const Y=[...oe];Y[V]={...Y[V],content:$,isImportant:G??Y[V].isImportant,updatedAt:new Date().toISOString()},ie.set(ne,Y);break}}return ie})},[]),O=f.useCallback((z,$)=>{g(G=>{const ee=new Map(G),ie=ee.get($)||[];return ee.set($,ie.filter(ne=>ne.id!==z)),ee})},[]),re=f.useCallback(()=>{const z=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return c.forEach($=>{let G=$.systemStatus;$.userStatus==="in_progress"&&G!=="submitted"&&G!=="graded"&&(G="in_progress");const ee=z.find(ie=>ie.id===G);ee&&ee.assignments.push($)}),z.forEach($=>{$.assignments.sort((G,ee)=>G.dueDate?ee.dueDate?new Date(G.dueDate).getTime()-new Date(ee.dueDate).getTime():-1:1)}),z},[c]),J=f.useCallback(()=>{const z=new Date,$=new Date(z);$.setDate($.getDate()+3);const G=new Date(z);G.setDate(G.getDate()+7);const ee=c.filter(te=>te.systemStatus!=="graded"&&te.systemStatus!=="submitted"),ie=c.filter(te=>{if(!te.dueDate||te.systemStatus==="graded"||te.systemStatus==="submitted")return!1;const ce=new Date(te.dueDate);return ce>=z&&ce<=$}),ne=c.filter(te=>{if(!te.dueDate||te.systemStatus==="graded"||te.systemStatus==="submitted")return!1;const ce=new Date(te.dueDate);return ce>=z&&ce<=G}),oe=c.filter(te=>te.systemStatus==="overdue"),V=[],Y=new Date,he=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let te=0;te<7;te++){const ce=new Date(Y);ce.setDate(ce.getDate()+te);const Se=ce.toISOString().split("T")[0],Le=c.filter(ft=>ft.dueDate&&ft.dueDate.startsWith(Se)).length;V.push({day:he[ce.getDay()],count:Le,isToday:te===0})}const Q=[...ee].filter(te=>te.dueDate).sort((te,ce)=>new Date(te.dueDate).getTime()-new Date(ce.dueDate).getTime()).slice(0,5);return{totalActive:ee.length,upcoming3Days:ie.length,upcoming7Days:ne.length,overdue:oe.length,weeklyWorkload:V,nextActions:Q}},[c]),X=f.useCallback(z=>{let $=[...c];z!=null&&z.courseId&&($=$.filter(ne=>ne.courseId===z.courseId)),z!=null&&z.status&&($=$.filter(ne=>ne.systemStatus===z.status)),$.sort((ne,oe)=>ne.dueDate?oe.dueDate?new Date(ne.dueDate).getTime()-new Date(oe.dueDate).getTime():-1:1);const G=new Map,ee=new Date,ie=new Date(ee);return ie.setDate(ie.getDate()+1),$.forEach(ne=>{if(!ne.dueDate)return;const oe=ne.dueDate.split("T")[0],V=new Date(ne.dueDate);let Y=oe===ee.toISOString().split("T")[0]?"Today":oe===ie.toISOString().split("T")[0]?"Tomorrow":V.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});G.has(oe)||G.set(oe,{date:oe,dateLabel:Y,assignments:[]}),G.get(oe).assignments.push(ne)}),Array.from(G.values())},[c]),L=f.useCallback(z=>c.find($=>$.id===z),[c]),H=f.useCallback(z=>p.get(z)||[],[p]);return o.jsx(mI.Provider,{value:{courses:a,assignments:c,notes:p,isLoading:w,isSyncing:_,lastSyncedAt:x,error:j,syncClassroom:k,updateAssignmentStatus:I,addNote:R,updateNote:P,deleteNote:O,getPipelineColumns:re,getDashboardMetrics:J,getTimelineGroups:X,getAssignmentById:L,getNotesForAssignment:H,materials:h,reauthRequired:C},children:t})}function On(){const t=f.useContext(mI);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}const Ig=768;function ap(){const[t,e]=f.useState(void 0);return f.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Ig-1}px)`),r=()=>{e(window.innerWidth<Ig)};return n.addEventListener("change",r),e(window.innerWidth<Ig),()=>n.removeEventListener("change",r)},[]),!!t}var ow="Avatar",[S7,qG]=lr(ow),[N7,pI]=S7(ow),gI=f.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=f.useState("idle");return o.jsx(N7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(ve.span,{...r,ref:e})})});gI.displayName=ow;var yI="AvatarImage",vI=f.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=pI(yI,n),l=E7(r,i),c=_t(u=>{s(u),a.onImageLoadingStatusChange(u)});return At(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(ve.img,{...i,ref:e,src:r}):null});vI.displayName=yI;var xI="AvatarFallback",wI=f.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=pI(xI,n),[a,l]=f.useState(r===void 0);return f.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(ve.span,{...s,ref:e}):null});wI.displayName=xI;function HS(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function E7(t,{referrerPolicy:e,crossOrigin:n}){const r=C7(),s=f.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=f.useState(()=>HS(i,t));return At(()=>{l(HS(i,t))},[i,t]),At(()=>{const c=m=>()=>{l(m)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),a}function T7(){return()=>{}}function C7(){return f.useSyncExternalStore(T7,()=>!0,()=>!1)}var bI=gI,_I=vI,SI=wI;const Yn=f.forwardRef(({className:t,...e},n)=>o.jsx(bI,{ref:n,className:U(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));Yn.displayName=bI.displayName;const Jn=f.forwardRef(({className:t,...e},n)=>o.jsx(_I,{ref:n,className:U("aspect-square h-full w-full",t),...e}));Jn.displayName=_I.displayName;const Zn=f.forwardRef(({className:t,...e},n)=>o.jsx(SI,{ref:n,className:U("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Zn.displayName=SI.displayName;const k7=[{path:"/dashboard",label:"Dashboard",icon:$C},{path:"/pipeline",label:"Pipeline",icon:WC},{path:"/leaderboard",label:"Leaderboard",icon:$u},{path:"/clans",label:"Clans",icon:zc},{path:"/timeline",label:"Timeline",icon:co},{path:"/attendance",label:"Attendance",icon:XC},{path:"/notes",label:"Notes",icon:Vo}];function j7({mobileOpen:t,onMobileClose:e}){var h,m;const[n]=mm(),r=ap(),{user:s,signOut:i}=ot(),{theme:a,toggleTheme:l}=iw(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((m=s==null?void 0:s.email)==null?void 0:m[0].toUpperCase())||"U",u=()=>o.jsxs("div",{className:"flex flex-col h-full bg-background",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&o.jsx("button",{className:"ml-auto",onClick:e,children:o.jsx(bs,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-4 border-b shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Yn,{className:"h-8 w-8",children:[o.jsx(Jn,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(Zn,{className:"text-xs",children:c})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:o.jsxs("div",{className:"mb-6",children:[o.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),k7.map(p=>{const g=n===p.path,w=p.icon;return o.jsxs(Un,{href:p.path,onClick:e,className:U("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",g?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[o.jsx(w,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),o.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx(Hx,{className:"w-4 h-4 mr-3"}):o.jsx(bm,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(Un,{href:"/settings",onClick:e,className:U("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[o.jsx(Bx,{className:"w-4 h-4 mr-3"}),"Settings"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:U("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:o.jsx(u,{})}),r&&t&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const Ds=f.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:U("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Ds.displayName="Input";const aw=zu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ae=f.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?XM:"button";return o.jsx(a,{className:U(aw({variant:e,size:n,className:t})),ref:i,...s})});ae.displayName="Button";var Ag=0;function lw(){f.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??WS()),document.body.insertAdjacentElement("beforeend",t[1]??WS()),Ag++,()=>{Ag===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ag--}},[])}function WS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Pg="focusScope.autoFocusOnMount",Rg="focusScope.autoFocusOnUnmount",qS={bubbles:!1,cancelable:!0},I7="FocusScope",lp=f.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=f.useState(null),u=_t(s),h=_t(i),m=f.useRef(null),p=Pe(e,v=>c(v)),g=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let v=function(S){if(g.paused||!l)return;const j=S.target;l.contains(j)?m.current=j:pi(m.current,{select:!0})},_=function(S){if(g.paused||!l)return;const j=S.relatedTarget;j!==null&&(l.contains(j)||pi(m.current,{select:!0}))},b=function(S){if(document.activeElement===document.body)for(const D of S)D.removedNodes.length>0&&pi(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),x.disconnect()}}},[r,l,g.paused]),f.useEffect(()=>{if(l){KS.add(g);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent(Pg,qS);l.addEventListener(Pg,u),l.dispatchEvent(b),b.defaultPrevented||(A7(O7(NI(l)),{select:!0}),document.activeElement===v&&pi(l))}return()=>{l.removeEventListener(Pg,u),setTimeout(()=>{const b=new CustomEvent(Rg,qS);l.addEventListener(Rg,h),l.dispatchEvent(b),b.defaultPrevented||pi(v??document.body,{select:!0}),l.removeEventListener(Rg,h),KS.remove(g)},0)}}},[l,u,h,g]);const w=f.useCallback(v=>{if(!n&&!r||g.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(_&&b){const x=v.currentTarget,[S,j]=P7(x);S&&j?!v.shiftKey&&b===j?(v.preventDefault(),n&&pi(S,{select:!0})):v.shiftKey&&b===S&&(v.preventDefault(),n&&pi(j,{select:!0})):b===x&&v.preventDefault()}},[n,r,g.paused]);return o.jsx(ve.div,{tabIndex:-1,...a,ref:p,onKeyDown:w})});lp.displayName=I7;function A7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(pi(r,{select:e}),document.activeElement!==n)return}function P7(t){const e=NI(t),n=GS(e,t),r=GS(e.reverse(),t);return[n,r]}function NI(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function GS(t,e){for(const n of t)if(!R7(n,{upTo:e}))return n}function R7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function D7(t){return t instanceof HTMLInputElement&&"select"in t}function pi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&D7(t)&&e&&t.select()}}var KS=M7();function M7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=QS(t,e),t.unshift(e)},remove(e){var n;t=QS(t,e),(n=t[0])==null||n.resume()}}}function QS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function O7(t){return t.filter(e=>e.tagName!=="A")}var L7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},da=new WeakMap,nh=new WeakMap,rh={},Dg=0,EI=function(t){return t&&(t.host||EI(t.parentNode))},V7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=EI(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},F7=function(t,e,n,r){var s=V7(e,Array.isArray(t)?t:[t]);rh[n]||(rh[n]=new WeakMap);var i=rh[n],a=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var h=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),w=g!==null&&g!=="false",v=(da.get(p)||0)+1,_=(i.get(p)||0)+1;da.set(p,v),i.set(p,_),a.push(p),v===1&&w&&nh.set(p,!0),_===1&&p.setAttribute(n,"true"),w||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return h(e),l.clear(),Dg++,function(){a.forEach(function(m){var p=da.get(m)-1,g=i.get(m)-1;da.set(m,p),i.set(m,g),p||(nh.has(m)||m.removeAttribute(r),nh.delete(m)),g||m.removeAttribute(n)}),Dg--,Dg||(da=new WeakMap,da=new WeakMap,nh=new WeakMap,rh={})}},cw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=L7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),F7(r,s,n,"aria-hidden")):function(){return null}},hs=function(){return hs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hs.apply(this,arguments)};function TI(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function z7(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Mh="right-scroll-bar-position",Oh="width-before-scroll-bar",U7="with-scroll-bars-hidden",$7="--removed-body-scroll-bar-size";function Mg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function B7(t,e){var n=f.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var H7=typeof window<"u"?f.useLayoutEffect:f.useEffect,XS=new WeakMap;function W7(t,e){var n=B7(null,function(r){return t.forEach(function(s){return Mg(s,r)})});return H7(function(){var r=XS.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Mg(l,null)}),i.forEach(function(l){s.has(l)||Mg(l,a)})}XS.set(n,t)},[t]),n}function q7(t){return t}function G7(t,e){e===void 0&&(e=q7);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),n}}}};return s}function K7(t){t===void 0&&(t={});var e=G7(null);return e.options=hs({async:!0,ssr:!1},t),e}var CI=function(t){var e=t.sideCar,n=TI(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,hs({},n))};CI.isSideCarExport=!0;function Q7(t,e){return t.useMedium(e),CI}var kI=K7(),Og=function(){},cp=f.forwardRef(function(t,e){var n=f.useRef(null),r=f.useState({onScrollCapture:Og,onWheelCapture:Og,onTouchMoveCapture:Og}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,m=t.shards,p=t.sideCar,g=t.noIsolation,w=t.inert,v=t.allowPinchZoom,_=t.as,b=_===void 0?"div":_,x=t.gapMode,S=TI(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,D=W7([n,e]),M=hs(hs({},S),s);return f.createElement(f.Fragment,null,h&&f.createElement(j,{sideCar:kI,removeScrollBar:u,shards:m,noIsolation:g,inert:w,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:x}),a?f.cloneElement(f.Children.only(l),hs(hs({},M),{ref:D})):f.createElement(b,hs({},M,{className:c,ref:D}),l))});cp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};cp.classNames={fullWidth:Oh,zeroRight:Mh};var X7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Y7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=X7();return e&&t.setAttribute("nonce",e),t}function J7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Z7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var e$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Y7())&&(J7(e,n),Z7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},t$=function(){var t=e$();return function(e,n){f.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},jI=function(){var t=t$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},n$={left:0,top:0,right:0,gap:0},Lg=function(t){return parseInt(t||"",10)||0},r$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Lg(n),Lg(r),Lg(s)]},s$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return n$;var e=r$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},i$=jI(),qa="data-scroll-locked",o$=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(U7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(qa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Mh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Oh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Mh," .").concat(Mh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Oh," .").concat(Oh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(qa,`] {
    `).concat($7,": ").concat(l,`px;
  }
`)},YS=function(){var t=parseInt(document.body.getAttribute(qa)||"0",10);return isFinite(t)?t:0},a$=function(){f.useEffect(function(){return document.body.setAttribute(qa,(YS()+1).toString()),function(){var t=YS()-1;t<=0?document.body.removeAttribute(qa):document.body.setAttribute(qa,t.toString())}},[])},l$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;a$();var i=f.useMemo(function(){return s$(s)},[s]);return f.createElement(i$,{styles:o$(i,!e,s,n?"":"!important")})},_v=!1;if(typeof window<"u")try{var sh=Object.defineProperty({},"passive",{get:function(){return _v=!0,!0}});window.addEventListener("test",sh,sh),window.removeEventListener("test",sh,sh)}catch{_v=!1}var ha=_v?{passive:!1}:!1,c$=function(t){return t.tagName==="TEXTAREA"},II=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!c$(t)&&n[e]==="visible")},u$=function(t){return II(t,"overflowY")},d$=function(t){return II(t,"overflowX")},JS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=AI(t,r);if(s){var i=PI(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},h$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},f$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},AI=function(t,e){return t==="v"?u$(e):d$(e)},PI=function(t,e){return t==="v"?h$(e):f$(e)},m$=function(t,e){return t==="h"&&e==="rtl"?-1:1},p$=function(t,e,n,r,s){var i=m$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),u=!1,h=a>0,m=0,p=0;do{var g=PI(t,l),w=g[0],v=g[1],_=g[2],b=v-_-i*w;(w||b)&&AI(t,l)&&(m+=b,p+=w),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(m)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},ih=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},ZS=function(t){return[t.deltaX,t.deltaY]},eN=function(t){return t&&"current"in t?t.current:t},g$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},y$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},v$=0,fa=[];function x$(t){var e=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),s=f.useState(v$++)[0],i=f.useState(jI)[0],a=f.useRef(t);f.useEffect(function(){a.current=t},[t]),f.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=z7([t.lockRef.current],(t.shards||[]).map(eN),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=f.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var b=ih(v),x=n.current,S="deltaX"in v?v.deltaX:x[0]-b[0],j="deltaY"in v?v.deltaY:x[1]-b[1],D,M=v.target,N=Math.abs(S)>Math.abs(j)?"h":"v";if("touches"in v&&N==="h"&&M.type==="range")return!1;var C=JS(N,M);if(!C)return!0;if(C?D=N:(D=N==="v"?"h":"v",C=JS(N,M)),!C)return!1;if(!r.current&&"changedTouches"in v&&(S||j)&&(r.current=D),!D)return!0;var T=r.current||D;return p$(T,_,v,T==="h"?S:j,!0)},[]),c=f.useCallback(function(v){var _=v;if(!(!fa.length||fa[fa.length-1]!==i)){var b="deltaY"in _?ZS(_):ih(_),x=e.current.filter(function(D){return D.name===_.type&&(D.target===_.target||_.target===D.shadowParent)&&g$(D.delta,b)})[0];if(x&&x.should){_.cancelable&&_.preventDefault();return}if(!x){var S=(a.current.shards||[]).map(eN).filter(Boolean).filter(function(D){return D.contains(_.target)}),j=S.length>0?l(_,S[0]):!a.current.noIsolation;j&&_.cancelable&&_.preventDefault()}}},[]),u=f.useCallback(function(v,_,b,x){var S={name:v,delta:_,target:b,should:x,shadowParent:w$(b)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(j){return j!==S})},1)},[]),h=f.useCallback(function(v){n.current=ih(v),r.current=void 0},[]),m=f.useCallback(function(v){u(v.type,ZS(v),v.target,l(v,t.lockRef.current))},[]),p=f.useCallback(function(v){u(v.type,ih(v),v.target,l(v,t.lockRef.current))},[]);f.useEffect(function(){return fa.push(i),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,ha),document.addEventListener("touchmove",c,ha),document.addEventListener("touchstart",h,ha),function(){fa=fa.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,ha),document.removeEventListener("touchmove",c,ha),document.removeEventListener("touchstart",h,ha)}},[]);var g=t.removeScrollBar,w=t.inert;return f.createElement(f.Fragment,null,w?f.createElement(i,{styles:y$(s)}):null,g?f.createElement(l$,{gapMode:t.gapMode}):null)}function w$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const b$=Q7(kI,x$);var up=f.forwardRef(function(t,e){return f.createElement(cp,hs({},t,{ref:e,sideCar:b$}))});up.classNames=cp.classNames;var uw="Popover",[RI,GG]=lr(uw,[Fl]),od=Fl(),[_$,fo]=RI(uw),DI=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=t,l=od(e),c=f.useRef(null),[u,h]=f.useState(!1),[m=!1,p]=Gs({prop:r,defaultProp:s,onChange:i});return o.jsx(n0,{...l,children:o.jsx(_$,{scope:e,contentId:gs(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:f.useCallback(()=>h(!0),[]),onCustomAnchorRemove:f.useCallback(()=>h(!1),[]),modal:a,children:n})})};DI.displayName=uw;var MI="PopoverAnchor",S$=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=fo(MI,n),i=od(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return f.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(Em,{...i,...r,ref:e})});S$.displayName=MI;var OI="PopoverTrigger",LI=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=fo(OI,n),i=od(n),a=Pe(e,s.triggerRef),l=o.jsx(ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":$I(s.open),...r,ref:a,onClick:pe(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(Em,{asChild:!0,...i,children:l})});LI.displayName=OI;var dw="PopoverPortal",[N$,E$]=RI(dw,{forceMount:void 0}),VI=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=fo(dw,e);return o.jsx(N$,{scope:e,forceMount:n,children:o.jsx(Bn,{present:n||i.open,children:o.jsx(Ml,{asChild:!0,container:s,children:r})})})};VI.displayName=dw;var Cl="PopoverContent",FI=f.forwardRef((t,e)=>{const n=E$(Cl,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=fo(Cl,t.__scopePopover);return o.jsx(Bn,{present:r||i.open,children:i.modal?o.jsx(C$,{...s,ref:e}):o.jsx(k$,{...s,ref:e})})});FI.displayName=Cl;var T$=qo("PopoverContent.RemoveScroll"),C$=f.forwardRef((t,e)=>{const n=fo(Cl,t.__scopePopover),r=f.useRef(null),s=Pe(e,r),i=f.useRef(!1);return f.useEffect(()=>{const a=r.current;if(a)return cw(a)},[]),o.jsx(up,{as:T$,allowPinchZoom:!0,children:o.jsx(zI,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:pe(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),k$=f.forwardRef((t,e)=>{const n=fo(Cl,t.__scopePopover),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(zI,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),zI=f.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...m}=t,p=fo(Cl,n),g=od(n);return lw(),o.jsx(lp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Dl,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:o.jsx(r0,{"data-state":$I(p.open),role:"dialog",id:p.contentId,...g,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),UI="PopoverClose",j$=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=fo(UI,n);return o.jsx(ve.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,()=>s.onOpenChange(!1))})});j$.displayName=UI;var I$="PopoverArrow",A$=f.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=od(n);return o.jsx(s0,{...s,...r,ref:e})});A$.displayName=I$;function $I(t){return t?"open":"closed"}var P$=DI,R$=LI,D$=VI,BI=FI;const M$=P$,O$=R$,HI=f.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>o.jsx(D$,{children:o.jsx(BI,{ref:s,align:e,sideOffset:n,className:U("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));HI.displayName=BI.displayName;var L$=f.createContext(void 0);function dp(t){const e=f.useContext(L$);return t||e||"ltr"}function Sv(t,[e,n]){return Math.min(n,Math.max(e,t))}function V$(t,e){return f.useReducer((n,r)=>e[n][r]??n,t)}var hw="ScrollArea",[WI,KG]=lr(hw),[F$,Tr]=WI(hw),qI=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=t,[l,c]=f.useState(null),[u,h]=f.useState(null),[m,p]=f.useState(null),[g,w]=f.useState(null),[v,_]=f.useState(null),[b,x]=f.useState(0),[S,j]=f.useState(0),[D,M]=f.useState(!1),[N,C]=f.useState(!1),T=Pe(e,I=>c(I)),k=dp(s);return o.jsx(F$,{scope:n,type:r,dir:k,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:h,content:m,onContentChange:p,scrollbarX:g,onScrollbarXChange:w,scrollbarXEnabled:D,onScrollbarXEnabledChange:M,scrollbarY:v,onScrollbarYChange:_,scrollbarYEnabled:N,onScrollbarYEnabledChange:C,onCornerWidthChange:x,onCornerHeightChange:j,children:o.jsx(ve.div,{dir:k,...a,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});qI.displayName=hw;var GI="ScrollAreaViewport",KI=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,a=Tr(GI,n),l=f.useRef(null),c=Pe(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(ve.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});KI.displayName=GI;var ks="ScrollAreaScrollbar",fw=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Tr(ks,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=t.orientation==="horizontal";return f.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(z$,{...r,ref:e,forceMount:n}):s.type==="scroll"?o.jsx(U$,{...r,ref:e,forceMount:n}):s.type==="auto"?o.jsx(QI,{...r,ref:e,forceMount:n}):s.type==="always"?o.jsx(mw,{...r,ref:e}):null});fw.displayName=ks;var z$=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Tr(ks,t.__scopeScrollArea),[i,a]=f.useState(!1);return f.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},h=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(Bn,{present:n||i,children:o.jsx(QI,{"data-state":i?"visible":"hidden",...r,ref:e})})}),U$=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Tr(ks,t.__scopeScrollArea),i=t.orientation==="horizontal",a=fp(()=>c("SCROLL_END"),100),[l,c]=V$("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),f.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let m=u[h];const p=()=>{const g=u[h];m!==g&&(c("SCROLL"),a()),m=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,a]),o.jsx(Bn,{present:n||l!=="hidden",children:o.jsx(mw,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:pe(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:pe(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),QI=f.forwardRef((t,e)=>{const n=Tr(ks,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,a]=f.useState(!1),l=t.orientation==="horizontal",c=fp(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:h)}},10);return kl(n.viewport,c),kl(n.content,c),o.jsx(Bn,{present:r||i,children:o.jsx(mw,{"data-state":i?"visible":"hidden",...s,ref:e})})}),mw=f.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Tr(ks,t.__scopeScrollArea),i=f.useRef(null),a=f.useRef(0),[l,c]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=eA(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function m(p,g){return G$(p,a.current,l,g)}return n==="horizontal"?o.jsx($$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,g=tN(p,l,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?o.jsx(B$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,g=tN(p,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),$$=f.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Tr(ks,t.__scopeScrollArea),[a,l]=f.useState(),c=f.useRef(null),u=Pe(e,c,i.onScrollbarXChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(YI,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":hp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(p),nA(p,m)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:zf(a.paddingLeft),paddingEnd:zf(a.paddingRight)}})}})}),B$=f.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Tr(ks,t.__scopeScrollArea),[a,l]=f.useState(),c=f.useRef(null),u=Pe(e,c,i.onScrollbarYChange);return f.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(YI,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":hp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(p),nA(p,m)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:zf(a.paddingTop),paddingEnd:zf(a.paddingBottom)}})}})}),[H$,XI]=WI(ks),YI=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:m,...p}=t,g=Tr(ks,n),[w,v]=f.useState(null),_=Pe(e,T=>v(T)),b=f.useRef(null),x=f.useRef(""),S=g.viewport,j=r.content-r.viewport,D=_t(h),M=_t(c),N=fp(m,10);function C(T){if(b.current){const k=T.clientX-b.current.left,I=T.clientY-b.current.top;u({x:k,y:I})}}return f.useEffect(()=>{const T=k=>{const I=k.target;(w==null?void 0:w.contains(I))&&D(k,j)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[S,w,j,D]),f.useEffect(M,[r,M]),kl(w,N),kl(g.content,N),o.jsx(H$,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:_t(i),onThumbPointerUp:_t(a),onThumbPositionChange:M,onThumbPointerDown:_t(l),children:o.jsx(ve.div,{...p,ref:_,style:{position:"absolute",...p.style},onPointerDown:pe(t.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),b.current=w.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),C(T))}),onPointerMove:pe(t.onPointerMove,C),onPointerUp:pe(t.onPointerUp,T=>{const k=T.target;k.hasPointerCapture(T.pointerId)&&k.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=x.current,g.viewport&&(g.viewport.style.scrollBehavior=""),b.current=null})})})}),Ff="ScrollAreaThumb",JI=f.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=XI(Ff,t.__scopeScrollArea);return o.jsx(Bn,{present:n||s.hasThumb,children:o.jsx(W$,{ref:e,...r})})}),W$=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Tr(Ff,n),a=XI(Ff,n),{onThumbPositionChange:l}=a,c=Pe(e,m=>a.onThumbChange(m)),u=f.useRef(void 0),h=fp(()=>{u.current&&(u.current(),u.current=void 0)},100);return f.useEffect(()=>{const m=i.viewport;if(m){const p=()=>{if(h(),!u.current){const g=K$(m,l);u.current=g,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[i.viewport,h,l]),o.jsx(ve.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:pe(t.onPointerDownCapture,m=>{const g=m.target.getBoundingClientRect(),w=m.clientX-g.left,v=m.clientY-g.top;a.onThumbPointerDown({x:w,y:v})}),onPointerUp:pe(t.onPointerUp,a.onThumbPointerUp)})});JI.displayName=Ff;var pw="ScrollAreaCorner",ZI=f.forwardRef((t,e)=>{const n=Tr(pw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(q$,{...t,ref:e}):null});ZI.displayName=pw;var q$=f.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Tr(pw,n),[i,a]=f.useState(0),[l,c]=f.useState(0),u=!!(i&&l);return kl(s.scrollbarX,()=>{var m;const h=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),kl(s.scrollbarY,()=>{var m;const h=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),u?o.jsx(ve.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function zf(t){return t?parseInt(t,10):0}function eA(t,e){const n=t/e;return isNaN(n)?0:n}function hp(t){const e=eA(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function G$(t,e,n,r="ltr"){const s=hp(n),i=s/2,a=e||i,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,m=r==="ltr"?[0,h]:[h*-1,0];return tA([c,u],m)(t)}function tN(t,e,n="ltr"){const r=hp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,a]:[a*-1,0],u=Sv(t,c);return tA([0,a],[0,l])(u)}function tA(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function nA(t,e){return t>0&&t<e}var K$=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function fp(t,e){const n=_t(t),r=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),f.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function kl(t,e){const n=_t(e);At(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var rA=qI,Q$=KI,X$=ZI;const sA=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(rA,{ref:r,className:U("relative overflow-hidden",t),...n,children:[o.jsx(Q$,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(iA,{}),o.jsx(X$,{})]}));sA.displayName=rA.displayName;const iA=f.forwardRef(({className:t,orientation:e="vertical",...n},r)=>o.jsx(fw,{ref:r,orientation:e,className:U("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:o.jsx(JI,{className:"relative flex-1 rounded-full bg-border"})}));iA.displayName=fw.displayName;const Y$=zu("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function pn({className:t,variant:e,...n}){return o.jsx("div",{className:U(Y$({variant:e}),t),...n})}function J$(){const{user:t}=ot(),[e,n]=f.useState([]),[r,s]=f.useState(0),[i,a]=f.useState(!1),[l,c]=f.useState(()=>parseInt(localStorage.getItem("lastNotificationRead")||"0"));f.useEffect(()=>{if(!t)return;const g=fs(gr(Ne,"activities"),zo("createdAt","desc"),Wa(20)),w=Sr(g,v=>{const b=v.docs.map(S=>({id:S.id,...S.data()})).filter(S=>S.userId!==t.uid);n(b);const x=b.filter(S=>new Date(S.createdAt).getTime()>l).length;s(x)});return()=>w()},[t,l]);const u=g=>{if(a(g),g){const w=Date.now();c(w),localStorage.setItem("lastNotificationRead",w.toString()),s(0)}},h=g=>{const w=new Date(g),_=(new Date().getTime()-w.getTime())/1e3;return _<60?"Just now":_<3600?`${Math.floor(_/60)}m`:_<86400?`${Math.floor(_/3600)}h`:_<604800?`${Math.floor(_/86400)}d`:`${Math.floor(_/604800)}w`},m=g=>{switch(g){case"badge_earned":return o.jsx($u,{className:"h-3 w-3 text-white fill-amber-100"});case"streak_milestone":return o.jsx(Uu,{className:"h-3 w-3 text-white fill-orange-100"});case"assignment_completed":return o.jsx(Fx,{className:"h-3 w-3 text-white"});default:return o.jsx(Nh,{className:"h-3 w-3 text-white"})}},p=g=>{switch(g){case"badge_earned":return"bg-amber-500 border-amber-200";case"streak_milestone":return"bg-orange-500 border-orange-200";case"assignment_completed":return"bg-emerald-500 border-emerald-200";default:return"bg-blue-500 border-blue-200"}};return o.jsxs(M$,{open:i,onOpenChange:u,children:[o.jsx(O$,{asChild:!0,children:o.jsxs(ae,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground rounded-full w-9 h-9",children:[o.jsx(Nh,{className:"h-5 w-5"}),r>0&&o.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background animate-pulse"})]})}),o.jsxs(HI,{className:"w-80 p-0 mr-2 shadow-xl border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",align:"end",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsx("h4",{className:"font-semibold text-sm",children:"Notifications"}),r>0&&o.jsxs(pn,{variant:"secondary",className:"text-[10px] h-5 px-1.5",children:[r," new"]})]}),o.jsx(sA,{className:"h-[300px]",children:e.length>0?o.jsx("div",{className:"flex flex-col",children:e.map(g=>{var w;return o.jsxs("div",{className:"flex items-start gap-3 p-4 hover:bg-muted/50 transition-colors border-b last:border-0 relative group",children:[o.jsxs("div",{className:"relative shrink-0",children:[o.jsxs(Yn,{className:"h-10 w-10 border border-border",children:[o.jsx(Jn,{src:g.userAvatar||void 0}),o.jsx(Zn,{children:((w=g.userName)==null?void 0:w[0])||"?"})]}),o.jsx("div",{className:U("absolute -bottom-1 -right-1 rounded-full p-0.5 border-[2px] border-background flex items-center justify-center w-5 h-5",p(g.type)),children:m(g.type)})]}),o.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[o.jsxs("p",{className:"text-sm text-foreground leading-snug",children:[o.jsx("span",{className:"font-semibold",children:g.userName})," ",o.jsx("span",{className:"text-muted-foreground font-normal",children:g.content.replace(g.userName,"").trim()})]}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:h(g.createdAt)})]}),new Date(g.createdAt).getTime()>l&&o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-blue-500 rounded-full"})]},g.id)})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-[200px] text-muted-foreground gap-2",children:[o.jsx("div",{className:"p-3 bg-muted rounded-full",children:o.jsx(Nh,{className:"h-6 w-6 opacity-20"})}),o.jsx("p",{className:"text-sm",children:"No new activity"})]})})]})]})}function Z$({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=On(),[r]=mm(),[s,i]=f.useState(""),a=ap(),c={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return o.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[o.jsxs("div",{className:"flex items-center flex-1",children:[a&&o.jsx(ae,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:o.jsx(KC,{className:"h-5 w-5"})}),o.jsx("span",{className:"md:hidden font-medium text-lg",children:c}),o.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx(a3,{className:"h-4 w-4 text-muted-foreground"})}),o.jsx(Ds,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),o.jsxs("div",{className:"flex items-center ml-4 gap-2",children:[o.jsx(J$,{}),o.jsx(ae,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:U(n&&"animate-spin"),title:"Sync with Classroom",children:o.jsx(ml,{className:"w-5 h-5"})})]})]})}var oA={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},nN=Ie.createContext&&Ie.createContext(oA),eB=["attr","size","title"];function tB(t,e){if(t==null)return{};var n=nB(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nB(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Uf(){return Uf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uf.apply(this,arguments)}function rN(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function $f(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rN(Object(n),!0).forEach(function(r){rB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rN(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rB(t,e,n){return e=sB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sB(t){var e=iB(t,"string");return typeof e=="symbol"?e:e+""}function iB(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aA(t){return t&&t.map((e,n)=>Ie.createElement(e.tag,$f({key:n},e.attr),aA(e.child)))}function gw(t){return e=>Ie.createElement(oB,Uf({attr:$f({},t.attr)},e),aA(t.child))}function oB(t){var e=n=>{var{attr:r,size:s,title:i}=t,a=tB(t,eB),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Ie.createElement("svg",Uf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:$f($f({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Ie.createElement("title",null,i),t.children)};return nN!==void 0?Ie.createElement(nN.Consumer,null,n=>e(n)):e(oA)}function lA(t){return gw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function aB(t){return gw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const lB=[{icon:aB,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:n3,title:"Kanban Board",description:"Visual assignment tracking."},{icon:UO,title:"Linear Timeline",description:"Chronological deadline view."},{icon:$O,title:"Performance Metrics",description:"Grade & workload analytics."}];function cB(){const{signInWithGoogle:t,loading:e,error:n}=ot();return o.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[o.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),o.jsx("header",{className:"px-10 py-8 z-10",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),o.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",o.jsx("br",{}),o.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),o.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),o.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:lB.map(r=>o.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[o.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),o.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),o.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),o.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:o.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),o.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[o.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),o.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[o.jsx(ir,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",o.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),o.jsxs(ae,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[o.jsx(lA,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&o.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[o.jsx(ir,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:n})]})]}),o.jsx("div",{className:"pt-8 border-t border-zinc-100",children:o.jsxs("div",{className:"flex gap-4",children:[o.jsx(l3,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),o.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),o.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[o.jsx("span",{children:" 2024 Trace Inc."}),o.jsxs("div",{className:"flex gap-6",children:[o.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),o.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function uB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const mp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Kl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function yw(t){return"nodeType"in t}function kn(t){var e,n;return t?Kl(t)?t:yw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function vw(t){const{Document:e}=kn(t);return t instanceof e}function ad(t){return Kl(t)?!1:t instanceof kn(t).HTMLElement}function cA(t){return t instanceof kn(t).SVGElement}function Ql(t){return t?Kl(t)?t.document:yw(t)?vw(t)?t:ad(t)||cA(t)?t.ownerDocument:document:document:document}const Yr=mp?f.useLayoutEffect:f.useEffect;function pp(t){const e=f.useRef(t);return Yr(()=>{e.current=t}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function dB(){const t=f.useRef(null),e=f.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=f.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Cu(t,e){e===void 0&&(e=[t]);const n=f.useRef(t);return Yr(()=>{n.current!==t&&(n.current=t)},e),n}function ld(t,e){const n=f.useRef();return f.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Bf(t){const e=pp(t),n=f.useRef(null),r=f.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Hf(t){const e=f.useRef();return f.useEffect(()=>{e.current=t},[t]),e.current}let Vg={};function cd(t,e){return f.useMemo(()=>{if(e)return e;const n=Vg[t]==null?0:Vg[t]+1;return Vg[t]=n,t+"-"+n},[t,e])}function uA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const l=Object.entries(a);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const Ga=uA(1),Wf=uA(-1);function hB(t){return"clientX"in t&&"clientY"in t}function gp(t){if(!t)return!1;const{KeyboardEvent:e}=kn(t.target);return e&&t instanceof e}function fB(t){if(!t)return!1;const{TouchEvent:e}=kn(t.target);return e&&t instanceof e}function qf(t){if(fB(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return hB(t)?{x:t.clientX,y:t.clientY}:null}const so=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[so.Translate.toString(t),so.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),sN="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function mB(t){return t.matches(sN)?t:t.querySelector(sN)}const pB={display:"none"};function gB(t){let{id:e,value:n}=t;return Ie.createElement("div",{id:e,style:pB},n)}function yB(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ie.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function vB(){const[t,e]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const dA=f.createContext(null);function xB(t){const e=f.useContext(dA);f.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function wB(){const[t]=f.useState(()=>new Set),e=f.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[f.useCallback(r=>{let{type:s,event:i}=r;t.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,i)})},[t]),e]}const bB={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},_B={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function SB(t){let{announcements:e=_B,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=bB}=t;const{announce:i,announcement:a}=vB(),l=cd("DndLiveRegion"),[c,u]=f.useState(!1);if(f.useEffect(()=>{u(!0)},[]),xB(f.useMemo(()=>({onDragStart(m){let{active:p}=m;i(e.onDragStart({active:p}))},onDragMove(m){let{active:p,over:g}=m;e.onDragMove&&i(e.onDragMove({active:p,over:g}))},onDragOver(m){let{active:p,over:g}=m;i(e.onDragOver({active:p,over:g}))},onDragEnd(m){let{active:p,over:g}=m;i(e.onDragEnd({active:p,over:g}))},onDragCancel(m){let{active:p,over:g}=m;i(e.onDragCancel({active:p,over:g}))}}),[i,e])),!c)return null;const h=Ie.createElement(Ie.Fragment,null,Ie.createElement(gB,{id:r,value:s.draggable}),Ie.createElement(yB,{id:l,announcement:a}));return n?wr.createPortal(h,n):h}var Lt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Lt||(Lt={}));function Gf(){}function iN(t,e){return f.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function NB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return f.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Jr=Object.freeze({x:0,y:0});function EB(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function TB(t,e){const n=qf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function CB(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function kB(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function jB(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function oN(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const IB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=oN(e,e.left,e.top),i=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const u=EB(oN(c),s);i.push({id:l,data:{droppableContainer:a,value:u}})}}return i.sort(CB)};function AB(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=a*l,m=h/(c+u-h);return Number(m.toFixed(4))}return 0}const PB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=AB(l,e);c>0&&s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(kB)};function RB(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function hA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Jr}function DB(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>({...a,top:a.top+t*l.y,bottom:a.bottom+t*l.y,left:a.left+t*l.x,right:a.right+t*l.x}),{...n})}}const MB=DB(1);function fA(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function OB(t,e,n){const r=fA(e);if(!r)return t;const{scaleX:s,scaleY:i,x:a,y:l}=r,c=t.left-a-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,m=i?t.height/i:t.height;return{width:h,height:m,top:u,right:c+h,bottom:u+m,left:c}}const LB={ignoreTransform:!1};function Xl(t,e){e===void 0&&(e=LB);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=kn(t).getComputedStyle(t);u&&(n=OB(n,u,h))}const{top:r,left:s,width:i,height:a,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:a,bottom:l,right:c}}function aN(t){return Xl(t,{ignoreTransform:!0})}function VB(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function FB(t,e){return e===void 0&&(e=kn(t).getComputedStyle(t)),e.position==="fixed"}function zB(t,e){e===void 0&&(e=kn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function xw(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(vw(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ad(s)||cA(s)||n.includes(s))return n;const i=kn(t).getComputedStyle(s);return s!==t&&zB(s,i)&&n.push(s),FB(s,i)?n:r(s.parentNode)}return t?r(t):n}function mA(t){const[e]=xw(t,1);return e??null}function Fg(t){return!mp||!t?null:Kl(t)?t:yw(t)?vw(t)||t===Ql(t).scrollingElement?window:ad(t)?t:null:null}function pA(t){return Kl(t)?t.scrollX:t.scrollLeft}function gA(t){return Kl(t)?t.scrollY:t.scrollTop}function Nv(t){return{x:pA(t),y:gA(t)}}var qt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(qt||(qt={}));function yA(t){return!mp||!t?!1:t===document.scrollingElement}function vA(t){const e={x:0,y:0},n=yA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:l,maxScroll:r,minScroll:e}}const UB={x:.2,y:.2};function $B(t,e,n,r,s){let{top:i,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=UB);const{isTop:u,isBottom:h,isLeft:m,isRight:p}=vA(t),g={x:0,y:0},w={x:0,y:0},v={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+v.height?(g.y=qt.Backward,w.y=r*Math.abs((e.top+v.height-i)/v.height)):!h&&c>=e.bottom-v.height&&(g.y=qt.Forward,w.y=r*Math.abs((e.bottom-v.height-c)/v.height)),!p&&l>=e.right-v.width?(g.x=qt.Forward,w.x=r*Math.abs((e.right-v.width-l)/v.width)):!m&&a<=e.left+v.width&&(g.x=qt.Backward,w.x=r*Math.abs((e.left+v.width-a)/v.width)),{direction:g,speed:w}}function BB(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function xA(t){return t.reduce((e,n)=>Ga(e,Nv(n)),Jr)}function HB(t){return t.reduce((e,n)=>e+pA(n),0)}function WB(t){return t.reduce((e,n)=>e+gA(n),0)}function wA(t,e){if(e===void 0&&(e=Xl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);mA(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const qB=[["x",["left","right"],HB],["y",["top","bottom"],WB]];class ww{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=xw(n),s=xA(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,a,l]of qB)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Qc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function GB(t){const{EventTarget:e}=kn(t);return t instanceof e?t:Ql(t)}function zg(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var fr;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(fr||(fr={}));function lN(t){t.preventDefault()}function KB(t){t.stopPropagation()}var We;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(We||(We={}));const bA={start:[We.Space,We.Enter],cancel:[We.Esc],end:[We.Space,We.Enter,We.Tab]},QB=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case We.Right:return{...n,x:n.x+25};case We.Left:return{...n,x:n.x-25};case We.Down:return{...n,y:n.y+25};case We.Up:return{...n,y:n.y-25}}};class bw{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Qc(Ql(n)),this.windowListeners=new Qc(kn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(fr.Resize,this.handleCancel),this.windowListeners.add(fr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(fr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&wA(r),n(Jr)}handleKeyDown(e){if(gp(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=bA,coordinateGetter:a=QB,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Jr;this.referenceCoordinates||(this.referenceCoordinates=h);const m=a(e,{active:n,context:r.current,currentCoordinates:h});if(m){const p=Wf(m,h),g={x:0,y:0},{scrollableAncestors:w}=r.current;for(const v of w){const _=e.code,{isTop:b,isRight:x,isLeft:S,isBottom:j,maxScroll:D,minScroll:M}=vA(v),N=BB(v),C={x:Math.min(_===We.Right?N.right-N.width/2:N.right,Math.max(_===We.Right?N.left:N.left+N.width/2,m.x)),y:Math.min(_===We.Down?N.bottom-N.height/2:N.bottom,Math.max(_===We.Down?N.top:N.top+N.height/2,m.y))},T=_===We.Right&&!x||_===We.Left&&!S,k=_===We.Down&&!j||_===We.Up&&!b;if(T&&C.x!==m.x){const I=v.scrollLeft+p.x,R=_===We.Right&&I<=D.x||_===We.Left&&I>=M.x;if(R&&!p.y){v.scrollTo({left:I,behavior:l});return}R?g.x=v.scrollLeft-I:g.x=_===We.Right?v.scrollLeft-D.x:v.scrollLeft-M.x,g.x&&v.scrollBy({left:-g.x,behavior:l});break}else if(k&&C.y!==m.y){const I=v.scrollTop+p.y,R=_===We.Down&&I<=D.y||_===We.Up&&I>=M.y;if(R&&!p.x){v.scrollTo({top:I,behavior:l});return}R?g.y=v.scrollTop-I:g.y=_===We.Down?v.scrollTop-D.y:v.scrollTop-M.y,g.y&&v.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(e,Ga(Wf(m,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}bw.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=bA,onActivation:s}=e,{active:i}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function cN(t){return!!(t&&"distance"in t)}function uN(t){return!!(t&&"delay"in t)}class _w{constructor(e,n,r){var s;r===void 0&&(r=GB(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:a}=i;this.props=e,this.events=n,this.document=Ql(a),this.documentListeners=new Qc(this.document),this.listeners=new Qc(r),this.windowListeners=new Qc(kn(a)),this.initialCoordinates=(s=qf(i))!=null?s:Jr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(fr.Resize,this.handleCancel),this.windowListeners.add(fr.DragStart,lN),this.windowListeners.add(fr.VisibilityChange,this.handleCancel),this.windowListeners.add(fr.ContextMenu,lN),this.documentListeners.add(fr.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(uN(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(cN(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(fr.Click,KB,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(fr.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=qf(e))!=null?n:Jr,u=Wf(s,c);if(!r&&l){if(cN(l)){if(l.tolerance!=null&&zg(u,l.tolerance))return this.handleCancel();if(zg(u,l.distance))return this.handleStart()}if(uN(l)&&zg(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),a(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===We.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const XB={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Sw extends _w{constructor(e){const{event:n}=e,r=Ql(n.target);super(e,XB,r)}}Sw.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const YB={move:{name:"mousemove"},end:{name:"mouseup"}};var Ev;(function(t){t[t.RightClick=2]="RightClick"})(Ev||(Ev={}));class JB extends _w{constructor(e){super(e,YB,Ql(e.event.target))}}JB.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Ev.RightClick?!1:(r==null||r({event:n}),!0)}}];const Ug={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ZB extends _w{constructor(e){super(e,Ug)}static setup(){return window.addEventListener(Ug.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ug.move.name,e)};function e(){}}}ZB.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Xc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Xc||(Xc={}));var Kf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Kf||(Kf={}));function eH(t){let{acceleration:e,activator:n=Xc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:l=Kf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:m,threshold:p}=t;const g=nH({delta:m,disabled:!i}),[w,v]=dB(),_=f.useRef({x:0,y:0}),b=f.useRef({x:0,y:0}),x=f.useMemo(()=>{switch(n){case Xc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Xc.DraggableRect:return s}},[n,s,c]),S=f.useRef(null),j=f.useCallback(()=>{const M=S.current;if(!M)return;const N=_.current.x*b.current.x,C=_.current.y*b.current.y;M.scrollBy(N,C)},[]),D=f.useMemo(()=>l===Kf.TreeOrder?[...u].reverse():u,[l,u]);f.useEffect(()=>{if(!i||!u.length||!x){v();return}for(const M of D){if((r==null?void 0:r(M))===!1)continue;const N=u.indexOf(M),C=h[N];if(!C)continue;const{direction:T,speed:k}=$B(M,C,x,e,p);for(const I of["x","y"])g[I][T[I]]||(k[I]=0,T[I]=0);if(k.x>0||k.y>0){v(),S.current=M,w(j,a),_.current=k,b.current=T;return}}_.current={x:0,y:0},b.current={x:0,y:0},v()},[e,j,r,v,i,a,JSON.stringify(x),JSON.stringify(g),w,u,D,h,JSON.stringify(p)])}const tH={x:{[qt.Backward]:!1,[qt.Forward]:!1},y:{[qt.Backward]:!1,[qt.Forward]:!1}};function nH(t){let{delta:e,disabled:n}=t;const r=Hf(e);return ld(s=>{if(n||!r||!s)return tH;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[qt.Backward]:s.x[qt.Backward]||i.x===-1,[qt.Forward]:s.x[qt.Forward]||i.x===1},y:{[qt.Backward]:s.y[qt.Backward]||i.y===-1,[qt.Forward]:s.y[qt.Forward]||i.y===1}}},[n,e,r])}function rH(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ld(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function sH(t,e){return f.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...i]},[]),[t,e])}var ku;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(ku||(ku={}));var Tv;(function(t){t.Optimized="optimized"})(Tv||(Tv={}));const dN=new Map;function iH(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,a]=f.useState(null),{frequency:l,measure:c,strategy:u}=s,h=f.useRef(t),m=_(),p=Cu(m),g=f.useCallback(function(b){b===void 0&&(b=[]),!p.current&&a(x=>x===null?b:x.concat(b.filter(S=>!x.includes(S))))},[p]),w=f.useRef(null),v=ld(b=>{if(m&&!n)return dN;if(!b||b===dN||h.current!==t||i!=null){const x=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){x.set(S.id,S.rect.current);continue}const j=S.node.current,D=j?new ww(c(j),j):null;S.rect.current=D,D&&x.set(S.id,D)}return x}return b},[t,i,n,m,c]);return f.useEffect(()=>{h.current=t},[t]),f.useEffect(()=>{m||g()},[n,m]),f.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),f.useEffect(()=>{m||typeof l!="number"||w.current!==null||(w.current=setTimeout(()=>{g(),w.current=null},l))},[l,m,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(u){case ku.Always:return!1;case ku.BeforeDragging:return n;default:return!n}}}function Nw(t,e){return ld(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function oH(t,e){return Nw(t,e)}function aH(t){let{callback:e,disabled:n}=t;const r=pp(e),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return f.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function yp(t){let{callback:e,disabled:n}=t;const r=pp(e),s=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return f.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function lH(t){return new ww(Xl(t),t)}function hN(t,e,n){e===void 0&&(e=lH);const[r,s]=f.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const a=aH({callback(c){if(t)for(const u of c){const{type:h,target:m}=u;if(h==="childList"&&m instanceof HTMLElement&&m.contains(t)){i();break}}}}),l=yp({callback:i});return Yr(()=>{i(),t?(l==null||l.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[t]),r}function cH(t){const e=Nw(t);return hA(t,e)}const fN=[];function uH(t){const e=f.useRef(t),n=ld(r=>t?r&&r!==fN&&t&&e.current&&t.parentNode===e.current.parentNode?r:xw(t):fN,[t]);return f.useEffect(()=>{e.current=t},[t]),n}function dH(t){const[e,n]=f.useState(null),r=f.useRef(t),s=f.useCallback(i=>{const a=Fg(i.target);a&&n(l=>l?(l.set(a,Nv(a)),new Map(l)):null)},[]);return f.useEffect(()=>{const i=r.current;if(t!==i){a(i);const l=t.map(c=>{const u=Fg(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Nv(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{a(t),a(i)};function a(l){l.forEach(c=>{const u=Fg(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),f.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>Ga(i,a),Jr):xA(t):Jr,[t,e])}function mN(t,e){e===void 0&&(e=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},e),f.useEffect(()=>{const r=t!==Jr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Wf(t,n.current):Jr}function hH(t){f.useEffect(()=>{if(!mp)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function fH(t,e){return f.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,e)},n},{}),[t,e])}function _A(t){return f.useMemo(()=>t?VB(t):null,[t])}const pN=[];function mH(t,e){e===void 0&&(e=Xl);const[n]=t,r=_A(n?kn(n):null),[s,i]=f.useState(pN);function a(){i(()=>t.length?t.map(c=>yA(c)?r:new ww(e(c),c)):pN)}const l=yp({callback:a});return Yr(()=>{l==null||l.disconnect(),a(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function SA(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ad(e)?e:t}function pH(t){let{measure:e}=t;const[n,r]=f.useState(null),s=f.useCallback(u=>{for(const{target:h}of u)if(ad(h)){r(m=>{const p=e(h);return m?{...m,width:p.width,height:p.height}:p});break}},[e]),i=yp({callback:s}),a=f.useCallback(u=>{const h=SA(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=Bf(a);return f.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const gH=[{sensor:Sw,options:{}},{sensor:bw,options:{}}],yH={current:{}},Lh={draggable:{measure:aN},droppable:{measure:aN,strategy:ku.WhileDragging,frequency:Tv.Optimized},dragOverlay:{measure:Xl}};class Yc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const vH={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Yc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Lh,measureDroppableContainers:Gf,windowRect:null,measuringScheduled:!1},NA={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gf,draggableNodes:new Map,over:null,measureDroppableContainers:Gf},ud=f.createContext(NA),EA=f.createContext(vH);function xH(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Yc}}}function wH(t,e){switch(e.type){case Lt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Lt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case Lt.DragEnd:case Lt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Lt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Yc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case Lt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new Yc(t.droppable.containers);return a.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case Lt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Yc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function bH(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=f.useContext(ud),i=Hf(r),a=Hf(n==null?void 0:n.id);return f.useEffect(()=>{if(!e&&!r&&i&&a!=null){if(!gp(i)||document.activeElement===i.target)return;const l=s.get(a);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const m=mB(h);if(m){m.focus();break}}})}},[r,e,s,a,i]),null}function TA(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function _H(t){return f.useMemo(()=>({draggable:{...Lh.draggable,...t==null?void 0:t.draggable},droppable:{...Lh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Lh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function SH(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=f.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Yr(()=>{if(!a&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),m=hA(h,r);if(a||(m.x=0),l||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const p=mA(u);p&&p.scrollBy({top:m.y,left:m.x})}},[e,a,l,r,n])}const vp=f.createContext({...Jr,scaleX:1,scaleY:1});var vi;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(vi||(vi={}));const NH=f.memo(function(e){var n,r,s,i;let{id:a,accessibility:l,autoScroll:c=!0,children:u,sensors:h=gH,collisionDetection:m=PB,measuring:p,modifiers:g,...w}=e;const v=f.useReducer(wH,void 0,xH),[_,b]=v,[x,S]=wB(),[j,D]=f.useState(vi.Uninitialized),M=j===vi.Initialized,{draggable:{active:N,nodes:C,translate:T},droppable:{containers:k}}=_,I=N!=null?C.get(N):null,R=f.useRef({initial:null,translated:null}),P=f.useMemo(()=>{var $e;return N!=null?{id:N,data:($e=I==null?void 0:I.data)!=null?$e:yH,rect:R}:null},[N,I]),O=f.useRef(null),[re,J]=f.useState(null),[X,L]=f.useState(null),H=Cu(w,Object.values(w)),z=cd("DndDescribedBy",a),$=f.useMemo(()=>k.getEnabled(),[k]),G=_H(p),{droppableRects:ee,measureDroppableContainers:ie,measuringScheduled:ne}=iH($,{dragging:M,dependencies:[T.x,T.y],config:G.droppable}),oe=rH(C,N),V=f.useMemo(()=>X?qf(X):null,[X]),Y=yd(),he=oH(oe,G.draggable.measure);SH({activeNode:N!=null?C.get(N):null,config:Y.layoutShiftCompensation,initialRect:he,measure:G.draggable.measure});const Q=hN(oe,G.draggable.measure,he),te=hN(oe?oe.parentElement:null),ce=f.useRef({activatorEvent:null,active:null,activeNode:oe,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Se=k.getNodeFor((n=ce.current.over)==null?void 0:n.id),Le=pH({measure:G.dragOverlay.measure}),ft=(r=Le.nodeRef.current)!=null?r:oe,He=M?(s=Le.rect)!=null?s:Q:null,Ze=!!(Le.nodeRef.current&&Le.rect),rn=cH(Ze?null:Q),Qe=_A(ft?kn(ft):null),Je=uH(M?Se??oe:null),jn=mH(Je),es=TA(g,{transform:{x:T.x-rn.x,y:T.y-rn.y,scaleX:1,scaleY:1},activatorEvent:X,active:P,activeNodeRect:Q,containerNodeRect:te,draggingNodeRect:He,over:ce.current.over,overlayNodeRect:Le.rect,scrollableAncestors:Je,scrollableAncestorRects:jn,windowRect:Qe}),go=V?Ga(V,T):null,ue=dH(Je),be=mN(ue),Ve=mN(ue,[Q]),ge=Ga(es,be),je=He?MB(He,es):null,at=P&&je?m({active:P,collisionRect:je,droppableRects:ee,droppableContainers:$,pointerCoordinates:go}):null,St=jB(at,"id"),[zt,cr]=f.useState(null),et=Ze?es:Ga(es,Ve),Ut=RB(et,(i=zt==null?void 0:zt.rect)!=null?i:null,Q),$t=f.useRef(null),Pt=f.useCallback(($e,sn)=>{let{sensor:Rt,options:In}=sn;if(O.current==null)return;const An=C.get(O.current);if(!An)return;const xn=$e.nativeEvent,Yt=new Rt({active:O.current,activeNode:An,event:xn,options:In,context:ce,onAbort(Dt){if(!C.get(Dt))return;const{onDragAbort:Wn}=H.current,ur={id:Dt};Wn==null||Wn(ur),x({type:"onDragAbort",event:ur})},onPending(Dt,Hn,Wn,ur){if(!C.get(Dt))return;const{onDragPending:kr}=H.current,ts={id:Dt,constraint:Hn,initialCoordinates:Wn,offset:ur};kr==null||kr(ts),x({type:"onDragPending",event:ts})},onStart(Dt){const Hn=O.current;if(Hn==null)return;const Wn=C.get(Hn);if(!Wn)return;const{onDragStart:ur}=H.current,js={activatorEvent:xn,active:{id:Hn,data:Wn.data,rect:R}};wr.unstable_batchedUpdates(()=>{ur==null||ur(js),D(vi.Initializing),b({type:Lt.DragStart,initialCoordinates:Dt,active:Hn}),x({type:"onDragStart",event:js}),J($t.current),L(xn)})},onMove(Dt){b({type:Lt.DragMove,coordinates:Dt})},onEnd:si(Lt.DragEnd),onCancel:si(Lt.DragCancel)});$t.current=Yt;function si(Dt){return async function(){const{active:Wn,collisions:ur,over:js,scrollAdjustedTranslate:kr}=ce.current;let ts=null;if(Wn&&kr){const{cancelDrop:Pn}=H.current;ts={activatorEvent:xn,active:Wn,collisions:ur,delta:kr,over:js},Dt===Lt.DragEnd&&typeof Pn=="function"&&await Promise.resolve(Pn(ts))&&(Dt=Lt.DragCancel)}O.current=null,wr.unstable_batchedUpdates(()=>{b({type:Dt}),D(vi.Uninitialized),cr(null),J(null),L(null),$t.current=null;const Pn=Dt===Lt.DragEnd?"onDragEnd":"onDragCancel";if(ts){const aa=H.current[Pn];aa==null||aa(ts),x({type:Pn,event:ts})}})}}},[C]),Cr=f.useCallback(($e,sn)=>(Rt,In)=>{const An=Rt.nativeEvent,xn=C.get(In);if(O.current!==null||!xn||An.dndKit||An.defaultPrevented)return;const Yt={active:xn};$e(Rt,sn.options,Yt)===!0&&(An.dndKit={capturedBy:sn.sensor},O.current=In,Pt(Rt,sn))},[C,Pt]),yo=sH(h,Cr);hH(h),Yr(()=>{Q&&j===vi.Initializing&&D(vi.Initialized)},[Q,j]),f.useEffect(()=>{const{onDragMove:$e}=H.current,{active:sn,activatorEvent:Rt,collisions:In,over:An}=ce.current;if(!sn||!Rt)return;const xn={active:sn,activatorEvent:Rt,collisions:In,delta:{x:ge.x,y:ge.y},over:An};wr.unstable_batchedUpdates(()=>{$e==null||$e(xn),x({type:"onDragMove",event:xn})})},[ge.x,ge.y]),f.useEffect(()=>{const{active:$e,activatorEvent:sn,collisions:Rt,droppableContainers:In,scrollAdjustedTranslate:An}=ce.current;if(!$e||O.current==null||!sn||!An)return;const{onDragOver:xn}=H.current,Yt=In.get(St),si=Yt&&Yt.rect.current?{id:Yt.id,rect:Yt.rect.current,data:Yt.data,disabled:Yt.disabled}:null,Dt={active:$e,activatorEvent:sn,collisions:Rt,delta:{x:An.x,y:An.y},over:si};wr.unstable_batchedUpdates(()=>{cr(si),xn==null||xn(Dt),x({type:"onDragOver",event:Dt})})},[St]),Yr(()=>{ce.current={activatorEvent:X,active:P,activeNode:oe,collisionRect:je,collisions:at,droppableRects:ee,draggableNodes:C,draggingNode:ft,draggingNodeRect:He,droppableContainers:k,over:zt,scrollableAncestors:Je,scrollAdjustedTranslate:ge},R.current={initial:He,translated:je}},[P,oe,at,je,C,ft,He,ee,k,zt,Je,ge]),eH({...Y,delta:T,draggingRect:je,pointerCoordinates:go,scrollableAncestors:Je,scrollableAncestorRects:jn});const gd=f.useMemo(()=>({active:P,activeNode:oe,activeNodeRect:Q,activatorEvent:X,collisions:at,containerNodeRect:te,dragOverlay:Le,draggableNodes:C,droppableContainers:k,droppableRects:ee,over:zt,measureDroppableContainers:ie,scrollableAncestors:Je,scrollableAncestorRects:jn,measuringConfiguration:G,measuringScheduled:ne,windowRect:Qe}),[P,oe,Q,X,at,te,Le,C,k,ee,zt,ie,Je,jn,G,ne,Qe]),vo=f.useMemo(()=>({activatorEvent:X,activators:yo,active:P,activeNodeRect:Q,ariaDescribedById:{draggable:z},dispatch:b,draggableNodes:C,over:zt,measureDroppableContainers:ie}),[X,yo,P,Q,b,z,C,zt,ie]);return Ie.createElement(dA.Provider,{value:S},Ie.createElement(ud.Provider,{value:vo},Ie.createElement(EA.Provider,{value:gd},Ie.createElement(vp.Provider,{value:Ut},u)),Ie.createElement(bH,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Ie.createElement(SB,{...l,hiddenTextDescribedById:z}));function yd(){const $e=(re==null?void 0:re.autoScrollEnabled)===!1,sn=typeof c=="object"?c.enabled===!1:c===!1,Rt=M&&!$e&&!sn;return typeof c=="object"?{...c,enabled:Rt}:{enabled:Rt}}}),EH=f.createContext(null),gN="button",TH="Draggable";function CH(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=cd(TH),{activators:a,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:m,over:p}=f.useContext(ud),{role:g=gN,roleDescription:w="draggable",tabIndex:v=0}=s??{},_=(c==null?void 0:c.id)===e,b=f.useContext(_?vp:EH),[x,S]=Bf(),[j,D]=Bf(),M=fH(a,e),N=Cu(n);Yr(()=>(m.set(e,{id:e,key:i,node:x,activatorNode:j,data:N}),()=>{const T=m.get(e);T&&T.key===i&&m.delete(e)}),[m,e]);const C=f.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":_&&g===gN?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,g,v,_,w,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:C,isDragging:_,listeners:r?void 0:M,node:x,over:p,setNodeRef:S,setActivatorNodeRef:D,transform:b}}function CA(){return f.useContext(EA)}const kH="Droppable",jH={timeout:25};function kA(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=cd(kH),{active:a,dispatch:l,over:c,measureDroppableContainers:u}=f.useContext(ud),h=f.useRef({disabled:n}),m=f.useRef(!1),p=f.useRef(null),g=f.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:_}={...jH,...s},b=Cu(v??r),x=f.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),g.current=null},_)},[_]),S=yp({callback:x,disabled:w||!a}),j=f.useCallback((C,T)=>{S&&(T&&(S.unobserve(T),m.current=!1),C&&S.observe(C))},[S]),[D,M]=Bf(j),N=Cu(e);return f.useEffect(()=>{!S||!D.current||(S.disconnect(),m.current=!1,S.observe(D.current))},[D,S]),f.useEffect(()=>(l({type:Lt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:D,rect:p,data:N}}),()=>l({type:Lt.UnregisterDroppable,key:i,id:r})),[r]),f.useEffect(()=>{n!==h.current.disabled&&(l({type:Lt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:a,rect:p,isOver:(c==null?void 0:c.id)===r,node:D,over:c,setNodeRef:M}}function IH(t){let{animation:e,children:n}=t;const[r,s]=f.useState(null),[i,a]=f.useState(null),l=Hf(n);return!n&&!r&&l&&s(l),Yr(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Ie.createElement(Ie.Fragment,null,n,r?f.cloneElement(r,{ref:a}):null)}const AH={x:0,y:0,scaleX:1,scaleY:1};function PH(t){let{children:e}=t;return Ie.createElement(ud.Provider,{value:NA},Ie.createElement(vp.Provider,{value:AH},e))}const RH={position:"fixed",touchAction:"none"},DH=t=>gp(t)?"transform 250ms ease":void 0,MH=f.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:a,rect:l,style:c,transform:u,transition:h=DH}=t;if(!l)return null;const m=s?u:{...u,scaleX:1,scaleY:1},p={...RH,width:l.width,height:l.height,top:l.top,left:l.left,transform:so.Transform.toString(m),transformOrigin:s&&r?TB(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Ie.createElement(n,{className:a,style:p,ref:e},i)}),OH=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:a}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},LH=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:so.Transform.toString(e)},{transform:so.Transform.toString(n)}]},VH={duration:250,easing:"ease",keyframes:LH,sideEffects:OH({styles:{active:{opacity:"0"}}})};function FH(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return pp((i,a)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=SA(a);if(!u)return;const{transform:h}=kn(a).getComputedStyle(a),m=fA(h);if(!m)return;const p=typeof e=="function"?e:zH(e);return wA(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:m})})}function zH(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...VH,...t};return i=>{let{active:a,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-a.rect.left,y:l.rect.top-a.rect.top},m={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...m},g=s({...u,active:a,dragOverlay:l,transform:{initial:c,final:p}}),[w]=g,v=g[g.length-1];if(JSON.stringify(w)===JSON.stringify(v))return;const _=r==null?void 0:r({active:a,dragOverlay:l,...u}),b=l.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{b.onfinish=()=>{_==null||_(),x()}})}}let yN=0;function UH(t){return f.useMemo(()=>{if(t!=null)return yN++,yN},[t])}const $H=Ie.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:a,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:m,activeNodeRect:p,containerNodeRect:g,draggableNodes:w,droppableContainers:v,dragOverlay:_,over:b,measuringConfiguration:x,scrollableAncestors:S,scrollableAncestorRects:j,windowRect:D}=CA(),M=f.useContext(vp),N=UH(m==null?void 0:m.id),C=TA(a,{activatorEvent:h,active:m,activeNodeRect:p,containerNodeRect:g,draggingNodeRect:_.rect,over:b,overlayNodeRect:_.rect,scrollableAncestors:S,scrollableAncestorRects:j,transform:M,windowRect:D}),T=Nw(p),k=FH({config:r,draggableNodes:w,droppableContainers:v,measuringConfiguration:x}),I=T?_.setRef:void 0;return Ie.createElement(PH,null,Ie.createElement(IH,{animation:k},m&&N?Ie.createElement(MH,{key:N,id:m.id,ref:I,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:T,style:{zIndex:u,...s},transform:C},n):null))});function jA(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function BH(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function oh(t){return t!==null&&t>=0}function HH(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function WH(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const IA=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=jA(e,r,n),a=e[s],l=i[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},ah={scaleX:1,scaleY:1},qH=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:a}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[a];return u?{x:0,y:n<a?u.top+u.height-(l.top+l.height):u.top-l.top,...ah}:null}const c=GH(i,s,n);return s>n&&s<=a?{x:0,y:-l.height-c,...ah}:s<n&&s>=a?{x:0,y:l.height+c,...ah}:{x:0,y:0,...ah}};function GH(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const AA="Sortable",PA=Ie.createContext({activeIndex:-1,containerId:AA,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:IA,disabled:{draggable:!1,droppable:!1}});function KH(t){let{children:e,id:n,items:r,strategy:s=IA,disabled:i=!1}=t;const{active:a,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=CA(),m=cd(AA,n),p=l.rect!==null,g=f.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),w=a!=null,v=a?g.indexOf(a.id):-1,_=u?g.indexOf(u.id):-1,b=f.useRef(g),x=!HH(g,b.current),S=_!==-1&&v===-1||x,j=WH(i);Yr(()=>{x&&w&&h(g)},[x,g,w,h]),f.useEffect(()=>{b.current=g},[g]);const D=f.useMemo(()=>({activeIndex:v,containerId:m,disabled:j,disableTransforms:S,items:g,overIndex:_,useDragOverlay:p,sortedRects:BH(g,c),strategy:s}),[v,m,j.draggable,j.droppable,S,g,_,c,p,s]);return Ie.createElement(PA.Provider,{value:D},e)}const QH=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return jA(n,r,s).indexOf(e)},XH=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===a?!1:n?!0:a!==s&&e===c},YH={duration:200,easing:"ease"},RA="transform",JH=so.Transition.toString({property:RA,duration:0,easing:"linear"}),ZH={roleDescription:"sortable"};function eW(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,a]=f.useState(null),l=f.useRef(n);return Yr(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=Xl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&a(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),f.useEffect(()=>{i&&a(null)},[i]),i}function tW(t){let{animateLayoutChanges:e=XH,attributes:n,disabled:r,data:s,getNewIndex:i=QH,id:a,strategy:l,resizeObserverConfig:c,transition:u=YH}=t;const{items:h,containerId:m,activeIndex:p,disabled:g,disableTransforms:w,sortedRects:v,overIndex:_,useDragOverlay:b,strategy:x}=f.useContext(PA),S=nW(r,g),j=h.indexOf(a),D=f.useMemo(()=>({sortable:{containerId:m,index:j,items:h},...s}),[m,s,j,h]),M=f.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:N,node:C,isOver:T,setNodeRef:k}=kA({id:a,data:D,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:I,activatorEvent:R,activeNodeRect:P,attributes:O,setNodeRef:re,listeners:J,isDragging:X,over:L,setActivatorNodeRef:H,transform:z}=CH({id:a,data:D,attributes:{...ZH,...n},disabled:S.draggable}),$=uB(k,re),G=!!I,ee=G&&!w&&oh(p)&&oh(_),ie=!b&&X,ne=ie&&ee?z:null,V=ee?ne??(l??x)({rects:v,activeNodeRect:P,activeIndex:p,overIndex:_,index:j}):null,Y=oh(p)&&oh(_)?i({id:a,items:h,activeIndex:p,overIndex:_}):j,he=I==null?void 0:I.id,Q=f.useRef({activeId:he,items:h,newIndex:Y,containerId:m}),te=h!==Q.current.items,ce=e({active:I,containerId:m,isDragging:X,isSorting:G,id:a,index:j,items:h,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:u,wasDragging:Q.current.activeId!=null}),Se=eW({disabled:!ce,index:j,node:C,rect:N});return f.useEffect(()=>{G&&Q.current.newIndex!==Y&&(Q.current.newIndex=Y),m!==Q.current.containerId&&(Q.current.containerId=m),h!==Q.current.items&&(Q.current.items=h)},[G,Y,m,h]),f.useEffect(()=>{if(he===Q.current.activeId)return;if(he!=null&&Q.current.activeId==null){Q.current.activeId=he;return}const ft=setTimeout(()=>{Q.current.activeId=he},50);return()=>clearTimeout(ft)},[he]),{active:I,activeIndex:p,attributes:O,data:D,rect:N,index:j,newIndex:Y,items:h,isOver:T,isSorting:G,isDragging:X,listeners:J,node:C,overIndex:_,over:L,setNodeRef:$,setActivatorNodeRef:H,setDroppableNodeRef:k,setDraggableNodeRef:re,transform:Se??V,transition:Le()};function Le(){if(Se||te&&Q.current.newIndex===j)return JH;if(!(ie&&!gp(R)||!u)&&(G||ce))return so.Transition.toString({...u,property:RA})}}function nW(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}We.Down,We.Right,We.Up,We.Left;function qe({className:t,...e}){return o.jsx("div",{className:U("animate-pulse rounded-md bg-muted",t),...e})}const Ae=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Ae.displayName="Card";const Xe=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("flex flex-col space-y-1.5 p-6",t),...e}));Xe.displayName="CardHeader";const nt=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("text-2xl font-semibold leading-none tracking-tight",t),...e}));nt.displayName="CardTitle";const _n=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("text-sm text-muted-foreground",t),...e}));_n.displayName="CardDescription";const Be=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("p-6 pt-0",t),...e}));Be.displayName="CardContent";const Ew=f.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:U("flex items-center p-6 pt-0",t),...e}));Ew.displayName="CardFooter";function DA(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],a=r.toISOString().split("T")[0];return s===i?"Today":s===a?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function MA(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function OA({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:a,transform:l,transition:c,isDragging:u}=tW({id:t.id}),h={transform:so.Transform.toString(l),transition:c},m=MA(t.dueDate),p=m!==null&&m<=1&&m>=0,g=t.systemStatus==="overdue"||m!==null&&m<0;return o.jsx(Ae,{ref:a,style:h,className:U("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",g&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx(pn,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),o.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:w=>w.stopPropagation(),children:o.jsx(JO,{className:"h-4 w-4 text-muted-foreground"})})]}),o.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(co,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:U(g&&"text-destructive",p&&!g&&"text-foreground font-medium"),children:DA(t.dueDate)}),g&&o.jsx(ir,{className:"h-3.5 w-3.5 text-destructive"}),p&&!g&&o.jsx(HC,{className:"h-3.5 w-3.5 text-foreground"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&o.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o.jsx(hl,{className:"h-3.5 w-3.5 text-muted-foreground"}),o.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(hl,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Submitted"})]})]}),o.jsx("div",{className:"flex items-center gap-1",children:n&&o.jsx(Vo,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function rW({assignment:t,onClick:e}){const n=MA(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return o.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[o.jsx("span",{className:U("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:DA(t.dueDate)}),r&&o.jsx(ir,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const Tw=f.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:U("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Tw.displayName="Textarea";var sW="Separator",vN="horizontal",iW=["horizontal","vertical"],LA=f.forwardRef((t,e)=>{const{decorative:n,orientation:r=vN,...s}=t,i=oW(r)?r:vN,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(ve.div,{"data-orientation":i,...l,...s,ref:e})});LA.displayName=sW;function oW(t){return iW.includes(t)}var VA=LA;const Fr=f.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>o.jsx(VA,{ref:s,decorative:n,orientation:e,className:U("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Fr.displayName=VA.displayName;var Cw="Dialog",[FA,zA]=lr(Cw),[aW,Zr]=FA(Cw),UA=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=f.useRef(null),c=f.useRef(null),[u=!1,h]=Gs({prop:r,defaultProp:s,onChange:i});return o.jsx(aW,{scope:e,triggerRef:l,contentRef:c,contentId:gs(),titleId:gs(),descriptionId:gs(),open:u,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(m=>!m),[h]),modal:a,children:n})};UA.displayName=Cw;var $A="DialogTrigger",BA=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zr($A,n),i=Pe(e,s.triggerRef);return o.jsx(ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Iw(s.open),...r,ref:i,onClick:pe(t.onClick,s.onOpenToggle)})});BA.displayName=$A;var kw="DialogPortal",[lW,HA]=FA(kw,{forceMount:void 0}),WA=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Zr(kw,e);return o.jsx(lW,{scope:e,forceMount:n,children:f.Children.map(r,a=>o.jsx(Bn,{present:n||i.open,children:o.jsx(Ml,{asChild:!0,container:s,children:a})}))})};WA.displayName=kw;var Qf="DialogOverlay",qA=f.forwardRef((t,e)=>{const n=HA(Qf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Zr(Qf,t.__scopeDialog);return i.modal?o.jsx(Bn,{present:r||i.open,children:o.jsx(uW,{...s,ref:e})}):null});qA.displayName=Qf;var cW=qo("DialogOverlay.RemoveScroll"),uW=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zr(Qf,n);return o.jsx(up,{as:cW,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(ve.div,{"data-state":Iw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Zo="DialogContent",GA=f.forwardRef((t,e)=>{const n=HA(Zo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Zr(Zo,t.__scopeDialog);return o.jsx(Bn,{present:r||i.open,children:i.modal?o.jsx(dW,{...s,ref:e}):o.jsx(hW,{...s,ref:e})})});GA.displayName=Zo;var dW=f.forwardRef((t,e)=>{const n=Zr(Zo,t.__scopeDialog),r=f.useRef(null),s=Pe(e,n.contentRef,r);return f.useEffect(()=>{const i=r.current;if(i)return cw(i)},[]),o.jsx(KA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:pe(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:pe(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:pe(t.onFocusOutside,i=>i.preventDefault())})}),hW=f.forwardRef((t,e)=>{const n=Zr(Zo,t.__scopeDialog),r=f.useRef(!1),s=f.useRef(!1);return o.jsx(KA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),KA=f.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=Zr(Zo,n),c=f.useRef(null),u=Pe(e,c);return lw(),o.jsxs(o.Fragment,{children:[o.jsx(lp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Dl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Iw(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(mW,{titleId:l.titleId}),o.jsx(gW,{contentRef:c,descriptionId:l.descriptionId})]})]})}),jw="DialogTitle",QA=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zr(jw,n);return o.jsx(ve.h2,{id:s.titleId,...r,ref:e})});QA.displayName=jw;var XA="DialogDescription",YA=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zr(XA,n);return o.jsx(ve.p,{id:s.descriptionId,...r,ref:e})});YA.displayName=XA;var JA="DialogClose",ZA=f.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Zr(JA,n);return o.jsx(ve.button,{type:"button",...r,ref:e,onClick:pe(t.onClick,()=>s.onOpenChange(!1))})});ZA.displayName=JA;function Iw(t){return t?"open":"closed"}var eP="DialogTitleWarning",[fW,tP]=KM(eP,{contentName:Zo,titleName:jw,docsSlug:"dialog"}),mW=({titleId:t})=>{const e=tP(eP),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return f.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},pW="DialogDescriptionWarning",gW=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${tP(pW).contentName}}.`;return f.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Aw=UA,nP=BA,Pw=WA,dd=qA,hd=GA,fd=QA,md=YA,xp=ZA;const yW=Aw,vW=Pw,rP=f.forwardRef(({className:t,...e},n)=>o.jsx(dd,{className:U("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));rP.displayName=dd.displayName;const xW=zu("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),sP=f.forwardRef(({side:t="right",className:e,children:n,...r},s)=>o.jsxs(vW,{children:[o.jsx(rP,{}),o.jsxs(hd,{ref:s,className:U(xW({side:t}),e),...r,children:[n,o.jsxs(xp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(bs,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sP.displayName=hd.displayName;const iP=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",t),...e});iP.displayName="SheetHeader";const oP=f.forwardRef(({className:t,...e},n)=>o.jsx(fd,{ref:n,className:U("text-lg font-semibold text-foreground",t),...e}));oP.displayName=fd.displayName;const wW=f.forwardRef(({className:t,...e},n)=>o.jsx(md,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));wW.displayName=md.displayName;function bW(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function _W(t){return t?` at ${t}`:""}function SW({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),o.jsx("div",{className:"space-y-4",children:r.map((s,i)=>o.jsxs("div",{className:"flex items-start gap-3 relative",children:[o.jsx("div",{className:U("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&o.jsx(hl,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:U("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function NW({note:t,onUpdate:e,onDelete:n}){const[r,s]=f.useState(!1),[i,a]=f.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return o.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&o.jsx(mf,{className:"h-3.5 w-3.5 fill-current text-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:o.jsx(mf,{className:U("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:o.jsx(s3,{className:"h-3.5 w-3.5"})}),o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:o.jsx(d3,{className:"h-3.5 w-3.5"})})]})]}),r?o.jsxs("div",{className:"space-y-2",children:[o.jsx(Tw,{value:i,onChange:c=>a(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),o.jsxs(ae,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[o.jsx($x,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function Rw({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:a}=On(),[l,c]=f.useState(""),[u,h]=f.useState(!1);if(!t)return null;const m=r(t.id),p=t.systemStatus==="overdue",g=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return o.jsx(yW,{open:e,onOpenChange:n,children:o.jsxs(sP,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[o.jsx(iP,{className:"space-y-4",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[o.jsx(pn,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),o.jsx(oP,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),o.jsxs("div",{className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(co,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("span",{className:U(p&&"text-destructive"),children:[bW(t.dueDate),_W(t.dueTime)]}),p&&o.jsx(ir,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?o.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):o.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),o.jsx(Fr,{}),t.description&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),o.jsx(Fr,{})]}),o.jsx(SW,{assignment:t}),o.jsx(Fr,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&o.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[o.jsx(i3,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(Tw,{value:l,onChange:w=>c(w.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ae,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),o.jsxs(ae,{size:"sm",onClick:g,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[o.jsx($x,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),m.length>0?o.jsx("div",{className:"space-y-2",children:m.map(w=>o.jsx(NW,{note:w,onUpdate:(v,_)=>i(w.id,v,_),onDelete:()=>a(w.id,t.id)},w.id))}):!u&&o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&o.jsxs(o.Fragment,{children:[o.jsx(Fr,{}),o.jsxs(ae,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[o.jsx(Uy,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function Yl(){const{refreshAccessToken:t,signOut:e}=ot(),[n,r]=f.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),o.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:o.jsx(ml,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),o.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),o.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[o.jsx(ae,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?o.jsxs(o.Fragment,{children:[o.jsx(ml,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{className:"font-medium",children:"Signing In..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(lA,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),o.jsx(ae,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),o.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[o.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function EW({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:a}=kA({id:t});return o.jsxs("div",{ref:a,className:U("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[o.jsx("h3",{className:"text-sm font-medium",children:e}),o.jsx(pn,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),o.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:o.jsx(KH,{items:n.map(l=>l.id),strategy:qH,children:n.length>0?n.map(l=>{var c;return o.jsx(OA,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):o.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function TW(){return o.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6 opacity-40 pointer-events-none select-none filter grayscale",children:[1,2,3,4,5].map(t=>o.jsxs("div",{className:"flex flex-col min-w-[280px] w-[280px]",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx(qe,{className:"h-5 w-24"}),o.jsx(qe,{className:"h-5 w-8"})]}),o.jsx("div",{className:"p-3 space-y-3",children:[1,2,3].map(e=>o.jsx(qe,{className:"h-32 w-full"},e))})]},t))})}function CW(){var C;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:a,error:l}=On();ot();const[c,u]=f.useState(null),[h,m]=f.useState(null);if(l&&l.toLowerCase().includes("session")&&!(i.length>0))return o.jsx(Yl,{});if(n)return o.jsx(TW,{});const p=f.useRef(null),[g,w]=f.useState(!1),v=f.useRef({x:0,left:0}),_=NB(iN(Sw,{activationConstraint:{distance:8}}),iN(bw)),b=t(),x=h?i.find(T=>T.id===h):null,S=T=>{m(T.active.id)},j=T=>{const{active:k,over:I}=T;if(m(null),!I)return;const R=k.id,P=I.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(P)){const O=i.find(re=>re.id===R);O&&O.systemStatus!==P&&(P==="in_progress"?e(R,"in_progress"):e(R,"backlog"))}},D=T=>{T.button===2&&p.current&&(T.preventDefault(),w(!0),v.current={x:T.pageX,left:p.current.scrollLeft})},M=f.useCallback(T=>{if(!g||!p.current)return;T.preventDefault();const I=(T.pageX-v.current.x)*1.5;p.current.scrollLeft=v.current.left-I},[g]),N=f.useCallback(()=>{w(!1)},[]);return f.useEffect(()=>(g?(window.addEventListener("mousemove",M),window.addEventListener("mouseup",N)):(window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",N)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",N)}),[g,M,N]),o.jsxs(o.Fragment,{children:[l&&l.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(ir,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:T=>{T.preventDefault(),window.location.reload()},children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs(NH,{sensors:_,collisionDetection:IB,onDragStart:S,onDragEnd:j,children:[o.jsxs("div",{className:"relative h-full flex flex-col",children:[o.jsx("div",{ref:p,className:U("flex gap-4 flex-1 overflow-x-auto p-6 pb-0 select-none",g?"cursor-grabbing":"cursor-grab"),onMouseDown:D,onContextMenu:T=>T.preventDefault(),children:b.map(T=>o.jsx(EW,{id:T.id,title:T.title,assignments:T.assignments,onCardClick:u,notes:s},T.id))}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx(Hy,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]}),o.jsx($H,{children:x&&o.jsx(OA,{assignment:x,isDragging:!0,hasNotes:(((C=s.get(x.id))==null?void 0:C.length)||0)>0})})]}),o.jsx(Rw,{assignment:c,isOpen:!!c,onClose:()=>u(null)})]})}function aP(t){const e=f.useRef({value:t,previous:t});return f.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var kW=[" ","Enter","ArrowUp","ArrowDown"],jW=[" ","Enter"],pd="Select",[wp,bp,IW]=Mx(pd),[Jl,QG]=lr(pd,[IW,Fl]),_p=Fl(),[AW,mo]=Jl(pd),[PW,RW]=Jl(pd),lP=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:m,disabled:p,required:g,form:w}=t,v=_p(e),[_,b]=f.useState(null),[x,S]=f.useState(null),[j,D]=f.useState(!1),M=dp(u),[N=!1,C]=Gs({prop:r,defaultProp:s,onChange:i}),[T,k]=Gs({prop:a,defaultProp:l,onChange:c}),I=f.useRef(null),R=_?w||!!_.closest("form"):!0,[P,O]=f.useState(new Set),re=Array.from(P).map(J=>J.props.value).join(";");return o.jsx(n0,{...v,children:o.jsxs(AW,{required:g,scope:e,trigger:_,onTriggerChange:b,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:j,onValueNodeHasChildrenChange:D,contentId:gs(),value:T,onValueChange:k,open:N,onOpenChange:C,dir:M,triggerPointerDownPosRef:I,disabled:p,children:[o.jsx(wp.Provider,{scope:e,children:o.jsx(PW,{scope:t.__scopeSelect,onNativeOptionAdd:f.useCallback(J=>{O(X=>new Set(X).add(J))},[]),onNativeOptionRemove:f.useCallback(J=>{O(X=>{const L=new Set(X);return L.delete(J),L})},[]),children:n})}),R?o.jsxs(RP,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:m,value:T,onChange:J=>k(J.target.value),disabled:p,form:w,children:[T===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},re):null]})})};lP.displayName=pd;var cP="SelectTrigger",uP=f.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=_p(n),a=mo(cP,n),l=a.disabled||r,c=Pe(e,a.onTriggerChange),u=bp(n),h=f.useRef("touch"),[m,p,g]=DP(v=>{const _=u().filter(S=>!S.disabled),b=_.find(S=>S.value===a.value),x=MP(_,v,b);x!==void 0&&a.onValueChange(x.value)}),w=v=>{l||(a.onOpenChange(!0),g()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return o.jsx(Em,{asChild:!0,...i,children:o.jsx(ve.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":PP(a.value)?"":void 0,...s,ref:c,onClick:pe(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&w(v)}),onPointerDown:pe(s.onPointerDown,v=>{h.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:pe(s.onKeyDown,v=>{const _=m.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(_&&v.key===" ")&&kW.includes(v.key)&&(w(),v.preventDefault())})})})});uP.displayName=cP;var dP="SelectValue",hP=f.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=mo(dP,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,m=Pe(e,c.onValueNodeChange);return At(()=>{u(h)},[u,h]),o.jsx(ve.span,{...l,ref:m,style:{pointerEvents:"none"},children:PP(c.value)?o.jsx(o.Fragment,{children:a}):i})});hP.displayName=dP;var DW="SelectIcon",fP=f.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(ve.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});fP.displayName=DW;var MW="SelectPortal",mP=t=>o.jsx(Ml,{asChild:!0,...t});mP.displayName=MW;var ea="SelectContent",pP=f.forwardRef((t,e)=>{const n=mo(ea,t.__scopeSelect),[r,s]=f.useState();if(At(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?wr.createPortal(o.jsx(gP,{scope:t.__scopeSelect,children:o.jsx(wp.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(yP,{...t,ref:e})});pP.displayName=ea;var Ir=10,[gP,po]=Jl(ea),OW="SelectContentImpl",LW=qo("SelectContent.RemoveScroll"),yP=f.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_,...b}=t,x=mo(ea,n),[S,j]=f.useState(null),[D,M]=f.useState(null),N=Pe(e,V=>j(V)),[C,T]=f.useState(null),[k,I]=f.useState(null),R=bp(n),[P,O]=f.useState(!1),re=f.useRef(!1);f.useEffect(()=>{if(S)return cw(S)},[S]),lw();const J=f.useCallback(V=>{const[Y,...he]=R().map(ce=>ce.ref.current),[Q]=he.slice(-1),te=document.activeElement;for(const ce of V)if(ce===te||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===Y&&D&&(D.scrollTop=0),ce===Q&&D&&(D.scrollTop=D.scrollHeight),ce==null||ce.focus(),document.activeElement!==te))return},[R,D]),X=f.useCallback(()=>J([C,S]),[J,C,S]);f.useEffect(()=>{P&&X()},[P,X]);const{onOpenChange:L,triggerPointerDownPosRef:H}=x;f.useEffect(()=>{if(S){let V={x:0,y:0};const Y=Q=>{var te,ce;V={x:Math.abs(Math.round(Q.pageX)-(((te=H.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(Q.pageY)-(((ce=H.current)==null?void 0:ce.y)??0))}},he=Q=>{V.x<=10&&V.y<=10?Q.preventDefault():S.contains(Q.target)||L(!1),document.removeEventListener("pointermove",Y),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",he,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",he,{capture:!0})}}},[S,L,H]),f.useEffect(()=>{const V=()=>L(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[L]);const[z,$]=DP(V=>{const Y=R().filter(te=>!te.disabled),he=Y.find(te=>te.ref.current===document.activeElement),Q=MP(Y,V,he);Q&&setTimeout(()=>Q.ref.current.focus())}),G=f.useCallback((V,Y,he)=>{const Q=!re.current&&!he;(x.value!==void 0&&x.value===Y||Q)&&(T(V),Q&&(re.current=!0))},[x.value]),ee=f.useCallback(()=>S==null?void 0:S.focus(),[S]),ie=f.useCallback((V,Y,he)=>{const Q=!re.current&&!he;(x.value!==void 0&&x.value===Y||Q)&&I(V)},[x.value]),ne=r==="popper"?Cv:vP,oe=ne===Cv?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:p,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_}:{};return o.jsx(gP,{scope:n,content:S,viewport:D,onViewportChange:M,itemRefCallback:G,selectedItem:C,onItemLeave:ee,itemTextRefCallback:ie,focusSelectedItem:X,selectedItemText:k,position:r,isPositioned:P,searchRef:z,children:o.jsx(up,{as:LW,allowPinchZoom:!0,children:o.jsx(lp,{asChild:!0,trapped:x.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:pe(s,V=>{var Y;(Y=x.trigger)==null||Y.focus({preventScroll:!0}),V.preventDefault()}),children:o.jsx(Dl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:o.jsx(ne,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:V=>V.preventDefault(),...b,...oe,onPlaced:()=>O(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:pe(b.onKeyDown,V=>{const Y=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!Y&&V.key.length===1&&$(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let Q=R().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(V.key)&&(Q=Q.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const te=V.target,ce=Q.indexOf(te);Q=Q.slice(ce+1)}setTimeout(()=>J(Q)),V.preventDefault()}})})})})})})});yP.displayName=OW;var VW="SelectItemAlignedPosition",vP=f.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=mo(ea,n),a=po(ea,n),[l,c]=f.useState(null),[u,h]=f.useState(null),m=Pe(e,N=>h(N)),p=bp(n),g=f.useRef(!1),w=f.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:b,focusSelectedItem:x}=a,S=f.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&v&&_&&b){const N=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),k=b.getBoundingClientRect();if(i.dir!=="rtl"){const te=k.left-C.left,ce=T.left-te,Se=N.left-ce,Le=N.width+Se,ft=Math.max(Le,C.width),He=window.innerWidth-Ir,Ze=Sv(ce,[Ir,Math.max(Ir,He-ft)]);l.style.minWidth=Le+"px",l.style.left=Ze+"px"}else{const te=C.right-k.right,ce=window.innerWidth-T.right-te,Se=window.innerWidth-N.right-ce,Le=N.width+Se,ft=Math.max(Le,C.width),He=window.innerWidth-Ir,Ze=Sv(ce,[Ir,Math.max(Ir,He-ft)]);l.style.minWidth=Le+"px",l.style.right=Ze+"px"}const I=p(),R=window.innerHeight-Ir*2,P=v.scrollHeight,O=window.getComputedStyle(u),re=parseInt(O.borderTopWidth,10),J=parseInt(O.paddingTop,10),X=parseInt(O.borderBottomWidth,10),L=parseInt(O.paddingBottom,10),H=re+J+P+L+X,z=Math.min(_.offsetHeight*5,H),$=window.getComputedStyle(v),G=parseInt($.paddingTop,10),ee=parseInt($.paddingBottom,10),ie=N.top+N.height/2-Ir,ne=R-ie,oe=_.offsetHeight/2,V=_.offsetTop+oe,Y=re+J+V,he=H-Y;if(Y<=ie){const te=I.length>0&&_===I[I.length-1].ref.current;l.style.bottom="0px";const ce=u.clientHeight-v.offsetTop-v.offsetHeight,Se=Math.max(ne,oe+(te?ee:0)+ce+X),Le=Y+Se;l.style.height=Le+"px"}else{const te=I.length>0&&_===I[0].ref.current;l.style.top="0px";const Se=Math.max(ie,re+v.offsetTop+(te?G:0)+oe)+he;l.style.height=Se+"px",v.scrollTop=Y-ie+v.offsetTop}l.style.margin=`${Ir}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,v,_,b,i.dir,r]);At(()=>S(),[S]);const[j,D]=f.useState();At(()=>{u&&D(window.getComputedStyle(u).zIndex)},[u]);const M=f.useCallback(N=>{N&&w.current===!0&&(S(),x==null||x(),w.current=!1)},[S,x]);return o.jsx(zW,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:o.jsx(ve.div,{...s,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});vP.displayName=VW;var FW="SelectPopperPosition",Cv=f.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Ir,...i}=t,a=_p(n);return o.jsx(r0,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Cv.displayName=FW;var[zW,Dw]=Jl(ea,{}),kv="SelectViewport",xP=f.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=po(kv,n),a=Dw(kv,n),l=Pe(e,i.onViewportChange),c=f.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(wp.Slot,{scope:n,children:o.jsx(ve.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:pe(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&m){const g=Math.abs(c.current-h.scrollTop);if(g>0){const w=window.innerHeight-Ir*2,v=parseFloat(m.style.minHeight),_=parseFloat(m.style.height),b=Math.max(v,_);if(b<w){const x=b+g,S=Math.min(w,x),j=x-S;m.style.height=S+"px",m.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,m.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});xP.displayName=kv;var wP="SelectGroup",[UW,$W]=Jl(wP),BW=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=gs();return o.jsx(UW,{scope:n,id:s,children:o.jsx(ve.div,{role:"group","aria-labelledby":s,...r,ref:e})})});BW.displayName=wP;var bP="SelectLabel",_P=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=$W(bP,n);return o.jsx(ve.div,{id:s.id,...r,ref:e})});_P.displayName=bP;var Xf="SelectItem",[HW,SP]=Jl(Xf),NP=f.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=mo(Xf,n),c=po(Xf,n),u=l.value===r,[h,m]=f.useState(i??""),[p,g]=f.useState(!1),w=Pe(e,x=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,x,r,s)}),v=gs(),_=f.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(HW,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:f.useCallback(x=>{m(S=>S||((x==null?void 0:x.textContent)??"").trim())},[]),children:o.jsx(wp.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(ve.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:w,onFocus:pe(a.onFocus,()=>g(!0)),onBlur:pe(a.onBlur,()=>g(!1)),onClick:pe(a.onClick,()=>{_.current!=="mouse"&&b()}),onPointerUp:pe(a.onPointerUp,()=>{_.current==="mouse"&&b()}),onPointerDown:pe(a.onPointerDown,x=>{_.current=x.pointerType}),onPointerMove:pe(a.onPointerMove,x=>{var S;_.current=x.pointerType,s?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(a.onPointerLeave,x=>{var S;x.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:pe(a.onKeyDown,x=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&x.key===" "||(jW.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});NP.displayName=Xf;var Cc="SelectItemText",EP=f.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=mo(Cc,n),l=po(Cc,n),c=SP(Cc,n),u=RW(Cc,n),[h,m]=f.useState(null),p=Pe(e,b=>m(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),g=h==null?void 0:h.textContent,w=f.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=u;return At(()=>(v(w),()=>_(w)),[v,_,w]),o.jsxs(o.Fragment,{children:[o.jsx(ve.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?wr.createPortal(i.children,a.valueNode):null]})});EP.displayName=Cc;var TP="SelectItemIndicator",CP=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return SP(TP,n).isSelected?o.jsx(ve.span,{"aria-hidden":!0,...r,ref:e}):null});CP.displayName=TP;var jv="SelectScrollUpButton",kP=f.forwardRef((t,e)=>{const n=po(jv,t.__scopeSelect),r=Dw(jv,t.__scopeSelect),[s,i]=f.useState(!1),a=Pe(e,r.onScrollButtonChange);return At(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(IP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});kP.displayName=jv;var Iv="SelectScrollDownButton",jP=f.forwardRef((t,e)=>{const n=po(Iv,t.__scopeSelect),r=Dw(Iv,t.__scopeSelect),[s,i]=f.useState(!1),a=Pe(e,r.onScrollButtonChange);return At(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(IP,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});jP.displayName=Iv;var IP=f.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=po("SelectScrollButton",n),a=f.useRef(null),l=bp(n),c=f.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return f.useEffect(()=>()=>c(),[c]),At(()=>{var h;const u=l().find(m=>m.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(ve.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:pe(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:pe(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:pe(s.onPointerLeave,()=>{c()})})}),WW="SelectSeparator",AP=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(ve.div,{"aria-hidden":!0,...r,ref:e})});AP.displayName=WW;var Av="SelectArrow",qW=f.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=_p(n),i=mo(Av,n),a=po(Av,n);return i.open&&a.position==="popper"?o.jsx(s0,{...s,...r,ref:e}):null});qW.displayName=Av;function PP(t){return t===""||t===void 0}var RP=f.forwardRef((t,e)=>{const{value:n,...r}=t,s=f.useRef(null),i=Pe(e,s),a=aP(n);return f.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&h){const m=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(m)}},[a,n]),o.jsx(Fu,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});RP.displayName="BubbleSelect";function DP(t){const e=_t(t),n=f.useRef(""),r=f.useRef(0),s=f.useCallback(a=>{const l=n.current+a;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function MP(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=GW(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function GW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var KW=lP,OP=uP,QW=hP,XW=fP,YW=mP,LP=pP,JW=xP,VP=_P,FP=NP,ZW=EP,eq=CP,zP=kP,UP=jP,$P=AP;const ju=KW,Iu=QW,jl=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(OP,{ref:r,className:U("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(XW,{asChild:!0,children:o.jsx(BC,{className:"h-4 w-4 opacity-50"})})]}));jl.displayName=OP.displayName;const BP=f.forwardRef(({className:t,...e},n)=>o.jsx(zP,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(qO,{className:"h-4 w-4"})}));BP.displayName=zP.displayName;const HP=f.forwardRef(({className:t,...e},n)=>o.jsx(UP,{ref:n,className:U("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(BC,{className:"h-4 w-4"})}));HP.displayName=UP.displayName;const Il=f.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(YW,{children:o.jsxs(LP,{ref:s,className:U("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(BP,{}),o.jsx(JW,{className:U("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(HP,{})]})}));Il.displayName=LP.displayName;const tq=f.forwardRef(({className:t,...e},n)=>o.jsx(VP,{ref:n,className:U("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));tq.displayName=VP.displayName;const Et=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(FP,{ref:r,className:U("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(eq,{children:o.jsx(hf,{className:"h-4 w-4"})})}),o.jsx(ZW,{children:e})]}));Et.displayName=FP.displayName;const nq=f.forwardRef(({className:t,...e},n)=>o.jsx($P,{ref:n,className:U("-mx-1 my-1 h-px bg-muted",t),...e}));nq.displayName=$P.displayName;function rq(t){return gw({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function sq(){return o.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(qe,{className:"h-10 w-40"}),o.jsx(qe,{className:"h-10 w-40"})]}),[1,2,3].map(t=>o.jsxs("div",{className:"space-y-3",children:[o.jsx(qe,{className:"h-6 w-32"}),o.jsx("div",{className:"space-y-2",children:[1,2].map(e=>o.jsx(qe,{className:"h-16 w-full"},e))})]},t))]})}const lh={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},iq=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},oq=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},$g=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,xN=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function aq(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=On();ot();const[a,l]=f.useState(null),[c,u]=f.useState(null),[h,m]=f.useState(null),[p,g]=f.useState("timeline"),[w,v]=f.useState(1),[_,b]=f.useState(!1),[x]=f.useState([]);if(n)return o.jsx(sq,{});const S=f.useMemo(()=>{let T=[...s,...x];return a&&(T=T.filter(k=>k.courseId===a)),c&&(T=T.filter(k=>k.systemStatus===c)),T},[s,x,a,c]),j=()=>{l(null),u(null)},D=a||c,M=()=>{const T=f.useRef(null),[k,I]=f.useState(!1),R=f.useRef({x:0,left:0}),O=60*w,{earliestDate:re,latestDate:J,initialScrollPosition:X}=f.useMemo(()=>{const V=new Date;V.setHours(0,0,0,0);let Y=new Date,he=new Date;if(S.length>0){const He=S.flatMap(Ze=>{const rn=[];return Ze.dueDate&&rn.push(new Date(Ze.dueDate)),Ze.createdAt&&rn.push(new Date(Ze.createdAt)),rn});He.length>0&&(Y=new Date(Math.min(...He.map(Ze=>Ze.getTime()))),he=new Date(Math.max(...He.map(Ze=>Ze.getTime()))))}const Q=new Date(Y);Q.setDate(Q.getDate()-30);const te=new Date(he);te.setDate(te.getDate()+30);let ce=V;const Se=S.filter(He=>He.dueDate&&new Date(He.dueDate)>=V).sort((He,Ze)=>new Date(He.dueDate).getTime()-new Date(Ze.dueDate).getTime());Se.length>0&&(ce=new Date(Se[0].dueDate));const ft=Math.ceil((ce.getTime()-Q.getTime())/(1e3*3600*24))*O+O/2-window.innerWidth/2;return{earliestDate:Q,latestDate:te,initialScrollPosition:Math.max(0,ft)}},[S,O]),L=f.useMemo(()=>iq(re,J),[re,J]);f.useEffect(()=>{T.current&&(T.current.scrollLeft=X)},[X]);const H=V=>{V.button===2&&T.current&&(V.preventDefault(),I(!0),R.current={x:V.pageX,left:T.current.scrollLeft})},z=f.useCallback(V=>{if(!k||!T.current)return;V.preventDefault();const he=(V.pageX-R.current.x)*1.5;T.current.scrollLeft=R.current.left-he},[k]),$=f.useCallback(()=>{I(!1)},[]);f.useEffect(()=>(k?(window.addEventListener("mousemove",z),window.addEventListener("mouseup",$)):(window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",$)),()=>{window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",$)}),[k,z,$]);const[G,ee]=f.useState(!1),[ie,ne]=f.useState(!1),oe=f.useRef(null);return f.useEffect(()=>{const V=()=>{if(oe.current){const{scrollHeight:he,clientHeight:Q,scrollTop:te}=oe.current;ee(he>Q),ne(te+Q>=he-10)}};V();const Y=oe.current;return Y==null||Y.addEventListener("scroll",V),window.addEventListener("resize",V),()=>{Y==null||Y.removeEventListener("scroll",V),window.removeEventListener("resize",V)}},[S,_]),o.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[o.jsx("div",{ref:V=>{T.current=V,oe.current=V},className:U("flex-1 overflow-auto relative select-none",k?"cursor-grabbing":"cursor-default"),onMouseDown:H,onContextMenu:V=>V.preventDefault(),children:o.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${L.length*O}px`},children:[o.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:L.map((V,Y)=>{const he=xN(V);return o.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:O},children:[o.jsx("span",{className:U("text-[10px] uppercase font-bold tracking-wider mb-1",he?"text-foreground":"text-muted-foreground"),children:V.toLocaleDateString("en-US",{weekday:"narrow"})}),o.jsx("span",{className:U("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",he?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:V.getDate()}),o.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},Y)})}),o.jsxs("div",{className:"relative pt-6",style:{minHeight:_?`${Math.max(300,S.filter(V=>V.dueDate).length*40)}px`:`${Math.max(400,S.filter(V=>V.dueDate).length*60)}px`},children:[o.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:L.map((V,Y)=>{const he=xN(V);return o.jsx("div",{className:U("flex-shrink-0 h-full border-r border-border relative",he?"bg-accent/50":""),style:{width:O},children:he&&o.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},Y)})}),o.jsx("div",{className:U("px-0 relative z-10 mt-2",_?"space-y-1":"space-y-3"),children:S.filter(V=>V.dueDate).map(V=>{const Y=e.find(es=>es.id===V.courseId),he=Y==null?void 0:Y.color,Q=V.systemStatus==="submitted"||V.systemStatus==="graded",te=V.createdAt?new Date(V.createdAt):new Date,ce=new Date(V.dueDate),Se=(te.getTime()-re.getTime())/(1e3*3600*24),Le=(ce.getTime()-te.getTime())/(1e3*3600*24),ft=Math.max(0,Se*O),He=Math.max(O,Le*O),Ze={left:`${ft}px`,width:`${He}px`,minWidth:_?"100px":"140px",backgroundColor:Q?void 0:he,borderColor:Q?void 0:he?"rgba(0,0,0,0.1)":void 0};lh[V.systemStatus]||lh.backlog;const rn="bg-green-100/80 border-green-300 text-green-800",Qe="bg-card border shadow-sm "+(he?"text-slate-900":"text-foreground"),Je=_?"h-8":"h-12",jn=_?"h-9":"h-14";return o.jsx("div",{className:U("relative group",jn),children:o.jsxs("div",{onClick:()=>m(V),className:U("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",Je,_?"px-2":"px-3",Q?rn:Qe),style:Ze,children:[o.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:o.jsxs("span",{className:U("truncate font-bold leading-none flex items-center gap-1",_?"text-[10px]":"text-xs"),children:[V.courseId==="system"&&o.jsx(zx,{className:U("inline-block",_?"h-2.5 w-2.5":"h-3 w-3")}),Q&&o.jsx(hf,{className:U("inline-block mr-0.5",_?"h-2.5 w-2.5":"h-3 w-3")}),V.title]})}),!_&&o.jsx("div",{className:"flex items-center justify-between opacity-80",children:o.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:V.courseName})})]})},V.id)})})]})]})}),G&&!ie&&S.length>0&&o.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[o.jsx(Q1,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),o.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),o.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[o.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const V=T.current,Y=(V==null?void 0:V.scrollLeft)||0,he=(V==null?void 0:V.scrollTop)||0,Q=Math.min(2,w+.25);v(Q),Q>.75&&b(!1),setTimeout(()=>{V&&(V.scrollLeft=Y*(Q/w),V.scrollTop=he)},0)},disabled:w>=2,title:"Zoom In (Normal View)",children:o.jsx(f3,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),o.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),o.jsx(ae,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const V=T.current,Y=(V==null?void 0:V.scrollLeft)||0,he=(V==null?void 0:V.scrollTop)||0,Q=Math.max(.5,w-.25);v(Q),Q<=.75&&b(!0),setTimeout(()=>{V&&(V.scrollLeft=Y*(Q/w),V.scrollTop=he)},0)},disabled:w<=.5,title:"Zoom Out (Compact View)",children:o.jsx(m3,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[o.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(w*100),"%"]}),_&&o.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx(Hy,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},N=()=>{const T=f.useRef(null),[k,I]=f.useState(!1),R=f.useRef({y:0,top:0}),P=f.useRef({}),[O,re]=f.useState(!1),{startMonth:J,endMonth:X}=f.useMemo(()=>{let ne=new Date,oe=new Date;if(S.length>0){const he=S.filter(Q=>Q.dueDate).map(Q=>new Date(Q.dueDate));he.length>0&&(ne=new Date(Math.min(...he.map(Q=>Q.getTime()))),oe=new Date(Math.max(...he.map(Q=>Q.getTime()))))}const V=new Date(ne);V.setMonth(V.getMonth()-2),V.setDate(1);const Y=new Date(oe);return Y.setMonth(Y.getMonth()+4),Y.setDate(1),{startMonth:V,endMonth:Y}},[S]),L=f.useMemo(()=>oq(J,X),[J,X]),H=f.useCallback(()=>{var he;const ne=$g(new Date),oe=P.current[ne];if(!oe){re(!0);return}const V=oe.getBoundingClientRect(),Y=(he=T.current)==null?void 0:he.getBoundingClientRect();Y&&re(V.bottom<Y.top||V.top>Y.bottom)},[L]);f.useEffect(()=>{const ne=T.current;return ne&&(ne.addEventListener("scroll",H),H()),()=>ne==null?void 0:ne.removeEventListener("scroll",H)},[H]),f.useEffect(()=>{setTimeout(()=>z(),100)},[]);const z=()=>{const ne=$g(new Date),oe=P.current[ne];oe&&oe.scrollIntoView({behavior:"smooth",block:"center"})},$=ne=>{ne.button===2&&T.current&&(ne.preventDefault(),I(!0),R.current={y:ne.pageY,top:T.current.scrollTop})},G=f.useCallback(ne=>{if(!k||!T.current)return;ne.preventDefault();const V=(ne.pageY-R.current.y)*1.5;T.current.scrollTop=R.current.top-V},[k]),ee=f.useCallback(()=>{I(!1)},[]);f.useEffect(()=>(k?(window.addEventListener("mousemove",G),window.addEventListener("mouseup",ee)):(window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",ee)),()=>{window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",ee)}),[k,G,ee]);const ie=ne=>{const oe=ne.getFullYear(),V=ne.getMonth(),Y=new Date(oe,V,1),he=new Date(oe,V+1,0),Q=[];for(let te=0;te<Y.getDay();te++)Q.push({date:new Date(oe,V,-Y.getDay()+1+te),isCurrentMonth:!1});for(let te=1;te<=he.getDate();te++)Q.push({date:new Date(oe,V,te),isCurrentMonth:!0});for(;Q.length%7!==0;){const te=Q.length-(Y.getDay()+he.getDate())+1,ce=new Date(oe,V+1,te);Q.push({date:ce,isCurrentMonth:!1})}return Q};return o.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[O&&o.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:o.jsxs("button",{onClick:z,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[o.jsx(Q1,{size:14})," Jump to Today"]})}),o.jsx("div",{ref:T,className:U("flex-1 overflow-y-auto",k?"cursor-grabbing":"cursor-default"),onMouseDown:$,onContextMenu:ne=>ne.preventDefault(),children:o.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:L.map(ne=>{const oe=ie(ne),V=$g(ne);return o.jsxs("div",{ref:Y=>P.current[V]=Y,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[o.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:o.jsx("h3",{className:"text-lg font-bold",children:ne.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),o.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Y=>o.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:Y},Y))}),o.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:oe.map((Y,he)=>{const Q=S.filter(ce=>{if(!ce.dueDate)return!1;const Se=new Date(ce.dueDate);Se.setHours(0,0,0,0);const Le=new Date(Y.date);return Le.setHours(0,0,0,0),Le.toDateString()===Se.toDateString()}),te=Y.date.toDateString()===new Date().toDateString();return o.jsxs("div",{className:U("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",Y.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[o.jsx("span",{className:U("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",te&&Y.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:Y.date.getDate()}),o.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:Q.map(ce=>{const Se=lh[ce.systemStatus]||lh.backlog;return o.jsx("div",{onClick:Le=>{Le.stopPropagation(),m(ce)},className:U("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",Se.color,Se.border),title:ce.title,children:ce.title},ce.id)})})]},he)})})]},V)})})}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[o.jsx(Hy,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};if(On().error&&On().error.toLowerCase().includes("session")){const{assignments:T,courses:k}=On();if(!T.length&&!k.length)return o.jsx(Yl,{})}const{error:C}=On();return o.jsxs(o.Fragment,{children:[C&&C.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(ir,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx(Un,{href:"/auth/refresh",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col h-full w-full bg-background overflow-hidden relative",children:[o.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Timeline"}),o.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[o.jsxs("button",{onClick:()=>g("timeline"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="timeline"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(BO,{className:"h-3.5 w-3.5"}),"Timeline"]}),o.jsxs("button",{onClick:()=>g("calendar"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="calendar"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(yu,{className:"h-3.5 w-3.5"}),"Calendar"]})]})]})}),o.jsxs("div",{className:"px-4 md:px-6 py-2 border-b flex items-center gap-3 bg-muted/30 shrink-0 overflow-x-auto no-scrollbar",children:[o.jsx(QO,{className:"h-4 w-4 text-muted-foreground shrink-0 hidden sm:block"}),o.jsxs(ju,{value:a||"all",onValueChange:T=>l(T==="all"?null:T),children:[o.jsx(jl,{className:"w-[140px] sm:w-[240px] h-8 text-xs","data-testid":"select-course-filter",children:o.jsx(Iu,{placeholder:"All Courses"})}),o.jsxs(Il,{children:[o.jsx(Et,{value:"all",children:"All Courses"}),e.map(T=>o.jsx(Et,{value:T.id,children:T.name},T.id))]})]}),o.jsxs(ju,{value:c||"all",onValueChange:T=>u(T==="all"?null:T),children:[o.jsx(jl,{className:"w-[110px] sm:w-[140px] h-8 text-xs","data-testid":"select-status-filter",children:o.jsx(Iu,{placeholder:"All Status"})}),o.jsxs(Il,{children:[o.jsx(Et,{value:"all",children:"All Status"}),o.jsx(Et,{value:"backlog",children:"Backlog"}),o.jsx(Et,{value:"in_progress",children:"In Progress"}),o.jsx(Et,{value:"submitted",children:"Submitted"}),o.jsx(Et,{value:"graded",children:"Graded"}),o.jsx(Et,{value:"overdue",children:"Overdue"})]})]}),D&&o.jsxs(ae,{variant:"ghost",size:"sm",onClick:j,className:"text-muted-foreground h-8 px-2","data-testid":"button-clear-filters",children:[o.jsx(bs,{className:"h-3.5 w-3.5 md:mr-1"}),o.jsx("span",{className:"hidden md:inline",children:"Clear filters"})]}),o.jsx("div",{className:"ml-auto pl-2",children:o.jsx(jm,{children:o.jsxs(Im,{children:[o.jsx(Am,{asChild:!0,children:o.jsx(Un,{href:"/settings/integrations",children:o.jsxs(ae,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap h-8",children:[o.jsx(rq,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Sync with Google Calendar"}),o.jsx("span",{className:"sm:hidden",children:"Sync"})]})})}),o.jsxs(Wu,{side:"left",className:"max-w-xs",children:[o.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),o.jsx("div",{className:"flex-1 overflow-hidden h-full",children:p==="timeline"?o.jsx(M,{}):o.jsx(N,{})})]}),o.jsx(Rw,{assignment:h,isOpen:!!h,onClose:()=>m(null)})]})}const wN="attendance_configs",vr={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await gn(ze(Ne,wN,t),n),yr.remove(`attn_config_${t}`)},async getCourseConfig(t){try{const e=`attn_config_${t}`,n=yr.get(e);if(n)return n;const r=ze(Ne,wN,t),s=await Qr(r);if(s.exists()){const i=s.data();return yr.set(e,i,60*60),i}else return null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var S;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=`attn_data_${t}_${n}`,i=yr.get(s);if(i)return i;const a=r.toUpperCase().charCodeAt(0)-65,c=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:Z500?majorDimension=ROWS`,u=await fetch(c,{headers:{Authorization:`Bearer ${e}`}});if(!u.ok)throw u.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):u.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const m=(await u.json()).values;if(!m||m.length<2)throw new Error("Sheet is empty or invalid format.");const p=m[0],g=m.find(j=>{var M;return((M=j[a])==null?void 0:M.toLowerCase().trim())===n.toLowerCase().trim()});if(!g)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let w=0,v=0;const _=[];for(let j=1;j<p.length;j++){const D=p[j],M=(S=g[j])==null?void 0:S.toUpperCase().trim();if(!D)continue;let N="Unknown";M==="P"||M==="PRESENT"||M==="1"?(N="Present",v++,w++):(M==="A"||M==="ABSENT"||M==="0")&&(N="Absent",w++),N!=="Unknown"&&_.push({date:D,status:N})}const b=w===0?0:Math.round(v/w*100),x={courseId:t,stats:{totalClasses:w,attendedClasses:v,percentage:b},history:_.reverse()};return yr.set(s,x,60*30),x}},Fs={"5-day-consistent":{id:"5-day-consistent",label:"5-Day Streak",description:"Visited app for 5 consecutive days",category:"consistency",icon:Uu,color:"text-orange-500 bg-orange-50 dark:bg-orange-500/10"},"10-day-consistent":{id:"10-day-consistent",label:"10-Day Streak",description:"Visited app for 10 consecutive days",category:"consistency",icon:YC,color:"text-amber-500 bg-amber-50 dark:bg-amber-500/10"},"30-day-consistent":{id:"30-day-consistent",label:"Monthly Master",description:"Visited app for 30 consecutive days",category:"consistency",icon:$u,color:"text-purple-500 bg-purple-50 dark:bg-purple-500/10"},"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:Wx,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:Ux,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:mf,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:yu,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:Fx,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},WP=Object.keys(Fs),qP=Object.freeze(Object.defineProperty({__proto__:null,BADGES:Fs,BADGE_IDS:WP},Symbol.toStringTag,{value:"Module"}));function lq({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=Fs[t],[i,a]=f.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return o.jsx(jm,{delayDuration:0,children:o.jsxs(Im,{open:i,onOpenChange:a,children:[o.jsx(Am,{asChild:!0,children:o.jsxs("div",{className:U("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),a(!i)},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[o.jsx(l,{className:U(u[e]),strokeWidth:2.5}),r&&o.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),o.jsx(Lk,{children:o.jsxs(Wu,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>a(!1),children:[o.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function kc({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],a=i.length;return o.jsxs("div",{className:U("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>o.jsx(lq,{badgeId:l,size:n},l)),a>0&&o.jsx(jm,{delayDuration:0,children:o.jsxs(Im,{children:[o.jsx(Am,{asChild:!0,children:o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",a]})}),o.jsx(Lk,{children:o.jsx(Wu,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),o.jsx("span",{className:"text-xs font-medium",children:((c=Fs[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function cq(){const{user:t}=ot(),[e,n]=f.useState([]),[r,s]=f.useState(0),[i,a]=f.useState(0),[l,c]=f.useState(!0);f.useEffect(()=>{if(!t)return;const m=Sr(ze(Ne,"leaderboards","all-courses","students",t.uid),p=>{var g;if(p.exists()){const w=p.data();n(w.badges||[]),s(w.loginStreak||0),a(((g=w.processedAssignmentIds)==null?void 0:g.length)||0)}c(!1)});return()=>m()},[t]);const u=()=>{const m=[];return m.push({badge:Fs["5-day-consistent"],current:r||1,target:5,percentage:Math.min((r||1)/5*100,100),type:"streak",label:"Days"}),m.push({badge:Fs["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),m.push({badge:Fs["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),m.push({badge:Fs["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),m.reduce((p,g)=>g.percentage>p.percentage?g:p)},h=e.length===0?u():null;return o.jsxs(Ae,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[o.jsxs(Xe,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),o.jsx(GC,{className:"h-5 w-5 text-purple-500"})]}),o.jsx(Be,{className:"flex-1 flex flex-col",children:l?o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{className:"h-8 w-8 rounded-full"}),o.jsx(qe,{className:"h-3 w-20"})]}):e.length>0?o.jsxs("div",{className:"flex flex-col justify-between h-full gap-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,o.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),o.jsx(kc,{badges:e,limit:3,size:"md",className:"mt-2"})]}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Un,{href:"/settings?tab=badges",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):h?o.jsxs("div",{className:"flex flex-col gap-3 justify-between h-full",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="streak"?o.jsx(Uu,{className:"h-5 w-5 text-orange-500"}):h.type==="submission"?o.jsx(Wx,{className:"h-5 w-5 text-blue-500"}):o.jsx(yu,{className:"h-5 w-5 text-emerald-500"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="streak"?"bg-orange-500":h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Un,{href:"/settings?tab=badges",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):o.jsxs("div",{className:"flex flex-col gap-2 justify-between h-full",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Un,{href:"/settings?tab=badges",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]})})]})}function uq(){const{user:t}=ot(),[e,n]=f.useState(null),[r,s]=f.useState(!0);return f.useEffect(()=>{if(!t)return;const i=Sr(ze(Ne,"leaderboards","all-courses","students",t.uid),a=>{if(a.exists()){const l=a.data();n(l.loginStreak||0)}else n(0);s(!1)});return()=>i()},[t]),o.jsxs(Ae,{className:"flex flex-col h-full","data-testid":"card-streak",children:[o.jsxs(Xe,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Current Streak"}),o.jsx(Uu,{className:"h-5 w-5 text-orange-500 fill-orange-500"})]}),o.jsx(Be,{className:"flex-1 flex flex-col justify-between",children:r?o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{className:"h-8 w-16"}),o.jsx(qe,{className:"h-3 w-24"})]}):o.jsxs("div",{children:[o.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:[e,o.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Days"})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e&&e>0?"You're on fire! Keep coming back.":"Log in daily to build your streak!"})]})})]})}function dq(){return o.jsxs(Ae,{className:"overflow-hidden",children:[o.jsx(Xe,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(qe,{className:"h-4 w-24"}),o.jsx(qe,{className:"h-8 w-8 rounded-lg"})]})}),o.jsx(Be,{className:"pt-2",children:o.jsx(qe,{className:"h-9 w-16"})})]})}function hq(){return o.jsxs("div",{className:"flex items-center space-x-4 py-3",children:[o.jsx(qe,{className:"h-12 w-12 rounded-full"}),o.jsxs("div",{className:"space-y-2 max-w-[200px] w-full",children:[o.jsx(qe,{className:"h-4 w-[200px]"}),o.jsx(qe,{className:"h-4 w-[150px]"})]})]})}function fq({courses:t}){const{user:e,accessToken:n}=ot(),[r,s]=f.useState(null),[i,a]=f.useState(!0);return f.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){a(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async m=>{try{const p=await vr.getCourseConfig(m.id);if(!p||!p.isVisible||!p.sheetUrl)return;const g=vr.extractSheetId(p.sheetUrl);if(!g)return;const w=await vr.fetchAttendanceFromSheet(g,n,e.email,p.emailColumn||"A");w&&(c+=w.stats.attendedClasses,u+=w.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const m=Math.round(c/u*100);let p="safe";m<70?p="danger":m<75&&(p="warning"),s({percentage:m,status:p,present:c,total:u})}a(!1)}l()},[t,e,n]),o.jsxs(Ae,{"data-testid":"card-attendance-overall",className:"flex flex-col h-full",children:[o.jsxs(Xe,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),o.jsx(XC,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]}),o.jsx(Be,{children:i?o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{className:"h-8 w-16"}),o.jsx(qe,{className:"h-3 w-24"})]}):r?o.jsxs("div",{children:[o.jsxs("div",{className:U("text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:[r.percentage,"%"]}),o.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[o.jsxs("p",{className:"text-xs font-medium text-muted-foreground",children:[r.present,"/",r.total," Classes Attended"]}),o.jsx("p",{className:U("text-[10px] uppercase tracking-wider font-bold",r.status==="safe"?"text-emerald-500":r.status==="warning"?"text-amber-500":"text-red-500"),children:r.status==="safe"?"On Track":"Low Attendance"})]})]}):o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Attendance Yet"}),o.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground/70 leading-relaxed",children:"Ask your teacher to login to Trace to track real-time attendance"})]}),o.jsx(Un,{href:"/attendance",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full mt-1",children:"View Details"})})]})})]})}function mq(){return o.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>o.jsx(dq,{},t))}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"md:col-span-2 space-y-6",children:[o.jsx(qe,{className:"h-[300px] w-full rounded-xl"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(qe,{className:"h-8 w-40"}),[1,2,3].map(t=>o.jsx(hq,{},t))]})]}),o.jsx("div",{className:"space-y-6",children:o.jsx(qe,{className:"h-[400px] w-full rounded-xl"})})]})]})}function ch({title:t,value:e,icon:n,variant:r="default"}){const i={default:{bg:"bg-gradient-to-br from-background to-muted/30",iconBg:"bg-primary/10",iconColor:"text-primary",valueColor:"text-foreground",border:"border-border hover:border-primary/50"},warning:{bg:"bg-gradient-to-br from-amber-50/50 to-amber-100/30 dark:from-amber-950/20 dark:to-amber-900/10",iconBg:"bg-amber-500/10",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800 hover:border-amber-400"},danger:{bg:"bg-gradient-to-br from-red-50/50 to-red-100/30 dark:from-red-950/20 dark:to-red-900/10",iconBg:"bg-destructive/10",iconColor:"text-destructive",valueColor:"text-destructive",border:"border-red-200 dark:border-red-800 hover:border-destructive"}}[r];return o.jsxs(Ae,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:U("overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",i.border),children:[o.jsx(Xe,{className:U("pb-3",i.bg),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(nt,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:t}),o.jsx("div",{className:U("p-2 rounded-lg",i.iconBg),children:o.jsx(n,{className:U("h-4 w-4",i.iconColor)})})]})}),o.jsx(Be,{className:"pt-2",children:o.jsx("div",{className:U("text-3xl font-bold font-mono tracking-tight tabular-nums",i.valueColor),children:e})})]})}function pq({data:t}){const e=Math.max(...t.map(n=>n.count),1);return o.jsxs(Ae,{className:"overflow-hidden",children:[o.jsx(Xe,{className:"pb-3 bg-gradient-to-br from-background to-muted/20",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(nt,{className:"text-sm font-semibold flex items-center gap-2",children:[o.jsx(co,{className:"h-4 w-4 text-primary"}),"Weekly Workload"]}),o.jsxs(pn,{variant:"outline",className:"text-xs font-mono",children:[t.reduce((n,r)=>n+r.count,0)," total"]})]})}),o.jsx(Be,{className:"pt-4",children:o.jsx("div",{className:"flex items-end justify-between gap-3 h-36",children:t.map((n,r)=>o.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group",children:[o.jsx("span",{className:U("text-xs font-bold tabular-nums transition-all",n.count>0?n.isToday?"text-primary":"text-muted-foreground":"text-transparent"),children:n.count>0?n.count:"0"}),o.jsx("div",{className:"relative w-full",children:o.jsx("div",{className:U("w-full rounded-t-md transition-all duration-500 ease-out relative overflow-hidden",n.isToday?"bg-gradient-to-t from-primary to-primary/70 shadow-lg shadow-primary/20":"bg-gradient-to-t from-muted to-muted/50",n.count===0&&"min-h-[4px] opacity-30","group-hover:scale-105 group-hover:shadow-xl"),style:{height:n.count>0?`${n.count/e*96}px`:"4px"},children:n.count>0&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-white/10 to-white/20"})})}),o.jsx("span",{className:U("text-xs font-medium transition-colors",n.isToday?"text-primary font-bold":"text-muted-foreground group-hover:text-foreground"),children:n.day})]},r))})})]})}function gq({courses:t,assignments:e}){const{user:n}=ot(),[r,s]=f.useState(null),[i,a]=f.useState(!0);return f.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(m=>m.id)])),c=[],u=new Map,h=()=>{const m=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,g=t.map(x=>x.id),w=new Set(e.map(x=>x.id)),v=m.filter(x=>{const S=x.email||"",j=x.emailDomain||(S.includes("@")?S.split("@")[1]:""),D=x.enrolledCourseIds||[],M=x.processedAssignmentIds||[],N=p&&j&&p===j,C=g.some(I=>D.includes(I)),k=!j&&M.some(I=>w.has(I));return x.id===n.uid?!0:N&&C||k});v.sort((x,S)=>S.totalXP-x.totalXP);const _=v.length;if(_===0){s(null),a(!1);return}const b=v.findIndex(x=>x.id===n.uid);if(b!==-1){const x=b+1,S=Math.round((_-x+1)/_*100),j=v[b];s({rank:x,total:_,percentile:S,xp:j.totalXP||0,badges:j.badges||[]})}else s(null);a(!1)};return l.forEach(m=>{const p=fs(gr(Ne,"leaderboards",m,"students"),zo("totalXP","desc")),g=Sr(p,w=>{w.docs.forEach(v=>{const _=v.data(),b={id:v.id,..._,email:_.email||"",emailDomain:_.emailDomain||(_.email?_.email.split("@")[1]:""),enrolledCourseIds:_.enrolledCourseIds||_.subjects||[],processedAssignmentIds:_.processedAssignmentIds||_.completedTasks||[],totalXP:_.totalXP||_.xp||0,badges:_.badges||[]},x=u.get(v.id);(!x||b.totalXP>=x.totalXP)&&u.set(v.id,b)}),h()},w=>{console.error(`Error fetching leaderboard source ${m}:`,w),h()});c.push(g)}),()=>{c.forEach(m=>m())}},[n,t,e]),o.jsxs(Ae,{"data-testid":"card-class-rank",className:"flex flex-col h-full",children:[o.jsxs(Xe,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(nt,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),o.jsx($u,{className:"h-5 w-5 text-amber-500"})]}),o.jsx(Be,{className:"flex-1 flex flex-col justify-between",children:i?o.jsxs("div",{className:"space-y-2",children:[o.jsx(qe,{className:"h-8 w-16"}),o.jsx(qe,{className:"h-3 w-24"})]}):r?o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,o.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),o.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[o.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.xp.toLocaleString()," Total XP"]})]})]}),o.jsx("div",{className:"pt-4 mt-auto",children:o.jsx(Un,{href:"/leaderboard",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View Leaderboard"})})})]}):o.jsxs("div",{className:"flex flex-col gap-2 justify-between flex-1",children:[o.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),o.jsx(Un,{href:"/leaderboard",className:"mt-auto",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function yq(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:a}=On();ot();const[l,c]=f.useState(null);if(e)return o.jsx(mq,{});const u=t();return a&&a.toLowerCase().includes("session")&&!(r.length>0||i.length>0||u.upcoming7Days>0)?o.jsx(Yl,{}):o.jsxs(o.Fragment,{children:[a&&a.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3",children:o.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(ir,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Sign in to update your assignments."})]}),o.jsx(Un,{href:"/auth/refresh",children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6 space-y-6",children:[u.upcoming7Days>0&&o.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[o.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),o.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:o.jsx(qC,{className:"h-5 w-5"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:["Weekly Focus",o.jsxs(pn,{variant:"secondary",className:"bg-amber-200/60 dark:bg-amber-800/40 text-amber-900 dark:text-amber-100 border-0 text-xs font-bold",children:[u.upcoming7Days," ",u.upcoming7Days===1?"task":"tasks"]})]}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["You have"," ",o.jsxs("span",{className:"font-bold text-amber-900 dark:text-amber-100",children:[u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),o.jsx(Un,{href:"/timeline",children:o.jsxs(ae,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:border-amber-400 dark:hover:border-amber-600 shadow-sm",children:["View Timeline",o.jsx(FO,{className:"ml-1.5 h-3.5 w-3.5"})]})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx(ch,{title:"Due in 3 Days",value:u.upcoming3Days,icon:HC,variant:u.upcoming3Days>3?"warning":"default"}),o.jsx(ch,{title:"Due in 7 Days",value:u.upcoming7Days,icon:co}),o.jsx(ch,{title:"Overdue",value:u.overdue,icon:ir,variant:u.overdue>0?"danger":"default"}),o.jsx(ch,{title:"Total Active",value:u.totalActive,icon:hl}),o.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:o.jsx(gq,{courses:i,assignments:r})}),o.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:o.jsx(fq,{courses:i})}),o.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:o.jsx(cq,{})}),o.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:o.jsx(uq,{})})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsx(pq,{data:u.weeklyWorkload}),o.jsxs(Ae,{children:[o.jsx(Xe,{className:"pb-2",children:o.jsx(nt,{className:"text-sm font-medium",children:"Next Actions"})}),o.jsx(Be,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>o.jsx(rW,{assignment:h,onClick:()=>c(h)},h.id)):o.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[o.jsx(hl,{className:"h-8 w-8 mb-2"}),o.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),o.jsx(Rw,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function vq(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s,reauthRequired:i}=On();ot();const[a,l]=f.useState(null),[c,u]=f.useState("grid"),h=ap(),m=t.find(w=>w.id===a),g=e.filter(w=>w.courseId===a).flatMap(w=>w.materials?w.materials.flatMap(v=>{let _=[];if(v.driveFile){const b=v.driveFile.driveFile;let x=b.thumbnailUrl||b.iconUrl||null;!x&&b.id&&(x=`https://drive.google.com/thumbnail?id=${b.id}&sz=w800`),_.push({id:b.id,title:b.title,link:b.alternateLink,thumbnail:x,type:"driveFile"})}return _}):[]).filter(w=>!!w.title);return n&&t.length===0?o.jsx(xq,{}):i&&t.length===0?o.jsx("div",{className:"h-full flex items-center justify-center p-4",children:o.jsx(Yl,{})}):o.jsxs("div",{className:"flex h-full overflow-hidden bg-background flex-col",children:[i&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(ir,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached notes are shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:w=>{w.preventDefault(),window.location.reload()},children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[o.jsxs("div",{className:U("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&a?"hidden":"flex"),children:[o.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:o.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(w=>o.jsxs("button",{onClick:()=>l(w.id),className:U("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",a===w.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[o.jsx("div",{className:U("h-8 w-8 rounded-full flex items-center justify-center shrink-0",a===w.id?"bg-primary-foreground/20":"bg-muted"),children:o.jsx(J1,{className:U("h-4 w-4",a===w.id?"text-primary-foreground":"text-muted-foreground")})}),o.jsxs("div",{className:"truncate flex-1",children:[o.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:w.name}),o.jsx("p",{className:U("text-[10px] uppercase tracking-wider font-medium",a===w.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:w.section||"No Section"})]}),o.jsx(WO,{className:U("h-4 w-4 transition-transform",a===w.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},w.id))})]}),o.jsxs("div",{className:U("flex-1 overflow-y-auto bg-background",h&&!a?"hidden":"flex flex-col"),children:[h&&a&&o.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:o.jsxs(ae,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[o.jsx(xm,{className:"h-4 w-4"}),"Back to Courses"]})}),a?o.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[o.jsxs("div",{className:"space-y-1 max-w-full",children:[o.jsx(pn,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),o.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:m==null?void 0:m.name}),o.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(m==null?void 0:m.descriptionHeading)||"Curated academic materials and notes."})]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),o.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[g.length," Documents"]})]}),o.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[o.jsx(ae,{variant:"ghost",size:"icon",className:U("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:o.jsx(WC,{className:"h-4 w-4"})}),o.jsx(ae,{variant:"ghost",size:"icon",className:U("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:o.jsx(r3,{className:"h-4 w-4"})})]})]})]}),g.length>0?c==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:g.map((w,v)=>{var D;const _=((D=w.title)==null?void 0:D.toLowerCase())||"",b=_.endsWith(".pdf"),x=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",j="FILE";return b?(S="bg-red-100 text-red-600",j="PDF DOCUMENT"):x?(S="bg-orange-100 text-orange-600",j="PRESENTATION"):(S="bg-blue-100 text-blue-600",j="DOCUMENT"),o.jsxs(Ae,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[o.jsx(Xe,{className:"p-3 border-b border-border space-y-0 pb-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:U("h-8 w-8 rounded-full flex items-center justify-center shrink-0",S),children:o.jsx(Vo,{className:"h-4 w-4"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:w.title}),o.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:j})]})]})}),o.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[w.thumbnail&&o.jsx("img",{src:w.thumbnail.includes("s220")?w.thumbnail.replace("s220","s800"):w.thumbnail,alt:w.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:M=>{var C;console.log("Thumbnail failed to load:",w.thumbnail),M.currentTarget.style.display="none";const N=(C=M.currentTarget.parentElement)==null?void 0:C.querySelector(".fallback-viewer");N&&(N.classList.remove("hidden"),N.classList.add("block"))}}),o.jsx("div",{className:U("fallback-viewer absolute inset-0 w-full h-full",w.thumbnail?"hidden":"block"),children:o.jsx(wq,{type:b?"pdf":x?"ppt":"doc"})}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:o.jsx(ae,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:o.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(Uy,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${w.id}-${v}`)})}):o.jsx("div",{className:"space-y-2 pb-20",children:g.map((w,v)=>{var D;const _=((D=w.title)==null?void 0:D.toLowerCase())||"",b=_.endsWith(".pdf"),x=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",j="File";return b?(S="bg-red-100 text-red-600",j="PDF Document"):x?(S="bg-orange-100 text-orange-600",j="Presentation"):(S="bg-blue-100 text-blue-600",j="Document"),o.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[o.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[w.thumbnail?o.jsx("img",{src:w.thumbnail.includes("s220")?w.thumbnail.replace("s220","s400"):w.thumbnail,alt:w.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:M=>{M.currentTarget.style.display="none";const N=M.currentTarget.nextElementSibling;N&&N.classList.remove("hidden")}}):null,o.jsx("div",{className:U("absolute inset-0 flex items-center justify-center",w.thumbnail?"hidden":"flex",S),children:o.jsx(Vo,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:w.title}),o.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[j,"  Read Only"]})]}),o.jsx(ae,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:o.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[o.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),o.jsx(Uy,{className:"h-4 w-4"})]})})]},`${w.id}-${v}`)})}):o.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[o.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:o.jsx(J1,{className:"h-8 w-8 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[o.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:o.jsx(Vo,{className:"h-10 w-10 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})]})}function xq(){return o.jsxs("div",{className:"flex h-full overflow-hidden",children:[o.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[o.jsx(qe,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>o.jsx(qe,{className:"h-16 w-full rounded-xl"},t))]}),o.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[o.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(qe,{className:"h-4 w-20"}),o.jsx(qe,{className:"h-10 w-80"}),o.jsx(qe,{className:"h-4 w-64"})]}),o.jsx(qe,{className:"h-10 w-32 rounded-lg"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>o.jsx(qe,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function wq({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return o.jsxs("div",{className:U("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[o.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[o.jsxs("div",{className:"flex gap-2 mb-1",children:[o.jsx("div",{className:U("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:o.jsx(Vo,{className:"h-6 w-6"})}),o.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[o.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),o.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),o.jsxs("div",{className:"space-y-2 flex-1",children:[o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&o.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),o.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:o.jsx(Vo,{className:"h-40 w-40"})})]})}function bq({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"consistency",label:"Consistency & Streaks"},{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),o.jsx("div",{className:"space-y-8",children:s.map(a=>{const l=WP.map(c=>Fs[c]).filter(c=>c.category===a.id);return l.length===0?null:o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:a.label}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);return o.jsxs("div",{className:U("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[o.jsx("div",{className:U("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?U(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:o.jsx(c.icon,{className:U("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:U("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&o.jsx(By,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),o.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&a.id==="consistency"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="5-day-consistent"?h=5:c.id==="10-day-consistent"?h=10:c.id==="30-day-consistent"&&(h=30),h>0){const m=Number(e)||1,p=Math.min(m/h*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[m," / ",h," Days"]})]})]})}return null})()}),!u&&a.id==="productivity"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="10-submissions"?h=10:c.id==="25-submissions"?h=25:c.id==="50-submissions"&&(h=50),h>0){const m=Number(n)||0,p=Math.min(m/h*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[m," / ",h," Submissions"]})]})]})}return null})()}),!u&&a.id==="reliability"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:h,attended:m}=r||{total:0,attended:0};let p=0,g=0;if(c.id==="perfect-week"?(p=7,g=100):c.id==="attendance-champion"&&(p=30,g=90),p>0){const w=h>0?m/h*100:0,v=Math.min(h/p*100,100),_=Math.min(w/g*100,100),b=Math.min((v+_)/2,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${b}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(b),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h," days "," ",Math.round(w),"% attended"]})]})]})}return null})()})]}),u&&o.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},a.id)})})}var Mw="Switch",[_q,XG]=lr(Mw),[Sq,Nq]=_q(Mw),GP=f.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:h,...m}=t,[p,g]=f.useState(null),w=Pe(e,S=>g(S)),v=f.useRef(!1),_=p?h||!!p.closest("form"):!0,[b=!1,x]=Gs({prop:s,defaultProp:i,onChange:u});return o.jsxs(Sq,{scope:n,checked:b,disabled:l,children:[o.jsx(ve.button,{type:"button",role:"switch","aria-checked":b,"aria-required":a,"data-state":XP(b),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:w,onClick:pe(t.onClick,S=>{x(j=>!j),_&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),_&&o.jsx(Eq,{control:p,bubbles:!v.current,name:r,value:c,checked:b,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});GP.displayName=Mw;var KP="SwitchThumb",QP=f.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Nq(KP,n);return o.jsx(ve.span,{"data-state":XP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});QP.displayName=KP;var Eq=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=f.useRef(null),a=aP(n),l=xk(e);return f.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&m){const p=new Event("click",{bubbles:r});m.call(c,n),c.dispatchEvent(p)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function XP(t){return t?"checked":"unchecked"}var YP=GP,Tq=QP;const $n=f.forwardRef(({className:t,...e},n)=>o.jsx(YP,{className:U("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(Tq,{className:U("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));$n.displayName=YP.displayName;var Cq="Label",JP=f.forwardRef((t,e)=>o.jsx(ve.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));JP.displayName=Cq;var ZP=JP;const kq=zu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),en=f.forwardRef(({className:t,...e},n)=>o.jsx(ZP,{ref:n,className:U(kq(),t),...e}));en.displayName=ZP.displayName;var eR="AlertDialog",[jq,YG]=lr(eR,[zA]),ri=zA(),tR=t=>{const{__scopeAlertDialog:e,...n}=t,r=ri(e);return o.jsx(Aw,{...r,...n,modal:!0})};tR.displayName=eR;var Iq="AlertDialogTrigger",nR=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ri(n);return o.jsx(nP,{...s,...r,ref:e})});nR.displayName=Iq;var Aq="AlertDialogPortal",rR=t=>{const{__scopeAlertDialog:e,...n}=t,r=ri(e);return o.jsx(Pw,{...r,...n})};rR.displayName=Aq;var Pq="AlertDialogOverlay",sR=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ri(n);return o.jsx(dd,{...s,...r,ref:e})});sR.displayName=Pq;var Ka="AlertDialogContent",[Rq,Dq]=jq(Ka),Mq=mC("AlertDialogContent"),iR=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=ri(n),a=f.useRef(null),l=Pe(e,a),c=f.useRef(null);return o.jsx(fW,{contentName:Ka,titleName:oR,docsSlug:"alert-dialog",children:o.jsx(Rq,{scope:n,cancelRef:c,children:o.jsxs(hd,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:pe(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(Mq,{children:r}),o.jsx(Lq,{contentRef:a})]})})})});iR.displayName=Ka;var oR="AlertDialogTitle",aR=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ri(n);return o.jsx(fd,{...s,...r,ref:e})});aR.displayName=oR;var lR="AlertDialogDescription",cR=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ri(n);return o.jsx(md,{...s,...r,ref:e})});cR.displayName=lR;var Oq="AlertDialogAction",uR=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ri(n);return o.jsx(xp,{...s,...r,ref:e})});uR.displayName=Oq;var dR="AlertDialogCancel",hR=f.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=Dq(dR,n),i=ri(n),a=Pe(e,s);return o.jsx(xp,{...i,...r,ref:a})});hR.displayName=dR;var Lq=({contentRef:t})=>{const e=`\`${Ka}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ka}\` by passing a \`${lR}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ka}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Vq=tR,Fq=nR,zq=rR,fR=sR,mR=iR,pR=uR,gR=hR,yR=aR,vR=cR;const Uq=Vq,$q=Fq,Bq=zq,xR=f.forwardRef(({className:t,...e},n)=>o.jsx(fR,{className:U("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));xR.displayName=fR.displayName;const wR=f.forwardRef(({className:t,...e},n)=>o.jsxs(Bq,{children:[o.jsx(xR,{}),o.jsx(mR,{ref:n,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));wR.displayName=mR.displayName;const bR=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col space-y-2 text-center sm:text-left",t),...e});bR.displayName="AlertDialogHeader";const _R=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});_R.displayName="AlertDialogFooter";const SR=f.forwardRef(({className:t,...e},n)=>o.jsx(yR,{ref:n,className:U("text-lg font-semibold",t),...e}));SR.displayName=yR.displayName;const NR=f.forwardRef(({className:t,...e},n)=>o.jsx(vR,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));NR.displayName=vR.displayName;const ER=f.forwardRef(({className:t,...e},n)=>o.jsx(pR,{ref:n,className:U(aw(),t),...e}));ER.displayName=pR.displayName;const TR=f.forwardRef(({className:t,...e},n)=>o.jsx(gR,{ref:n,className:U(aw({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));TR.displayName=gR.displayName;var Bg="rovingFocusGroup.onEntryFocus",Hq={bubbles:!1,cancelable:!0},Sp="RovingFocusGroup",[Pv,CR,Wq]=Mx(Sp),[qq,kR]=lr(Sp,[Wq]),[Gq,Kq]=qq(Sp),jR=f.forwardRef((t,e)=>o.jsx(Pv.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Pv.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Qq,{...t,ref:e})})}));jR.displayName=Sp;var Qq=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...m}=t,p=f.useRef(null),g=Pe(e,p),w=dp(i),[v=null,_]=Gs({prop:a,defaultProp:l,onChange:c}),[b,x]=f.useState(!1),S=_t(u),j=CR(n),D=f.useRef(!1),[M,N]=f.useState(0);return f.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(Bg,S),()=>C.removeEventListener(Bg,S)},[S]),o.jsx(Gq,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:v,onItemFocus:f.useCallback(C=>_(C),[_]),onItemShiftTab:f.useCallback(()=>x(!0),[]),onFocusableItemAdd:f.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:f.useCallback(()=>N(C=>C-1),[]),children:o.jsx(ve.div,{tabIndex:b||M===0?-1:0,"data-orientation":r,...m,ref:g,style:{outline:"none",...t.style},onMouseDown:pe(t.onMouseDown,()=>{D.current=!0}),onFocus:pe(t.onFocus,C=>{const T=!D.current;if(C.target===C.currentTarget&&T&&!b){const k=new CustomEvent(Bg,Hq);if(C.currentTarget.dispatchEvent(k),!k.defaultPrevented){const I=j().filter(J=>J.focusable),R=I.find(J=>J.active),P=I.find(J=>J.id===v),re=[R,P,...I].filter(Boolean).map(J=>J.ref.current);PR(re,h)}}D.current=!1}),onBlur:pe(t.onBlur,()=>x(!1))})})}),IR="RovingFocusGroupItem",AR=f.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=t,l=gs(),c=i||l,u=Kq(IR,n),h=u.currentTabStopId===c,m=CR(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=u;return f.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),o.jsx(Pv.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(ve.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:pe(t.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:pe(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:pe(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=Jq(w,u.orientation,u.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=m().filter(x=>x.focusable).map(x=>x.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const x=b.indexOf(w.currentTarget);b=u.loop?Zq(b,x+1):b.slice(x+1)}setTimeout(()=>PR(b))}})})})});AR.displayName=IR;var Xq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Yq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Jq(t,e,n){const r=Yq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Xq[r]}function PR(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Zq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var eG=jR,tG=AR,Ow="Tabs",[nG,JG]=lr(Ow,[kR]),RR=kR(),[rG,Lw]=nG(Ow),DR=f.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=dp(l),[m,p]=Gs({prop:r,onChange:s,defaultProp:i});return o.jsx(rG,{scope:n,baseId:gs(),value:m,onValueChange:p,orientation:a,dir:h,activationMode:c,children:o.jsx(ve.div,{dir:h,"data-orientation":a,...u,ref:e})})});DR.displayName=Ow;var MR="TabsList",OR=f.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Lw(MR,n),a=RR(n);return o.jsx(eG,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(ve.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});OR.displayName=MR;var LR="TabsTrigger",VR=f.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Lw(LR,n),l=RR(n),c=UR(a.baseId,r),u=$R(a.baseId,r),h=r===a.value;return o.jsx(tG,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(ve.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:pe(t.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?a.onValueChange(r):m.preventDefault()}),onKeyDown:pe(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(r)}),onFocus:pe(t.onFocus,()=>{const m=a.activationMode!=="manual";!h&&!s&&m&&a.onValueChange(r)})})})});VR.displayName=LR;var FR="TabsContent",zR=f.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Lw(FR,n),c=UR(l.baseId,r),u=$R(l.baseId,r),h=r===l.value,m=f.useRef(h);return f.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(Bn,{present:s||h,children:({present:p})=>o.jsx(ve.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&i})})});zR.displayName=FR;function UR(t,e){return`${t}-trigger-${e}`}function $R(t,e){return`${t}-content-${e}`}var sG=DR,BR=OR,HR=VR,WR=zR;const iG=sG,qR=f.forwardRef(({className:t,...e},n)=>o.jsx(BR,{ref:n,className:U("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));qR.displayName=BR.displayName;const Vh=f.forwardRef(({className:t,...e},n)=>o.jsx(HR,{ref:n,className:U("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Vh.displayName=HR.displayName;const Fh=f.forwardRef(({className:t,...e},n)=>o.jsx(WR,{ref:n,className:U("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Fh.displayName=WR.displayName;function oG(){const[t,e]=f.useState(null),[n,r]=f.useState(!1),[s,i]=f.useState(!1);return f.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function aG(){const{user:t,requestCalendarPermissions:e}=ot(),[n,r]=f.useState(!1),[s,i]=f.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});f.useEffect(()=>{if(!t)return;const u=Sr(ze(Ne,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const a=async()=>{r(!0);try{await e()&&await gn(ze(Ne,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await gn(ze(Ne,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(m=>({...m,[u]:h}));try{await gn(ze(Ne,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(m){console.error(m)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Ae,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(co,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&o.jsx(pn,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),o.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?o.jsx(ae,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):o.jsx(ae,{onClick:a,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?o.jsx(Lr,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&o.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[o.jsx("div",{className:"h-px w-full bg-border mb-6"}),o.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",o.jsxs("div",{className:"grid gap-3 max-w-xl",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),o.jsx($n,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),o.jsx($n,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(ml,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(Ae,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(zx,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),o.jsx("div",{className:"shrink-0",children:o.jsx(Un,{href:"/settings/notifications",children:o.jsx(ae,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function lG(){var re,J;const{user:t,signOut:e}=ot(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i,courses:a}=On(),{isInstallable:l,isInstalled:c,promptInstall:u}=oG(),{theme:h,setTheme:m}=iw(),[p,g]=f.useState(!0),[w,v]=f.useState("auto"),[_,b]=f.useState(!1),[x,S]=f.useState([]),[j,D]=f.useState(0),[M,N]=f.useState(0),[C,T]=f.useState(),[k,I]=f.useState("general");f.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("tab");L&&["general","badges","integrations"].includes(L)&&I(L)},[]),f.useEffect(()=>{if(!t)return;const X=Sr(ze(Ne,"leaderboards","all-courses","students",t.uid),L=>{var H;if(L.exists()){const z=L.data();S(z.badges||[]),D(z.loginStreak||0),N(((H=z.processedAssignmentIds)==null?void 0:H.length)||0)}else S([]),D(0),N(0)});return()=>X()},[t]),f.useEffect(()=>{if(!a||a.length===0)return;let X=0,L=0;a.forEach(H=>{if(H.attendanceData&&typeof H.attendanceData=="object"){const z=Object.values(H.attendanceData);X+=z.length,L+=z.filter($=>typeof $=="string"?$.toLowerCase()==="present":$===!0||$===1).length}}),console.log("Attendance Stats Calculated:",{totalClasses:X,attendedClasses:L}),X>0&&T({total:X,attended:L})},[a]),f.useEffect(()=>{if(!t||k!=="badges")return;(async()=>{var ne,oe;const L=ze(Ne,"leaderboards","all-courses","students",t.uid),H=await Qr(L);if(!H.exists())return;const z=H.data(),$=new Set(z.badges||[]);let G=!1;const ee=z.loginStreak||0;ee>=5&&!$.has("5-day-consistent")&&($.add("5-day-consistent"),G=!0),ee>=10&&!$.has("10-day-consistent")&&($.add("10-day-consistent"),G=!0),ee>=30&&!$.has("30-day-consistent")&&($.add("30-day-consistent"),G=!0);const ie=((ne=z.processedAssignmentIds)==null?void 0:ne.length)||0;if(ie>=10&&!$.has("10-submissions")&&($.add("10-submissions"),G=!0),ie>=25&&!$.has("25-submissions")&&($.add("25-submissions"),G=!0),ie>=50&&!$.has("50-submissions")&&($.add("50-submissions"),G=!0),G){await gn(L,{badges:Array.from($)},{merge:!0});const V=[],Y=new Set(z.badges||[]);$.forEach(Q=>{Y.has(Q)||V.push(Q)});const{BADGES:he}=await Ia(async()=>{const{BADGES:Q}=await Promise.resolve().then(()=>qP);return{BADGES:Q}},void 0);for(const Q of V)await ip(gr(Ne,"activities"),{userId:t.uid,userName:t.displayName||"User",userAvatar:t.photoURL,type:"badge_earned",content:`${t.displayName||"User"} earned the '${((oe=he[Q])==null?void 0:oe.label)||"New Badge"}' badge!`,courseId:"all-courses",createdAt:new Date().toISOString()})}})()},[t,k]);const R=((re=t==null?void 0:t.displayName)==null?void 0:re.split(" ").map(X=>X[0]).join("").toUpperCase())||((J=t==null?void 0:t.email)==null?void 0:J[0].toUpperCase())||"U",P=()=>n?n.toLocaleString():"Never",O=async()=>{b(!0);try{await u()}catch(X){console.error("Install failed:",X)}finally{b(!1)}};return o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),o.jsxs(iG,{value:k,onValueChange:I,className:"w-full",children:[o.jsxs(qR,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[o.jsx(Vh,{value:"general",children:"General"}),o.jsx(Vh,{value:"badges",children:"Badges"}),o.jsx(Vh,{value:"integrations",children:"Integrations"})]}),o.jsxs(Fh,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[o.jsxs(Ae,{children:[o.jsxs(Xe,{children:[o.jsx(nt,{className:"text-base",children:"Connected Account"}),o.jsx(_n,{children:"Your Google account linked to this app"})]}),o.jsxs(Be,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Yn,{className:"h-12 w-12",children:[o.jsx(Jn,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(Zn,{children:R})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(hf,{className:"h-3.5 w-3.5"}),"Connected"]})]}),o.jsx(Fr,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",P()]})]}),o.jsxs(ae,{variant:"outline",size:"sm",onClick:X=>{X.preventDefault(),s().catch(L=>{console.error("Sync failed:",L)})},disabled:r,"data-testid":"button-sync-settings",children:[o.jsx(ml,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),o.jsxs(Ae,{children:[o.jsxs(Xe,{children:[o.jsx(nt,{className:"text-base",children:"Sync Settings"}),o.jsx(_n,{children:"Configure how your data syncs with Google Classroom"})]}),o.jsx(Be,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(en,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),o.jsx($n,{id:"background-sync",checked:p,onCheckedChange:g,"data-testid":"switch-background-sync"})]})})]}),o.jsxs(Ae,{children:[o.jsxs(Xe,{children:[o.jsx(nt,{className:"text-base",children:"Theme"}),o.jsx(_n,{children:"Choose your preferred color theme"})]}),o.jsx(Be,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(en,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ae,{variant:h==="light"?"default":"outline",size:"sm",onClick:()=>m("light"),className:"flex items-center gap-2",children:[o.jsx(Hx,{className:"h-4 w-4"}),"Light"]}),o.jsxs(ae,{variant:h==="dark"?"default":"outline",size:"sm",onClick:()=>m("dark"),className:"flex items-center gap-2",children:[o.jsx(bm,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),o.jsxs(Ae,{className:"border-primary/20",children:[o.jsxs(Xe,{children:[o.jsxs(nt,{className:"text-base flex items-center gap-2",children:[o.jsx(Y1,{className:"h-4 w-4"}),"Install App"]}),o.jsx(_n,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),o.jsx(Be,{className:"space-y-4",children:c?o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[o.jsx(hf,{className:"h-5 w-5 text-emerald-600"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),o.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):l?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[o.jsx(u3,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),o.jsxs(ae,{onClick:O,disabled:_,className:"w-full",size:"lg","data-testid":"button-install-app",children:[o.jsx(Y1,{className:"h-4 w-4 mr-2"}),_?"Installing...":"Install App"]}),o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[o.jsx(zi,{className:"h-5 w-5 text-muted-foreground"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[o.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),o.jsxs(Ae,{children:[o.jsxs(Xe,{children:[o.jsx(nt,{className:"text-base",children:"Preferences"}),o.jsx(_n,{children:"Customize your experience"})]}),o.jsx(Be,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(en,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),o.jsxs(ju,{value:w,onValueChange:v,children:[o.jsx(jl,{className:"w-[180px]","data-testid":"select-timezone",children:o.jsx(Iu,{})}),o.jsxs(Il,{children:[o.jsx(Et,{value:"auto",children:"Auto-detect"}),o.jsx(Et,{value:"America/New_York",children:"Eastern Time"}),o.jsx(Et,{value:"America/Chicago",children:"Central Time"}),o.jsx(Et,{value:"America/Denver",children:"Mountain Time"}),o.jsx(Et,{value:"America/Los_Angeles",children:"Pacific Time"}),o.jsx(Et,{value:"Europe/London",children:"London"}),o.jsx(Et,{value:"Europe/Paris",children:"Paris"}),o.jsx(Et,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),o.jsxs(Ae,{children:[o.jsxs(Xe,{children:[o.jsxs(nt,{className:"text-base flex items-center gap-2",children:[o.jsx(fl,{className:"h-4 w-4"}),"Account Actions"]}),o.jsx(_n,{children:"Manage your session"})]}),o.jsx(Be,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),o.jsxs(Uq,{children:[o.jsx($q,{asChild:!0,children:o.jsxs(ae,{variant:"outline",size:"sm","data-testid":"button-signout",children:[o.jsx(fl,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),o.jsxs(wR,{children:[o.jsxs(bR,{children:[o.jsx(SR,{children:"Are you absolutely sure?"}),o.jsx(NR,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),o.jsxs(_R,{children:[o.jsx(TR,{children:"Cancel"}),o.jsx(ER,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 border-0 border-none shadow-none ring-0 focus:ring-0 outline-none",children:"Sign Out"})]})]})]})]})})]})]}),o.jsx(Fh,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsxs(Ae,{children:[o.jsxs(Xe,{children:[o.jsxs(nt,{className:"text-base flex items-center gap-2",children:[o.jsx(GC,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),o.jsx(_n,{children:"Track your progress and unlock rewards by staying consistent."})]}),o.jsx(Be,{children:o.jsx(bq,{earnedBadges:x,currentStreak:j,submissionCount:M,attendanceStats:C})})]})}),o.jsx(Fh,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsx(aG,{})})]})]})}function cG(){const{user:t,requestGmailPermissions:e,accessToken:n}=ot(),{toast:r}=lo(),[s,i]=f.useState(!1),[a,l]=f.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=f.useState(!1),[h,m]=f.useState(!0);f.useEffect(()=>{async function w(){if(t)try{const v=ze(Ne,"users",t.uid,"settings","notifications"),_=await Qr(v);if(_.exists()){const b=_.data();i(b.enabled??!1),l(b.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(v){console.error("Failed to load settings from Firestore",v)}finally{m(!1)}}w()},[t]),f.useEffect(()=>{async function w(){if(!(!t||h))try{const _=ze(Ne,"users",t.uid,"settings","notifications");await gn(_,{enabled:s,config:a,updatedAt:new Date().toISOString()},{merge:!0})}catch(_){console.error("Failed to save settings",_)}}const v=setTimeout(w,1e3);return()=>clearTimeout(v)},[s,a,t,h]);const p=async()=>{u(!0);try{await e()?(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."})):r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(w){console.error(w),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},g=w=>{l(v=>({...v,[w]:!v[w]}))};return o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Un,{href:"/settings",children:o.jsx(ae,{variant:"ghost",size:"icon",className:"rounded-full",children:o.jsx(xm,{className:"h-5 w-5"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),o.jsxs(Ae,{className:"border-border shadow-sm",children:[o.jsxs(Xe,{className:"pb-4",children:[o.jsxs(nt,{className:"flex items-center gap-2 text-lg",children:[o.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:o.jsx(zx,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),o.jsxs(_n,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),o.jsx(Fr,{}),o.jsxs(Be,{className:"pt-6 space-y-6",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(en,{className:"text-base font-medium",children:"Assignment due reminder"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),o.jsx($n,{checked:a.dueReminder,onCheckedChange:()=>g("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx(Fr,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(en,{className:"text-base font-medium",children:"Missed submission alert"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),o.jsx($n,{checked:a.missedSubmission,onCheckedChange:()=>g("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx(Fr,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(en,{className:"text-base font-medium",children:"Heavy workload warning"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),o.jsx($n,{checked:a.workloadWarning,onCheckedChange:()=>g("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),o.jsxs(Ew,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[o.jsx(hl,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:"Academic alerts are active."})]}),o.jsx(ae,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[o.jsx(zi,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),o.jsxs(ae,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&o.jsx(Lr,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function uG(){const[t,e]=mm(),{user:n,requestCalendarPermissions:r}=ot(),{toast:s}=lo(),[i,a]=f.useState(!0),[l,c]=f.useState(!1),[u,h]=f.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});f.useEffect(()=>{if(!n)return;const w=Sr(ze(Ne,"users",n.uid,"settings","calendar"),v=>{v.exists()&&h(v.data()),a(!1)});return()=>w()},[n]);const m=async()=>{c(!0);try{await r()?(await gn(ze(Ne,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(w){console.error(w),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await gn(ze(Ne,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(w){console.error(w)}},g=async(w,v)=>{h(_=>({..._,[w]:v}));try{await gn(ze(Ne,"users",n.uid,"settings","calendar"),{[w]:v},{merge:!0})}catch(_){console.error(_)}};return i?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx(Lr,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:o.jsx(HO,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),o.jsxs("div",{className:"grid gap-6",children:[o.jsxs(Ae,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(Xe,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:o.jsx(co,{className:"h-6 w-6"})}),o.jsx(nt,{className:"text-xl",children:"Google Calendar"}),u.enabled&&o.jsx(pn,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),o.jsx(_n,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?o.jsx(ae,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ae,{onClick:m,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?o.jsx(Lr,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&o.jsxs(Be,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx(Fr,{className:"mb-6"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),o.jsx($n,{checked:u.syncAssignments,onCheckedChange:w=>g("syncAssignments",w)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),o.jsx($n,{checked:u.syncExams,onCheckedChange:w=>g("syncExams",w)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),o.jsx($n,{checked:u.syncPersonal,onCheckedChange:w=>g("syncPersonal",w)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[o.jsx(ml,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(dG,{})]})]})}function dG(){const{user:t,requestGmailPermissions:e}=ot(),{toast:n}=lo(),[r,s]=f.useState(!1),[i,a]=f.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});f.useEffect(()=>{if(!t)return;const h=Sr(ze(Ne,"users",t.uid,"settings","notifications"),m=>{m.exists()&&a(m.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await gn(ze(Ne,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await gn(ze(Ne,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,m)=>{a(p=>({...p,[h]:m}));try{await gn(ze(Ne,"users",t.uid,"settings","notifications"),{[h]:m},{merge:!0})}catch(p){console.error(p)}};return o.jsxs(Ae,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(Xe,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[o.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),o.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),o.jsx(nt,{className:"text-xl",children:"Email Notifications"}),i.enabled&&o.jsx(pn,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),o.jsx(_n,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?o.jsx(ae,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ae,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?o.jsx(Lr,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&o.jsxs(Be,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx(Fr,{className:"mb-6"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),o.jsx($n,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),o.jsx($n,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}function hG(){var C,T,k,I,R,P;const{user:t,signOut:e}=ot(),{courses:n,assignments:r,isLoading:s,error:i}=On();if(i&&i.toLowerCase().includes("session")&&!(n.length>0||r.length>0))return o.jsx(Yl,{});const[a,l]=f.useState("class"),[c,u]=f.useState([]),[h,m]=f.useState(!1),[p,g]=f.useState(!0),[w,v]=f.useState(!0);f.useEffect(()=>{if(!t)return;m(!0);const O=[],re=new Map,J=()=>{const H=[],z=t!=null&&t.email?t.email.split("@")[1]:null,$=n.map(ee=>ee.id),G=new Set(r.map(ee=>ee.id));re.forEach(ee=>{const ie=ee.email||"";let ne=ee.emailDomain||"";!ne&&ie.includes("@")&&(ne=ie.split("@")[1]);const oe=ee.enrolledCourseIds||[],V=ee.processedAssignmentIds||[],Y=z&&ne&&z===ne,he=$.some(Se=>oe.includes(Se)),te=!ne&&V.some(Se=>G.has(Se));let ce=!1;a==="college"?ce=!!Y:ce=Y&&he||te,ce&&H.push(ee)}),H.sort((ee,ie)=>ie.totalXP-ee.totalXP),u(H),m(!1)},X=H=>{H.forEach(z=>{const $=z.data(),G={id:z.id,displayName:$.displayName||$.name||"Anonymous",photoUrl:$.photoUrl||$.avatar||"",totalXP:$.totalXP||$.xp||0,processedAssignmentIds:$.processedAssignmentIds||$.completedTasks||[],email:$.email||"",emailDomain:$.emailDomain||($.email?$.email.split("@")[1]:""),enrolledCourseIds:$.enrolledCourseIds||$.subjects||[],badges:$.badges||[]},ee=re.get(z.id);(!ee||G.totalXP>=ee.totalXP)&&re.set(z.id,G)}),J()},L=t.email?t.email.split("@")[1]:null;if(a==="college"&&L){const H=gr(Ne,"leaderboards","all-courses","students"),z=fs(H,Gc("emailDomain","==",L),zo("totalXP","desc"),Wa(50)),$=Sr(z,X,G=>{console.warn("College query failed (likely missing index). Falling back to global list.",G);const ee=fs(H,zo("totalXP","desc"),Wa(100));Sr(ee,X)});O.push($)}else Array.from(new Set(["all-courses",...n.map(z=>z.id)])).forEach(z=>{const $=gr(Ne,"leaderboards",z,"students"),G=fs($,zo("totalXP","desc"),Wa(50)),ee=Sr(G,X);O.push(ee)});return()=>{O.forEach(H=>H())}},[a,t,n,r]);const _=a==="class"?"My Class":"My College",b=c.find(O=>O.id===(t==null?void 0:t.uid));b!=null&&b.totalXP;const x=!!b,S=c.filter(O=>O.totalXP>0),j=c.filter(O=>O.totalXP===0),D=c.length>0&&S.length===0,M=[...j].sort((O,re)=>{const J=X=>X?typeof X.toMillis=="function"?X.toMillis():typeof X=="number"?X:X instanceof Date?X.getTime():typeof X=="string"?new Date(X).getTime():0:0;return J(O.lastSyncedAt)-J(re.lastSyncedAt)}),N=[...S,...M];return o.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[i&&i.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(zi,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:O=>{O.preventDefault(),window.location.reload()},children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),o.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[_," Leaderboard"]})]}),o.jsx("div",{className:"w-full sm:w-[200px]",children:o.jsxs(ju,{value:a,onValueChange:O=>l(O),children:[o.jsx(jl,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:o.jsx(Iu,{placeholder:"Select View"})}),o.jsxs(Il,{children:[o.jsx(Et,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),o.jsx(Et,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p&&a==="class"&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>g(!1),children:o.jsx(bs,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:o.jsx(ZO,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),o.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[o.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Submit"," ",o.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),a==="college"&&w&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>v(!1),children:o.jsx(bs,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:o.jsx(zi,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),o.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[o.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",o.jsx(QC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),o.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",o.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[o.jsx(zi,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!x&&!h?o.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(Lr,{className:"h-6 w-6 text-primary animate-spin"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Syncing Your Progress"}),o.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Your leaderboard data is automatically syncing. Complete some assignments to start earning XP!"})]})]})}):null,h&&c.length===0?o.jsx("div",{className:"space-y-4",children:[1,2,3].map(O=>o.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},O))}):c.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:o.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):D?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 flex items-start gap-3",children:[o.jsx(qC,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Be the first to climb the leaderboard!"}),o.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Submit your first assignment to earn 100 XP and claim the #1 spot. The competition starts now!"})]})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:N.map((O,re)=>{var X,L;const J=O.id===(t==null?void 0:t.uid);return o.jsxs("div",{className:U("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200",J?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30"),children:[o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(Yn,{className:U("h-10 w-10 border flex-shrink-0",J?"border-primary/20":"border-border"),children:[o.jsx(Jn,{src:O.photoUrl}),o.jsx(Zn,{className:"text-xs bg-muted text-muted-foreground",children:(L=(X=O.displayName)==null?void 0:X[0])==null?void 0:L.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("span",{className:U("text-sm font-medium truncate",J?"text-primary":"text-foreground"),children:[O.displayName,J&&o.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(You)"})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready to start"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"0 XP"})})]},O.id)})})]}):o.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[N.length>0&&o.jsxs("div",{className:U("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",p?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[o.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:N[1]&&N[1].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsxs(Yn,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[o.jsx(Jn,{src:N[1].photoUrl}),o.jsx(Zn,{className:"text-lg bg-zinc-100 text-zinc-500",children:(T=(C=N[1].displayName)==null?void 0:C[0])==null?void 0:T.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:N[1].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[N[1].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(kc,{badges:N[1].badges||[],limit:2,size:"sm"})})]})]}):S.length===1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Submit 1 assignment to claim 2nd place!"})]}):o.jsx("div",{className:"w-full"})}),o.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:o.jsx(Fc,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),o.jsxs(Yn,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[o.jsx(Jn,{src:N[0].photoUrl}),o.jsx(Zn,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(I=(k=N[0].displayName)==null?void 0:k[0])==null?void 0:I.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),o.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:N[0].displayName}),o.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[N[0].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:o.jsx(kc,{badges:N[0].badges||[],limit:3,size:"sm"})})]})]}),o.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:N[2]&&N[2].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsxs(Yn,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[o.jsx(Jn,{src:N[2].photoUrl}),o.jsx(Zn,{className:"text-lg bg-amber-50 text-amber-700",children:(P=(R=N[2].displayName)==null?void 0:R[0])==null?void 0:P.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:N[2].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[N[2].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(kc,{badges:N[2].badges||[],limit:2,size:"sm"})})]})]}):S.length>=1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Spot open for 3rd place!"})]}):o.jsx("div",{className:"w-full"})})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:N.slice(Math.min(3,S.length)).map((O,re)=>{var L,H;const J=O.id===(t==null?void 0:t.uid),X=Math.min(3,S.length)+re+1;return o.jsxs("div",{className:U("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",J?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[o.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:o.jsx("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:O.totalXP>0?`#${X}`:"-"})}),o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(Yn,{className:U("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",J?"border-primary/20":"border-border"),children:[o.jsx(Jn,{src:O.photoUrl}),o.jsx(Zn,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(H=(L=O.displayName)==null?void 0:L[0])==null?void 0:H.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[o.jsxs("span",{className:U("text-xs sm:text-sm font-medium truncate",J?"text-primary":"text-foreground"),children:[O.displayName," ",J&&o.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),o.jsx(kc,{badges:O.badges||[],limit:3,size:"md",className:"scale-100"})]}),o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[O.processedAssignmentIds.length," ",o.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),o.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[o.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:O.totalXP.toLocaleString()}),o.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},O.id)})})]})]})})]})}function fG(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const bN=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function mG(){return o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8 animate-pulse",children:[o.jsx(Skeleton,{className:"h-48 w-full rounded-xl"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>o.jsx(Skeleton,{className:"h-64 rounded-xl"},t))})]})}function pG(){const{courses:t,error:e,isLoading:n}=On();if(n)return o.jsx(mG,{});if(e&&e.toLowerCase().includes("session")&&t.length===0)return o.jsx(Yl,{});const{accessToken:r,user:s}=ot();lo();const[i,a]=f.useState(""),[l,c]=f.useState({}),[u,h]=f.useState(!1),[m,p]=f.useState(null);f.useState("");const g=f.useMemo(()=>fG(),[]);f.useEffect(()=>{if(!t||!s)return;(async()=>{const C=await Promise.all(t.map(async k=>{var R;if(((R=l[k.id])==null?void 0:R.state)==="loaded")return l[k.id];const I=await vr.getCourseConfig(k.id);return I?I.isVisible?(w(k.id,I.sheetUrl),{courseId:k.id,state:"loading"}):{courseId:k.id,state:"hidden"}:{courseId:k.id,state:"no-config"}})),T={};C.forEach(k=>{T[k.courseId]=k}),c(k=>({...k,...T}))})()},[t,s]),f.useEffect(()=>{t.length>0&&!i&&a(t[0].id)},[t,i]);const w=async(N,C)=>{if(!r||!(s!=null&&s.email))return;const T=vr.extractSheetId(C);if(!T){c(R=>({...R,[N]:{courseId:N,state:"error",error:"Invalid configuration"}}));return}const k=await vr.getCourseConfig(N),I=(k==null?void 0:k.emailColumn)||"A";try{const R=await vr.fetchAttendanceFromSheet(T,r,s.email,I);c(P=>({...P,[N]:{courseId:N,state:"loaded",data:R}}))}catch(R){console.error(R),c(P=>({...P,[N]:{courseId:N,state:"error",error:R.message||"Failed to load"}}))}},v=async N=>{N==null||N.stopPropagation(),h(!0);const C=Object.values(l).filter(T=>T.state==="loaded"||T.state==="error"||T.state==="loading").map(async T=>{const k=await vr.getCourseConfig(T.courseId);return k?w(T.courseId,k.sheetUrl):Promise.resolve()});await Promise.allSettled(C),h(!1)},_=Object.values(l).filter(N=>N.state==="loaded"&&N.data),b=_.reduce((N,C)=>{var T;return N+(((T=C.data)==null?void 0:T.stats.attendedClasses)||0)},0),x=_.reduce((N,C)=>{var T;return N+(((T=C.data)==null?void 0:T.stats.totalClasses)||0)},0),S=bN(b,x),j=l[i],D=t.find(N=>N.id===i),M=j==null?void 0:j.data;return f.useEffect(()=>{if(!s||x<5)return;const C=setTimeout(async()=>{const T=[],k=b,I=x,R=I>0?k/I:0;if(I>=10&&R===1&&T.push("perfect-week"),I>=30&&R>=.95&&T.push("attendance-champion"),T.length>0)try{const P=ze(Ne,"leaderboards","all-courses","students",s.uid);await Pa(P,{badges:rw(...T)})}catch(P){console.debug("Could not award attendance badges:",P)}},3e3);return()=>clearTimeout(C)},[s,x,b]),o.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[o.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:o.jsxs("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[o.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),o.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),o.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",g]})]}),o.jsxs(ae,{variant:"ghost",size:"sm",onClick:v,className:U("text-muted-foreground h-8 shrink-0",u&&"opacity-70"),children:[o.jsx(ff,{className:U("h-3.5 w-3.5 sm:mr-2",u&&"animate-spin")}),o.jsx("span",{className:"hidden sm:inline",children:"Refresh Data"})]})]})}),e&&e.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(zi,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached courses shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:N=>{N.preventDefault(),window.location.reload()},children:o.jsx(ae,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[o.jsx("section",{children:_.length>0?o.jsx(Ae,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:o.jsx(Be,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[o.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),o.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),o.jsx(pn,{variant:S.status==="safe"?"outline":"destructive",className:U("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",S.color),children:S.status==="safe"?"Safe Status":"Attention Needed"})]}),o.jsxs("div",{className:"flex items-baseline gap-3",children:[o.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[S.percentage,"%"]}),o.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",_.length," active courses"]})]})]})})}):o.jsx(Ae,{className:"border-border shadow-sm bg-card",children:o.jsxs(Be,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[o.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:o.jsx(yu,{className:"h-8 w-8 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2 max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),o.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",o.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[o.jsx(ir,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[o.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(N=>{var R,P;const C=l[N.id],T=(C==null?void 0:C.state)||"loading",k=C!=null&&C.data?bN(C.data.stats.attendedClasses,C.data.stats.totalClasses):null,I=i===N.id;return o.jsx(Ae,{className:U("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",I&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>a(N.id),children:o.jsxs(Be,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[o.jsxs("div",{className:"flex justify-between items-start gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsxs(Im,{children:[o.jsx(Am,{asChild:!0,children:o.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:N.name})}),o.jsx(Wu,{children:o.jsx("p",{children:N.name})})]}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:N.section||"No Section"})]}),T==="loaded"&&k&&o.jsxs("span",{className:U("text-lg font-bold tabular-nums",k.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[k.percentage,"%"]}),T==="hidden"&&o.jsx($y,{className:"h-5 w-5 text-muted-foreground/50"}),T==="locked"&&o.jsx(By,{className:"h-5 w-5 text-amber-500/80"}),T==="error"&&o.jsx(zi,{className:"h-5 w-5 text-destructive/80"})]}),o.jsxs("div",{className:"mt-auto",children:[T==="loaded"&&k&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[o.jsxs("span",{children:[(R=C.data)==null?void 0:R.stats.attendedClasses,"/",(P=C.data)==null?void 0:P.stats.totalClasses," classes"]}),o.jsx("span",{className:k.status==="safe"?"text-emerald-500":"text-red-500",children:k.status==="safe"?"On Track":"Low Attendance"})]}),o.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:o.jsx("div",{className:U("h-full rounded-full transition-all duration-500",k.progressColor),style:{width:`${k.percentage}%`}})})]}),T==="locked"&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),o.jsxs(ae,{size:"sm",variant:"secondary",className:"w-full",onClick:O=>{O.stopPropagation(),p(N.id)},children:[o.jsx(e3,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),T==="hidden"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),T==="no-config"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),T==="error"&&o.jsx("p",{className:"text-xs text-destructive",children:C==null?void 0:C.error}),T==="loading"&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(ff,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},N.id)})}),o.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between px-1",children:[o.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[o.jsx(yu,{className:"h-4 w-4"})," History"]}),o.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(D==null?void 0:D.section)||(D==null?void 0:D.name.slice(0,3).toUpperCase())})]}),o.jsx(Ae,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:M?o.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:o.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:M.history.map((N,C)=>{const T=N.status==="Present",k=C===0,I=C===5;return o.jsxs("div",{className:"group",children:[k&&o.jsx("div",{className:"ml-5 mb-3 mt-1",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),I&&o.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),o.jsxs("div",{className:"relative pl-5 select-none",children:[o.jsx("div",{className:U("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",T?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),C!==M.history.length-1&&o.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),o.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[o.jsx("div",{className:U("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",T?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:N.status}),o.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:N.date})]})})]})]},C)})})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(j==null?void 0:j.state)==="locked"&&o.jsxs(o.Fragment,{children:[o.jsx(By,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(j==null?void 0:j.state)==="hidden"&&o.jsxs(o.Fragment,{children:[o.jsx($y,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((j==null?void 0:j.state)==="error"||(j==null?void 0:j.state)==="no-config")&&o.jsxs(o.Fragment,{children:[o.jsx(ir,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}const _N=Aw,gG=nP,yG=Pw,GR=f.forwardRef(({className:t,...e},n)=>o.jsx(dd,{ref:n,className:U("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));GR.displayName=dd.displayName;const Rv=f.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(yG,{children:[o.jsx(GR,{}),o.jsxs(hd,{ref:r,className:U("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,o.jsxs(xp,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(bs,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rv.displayName=hd.displayName;const Dv=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Dv.displayName="DialogHeader";const KR=({className:t,...e})=>o.jsx("div",{className:U("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});KR.displayName="DialogFooter";const Mv=f.forwardRef(({className:t,...e},n)=>o.jsx(fd,{ref:n,className:U("text-lg font-semibold leading-none tracking-tight",t),...e}));Mv.displayName=fd.displayName;const vG=f.forwardRef(({className:t,...e},n)=>o.jsx(md,{ref:n,className:U("text-sm text-muted-foreground",t),...e}));vG.displayName=md.displayName;const is=[{id:"swords",icon:zc,label:"Warrior",color:"text-red-500",gradient:"bg-gradient-to-r from-red-600 to-orange-600"},{id:"shield",icon:c3,label:"Guardian",color:"text-blue-500",gradient:"bg-gradient-to-r from-blue-600 to-cyan-600"},{id:"zap",icon:YC,label:"Speed",color:"text-yellow-500",gradient:"bg-gradient-to-r from-yellow-500 to-amber-600"},{id:"crown",icon:Fc,label:"Royal",color:"text-purple-500",gradient:"bg-gradient-to-r from-purple-600 to-indigo-600"},{id:"flame",icon:Uu,label:"Power",color:"text-orange-500",gradient:"bg-gradient-to-r from-orange-600 to-red-600"},{id:"rocket",icon:Ux,label:"Launch",color:"text-cyan-500",gradient:"bg-gradient-to-r from-cyan-600 to-blue-600"},{id:"star",icon:mf,label:"Legend",color:"text-indigo-500",gradient:"bg-gradient-to-r from-indigo-600 to-purple-600"},{id:"target",icon:Wx,label:"Focus",color:"text-emerald-500",gradient:"bg-gradient-to-r from-emerald-600 to-green-600"},{id:"book",icon:wm,label:"Scholar",color:"text-pink-500",gradient:"bg-gradient-to-r from-pink-600 to-rose-600"},{id:"ghost",icon:XO,label:"Phantom",color:"text-slate-400",gradient:"bg-gradient-to-r from-slate-700 to-gray-800"}];function xG(){const{user:t}=ot(),{toast:e}=lo(),[n,r]=f.useState("leaderboard"),[s,i]=f.useState(null),[a,l]=f.useState([]),[c,u]=f.useState(!0),[h,m]=f.useState([]),[p,g]=f.useState(""),[w,v]=f.useState(""),[_,b]=f.useState(""),[x,S]=f.useState(!1),[j,D]=f.useState(!0),[M,N]=f.useState(""),[C,T]=f.useState(!1),[k,I]=f.useState(""),[R,P]=f.useState(""),[O,re]=f.useState(""),[J,X]=f.useState(!1),[L,H]=f.useState(!1),[z,$]=f.useState("class"),[G,ee]=f.useState(!0),[ie,ne]=f.useState(null),[oe,V]=f.useState([]),[Y,he]=f.useState(!1),[Q,te]=f.useState(!1),[ce,Se]=f.useState({}),Le=async ue=>{te(!0);try{if(ue.length===0){V([]),te(!1);return}const be=fs(gr(Ne,"leaderboards"),Gc("uid","in",ue)),ge=(await Tc(be)).docs.map(je=>{const at=je.data();return{uid:at.uid,displayName:at.displayName||"Unknown",photoUrl:at.photoURL||"",currentXP:at.currentXP||0,role:"member"}});ge.sort((je,at)=>at.currentXP-je.currentXP),V(ge)}catch(be){console.error("Error fetching members:",be)}finally{te(!1)}},ft=ue=>{s&&ue.id===s.id?r("my-clan"):(ne(ue),he(!0),Le(ue.members))};f.useEffect(()=>{t&&(He(),rn())},[t]);const He=async()=>{try{u(!0);const ue=gr(Ne,"study_squads"),be=fs(ue,Gc("members","array-contains",t.uid)),Ve=await Tc(be);if(Ve.empty)i(null);else{const ge=Ve.docs[0],je={id:ge.id,...ge.data()};i(je),I(je.name),P(je.tag),re(je.description),await Ze(je.members,je.leaderId,ge.id)}}catch(ue){console.error("Error fetching clan:",ue)}finally{u(!1)}},Ze=async(ue,be,Ve)=>{const ge=[];let je=0;for(const St of ue){const zt=ze(Ne,"leaderboards","all-courses","students",St),cr=await Qr(zt);let et=0,Ut="Unknown",$t="";if(cr.exists()){const Pt=cr.data();et=Pt.totalXP||Pt.xp||0,Ut=Pt.displayName||Pt.name||"Unknown",$t=Pt.photoUrl||Pt.avatar||""}else St===(t==null?void 0:t.uid)&&(Ut=(t==null?void 0:t.displayName)||"Me",$t=(t==null?void 0:t.photoURL)||"");je+=et,ge.push({uid:St,displayName:Ut,photoUrl:$t,currentXP:et,role:St===be?"leader":"member"})}ge.sort((St,zt)=>zt.currentXP-St.currentXP),l(ge);const at=ze(Ne,"study_squads",Ve);Pa(at,{totalXP:je}).catch(console.error)},rn=async()=>{try{const ue=gr(Ne,"study_squads"),be=fs(ue,zo("totalXP","desc"),Wa(20)),ge=(await Tc(be)).docs.map(et=>({id:et.id,...et.data()}));m(ge);const je=new Set;ge.forEach(et=>et.members.forEach(Ut=>je.add(Ut)));const at=Array.from(je);if(at.length===0)return;const St={},zt=[];for(let et=0;et<at.length;et+=10)zt.push(at.slice(et,et+10));await Promise.all(zt.map(async et=>{const Ut=fs(gr(Ne,"leaderboards","all-courses","students"),Gc("uid","in",et));(await Tc(Ut)).forEach(Pt=>{const Cr=Pt.data();St[Cr.uid]={uid:Cr.uid,displayName:Cr.displayName||"Unknown",photoUrl:Cr.photoURL||"",currentXP:Cr.totalXP||Cr.currentXP||0,role:"member"}})}));const cr={};ge.forEach(et=>{cr[et.id]=et.members.map(Ut=>{let $t=St[Ut];return!$t&&Ut===(t==null?void 0:t.uid)&&($t={uid:t.uid,displayName:t.displayName||"Me",photoUrl:t.photoURL||"",currentXP:0,role:"member"}),$t}).filter(Boolean),cr[et.id].sort((Ut,$t)=>$t.currentXP-Ut.currentXP)}),Se(cr)}catch(ue){console.error("Error fetching top clans:",ue)}},Qe=async()=>{var ue;if(!(!p||!w)){S(!0);try{const be={name:p,tag:w,description:_||"We study hard!",leaderId:t.uid,members:[t.uid],totalXP:0,averageAttendance:0,bannerColor:"bg-blue-600",isPublic:!0,createdAt:op()},Ve=await ip(gr(Ne,"study_squads"),be);e({title:"Clan Created!",description:`You are now the leader of ${p}`}),He(),r("my-clan")}catch(be){if(console.error("Create clan error:",be),be.code==="permission-denied")e({title:"Permission Denied",description:"Security Rules Error: Update Firestore Rules to allow 'study_squads'.",variant:"destructive"});else{const Ve=((ue=be.message)==null?void 0:ue.includes("BLOCKED"))||be.code==="unavailable";e({title:Ve?"Connection Blocked":"Error",description:Ve?"Your browser or an extension is blocking the database. Please disable it for this site.":"Failed to create clan. Try again.",variant:"destructive"})}}finally{S(!1)}}},Je=async ue=>{const be=ue||M;if(be){T(!0);try{const Ve=ze(Ne,"study_squads",be),ge=await Qr(Ve);if(!ge.exists()){e({title:"Error",description:"Clan not found",variant:"destructive"});return}const je=ge.data();if(je.members.length>=5){e({title:"Clan Full",description:"This clan already has 5 members.",variant:"destructive"});return}if(je.members.includes(t.uid)){e({title:"Already a Member",description:"You are already in this clan."});return}await Pa(Ve,{members:rw(t.uid)}),e({title:"Welcome!",description:`You joined ${je.name}`}),await He(),N(""),r("my-clan")}catch{e({title:"Error",description:"Failed to join clan.",variant:"destructive"})}finally{T(!1)}}},jn=async()=>{if(s&&confirm("Are you sure you want to leave this clan? "+(s.members.length===1?"Since you are the last member, the clan will be deleted.":"")))try{const ue=ze(Ne,"study_squads",s.id);if(s.members.length<=1)await nw(ue),e({title:"Squad Disbanded",description:"The squad has been deleted."});else{const be={members:dI(t.uid)};if(s.leaderId===t.uid){const Ve=s.members.filter(ge=>ge!==t.uid);Ve.length>0&&(be.leaderId=Ve[0])}await Pa(ue,be),e({title:"Left Squad",description:"You have left the squad."})}i(null),l([]),r("leaderboard"),rn()}catch(ue){console.error(ue),e({title:"Error",description:"Failed to leave squad.",variant:"destructive"})}},es=async()=>{if(!(!s||!k||!R)){X(!0);try{const ue=ze(Ne,"study_squads",s.id);await Pa(ue,{name:k,tag:R,description:O}),i(be=>be?{...be,name:k,tag:R,description:O}:null),e({title:"Clan Updated",description:"Your clan settings have been saved."}),H(!1)}catch(ue){console.error(ue),e({title:"Update Failed",description:"Could not update clan details.",variant:"destructive"})}finally{X(!1)}}},go=ue=>{const Ve=(is.find(ge=>ge.id===ue)||is[0]).icon;return o.jsx(Ve,{className:"h-4 w-4"})};return c&&!s?o.jsx("div",{className:"flex h-screen items-center justify-center",children:o.jsx(Lr,{className:"h-8 w-8 animate-spin text-primary"})}):o.jsxs("div",{className:"flex flex-col h-full bg-background overflow-hidden relative",children:[o.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Clans"}),o.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[o.jsxs("button",{onClick:()=>r("leaderboard"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",n==="leaderboard"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(YO,{className:"h-3.5 w-3.5"}),"Leaderboard"]}),o.jsxs("button",{onClick:()=>r("my-clan"),className:U("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",n==="my-clan"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(zc,{className:"h-3.5 w-3.5"}),"My Squad",s&&o.jsx("span",{className:"ml-1 h-1.5 w-1.5 rounded-full bg-primary/50"})]})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 pb-20",children:n==="leaderboard"?o.jsxs("div",{className:"max-w-5xl mx-auto w-full space-y-6 animate-in fade-in slide-in-from-bottom-2 duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[o.jsx($u,{className:"h-5 w-5 text-yellow-500"}),"Top Study Squads"]}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Competed based on Total XP."})]}),o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsxs(ju,{value:z,onValueChange:ue=>$(ue),children:[o.jsx(jl,{className:"w-[140px] h-9",children:o.jsx(Iu,{placeholder:"Select View"})}),o.jsxs(Il,{children:[o.jsx(Et,{value:"class",children:"My Class"}),o.jsx(Et,{value:"college",children:"This College"})]})]}),!s&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ds,{placeholder:"Enter ID...",value:M,onChange:ue=>N(ue.target.value),className:"bg-background w-32 h-9"}),o.jsx(ae,{size:"sm",onClick:()=>Je(M),disabled:C||!M,children:C?o.jsx(Lr,{className:"animate-spin h-3 w-3"}):"Join"})]})]})]}),z==="college"&&G&&o.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3 flex gap-3 text-yellow-600 dark:text-yellow-400 text-sm animate-in fade-in slide-in-from-top-2",children:[o.jsx(zi,{className:"h-5 w-5 shrink-0"}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("p",{className:"font-medium",children:"Entertainment Purpose Only"}),o.jsx("button",{onClick:()=>ee(!1),className:"text-yellow-600/50 hover:text-yellow-600",children:o.jsx(bs,{className:"h-4 w-4"})})]}),o.jsx("p",{className:"text-xs opacity-90 leading-relaxed",children:"This leaderboard includes all squads from your college. Note that students in different years or branches may have different workloads and assignment counts, so this comparison is not academically fair. It's just for fun!"})]})]}),o.jsxs("div",{className:"space-y-3",children:[h.map((ue,be)=>{const Ve=(s==null?void 0:s.id)===ue.id;ue.members.length>=5;const ge=ce[ue.id]||[],je=is.find(St=>St.id===ue.tag)||is[0],at=je.icon;return o.jsxs("div",{onClick:()=>ft(ue),className:U("relative flex flex-col md:flex-row md:items-center justify-between p-4 border rounded-xl transition-all cursor-pointer gap-4 md:gap-0",Ve?"bg-primary/5 border-primary/20":"bg-card hover:border-primary/50"),children:[o.jsxs("div",{className:"absolute top-3 right-3 flex items-center text-xs text-muted-foreground gap-1 bg-background/50 backdrop-blur-sm p-1.5 rounded-md border shadow-sm z-10",children:[o.jsx(Z1,{className:"h-3 w-3"}),ue.members.length,"/5"]}),o.jsxs("div",{className:"flex items-center gap-4 md:flex-1",children:[o.jsx("div",{className:U("h-10 w-10 rounded-full flex items-center justify-center font-bold text-sm shrink-0",be<3?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-500":"bg-muted text-muted-foreground"),children:be+1}),o.jsxs("div",{className:"min-w-0",children:[o.jsxs("h4",{className:"font-bold flex items-center gap-2",children:[o.jsx("div",{className:U("p-2 rounded-lg mr-2 shadow-sm text-white shrink-0",je.gradient||"bg-primary"),children:o.jsx(at,{className:"h-4 w-4"})}),o.jsx("span",{className:"truncate",children:ue.name}),Ve&&o.jsx(pn,{variant:"secondary",className:"text-[10px] shrink-0",children:"Your Clan"})]}),o.jsx("p",{className:"text-xs text-muted-foreground truncate max-w-[200px] md:max-w-md",children:ue.description})]})]}),o.jsxs("div",{className:"flex items-center gap-4 mt-2 md:mt-0 md:mx-auto md:mr-20",children:[o.jsx("div",{className:"flex -space-x-3",children:ge.slice(0,5).map(St=>o.jsxs("div",{className:"relative group/avatar",children:[o.jsxs(Yn,{className:"h-8 w-8 md:h-10 md:w-10 border-2 border-background ring-1 ring-border cursor-help transition-transform hover:scale-110 hover:z-20",children:[o.jsx(Jn,{src:St.photoUrl}),o.jsx(Zn,{className:"text-[10px] md:text-xs",children:St.displayName[0]})]}),o.jsx("div",{className:"absolute bottom-full mb-1 left-1/2 -translate-x-1/2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded shadow-md opacity-0 group-hover/avatar:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50",children:St.displayName})]},St.uid))}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:"text-sm md:text-base font-bold text-foreground/80",children:[ue.totalXP.toLocaleString()," ",o.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"XP"})]})})]})]},ue.id)}),h.length===0&&o.jsx("div",{className:"text-center py-12 text-muted-foreground bg-muted/20 rounded-xl border border-dashed",children:"No active clans found. Be the first to create one!"})]})]}):o.jsx(o.Fragment,{children:s?o.jsx("div",{className:"max-w-7xl mx-auto w-full space-y-6 animate-in fade-in slide-in-from-right-4 duration-500",children:(()=>{const ue=is.find(ge=>ge.id===s.tag)||is[0],be=ue.icon,Ve=ue.gradient||"bg-gradient-to-r from-blue-600 to-indigo-700";return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`relative rounded-xl overflow-hidden ${Ve} p-4 md:p-8 text-white shadow-lg`,children:[o.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:o.jsx(be,{className:"h-32 w-32"})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-8 w-8 bg-white/20 rounded flex items-center justify-center backdrop-blur-sm",children:go(s.tag)}),s.leaderId===(t==null?void 0:t.uid)?o.jsxs(_N,{open:L,onOpenChange:H,children:[o.jsx(gG,{asChild:!0,children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 text-white/50 hover:text-white hover:bg-white/20",children:o.jsx(Bx,{className:"h-4 w-4"})})}),o.jsxs(Rv,{children:[o.jsx(Dv,{children:o.jsx(Mv,{children:"Edit Clan Details"})}),o.jsxs("div",{className:"space-y-4 py-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(en,{children:"Name"}),o.jsx(Ds,{value:k,onChange:ge=>I(ge.target.value)})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(en,{children:"Badge"}),o.jsx("div",{className:"grid grid-cols-5 gap-2",children:is.map(ge=>{const je=ge.icon,at=R===ge.id;return o.jsx("div",{onClick:()=>P(ge.id),className:U("aspect-square rounded-md border-2 flex flex-col items-center justify-center cursor-pointer hover:bg-muted transition-all",at?"border-primary bg-primary/5":"border-transparent bg-muted/50"),children:o.jsx(je,{className:U("h-5 w-5 mb-1",at?ge.color:"text-foreground")})},ge.id)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(en,{children:"Description (Max 20 chars)"}),o.jsx(Ds,{value:O,onChange:ge=>re(ge.target.value),maxLength:20})]}),o.jsxs("div",{className:"pt-4 border-t mt-4",children:[o.jsx("h4",{className:"text-xs font-semibold text-destructive mb-3 uppercase tracking-wide",children:"Danger Zone"}),o.jsxs(ae,{variant:"destructive",size:"sm",className:"w-full",onClick:jn,children:[o.jsx(fl,{className:"h-4 w-4 mr-2"}),s.members.length===1?"Disband Squad":"Leave Squad"]})]})]}),o.jsxs(KR,{children:[o.jsx(ae,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),o.jsx(ae,{onClick:es,disabled:J,children:"Save Changes"})]})]})]}):o.jsx(ae,{variant:"ghost",size:"icon",onClick:jn,className:"h-6 w-6 text-white/50 hover:text-red-300 hover:bg-red-500/20 transition-all rounded-full",title:"Leave Squad",children:o.jsx(fl,{className:"h-4 w-4"})})]}),o.jsx("h2",{className:"text-xl md:text-3xl font-black tracking-tight",children:s.name}),o.jsx("p",{className:"text-blue-100 italic max-w-lg",children:s.description})]})}),o.jsxs("div",{className:"flex gap-3 mt-8",children:[o.jsxs(ae,{size:"sm",variant:"outline",className:"text-white border-white/40 hover:bg-white/10 hover:text-white",onClick:()=>{navigator.clipboard.writeText(s.id),e({title:"Copied!",description:"Clan ID copied to clipboard."})},children:[o.jsx(X1,{className:"h-4 w-4 mr-2"}),"Copy Clan ID"]}),s.leaderId===(t==null?void 0:t.uid)&&o.jsxs(pn,{variant:"outline",className:"text-white border-white/40 h-9 px-3",children:[o.jsx(Fc,{className:"h-3 w-3 mr-1"}),"Leader"]})]}),o.jsxs("div",{className:"absolute bottom-0 right-0 text-right p-3 md:p-4 bg-white/10 rounded-lg backdrop-blur-sm border border-white/10 origin-bottom-right transform scale-75 md:scale-100",children:[o.jsx("div",{className:"text-3xl font-mono font-bold tracking-tighter",children:s.totalXP.toLocaleString()}),o.jsx("div",{className:"text-xs text-blue-200 font-medium tracking-widest uppercase",children:"Total XP"})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs(Ae,{className:"lg:col-span-2 overflow-hidden",children:[o.jsx(Xe,{className:"pb-3 bg-gradient-to-br from-background to-muted/20",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(nt,{className:"text-sm font-semibold flex items-center gap-2",children:[o.jsx(Z1,{className:"h-4 w-4 text-primary"}),"Squad Members"]}),o.jsxs(pn,{variant:"outline",className:"text-xs font-mono tabular-nums",children:[a.length,"/5"]})]})}),o.jsxs(Be,{className:"space-y-3 pt-4",children:[a.map((ge,je)=>o.jsxs("div",{className:"group/member flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-muted/50 hover:border-border transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[o.jsx("div",{className:U("font-mono text-center text-sm font-bold w-7 h-7 rounded-md flex items-center justify-center shrink-0 transition-colors",je===0?"bg-amber-100 text-amber-700 dark:bg-amber-900/20 dark:text-amber-500":"bg-muted text-muted-foreground"),children:je+1}),o.jsxs("div",{className:"relative shrink-0",children:[o.jsxs(Yn,{className:"h-9 w-9 border",children:[o.jsx(Jn,{src:ge.photoUrl,className:"object-cover"}),o.jsx(Zn,{className:"text-xs",children:ge.displayName[0]})]}),ge.role==="leader"&&o.jsx("div",{className:"absolute -top-0.5 -right-0.5 p-0.5 bg-amber-500 rounded-full",children:o.jsx(Fc,{className:"h-2.5 w-2.5 text-white fill-white"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"font-medium flex items-center gap-2 text-sm truncate",children:[o.jsx("span",{className:"truncate",children:ge.displayName}),ge.role==="leader"&&o.jsx(pn,{variant:"secondary",className:"text-[10px] px-1 py-0 shrink-0",children:"Leader"})]}),o.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:ge.role})]})]}),o.jsxs("div",{className:"text-right shrink-0",children:[o.jsx("div",{className:"font-bold text-sm font-mono tabular-nums",children:ge.currentXP.toLocaleString()}),o.jsx("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:"XP"})]})]},ge.uid)),a.length<5&&o.jsxs("div",{className:"border-2 border-dashed rounded-lg p-4 flex flex-col items-center justify-center text-muted-foreground gap-2 hover:bg-muted/50 hover:border-primary/50 transition-all cursor-pointer",onClick:()=>{navigator.clipboard.writeText(s.id),e({title:"Copied!",description:"Share this ID with a friend."})},children:[o.jsx(h3,{className:"h-5 w-5 text-primary"}),o.jsx("span",{className:"text-sm font-medium",children:"Invite a Friend"}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:[5-a.length," ",5-a.length===1?"slot":"slots"," ","remaining"]})]})]})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs(Ae,{className:"border-2 shadow-xl hover:shadow-2xl transition-all duration-300 group/stats overflow-hidden relative",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 via-transparent to-blue-500/5 opacity-0 group-hover/stats:opacity-100 transition-opacity duration-500 pointer-events-none"}),o.jsx(Xe,{className:"pb-3 relative z-10",children:o.jsxs(nt,{className:"text-xs font-bold text-muted-foreground uppercase tracking-widest flex items-center gap-2",children:[o.jsx("div",{className:"h-1 w-1 rounded-full bg-primary animate-pulse"}),"Weekly Stats"]})}),o.jsxs(Be,{className:"space-y-4 pt-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:o.jsx(zO,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"})}),o.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Avg. Attendance"})]}),o.jsx("div",{className:"text-3xl font-semibold font-mono tracking-tight text-emerald-600 dark:text-emerald-400",children:"-- %"})]}),o.jsx("div",{className:"h-px bg-border"}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:o.jsx(o3,{className:"h-4 w-4 text-primary"})}),o.jsx("div",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Class Rank"})]}),o.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight",children:["#",h.findIndex(ge=>ge.id===s.id)+1]})]}),o.jsx("div",{className:"h-px bg-border"}),o.jsxs(ae,{size:"sm",variant:"outline",className:"w-full h-8 text-xs",onClick:()=>{navigator.clipboard.writeText(s.id),e({title:"Copied!",description:"Clan ID copied to clipboard."})},children:[o.jsx(X1,{className:"h-3 w-3 mr-2"}),"Copy Clan ID"]})]})]})})]}),o.jsx("style",{children:`
                        @keyframes fadeInUp {
                          from {
                            opacity: 0;
                            transform: translateY(10px);
                          }
                          to {
                            opacity: 1;
                            transform: translateY(0);
                          }
                        }
                      `})]})})()}):o.jsxs("div",{className:"max-w-4xl mx-auto w-full py-10 space-y-6 animate-in fade-in zoom-in-95 duration-500",children:[j&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-5 flex flex-col sm:flex-row gap-5 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2",children:o.jsx(ae,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:()=>D(!1),children:o.jsx(bs,{className:"h-4 w-4"})})}),o.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center shrink-0",children:o.jsx(zc,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:"Create Your Study Squad"}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed max-w-md",children:"Squad up with friends to track progress together, compete on the leaderboard, and keep each other accountable."})]})]}),o.jsxs(Ae,{className:"border-2 border-primary/10 shadow-lg",children:[o.jsxs(Xe,{children:[o.jsx(nt,{children:"Squad Details"}),o.jsx(_n,{children:"Start a new journey with up to 4 other friends."})]}),o.jsxs(Be,{className:"space-y-4",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx(en,{children:"Squad Name"}),o.jsx(Ds,{placeholder:"e.g. Night Owls",value:p,onChange:ue=>g(ue.target.value),maxLength:20})]})}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(en,{children:"Choose Squad Badge"}),o.jsx("div",{className:"grid grid-cols-5 md:grid-cols-10 gap-2",children:is.map(ue=>{const be=ue.icon,Ve=w===ue.id;return o.jsxs("div",{onClick:()=>v(ue.id),className:U("aspect-square rounded-md border-2 flex flex-col items-center justify-center cursor-pointer hover:bg-muted transition-all",Ve?"border-primary bg-primary/5":"border-transparent bg-muted/50"),children:[o.jsx(be,{className:U("h-6 w-6 mb-1",Ve?ue.color:"text-muted-foreground")}),o.jsx("span",{className:"text-[10px] font-medium text-muted-foreground",children:ue.label})]},ue.id)})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(en,{children:"Motto (Max 20 chars)"}),o.jsx(Ds,{placeholder:"We never sleep...",value:_,onChange:ue=>b(ue.target.value),maxLength:20}),o.jsxs("div",{className:"text-xs text-right text-muted-foreground",children:[_.length,"/20"]})]}),o.jsxs(ae,{className:"w-full",size:"lg",onClick:Qe,disabled:x||!p||!w,children:[x?o.jsx(Lr,{className:"animate-spin mr-2"}):o.jsx(zc,{className:"mr-2 h-4 w-4"}),"Form Squad"]})]})]})]})})}),o.jsx(_N,{open:Y,onOpenChange:he,children:o.jsx(Rv,{className:"max-w-md",children:ie&&o.jsxs(o.Fragment,{children:[o.jsxs(Dv,{children:[o.jsx(Mv,{className:"flex items-center gap-3",children:(()=>{const ue=is.find(Ve=>Ve.id===ie.tag)||is[0],be=ue.icon;return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:U("p-2 rounded-lg text-white",ue.gradient||"bg-primary"),children:o.jsx(be,{className:"h-5 w-5"})}),o.jsxs("div",{className:"flex flex-col gap-0.5",children:[o.jsx("span",{children:ie.name}),o.jsxs("span",{className:"text-xs font-normal text-muted-foreground",children:[ie.totalXP.toLocaleString()," XP"]})]})]})})()}),o.jsx(DialogDescription,{children:ie.description})]}),o.jsxs("div",{className:"py-4 space-y-4",children:[o.jsxs("h4",{className:"text-sm font-medium text-muted-foreground uppercase flex items-center justify-between",children:[o.jsx("span",{children:"Squad Members"}),o.jsxs("span",{className:"text-xs",children:[ie.members.length,"/5"]})]}),Q?o.jsx("div",{className:"flex justify-center py-4",children:o.jsx(Lr,{className:"animate-spin h-6 w-6 text-muted-foreground"})}):o.jsx("div",{className:"space-y-3",children:oe.map((ue,be)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs font-bold text-muted-foreground w-4 text-center",children:be+1}),o.jsxs(Yn,{className:"h-8 w-8",children:[o.jsx(Jn,{src:ue.photoUrl}),o.jsx(Zn,{children:ue.displayName[0]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("span",{className:"text-sm font-medium leading-none flex items-center gap-1",children:[ue.displayName,ue.uid===ie.leaderId&&o.jsx(Fc,{className:"h-3 w-3 text-yellow-500"})]}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:["Level ",Math.floor(ue.currentXP/1e3)+1]})]})]}),o.jsxs("div",{className:"text-sm font-bold",children:[ue.currentXP.toLocaleString()," ",o.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"XP"})]})]},ue.uid))})]})]})})})]})}function wG(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:o.jsx(Ae,{className:"w-full max-w-md mx-4",children:o.jsxs(Be,{className:"pt-6",children:[o.jsxs("div",{className:"flex mb-4 gap-2",children:[o.jsx(ir,{className:"h-8 w-8 text-red-500"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),o.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function QR(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}const bG=864e5;function Ov(t){const e=QR(t);return e.setHours(0,0,0,0),e}function SN(t){const e=QR(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function _G(t,e){const n=Ov(t),r=Ov(e),s=+n-SN(n),i=+r-SN(r);return Math.round((s-i)/bG)}function SG(){const{user:t}=ot();return f.useEffect(()=>{if(!t)return;(async()=>{try{const n=ze(Ne,"leaderboards","all-courses","students",t.uid),r=await Qr(n),s=Ov(new Date).getTime();let i=0,a=0,l=[];if(r.exists()){const m=r.data();i=m.loginStreak||0,a=m.lastLoginStreakDate?m.lastLoginStreakDate:0,l=m.badges||[]}if(a){const m=_G(s,a);if(m<=0)return;m===1?i+=1:i=1}else i=1;const c=[...l];let u=!1;i>=5&&!c.includes("5-day-consistent")&&(c.push("5-day-consistent"),u=!0),i>=10&&!c.includes("10-day-consistent")&&(c.push("10-day-consistent"),u=!0),i>=30&&!c.includes("30-day-consistent")&&(c.push("30-day-consistent"),u=!0);const h={loginStreak:i,lastLoginStreakDate:s};u&&(h.badges=c),await gn(n,h,{merge:!0}),console.debug("Streak updated to:",i)}catch(n){console.error("Failed to update streak:",n)}})()},[t]),null}const NG=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function XR({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=f.useState(10),[i,a]=f.useState(0),l=n&&n.length>0?n:NG;return f.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const m=Math.random()*15;return Math.min(h+m,90)})},400),u=setInterval(()=>{a(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),o.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?o.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),o.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),o.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),o.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),o.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:o.jsx(Lr,{className:"h-7 w-7 text-primary animate-spin"})}),o.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:o.jsx(QC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Trace Is Ready"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),o.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(UC,{className:"h-3 w-3"})," Optimizing"]}),o.jsxs("span",{children:[Math.round(r),"%"]})]})]}),o.jsxs("div",{className:"relative overflow-hidden group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),o.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[o.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:o.jsx(Ux,{className:"h-4 w-4 text-primary"})}),o.jsxs("div",{className:"space-y-1 pt-0.5",children:[o.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),o.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const EG=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function TG({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,g;const{user:s,signOut:i}=ot(),{theme:a,toggleTheme:l}=iw(),c=ap(),u=[{id:"dashboard",label:"Dashboard",icon:t3},{id:"courses",label:"Courses",icon:wm},{id:"settings",label:"Settings",icon:Bx}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(w=>w[0]).join("").toUpperCase())||((g=s==null?void 0:s.email)==null?void 0:g[0].toUpperCase())||"U",m=()=>o.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),o.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&o.jsx("button",{className:"ml-auto",onClick:r,children:o.jsx(bs,{className:"w-5 h-5 text-muted-foreground"})})]}),o.jsx("div",{className:"p-4 border-b border-border shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(Yn,{className:"h-8 w-8",children:[o.jsx(Jn,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(Zn,{className:"text-xs",children:h})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(w=>o.jsxs("button",{onClick:()=>{e(w.id),c&&r()},className:U("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===w.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[o.jsx(w.icon,{className:"h-4 w-4"}),w.label]},w.id))}),o.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx(Hx,{className:"w-4 h-4 mr-3"}):o.jsx(bm,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(ae,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[o.jsx(fl,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:U("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:o.jsx(m,{})}),c&&n&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function CG({courses:t}){const[e,n]=f.useState(0),[r,s]=f.useState(0);return f.useEffect(()=>{(async()=>{let a=0,l=0;(await Promise.all(t.map(u=>vr.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?a++:l++)}),n(a),s(l)})()},[t]),o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs(Ae,{className:"border-border shadow-sm",children:[o.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(nt,{className:"text-sm font-medium",children:"Total Courses"}),o.jsx(wm,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(Be,{children:o.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),o.jsxs(Ae,{className:"border-border shadow-sm",children:[o.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(nt,{className:"text-sm font-medium",children:"Attendance Visible"}),o.jsx(KO,{className:"h-4 w-4 text-emerald-500"})]}),o.jsx(Be,{children:o.jsx("div",{className:"text-2xl font-bold",children:e})})]}),o.jsxs(Ae,{className:"border-border shadow-sm",children:[o.jsxs(Xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(nt,{className:"text-sm font-medium",children:"Attendance Hidden"}),o.jsx($y,{className:"h-4 w-4 text-amber-500"})]}),o.jsx(Be,{children:o.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function kG({courses:t,onRefresh:e,isLoading:n}){const[r,s]=f.useState(null);return o.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),o.jsxs(ae,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[o.jsx(ff,{className:U("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),o.jsxs("div",{className:"grid gap-6",children:[t.map(i=>o.jsxs(Ae,{className:"overflow-hidden border-border shadow-sm",children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),o.jsx(ae,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&o.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:o.jsx(jG,{courseId:i.id})})]},i.id)),t.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx("p",{children:"No active courses found where you are a teacher."}),o.jsx(ae,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function jG({courseId:t}){const{toast:e}=lo(),[n,r]=f.useState(!1),[s,i]=f.useState(""),[a,l]=f.useState("A"),[c,u]=f.useState(!1),[h,m]=f.useState(!0);f.useEffect(()=>{let g=!0;return(async()=>{m(!0);const v=await vr.getCourseConfig(t);g&&v&&(r(v.isVisible),i(v.sheetUrl),l(v.emailColumn||"A")),g&&m(!1)})(),()=>{g=!1}},[t]);const p=async()=>{if(!vr.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await vr.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:a.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?o.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[o.jsx(ff,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):o.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(pn,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),o.jsx($n,{checked:n,onCheckedChange:r})]})]}),o.jsxs("div",{className:"grid gap-4 max-w-xl",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(en,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),o.jsx(Ds,{id:`sheet-${t}`,value:s,onChange:g=>i(g.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(en,{htmlFor:`email-col-${t}`,children:"Email Column"}),o.jsx(Ds,{id:`email-col-${t}`,value:a,onChange:g=>l(g.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:o.jsx(ae,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?o.jsxs(o.Fragment,{children:[o.jsx(Fx,{className:"w-4 h-4 mr-2"}),"Saved"]}):o.jsxs(o.Fragment,{children:[o.jsx($x,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function IG(){return o.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),o.jsxs(Ae,{children:[o.jsxs(Xe,{children:[o.jsx(nt,{children:"Notifications"}),o.jsx(_n,{children:"Configure how you receive alerts."})]}),o.jsx(Be,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nh,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(en,{htmlFor:"email-notif",children:"Email Summaries"})]}),o.jsx($n,{id:"email-notif",defaultChecked:!0})]})})]}),o.jsxs(Ae,{children:[o.jsxs(Xe,{children:[o.jsx(nt,{children:"Display"}),o.jsx(_n,{children:"Customize your dashboard appearance."})]}),o.jsx(Be,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(bm,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(en,{children:"Dark Mode"})]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function AG(){const{accessToken:t}=ot(),[e,n]=f.useState("dashboard"),[r,s]=f.useState([]),[i,a]=f.useState(!0),[l,c]=f.useState(!1);async function u(){if(t)try{a(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(m){console.error("Failed to fetch courses",m)}finally{setTimeout(()=>a(!1),1500)}}f.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?o.jsx(XR,{message:"Preparing Teacher Workspace...",tips:EG}):o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(TG,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),o.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[o.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[o.jsx(ae,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:o.jsx(KC,{className:"h-5 w-5"})}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),o.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&o.jsx(CG,{courses:r}),e==="courses"&&o.jsx(kG,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&o.jsx(IG,{})]})]})]})}function PG(){const{signOut:t,signInWithGoogle:e}=ot();return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:o.jsxs(Ae,{className:"max-w-md w-full border-border shadow-lg",children:[o.jsxs(Xe,{className:"text-center space-y-2",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:o.jsx(GO,{className:"w-6 h-6 text-muted-foreground"})}),o.jsx(nt,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),o.jsx(_n,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),o.jsxs(Be,{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),o.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[o.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),o.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx($C,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(wm,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(UC,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(co,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),o.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:o.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),o.jsxs(Ew,{className:"flex flex-col gap-2",children:[o.jsx(ae,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),o.jsxs(ae,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[o.jsx(fl,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function RG(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ae,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(xm,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),o.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),o.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Courses:"})," To display your active classes."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),o.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),o.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),o.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),o.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function DG(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ae,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(xm,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),o.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),o.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Track attendance"})," and academic performance"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),o.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),o.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),o.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),o.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),o.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),o.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),o.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),o.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),o.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),o.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),o.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),o.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),o.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),o.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),o.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"The Service will be uninterrupted or error-free"}),o.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),o.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),o.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),o.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Violates these Terms of Service"}),o.jsx("li",{children:"Is harmful to other users or the Service"}),o.jsx("li",{children:"Exposes us to legal liability"})]}),o.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),o.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),o.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),o.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}const MG=()=>"/";function OG(){const[t,e]=f.useState(!1),n=MG();return o.jsx(rC,{base:n,children:o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(j7,{mobileOpen:t,onMobileClose:()=>e(!1)}),o.jsx(SG,{}),o.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[o.jsx(Z$,{onMobileMenuClick:()=>e(!0)}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:o.jsxs(pM,{children:[o.jsx(dr,{path:"/pipeline",component:CW}),o.jsx(dr,{path:"/",children:()=>{const[,r]=mm();return f.useEffect(()=>{r("/dashboard")},[r]),null}}),o.jsx(dr,{path:"/leaderboard",component:hG}),o.jsx(dr,{path:"/clans",component:xG}),o.jsx(dr,{path:"/timeline",component:aq}),o.jsx(dr,{path:"/dashboard",component:yq}),o.jsx(dr,{path:"/notes",component:vq}),o.jsx(dr,{path:"/attendance",component:pG}),o.jsx(dr,{path:"/settings",component:lG}),o.jsx(dr,{path:"/settings/notifications",component:cG}),o.jsx(dr,{path:"/settings/integrations",component:uG}),o.jsx(dr,{component:wG})]})})]})]})})}function LG(){const{user:t,loading:e,role:n}=ot();return On(),window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy")?o.jsx(RG,{}):window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service")?o.jsx(DG,{}):e?o.jsx(XR,{message:"Authenticating..."}):t?n==="teacher"?o.jsx(AG,{}):n==="no_access"?o.jsx(PG,{}):o.jsx(OG,{}):o.jsx(cB,{})}function VG(){return o.jsx(FM,{client:$M,children:o.jsx(p7,{children:o.jsx(m7,{children:o.jsx(_7,{children:o.jsxs(jm,{children:[o.jsx(X3,{}),o.jsx(LG,{})]})})})})})}qT(document.getElementById("root")).render(o.jsx(VG,{}));
