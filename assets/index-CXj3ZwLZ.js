var xb=t=>{throw TypeError(t)};var jp=(t,e,n)=>e.has(t)||xb("Cannot "+n);var Q=(t,e,n)=>(jp(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?xb("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ne=(t,e,n,r)=>(jp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Gt=(t,e,n)=>(jp(t,e,"access private method"),n);var vd=(t,e,n,r)=>({set _(s){Ne(t,e,s,n)},get _(){return Q(t,e,r)}});function fD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function jN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kN={exports:{}},Wf={},AN={exports:{}},je={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eu=Symbol.for("react.element"),mD=Symbol.for("react.portal"),pD=Symbol.for("react.fragment"),gD=Symbol.for("react.strict_mode"),xD=Symbol.for("react.profiler"),yD=Symbol.for("react.provider"),vD=Symbol.for("react.context"),wD=Symbol.for("react.forward_ref"),bD=Symbol.for("react.suspense"),_D=Symbol.for("react.memo"),SD=Symbol.for("react.lazy"),yb=Symbol.iterator;function ND(t){return t===null||typeof t!="object"?null:(t=yb&&t[yb]||t["@@iterator"],typeof t=="function"?t:null)}var IN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},RN=Object.assign,PN={};function xl(t,e,n){this.props=t,this.context=e,this.refs=PN,this.updater=n||IN}xl.prototype.isReactComponent={};xl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function DN(){}DN.prototype=xl.prototype;function Dy(t,e,n){this.props=t,this.context=e,this.refs=PN,this.updater=n||IN}var Oy=Dy.prototype=new DN;Oy.constructor=Dy;RN(Oy,xl.prototype);Oy.isPureReactComponent=!0;var vb=Array.isArray,ON=Object.prototype.hasOwnProperty,My={current:null},MN={key:!0,ref:!0,__self:!0,__source:!0};function LN(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)ON.call(e,r)&&!MN.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Eu,type:t,key:i,ref:a,props:s,_owner:My.current}}function ED(t,e){return{$$typeof:Eu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ly(t){return typeof t=="object"&&t!==null&&t.$$typeof===Eu}function TD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wb=/\/+/g;function kp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TD(""+t.key):e.toString(36)}function nh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Eu:case mD:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+kp(a,0):r,vb(s)?(n="",t!=null&&(n=t.replace(wb,"$&/")+"/"),nh(s,e,n,"",function(u){return u})):s!=null&&(Ly(s)&&(s=ED(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(wb,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",vb(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+kp(i,l);a+=nh(i,e,n,c,s)}else if(c=ND(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+kp(i,l++),a+=nh(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function wd(t,e,n){if(t==null)return t;var r=[],s=0;return nh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function CD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hn={current:null},rh={transition:null},jD={ReactCurrentDispatcher:hn,ReactCurrentBatchConfig:rh,ReactCurrentOwner:My};function VN(){throw Error("act(...) is not supported in production builds of React.")}je.Children={map:wd,forEach:function(t,e,n){wd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wd(t,function(){e++}),e},toArray:function(t){return wd(t,function(e){return e})||[]},only:function(t){if(!Ly(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};je.Component=xl;je.Fragment=pD;je.Profiler=xD;je.PureComponent=Dy;je.StrictMode=gD;je.Suspense=bD;je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jD;je.act=VN;je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=RN({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=My.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)ON.call(e,c)&&!MN.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Eu,type:t.type,key:s,ref:i,props:r,_owner:a}};je.createContext=function(t){return t={$$typeof:vD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yD,_context:t},t.Consumer=t};je.createElement=LN;je.createFactory=function(t){var e=LN.bind(null,t);return e.type=t,e};je.createRef=function(){return{current:null}};je.forwardRef=function(t){return{$$typeof:wD,render:t}};je.isValidElement=Ly;je.lazy=function(t){return{$$typeof:SD,_payload:{_status:-1,_result:t},_init:CD}};je.memo=function(t,e){return{$$typeof:_D,type:t,compare:e===void 0?null:e}};je.startTransition=function(t){var e=rh.transition;rh.transition={};try{t()}finally{rh.transition=e}};je.unstable_act=VN;je.useCallback=function(t,e){return hn.current.useCallback(t,e)};je.useContext=function(t){return hn.current.useContext(t)};je.useDebugValue=function(){};je.useDeferredValue=function(t){return hn.current.useDeferredValue(t)};je.useEffect=function(t,e){return hn.current.useEffect(t,e)};je.useId=function(){return hn.current.useId()};je.useImperativeHandle=function(t,e,n){return hn.current.useImperativeHandle(t,e,n)};je.useInsertionEffect=function(t,e){return hn.current.useInsertionEffect(t,e)};je.useLayoutEffect=function(t,e){return hn.current.useLayoutEffect(t,e)};je.useMemo=function(t,e){return hn.current.useMemo(t,e)};je.useReducer=function(t,e,n){return hn.current.useReducer(t,e,n)};je.useRef=function(t){return hn.current.useRef(t)};je.useState=function(t){return hn.current.useState(t)};je.useSyncExternalStore=function(t,e,n){return hn.current.useSyncExternalStore(t,e,n)};je.useTransition=function(){return hn.current.useTransition()};je.version="18.3.1";AN.exports=je;var m=AN.exports;const Te=jN(m),FN=fD({__proto__:null,default:Te},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kD=m,AD=Symbol.for("react.element"),ID=Symbol.for("react.fragment"),RD=Object.prototype.hasOwnProperty,PD=kD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DD={key:!0,ref:!0,__self:!0,__source:!0};function zN(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)RD.call(e,r)&&!DD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:AD,type:t,key:i,ref:a,props:s,_owner:PD.current}}Wf.Fragment=ID;Wf.jsx=zN;Wf.jsxs=zN;kN.exports=Wf;var o=kN.exports,UN={exports:{}},qn={},$N={exports:{}},BN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,z){var K=V.length;V.push(z);e:for(;0<K;){var U=K-1>>>1,W=V[U];if(0<s(W,z))V[U]=z,V[K]=W,K=U;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var z=V[0],K=V.pop();if(K!==z){V[0]=K;e:for(var U=0,W=V.length,J=W>>>1;U<J;){var ne=2*(U+1)-1,te=V[ne],se=ne+1,M=V[se];if(0>s(te,K))se<W&&0>s(M,te)?(V[U]=M,V[se]=K,U=se):(V[U]=te,V[ne]=K,U=ne);else if(se<W&&0>s(M,K))V[U]=M,V[se]=K,U=se;else break e}}return z}function s(V,z){var K=V.sortIndex-z.sortIndex;return K!==0?K:V.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,f=null,p=3,g=!1,x=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(V){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=V)r(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=n(u)}}function j(V){if(y=!1,E(V),!x)if(n(c)!==null)x=!0,ee(P);else{var z=n(u);z!==null&&re(j,z.startTime-V)}}function P(V,z){x=!1,y&&(y=!1,_(N),N=-1),g=!0;var K=p;try{for(E(z),f=n(c);f!==null&&(!(f.expirationTime>z)||V&&!A());){var U=f.callback;if(typeof U=="function"){f.callback=null,p=f.priorityLevel;var W=U(f.expirationTime<=z);z=t.unstable_now(),typeof W=="function"?f.callback=W:f===n(c)&&r(c),E(z)}else r(c);f=n(c)}if(f!==null)var J=!0;else{var ne=n(u);ne!==null&&re(j,ne.startTime-z),J=!1}return J}finally{f=null,p=K,g=!1}}var O=!1,S=null,N=-1,C=5,k=-1;function A(){return!(t.unstable_now()-k<C)}function D(){if(S!==null){var V=t.unstable_now();k=V;var z=!0;try{z=S(!0,V)}finally{z?R():(O=!1,S=null)}}else O=!1}var R;if(typeof w=="function")R=function(){w(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,q=B.port2;B.port1.onmessage=D,R=function(){q.postMessage(null)}}else R=function(){b(D,0)};function ee(V){S=V,O||(O=!0,R())}function re(V,z){N=b(function(){V(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){x||g||(x=!0,ee(P))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(p){case 1:case 2:case 3:var z=3;break;default:z=p}var K=p;p=z;try{return V()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,z){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var K=p;p=V;try{return z()}finally{p=K}},t.unstable_scheduleCallback=function(V,z,K){var U=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?U+K:U):K=U,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=K+W,V={id:h++,callback:z,priorityLevel:V,startTime:K,expirationTime:W,sortIndex:-1},K>U?(V.sortIndex=K,e(u,V),n(c)===null&&V===n(u)&&(y?(_(N),N=-1):y=!0,re(j,K-U))):(V.sortIndex=W,e(c,V),x||g||(x=!0,ee(P))),V},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(V){var z=p;return function(){var K=p;p=z;try{return V.apply(this,arguments)}finally{p=K}}}})(BN);$N.exports=BN;var OD=$N.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MD=m,Wn=OD;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WN=new Set,$c={};function qo(t,e){Ka(t,e),Ka(t+"Capture",e)}function Ka(t,e){for($c[t]=e,t=0;t<e.length;t++)WN.add(e[t])}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Og=Object.prototype.hasOwnProperty,LD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bb={},_b={};function VD(t){return Og.call(_b,t)?!0:Og.call(bb,t)?!1:LD.test(t)?_b[t]=!0:(bb[t]=!0,!1)}function FD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zD(t,e,n,r){if(e===null||typeof e>"u"||FD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function fn(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ht[t]=new fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ht[e]=new fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ht[t]=new fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ht[t]=new fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ht[t]=new fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ht[t]=new fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ht[t]=new fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ht[t]=new fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ht[t]=new fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Vy=/[\-:]([a-z])/g;function Fy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Vy,Fy);Ht[e]=new fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Vy,Fy);Ht[e]=new fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Vy,Fy);Ht[e]=new fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ht[t]=new fn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ht.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ht[t]=new fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zy(t,e,n,r){var s=Ht.hasOwnProperty(e)?Ht[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zD(e,n,s,r)&&(n=null),r||s===null?VD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vs=MD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bd=Symbol.for("react.element"),la=Symbol.for("react.portal"),ca=Symbol.for("react.fragment"),Uy=Symbol.for("react.strict_mode"),Mg=Symbol.for("react.profiler"),HN=Symbol.for("react.provider"),qN=Symbol.for("react.context"),$y=Symbol.for("react.forward_ref"),Lg=Symbol.for("react.suspense"),Vg=Symbol.for("react.suspense_list"),By=Symbol.for("react.memo"),ti=Symbol.for("react.lazy"),GN=Symbol.for("react.offscreen"),Sb=Symbol.iterator;function ec(t){return t===null||typeof t!="object"?null:(t=Sb&&t[Sb]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,Ap;function uc(t){if(Ap===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ap=e&&e[1]||""}return`
`+Ap+t}var Ip=!1;function Rp(t,e){if(!t||Ip)return"";Ip=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{Ip=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?uc(t):""}function UD(t){switch(t.tag){case 5:return uc(t.type);case 16:return uc("Lazy");case 13:return uc("Suspense");case 19:return uc("SuspenseList");case 0:case 2:case 15:return t=Rp(t.type,!1),t;case 11:return t=Rp(t.type.render,!1),t;case 1:return t=Rp(t.type,!0),t;default:return""}}function Fg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ca:return"Fragment";case la:return"Portal";case Mg:return"Profiler";case Uy:return"StrictMode";case Lg:return"Suspense";case Vg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qN:return(t.displayName||"Context")+".Consumer";case HN:return(t._context.displayName||"Context")+".Provider";case $y:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case By:return e=t.displayName||null,e!==null?e:Fg(t.type)||"Memo";case ti:e=t._payload,t=t._init;try{return Fg(t(e))}catch{}}return null}function $D(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fg(e);case 8:return e===Uy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function KN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BD(t){var e=KN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _d(t){t._valueTracker||(t._valueTracker=BD(t))}function QN(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=KN(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zg(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Nb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ri(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function XN(t,e){e=e.checked,e!=null&&zy(t,"checked",e,!1)}function Ug(t,e){XN(t,e);var n=Ri(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$g(t,e.type,n):e.hasOwnProperty("defaultValue")&&$g(t,e.type,Ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $g(t,e,n){(e!=="number"||Rh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dc=Array.isArray;function _a(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ri(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(dc(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ri(n)}}function YN(t,e){var n=Ri(e.value),r=Ri(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function JN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?JN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sd,ZN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sd=Sd||document.createElement("div"),Sd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Bc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WD=["Webkit","ms","Moz","O"];Object.keys(vc).forEach(function(t){WD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vc[e]=vc[t]})});function eE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vc.hasOwnProperty(t)&&vc[t]?(""+e).trim():e+"px"}function tE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=eE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var HD=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hg(t,e){if(e){if(HD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function qg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gg=null;function Wy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kg=null,Sa=null,Na=null;function jb(t){if(t=ju(t)){if(typeof Kg!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Qf(e),Kg(t.stateNode,t.type,e))}}function nE(t){Sa?Na?Na.push(t):Na=[t]:Sa=t}function rE(){if(Sa){var t=Sa,e=Na;if(Na=Sa=null,jb(t),e)for(t=0;t<e.length;t++)jb(e[t])}}function sE(t,e){return t(e)}function iE(){}var Pp=!1;function oE(t,e,n){if(Pp)return t(e,n);Pp=!0;try{return sE(t,e,n)}finally{Pp=!1,(Sa!==null||Na!==null)&&(iE(),rE())}}function Wc(t,e){var n=t.stateNode;if(n===null)return null;var r=Qf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var Qg=!1;if(Ts)try{var tc={};Object.defineProperty(tc,"passive",{get:function(){Qg=!0}}),window.addEventListener("test",tc,tc),window.removeEventListener("test",tc,tc)}catch{Qg=!1}function qD(t,e,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var wc=!1,Ph=null,Dh=!1,Xg=null,GD={onError:function(t){wc=!0,Ph=t}};function KD(t,e,n,r,s,i,a,l,c){wc=!1,Ph=null,qD.apply(GD,arguments)}function QD(t,e,n,r,s,i,a,l,c){if(KD.apply(this,arguments),wc){if(wc){var u=Ph;wc=!1,Ph=null}else throw Error(Z(198));Dh||(Dh=!0,Xg=u)}}function Go(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function aE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kb(t){if(Go(t)!==t)throw Error(Z(188))}function XD(t){var e=t.alternate;if(!e){if(e=Go(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return kb(s),t;if(i===r)return kb(s),e;i=i.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function lE(t){return t=XD(t),t!==null?cE(t):null}function cE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cE(t);if(e!==null)return e;t=t.sibling}return null}var uE=Wn.unstable_scheduleCallback,Ab=Wn.unstable_cancelCallback,YD=Wn.unstable_shouldYield,JD=Wn.unstable_requestPaint,xt=Wn.unstable_now,ZD=Wn.unstable_getCurrentPriorityLevel,Hy=Wn.unstable_ImmediatePriority,dE=Wn.unstable_UserBlockingPriority,Oh=Wn.unstable_NormalPriority,e4=Wn.unstable_LowPriority,hE=Wn.unstable_IdlePriority,Hf=null,Yr=null;function t4(t){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(Hf,t,void 0,(t.current.flags&128)===128)}catch{}}var Nr=Math.clz32?Math.clz32:s4,n4=Math.log,r4=Math.LN2;function s4(t){return t>>>=0,t===0?32:31-(n4(t)/r4|0)|0}var Nd=64,Ed=4194304;function hc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=hc(l):(i&=a,i!==0&&(r=hc(i)))}else a=n&~s,a!==0?r=hc(a):i!==0&&(r=hc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nr(e),s=1<<n,r|=t[n],e&=~s;return r}function i4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Nr(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=i4(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Yg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function fE(){var t=Nd;return Nd<<=1,!(Nd&4194240)&&(Nd=64),t}function Dp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nr(e),t[e]=n}function a4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Nr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function qy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var $e=0;function mE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var pE,Gy,gE,xE,yE,Jg=!1,Td=[],xi=null,yi=null,vi=null,Hc=new Map,qc=new Map,si=[],l4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ib(t,e){switch(t){case"focusin":case"focusout":xi=null;break;case"dragenter":case"dragleave":yi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":Hc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qc.delete(e.pointerId)}}function nc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ju(e),e!==null&&Gy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function c4(t,e,n,r,s){switch(e){case"focusin":return xi=nc(xi,t,e,n,r,s),!0;case"dragenter":return yi=nc(yi,t,e,n,r,s),!0;case"mouseover":return vi=nc(vi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Hc.set(i,nc(Hc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qc.set(i,nc(qc.get(i)||null,t,e,n,r,s)),!0}return!1}function vE(t){var e=mo(t.target);if(e!==null){var n=Go(e);if(n!==null){if(e=n.tag,e===13){if(e=aE(n),e!==null){t.blockedOn=e,yE(t.priority,function(){gE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gg=r,n.target.dispatchEvent(r),Gg=null}else return e=ju(n),e!==null&&Gy(e),t.blockedOn=n,!1;e.shift()}return!0}function Rb(t,e,n){sh(t)&&n.delete(e)}function u4(){Jg=!1,xi!==null&&sh(xi)&&(xi=null),yi!==null&&sh(yi)&&(yi=null),vi!==null&&sh(vi)&&(vi=null),Hc.forEach(Rb),qc.forEach(Rb)}function rc(t,e){t.blockedOn===e&&(t.blockedOn=null,Jg||(Jg=!0,Wn.unstable_scheduleCallback(Wn.unstable_NormalPriority,u4)))}function Gc(t){function e(s){return rc(s,t)}if(0<Td.length){rc(Td[0],t);for(var n=1;n<Td.length;n++){var r=Td[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xi!==null&&rc(xi,t),yi!==null&&rc(yi,t),vi!==null&&rc(vi,t),Hc.forEach(e),qc.forEach(e),n=0;n<si.length;n++)r=si[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<si.length&&(n=si[0],n.blockedOn===null);)vE(n),n.blockedOn===null&&si.shift()}var Ea=Vs.ReactCurrentBatchConfig,Lh=!0;function d4(t,e,n,r){var s=$e,i=Ea.transition;Ea.transition=null;try{$e=1,Ky(t,e,n,r)}finally{$e=s,Ea.transition=i}}function h4(t,e,n,r){var s=$e,i=Ea.transition;Ea.transition=null;try{$e=4,Ky(t,e,n,r)}finally{$e=s,Ea.transition=i}}function Ky(t,e,n,r){if(Lh){var s=Zg(t,e,n,r);if(s===null)Wp(t,e,r,Vh,n),Ib(t,r);else if(c4(s,t,e,n,r))r.stopPropagation();else if(Ib(t,r),e&4&&-1<l4.indexOf(t)){for(;s!==null;){var i=ju(s);if(i!==null&&pE(i),i=Zg(t,e,n,r),i===null&&Wp(t,e,r,Vh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wp(t,e,r,null,n)}}var Vh=null;function Zg(t,e,n,r){if(Vh=null,t=Wy(r),t=mo(t),t!==null)if(e=Go(t),e===null)t=null;else if(n=e.tag,n===13){if(t=aE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vh=t,null}function wE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZD()){case Hy:return 1;case dE:return 4;case Oh:case e4:return 16;case hE:return 536870912;default:return 16}default:return 16}}var mi=null,Qy=null,ih=null;function bE(){if(ih)return ih;var t,e=Qy,n=e.length,r,s="value"in mi?mi.value:mi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return ih=s.slice(t,1<r?1-r:void 0)}function oh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cd(){return!0}function Pb(){return!1}function Gn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cd:Pb,this.isPropagationStopped=Pb,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cd)},persist:function(){},isPersistent:Cd}),e}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xy=Gn(yl),Cu=ct({},yl,{view:0,detail:0}),f4=Gn(Cu),Op,Mp,sc,qf=ct({},Cu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sc&&(sc&&t.type==="mousemove"?(Op=t.screenX-sc.screenX,Mp=t.screenY-sc.screenY):Mp=Op=0,sc=t),Op)},movementY:function(t){return"movementY"in t?t.movementY:Mp}}),Db=Gn(qf),m4=ct({},qf,{dataTransfer:0}),p4=Gn(m4),g4=ct({},Cu,{relatedTarget:0}),Lp=Gn(g4),x4=ct({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),y4=Gn(x4),v4=ct({},yl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),w4=Gn(v4),b4=ct({},yl,{data:0}),Ob=Gn(b4),_4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=N4[t])?!!e[t]:!1}function Yy(){return E4}var T4=ct({},Cu,{key:function(t){if(t.key){var e=_4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=oh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?S4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yy,charCode:function(t){return t.type==="keypress"?oh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?oh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),C4=Gn(T4),j4=ct({},qf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mb=Gn(j4),k4=ct({},Cu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yy}),A4=Gn(k4),I4=ct({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),R4=Gn(I4),P4=ct({},qf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),D4=Gn(P4),O4=[9,13,27,32],Jy=Ts&&"CompositionEvent"in window,bc=null;Ts&&"documentMode"in document&&(bc=document.documentMode);var M4=Ts&&"TextEvent"in window&&!bc,_E=Ts&&(!Jy||bc&&8<bc&&11>=bc),Lb=" ",Vb=!1;function SE(t,e){switch(t){case"keyup":return O4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ua=!1;function L4(t,e){switch(t){case"compositionend":return NE(e);case"keypress":return e.which!==32?null:(Vb=!0,Lb);case"textInput":return t=e.data,t===Lb&&Vb?null:t;default:return null}}function V4(t,e){if(ua)return t==="compositionend"||!Jy&&SE(t,e)?(t=bE(),ih=Qy=mi=null,ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _E&&e.locale!=="ko"?null:e.data;default:return null}}var F4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!F4[t.type]:e==="textarea"}function EE(t,e,n,r){nE(r),e=Fh(e,"onChange"),0<e.length&&(n=new Xy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var _c=null,Kc=null;function z4(t){ME(t,0)}function Gf(t){var e=fa(t);if(QN(e))return t}function U4(t,e){if(t==="change")return e}var TE=!1;if(Ts){var Vp;if(Ts){var Fp="oninput"in document;if(!Fp){var zb=document.createElement("div");zb.setAttribute("oninput","return;"),Fp=typeof zb.oninput=="function"}Vp=Fp}else Vp=!1;TE=Vp&&(!document.documentMode||9<document.documentMode)}function Ub(){_c&&(_c.detachEvent("onpropertychange",CE),Kc=_c=null)}function CE(t){if(t.propertyName==="value"&&Gf(Kc)){var e=[];EE(e,Kc,t,Wy(t)),oE(z4,e)}}function $4(t,e,n){t==="focusin"?(Ub(),_c=e,Kc=n,_c.attachEvent("onpropertychange",CE)):t==="focusout"&&Ub()}function B4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gf(Kc)}function W4(t,e){if(t==="click")return Gf(e)}function H4(t,e){if(t==="input"||t==="change")return Gf(e)}function q4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ar=typeof Object.is=="function"?Object.is:q4;function Qc(t,e){if(Ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Og.call(e,s)||!Ar(t[s],e[s]))return!1}return!0}function $b(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Bb(t,e){var n=$b(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$b(n)}}function jE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?jE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kE(){for(var t=window,e=Rh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rh(t.document)}return e}function Zy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function G4(t){var e=kE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&jE(n.ownerDocument.documentElement,n)){if(r!==null&&Zy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Bb(n,i);var a=Bb(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var K4=Ts&&"documentMode"in document&&11>=document.documentMode,da=null,ex=null,Sc=null,tx=!1;function Wb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tx||da==null||da!==Rh(r)||(r=da,"selectionStart"in r&&Zy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Sc&&Qc(Sc,r)||(Sc=r,r=Fh(ex,"onSelect"),0<r.length&&(e=new Xy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=da)))}function jd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ha={animationend:jd("Animation","AnimationEnd"),animationiteration:jd("Animation","AnimationIteration"),animationstart:jd("Animation","AnimationStart"),transitionend:jd("Transition","TransitionEnd")},zp={},AE={};Ts&&(AE=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function Kf(t){if(zp[t])return zp[t];if(!ha[t])return t;var e=ha[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in AE)return zp[t]=e[n];return t}var IE=Kf("animationend"),RE=Kf("animationiteration"),PE=Kf("animationstart"),DE=Kf("transitionend"),OE=new Map,Hb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hi(t,e){OE.set(t,e),qo(e,[t])}for(var Up=0;Up<Hb.length;Up++){var $p=Hb[Up],Q4=$p.toLowerCase(),X4=$p[0].toUpperCase()+$p.slice(1);Hi(Q4,"on"+X4)}Hi(IE,"onAnimationEnd");Hi(RE,"onAnimationIteration");Hi(PE,"onAnimationStart");Hi("dblclick","onDoubleClick");Hi("focusin","onFocus");Hi("focusout","onBlur");Hi(DE,"onTransitionEnd");Ka("onMouseEnter",["mouseout","mouseover"]);Ka("onMouseLeave",["mouseout","mouseover"]);Ka("onPointerEnter",["pointerout","pointerover"]);Ka("onPointerLeave",["pointerout","pointerover"]);qo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qo("onBeforeInput",["compositionend","keypress","textInput","paste"]);qo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y4=new Set("cancel close invalid load scroll toggle".split(" ").concat(fc));function qb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QD(r,e,void 0,t),t.currentTarget=null}function ME(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;qb(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;qb(s,l,u),i=c}}}if(Dh)throw t=Xg,Dh=!1,Xg=null,t}function et(t,e){var n=e[ox];n===void 0&&(n=e[ox]=new Set);var r=t+"__bubble";n.has(r)||(LE(e,t,2,!1),n.add(r))}function Bp(t,e,n){var r=0;e&&(r|=4),LE(n,t,r,e)}var kd="_reactListening"+Math.random().toString(36).slice(2);function Xc(t){if(!t[kd]){t[kd]=!0,WN.forEach(function(n){n!=="selectionchange"&&(Y4.has(n)||Bp(n,!1,t),Bp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kd]||(e[kd]=!0,Bp("selectionchange",!1,e))}}function LE(t,e,n,r){switch(wE(e)){case 1:var s=d4;break;case 4:s=h4;break;default:s=Ky}n=s.bind(null,e,n,t),s=void 0,!Qg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=mo(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}oE(function(){var u=i,h=Wy(n),f=[];e:{var p=OE.get(t);if(p!==void 0){var g=Xy,x=t;switch(t){case"keypress":if(oh(n)===0)break e;case"keydown":case"keyup":g=C4;break;case"focusin":x="focus",g=Lp;break;case"focusout":x="blur",g=Lp;break;case"beforeblur":case"afterblur":g=Lp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Db;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=p4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=A4;break;case IE:case RE:case PE:g=y4;break;case DE:g=R4;break;case"scroll":g=f4;break;case"wheel":g=D4;break;case"copy":case"cut":case"paste":g=w4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Mb}var y=(e&4)!==0,b=!y&&t==="scroll",_=y?p!==null?p+"Capture":null:p;y=[];for(var w=u,E;w!==null;){E=w;var j=E.stateNode;if(E.tag===5&&j!==null&&(E=j,_!==null&&(j=Wc(w,_),j!=null&&y.push(Yc(w,j,E)))),b)break;w=w.return}0<y.length&&(p=new g(p,x,null,n,h),f.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Gg&&(x=n.relatedTarget||n.fromElement)&&(mo(x)||x[Cs]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=u,x=x?mo(x):null,x!==null&&(b=Go(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(y=Db,j="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=Mb,j="onPointerLeave",_="onPointerEnter",w="pointer"),b=g==null?p:fa(g),E=x==null?p:fa(x),p=new y(j,w+"leave",g,n,h),p.target=b,p.relatedTarget=E,j=null,mo(h)===u&&(y=new y(_,w+"enter",x,n,h),y.target=E,y.relatedTarget=b,j=y),b=j,g&&x)t:{for(y=g,_=x,w=0,E=y;E;E=ea(E))w++;for(E=0,j=_;j;j=ea(j))E++;for(;0<w-E;)y=ea(y),w--;for(;0<E-w;)_=ea(_),E--;for(;w--;){if(y===_||_!==null&&y===_.alternate)break t;y=ea(y),_=ea(_)}y=null}else y=null;g!==null&&Gb(f,p,g,y,!1),x!==null&&b!==null&&Gb(f,b,x,y,!0)}}e:{if(p=u?fa(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var P=U4;else if(Fb(p))if(TE)P=H4;else{P=B4;var O=$4}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(P=W4);if(P&&(P=P(t,u))){EE(f,P,n,h);break e}O&&O(t,p,u),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&$g(p,"number",p.value)}switch(O=u?fa(u):window,t){case"focusin":(Fb(O)||O.contentEditable==="true")&&(da=O,ex=u,Sc=null);break;case"focusout":Sc=ex=da=null;break;case"mousedown":tx=!0;break;case"contextmenu":case"mouseup":case"dragend":tx=!1,Wb(f,n,h);break;case"selectionchange":if(K4)break;case"keydown":case"keyup":Wb(f,n,h)}var S;if(Jy)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ua?SE(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(_E&&n.locale!=="ko"&&(ua||N!=="onCompositionStart"?N==="onCompositionEnd"&&ua&&(S=bE()):(mi=h,Qy="value"in mi?mi.value:mi.textContent,ua=!0)),O=Fh(u,N),0<O.length&&(N=new Ob(N,t,null,n,h),f.push({event:N,listeners:O}),S?N.data=S:(S=NE(n),S!==null&&(N.data=S)))),(S=M4?L4(t,n):V4(t,n))&&(u=Fh(u,"onBeforeInput"),0<u.length&&(h=new Ob("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=S))}ME(f,e)})}function Yc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wc(t,n),i!=null&&r.unshift(Yc(t,i,s)),i=Wc(t,e),i!=null&&r.push(Yc(t,i,s))),t=t.return}return r}function ea(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gb(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Wc(n,i),c!=null&&a.unshift(Yc(n,c,l))):s||(c=Wc(n,i),c!=null&&a.push(Yc(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var J4=/\r\n?/g,Z4=/\u0000|\uFFFD/g;function Kb(t){return(typeof t=="string"?t:""+t).replace(J4,`
`).replace(Z4,"")}function Ad(t,e,n){if(e=Kb(e),Kb(t)!==e&&n)throw Error(Z(425))}function zh(){}var nx=null,rx=null;function sx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ix=typeof setTimeout=="function"?setTimeout:void 0,e5=typeof clearTimeout=="function"?clearTimeout:void 0,Qb=typeof Promise=="function"?Promise:void 0,t5=typeof queueMicrotask=="function"?queueMicrotask:typeof Qb<"u"?function(t){return Qb.resolve(null).then(t).catch(n5)}:ix;function n5(t){setTimeout(function(){throw t})}function Hp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Gc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Gc(e)}function wi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Xb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var vl=Math.random().toString(36).slice(2),Qr="__reactFiber$"+vl,Jc="__reactProps$"+vl,Cs="__reactContainer$"+vl,ox="__reactEvents$"+vl,r5="__reactListeners$"+vl,s5="__reactHandles$"+vl;function mo(t){var e=t[Qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cs]||n[Qr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Xb(t);t!==null;){if(n=t[Qr])return n;t=Xb(t)}return e}t=n,n=t.parentNode}return null}function ju(t){return t=t[Qr]||t[Cs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Qf(t){return t[Jc]||null}var ax=[],ma=-1;function qi(t){return{current:t}}function nt(t){0>ma||(t.current=ax[ma],ax[ma]=null,ma--)}function Ye(t,e){ma++,ax[ma]=t.current,t.current=e}var Pi={},nn=qi(Pi),Nn=qi(!1),ko=Pi;function Qa(t,e){var n=t.type.contextTypes;if(!n)return Pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function En(t){return t=t.childContextTypes,t!=null}function Uh(){nt(Nn),nt(nn)}function Yb(t,e,n){if(nn.current!==Pi)throw Error(Z(168));Ye(nn,e),Ye(Nn,n)}function VE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,$D(t)||"Unknown",s));return ct({},n,r)}function $h(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pi,ko=nn.current,Ye(nn,t),Ye(Nn,Nn.current),!0}function Jb(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=VE(t,e,ko),r.__reactInternalMemoizedMergedChildContext=t,nt(Nn),nt(nn),Ye(nn,t)):nt(Nn),Ye(Nn,n)}var ys=null,Xf=!1,qp=!1;function FE(t){ys===null?ys=[t]:ys.push(t)}function i5(t){Xf=!0,FE(t)}function Gi(){if(!qp&&ys!==null){qp=!0;var t=0,e=$e;try{var n=ys;for($e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ys=null,Xf=!1}catch(s){throw ys!==null&&(ys=ys.slice(t+1)),uE(Hy,Gi),s}finally{$e=e,qp=!1}}return null}var pa=[],ga=0,Bh=null,Wh=0,Jn=[],Zn=0,Ao=null,vs=1,ws="";function uo(t,e){pa[ga++]=Wh,pa[ga++]=Bh,Bh=t,Wh=e}function zE(t,e,n){Jn[Zn++]=vs,Jn[Zn++]=ws,Jn[Zn++]=Ao,Ao=t;var r=vs;t=ws;var s=32-Nr(r)-1;r&=~(1<<s),n+=1;var i=32-Nr(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,vs=1<<32-Nr(e)+s|n<<s|r,ws=i+t}else vs=1<<i|n<<s|r,ws=t}function ev(t){t.return!==null&&(uo(t,1),zE(t,1,0))}function tv(t){for(;t===Bh;)Bh=pa[--ga],pa[ga]=null,Wh=pa[--ga],pa[ga]=null;for(;t===Ao;)Ao=Jn[--Zn],Jn[Zn]=null,ws=Jn[--Zn],Jn[Zn]=null,vs=Jn[--Zn],Jn[Zn]=null}var $n=null,Fn=null,st=!1,yr=null;function UE(t,e){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$n=t,Fn=wi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$n=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ao!==null?{id:vs,overflow:ws}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$n=t,Fn=null,!0):!1;default:return!1}}function lx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cx(t){if(st){var e=Fn;if(e){var n=e;if(!Zb(t,e)){if(lx(t))throw Error(Z(418));e=wi(n.nextSibling);var r=$n;e&&Zb(t,e)?UE(r,n):(t.flags=t.flags&-4097|2,st=!1,$n=t)}}else{if(lx(t))throw Error(Z(418));t.flags=t.flags&-4097|2,st=!1,$n=t}}}function e1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function Id(t){if(t!==$n)return!1;if(!st)return e1(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sx(t.type,t.memoizedProps)),e&&(e=Fn)){if(lx(t))throw $E(),Error(Z(418));for(;e;)UE(t,e),e=wi(e.nextSibling)}if(e1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Fn=wi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=$n?wi(t.stateNode.nextSibling):null;return!0}function $E(){for(var t=Fn;t;)t=wi(t.nextSibling)}function Xa(){Fn=$n=null,st=!1}function nv(t){yr===null?yr=[t]:yr.push(t)}var o5=Vs.ReactCurrentBatchConfig;function ic(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function Rd(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function t1(t){var e=t._init;return e(t._payload)}function BE(t){function e(_,w){if(t){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Ni(_,w),_.index=0,_.sibling=null,_}function i(_,w,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,E,j){return w===null||w.tag!==6?(w=Zp(E,_.mode,j),w.return=_,w):(w=s(w,E),w.return=_,w)}function c(_,w,E,j){var P=E.type;return P===ca?h(_,w,E.props.children,j,E.key):w!==null&&(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ti&&t1(P)===w.type)?(j=s(w,E.props),j.ref=ic(_,w,E),j.return=_,j):(j=fh(E.type,E.key,E.props,null,_.mode,j),j.ref=ic(_,w,E),j.return=_,j)}function u(_,w,E,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=eg(E,_.mode,j),w.return=_,w):(w=s(w,E.children||[]),w.return=_,w)}function h(_,w,E,j,P){return w===null||w.tag!==7?(w=No(E,_.mode,j,P),w.return=_,w):(w=s(w,E),w.return=_,w)}function f(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Zp(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case bd:return E=fh(w.type,w.key,w.props,null,_.mode,E),E.ref=ic(_,null,w),E.return=_,E;case la:return w=eg(w,_.mode,E),w.return=_,w;case ti:var j=w._init;return f(_,j(w._payload),E)}if(dc(w)||ec(w))return w=No(w,_.mode,E,null),w.return=_,w;Rd(_,w)}return null}function p(_,w,E,j){var P=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return P!==null?null:l(_,w,""+E,j);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case bd:return E.key===P?c(_,w,E,j):null;case la:return E.key===P?u(_,w,E,j):null;case ti:return P=E._init,p(_,w,P(E._payload),j)}if(dc(E)||ec(E))return P!==null?null:h(_,w,E,j,null);Rd(_,E)}return null}function g(_,w,E,j,P){if(typeof j=="string"&&j!==""||typeof j=="number")return _=_.get(E)||null,l(w,_,""+j,P);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case bd:return _=_.get(j.key===null?E:j.key)||null,c(w,_,j,P);case la:return _=_.get(j.key===null?E:j.key)||null,u(w,_,j,P);case ti:var O=j._init;return g(_,w,E,O(j._payload),P)}if(dc(j)||ec(j))return _=_.get(E)||null,h(w,_,j,P,null);Rd(w,j)}return null}function x(_,w,E,j){for(var P=null,O=null,S=w,N=w=0,C=null;S!==null&&N<E.length;N++){S.index>N?(C=S,S=null):C=S.sibling;var k=p(_,S,E[N],j);if(k===null){S===null&&(S=C);break}t&&S&&k.alternate===null&&e(_,S),w=i(k,w,N),O===null?P=k:O.sibling=k,O=k,S=C}if(N===E.length)return n(_,S),st&&uo(_,N),P;if(S===null){for(;N<E.length;N++)S=f(_,E[N],j),S!==null&&(w=i(S,w,N),O===null?P=S:O.sibling=S,O=S);return st&&uo(_,N),P}for(S=r(_,S);N<E.length;N++)C=g(S,_,N,E[N],j),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?N:C.key),w=i(C,w,N),O===null?P=C:O.sibling=C,O=C);return t&&S.forEach(function(A){return e(_,A)}),st&&uo(_,N),P}function y(_,w,E,j){var P=ec(E);if(typeof P!="function")throw Error(Z(150));if(E=P.call(E),E==null)throw Error(Z(151));for(var O=P=null,S=w,N=w=0,C=null,k=E.next();S!==null&&!k.done;N++,k=E.next()){S.index>N?(C=S,S=null):C=S.sibling;var A=p(_,S,k.value,j);if(A===null){S===null&&(S=C);break}t&&S&&A.alternate===null&&e(_,S),w=i(A,w,N),O===null?P=A:O.sibling=A,O=A,S=C}if(k.done)return n(_,S),st&&uo(_,N),P;if(S===null){for(;!k.done;N++,k=E.next())k=f(_,k.value,j),k!==null&&(w=i(k,w,N),O===null?P=k:O.sibling=k,O=k);return st&&uo(_,N),P}for(S=r(_,S);!k.done;N++,k=E.next())k=g(S,_,N,k.value,j),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?N:k.key),w=i(k,w,N),O===null?P=k:O.sibling=k,O=k);return t&&S.forEach(function(D){return e(_,D)}),st&&uo(_,N),P}function b(_,w,E,j){if(typeof E=="object"&&E!==null&&E.type===ca&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case bd:e:{for(var P=E.key,O=w;O!==null;){if(O.key===P){if(P=E.type,P===ca){if(O.tag===7){n(_,O.sibling),w=s(O,E.props.children),w.return=_,_=w;break e}}else if(O.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ti&&t1(P)===O.type){n(_,O.sibling),w=s(O,E.props),w.ref=ic(_,O,E),w.return=_,_=w;break e}n(_,O);break}else e(_,O);O=O.sibling}E.type===ca?(w=No(E.props.children,_.mode,j,E.key),w.return=_,_=w):(j=fh(E.type,E.key,E.props,null,_.mode,j),j.ref=ic(_,w,E),j.return=_,_=j)}return a(_);case la:e:{for(O=E.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(_,w.sibling),w=s(w,E.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=eg(E,_.mode,j),w.return=_,_=w}return a(_);case ti:return O=E._init,b(_,w,O(E._payload),j)}if(dc(E))return x(_,w,E,j);if(ec(E))return y(_,w,E,j);Rd(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,E),w.return=_,_=w):(n(_,w),w=Zp(E,_.mode,j),w.return=_,_=w),a(_)):n(_,w)}return b}var Ya=BE(!0),WE=BE(!1),Hh=qi(null),qh=null,xa=null,rv=null;function sv(){rv=xa=qh=null}function iv(t){var e=Hh.current;nt(Hh),t._currentValue=e}function ux(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ta(t,e){qh=t,rv=xa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sn=!0),t.firstContext=null)}function ir(t){var e=t._currentValue;if(rv!==t)if(t={context:t,memoizedValue:e,next:null},xa===null){if(qh===null)throw Error(Z(308));xa=t,qh.dependencies={lanes:0,firstContext:t}}else xa=xa.next=t;return e}var po=null;function ov(t){po===null?po=[t]:po.push(t)}function HE(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ov(e)):(n.next=s.next,s.next=n),e.interleaved=n,js(t,r)}function js(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ni=!1;function av(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function bi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,js(t,n)}return s=r.interleaved,s===null?(e.next=e,ov(r)):(e.next=s.next,s.next=e),r.interleaved=e,js(t,n)}function ah(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qy(t,n)}}function n1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gh(t,e,n,r){var s=t.updateQueue;ni=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,h=u=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,y=l;switch(p=e,g=n,y.tag){case 1:if(x=y.payload,typeof x=="function"){f=x.call(g,f,p);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,p=typeof x=="function"?x.call(g,f,p):x,p==null)break e;f=ct({},f,p);break e;case 2:ni=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ro|=a,t.lanes=a,t.memoizedState=f}}function r1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var ku={},Jr=qi(ku),Zc=qi(ku),eu=qi(ku);function go(t){if(t===ku)throw Error(Z(174));return t}function lv(t,e){switch(Ye(eu,e),Ye(Zc,t),Ye(Jr,ku),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wg(e,t)}nt(Jr),Ye(Jr,e)}function Ja(){nt(Jr),nt(Zc),nt(eu)}function GE(t){go(eu.current);var e=go(Jr.current),n=Wg(e,t.type);e!==n&&(Ye(Zc,t),Ye(Jr,n))}function cv(t){Zc.current===t&&(nt(Jr),nt(Zc))}var it=qi(0);function Kh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gp=[];function uv(){for(var t=0;t<Gp.length;t++)Gp[t]._workInProgressVersionPrimary=null;Gp.length=0}var lh=Vs.ReactCurrentDispatcher,Kp=Vs.ReactCurrentBatchConfig,Io=0,lt=null,Ct=null,Dt=null,Qh=!1,Nc=!1,tu=0,a5=0;function Kt(){throw Error(Z(321))}function dv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ar(t[n],e[n]))return!1;return!0}function hv(t,e,n,r,s,i){if(Io=i,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lh.current=t===null||t.memoizedState===null?d5:h5,t=n(r,s),Nc){i=0;do{if(Nc=!1,tu=0,25<=i)throw Error(Z(301));i+=1,Dt=Ct=null,e.updateQueue=null,lh.current=f5,t=n(r,s)}while(Nc)}if(lh.current=Xh,e=Ct!==null&&Ct.next!==null,Io=0,Dt=Ct=lt=null,Qh=!1,e)throw Error(Z(300));return t}function fv(){var t=tu!==0;return tu=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?lt.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function or(){if(Ct===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=Ct.next;var e=Dt===null?lt.memoizedState:Dt.next;if(e!==null)Dt=e,Ct=t;else{if(t===null)throw Error(Z(310));Ct=t,t={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},Dt===null?lt.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function nu(t,e){return typeof e=="function"?e(t):e}function Qp(t){var e=or(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=Ct,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var h=u.lane;if((Io&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,lt.lanes|=h,Ro|=h}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Ar(r,e.memoizedState)||(Sn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,lt.lanes|=i,Ro|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Xp(t){var e=or(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ar(i,e.memoizedState)||(Sn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function KE(){}function QE(t,e){var n=lt,r=or(),s=e(),i=!Ar(r.memoizedState,s);if(i&&(r.memoizedState=s,Sn=!0),r=r.queue,mv(JE.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,ru(9,YE.bind(null,n,r,s,e),void 0,null),Lt===null)throw Error(Z(349));Io&30||XE(n,e,s)}return s}function XE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YE(t,e,n,r){e.value=n,e.getSnapshot=r,ZE(e)&&eT(t)}function JE(t,e,n){return n(function(){ZE(e)&&eT(t)})}function ZE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ar(t,n)}catch{return!0}}function eT(t){var e=js(t,1);e!==null&&Er(e,t,1,-1)}function s1(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nu,lastRenderedState:t},e.queue=t,t=t.dispatch=u5.bind(null,lt,t),[e.memoizedState,t]}function ru(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tT(){return or().memoizedState}function ch(t,e,n,r){var s=Wr();lt.flags|=t,s.memoizedState=ru(1|e,n,void 0,r===void 0?null:r)}function Yf(t,e,n,r){var s=or();r=r===void 0?null:r;var i=void 0;if(Ct!==null){var a=Ct.memoizedState;if(i=a.destroy,r!==null&&dv(r,a.deps)){s.memoizedState=ru(e,n,i,r);return}}lt.flags|=t,s.memoizedState=ru(1|e,n,i,r)}function i1(t,e){return ch(8390656,8,t,e)}function mv(t,e){return Yf(2048,8,t,e)}function nT(t,e){return Yf(4,2,t,e)}function rT(t,e){return Yf(4,4,t,e)}function sT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iT(t,e,n){return n=n!=null?n.concat([t]):null,Yf(4,4,sT.bind(null,e,t),n)}function pv(){}function oT(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aT(t,e){var n=or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lT(t,e,n){return Io&21?(Ar(n,e)||(n=fE(),lt.lanes|=n,Ro|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sn=!0),t.memoizedState=n)}function l5(t,e){var n=$e;$e=n!==0&&4>n?n:4,t(!0);var r=Kp.transition;Kp.transition={};try{t(!1),e()}finally{$e=n,Kp.transition=r}}function cT(){return or().memoizedState}function c5(t,e,n){var r=Si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uT(t))dT(e,n);else if(n=HE(t,e,n,r),n!==null){var s=un();Er(n,t,r,s),hT(n,e,r)}}function u5(t,e,n){var r=Si(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uT(t))dT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ar(l,a)){var c=e.interleaved;c===null?(s.next=s,ov(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=HE(t,e,s,r),n!==null&&(s=un(),Er(n,t,r,s),hT(n,e,r))}}function uT(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function dT(t,e){Nc=Qh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,qy(t,n)}}var Xh={readContext:ir,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},d5={readContext:ir,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:ir,useEffect:i1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ch(4194308,4,sT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ch(4194308,4,t,e)},useInsertionEffect:function(t,e){return ch(4,2,t,e)},useMemo:function(t,e){var n=Wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=c5.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:s1,useDebugValue:pv,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=s1(!1),e=t[0];return t=l5.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,s=Wr();if(st){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Lt===null)throw Error(Z(349));Io&30||XE(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,i1(JE.bind(null,r,i,t),[t]),r.flags|=2048,ru(9,YE.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Wr(),e=Lt.identifierPrefix;if(st){var n=ws,r=vs;n=(r&~(1<<32-Nr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=a5++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},h5={readContext:ir,useCallback:oT,useContext:ir,useEffect:mv,useImperativeHandle:iT,useInsertionEffect:nT,useLayoutEffect:rT,useMemo:aT,useReducer:Qp,useRef:tT,useState:function(){return Qp(nu)},useDebugValue:pv,useDeferredValue:function(t){var e=or();return lT(e,Ct.memoizedState,t)},useTransition:function(){var t=Qp(nu)[0],e=or().memoizedState;return[t,e]},useMutableSource:KE,useSyncExternalStore:QE,useId:cT,unstable_isNewReconciler:!1},f5={readContext:ir,useCallback:oT,useContext:ir,useEffect:mv,useImperativeHandle:iT,useInsertionEffect:nT,useLayoutEffect:rT,useMemo:aT,useReducer:Xp,useRef:tT,useState:function(){return Xp(nu)},useDebugValue:pv,useDeferredValue:function(t){var e=or();return Ct===null?e.memoizedState=t:lT(e,Ct.memoizedState,t)},useTransition:function(){var t=Xp(nu)[0],e=or().memoizedState;return[t,e]},useMutableSource:KE,useSyncExternalStore:QE,useId:cT,unstable_isNewReconciler:!1};function mr(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dx(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jf={isMounted:function(t){return(t=t._reactInternals)?Go(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=un(),s=Si(t),i=Ss(r,s);i.payload=e,n!=null&&(i.callback=n),e=bi(t,i,s),e!==null&&(Er(e,t,s,r),ah(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=un(),s=Si(t),i=Ss(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=bi(t,i,s),e!==null&&(Er(e,t,s,r),ah(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=un(),r=Si(t),s=Ss(n,r);s.tag=2,e!=null&&(s.callback=e),e=bi(t,s,r),e!==null&&(Er(e,t,r,n),ah(e,t,r))}};function o1(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Qc(n,r)||!Qc(s,i):!0}function fT(t,e,n){var r=!1,s=Pi,i=e.contextType;return typeof i=="object"&&i!==null?i=ir(i):(s=En(e)?ko:nn.current,r=e.contextTypes,i=(r=r!=null)?Qa(t,s):Pi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function a1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jf.enqueueReplaceState(e,e.state,null)}function hx(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},av(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ir(i):(i=En(e)?ko:nn.current,s.context=Qa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(dx(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jf.enqueueReplaceState(s,s.state,null),Gh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Za(t,e){try{var n="",r=e;do n+=UD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Yp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var m5=typeof WeakMap=="function"?WeakMap:Map;function mT(t,e,n){n=Ss(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jh||(Jh=!0,Sx=r),fx(t,e)},n}function pT(t,e,n){n=Ss(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){fx(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){fx(t,e),typeof r!="function"&&(_i===null?_i=new Set([this]):_i.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function l1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new m5;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=j5.bind(null,t,e,n),e.then(t,t))}function c1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function u1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ss(-1,1),e.tag=2,bi(n,e,1))),n.lanes|=1),t)}var p5=Vs.ReactCurrentOwner,Sn=!1;function an(t,e,n,r){e.child=t===null?WE(e,null,n,r):Ya(e,t.child,n,r)}function d1(t,e,n,r,s){n=n.render;var i=e.ref;return Ta(e,s),r=hv(t,e,n,r,i,s),n=fv(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ks(t,e,s)):(st&&n&&ev(e),e.flags|=1,an(t,e,r,s),e.child)}function h1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Sv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,gT(t,e,i,r,s)):(t=fh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Qc,n(a,r)&&t.ref===e.ref)return ks(t,e,s)}return e.flags|=1,t=Ni(i,r),t.ref=e.ref,t.return=e,e.child=t}function gT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Qc(i,r)&&t.ref===e.ref)if(Sn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Sn=!0);else return e.lanes=t.lanes,ks(t,e,s)}return mx(t,e,n,r,s)}function xT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(va,On),On|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(va,On),On|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ye(va,On),On|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ye(va,On),On|=r;return an(t,e,s,n),e.child}function yT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mx(t,e,n,r,s){var i=En(n)?ko:nn.current;return i=Qa(e,i),Ta(e,s),n=hv(t,e,n,r,i,s),r=fv(),t!==null&&!Sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ks(t,e,s)):(st&&r&&ev(e),e.flags|=1,an(t,e,n,s),e.child)}function f1(t,e,n,r,s){if(En(n)){var i=!0;$h(e)}else i=!1;if(Ta(e,s),e.stateNode===null)uh(t,e),fT(e,n,r),hx(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=ir(u):(u=En(n)?ko:nn.current,u=Qa(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&a1(e,a,r,u),ni=!1;var p=e.memoizedState;a.state=p,Gh(e,r,a,s),c=e.memoizedState,l!==r||p!==c||Nn.current||ni?(typeof h=="function"&&(dx(e,n,h,r),c=e.memoizedState),(l=ni||o1(e,n,l,r,p,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,qE(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:mr(e.type,l),a.props=u,f=e.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=ir(c):(c=En(n)?ko:nn.current,c=Qa(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==c)&&a1(e,a,r,c),ni=!1,p=e.memoizedState,a.state=p,Gh(e,r,a,s);var x=e.memoizedState;l!==f||p!==x||Nn.current||ni?(typeof g=="function"&&(dx(e,n,g,r),x=e.memoizedState),(u=ni||o1(e,n,u,r,p,x,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,x,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,x,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),a.props=r,a.state=x,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return px(t,e,n,r,i,s)}function px(t,e,n,r,s,i){yT(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Jb(e,n,!1),ks(t,e,i);r=e.stateNode,p5.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ya(e,t.child,null,i),e.child=Ya(e,null,l,i)):an(t,e,l,i),e.memoizedState=r.state,s&&Jb(e,n,!0),e.child}function vT(t){var e=t.stateNode;e.pendingContext?Yb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yb(t,e.context,!1),lv(t,e.containerInfo)}function m1(t,e,n,r,s){return Xa(),nv(s),e.flags|=256,an(t,e,n,r),e.child}var gx={dehydrated:null,treeContext:null,retryLane:0};function xx(t){return{baseLanes:t,cachePool:null,transitions:null}}function wT(t,e,n){var r=e.pendingProps,s=it.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ye(it,s&1),t===null)return cx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=tm(a,r,0,null),t=No(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=xx(n),e.memoizedState=gx,t):gv(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return g5(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ni(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ni(l,i):(i=No(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?xx(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=gx,r}return i=t.child,t=i.sibling,r=Ni(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gv(t,e){return e=tm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pd(t,e,n,r){return r!==null&&nv(r),Ya(e,t.child,null,n),t=gv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function g5(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Yp(Error(Z(422))),Pd(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=tm({mode:"visible",children:r.children},s,0,null),i=No(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ya(e,t.child,null,a),e.child.memoizedState=xx(a),e.memoizedState=gx,i);if(!(e.mode&1))return Pd(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Z(419)),r=Yp(i,r,void 0),Pd(t,e,a,r)}if(l=(a&t.childLanes)!==0,Sn||l){if(r=Lt,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,js(t,s),Er(r,t,s,-1))}return _v(),r=Yp(Error(Z(421))),Pd(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=k5.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Fn=wi(s.nextSibling),$n=e,st=!0,yr=null,t!==null&&(Jn[Zn++]=vs,Jn[Zn++]=ws,Jn[Zn++]=Ao,vs=t.id,ws=t.overflow,Ao=e),e=gv(e,r.children),e.flags|=4096,e)}function p1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ux(t.return,e,n)}function Jp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function bT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(an(t,e,r.children,n),r=it.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&p1(t,n,e);else if(t.tag===19)p1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(it,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Kh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Kh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jp(e,!0,n,null,i);break;case"together":Jp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ks(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ro|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Ni(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ni(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function x5(t,e,n){switch(e.tag){case 3:vT(e),Xa();break;case 5:GE(e);break;case 1:En(e.type)&&$h(e);break;case 4:lv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ye(Hh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(it,it.current&1),e.flags|=128,null):n&e.child.childLanes?wT(t,e,n):(Ye(it,it.current&1),t=ks(t,e,n),t!==null?t.sibling:null);Ye(it,it.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ye(it,it.current),r)break;return null;case 22:case 23:return e.lanes=0,xT(t,e,n)}return ks(t,e,n)}var _T,yx,ST,NT;_T=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yx=function(){};ST=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,go(Jr.current);var i=null;switch(n){case"input":s=zg(t,s),r=zg(t,r),i=[];break;case"select":s=ct({},s,{value:void 0}),r=ct({},r,{value:void 0}),i=[];break;case"textarea":s=Bg(t,s),r=Bg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zh)}Hg(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($c.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&($c.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&et("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};NT=function(t,e,n,r){n!==r&&(e.flags|=4)};function oc(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Qt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function y5(t,e,n){var r=e.pendingProps;switch(tv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qt(e),null;case 1:return En(e.type)&&Uh(),Qt(e),null;case 3:return r=e.stateNode,Ja(),nt(Nn),nt(nn),uv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Id(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yr!==null&&(Tx(yr),yr=null))),yx(t,e),Qt(e),null;case 5:cv(e);var s=go(eu.current);if(n=e.type,t!==null&&e.stateNode!=null)ST(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Qt(e),null}if(t=go(Jr.current),Id(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Qr]=e,r[Jc]=i,t=(e.mode&1)!==0,n){case"dialog":et("cancel",r),et("close",r);break;case"iframe":case"object":case"embed":et("load",r);break;case"video":case"audio":for(s=0;s<fc.length;s++)et(fc[s],r);break;case"source":et("error",r);break;case"img":case"image":case"link":et("error",r),et("load",r);break;case"details":et("toggle",r);break;case"input":Nb(r,i),et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},et("invalid",r);break;case"textarea":Tb(r,i),et("invalid",r)}Hg(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ad(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ad(r.textContent,l,t),s=["children",""+l]):$c.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&et("scroll",r)}switch(n){case"input":_d(r),Eb(r,i,!0);break;case"textarea":_d(r),Cb(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=JN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Qr]=e,t[Jc]=r,_T(t,e,!1,!1),e.stateNode=t;e:{switch(a=qg(n,r),n){case"dialog":et("cancel",t),et("close",t),s=r;break;case"iframe":case"object":case"embed":et("load",t),s=r;break;case"video":case"audio":for(s=0;s<fc.length;s++)et(fc[s],t);s=r;break;case"source":et("error",t),s=r;break;case"img":case"image":case"link":et("error",t),et("load",t),s=r;break;case"details":et("toggle",t),s=r;break;case"input":Nb(t,r),s=zg(t,r),et("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ct({},r,{value:void 0}),et("invalid",t);break;case"textarea":Tb(t,r),s=Bg(t,r),et("invalid",t);break;default:s=r}Hg(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?tE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ZN(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Bc(t,c):typeof c=="number"&&Bc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($c.hasOwnProperty(i)?c!=null&&i==="onScroll"&&et("scroll",t):c!=null&&zy(t,i,c,a))}switch(n){case"input":_d(t),Eb(t,r,!1);break;case"textarea":_d(t),Cb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ri(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?_a(t,!!r.multiple,i,!1):r.defaultValue!=null&&_a(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Qt(e),null;case 6:if(t&&e.stateNode!=null)NT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=go(eu.current),go(Jr.current),Id(e)){if(r=e.stateNode,n=e.memoizedProps,r[Qr]=e,(i=r.nodeValue!==n)&&(t=$n,t!==null))switch(t.tag){case 3:Ad(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ad(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Qr]=e,e.stateNode=r}return Qt(e),null;case 13:if(nt(it),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Fn!==null&&e.mode&1&&!(e.flags&128))$E(),Xa(),e.flags|=98560,i=!1;else if(i=Id(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[Qr]=e}else Xa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Qt(e),i=!1}else yr!==null&&(Tx(yr),yr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||it.current&1?At===0&&(At=3):_v())),e.updateQueue!==null&&(e.flags|=4),Qt(e),null);case 4:return Ja(),yx(t,e),t===null&&Xc(e.stateNode.containerInfo),Qt(e),null;case 10:return iv(e.type._context),Qt(e),null;case 17:return En(e.type)&&Uh(),Qt(e),null;case 19:if(nt(it),i=e.memoizedState,i===null)return Qt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)oc(i,!1);else{if(At!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Kh(t),a!==null){for(e.flags|=128,oc(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(it,it.current&1|2),e.child}t=t.sibling}i.tail!==null&&xt()>el&&(e.flags|=128,r=!0,oc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Kh(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),oc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!st)return Qt(e),null}else 2*xt()-i.renderingStartTime>el&&n!==1073741824&&(e.flags|=128,r=!0,oc(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xt(),e.sibling=null,n=it.current,Ye(it,r?n&1|2:n&1),e):(Qt(e),null);case 22:case 23:return bv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?On&1073741824&&(Qt(e),e.subtreeFlags&6&&(e.flags|=8192)):Qt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function v5(t,e){switch(tv(e),e.tag){case 1:return En(e.type)&&Uh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ja(),nt(Nn),nt(nn),uv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cv(e),null;case 13:if(nt(it),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Xa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(it),null;case 4:return Ja(),null;case 10:return iv(e.type._context),null;case 22:case 23:return bv(),null;case 24:return null;default:return null}}var Dd=!1,en=!1,w5=typeof WeakSet=="function"?WeakSet:Set,fe=null;function ya(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function vx(t,e,n){try{n()}catch(r){ft(t,e,r)}}var g1=!1;function b5(t,e){if(nx=Lh,t=kE(),Zy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=a),p===i&&++h===r&&(c=a),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rx={focusedElem:t,selectionRange:n},Lh=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,b=x.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:mr(e.type,y),b);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(j){ft(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return x=g1,g1=!1,x}function Ec(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&vx(e,n,i)}s=s.next}while(s!==r)}}function Zf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ET(t){var e=t.alternate;e!==null&&(t.alternate=null,ET(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Qr],delete e[Jc],delete e[ox],delete e[r5],delete e[s5])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function TT(t){return t.tag===5||t.tag===3||t.tag===4}function x1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||TT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zh));else if(r!==4&&(t=t.child,t!==null))for(bx(t,e,n),t=t.sibling;t!==null;)bx(t,e,n),t=t.sibling}function _x(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_x(t,e,n),t=t.sibling;t!==null;)_x(t,e,n),t=t.sibling}var Ut=null,xr=!1;function Ks(t,e,n){for(n=n.child;n!==null;)CT(t,e,n),n=n.sibling}function CT(t,e,n){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(Hf,n)}catch{}switch(n.tag){case 5:en||ya(n,e);case 6:var r=Ut,s=xr;Ut=null,Ks(t,e,n),Ut=r,xr=s,Ut!==null&&(xr?(t=Ut,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ut.removeChild(n.stateNode));break;case 18:Ut!==null&&(xr?(t=Ut,n=n.stateNode,t.nodeType===8?Hp(t.parentNode,n):t.nodeType===1&&Hp(t,n),Gc(t)):Hp(Ut,n.stateNode));break;case 4:r=Ut,s=xr,Ut=n.stateNode.containerInfo,xr=!0,Ks(t,e,n),Ut=r,xr=s;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&vx(n,e,a),s=s.next}while(s!==r)}Ks(t,e,n);break;case 1:if(!en&&(ya(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ft(n,e,l)}Ks(t,e,n);break;case 21:Ks(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,Ks(t,e,n),en=r):Ks(t,e,n);break;default:Ks(t,e,n)}}function y1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new w5),e.forEach(function(r){var s=A5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ut=l.stateNode,xr=!1;break e;case 3:Ut=l.stateNode.containerInfo,xr=!0;break e;case 4:Ut=l.stateNode.containerInfo,xr=!0;break e}l=l.return}if(Ut===null)throw Error(Z(160));CT(i,a,s),Ut=null,xr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ft(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)jT(e,t),e=e.sibling}function jT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dr(e,t),Br(t),r&4){try{Ec(3,t,t.return),Zf(3,t)}catch(y){ft(t,t.return,y)}try{Ec(5,t,t.return)}catch(y){ft(t,t.return,y)}}break;case 1:dr(e,t),Br(t),r&512&&n!==null&&ya(n,n.return);break;case 5:if(dr(e,t),Br(t),r&512&&n!==null&&ya(n,n.return),t.flags&32){var s=t.stateNode;try{Bc(s,"")}catch(y){ft(t,t.return,y)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&XN(s,i),qg(l,a);var u=qg(l,i);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?tE(s,f):h==="dangerouslySetInnerHTML"?ZN(s,f):h==="children"?Bc(s,f):zy(s,h,f,u)}switch(l){case"input":Ug(s,i);break;case"textarea":YN(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?_a(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?_a(s,!!i.multiple,i.defaultValue,!0):_a(s,!!i.multiple,i.multiple?[]:"",!1))}s[Jc]=i}catch(y){ft(t,t.return,y)}}break;case 6:if(dr(e,t),Br(t),r&4){if(t.stateNode===null)throw Error(Z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){ft(t,t.return,y)}}break;case 3:if(dr(e,t),Br(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gc(e.containerInfo)}catch(y){ft(t,t.return,y)}break;case 4:dr(e,t),Br(t);break;case 13:dr(e,t),Br(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vv=xt())),r&4&&y1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(en=(u=en)||h,dr(e,t),en=u):dr(e,t),Br(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(fe=t,h=t.child;h!==null;){for(f=fe=h;fe!==null;){switch(p=fe,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ec(4,p,p.return);break;case 1:ya(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){ft(r,n,y)}}break;case 5:ya(p,p.return);break;case 22:if(p.memoizedState!==null){w1(f);continue}}g!==null?(g.return=p,fe=g):w1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=eE("display",a))}catch(y){ft(t,t.return,y)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){ft(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:dr(e,t),Br(t),r&4&&y1(t);break;case 21:break;default:dr(e,t),Br(t)}}function Br(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(TT(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Bc(s,""),r.flags&=-33);var i=x1(t);_x(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=x1(t);bx(t,l,a);break;default:throw Error(Z(161))}}catch(c){ft(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _5(t,e,n){fe=t,kT(t)}function kT(t,e,n){for(var r=(t.mode&1)!==0;fe!==null;){var s=fe,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Dd;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||en;l=Dd;var u=en;if(Dd=a,(en=c)&&!u)for(fe=s;fe!==null;)a=fe,c=a.child,a.tag===22&&a.memoizedState!==null?b1(s):c!==null?(c.return=a,fe=c):b1(s);for(;i!==null;)fe=i,kT(i),i=i.sibling;fe=s,Dd=l,en=u}v1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,fe=i):v1(t)}}function v1(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||Zf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&r1(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}r1(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Gc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}en||e.flags&512&&wx(e)}catch(p){ft(e,e.return,p)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function w1(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function b1(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zf(4,e)}catch(c){ft(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ft(e,s,c)}}var i=e.return;try{wx(e)}catch(c){ft(e,i,c)}break;case 5:var a=e.return;try{wx(e)}catch(c){ft(e,a,c)}}}catch(c){ft(e,e.return,c)}if(e===t){fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,fe=l;break}fe=e.return}}var S5=Math.ceil,Yh=Vs.ReactCurrentDispatcher,xv=Vs.ReactCurrentOwner,rr=Vs.ReactCurrentBatchConfig,Le=0,Lt=null,vt=null,Bt=0,On=0,va=qi(0),At=0,su=null,Ro=0,em=0,yv=0,Tc=null,wn=null,vv=0,el=1/0,xs=null,Jh=!1,Sx=null,_i=null,Od=!1,pi=null,Zh=0,Cc=0,Nx=null,dh=-1,hh=0;function un(){return Le&6?xt():dh!==-1?dh:dh=xt()}function Si(t){return t.mode&1?Le&2&&Bt!==0?Bt&-Bt:o5.transition!==null?(hh===0&&(hh=fE()),hh):(t=$e,t!==0||(t=window.event,t=t===void 0?16:wE(t.type)),t):1}function Er(t,e,n,r){if(50<Cc)throw Cc=0,Nx=null,Error(Z(185));Tu(t,n,r),(!(Le&2)||t!==Lt)&&(t===Lt&&(!(Le&2)&&(em|=n),At===4&&ii(t,Bt)),Tn(t,r),n===1&&Le===0&&!(e.mode&1)&&(el=xt()+500,Xf&&Gi()))}function Tn(t,e){var n=t.callbackNode;o4(t,e);var r=Mh(t,t===Lt?Bt:0);if(r===0)n!==null&&Ab(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ab(n),e===1)t.tag===0?i5(_1.bind(null,t)):FE(_1.bind(null,t)),t5(function(){!(Le&6)&&Gi()}),n=null;else{switch(mE(r)){case 1:n=Hy;break;case 4:n=dE;break;case 16:n=Oh;break;case 536870912:n=hE;break;default:n=Oh}n=LT(n,AT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function AT(t,e){if(dh=-1,hh=0,Le&6)throw Error(Z(327));var n=t.callbackNode;if(Ca()&&t.callbackNode!==n)return null;var r=Mh(t,t===Lt?Bt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ef(t,r);else{e=r;var s=Le;Le|=2;var i=RT();(Lt!==t||Bt!==e)&&(xs=null,el=xt()+500,So(t,e));do try{T5();break}catch(l){IT(t,l)}while(!0);sv(),Yh.current=i,Le=s,vt!==null?e=0:(Lt=null,Bt=0,e=At)}if(e!==0){if(e===2&&(s=Yg(t),s!==0&&(r=s,e=Ex(t,s))),e===1)throw n=su,So(t,0),ii(t,r),Tn(t,xt()),n;if(e===6)ii(t,r);else{if(s=t.current.alternate,!(r&30)&&!N5(s)&&(e=ef(t,r),e===2&&(i=Yg(t),i!==0&&(r=i,e=Ex(t,i))),e===1))throw n=su,So(t,0),ii(t,r),Tn(t,xt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:ho(t,wn,xs);break;case 3:if(ii(t,r),(r&130023424)===r&&(e=vv+500-xt(),10<e)){if(Mh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){un(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ix(ho.bind(null,t,wn,xs),e);break}ho(t,wn,xs);break;case 4:if(ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Nr(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*S5(r/1960))-r,10<r){t.timeoutHandle=ix(ho.bind(null,t,wn,xs),r);break}ho(t,wn,xs);break;case 5:ho(t,wn,xs);break;default:throw Error(Z(329))}}}return Tn(t,xt()),t.callbackNode===n?AT.bind(null,t):null}function Ex(t,e){var n=Tc;return t.current.memoizedState.isDehydrated&&(So(t,e).flags|=256),t=ef(t,e),t!==2&&(e=wn,wn=n,e!==null&&Tx(e)),t}function Tx(t){wn===null?wn=t:wn.push.apply(wn,t)}function N5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ar(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ii(t,e){for(e&=~yv,e&=~em,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nr(e),r=1<<n;t[n]=-1,e&=~r}}function _1(t){if(Le&6)throw Error(Z(327));Ca();var e=Mh(t,0);if(!(e&1))return Tn(t,xt()),null;var n=ef(t,e);if(t.tag!==0&&n===2){var r=Yg(t);r!==0&&(e=r,n=Ex(t,r))}if(n===1)throw n=su,So(t,0),ii(t,e),Tn(t,xt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ho(t,wn,xs),Tn(t,xt()),null}function wv(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(el=xt()+500,Xf&&Gi())}}function Po(t){pi!==null&&pi.tag===0&&!(Le&6)&&Ca();var e=Le;Le|=1;var n=rr.transition,r=$e;try{if(rr.transition=null,$e=1,t)return t()}finally{$e=r,rr.transition=n,Le=e,!(Le&6)&&Gi()}}function bv(){On=va.current,nt(va)}function So(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,e5(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(tv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uh();break;case 3:Ja(),nt(Nn),nt(nn),uv();break;case 5:cv(r);break;case 4:Ja();break;case 13:nt(it);break;case 19:nt(it);break;case 10:iv(r.type._context);break;case 22:case 23:bv()}n=n.return}if(Lt=t,vt=t=Ni(t.current,null),Bt=On=e,At=0,su=null,yv=em=Ro=0,wn=Tc=null,po!==null){for(e=0;e<po.length;e++)if(n=po[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}po=null}return t}function IT(t,e){do{var n=vt;try{if(sv(),lh.current=Xh,Qh){for(var r=lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qh=!1}if(Io=0,Dt=Ct=lt=null,Nc=!1,tu=0,xv.current=null,n===null||n.return===null){At=1,su=e,vt=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Bt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=c1(a);if(g!==null){g.flags&=-257,u1(g,a,l,i,e),g.mode&1&&l1(i,u,e),e=g,c=u;var x=e.updateQueue;if(x===null){var y=new Set;y.add(c),e.updateQueue=y}else x.add(c);break e}else{if(!(e&1)){l1(i,u,e),_v();break e}c=Error(Z(426))}}else if(st&&l.mode&1){var b=c1(a);if(b!==null){!(b.flags&65536)&&(b.flags|=256),u1(b,a,l,i,e),nv(Za(c,l));break e}}i=c=Za(c,l),At!==4&&(At=2),Tc===null?Tc=[i]:Tc.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=mT(i,c,e);n1(i,_);break e;case 1:l=c;var w=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(_i===null||!_i.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=pT(i,l,e);n1(i,j);break e}}i=i.return}while(i!==null)}DT(n)}catch(P){e=P,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function RT(){var t=Yh.current;return Yh.current=Xh,t===null?Xh:t}function _v(){(At===0||At===3||At===2)&&(At=4),Lt===null||!(Ro&268435455)&&!(em&268435455)||ii(Lt,Bt)}function ef(t,e){var n=Le;Le|=2;var r=RT();(Lt!==t||Bt!==e)&&(xs=null,So(t,e));do try{E5();break}catch(s){IT(t,s)}while(!0);if(sv(),Le=n,Yh.current=r,vt!==null)throw Error(Z(261));return Lt=null,Bt=0,At}function E5(){for(;vt!==null;)PT(vt)}function T5(){for(;vt!==null&&!YD();)PT(vt)}function PT(t){var e=MT(t.alternate,t,On);t.memoizedProps=t.pendingProps,e===null?DT(t):vt=e,xv.current=null}function DT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=v5(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{At=6,vt=null;return}}else if(n=y5(n,e,On),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);At===0&&(At=5)}function ho(t,e,n){var r=$e,s=rr.transition;try{rr.transition=null,$e=1,C5(t,e,n,r)}finally{rr.transition=s,$e=r}return null}function C5(t,e,n,r){do Ca();while(pi!==null);if(Le&6)throw Error(Z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(a4(t,i),t===Lt&&(vt=Lt=null,Bt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Od||(Od=!0,LT(Oh,function(){return Ca(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=rr.transition,rr.transition=null;var a=$e;$e=1;var l=Le;Le|=4,xv.current=null,b5(t,n),jT(n,t),G4(rx),Lh=!!nx,rx=nx=null,t.current=n,_5(n),JD(),Le=l,$e=a,rr.transition=i}else t.current=n;if(Od&&(Od=!1,pi=t,Zh=s),i=t.pendingLanes,i===0&&(_i=null),t4(n.stateNode),Tn(t,xt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Jh)throw Jh=!1,t=Sx,Sx=null,t;return Zh&1&&t.tag!==0&&Ca(),i=t.pendingLanes,i&1?t===Nx?Cc++:(Cc=0,Nx=t):Cc=0,Gi(),null}function Ca(){if(pi!==null){var t=mE(Zh),e=rr.transition,n=$e;try{if(rr.transition=null,$e=16>t?16:t,pi===null)var r=!1;else{if(t=pi,pi=null,Zh=0,Le&6)throw Error(Z(331));var s=Le;for(Le|=4,fe=t.current;fe!==null;){var i=fe,a=i.child;if(fe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(fe=u;fe!==null;){var h=fe;switch(h.tag){case 0:case 11:case 15:Ec(8,h,i)}var f=h.child;if(f!==null)f.return=h,fe=f;else for(;fe!==null;){h=fe;var p=h.sibling,g=h.return;if(ET(h),h===u){fe=null;break}if(p!==null){p.return=g,fe=p;break}fe=g}}}var x=i.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}fe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,fe=a;else e:for(;fe!==null;){if(i=fe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ec(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,fe=_;break e}fe=i.return}}var w=t.current;for(fe=w;fe!==null;){a=fe;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,fe=E;else e:for(a=w;fe!==null;){if(l=fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zf(9,l)}}catch(P){ft(l,l.return,P)}if(l===a){fe=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,fe=j;break e}fe=l.return}}if(Le=s,Gi(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(Hf,t)}catch{}r=!0}return r}finally{$e=n,rr.transition=e}}return!1}function S1(t,e,n){e=Za(n,e),e=mT(t,e,1),t=bi(t,e,1),e=un(),t!==null&&(Tu(t,1,e),Tn(t,e))}function ft(t,e,n){if(t.tag===3)S1(t,t,n);else for(;e!==null;){if(e.tag===3){S1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(_i===null||!_i.has(r))){t=Za(n,t),t=pT(e,t,1),e=bi(e,t,1),t=un(),e!==null&&(Tu(e,1,t),Tn(e,t));break}}e=e.return}}function j5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=un(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Bt&n)===n&&(At===4||At===3&&(Bt&130023424)===Bt&&500>xt()-vv?So(t,0):yv|=n),Tn(t,e)}function OT(t,e){e===0&&(t.mode&1?(e=Ed,Ed<<=1,!(Ed&130023424)&&(Ed=4194304)):e=1);var n=un();t=js(t,e),t!==null&&(Tu(t,e,n),Tn(t,n))}function k5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),OT(t,n)}function A5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),OT(t,n)}var MT;MT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)Sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Sn=!1,x5(t,e,n);Sn=!!(t.flags&131072)}else Sn=!1,st&&e.flags&1048576&&zE(e,Wh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;uh(t,e),t=e.pendingProps;var s=Qa(e,nn.current);Ta(e,n),s=hv(null,e,r,t,s,n);var i=fv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(r)?(i=!0,$h(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,av(e),s.updater=Jf,e.stateNode=s,s._reactInternals=e,hx(e,r,t,n),e=px(null,e,r,!0,i,n)):(e.tag=0,st&&i&&ev(e),an(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(uh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=R5(r),t=mr(r,t),s){case 0:e=mx(null,e,r,t,n);break e;case 1:e=f1(null,e,r,t,n);break e;case 11:e=d1(null,e,r,t,n);break e;case 14:e=h1(null,e,r,mr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),mx(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),f1(t,e,r,s,n);case 3:e:{if(vT(e),t===null)throw Error(Z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,qE(t,e),Gh(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Za(Error(Z(423)),e),e=m1(t,e,r,n,s);break e}else if(r!==s){s=Za(Error(Z(424)),e),e=m1(t,e,r,n,s);break e}else for(Fn=wi(e.stateNode.containerInfo.firstChild),$n=e,st=!0,yr=null,n=WE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xa(),r===s){e=ks(t,e,n);break e}an(t,e,r,n)}e=e.child}return e;case 5:return GE(e),t===null&&cx(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,sx(r,s)?a=null:i!==null&&sx(r,i)&&(e.flags|=32),yT(t,e),an(t,e,a,n),e.child;case 6:return t===null&&cx(e),null;case 13:return wT(t,e,n);case 4:return lv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ya(e,null,r,n):an(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),d1(t,e,r,s,n);case 7:return an(t,e,e.pendingProps,n),e.child;case 8:return an(t,e,e.pendingProps.children,n),e.child;case 12:return an(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Ye(Hh,r._currentValue),r._currentValue=a,i!==null)if(Ar(i.value,a)){if(i.children===s.children&&!Nn.current){e=ks(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ss(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ux(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(Z(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ux(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}an(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ta(e,n),s=ir(s),r=r(s),e.flags|=1,an(t,e,r,n),e.child;case 14:return r=e.type,s=mr(r,e.pendingProps),s=mr(r.type,s),h1(t,e,r,s,n);case 15:return gT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mr(r,s),uh(t,e),e.tag=1,En(r)?(t=!0,$h(e)):t=!1,Ta(e,n),fT(e,r,s),hx(e,r,s,n),px(null,e,r,!0,t,n);case 19:return bT(t,e,n);case 22:return xT(t,e,n)}throw Error(Z(156,e.tag))};function LT(t,e){return uE(t,e)}function I5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(t,e,n,r){return new I5(t,e,n,r)}function Sv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R5(t){if(typeof t=="function")return Sv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===$y)return 11;if(t===By)return 14}return 2}function Ni(t,e){var n=t.alternate;return n===null?(n=tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fh(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Sv(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ca:return No(n.children,s,i,e);case Uy:a=8,s|=8;break;case Mg:return t=tr(12,n,e,s|2),t.elementType=Mg,t.lanes=i,t;case Lg:return t=tr(13,n,e,s),t.elementType=Lg,t.lanes=i,t;case Vg:return t=tr(19,n,e,s),t.elementType=Vg,t.lanes=i,t;case GN:return tm(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case HN:a=10;break e;case qN:a=9;break e;case $y:a=11;break e;case By:a=14;break e;case ti:a=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=tr(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function No(t,e,n,r){return t=tr(7,t,r,e),t.lanes=n,t}function tm(t,e,n,r){return t=tr(22,t,r,e),t.elementType=GN,t.lanes=n,t.stateNode={isHidden:!1},t}function Zp(t,e,n){return t=tr(6,t,null,e),t.lanes=n,t}function eg(t,e,n){return e=tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function P5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dp(0),this.expirationTimes=Dp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Nv(t,e,n,r,s,i,a,l,c){return t=new P5(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},av(i),t}function D5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:la,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function VT(t){if(!t)return Pi;t=t._reactInternals;e:{if(Go(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(En(n))return VE(t,n,e)}return e}function FT(t,e,n,r,s,i,a,l,c){return t=Nv(n,r,!0,t,s,i,a,l,c),t.context=VT(null),n=t.current,r=un(),s=Si(n),i=Ss(r,s),i.callback=e??null,bi(n,i,s),t.current.lanes=s,Tu(t,s,r),Tn(t,r),t}function nm(t,e,n,r){var s=e.current,i=un(),a=Si(s);return n=VT(n),e.context===null?e.context=n:e.pendingContext=n,e=Ss(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=bi(s,e,a),t!==null&&(Er(t,s,a,i),ah(t,s,a)),a}function tf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function N1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ev(t,e){N1(t,e),(t=t.alternate)&&N1(t,e)}function O5(){return null}var zT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tv(t){this._internalRoot=t}rm.prototype.render=Tv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));nm(t,e,null,null)};rm.prototype.unmount=Tv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Po(function(){nm(null,t,null,null)}),e[Cs]=null}};function rm(t){this._internalRoot=t}rm.prototype.unstable_scheduleHydration=function(t){if(t){var e=xE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<si.length&&e!==0&&e<si[n].priority;n++);si.splice(n,0,t),n===0&&vE(t)}};function Cv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function E1(){}function M5(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=tf(a);i.call(u)}}var a=FT(e,r,t,0,null,!1,!1,"",E1);return t._reactRootContainer=a,t[Cs]=a.current,Xc(t.nodeType===8?t.parentNode:t),Po(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=tf(c);l.call(u)}}var c=Nv(t,0,!1,null,null,!1,!1,"",E1);return t._reactRootContainer=c,t[Cs]=c.current,Xc(t.nodeType===8?t.parentNode:t),Po(function(){nm(e,c,n,r)}),c}function im(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=tf(a);l.call(c)}}nm(e,a,t,s)}else a=M5(n,e,t,s,r);return tf(a)}pE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=hc(e.pendingLanes);n!==0&&(qy(e,n|1),Tn(e,xt()),!(Le&6)&&(el=xt()+500,Gi()))}break;case 13:Po(function(){var r=js(t,1);if(r!==null){var s=un();Er(r,t,1,s)}}),Ev(t,1)}};Gy=function(t){if(t.tag===13){var e=js(t,134217728);if(e!==null){var n=un();Er(e,t,134217728,n)}Ev(t,134217728)}};gE=function(t){if(t.tag===13){var e=Si(t),n=js(t,e);if(n!==null){var r=un();Er(n,t,e,r)}Ev(t,e)}};xE=function(){return $e};yE=function(t,e){var n=$e;try{return $e=t,e()}finally{$e=n}};Kg=function(t,e,n){switch(e){case"input":if(Ug(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Qf(r);if(!s)throw Error(Z(90));QN(r),Ug(r,s)}}}break;case"textarea":YN(t,n);break;case"select":e=n.value,e!=null&&_a(t,!!n.multiple,e,!1)}};sE=wv;iE=Po;var L5={usingClientEntryPoint:!1,Events:[ju,fa,Qf,nE,rE,wv]},ac={findFiberByHostInstance:mo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V5={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=lE(t),t===null?null:t.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||O5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{Hf=Md.inject(V5),Yr=Md}catch{}}qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L5;qn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cv(e))throw Error(Z(200));return D5(t,e,null,n)};qn.createRoot=function(t,e){if(!Cv(t))throw Error(Z(299));var n=!1,r="",s=zT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Nv(t,1,!1,null,null,n,!1,r,s),t[Cs]=e.current,Xc(t.nodeType===8?t.parentNode:t),new Tv(e)};qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=lE(e),t=t===null?null:t.stateNode,t};qn.flushSync=function(t){return Po(t)};qn.hydrate=function(t,e,n){if(!sm(e))throw Error(Z(200));return im(null,t,e,!0,n)};qn.hydrateRoot=function(t,e,n){if(!Cv(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=zT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=FT(e,null,t,1,n??null,s,!1,i,a),t[Cs]=e.current,Xc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rm(e)};qn.render=function(t,e,n){if(!sm(e))throw Error(Z(200));return im(null,t,e,!1,n)};qn.unmountComponentAtNode=function(t){if(!sm(t))throw Error(Z(40));return t._reactRootContainer?(Po(function(){im(null,null,t,!1,function(){t._reactRootContainer=null,t[Cs]=null})}),!0):!1};qn.unstable_batchedUpdates=wv;qn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sm(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return im(t,e,n,!1,r)};qn.version="18.3.1-next-f1338f8080-20240426";function UT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(UT)}catch(t){console.error(t)}}UT(),UN.exports=qn;var nr=UN.exports;const F5=jN(nr);var $T,T1=nr;$T=T1.createRoot,T1.hydrateRoot;function z5(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var BT={exports:{}},WT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=m;function U5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $5=typeof Object.is=="function"?Object.is:U5,B5=tl.useState,W5=tl.useEffect,H5=tl.useLayoutEffect,q5=tl.useDebugValue;function G5(t,e){var n=e(),r=B5({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return H5(function(){s.value=n,s.getSnapshot=e,tg(s)&&i({inst:s})},[t,n,e]),W5(function(){return tg(s)&&i({inst:s}),t(function(){tg(s)&&i({inst:s})})},[t]),q5(n),n}function tg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$5(t,n)}catch{return!0}}function K5(t,e){return e()}var Q5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?K5:G5;WT.useSyncExternalStore=tl.useSyncExternalStore!==void 0?tl.useSyncExternalStore:Q5;BT.exports=WT;var X5=BT.exports;const Y5=FN.useInsertionEffect,J5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Z5=J5?m.useLayoutEffect:m.useEffect,eO=Y5||Z5,HT=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return eO(()=>{e[0]=t}),e[1]},tO="popstate",jv="pushState",kv="replaceState",nO="hashchange",C1=[tO,jv,kv,nO],rO=t=>{for(const e of C1)addEventListener(e,t);return()=>{for(const e of C1)removeEventListener(e,t)}},qT=(t,e)=>X5.useSyncExternalStore(rO,t,e),sO=()=>location.search,iO=({ssrSearch:t=""}={})=>qT(sO,()=>t),j1=()=>location.pathname,oO=({ssrPath:t}={})=>qT(j1,t?()=>t:j1),aO=(t,{replace:e=!1,state:n=null}={})=>history[e?kv:jv](n,"",t),lO=(t={})=>[oO(t),aO],k1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[k1]>"u"){for(const t of[jv,kv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,k1,{value:!0})}const cO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",GT=(t="")=>t==="/"?"":t,uO=(t,e)=>t[0]==="~"?t.slice(1):GT(e)+t,dO=(t="",e)=>cO(A1(GT(t)),A1(e)),A1=t=>{try{return decodeURI(t)}catch{return t}},KT={hook:lO,searchHook:iO,parser:z5,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},QT=m.createContext(KT),Au=()=>m.useContext(QT),XT={},YT=m.createContext(XT),hO=()=>m.useContext(YT),om=t=>{const[e,n]=t.hook(t);return[dO(t.base,e),HT((r,s)=>n(uO(r,t.base),s))]},am=()=>om(Au()),JT=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):a.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},ZT=({children:t,...e})=>{var h,f;const n=Au(),r=e.hook?KT:n;let s=r;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in r){const g=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&g!==u[p]&&(l.current=u={...u}),u[p]=g,g!==r[p]&&(s=u)}return m.createElement(QT.Provider,{value:s,children:t})},I1=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,fO=t=>{let e=m.useRef(XT),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},hr=({path:t,nest:e,match:n,...r})=>{const s=Au(),[i]=om(s),[a,l,c]=n??JT(s.parser,t,i,e),u=fO({...hO(),...l});if(!a)return null;const h=c?m.createElement(ZT,{base:c},I1(r,u)):I1(r,u);return m.createElement(YT.Provider,{value:u,children:h})},Cn=m.forwardRef((t,e)=>{const n=Au(),[r,s]=om(n),{to:i="",href:a=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...g}=t,x=HT(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(l==null||l(b),b.defaultPrevented||(b.preventDefault(),s(a,t)))}),y=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:x,href:y}):m.createElement("a",{...g,onClick:x,href:y,className:h!=null&&h.call?h(r===a):h,children:u,ref:e})}),eC=t=>Array.isArray(t)?t.flatMap(e=>eC(e&&e.type===m.Fragment?e.props.children:e)):[t],mO=({children:t,location:e})=>{const n=Au(),[r]=om(n);for(const s of eC(t)){let i=0;if(m.isValidElement(s)&&(i=JT(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var lm=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cm=typeof window>"u"||"Deno"in globalThis;function pr(){}function pO(t,e){return typeof t=="function"?t(e):t}function gO(t){return typeof t=="number"&&t>=0&&t!==1/0}function xO(t,e){return Math.max(t+(e||0)-Date.now(),0)}function R1(t,e){return typeof t=="function"?t(e):t}function yO(t,e){return typeof t=="function"?t(e):t}function P1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==Av(a,e.options))return!1}else if(!ou(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function D1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(iu(e.options.mutationKey)!==iu(i))return!1}else if(!ou(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Av(t,e){return((e==null?void 0:e.queryKeyHashFn)||iu)(t)}function iu(t){return JSON.stringify(t,(e,n)=>Cx(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ou(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!ou(t[n],e[n])):!1}function tC(t,e){if(t===e)return t;const n=O1(t)&&O1(e);if(n||Cx(t)&&Cx(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),a=i.length,l=n?[]:{};let c=0;for(let u=0;u<a;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=tC(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function O1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Cx(t){if(!M1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!M1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function M1(t){return Object.prototype.toString.call(t)==="[object Object]"}function vO(t){return new Promise(e=>{setTimeout(e,t)})}function wO(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?tC(t,e):e}function bO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function _O(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Iv=Symbol();function nC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Iv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var vo,ci,Fa,wN,SO=(wN=class extends lm{constructor(){super();Fe(this,vo);Fe(this,ci);Fe(this,Fa);Ne(this,Fa,e=>{if(!cm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Q(this,ci)||this.setEventListener(Q(this,Fa))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,ci))==null||e.call(this),Ne(this,ci,void 0))}setEventListener(e){var n;Ne(this,Fa,e),(n=Q(this,ci))==null||n.call(this),Ne(this,ci,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){Q(this,vo)!==e&&(Ne(this,vo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof Q(this,vo)=="boolean"?Q(this,vo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},vo=new WeakMap,ci=new WeakMap,Fa=new WeakMap,wN),rC=new SO,za,ui,Ua,bN,NO=(bN=class extends lm{constructor(){super();Fe(this,za,!0);Fe(this,ui);Fe(this,Ua);Ne(this,Ua,e=>{if(!cm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Q(this,ui)||this.setEventListener(Q(this,Ua))}onUnsubscribe(){var e;this.hasListeners()||((e=Q(this,ui))==null||e.call(this),Ne(this,ui,void 0))}setEventListener(e){var n;Ne(this,Ua,e),(n=Q(this,ui))==null||n.call(this),Ne(this,ui,e(this.setOnline.bind(this)))}setOnline(e){Q(this,za)!==e&&(Ne(this,za,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return Q(this,za)}},za=new WeakMap,ui=new WeakMap,Ua=new WeakMap,bN),nf=new NO;function EO(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function TO(t){return Math.min(1e3*2**t,3e4)}function sC(t){return(t??"online")==="online"?nf.isOnline():!0}var iC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function ng(t){return t instanceof iC}function oC(t){let e=!1,n=0,r=!1,s;const i=EO(),a=y=>{var b;r||(p(new iC(y)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>rC.isFocused()&&(t.networkMode==="always"||nf.isOnline())&&t.canRun(),h=()=>sC(t.networkMode)&&t.canRun(),f=y=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,y),s==null||s(),i.resolve(y))},p=y=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,y),s==null||s(),i.reject(y))},g=()=>new Promise(y=>{var b;s=_=>{(r||u())&&y(_)},(b=t.onPause)==null||b.call(t)}).then(()=>{var y;s=void 0,r||(y=t.onContinue)==null||y.call(t)}),x=()=>{if(r)return;let y;const b=n===0?t.initialPromise:void 0;try{y=b??t.fn()}catch(_){y=Promise.reject(_)}Promise.resolve(y).then(f).catch(_=>{var O;if(r)return;const w=t.retry??(cm?0:3),E=t.retryDelay??TO,j=typeof E=="function"?E(n,_):E,P=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(e||!P){p(_);return}n++,(O=t.onFail)==null||O.call(t,n,_),vO(j).then(()=>u()?void 0:g()).then(()=>{e?p(_):x()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?x():g().then(x),i)}}function CO(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var ln=CO(),wo,_N,aC=(_N=class{constructor(){Fe(this,wo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gO(this.gcTime)&&Ne(this,wo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(cm?1/0:5*60*1e3))}clearGcTimeout(){Q(this,wo)&&(clearTimeout(Q(this,wo)),Ne(this,wo,void 0))}},wo=new WeakMap,_N),$a,Ba,Xn,Yt,Su,bo,gr,gs,SN,jO=(SN=class extends aC{constructor(n){super();Fe(this,gr);Fe(this,$a);Fe(this,Ba);Fe(this,Xn);Fe(this,Yt);Fe(this,Su);Fe(this,bo);Ne(this,bo,!1),Ne(this,Su,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ne(this,Xn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ne(this,$a,AO(this.options)),this.state=n.state??Q(this,$a),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=Q(this,Yt))==null?void 0:n.promise}setOptions(n){this.options={...Q(this,Su),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Q(this,Xn).remove(this)}setData(n,r){const s=wO(this.state.data,n,this.options);return Gt(this,gr,gs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Gt(this,gr,gs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=Q(this,Yt))==null?void 0:s.promise;return(i=Q(this,Yt))==null||i.cancel(n),r?r.then(pr).catch(pr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Q(this,$a))}isActive(){return this.observers.some(n=>yO(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Iv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!xO(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Yt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=Q(this,Yt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),Q(this,Xn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(Q(this,Yt)&&(Q(this,bo)?Q(this,Yt).cancel({revert:!0}):Q(this,Yt).cancelRetry()),this.scheduleGc()),Q(this,Xn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Gt(this,gr,gs).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Q(this,Yt))return Q(this,Yt).continueRetry(),Q(this,Yt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(g=>g.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Ne(this,bo,!0),s.signal)})},a=()=>{const p=nC(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),Ne(this,bo,!1),this.options.persister?this.options.persister(p,g,this):p(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Ne(this,Ba,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Gt(this,gr,gs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var g,x,y,b;ng(p)&&p.silent||Gt(this,gr,gs).call(this,{type:"error",error:p}),ng(p)||((x=(g=Q(this,Xn).config).onError)==null||x.call(g,p,this),(b=(y=Q(this,Xn).config).onSettled)==null||b.call(y,this.state.data,p,this)),this.scheduleGc()};return Ne(this,Yt,oC({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var g,x,y,b;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(_){c(_);return}(x=(g=Q(this,Xn).config).onSuccess)==null||x.call(g,p,this),(b=(y=Q(this,Xn).config).onSettled)==null||b.call(y,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,g)=>{Gt(this,gr,gs).call(this,{type:"failed",failureCount:p,error:g})},onPause:()=>{Gt(this,gr,gs).call(this,{type:"pause"})},onContinue:()=>{Gt(this,gr,gs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),Q(this,Yt).start()}},$a=new WeakMap,Ba=new WeakMap,Xn=new WeakMap,Yt=new WeakMap,Su=new WeakMap,bo=new WeakMap,gr=new WeakSet,gs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...kO(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return ng(i)&&i.revert&&Q(this,Ba)?{...Q(this,Ba),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),ln.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Q(this,Xn).notify({query:this,type:"updated",action:n})})},SN);function kO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:sC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function AO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var qr,NN,IO=(NN=class extends lm{constructor(e={}){super();Fe(this,qr);this.config=e,Ne(this,qr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Av(s,n);let a=this.get(i);return a||(a=new jO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){Q(this,qr).has(e.queryHash)||(Q(this,qr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=Q(this,qr).get(e.queryHash);n&&(e.destroy(),n===e&&Q(this,qr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Q(this,qr).get(e)}getAll(){return[...Q(this,qr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>P1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>P1(e,r)):n}notify(e){ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){ln.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ln.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},qr=new WeakMap,NN),Gr,on,_o,Kr,Js,EN,RO=(EN=class extends aC{constructor(n){super();Fe(this,Kr);Fe(this,Gr);Fe(this,on);Fe(this,_o);this.mutationId=n.mutationId,Ne(this,on,n.mutationCache),Ne(this,Gr,[]),this.state=n.state||PO(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){Q(this,Gr).includes(n)||(Q(this,Gr).push(n),this.clearGcTimeout(),Q(this,on).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ne(this,Gr,Q(this,Gr).filter(r=>r!==n)),this.scheduleGc(),Q(this,on).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){Q(this,Gr).length||(this.state.status==="pending"?this.scheduleGc():Q(this,on).remove(this))}continue(){var n;return((n=Q(this,_o))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,a,l,c,u,h,f,p,g,x,y,b,_,w,E,j,P,O,S,N;Ne(this,_o,oC({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,k)=>{Gt(this,Kr,Js).call(this,{type:"failed",failureCount:C,error:k})},onPause:()=>{Gt(this,Kr,Js).call(this,{type:"pause"})},onContinue:()=>{Gt(this,Kr,Js).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Q(this,on).canRun(this)}));const r=this.state.status==="pending",s=!Q(this,_o).canStart();try{if(!r){Gt(this,Kr,Js).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(i=Q(this,on).config).onMutate)==null?void 0:a.call(i,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&Gt(this,Kr,Js).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const C=await Q(this,_o).start();return await((h=(u=Q(this,on).config).onSuccess)==null?void 0:h.call(u,C,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,C,n,this.state.context)),await((x=(g=Q(this,on).config).onSettled)==null?void 0:x.call(g,C,null,this.state.variables,this.state.context,this)),await((b=(y=this.options).onSettled)==null?void 0:b.call(y,C,null,n,this.state.context)),Gt(this,Kr,Js).call(this,{type:"success",data:C}),C}catch(C){try{throw await((w=(_=Q(this,on).config).onError)==null?void 0:w.call(_,C,n,this.state.context,this)),await((j=(E=this.options).onError)==null?void 0:j.call(E,C,n,this.state.context)),await((O=(P=Q(this,on).config).onSettled)==null?void 0:O.call(P,void 0,C,this.state.variables,this.state.context,this)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,C,n,this.state.context)),C}finally{Gt(this,Kr,Js).call(this,{type:"error",error:C})}}finally{Q(this,on).runNext(this)}}},Gr=new WeakMap,on=new WeakMap,_o=new WeakMap,Kr=new WeakSet,Js=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ln.batch(()=>{Q(this,Gr).forEach(s=>{s.onMutationUpdate(n)}),Q(this,on).notify({mutation:this,type:"updated",action:n})})},EN);function PO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dn,Nu,TN,DO=(TN=class extends lm{constructor(e={}){super();Fe(this,Dn);Fe(this,Nu);this.config=e,Ne(this,Dn,new Map),Ne(this,Nu,Date.now())}build(e,n,r){const s=new RO({mutationCache:this,mutationId:++vd(this,Nu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Ld(e),r=Q(this,Dn).get(n)??[];r.push(e),Q(this,Dn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Ld(e);if(Q(this,Dn).has(n)){const s=(r=Q(this,Dn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?Q(this,Dn).delete(n):Q(this,Dn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=Q(this,Dn).get(Ld(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=Q(this,Dn).get(Ld(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){ln.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...Q(this,Dn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>D1(n,r))}findAll(e={}){return this.getAll().filter(n=>D1(e,n))}notify(e){ln.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return ln.batch(()=>Promise.all(e.map(n=>n.continue().catch(pr))))}},Dn=new WeakMap,Nu=new WeakMap,TN);function Ld(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function L1(t){return{onFetch:(e,n)=>{var h,f,p,g,x;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],a=((x=e.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let y=!1;const b=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?y=!0:e.signal.addEventListener("abort",()=>{y=!0}),e.signal)})},_=nC(e.options,e.fetchOptions),w=async(E,j,P)=>{if(y)return Promise.reject();if(j==null&&E.pages.length)return Promise.resolve(E);const O={queryKey:e.queryKey,pageParam:j,direction:P?"backward":"forward",meta:e.options.meta};b(O);const S=await _(O),{maxPages:N}=e.options,C=P?_O:bO;return{pages:C(E.pages,S,N),pageParams:C(E.pageParams,j,N)}};if(s&&i.length){const E=s==="backward",j=E?OO:V1,P={pages:i,pageParams:a},O=j(r,P);l=await w(P,O,E)}else{const E=t??i.length;do{const j=c===0?a[0]??r.initialPageParam:V1(r,l);if(c>0&&j==null)break;l=await w(l,j),c++}while(c<E)}return l};e.options.persister?e.fetchFn=()=>{var y,b;return(b=(y=e.options).persister)==null?void 0:b.call(y,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function V1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function OO(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ht,di,hi,Wa,Ha,fi,qa,Ga,CN,MO=(CN=class{constructor(t={}){Fe(this,ht);Fe(this,di);Fe(this,hi);Fe(this,Wa);Fe(this,Ha);Fe(this,fi);Fe(this,qa);Fe(this,Ga);Ne(this,ht,t.queryCache||new IO),Ne(this,di,t.mutationCache||new DO),Ne(this,hi,t.defaultOptions||{}),Ne(this,Wa,new Map),Ne(this,Ha,new Map),Ne(this,fi,0)}mount(){vd(this,fi)._++,Q(this,fi)===1&&(Ne(this,qa,rC.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,ht).onFocus())})),Ne(this,Ga,nf.subscribe(async t=>{t&&(await this.resumePausedMutations(),Q(this,ht).onOnline())})))}unmount(){var t,e;vd(this,fi)._--,Q(this,fi)===0&&((t=Q(this,qa))==null||t.call(this),Ne(this,qa,void 0),(e=Q(this,Ga))==null||e.call(this),Ne(this,Ga,void 0))}isFetching(t){return Q(this,ht).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return Q(this,di).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,ht).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=Q(this,ht).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(R1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return Q(this,ht).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=Q(this,ht).get(r.queryHash),i=s==null?void 0:s.state.data,a=pO(e,i);if(a!==void 0)return Q(this,ht).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return ln.batch(()=>Q(this,ht).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=Q(this,ht).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=Q(this,ht);ln.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=Q(this,ht),r={type:"active",...t};return ln.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=ln.batch(()=>Q(this,ht).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(pr).catch(pr)}invalidateQueries(t={},e={}){return ln.batch(()=>{if(Q(this,ht).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=ln.batch(()=>Q(this,ht).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(pr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(pr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=Q(this,ht).build(this,e);return n.isStaleByTime(R1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(pr).catch(pr)}fetchInfiniteQuery(t){return t.behavior=L1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(pr).catch(pr)}ensureInfiniteQueryData(t){return t.behavior=L1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return nf.isOnline()?Q(this,di).resumePausedMutations():Promise.resolve()}getQueryCache(){return Q(this,ht)}getMutationCache(){return Q(this,di)}getDefaultOptions(){return Q(this,hi)}setDefaultOptions(t){Ne(this,hi,t)}setQueryDefaults(t,e){Q(this,Wa).set(iu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...Q(this,Wa).values()];let n={};return e.forEach(r=>{ou(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){Q(this,Ha).set(iu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...Q(this,Ha).values()];let n={};return e.forEach(r=>{ou(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...Q(this,hi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Av(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Iv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...Q(this,hi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){Q(this,ht).clear(),Q(this,di).clear()}},ht=new WeakMap,di=new WeakMap,hi=new WeakMap,Wa=new WeakMap,Ha=new WeakMap,fi=new WeakMap,qa=new WeakMap,Ga=new WeakMap,CN),LO=m.createContext(void 0),VO=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),o.jsx(LO.Provider,{value:t,children:e}));async function FO(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const zO=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await FO(n),await n.json())},UO=new MO({defaultOptions:{queries:{queryFn:zO({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),$O=1,BO=1e6;let rg=0;function WO(){return rg=(rg+1)%Number.MAX_SAFE_INTEGER,rg.toString()}const sg=new Map,F1=t=>{if(sg.has(t))return;const e=setTimeout(()=>{sg.delete(t),jc({type:"REMOVE_TOAST",toastId:t})},BO);sg.set(t,e)},HO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,$O)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?F1(n):t.toasts.forEach(r=>{F1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},mh=[];let ph={toasts:[]};function jc(t){ph=HO(ph,t),mh.forEach(e=>{e(ph)})}function qO({...t}){const e=WO(),n=s=>jc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>jc({type:"DISMISS_TOAST",toastId:e});return jc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Ki(){const[t,e]=m.useState(ph);return m.useEffect(()=>(mh.push(e),()=>{const n=mh.indexOf(e);n>-1&&mh.splice(n,1)}),[t]),{...t,toast:qO,dismiss:n=>jc({type:"DISMISS_TOAST",toastId:n})}}function me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function z1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function lC(...t){return e=>{let n=!1;const r=t.map(s=>{const i=z1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():z1(t[s],null)}}}}function Ce(...t){return m.useCallback(lC(...t),t)}function GO(t,e){const n=m.createContext(e),r=i=>{const{children:a,...l}=i,c=m.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(i){const a=m.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Kn(t,e=[]){let n=[];function r(i,a){const l=m.createContext(a),c=n.length;n=[...n,a];const u=f=>{var _;const{scope:p,children:g,...x}=f,y=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,b=m.useMemo(()=>x,Object.values(x));return o.jsx(y.Provider,{value:b,children:g})};u.displayName=i+"Provider";function h(f,p){var y;const g=((y=p==null?void 0:p[t])==null?void 0:y[c])||l,x=m.useContext(g);if(x)return x;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(a=>m.createContext(a));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,KO(s,...e)]}function KO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Do(t){const e=XO(t),n=m.forwardRef((r,s)=>{const{children:i,...a}=r,l=m.Children.toArray(i),c=l.find(YO);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return o.jsx(e,{...a,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return o.jsx(e,{...a,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var QO=Do("Slot");function XO(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const a=ZO(s),l=JO(i,s.props);return s.type!==m.Fragment&&(l.ref=r?lC(r,a):a),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var cC=Symbol("radix.slottable");function uC(t){const e=({children:n})=>o.jsx(o.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=cC,e}function YO(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===cC}function JO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function ZO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Rv(t){const e=t+"CollectionProvider",[n,r]=Kn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:b,children:_}=y,w=Te.useRef(null),E=Te.useRef(new Map).current;return o.jsx(s,{scope:b,itemMap:E,collectionRef:w,children:_})};a.displayName=e;const l=t+"CollectionSlot",c=Do(l),u=Te.forwardRef((y,b)=>{const{scope:_,children:w}=y,E=i(l,_),j=Ce(b,E.collectionRef);return o.jsx(c,{ref:j,children:w})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=Do(h),g=Te.forwardRef((y,b)=>{const{scope:_,children:w,...E}=y,j=Te.useRef(null),P=Ce(b,j),O=i(h,_);return Te.useEffect(()=>(O.itemMap.set(j,{ref:j,...E}),()=>void O.itemMap.delete(j))),o.jsx(p,{[f]:"",ref:P,children:w})});g.displayName=h;function x(y){const b=i(t+"CollectionConsumer",y);return Te.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const E=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((O,S)=>E.indexOf(O.ref.current)-E.indexOf(S.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},x,r]}var eM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],xe=eM.reduce((t,e)=>{const n=Do(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function dC(t,e){t&&nr.flushSync(()=>t.dispatchEvent(e))}function mt(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function tM(t,e=globalThis==null?void 0:globalThis.document){const n=mt(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var nM="DismissableLayer",jx="dismissableLayer.update",rM="dismissableLayer.pointerDownOutside",sM="dismissableLayer.focusOutside",U1,hC=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wl=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:l,...c}=t,u=m.useContext(hC),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=m.useState({}),x=Ce(e,S=>f(S)),y=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=y.indexOf(b),w=h?y.indexOf(h):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,j=w>=_,P=oM(S=>{const N=S.target,C=[...u.branches].some(k=>k.contains(N));!j||C||(s==null||s(S),a==null||a(S),S.defaultPrevented||l==null||l())},p),O=aM(S=>{const N=S.target;[...u.branches].some(k=>k.contains(N))||(i==null||i(S),a==null||a(S),S.defaultPrevented||l==null||l())},p);return tM(S=>{w===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(U1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),$1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=U1)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),$1())},[h,u]),m.useEffect(()=>{const S=()=>g({});return document.addEventListener(jx,S),()=>document.removeEventListener(jx,S)},[]),o.jsx(xe.div,{...c,ref:x,style:{pointerEvents:E?j?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,O.onFocusCapture),onBlurCapture:me(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,P.onPointerDownCapture)})});wl.displayName=nM;var iM="DismissableLayerBranch",fC=m.forwardRef((t,e)=>{const n=m.useContext(hC),r=m.useRef(null),s=Ce(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),o.jsx(xe.div,{...t,ref:s})});fC.displayName=iM;function oM(t,e=globalThis==null?void 0:globalThis.document){const n=mt(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){mC(rM,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function aM(t,e=globalThis==null?void 0:globalThis.document){const n=mt(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&mC(sM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $1(){const t=new CustomEvent(jx);document.dispatchEvent(t)}function mC(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?dC(s,i):s.dispatchEvent(i)}var lM=wl,cM=fC,_t=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},uM="Portal",bl=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);_t(()=>i(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?F5.createPortal(o.jsx(xe.div,{...r,ref:e}),a):null});bl.displayName=uM;function dM(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var An=t=>{const{present:e,children:n}=t,r=hM(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Ce(r.ref,fM(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};An.displayName="Presence";function hM(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),a=t?"mounted":"unmounted",[l,c]=dM(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Vd(r.current);i.current=l==="mounted"?u:"none"},[l]),_t(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=Vd(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),_t(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const y=Vd(r.current).includes(g.animationName);if(g.target===e&&y&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(i.current=Vd(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Vd(t){return(t==null?void 0:t.animationName)||"none"}function fM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function As({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=mM({defaultProp:e,onChange:n}),i=t!==void 0,a=i?t:r,l=mt(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[a,c]}function mM({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=mt(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var pM="VisuallyHidden",Iu=m.forwardRef((t,e)=>o.jsx(xe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Iu.displayName=pM;var gM=Iu,Pv="ToastProvider",[Dv,xM,yM]=Rv("Toast"),[pC,OG]=Kn("Toast",[yM]),[vM,um]=pC(Pv),gC=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Pv}\`. Expected non-empty \`string\`.`),o.jsx(Dv.Provider,{scope:e,children:o.jsx(vM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(g=>g+1),[]),onToastRemove:m.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:a})})};gC.displayName=Pv;var xC="ToastViewport",wM=["F8"],kx="toast.viewportPause",Ax="toast.viewportResume",yC=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=wM,label:s="Notifications ({hotkey})",...i}=t,a=um(xC,n),l=xM(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Ce(e,f,a.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=a.toastCount>0;m.useEffect(()=>{const b=_=>{var E;r.length!==0&&r.every(j=>_[j]||_.code===j)&&((E=f.current)==null||E.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),m.useEffect(()=>{const b=c.current,_=f.current;if(x&&b&&_){const w=()=>{if(!a.isClosePausedRef.current){const O=new CustomEvent(kx);_.dispatchEvent(O),a.isClosePausedRef.current=!0}},E=()=>{if(a.isClosePausedRef.current){const O=new CustomEvent(Ax);_.dispatchEvent(O),a.isClosePausedRef.current=!1}},j=O=>{!b.contains(O.relatedTarget)&&E()},P=()=>{b.contains(document.activeElement)||E()};return b.addEventListener("focusin",w),b.addEventListener("focusout",j),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",P),window.addEventListener("blur",w),window.addEventListener("focus",E),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",j),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",P),window.removeEventListener("blur",w),window.removeEventListener("focus",E)}}},[x,a.isClosePausedRef]);const y=m.useCallback(({tabbingDirection:b})=>{const w=l().map(E=>{const j=E.ref.current,P=[j,...PM(j)];return b==="forwards"?P:P.reverse()});return(b==="forwards"?w.reverse():w).flat()},[l]);return m.useEffect(()=>{const b=f.current;if(b){const _=w=>{var P,O,S;const E=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!E){const N=document.activeElement,C=w.shiftKey;if(w.target===b&&C){(P=u.current)==null||P.focus();return}const D=y({tabbingDirection:C?"backwards":"forwards"}),R=D.findIndex(B=>B===N);ig(D.slice(R+1))?w.preventDefault():C?(O=u.current)==null||O.focus():(S=h.current)==null||S.focus()}};return b.addEventListener("keydown",_),()=>b.removeEventListener("keydown",_)}},[l,y]),o.jsxs(cM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&o.jsx(Ix,{ref:u,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"forwards"});ig(b)}}),o.jsx(Dv.Slot,{scope:n,children:o.jsx(xe.ol,{tabIndex:-1,...i,ref:p})}),x&&o.jsx(Ix,{ref:h,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"backwards"});ig(b)}})]})});yC.displayName=xC;var vC="ToastFocusProxy",Ix=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=um(vC,n);return o.jsx(Iu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});Ix.displayName=vC;var dm="Toast",bM="toast.swipeStart",_M="toast.swipeMove",SM="toast.swipeCancel",NM="toast.swipeEnd",wC=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...a}=t,[l=!0,c]=As({prop:r,defaultProp:s,onChange:i});return o.jsx(An,{present:n||l,children:o.jsx(CM,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:mt(t.onPause),onResume:mt(t.onResume),onSwipeStart:me(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});wC.displayName=dm;var[EM,TM]=pC(dm,{onClose(){}}),CM=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:g,...x}=t,y=um(dm,n),[b,_]=m.useState(null),w=Ce(e,B=>_(B)),E=m.useRef(null),j=m.useRef(null),P=s||y.duration,O=m.useRef(0),S=m.useRef(P),N=m.useRef(0),{onToastAdd:C,onToastRemove:k}=y,A=mt(()=>{var q;(b==null?void 0:b.contains(document.activeElement))&&((q=y.viewport)==null||q.focus()),a()}),D=m.useCallback(B=>{!B||B===1/0||(window.clearTimeout(N.current),O.current=new Date().getTime(),N.current=window.setTimeout(A,B))},[A]);m.useEffect(()=>{const B=y.viewport;if(B){const q=()=>{D(S.current),u==null||u()},ee=()=>{const re=new Date().getTime()-O.current;S.current=S.current-re,window.clearTimeout(N.current),c==null||c()};return B.addEventListener(kx,ee),B.addEventListener(Ax,q),()=>{B.removeEventListener(kx,ee),B.removeEventListener(Ax,q)}}},[y.viewport,P,c,u,D]),m.useEffect(()=>{i&&!y.isClosePausedRef.current&&D(P)},[i,P,y.isClosePausedRef,D]),m.useEffect(()=>(C(),()=>k()),[C,k]);const R=m.useMemo(()=>b?CC(b):null,[b]);return y.viewport?o.jsxs(o.Fragment,{children:[R&&o.jsx(jM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),o.jsx(EM,{scope:n,onClose:A,children:nr.createPortal(o.jsx(Dv.ItemSlot,{scope:n,children:o.jsx(lM,{asChild:!0,onEscapeKeyDown:me(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||A(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...x,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:me(t.onPointerDown,B=>{B.button===0&&(E.current={x:B.clientX,y:B.clientY})}),onPointerMove:me(t.onPointerMove,B=>{if(!E.current)return;const q=B.clientX-E.current.x,ee=B.clientY-E.current.y,re=!!j.current,V=["left","right"].includes(y.swipeDirection),z=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,K=V?z(0,q):0,U=V?0:z(0,ee),W=B.pointerType==="touch"?10:2,J={x:K,y:U},ne={originalEvent:B,delta:J};re?(j.current=J,Fd(_M,f,ne,{discrete:!1})):B1(J,y.swipeDirection,W)?(j.current=J,Fd(bM,h,ne,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(q)>W||Math.abs(ee)>W)&&(E.current=null)}),onPointerUp:me(t.onPointerUp,B=>{const q=j.current,ee=B.target;if(ee.hasPointerCapture(B.pointerId)&&ee.releasePointerCapture(B.pointerId),j.current=null,E.current=null,q){const re=B.currentTarget,V={originalEvent:B,delta:q};B1(q,y.swipeDirection,y.swipeThreshold)?Fd(NM,g,V,{discrete:!0}):Fd(SM,p,V,{discrete:!0}),re.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),jM=t=>{const{__scopeToast:e,children:n,...r}=t,s=um(dm,e),[i,a]=m.useState(!1),[l,c]=m.useState(!1);return IM(()=>a(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(bl,{asChild:!0,children:o.jsx(Iu,{...r,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",n]})})})},kM="ToastTitle",bC=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(xe.div,{...r,ref:e})});bC.displayName=kM;var AM="ToastDescription",_C=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return o.jsx(xe.div,{...r,ref:e})});_C.displayName=AM;var SC="ToastAction",NC=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?o.jsx(TC,{altText:n,asChild:!0,children:o.jsx(Ov,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${SC}\`. Expected non-empty \`string\`.`),null)});NC.displayName=SC;var EC="ToastClose",Ov=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=TM(EC,n);return o.jsx(TC,{asChild:!0,children:o.jsx(xe.button,{type:"button",...r,ref:e,onClick:me(t.onClick,s.onClose)})})});Ov.displayName=EC;var TC=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return o.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function CC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),RM(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...CC(r))}}),e}function Fd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?dC(s,i):s.dispatchEvent(i)}var B1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function IM(t=()=>{}){const e=mt(t);_t(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function RM(t){return t.nodeType===t.ELEMENT_NODE}function PM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ig(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var DM=gC,jC=yC,kC=wC,AC=bC,IC=_C,RC=NC,PC=Ov;function DC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=DC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function OC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=DC(t))&&(r&&(r+=" "),r+=e);return r}const W1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,H1=OC,Ru=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return H1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=W1(h)||W1(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...g}=h;return Object.entries(g).every(x=>{let[y,b]=x;return Array.isArray(b)?b.includes({...i,...l}[y]):{...i,...l}[y]===b})?[...u,f,p]:u},[]);return H1(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>m.createElement("svg",{ref:c,...MM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:MC("lucide",s),...l},[...a.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(LM,{ref:i,iconNode:e,className:MC(`lucide-${OM(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=ue("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=ue("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=ue("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=ue("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=ue("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=ue("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=ue("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=ue("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=ue("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=ue("ChartNoAxesGantt",[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ac=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=ue("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=ue("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=ue("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=ue("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=ue("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=ue("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=ue("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=ue("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=ue("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=ue("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=ue("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=ue("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=ue("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=ue("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=ue("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=ue("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=ue("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=ue("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=ue("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fv=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=ue("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=ue("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=ue("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ue("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=ue("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=ue("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=ue("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=ue("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=ue("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=ue("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=ue("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=ue("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=ue("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=ue("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=ue("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Wv="-",l3=t=>{const e=u3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(Wv);return l[0]===""&&l.length!==1&&l.shift(),QC(l,e)||c3(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},QC=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?QC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Wv);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},Q1=/^\[(.+)\]$/,c3=t=>{if(Q1.test(t)){const e=Q1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},u3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return h3(Object.entries(t.classGroups),n).forEach(([i,a])=>{Vx(a,r,i,e)}),r},Vx=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:X1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(d3(s)){Vx(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,a])=>{Vx(a,X1(e,i),n,r)})})},X1=(t,e)=>{let n=t;return e.split(Wv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},d3=t=>t.isThemeGetter,h3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[n,s]}):t,f3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,a)=>{n.set(i,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let a=n.get(i);if(a!==void 0)return a;if((a=r.get(i))!==void 0)return s(i,a),a},set(i,a){n.has(i)?n.set(i,a):s(i,a)}}},XC="!",m3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,a=l=>{const c=[];let u=0,h=0,f;for(let b=0;b<l.length;b++){let _=l[b];if(u===0){if(_===s&&(r||l.slice(b,b+i)===e)){c.push(l.slice(h,b)),h=b+i;continue}if(_==="/"){f=b;continue}}_==="["?u++:_==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(XC),x=g?p.substring(1):p,y=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:a}):a},p3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},g3=t=>({cache:f3(t.cacheSize),parseClassName:m3(t),...l3(t)}),x3=/\s+/,y3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],a=t.trim().split(x3);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let x=!!g,y=r(x?p.substring(0,g):p);if(!y){if(!x){l=u+(l.length>0?" "+l:l);continue}if(y=r(p),!y){l=u+(l.length>0?" "+l:l);continue}x=!1}const b=p3(h).join(":"),_=f?b+XC:b,w=_+y;if(i.includes(w))continue;i.push(w);const E=s(y,x);for(let j=0;j<E.length;++j){const P=E[j];i.push(_+P)}l=u+(l.length>0?" "+l:l)}return l};function v3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=YC(e))&&(r&&(r+=" "),r+=n);return r}const YC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=YC(t[r]))&&(n&&(n+=" "),n+=e);return n};function w3(t,...e){let n,r,s,i=a;function a(c){const u=e.reduce((h,f)=>f(h),t());return n=g3(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=y3(c,n);return s(c,h),h}return function(){return i(v3.apply(null,arguments))}}const Ze=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},JC=/^\[(?:([a-z-]+):)?(.+)\]$/i,b3=/^\d+\/\d+$/,_3=new Set(["px","full","screen"]),S3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,N3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,E3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,T3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,C3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ps=t=>ka(t)||_3.has(t)||b3.test(t),Qs=t=>_l(t,"length",O3),ka=t=>!!t&&!Number.isNaN(Number(t)),og=t=>_l(t,"number",ka),lc=t=>!!t&&Number.isInteger(Number(t)),j3=t=>t.endsWith("%")&&ka(t.slice(0,-1)),_e=t=>JC.test(t),Xs=t=>S3.test(t),k3=new Set(["length","size","percentage"]),A3=t=>_l(t,k3,ZC),I3=t=>_l(t,"position",ZC),R3=new Set(["image","url"]),P3=t=>_l(t,R3,L3),D3=t=>_l(t,"",M3),cc=()=>!0,_l=(t,e,n)=>{const r=JC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},O3=t=>N3.test(t)&&!E3.test(t),ZC=()=>!1,M3=t=>T3.test(t),L3=t=>C3.test(t),V3=()=>{const t=Ze("colors"),e=Ze("spacing"),n=Ze("blur"),r=Ze("brightness"),s=Ze("borderColor"),i=Ze("borderRadius"),a=Ze("borderSpacing"),l=Ze("borderWidth"),c=Ze("contrast"),u=Ze("grayscale"),h=Ze("hueRotate"),f=Ze("invert"),p=Ze("gap"),g=Ze("gradientColorStops"),x=Ze("gradientColorStopPositions"),y=Ze("inset"),b=Ze("margin"),_=Ze("opacity"),w=Ze("padding"),E=Ze("saturate"),j=Ze("scale"),P=Ze("sepia"),O=Ze("skew"),S=Ze("space"),N=Ze("translate"),C=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",_e,e],D=()=>[_e,e],R=()=>["",ps,Qs],B=()=>["auto",ka,_e],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ee=()=>["solid","dashed","dotted","double","none"],re=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",_e],K=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[ka,_e];return{cacheSize:500,separator:":",theme:{colors:[cc],spacing:[ps,Qs],blur:["none","",Xs,_e],brightness:U(),borderColor:[t],borderRadius:["none","","full",Xs,_e],borderSpacing:D(),borderWidth:R(),contrast:U(),grayscale:z(),hueRotate:U(),invert:z(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[j3,Qs],inset:A(),margin:A(),opacity:U(),padding:D(),saturate:U(),scale:U(),sepia:z(),skew:U(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[Xs]}],"break-after":[{"break-after":K()}],"break-before":[{"break-before":K()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),_e]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lc,_e]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",lc,_e]}],"grid-cols":[{"grid-cols":[cc]}],"col-start-end":[{col:["auto",{span:["full",lc,_e]},_e]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[cc]}],"row-start-end":[{row:["auto",{span:[lc,_e]},_e]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[Xs]},Xs]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Xs,Qs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",og]}],"font-family":[{font:[cc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",ka,og]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ps,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ps,Qs]}],"underline-offset":[{"underline-offset":["auto",ps,_e]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),I3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",A3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},P3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...ee(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:ee()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ee()]}],"outline-offset":[{"outline-offset":[ps,_e]}],"outline-w":[{outline:[ps,Qs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[ps,Qs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Xs,D3]}],"shadow-color":[{shadow:[cc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...re(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":re()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Xs,_e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[E]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[lc,_e]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ps,Qs,og]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},F3=w3(V3);function $(...t){return F3(OC(t))}const z3=DM,ej=m.forwardRef(({className:t,...e},n)=>o.jsx(jC,{ref:n,className:$("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));ej.displayName=jC.displayName;const U3=Ru("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),tj=m.forwardRef(({className:t,variant:e,...n},r)=>o.jsx(kC,{ref:r,className:$(U3({variant:e}),t),...n}));tj.displayName=kC.displayName;const $3=m.forwardRef(({className:t,...e},n)=>o.jsx(RC,{ref:n,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));$3.displayName=RC.displayName;const nj=m.forwardRef(({className:t,...e},n)=>o.jsx(PC,{ref:n,className:$("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:o.jsx(Lo,{className:"h-4 w-4"})}));nj.displayName=PC.displayName;const rj=m.forwardRef(({className:t,...e},n)=>o.jsx(AC,{ref:n,className:$("text-sm font-semibold",t),...e}));rj.displayName=AC.displayName;const sj=m.forwardRef(({className:t,...e},n)=>o.jsx(IC,{ref:n,className:$("text-sm opacity-90",t),...e}));sj.displayName=IC.displayName;function B3(){const{toasts:t}=Ki();return o.jsxs(z3,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return o.jsxs(tj,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[n&&o.jsx(rj,{children:n}),r&&o.jsx(sj,{children:r})]}),s,o.jsx(nj,{})]},e)}),o.jsx(ej,{})]})}var W3=FN[" useId ".trim().toString()]||(()=>{}),H3=0;function Zr(t){const[e,n]=m.useState(W3());return _t(()=>{n(r=>r??String(H3++))},[t]),e?`radix-${e}`:""}const q3=["top","right","bottom","left"],Di=Math.min,Mn=Math.max,sf=Math.round,zd=Math.floor,es=t=>({x:t,y:t}),G3={left:"right",right:"left",bottom:"top",top:"bottom"},K3={start:"end",end:"start"};function Fx(t,e,n){return Mn(t,Di(e,n))}function Is(t,e){return typeof t=="function"?t(e):t}function Rs(t){return t.split("-")[0]}function Sl(t){return t.split("-")[1]}function Hv(t){return t==="x"?"y":"x"}function qv(t){return t==="y"?"height":"width"}function Oi(t){return["top","bottom"].includes(Rs(t))?"y":"x"}function Gv(t){return Hv(Oi(t))}function Q3(t,e,n){n===void 0&&(n=!1);const r=Sl(t),s=Gv(t),i=qv(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=of(a)),[a,of(a)]}function X3(t){const e=of(t);return[zx(t),e,zx(e)]}function zx(t){return t.replace(/start|end/g,e=>K3[e])}function Y3(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:a;default:return[]}}function J3(t,e,n,r){const s=Sl(t);let i=Y3(Rs(t),n==="start",r);return s&&(i=i.map(a=>a+"-"+s),e&&(i=i.concat(i.map(zx)))),i}function of(t){return t.replace(/left|right|bottom|top/g,e=>G3[e])}function Z3(t){return{top:0,right:0,bottom:0,left:0,...t}}function ij(t){return typeof t!="number"?Z3(t):{top:t,right:t,bottom:t,left:t}}function af(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Y1(t,e,n){let{reference:r,floating:s}=t;const i=Oi(e),a=Gv(e),l=qv(a),c=Rs(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Sl(e)){case"start":g[a]-=p*(n&&u?-1:1);break;case"end":g[a]+=p*(n&&u?-1:1);break}return g}const eL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:a}=n,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=Y1(u,r,c),p=r,g={},x=0;for(let y=0;y<l.length;y++){const{name:b,fn:_}=l[y],{x:w,y:E,data:j,reset:P}=await _({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});h=w??h,f=E??f,g={...g,[b]:{...g[b],...j}},P&&x<=50&&(x++,typeof P=="object"&&(P.placement&&(p=P.placement),P.rects&&(u=P.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):P.rects),{x:h,y:f}=Y1(u,p,c)),y=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:g}};async function lu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Is(e,t),x=ij(g),b=l[p?f==="floating"?"reference":"floating":f],_=af(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),j=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},P=af(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:E,strategy:c}):w);return{top:(_.top-P.top+x.top)/j.y,bottom:(P.bottom-_.bottom+x.bottom)/j.y,left:(_.left-P.left+x.left)/j.x,right:(P.right-_.right+x.right)/j.x}}const tL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Is(t,e)||{};if(u==null)return{};const f=ij(h),p={x:n,y:r},g=Gv(s),x=qv(g),y=await a.getDimensions(u),b=g==="y",_=b?"top":"left",w=b?"bottom":"right",E=b?"clientHeight":"clientWidth",j=i.reference[x]+i.reference[g]-p[g]-i.floating[x],P=p[g]-i.reference[g],O=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let S=O?O[E]:0;(!S||!await(a.isElement==null?void 0:a.isElement(O)))&&(S=l.floating[E]||i.floating[x]);const N=j/2-P/2,C=S/2-y[x]/2-1,k=Di(f[_],C),A=Di(f[w],C),D=k,R=S-y[x]-A,B=S/2-y[x]/2+N,q=Fx(D,B,R),ee=!c.arrow&&Sl(s)!=null&&B!==q&&i.reference[x]/2-(B<D?k:A)-y[x]/2<0,re=ee?B<D?B-D:B-R:0;return{[g]:p[g]+re,data:{[g]:q,centerOffset:B-q-re,...ee&&{alignmentOffset:re}},reset:ee}}}),nL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...b}=Is(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=Rs(s),w=Oi(l),E=Rs(l)===l,j=await(c.isRTL==null?void 0:c.isRTL(u.floating)),P=p||(E||!y?[of(l)]:X3(l)),O=x!=="none";!p&&O&&P.push(...J3(l,y,x,j));const S=[l,...P],N=await lu(e,b),C=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(N[_]),f){const B=Q3(s,a,j);C.push(N[B[0]],N[B[1]])}if(k=[...k,{placement:s,overflows:C}],!C.every(B=>B<=0)){var A,D;const B=(((A=i.flip)==null?void 0:A.index)||0)+1,q=S[B];if(q)return{data:{index:B,overflows:k},reset:{placement:q}};let ee=(D=k.filter(re=>re.overflows[0]<=0).sort((re,V)=>re.overflows[1]-V.overflows[1])[0])==null?void 0:D.placement;if(!ee)switch(g){case"bestFit":{var R;const re=(R=k.filter(V=>{if(O){const z=Oi(V.placement);return z===w||z==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(z=>z>0).reduce((z,K)=>z+K,0)]).sort((V,z)=>V[1]-z[1])[0])==null?void 0:R[0];re&&(ee=re);break}case"initialPlacement":ee=l;break}if(s!==ee)return{reset:{placement:ee}}}return{}}}};function J1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Z1(t){return q3.some(e=>t[e]>=0)}const rL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Is(t,e);switch(r){case"referenceHidden":{const i=await lu(e,{...s,elementContext:"reference"}),a=J1(i,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Z1(a)}}}case"escaped":{const i=await lu(e,{...s,altBoundary:!0}),a=J1(i,n.floating);return{data:{escapedOffsets:a,escaped:Z1(a)}}}default:return{}}}}};async function sL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=Rs(n),l=Sl(n),c=Oi(n)==="y",u=["left","top"].includes(a)?-1:1,h=i&&c?-1:1,f=Is(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof x=="number"&&(g=l==="end"?x*-1:x),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const iL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:a,middlewareData:l}=e,c=await sL(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:a}}}}},oL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:a=!1,limiter:l={fn:b=>{let{x:_,y:w}=b;return{x:_,y:w}}},...c}=Is(t,e),u={x:n,y:r},h=await lu(e,c),f=Oi(Rs(s)),p=Hv(f);let g=u[p],x=u[f];if(i){const b=p==="y"?"top":"left",_=p==="y"?"bottom":"right",w=g+h[b],E=g-h[_];g=Fx(w,g,E)}if(a){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",w=x+h[b],E=x-h[_];x=Fx(w,x,E)}const y=l.fn({...e,[p]:g,[f]:x});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:i,[f]:a}}}}}},aL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Is(t,e),h={x:n,y:r},f=Oi(s),p=Hv(f);let g=h[p],x=h[f];const y=Is(l,e),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const E=p==="y"?"height":"width",j=i.reference[p]-i.floating[E]+b.mainAxis,P=i.reference[p]+i.reference[E]-b.mainAxis;g<j?g=j:g>P&&(g=P)}if(u){var _,w;const E=p==="y"?"width":"height",j=["top","left"].includes(Rs(s)),P=i.reference[f]-i.floating[E]+(j&&((_=a.offset)==null?void 0:_[f])||0)+(j?0:b.crossAxis),O=i.reference[f]+i.reference[E]+(j?0:((w=a.offset)==null?void 0:w[f])||0)-(j?b.crossAxis:0);x<P?x=P:x>O&&(x=O)}return{[p]:g,[f]:x}}}},lL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:a,elements:l}=e,{apply:c=()=>{},...u}=Is(t,e),h=await lu(e,u),f=Rs(s),p=Sl(s),g=Oi(s)==="y",{width:x,height:y}=i.floating;let b,_;f==="top"||f==="bottom"?(b=f,_=p===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,b=p==="end"?"top":"bottom");const w=y-h.top-h.bottom,E=x-h.left-h.right,j=Di(y-h[b],w),P=Di(x-h[_],E),O=!e.middlewareData.shift;let S=j,N=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(S=w),O&&!p){const k=Mn(h.left,0),A=Mn(h.right,0),D=Mn(h.top,0),R=Mn(h.bottom,0);g?N=x-2*(k!==0||A!==0?k+A:Mn(h.left,h.right)):S=y-2*(D!==0||R!==0?D+R:Mn(h.top,h.bottom))}await c({...e,availableWidth:N,availableHeight:S});const C=await a.getDimensions(l.floating);return x!==C.width||y!==C.height?{reset:{rects:!0}}:{}}}};function mm(){return typeof window<"u"}function Nl(t){return oj(t)?(t.nodeName||"").toLowerCase():"#document"}function Bn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function us(t){var e;return(e=(oj(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function oj(t){return mm()?t instanceof Node||t instanceof Bn(t).Node:!1}function Ir(t){return mm()?t instanceof Element||t instanceof Bn(t).Element:!1}function os(t){return mm()?t instanceof HTMLElement||t instanceof Bn(t).HTMLElement:!1}function e_(t){return!mm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Bn(t).ShadowRoot}function Du(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Rr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function cL(t){return["table","td","th"].includes(Nl(t))}function pm(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Kv(t){const e=Qv(),n=Ir(t)?Rr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function uL(t){let e=Mi(t);for(;os(e)&&!rl(e);){if(Kv(e))return e;if(pm(e))return null;e=Mi(e)}return null}function Qv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function rl(t){return["html","body","#document"].includes(Nl(t))}function Rr(t){return Bn(t).getComputedStyle(t)}function gm(t){return Ir(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Mi(t){if(Nl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||e_(t)&&t.host||us(t);return e_(e)?e.host:e}function aj(t){const e=Mi(t);return rl(e)?t.ownerDocument?t.ownerDocument.body:t.body:os(e)&&Du(e)?e:aj(e)}function cu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=aj(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),a=Bn(s);if(i){const l=Ux(a);return e.concat(a,a.visualViewport||[],Du(s)?s:[],l&&n?cu(l):[])}return e.concat(s,cu(s,[],n))}function Ux(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function lj(t){const e=Rr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=os(t),i=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=sf(n)!==i||sf(r)!==a;return l&&(n=i,r=a),{width:n,height:r,$:l}}function Xv(t){return Ir(t)?t:t.contextElement}function Aa(t){const e=Xv(t);if(!os(e))return es(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=lj(e);let a=(i?sf(n.width):n.width)/r,l=(i?sf(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const dL=es(0);function cj(t){const e=Bn(t);return!Qv()||!e.visualViewport?dL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function hL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Bn(t)?!1:e}function Vo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Xv(t);let a=es(1);e&&(r?Ir(r)&&(a=Aa(r)):a=Aa(t));const l=hL(i,n,r)?cj(i):es(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,h=s.width/a.x,f=s.height/a.y;if(i){const p=Bn(i),g=r&&Ir(r)?Bn(r):r;let x=p,y=Ux(x);for(;y&&r&&g!==x;){const b=Aa(y),_=y.getBoundingClientRect(),w=Rr(y),E=_.left+(y.clientLeft+parseFloat(w.paddingLeft))*b.x,j=_.top+(y.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,h*=b.x,f*=b.y,c+=E,u+=j,x=Bn(y),y=Ux(x)}}return af({width:h,height:f,x:c,y:u})}function Yv(t,e){const n=gm(t).scrollLeft;return e?e.left+n:Vo(us(t)).left+n}function uj(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Yv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function fL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",a=us(r),l=e?pm(e.floating):!1;if(r===a||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=es(1);const h=es(0),f=os(r);if((f||!f&&!i)&&((Nl(r)!=="body"||Du(a))&&(c=gm(r)),os(r))){const g=Vo(r);u=Aa(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=a&&!f&&!i?uj(a,c,!0):es(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function mL(t){return Array.from(t.getClientRects())}function pL(t){const e=us(t),n=gm(t),r=t.ownerDocument.body,s=Mn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Mn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Yv(t);const l=-n.scrollTop;return Rr(r).direction==="rtl"&&(a+=Mn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:a,y:l}}function gL(t,e){const n=Bn(t),r=us(t),s=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){i=s.width,a=s.height;const u=Qv();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:a,x:l,y:c}}function xL(t,e){const n=Vo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=os(t)?Aa(t):es(1),a=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:a,height:l,x:c,y:u}}function t_(t,e,n){let r;if(e==="viewport")r=gL(t,n);else if(e==="document")r=pL(us(t));else if(Ir(e))r=xL(e,n);else{const s=cj(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return af(r)}function dj(t,e){const n=Mi(t);return n===e||!Ir(n)||rl(n)?!1:Rr(n).position==="fixed"||dj(n,e)}function yL(t,e){const n=e.get(t);if(n)return n;let r=cu(t,[],!1).filter(l=>Ir(l)&&Nl(l)!=="body"),s=null;const i=Rr(t).position==="fixed";let a=i?Mi(t):t;for(;Ir(a)&&!rl(a);){const l=Rr(a),c=Kv(a);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Du(a)&&!c&&dj(t,a))?r=r.filter(h=>h!==a):s=l,a=Mi(a)}return e.set(t,r),r}function vL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?pm(e)?[]:yL(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,h)=>{const f=t_(e,h,s);return u.top=Mn(f.top,u.top),u.right=Di(f.right,u.right),u.bottom=Di(f.bottom,u.bottom),u.left=Mn(f.left,u.left),u},t_(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function wL(t){const{width:e,height:n}=lj(t);return{width:e,height:n}}function bL(t,e,n){const r=os(e),s=us(e),i=n==="fixed",a=Vo(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=es(0);if(r||!r&&!i)if((Nl(e)!=="body"||Du(s))&&(l=gm(e)),r){const p=Vo(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Yv(s));const u=s&&!r&&!i?uj(s,l):es(0),h=a.left+l.scrollLeft-c.x-u.x,f=a.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:a.width,height:a.height}}function ag(t){return Rr(t).position==="static"}function n_(t,e){if(!os(t)||Rr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return us(t)===n&&(n=n.ownerDocument.body),n}function hj(t,e){const n=Bn(t);if(pm(t))return n;if(!os(t)){let s=Mi(t);for(;s&&!rl(s);){if(Ir(s)&&!ag(s))return s;s=Mi(s)}return n}let r=n_(t,e);for(;r&&cL(r)&&ag(r);)r=n_(r,e);return r&&rl(r)&&ag(r)&&!Kv(r)?n:r||uL(t)||n}const _L=async function(t){const e=this.getOffsetParent||hj,n=this.getDimensions,r=await n(t.floating);return{reference:bL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function SL(t){return Rr(t).direction==="rtl"}const NL={convertOffsetParentRelativeRectToViewportRelativeRect:fL,getDocumentElement:us,getClippingRect:vL,getOffsetParent:hj,getElementRects:_L,getClientRects:mL,getDimensions:wL,getScale:Aa,isElement:Ir,isRTL:SL};function fj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function EL(t,e){let n=null,r;const s=us(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=u;if(l||e(),!p||!g)return;const x=zd(f),y=zd(s.clientWidth-(h+p)),b=zd(s.clientHeight-(f+g)),_=zd(h),E={rootMargin:-x+"px "+-y+"px "+-b+"px "+-_+"px",threshold:Mn(0,Di(1,c))||1};let j=!0;function P(O){const S=O[0].intersectionRatio;if(S!==c){if(!j)return a();S?a(!1,S):r=setTimeout(()=>{a(!1,1e-7)},1e3)}S===1&&!fj(u,t.getBoundingClientRect())&&a(),j=!1}try{n=new IntersectionObserver(P,{...E,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,E)}n.observe(t)}return a(!0),i}function TL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Xv(t),h=s||i?[...u?cu(u):[],...cu(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=u&&l?EL(u,n):null;let p=-1,g=null;a&&(g=new ResizeObserver(_=>{let[w]=_;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let x,y=c?Vo(t):null;c&&b();function b(){const _=Vo(t);y&&!fj(y,_)&&n(),y=_,x=requestAnimationFrame(b)}return n(),()=>{var _;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(x)}}const CL=iL,jL=oL,kL=nL,AL=lL,IL=rL,r_=tL,RL=aL,PL=(t,e,n)=>{const r=new Map,s={platform:NL,...n},i={...s.platform,_c:r};return eL(t,e,{...s,platform:i})};var gh=typeof document<"u"?m.useLayoutEffect:m.useEffect;function lf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!lf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!lf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function mj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function s_(t,e){const n=mj(t);return Math.round(e*n)/n}function lg(t){const e=m.useRef(t);return gh(()=>{e.current=t}),e}function DL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=m.useState(r);lf(p,r)||g(r);const[x,y]=m.useState(null),[b,_]=m.useState(null),w=m.useCallback(V=>{V!==O.current&&(O.current=V,y(V))},[]),E=m.useCallback(V=>{V!==S.current&&(S.current=V,_(V))},[]),j=i||x,P=a||b,O=m.useRef(null),S=m.useRef(null),N=m.useRef(h),C=c!=null,k=lg(c),A=lg(s),D=lg(u),R=m.useCallback(()=>{if(!O.current||!S.current)return;const V={placement:e,strategy:n,middleware:p};A.current&&(V.platform=A.current),PL(O.current,S.current,V).then(z=>{const K={...z,isPositioned:D.current!==!1};B.current&&!lf(N.current,K)&&(N.current=K,nr.flushSync(()=>{f(K)}))})},[p,e,n,A,D]);gh(()=>{u===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[u]);const B=m.useRef(!1);gh(()=>(B.current=!0,()=>{B.current=!1}),[]),gh(()=>{if(j&&(O.current=j),P&&(S.current=P),j&&P){if(k.current)return k.current(j,P,R);R()}},[j,P,R,k,C]);const q=m.useMemo(()=>({reference:O,floating:S,setReference:w,setFloating:E}),[w,E]),ee=m.useMemo(()=>({reference:j,floating:P}),[j,P]),re=m.useMemo(()=>{const V={position:n,left:0,top:0};if(!ee.floating)return V;const z=s_(ee.floating,h.x),K=s_(ee.floating,h.y);return l?{...V,transform:"translate("+z+"px, "+K+"px)",...mj(ee.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:K}},[n,l,ee.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:R,refs:q,elements:ee,floatingStyles:re}),[h,R,q,ee,re])}const OL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?r_({element:r.current,padding:s}).fn(n):{}:r?r_({element:r,padding:s}).fn(n):{}}}},ML=(t,e)=>({...CL(t),options:[t,e]}),LL=(t,e)=>({...jL(t),options:[t,e]}),VL=(t,e)=>({...RL(t),options:[t,e]}),FL=(t,e)=>({...kL(t),options:[t,e]}),zL=(t,e)=>({...AL(t),options:[t,e]}),UL=(t,e)=>({...IL(t),options:[t,e]}),$L=(t,e)=>({...OL(t),options:[t,e]});var BL="Arrow",pj=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return o.jsx(xe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});pj.displayName=BL;var WL=pj;function gj(t){const[e,n]=m.useState(void 0);return _t(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let a,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Jv="Popper",[xj,El]=Kn(Jv),[HL,yj]=xj(Jv),vj=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return o.jsx(HL,{scope:e,anchor:r,onAnchorChange:s,children:n})};vj.displayName=Jv;var wj="PopperAnchor",bj=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=yj(wj,n),a=m.useRef(null),l=Ce(e,a);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:o.jsx(xe.div,{...s,ref:l})});bj.displayName=wj;var Zv="PopperContent",[qL,GL]=xj(Zv),_j=m.forwardRef((t,e)=>{var M,Y,ae,X,he,ie;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:x,...y}=t,b=yj(Zv,n),[_,w]=m.useState(null),E=Ce(e,ge=>w(ge)),[j,P]=m.useState(null),O=gj(j),S=(O==null?void 0:O.width)??0,N=(O==null?void 0:O.height)??0,C=r+(i!=="center"?"-"+i:""),k=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},A=Array.isArray(u)?u:[u],D=A.length>0,R={padding:k,boundary:A.filter(QL),altBoundary:D},{refs:B,floatingStyles:q,placement:ee,isPositioned:re,middlewareData:V}=DL({strategy:"fixed",placement:C,whileElementsMounted:(...ge)=>TL(...ge,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[ML({mainAxis:s+N,alignmentAxis:a}),c&&LL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?VL():void 0,...R}),c&&FL({...R}),zL({...R,apply:({elements:ge,rects:Ee,availableWidth:pt,availableHeight:Re})=>{const{width:Be,height:Ft}=Ee.reference,qe=ge.floating.style;qe.setProperty("--radix-popper-available-width",`${pt}px`),qe.setProperty("--radix-popper-available-height",`${Re}px`),qe.setProperty("--radix-popper-anchor-width",`${Be}px`),qe.setProperty("--radix-popper-anchor-height",`${Ft}px`)}}),j&&$L({element:j,padding:l}),XL({arrowWidth:S,arrowHeight:N}),p&&UL({strategy:"referenceHidden",...R})]}),[z,K]=Ej(ee),U=mt(x);_t(()=>{re&&(U==null||U())},[re,U]);const W=(M=V.arrow)==null?void 0:M.x,J=(Y=V.arrow)==null?void 0:Y.y,ne=((ae=V.arrow)==null?void 0:ae.centerOffset)!==0,[te,se]=m.useState();return _t(()=>{_&&se(window.getComputedStyle(_).zIndex)},[_]),o.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:re?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(X=V.transformOrigin)==null?void 0:X.x,(he=V.transformOrigin)==null?void 0:he.y].join(" "),...((ie=V.hide)==null?void 0:ie.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:o.jsx(qL,{scope:n,placedSide:z,onArrowChange:P,arrowX:W,arrowY:J,shouldHideArrow:ne,children:o.jsx(xe.div,{"data-side":z,"data-align":K,...y,ref:E,style:{...y.style,animation:re?void 0:"none"}})})})});_j.displayName=Zv;var Sj="PopperArrow",KL={top:"bottom",right:"left",bottom:"top",left:"right"},Nj=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=GL(Sj,r),a=KL[i.placedSide];return o.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:o.jsx(WL,{...s,ref:n,style:{...s.style,display:"block"}})})});Nj.displayName=Sj;function QL(t){return t!==null}var XL=t=>({name:"transformOrigin",options:t,fn(e){var b,_,w;const{placement:n,rects:r,middlewareData:s}=e,a=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,h]=Ej(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let x="",y="";return u==="bottom"?(x=a?f:`${p}px`,y=`${-c}px`):u==="top"?(x=a?f:`${p}px`,y=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,y=a?f:`${g}px`):u==="left"&&(x=`${r.floating.width+c}px`,y=a?f:`${g}px`),{data:{x,y}}}});function Ej(t){const[e,n="center"]=t.split("-");return[e,n]}var e0=vj,xm=bj,t0=_j,n0=Nj,[ym,MG]=Kn("Tooltip",[El]),vm=El(),Tj="TooltipProvider",YL=700,$x="tooltip.open",[JL,r0]=ym(Tj),Cj=t=>{const{__scopeTooltip:e,delayDuration:n=YL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,a=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(JL,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};Cj.displayName=Tj;var wm="Tooltip",[ZL,Ou]=ym(wm),jj=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:a,delayDuration:l}=t,c=r0(wm,t.__scopeTooltip),u=vm(e),[h,f]=m.useState(null),p=Zr(),g=m.useRef(0),x=a??c.disableHoverableContent,y=l??c.delayDuration,b=m.useRef(!1),[_=!1,w]=As({prop:r,defaultProp:s,onChange:S=>{S?(c.onOpen(),document.dispatchEvent(new CustomEvent($x))):c.onClose(),i==null||i(S)}}),E=m.useMemo(()=>_?b.current?"delayed-open":"instant-open":"closed",[_]),j=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,w(!0)},[w]),P=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w(!1)},[w]),O=m.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,w(!0),g.current=0},y)},[y,w]);return m.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),o.jsx(e0,{...u,children:o.jsx(ZL,{scope:e,contentId:p,open:_,stateAttribute:E,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?O():j()},[c.isOpenDelayedRef,O,j]),onTriggerLeave:m.useCallback(()=>{x?P():(window.clearTimeout(g.current),g.current=0)},[P,x]),onOpen:j,onClose:P,disableHoverableContent:x,children:n})})};jj.displayName=wm;var Bx="TooltipTrigger",kj=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ou(Bx,n),i=r0(Bx,n),a=vm(n),l=m.useRef(null),c=Ce(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),o.jsx(xm,{asChild:!0,...a,children:o.jsx(xe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:me(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:me(t.onBlur,s.onClose),onClick:me(t.onClick,s.onClose)})})});kj.displayName=Bx;var s0="TooltipPortal",[e6,t6]=ym(s0,{forceMount:void 0}),Aj=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=Ou(s0,e);return o.jsx(e6,{scope:e,forceMount:n,children:o.jsx(An,{present:n||i.open,children:o.jsx(bl,{asChild:!0,container:s,children:r})})})};Aj.displayName=s0;var sl="TooltipContent",Ij=m.forwardRef((t,e)=>{const n=t6(sl,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,a=Ou(sl,t.__scopeTooltip);return o.jsx(An,{present:r||a.open,children:a.disableHoverableContent?o.jsx(Rj,{side:s,...i,ref:e}):o.jsx(n6,{side:s,...i,ref:e})})}),n6=m.forwardRef((t,e)=>{const n=Ou(sl,t.__scopeTooltip),r=r0(sl,t.__scopeTooltip),s=m.useRef(null),i=Ce(e,s),[a,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),g=m.useCallback((x,y)=>{const b=x.currentTarget,_={x:x.clientX,y:x.clientY},w=a6(_,b.getBoundingClientRect()),E=l6(_,w),j=c6(y.getBoundingClientRect()),P=d6([...E,...j]);l(P),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const x=b=>g(b,h),y=b=>g(b,c);return c.addEventListener("pointerleave",x),h.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",y)}}},[c,h,g,p]),m.useEffect(()=>{if(a){const x=y=>{const b=y.target,_={x:y.clientX,y:y.clientY},w=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),E=!u6(_,a);w?p():E&&(p(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,h,a,u,p]),o.jsx(Rj,{...t,ref:i})}),[r6,s6]=ym(wm,{isInside:!1}),i6=uC("TooltipContent"),Rj=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=t,c=Ou(sl,n),u=vm(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener($x,h),()=>document.removeEventListener($x,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),o.jsx(wl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:o.jsxs(t0,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(i6,{children:r}),o.jsx(r6,{scope:n,isInside:!0,children:o.jsx(gM,{id:c.contentId,role:"tooltip",children:s||r})})]})})});Ij.displayName=sl;var Pj="TooltipArrow",o6=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=vm(n);return s6(Pj,n).isInside?null:o.jsx(n0,{...s,...r,ref:e})});o6.displayName=Pj;function a6(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function l6(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function c6(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function u6(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i].x,c=e[i].y,u=e[a].x,h=e[a].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function d6(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),h6(e)}function h6(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],a=n[n.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var f6=Cj,m6=jj,p6=kj,Dj=Aj,Oj=Ij;const bm=f6,Mu=m6,Lu=p6,Tl=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>o.jsx(Oj,{ref:r,sideOffset:e,className:$("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));Tl.displayName=Oj.displayName;const g6="modulepreload",x6=function(t){return"/"+t},i_={},wa=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=x6(c),c in i_)return;i_[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":g6,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},y6=()=>{};var o_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},v6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Lj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,a||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Mj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new w6;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class w6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b6=function(t){const e=Mj(t);return Lj.encodeByteArray(e,!0)},cf=function(t){return b6(t).replace(/\./g,"")},Vj=function(t){try{return Lj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=()=>_6().__FIREBASE_DEFAULTS__,N6=()=>{if(typeof process>"u"||typeof o_>"u")return;const t=o_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},E6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Vj(t[1]);return e&&JSON.parse(e)},_m=()=>{try{return y6()||S6()||N6()||E6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Fj=t=>{var e,n;return(n=(e=_m())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},T6=t=>{const e=Fj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zj=()=>{var t;return(t=_m())==null?void 0:t.config},Uj=t=>{var e;return(e=_m())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $j(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[cf(JSON.stringify(n)),cf(JSON.stringify(a)),""].join(".")}const Ic={};function k6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ic))Ic[e]?t.emulator.push(e):t.prod.push(e);return t}function A6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let a_=!1;function Bj(t,e){if(typeof window>"u"||typeof document>"u"||!Cl(window.location.host)||Ic[t]===e||Ic[t]||a_)return;Ic[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=k6().prod.length>0;function a(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{a_=!0,a()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=A6(r),g=n("text"),x=document.getElementById(g)||document.createElement("span"),y=n("learnmore"),b=document.getElementById(y)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const E=p.element;l(E),h(b,y);const j=u();c(w,_),E.append(w,x,b,j),document.body.appendChild(E)}i?(x.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function I6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function R6(){var e;const t=(e=_m())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function P6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function D6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function O6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function M6(){const t=rn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function L6(){return!R6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function V6(){try{return typeof indexedDB=="object"}catch{return!1}}function F6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="FirebaseError";class Fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=z6,Object.setPrototypeOf(this,Fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vu.prototype.create)}}class Vu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?U6(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Fs(s,l,r)}}function U6(t,e){return t.replace($6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $6=/\{\$([^}]+)}/g;function B6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Li(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(l_(i)&&l_(a)){if(!Li(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function l_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function W6(t,e){const n=new H6(t,e);return n.subscribe.bind(n)}class H6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");q6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=cg),s.error===void 0&&(s.error=cg),s.complete===void 0&&(s.complete=cg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function cg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Fo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new C6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q6(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:K6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function K6(t){return t===fo?void 0:t}function Q6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new G6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const Y6={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},J6=ke.INFO,Z6={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},eV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Z6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class i0{constructor(e){this.name=e,this._logLevel=J6,this._logHandler=eV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const tV=(t,e)=>e.some(n=>t instanceof n);let c_,u_;function nV(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rV(){return u_||(u_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wj=new WeakMap,Wx=new WeakMap,Hj=new WeakMap,ug=new WeakMap,o0=new WeakMap;function sV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Ei(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Wj.set(n,t)}).catch(()=>{}),o0.set(e,t),e}function iV(t){if(Wx.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Wx.set(t,e)}let Hx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ei(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oV(t){Hx=t(Hx)}function aV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dg(this),e,...n);return Hj.set(r,e.sort?e.sort():[e]),Ei(r)}:rV().includes(t)?function(...e){return t.apply(dg(this),e),Ei(Wj.get(this))}:function(...e){return Ei(t.apply(dg(this),e))}}function lV(t){return typeof t=="function"?aV(t):(t instanceof IDBTransaction&&iV(t),tV(t,nV())?new Proxy(t,Hx):t)}function Ei(t){if(t instanceof IDBRequest)return sV(t);if(ug.has(t))return ug.get(t);const e=lV(t);return e!==t&&(ug.set(t,e),o0.set(e,t)),e}const dg=t=>o0.get(t);function cV(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Ei(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Ei(a.result),c.oldVersion,c.newVersion,Ei(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const uV=["get","getKey","getAll","getAllKeys","count"],dV=["put","add","delete","clear"],hg=new Map;function d_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hg.get(e))return hg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=dV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||uV.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return hg.set(e,i),i}oV(t=>({...t,get:(e,n,r)=>d_(e,n)||t.get(e,n,r),has:(e,n)=>!!d_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qx="@firebase/app",h_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=new i0("@firebase/app"),mV="@firebase/app-compat",pV="@firebase/analytics-compat",gV="@firebase/analytics",xV="@firebase/app-check-compat",yV="@firebase/app-check",vV="@firebase/auth",wV="@firebase/auth-compat",bV="@firebase/database",_V="@firebase/data-connect",SV="@firebase/database-compat",NV="@firebase/functions",EV="@firebase/functions-compat",TV="@firebase/installations",CV="@firebase/installations-compat",jV="@firebase/messaging",kV="@firebase/messaging-compat",AV="@firebase/performance",IV="@firebase/performance-compat",RV="@firebase/remote-config",PV="@firebase/remote-config-compat",DV="@firebase/storage",OV="@firebase/storage-compat",MV="@firebase/firestore",LV="@firebase/ai",VV="@firebase/firestore-compat",FV="firebase",zV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="[DEFAULT]",UV={[qx]:"fire-core",[mV]:"fire-core-compat",[gV]:"fire-analytics",[pV]:"fire-analytics-compat",[yV]:"fire-app-check",[xV]:"fire-app-check-compat",[vV]:"fire-auth",[wV]:"fire-auth-compat",[bV]:"fire-rtdb",[_V]:"fire-data-connect",[SV]:"fire-rtdb-compat",[NV]:"fire-fn",[EV]:"fire-fn-compat",[TV]:"fire-iid",[CV]:"fire-iid-compat",[jV]:"fire-fcm",[kV]:"fire-fcm-compat",[AV]:"fire-perf",[IV]:"fire-perf-compat",[RV]:"fire-rc",[PV]:"fire-rc-compat",[DV]:"fire-gcs",[OV]:"fire-gcs-compat",[MV]:"fire-fst",[VV]:"fire-fst-compat",[LV]:"fire-vertex","fire-js":"fire-js",[FV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf=new Map,$V=new Map,Kx=new Map;function f_(t,e){try{t.container.addComponent(e)}catch(n){Ps.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function il(t){const e=t.name;if(Kx.has(e))return Ps.debug(`There were multiple attempts to register component ${e}.`),!1;Kx.set(e,t);for(const n of uf.values())f_(n,t);for(const n of $V.values())f_(n,t);return!0}function a0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ti=new Vu("app","Firebase",BV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl=zV;function qj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Gx,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ti.create("bad-app-name",{appName:String(s)});if(n||(n=zj()),!n)throw Ti.create("no-options");const i=uf.get(s);if(i){if(Li(n,i.options)&&Li(r,i.config))return i;throw Ti.create("duplicate-app",{appName:s})}const a=new X6(s);for(const c of Kx.values())a.addComponent(c);const l=new WV(n,r,a);return uf.set(s,l),l}function Gj(t=Gx){const e=uf.get(t);if(!e&&t===Gx&&zj())return qj();if(!e)throw Ti.create("no-app",{appName:t});return e}function Ci(t,e,n){let r=UV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ps.warn(a.join(" "));return}il(new Fo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV="firebase-heartbeat-database",qV=1,uu="firebase-heartbeat-store";let fg=null;function Kj(){return fg||(fg=cV(HV,qV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ti.create("idb-open",{originalErrorMessage:t.message})})),fg}async function GV(t){try{const n=(await Kj()).transaction(uu),r=await n.objectStore(uu).get(Qj(t));return await n.done,r}catch(e){if(e instanceof Fs)Ps.warn(e.message);else{const n=Ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ps.warn(n.message)}}}async function m_(t,e){try{const r=(await Kj()).transaction(uu,"readwrite");await r.objectStore(uu).put(e,Qj(t)),await r.done}catch(n){if(n instanceof Fs)Ps.warn(n.message);else{const r=Ti.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ps.warn(r.message)}}}function Qj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KV=1024,QV=30;class XV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=p_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>QV){const a=ZV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ps.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=p_(),{heartbeatsToSend:r,unsentEntries:s}=YV(this._heartbeatsCache.heartbeats),i=cf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ps.warn(n),""}}}function p_(){return new Date().toISOString().substring(0,10)}function YV(t,e=KV){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),g_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),g_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return V6()?F6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function g_(t){return cf(JSON.stringify({version:2,heartbeats:t})).length}function ZV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){il(new Fo("platform-logger",e=>new hV(e),"PRIVATE")),il(new Fo("heartbeat",e=>new XV(e),"PRIVATE")),Ci(qx,h_,t),Ci(qx,h_,"esm2020"),Ci("fire-js","")}eF("");function Xj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tF=Xj,Yj=new Vu("auth","Firebase",Xj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=new i0("@firebase/auth");function nF(t,...e){df.logLevel<=ke.WARN&&df.warn(`Auth (${jl}): ${t}`,...e)}function xh(t,...e){df.logLevel<=ke.ERROR&&df.error(`Auth (${jl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t,...e){throw c0(t,...e)}function Tr(t,...e){return c0(t,...e)}function l0(t,e,n){const r={...tF(),[e]:n};return new Vu("auth","Firebase",r).create(e,{appName:t.name})}function Co(t){return l0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rF(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&as(t,"argument-error"),l0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function c0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Yj.create(t,...e)}function ve(t,e,...n){if(!t)throw c0(e,...n)}function bs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xh(e),new Error(e)}function Ds(t,e){t||bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function sF(){return x_()==="http:"||x_()==="https:"}function x_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sF()||D6()||"connection"in navigator)?navigator.onLine:!0}function oF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ds(n>e,"Short delay should be less than long delay!"),this.isMobile=I6()||O6()}get(){return iF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t,e){Ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cF=new zu(3e4,6e4);function d0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ko(t,e,n,r,s={}){return Zj(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=Fu({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return P6()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Cl(t.emulatorConfig.host)&&(u.credentials="include"),Jj.fetch()(await ek(t,t.config.apiHost,n,l),u)})}async function Zj(t,e,n){t._canInitEmulator=!1;const r={...aF,...e};try{const s=new dF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Ud(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ud(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Ud(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Ud(t,"user-disabled",a);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw l0(t,h,u);as(t,h)}}catch(s){if(s instanceof Fs)throw s;as(t,"network-request-failed",{message:String(s)})}}async function uF(t,e,n,r,s={}){const i=await Ko(t,e,n,r,s);return"mfaPendingCredential"in i&&as(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function ek(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?u0(t.config,s):`${t.config.apiScheme}://${s}`;return lF.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class dF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tr(this.auth,"network-request-failed")),cF.get())})}}function Ud(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Tr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(t,e){return Ko(t,"POST","/v1/accounts:delete",e)}async function hf(t,e){return Ko(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function fF(t,e=!1){const n=St(t),r=await n.getIdToken(e),s=h0(r);ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Rc(mg(s.auth_time)),issuedAtTime:Rc(mg(s.iat)),expirationTime:Rc(mg(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function mg(t){return Number(t)*1e3}function h0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xh("JWT malformed, contained fewer than 3 sections"),null;try{const s=Vj(n);return s?JSON.parse(s):(xh("Failed to decode base64 JWT payload"),null)}catch(s){return xh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function y_(t){const e=h0(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fs&&mF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function mF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Rc(this.lastLoginAt),this.creationTime=Rc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(t){var f;const e=t.auth,n=await t.getIdToken(),r=await ol(t,hf(e,{idToken:n}));ve(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?tk(s.providerUserInfo):[],a=xF(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Xx(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function gF(t){const e=St(t);await ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function tk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(t,e){const n=await Zj(t,{},async()=>{const r=Fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await ek(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Cl(t.emulatorConfig.host)&&(c.credentials="include"),Jj.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vF(t,e){return Ko(t,"POST","/v2/accounts:revokeToken",d0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):y_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=y_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await yF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Ia;return r&&(ve(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(ve(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ve(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ia,this.toJSON())}_performRefresh(){return bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ys(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Sr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new pF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xx(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ol(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return fF(this,e)}reload(){return gF(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ff(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vr(this.auth.app))return Promise.reject(Co(this.auth));const e=await this.getIdToken();return await ol(this,hF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:x,stsTokenManager:y}=n;ve(f&&y,e,"internal-error");const b=Ia.fromJSON(this.name,y);ve(typeof f=="string",e,"internal-error"),Ys(r,e.name),Ys(s,e.name),ve(typeof p=="boolean",e,"internal-error"),ve(typeof g=="boolean",e,"internal-error"),Ys(i,e.name),Ys(a,e.name),Ys(l,e.name),Ys(c,e.name),Ys(u,e.name),Ys(h,e.name);const _=new Sr({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:b,createdAt:u,lastLoginAt:h});return x&&Array.isArray(x)&&(_.providerData=x.map(w=>({...w}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ia;s.updateFromServerResponse(n);const i=new Sr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ff(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ve(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?tk(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ia;l.updateFromIdToken(r);const c=new Sr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Xx(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=new Map;function _s(t){Ds(t instanceof Function,"Expected a class definition");let e=v_.get(t);return e?(Ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,v_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nk.type="NONE";const w_=nk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ra{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=yh(this.userKey,s.apiKey,i),this.fullPersistenceKey=yh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await hf(this.auth,{idToken:e}).catch(()=>{});return n?Sr._fromGetAccountInfoResponse(this.auth,n,e):null}return Sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ra(_s(w_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||_s(w_);const a=yh(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(a);if(h){let f;if(typeof h=="string"){const p=await hf(e,{idToken:h}).catch(()=>{});if(!p)break;f=await Sr._fromGetAccountInfoResponse(e,p,h)}else f=Sr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ra(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Ra(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ok(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lk(e))return"Blackberry";if(ck(e))return"Webos";if(sk(e))return"Safari";if((e.includes("chrome/")||ik(e))&&!e.includes("edge/"))return"Chrome";if(ak(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rk(t=rn()){return/firefox\//i.test(t)}function sk(t=rn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ik(t=rn()){return/crios\//i.test(t)}function ok(t=rn()){return/iemobile/i.test(t)}function ak(t=rn()){return/android/i.test(t)}function lk(t=rn()){return/blackberry/i.test(t)}function ck(t=rn()){return/webos/i.test(t)}function f0(t=rn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function wF(t=rn()){var e;return f0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function bF(){return M6()&&document.documentMode===10}function uk(t=rn()){return f0(t)||ak(t)||ck(t)||lk(t)||/windows phone/i.test(t)||ok(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e=[]){let n;switch(t){case"Browser":n=b_(rn());break;case"Worker":n=`${b_(rn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SF(t,e={}){return Ko(t,"GET","/v2/passwordPolicy",d0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF=6;class EF{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??NF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new __(this),this.idTokenSubscription=new __(this),this.beforeStateQueue=new _F(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_s(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ra.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await hf(this,{idToken:e}),r=await Sr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(vr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ff(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vr(this.app))return Promise.reject(Co(this));const n=e?St(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vr(this.app)?Promise.reject(Co(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vr(this.app)?Promise.reject(Co(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_s(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SF(this),n=new EF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_s(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Ra.create(this,[_s(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(vr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&nF(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Sm(t){return St(t)}class __{constructor(e){this.auth=e,this.observer=null,this.addObserver=W6(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CF(t){m0=t}function jF(t){return m0.loadJS(t)}function kF(){return m0.gapiScript}function AF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IF(t,e){const n=a0(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Li(i,e??{}))return s;as(s,"already-initialized")}return n.initialize({options:e})}function RF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(_s);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PF(t,e,n){const r=Sm(t);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=hk(e),{host:a,port:l}=DF(e),c=l===null?"":`:${l}`,u={url:`${i}//${a}${c}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Li(u,r.config.emulator)&&Li(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Cl(a)?($j(`${i}//${a}${c}`),Bj("Auth",!0)):OF()}function hk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DF(t){const e=hk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:S_(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:S_(a)}}}function S_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,n){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t,e){return uF(t,"POST","/v1/accounts:signInWithIdp",d0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF="http://localhost";class zo extends fk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):as("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new zo(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Pa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Pa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Pa(e,n)}buildRequest(){const e={requestUri:MF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends p0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Uu{constructor(){super("facebook.com")}static credential(e){return zo._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zo._fromParams({providerId:Zt.PROVIDER_ID,signInMethod:Zt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zt.credentialFromTaggedObject(e)}static credentialFromError(e){return Zt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zt.credential(n,r)}catch{return null}}}Zt.GOOGLE_SIGN_IN_METHOD="google.com";Zt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Uu{constructor(){super("github.com")}static credential(e){return zo._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ai.credential(e.oauthAccessToken)}catch{return null}}}ai.GITHUB_SIGN_IN_METHOD="github.com";ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Uu{constructor(){super("twitter.com")}static credential(e,n){return zo._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return li.credential(n,r)}catch{return null}}}li.TWITTER_SIGN_IN_METHOD="twitter.com";li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Sr._fromIdTokenResponse(e,r,s),a=N_(r);return new al({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=N_(r);return new al({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function N_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf extends Fs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,mf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new mf(e,n,r,s)}}function mk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?mf._fromErrorAndOperation(t,i,e,r):i})}async function LF(t,e,n=!1){const r=await ol(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return al._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VF(t,e,n=!1){const{auth:r}=t;if(vr(r.app))return Promise.reject(Co(r));const s="reauthenticate";try{const i=await ol(t,mk(r,s,e,t),n);ve(i.idToken,r,"internal-error");const a=h0(i.idToken);ve(a,r,"internal-error");const{sub:l}=a;return ve(t.uid===l,r,"user-mismatch"),al._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&as(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FF(t,e,n=!1){if(vr(t.app))return Promise.reject(Co(t));const r="signIn",s=await mk(t,r,e),i=await al._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(t,e){return Ko(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UF(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=St(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},a=await ol(r,zF(r.auth,i));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t,e){return St(t).setPersistence(e)}function BF(t,e,n,r){return St(t).onIdTokenChanged(e,n,r)}function WF(t,e,n){return St(t).beforeAuthStateChanged(e,n)}function HF(t,e,n,r){return St(t).onAuthStateChanged(e,n,r)}function qF(t){return St(t).signOut()}const pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pf,"1"),this.storage.removeItem(pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF=1e3,KF=10;class gk extends pk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);bF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,KF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}gk.type="LOCAL";const xk=gk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk extends pk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yk.type="SESSION";const vk=yk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Nm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async u=>u(n.origin,i)),c=await QF(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const u=g0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(){return window}function YF(t){ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(){return typeof ts().WorkerGlobalScope<"u"&&typeof ts().importScripts=="function"}async function JF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function e9(){return wk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk="firebaseLocalStorageDb",t9=1,gf="firebaseLocalStorage",_k="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Em(t,e){return t.transaction([gf],e?"readwrite":"readonly").objectStore(gf)}function n9(){const t=indexedDB.deleteDatabase(bk);return new $u(t).toPromise()}function Yx(){const t=indexedDB.open(bk,t9);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(gf,{keyPath:_k})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(gf)?e(r):(r.close(),await n9(),e(await Yx()))})})}async function E_(t,e,n){const r=Em(t,!0).put({[_k]:e,value:n});return new $u(r).toPromise()}async function r9(t,e){const n=Em(t,!1).get(e),r=await new $u(n).toPromise();return r===void 0?null:r.value}function T_(t,e){const n=Em(t,!0).delete(e);return new $u(n).toPromise()}const s9=800,i9=3;class Sk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>i9)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nm._getInstance(e9()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await JF(),!this.activeServiceWorker)return;this.sender=new XF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yx();return await E_(e,pf,"1"),await T_(e,pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>E_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>r9(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>T_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Em(s,!1).getAll();return new $u(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),s9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Sk.type="LOCAL";const o9=Sk;new zu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t,e){return e?_s(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0 extends fk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Pa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Pa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function a9(t){return FF(t.auth,new x0(t),t.bypassAuthState)}function l9(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),VF(n,new x0(t),t.bypassAuthState)}async function c9(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),LF(n,new x0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a9;case"linkViaPopup":case"linkViaRedirect":return c9;case"reauthViaPopup":case"reauthViaRedirect":return l9;default:as(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u9=new zu(2e3,1e4);async function $d(t,e,n){if(vr(t.app))return Promise.reject(Tr(t,"operation-not-supported-in-this-environment"));const r=Sm(t);rF(t,e,p0);const s=Nk(r,n);return new xo(r,"signInViaPopup",e,s).executeNotNull()}class xo extends Ek{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=g0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,u9.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9="pendingRedirect",vh=new Map;class h9 extends Ek{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=vh.get(this.auth._key());if(!e){try{const r=await f9(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}vh.set(this.auth._key(),e)}return this.bypassAuthState||vh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f9(t,e){const n=g9(e),r=p9(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function m9(t,e){vh.set(t._key(),e)}function p9(t){return _s(t._redirectPersistence)}function g9(t){return yh(d9,t.config.apiKey,t.name)}async function x9(t,e,n=!1){if(vr(t.app))return Promise.reject(Co(t));const r=Sm(t),s=Nk(r,e),a=await new h9(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9=10*60*1e3;class v9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Tk(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y9&&this.cachedEventUids.clear(),this.cachedEventUids.has(C_(e))}saveEventToCache(e){this.cachedEventUids.add(C_(e)),this.lastProcessedEventTime=Date.now()}}function C_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Tk({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function w9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b9(t,e={}){return Ko(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S9=/^https?/;async function N9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await b9(t);for(const n of e)try{if(E9(n))return}catch{}as(t,"unauthorized-domain")}function E9(t){const e=Qx(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!S9.test(n))return!1;if(_9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=new zu(3e4,6e4);function j_(){const t=ts().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function C9(t){return new Promise((e,n)=>{var s,i,a;function r(){j_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{j_(),n(Tr(t,"network-request-failed"))},timeout:T9.get()})}if((i=(s=ts().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=ts().gapi)!=null&&a.load)r();else{const l=AF("iframefcb");return ts()[l]=()=>{gapi.load?r():n(Tr(t,"network-request-failed"))},jF(`${kF()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw wh=null,e})}let wh=null;function j9(t){return wh=wh||C9(t),wh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9=new zu(5e3,15e3),A9="__/auth/iframe",I9="emulator/auth/iframe",R9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D9(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?u0(e,I9):`https://${t.config.authDomain}/${A9}`,r={apiKey:e.apiKey,appName:t.name,v:jl},s=P9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Fu(r).slice(1)}`}async function O9(t){const e=await j9(t),n=ts().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:D9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=Tr(t,"network-request-failed"),l=ts().setTimeout(()=>{i(a)},k9.get());function c(){ts().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L9=500,V9=600,F9="_blank",z9="http://localhost";class k_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function U9(t,e,n,r=L9,s=V9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...M9,width:r.toString(),height:s.toString(),top:i,left:a},u=rn().toLowerCase();n&&(l=ik(u)?F9:n),rk(u)&&(e=e||z9,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,x])=>`${p}${g}=${x},`,"");if(wF(u)&&l!=="_self")return $9(e||"",l),new k_(null);const f=window.open(e||"",l,h);ve(f,t,"popup-blocked");try{f.focus()}catch{}return new k_(f)}function $9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9="__/auth/handler",W9="emulator/auth/handler",H9=encodeURIComponent("fac");async function A_(t,e,n,r,s,i){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:jl,eventId:s};if(e instanceof p0){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",B6(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof Uu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${H9}=${encodeURIComponent(c)}`:"";return`${q9(t)}?${Fu(l).slice(1)}${u}`}function q9({config:t}){return t.emulator?u0(t,W9):`https://${t.authDomain}/${B9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="webStorageSupport";class G9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vk,this._completeRedirectFn=x9,this._overrideRedirectResult=m9}async _openPopup(e,n,r,s){var a;Ds((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await A_(e,n,r,Qx(),s);return U9(e,i,g0())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await A_(e,n,r,Qx(),s);return YF(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ds(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await O9(e),r=new v9(e);return n.register("authEvent",s=>(ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pg,{type:pg},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[pg];i!==void 0&&n(!!i),as(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=N9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uk()||sk()||f0()}}const K9=G9;var I_="@firebase/auth",R_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Y9(t){il(new Fo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;ve(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dk(t)},u=new TF(r,s,i,c);return RF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),il(new Fo("auth-internal",e=>{const n=Sm(e.getProvider("auth").getImmediate());return(r=>new Q9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ci(I_,R_,X9(t)),Ci(I_,R_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J9=5*60,Z9=Uj("authIdTokenMaxAge")||J9;let P_=null;const ez=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Z9)return;const s=n==null?void 0:n.token;P_!==s&&(P_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function tz(t=Gj()){const e=a0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IF(t,{popupRedirectResolver:K9,persistence:[o9,xk,vk]}),r=Uj("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=ez(i.toString());WF(n,a,()=>a(n.currentUser)),BF(n,l=>a(l))}}const s=Fj("auth");return s&&PF(n,`http://${s}`),n}function nz(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}CF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Tr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",nz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Y9("Browser");var rz="firebase",sz="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ci(rz,sz,"app");var D_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,Ck;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,N){function C(){}C.prototype=N.prototype,S.F=N.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(k,A,D){for(var R=Array(arguments.length-2),B=2;B<arguments.length;B++)R[B-2]=arguments[B];return N.prototype[A].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,N,C){C||(C=0);const k=Array(16);if(typeof N=="string")for(var A=0;A<16;++A)k[A]=N.charCodeAt(C++)|N.charCodeAt(C++)<<8|N.charCodeAt(C++)<<16|N.charCodeAt(C++)<<24;else for(A=0;A<16;++A)k[A]=N[C++]|N[C++]<<8|N[C++]<<16|N[C++]<<24;N=S.g[0],C=S.g[1],A=S.g[2];let D=S.g[3],R;R=N+(D^C&(A^D))+k[0]+3614090360&4294967295,N=C+(R<<7&4294967295|R>>>25),R=D+(A^N&(C^A))+k[1]+3905402710&4294967295,D=N+(R<<12&4294967295|R>>>20),R=A+(C^D&(N^C))+k[2]+606105819&4294967295,A=D+(R<<17&4294967295|R>>>15),R=C+(N^A&(D^N))+k[3]+3250441966&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(D^C&(A^D))+k[4]+4118548399&4294967295,N=C+(R<<7&4294967295|R>>>25),R=D+(A^N&(C^A))+k[5]+1200080426&4294967295,D=N+(R<<12&4294967295|R>>>20),R=A+(C^D&(N^C))+k[6]+2821735955&4294967295,A=D+(R<<17&4294967295|R>>>15),R=C+(N^A&(D^N))+k[7]+4249261313&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(D^C&(A^D))+k[8]+1770035416&4294967295,N=C+(R<<7&4294967295|R>>>25),R=D+(A^N&(C^A))+k[9]+2336552879&4294967295,D=N+(R<<12&4294967295|R>>>20),R=A+(C^D&(N^C))+k[10]+4294925233&4294967295,A=D+(R<<17&4294967295|R>>>15),R=C+(N^A&(D^N))+k[11]+2304563134&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(D^C&(A^D))+k[12]+1804603682&4294967295,N=C+(R<<7&4294967295|R>>>25),R=D+(A^N&(C^A))+k[13]+4254626195&4294967295,D=N+(R<<12&4294967295|R>>>20),R=A+(C^D&(N^C))+k[14]+2792965006&4294967295,A=D+(R<<17&4294967295|R>>>15),R=C+(N^A&(D^N))+k[15]+1236535329&4294967295,C=A+(R<<22&4294967295|R>>>10),R=N+(A^D&(C^A))+k[1]+4129170786&4294967295,N=C+(R<<5&4294967295|R>>>27),R=D+(C^A&(N^C))+k[6]+3225465664&4294967295,D=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(D^N))+k[11]+643717713&4294967295,A=D+(R<<14&4294967295|R>>>18),R=C+(D^N&(A^D))+k[0]+3921069994&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(A^D&(C^A))+k[5]+3593408605&4294967295,N=C+(R<<5&4294967295|R>>>27),R=D+(C^A&(N^C))+k[10]+38016083&4294967295,D=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(D^N))+k[15]+3634488961&4294967295,A=D+(R<<14&4294967295|R>>>18),R=C+(D^N&(A^D))+k[4]+3889429448&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(A^D&(C^A))+k[9]+568446438&4294967295,N=C+(R<<5&4294967295|R>>>27),R=D+(C^A&(N^C))+k[14]+3275163606&4294967295,D=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(D^N))+k[3]+4107603335&4294967295,A=D+(R<<14&4294967295|R>>>18),R=C+(D^N&(A^D))+k[8]+1163531501&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(A^D&(C^A))+k[13]+2850285829&4294967295,N=C+(R<<5&4294967295|R>>>27),R=D+(C^A&(N^C))+k[2]+4243563512&4294967295,D=N+(R<<9&4294967295|R>>>23),R=A+(N^C&(D^N))+k[7]+1735328473&4294967295,A=D+(R<<14&4294967295|R>>>18),R=C+(D^N&(A^D))+k[12]+2368359562&4294967295,C=A+(R<<20&4294967295|R>>>12),R=N+(C^A^D)+k[5]+4294588738&4294967295,N=C+(R<<4&4294967295|R>>>28),R=D+(N^C^A)+k[8]+2272392833&4294967295,D=N+(R<<11&4294967295|R>>>21),R=A+(D^N^C)+k[11]+1839030562&4294967295,A=D+(R<<16&4294967295|R>>>16),R=C+(A^D^N)+k[14]+4259657740&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(C^A^D)+k[1]+2763975236&4294967295,N=C+(R<<4&4294967295|R>>>28),R=D+(N^C^A)+k[4]+1272893353&4294967295,D=N+(R<<11&4294967295|R>>>21),R=A+(D^N^C)+k[7]+4139469664&4294967295,A=D+(R<<16&4294967295|R>>>16),R=C+(A^D^N)+k[10]+3200236656&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(C^A^D)+k[13]+681279174&4294967295,N=C+(R<<4&4294967295|R>>>28),R=D+(N^C^A)+k[0]+3936430074&4294967295,D=N+(R<<11&4294967295|R>>>21),R=A+(D^N^C)+k[3]+3572445317&4294967295,A=D+(R<<16&4294967295|R>>>16),R=C+(A^D^N)+k[6]+76029189&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(C^A^D)+k[9]+3654602809&4294967295,N=C+(R<<4&4294967295|R>>>28),R=D+(N^C^A)+k[12]+3873151461&4294967295,D=N+(R<<11&4294967295|R>>>21),R=A+(D^N^C)+k[15]+530742520&4294967295,A=D+(R<<16&4294967295|R>>>16),R=C+(A^D^N)+k[2]+3299628645&4294967295,C=A+(R<<23&4294967295|R>>>9),R=N+(A^(C|~D))+k[0]+4096336452&4294967295,N=C+(R<<6&4294967295|R>>>26),R=D+(C^(N|~A))+k[7]+1126891415&4294967295,D=N+(R<<10&4294967295|R>>>22),R=A+(N^(D|~C))+k[14]+2878612391&4294967295,A=D+(R<<15&4294967295|R>>>17),R=C+(D^(A|~N))+k[5]+4237533241&4294967295,C=A+(R<<21&4294967295|R>>>11),R=N+(A^(C|~D))+k[12]+1700485571&4294967295,N=C+(R<<6&4294967295|R>>>26),R=D+(C^(N|~A))+k[3]+2399980690&4294967295,D=N+(R<<10&4294967295|R>>>22),R=A+(N^(D|~C))+k[10]+4293915773&4294967295,A=D+(R<<15&4294967295|R>>>17),R=C+(D^(A|~N))+k[1]+2240044497&4294967295,C=A+(R<<21&4294967295|R>>>11),R=N+(A^(C|~D))+k[8]+1873313359&4294967295,N=C+(R<<6&4294967295|R>>>26),R=D+(C^(N|~A))+k[15]+4264355552&4294967295,D=N+(R<<10&4294967295|R>>>22),R=A+(N^(D|~C))+k[6]+2734768916&4294967295,A=D+(R<<15&4294967295|R>>>17),R=C+(D^(A|~N))+k[13]+1309151649&4294967295,C=A+(R<<21&4294967295|R>>>11),R=N+(A^(C|~D))+k[4]+4149444226&4294967295,N=C+(R<<6&4294967295|R>>>26),R=D+(C^(N|~A))+k[11]+3174756917&4294967295,D=N+(R<<10&4294967295|R>>>22),R=A+(N^(D|~C))+k[2]+718787259&4294967295,A=D+(R<<15&4294967295|R>>>17),R=C+(D^(A|~N))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+N&4294967295,S.g[1]=S.g[1]+(A+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.v=function(S,N){N===void 0&&(N=S.length);const C=N-this.blockSize,k=this.C;let A=this.h,D=0;for(;D<N;){if(A==0)for(;D<=C;)s(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<N;)if(k[A++]=S.charCodeAt(D++),A==this.blockSize){s(this,k),A=0;break}}else for(;D<N;)if(k[A++]=S[D++],A==this.blockSize){s(this,k),A=0;break}}this.h=A,this.o+=N},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var N=1;N<S.length-8;++N)S[N]=0;N=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=N&255,N/=256;for(this.v(S),S=Array(16),N=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)S[N++]=this.g[C]>>>k&255;return S};function i(S,N){var C=l;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=N(S)}function a(S,N){this.h=N;const C=[];let k=!0;for(let A=S.length-1;A>=0;A--){const D=S[A]|0;k&&D==N||(C[A]=D,k=!1)}this.g=C}var l={};function c(S){return-128<=S&&S<128?i(S,function(N){return new a([N|0],N<0?-1:0)}):new a([S|0],S<0?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return f;if(S<0)return b(u(-S));const N=[];let C=1;for(let k=0;S>=C;k++)N[k]=S/C|0,C*=4294967296;return new a(N,0)}function h(S,N){if(S.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(S.charAt(0)=="-")return b(h(S.substring(1),N));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(N,8));let k=f;for(let D=0;D<S.length;D+=8){var A=Math.min(8,S.length-D);const R=parseInt(S.substring(D,D+A),N);A<8?(A=u(Math.pow(N,A)),k=k.j(A).add(u(R))):(k=k.j(C),k=k.add(u(R)))}return k}var f=c(0),p=c(1),g=c(16777216);t=a.prototype,t.m=function(){if(y(this))return-b(this).m();let S=0,N=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);S+=(k>=0?k:4294967296+k)*N,N*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(x(this))return"0";if(y(this))return"-"+b(this).toString(S);const N=u(Math.pow(S,6));var C=this;let k="";for(;;){const A=j(C,N).g;C=_(C,A.j(N));let D=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=A,x(C))return D+k;for(;D.length<6;)D="0"+D;k=D+k}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function x(S){if(S.h!=0)return!1;for(let N=0;N<S.g.length;N++)if(S.g[N]!=0)return!1;return!0}function y(S){return S.h==-1}t.l=function(S){return S=_(this,S),y(S)?-1:x(S)?0:1};function b(S){const N=S.g.length,C=[];for(let k=0;k<N;k++)C[k]=~S.g[k];return new a(C,~S.h).add(p)}t.abs=function(){return y(this)?b(this):this},t.add=function(S){const N=Math.max(this.g.length,S.g.length),C=[];let k=0;for(let A=0;A<=N;A++){let D=k+(this.i(A)&65535)+(S.i(A)&65535),R=(D>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);k=R>>>16,D&=65535,R&=65535,C[A]=R<<16|D}return new a(C,C[C.length-1]&-2147483648?-1:0)};function _(S,N){return S.add(b(N))}t.j=function(S){if(x(this)||x(S))return f;if(y(this))return y(S)?b(this).j(b(S)):b(b(this).j(S));if(y(S))return b(this.j(b(S)));if(this.l(g)<0&&S.l(g)<0)return u(this.m()*S.m());const N=this.g.length+S.g.length,C=[];for(var k=0;k<2*N;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let A=0;A<S.g.length;A++){const D=this.i(k)>>>16,R=this.i(k)&65535,B=S.i(A)>>>16,q=S.i(A)&65535;C[2*k+2*A]+=R*q,w(C,2*k+2*A),C[2*k+2*A+1]+=D*q,w(C,2*k+2*A+1),C[2*k+2*A+1]+=R*B,w(C,2*k+2*A+1),C[2*k+2*A+2]+=D*B,w(C,2*k+2*A+2)}for(S=0;S<N;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=N;S<2*N;S++)C[S]=0;return new a(C,0)};function w(S,N){for(;(S[N]&65535)!=S[N];)S[N+1]+=S[N]>>>16,S[N]&=65535,N++}function E(S,N){this.g=S,this.h=N}function j(S,N){if(x(N))throw Error("division by zero");if(x(S))return new E(f,f);if(y(S))return N=j(b(S),N),new E(b(N.g),b(N.h));if(y(N))return N=j(S,b(N)),new E(b(N.g),N.h);if(S.g.length>30){if(y(S)||y(N))throw Error("slowDivide_ only works with positive integers.");for(var C=p,k=N;k.l(S)<=0;)C=P(C),k=P(k);var A=O(C,1),D=O(k,1);for(k=O(k,2),C=O(C,2);!x(k);){var R=D.add(k);R.l(S)<=0&&(A=A.add(C),D=R),k=O(k,1),C=O(C,1)}return N=_(S,A.j(N)),new E(A,N)}for(A=f;S.l(N)>=0;){for(C=Math.max(1,Math.floor(S.m()/N.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),D=u(C),R=D.j(N);y(R)||R.l(S)>0;)C-=k,D=u(C),R=D.j(N);x(D)&&(D=p),A=A.add(D),S=_(S,R)}return new E(A,S)}t.B=function(S){return j(this,S).h},t.and=function(S){const N=Math.max(this.g.length,S.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)&S.i(k);return new a(C,this.h&S.h)},t.or=function(S){const N=Math.max(this.g.length,S.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)|S.i(k);return new a(C,this.h|S.h)},t.xor=function(S){const N=Math.max(this.g.length,S.g.length),C=[];for(let k=0;k<N;k++)C[k]=this.i(k)^S.i(k);return new a(C,this.h^S.h)};function P(S){const N=S.g.length+1,C=[];for(let k=0;k<N;k++)C[k]=S.i(k)<<1|S.i(k-1)>>>31;return new a(C,S.h)}function O(S,N){const C=N>>5;N%=32;const k=S.g.length-C,A=[];for(let D=0;D<k;D++)A[D]=N>0?S.i(D+C)>>>N|S.i(D+C+1)<<32-N:S.i(D+C);return new a(A,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ck=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,ji=a}).apply(typeof D_<"u"?D_:typeof self<"u"?self:typeof window<"u"?window:{});var Bd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jk,mc,kk,bh,Jx,Ak,Ik,Rk;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bd=="object"&&Bd];for(var v=0;v<d.length;++v){var T=d[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(d,v){if(v)e:{var T=r;d=d.split(".");for(var I=0;I<d.length-1;I++){var L=d[I];if(!(L in T))break e;T=T[L]}d=d[d.length-1],I=T[d],v=v(I),v!=I&&v!=null&&e(T,d,{configurable:!0,writable:!0,value:v})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(v){var T=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&T.push([I,v[I]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function c(d,v,T){return d.call.apply(d.bind,arguments)}function u(d,v,T){return u=c,u.apply(null,arguments)}function h(d,v){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function f(d,v){function T(){}T.prototype=v.prototype,d.Z=v.prototype,d.prototype=new T,d.prototype.constructor=d,d.Ob=function(I,L,F){for(var oe=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)oe[Se-2]=arguments[Se];return v.prototype[L].apply(I,oe)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function g(d){const v=d.length;if(v>0){const T=Array(v);for(let I=0;I<v;I++)T[I]=d[I];return T}return[]}function x(d,v){for(let I=1;I<arguments.length;I++){const L=arguments[I];var T=typeof L;if(T=T!="object"?T:L?Array.isArray(L)?"array":T:"null",T=="array"||T=="object"&&typeof L.length=="number"){T=d.length||0;const F=L.length||0;d.length=T+F;for(let oe=0;oe<F;oe++)d[T+oe]=L[oe]}else d.push(L)}}class y{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function b(d){a.setTimeout(()=>{throw d},0)}function _(){var d=S;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class w{constructor(){this.h=this.g=null}add(v,T){const I=E.get();I.set(v,T),this.h?this.h.next=I:this.g=I,this.h=I}}var E=new y(()=>new j,d=>d.reset());class j{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let P,O=!1,S=new w,N=()=>{const d=Promise.resolve(void 0);P=()=>{d.then(C)}};function C(){for(var d;d=_();){try{d.h.call(d.g)}catch(T){b(T)}var v=E;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}O=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};a.addEventListener("test",T,v),a.removeEventListener("test",T,v)}catch{}return d}();function R(d){return/^[\s\xa0]*$/.test(d)}function B(d,v){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}f(B,A),B.prototype.init=function(d,v){const T=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(T=="mouseover"?v=d.fromElement:T=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var q="closure_listenable_"+(Math.random()*1e6|0),ee=0;function re(d,v,T,I,L){this.listener=d,this.proxy=null,this.src=v,this.type=T,this.capture=!!I,this.ha=L,this.key=++ee,this.da=this.fa=!1}function V(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function z(d,v,T){for(const I in d)v.call(T,d[I],I,d)}function K(d,v){for(const T in d)v.call(void 0,d[T],T,d)}function U(d){const v={};for(const T in d)v[T]=d[T];return v}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(d,v){let T,I;for(let L=1;L<arguments.length;L++){I=arguments[L];for(T in I)d[T]=I[T];for(let F=0;F<W.length;F++)T=W[F],Object.prototype.hasOwnProperty.call(I,T)&&(d[T]=I[T])}}function ne(d){this.src=d,this.g={},this.h=0}ne.prototype.add=function(d,v,T,I,L){const F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);const oe=se(d,v,I,L);return oe>-1?(v=d[oe],T||(v.fa=!1)):(v=new re(v,this.src,F,!!I,L),v.fa=T,d.push(v)),v};function te(d,v){const T=v.type;if(T in d.g){var I=d.g[T],L=Array.prototype.indexOf.call(I,v,void 0),F;(F=L>=0)&&Array.prototype.splice.call(I,L,1),F&&(V(v),d.g[T].length==0&&(delete d.g[T],d.h--))}}function se(d,v,T,I){for(let L=0;L<d.length;++L){const F=d[L];if(!F.da&&F.listener==v&&F.capture==!!T&&F.ha==I)return L}return-1}var M="closure_lm_"+(Math.random()*1e6|0),Y={};function ae(d,v,T,I,L){if(Array.isArray(v)){for(let F=0;F<v.length;F++)ae(d,v[F],T,I,L);return null}return T=Ft(T),d&&d[q]?d.J(v,T,l(I)?!!I.capture:!!I,L):X(d,v,T,!1,I,L)}function X(d,v,T,I,L,F){if(!v)throw Error("Invalid event type");const oe=l(L)?!!L.capture:!!L;let Se=Re(d);if(Se||(d[M]=Se=new ne(d)),T=Se.add(v,T,I,oe,F),T.proxy)return T;if(I=he(),T.proxy=I,I.src=d,I.listener=T,d.addEventListener)D||(L=oe),L===void 0&&(L=!1),d.addEventListener(v.toString(),I,L);else if(d.attachEvent)d.attachEvent(Ee(v.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function he(){function d(T){return v.call(d.src,d.listener,T)}const v=pt;return d}function ie(d,v,T,I,L){if(Array.isArray(v))for(var F=0;F<v.length;F++)ie(d,v[F],T,I,L);else I=l(I)?!!I.capture:!!I,T=Ft(T),d&&d[q]?(d=d.i,F=String(v).toString(),F in d.g&&(v=d.g[F],T=se(v,T,I,L),T>-1&&(V(v[T]),Array.prototype.splice.call(v,T,1),v.length==0&&(delete d.g[F],d.h--)))):d&&(d=Re(d))&&(v=d.g[v.toString()],d=-1,v&&(d=se(v,T,I,L)),(T=d>-1?v[d]:null)&&ge(T))}function ge(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[q])te(v.i,d);else{var T=d.type,I=d.proxy;v.removeEventListener?v.removeEventListener(T,I,d.capture):v.detachEvent?v.detachEvent(Ee(T),I):v.addListener&&v.removeListener&&v.removeListener(I),(T=Re(v))?(te(T,d),T.h==0&&(T.src=null,v[M]=null)):V(d)}}}function Ee(d){return d in Y?Y[d]:Y[d]="on"+d}function pt(d,v){if(d.da)d=!0;else{v=new B(v,this);const T=d.listener,I=d.ha||d.src;d.fa&&ge(d),d=T.call(I,v)}return d}function Re(d){return d=d[M],d instanceof ne?d:null}var Be="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ft(d){return typeof d=="function"?d:(d[Be]||(d[Be]=function(v){return d.handleEvent(v)}),d[Be])}function qe(){k.call(this),this.i=new ne(this),this.M=this,this.G=null}f(qe,k),qe.prototype[q]=!0,qe.prototype.removeEventListener=function(d,v,T,I){ie(this,d,v,T,I)};function Ke(d,v){var T,I=d.G;if(I)for(T=[];I;I=I.G)T.push(I);if(d=d.M,I=v.type||v,typeof v=="string")v=new A(v,d);else if(v instanceof A)v.target=v.target||d;else{var L=v;v=new A(I,d),J(v,L)}L=!0;let F,oe;if(T)for(oe=T.length-1;oe>=0;oe--)F=v.g=T[oe],L=lr(F,I,!0,v)&&L;if(F=v.g=d,L=lr(F,I,!0,v)&&L,L=lr(F,I,!1,v)&&L,T)for(oe=0;oe<T.length;oe++)F=v.g=T[oe],L=lr(F,I,!1,v)&&L}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const T=d.g[v];for(let I=0;I<T.length;I++)V(T[I]);delete d.g[v],d.h--}}this.G=null},qe.prototype.J=function(d,v,T,I){return this.i.add(String(d),v,!1,T,I)},qe.prototype.K=function(d,v,T,I){return this.i.add(String(d),v,!0,T,I)};function lr(d,v,T,I){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let L=!0;for(let F=0;F<v.length;++F){const oe=v[F];if(oe&&!oe.da&&oe.capture==T){const Se=oe.listener,Tt=oe.ha||oe.src;oe.fa&&te(d.i,oe),L=Se.call(Tt,I)!==!1&&L}}return L&&!I.defaultPrevented}function Us(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:a.setTimeout(d,v||0)}function Ul(d){d.g=Us(()=>{d.g=null,d.i&&(d.i=!1,Ul(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class sd extends k{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ul(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eo(d){k.call(this),this.h=d,this.g={}}f(eo,k);var id=[];function fs(d){z(d.g,function(v,T){this.g.hasOwnProperty(T)&&ge(v)},d),d.g={}}eo.prototype.N=function(){eo.Z.N.call(this),fs(this)},eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vr=a.JSON.stringify,to=a.JSON.parse,od=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function cr(){}function $l(){}var no={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bl(){A.call(this,"d")}f(Bl,A);function ro(){A.call(this,"c")}f(ro,A);var Fr={},ad=null;function so(){return ad=ad||new qe}Fr.Ia="serverreachability";function ld(d){A.call(this,Fr.Ia,d)}f(ld,A);function io(d){const v=so();Ke(v,new ld(v))}Fr.STAT_EVENT="statevent";function cd(d,v){A.call(this,Fr.STAT_EVENT,d),this.stat=v}f(cd,A);function Ve(d){const v=so();Ke(v,new cd(v,d))}Fr.Ja="timingevent";function qt(d,v){A.call(this,Fr.Ja,d),this.size=v}f(qt,A);function Nt(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},v)}function pn(){this.g=!0}pn.prototype.ua=function(){this.g=!1};function gn(d,v,T,I,L,F){d.info(function(){if(d.g)if(F){var oe="",Se=F.split("&");for(let Ge=0;Ge<Se.length;Ge++){var Tt=Se[Ge].split("=");if(Tt.length>1){const Rt=Tt[0];Tt=Tt[1];const $r=Rt.split("_");oe=$r.length>=2&&$r[1]=="type"?oe+(Rt+"="+Tt+"&"):oe+(Rt+"=redacted&")}}}else oe=null;else oe=F;return"XMLHTTP REQ ("+I+") [attempt "+L+"]: "+v+`
`+T+`
`+oe})}function sn(d,v,T,I,L,F,oe){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+L+"]: "+v+`
`+T+`
`+F+" "+oe})}function zt(d,v,T,I){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Et(d,T)+(I?" "+I:"")})}function $s(d,v){d.info(function(){return"TIMEOUT: "+v})}pn.prototype.info=function(){};function Et(d,v){if(!d.g)return v;if(!v)return null;try{const F=JSON.parse(v);if(F){for(d=0;d<F.length;d++)if(Array.isArray(F[d])){var T=F[d];if(!(T.length<2)){var I=T[1];if(Array.isArray(I)&&!(I.length<1)){var L=I[0];if(L!="noop"&&L!="stop"&&L!="close")for(let oe=1;oe<I.length;oe++)I[oe]=""}}}}return Vr(F)}catch{return v}}var In={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Rn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Qn;function ms(){}f(ms,cr),ms.prototype.g=function(){return new XMLHttpRequest},Qn=new ms;function ur(d){return encodeURIComponent(String(d))}function zr(d){var v=1;d=d.split(":");const T=[];for(;v>0&&d.length;)T.push(d.shift()),v--;return d.length&&T.push(d.join(":")),T}function xn(d,v,T,I){this.j=d,this.i=v,this.l=T,this.S=I||1,this.V=new eo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Yo}function Yo(){this.i=null,this.g="",this.h=!1}var Ow={},pp={};function gp(d,v,T){d.M=1,d.A=dd(Ur(v)),d.u=T,d.R=!0,Mw(d,null)}function Mw(d,v){d.F=Date.now(),ud(d),d.B=Ur(d.A);var T=d.B,I=d.S;Array.isArray(I)||(I=[String(I)]),Qw(T.i,"t",I),d.C=0,T=d.j.L,d.h=new Yo,d.g=fb(d.j,T?v:null,!d.u),d.P>0&&(d.O=new sd(u(d.Y,d,d.g),d.P)),v=d.V,T=d.g,I=d.ba;var L="readystatechange";Array.isArray(L)||(L&&(id[0]=L.toString()),L=id);for(let F=0;F<L.length;F++){const oe=ae(T,L[F],I||v.handleEvent,!1,v.h||v);if(!oe)break;v.g[oe.key]=oe}v=d.J?U(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),io(),gn(d.i,d.v,d.B,d.l,d.S,d.u)}xn.prototype.ba=function(d){d=d.target;const v=this.O;v&&Hs(d)==3?v.j():this.Y(d)},xn.prototype.Y=function(d){try{if(d==this.g)e:{const Se=Hs(this.g),Tt=this.g.ya(),Ge=this.g.ca();if(!(Se<3)&&(Se!=3||this.g&&(this.h.h||this.g.la()||nb(this.g)))){this.K||Se!=4||Tt==7||(Tt==8||Ge<=0?io(3):io(2)),xp(this);var v=this.g.ca();this.X=v;var T=XP(this);if(this.o=v==200,sn(this.i,this.v,this.B,this.l,this.S,Se,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,L=this.g;if((I=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(I)){var F=I;break t}}F=null}if(d=F)zt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yp(this,d);else{this.o=!1,this.m=3,Ve(12),oo(this),Wl(this);break e}}if(this.R){d=!0;let Rt;for(;!this.K&&this.C<T.length;)if(Rt=YP(this,T),Rt==pp){Se==4&&(this.m=4,Ve(14),d=!1),zt(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Ow){this.m=4,Ve(15),zt(this.i,this.l,T,"[Invalid Chunk]"),d=!1;break}else zt(this.i,this.l,Rt,null),yp(this,Rt);if(Lw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Se!=4||T.length!=0||this.h.h||(this.m=1,Ve(16),d=!1),this.o=this.o&&d,!d)zt(this.i,this.l,T,"[Invalid Chunked Response]"),oo(this),Wl(this);else if(T.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Tp(oe),oe.P=!0,Ve(11))}}else zt(this.i,this.l,T,null),yp(this,T);Se==4&&oo(this),this.o&&!this.K&&(Se==4?cb(this.j,this):(this.o=!1,ud(this)))}else dD(this.g),v==400&&T.indexOf("Unknown SID")>0?(this.m=3,Ve(12)):(this.m=0,Ve(13)),oo(this),Wl(this)}}}catch{}finally{}};function XP(d){if(!Lw(d))return d.g.la();const v=nb(d.g);if(v==="")return"";let T="";const I=v.length,L=Hs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return oo(d),Wl(d),"";d.h.i=new a.TextDecoder}for(let F=0;F<I;F++)d.h.h=!0,T+=d.h.i.decode(v[F],{stream:!(L&&F==I-1)});return v.length=0,d.h.g+=T,d.C=0,d.h.g}function Lw(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function YP(d,v){var T=d.C,I=v.indexOf(`
`,T);return I==-1?pp:(T=Number(v.substring(T,I)),isNaN(T)?Ow:(I+=1,I+T>v.length?pp:(v=v.slice(I,I+T),d.C=I+T,v)))}xn.prototype.cancel=function(){this.K=!0,oo(this)};function ud(d){d.T=Date.now()+d.H,Vw(d,d.H)}function Vw(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Nt(u(d.aa,d),v)}function xp(d){d.D&&(a.clearTimeout(d.D),d.D=null)}xn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?($s(this.i,this.B),this.M!=2&&(io(),Ve(17)),oo(this),this.m=2,Wl(this)):Vw(this,this.T-d)};function Wl(d){d.j.I==0||d.K||cb(d.j,d)}function oo(d){xp(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,fs(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function yp(d,v){try{var T=d.j;if(T.I!=0&&(T.g==d||vp(T.h,d))){if(!d.L&&vp(T.h,d)&&T.I==3){try{var I=T.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var L=I;if(L[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<d.F)gd(T),md(T);else break e;Ep(T),Ve(18)}}else T.xa=L[1],0<T.xa-T.K&&L[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Nt(u(T.Va,T),6e3));Uw(T.h)<=1&&T.ta&&(T.ta=void 0)}else lo(T,11)}else if((d.L||T.g==d)&&gd(T),!R(v))for(L=T.Ba.g.parse(v),v=0;v<L.length;v++){let Ge=L[v];const Rt=Ge[0];if(!(Rt<=T.K))if(T.K=Rt,Ge=Ge[1],T.I==2)if(Ge[0]=="c"){T.M=Ge[1],T.ba=Ge[2];const $r=Ge[3];$r!=null&&(T.ka=$r,T.j.info("VER="+T.ka));const co=Ge[4];co!=null&&(T.za=co,T.j.info("SVER="+T.za));const qs=Ge[5];qs!=null&&typeof qs=="number"&&qs>0&&(I=1.5*qs,T.O=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const Gs=d.g;if(Gs){const yd=Gs.g?Gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yd){var F=I.h;F.g||yd.indexOf("spdy")==-1&&yd.indexOf("quic")==-1&&yd.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(wp(F,F.h),F.h=null))}if(I.G){const Cp=Gs.g?Gs.g.getResponseHeader("X-HTTP-Session-Id"):null;Cp&&(I.wa=Cp,Je(I.J,I.G,Cp))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-d.F,T.j.info("Handshake RTT: "+T.T+"ms")),I=T;var oe=d;if(I.na=hb(I,I.L?I.ba:null,I.W),oe.L){$w(I.h,oe);var Se=oe,Tt=I.O;Tt&&(Se.H=Tt),Se.D&&(xp(Se),ud(Se)),I.g=oe}else ab(I);T.i.length>0&&pd(T)}else Ge[0]!="stop"&&Ge[0]!="close"||lo(T,7);else T.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?lo(T,7):Np(T):Ge[0]!="noop"&&T.l&&T.l.qa(Ge),T.A=0)}}io(4)}catch{}}var JP=class{constructor(d,v){this.g=d,this.map=v}};function Fw(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Uw(d){return d.h?1:d.g?d.g.size:0}function vp(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function wp(d,v){d.g?d.g.add(v):d.h=v}function $w(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Fw.prototype.cancel=function(){if(this.i=Bw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Bw(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const T of d.g.values())v=v.concat(T.G);return v}return g(d.i)}var Ww=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ZP(d,v){if(d){d=d.split("&");for(let T=0;T<d.length;T++){const I=d[T].indexOf("=");let L,F=null;I>=0?(L=d[T].substring(0,I),F=d[T].substring(I+1)):L=d[T],v(L,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Bs(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof Bs?(this.l=d.l,Hl(this,d.j),this.o=d.o,this.g=d.g,ql(this,d.u),this.h=d.h,bp(this,Xw(d.i)),this.m=d.m):d&&(v=String(d).match(Ww))?(this.l=!1,Hl(this,v[1]||"",!0),this.o=Gl(v[2]||""),this.g=Gl(v[3]||"",!0),ql(this,v[4]),this.h=Gl(v[5]||"",!0),bp(this,v[6]||"",!0),this.m=Gl(v[7]||"")):(this.l=!1,this.i=new Ql(null,this.l))}Bs.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Kl(v,Hw,!0),":");var T=this.g;return(T||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Kl(v,Hw,!0),"@"),d.push(ur(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&d.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Kl(T,T.charAt(0)=="/"?nD:tD,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Kl(T,sD)),d.join("")},Bs.prototype.resolve=function(d){const v=Ur(this);let T=!!d.j;T?Hl(v,d.j):T=!!d.o,T?v.o=d.o:T=!!d.g,T?v.g=d.g:T=d.u!=null;var I=d.h;if(T)ql(v,d.u);else if(T=!!d.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var L=v.h.lastIndexOf("/");L!=-1&&(I=v.h.slice(0,L+1)+I)}if(L=I,L==".."||L==".")I="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){I=L.lastIndexOf("/",0)==0,L=L.split("/");const F=[];for(let oe=0;oe<L.length;){const Se=L[oe++];Se=="."?I&&oe==L.length&&F.push(""):Se==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),I&&oe==L.length&&F.push("")):(F.push(Se),I=!0)}I=F.join("/")}else I=L}return T?v.h=I:T=d.i.toString()!=="",T?bp(v,Xw(d.i)):T=!!d.m,T&&(v.m=d.m),v};function Ur(d){return new Bs(d)}function Hl(d,v,T){d.j=T?Gl(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function ql(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function bp(d,v,T){v instanceof Ql?(d.i=v,iD(d.i,d.l)):(T||(v=Kl(v,rD)),d.i=new Ql(v,d.l))}function Je(d,v,T){d.i.set(v,T)}function dd(d){return Je(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Gl(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Kl(d,v,T){return typeof d=="string"?(d=encodeURI(d).replace(v,eD),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function eD(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Hw=/[#\/\?@]/g,tD=/[#\?:]/g,nD=/[#\?]/g,rD=/[#\?@]/g,sD=/#/g;function Ql(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function ao(d){d.g||(d.g=new Map,d.h=0,d.i&&ZP(d.i,function(v,T){d.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}t=Ql.prototype,t.add=function(d,v){ao(this),this.i=null,d=Jo(this,d);let T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(v),this.h+=1,this};function qw(d,v){ao(d),v=Jo(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Gw(d,v){return ao(d),v=Jo(d,v),d.g.has(v)}t.forEach=function(d,v){ao(this),this.g.forEach(function(T,I){T.forEach(function(L){d.call(v,L,I,this)},this)},this)};function Kw(d,v){ao(d);let T=[];if(typeof v=="string")Gw(d,v)&&(T=T.concat(d.g.get(Jo(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)T=T.concat(d[v]);return T}t.set=function(d,v){return ao(this),this.i=null,d=Jo(this,d),Gw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},t.get=function(d,v){return d?(d=Kw(this,d),d.length>0?String(d[0]):v):v};function Qw(d,v,T){qw(d,v),T.length>0&&(d.i=null,d.g.set(Jo(d,v),g(T)),d.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var T=v[I];const L=ur(T);T=Kw(this,T);for(let F=0;F<T.length;F++){let oe=L;T[F]!==""&&(oe+="="+ur(T[F])),d.push(oe)}}return this.i=d.join("&")};function Xw(d){const v=new Ql;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Jo(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function iD(d,v){v&&!d.j&&(ao(d),d.i=null,d.g.forEach(function(T,I){const L=I.toLowerCase();I!=L&&(qw(this,I),Qw(this,L,T))},d)),d.j=v}function oD(d,v){const T=new pn;if(a.Image){const I=new Image;I.onload=h(Ws,T,"TestLoadImage: loaded",!0,v,I),I.onerror=h(Ws,T,"TestLoadImage: error",!1,v,I),I.onabort=h(Ws,T,"TestLoadImage: abort",!1,v,I),I.ontimeout=h(Ws,T,"TestLoadImage: timeout",!1,v,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else v(!1)}function aD(d,v){const T=new pn,I=new AbortController,L=setTimeout(()=>{I.abort(),Ws(T,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:I.signal}).then(F=>{clearTimeout(L),F.ok?Ws(T,"TestPingServer: ok",!0,v):Ws(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(L),Ws(T,"TestPingServer: error",!1,v)})}function Ws(d,v,T,I,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),I(T)}catch{}}function lD(){this.g=new od}function _p(d){this.i=d.Sb||null,this.h=d.ab||!1}f(_p,cr),_p.prototype.g=function(){return new hd(this.i,this.h)};function hd(d,v){qe.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(hd,qe),t=hd.prototype,t.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,Yl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||a).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Xl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Yl(this)),this.g&&(this.readyState=3,Yl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yw(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yw(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Xl(this):Yl(this),this.readyState==3&&Yw(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Xl(this))},t.Na=function(d){this.g&&(this.response=d,Xl(this))},t.ga=function(){this.g&&Xl(this)};function Xl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Yl(d)}t.setRequestHeader=function(d,v){this.A.append(d,v)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=v.next();return d.join(`\r
`)};function Yl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(hd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Jw(d){let v="";return z(d,function(T,I){v+=I,v+=":",v+=T,v+=`\r
`}),v}function Sp(d,v,T){e:{for(I in T){var I=!1;break e}I=!0}I||(T=Jw(T),typeof d=="string"?T!=null&&ur(T):Je(d,v,T))}function dt(d){qe.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(dt,qe);var cD=/^https?$/i,uD=["POST","PUT"];t=dt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,v,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Qn.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(F){Zw(this,F);return}if(d=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var L in I)T.set(L,I[L]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const F of I.keys())T.set(F,I.get(F));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(F=>F.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(Array.prototype.indexOf.call(uD,v,void 0)>=0)||I||L||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,oe]of T)this.g.setRequestHeader(F,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(F){Zw(this,F)}};function Zw(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,eb(d),fd(d)}function eb(d){d.A||(d.A=!0,Ke(d,"complete"),Ke(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ke(this,"complete"),Ke(this,"abort"),fd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fd(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tb(this):this.Xa())},t.Xa=function(){tb(this)};function tb(d){if(d.h&&typeof i<"u"){if(d.v&&Hs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ke(d,"readystatechange"),Hs(d)==4){d.h=!1;try{const F=d.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var I;if(I=F===0){let oe=String(d.D).match(Ww)[1]||null;!oe&&a.self&&a.self.location&&(oe=a.self.location.protocol.slice(0,-1)),I=!cD.test(oe?oe.toLowerCase():"")}T=I}if(T)Ke(d,"complete"),Ke(d,"success");else{d.o=6;try{var L=Hs(d)>2?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.ca()+"]",eb(d)}}finally{fd(d)}}}}function fd(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const T=d.g;d.g=null,v||Ke(d,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Hs(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Hs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),to(v)}};function nb(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function dD(d){const v={};d=(d.g&&Hs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(R(d[I]))continue;var T=zr(d[I]);const L=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const F=v[L]||[];v[L]=F,F.push(T)}K(v,function(I){return I.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jl(d,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||v}function rb(d){this.za=0,this.i=[],this.j=new pn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Jl("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Jl("baseRetryDelayMs",5e3,d),this.Za=Jl("retryDelaySeedMs",1e4,d),this.Ta=Jl("forwardChannelMaxRetries",2,d),this.va=Jl("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Fw(d&&d.concurrentRequestLimit),this.Ba=new lD,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=rb.prototype,t.ka=8,t.I=1,t.connect=function(d,v,T,I){Ve(0),this.W=d,this.H=v||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.J=hb(this,null,this.W),pd(this)};function Np(d){if(sb(d),d.I==3){var v=d.V++,T=Ur(d.J);if(Je(T,"SID",d.M),Je(T,"RID",v),Je(T,"TYPE","terminate"),Zl(d,T),v=new xn(d,d.j,v),v.M=2,v.A=dd(Ur(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(v.A.toString(),"")}catch{}!T&&a.Image&&(new Image().src=v.A,T=!0),T||(v.g=fb(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ud(v)}db(d)}function md(d){d.g&&(Tp(d),d.g.cancel(),d.g=null)}function sb(d){md(d),d.v&&(a.clearTimeout(d.v),d.v=null),gd(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&a.clearTimeout(d.m),d.m=null)}function pd(d){if(!zw(d.h)&&!d.m){d.m=!0;var v=d.Ea;P||N(),O||(P(),O=!0),S.add(v,d),d.D=0}}function hD(d,v){return Uw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Nt(u(d.Ea,d,v),ub(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const L=new xn(this,this.j,d);let F=this.o;if(this.U&&(F?(F=U(F),J(F,this.U)):F=this.U),this.u!==null||this.R||(L.J=F,F=null),this.S)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=ob(this,L,v),T=Ur(this.J),Je(T,"RID",d),Je(T,"CVER",22),this.G&&Je(T,"X-HTTP-Session-Id",this.G),Zl(this,T),F&&(this.R?v="headers="+ur(Jw(F))+"&"+v:this.u&&Sp(T,this.u,F)),wp(this.h,L),this.Ra&&Je(T,"TYPE","init"),this.S?(Je(T,"$req",v),Je(T,"SID","null"),L.U=!0,gp(L,T,null)):gp(L,T,v),this.I=2}}else this.I==3&&(d?ib(this,d):this.i.length==0||zw(this.h)||ib(this))};function ib(d,v){var T;v?T=v.l:T=d.V++;const I=Ur(d.J);Je(I,"SID",d.M),Je(I,"RID",T),Je(I,"AID",d.K),Zl(d,I),d.u&&d.o&&Sp(I,d.u,d.o),T=new xn(d,d.j,T,d.D+1),d.u===null&&(T.J=d.o),v&&(d.i=v.G.concat(d.i)),v=ob(d,T,1e3),T.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),wp(d.h,T),gp(T,I,v)}function Zl(d,v){d.H&&z(d.H,function(T,I){Je(v,I,T)}),d.l&&z({},function(T,I){Je(v,I,T)})}function ob(d,v,T){T=Math.min(d.i.length,T);const I=d.l?u(d.l.Ka,d.l,d):null;e:{var L=d.i;let Se=-1;for(;;){const Tt=["count="+T];Se==-1?T>0?(Se=L[0].g,Tt.push("ofs="+Se)):Se=0:Tt.push("ofs="+Se);let Ge=!0;for(let Rt=0;Rt<T;Rt++){var F=L[Rt].g;const $r=L[Rt].map;if(F-=Se,F<0)Se=Math.max(0,L[Rt].g-100),Ge=!1;else try{F="req"+F+"_"||"";try{var oe=$r instanceof Map?$r:Object.entries($r);for(const[co,qs]of oe){let Gs=qs;l(qs)&&(Gs=Vr(qs)),Tt.push(F+co+"="+encodeURIComponent(Gs))}}catch(co){throw Tt.push(F+"type="+encodeURIComponent("_badmap")),co}}catch{I&&I($r)}}if(Ge){oe=Tt.join("&");break e}}oe=void 0}return d=d.i.splice(0,T),v.G=d,oe}function ab(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;P||N(),O||(P(),O=!0),S.add(v,d),d.A=0}}function Ep(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Nt(u(d.Da,d),ub(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,lb(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Nt(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ve(10),md(this),lb(this))};function Tp(d){d.B!=null&&(a.clearTimeout(d.B),d.B=null)}function lb(d){d.g=new xn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=Ur(d.na);Je(v,"RID","rpc"),Je(v,"SID",d.M),Je(v,"AID",d.K),Je(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&Je(v,"TO",d.ia),Je(v,"TYPE","xmlhttp"),Zl(d,v),d.u&&d.o&&Sp(v,d.u,d.o),d.O&&(d.g.H=d.O);var T=d.g;d=d.ba,T.M=1,T.A=dd(Ur(v)),T.u=null,T.R=!0,Mw(T,d)}t.Va=function(){this.C!=null&&(this.C=null,md(this),Ep(this),Ve(19))};function gd(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function cb(d,v){var T=null;if(d.g==v){gd(d),Tp(d),d.g=null;var I=2}else if(vp(d.h,v))T=v.G,$w(d.h,v),I=1;else return;if(d.I!=0){if(v.o)if(I==1){T=v.u?v.u.length:0,v=Date.now()-v.F;var L=d.D;I=so(),Ke(I,new qt(I,T)),pd(d)}else ab(d);else if(L=v.m,L==3||L==0&&v.X>0||!(I==1&&hD(d,v)||I==2&&Ep(d)))switch(T&&T.length>0&&(v=d.h,v.i=v.i.concat(T)),L){case 1:lo(d,5);break;case 4:lo(d,10);break;case 3:lo(d,6);break;default:lo(d,2)}}}function ub(d,v){let T=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(T*=2),T*v}function lo(d,v){if(d.j.info("Error code "+v),v==2){var T=u(d.bb,d),I=d.Ua;const L=!I;I=new Bs(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hl(I,"https"),dd(I),L?oD(I.toString(),T):aD(I.toString(),T)}else Ve(2);d.I=0,d.l&&d.l.pa(v),db(d),sb(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Ve(2)):(this.j.info("Failed to ping google.com"),Ve(1))};function db(d){if(d.I=0,d.ja=[],d.l){const v=Bw(d.h);(v.length!=0||d.i.length!=0)&&(x(d.ja,v),x(d.ja,d.i),d.h.i.length=0,g(d.i),d.i.length=0),d.l.oa()}}function hb(d,v,T){var I=T instanceof Bs?Ur(T):new Bs(T);if(I.g!="")v&&(I.g=v+"."+I.g),ql(I,I.u);else{var L=a.location;I=L.protocol,v=v?v+"."+L.hostname:L.hostname,L=+L.port;const F=new Bs(null);I&&Hl(F,I),v&&(F.g=v),L&&ql(F,L),T&&(F.h=T),I=F}return T=d.G,v=d.wa,T&&v&&Je(I,T,v),Je(I,"VER",d.ka),Zl(d,I),I}function fb(d,v,T){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new dt(new _p({ab:T})):new dt(d.ma),v.Fa(d.L),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mb(){}t=mb.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function xd(){}xd.prototype.g=function(d,v){return new Pn(d,v)};function Pn(d,v){qe.call(this),this.g=new rb(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!R(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!R(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Zo(this)}f(Pn,qe),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){Np(this.g)},Pn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.v&&(T={},T.__data__=Vr(d),d=T);v.i.push(new JP(v.Ya++,d)),v.I==3&&pd(v)},Pn.prototype.N=function(){this.g.l=null,delete this.j,Np(this.g),delete this.g,Pn.Z.N.call(this)};function pb(d){Bl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const T in v){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}f(pb,Bl);function gb(){ro.call(this),this.status=1}f(gb,ro);function Zo(d){this.g=d}f(Zo,mb),Zo.prototype.ra=function(){Ke(this.g,"a")},Zo.prototype.qa=function(d){Ke(this.g,new pb(d))},Zo.prototype.pa=function(d){Ke(this.g,new gb)},Zo.prototype.oa=function(){Ke(this.g,"b")},xd.prototype.createWebChannel=xd.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,Rk=function(){return new xd},Ik=function(){return so()},Ak=Fr,Jx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},In.NO_ERROR=0,In.TIMEOUT=8,In.HTTP_ERROR=6,bh=In,Rn.COMPLETE="complete",kk=Rn,$l.EventType=no,no.OPEN="a",no.CLOSE="b",no.ERROR="c",no.MESSAGE="d",qe.prototype.listen=qe.prototype.J,mc=$l,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,jk=dt}).apply(typeof Bd<"u"?Bd:typeof self<"u"?self:typeof window<"u"?window:{});const O_="@firebase/firestore",M_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=new i0("@firebase/firestore");function sa(){return Uo.logLevel}function de(t,...e){if(Uo.logLevel<=ke.DEBUG){const n=e.map(y0);Uo.debug(`Firestore (${kl}): ${t}`,...n)}}function Os(t,...e){if(Uo.logLevel<=ke.ERROR){const n=e.map(y0);Uo.error(`Firestore (${kl}): ${t}`,...n)}}function $o(t,...e){if(Uo.logLevel<=ke.WARN){const n=e.map(y0);Uo.warn(`Firestore (${kl}): ${t}`,...n)}}function y0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Pk(t,r,n)}function Pk(t,e,n){let r=`FIRESTORE (${kl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Os(r),new Error(r)}function ze(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Pk(e,s,r)}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ok{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class iz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oz{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Ns;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ns,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ns)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new Dk(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class az{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class lz{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new az(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class L_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cz{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,de("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new L_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new L_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uz(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=uz(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function Zx(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return gg(s)===gg(i)?Ae(s,i):gg(s)?1:-1}return Ae(t.length,e.length)}const dz=55296,hz=57343;function gg(t){const e=t.charCodeAt(0);return e>=dz&&e<=hz}function ll(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_="__name__";class Hr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ye(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Hr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Hr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ae(e.length,n.length)}static compareSegments(e,n){const r=Hr.isNumericId(e),s=Hr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Hr.extractNumericId(e).compare(Hr.extractNumericId(n)):Zx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ji.fromString(e.substring(4,e.length-2))}}class Qe extends Hr{construct(e,n,r){return new Qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const fz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Hr{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return fz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===V_}static keyField(){return new Mt([V_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new le(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new le(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Qe.fromString(e))}static fromName(e){return new pe(Qe.fromString(e).popFirst(5))}static empty(){return new pe(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t,e,n){if(!n)throw new le(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Lk(t,e,n,r){if(e===!0&&r===!0)throw new le(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function F_(t){if(!pe.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z_(t){if(pe.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vk(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Cm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye(12329,{type:typeof t})}function dn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Cm(t);throw new le(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function mz(t,e){if(e<=0)throw new le(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Bu(t,e){if(!Vk(t))throw new le(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new le(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=-62135596800,$_=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*$_);return new Xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<U_)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$_}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bu(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-U_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:bt("string",Xe._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Xe(0,0))}static max(){return new we(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function pz(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Vi(s,pe.empty(),e)}function gz(t){return new Vi(t.readTime,t.key,du)}class Vi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vi(we.min(),pe.empty(),du)}static max(){return new Vi(we.max(),pe.empty(),du)}}function xz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==yz)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{a[u]=h,++l,l===i&&r(a)},h=>s(h))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function wz(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Il(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=-1;function km(t){return t==null}function xf(t){return t===0&&1/t==-1/0}function bz(t){return typeof t=="number"&&Number.isInteger(t)&&!xf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="";function _z(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=B_(e)),e=Sz(t.get(n),e);return B_(e)}function Sz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Fk:n+="";break;default:n+=i}}return n}function B_(t){return t+Fk+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wd(this.root,e,this.comparator,!0)}}class Wd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??$t.RED,this.left=s??$t.EMPTY,this.right=i??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new $t(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return $t.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new H_(this.data.getIterator())}getIteratorFrom(e){return new H_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class H_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new zn([])}unionWith(e){let n=new It(Mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new zn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Uk("Invalid base64 string: "+i):i}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const Nz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=Nz.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zi(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="server_timestamp",Bk="__type__",Wk="__previous_value__",Hk="__local_write_time__";function w0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Bk])==null?void 0:r.stringValue)===$k}function Am(t){const e=t.mapValue.fields[Wk];return w0(e)?Am(e):e}function hu(t){const e=Fi(t.mapValue.fields[Hk].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e,n,r,s,i,a,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const yf="(default)";class cl{constructor(e,n){this.projectId=e,this.database=n||yf}static empty(){return new cl("","")}get isDefaultDatabase(){return this.database===yf}isEqual(e){return e instanceof cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="__type__",Gk="__max__",Hd={mapValue:{fields:{__type__:{stringValue:Gk}}}},Kk="__vector__",vf="value";function Ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?w0(t)?4:Cz(t)?9007199254740991:Tz(t)?10:11:ye(28295,{value:t})}function ls(t,e){if(t===e)return!0;const n=Ui(t);if(n!==Ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hu(t).isEqual(hu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Fi(s.timestampValue),l=Fi(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return zi(s.bytesValue).isEqual(zi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return gt(s.geoPointValue.latitude)===gt(i.geoPointValue.latitude)&&gt(s.geoPointValue.longitude)===gt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return gt(s.integerValue)===gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=gt(s.doubleValue),l=gt(i.doubleValue);return a===l?xf(a)===xf(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ll(t.arrayValue.values||[],e.arrayValue.values||[],ls);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(W_(a)!==W_(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!ls(a[c],l[c])))return!1;return!0}(t,e);default:return ye(52216,{left:t})}}function fu(t,e){return(t.values||[]).find(n=>ls(n,e))!==void 0}function ul(t,e){if(t===e)return 0;const n=Ui(t),r=Ui(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=gt(i.integerValue||i.doubleValue),c=gt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return q_(t.timestampValue,e.timestampValue);case 4:return q_(hu(t),hu(e));case 5:return Zx(t.stringValue,e.stringValue);case 6:return function(i,a){const l=zi(i),c=zi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ae(l[u],c[u]);if(h!==0)return h}return Ae(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ae(gt(i.latitude),gt(a.latitude));return l!==0?l:Ae(gt(i.longitude),gt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return G_(t.arrayValue,e.arrayValue);case 10:return function(i,a){var p,g,x,y;const l=i.fields||{},c=a.fields||{},u=(p=l[vf])==null?void 0:p.arrayValue,h=(g=c[vf])==null?void 0:g.arrayValue,f=Ae(((x=u==null?void 0:u.values)==null?void 0:x.length)||0,((y=h==null?void 0:h.values)==null?void 0:y.length)||0);return f!==0?f:G_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Hd.mapValue&&a===Hd.mapValue)return 0;if(i===Hd.mapValue)return 1;if(a===Hd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=a.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Zx(c[f],h[f]);if(p!==0)return p;const g=ul(l[c[f]],u[h[f]]);if(g!==0)return g}return Ae(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ye(23264,{he:n})}}function q_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Fi(t),r=Fi(e),s=Ae(n.seconds,r.seconds);return s!==0?s:Ae(n.nanos,r.nanos)}function G_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ul(n[s],r[s]);if(i)return i}return Ae(n.length,r.length)}function dl(t){return ey(t)}function ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Fi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ey(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${ey(n.fields[a])}`;return s+"}"}(t.mapValue):ye(61005,{value:t})}function _h(t){switch(Ui(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Am(t);return e?16+_h(e):16;case 5:return 2*t.stringValue.length;case 6:return zi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+_h(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Qi(r.fields,(i,a)=>{s+=i.length+_h(a)}),s}(t.mapValue);default:throw ye(13486,{value:t})}}function K_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ty(t){return!!t&&"integerValue"in t}function b0(t){return!!t&&"arrayValue"in t}function Q_(t){return!!t&&"nullValue"in t}function X_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sh(t){return!!t&&"mapValue"in t}function Tz(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[qk])==null?void 0:r.stringValue)===Kk}function Pc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Qi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Pc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Pc(t.arrayValue.values[n]);return e}return{...t}}function Cz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Gk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.value=e}static empty(){return new bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pc(n)}setAll(e){let n=Mt.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Pc(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ls(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Sh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Qi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new bn(Pc(this.value))}}function Qk(t){const e=[];return Qi(t.fields,(n,r)=>{const s=new Mt([n]);if(Sh(r)){const i=Qk(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new tn(e,0,we.min(),we.min(),we.min(),bn.empty(),0)}static newFoundDocument(e,n,r,s){return new tn(e,1,n,we.min(),r,s,0)}static newNoDocument(e,n){return new tn(e,2,n,we.min(),we.min(),bn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,we.min(),we.min(),bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n){this.position=e,this.inclusive=n}}function Y_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=pe.comparator(pe.fromName(a.referenceValue),n.key):r=ul(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function J_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ls(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function jz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{}class wt extends Xk{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Az(e,n,r):n==="array-contains"?new Pz(e,r):n==="in"?new Dz(e,r):n==="not-in"?new Oz(e,r):n==="array-contains-any"?new Mz(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Iz(e,r):new Rz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ul(n,this.value)):n!==null&&Ui(this.value)===Ui(n)&&this.matchesComparison(ul(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends Xk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Pr(e,n)}matches(e){return Yk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Yk(t){return t.op==="and"}function Jk(t){return kz(t)&&Yk(t)}function kz(t){for(const e of t.filters)if(e instanceof Pr)return!1;return!0}function ny(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+dl(t.value);if(Jk(t))return t.filters.map(e=>ny(e)).join(",");{const e=t.filters.map(n=>ny(n)).join(",");return`${t.op}(${e})`}}function Zk(t,e){return t instanceof wt?function(r,s){return s instanceof wt&&r.op===s.op&&r.field.isEqual(s.field)&&ls(r.value,s.value)}(t,e):t instanceof Pr?function(r,s){return s instanceof Pr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Zk(a,s.filters[l]),!0):!1}(t,e):void ye(19439)}function e2(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${dl(n.value)}`}(t):t instanceof Pr?function(n){return n.op.toString()+" {"+n.getFilters().map(e2).join(" ,")+"}"}(t):"Filter"}class Az extends wt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Iz extends wt{constructor(e,n){super(e,"in",n),this.keys=t2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Rz extends wt{constructor(e,n){super(e,"not-in",n),this.keys=t2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function t2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class Pz extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return b0(n)&&fu(n.arrayValue,this.value)}}class Dz extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fu(this.value.arrayValue,n)}}class Oz extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(fu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fu(this.value.arrayValue,n)}}class Mz extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!b0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Z_(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Lz(t,e,n,r,s,i,a)}function _0(t){const e=be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ny(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),km(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>dl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>dl(r)).join(",")),e.Te=n}return e.Te}function S0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Zk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!J_(t.startAt,e.startAt)&&J_(t.endAt,e.endAt)}function ry(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Vz(t,e,n,r,s,i,a,l){return new Rl(t,e,n,r,s,i,a,l)}function Im(t){return new Rl(t)}function eS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function n2(t){return t.collectionGroup!==null}function Dc(t){const e=be(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new It(Mt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new mu(i,r))}),n.has(Mt.keyField().canonicalString())||e.Ie.push(new mu(Mt.keyField(),r))}return e.Ie}function ns(t){const e=be(t);return e.Ee||(e.Ee=Fz(e,Dc(t))),e.Ee}function Fz(t,e){if(t.limitType==="F")return Z_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new mu(s.field,i)});const n=t.endAt?new wf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wf(t.startAt.position,t.startAt.inclusive):null;return Z_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sy(t,e){const n=t.filters.concat([e]);return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bf(t,e,n){return new Rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rm(t,e){return S0(ns(t),ns(e))&&t.limitType===e.limitType}function r2(t){return`${_0(ns(t))}|lt:${t.limitType}`}function ia(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>e2(s)).join(", ")}]`),km(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>dl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>dl(s)).join(",")),`Target(${r})`}(ns(t))}; limitType=${t.limitType})`}function Pm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):pe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Dc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const u=Y_(a,l,c);return a.inclusive?u<=0:u<0}(r.startAt,Dc(r),s)||r.endAt&&!function(a,l,c){const u=Y_(a,l,c);return a.inclusive?u>=0:u>0}(r.endAt,Dc(r),s))}(t,e)}function zz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function s2(t){return(e,n)=>{let r=!1;for(const s of Dc(t)){const i=Uz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Uz(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),u=l.data.field(i);return c!==null&&u!==null?ul(c,u):ye(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Qi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return zk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=new ut(pe.comparator);function Ms(){return $z}const i2=new ut(pe.comparator);function pc(...t){let e=i2;for(const n of t)e=e.insert(n.key,n);return e}function o2(t){let e=i2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function yo(){return Oc()}function a2(){return Oc()}function Oc(){return new Qo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Bz=new ut(pe.comparator),Wz=new It(pe.comparator);function Ie(...t){let e=Wz;for(const n of t)e=e.add(n);return e}const Hz=new It(Ae);function qz(){return Hz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xf(e)?"-0":e}}function l2(t){return{integerValue:""+t}}function Gz(t,e){return bz(e)?l2(e):N0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this._=void 0}}function Kz(t,e,n){return t instanceof pu?function(s,i){const a={fields:{[Bk]:{stringValue:$k},[Hk]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&w0(i)&&(i=Am(i)),i&&(a.fields[Wk]=i),{mapValue:a}}(n,e):t instanceof hl?u2(t,e):t instanceof gu?d2(t,e):function(s,i){const a=c2(s,i),l=tS(a)+tS(s.Ae);return ty(a)&&ty(s.Ae)?l2(l):N0(s.serializer,l)}(t,e)}function Qz(t,e,n){return t instanceof hl?u2(t,e):t instanceof gu?d2(t,e):n}function c2(t,e){return t instanceof _f?function(r){return ty(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class pu extends Dm{}class hl extends Dm{constructor(e){super(),this.elements=e}}function u2(t,e){const n=h2(e);for(const r of t.elements)n.some(s=>ls(s,r))||n.push(r);return{arrayValue:{values:n}}}class gu extends Dm{constructor(e){super(),this.elements=e}}function d2(t,e){let n=h2(e);for(const r of t.elements)n=n.filter(s=>!ls(s,r));return{arrayValue:{values:n}}}class _f extends Dm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function tS(t){return gt(t.integerValue||t.doubleValue)}function h2(t){return b0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.field=e,this.transform=n}}function Xz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof hl&&s instanceof hl||r instanceof gu&&s instanceof gu?ll(r.elements,s.elements,ls):r instanceof _f&&s instanceof _f?ls(r.Ae,s.Ae):r instanceof pu&&s instanceof pu}(t.transform,e.transform)}class Yz{constructor(e,n){this.version=e,this.transformResults=n}}class sr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sr}static exists(e){return new sr(void 0,e)}static updateTime(e){return new sr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Om{}function m2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new E0(t.key,sr.none()):new Wu(t.key,t.data,sr.none());{const n=t.data,r=bn.empty();let s=new It(Mt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Xi(t.key,r,new zn(s.toArray()),sr.none())}}function Jz(t,e,n){t instanceof Wu?function(s,i,a){const l=s.value.clone(),c=rS(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Xi?function(s,i,a){if(!Nh(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=rS(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(p2(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Mc(t,e,n,r){return t instanceof Wu?function(i,a,l,c){if(!Nh(i.precondition,a))return l;const u=i.value.clone(),h=sS(i.fieldTransforms,c,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xi?function(i,a,l,c){if(!Nh(i.precondition,a))return l;const u=sS(i.fieldTransforms,c,a),h=a.data;return h.setAll(p2(i)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,a,l){return Nh(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function Zz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=c2(r.transform,s||null);i!=null&&(n===null&&(n=bn.empty()),n.set(r.field,i))}return n||null}function nS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ll(r,s,(i,a)=>Xz(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Wu extends Om{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xi extends Om{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function p2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function rS(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,Qz(a,l,n[s]))}return r}function sS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Kz(i,a,e))}return r}class E0 extends Om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e8 extends Om{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Jz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=a2();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=m2(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(n,r)=>nS(n,r))&&ll(this.baseMutations,e.baseMutations,(n,r)=>nS(n,r))}}class T0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Bz}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new T0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n8=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt,De;function s8(t){switch(t){case H.OK:return ye(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ye(15467,{code:t})}}function g2(t){if(t===void 0)return Os("GRPC error has no .code"),H.UNKNOWN;switch(t){case yt.OK:return H.OK;case yt.CANCELLED:return H.CANCELLED;case yt.UNKNOWN:return H.UNKNOWN;case yt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case yt.INTERNAL:return H.INTERNAL;case yt.UNAVAILABLE:return H.UNAVAILABLE;case yt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case yt.NOT_FOUND:return H.NOT_FOUND;case yt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case yt.ABORTED:return H.ABORTED;case yt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case yt.DATA_LOSS:return H.DATA_LOSS;default:return ye(39323,{code:t})}}(De=yt||(yt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i8(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8=new ji([4294967295,4294967295],0);function iS(t){const e=i8().encode(t),n=new Ck;return n.update(e),new Uint8Array(n.digest())}function oS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ji([n,r],0),new ji([s,i],0)]}class C0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new gc(`Invalid padding: ${n}`);if(r<0)throw new gc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new gc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new gc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ji.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ji.fromNumber(r)));return s.compare(o8)===1&&(s=new ji([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=iS(e),[r,s]=oS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new C0(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=iS(e),[r,s]=oS(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class gc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Mm(we.min(),s,new ut(Ae),Ms(),Ie())}}class Hu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hu(r,n,Ie(),Ie(),Ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class x2{constructor(e,n){this.targetId=e,this.Ce=n}}class y2{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class aS{constructor(){this.ve=0,this.Fe=lS(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ie(),n=Ie(),r=Ie();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ye(38017,{changeType:i})}}),new Hu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=lS()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class a8{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ms(),this.Je=qd(),this.He=qd(),this.Ye=new ut(Ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ry(i))if(r===0){const a=new pe(i.path);this.et(n,a,tn.newNoDocument(a,we.min()))}else ze(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=zi(r).toUint8Array()}catch(c){if(c instanceof Uk)return $o("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new C0(a,s,i)}catch(c){return $o(c instanceof gc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&ry(l.target)){const c=new pe(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,tn.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=Ie();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Mm(e,n,this.Ye,this.je,r);return this.je=Ms(),this.Je=qd(),this.He=qd(),this.Ye=new ut(Ae),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new aS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new It(Ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new It(Ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new aS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function qd(){return new ut(pe.comparator)}function lS(){return new ut(pe.comparator)}const l8={asc:"ASCENDING",desc:"DESCENDING"},c8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u8={and:"AND",or:"OR"};class d8{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iy(t,e){return t.useProto3Json||km(e)?e:{value:e}}function Sf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function h8(t,e){return Sf(t,e.toTimestamp())}function rs(t){return ze(!!t,49232),we.fromTimestamp(function(n){const r=Fi(n);return new Xe(r.seconds,r.nanos)}(t))}function j0(t,e){return oy(t,e).canonicalString()}function oy(t,e){const n=function(s){return new Qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function w2(t){const e=Qe.fromString(t);return ze(E2(e),10190,{key:e.toString()}),e}function ay(t,e){return j0(t.databaseId,e.path)}function xg(t,e){const n=w2(e);if(n.get(1)!==t.databaseId.projectId)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(_2(n))}function b2(t,e){return j0(t.databaseId,e)}function f8(t){const e=w2(t);return e.length===4?Qe.emptyPath():_2(e)}function ly(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _2(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function cS(t,e,n){return{name:ay(t,e),fields:n.value.mapValue.fields}}function m8(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ye(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(ze(h===void 0||typeof h=="string",58123),Vt.fromBase64String(h||"")):(ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const h=u.code===void 0?H.UNKNOWN:g2(u.code);return new le(h,u.message||"")}(a);n=new y2(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=xg(t,r.document.name),i=rs(r.document.updateTime),a=r.document.createTime?rs(r.document.createTime):we.min(),l=new bn({mapValue:{fields:r.document.fields}}),c=tn.newFoundDocument(s,i,a,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Eh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=xg(t,r.document),i=r.readTime?rs(r.readTime):we.min(),a=tn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Eh([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=xg(t,r.document),i=r.removedTargetIds||[];n=new Eh([],i,s,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new r8(s,i),l=r.targetId;n=new x2(l,a)}}return n}function p8(t,e){let n;if(e instanceof Wu)n={update:cS(t,e.key,e.value)};else if(e instanceof E0)n={delete:ay(t,e.key)};else if(e instanceof Xi)n={update:cS(t,e.key,e.data),updateMask:N8(e.fieldMask)};else{if(!(e instanceof e8))return ye(16599,{Vt:e.type});n={verify:ay(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof pu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof hl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof gu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _f)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ye(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:h8(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ye(27497)}(t,e.precondition)),n}function g8(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?rs(s.updateTime):rs(i);return a.isEqual(we.min())&&(a=rs(i)),new Yz(a,s.transformResults||[])}(n,e))):[]}function x8(t,e){return{documents:[b2(t,e.path)]}}function y8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=b2(t,s);const i=function(u){if(u.length!==0)return N2(Pr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:oa(p.field),direction:b8(p.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=iy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function v8(t){let e=f8(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=S2(f);return p instanceof Pr&&Jk(p)?p.getFilters():[p]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(p=>function(x){return new mu(aa(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,km(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new wf(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new wf(g,p)}(n.endAt)),Vz(e,s,a,i,l,"F",c,u)}function w8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function S2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=aa(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=aa(n.unaryFilter.field);return wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=aa(n.unaryFilter.field);return wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=aa(n.unaryFilter.field);return wt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}}(t):t.fieldFilter!==void 0?function(n){return wt.create(aa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pr.create(n.compositeFilter.filters.map(r=>S2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye(1026)}}(n.compositeFilter.op))}(t):ye(30097,{filter:t})}function b8(t){return l8[t]}function _8(t){return c8[t]}function S8(t){return u8[t]}function oa(t){return{fieldPath:t.canonicalString()}}function aa(t){return Mt.fromServerFormat(t.fieldPath)}function N2(t){return t instanceof wt?function(n){if(n.op==="=="){if(X_(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NAN"}};if(Q_(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(X_(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NAN"}};if(Q_(n.value))return{unaryFilter:{field:oa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(n.field),op:_8(n.op),value:n.value}}}(t):t instanceof Pr?function(n){const r=n.getFilters().map(s=>N2(s));return r.length===1?r[0]:{compositeFilter:{op:S8(n.op),filters:r}}}(t):ye(54877,{filter:t})}function N8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function E2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n,r,s,i=we.min(),a=we.min(),l=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.yt=e}}function T8(t){const e=v8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(){this.Cn=new j8}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Vi.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Vi.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class j8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new It(Qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new It(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T2=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(T2,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new fl(0)}static cr(){return new fl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="LruGarbageCollector",k8=1048576;function hS([t,e],[n,r]){const s=Ae(t,n);return s===0?Ae(e,r):s}class A8{constructor(e){this.Ir=e,this.buffer=new It(hS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();hS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class I8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(dS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Il(n)?de(dS,"Ignoring IndexedDB error during garbage collection: ",n):await Al(n)}await this.Vr(3e5)})}}class R8{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(jm.ce);const r=new A8(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(uS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),uS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),sa()<=ke.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function P8(t,e){return new R8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(){this.changes=new Qo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Mc(r.mutation,s,zn.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){const s=yo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=pc();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=yo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Ms();const a=Oc(),l=function(){return Oc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Xi)?i=i.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),Mc(h.mutation,u,h.mutation.getFieldMask(),Xe.now())):a.set(u.key,zn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>a.set(u,h)),n.forEach((u,h)=>l.set(u,new O8(h,a.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Oc();let s=new ut((a,l)=>a-l),i=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||zn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ie()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=a2();h.forEach(p=>{if(!i.has(p)){const g=m2(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return G.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return pe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):n2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(yo());let l=du,c=i;return a.next(u=>G.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ie())).next(h=>({batchId:l,changes:o2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let s=pc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=pc();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const u=function(f,p){return new Rl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,tn.newInvalidDocument(h)))});let l=pc();return a.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Mc(h.mutation,u,zn.empty(),Xe.now()),Pm(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:rs(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:T8(s.bundledQuery),readTime:rs(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(){this.overlays=new ut(pe.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=yo();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=yo(),i=n.length+1,a=new pe(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ut((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=yo(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=yo(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return G.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new n8(n,r));let i=this.qr.get(n);i===void 0&&(i=Ie(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.Qr=new It(Pt.$r),this.Ur=new It(Pt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Pt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Pt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new pe(new Qe([])),r=new Pt(n,e),s=new Pt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new Qe([])),r=new Pt(n,e),s=new Pt(n,e+1);let i=Ie();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Pt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Pt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||Ae(e.Yr,n.Yr)}static Kr(e,n){return Ae(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new It(Pt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new t8(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Pt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(a)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?v0:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Pt(n,0),s=new Pt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ae);return n.forEach(s=>{const i=new Pt(s,0),a=new Pt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;pe.isDocumentKey(i)||(i=i.child(""));const a=new Pt(new pe(i),0);let l=new It(Ae);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},a),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(n.mutations,s=>{const i=new Pt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Pt(n,0),s=this.Zr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e){this.ri=e,this.docs=function(){return new ut(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=Ms();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():tn.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Ms();const a=n.path,l=new pe(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||xz(gz(h),r)<=0||(s.has(h.key)||Pm(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ye(9500)}ii(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $8(this)}getSize(e){return G.resolve(this.size)}}class $8 extends D8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e){this.persistence=e,this.si=new Qo(n=>_0(n),S0),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new k0,this.targetCount=0,this.ai=fl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new fl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n){this.ui={},this.overlays={},this.ci=new jm(0),this.li=!1,this.li=!0,this.hi=new F8,this.referenceDelegate=e(this),this.Pi=new B8(this),this.indexManager=new C8,this.remoteDocumentCache=function(s){return new U8(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new E8(n),this.Ii=new L8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new V8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new z8(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const s=new W8(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class W8 extends vz{constructor(e){super(),this.currentSequenceNumber=e}}class A0{constructor(e){this.persistence=e,this.Ri=new k0,this.Vi=null}static mi(e){return new A0(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{const s=pe.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Nf{constructor(e,n){this.persistence=e,this.pi=new Qo(r=>_z(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=P8(this,n)}static mi(e,n){return new Nf(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?G.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,we.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=_h(e.data.value)),n}br(e,n,r){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ie(),s=Ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new I0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return L6()?8:wz(rn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new H8;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(sa()<=ke.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ia(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(sa()<=ke.DEBUG&&de("QueryEngine","Query:",ia(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(sa()<=ke.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ia(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ns(n))):G.resolve())}ys(e,n){if(eS(n))return G.resolve(null);let r=ns(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bf(n,null,"F"),r=ns(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=Ie(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,a,c.readTime)?this.ys(e,bf(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return eS(n)||s.isEqual(we.min())?G.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?G.resolve(null):(sa()<=ke.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ia(n)),this.vs(e,a,n,pz(s,du)).next(l=>l))})}Ds(e,n){let r=new It(s2(e));return n.forEach((s,i)=>{Pm(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return sa()<=ke.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ia(n)),this.ps.getDocumentsMatchingQuery(e,n,Vi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="LocalStore",G8=3e8;class K8{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ut(Ae),this.xs=new Qo(i=>_0(i),S0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new M8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Q8(t,e,n,r){return new K8(t,e,n,r)}async function j2(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=Ie();for(const u of s){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:l}))})})}function X8(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let g=G.resolve();return p.forEach(x=>{g=g.next(()=>h.getEntry(c,x)).next(y=>{const b=u.docVersions.get(x);ze(b!==null,48541),y.version.compareTo(b)<0&&(f.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),h.addEntry(y)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ie();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function k2(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Y8(t,e){const n=be(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Vt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(y,b,_){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=G8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(i,g))});let c=Ms(),u=Ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(J8(i,a,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(we.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return G.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function J8(t,e,n){let r=Ie(),s=Ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Ms();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):de(R0,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:a,qs:s}})}function Z8(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=v0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eU(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new gi(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function cy(t,e,n){const r=be(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Il(a))throw a;de(R0,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function fS(t,e,n){const r=be(t);let s=we.min(),i=Ie();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,h){const f=be(c),p=f.xs.get(h);return p!==void 0?G.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,a,ns(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:we.min(),n?i:Ie())).next(l=>(tU(r,zz(e),l),{documents:l,Qs:i})))}function tU(t,e,n){let r=t.Os.get(e)||we.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class mS{constructor(){this.activeTargetIds=qz()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nU{constructor(){this.Mo=new mS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new mS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="ConnectivityMonitor";class gS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(pS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(pS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gd=null;function uy(){return Gd===null?Gd=function(){return 268435456+Math.round(2147483648*Math.random())}():Gd++,"0x"+Gd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="RestConnection",sU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===yf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=uy(),l=this.zo(e,n.toUriEncodedString());de(yg,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=Cl(u);return this.Jo(e,l,c,r,h).then(f=>(de(yg,`Received RPC '${e}' ${a}: `,f),f),f=>{throw $o(yg,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+kl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=sU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class aU extends iU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=uy();return new Promise((l,c)=>{const u=new jk;u.setWithCredentials(!0),u.listenOnce(kk.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case bh.NO_ERROR:const f=u.getResponseJson();de(Xt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case bh.TIMEOUT:de(Xt,`RPC '${e}' ${a} timed out`),c(new le(H.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const p=u.getStatus();if(de(Xt,`RPC '${e}' ${a} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const y=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(w)>=0?w:H.UNKNOWN}(x.status);c(new le(y,x.message))}else c(new le(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new le(H.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{de(Xt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);de(Xt,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=uy(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Rk(),l=Ik(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");de(Xt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let p=!1,g=!1;const x=new oU({Yo:b=>{g?de(Xt,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(de(Xt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),de(Xt,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Zo:()=>f.close()}),y=(b,_,w)=>{b.listen(_,E=>{try{w(E)}catch(j){setTimeout(()=>{throw j},0)}})};return y(f,mc.EventType.OPEN,()=>{g||(de(Xt,`RPC '${e}' stream ${s} transport opened.`),x.o_())}),y(f,mc.EventType.CLOSE,()=>{g||(g=!0,de(Xt,`RPC '${e}' stream ${s} transport closed`),x.a_(),this.E_(f))}),y(f,mc.EventType.ERROR,b=>{g||(g=!0,$o(Xt,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),x.a_(new le(H.UNAVAILABLE,"The operation could not be completed")))}),y(f,mc.EventType.MESSAGE,b=>{var _;if(!g){const w=b.data[0];ze(!!w,16349);const E=w,j=(E==null?void 0:E.error)||((_=E[0])==null?void 0:_.error);if(j){de(Xt,`RPC '${e}' stream ${s} received error:`,j);const P=j.status;let O=function(C){const k=yt[C];if(k!==void 0)return g2(k)}(P),S=j.message;O===void 0&&(O=H.INTERNAL,S="Unknown error status: "+P+" with message "+j.message),g=!0,x.a_(new le(O,S)),f.close()}else de(Xt,`RPC '${e}' stream ${s} received:`,w),x.u_(w)}}),y(l,Ak.STAT_EVENT,b=>{b.stat===Jx.PROXY?de(Xt,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Jx.NOPROXY&&de(Xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function vg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){return new d8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="PersistentStream";class I2{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new A2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Os(n.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new le(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return de(xS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(de(xS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lU extends I2{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=m8(this.serializer,e),r=function(i){if(!("targetChange"in i))return we.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?we.min():a.readTime?rs(a.readTime):we.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ly(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=ry(c)?{documents:x8(i,c)}:{query:y8(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=v2(i,a.resumeToken);const u=iy(i,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(we.min())>0){l.readTime=Sf(i,a.snapshotVersion.toTimestamp());const u=iy(i,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=w8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ly(this.serializer),n.removeTarget=e,this.q_(n)}}class cU extends I2{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=g8(e.writeResults,e.commitTime),r=rs(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ly(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>p8(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{}class dU extends uU{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,oy(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(H.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,oy(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(H.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class hU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Os(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="RemoteStore";class fU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{Xo(this)&&(de(Bo,"Restarting streams for network reachability change."),await async function(c){const u=be(c);u.Ea.add(4),await qu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Vm(u)}(this))})}),this.Ra=new hU(r,s)}}async function Vm(t){if(Xo(t))for(const e of t.da)await e(!0)}async function qu(t){for(const e of t.da)await e(!1)}function R2(t,e){const n=be(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),M0(n)?O0(n):Pl(n).O_()&&D0(n,e))}function P0(t,e){const n=be(t),r=Pl(n);n.Ia.delete(e),r.O_()&&P2(n,e),n.Ia.size===0&&(r.O_()?r.L_():Xo(n)&&n.Ra.set("Unknown"))}function D0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pl(t).Y_(e)}function P2(t,e){t.Va.Ue(e),Pl(t).Z_(e)}function O0(t){t.Va=new a8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Pl(t).start(),t.Ra.ua()}function M0(t){return Xo(t)&&!Pl(t).x_()&&t.Ia.size>0}function Xo(t){return be(t).Ea.size===0}function D2(t){t.Va=void 0}async function mU(t){t.Ra.set("Online")}async function pU(t){t.Ia.forEach((e,n)=>{D0(t,e)})}async function gU(t,e){D2(t),M0(t)?(t.Ra.ha(e),O0(t)):t.Ra.set("Unknown")}async function xU(t,e,n){if(t.Ra.set("Online"),e instanceof y2&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){de(Bo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ef(t,r)}else if(e instanceof Eh?t.Va.Ze(e):e instanceof x2?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const r=await k2(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Vt.EMPTY_BYTE_STRING,h.snapshotVersion)),P2(i,c);const f=new gi(h.target,c,u,h.sequenceNumber);D0(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){de(Bo,"Failed to raise snapshot:",r),await Ef(t,r)}}async function Ef(t,e,n){if(!Il(e))throw e;t.Ea.add(1),await qu(t),t.Ra.set("Offline"),n||(n=()=>k2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de(Bo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Vm(t)})}function O2(t,e){return e().catch(n=>Ef(t,n,e))}async function Fm(t){const e=be(t),n=$i(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:v0;for(;yU(e);)try{const s=await Z8(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,vU(e,s)}catch(s){await Ef(e,s)}M2(e)&&L2(e)}function yU(t){return Xo(t)&&t.Ta.length<10}function vU(t,e){t.Ta.push(e);const n=$i(t);n.O_()&&n.X_&&n.ea(e.mutations)}function M2(t){return Xo(t)&&!$i(t).x_()&&t.Ta.length>0}function L2(t){$i(t).start()}async function wU(t){$i(t).ra()}async function bU(t){const e=$i(t);for(const n of t.Ta)e.ea(n.mutations)}async function _U(t,e,n){const r=t.Ta.shift(),s=T0.from(r,e,n);await O2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fm(t)}async function SU(t,e){e&&$i(t).X_&&await async function(r,s){if(function(a){return s8(a)&&a!==H.ABORTED}(s.code)){const i=r.Ta.shift();$i(r).B_(),await O2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Fm(r)}}(t,e),M2(t)&&L2(t)}async function yS(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),de(Bo,"RemoteStore received new credentials");const r=Xo(n);n.Ea.add(3),await qu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Vm(n)}async function NU(t,e){const n=be(t);e?(n.Ea.delete(2),await Vm(n)):e||(n.Ea.add(2),await qu(n),n.Ra.set("Unknown"))}function Pl(t){return t.ma||(t.ma=function(n,r,s){const i=be(n);return i.sa(),new lU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:mU.bind(null,t),t_:pU.bind(null,t),r_:gU.bind(null,t),H_:xU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),M0(t)?O0(t):t.Ra.set("Unknown")):(await t.ma.stop(),D2(t))})),t.ma}function $i(t){return t.fa||(t.fa=function(n,r,s){const i=be(n);return i.sa(),new cU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:wU.bind(null,t),r_:SU.bind(null,t),ta:bU.bind(null,t),na:_U.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Fm(t)):(await t.fa.stop(),t.Ta.length>0&&(de(Bo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new L0(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function V0(t,e){if(Os("AsyncQueue",`${e}: ${t}`),Il(t))return new le(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{static emptySet(e){return new Da(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=pc(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Da)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Da;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.ga=new ut(pe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ml{constructor(e,n,r,s,i,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ml(e,n,Da.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class TU{constructor(){this.queries=wS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=be(n),i=s.queries;s.queries=wS(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new le(H.ABORTED,"Firestore shutting down"))}}function wS(){return new Qo(t=>r2(t),Rm)}async function F0(t,e){const n=be(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new EU,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=V0(a,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&U0(n)}async function z0(t,e){const n=be(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function CU(t,e){const n=be(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&U0(n)}function jU(t,e,n){const r=be(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function U0(t){t.Ca.forEach(e=>{e.next()})}var dy,bS;(bS=dy||(dy={})).Ma="default",bS.Cache="cache";class $0{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.key=e}}class F2{constructor(e){this.key=e}}class kU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ie(),this.mutatedKeys=Ie(),this.eu=s2(e),this.tu=new Da(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new vS,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=Pm(this.query,f)?f:null,x=!!p&&this.mutatedKeys.has(p.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?x!==y&&(r.track({type:3,doc:g}),b=!0):this.su(p,g)||(r.track({type:2,doc:g}),b=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),b=!0):p&&!g&&(r.track({type:1,doc:p}),b=!0,(c||u)&&(l=!0)),b&&(g?(a=a.add(g),i=y?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(g,x){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:b})}};return y(g)-y(x)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new ml(this.query,e.tu,i,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new F2(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new V2(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const B0="SyncEngine";class AU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IU{constructor(e){this.key=e,this.hu=!1}}class RU{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Qo(l=>r2(l),Rm),this.Iu=new Map,this.Eu=new Set,this.du=new ut(pe.comparator),this.Au=new Map,this.Ru=new k0,this.Vu={},this.mu=new Map,this.fu=fl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PU(t,e,n=!0){const r=H2(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await z2(r,e,n,!0),s}async function DU(t,e){const n=H2(t);await z2(n,e,!0,!1)}async function z2(t,e,n,r){const s=await eU(t.localStore,ns(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await OU(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&R2(t.remoteStore,s),l}async function OU(t,e,n,r,s){t.pu=(f,p,g)=>async function(y,b,_,w){let E=b.view.ru(_);E.Cs&&(E=await fS(y.localStore,b.query,!1).then(({documents:S})=>b.view.ru(S,E)));const j=w&&w.targetChanges.get(b.targetId),P=w&&w.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(E,y.isPrimaryClient,j,P);return SS(y,b.targetId,O.au),O.snapshot}(t,f,p,g);const i=await fS(t.localStore,e,!0),a=new kU(e,i.Qs),l=a.ru(i.documents),c=Hu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);SS(t,n,u.au);const h=new AU(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function MU(t,e,n){const r=be(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Rm(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await cy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&P0(r.remoteStore,s.targetId),hy(r,s.targetId)}).catch(Al)):(hy(r,s.targetId),await cy(r.localStore,s.targetId,!0))}async function LU(t,e){const n=be(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),P0(n.remoteStore,r.targetId))}async function VU(t,e,n){const r=HU(t);try{const s=await function(a,l){const c=be(a),u=Xe.now(),h=l.reduce((g,x)=>g.add(x.key),Ie());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=Ms(),y=Ie();return c.Ns.getEntries(g,h).next(b=>{x=b,x.forEach((_,w)=>{w.isValidDocument()||(y=y.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,x)).next(b=>{f=b;const _=[];for(const w of l){const E=Zz(w,f.get(w.key).overlayedDocument);E!=null&&_.push(new Xi(w.key,E,Qk(E.value.mapValue),sr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,_,l)}).next(b=>{p=b;const _=b.applyToLocalDocumentSet(f,y);return c.documentOverlayCache.saveOverlays(g,b.batchId,_)})}).then(()=>({batchId:p.batchId,changes:o2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new ut(Ae)),u=u.insert(l,c),a.Vu[a.currentUser.toKey()]=u}(r,s.batchId,n),await Gu(r,s.changes),await Fm(r.remoteStore)}catch(s){const i=V0(s,"Failed to persist write");n.reject(i)}}async function U2(t,e){const n=be(t);try{const r=await Y8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ze(a.hu,14607):s.removedDocuments.size>0&&(ze(a.hu,42227),a.hu=!1))}),await Gu(n,r,e)}catch(r){await Al(r)}}function _S(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=be(a);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&U0(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function FU(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new ut(pe.comparator);a=a.insert(i,tn.newNoDocument(i,we.min()));const l=Ie().add(i),c=new Mm(we.min(),new Map,new ut(Ae),a,l);await U2(r,c),r.du=r.du.remove(i),r.Au.delete(e),W0(r)}else await cy(r.localStore,e,!1).then(()=>hy(r,e,n)).catch(Al)}async function zU(t,e){const n=be(t),r=e.batch.batchId;try{const s=await X8(n.localStore,e);B2(n,r,null),$2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gu(n,s)}catch(s){await Al(s)}}async function UU(t,e,n){const r=be(t);try{const s=await function(a,l){const c=be(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ze(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);B2(r,e,n),$2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gu(r,s)}catch(s){await Al(s)}}function $2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function B2(t,e,n){const r=be(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function hy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||W2(t,r)})}function W2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(P0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),W0(t))}function SS(t,e,n){for(const r of n)r instanceof V2?(t.Ru.addReference(r.key,e),$U(t,r)):r instanceof F2?(de(B0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||W2(t,r.key)):ye(19791,{wu:r})}function $U(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(de(B0,"New document in limbo: "+n),t.Eu.add(r),W0(t))}function W0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new pe(Qe.fromString(e)),r=t.fu.next();t.Au.set(r,new IU(n)),t.du=t.du.insert(n,r),R2(t.remoteStore,new gi(ns(Im(n.path)),r,"TargetPurposeLimboResolution",jm.ce))}}async function Gu(t,e,n){const r=be(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=I0.As(c.targetId,u);i.push(f)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,u){const h=be(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(u,p=>G.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>G.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Il(f))throw f;de(R0,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),x=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(x);h.Ms=h.Ms.insert(p,y)}}}(r.localStore,i))}async function BU(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){de(B0,"User change. New user:",e.toKey());const r=await j2(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new le(H.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gu(n,r.Ls)}}function WU(t,e){const n=be(t),r=n.Au.get(e);if(r&&r.hu)return Ie().add(r.key);{let s=Ie();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function H2(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=U2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FU.bind(null,e),e.Pu.H_=CU.bind(null,e.eventManager),e.Pu.yu=jU.bind(null,e.eventManager),e}function HU(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UU.bind(null,e),e}class Tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Q8(this.persistence,new q8,e.initialUser,this.serializer)}Cu(e){return new C2(A0.mi,this.serializer)}Du(e){return new nU}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Tf.provider={build:()=>new Tf};class qU extends Tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof Nf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new I8(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new C2(r=>Nf.mi(r,n),this.serializer)}}class fy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_S(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=BU.bind(null,this.syncEngine),await NU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TU}()}createDatastore(e){const n=Lm(e.databaseInfo.databaseId),r=function(i){return new aU(i)}(e.databaseInfo);return function(i,a,l,c){return new dU(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new fU(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>_S(this.syncEngine,n,0),function(){return gS.v()?new gS:new rU}())}createSyncEngine(e,n){return function(s,i,a,l,c,u,h){const f=new RU(s,i,a,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=be(s);de(Bo,"RemoteStore shutting down."),i.Ea.add(5),await qu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}fy.provider={build:()=>new fy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Os("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="FirestoreClient";class GU{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jt.UNAUTHENTICATED,this.clientId=Tm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{de(Bi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(de(Bi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=V0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function wg(t,e){t.asyncQueue.verifyOperationInProgress(),de(Bi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await j2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function NS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await KU(t);de(Bi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>yS(e.remoteStore,s)),t._onlineComponents=e}async function KU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(Bi,"Using user provided OfflineComponentProvider");try{await wg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;$o("Error using user provided cache. Falling back to memory cache: "+n),await wg(t,new Tf)}}else de(Bi,"Using default OfflineComponentProvider"),await wg(t,new qU(void 0));return t._offlineComponents}async function q2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(Bi,"Using user provided OnlineComponentProvider"),await NS(t,t._uninitializedComponentsProvider._online)):(de(Bi,"Using default OnlineComponentProvider"),await NS(t,new fy))),t._onlineComponents}function QU(t){return q2(t).then(e=>e.syncEngine)}async function Cf(t){const e=await q2(t),n=e.eventManager;return n.onListen=PU.bind(null,e.syncEngine),n.onUnlisten=MU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=DU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=LU.bind(null,e.syncEngine),n}function XU(t,e,n={}){const r=new Ns;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new H0({next:p=>{h.Nu(),a.enqueueAndForget(()=>z0(i,f));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new le(H.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new le(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new $0(Im(l.path),h,{includeMetadataChanges:!0,qa:!0});return F0(i,f)}(await Cf(t),t.asyncQueue,e,n,r)),r.promise}function YU(t,e,n={}){const r=new Ns;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,u){const h=new H0({next:p=>{h.Nu(),a.enqueueAndForget(()=>z0(i,f)),p.fromCache&&c.source==="server"?u.reject(new le(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new $0(l,h,{includeMetadataChanges:!0,qa:!0});return F0(i,f)}(await Cf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2="firestore.googleapis.com",TS=!0;class CS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=K2,this.ssl=TS}else this.host=e.host,this.ssl=e.ssl??TS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k8)throw new le(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Lk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=G2(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ok;switch(r.type){case"firstParty":return new lz(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ES.get(n);r&&(de("ComponentProvider","Removing Datastore"),ES.delete(n),r.terminate())}(this),Promise.resolve()}}function Q2(t,e,n,r={}){var u;t=dn(t,zm);const s=Cl(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&($j(`https://${l}`),Bj("Firestore",!0)),i.host!==K2&&i.host!==l&&$o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Li(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Jt.MOCK_USER;else{h=j6(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new le(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Jt(p)}t._authCredentials=new iz(new Dk(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Bu(n,at._jsonSchema))return new at(e,r||null,new pe(Qe.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:bt("string",at._jsonSchemaVersion),referencePath:bt("string")};class Es extends ds{constructor(e,n,r){super(e,n,Im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new pe(e))}withConverter(e){return new Es(this.firestore,e,this._path)}}function Wi(t,e,...n){if(t=St(t),Mk("collection","path",e),t instanceof zm){const r=Qe.fromString(e,...n);return z_(r),new Es(t,null,r)}{if(!(t instanceof at||t instanceof Es))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return z_(r),new Es(t.firestore,null,r)}}function He(t,e,...n){if(t=St(t),arguments.length===1&&(e=Tm.newId()),Mk("doc","path",e),t instanceof zm){const r=Qe.fromString(e,...n);return F_(r),new at(t,null,new pe(r))}{if(!(t instanceof at||t instanceof Es))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return F_(r),new at(t.firestore,t instanceof Es?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="AsyncQueue";class kS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new A2(this,"async_queue_retry"),this._c=()=>{const r=vg();r&&de(jS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=vg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=vg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ns;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Il(e))throw e;de(jS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Os("INTERNAL UNHANDLED ERROR: ",AS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=L0.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ye(47125,{Pc:AS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function AS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class cs extends zm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new kS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kS(e),this._firestoreClient=void 0,await e}}}function X2(t,e){const n=typeof t=="object"?t:Gj(),r=typeof t=="string"?t:yf,s=a0(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=T6("firestore");i&&Q2(s,...i)}return s}function Ku(t){if(t._terminated)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JU(t),t._firestoreClient}function JU(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new Ez(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,G2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new GU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Vt.fromBase64String(e))}catch(n){throw new le(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bu(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:bt("string",Ln._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cr._jsonSchemaVersion}}static fromJSON(e){if(Bu(e,Cr._jsonSchema))return new Cr(e.latitude,e.longitude)}}Cr._jsonSchemaVersion="firestore/geoPoint/1.0",Cr._jsonSchema={type:bt("string",Cr._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bu(e,jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new jr(e.vectorValues);throw new le(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jr._jsonSchemaVersion="firestore/vectorValue/1.0",jr._jsonSchema={type:bt("string",jr._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=/^__.*__$/;class e7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Wu(e,this.data,n,this.fieldTransforms)}}class Y2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function J2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:t})}}class Um{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Um({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(J2(this.Ac)&&ZU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class t7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lm(e)}Cc(e,n,r,s=!1){return new Um({Ac:e,methodName:n,Dc:r,path:Mt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $m(t){const e=t._freezeSettings(),n=Lm(t._databaseId);return new t7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Z2(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);K0("Data must be an object, but it was:",a,r);const l=eA(r,a);let c,u;if(i.merge)c=new zn(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=my(e,f,n);if(!a.contains(p))throw new le(H.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);nA(h,p)||h.push(p)}c=new zn(h),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new e7(new bn(l),c,u)}class Bm extends Dl{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bm}}function n7(t,e,n){return new Um({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class q0 extends Dl{_toFieldTransform(e){return new f2(e.path,new pu)}isEqual(e){return e instanceof q0}}class G0 extends Dl{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=n7(this,e,!0),r=this.vc.map(i=>Ol(i,n)),s=new hl(r);return new f2(e.path,s)}isEqual(e){return e instanceof G0&&Li(this.vc,e.vc)}}function r7(t,e,n,r){const s=t.Cc(1,e,n);K0("Data must be an object, but it was:",s,r);const i=[],a=bn.empty();Qi(r,(c,u)=>{const h=Q0(e,c,n);u=St(u);const f=s.yc(h);if(u instanceof Bm)i.push(h);else{const p=Ol(u,f);p!=null&&(i.push(h),a.set(h,p))}});const l=new zn(i);return new Y2(a,l,s.fieldTransforms)}function s7(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[my(e,r,n)],c=[s];if(i.length%2!=0)throw new le(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(my(e,i[p])),c.push(i[p+1]);const u=[],h=bn.empty();for(let p=l.length-1;p>=0;--p)if(!nA(u,l[p])){const g=l[p];let x=c[p];x=St(x);const y=a.yc(g);if(x instanceof Bm)u.push(g);else{const b=Ol(x,y);b!=null&&(u.push(g),h.set(g,b))}}const f=new zn(u);return new Y2(h,f,a.fieldTransforms)}function i7(t,e,n,r=!1){return Ol(n,t.Cc(r?4:3,e))}function Ol(t,e){if(tA(t=St(t)))return K0("Unsupported field value:",e,t),eA(t,e);if(t instanceof Dl)return function(r,s){if(!J2(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Ol(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:Sf(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sf(s.serializer,i)}}if(r instanceof Cr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:v2(s.serializer,r._byteString)};if(r instanceof at){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:j0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof jr)return function(a,l){return{mapValue:{fields:{[qk]:{stringValue:Kk},[vf]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return N0(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Cm(r)}`)}(t,e)}function eA(t,e){const n={};return zk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qi(t,(r,s)=>{const i=Ol(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function tA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Cr||t instanceof Ln||t instanceof at||t instanceof Dl||t instanceof jr)}function K0(t,e,n){if(!tA(n)||!Vk(n)){const r=Cm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function my(t,e,n){if((e=St(e))instanceof Qu)return e._internalPath;if(typeof e=="string")return Q0(t,e);throw jf("Field path arguments must be of type string or ",t,!1,void 0,n)}const o7=new RegExp("[~\\*/\\[\\]]");function Q0(t,e,n){if(e.search(o7)>=0)throw jf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qu(...e.split("."))._internalPath}catch{throw jf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function jf(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new le(H.INVALID_ARGUMENT,l+t+c)}function nA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Wm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class a7 extends rA{data(){return super.data()}}function Wm(t,e){return typeof e=="string"?Q0(t,e):e instanceof Qu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X0{}class Hm extends X0{}function jo(t,e,...n){let r=[];e instanceof X0&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof qm).length,l=i.filter(c=>c instanceof Xu).length;if(a>1||a>0&&l>0)throw new le(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Xu extends Hm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xu(e,n,r)}_apply(e){const n=this._parse(e);return iA(e._query,n),new ds(e.firestore,e.converter,sy(e._query,n))}_parse(e){const n=$m(e.firestore);return function(i,a,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){PS(f,h);const x=[];for(const y of f)x.push(RS(c,i,y));p={arrayValue:{values:x}}}else p=RS(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||PS(f,h),p=i7(l,a,f,h==="in"||h==="not-in");return wt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Y0(t,e,n){const r=e,s=Wm("where",t);return Xu._create(s,r,n)}class qm extends X0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new qm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)iA(a,c),a=sy(a,c)}(e._query,n),new ds(e.firestore,e.converter,sy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gm extends Hm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gm(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mu(i,a)}(e._query,this._field,this._direction);return new ds(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Rl(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Oa(t,e="asc"){const n=e,r=Wm("orderBy",t);return Gm._create(r,n)}class Km extends Hm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Km(e,n,r)}_apply(e){return new ds(e.firestore,e.converter,bf(e._query,this._limit,this._limitType))}}function Lc(t){return mz("limit",t),Km._create("limit",t,"F")}function RS(t,e,n){if(typeof(n=St(n))=="string"){if(n==="")throw new le(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n2(e)&&n.indexOf("/")!==-1)throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Qe.fromString(n));if(!pe.isDocumentKey(r))throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return K_(t,new pe(r))}if(n instanceof at)return K_(t,n._key);throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cm(n)}.`)}function PS(t,e){if(!Array.isArray(t)||t.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iA(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class oA{convertValue(e,n="none"){switch(Ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Qi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[vf].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>gt(a.doubleValue));return new jr(n)}convertGeoPoint(e){return new Cr(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Am(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const n=Fi(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Qe.fromString(e);ze(E2(r),9688,{name:e});const s=new cl(r.get(1),r.get(3)),i=new pe(r.popFirst(5));return s.isEqual(n)||Os(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ki extends rA{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Wm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ki._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",ki._jsonSchema={type:bt("string",ki._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Vc extends ki{data(e={}){return super.data(e)}}class Ai{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ba(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Vc(this._firestore,this._userDataWriter,r.key,r,new ba(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Vc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ba(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Vc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ba(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:l7(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ai._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function l7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t){t=dn(t,at);const e=dn(t.firestore,cs);return XU(Ku(e),t._key).then(n=>dA(e,t,n))}Ai._jsonSchemaVersion="firestore/querySnapshot/1.0",Ai._jsonSchema={type:bt("string",Ai._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class J0 extends oA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function lA(t){t=dn(t,ds);const e=dn(t.firestore,cs),n=Ku(e),r=new J0(e);return sA(t._query),YU(n,t._query).then(s=>new Ai(e,r,t,s))}function Wt(t,e,n){t=dn(t,at);const r=dn(t.firestore,cs),s=aA(t.converter,e,n);return Yu(r,[Z2($m(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,sr.none())])}function cA(t,e,n,...r){t=dn(t,at);const s=dn(t.firestore,cs),i=$m(s);let a;return a=typeof(e=St(e))=="string"||e instanceof Qu?s7(i,"updateDoc",t._key,e,n,r):r7(i,"updateDoc",t._key,e),Yu(s,[a.toMutation(t._key,sr.exists(!0))])}function uA(t){return Yu(dn(t.firestore,cs),[new E0(t._key,sr.none())])}function Z0(t,e){const n=dn(t.firestore,cs),r=He(t),s=aA(t.converter,e);return Yu(n,[Z2($m(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,sr.exists(!1))]).then(()=>r)}function kr(t,...e){var c,u,h;t=St(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||IS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(IS(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,a,l;if(t instanceof at)a=dn(t.firestore,cs),l=Im(t._key.path),i={next:f=>{e[r]&&e[r](dA(a,t,f))},error:e[r+1],complete:e[r+2]};else{const f=dn(t,ds);a=dn(f.firestore,cs),l=f._query;const p=new J0(a);i={next:g=>{e[r]&&e[r](new Ai(a,p,f,g))},error:e[r+1],complete:e[r+2]},sA(t._query)}return function(p,g,x,y){const b=new H0(y),_=new $0(g,b,x);return p.asyncQueue.enqueueAndForget(async()=>F0(await Cf(p),_)),()=>{b.Nu(),p.asyncQueue.enqueueAndForget(async()=>z0(await Cf(p),_))}}(Ku(a),l,s,i)}function Yu(t,e){return function(r,s){const i=new Ns;return r.asyncQueue.enqueueAndForget(async()=>VU(await QU(r),s,i)),i.promise}(Ku(t),e)}function dA(t,e,n){const r=n.docs.get(e._key),s=new J0(t);return new ki(t,s,e._key,r,new ba(n.hasPendingWrites,n.fromCache),e.converter)}function xu(){return new q0("serverTimestamp")}function hA(...t){return new G0("arrayUnion",t)}(function(e,n=!0){(function(s){kl=s})(jl),il(new Fo("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new cs(new oz(r.getProvider("auth-internal")),new cz(a,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new le(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cl(u.options.projectId,h)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ci(O_,M_,e),Ci(O_,M_,"esm2020")})();const DS=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:oA,Bytes:Ln,CollectionReference:Es,DocumentReference:at,DocumentSnapshot:ki,FieldPath:Qu,FieldValue:Dl,Firestore:cs,FirestoreError:le,GeoPoint:Cr,Query:ds,QueryCompositeFilterConstraint:qm,QueryConstraint:Hm,QueryDocumentSnapshot:Vc,QueryFieldFilterConstraint:Xu,QueryLimitConstraint:Km,QueryOrderByConstraint:Gm,QuerySnapshot:Ai,SnapshotMetadata:ba,Timestamp:Xe,VectorValue:jr,_AutoId:Tm,_ByteString:Vt,_DatabaseId:cl,_DocumentKey:pe,_EmptyAuthCredentialsProvider:Ok,_FieldPath:Mt,_cast:dn,_logWarn:$o,_validateIsNotUsedTogether:Lk,addDoc:Z0,arrayUnion:hA,collection:Wi,connectFirestoreEmulator:Q2,deleteDoc:uA,doc:He,ensureFirestoreConfigured:Ku,executeWrite:Yu,getDoc:ss,getDocs:lA,getFirestore:X2,limit:Lc,onSnapshot:kr,orderBy:Oa,query:jo,serverTimestamp:xu,setDoc:Wt,updateDoc:cA,where:Y0},Symbol.toStringTag,{value:"Module"})),c7={apiKey:void 0,authDomain:"undefined.firebaseapp.com",projectId:void 0,storageBucket:"undefined.firebasestorage.app",appId:void 0},ew=qj(c7),Zs=tz(ew),Me=X2(ew),Dr=new Zt;Dr.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Dr.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Dr.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Dr.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Dr.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly");Dr.addScope("https://www.googleapis.com/auth/calendar");Dr.addScope("https://www.googleapis.com/auth/gmail.send");Dr.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const OS=Object.freeze(Object.defineProperty({__proto__:null,app:ew,auth:Zs,db:Me,googleProvider:Dr},Symbol.toStringTag,{value:"Module"})),Th="trace_current_user_id",u7=["theme","trace_docs_seen"];function d7(){const t={};u7.forEach(e=>{const n=localStorage.getItem(e);n&&(t[e]=n)}),localStorage.clear(),Object.entries(t).forEach(([e,n])=>{localStorage.setItem(e,n)})}function h7(t){const e=localStorage.getItem(Th);return e?e!==t?(console.log(" Account switch detected. Clearing old user data..."),d7(),localStorage.setItem(Th,t),!0):!1:(localStorage.setItem(Th,t),!1)}function MS(){localStorage.removeItem(Th)}const fA=m.createContext(void 0);function f7({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,a]=m.useState(()=>localStorage.getItem("google_access_token")),[l,c]=m.useState(null),[u,h]=m.useState(()=>localStorage.getItem("user_role")),[f,p]=m.useState(0),[g,x]=m.useState(null),y=m.useMemo(()=>e?g?new Proxy(e,{get(S,N){return N==="photoURL"?g:S[N]}}):e:null,[e,g,f]);m.useEffect(()=>HF(Zs,N=>{if(N&&h7(N.uid)){window.location.reload();return}n(N),N||(h(null),s(!1),a(null),MS())}),[]),m.useEffect(()=>{async function S(){if(!e||!i){if(e&&!i){const N=localStorage.getItem("google_access_token");if(N){a(N);return}}e||s(!1);return}try{s(!0);const N=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});if(N.status===401){console.log("Token expired (401). Attempting to refresh session..."),await E()||(c("Session expired. Please sign in again."),h(null),s(!1),localStorage.removeItem("google_access_token"));return}let C=!1;if(N.ok){const D=await N.json();D.courses&&D.courses.length>0&&(C=!0)}if(C){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const k=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let A=!1;if(k.ok){const D=await k.json();D.courses&&D.courses.length>0&&(A=!0)}A?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(N){console.error("Role detection failed:",N),h("no_access")}finally{s(!1)}}S()},[e,i]);const b=async()=>{try{c(null),await $F(Zs,xk),Dr.setCustomParameters({prompt:"consent",access_type:"offline"});const S=await $d(Zs,Dr),N=Zt.credentialFromResult(S);N!=null&&N.accessToken&&(a(N.accessToken),localStorage.setItem("google_access_token",N.accessToken))}catch(S){const N=S instanceof Error?S.message:"Failed to sign in";c(N),console.error("Sign in error:",S)}},_=async()=>{try{c(null);const S=new Zt;S.addScope("https://www.googleapis.com/auth/gmail.send"),S.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),S.setCustomParameters({access_type:"offline",prompt:"consent"});const N=await $d(Zs,S),C=Zt.credentialFromResult(N),k=N._tokenResponse;if(C!=null&&C.accessToken&&(a(C.accessToken),localStorage.setItem("google_access_token",C.accessToken)),k!=null&&k.oauthRefreshToken){const{doc:A,setDoc:D,serverTimestamp:R}=await wa(async()=>{const{doc:q,setDoc:ee,serverTimestamp:re}=await Promise.resolve().then(()=>DS);return{doc:q,setDoc:ee,serverTimestamp:re}},void 0),{db:B}=await wa(async()=>{const{db:q}=await Promise.resolve().then(()=>OS);return{db:q}},void 0);if(e&&k.oauthRefreshToken)return await D(A(B,"users",e.uid,"private_tokens","google"),{refreshToken:k.oauthRefreshToken,updatedAt:R()}),!0}return!!(C!=null&&C.accessToken)}catch(S){const N=S instanceof Error?S.message:"Failed to get Gmail permissions";return c(N),console.error("Permission error:",S),!1}},w=async()=>{try{c(null);const S=new Zt;S.addScope("https://www.googleapis.com/auth/calendar.events"),S.setCustomParameters({access_type:"offline",prompt:"consent"});const N=await $d(Zs,S),C=Zt.credentialFromResult(N),k=N._tokenResponse;if(C!=null&&C.accessToken&&(a(C.accessToken),localStorage.setItem("google_access_token",C.accessToken)),e&&(k!=null&&k.oauthRefreshToken)){const{doc:A,setDoc:D,serverTimestamp:R}=await wa(async()=>{const{doc:q,setDoc:ee,serverTimestamp:re}=await Promise.resolve().then(()=>DS);return{doc:q,setDoc:ee,serverTimestamp:re}},void 0),{db:B}=await wa(async()=>{const{db:q}=await Promise.resolve().then(()=>OS);return{db:q}},void 0);return await D(A(B,"users",e.uid,"private_tokens","calendar"),{refreshToken:k.oauthRefreshToken,updatedAt:R(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(S){const N=S instanceof Error?S.message:"Failed to get Calendar permissions";return c(N),console.error("Permission error:",S),!1}},E=async()=>{if(!e)return!1;try{const S=new Zt;S.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),S.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),S.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),S.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly"),S.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),S.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const N=await $d(Zs,S),C=Zt.credentialFromResult(N);return C!=null&&C.accessToken?(a(C.accessToken),localStorage.setItem("google_access_token",C.accessToken),console.log("Access token refreshed successfully"),!0):!1}catch(S){return console.error("Failed to refresh access token:",S),!1}},j=async()=>E(),P=async()=>{try{await qF(Zs),a(null),h(null),localStorage.removeItem("google_access_token"),localStorage.removeItem("user_role"),MS()}catch(S){const N=S instanceof Error?S.message:"Failed to sign out";c(N)}},O=async S=>{if(e)try{await UF(e,S),S.photoURL!==void 0&&x(S.photoURL),p(N=>N+1)}catch(N){const C=N instanceof Error?N.message:"Failed to update profile";throw c(C),N}};return o.jsx(fA.Provider,{value:{user:y,loading:r,role:u,accessToken:i,signInWithGoogle:b,requestGmailPermissions:_,requestCalendarPermissions:w,refreshAccessToken:j,signOut:P,updateUserProfile:O,error:l},children:t})}function rt(){const t=m.useContext(fA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const mA=m.createContext(void 0);function m7({children:t}){const[e,n]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});m.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return o.jsx(mA.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function tw(){const t=m.useContext(mA);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}class p7{static calculateXP(e){let n=0;const r=[];for(const s of e)if(s.systemStatus==="submitted"||s.systemStatus==="graded"){if(n+=100,s.submittedAt&&s.dueDate){const a=new Date(s.submittedAt).getTime();(new Date(s.dueDate).getTime()-a)/(1e3*60*60)>48&&(n+=50)}r.push(s.id)}return{totalXP:n,processedIds:r}}static calculateBadges(e,n){const r=new Set(n);return e>=10&&r.add("10-submissions"),e>=25&&r.add("25-submissions"),e>=50&&r.add("50-submissions"),Array.from(r)}static async syncUserLeaderboard(e,n,r,s,i,a,l="student"){var c;try{const{totalXP:u,processedIds:h}=this.calculateXP(i),f=n.includes("@")?n.split("@")[1]:"",p=a.map(w=>w.id),g=He(Me,"leaderboards","all-courses","students",e),x=await ss(g),y=x.exists()?x.data().badges||[]:[],b=this.calculateBadges(h.length,y);await Wt(g,{displayName:r||"Anonymous",photoUrl:s||"",email:n,emailDomain:f,enrolledCourseIds:p,totalXP:u,processedAssignmentIds:h,lastSyncedAt:xu(),badges:b,role:l},{merge:!0});const _=b.filter(w=>!y.includes(w));if(_.length>0){const{BADGES:w}=await wa(async()=>{const{BADGES:E}=await Promise.resolve().then(()=>tP);return{BADGES:E}},void 0);for(const E of _)await Z0(Wi(Me,"activities"),{userId:e,userName:r||"Anonymous",userAvatar:s||null,type:"badge_earned",content:`${r||"Anonymous"} earned the '${((c=w[E])==null?void 0:c.label)||"New Badge"}' badge!`,courseId:"all-courses",emailDomain:f,visibility:"public",createdAt:new Date().toISOString()})}}catch(u){throw console.error(" Failed to sync leaderboard:",u),u}}static async resetLeaderboardForSemester(e){try{const n=He(Me,"leaderboards","all-courses","students",e),r=await ss(n),s=r.exists()?r.data().badges||[]:[];await Wt(n,{badges:s,totalXP:0,processedAssignmentIds:[],enrolledCourseIds:[],lastSyncedAt:xu()})}catch(n){throw console.error(" Failed to reset leaderboard:",n),n}}static async hasCoursesChanged(e,n){try{const r=He(Me,"leaderboards","all-courses","students",e),s=await ss(r);if(!s.exists())return!1;const i=s.data().enrolledCourseIds||[],a=new Set(n),l=new Set(i);if(a.size!==l.size)return!0;for(const c of n)if(!l.has(c))return!0;for(const c of i)if(!a.has(c))return!0;return!1}catch(r){return console.error(" Failed to check course changes:",r),!1}}static async autoSyncOnLogin(e,n,r,s,i,a,l){try{const c=a.map(h=>h.id);await this.hasCoursesChanged(e,c)&&await this.resetLeaderboardForSemester(e),await this.syncUserLeaderboard(e,n,r,s,i,a,l)}catch(c){throw console.error(" Auto-sync failed:",c),c}}}const _n={get:t=>{try{const e=localStorage.getItem(`trace_cache_${t}`);if(!e)return null;const n=JSON.parse(e);return Date.now()>n.expiresAt?(localStorage.removeItem(`trace_cache_${t}`),null):n.data}catch(e){return console.warn("Cache parse error",e),null}},set:(t,e,n)=>{try{const r={data:e,timestamp:Date.now(),expiresAt:Date.now()+n*1e3};localStorage.setItem(`trace_cache_${t}`,JSON.stringify(r))}catch(r){console.warn("Cache write error (quota?)",r)}},remove:t=>{localStorage.removeItem(`trace_cache_${t}`)},clearPattern:t=>{Object.keys(localStorage).forEach(e=>{e.startsWith("trace_cache_")&&e.includes(t)&&localStorage.removeItem(e)})},clearAll:()=>{Object.keys(localStorage).forEach(t=>{t.startsWith("trace_cache_")&&localStorage.removeItem(t)})}},LS={async fetchCourses(t,e){const n=_n.get(`courses_${e}`);if(n)return n;const r="https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE&fields=courses(id,name,section,descriptionHeading,room,ownerId,enrollmentCode,courseState,alternateLink)";let s=[],i="";try{do{const l=`${r}${i?`&pageToken=${i}`:""}`,c=await fetch(l,{headers:{Authorization:`Bearer ${t}`}});if(!c.ok)throw new Error("Failed to fetch courses");const u=await c.json();u.courses&&(s=s.concat(u.courses)),i=u.nextPageToken}while(i)}catch(l){return console.warn("Fetch courses error",l),[]}const a=s.map(l=>({id:l.id,userId:e,classroomId:l.id,name:l.name,section:l.section||null,descriptionHeading:l.descriptionHeading||null,room:l.room||null,ownerId:l.ownerId||null,enrollmentCode:l.enrollmentCode||null,courseState:l.courseState||"ACTIVE",alternateLink:l.alternateLink||null,lastSyncedAt:new Date().toISOString(),color:g7(l.name)}));return _n.set(`courses_${e}`,a,60*60*24),a},async fetchAssignmentsParallel(t,e){const n=[];return(await Promise.allSettled(e.map(async s=>{const i=`assignments_${s.id}`,a=_n.get(i);if(a)return console.log(`[CACHE HIT] Using cached assignments for ${s.name}`),a;console.log(`[CACHE MISS] Fetching fresh data for ${s.name}`);const l=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork?courseWorkStates=PUBLISHED&fields=courseWork(id,title,description,dueDate,dueTime,maxPoints,alternateLink,workType,creationTime,updateTime)`,c=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork/-/studentSubmissions?userId=me&fields=studentSubmissions(id,courseWorkId,state,assignedGrade,updateTime)`,[u,h]=await Promise.all([fetch(l,{headers:{Authorization:`Bearer ${t}`}}).then(x=>(x.ok||console.error(`Coursework fetch failed: ${x.status} ${x.statusText}`),x.ok?x.json():{courseWork:[]})),fetch(c,{headers:{Authorization:`Bearer ${t}`}}).then(async x=>{if(!x.ok){console.error(` Submissions fetch failed: ${x.status} ${x.statusText}`),console.error(" This usually means missing OAuth scope: classroom.student-submissions.me.readonly"),console.error(" Please sign out and sign in again to grant permissions");const y=await x.text();return console.error(" Error response:",y),{studentSubmissions:[]}}return x.json()})]),f=u.courseWork||[],p=h.studentSubmissions||[];console.log(`[API DATA] Course: ${s.name}`),console.log(`  - Coursework items: ${f.length}`),console.log(`  - Submissions: ${p.length}`),console.log("  - Submission states:",p.map(x=>({id:x.courseWorkId,state:x.state})));const g=f.filter(x=>!x.workType||x.workType==="ASSIGNMENT"||x.workType==="MULTIPLE_CHOICE_QUESTION").map(x=>{const y=p.find(b=>b.courseWorkId===x.id);return x7(x,s,y)});return _n.set(i,g,300),g}))).forEach(s=>{s.status==="fulfilled"&&n.push(...s.value)}),n}},VS=[["#E0F2FE","#0369A1"],["#EDE9FE","#7C3AED"],["#FCE7F3","#BE185D"],["#D1FAE5","#047857"],["#FED7AA","#C2410C"],["#CCFBF1","#0F766E"],["#FECACA","#B91C1C"],["#DBEAFE","#1E40AF"],["#A5F3FC","#0E7490"],["#FDE68A","#92400E"],["#D9F99D","#4D7C0F"],["#F3E8FF","#6B21A8"]];function g7(t){let e=t.toLowerCase().trim();const n=[/\blab(oratory)?\b/g,/\bpractical\b/g,/\btheory\b/g,/\btutorial\b/g,/\blecture\b/g,/\bcourse\b/g,/\bsection\b/g,/\bmini project\b/g,/\sproject\b/g,/\s\d+[a-z]?\b/g];for(const l of n)e=e.replace(l,"");e=e.replace(/[^a-z0-9\s]/g,"").trim(),e=e.replace(/\s+/g," "),e||(e=t.toLowerCase().trim());let r=0;for(let l=0;l<e.length;l++)r=e.charCodeAt(l)+((r<<5)-r);const s=Math.abs(r)%VS.length,[i,a]=VS[s];return i}function x7(t,e,n){var f,p;let r=null,s=null;t.dueDate&&(r=new Date(t.dueDate.year,t.dueDate.month-1,t.dueDate.day,((f=t.dueTime)==null?void 0:f.hours)||23,((p=t.dueTime)==null?void 0:p.minutes)||59).toISOString(),t.dueTime&&(s=`${String(t.dueTime.hours).padStart(2,"0")}:${String(t.dueTime.minutes).padStart(2,"0")}`));const i=new Date;let a="backlog",l="backlog",c=null,u=null,h=null;return n&&(console.log(`Assignment "${t.title}" submission state:`,n.state),n.state==="TURNED_IN"||n.state==="SUBMITTED"?(a="submitted",l="submitted",u=n.updateTime):n.state==="RETURNED"?(a="graded",l="graded",c=n.assignedGrade,u=n.updateTime,h=n.updateTime):(n.state==="reclaimed_by_student"||n.state==="NEW"||n.state==="CREATED")&&(a="backlog",l="backlog")),r&&new Date(r)<i&&l==="backlog"&&(l="overdue",a="overdue"),{id:`assign-${t.id}`,uniqueId:`${e.id}-${t.id}`,userId:e.userId,courseId:e.id,courseName:e.name,classroomId:t.id,title:t.title,description:t.description||null,dueDate:r,dueTime:s,maxPoints:t.maxPoints||null,systemStatus:l,userStatus:a,submissionId:(n==null?void 0:n.id)||null,submittedAt:u?new Date(u).toISOString():null,gradedAt:h?new Date(h).toISOString():null,grade:c||null,alternateLink:t.alternateLink||null,createdAt:t.creationTime||i.toISOString(),lastSyncedAt:i.toISOString()}}async function y7(t,e,n,r){const s=He(Me,"users",n,"settings","calendar"),i=await ss(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],f={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Trace`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),f.end.date=p.toISOString().split("T")[0];const g=He(Me,"users",n,"calendarEvents",c.id),x=await ss(g),y="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let b;if(x.exists()){const{calendarEventId:_}=x.data();b=await fetch(`${y}/${_}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(b=await fetch(y,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),b.ok){const _=await b.json();await Wt(g,{calendarEventId:_.id,assignmentId:c.id,updatedAt:xu()})}if(!b.ok&&b.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(b){console.warn(`Failed to sync assignment ${c.id} to calendar`,b)}}}const pA=m.createContext(void 0);function v7(){return Math.random().toString(36).substring(2,15)}async function FS(t,e,n,r){var a;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e,u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,g={};try{const x=await u.json();g=x,p=((a=x.error)==null?void 0:a.message)||x.message||p,console.error("API Error Response:",x)}catch{const y=await u.text().catch(()=>"");console.error("API Error (non-JSON):",y)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}const w7=[["#E0F2FE","#0369A1"],["#EDE9FE","#7C3AED"],["#FCE7F3","#BE185D"],["#D1FAE5","#047857"],["#FED7AA","#C2410C"],["#CCFBF1","#0F766E"],["#FECACA","#B91C1C"],["#DBEAFE","#1E40AF"],["#A5F3FC","#0E7490"],["#FDE68A","#92400E"],["#D9F99D","#4D7C0F"],["#F3E8FF","#6B21A8"]];function Qm(t){const e=w7.find(([r])=>r===t);return e?e[1]:b7(t)>.6?"#52525b":"#FFFFFF"}function b7(t){const e=t.replace("#",""),n=parseInt(e.substring(0,2),16)/255,r=parseInt(e.substring(2,4),16)/255,s=parseInt(e.substring(4,6),16)/255,i=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4),a=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),l=s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4);return .2126*i+.7152*a+.0722*l}async function _7(t,e,n,r,s){const i=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`,a=`https://classroom.googleapis.com/v1/courses/${e}/announcements?announcementStates=PUBLISHED`;try{const[l,c]=await Promise.all([FS(t,i,p=>p.courseWorkMaterial||[],p=>p.nextPageToken).catch(p=>(console.warn(`Failed to fetch courseWorkMaterials for ${e}:`,p),[])),FS(t,a,p=>p.announcements||[],p=>p.nextPageToken).catch(p=>{var g,x;return((g=p.message)!=null&&g.includes("insufficient authentication scopes")||(x=p.message)!=null&&x.includes("403"))&&(s==null||s()),console.warn(`Failed to fetch announcements for ${e}:`,p),[]})]),u=new Date().toISOString(),h=l.map(p=>({id:`mat-${p.id}`,uniqueId:`${e}-${p.id}`,userId:r,courseId:e,courseName:n,title:p.title,description:p.description||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u})),f=c.filter(p=>p.materials&&p.materials.length>0).map(p=>{const g=p.text||"Announcement Material",x=g.split(`
`)[0].length>60?g.split(`
`)[0].substring(0,57)+"...":g.split(`
`)[0];return{id:`ann-${p.id}`,uniqueId:`${e}-ann-${p.id}`,userId:r,courseId:e,courseName:n,title:x,description:p.text||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u}});return[...h,...f]}catch(l){return console.warn(`Failed to fetch materials for course ${e}:`,l),[]}}function S7({children:t}){const{user:e,role:n,accessToken:r,refreshAccessToken:s,loading:i}=rt(),{toast:a}=Ki(),[l,c]=m.useState(()=>{if(!e)return[];const U=_n.get(`courses_${e.uid}`);if(U)return U;const W=localStorage.getItem("classroom_courses");return W?JSON.parse(W):[]}),[u,h]=m.useState(()=>{if(!e)return[];const U=localStorage.getItem("classroom_assignments");return U?JSON.parse(U):[]}),[f,p]=m.useState(()=>{const U=localStorage.getItem("classroom_materials");return U?JSON.parse(U):[]}),[g,x]=m.useState(()=>{const U=localStorage.getItem("classroom_notes");return U?new Map(JSON.parse(U)):new Map}),[y,b]=m.useState(()=>e&&_n.get(`courses_${e.uid}`)?!1:!localStorage.getItem("classroom_courses")),[_,w]=m.useState(!1),[E,j]=m.useState(()=>{const U=localStorage.getItem("classroom_lastSyncedAt");return U?new Date(U):null}),[P,O]=m.useState(null),[S,N]=m.useState(!1),[C,k]=m.useState(!1);m.useEffect(()=>{!i&&!e&&(c([]),h([]),p([]),x(new Map),j(null),N(!1),_n.clearAll(),localStorage.removeItem("classroom_courses"),localStorage.removeItem("classroom_assignments"),localStorage.removeItem("classroom_materials"),localStorage.removeItem("classroom_notes"),localStorage.removeItem("classroom_lastSyncedAt"))},[i,e]);const A=m.useCallback(async(U=!1)=>{if(!e)return;let W=r;if(!W)try{await s()&&(W=localStorage.getItem("google_access_token"))}catch(J){console.error(J)}if(!W){O("Session expired. Please sign in again.");return}w(!0),O(null),U||_n.clearPattern("assignments_");try{let J;try{J=await LS.fetchCourses(W,e.uid)}catch(te){throw te.message&&te.message.includes("401")?(console.log("Sync 401. Session expired."),O("Your session has expired. Please sign out and sign in again."),a({variant:"destructive",title:"Session Expired",description:"Please sign out and sign in again to continue."}),new Error("Session expired")):te}c(te=>JSON.stringify(te)!==JSON.stringify(J)?J:te);const ne=await LS.fetchAssignmentsParallel(W,J);h(ne),j(new Date),Promise.all(J.map(te=>_7(W,te.classroomId,te.name,e.uid,()=>k(!0)))).then(te=>{const se=te.flat();p(se)}),y7(ne,W,e.uid,a).catch(te=>console.warn(te)),p7.autoSyncOnLogin(e.uid,e.email||"",e.displayName||"Anonymous",e.photoURL||"",ne,J,n).catch(console.warn)}catch(J){console.error("Sync Error",J),O(J.message||"Failed to sync"),U||a({variant:"destructive",title:"Sync Failed",description:J.message})}finally{w(!1),b(!1)}},[e,n,r,s,a]);m.useEffect(()=>{i||!e||!r||!S&&!_&&(N(!0),A(!0))},[e,r,S,_,A]),m.useEffect(()=>{if(!e||!r)return;const U=setInterval(()=>{console.log("Running periodic sync to check for submission updates..."),A(!0)},10*60*1e3);return()=>clearInterval(U)},[e,r,A]),m.useEffect(()=>{localStorage.setItem("classroom_courses",JSON.stringify(l))},[l]),m.useEffect(()=>{localStorage.setItem("classroom_materials",JSON.stringify(f))},[f]),m.useEffect(()=>{localStorage.setItem("classroom_notes",JSON.stringify(Array.from(g.entries())))},[g]),m.useEffect(()=>{localStorage.setItem("classroom_assignments",JSON.stringify(u))},[u]),m.useEffect(()=>{E&&localStorage.setItem("classroom_lastSyncedAt",E.toISOString())},[E]);const D=m.useCallback((U,W)=>{h(J=>J.map(ne=>ne.id===U?{...ne,userStatus:W}:ne))},[]),R=m.useCallback((U,W,J=!1)=>{const ne={id:v7(),userId:(e==null?void 0:e.uid)||"",assignmentId:U,content:W,isImportant:J,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};x(te=>{const se=new Map(te),M=se.get(U)||[];return se.set(U,[...M,ne]),se})},[e]),B=m.useCallback((U,W,J)=>{x(ne=>{const te=new Map(ne);for(const[se,M]of Array.from(te.entries())){const Y=M.findIndex(ae=>ae.id===U);if(Y!==-1){const ae=[...M];ae[Y]={...ae[Y],content:W,isImportant:J??ae[Y].isImportant,updatedAt:new Date().toISOString()},te.set(se,ae);break}}return te})},[]),q=m.useCallback((U,W)=>{x(J=>{const ne=new Map(J),te=ne.get(W)||[];return ne.set(W,te.filter(se=>se.id!==U)),ne})},[]),ee=m.useCallback(()=>{const U=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return u.forEach(W=>{let J=W.systemStatus;W.userStatus==="in_progress"&&J!=="submitted"&&J!=="graded"&&(J="in_progress");const ne=U.find(te=>te.id===J);ne&&ne.assignments.push(W)}),U.forEach(W=>{W.assignments.sort((J,ne)=>J.dueDate?ne.dueDate?new Date(J.dueDate).getTime()-new Date(ne.dueDate).getTime():-1:1)}),U},[u]),re=m.useCallback(()=>{const U=new Date,W=new Date(U);W.setDate(W.getDate()+3);const J=new Date(U);J.setDate(J.getDate()+7);const ne=u.filter(ie=>ie.systemStatus!=="graded"&&ie.systemStatus!=="submitted"),te=u.filter(ie=>{if(!ie.dueDate||ie.systemStatus==="graded"||ie.systemStatus==="submitted")return!1;const ge=new Date(ie.dueDate);return ge>=U&&ge<=W}),se=u.filter(ie=>{if(!ie.dueDate||ie.systemStatus==="graded"||ie.systemStatus==="submitted")return!1;const ge=new Date(ie.dueDate);return ge>=U&&ge<=J}),M=u.filter(ie=>ie.systemStatus==="overdue"),Y=[],ae=new Date,X=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let ie=0;ie<7;ie++){const ge=new Date(ae);ge.setDate(ge.getDate()+ie);const Ee=ge.toISOString().split("T")[0],pt=u.filter(Re=>Re.dueDate&&Re.dueDate.startsWith(Ee)).length;Y.push({day:X[ge.getDay()],count:pt,isToday:ie===0})}const he=[...ne].filter(ie=>ie.dueDate).sort((ie,ge)=>new Date(ie.dueDate).getTime()-new Date(ge.dueDate).getTime()).slice(0,5);return{totalActive:ne.length,upcoming3Days:te.length,upcoming7Days:se.length,overdue:M.length,weeklyWorkload:Y,nextActions:he}},[u]),V=m.useCallback(U=>{let W=[...u];U!=null&&U.courseId&&(W=W.filter(se=>se.courseId===U.courseId)),U!=null&&U.status&&(W=W.filter(se=>se.systemStatus===U.status)),W.sort((se,M)=>se.dueDate?M.dueDate?new Date(se.dueDate).getTime()-new Date(M.dueDate).getTime():-1:1);const J=new Map,ne=new Date,te=new Date(ne);return te.setDate(te.getDate()+1),W.forEach(se=>{if(!se.dueDate)return;const M=se.dueDate.split("T")[0],Y=new Date(se.dueDate);let ae=M===ne.toISOString().split("T")[0]?"Today":M===te.toISOString().split("T")[0]?"Tomorrow":Y.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});J.has(M)||J.set(M,{date:M,dateLabel:ae,assignments:[]}),J.get(M).assignments.push(se)}),Array.from(J.values())},[u]),z=m.useCallback(U=>u.find(W=>W.id===U),[u]),K=m.useCallback(U=>g.get(U)||[],[g]);return o.jsx(pA.Provider,{value:{courses:l,assignments:u,notes:g,isLoading:y,isSyncing:_,lastSyncedAt:E,error:P,syncClassroom:A,updateAssignmentStatus:D,addNote:R,updateNote:B,deleteNote:q,getPipelineColumns:ee,getDashboardMetrics:re,getTimelineGroups:V,getAssignmentById:z,getNotesForAssignment:K,materials:f,reauthRequired:C},children:t})}function cn(){const t=m.useContext(pA);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}const bg=768;function Xm(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${bg-1}px)`),r=()=>{e(window.innerWidth<bg)};return n.addEventListener("change",r),e(window.innerWidth<bg),()=>n.removeEventListener("change",r)},[]),!!t}var nw="Avatar",[N7,FG]=Kn(nw),[E7,gA]=N7(nw),xA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return o.jsx(E7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:o.jsx(xe.span,{...r,ref:e})})});xA.displayName=nw;var yA="AvatarImage",vA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,a=gA(yA,n),l=T7(r,i),c=mt(u=>{s(u),a.onImageLoadingStatusChange(u)});return _t(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?o.jsx(xe.img,{...i,ref:e,src:r}):null});vA.displayName=yA;var wA="AvatarFallback",bA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=gA(wA,n),[a,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&i.imageLoadingStatus!=="loaded"?o.jsx(xe.span,{...s,ref:e}):null});bA.displayName=wA;function zS(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function T7(t,{referrerPolicy:e,crossOrigin:n}){const r=j7(),s=m.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=m.useState(()=>zS(i,t));return _t(()=>{l(zS(i,t))},[i,t]),_t(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),a}function C7(){return()=>{}}function j7(){return m.useSyncExternalStore(C7,()=>!0,()=>!1)}var _A=xA,SA=vA,NA=bA;const wr=m.forwardRef(({className:t,...e},n)=>o.jsx(_A,{ref:n,className:$(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));wr.displayName=_A.displayName;const br=m.forwardRef(({className:t,...e},n)=>o.jsx(SA,{ref:n,className:$("aspect-square h-full w-full",t),...e}));br.displayName=SA.displayName;const _r=m.forwardRef(({className:t,...e},n)=>o.jsx(NA,{ref:n,className:$("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));_r.displayName=NA.displayName;const k7=[{path:"/dashboard",label:"Dashboard",icon:VC},{path:"/pipeline",label:"Pipeline",icon:$C},{path:"/leaderboard",label:"Leaderboard",icon:ja},{path:"/timeline",label:"Timeline",icon:is},{path:"/attendance",label:"Attendance",icon:Lx},{path:"/notes",label:"Notes",icon:Eo}];function A7({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=am(),r=Xm(),{user:s,signOut:i}=rt(),{theme:a,toggleTheme:l}=tw(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>o.jsxs("div",{className:"flex flex-col h-full bg-background",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&o.jsx("button",{className:"ml-auto",onClick:e,children:o.jsx(Lo,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-4 border-b shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(wr,{className:"h-8 w-8",children:[o.jsx(br,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(_r,{className:"text-xs",children:c})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:o.jsxs("div",{className:"mb-6",children:[o.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),k7.map(p=>{const g=n===p.path,x=p.icon;return o.jsxs(Cn,{href:p.path,onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",g?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[o.jsx(x,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),o.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx($v,{className:"w-4 h-4 mr-3"}):o.jsx(fm,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(Cn,{href:"/settings",onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[o.jsx(GC,{className:"w-4 h-4 mr-3"}),"Settings"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:o.jsx(u,{})}),r&&t&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const rw=Ru("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ce=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const a=r?QO:"button";return o.jsx(a,{className:$(rw({variant:e,size:n,className:t})),ref:i,...s})});ce.displayName="Button";var _g=0;function sw(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??US()),document.body.insertAdjacentElement("beforeend",t[1]??US()),_g++,()=>{_g===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),_g--}},[])}function US(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Sg="focusScope.autoFocusOnMount",Ng="focusScope.autoFocusOnUnmount",$S={bubbles:!1,cancelable:!0},I7="FocusScope",Ym=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...a}=t,[l,c]=m.useState(null),u=mt(s),h=mt(i),f=m.useRef(null),p=Ce(e,y=>c(y)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(E){if(g.paused||!l)return;const j=E.target;l.contains(j)?f.current=j:ei(f.current,{select:!0})},b=function(E){if(g.paused||!l)return;const j=E.relatedTarget;j!==null&&(l.contains(j)||ei(f.current,{select:!0}))},_=function(E){if(document.activeElement===document.body)for(const P of E)P.removedNodes.length>0&&ei(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const w=new MutationObserver(_);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),w.disconnect()}}},[r,l,g.paused]),m.useEffect(()=>{if(l){WS.add(g);const y=document.activeElement;if(!l.contains(y)){const _=new CustomEvent(Sg,$S);l.addEventListener(Sg,u),l.dispatchEvent(_),_.defaultPrevented||(R7(L7(EA(l)),{select:!0}),document.activeElement===y&&ei(l))}return()=>{l.removeEventListener(Sg,u),setTimeout(()=>{const _=new CustomEvent(Ng,$S);l.addEventListener(Ng,h),l.dispatchEvent(_),_.defaultPrevented||ei(y??document.body,{select:!0}),l.removeEventListener(Ng,h),WS.remove(g)},0)}}},[l,u,h,g]);const x=m.useCallback(y=>{if(!n&&!r||g.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,_=document.activeElement;if(b&&_){const w=y.currentTarget,[E,j]=P7(w);E&&j?!y.shiftKey&&_===j?(y.preventDefault(),n&&ei(E,{select:!0})):y.shiftKey&&_===E&&(y.preventDefault(),n&&ei(j,{select:!0})):_===w&&y.preventDefault()}},[n,r,g.paused]);return o.jsx(xe.div,{tabIndex:-1,...a,ref:p,onKeyDown:x})});Ym.displayName=I7;function R7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ei(r,{select:e}),document.activeElement!==n)return}function P7(t){const e=EA(t),n=BS(e,t),r=BS(e.reverse(),t);return[n,r]}function EA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function BS(t,e){for(const n of t)if(!D7(n,{upTo:e}))return n}function D7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function O7(t){return t instanceof HTMLInputElement&&"select"in t}function ei(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&O7(t)&&e&&t.select()}}var WS=M7();function M7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=HS(t,e),t.unshift(e)},remove(e){var n;t=HS(t,e),(n=t[0])==null||n.resume()}}}function HS(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function L7(t){return t.filter(e=>e.tagName!=="A")}var V7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ta=new WeakMap,Kd=new WeakMap,Qd={},Eg=0,TA=function(t){return t&&(t.host||TA(t.parentNode))},F7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=TA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},z7=function(t,e,n,r){var s=F7(e,Array.isArray(t)?t:[t]);Qd[n]||(Qd[n]=new WeakMap);var i=Qd[n],a=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),x=g!==null&&g!=="false",y=(ta.get(p)||0)+1,b=(i.get(p)||0)+1;ta.set(p,y),i.set(p,b),a.push(p),y===1&&x&&Kd.set(p,!0),b===1&&p.setAttribute(n,"true"),x||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return h(e),l.clear(),Eg++,function(){a.forEach(function(f){var p=ta.get(f)-1,g=i.get(f)-1;ta.set(f,p),i.set(f,g),p||(Kd.has(f)||f.removeAttribute(r),Kd.delete(f)),g||f.removeAttribute(n)}),Eg--,Eg||(ta=new WeakMap,ta=new WeakMap,Kd=new WeakMap,Qd={})}},iw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=V7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),z7(r,s,n,"aria-hidden")):function(){return null}},Xr=function(){return Xr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xr.apply(this,arguments)};function CA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function U7(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Ch="right-scroll-bar-position",jh="width-before-scroll-bar",$7="with-scroll-bars-hidden",B7="--removed-body-scroll-bar-size";function Tg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function W7(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var H7=typeof window<"u"?m.useLayoutEffect:m.useEffect,qS=new WeakMap;function q7(t,e){var n=W7(null,function(r){return t.forEach(function(s){return Tg(s,r)})});return H7(function(){var r=qS.get(n);if(r){var s=new Set(r),i=new Set(t),a=n.current;s.forEach(function(l){i.has(l)||Tg(l,null)}),i.forEach(function(l){s.has(l)||Tg(l,a)})}qS.set(n,t)},[t]),n}function G7(t){return t}function K7(t,e){e===void 0&&(e=G7);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var a=e(i,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(i){for(r=!0;n.length;){var a=n;n=[],a.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(i),a=n}var c=function(){var h=a;a=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){a.push(h),u()},filter:function(h){return a=a.filter(h),n}}}};return s}function Q7(t){t===void 0&&(t={});var e=K7(null);return e.options=Xr({async:!0,ssr:!1},t),e}var jA=function(t){var e=t.sideCar,n=CA(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Xr({},n))};jA.isSideCarExport=!0;function X7(t,e){return t.useMedium(e),jA}var kA=Q7(),Cg=function(){},Jm=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:Cg,onWheelCapture:Cg,onTouchMoveCapture:Cg}),s=r[0],i=r[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,g=t.noIsolation,x=t.inert,y=t.allowPinchZoom,b=t.as,_=b===void 0?"div":b,w=t.gapMode,E=CA(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=p,P=q7([n,e]),O=Xr(Xr({},E),s);return m.createElement(m.Fragment,null,h&&m.createElement(j,{sideCar:kA,removeScrollBar:u,shards:f,noIsolation:g,inert:x,setCallbacks:i,allowPinchZoom:!!y,lockRef:n,gapMode:w}),a?m.cloneElement(m.Children.only(l),Xr(Xr({},O),{ref:P})):m.createElement(_,Xr({},O,{className:c,ref:P}),l))});Jm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Jm.classNames={fullWidth:jh,zeroRight:Ch};var Y7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function J7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Y7();return e&&t.setAttribute("nonce",e),t}function Z7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function e$(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var t$=function(){var t=0,e=null;return{add:function(n){t==0&&(e=J7())&&(Z7(e,n),e$(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},n$=function(){var t=t$();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},AA=function(){var t=n$(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},r$={left:0,top:0,right:0,gap:0},jg=function(t){return parseInt(t||"",10)||0},s$=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[jg(n),jg(r),jg(s)]},i$=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return r$;var e=s$(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},o$=AA(),Ma="data-scroll-locked",a$=function(t,e,n,r){var s=t.left,i=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat($7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Ma,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ch,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(jh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ch," .").concat(Ch,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jh," .").concat(jh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ma,`] {
    `).concat(B7,": ").concat(l,`px;
  }
`)},GS=function(){var t=parseInt(document.body.getAttribute(Ma)||"0",10);return isFinite(t)?t:0},l$=function(){m.useEffect(function(){return document.body.setAttribute(Ma,(GS()+1).toString()),function(){var t=GS()-1;t<=0?document.body.removeAttribute(Ma):document.body.setAttribute(Ma,t.toString())}},[])},c$=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;l$();var i=m.useMemo(function(){return i$(s)},[s]);return m.createElement(o$,{styles:a$(i,!e,s,n?"":"!important")})},py=!1;if(typeof window<"u")try{var Xd=Object.defineProperty({},"passive",{get:function(){return py=!0,!0}});window.addEventListener("test",Xd,Xd),window.removeEventListener("test",Xd,Xd)}catch{py=!1}var na=py?{passive:!1}:!1,u$=function(t){return t.tagName==="TEXTAREA"},IA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!u$(t)&&n[e]==="visible")},d$=function(t){return IA(t,"overflowY")},h$=function(t){return IA(t,"overflowX")},KS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=RA(t,r);if(s){var i=PA(t,r),a=i[1],l=i[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},f$=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},m$=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},RA=function(t,e){return t==="v"?d$(e):h$(e)},PA=function(t,e){return t==="v"?f$(e):m$(e)},p$=function(t,e){return t==="h"&&e==="rtl"?-1:1},g$=function(t,e,n,r,s){var i=p$(t,window.getComputedStyle(e).direction),a=i*r,l=n.target,c=e.contains(l),u=!1,h=a>0,f=0,p=0;do{var g=PA(t,l),x=g[0],y=g[1],b=g[2],_=y-b-i*x;(x||_)&&RA(t,l)&&(f+=_,p+=x),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},Yd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},QS=function(t){return[t.deltaX,t.deltaY]},XS=function(t){return t&&"current"in t?t.current:t},x$=function(t,e){return t[0]===e[0]&&t[1]===e[1]},y$=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},v$=0,ra=[];function w$(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(v$++)[0],i=m.useState(AA)[0],a=m.useRef(t);m.useEffect(function(){a.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var y=U7([t.lockRef.current],(t.shards||[]).map(XS),!0).filter(Boolean);return y.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(y,b){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!a.current.allowPinchZoom;var _=Yd(y),w=n.current,E="deltaX"in y?y.deltaX:w[0]-_[0],j="deltaY"in y?y.deltaY:w[1]-_[1],P,O=y.target,S=Math.abs(E)>Math.abs(j)?"h":"v";if("touches"in y&&S==="h"&&O.type==="range")return!1;var N=KS(S,O);if(!N)return!0;if(N?P=S:(P=S==="v"?"h":"v",N=KS(S,O)),!N)return!1;if(!r.current&&"changedTouches"in y&&(E||j)&&(r.current=P),!P)return!0;var C=r.current||P;return g$(C,b,y,C==="h"?E:j,!0)},[]),c=m.useCallback(function(y){var b=y;if(!(!ra.length||ra[ra.length-1]!==i)){var _="deltaY"in b?QS(b):Yd(b),w=e.current.filter(function(P){return P.name===b.type&&(P.target===b.target||b.target===P.shadowParent)&&x$(P.delta,_)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var E=(a.current.shards||[]).map(XS).filter(Boolean).filter(function(P){return P.contains(b.target)}),j=E.length>0?l(b,E[0]):!a.current.noIsolation;j&&b.cancelable&&b.preventDefault()}}},[]),u=m.useCallback(function(y,b,_,w){var E={name:y,delta:b,target:_,should:w,shadowParent:b$(_)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(j){return j!==E})},1)},[]),h=m.useCallback(function(y){n.current=Yd(y),r.current=void 0},[]),f=m.useCallback(function(y){u(y.type,QS(y),y.target,l(y,t.lockRef.current))},[]),p=m.useCallback(function(y){u(y.type,Yd(y),y.target,l(y,t.lockRef.current))},[]);m.useEffect(function(){return ra.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,na),document.addEventListener("touchmove",c,na),document.addEventListener("touchstart",h,na),function(){ra=ra.filter(function(y){return y!==i}),document.removeEventListener("wheel",c,na),document.removeEventListener("touchmove",c,na),document.removeEventListener("touchstart",h,na)}},[]);var g=t.removeScrollBar,x=t.inert;return m.createElement(m.Fragment,null,x?m.createElement(i,{styles:y$(s)}):null,g?m.createElement(c$,{gapMode:t.gapMode}):null)}function b$(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _$=X7(kA,w$);var Zm=m.forwardRef(function(t,e){return m.createElement(Jm,Xr({},t,{ref:e,sideCar:_$}))});Zm.classNames=Jm.classNames;var ow="Popover",[DA,zG]=Kn(ow,[El]),Ju=El(),[S$,Yi]=DA(ow),OA=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!1}=t,l=Ju(e),c=m.useRef(null),[u,h]=m.useState(!1),[f=!1,p]=As({prop:r,defaultProp:s,onChange:i});return o.jsx(e0,{...l,children:o.jsx(S$,{scope:e,contentId:Zr(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:m.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:m.useCallback(()=>h(!0),[]),onCustomAnchorRemove:m.useCallback(()=>h(!1),[]),modal:a,children:n})})};OA.displayName=ow;var MA="PopoverAnchor",N$=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Yi(MA,n),i=Ju(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return m.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(xm,{...i,...r,ref:e})});N$.displayName=MA;var LA="PopoverTrigger",VA=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Yi(LA,n),i=Ju(n),a=Ce(e,s.triggerRef),l=o.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":BA(s.open),...r,ref:a,onClick:me(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(xm,{asChild:!0,...i,children:l})});VA.displayName=LA;var aw="PopoverPortal",[E$,T$]=DA(aw,{forceMount:void 0}),FA=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=Yi(aw,e);return o.jsx(E$,{scope:e,forceMount:n,children:o.jsx(An,{present:n||i.open,children:o.jsx(bl,{asChild:!0,container:s,children:r})})})};FA.displayName=aw;var pl="PopoverContent",zA=m.forwardRef((t,e)=>{const n=T$(pl,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=Yi(pl,t.__scopePopover);return o.jsx(An,{present:r||i.open,children:i.modal?o.jsx(j$,{...s,ref:e}):o.jsx(k$,{...s,ref:e})})});zA.displayName=pl;var C$=Do("PopoverContent.RemoveScroll"),j$=m.forwardRef((t,e)=>{const n=Yi(pl,t.__scopePopover),r=m.useRef(null),s=Ce(e,r),i=m.useRef(!1);return m.useEffect(()=>{const a=r.current;if(a)return iw(a)},[]),o.jsx(Zm,{as:C$,allowPinchZoom:!0,children:o.jsx(UA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:me(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),k$=m.forwardRef((t,e)=>{const n=Yi(pl,t.__scopePopover),r=m.useRef(!1),s=m.useRef(!1);return o.jsx(UA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),UA=m.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...f}=t,p=Yi(pl,n),g=Ju(n);return sw(),o.jsx(Ym,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(wl,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:o.jsx(t0,{"data-state":BA(p.open),role:"dialog",id:p.contentId,...g,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$A="PopoverClose",A$=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Yi($A,n);return o.jsx(xe.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});A$.displayName=$A;var I$="PopoverArrow",R$=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Ju(n);return o.jsx(n0,{...s,...r,ref:e})});R$.displayName=I$;function BA(t){return t?"open":"closed"}var P$=OA,D$=VA,O$=FA,WA=zA;const M$=P$,L$=D$,HA=m.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>o.jsx(O$,{children:o.jsx(WA,{ref:s,align:e,sideOffset:n,className:$("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));HA.displayName=WA.displayName;var V$=m.createContext(void 0);function ep(t){const e=m.useContext(V$);return t||e||"ltr"}function gy(t,[e,n]){return Math.min(n,Math.max(e,t))}function F$(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var lw="ScrollArea",[qA,UG]=Kn(lw),[z$,ar]=qA(lw),GA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...a}=t,[l,c]=m.useState(null),[u,h]=m.useState(null),[f,p]=m.useState(null),[g,x]=m.useState(null),[y,b]=m.useState(null),[_,w]=m.useState(0),[E,j]=m.useState(0),[P,O]=m.useState(!1),[S,N]=m.useState(!1),C=Ce(e,A=>c(A)),k=ep(s);return o.jsx(z$,{scope:n,type:r,dir:k,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:h,content:f,onContentChange:p,scrollbarX:g,onScrollbarXChange:x,scrollbarXEnabled:P,onScrollbarXEnabledChange:O,scrollbarY:y,onScrollbarYChange:b,scrollbarYEnabled:S,onScrollbarYEnabledChange:N,onCornerWidthChange:w,onCornerHeightChange:j,children:o.jsx(xe.div,{dir:k,...a,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":E+"px",...t.style}})})});GA.displayName=lw;var KA="ScrollAreaViewport",QA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,a=ar(KA,n),l=m.useRef(null),c=Ce(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(xe.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});QA.displayName=KA;var hs="ScrollAreaScrollbar",cw=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ar(hs,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=t.orientation==="horizontal";return m.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(U$,{...r,ref:e,forceMount:n}):s.type==="scroll"?o.jsx($$,{...r,ref:e,forceMount:n}):s.type==="auto"?o.jsx(XA,{...r,ref:e,forceMount:n}):s.type==="always"?o.jsx(uw,{...r,ref:e}):null});cw.displayName=hs;var U$=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ar(hs,t.__scopeScrollArea),[i,a]=m.useState(!1);return m.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},h=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(An,{present:n||i,children:o.jsx(XA,{"data-state":i?"visible":"hidden",...r,ref:e})})}),$$=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ar(hs,t.__scopeScrollArea),i=t.orientation==="horizontal",a=np(()=>c("SCROLL_END"),100),[l,c]=F$("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const p=()=>{const g=u[h];f!==g&&(c("SCROLL"),a()),f=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,a]),o.jsx(An,{present:n||l!=="hidden",children:o.jsx(uw,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:me(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),XA=m.forwardRef((t,e)=>{const n=ar(hs,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,a]=m.useState(!1),l=t.orientation==="horizontal",c=np(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:h)}},10);return gl(n.viewport,c),gl(n.content,c),o.jsx(An,{present:r||i,children:o.jsx(uw,{"data-state":i?"visible":"hidden",...s,ref:e})})}),uw=m.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=ar(hs,t.__scopeScrollArea),i=m.useRef(null),a=m.useRef(0),[l,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=tI(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function f(p,g){return K$(p,a.current,l,g)}return n==="horizontal"?o.jsx(B$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,g=YS(p,l,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=f(p,s.dir))}}):n==="vertical"?o.jsx(W$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,g=YS(p,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=f(p))}}):null}),B$=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=ar(hs,t.__scopeScrollArea),[a,l]=m.useState(),c=m.useRef(null),u=Ce(e,c,i.onScrollbarXChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(JA,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":tp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(p),rI(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Af(a.paddingLeft),paddingEnd:Af(a.paddingRight)}})}})}),W$=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=ar(hs,t.__scopeScrollArea),[a,l]=m.useState(),c=m.useRef(null),u=Ce(e,c,i.onScrollbarYChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(JA,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":tp(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(p),rI(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&a&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Af(a.paddingTop),paddingEnd:Af(a.paddingBottom)}})}})}),[H$,YA]=qA(hs),JA=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...p}=t,g=ar(hs,n),[x,y]=m.useState(null),b=Ce(e,C=>y(C)),_=m.useRef(null),w=m.useRef(""),E=g.viewport,j=r.content-r.viewport,P=mt(h),O=mt(c),S=np(f,10);function N(C){if(_.current){const k=C.clientX-_.current.left,A=C.clientY-_.current.top;u({x:k,y:A})}}return m.useEffect(()=>{const C=k=>{const A=k.target;(x==null?void 0:x.contains(A))&&P(k,j)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[E,x,j,P]),m.useEffect(O,[r,O]),gl(x,S),gl(g.content,S),o.jsx(H$,{scope:n,scrollbar:x,hasThumb:s,onThumbChange:mt(i),onThumbPointerUp:mt(a),onThumbPositionChange:O,onThumbPointerDown:mt(l),children:o.jsx(xe.div,{...p,ref:b,style:{position:"absolute",...p.style},onPointerDown:me(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),_.current=x.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),N(C))}),onPointerMove:me(t.onPointerMove,N),onPointerUp:me(t.onPointerUp,C=>{const k=C.target;k.hasPointerCapture(C.pointerId)&&k.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),_.current=null})})})}),kf="ScrollAreaThumb",ZA=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=YA(kf,t.__scopeScrollArea);return o.jsx(An,{present:n||s.hasThumb,children:o.jsx(q$,{ref:e,...r})})}),q$=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=ar(kf,n),a=YA(kf,n),{onThumbPositionChange:l}=a,c=Ce(e,f=>a.onThumbChange(f)),u=m.useRef(void 0),h=np(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const f=i.viewport;if(f){const p=()=>{if(h(),!u.current){const g=Q$(f,l);u.current=g,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[i.viewport,h,l]),o.jsx(xe.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:me(t.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),x=f.clientX-g.left,y=f.clientY-g.top;a.onThumbPointerDown({x,y})}),onPointerUp:me(t.onPointerUp,a.onThumbPointerUp)})});ZA.displayName=kf;var dw="ScrollAreaCorner",eI=m.forwardRef((t,e)=>{const n=ar(dw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(G$,{...t,ref:e}):null});eI.displayName=dw;var G$=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=ar(dw,n),[i,a]=m.useState(0),[l,c]=m.useState(0),u=!!(i&&l);return gl(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),gl(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),u?o.jsx(xe.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Af(t){return t?parseInt(t,10):0}function tI(t,e){const n=t/e;return isNaN(n)?0:n}function tp(t){const e=tI(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function K$(t,e,n,r="ltr"){const s=tp(n),i=s/2,a=e||i,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return nI([c,u],f)(t)}function YS(t,e,n="ltr"){const r=tp(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,a]:[a*-1,0],u=gy(t,c);return nI([0,a],[0,l])(u)}function nI(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function rI(t,e){return t>0&&t<e}var Q$=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},a=n.left!==i.left,l=n.top!==i.top;(a||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function np(t,e){const n=mt(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function gl(t,e){const n=mt(e);_t(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var sI=GA,X$=QA,Y$=eI;const iI=m.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(sI,{ref:r,className:$("relative overflow-hidden",t),...n,children:[o.jsx(X$,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(oI,{}),o.jsx(Y$,{})]}));iI.displayName=sI.displayName;const oI=m.forwardRef(({className:t,orientation:e="vertical",...n},r)=>o.jsx(cw,{ref:r,orientation:e,className:$("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:o.jsx(ZA,{className:"relative flex-1 rounded-full bg-border"})}));oI.displayName=cw.displayName;const J$=Ru("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function Hn({className:t,variant:e,...n}){return o.jsx("div",{className:$(J$({variant:e}),t),...n})}function Z$(){const{user:t}=rt();Ki();const[e,n]=m.useState([]),[r,s]=m.useState(0),[i,a]=m.useState(!1),[l,c]=m.useState(()=>parseInt(localStorage.getItem("lastNotificationRead")||"0"));m.useEffect(()=>{if(!t)return;const g=jo(Wi(Me,"activities"),Oa("createdAt","desc"),Lc(20)),x=kr(g,y=>{const _=y.docs.map(w=>({id:w.id,...w.data()})).filter(w=>{if(!w.userId||w.userId===t.uid)return!1;if(w.emailDomain&&t.email){const E=t.email.split("@")[1];if(w.emailDomain!==E)return!1}return!0});n(_)});return()=>{x()}},[t]),m.useEffect(()=>{const g=e.filter(x=>new Date(x.createdAt).getTime()>l).length;s(g)},[e,l]),m.useEffect(()=>{if(!t)return;const g=async()=>{try{const y=new Date;y.setHours(y.getHours()-24);const b=Wi(Me,"activities"),_=jo(b,Y0("createdAt","<",y.toISOString())),w=await lA(_),E=w.docs.map(j=>uA(j.ref));await Promise.all(E),w.docs.length>0&&console.log(`Cleaned up ${w.docs.length} old activities`)}catch(y){console.error("Error cleaning up old data:",y)}};g();const x=setInterval(g,60*60*1e3);return()=>clearInterval(x)},[t]);const u=g=>{if(a(g),g){const x=Date.now();c(x),localStorage.setItem("lastNotificationRead",x.toString())}},h=g=>{if(!g)return"";const x=new Date(g),b=(new Date().getTime()-x.getTime())/1e3;return b<60?"Just now":b<3600?`${Math.floor(b/60)}m`:b<86400?`${Math.floor(b/3600)}h`:b<604800?`${Math.floor(b/86400)}d`:`${Math.floor(b/604800)}w`},f=g=>{switch(g){case"badge_earned":return o.jsx(ja,{className:"h-3 w-3 text-white fill-amber-100"});case"streak_milestone":return o.jsx(KM,{className:"h-3 w-3 text-white fill-orange-100"});case"assignment_completed":return o.jsx(Lv,{className:"h-3 w-3 text-white"});default:return o.jsx(kc,{className:"h-3 w-3 text-white"})}},p=g=>{switch(g){case"badge_earned":return"bg-amber-500 border-amber-200";case"streak_milestone":return"bg-orange-500 border-orange-200";case"assignment_completed":return"bg-emerald-500 border-emerald-200";default:return"bg-blue-500 border-blue-200"}};return o.jsxs(M$,{open:i,onOpenChange:u,children:[o.jsx(L$,{asChild:!0,children:o.jsxs(ce,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground rounded-full w-9 h-9",children:[o.jsx(kc,{className:"h-5 w-5"}),r>0&&o.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background animate-pulse"})]})}),o.jsxs(HA,{className:"w-80 p-0 mr-2 shadow-xl border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",align:"end",children:[o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[o.jsx("h4",{className:"font-semibold text-sm",children:"Notifications"}),r>0&&o.jsxs(Hn,{variant:"secondary",className:"text-[10px] h-5 px-1.5",children:[r," new"]})]}),o.jsx(iI,{className:"h-[300px]",children:e.length>0?o.jsx("div",{className:"flex flex-col",children:e.map(g=>{var x;return o.jsxs("div",{className:"flex items-start gap-3 p-4 hover:bg-muted/50 transition-colors border-b last:border-0 relative group",children:[o.jsxs("div",{className:"relative shrink-0",children:[o.jsxs(wr,{className:"h-10 w-10 border border-border",children:[o.jsx(br,{src:g.userAvatar||void 0}),o.jsx(_r,{children:((x=g.userName)==null?void 0:x[0])||"?"})]}),o.jsx("div",{className:$("absolute -bottom-1 -right-1 rounded-full p-0.5 border-[2px] border-background flex items-center justify-center w-5 h-5",p(g.type)),children:f(g.type)})]}),o.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[o.jsxs("p",{className:"text-sm text-foreground leading-snug",children:[o.jsx("span",{className:"font-semibold",children:g.userName})," ",o.jsx("span",{className:"text-muted-foreground font-normal",children:g.content.replace(g.userName,"").trim()})]}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:h(g.createdAt)})]}),new Date(g.createdAt).getTime()>l&&o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-blue-500 rounded-full"})]},g.id)})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-[200px] text-muted-foreground gap-2",children:[o.jsx("div",{className:"p-3 bg-muted rounded-full",children:o.jsx(kc,{className:"h-6 w-6 opacity-20"})}),o.jsx("p",{className:"text-sm",children:"No new activity"})]})})]})]})}function eB({onMobileMenuClick:t}){var y;const{syncClassroom:e,isSyncing:n}=cn(),[r]=am(),s=Xm(),{user:i}=rt(),[a,l]=m.useState(!1);m.useEffect(()=>{if(i&&!localStorage.getItem("trace_docs_seen")){l(!0);const _=setTimeout(()=>{l(!1),localStorage.setItem("trace_docs_seen","true")},1e4);return()=>clearTimeout(_)}},[i]);const c=()=>{l(!1),localStorage.setItem("trace_docs_seen","true"),window.location.href="/docs"},u=()=>{console.log("[GLOBAL REFRESH] Clearing all caches..."),_n.clearAll(),console.log("[GLOBAL REFRESH] Cache cleared. Starting sync..."),e().catch(b=>{console.error("Sync failed:",b)}),setTimeout(()=>{console.log("[GLOBAL REFRESH] Reloading page..."),window.location.reload()},1e3)},h=((y=i==null?void 0:i.email)==null?void 0:y.split("@")[1])||"",p=h&&!["gmail.com","yahoo.com","outlook.com","hotmail.com","live.com","aol.com","icloud.com","protonmail.com","mail.com","zoho.com","yandex.com"].includes(h.toLowerCase())&&!h.endsWith(".com")&&h.includes("."),x={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return o.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[o.jsxs("div",{className:"flex items-center flex-1",children:[s&&o.jsx(ce,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:o.jsx(HC,{className:"h-5 w-5"})}),o.jsx("span",{className:"md:hidden font-medium text-lg",children:x}),!s&&p&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(QM,{className:"h-3.5 w-3.5 text-muted-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:h})]})]}),o.jsxs("div",{className:"flex items-center ml-4 gap-2",children:[o.jsx(Z$,{}),o.jsxs(Mu,{open:a,children:[o.jsx(Lu,{asChild:!0,children:o.jsx(ce,{variant:"ghost",size:"icon",onClick:c,title:"Documentation",children:o.jsx(UC,{className:"w-5 h-5"})})}),o.jsx(Tl,{side:"bottom",className:"max-w-xs",children:o.jsx("p",{className:"text-sm",children:"New to Trace? Check out our documentation to learn all features!"})})]}),o.jsx(ce,{variant:"ghost",size:"icon",onClick:u,disabled:n,className:$(n&&"animate-spin"),title:"Refresh Everything",children:o.jsx(Mo,{className:"w-5 h-5"})})]})]})}var aI={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},JS=Te.createContext&&Te.createContext(aI),tB=["attr","size","title"];function nB(t,e){if(t==null)return{};var n=rB(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function rB(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},If.apply(this,arguments)}function ZS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Rf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZS(Object(n),!0).forEach(function(r){sB(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sB(t,e,n){return e=iB(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iB(t){var e=oB(t,"string");return typeof e=="symbol"?e:e+""}function oB(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lI(t){return t&&t.map((e,n)=>Te.createElement(e.tag,Rf({key:n},e.attr),lI(e.child)))}function hw(t){return e=>Te.createElement(aB,If({attr:Rf({},t.attr)},e),lI(t.child))}function aB(t){var e=n=>{var{attr:r,size:s,title:i}=t,a=nB(t,tB),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Te.createElement("svg",If({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:Rf(Rf({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Te.createElement("title",null,i),t.children)};return JS!==void 0?Te.createElement(JS.Consumer,null,n=>e(n)):e(aI)}function cI(t){return hw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function lB(t){return hw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const cB=[{icon:lB,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:JM,title:"Kanban Board",description:"Visual assignment tracking."},{icon:VM,title:"Linear Timeline",description:"Chronological deadline view."},{icon:FM,title:"Performance Metrics",description:"Grade & workload analytics."}];function uB(){const{signInWithGoogle:t,loading:e,error:n}=rt();return o.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[o.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),o.jsx("header",{className:"px-10 py-8 z-10",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),o.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",o.jsx("br",{}),o.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),o.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),o.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:cB.map(r=>o.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[o.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),o.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),o.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),o.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:o.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),o.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[o.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[o.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),o.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),o.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),o.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[o.jsx(kn,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",o.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),o.jsxs(ce,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[o.jsx(cI,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&o.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[o.jsx(kn,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:n})]})]}),o.jsx("div",{className:"pt-8 border-t border-zinc-100",children:o.jsxs("div",{className:"flex gap-4",children:[o.jsx(n3,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),o.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),o.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[o.jsx("span",{children:" 2024 Trace Inc."}),o.jsxs("div",{className:"flex gap-6",children:[o.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),o.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function dB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const rp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ml(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function fw(t){return"nodeType"in t}function mn(t){var e,n;return t?Ml(t)?t:fw(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function mw(t){const{Document:e}=mn(t);return t instanceof e}function Zu(t){return Ml(t)?!1:t instanceof mn(t).HTMLElement}function uI(t){return t instanceof mn(t).SVGElement}function Ll(t){return t?Ml(t)?t.document:fw(t)?mw(t)?t:Zu(t)||uI(t)?t.ownerDocument:document:document:document}const Or=rp?m.useLayoutEffect:m.useEffect;function sp(t){const e=m.useRef(t);return Or(()=>{e.current=t}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function hB(){const t=m.useRef(null),e=m.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=m.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function yu(t,e){e===void 0&&(e=[t]);const n=m.useRef(t);return Or(()=>{n.current!==t&&(n.current=t)},e),n}function ed(t,e){const n=m.useRef();return m.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Pf(t){const e=sp(t),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Df(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}let kg={};function td(t,e){return m.useMemo(()=>{if(e)return e;const n=kg[t]==null?0:kg[t]+1;return kg[t]=n,t+"-"+n},[t,e])}function dI(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,a)=>{const l=Object.entries(a);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const La=dI(1),vu=dI(-1);function fB(t){return"clientX"in t&&"clientY"in t}function ip(t){if(!t)return!1;const{KeyboardEvent:e}=mn(t.target);return e&&t instanceof e}function mB(t){if(!t)return!1;const{TouchEvent:e}=mn(t.target);return e&&t instanceof e}function Of(t){if(mB(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return fB(t)?{x:t.clientX,y:t.clientY}:null}const Ls=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[Ls.Translate.toString(t),Ls.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),eN="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pB(t){return t.matches(eN)?t:t.querySelector(eN)}const gB={display:"none"};function xB(t){let{id:e,value:n}=t;return Te.createElement("div",{id:e,style:gB},n)}function yB(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Te.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function vB(){const[t,e]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const hI=m.createContext(null);function wB(t){const e=m.useContext(hI);m.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function bB(){const[t]=m.useState(()=>new Set),e=m.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[m.useCallback(r=>{let{type:s,event:i}=r;t.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,i)})},[t]),e]}const _B={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},SB={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function NB(t){let{announcements:e=SB,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=_B}=t;const{announce:i,announcement:a}=vB(),l=td("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),wB(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;e.onDragMove&&i(e.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;i(e.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;i(e.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;i(e.onDragCancel({active:p,over:g}))}}),[i,e])),!c)return null;const h=Te.createElement(Te.Fragment,null,Te.createElement(xB,{id:r,value:s.draggable}),Te.createElement(yB,{id:l,announcement:a}));return n?nr.createPortal(h,n):h}var kt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(kt||(kt={}));function Mf(){}function Lf(t,e){return m.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function fI(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Mr=Object.freeze({x:0,y:0});function mI(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function EB(t,e){const n=Of(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function pI(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function TB(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function tN(t){let{left:e,top:n,height:r,width:s}=t;return[{x:e,y:n},{x:e+s,y:n},{x:e,y:n+r},{x:e+s,y:n+r}]}function gI(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function nN(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const xI=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=nN(e,e.left,e.top),i=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const u=mI(nN(c),s);i.push({id:l,data:{droppableContainer:a,value:u}})}}return i.sort(pI)},CB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=tN(e),i=[];for(const a of r){const{id:l}=a,c=n.get(l);if(c){const u=tN(c),h=s.reduce((p,g,x)=>p+mI(u[x],g),0),f=Number((h/4).toFixed(4));i.push({id:l,data:{droppableContainer:a,value:f}})}}return i.sort(pI)};function jB(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),a=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=a*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const kB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:a}=i,l=n.get(a);if(l){const c=jB(l,e);c>0&&s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(TB)};function AB(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function yI(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Mr}function IB(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>({...a,top:a.top+t*l.y,bottom:a.bottom+t*l.y,left:a.left+t*l.x,right:a.right+t*l.x}),{...n})}}const RB=IB(1);function vI(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function PB(t,e,n){const r=vI(e);if(!r)return t;const{scaleX:s,scaleY:i,x:a,y:l}=r,c=t.left-a-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const DB={ignoreTransform:!1};function Vl(t,e){e===void 0&&(e=DB);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=mn(t).getComputedStyle(t);u&&(n=PB(n,u,h))}const{top:r,left:s,width:i,height:a,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:a,bottom:l,right:c}}function rN(t){return Vl(t,{ignoreTransform:!0})}function OB(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function MB(t,e){return e===void 0&&(e=mn(t).getComputedStyle(t)),e.position==="fixed"}function LB(t,e){e===void 0&&(e=mn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function op(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(mw(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!Zu(s)||uI(s)||n.includes(s))return n;const i=mn(t).getComputedStyle(s);return s!==t&&LB(s,i)&&n.push(s),MB(s,i)?n:r(s.parentNode)}return t?r(t):n}function wI(t){const[e]=op(t,1);return e??null}function Ag(t){return!rp||!t?null:Ml(t)?t:fw(t)?mw(t)||t===Ll(t).scrollingElement?window:Zu(t)?t:null:null}function bI(t){return Ml(t)?t.scrollX:t.scrollLeft}function _I(t){return Ml(t)?t.scrollY:t.scrollTop}function xy(t){return{x:bI(t),y:_I(t)}}var Ot;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ot||(Ot={}));function SI(t){return!rp||!t?!1:t===document.scrollingElement}function NI(t){const e={x:0,y:0},n=SI(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,a=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:a,isRight:l,maxScroll:r,minScroll:e}}const VB={x:.2,y:.2};function FB(t,e,n,r,s){let{top:i,left:a,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=VB);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=NI(t),g={x:0,y:0},x={x:0,y:0},y={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+y.height?(g.y=Ot.Backward,x.y=r*Math.abs((e.top+y.height-i)/y.height)):!h&&c>=e.bottom-y.height&&(g.y=Ot.Forward,x.y=r*Math.abs((e.bottom-y.height-c)/y.height)),!p&&l>=e.right-y.width?(g.x=Ot.Forward,x.x=r*Math.abs((e.right-y.width-l)/y.width)):!f&&a<=e.left+y.width&&(g.x=Ot.Backward,x.x=r*Math.abs((e.left+y.width-a)/y.width)),{direction:g,speed:x}}function zB(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function EI(t){return t.reduce((e,n)=>La(e,xy(n)),Mr)}function UB(t){return t.reduce((e,n)=>e+bI(n),0)}function $B(t){return t.reduce((e,n)=>e+_I(n),0)}function TI(t,e){if(e===void 0&&(e=Vl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);wI(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const BB=[["x",["left","right"],UB],["y",["top","bottom"],$B]];class pw{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=op(n),s=EI(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,a,l]of BB)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Fc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function WB(t){const{EventTarget:e}=mn(t);return t instanceof e?t:Ll(t)}function Ig(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Yn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Yn||(Yn={}));function sN(t){t.preventDefault()}function HB(t){t.stopPropagation()}var Pe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Pe||(Pe={}));const CI={start:[Pe.Space,Pe.Enter],cancel:[Pe.Esc],end:[Pe.Space,Pe.Enter,Pe.Tab]},qB=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Pe.Right:return{...n,x:n.x+25};case Pe.Left:return{...n,x:n.x-25};case Pe.Down:return{...n,y:n.y+25};case Pe.Up:return{...n,y:n.y-25}}};class ap{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Fc(Ll(n)),this.windowListeners=new Fc(mn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Yn.Resize,this.handleCancel),this.windowListeners.add(Yn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Yn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&TI(r),n(Mr)}handleKeyDown(e){if(ip(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=CI,coordinateGetter:a=qB,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Mr;this.referenceCoordinates||(this.referenceCoordinates=h);const f=a(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=vu(f,h),g={x:0,y:0},{scrollableAncestors:x}=r.current;for(const y of x){const b=e.code,{isTop:_,isRight:w,isLeft:E,isBottom:j,maxScroll:P,minScroll:O}=NI(y),S=zB(y),N={x:Math.min(b===Pe.Right?S.right-S.width/2:S.right,Math.max(b===Pe.Right?S.left:S.left+S.width/2,f.x)),y:Math.min(b===Pe.Down?S.bottom-S.height/2:S.bottom,Math.max(b===Pe.Down?S.top:S.top+S.height/2,f.y))},C=b===Pe.Right&&!w||b===Pe.Left&&!E,k=b===Pe.Down&&!j||b===Pe.Up&&!_;if(C&&N.x!==f.x){const A=y.scrollLeft+p.x,D=b===Pe.Right&&A<=P.x||b===Pe.Left&&A>=O.x;if(D&&!p.y){y.scrollTo({left:A,behavior:l});return}D?g.x=y.scrollLeft-A:g.x=b===Pe.Right?y.scrollLeft-P.x:y.scrollLeft-O.x,g.x&&y.scrollBy({left:-g.x,behavior:l});break}else if(k&&N.y!==f.y){const A=y.scrollTop+p.y,D=b===Pe.Down&&A<=P.y||b===Pe.Up&&A>=O.y;if(D&&!p.x){y.scrollTo({top:A,behavior:l});return}D?g.y=y.scrollTop-A:g.y=b===Pe.Down?y.scrollTop-P.y:y.scrollTop-O.y,g.y&&y.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(e,La(vu(f,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ap.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=CI,onActivation:s}=e,{active:i}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function iN(t){return!!(t&&"distance"in t)}function oN(t){return!!(t&&"delay"in t)}class gw{constructor(e,n,r){var s;r===void 0&&(r=WB(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:a}=i;this.props=e,this.events=n,this.document=Ll(a),this.documentListeners=new Fc(this.document),this.listeners=new Fc(r),this.windowListeners=new Fc(mn(a)),this.initialCoordinates=(s=Of(i))!=null?s:Mr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Yn.Resize,this.handleCancel),this.windowListeners.add(Yn.DragStart,sN),this.windowListeners.add(Yn.VisibilityChange,this.handleCancel),this.windowListeners.add(Yn.ContextMenu,sN),this.documentListeners.add(Yn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(oN(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(iN(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Yn.Click,HB,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Yn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=Of(e))!=null?n:Mr,u=vu(s,c);if(!r&&l){if(iN(l)){if(l.tolerance!=null&&Ig(u,l.tolerance))return this.handleCancel();if(Ig(u,l.distance))return this.handleStart()}if(oN(l)&&Ig(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),a(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Pe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const GB={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class lp extends gw{constructor(e){const{event:n}=e,r=Ll(n.target);super(e,GB,r)}}lp.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const KB={move:{name:"mousemove"},end:{name:"mouseup"}};var yy;(function(t){t[t.RightClick=2]="RightClick"})(yy||(yy={}));class QB extends gw{constructor(e){super(e,KB,Ll(e.event.target))}}QB.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===yy.RightClick?!1:(r==null||r({event:n}),!0)}}];const Rg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class XB extends gw{constructor(e){super(e,Rg)}static setup(){return window.addEventListener(Rg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rg.move.name,e)};function e(){}}}XB.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var zc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(zc||(zc={}));var Vf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Vf||(Vf={}));function YB(t){let{acceleration:e,activator:n=zc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:a=5,order:l=Vf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=t;const g=ZB({delta:f,disabled:!i}),[x,y]=hB(),b=m.useRef({x:0,y:0}),_=m.useRef({x:0,y:0}),w=m.useMemo(()=>{switch(n){case zc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case zc.DraggableRect:return s}},[n,s,c]),E=m.useRef(null),j=m.useCallback(()=>{const O=E.current;if(!O)return;const S=b.current.x*_.current.x,N=b.current.y*_.current.y;O.scrollBy(S,N)},[]),P=m.useMemo(()=>l===Vf.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!w){y();return}for(const O of P){if((r==null?void 0:r(O))===!1)continue;const S=u.indexOf(O),N=h[S];if(!N)continue;const{direction:C,speed:k}=FB(O,N,w,e,p);for(const A of["x","y"])g[A][C[A]]||(k[A]=0,C[A]=0);if(k.x>0||k.y>0){y(),E.current=O,x(j,a),b.current=k,_.current=C;return}}b.current={x:0,y:0},_.current={x:0,y:0},y()},[e,j,r,y,i,a,JSON.stringify(w),JSON.stringify(g),x,u,P,h,JSON.stringify(p)])}const JB={x:{[Ot.Backward]:!1,[Ot.Forward]:!1},y:{[Ot.Backward]:!1,[Ot.Forward]:!1}};function ZB(t){let{delta:e,disabled:n}=t;const r=Df(e);return ed(s=>{if(n||!r||!s)return JB;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Ot.Backward]:s.x[Ot.Backward]||i.x===-1,[Ot.Forward]:s.x[Ot.Forward]||i.x===1},y:{[Ot.Backward]:s.y[Ot.Backward]||i.y===-1,[Ot.Forward]:s.y[Ot.Forward]||i.y===1}}},[n,e,r])}function eW(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ed(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function tW(t,e){return m.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...n,...i]},[]),[t,e])}var wu;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(wu||(wu={}));var vy;(function(t){t.Optimized="optimized"})(vy||(vy={}));const aN=new Map;function nW(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,a]=m.useState(null),{frequency:l,measure:c,strategy:u}=s,h=m.useRef(t),f=b(),p=yu(f),g=m.useCallback(function(_){_===void 0&&(_=[]),!p.current&&a(w=>w===null?_:w.concat(_.filter(E=>!w.includes(E))))},[p]),x=m.useRef(null),y=ed(_=>{if(f&&!n)return aN;if(!_||_===aN||h.current!==t||i!=null){const w=new Map;for(let E of t){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){w.set(E.id,E.rect.current);continue}const j=E.node.current,P=j?new pw(c(j),j):null;E.rect.current=P,P&&w.set(E.id,P)}return w}return _},[t,i,n,f,c]);return m.useEffect(()=>{h.current=t},[t]),m.useEffect(()=>{f||g()},[n,f]),m.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||x.current!==null||(x.current=setTimeout(()=>{g(),x.current=null},l))},[l,f,g,...r]),{droppableRects:y,measureDroppableContainers:g,measuringScheduled:i!=null};function b(){switch(u){case wu.Always:return!1;case wu.BeforeDragging:return n;default:return!n}}}function xw(t,e){return ed(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function rW(t,e){return xw(t,e)}function sW(t){let{callback:e,disabled:n}=t;const r=sp(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function cp(t){let{callback:e,disabled:n}=t;const r=sp(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function iW(t){return new pw(Vl(t),t)}function lN(t,e,n){e===void 0&&(e=iW);const[r,s]=m.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const a=sW({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=cp({callback:i});return Or(()=>{i(),t?(l==null||l.observe(t),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[t]),r}function oW(t){const e=xw(t);return yI(t,e)}const cN=[];function aW(t){const e=m.useRef(t),n=ed(r=>t?r&&r!==cN&&t&&e.current&&t.parentNode===e.current.parentNode?r:op(t):cN,[t]);return m.useEffect(()=>{e.current=t},[t]),n}function lW(t){const[e,n]=m.useState(null),r=m.useRef(t),s=m.useCallback(i=>{const a=Ag(i.target);a&&n(l=>l?(l.set(a,xy(a)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=r.current;if(t!==i){a(i);const l=t.map(c=>{const u=Ag(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,xy(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{a(t),a(i)};function a(l){l.forEach(c=>{const u=Ag(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),m.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,a)=>La(i,a),Mr):EI(t):Mr,[t,e])}function uN(t,e){e===void 0&&(e=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},e),m.useEffect(()=>{const r=t!==Mr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?vu(t,n.current):Mr}function cW(t){m.useEffect(()=>{if(!rp)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function uW(t,e){return m.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=a=>{i(a,e)},n},{}),[t,e])}function jI(t){return m.useMemo(()=>t?OB(t):null,[t])}const dN=[];function dW(t,e){e===void 0&&(e=Vl);const[n]=t,r=jI(n?mn(n):null),[s,i]=m.useState(dN);function a(){i(()=>t.length?t.map(c=>SI(c)?r:new pw(e(c),c)):dN)}const l=cp({callback:a});return Or(()=>{l==null||l.disconnect(),a(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function kI(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return Zu(e)?e:t}function hW(t){let{measure:e}=t;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:h}of u)if(Zu(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),i=cp({callback:s}),a=m.useCallback(u=>{const h=kI(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=Pf(a);return m.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const fW=[{sensor:lp,options:{}},{sensor:ap,options:{}}],mW={current:{}},kh={draggable:{measure:rN},droppable:{measure:rN,strategy:wu.WhileDragging,frequency:vy.Optimized},dragOverlay:{measure:Vl}};class Uc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const pW={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Uc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Mf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:kh,measureDroppableContainers:Mf,windowRect:null,measuringScheduled:!1},AI={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Mf,draggableNodes:new Map,over:null,measureDroppableContainers:Mf},nd=m.createContext(AI),II=m.createContext(pW);function gW(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Uc}}}function xW(t,e){switch(e.type){case kt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case kt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case kt.DragEnd:case kt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case kt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Uc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case kt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new Uc(t.droppable.containers);return a.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:a}}}case kt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Uc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function yW(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(nd),i=Df(r),a=Df(n==null?void 0:n.id);return m.useEffect(()=>{if(!e&&!r&&i&&a!=null){if(!ip(i)||document.activeElement===i.target)return;const l=s.get(a);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=pB(h);if(f){f.focus();break}}})}},[r,e,s,a,i]),null}function RI(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function vW(t){return m.useMemo(()=>({draggable:{...kh.draggable,...t==null?void 0:t.draggable},droppable:{...kh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...kh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function wW(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=m.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Or(()=>{if(!a&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=yI(h,r);if(a||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=wI(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,a,l,r,n])}const up=m.createContext({...Mr,scaleX:1,scaleY:1});var ri;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ri||(ri={}));const PI=m.memo(function(e){var n,r,s,i;let{id:a,accessibility:l,autoScroll:c=!0,children:u,sensors:h=fW,collisionDetection:f=kB,measuring:p,modifiers:g,...x}=e;const y=m.useReducer(xW,void 0,gW),[b,_]=y,[w,E]=bB(),[j,P]=m.useState(ri.Uninitialized),O=j===ri.Initialized,{draggable:{active:S,nodes:N,translate:C},droppable:{containers:k}}=b,A=S!=null?N.get(S):null,D=m.useRef({initial:null,translated:null}),R=m.useMemo(()=>{var Ve;return S!=null?{id:S,data:(Ve=A==null?void 0:A.data)!=null?Ve:mW,rect:D}:null},[S,A]),B=m.useRef(null),[q,ee]=m.useState(null),[re,V]=m.useState(null),z=yu(x,Object.values(x)),K=td("DndDescribedBy",a),U=m.useMemo(()=>k.getEnabled(),[k]),W=vW(p),{droppableRects:J,measureDroppableContainers:ne,measuringScheduled:te}=nW(U,{dragging:O,dependencies:[C.x,C.y],config:W.droppable}),se=eW(N,S),M=m.useMemo(()=>re?Of(re):null,[re]),Y=cd(),ae=rW(se,W.draggable.measure);wW({activeNode:S!=null?N.get(S):null,config:Y.layoutShiftCompensation,initialRect:ae,measure:W.draggable.measure});const X=lN(se,W.draggable.measure,ae),he=lN(se?se.parentElement:null),ie=m.useRef({activatorEvent:null,active:null,activeNode:se,collisionRect:null,collisions:null,droppableRects:J,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ge=k.getNodeFor((n=ie.current.over)==null?void 0:n.id),Ee=hW({measure:W.dragOverlay.measure}),pt=(r=Ee.nodeRef.current)!=null?r:se,Re=O?(s=Ee.rect)!=null?s:X:null,Be=!!(Ee.nodeRef.current&&Ee.rect),Ft=oW(Be?null:X),qe=jI(pt?mn(pt):null),Ke=aW(O?ge??se:null),lr=dW(Ke),Us=RI(g,{transform:{x:C.x-Ft.x,y:C.y-Ft.y,scaleX:1,scaleY:1},activatorEvent:re,active:R,activeNodeRect:X,containerNodeRect:he,draggingNodeRect:Re,over:ie.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:Ke,scrollableAncestorRects:lr,windowRect:qe}),Ul=M?La(M,C):null,sd=lW(Ke),eo=uN(sd),id=uN(sd,[X]),fs=La(Us,eo),Vr=Re?RB(Re,Us):null,to=R&&Vr?f({active:R,collisionRect:Vr,droppableRects:J,droppableContainers:U,pointerCoordinates:Ul}):null,od=gI(to,"id"),[cr,$l]=m.useState(null),no=Be?Us:La(Us,id),Bl=AB(no,(i=cr==null?void 0:cr.rect)!=null?i:null,X),ro=m.useRef(null),Fr=m.useCallback((Ve,qt)=>{let{sensor:Nt,options:pn}=qt;if(B.current==null)return;const gn=N.get(B.current);if(!gn)return;const sn=Ve.nativeEvent,zt=new Nt({active:B.current,activeNode:gn,event:sn,options:pn,context:ie,onAbort(Et){if(!N.get(Et))return;const{onDragAbort:Rn}=z.current,Qn={id:Et};Rn==null||Rn(Qn),w({type:"onDragAbort",event:Qn})},onPending(Et,In,Rn,Qn){if(!N.get(Et))return;const{onDragPending:ur}=z.current,zr={id:Et,constraint:In,initialCoordinates:Rn,offset:Qn};ur==null||ur(zr),w({type:"onDragPending",event:zr})},onStart(Et){const In=B.current;if(In==null)return;const Rn=N.get(In);if(!Rn)return;const{onDragStart:Qn}=z.current,ms={activatorEvent:sn,active:{id:In,data:Rn.data,rect:D}};nr.unstable_batchedUpdates(()=>{Qn==null||Qn(ms),P(ri.Initializing),_({type:kt.DragStart,initialCoordinates:Et,active:In}),w({type:"onDragStart",event:ms}),ee(ro.current),V(sn)})},onMove(Et){_({type:kt.DragMove,coordinates:Et})},onEnd:$s(kt.DragEnd),onCancel:$s(kt.DragCancel)});ro.current=zt;function $s(Et){return async function(){const{active:Rn,collisions:Qn,over:ms,scrollAdjustedTranslate:ur}=ie.current;let zr=null;if(Rn&&ur){const{cancelDrop:xn}=z.current;zr={activatorEvent:sn,active:Rn,collisions:Qn,delta:ur,over:ms},Et===kt.DragEnd&&typeof xn=="function"&&await Promise.resolve(xn(zr))&&(Et=kt.DragCancel)}B.current=null,nr.unstable_batchedUpdates(()=>{_({type:Et}),P(ri.Uninitialized),$l(null),ee(null),V(null),ro.current=null;const xn=Et===kt.DragEnd?"onDragEnd":"onDragCancel";if(zr){const Yo=z.current[xn];Yo==null||Yo(zr),w({type:xn,event:zr})}})}}},[N]),ad=m.useCallback((Ve,qt)=>(Nt,pn)=>{const gn=Nt.nativeEvent,sn=N.get(pn);if(B.current!==null||!sn||gn.dndKit||gn.defaultPrevented)return;const zt={active:sn};Ve(Nt,qt.options,zt)===!0&&(gn.dndKit={capturedBy:qt.sensor},B.current=pn,Fr(Nt,qt))},[N,Fr]),so=tW(h,ad);cW(h),Or(()=>{X&&j===ri.Initializing&&P(ri.Initialized)},[X,j]),m.useEffect(()=>{const{onDragMove:Ve}=z.current,{active:qt,activatorEvent:Nt,collisions:pn,over:gn}=ie.current;if(!qt||!Nt)return;const sn={active:qt,activatorEvent:Nt,collisions:pn,delta:{x:fs.x,y:fs.y},over:gn};nr.unstable_batchedUpdates(()=>{Ve==null||Ve(sn),w({type:"onDragMove",event:sn})})},[fs.x,fs.y]),m.useEffect(()=>{const{active:Ve,activatorEvent:qt,collisions:Nt,droppableContainers:pn,scrollAdjustedTranslate:gn}=ie.current;if(!Ve||B.current==null||!qt||!gn)return;const{onDragOver:sn}=z.current,zt=pn.get(od),$s=zt&&zt.rect.current?{id:zt.id,rect:zt.rect.current,data:zt.data,disabled:zt.disabled}:null,Et={active:Ve,activatorEvent:qt,collisions:Nt,delta:{x:gn.x,y:gn.y},over:$s};nr.unstable_batchedUpdates(()=>{$l($s),sn==null||sn(Et),w({type:"onDragOver",event:Et})})},[od]),Or(()=>{ie.current={activatorEvent:re,active:R,activeNode:se,collisionRect:Vr,collisions:to,droppableRects:J,draggableNodes:N,draggingNode:pt,draggingNodeRect:Re,droppableContainers:k,over:cr,scrollableAncestors:Ke,scrollAdjustedTranslate:fs},D.current={initial:Re,translated:Vr}},[R,se,to,Vr,N,pt,Re,J,k,cr,Ke,fs]),YB({...Y,delta:C,draggingRect:Vr,pointerCoordinates:Ul,scrollableAncestors:Ke,scrollableAncestorRects:lr});const ld=m.useMemo(()=>({active:R,activeNode:se,activeNodeRect:X,activatorEvent:re,collisions:to,containerNodeRect:he,dragOverlay:Ee,draggableNodes:N,droppableContainers:k,droppableRects:J,over:cr,measureDroppableContainers:ne,scrollableAncestors:Ke,scrollableAncestorRects:lr,measuringConfiguration:W,measuringScheduled:te,windowRect:qe}),[R,se,X,re,to,he,Ee,N,k,J,cr,ne,Ke,lr,W,te,qe]),io=m.useMemo(()=>({activatorEvent:re,activators:so,active:R,activeNodeRect:X,ariaDescribedById:{draggable:K},dispatch:_,draggableNodes:N,over:cr,measureDroppableContainers:ne}),[re,so,R,X,_,K,N,cr,ne]);return Te.createElement(hI.Provider,{value:E},Te.createElement(nd.Provider,{value:io},Te.createElement(II.Provider,{value:ld},Te.createElement(up.Provider,{value:Bl},u)),Te.createElement(yW,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Te.createElement(NB,{...l,hiddenTextDescribedById:K}));function cd(){const Ve=(q==null?void 0:q.autoScrollEnabled)===!1,qt=typeof c=="object"?c.enabled===!1:c===!1,Nt=O&&!Ve&&!qt;return typeof c=="object"?{...c,enabled:Nt}:{enabled:Nt}}}),bW=m.createContext(null),hN="button",_W="Draggable";function SW(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=td(_W),{activators:a,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=m.useContext(nd),{role:g=hN,roleDescription:x="draggable",tabIndex:y=0}=s??{},b=(c==null?void 0:c.id)===e,_=m.useContext(b?up:bW),[w,E]=Pf(),[j,P]=Pf(),O=uW(a,e),S=yu(n);Or(()=>(f.set(e,{id:e,key:i,node:w,activatorNode:j,data:S}),()=>{const C=f.get(e);C&&C.key===i&&f.delete(e)}),[f,e]);const N=m.useMemo(()=>({role:g,tabIndex:y,"aria-disabled":r,"aria-pressed":b&&g===hN?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,g,y,b,x,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:N,isDragging:b,listeners:r?void 0:O,node:w,over:p,setNodeRef:E,setActivatorNodeRef:P,transform:_}}function DI(){return m.useContext(II)}const NW="Droppable",EW={timeout:25};function OI(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=td(NW),{active:a,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(nd),h=m.useRef({disabled:n}),f=m.useRef(!1),p=m.useRef(null),g=m.useRef(null),{disabled:x,updateMeasurementsFor:y,timeout:b}={...EW,...s},_=yu(y??r),w=m.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(_.current)?_.current:[_.current]),g.current=null},b)},[b]),E=cp({callback:w,disabled:x||!a}),j=m.useCallback((N,C)=>{E&&(C&&(E.unobserve(C),f.current=!1),N&&E.observe(N))},[E]),[P,O]=Pf(j),S=yu(e);return m.useEffect(()=>{!E||!P.current||(E.disconnect(),f.current=!1,E.observe(P.current))},[P,E]),m.useEffect(()=>(l({type:kt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:P,rect:p,data:S}}),()=>l({type:kt.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==h.current.disabled&&(l({type:kt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:a,rect:p,isOver:(c==null?void 0:c.id)===r,node:P,over:c,setNodeRef:O}}function TW(t){let{animation:e,children:n}=t;const[r,s]=m.useState(null),[i,a]=m.useState(null),l=Df(n);return!n&&!r&&l&&s(l),Or(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Te.createElement(Te.Fragment,null,n,r?m.cloneElement(r,{ref:a}):null)}const CW={x:0,y:0,scaleX:1,scaleY:1};function jW(t){let{children:e}=t;return Te.createElement(nd.Provider,{value:AI},Te.createElement(up.Provider,{value:CW},e))}const kW={position:"fixed",touchAction:"none"},AW=t=>ip(t)?"transform 250ms ease":void 0,IW=m.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:a,rect:l,style:c,transform:u,transition:h=AW}=t;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},p={...kW,width:l.width,height:l.height,top:l.top,left:l.left,transform:Ls.Transform.toString(f),transformOrigin:s&&r?EB(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Te.createElement(n,{className:a,style:p,ref:e},i)}),RW=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:a}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return a!=null&&a.active&&n.node.classList.add(a.active),a!=null&&a.dragOverlay&&r.node.classList.add(a.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);a!=null&&a.active&&n.node.classList.remove(a.active)}},PW=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:Ls.Transform.toString(e)},{transform:Ls.Transform.toString(n)}]},DW={duration:250,easing:"ease",keyframes:PW,sideEffects:RW({styles:{active:{opacity:"0"}}})};function OW(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return sp((i,a)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=kI(a);if(!u)return;const{transform:h}=mn(a).getComputedStyle(a),f=vI(h);if(!f)return;const p=typeof e=="function"?e:MW(e);return TI(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:a,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function MW(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...DW,...t};return i=>{let{active:a,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-a.rect.left,y:l.rect.top-a.rect.top},f={scaleX:c.scaleX!==1?a.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?a.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...f},g=s({...u,active:a,dragOverlay:l,transform:{initial:c,final:p}}),[x]=g,y=g[g.length-1];if(JSON.stringify(x)===JSON.stringify(y))return;const b=r==null?void 0:r({active:a,dragOverlay:l,...u}),_=l.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{_.onfinish=()=>{b==null||b(),w()}})}}let fN=0;function LW(t){return m.useMemo(()=>{if(t!=null)return fN++,fN},[t])}const VW=Te.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:a,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:g,draggableNodes:x,droppableContainers:y,dragOverlay:b,over:_,measuringConfiguration:w,scrollableAncestors:E,scrollableAncestorRects:j,windowRect:P}=DI(),O=m.useContext(up),S=LW(f==null?void 0:f.id),N=RI(a,{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:g,draggingNodeRect:b.rect,over:_,overlayNodeRect:b.rect,scrollableAncestors:E,scrollableAncestorRects:j,transform:O,windowRect:P}),C=xw(p),k=OW({config:r,draggableNodes:x,droppableContainers:y,measuringConfiguration:w}),A=C?b.setRef:void 0;return Te.createElement(jW,null,Te.createElement(TW,{animation:k},f&&S?Te.createElement(IW,{key:S,id:f.id,ref:A,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:C,style:{zIndex:u,...s},transform:N},n):null))});function yw(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function FW(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Jd(t){return t!==null&&t>=0}function zW(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function UW(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const MI=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=yw(e,r,n),a=e[s],l=i[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},Zd={scaleX:1,scaleY:1},LI=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:a}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[a];return u?{x:0,y:n<a?u.top+u.height-(l.top+l.height):u.top-l.top,...Zd}:null}const c=$W(i,s,n);return s>n&&s<=a?{x:0,y:-l.height-c,...Zd}:s<n&&s>=a?{x:0,y:l.height+c,...Zd}:{x:0,y:0,...Zd}};function $W(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const VI="Sortable",FI=Te.createContext({activeIndex:-1,containerId:VI,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:MI,disabled:{draggable:!1,droppable:!1}});function zI(t){let{children:e,id:n,items:r,strategy:s=MI,disabled:i=!1}=t;const{active:a,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=DI(),f=td(VI,n),p=l.rect!==null,g=m.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),x=a!=null,y=a?g.indexOf(a.id):-1,b=u?g.indexOf(u.id):-1,_=m.useRef(g),w=!zW(g,_.current),E=b!==-1&&y===-1||w,j=UW(i);Or(()=>{w&&x&&h(g)},[w,g,x,h]),m.useEffect(()=>{_.current=g},[g]);const P=m.useMemo(()=>({activeIndex:y,containerId:f,disabled:j,disableTransforms:E,items:g,overIndex:b,useDragOverlay:p,sortedRects:FW(g,c),strategy:s}),[y,f,j.draggable,j.droppable,E,g,b,c,p,s]);return Te.createElement(FI.Provider,{value:P},e)}const BW=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return yw(n,r,s).indexOf(e)},WW=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:a,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===a?!1:n?!0:a!==s&&e===c},HW={duration:200,easing:"ease"},UI="transform",qW=Ls.Transition.toString({property:UI,duration:0,easing:"linear"}),GW={roleDescription:"sortable"};function KW(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,a]=m.useState(null),l=m.useRef(n);return Or(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=Vl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&a(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),m.useEffect(()=>{i&&a(null)},[i]),i}function $I(t){let{animateLayoutChanges:e=WW,attributes:n,disabled:r,data:s,getNewIndex:i=BW,id:a,strategy:l,resizeObserverConfig:c,transition:u=HW}=t;const{items:h,containerId:f,activeIndex:p,disabled:g,disableTransforms:x,sortedRects:y,overIndex:b,useDragOverlay:_,strategy:w}=m.useContext(FI),E=QW(r,g),j=h.indexOf(a),P=m.useMemo(()=>({sortable:{containerId:f,index:j,items:h},...s}),[f,s,j,h]),O=m.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:S,node:N,isOver:C,setNodeRef:k}=OI({id:a,data:P,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...c}}),{active:A,activatorEvent:D,activeNodeRect:R,attributes:B,setNodeRef:q,listeners:ee,isDragging:re,over:V,setActivatorNodeRef:z,transform:K}=SW({id:a,data:P,attributes:{...GW,...n},disabled:E.draggable}),U=dB(k,q),W=!!A,J=W&&!x&&Jd(p)&&Jd(b),ne=!_&&re,te=ne&&J?K:null,M=J?te??(l??w)({rects:y,activeNodeRect:R,activeIndex:p,overIndex:b,index:j}):null,Y=Jd(p)&&Jd(b)?i({id:a,items:h,activeIndex:p,overIndex:b}):j,ae=A==null?void 0:A.id,X=m.useRef({activeId:ae,items:h,newIndex:Y,containerId:f}),he=h!==X.current.items,ie=e({active:A,containerId:f,isDragging:re,isSorting:W,id:a,index:j,items:h,newIndex:X.current.newIndex,previousItems:X.current.items,previousContainerId:X.current.containerId,transition:u,wasDragging:X.current.activeId!=null}),ge=KW({disabled:!ie,index:j,node:N,rect:S});return m.useEffect(()=>{W&&X.current.newIndex!==Y&&(X.current.newIndex=Y),f!==X.current.containerId&&(X.current.containerId=f),h!==X.current.items&&(X.current.items=h)},[W,Y,f,h]),m.useEffect(()=>{if(ae===X.current.activeId)return;if(ae!=null&&X.current.activeId==null){X.current.activeId=ae;return}const pt=setTimeout(()=>{X.current.activeId=ae},50);return()=>clearTimeout(pt)},[ae]),{active:A,activeIndex:p,attributes:B,data:P,rect:S,index:j,newIndex:Y,items:h,isOver:C,isSorting:W,isDragging:re,listeners:ee,node:N,overIndex:b,over:V,setNodeRef:U,setActivatorNodeRef:z,setDroppableNodeRef:k,setDraggableNodeRef:q,transform:ge??M,transition:Ee()};function Ee(){if(ge||he&&X.current.newIndex===j)return qW;if(!(ne&&!ip(D)||!u)&&(W||ie))return Ls.Transition.toString({...u,property:UI})}}function QW(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}function Ff(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const XW=[Pe.Down,Pe.Right,Pe.Up,Pe.Left],YW=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:i,over:a,scrollableAncestors:l}}=e;if(XW.includes(t.code)){if(t.preventDefault(),!n||!r)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const p=s.get(f.id);if(p)switch(t.code){case Pe.Down:r.top<p.top&&c.push(f);break;case Pe.Up:r.top>p.top&&c.push(f);break;case Pe.Left:r.left>p.left&&c.push(f);break;case Pe.Right:r.left<p.left&&c.push(f);break}});const u=CB({active:n,collisionRect:r,droppableRects:s,droppableContainers:c,pointerCoordinates:null});let h=gI(u,"id");if(h===(a==null?void 0:a.id)&&u.length>1&&(h=u[1].id),h!=null){const f=i.get(n.id),p=i.get(h),g=p?s.get(p.id):null,x=p==null?void 0:p.node.current;if(x&&g&&f&&p){const b=op(x).some((O,S)=>l[S]!==O),_=BI(f,p),w=JW(f,p),E=b||!_?{x:0,y:0}:{x:w?r.width-g.width:0,y:w?r.height-g.height:0},j={x:g.left,y:g.top};return E.x&&E.y?j:vu(j,E)}}}};function BI(t,e){return!Ff(t)||!Ff(e)?!1:t.data.current.sortable.containerId===e.data.current.sortable.containerId}function JW(t,e){return!Ff(t)||!Ff(e)||!BI(t,e)?!1:t.data.current.sortable.index<e.data.current.sortable.index}function Ue({className:t,...e}){return o.jsx("div",{className:$("animate-pulse rounded-md bg-muted",t),...e})}const Oe=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));Oe.displayName="Card";const tt=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("flex flex-col space-y-1.5 p-6",t),...e}));tt.displayName="CardHeader";const ot=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("text-2xl font-semibold leading-none tracking-tight",t),...e}));ot.displayName="CardTitle";const vn=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("text-sm text-muted-foreground",t),...e}));vn.displayName="CardDescription";const We=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("p-6 pt-0",t),...e}));We.displayName="CardContent";const vw=m.forwardRef(({className:t,...e},n)=>o.jsx("div",{ref:n,className:$("flex items-center p-6 pt-0",t),...e}));vw.displayName="CardFooter";function ZW(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],a=r.toISOString().split("T")[0];return s===i?"Today":s===a?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function eH(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function WI({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{courses:s}=cn(),{attributes:i,listeners:a,setNodeRef:l,transform:c,transition:u,isDragging:h}=$I({id:t.id}),f={transform:Ls.Transform.toString(c),transition:u},p=eH(t.dueDate),g=p!==null&&p<=1&&p>=0,x=t.systemStatus==="overdue"||p!==null&&p<0,y=s.find(_=>_.id===t.courseId),b=y==null?void 0:y.color;return o.jsx(Oe,{ref:l,style:f,className:$("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||h)&&"opacity-50 rotate-1 shadow-lg",x&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsx(Hn,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-medium truncate max-w-[180px] border-0",style:{backgroundColor:b||void 0,color:b?Qm(b):void 0},children:t.courseName}),o.jsx("div",{...i,...a,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:_=>_.stopPropagation(),children:o.jsx(zC,{className:"h-4 w-4 text-muted-foreground"})})]}),o.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(is,{className:"h-3.5 w-3.5"}),o.jsx("span",{className:$(x&&"text-destructive",g&&!x&&"text-foreground font-medium"),children:ZW(t.dueDate)}),x&&o.jsx(kn,{className:"h-3.5 w-3.5 text-destructive"}),g&&!x&&o.jsx(Vv,{className:"h-3.5 w-3.5 text-foreground"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&o.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[o.jsx(nl,{className:"h-3.5 w-3.5 text-muted-foreground"}),o.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(nl,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Submitted"})]})]}),o.jsx("div",{className:"flex items-center gap-1",children:n&&o.jsx(Eo,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}const ww=m.forwardRef(({className:t,...e},n)=>o.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));ww.displayName="Textarea";var tH="Separator",mN="horizontal",nH=["horizontal","vertical"],HI=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=mN,...s}=t,i=rH(r)?r:mN,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(xe.div,{"data-orientation":i,...l,...s,ref:e})});HI.displayName=tH;function rH(t){return nH.includes(t)}var qI=HI;const Un=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>o.jsx(qI,{ref:s,decorative:n,orientation:e,className:$("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Un.displayName=qI.displayName;var bw="Dialog",[GI,KI]=Kn(bw),[sH,Lr]=GI(bw),QI=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:a=!0}=t,l=m.useRef(null),c=m.useRef(null),[u=!1,h]=As({prop:r,defaultProp:s,onChange:i});return o.jsx(sH,{scope:e,triggerRef:l,contentRef:c,contentId:Zr(),titleId:Zr(),descriptionId:Zr(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:a,children:n})};QI.displayName=bw;var XI="DialogTrigger",YI=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(XI,n),i=Ce(e,s.triggerRef);return o.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Nw(s.open),...r,ref:i,onClick:me(t.onClick,s.onOpenToggle)})});YI.displayName=XI;var _w="DialogPortal",[iH,JI]=GI(_w,{forceMount:void 0}),ZI=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Lr(_w,e);return o.jsx(iH,{scope:e,forceMount:n,children:m.Children.map(r,a=>o.jsx(An,{present:n||i.open,children:o.jsx(bl,{asChild:!0,container:s,children:a})}))})};ZI.displayName=_w;var zf="DialogOverlay",eR=m.forwardRef((t,e)=>{const n=JI(zf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Lr(zf,t.__scopeDialog);return i.modal?o.jsx(An,{present:r||i.open,children:o.jsx(aH,{...s,ref:e})}):null});eR.displayName=zf;var oH=Do("DialogOverlay.RemoveScroll"),aH=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(zf,n);return o.jsx(Zm,{as:oH,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(xe.div,{"data-state":Nw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Wo="DialogContent",tR=m.forwardRef((t,e)=>{const n=JI(Wo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Lr(Wo,t.__scopeDialog);return o.jsx(An,{present:r||i.open,children:i.modal?o.jsx(lH,{...s,ref:e}):o.jsx(cH,{...s,ref:e})})});tR.displayName=Wo;var lH=m.forwardRef((t,e)=>{const n=Lr(Wo,t.__scopeDialog),r=m.useRef(null),s=Ce(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return iw(i)},[]),o.jsx(nR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,i=>{var a;i.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,i=>{const a=i.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&i.preventDefault()}),onFocusOutside:me(t.onFocusOutside,i=>i.preventDefault())})}),cH=m.forwardRef((t,e)=>{const n=Lr(Wo,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return o.jsx(nR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),nR=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...a}=t,l=Lr(Wo,n),c=m.useRef(null),u=Ce(e,c);return sw(),o.jsxs(o.Fragment,{children:[o.jsx(Ym,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(wl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Nw(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(dH,{titleId:l.titleId}),o.jsx(fH,{contentRef:c,descriptionId:l.descriptionId})]})]})}),Sw="DialogTitle",rR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(Sw,n);return o.jsx(xe.h2,{id:s.titleId,...r,ref:e})});rR.displayName=Sw;var sR="DialogDescription",iR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(sR,n);return o.jsx(xe.p,{id:s.descriptionId,...r,ref:e})});iR.displayName=sR;var oR="DialogClose",aR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Lr(oR,n);return o.jsx(xe.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});aR.displayName=oR;function Nw(t){return t?"open":"closed"}var lR="DialogTitleWarning",[uH,cR]=GO(lR,{contentName:Wo,titleName:Sw,docsSlug:"dialog"}),dH=({titleId:t})=>{const e=cR(lR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},hH="DialogDescriptionWarning",fH=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${cR(hH).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},uR=QI,mH=YI,dR=ZI,Ew=eR,Tw=tR,Cw=rR,jw=iR,kw=aR;const pH=uR,gH=dR,hR=m.forwardRef(({className:t,...e},n)=>o.jsx(Ew,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));hR.displayName=Ew.displayName;const xH=Ru("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),fR=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>o.jsxs(gH,{children:[o.jsx(hR,{}),o.jsxs(Tw,{ref:s,className:$(xH({side:t}),e),...r,children:[n,o.jsxs(kw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[o.jsx(Lo,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fR.displayName=Tw.displayName;const mR=({className:t,...e})=>o.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});mR.displayName="SheetHeader";const pR=m.forwardRef(({className:t,...e},n)=>o.jsx(Cw,{ref:n,className:$("text-lg font-semibold text-foreground",t),...e}));pR.displayName=Cw.displayName;const yH=m.forwardRef(({className:t,...e},n)=>o.jsx(jw,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));yH.displayName=jw.displayName;function vH(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function wH(t){return t?` at ${t}`:""}function bH({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),o.jsx("div",{className:"space-y-4",children:r.map((s,i)=>o.jsxs("div",{className:"flex items-start gap-3 relative",children:[o.jsx("div",{className:$("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&o.jsx(nl,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:$("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&o.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function _H({note:t,onUpdate:e,onDelete:n}){const[r,s]=m.useState(!1),[i,a]=m.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return o.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[o.jsxs("div",{className:"flex items-start justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&o.jsx(Mx,{className:"h-3.5 w-3.5 fill-current text-foreground"}),o.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:o.jsx(Mx,{className:$("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:o.jsx(e3,{className:"h-3.5 w-3.5"})}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:o.jsx(s3,{className:"h-3.5 w-3.5"})})]})]}),r?o.jsxs("div",{className:"space-y-2",children:[o.jsx(ww,{value:i,onChange:c=>a(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),o.jsxs(ce,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[o.jsx(Uv,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function Aw({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:a}=cn(),[l,c]=m.useState(""),[u,h]=m.useState(!1);if(!t)return null;const f=r(t.id),p=t.systemStatus==="overdue",g=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return o.jsx(pH,{open:e,onOpenChange:n,children:o.jsxs(fR,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[o.jsx(mR,{className:"space-y-4",children:o.jsx("div",{className:"flex items-start justify-between gap-4",children:o.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[o.jsx(Hn,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),o.jsx(pR,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),o.jsxs("div",{className:"mt-6 space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx(is,{className:"h-4 w-4 text-muted-foreground"}),o.jsxs("span",{className:$(p&&"text-destructive"),children:[vH(t.dueDate),wH(t.dueTime)]}),p&&o.jsx(kn,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&o.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[o.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?o.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):o.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),o.jsx(Un,{}),t.description&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Description"}),o.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),o.jsx(Un,{})]}),o.jsx(bH,{assignment:t}),o.jsx(Un,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&o.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[o.jsx(t3,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&o.jsxs("div",{className:"space-y-2",children:[o.jsx(ww,{value:l,onChange:x=>c(x.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(ce,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),o.jsxs(ce,{size:"sm",onClick:g,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[o.jsx(Uv,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?o.jsx("div",{className:"space-y-2",children:f.map(x=>o.jsx(_H,{note:x,onUpdate:(y,b)=>i(x.id,y,b),onDelete:()=>a(x.id,t.id)},x.id))}):!u&&o.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&o.jsxs(o.Fragment,{children:[o.jsx(Un,{}),o.jsxs(ce,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[o.jsx(Rx,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function Fl(){const{refreshAccessToken:t,signOut:e}=rt(),[n,r]=m.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),o.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:o.jsx(Mo,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),o.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[o.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),o.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[o.jsx(ce,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?o.jsxs(o.Fragment,{children:[o.jsx(Mo,{className:"h-4 w-4 animate-spin"}),o.jsx("span",{className:"font-medium",children:"Signing In..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(cI,{className:"h-4 w-4"}),o.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),o.jsx(ce,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),o.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:o.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[o.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function SH({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:a}=OI({id:t});return o.jsxs("div",{ref:a,className:$("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[o.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[o.jsx("h3",{className:"text-sm font-medium",children:e}),o.jsx(Hn,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),o.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:o.jsx(zI,{items:n.map(l=>l.id),strategy:LI,children:n.length>0?n.map(l=>{var c;return o.jsx(WI,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):o.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function NH(){return o.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6 opacity-40 pointer-events-none select-none filter grayscale",children:[1,2,3,4,5].map(t=>o.jsxs("div",{className:"flex flex-col min-w-[280px] w-[280px]",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[o.jsx(Ue,{className:"h-5 w-24"}),o.jsx(Ue,{className:"h-5 w-8"})]}),o.jsx("div",{className:"p-3 space-y-3",children:[1,2,3].map(e=>o.jsx(Ue,{className:"h-32 w-full"},e))})]},t))})}function EH(){var N;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:a,error:l}=cn();rt();const[c,u]=m.useState(null),[h,f]=m.useState(null);if(l&&l.toLowerCase().includes("session")&&!(i.length>0))return o.jsx(Fl,{});if(n)return o.jsx(NH,{});const p=m.useRef(null),[g,x]=m.useState(!1),y=m.useRef({x:0,left:0}),b=fI(Lf(lp,{activationConstraint:{distance:8}}),Lf(ap)),_=t(),w=h?i.find(C=>C.id===h):null,E=C=>{f(C.active.id)},j=C=>{const{active:k,over:A}=C;if(f(null),!A)return;const D=k.id,R=A.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(R)){const B=i.find(q=>q.id===D);B&&B.systemStatus!==R&&(R==="in_progress"?e(D,"in_progress"):e(D,"backlog"))}},P=C=>{C.button===2&&p.current&&(C.preventDefault(),x(!0),y.current={x:C.pageX,left:p.current.scrollLeft})},O=m.useCallback(C=>{if(!g||!p.current)return;C.preventDefault();const A=(C.pageX-y.current.x)*1.5;p.current.scrollLeft=y.current.left-A},[g]),S=m.useCallback(()=>{x(!1)},[]);return m.useEffect(()=>(g?(window.addEventListener("mousemove",O),window.addEventListener("mouseup",S)):(window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",S)),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",S)}),[g,O,S]),o.jsxs(o.Fragment,{children:[l&&l.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(kn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:C=>{C.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs(PI,{sensors:b,collisionDetection:xI,onDragStart:E,onDragEnd:j,children:[o.jsxs("div",{className:"relative h-full flex flex-col",children:[o.jsx("div",{ref:p,className:$("flex gap-4 flex-1 overflow-x-auto p-6 pb-0 select-none",g?"cursor-grabbing":"cursor-grab"),onMouseDown:P,onContextMenu:C=>C.preventDefault(),children:_.map(C=>o.jsx(SH,{id:C.id,title:C.title,assignments:C.assignments,onCardClick:u,notes:s},C.id))}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx(Ox,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]}),o.jsx(VW,{children:w&&o.jsx(WI,{assignment:w,isDragging:!0,hasNotes:(((N=s.get(w.id))==null?void 0:N.length)||0)>0})})]}),o.jsx(Aw,{assignment:c,isOpen:!!c,onClose:()=>u(null)})]})}function gR(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var TH=[" ","Enter","ArrowUp","ArrowDown"],CH=[" ","Enter"],rd="Select",[dp,hp,jH]=Rv(rd),[zl,$G]=Kn(rd,[jH,El]),fp=El(),[kH,Ji]=zl(rd),[AH,IH]=zl(rd),xR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:a,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:g,form:x}=t,y=fp(e),[b,_]=m.useState(null),[w,E]=m.useState(null),[j,P]=m.useState(!1),O=ep(u),[S=!1,N]=As({prop:r,defaultProp:s,onChange:i}),[C,k]=As({prop:a,defaultProp:l,onChange:c}),A=m.useRef(null),D=b?x||!!b.closest("form"):!0,[R,B]=m.useState(new Set),q=Array.from(R).map(ee=>ee.props.value).join(";");return o.jsx(e0,{...y,children:o.jsxs(kH,{required:g,scope:e,trigger:b,onTriggerChange:_,valueNode:w,onValueNodeChange:E,valueNodeHasChildren:j,onValueNodeHasChildrenChange:P,contentId:Zr(),value:C,onValueChange:k,open:S,onOpenChange:N,dir:O,triggerPointerDownPosRef:A,disabled:p,children:[o.jsx(dp.Provider,{scope:e,children:o.jsx(AH,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(ee=>{B(re=>new Set(re).add(ee))},[]),onNativeOptionRemove:m.useCallback(ee=>{B(re=>{const V=new Set(re);return V.delete(ee),V})},[]),children:n})}),D?o.jsxs($R,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:ee=>k(ee.target.value),disabled:p,form:x,children:[C===void 0?o.jsx("option",{value:""}):null,Array.from(R)]},q):null]})})};xR.displayName=rd;var yR="SelectTrigger",vR=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=fp(n),a=Ji(yR,n),l=a.disabled||r,c=Ce(e,a.onTriggerChange),u=hp(n),h=m.useRef("touch"),[f,p,g]=BR(y=>{const b=u().filter(E=>!E.disabled),_=b.find(E=>E.value===a.value),w=WR(b,y,_);w!==void 0&&a.onValueChange(w.value)}),x=y=>{l||(a.onOpenChange(!0),g()),y&&(a.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return o.jsx(xm,{asChild:!0,...i,children:o.jsx(xe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":UR(a.value)?"":void 0,...s,ref:c,onClick:me(s.onClick,y=>{y.currentTarget.focus(),h.current!=="mouse"&&x(y)}),onPointerDown:me(s.onPointerDown,y=>{h.current=y.pointerType;const b=y.target;b.hasPointerCapture(y.pointerId)&&b.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(x(y),y.preventDefault())}),onKeyDown:me(s.onKeyDown,y=>{const b=f.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&p(y.key),!(b&&y.key===" ")&&TH.includes(y.key)&&(x(),y.preventDefault())})})})});vR.displayName=yR;var wR="SelectValue",bR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:a="",...l}=t,c=Ji(wR,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Ce(e,c.onValueNodeChange);return _t(()=>{u(h)},[u,h]),o.jsx(xe.span,{...l,ref:f,style:{pointerEvents:"none"},children:UR(c.value)?o.jsx(o.Fragment,{children:a}):i})});bR.displayName=wR;var RH="SelectIcon",_R=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return o.jsx(xe.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});_R.displayName=RH;var PH="SelectPortal",SR=t=>o.jsx(bl,{asChild:!0,...t});SR.displayName=PH;var Ho="SelectContent",NR=m.forwardRef((t,e)=>{const n=Ji(Ho,t.__scopeSelect),[r,s]=m.useState();if(_t(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?nr.createPortal(o.jsx(ER,{scope:t.__scopeSelect,children:o.jsx(dp.Slot,{scope:t.__scopeSelect,children:o.jsx("div",{children:t.children})})}),i):null}return o.jsx(TR,{...t,ref:e})});NR.displayName=Ho;var fr=10,[ER,Zi]=zl(Ho),DH="SelectContentImpl",OH=Do("SelectContent.RemoveScroll"),TR=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:b,..._}=t,w=Ji(Ho,n),[E,j]=m.useState(null),[P,O]=m.useState(null),S=Ce(e,M=>j(M)),[N,C]=m.useState(null),[k,A]=m.useState(null),D=hp(n),[R,B]=m.useState(!1),q=m.useRef(!1);m.useEffect(()=>{if(E)return iw(E)},[E]),sw();const ee=m.useCallback(M=>{const[Y,...ae]=D().map(ie=>ie.ref.current),[X]=ae.slice(-1),he=document.activeElement;for(const ie of M)if(ie===he||(ie==null||ie.scrollIntoView({block:"nearest"}),ie===Y&&P&&(P.scrollTop=0),ie===X&&P&&(P.scrollTop=P.scrollHeight),ie==null||ie.focus(),document.activeElement!==he))return},[D,P]),re=m.useCallback(()=>ee([N,E]),[ee,N,E]);m.useEffect(()=>{R&&re()},[R,re]);const{onOpenChange:V,triggerPointerDownPosRef:z}=w;m.useEffect(()=>{if(E){let M={x:0,y:0};const Y=X=>{var he,ie;M={x:Math.abs(Math.round(X.pageX)-(((he=z.current)==null?void 0:he.x)??0)),y:Math.abs(Math.round(X.pageY)-(((ie=z.current)==null?void 0:ie.y)??0))}},ae=X=>{M.x<=10&&M.y<=10?X.preventDefault():E.contains(X.target)||V(!1),document.removeEventListener("pointermove",Y),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",Y),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Y),document.removeEventListener("pointerup",ae,{capture:!0})}}},[E,V,z]),m.useEffect(()=>{const M=()=>V(!1);return window.addEventListener("blur",M),window.addEventListener("resize",M),()=>{window.removeEventListener("blur",M),window.removeEventListener("resize",M)}},[V]);const[K,U]=BR(M=>{const Y=D().filter(he=>!he.disabled),ae=Y.find(he=>he.ref.current===document.activeElement),X=WR(Y,M,ae);X&&setTimeout(()=>X.ref.current.focus())}),W=m.useCallback((M,Y,ae)=>{const X=!q.current&&!ae;(w.value!==void 0&&w.value===Y||X)&&(C(M),X&&(q.current=!0))},[w.value]),J=m.useCallback(()=>E==null?void 0:E.focus(),[E]),ne=m.useCallback((M,Y,ae)=>{const X=!q.current&&!ae;(w.value!==void 0&&w.value===Y||X)&&A(M)},[w.value]),te=r==="popper"?wy:CR,se=te===wy?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:x,hideWhenDetached:y,avoidCollisions:b}:{};return o.jsx(ER,{scope:n,content:E,viewport:P,onViewportChange:O,itemRefCallback:W,selectedItem:N,onItemLeave:J,itemTextRefCallback:ne,focusSelectedItem:re,selectedItemText:k,position:r,isPositioned:R,searchRef:K,children:o.jsx(Zm,{as:OH,allowPinchZoom:!0,children:o.jsx(Ym,{asChild:!0,trapped:w.open,onMountAutoFocus:M=>{M.preventDefault()},onUnmountAutoFocus:me(s,M=>{var Y;(Y=w.trigger)==null||Y.focus({preventScroll:!0}),M.preventDefault()}),children:o.jsx(wl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:M=>M.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:o.jsx(te,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:M=>M.preventDefault(),..._,...se,onPlaced:()=>B(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:me(_.onKeyDown,M=>{const Y=M.ctrlKey||M.altKey||M.metaKey;if(M.key==="Tab"&&M.preventDefault(),!Y&&M.key.length===1&&U(M.key),["ArrowUp","ArrowDown","Home","End"].includes(M.key)){let X=D().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(M.key)&&(X=X.slice().reverse()),["ArrowUp","ArrowDown"].includes(M.key)){const he=M.target,ie=X.indexOf(he);X=X.slice(ie+1)}setTimeout(()=>ee(X)),M.preventDefault()}})})})})})})});TR.displayName=DH;var MH="SelectItemAlignedPosition",CR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ji(Ho,n),a=Zi(Ho,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=Ce(e,S=>h(S)),p=hp(n),g=m.useRef(!1),x=m.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:_,focusSelectedItem:w}=a,E=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&y&&b&&_){const S=i.trigger.getBoundingClientRect(),N=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),k=_.getBoundingClientRect();if(i.dir!=="rtl"){const he=k.left-N.left,ie=C.left-he,ge=S.left-ie,Ee=S.width+ge,pt=Math.max(Ee,N.width),Re=window.innerWidth-fr,Be=gy(ie,[fr,Math.max(fr,Re-pt)]);l.style.minWidth=Ee+"px",l.style.left=Be+"px"}else{const he=N.right-k.right,ie=window.innerWidth-C.right-he,ge=window.innerWidth-S.right-ie,Ee=S.width+ge,pt=Math.max(Ee,N.width),Re=window.innerWidth-fr,Be=gy(ie,[fr,Math.max(fr,Re-pt)]);l.style.minWidth=Ee+"px",l.style.right=Be+"px"}const A=p(),D=window.innerHeight-fr*2,R=y.scrollHeight,B=window.getComputedStyle(u),q=parseInt(B.borderTopWidth,10),ee=parseInt(B.paddingTop,10),re=parseInt(B.borderBottomWidth,10),V=parseInt(B.paddingBottom,10),z=q+ee+R+V+re,K=Math.min(b.offsetHeight*5,z),U=window.getComputedStyle(y),W=parseInt(U.paddingTop,10),J=parseInt(U.paddingBottom,10),ne=S.top+S.height/2-fr,te=D-ne,se=b.offsetHeight/2,M=b.offsetTop+se,Y=q+ee+M,ae=z-Y;if(Y<=ne){const he=A.length>0&&b===A[A.length-1].ref.current;l.style.bottom="0px";const ie=u.clientHeight-y.offsetTop-y.offsetHeight,ge=Math.max(te,se+(he?J:0)+ie+re),Ee=Y+ge;l.style.height=Ee+"px"}else{const he=A.length>0&&b===A[0].ref.current;l.style.top="0px";const ge=Math.max(ne,q+y.offsetTop+(he?W:0)+se)+ae;l.style.height=ge+"px",y.scrollTop=Y-ne+y.offsetTop}l.style.margin=`${fr}px 0`,l.style.minHeight=K+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,y,b,_,i.dir,r]);_t(()=>E(),[E]);const[j,P]=m.useState();_t(()=>{u&&P(window.getComputedStyle(u).zIndex)},[u]);const O=m.useCallback(S=>{S&&x.current===!0&&(E(),w==null||w(),x.current=!1)},[E,w]);return o.jsx(VH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:o.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:j},children:o.jsx(xe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});CR.displayName=MH;var LH="SelectPopperPosition",wy=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=fr,...i}=t,a=fp(n);return o.jsx(t0,{...a,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wy.displayName=LH;var[VH,Iw]=zl(Ho,{}),by="SelectViewport",jR=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Zi(by,n),a=Iw(by,n),l=Ce(e,i.onViewportChange),c=m.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),o.jsx(dp.Slot,{scope:n,children:o.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=a;if(p!=null&&p.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const x=window.innerHeight-fr*2,y=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),_=Math.max(y,b);if(_<x){const w=_+g,E=Math.min(x,w),j=w-E;f.style.height=E+"px",f.style.bottom==="0px"&&(h.scrollTop=j>0?j:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});jR.displayName=by;var kR="SelectGroup",[FH,zH]=zl(kR),UH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Zr();return o.jsx(FH,{scope:n,id:s,children:o.jsx(xe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});UH.displayName=kR;var AR="SelectLabel",IR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=zH(AR,n);return o.jsx(xe.div,{id:s.id,...r,ref:e})});IR.displayName=AR;var Uf="SelectItem",[$H,RR]=zl(Uf),PR=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...a}=t,l=Ji(Uf,n),c=Zi(Uf,n),u=l.value===r,[h,f]=m.useState(i??""),[p,g]=m.useState(!1),x=Ce(e,w=>{var E;return(E=c.itemRefCallback)==null?void 0:E.call(c,w,r,s)}),y=Zr(),b=m.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx($H,{scope:n,value:r,disabled:s,textId:y,isSelected:u,onItemTextChange:m.useCallback(w=>{f(E=>E||((w==null?void 0:w.textContent)??"").trim())},[]),children:o.jsx(dp.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:o.jsx(xe.div,{role:"option","aria-labelledby":y,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:x,onFocus:me(a.onFocus,()=>g(!0)),onBlur:me(a.onBlur,()=>g(!1)),onClick:me(a.onClick,()=>{b.current!=="mouse"&&_()}),onPointerUp:me(a.onPointerUp,()=>{b.current==="mouse"&&_()}),onPointerDown:me(a.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:me(a.onPointerMove,w=>{var E;b.current=w.pointerType,s?(E=c.onItemLeave)==null||E.call(c):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(a.onPointerLeave,w=>{var E;w.currentTarget===document.activeElement&&((E=c.onItemLeave)==null||E.call(c))}),onKeyDown:me(a.onKeyDown,w=>{var j;((j=c.searchRef)==null?void 0:j.current)!==""&&w.key===" "||(CH.includes(w.key)&&_(),w.key===" "&&w.preventDefault())})})})})});PR.displayName=Uf;var xc="SelectItemText",DR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,a=Ji(xc,n),l=Zi(xc,n),c=RR(xc,n),u=IH(xc,n),[h,f]=m.useState(null),p=Ce(e,_=>f(_),c.onItemTextChange,_=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,_,c.value,c.disabled)}),g=h==null?void 0:h.textContent,x=m.useMemo(()=>o.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=u;return _t(()=>(y(x),()=>b(x)),[y,b,x]),o.jsxs(o.Fragment,{children:[o.jsx(xe.span,{id:c.textId,...i,ref:p}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?nr.createPortal(i.children,a.valueNode):null]})});DR.displayName=xc;var OR="SelectItemIndicator",MR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return RR(OR,n).isSelected?o.jsx(xe.span,{"aria-hidden":!0,...r,ref:e}):null});MR.displayName=OR;var _y="SelectScrollUpButton",LR=m.forwardRef((t,e)=>{const n=Zi(_y,t.__scopeSelect),r=Iw(_y,t.__scopeSelect),[s,i]=m.useState(!1),a=Ce(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(FR,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});LR.displayName=_y;var Sy="SelectScrollDownButton",VR=m.forwardRef((t,e)=>{const n=Zi(Sy,t.__scopeSelect),r=Iw(Sy,t.__scopeSelect),[s,i]=m.useState(!1),a=Ce(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?o.jsx(FR,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});VR.displayName=Sy;var FR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Zi("SelectScrollButton",n),a=m.useRef(null),l=hp(n),c=m.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),_t(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(xe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:me(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:me(s.onPointerLeave,()=>{c()})})}),BH="SelectSeparator",zR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return o.jsx(xe.div,{"aria-hidden":!0,...r,ref:e})});zR.displayName=BH;var Ny="SelectArrow",WH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=fp(n),i=Ji(Ny,n),a=Zi(Ny,n);return i.open&&a.position==="popper"?o.jsx(n0,{...s,...r,ref:e}):null});WH.displayName=Ny;function UR(t){return t===""||t===void 0}var $R=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=Ce(e,s),a=gR(n);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[a,n]),o.jsx(Iu,{asChild:!0,children:o.jsx("select",{...r,ref:i,defaultValue:n})})});$R.displayName="BubbleSelect";function BR(t){const e=mt(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(a=>{const l=n.current+a;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function WR(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let a=HH(t,Math.max(i,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function HH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var qH=xR,HR=vR,GH=bR,KH=_R,QH=SR,qR=NR,XH=jR,GR=IR,KR=PR,YH=DR,JH=MR,QR=LR,XR=VR,YR=zR;const $f=qH,Bf=GH,bu=m.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(HR,{ref:r,className:$("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,o.jsx(KH,{asChild:!0,children:o.jsx(FC,{className:"h-4 w-4 opacity-50"})})]}));bu.displayName=HR.displayName;const JR=m.forwardRef(({className:t,...e},n)=>o.jsx(QR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(BM,{className:"h-4 w-4"})}));JR.displayName=QR.displayName;const ZR=m.forwardRef(({className:t,...e},n)=>o.jsx(XR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:o.jsx(FC,{className:"h-4 w-4"})}));ZR.displayName=XR.displayName;const _u=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>o.jsx(QH,{children:o.jsxs(qR,{ref:s,className:$("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[o.jsx(JR,{}),o.jsx(XH,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(ZR,{})]})}));_u.displayName=qR.displayName;const ZH=m.forwardRef(({className:t,...e},n)=>o.jsx(GR,{ref:n,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));ZH.displayName=GR.displayName;const jt=m.forwardRef(({className:t,children:e,...n},r)=>o.jsxs(KR,{ref:r,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(JH,{children:o.jsx(Ac,{className:"h-4 w-4"})})}),o.jsx(YH,{children:e})]}));jt.displayName=KR.displayName;const eq=m.forwardRef(({className:t,...e},n)=>o.jsx(YR,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));eq.displayName=YR.displayName;function tq(t){return hw({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function nq(){return o.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Ue,{className:"h-10 w-40"}),o.jsx(Ue,{className:"h-10 w-40"})]}),[1,2,3].map(t=>o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ue,{className:"h-6 w-32"}),o.jsx("div",{className:"space-y-2",children:[1,2].map(e=>o.jsx(Ue,{className:"h-16 w-full"},e))})]},t))]})}const eh={backlog:{label:"Backlog",color:"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300",border:"border-slate-200 dark:border-slate-700",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700 dark:bg-blue-900/40 dark:text-blue-200",border:"border-blue-100 dark:border-blue-800",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700 dark:bg-purple-900/40 dark:text-purple-200",border:"border-purple-100 dark:border-purple-800",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-200",border:"border-emerald-100 dark:border-emerald-800",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700 dark:bg-red-900/40 dark:text-red-200",border:"border-red-100 dark:border-red-800",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},rq=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},sq=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},Pg=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,pN=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function iq(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=cn();rt();const[a,l]=m.useState(null),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,g]=m.useState("timeline"),[x,y]=m.useState(1),[b,_]=m.useState(!1),[w]=m.useState([]);if(n)return o.jsx(nq,{});const E=m.useMemo(()=>{let C=[...s,...w];return a&&(C=C.filter(k=>k.courseId===a)),c&&(C=C.filter(k=>k.systemStatus===c)),C},[s,w,a,c]),j=()=>{l(null),u(null)},P=a||c,O=()=>{const C=m.useRef(null),[k,A]=m.useState(!1),D=m.useRef({x:0,left:0}),B=60*x,{earliestDate:q,latestDate:ee,initialScrollPosition:re}=m.useMemo(()=>{const M=new Date;M.setHours(0,0,0,0);let Y=new Date,ae=new Date;if(E.length>0){const Re=E.flatMap(Be=>{const Ft=[];return Be.dueDate&&Ft.push(new Date(Be.dueDate)),Be.createdAt&&Ft.push(new Date(Be.createdAt)),Ft});Re.length>0&&(Y=new Date(Math.min(...Re.map(Be=>Be.getTime()))),ae=new Date(Math.max(...Re.map(Be=>Be.getTime()))))}const X=new Date(Y);X.setDate(X.getDate()-30);const he=new Date(ae);he.setDate(he.getDate()+30);let ie=M;const ge=E.filter(Re=>Re.dueDate&&new Date(Re.dueDate)>=M).sort((Re,Be)=>new Date(Re.dueDate).getTime()-new Date(Be.dueDate).getTime());ge.length>0&&(ie=new Date(ge[0].dueDate));const pt=Math.ceil((ie.getTime()-X.getTime())/(1e3*3600*24))*B+B/2-window.innerWidth/2;return{earliestDate:X,latestDate:he,initialScrollPosition:Math.max(0,pt)}},[E,B]),V=m.useMemo(()=>rq(q,ee),[q,ee]);m.useEffect(()=>{C.current&&(C.current.scrollLeft=re)},[re]);const z=M=>{M.button===2&&C.current&&(M.preventDefault(),A(!0),D.current={x:M.pageX,left:C.current.scrollLeft})},K=m.useCallback(M=>{if(!k||!C.current)return;M.preventDefault();const ae=(M.pageX-D.current.x)*1.5;C.current.scrollLeft=D.current.left-ae},[k]),U=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(k?(window.addEventListener("mousemove",K),window.addEventListener("mouseup",U)):(window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",U)),()=>{window.removeEventListener("mousemove",K),window.removeEventListener("mouseup",U)}),[k,K,U]);const[W,J]=m.useState(!1),[ne,te]=m.useState(!1),se=m.useRef(null);return m.useEffect(()=>{const M=()=>{if(se.current){const{scrollHeight:ae,clientHeight:X,scrollTop:he}=se.current;J(ae>X),te(he+X>=ae-10)}};M();const Y=se.current;return Y==null||Y.addEventListener("scroll",M),window.addEventListener("resize",M),()=>{Y==null||Y.removeEventListener("scroll",M),window.removeEventListener("resize",M)}},[E,b]),o.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[o.jsx("div",{ref:M=>{C.current=M,se.current=M},className:$("flex-1 overflow-auto relative select-none",k?"cursor-grabbing":"cursor-default"),onMouseDown:z,onContextMenu:M=>M.preventDefault(),children:o.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${V.length*B}px`},children:[o.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:V.map((M,Y)=>{const ae=pN(M);return o.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:B},children:[o.jsx("span",{className:$("text-[10px] uppercase font-bold tracking-wider mb-1",ae?"text-foreground":"text-muted-foreground"),children:M.toLocaleDateString("en-US",{weekday:"narrow"})}),o.jsx("span",{className:$("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",ae?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:M.getDate()}),o.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},Y)})}),o.jsxs("div",{className:"relative pt-6",style:{minHeight:b?`${Math.max(300,E.filter(M=>M.dueDate).length*40)}px`:`${Math.max(400,E.filter(M=>M.dueDate).length*60)}px`},children:[o.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:V.map((M,Y)=>{const ae=pN(M);return o.jsx("div",{className:$("flex-shrink-0 h-full border-r border-border relative",ae?"bg-accent/50":""),style:{width:B},children:ae&&o.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},Y)})}),o.jsx("div",{className:$("px-0 relative z-10 mt-2",b?"space-y-1":"space-y-3"),children:E.filter(M=>M.dueDate).map(M=>{const Y=e.find(Us=>Us.id===M.courseId),ae=Y==null?void 0:Y.color,X=M.systemStatus==="submitted"||M.systemStatus==="graded",he=M.createdAt?new Date(M.createdAt):new Date,ie=new Date(M.dueDate),ge=(he.getTime()-q.getTime())/(1e3*3600*24),Ee=(ie.getTime()-he.getTime())/(1e3*3600*24),pt=Math.max(0,ge*B),Re=Math.max(B,Ee*B),Be={left:`${pt}px`,width:`${Re}px`,minWidth:b?"100px":"140px",backgroundColor:X?void 0:ae,borderColor:X?void 0:ae?"rgba(0,0,0,0.1)":void 0,color:X?void 0:ae?Qm(ae):void 0};eh[M.systemStatus]||eh.backlog;const Ft="bg-green-100/80 border-green-300 text-green-800",qe="bg-card border shadow-sm",Ke=b?"h-8":"h-12",lr=b?"h-9":"h-14";return o.jsx("div",{className:$("relative group",lr),children:o.jsxs("div",{onClick:()=>f(M),className:$("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",Ke,b?"px-2":"px-3",X?Ft:qe),style:Be,children:[o.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:o.jsxs("span",{className:$("truncate font-bold leading-none flex items-center gap-1",b?"text-[10px]":"text-xs"),children:[M.courseId==="system"&&o.jsx(Fv,{className:$("inline-block",b?"h-2.5 w-2.5":"h-3 w-3")}),X&&o.jsx(Ac,{className:$("inline-block mr-0.5",b?"h-2.5 w-2.5":"h-3 w-3")}),M.title]})}),!b&&o.jsx("div",{className:"flex items-center justify-between opacity-80",children:o.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:M.courseName})})]})},M.id)})})]})]})}),W&&!ne&&E.length>0&&o.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[o.jsx(q1,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),o.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),o.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[o.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const M=C.current,Y=(M==null?void 0:M.scrollLeft)||0,ae=(M==null?void 0:M.scrollTop)||0,X=Math.min(2,x+.25);y(X),X>.75&&_(!1),setTimeout(()=>{M&&(M.scrollLeft=Y*(X/x),M.scrollTop=ae)},0)},disabled:x>=2,title:"Zoom In (Normal View)",children:o.jsx(o3,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),o.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),o.jsx(ce,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const M=C.current,Y=(M==null?void 0:M.scrollLeft)||0,ae=(M==null?void 0:M.scrollTop)||0,X=Math.max(.5,x-.25);y(X),X<=.75&&_(!0),setTimeout(()=>{M&&(M.scrollLeft=Y*(X/x),M.scrollTop=ae)},0)},disabled:x<=.5,title:"Zoom Out (Compact View)",children:o.jsx(a3,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),o.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[o.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(x*100),"%"]}),b&&o.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),o.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[o.jsx(Ox,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},S=()=>{const C=m.useRef(null),[k,A]=m.useState(!1),D=m.useRef({y:0,top:0}),R=m.useRef({}),[B,q]=m.useState(!1),{startMonth:ee,endMonth:re}=m.useMemo(()=>{let te=new Date,se=new Date;if(E.length>0){const ae=E.filter(X=>X.dueDate).map(X=>new Date(X.dueDate));ae.length>0&&(te=new Date(Math.min(...ae.map(X=>X.getTime()))),se=new Date(Math.max(...ae.map(X=>X.getTime()))))}const M=new Date(te);M.setMonth(M.getMonth()-2),M.setDate(1);const Y=new Date(se);return Y.setMonth(Y.getMonth()+4),Y.setDate(1),{startMonth:M,endMonth:Y}},[E]),V=m.useMemo(()=>sq(ee,re),[ee,re]),z=m.useCallback(()=>{var ae;const te=Pg(new Date),se=R.current[te];if(!se){q(!0);return}const M=se.getBoundingClientRect(),Y=(ae=C.current)==null?void 0:ae.getBoundingClientRect();Y&&q(M.bottom<Y.top||M.top>Y.bottom)},[V]);m.useEffect(()=>{const te=C.current;return te&&(te.addEventListener("scroll",z),z()),()=>te==null?void 0:te.removeEventListener("scroll",z)},[z]),m.useEffect(()=>{setTimeout(()=>K(),100)},[]);const K=()=>{const te=Pg(new Date),se=R.current[te];se&&se.scrollIntoView({behavior:"smooth",block:"center"})},U=te=>{te.button===2&&C.current&&(te.preventDefault(),A(!0),D.current={y:te.pageY,top:C.current.scrollTop})},W=m.useCallback(te=>{if(!k||!C.current)return;te.preventDefault();const M=(te.pageY-D.current.y)*1.5;C.current.scrollTop=D.current.top-M},[k]),J=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(k?(window.addEventListener("mousemove",W),window.addEventListener("mouseup",J)):(window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",J)),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",J)}),[k,W,J]);const ne=te=>{const se=te.getFullYear(),M=te.getMonth(),Y=new Date(se,M,1),ae=new Date(se,M+1,0),X=[];for(let he=0;he<Y.getDay();he++)X.push({date:new Date(se,M,-Y.getDay()+1+he),isCurrentMonth:!1});for(let he=1;he<=ae.getDate();he++)X.push({date:new Date(se,M,he),isCurrentMonth:!0});for(;X.length%7!==0;){const he=X.length-(Y.getDay()+ae.getDate())+1,ie=new Date(se,M+1,he);X.push({date:ie,isCurrentMonth:!1})}return X};return o.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[B&&o.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:o.jsxs("button",{onClick:K,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[o.jsx(q1,{size:14})," Jump to Today"]})}),o.jsx("div",{ref:C,className:$("flex-1 overflow-y-auto",k?"cursor-grabbing":"cursor-default"),onMouseDown:U,onContextMenu:te=>te.preventDefault(),children:o.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:V.map(te=>{const se=ne(te),M=Pg(te);return o.jsxs("div",{ref:Y=>R.current[M]=Y,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[o.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:o.jsx("h3",{className:"text-lg font-bold",children:te.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),o.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(Y=>o.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:Y},Y))}),o.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:se.map((Y,ae)=>{const X=E.filter(ie=>{if(!ie.dueDate)return!1;const ge=new Date(ie.dueDate);ge.setHours(0,0,0,0);const Ee=new Date(Y.date);return Ee.setHours(0,0,0,0),Ee.toDateString()===ge.toDateString()}),he=Y.date.toDateString()===new Date().toDateString();return o.jsxs("div",{className:$("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",Y.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[o.jsx("span",{className:$("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",he&&Y.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:Y.date.getDate()}),o.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:X.map(ie=>{const ge=e.find(Ft=>Ft.id===ie.courseId),Ee=ge==null?void 0:ge.color,Re=!["submitted","graded"].includes(ie.systemStatus)&&Ee,Be=eh[ie.systemStatus]||eh.backlog;return o.jsx("div",{onClick:Ft=>{Ft.stopPropagation(),f(ie)},className:$("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",!Re&&Be.color,!Re&&Be.border,Re&&"text-slate-900 border-transparent/20"),style:Re?{backgroundColor:Ee}:void 0,title:ie.title,children:ie.title},ie.id)})})]},ae)})})]},M)})})}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[o.jsx(Ox,{size:14,className:"mr-2"}),"Tip: Hold"," ",o.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};if(cn().error&&cn().error.toLowerCase().includes("session")){const{assignments:C,courses:k}=cn();if(!C.length&&!k.length)return o.jsx(Fl,{})}const{error:N}=cn();return o.jsxs(o.Fragment,{children:[N&&N.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(kn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx(Cn,{href:"/auth/refresh",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col h-full w-full bg-background overflow-hidden relative",children:[o.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:o.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Timeline"}),o.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[o.jsxs("button",{onClick:()=>g("timeline"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="timeline"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(zM,{className:"h-3.5 w-3.5"}),"Timeline"]}),o.jsxs("button",{onClick:()=>g("calendar"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="calendar"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[o.jsx(au,{className:"h-3.5 w-3.5"}),"Calendar"]})]})]})}),o.jsxs("div",{className:"px-4 md:px-6 py-2 border-b flex items-center gap-3 bg-muted/30 shrink-0 overflow-x-auto no-scrollbar",children:[o.jsx(GM,{className:"h-4 w-4 text-muted-foreground shrink-0 hidden sm:block"}),o.jsxs($f,{value:a||"all",onValueChange:C=>l(C==="all"?null:C),children:[o.jsx(bu,{className:"w-[140px] sm:w-[240px] h-8 text-xs","data-testid":"select-course-filter",children:o.jsx(Bf,{placeholder:"All Courses"})}),o.jsxs(_u,{children:[o.jsx(jt,{value:"all",children:"All Courses"}),e.map(C=>o.jsx(jt,{value:C.id,children:C.name},C.id))]})]}),o.jsxs($f,{value:c||"all",onValueChange:C=>u(C==="all"?null:C),children:[o.jsx(bu,{className:"w-[110px] sm:w-[140px] h-8 text-xs","data-testid":"select-status-filter",children:o.jsx(Bf,{placeholder:"All Status"})}),o.jsxs(_u,{children:[o.jsx(jt,{value:"all",children:"All Status"}),o.jsx(jt,{value:"backlog",children:"Backlog"}),o.jsx(jt,{value:"in_progress",children:"In Progress"}),o.jsx(jt,{value:"submitted",children:"Submitted"}),o.jsx(jt,{value:"graded",children:"Graded"}),o.jsx(jt,{value:"overdue",children:"Overdue"})]})]}),P&&o.jsxs(ce,{variant:"ghost",size:"sm",onClick:j,className:"text-muted-foreground h-8 px-2","data-testid":"button-clear-filters",children:[o.jsx(Lo,{className:"h-3.5 w-3.5 md:mr-1"}),o.jsx("span",{className:"hidden md:inline",children:"Clear filters"})]}),o.jsx("div",{className:"ml-auto pl-2",children:o.jsx(bm,{children:o.jsxs(Mu,{children:[o.jsx(Lu,{asChild:!0,children:o.jsx(Cn,{href:"/settings/integrations",children:o.jsxs(ce,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap h-8",children:[o.jsx(tq,{className:"h-4 w-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Sync with Google Calendar"}),o.jsx("span",{className:"sm:hidden",children:"Sync"})]})})}),o.jsxs(Tl,{side:"left",className:"max-w-xs",children:[o.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),o.jsx("div",{className:"flex-1 overflow-hidden h-full",children:p==="timeline"?o.jsx(O,{}):o.jsx(S,{})})]}),o.jsx(Aw,{assignment:h,isOpen:!!h,onClose:()=>f(null)})]})}const gN="attendance_configs",er={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await Wt(He(Me,gN,t),n),_n.remove(`attn_config_${t}`)},async getCourseConfig(t){try{const e=`attn_config_${t}`,n=_n.get(e);if(n)return n;const r=He(Me,gN,t),s=await ss(r);if(s.exists()){const i=s.data();return _n.set(e,i,60*60),i}else return null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var E,j;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=`attn_data_${t}_${n}`,i=_n.get(s);if(i)return i;const a=r.toUpperCase().charCodeAt(0)-65,c=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:ZZ500?majorDimension=ROWS`,u=await fetch(c,{headers:{Authorization:`Bearer ${e}`}});if(!u.ok)throw u.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):u.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const f=(await u.json()).values;if(!f||f.length<2)throw new Error("Sheet is empty or invalid format.");const p=f[0],g=f.find(P=>{var S;return((S=P[a])==null?void 0:S.toLowerCase().trim())===n.toLowerCase().trim()});if(!g)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let x=0,y=0;const b=[];for(let P=1;P<p.length;P++){const O=(E=p[P])==null?void 0:E.trim();if(!O)break;const S=(j=g[P])==null?void 0:j.toUpperCase().trim();let N="Unknown";S==="P"||S==="PRESENT"||S==="1"?(N="Present",y++,x++):(S==="A"||S==="ABSENT"||S==="0")&&(N="Absent",x++),N!=="Unknown"&&b.push({date:O,status:N})}const _=x===0?0:Math.round(y/x*100),w={courseId:t,stats:{totalClasses:x,attendedClasses:y,percentage:_},history:b.reverse()};return _n.set(s,w,60*30),w}},Ii={"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:Bv,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:qC,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:Mx,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:au,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:Lv,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},eP=Object.keys(Ii),tP=Object.freeze(Object.defineProperty({__proto__:null,BADGES:Ii,BADGE_IDS:eP},Symbol.toStringTag,{value:"Module"}));function oq({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=Ii[t],[i,a]=m.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return o.jsx(bm,{delayDuration:0,children:o.jsxs(Mu,{open:i,onOpenChange:a,children:[o.jsx(Lu,{asChild:!0,children:o.jsxs("div",{className:$("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),a(!i)},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[s.imageSrc?o.jsx("img",{src:s.imageSrc,alt:s.label,className:$(u[e],"object-contain")}):o.jsx(l,{className:$(u[e]),strokeWidth:2.5}),r&&o.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),o.jsx(Dj,{children:o.jsxs(Tl,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>a(!1),children:[o.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function yc({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],a=i.length;return o.jsxs("div",{className:$("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>o.jsx(oq,{badgeId:l,size:n},l)),a>0&&o.jsx(bm,{delayDuration:0,children:o.jsxs(Mu,{children:[o.jsx(Lu,{asChild:!0,children:o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",a]})}),o.jsx(Dj,{children:o.jsx(Tl,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),o.jsx("span",{className:"text-xs font-medium",children:((c=Ii[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function aq(){const{user:t}=rt(),[e,n]=m.useState([]),[r,s]=m.useState(0),[i,a]=m.useState(0),[l,c]=m.useState(!0);m.useEffect(()=>{if(!t)return;const f=kr(He(Me,"leaderboards","all-courses","students",t.uid),p=>{var g;if(p.exists()){const x=p.data();n(x.badges||[]),s(x.loginStreak||0),a(((g=x.processedAssignmentIds)==null?void 0:g.length)||0)}c(!1)});return()=>f()},[t]);const u=()=>{const f=[];return f.push({badge:Ii["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),f.push({badge:Ii["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),f.push({badge:Ii["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),f.reduce((p,g)=>g.percentage>p.percentage?g:p)},h=e.length===0?u():null;return o.jsxs(Oe,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[o.jsxs(tt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(ot,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),o.jsx(WC,{className:"h-5 w-5 text-purple-500"})]}),o.jsx(We,{className:"flex-1 flex flex-col",children:l?o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{className:"h-8 w-8 rounded-full"}),o.jsx(Ue,{className:"h-3 w-20"})]}):e.length>0?o.jsxs("div",{className:"flex flex-col justify-between h-full gap-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,o.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),o.jsx(yc,{badges:e,limit:3,size:"md",className:"mt-2"})]}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Cn,{href:"/settings?tab=badges",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):h?o.jsxs("div",{className:"flex flex-col gap-3 justify-between h-full",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[h.badge.imageSrc?o.jsx("img",{src:h.badge.imageSrc,alt:h.badge.label,className:"h-5 w-5 object-contain"}):h.type==="submission"?o.jsx(Bv,{className:"h-5 w-5 text-blue-500"}):o.jsx(au,{className:"h-5 w-5 text-emerald-500"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),o.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Cn,{href:"/settings?tab=badges",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):o.jsxs("div",{className:"flex flex-col gap-2 justify-between h-full",children:[o.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."}),o.jsx("div",{className:"pt-2 mt-auto",children:o.jsx(Cn,{href:"/settings?tab=badges",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]})})]})}function lq(){return o.jsxs(Oe,{className:"overflow-hidden",children:[o.jsx(tt,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(Ue,{className:"h-4 w-24"}),o.jsx(Ue,{className:"h-8 w-8 rounded-lg"})]})}),o.jsx(We,{className:"pt-2",children:o.jsx(Ue,{className:"h-9 w-16"})})]})}function cq(){return o.jsxs("div",{className:"flex items-center space-x-4 py-3",children:[o.jsx(Ue,{className:"h-12 w-12 rounded-full"}),o.jsxs("div",{className:"space-y-2 max-w-[200px] w-full",children:[o.jsx(Ue,{className:"h-4 w-[200px]"}),o.jsx(Ue,{className:"h-4 w-[150px]"})]})]})}function uq({courses:t,assignments:e}){const{user:n}=rt(),[r,s]=m.useState(null),[i,a]=m.useState(!0);return m.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(f=>f.id)])),c=[],u=new Map,h=()=>{const f=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,g=t.map(w=>w.id),x=new Set(e.map(w=>w.id)),y=f.filter(w=>{const E=w.email||"",j=w.emailDomain||(E.includes("@")?E.split("@")[1]:""),P=w.enrolledCourseIds||[],O=w.processedAssignmentIds||[],S=p&&j&&p===j,N=g.some(A=>P.includes(A)),k=!j&&O.some(A=>x.has(A));return w.id===n.uid?!0:S&&N||k});y.sort((w,E)=>E.totalXP-w.totalXP);const b=y.length;if(b===0){s(null),a(!1);return}const _=y.findIndex(w=>w.id===n.uid);if(_!==-1){const w=_+1,E=Math.round((b-w+1)/b*100),j=y[_];s({rank:w,total:b,percentile:E,xp:j.totalXP||0,badges:j.badges||[]})}else s(null);a(!1)};return l.forEach(f=>{const p=jo(Wi(Me,"leaderboards",f,"students"),Oa("totalXP","desc")),g=kr(p,x=>{x.docs.forEach(y=>{const b=y.data(),_={id:y.id,...b,email:b.email||"",emailDomain:b.emailDomain||(b.email?b.email.split("@")[1]:""),enrolledCourseIds:b.enrolledCourseIds||b.subjects||[],processedAssignmentIds:b.processedAssignmentIds||b.completedTasks||[],totalXP:b.totalXP||b.xp||0,badges:b.badges||[]},w=u.get(y.id);(!w||_.totalXP>=w.totalXP)&&u.set(y.id,_)}),h()},x=>{console.error(`Error fetching leaderboard source ${f}:`,x),h()});c.push(g)}),()=>{c.forEach(f=>f())}},[n,t,e]),o.jsxs(Oe,{"data-testid":"card-class-rank",className:"flex flex-col h-full border-zinc-200 dark:border-zinc-800 shadow-sm transition-all duration-300 hover:shadow-md hover:-translate-y-0.5 group",children:[o.jsxs(tt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[o.jsx(ot,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),o.jsx("div",{className:"p-1.5 rounded-md bg-amber-50 dark:bg-amber-900/20 text-amber-500 shadow-sm group-hover:scale-110 transition-transform",children:o.jsx(ja,{className:"h-4 w-4"})})]}),o.jsx(We,{className:"flex-1 flex flex-col justify-between pt-0 relative",children:i?o.jsxs("div",{className:"space-y-3 mt-2",children:[o.jsx(Ue,{className:"h-8 w-16"}),o.jsx(Ue,{className:"h-3 w-24"})]}):r?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mt-2",children:[o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsxs("span",{className:"text-3xl font-bold tracking-tight text-foreground",children:["#",r.rank]}),o.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["/ ",r.total]})]}),o.jsx("div",{className:"mt-2 space-y-1",children:o.jsx("div",{className:"w-full h-1.5 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-amber-400 to-orange-500 rounded-full",style:{width:`${r.percentile}%`}})})}),o.jsxs("div",{className:"mt-2 flex flex-col gap-0.5",children:[o.jsxs("p",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium uppercase tracking-wide",children:[r.xp.toLocaleString()," Total XP"]})]})]}),o.jsx("div",{className:"pt-4 mt-auto",children:o.jsx(Cn,{href:"/leaderboard",children:o.jsxs(ce,{variant:"outline",size:"sm",className:"h-8 text-xs w-full border-zinc-200 dark:border-zinc-800 hover:bg-zinc-50 dark:hover:bg-zinc-800 text-muted-foreground hover:text-foreground",children:["View Leaderboard",o.jsx(Mv,{className:"ml-1.5 h-3 w-3"})]})})})]}):o.jsxs("div",{className:"flex flex-col gap-2 justify-between flex-1 mt-2",children:[o.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),o.jsx(Cn,{href:"/leaderboard",className:"mt-auto",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-8 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function dq({courses:t}){const{user:e,accessToken:n}=rt(),[r,s]=m.useState(null),[i,a]=m.useState(!0);return m.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){a(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async f=>{try{const p=await er.getCourseConfig(f.id);if(!p||!p.isVisible||!p.sheetUrl)return;const g=er.extractSheetId(p.sheetUrl);if(!g)return;const x=await er.fetchAttendanceFromSheet(g,n,e.email,p.emailColumn||"A");x&&(c+=x.stats.attendedClasses,u+=x.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const f=Math.round(c/u*100);let p="safe";f<70?p="danger":f<75&&(p="warning"),s({percentage:f,status:p,present:c,total:u})}a(!1)}l()},[t,e,n]),o.jsxs(Oe,{"data-testid":"card-attendance-overall",className:"flex flex-col h-full border-emerald-100 dark:border-emerald-900/30 overflow-hidden relative group",children:[o.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:opacity-10 transition-opacity",children:o.jsx(Lx,{className:"w-24 h-24 text-emerald-500"})}),o.jsxs(tt,{className:"flex flex-row items-center justify-between gap-2 pb-2 relative z-10",children:[o.jsx(ot,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),o.jsx("div",{className:"p-1.5 rounded-md bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400",children:o.jsx(Lx,{className:"h-4 w-4"})})]}),o.jsx(We,{className:"relative z-10 flex-1 flex flex-col justify-end",children:i?o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ue,{className:"h-8 w-16"}),o.jsx(Ue,{className:"h-3 w-24"})]}):r?o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:$("text-4xl font-bold tracking-tight",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:r.percentage}),o.jsx("span",{className:"text-xl font-medium text-muted-foreground",children:"%"})]}),o.jsxs("div",{className:"mt-2 space-y-1",children:[o.jsx("div",{className:"w-full h-1.5 bg-secondary rounded-full overflow-hidden",children:o.jsx("div",{className:$("h-full rounded-full transition-all duration-1000 ease-out",r.status==="danger"?"bg-red-500":r.status==="warning"?"bg-amber-500":"bg-emerald-500"),style:{width:`${r.percentage}%`}})}),o.jsxs("div",{className:"flex justify-between items-center text-xs text-muted-foreground pt-1",children:[o.jsxs("span",{children:[r.present,"/",r.total," Classes"]}),o.jsx("span",{className:$("font-bold uppercase text-[10px]",r.status==="safe"?"text-emerald-600 dark:text-emerald-400":r.status==="warning"?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"),children:r.status==="safe"?"On Track":"Low"})]})]})]}):o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Data Yet"}),o.jsx("p",{className:"text-[10px] text-muted-foreground/70 leading-snug",children:"Ask your teacher to use Trace for attendance."})]}),o.jsx(Cn,{href:"/attendance",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-8 text-xs w-full bg-transparent border-dashed hover:border-solid hover:bg-emerald-50 dark:hover:bg-emerald-900/20 hover:text-emerald-600 hover:border-emerald-200 transition-all",children:"Check Details"})})]})})]})}function hq(){return o.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>o.jsx(lq,{},t))}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"md:col-span-2 space-y-6",children:[o.jsx(Ue,{className:"h-[300px] w-full rounded-xl"}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(Ue,{className:"h-8 w-40"}),[1,2,3].map(t=>o.jsx(cq,{},t))]})]}),o.jsx("div",{className:"space-y-6",children:o.jsx(Ue,{className:"h-[400px] w-full rounded-xl"})})]})]})}function th({title:t,value:e,icon:n,variant:r="default"}){const i={default:{bg:"bg-white dark:bg-zinc-950",iconBg:"bg-zinc-100 dark:bg-zinc-800",iconColor:"text-zinc-600 dark:text-zinc-400",valueColor:"text-zinc-900 dark:text-zinc-50",border:"border-zinc-200 dark:border-zinc-800",ring:"group-hover:ring-zinc-200 dark:group-hover:ring-zinc-800"},warning:{bg:"bg-amber-50/30 dark:bg-amber-950/10",iconBg:"bg-amber-100 dark:bg-amber-900/30",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-400",border:"border-amber-200/60 dark:border-amber-800/60",ring:"group-hover:ring-amber-200 dark:group-hover:ring-amber-800/50"},danger:{bg:"bg-red-50/30 dark:bg-red-950/10",iconBg:"bg-red-100 dark:bg-red-900/30",iconColor:"text-red-600 dark:text-red-400",valueColor:"text-red-700 dark:text-red-400",border:"border-red-200/60 dark:border-red-800/60",ring:"group-hover:ring-red-200 dark:group-hover:ring-red-800/50"}}[r];return o.jsxs(Oe,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:$("group overflow-hidden transition-all duration-300 hover:shadow-md hover:-translate-y-0.5",i.bg,i.border,"hover:ring-1",i.ring),children:[o.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-1 p-3",children:[o.jsx(ot,{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:t}),o.jsx("div",{className:$("p-1.5 rounded-lg transition-all duration-300 group-hover:scale-110",i.iconBg),children:o.jsx(n,{className:$("h-3.5 w-3.5",i.iconColor)})})]}),o.jsx(We,{className:"p-3 pt-0",children:o.jsx("div",{className:"flex items-baseline gap-2",children:o.jsx("div",{className:$("text-2xl font-bold tracking-tight tabular-nums",i.valueColor),children:e})})})]})}function fq(t,e,n,r){if(t.length<2)return"";const s=t.map((a,l)=>{const c=l/(t.length-1)*e,u=n-a.count/r*n;return[c,u]});let i=`M ${s[0][0]},${s[0][1]}`;for(let a=0;a<s.length-1;a++){const[l,c]=a>0?s[a-1]:s[0],[u,h]=s[a],[f,p]=s[a+1],[g,x]=a<s.length-2?s[a+2]:s[s.length-1],y=u+(f-l)/6,b=h+(p-c)/6,_=f-(g-u)/6,w=p-(x-h)/6;i+=` C ${y},${b} ${_},${w} ${f},${p}`}return i}function mq({data:t}){const e=Math.max(...t.map(a=>a.count),5),n=300,r=100,s=fq(t,n,r,e),i=`${s} L ${n},${r} L 0,${r} Z`;return o.jsxs(Oe,{className:"overflow-hidden border-zinc-200 dark:border-zinc-800 shadow-sm",children:[o.jsxs(tt,{className:"pb-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ot,{className:"text-base font-semibold flex items-center gap-2",children:[o.jsx(is,{className:"h-4 w-4 text-purple-500"}),"Weekly Workload"]}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-2xl font-bold tabular-nums",children:t.reduce((a,l)=>a+l.count,0)}),o.jsx("span",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wide",children:"Assignments"})]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Your assignment distribution for the next 7 days"})]}),o.jsxs(We,{className:"pt-6 relative",children:[o.jsxs("div",{className:"h-40 w-full relative group",children:[o.jsxs("svg",{viewBox:`0 0 ${n} ${r}`,className:"w-full h-full overflow-visible",preserveAspectRatio:"none",children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:"gradientArea",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"0%",stopColor:"rgb(168 85 247)",stopOpacity:"0.3"}),o.jsx("stop",{offset:"100%",stopColor:"rgb(168 85 247)",stopOpacity:"0"})]})}),o.jsx("path",{d:i,fill:"url(#gradientArea)",className:"transition-all duration-500"}),o.jsx("path",{d:s,fill:"none",stroke:"rgb(168 85 247)",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm transition-all duration-500"})]}),o.jsx("div",{className:"absolute inset-0 flex justify-between items-end pointer-events-none",children:t.map((a,l)=>{const c=a.count/e*100;return o.jsx("div",{className:"flex flex-col items-center justify-end h-full flex-1 relative group/point",children:o.jsxs("div",{className:"absolute w-full flex justify-center transition-all duration-500",style:{bottom:`${c}%`,marginBottom:"-6px"},children:[o.jsx("div",{className:$("h-3 w-3 rounded-full border-2 border-background transition-transform duration-300 z-10",a.isToday?"bg-purple-600 scale-125 ring-4 ring-purple-500/20":"bg-purple-400 opacity-0 group-hover/point:opacity-100 group-hover/point:scale-125")}),o.jsx("div",{className:$("absolute bottom-full mb-2 bg-foreground text-background text-[10px] font-bold px-1.5 py-0.5 rounded shadow-sm opacity-0 group-hover/point:opacity-100 transition-opacity duration-200 pointer-events-auto",a.isToday&&"opacity-100 bg-purple-600 text-white"),children:a.count})]})},l)})})]}),o.jsx("div",{className:"flex justify-between mt-2 px-1",children:t.map((a,l)=>o.jsx("div",{className:"flex-1 text-center",children:o.jsx("span",{className:$("text-[10px] uppercase font-bold tracking-wider transition-colors",a.isToday?"text-purple-600":"text-muted-foreground"),children:a.day})},l))})]})]})}function pq({assignments:t,onSelectAssignment:e,courses:n}){const s=[...t].sort((a,l)=>a.systemStatus==="overdue"&&l.systemStatus!=="overdue"?-1:l.systemStatus==="overdue"&&a.systemStatus!=="overdue"||!a.dueDate?1:l.dueDate?new Date(a.dueDate).getTime()-new Date(l.dueDate).getTime():-1),i=a=>{if(a.systemStatus==="overdue")return{label:"Overdue",color:"text-red-500",bg:"bg-red-500/10",border:"border-red-200 dark:border-red-900/50"};if(a.dueDate){const l=new Date,u=(new Date(a.dueDate).getTime()-l.getTime())/(1e3*60*60);if(u<24)return{label:"Due Soon",color:"text-amber-500",bg:"bg-amber-500/10",border:"border-amber-200 dark:border-amber-900/50"};if(u<72)return{label:"Upcoming",color:"text-blue-500",bg:"bg-blue-500/10",border:"border-zinc-100 dark:border-zinc-800"}}return{label:"Backlog",color:"text-muted-foreground",bg:"bg-muted/50",border:"border-zinc-100 dark:border-zinc-800"}};return o.jsxs(Oe,{className:"flex flex-col h-full border-zinc-200 dark:border-zinc-800 shadow-sm overflow-hidden",children:[o.jsxs(tt,{className:"pb-4 border-b border-zinc-100 dark:border-zinc-800/50 bg-zinc-50/50 dark:bg-zinc-900/20",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ot,{className:"text-base font-semibold flex items-center gap-2",children:[o.jsx(kn,{className:"h-4 w-4 text-rose-500"}),"Next Actions"]}),o.jsxs(Hn,{variant:"outline",className:"font-mono text-xs",children:[t.length," pending"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Prioritized by deadline and urgency"})]}),o.jsx(We,{className:"flex-1 overflow-y-auto p-0 scrollbar-thin scrollbar-thumb-zinc-200 dark:scrollbar-thumb-zinc-800 scrollbar-track-transparent",children:o.jsx("div",{className:"p-3 space-y-2",children:s.length>0?s.map(a=>{const l=i(a),c=a.dueDate?new Date(a.dueDate):null,u=n.find(f=>f.id===a.courseId),h=u==null?void 0:u.color;return o.jsxs("div",{onClick:()=>e(a),className:$("group flex items-center gap-3 p-3 rounded-lg border transition-all duration-200 hover:shadow-md hover:border-zinc-300 dark:hover:border-zinc-700 bg-card cursor-pointer relative overflow-hidden",l.border),children:[o.jsx("div",{className:"absolute inset-0 bg-current opacity-0 group-hover:opacity-[0.02] transition-opacity"}),o.jsx("div",{className:$("w-1 h-8 rounded-full flex-shrink-0",l.bg.replace("/10",""))}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-center gap-2 mb-1",children:[o.jsx("h4",{className:"text-sm font-medium truncate text-foreground/90 group-hover:text-primary transition-colors",children:a.title}),a.systemStatus==="overdue"&&o.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 p-1 rounded-full",children:o.jsx(kn,{className:"h-3 w-3"})})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Hn,{variant:"outline",className:"text-[10px] px-1.5 py-0 h-4 font-medium border-0",style:{backgroundColor:h||void 0,color:h?Qm(h):void 0},children:a.courseName}),c&&o.jsxs("span",{className:$("text-[10px] flex items-center gap-1 font-medium",l.color),children:[o.jsx(Vv,{className:"h-3 w-3"}),c.toLocaleDateString(void 0,{month:"short",day:"numeric"})]})]})]}),o.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity -mr-1",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",children:o.jsx(Mv,{className:"h-4 w-4"})})})]},a.id)}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-48 text-muted-foreground",children:[o.jsx("div",{className:"h-12 w-12 rounded-full bg-emerald-50 dark:bg-emerald-900/20 flex items-center justify-center mb-3",children:o.jsx(nl,{className:"h-6 w-6 text-emerald-500"})}),o.jsx("p",{className:"text-sm font-medium text-foreground",children:"All caught up!"}),o.jsx("p",{className:"text-xs text-muted-foreground text-center max-w-[180px]",children:"No pending actions for now. Great job staying on top of things."})]})})})]})}function gq({id:t,children:e}){const{attributes:n,listeners:r,setNodeRef:s,transform:i,transition:a,isDragging:l}=$I({id:t}),c={transform:Ls.Transform.toString(i),transition:a,opacity:l?.5:1};return o.jsxs("div",{ref:s,style:c,className:"relative group",children:[o.jsx("div",{...n,...r,className:"absolute -left-8 top-1/2 -translate-y-1/2 cursor-grab active:cursor-grabbing opacity-0 group-hover:opacity-60 hover:!opacity-100 transition-opacity z-10",children:o.jsx("div",{className:"bg-muted border border-border rounded p-1",children:o.jsx(zC,{className:"h-4 w-4 text-muted-foreground"})})}),e]})}function xq(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:a}=cn();rt();const[l,c]=m.useState(null),[u,h]=m.useState(()=>{const y=localStorage.getItem("dashboard_section_order");return y?JSON.parse(y):["metrics","features","charts"]}),f=fI(Lf(lp),Lf(ap,{coordinateGetter:YW})),p=y=>{const{active:b,over:_}=y;_&&b.id!==_.id&&h(w=>{const E=w.indexOf(b.id),j=w.indexOf(_.id),P=yw(w,E,j);return localStorage.setItem("dashboard_section_order",JSON.stringify(P)),P})};if(e)return o.jsx(hq,{});const g=t(),x=r.filter(y=>y.systemStatus!=="graded"&&y.systemStatus!=="submitted");return a&&a.toLowerCase().includes("session")&&!(r.length>0||i.length>0||g.upcoming7Days>0)?o.jsx(Fl,{}):o.jsxs(o.Fragment,{children:[a&&a.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3",children:o.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(kn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Sign in to update your assignments."})]}),o.jsx(Cn,{href:"/auth/refresh",children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),o.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 space-y-6",children:[g.upcoming7Days>0&&o.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[o.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),o.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:o.jsx(BC,{className:"h-5 w-5"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:["Weekly Focus",o.jsxs(Hn,{variant:"secondary",className:"bg-amber-200/60 dark:bg-amber-800/40 text-amber-900 dark:text-amber-100 border-0 text-xs font-bold",children:[g.upcoming7Days," ",g.upcoming7Days===1?"task":"tasks"]})]}),o.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["You have"," ",o.jsxs("span",{className:"font-bold text-amber-900 dark:text-amber-100",children:[g.upcoming7Days," assignment",g.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),o.jsx(Cn,{href:"/timeline",children:o.jsxs(ce,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:border-amber-400 dark:hover:border-amber-600 shadow-sm",children:["View Timeline",o.jsx(Mv,{className:"ml-1.5 h-3.5 w-3.5"})]})})]})]}),o.jsx(PI,{sensors:f,collisionDetection:xI,onDragEnd:p,children:o.jsx(zI,{items:u,strategy:LI,children:o.jsx("div",{className:"space-y-6",children:u.map(y=>{const b={metrics:o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[o.jsx(th,{title:"Due in 3 Days",value:g.upcoming3Days,icon:Vv,variant:g.upcoming3Days>3?"warning":"default"}),o.jsx(th,{title:"Due in 7 Days",value:g.upcoming7Days,icon:is}),o.jsx(th,{title:"Overdue",value:g.overdue,icon:kn,variant:g.overdue>0?"danger":"default"}),o.jsx(th,{title:"Total Active",value:g.totalActive,icon:nl})]}),features:o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[o.jsx(uq,{courses:i,assignments:r}),o.jsx(dq,{courses:i}),o.jsx(aq,{})]}),charts:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:h-[340px]",children:[o.jsx("div",{className:"lg:col-span-2 h-full min-h-[300px]",children:o.jsx(mq,{data:g.weeklyWorkload})}),o.jsx("div",{className:"lg:col-span-1 h-full min-h-[300px]",children:o.jsx(pq,{assignments:x,onSelectAssignment:c,courses:i})})]})};return o.jsx(gq,{id:y,children:b[y]},y)})})})})]}),o.jsx(Aw,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function yq(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s,reauthRequired:i}=cn();rt();const[a,l]=m.useState(null),[c,u]=m.useState("grid"),h=Xm(),f=t.find(x=>x.id===a),g=e.filter(x=>x.courseId===a).flatMap(x=>x.materials?x.materials.flatMap(y=>{let b=[];if(y.driveFile){const _=y.driveFile.driveFile;let w=_.thumbnailUrl||_.iconUrl||null;!w&&_.id&&(w=`https://drive.google.com/thumbnail?id=${_.id}&sz=w800`),b.push({id:_.id,title:_.title,link:_.alternateLink,thumbnail:w,type:"driveFile"})}return b}):[]).filter(x=>!!x.title);return n&&t.length===0?o.jsx(vq,{}):i&&t.length===0?o.jsx("div",{className:"h-full flex items-center justify-center p-4",children:o.jsx(Fl,{})}):o.jsxs("div",{className:"flex h-full overflow-hidden bg-background flex-col",children:[i&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(kn,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached notes are shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:x=>{x.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[o.jsxs("div",{className:$("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&a?"hidden":"flex"),children:[o.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:o.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(x=>o.jsxs("button",{onClick:()=>l(x.id),className:$("w-full text-left px-3 py-3.5 rounded-md transition-all group flex items-center gap-3",a===x.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[o.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0 border border-transparent",a===x.id?"ring-2 ring-primary-foreground/20":""),style:{backgroundColor:x.color||"#e4e4e7"},children:o.jsx(K1,{className:"h-4 w-4",style:{color:x.color?Qm(x.color):void 0}})}),o.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[o.jsx("p",{className:"text-sm font-semibold leading-tight mb-0.5 truncate",children:x.name}),o.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-medium leading-tight",a===x.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:x.section||"No Section"})]}),o.jsx($M,{className:$("h-4 w-4 transition-transform shrink-0",a===x.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},x.id))})]}),o.jsxs("div",{className:$("flex-1 overflow-y-auto bg-background",h&&!a?"hidden":"flex flex-col"),children:[h&&a&&o.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:o.jsxs(ce,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[o.jsx(Pu,{className:"h-4 w-4"}),"Back to Courses"]})}),a?o.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[o.jsxs("div",{className:"space-y-1 max-w-full",children:[o.jsx(Hn,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),o.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:f==null?void 0:f.name}),o.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(f==null?void 0:f.descriptionHeading)||"Curated academic materials and notes."})]}),o.jsxs("div",{className:"flex gap-2 shrink-0",children:[o.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[o.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),o.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[g.length," Documents"]})]}),o.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[o.jsx(ce,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:o.jsx($C,{className:"h-4 w-4"})}),o.jsx(ce,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:o.jsx(ZM,{className:"h-4 w-4"})})]})]})]}),g.length>0?c==="grid"?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:g.map((x,y)=>{var P;const b=((P=x.title)==null?void 0:P.toLowerCase())||"",_=b.endsWith(".pdf"),w=b.endsWith(".ppt")||b.endsWith(".pptx");let E="bg-zinc-100 text-zinc-600",j="FILE";return _?(E="bg-red-100 text-red-600",j="PDF DOCUMENT"):w?(E="bg-orange-100 text-orange-600",j="PRESENTATION"):(E="bg-blue-100 text-blue-600",j="DOCUMENT"),o.jsxs(Oe,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[o.jsx(tt,{className:"p-3 border-b border-border space-y-0 pb-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",E),children:o.jsx(Eo,{className:"h-4 w-4"})}),o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:x.title}),o.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:j})]})]})}),o.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[x.thumbnail&&o.jsx("img",{src:x.thumbnail.includes("s220")?x.thumbnail.replace("s220","s800"):x.thumbnail,alt:x.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:O=>{var N;console.log("Thumbnail failed to load:",x.thumbnail),O.currentTarget.style.display="none";const S=(N=O.currentTarget.parentElement)==null?void 0:N.querySelector(".fallback-viewer");S&&(S.classList.remove("hidden"),S.classList.add("block"))}}),o.jsx("div",{className:$("fallback-viewer absolute inset-0 w-full h-full",x.thumbnail?"hidden":"block"),children:o.jsx(wq,{type:_?"pdf":w?"ppt":"doc"})}),o.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:o.jsx(ce,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:o.jsxs("a",{href:x.link,target:"_blank",rel:"noopener noreferrer",children:[o.jsx(Rx,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${x.id}-${y}`)})}):o.jsx("div",{className:"space-y-2 pb-20",children:g.map((x,y)=>{var P;const b=((P=x.title)==null?void 0:P.toLowerCase())||"",_=b.endsWith(".pdf"),w=b.endsWith(".ppt")||b.endsWith(".pptx");let E="bg-zinc-100 text-zinc-600",j="File";return _?(E="bg-red-100 text-red-600",j="PDF Document"):w?(E="bg-orange-100 text-orange-600",j="Presentation"):(E="bg-blue-100 text-blue-600",j="Document"),o.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[o.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[x.thumbnail?o.jsx("img",{src:x.thumbnail.includes("s220")?x.thumbnail.replace("s220","s400"):x.thumbnail,alt:x.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:O=>{O.currentTarget.style.display="none";const S=O.currentTarget.nextElementSibling;S&&S.classList.remove("hidden")}}):null,o.jsx("div",{className:$("absolute inset-0 flex items-center justify-center",x.thumbnail?"hidden":"flex",E),children:o.jsx(Eo,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:x.title}),o.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[j,"  Read Only"]})]}),o.jsx(ce,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:o.jsxs("a",{href:x.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[o.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),o.jsx(Rx,{className:"h-4 w-4"})]})})]},`${x.id}-${y}`)})}):o.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[o.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:o.jsx(K1,{className:"h-8 w-8 text-muted-foreground"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[o.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:o.jsx(Eo,{className:"h-10 w-10 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})]})}function vq(){return o.jsxs("div",{className:"flex h-full overflow-hidden",children:[o.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[o.jsx(Ue,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>o.jsx(Ue,{className:"h-16 w-full rounded-xl"},t))]}),o.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[o.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx(Ue,{className:"h-4 w-20"}),o.jsx(Ue,{className:"h-10 w-80"}),o.jsx(Ue,{className:"h-4 w-64"})]}),o.jsx(Ue,{className:"h-10 w-32 rounded-lg"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>o.jsx(Ue,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function wq({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return o.jsxs("div",{className:$("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[o.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[o.jsxs("div",{className:"flex gap-2 mb-1",children:[o.jsx("div",{className:$("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:o.jsx(Eo,{className:"h-6 w-6"})}),o.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[o.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),o.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),o.jsxs("div",{className:"space-y-2 flex-1",children:[o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),o.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&o.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),o.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:o.jsx(Eo,{className:"h-40 w-40"})})]})}function bq({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),o.jsx("div",{className:"space-y-8",children:s.map(a=>{const l=eP.map(c=>Ii[c]).filter(c=>c.category===a.id);return l.length===0?null:o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:a.label}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);let h=!1;return u||(a.id==="consistency"?h=!0:a.id==="productivity"?h=(n||0)>0:a.id==="reliability"&&(h=((r==null?void 0:r.total)||0)>0)),o.jsxs("div",{className:$("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":h?"bg-muted/40 border-dashed border-border/60":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[o.jsx("div",{className:$("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?$(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:o.jsx(c.icon,{className:$("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:$("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&o.jsx(Dx,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),o.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&a.id==="consistency"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let f=0;if(c.id==="5-day-consistent"?f=5:c.id==="10-day-consistent"?f=10:c.id==="30-day-consistent"&&(f=30),f>0){const p=Number(e)||1,g=Math.min(p/f*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${g}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(g),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[p," / ",f," Days"]})]})]})}return null})()}),!u&&a.id==="productivity"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let f=0;if(c.id==="10-submissions"?f=10:c.id==="25-submissions"?f=25:c.id==="50-submissions"&&(f=50),f>0){const p=Number(n)||0,g=Math.min(p/f*100,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${g}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(g),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[p," / ",f," Submissions"]})]})]})}return null})()}),!u&&a.id==="reliability"&&o.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:f,attended:p}=r||{total:0,attended:0};let g=0,x=0;if(c.id==="perfect-week"?(g=7,x=100):c.id==="attendance-champion"&&(g=30,x=90),g>0){const y=f>0?p/f*100:0,b=Math.min(f/g*100,100),_=Math.min(y/x*100,100),w=Math.min((b+_)/2,100);return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:o.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${w}%`}})}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(w),"%"]}),o.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," days "," ",Math.round(y),"% attended"]})]})]})}return null})()})]}),u&&o.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},a.id)})})}var Rw="Switch",[_q,BG]=Kn(Rw),[Sq,Nq]=_q(Rw),nP=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:a,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,g]=m.useState(null),x=Ce(e,E=>g(E)),y=m.useRef(!1),b=p?h||!!p.closest("form"):!0,[_=!1,w]=As({prop:s,defaultProp:i,onChange:u});return o.jsxs(Sq,{scope:n,checked:_,disabled:l,children:[o.jsx(xe.button,{type:"button",role:"switch","aria-checked":_,"aria-required":a,"data-state":iP(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:x,onClick:me(t.onClick,E=>{w(j=>!j),b&&(y.current=E.isPropagationStopped(),y.current||E.stopPropagation())})}),b&&o.jsx(Eq,{control:p,bubbles:!y.current,name:r,value:c,checked:_,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});nP.displayName=Rw;var rP="SwitchThumb",sP=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=Nq(rP,n);return o.jsx(xe.span,{"data-state":iP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});sP.displayName=rP;var Eq=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),a=gR(n),l=gj(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[a,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function iP(t){return t?"checked":"unchecked"}var oP=nP,Tq=sP;const jn=m.forwardRef(({className:t,...e},n)=>o.jsx(oP,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:o.jsx(Tq,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));jn.displayName=oP.displayName;var Cq="Label",aP=m.forwardRef((t,e)=>o.jsx(xe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));aP.displayName=Cq;var lP=aP;const jq=Ru("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Vn=m.forwardRef(({className:t,...e},n)=>o.jsx(lP,{ref:n,className:$(jq(),t),...e}));Vn.displayName=lP.displayName;var cP="AlertDialog",[kq,WG]=Kn(cP,[KI]),zs=KI(),uP=t=>{const{__scopeAlertDialog:e,...n}=t,r=zs(e);return o.jsx(uR,{...r,...n,modal:!0})};uP.displayName=cP;var Aq="AlertDialogTrigger",dP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=zs(n);return o.jsx(mH,{...s,...r,ref:e})});dP.displayName=Aq;var Iq="AlertDialogPortal",hP=t=>{const{__scopeAlertDialog:e,...n}=t,r=zs(e);return o.jsx(dR,{...r,...n})};hP.displayName=Iq;var Rq="AlertDialogOverlay",fP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=zs(n);return o.jsx(Ew,{...s,...r,ref:e})});fP.displayName=Rq;var Va="AlertDialogContent",[Pq,Dq]=kq(Va),Oq=uC("AlertDialogContent"),mP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=zs(n),a=m.useRef(null),l=Ce(e,a),c=m.useRef(null);return o.jsx(uH,{contentName:Va,titleName:pP,docsSlug:"alert-dialog",children:o.jsx(Pq,{scope:n,cancelRef:c,children:o.jsxs(Tw,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:me(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(Oq,{children:r}),o.jsx(Lq,{contentRef:a})]})})})});mP.displayName=Va;var pP="AlertDialogTitle",gP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=zs(n);return o.jsx(Cw,{...s,...r,ref:e})});gP.displayName=pP;var xP="AlertDialogDescription",yP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=zs(n);return o.jsx(jw,{...s,...r,ref:e})});yP.displayName=xP;var Mq="AlertDialogAction",vP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=zs(n);return o.jsx(kw,{...s,...r,ref:e})});vP.displayName=Mq;var wP="AlertDialogCancel",bP=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=Dq(wP,n),i=zs(n),a=Ce(e,s);return o.jsx(kw,{...i,...r,ref:a})});bP.displayName=wP;var Lq=({contentRef:t})=>{const e=`\`${Va}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Va}\` by passing a \`${xP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Va}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},Vq=uP,Fq=dP,zq=hP,_P=fP,SP=mP,NP=vP,EP=bP,TP=gP,CP=yP;const xN=Vq,yN=Fq,Uq=zq,jP=m.forwardRef(({className:t,...e},n)=>o.jsx(_P,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));jP.displayName=_P.displayName;const Ey=m.forwardRef(({className:t,...e},n)=>o.jsxs(Uq,{children:[o.jsx(jP,{}),o.jsx(SP,{ref:n,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Ey.displayName=SP.displayName;const Ty=({className:t,...e})=>o.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});Ty.displayName="AlertDialogHeader";const Cy=({className:t,...e})=>o.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Cy.displayName="AlertDialogFooter";const jy=m.forwardRef(({className:t,...e},n)=>o.jsx(TP,{ref:n,className:$("text-lg font-semibold",t),...e}));jy.displayName=TP.displayName;const ky=m.forwardRef(({className:t,...e},n)=>o.jsx(CP,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));ky.displayName=CP.displayName;const Ay=m.forwardRef(({className:t,...e},n)=>o.jsx(NP,{ref:n,className:$(rw(),t),...e}));Ay.displayName=NP.displayName;const Iy=m.forwardRef(({className:t,...e},n)=>o.jsx(EP,{ref:n,className:$(rw({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Iy.displayName=EP.displayName;var Dg="rovingFocusGroup.onEntryFocus",$q={bubbles:!1,cancelable:!0},mp="RovingFocusGroup",[Ry,kP,Bq]=Rv(mp),[Wq,AP]=Kn(mp,[Bq]),[Hq,qq]=Wq(mp),IP=m.forwardRef((t,e)=>o.jsx(Ry.Provider,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Ry.Slot,{scope:t.__scopeRovingFocusGroup,children:o.jsx(Gq,{...t,ref:e})})}));IP.displayName=mp;var Gq=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),g=Ce(e,p),x=ep(i),[y=null,b]=As({prop:a,defaultProp:l,onChange:c}),[_,w]=m.useState(!1),E=mt(u),j=kP(n),P=m.useRef(!1),[O,S]=m.useState(0);return m.useEffect(()=>{const N=p.current;if(N)return N.addEventListener(Dg,E),()=>N.removeEventListener(Dg,E)},[E]),o.jsx(Hq,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:y,onItemFocus:m.useCallback(N=>b(N),[b]),onItemShiftTab:m.useCallback(()=>w(!0),[]),onFocusableItemAdd:m.useCallback(()=>S(N=>N+1),[]),onFocusableItemRemove:m.useCallback(()=>S(N=>N-1),[]),children:o.jsx(xe.div,{tabIndex:_||O===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{P.current=!0}),onFocus:me(t.onFocus,N=>{const C=!P.current;if(N.target===N.currentTarget&&C&&!_){const k=new CustomEvent(Dg,$q);if(N.currentTarget.dispatchEvent(k),!k.defaultPrevented){const A=j().filter(ee=>ee.focusable),D=A.find(ee=>ee.active),R=A.find(ee=>ee.id===y),q=[D,R,...A].filter(Boolean).map(ee=>ee.ref.current);DP(q,h)}}P.current=!1}),onBlur:me(t.onBlur,()=>w(!1))})})}),RP="RovingFocusGroupItem",PP=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...a}=t,l=Zr(),c=i||l,u=qq(RP,n),h=u.currentTabStopId===c,f=kP(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=u;return m.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),o.jsx(Ry.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:o.jsx(xe.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:me(t.onMouseDown,x=>{r?u.onItemFocus(c):x.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const y=Xq(x,u.orientation,u.dir);if(y!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=f().filter(w=>w.focusable).map(w=>w.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const w=_.indexOf(x.currentTarget);_=u.loop?Yq(_,w+1):_.slice(w+1)}setTimeout(()=>DP(_))}})})})});PP.displayName=RP;var Kq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Qq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Xq(t,e,n){const r=Qq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Kq[r]}function DP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Yq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Jq=IP,Zq=PP,Pw="Tabs",[eG,HG]=Kn(Pw,[AP]),OP=AP(),[tG,Dw]=eG(Pw),MP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=ep(l),[f,p]=As({prop:r,onChange:s,defaultProp:i});return o.jsx(tG,{scope:n,baseId:Zr(),value:f,onValueChange:p,orientation:a,dir:h,activationMode:c,children:o.jsx(xe.div,{dir:h,"data-orientation":a,...u,ref:e})})});MP.displayName=Pw;var LP="TabsList",VP=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=Dw(LP,n),a=OP(n);return o.jsx(Jq,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:r,children:o.jsx(xe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});VP.displayName=LP;var FP="TabsTrigger",zP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,a=Dw(FP,n),l=OP(n),c=BP(a.baseId,r),u=WP(a.baseId,r),h=r===a.value;return o.jsx(Zq,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(xe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:me(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?a.onValueChange(r):f.preventDefault()}),onKeyDown:me(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&a.onValueChange(r)}),onFocus:me(t.onFocus,()=>{const f=a.activationMode!=="manual";!h&&!s&&f&&a.onValueChange(r)})})})});zP.displayName=FP;var UP="TabsContent",$P=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...a}=t,l=Dw(UP,n),c=BP(l.baseId,r),u=WP(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),o.jsx(An,{present:s||h,children:({present:p})=>o.jsx(xe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});$P.displayName=UP;function BP(t,e){return`${t}-trigger-${e}`}function WP(t,e){return`${t}-content-${e}`}var nG=MP,HP=VP,qP=zP,GP=$P;const rG=nG,KP=m.forwardRef(({className:t,...e},n)=>o.jsx(HP,{ref:n,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));KP.displayName=HP.displayName;const Ah=m.forwardRef(({className:t,...e},n)=>o.jsx(qP,{ref:n,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Ah.displayName=qP.displayName;const Ih=m.forwardRef(({className:t,...e},n)=>o.jsx(GP,{ref:n,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ih.displayName=GP.displayName;function sG(){const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function iG(){const{user:t,requestCalendarPermissions:e}=rt(),[n,r]=m.useState(!1),[s,i]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!t)return;const u=kr(He(Me,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const a=async()=>{r(!0);try{await e()&&await Wt(He(Me,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await Wt(He(Me,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(f=>({...f,[u]:h}));try{await Wt(He(Me,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs(Oe,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(is,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&o.jsx(Hn,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),o.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?o.jsx(ce,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):o.jsx(ce,{onClick:a,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?o.jsx(Oo,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&o.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[o.jsx("div",{className:"h-px w-full bg-border mb-6"}),o.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",o.jsxs("div",{className:"grid gap-3 max-w-xl",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),o.jsx(jn,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),o.jsx(jn,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(Mo,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(Oe,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[o.jsx("div",{className:"flex-1 space-y-2",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:o.jsx(Fv,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),o.jsx("div",{className:"shrink-0",children:o.jsx(Cn,{href:"/settings/notifications",children:o.jsx(ce,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function oG(){var ee,re,V;const{user:t,signOut:e,updateUserProfile:n}=rt(),{lastSyncedAt:r,isSyncing:s,syncClassroom:i,isLoading:a,courses:l}=cn(),{isInstallable:c,isInstalled:u,promptInstall:h}=sG(),{theme:f,setTheme:p}=tw(),[g,x]=m.useState(!0),[y,b]=m.useState("auto"),[_,w]=m.useState(!1),[E,j]=m.useState([]),[P,O]=m.useState(0),[S,N]=m.useState(0),[C,k]=m.useState(),[A,D]=m.useState("general");m.useEffect(()=>{const K=new URLSearchParams(window.location.search).get("tab");K&&["general","badges","integrations"].includes(K)&&D(K)},[]),m.useEffect(()=>{if(!t)return;const z=kr(He(Me,"leaderboards","all-courses","students",t.uid),K=>{var U;if(K.exists()){const W=K.data();j(W.badges||[]),O(W.loginStreak||0),N(((U=W.processedAssignmentIds)==null?void 0:U.length)||0)}else j([]),O(0),N(0)});return()=>z()},[t]),m.useEffect(()=>{if(!l||l.length===0)return;let z=0,K=0;l.forEach(U=>{if(U.attendanceData&&typeof U.attendanceData=="object"){const W=Object.values(U.attendanceData);z+=W.length,K+=W.filter(J=>typeof J=="string"?J.toLowerCase()==="present":J===!0||J===1).length}}),z>0&&k({total:z,attended:K})},[l]),m.useEffect(()=>{if(!t||A!=="badges")return;(async()=>{var se,M;const K=He(Me,"leaderboards","all-courses","students",t.uid),U=await ss(K);if(!U.exists())return;const W=U.data(),J=new Set(W.badges||[]);let ne=!1;const te=((se=W.processedAssignmentIds)==null?void 0:se.length)||0;if(te>=10&&!J.has("10-submissions")&&(J.add("10-submissions"),ne=!0),te>=25&&!J.has("25-submissions")&&(J.add("25-submissions"),ne=!0),te>=50&&!J.has("50-submissions")&&(J.add("50-submissions"),ne=!0),ne){await Wt(K,{badges:Array.from(J)},{merge:!0});const Y=[],ae=new Set(W.badges||[]);J.forEach(he=>{ae.has(he)||Y.push(he)});const{BADGES:X}=await wa(async()=>{const{BADGES:he}=await Promise.resolve().then(()=>tP);return{BADGES:he}},void 0);for(const he of Y)await Z0(Wi(Me,"activities"),{userId:t.uid,userName:t.displayName||"User",userAvatar:t.photoURL,type:"badge_earned",content:`${t.displayName||"User"} earned the '${((M=X[he])==null?void 0:M.label)||"New Badge"}' badge!`,courseId:"all-courses",createdAt:new Date().toISOString()})}})()},[t,A]);const R=((ee=t==null?void 0:t.displayName)==null?void 0:ee.split(" ").map(z=>z[0]).join("").toUpperCase())||((re=t==null?void 0:t.email)==null?void 0:re[0].toUpperCase())||"U",B=()=>r?r.toLocaleString():"Never",q=async()=>{w(!0);try{await h()}catch(z){console.error("Install failed:",z)}finally{w(!1)}};return o.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),o.jsxs(rG,{value:A,onValueChange:D,className:"w-full",children:[o.jsxs(KP,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[o.jsx(Ah,{value:"general",children:"General"}),o.jsx(Ah,{value:"badges",children:"Badges"}),o.jsx(Ah,{value:"integrations",children:"Integrations"})]}),o.jsxs(Ih,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[o.jsxs(Oe,{children:[o.jsxs(tt,{children:[o.jsx(ot,{className:"text-base",children:"Connected Account"}),o.jsx(vn,{children:"Your Google account linked to this app"})]}),o.jsxs(We,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(wr,{className:"h-12 w-12",children:[o.jsx(br,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(_r,{children:R})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),o.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[o.jsx(Ac,{className:"h-3.5 w-3.5"}),"Connected"]})]}),o.jsx(Un,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsx(Vn,{children:"Profile Avatar"}),o.jsx("div",{className:"flex gap-4 items-center flex-wrap",children:[{id:"google",src:((V=t==null?void 0:t.providerData[0])==null?void 0:V.photoURL)||(t==null?void 0:t.photoURL),label:"Google"},{id:"male",src:"/avatars/avatar_male.jpg",label:"Avatar 1"},{id:"female",src:"/avatars/avatar_female.jpg",label:"Avatar 2"},{id:"male_men",src:"/avatars/avatar_male_men.jpg",label:"Avatar 3"},{id:"male_women",src:"/avatars/avatar_male_women.jpg",label:"Avatar 4"}].map(z=>o.jsxs("button",{onClick:async()=>{if(z.src&&z.src!==(t==null?void 0:t.photoURL))try{await n({photoURL:z.src})}catch(K){console.error("Failed to update avatar",K)}},className:`relative group rounded-full p-1 transition-all ${(t==null?void 0:t.photoURL)===z.src?"ring-2 ring-primary ring-offset-2 bg-background":"hover:bg-muted"}`,children:[o.jsxs(wr,{className:"h-12 w-12 border border-border",children:[o.jsx(br,{src:z.src||void 0}),o.jsx(_r,{children:"?"})]}),(t==null?void 0:t.photoURL)===z.src&&o.jsx("div",{className:"absolute bottom-0 right-0 bg-primary text-primary-foreground rounded-full w-4 h-4 flex items-center justify-center border-2 border-background",children:o.jsx(Ac,{className:"h-2.5 w-2.5"})})]},z.id))}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose an avatar to represent you across the app."})]}),o.jsx(Un,{}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),o.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",B()]})]}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:z=>{z.preventDefault(),i().catch(K=>{console.error("Sync failed:",K)})},disabled:s,"data-testid":"button-sync-settings",children:[o.jsx(Mo,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),s?"Syncing...":"Sync Now"]})]})]})]}),o.jsxs(Oe,{children:[o.jsxs(tt,{children:[o.jsx(ot,{className:"text-base",children:"Sync Settings"}),o.jsx(vn,{children:"Configure how your data syncs with Google Classroom"})]}),o.jsxs(We,{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Vn,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),o.jsx(jn,{id:"background-sync",checked:g,onCheckedChange:x,"data-testid":"switch-background-sync"})]}),o.jsx(Un,{}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Vn,{className:"text-sm font-medium",children:"Clear Cache"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Clear all locally stored data. Use this if you're experiencing issues after switching accounts."})]}),o.jsxs(xN,{children:[o.jsx(yN,{asChild:!0,children:o.jsxs(ce,{variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[o.jsx(Mo,{className:"h-4 w-4 mr-2"}),"Clear Cache & Refresh"]})}),o.jsxs(Ey,{children:[o.jsxs(Ty,{children:[o.jsx(jy,{children:"Clear all cached data?"}),o.jsx(ky,{children:"This will clear all locally stored data and refresh the page. You'll need to re-sync your assignments. Your theme preference will be preserved."})]}),o.jsxs(Cy,{children:[o.jsx(Iy,{children:"Cancel"}),o.jsx(Ay,{onClick:()=>{const{clearUserData:z,handleUserSwitch:K}=require("@/lib/storage-manager");t&&(z(),K(t.uid)),window.location.reload()},className:"bg-destructive hover:bg-destructive/90",children:"Clear & Refresh"})]})]})]})]})]})]}),o.jsxs(Oe,{children:[o.jsxs(tt,{children:[o.jsx(ot,{className:"text-base",children:"Theme"}),o.jsx(vn,{children:"Choose your preferred color theme"})]}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Vn,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs(ce,{variant:f==="light"?"default":"outline",size:"sm",onClick:()=>p("light"),className:"flex items-center gap-2",children:[o.jsx($v,{className:"h-4 w-4"}),"Light"]}),o.jsxs(ce,{variant:f==="dark"?"default":"outline",size:"sm",onClick:()=>p("dark"),className:"flex items-center gap-2",children:[o.jsx(fm,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),o.jsxs(Oe,{className:"border-primary/20",children:[o.jsxs(tt,{children:[o.jsxs(ot,{className:"text-base flex items-center gap-2",children:[o.jsx(G1,{className:"h-4 w-4"}),"Install App"]}),o.jsx(vn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),o.jsx(We,{className:"space-y-4",children:u?o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[o.jsx(Ac,{className:"h-5 w-5 text-emerald-600"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),o.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):c?o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[o.jsx(r3,{className:"h-5 w-5 text-primary"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),o.jsxs(ce,{onClick:q,disabled:_,className:"w-full",size:"lg","data-testid":"button-install-app",children:[o.jsx(G1,{className:"h-4 w-4 mr-2"}),_?"Installing...":"Install App"]}),o.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[o.jsx(To,{className:"h-5 w-5 text-muted-foreground"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),o.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[o.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),o.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),o.jsxs(Oe,{children:[o.jsxs(tt,{children:[o.jsx(ot,{className:"text-base",children:"Preferences"}),o.jsx(vn,{children:"Customize your experience"})]}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Vn,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),o.jsxs($f,{value:y,onValueChange:b,children:[o.jsx(bu,{className:"w-[180px]","data-testid":"select-timezone",children:o.jsx(Bf,{})}),o.jsxs(_u,{children:[o.jsx(jt,{value:"auto",children:"Auto-detect"}),o.jsx(jt,{value:"America/New_York",children:"Eastern Time"}),o.jsx(jt,{value:"America/Chicago",children:"Central Time"}),o.jsx(jt,{value:"America/Denver",children:"Mountain Time"}),o.jsx(jt,{value:"America/Los_Angeles",children:"Pacific Time"}),o.jsx(jt,{value:"Europe/London",children:"London"}),o.jsx(jt,{value:"Europe/Paris",children:"Paris"}),o.jsx(jt,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),o.jsxs(Oe,{children:[o.jsxs(tt,{children:[o.jsxs(ot,{className:"text-base flex items-center gap-2",children:[o.jsx(rf,{className:"h-4 w-4"}),"Account Actions"]}),o.jsx(vn,{children:"Manage your session"})]}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),o.jsxs(xN,{children:[o.jsx(yN,{asChild:!0,children:o.jsxs(ce,{variant:"outline",size:"sm","data-testid":"button-signout",children:[o.jsx(rf,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),o.jsxs(Ey,{children:[o.jsxs(Ty,{children:[o.jsx(jy,{children:"Are you absolutely sure?"}),o.jsx(ky,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),o.jsxs(Cy,{children:[o.jsx(Iy,{children:"Cancel"}),o.jsx(Ay,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 border-0 border-none shadow-none ring-0 focus:ring-0 outline-none",children:"Sign Out"})]})]})]})]})})]})]}),o.jsx(Ih,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsxs(Oe,{children:[o.jsxs(tt,{children:[o.jsxs(ot,{className:"text-base flex items-center gap-2",children:[o.jsx(WC,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),o.jsx(vn,{children:"Track your progress and unlock rewards by staying consistent."})]}),o.jsx(We,{children:o.jsx(bq,{earnedBadges:E,currentStreak:P,submissionCount:S,attendanceStats:C})})]})}),o.jsx(Ih,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:o.jsx(iG,{})})]})]})}function aG(){const{user:t,requestGmailPermissions:e,accessToken:n}=rt(),{toast:r}=Ki(),[s,i]=m.useState(!1),[a,l]=m.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{async function x(){if(t)try{const y=He(Me,"users",t.uid,"settings","notifications"),b=await ss(y);if(b.exists()){const _=b.data();i(_.enabled??!1),l(_.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(y){console.error("Failed to load settings from Firestore",y)}finally{f(!1)}}x()},[t]),m.useEffect(()=>{async function x(){if(!(!t||h))try{const b=He(Me,"users",t.uid,"settings","notifications");await Wt(b,{enabled:s,config:a,updatedAt:new Date().toISOString()},{merge:!0})}catch(b){console.error("Failed to save settings",b)}}const y=setTimeout(x,1e3);return()=>clearTimeout(y)},[s,a,t,h]);const p=async()=>{u(!0);try{await e()?(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."})):r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(x){console.error(x),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},g=x=>{l(y=>({...y,[x]:!y[x]}))};return o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(Cn,{href:"/settings",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"rounded-full",children:o.jsx(Pu,{className:"h-5 w-5"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),o.jsxs(Oe,{className:"border-border shadow-sm",children:[o.jsxs(tt,{className:"pb-4",children:[o.jsxs(ot,{className:"flex items-center gap-2 text-lg",children:[o.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:o.jsx(Fv,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),o.jsxs(vn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),o.jsx(Un,{}),o.jsxs(We,{className:"pt-6 space-y-6",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Vn,{className:"text-base font-medium",children:"Assignment due reminder"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),o.jsx(jn,{checked:a.dueReminder,onCheckedChange:()=>g("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx(Un,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Vn,{className:"text-base font-medium",children:"Missed submission alert"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),o.jsx(jn,{checked:a.missedSubmission,onCheckedChange:()=>g("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),o.jsx(Un,{className:"opacity-50"}),o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx(Vn,{className:"text-base font-medium",children:"Heavy workload warning"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),o.jsx(jn,{checked:a.workloadWarning,onCheckedChange:()=>g("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),o.jsxs(vw,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[o.jsx(nl,{className:"h-4 w-4 shrink-0"}),o.jsx("p",{children:"Academic alerts are active."})]}),o.jsx(ce,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):o.jsxs("div",{className:"w-full space-y-4",children:[o.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[o.jsx(To,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),o.jsxs(ce,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&o.jsx(Oo,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),o.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function lG(){const[t,e]=am(),{user:n,requestCalendarPermissions:r}=rt(),{toast:s}=Ki(),[i,a]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!n)return;const x=kr(He(Me,"users",n.uid,"settings","calendar"),y=>{y.exists()&&h(y.data()),a(!1)});return()=>x()},[n]);const f=async()=>{c(!0);try{await r()?(await Wt(He(Me,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(x){console.error(x),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await Wt(He(Me,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(x){console.error(x)}},g=async(x,y)=>{h(b=>({...b,[x]:y}));try{await Wt(He(Me,"users",n.uid,"settings","calendar"),{[x]:y},{merge:!0})}catch(b){console.error(b)}};return i?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx(Oo,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:o.jsx(UM,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),o.jsxs("div",{className:"grid gap-6",children:[o.jsxs(Oe,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(tt,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:o.jsx(is,{className:"h-6 w-6"})}),o.jsx(ot,{className:"text-xl",children:"Google Calendar"}),u.enabled&&o.jsx(Hn,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),o.jsx(vn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?o.jsx(ce,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ce,{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?o.jsx(Oo,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&o.jsxs(We,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx(Un,{className:"mb-6"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid gap-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),o.jsx(jn,{checked:u.syncAssignments,onCheckedChange:x=>g("syncAssignments",x)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),o.jsx(jn,{checked:u.syncExams,onCheckedChange:x=>g("syncExams",x)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),o.jsx(jn,{checked:u.syncPersonal,onCheckedChange:x=>g("syncPersonal",x)})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[o.jsx(Mo,{className:"h-3 w-3"}),o.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),o.jsx(cG,{})]})]})}function cG(){const{user:t,requestGmailPermissions:e}=rt(),{toast:n}=Ki(),[r,s]=m.useState(!1),[i,a]=m.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});m.useEffect(()=>{if(!t)return;const h=kr(He(Me,"users",t.uid,"settings","notifications"),f=>{f.exists()&&a(f.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await Wt(He(Me,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await Wt(He(Me,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{a(p=>({...p,[h]:f}));try{await Wt(He(Me,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(p){console.error(p)}};return o.jsxs(Oe,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[o.jsxs(tt,{className:"flex flex-row items-start justify-between pb-2",children:[o.jsxs("div",{className:"space-y-1.5",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[o.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),o.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),o.jsx(ot,{className:"text-xl",children:"Email Notifications"}),i.enabled&&o.jsx(Hn,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),o.jsx(vn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?o.jsx(ce,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):o.jsx(ce,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?o.jsx(Oo,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&o.jsxs(We,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[o.jsx(Un,{className:"mb-6"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),o.jsx(jn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[o.jsxs("div",{className:"space-y-0.5",children:[o.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),o.jsx(jn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}function uG(){var C,k,A,D,R,B;const{user:t,signOut:e}=rt(),{courses:n,assignments:r,isLoading:s,error:i}=cn();if(i&&i.toLowerCase().includes("session")&&!(n.length>0||r.length>0))return o.jsx(Fl,{});const[a,l]=m.useState("class"),[c,u]=m.useState([]),[h,f]=m.useState(!1),[p,g]=m.useState(!0),[x,y]=m.useState(!0);m.useEffect(()=>{if(!t)return;f(!0);const q=[],ee=new Map,re=()=>{const K=[],U=t!=null&&t.email?t.email.split("@")[1]:null,W=n.map(ne=>ne.id),J=new Set(r.map(ne=>ne.id));ee.forEach(ne=>{if(ne.role==="teacher")return;const te=ne.email||"";let se=ne.emailDomain||"";!se&&te.includes("@")&&(se=te.split("@")[1]);const M=ne.enrolledCourseIds||[],Y=ne.processedAssignmentIds||[],ae=U&&se&&U===se,X=W.some(Ee=>M.includes(Ee)),ie=!se&&Y.some(Ee=>J.has(Ee));let ge=!1;a==="college"?ge=!!ae:ge=ae&&X||ie,ge&&K.push(ne)}),K.sort((ne,te)=>te.totalXP-ne.totalXP),u(K),f(!1)},V=K=>{K.forEach(U=>{const W=U.data(),J={id:U.id,displayName:W.displayName||W.name||"Anonymous",photoUrl:W.photoUrl||W.avatar||"",totalXP:W.totalXP||W.xp||0,processedAssignmentIds:W.processedAssignmentIds||W.completedTasks||[],email:W.email||"",emailDomain:W.emailDomain||(W.email?W.email.split("@")[1]:""),enrolledCourseIds:W.enrolledCourseIds||W.subjects||[],badges:W.badges||[],role:W.role},ne=ee.get(U.id);(!ne||J.totalXP>=ne.totalXP)&&ee.set(U.id,J)}),re()},z=t.email?t.email.split("@")[1]:null;if(a==="college"&&z){const K=Wi(Me,"leaderboards","all-courses","students"),U=jo(K,Y0("emailDomain","==",z),Oa("totalXP","desc"),Lc(50)),W=kr(U,V,J=>{console.warn("College query failed (likely missing index). Falling back to global list.",J);const ne=jo(K,Oa("totalXP","desc"),Lc(100));kr(ne,V)});q.push(W)}else Array.from(new Set(["all-courses",...n.map(U=>U.id)])).forEach(U=>{const W=Wi(Me,"leaderboards",U,"students"),J=jo(W,Oa("totalXP","desc"),Lc(50)),ne=kr(J,V);q.push(ne)});return()=>{q.forEach(K=>K())}},[a,t,n,r]);const b=a==="class"?"My Class":"My College",_=c.find(q=>q.id===(t==null?void 0:t.uid));_!=null&&_.totalXP;const w=!!_,E=c.filter(q=>q.totalXP>0),j=c.filter(q=>q.totalXP===0),P=c.length>0&&E.length===0,O=[...j].sort((q,ee)=>{const re=V=>V?typeof V.toMillis=="function"?V.toMillis():typeof V=="number"?V:V instanceof Date?V.getTime():typeof V=="string"?new Date(V).getTime():0:0;return re(q.lastSyncedAt)-re(ee.lastSyncedAt)}),S=[...E,...O],N=!1;return o.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[i&&i.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(To,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:q=>{q.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),o.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[b," Leaderboard"]})]}),o.jsx("div",{className:"w-full sm:w-[200px]",children:o.jsxs($f,{value:a,onValueChange:q=>l(q),children:[o.jsx(bu,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:o.jsx(Bf,{placeholder:"Select View"})}),o.jsxs(_u,{children:[o.jsx(jt,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),o.jsx(jt,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:o.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p&&a==="class"&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>g(!1),children:o.jsx(Lo,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:o.jsx(UC,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),o.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[o.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),o.jsxs("span",{className:"leading-snug",children:["Submit"," ",o.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",o.jsx("br",{className:"hidden sm:block"}),o.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),a==="college"&&x&&o.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[o.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:o.jsx(ce,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>y(!1),children:o.jsx(Lo,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),o.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:o.jsx(To,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),o.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[o.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",o.jsx(KC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),o.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",o.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[o.jsx(To,{className:"h-4 w-4 shrink-0 mt-0.5"}),o.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!w&&!h?o.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:o.jsx(Oo,{className:"h-6 w-6 text-primary animate-spin"})}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h3",{className:"text-lg font-medium",children:"Syncing Your Progress"}),o.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Your leaderboard data is automatically syncing. Complete some assignments to start earning XP!"})]})]})}):null,h&&c.length===0?o.jsx("div",{className:"space-y-4",children:[1,2,3].map(q=>o.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},q))}):c.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:o.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):P?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 flex items-start gap-3",children:[o.jsx(BC,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Be the first to climb the leaderboard!"}),o.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Submit your first assignment to earn 100 XP and claim the #1 spot. The competition starts now!"})]})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:S.map((q,ee)=>{var V,z;const re=q.id===(t==null?void 0:t.uid);return o.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",re?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30"),children:[o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(wr,{className:$("h-10 w-10 border flex-shrink-0",re?"border-primary/20":"border-border"),children:[o.jsx(br,{src:q.photoUrl}),o.jsx(_r,{className:"text-xs bg-muted text-muted-foreground",children:(z=(V=q.displayName)==null?void 0:V[0])==null?void 0:z.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("span",{className:$("text-sm font-medium truncate",re?"text-primary":"text-foreground"),children:[q.displayName,re&&o.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(You)"})]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready to start"})]})]}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"0 XP"})}),N]},q.id)})})]}):o.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[S.length>0&&o.jsxs("div",{className:$("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",p?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[o.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px] group relative",children:S[1]&&S[1].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[N,o.jsxs(wr,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[o.jsx(br,{src:S[1].photoUrl}),o.jsx(_r,{className:"text-lg bg-zinc-100 text-zinc-500",children:(k=(C=S[1].displayName)==null?void 0:C[0])==null?void 0:k.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:S[1].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[S[1].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(yc,{badges:S[1].badges||[],limit:2,size:"sm"})})]})]}):E.length===1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Submit 1 assignment to claim 2nd place!"})]}):o.jsx("div",{className:"w-full"})}),o.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10 group relative",children:[o.jsxs("div",{className:"relative",children:[N,o.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:o.jsx(HM,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),o.jsxs(wr,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[o.jsx(br,{src:S[0].photoUrl}),o.jsx(_r,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(D=(A=S[0].displayName)==null?void 0:A[0])==null?void 0:D.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),o.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:S[0].displayName}),o.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[S[0].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:o.jsx(yc,{badges:S[0].badges||[],limit:3,size:"sm"})})]})]}),o.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px] group relative",children:S[2]&&S[2].totalXP>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[N,o.jsxs(wr,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[o.jsx(br,{src:S[2].photoUrl}),o.jsx(_r,{className:"text-lg bg-amber-50 text-amber-700",children:(B=(R=S[2].displayName)==null?void 0:R[0])==null?void 0:B.toUpperCase()})]}),o.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),o.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[o.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:S[2].displayName}),o.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[S[2].totalXP.toLocaleString()," XP"]}),o.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:o.jsx(yc,{badges:S[2].badges||[],limit:2,size:"sm"})})]})]}):E.length>=1?o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Spot open for 3rd place!"})]}):o.jsx("div",{className:"w-full"})})]}),o.jsx("div",{className:"flex flex-col space-y-2",children:S.slice(Math.min(3,E.length)).map((q,ee)=>{var z,K;const re=q.id===(t==null?void 0:t.uid),V=Math.min(3,E.length)+ee+1;return o.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",re?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[o.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:o.jsx("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:q.totalXP>0?`#${V}`:"-"})}),o.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[o.jsxs(wr,{className:$("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",re?"border-primary/20":"border-border"),children:[o.jsx(br,{src:q.photoUrl}),o.jsx(_r,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(K=(z=q.displayName)==null?void 0:z[0])==null?void 0:K.toUpperCase()})]}),o.jsxs("div",{className:"flex flex-col min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[o.jsxs("span",{className:$("text-xs sm:text-sm font-medium truncate",re?"text-primary":"text-foreground"),children:[q.displayName," ",re&&o.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),o.jsx(yc,{badges:q.badges||[],limit:3,size:"md",className:"scale-100"})]}),o.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[q.processedAssignmentIds.length," ",o.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),o.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[o.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:q.totalXP.toLocaleString()}),o.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]}),N]},q.id)})})]})]})})]})}function dG(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const vN=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function hG(){return o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8 animate-pulse",children:[o.jsx(Skeleton,{className:"h-48 w-full rounded-xl"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>o.jsx(Skeleton,{className:"h-64 rounded-xl"},t))})]})}function fG(){const{courses:t,error:e,isLoading:n}=cn();if(n)return o.jsx(hG,{});if(e&&e.toLowerCase().includes("session")&&t.length===0)return o.jsx(Fl,{});const{accessToken:r,user:s}=rt();Ki();const[i,a]=m.useState(""),[l,c]=m.useState({}),[u,h]=m.useState(null);m.useState("");const f=m.useMemo(()=>dG(),[]);m.useEffect(()=>{if(!t||!s||!r)return;(async()=>{const P=await Promise.all(t.map(async S=>{const N=await er.getCourseConfig(S.id);return N?N.isVisible?{courseId:S.id,state:"loading"}:{courseId:S.id,state:"hidden"}:{courseId:S.id,state:"no-config"}})),O={};P.forEach(S=>{O[S.courseId]=S}),c(S=>({...S,...O}));for(const S of t){const N=await er.getCourseConfig(S.id);N&&N.isVisible&&p(S.id,N.sheetUrl)}})()},[t,s,r]),m.useEffect(()=>{t.length>0&&!i&&a(t[0].id)},[t,i]);const p=async(j,P)=>{if(!r||!(s!=null&&s.email)){console.log("Missing accessToken or user email");return}const O=er.extractSheetId(P);if(!O){c(C=>({...C,[j]:{courseId:j,state:"error",error:"Invalid configuration"}}));return}const S=await er.getCourseConfig(j),N=(S==null?void 0:S.emailColumn)||"A";try{const C=await er.fetchAttendanceFromSheet(O,r,s.email,N);c(k=>({...k,[j]:{courseId:j,state:"loaded",data:C}}))}catch(C){console.error("Attendance fetch error:",C),c(k=>({...k,[j]:{courseId:j,state:"error",error:C.message||"Failed to load"}}))}},g=Object.values(l).filter(j=>j.state==="loaded"&&j.data),x=g.reduce((j,P)=>{var O;return j+(((O=P.data)==null?void 0:O.stats.attendedClasses)||0)},0),y=g.reduce((j,P)=>{var O;return j+(((O=P.data)==null?void 0:O.stats.totalClasses)||0)},0),b=vN(x,y),_=l[i],w=t.find(j=>j.id===i),E=_==null?void 0:_.data;return m.useEffect(()=>{if(!s||y<5)return;const P=setTimeout(async()=>{const O=[],S=x,N=y,C=N>0?S/N:0;if(N>=10&&C===1&&O.push("perfect-week"),N>=30&&C>=.95&&O.push("attendance-champion"),O.length>0)try{const k=He(Me,"leaderboards","all-courses","students",s.uid);await cA(k,{badges:hA(...O)})}catch(k){console.debug("Could not award attendance badges:",k)}},3e3);return()=>clearTimeout(P)},[s,y,x]),o.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[o.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:o.jsx("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[o.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),o.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),o.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",f]})]})})}),e&&e.toLowerCase().includes("session")&&o.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[o.jsx(To,{className:"h-4 w-4"}),o.jsx("span",{children:"Sync is paused. Cached courses shown. Sign in to update."})]}),o.jsx("a",{href:"/auth/refresh",onClick:j=>{j.preventDefault(),window.location.reload()},children:o.jsx(ce,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:o.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[o.jsx("section",{children:g.length>0?o.jsx(Oe,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:o.jsx(We,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[o.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[o.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),o.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),o.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),o.jsx(Hn,{variant:b.status==="safe"?"outline":"destructive",className:$("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",b.color),children:b.status==="safe"?"Safe Status":"Attention Needed"})]}),o.jsxs("div",{className:"flex items-baseline gap-3",children:[o.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[b.percentage,"%"]}),o.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",g.length," active courses"]})]})]})})}):o.jsx(Oe,{className:"border-border shadow-sm bg-card",children:o.jsxs(We,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[o.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:o.jsx(au,{className:"h-8 w-8 text-muted-foreground/50"})}),o.jsxs("div",{className:"space-y-2 max-w-md",children:[o.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),o.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",o.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[o.jsx(kn,{className:"h-3.5 w-3.5"}),o.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[o.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(j=>{var C,k;const P=l[j.id],O=(P==null?void 0:P.state)||"loading",S=P!=null&&P.data?vN(P.data.stats.attendedClasses,P.data.stats.totalClasses):null,N=i===j.id;return o.jsx(Oe,{className:$("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",N&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>a(j.id),children:o.jsxs(We,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[o.jsxs("div",{className:"flex justify-between items-start gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsxs(Mu,{children:[o.jsx(Lu,{asChild:!0,children:o.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:j.name})}),o.jsx(Tl,{children:o.jsx("p",{children:j.name})})]}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:j.section||"No Section"})]}),O==="loaded"&&S&&o.jsxs("span",{className:$("text-lg font-bold tabular-nums",S.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[S.percentage,"%"]}),O==="hidden"&&o.jsx(Px,{className:"h-5 w-5 text-muted-foreground/50"}),O==="locked"&&o.jsx(Dx,{className:"h-5 w-5 text-amber-500/80"}),O==="error"&&o.jsx(To,{className:"h-5 w-5 text-destructive/80"})]}),o.jsxs("div",{className:"mt-auto",children:[O==="loaded"&&S&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[o.jsxs("span",{children:[(C=P.data)==null?void 0:C.stats.attendedClasses,"/",(k=P.data)==null?void 0:k.stats.totalClasses," classes"]}),o.jsx("span",{className:S.status==="safe"?"text-emerald-500":"text-red-500",children:S.status==="safe"?"On Track":"Low Attendance"})]}),o.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:o.jsx("div",{className:$("h-full rounded-full transition-all duration-500",S.progressColor),style:{width:`${S.percentage}%`}})})]}),O==="locked"&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),o.jsxs(ce,{size:"sm",variant:"secondary",className:"w-full",onClick:A=>{A.stopPropagation(),h(j.id)},children:[o.jsx(XM,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),O==="hidden"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),O==="no-config"&&o.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),O==="error"&&o.jsx("p",{className:"text-xs text-destructive",children:P==null?void 0:P.error}),O==="loading"&&o.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[o.jsx(zv,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},j.id)})}),o.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between px-1",children:[o.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[o.jsx(au,{className:"h-4 w-4"})," History"]}),o.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(w==null?void 0:w.section)||(w==null?void 0:w.name.slice(0,3).toUpperCase())})]}),o.jsx(Oe,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:E?o.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:o.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:E.history.map((j,P)=>{const O=j.status==="Present",S=P===0,N=P===5;return o.jsxs("div",{className:"group",children:[S&&o.jsx("div",{className:"ml-5 mb-3 mt-1",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),N&&o.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:o.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),o.jsxs("div",{className:"relative pl-5 select-none",children:[o.jsx("div",{className:$("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",O?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),P!==E.history.length-1&&o.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),o.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[o.jsx("div",{className:$("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",O?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:j.status}),o.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:j.date})]})})]})]},P)})})}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(_==null?void 0:_.state)==="locked"&&o.jsxs(o.Fragment,{children:[o.jsx(Dx,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(_==null?void 0:_.state)==="hidden"&&o.jsxs(o.Fragment,{children:[o.jsx(Px,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((_==null?void 0:_.state)==="error"||(_==null?void 0:_.state)==="no-config")&&o.jsxs(o.Fragment,{children:[o.jsx(kn,{className:"h-8 w-8 mb-3 opacity-20"}),o.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}function mG(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:o.jsx(Oe,{className:"w-full max-w-md mx-4",children:o.jsxs(We,{className:"pt-6",children:[o.jsxs("div",{className:"flex mb-4 gap-2",children:[o.jsx(kn,{className:"h-8 w-8 text-red-500"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),o.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function pG(){const{user:t}=rt(),e=m.useRef(!1);return m.useEffect(()=>{if(!t){e.current=!1;return}if(e.current)return;e.current=!0,(async()=>{try{const r=He(Me,"leaderboards","all-courses","students",t.uid),s=await ss(r),i=x=>x.toLocaleDateString("en-CA",{timeZone:"Asia/Kolkata"}),a=i(new Date),l=new Date;l.setDate(l.getDate()-1);const c=i(l);let u=0,h=0,f=null,p=[];if(s.exists()){const x=s.data();u=x.currentStreak||0,h=x.longestStreak||0,f=x.lastLoginDate||null,p=x.badges||[]}let g=!1;if(f?f===a||(f===c?(u+=1,g=!0):(u=1,g=!0)):(u=1,g=!0),g){u>h&&(h=u);const x=new Set(p);let y=!1;if(u>=7){const b="7-day-consistent"}u>=5&&x.add("5-day-consistent"),u>=10&&x.add("10-day-consistent"),u>=30&&x.add("30-day-consistent"),await Wt(r,{currentStreak:u,longestStreak:h,lastLoginDate:a,badges:Array.from(x),lastSyncedAt:xu(),loginStreak:u},{merge:!0})}}catch(r){console.error("Failed to update streak:",r)}})()},[t]),null}const gG=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function QP({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=m.useState(10),[i,a]=m.useState(0),l=n&&n.length>0?n:gG;return m.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const f=Math.random()*15;return Math.min(h+f,90)})},400),u=setInterval(()=>{a(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),o.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?o.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),o.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),o.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),o.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:o.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[o.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),o.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:o.jsx(Oo,{className:"h-7 w-7 text-primary animate-spin"})}),o.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:o.jsx(KC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),o.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Trace Is Ready"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),o.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(LC,{className:"h-3 w-3"})," Optimizing"]}),o.jsxs("span",{children:[Math.round(r),"%"]})]})]}),o.jsxs("div",{className:"relative overflow-hidden group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),o.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[o.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:o.jsx(qC,{className:"h-4 w-4 text-primary"})}),o.jsxs("div",{className:"space-y-1 pt-0.5",children:[o.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),o.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const Py=m.forwardRef(({className:t,type:e,...n},r)=>o.jsx("input",{type:e,className:$("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Py.displayName="Input";const xG=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function yG({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,g;const{user:s,signOut:i}=rt(),{theme:a,toggleTheme:l}=tw(),c=Xm(),u=[{id:"dashboard",label:"Dashboard",icon:YM},{id:"courses",label:"Courses",icon:hm},{id:"settings",label:"Settings",icon:GC}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(x=>x[0]).join("").toUpperCase())||((g=s==null?void 0:s.email)==null?void 0:g[0].toUpperCase())||"U",f=()=>o.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[o.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),o.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&o.jsx("button",{className:"ml-auto",onClick:r,children:o.jsx(Lo,{className:"w-5 h-5 text-muted-foreground"})})]}),o.jsx("div",{className:"p-4 border-b border-border shrink-0",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs(wr,{className:"h-8 w-8",children:[o.jsx(br,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),o.jsx(_r,{className:"text-xs",children:h})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),o.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),o.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(x=>o.jsxs("button",{onClick:()=>{e(x.id),c&&r()},className:$("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===x.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[o.jsx(x.icon,{className:"h-4 w-4"}),x.label]},x.id))}),o.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[o.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[a==="dark"?o.jsx($v,{className:"w-4 h-4 mr-3"}):o.jsx(fm,{className:"w-4 h-4 mr-3"}),a==="dark"?"Light Mode":"Dark Mode"]}),o.jsxs(ce,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[o.jsx(rf,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return o.jsxs(o.Fragment,{children:[o.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:o.jsx(f,{})}),c&&n&&o.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function vG({courses:t}){const[e,n]=m.useState(0),[r,s]=m.useState(0);return m.useEffect(()=>{(async()=>{let a=0,l=0;(await Promise.all(t.map(u=>er.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?a++:l++)}),n(a),s(l)})()},[t]),o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),o.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[o.jsxs(Oe,{className:"border-border shadow-sm",children:[o.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ot,{className:"text-sm font-medium",children:"Total Courses"}),o.jsx(hm,{className:"h-4 w-4 text-muted-foreground"})]}),o.jsx(We,{children:o.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),o.jsxs(Oe,{className:"border-border shadow-sm",children:[o.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ot,{className:"text-sm font-medium",children:"Attendance Visible"}),o.jsx(qM,{className:"h-4 w-4 text-emerald-500"})]}),o.jsx(We,{children:o.jsx("div",{className:"text-2xl font-bold",children:e})})]}),o.jsxs(Oe,{className:"border-border shadow-sm",children:[o.jsxs(tt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[o.jsx(ot,{className:"text-sm font-medium",children:"Attendance Hidden"}),o.jsx(Px,{className:"h-4 w-4 text-amber-500"})]}),o.jsx(We,{children:o.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function wG({courses:t,onRefresh:e,isLoading:n}){const[r,s]=m.useState(null);return o.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),o.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),o.jsxs(ce,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[o.jsx(zv,{className:$("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),o.jsxs("div",{className:"grid gap-6",children:[t.map(i=>o.jsxs(Oe,{className:"overflow-hidden border-border shadow-sm",children:[o.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[o.jsxs("div",{className:"min-w-0",children:[o.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[o.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),o.jsx("span",{className:"hidden sm:inline",children:""}),o.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),o.jsx(ce,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&o.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:o.jsx(bG,{courseId:i.id})})]},i.id)),t.length===0&&o.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[o.jsx("p",{children:"No active courses found where you are a teacher."}),o.jsx(ce,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function bG({courseId:t}){const{toast:e}=Ki(),[n,r]=m.useState(!1),[s,i]=m.useState(""),[a,l]=m.useState("A"),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{let g=!0;return(async()=>{f(!0);const y=await er.getCourseConfig(t);g&&y&&(r(y.isVisible),i(y.sheetUrl),l(y.emailColumn||"A")),g&&f(!1)})(),()=>{g=!1}},[t]);const p=async()=>{if(!er.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await er.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:a.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?o.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[o.jsx(zv,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):o.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Hn,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),o.jsx(jn,{checked:n,onCheckedChange:r})]})]}),o.jsxs("div",{className:"grid gap-4 max-w-xl",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Vn,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),o.jsx(Py,{id:`sheet-${t}`,value:s,onChange:g=>i(g.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Vn,{htmlFor:`email-col-${t}`,children:"Email Column"}),o.jsx(Py,{id:`email-col-${t}`,value:a,onChange:g=>l(g.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),o.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:o.jsx(ce,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?o.jsxs(o.Fragment,{children:[o.jsx(Lv,{className:"w-4 h-4 mr-2"}),"Saved"]}):o.jsxs(o.Fragment,{children:[o.jsx(Uv,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function _G(){return o.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),o.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),o.jsxs(Oe,{children:[o.jsxs(tt,{children:[o.jsx(ot,{children:"Notifications"}),o.jsx(vn,{children:"Configure how you receive alerts."})]}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(kc,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Vn,{htmlFor:"email-notif",children:"Email Summaries"})]}),o.jsx(jn,{id:"email-notif",defaultChecked:!0})]})})]}),o.jsxs(Oe,{children:[o.jsxs(tt,{children:[o.jsx(ot,{children:"Display"}),o.jsx(vn,{children:"Customize your dashboard appearance."})]}),o.jsx(We,{className:"space-y-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fm,{className:"h-4 w-4 text-muted-foreground"}),o.jsx(Vn,{children:"Dark Mode"})]}),o.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function SG(){const{accessToken:t}=rt(),[e,n]=m.useState("dashboard"),[r,s]=m.useState([]),[i,a]=m.useState(!0),[l,c]=m.useState(!1);async function u(){if(t)try{a(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(f){console.error("Failed to fetch courses",f)}finally{setTimeout(()=>a(!1),1500)}}m.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?o.jsx(QP,{message:"Preparing Teacher Workspace...",tips:xG}):o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(yG,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),o.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[o.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[o.jsx(ce,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:o.jsx(HC,{className:"h-5 w-5"})}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),o.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),o.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&o.jsx(vG,{courses:r}),e==="courses"&&o.jsx(wG,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&o.jsx(_G,{})]})]})]})}function NG(){const{signOut:t,signInWithGoogle:e}=rt();return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:o.jsxs(Oe,{className:"max-w-md w-full border-border shadow-lg",children:[o.jsxs(tt,{className:"text-center space-y-2",children:[o.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:o.jsx(WM,{className:"w-6 h-6 text-muted-foreground"})}),o.jsx(ot,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),o.jsx(vn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),o.jsxs(We,{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),o.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[o.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),o.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(VC,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(hm,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(LC,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),o.jsxs("li",{className:"flex items-center gap-2",children:[o.jsx(is,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),o.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:o.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),o.jsxs(vw,{className:"flex flex-col gap-2",children:[o.jsx(ce,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),o.jsxs(ce,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[o.jsx(rf,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function EG(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ce,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(Pu,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),o.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),o.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Courses:"})," To display your active classes."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),o.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),o.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),o.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),o.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function TG(){return o.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[o.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ce,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[o.jsx(Pu,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),o.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),o.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),o.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Track attendance"})," and academic performance"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),o.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),o.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),o.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),o.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),o.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),o.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),o.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),o.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),o.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),o.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),o.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),o.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),o.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",o.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),o.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),o.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"The Service will be uninterrupted or error-free"}),o.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),o.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),o.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),o.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),o.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[o.jsx("li",{children:"Violates these Terms of Service"}),o.jsx("li",{children:"Is harmful to other users or the Service"}),o.jsx("li",{children:"Exposes us to legal liability"})]}),o.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),o.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),o.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),o.jsxs("section",{className:"space-y-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),o.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),o.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function CG(){return o.jsx("div",{className:"min-h-screen bg-background text-foreground font-sans p-6 sm:p-12 lg:p-24",children:o.jsxs("div",{className:"max-w-5xl mx-auto space-y-12",children:[o.jsxs("header",{className:"space-y-4 border-b border-border pb-8",children:[o.jsx("div",{className:"flex items-center gap-2 mb-6",children:o.jsxs(ce,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-muted-foreground hover:text-foreground",onClick:()=>window.location.href="/",children:[o.jsx(Pu,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),o.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Trace Documentation"}),o.jsx("p",{className:"text-muted-foreground text-lg",children:"A comprehensive guide to mastering every feature of Trace"})]}),o.jsxs("nav",{className:"bg-muted/30 rounded-xl p-6 border",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Quick Navigation"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[o.jsx("a",{href:"#dashboard",className:"text-sm hover:text-primary transition-colors",children:" Dashboard Overview"}),o.jsx("a",{href:"#timeline",className:"text-sm hover:text-primary transition-colors",children:" Timeline View"}),o.jsx("a",{href:"#attendance",className:"text-sm hover:text-primary transition-colors",children:" Attendance Tracking"}),o.jsx("a",{href:"#leaderboard",className:"text-sm hover:text-primary transition-colors",children:" Leaderboard System"}),o.jsx("a",{href:"#notifications",className:"text-sm hover:text-primary transition-colors",children:" Notifications"}),o.jsx("a",{href:"#notes",className:"text-sm hover:text-primary transition-colors",children:" Class Materials"}),o.jsx("a",{href:"#badges",className:"text-sm hover:text-primary transition-colors",children:" Achievements & Badges"})]})]}),o.jsxs("div",{className:"space-y-16",children:[o.jsxs("section",{id:"dashboard",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-primary/10 rounded-xl",children:o.jsx(Bv,{className:"h-6 w-6 text-primary"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Dashboard"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Your command center for all activities"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"20",y:"20",width:"180",height:"160",rx:"12",fill:"currentColor",className:"text-primary/10"}),o.jsx("rect",{x:"220",y:"20",width:"180",height:"160",rx:"12",fill:"currentColor",className:"text-emerald-500/10"}),o.jsx("rect",{x:"420",y:"20",width:"180",height:"160",rx:"12",fill:"currentColor",className:"text-amber-500/10"}),o.jsx("rect",{x:"620",y:"20",width:"160",height:"160",rx:"12",fill:"currentColor",className:"text-blue-500/10"}),o.jsx("text",{x:"110",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Metrics"}),o.jsx("text",{x:"310",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Attendance"}),o.jsx("text",{x:"510",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Due Soon"}),o.jsx("text",{x:"700",y:"110",textAnchor:"middle",className:"text-xs fill-current",children:"Rank"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Assignment Metrics"})," - Quick overview of upcoming deadlines (3 days, 7 days, overdue)"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Overall Attendance"})," - Aggregated attendance percentage across all courses"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Class Ranking"})," - See your position in the class leaderboard based on XP"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Weekly Focus Alert"})," - Highlighted banner when you have tasks due in the next 7 days"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Next Actions"})," - Smart list of assignments prioritized by urgency"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Click on any assignment card to see full details and submission links!"]})})]}),o.jsxs("section",{id:"timeline",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:o.jsx(is,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Timeline View"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Visual calendar of all your assignments"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-56 mx-auto",viewBox:"0 0 800 240",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"50",y:"40",width:"200",height:"24",rx:"4",fill:"currentColor",className:"text-blue-500/30"}),o.jsx("rect",{x:"280",y:"80",width:"150",height:"24",rx:"4",fill:"currentColor",className:"text-emerald-500/30"}),o.jsx("rect",{x:"150",y:"120",width:"180",height:"24",rx:"4",fill:"currentColor",className:"text-amber-500/30"}),o.jsx("rect",{x:"400",y:"160",width:"220",height:"24",rx:"4",fill:"currentColor",className:"text-red-500/30"}),o.jsx("rect",{x:"100",y:"200",width:"160",height:"24",rx:"4",fill:"currentColor",className:"text-purple-500/30"}),o.jsx("line",{x1:"40",y1:"10",x2:"760",y2:"10",stroke:"currentColor",strokeWidth:"2",className:"text-border"}),o.jsx("text",{x:"400",y:"250",textAnchor:"middle",className:"text-xs fill-current text-muted-foreground",children:"Time "})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Horizontal Gantt View"})," - See all assignments laid out chronologically"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Color-Coded Courses"})," - Each course has its unique color for easy identification"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Zoom Controls"})," - Adjust timeline scale to see days, weeks, or months"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Interactive Bars"})," - Click any assignment bar to view details and open submission link"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Use the zoom in/out buttons to adjust the timeline scale for better planning!"]})})]}),o.jsxs("section",{id:"attendance",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-emerald-500/10 rounded-xl",children:o.jsx(is,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Attendance Tracking"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time attendance monitoring from Google Sheets"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"none",stroke:"currentColor",strokeWidth:"12",className:"text-border"}),o.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"none",stroke:"currentColor",strokeWidth:"12",strokeDasharray:"283 377",className:"text-emerald-500"}),o.jsx("text",{x:"100",y:"105",textAnchor:"middle",className:"text-2xl font-bold fill-current",children:"75%"}),o.jsx("rect",{x:"250",y:"40",width:"500",height:"30",rx:"4",fill:"currentColor",className:"text-muted"}),o.jsx("rect",{x:"250",y:"40",width:"375",height:"30",rx:"4",fill:"currentColor",className:"text-emerald-500/50"}),o.jsx("text",{x:"500",y:"105",textAnchor:"middle",className:"text-sm fill-current",children:"15/20 Classes Attended"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Per-Course Tracking"})," - Individual attendance percentage for each subject"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Google Sheets Integration"})," - Teachers link their Google Sheets to automatically track attendance"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Status Indicators"})," - Color-coded alerts (Safe: 75%+, Warning: 70-75%, Danger: <70%)"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Privacy"})," - Password protection option for sensitive attendance sheets"]})]})]})]})]}),o.jsxs("div",{className:"bg-amber-500/5 border border-amber-500/20 rounded-lg p-4 space-y-2",children:[o.jsx("p",{className:"text-sm font-semibold",children:" Setup Required:"}),o.jsx("p",{className:"text-sm",children:"Teachers need to configure attendance sheets in Settings. Students see data only after teacher setup."})]})]}),o.jsxs("section",{id:"leaderboard",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-amber-500/10 rounded-xl",children:o.jsx(ja,{className:"h-6 w-6 text-amber-600 dark:text-amber-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Leaderboard & XP System"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Compete and earn rewards for academic progress"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-56 mx-auto",viewBox:"0 0 800 240",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"320",y:"60",width:"160",height:"120",fill:"currentColor",className:"text-amber-500/20"}),o.jsx("rect",{x:"140",y:"100",width:"160",height:"80",fill:"currentColor",className:"text-slate-400/20"}),o.jsx("rect",{x:"500",y:"120",width:"160",height:"60",fill:"currentColor",className:"text-orange-600/20"}),o.jsx("text",{x:"400",y:"130",textAnchor:"middle",className:"text-3xl font-bold fill-current text-amber-500",children:"1"}),o.jsx("text",{x:"220",y:"150",textAnchor:"middle",className:"text-2xl font-bold fill-current text-slate-500",children:"2"}),o.jsx("text",{x:"580",y:"160",textAnchor:"middle",className:"text-2xl font-bold fill-current text-orange-600",children:"3"}),o.jsx("text",{x:"400",y:"220",textAnchor:"middle",className:"text-sm fill-current",children:"Based on Total XP"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"How to Earn XP:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-emerald-500",children:"+50 XP"}),o.jsxs("div",{children:["Complete an assignment ",o.jsx("strong",{children:"before deadline"})]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-blue-500",children:"+100 XP"}),o.jsx("div",{children:"Unlock achievement badges"})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-purple-500",children:"+25 XP"}),o.jsx("div",{children:"Daily streak milestone"})]})]}),o.jsx("h3",{className:"font-semibold pt-4",children:"Leaderboard Views:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Class View"})," - Compete with classmates in your courses"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"College View"})," - See rankings across your entire institution"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Maintain a daily streak by completing at least one task each day to earn bonus XP!"]})})]}),o.jsxs("section",{id:"notifications",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-red-500/10 rounded-xl",children:o.jsx(kc,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Activity Notifications"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay updated on classmate achievements"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-background rounded-lg border",children:[o.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-full mt-1",children:o.jsx(ja,{className:"h-4 w-4 text-emerald-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Rahul Kumar"}),' earned the "Perfect Week" badge!']}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"2 hours ago"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-background rounded-lg border",children:[o.jsx("div",{className:"p-2 bg-blue-500/10 rounded-full mt-1",children:o.jsx(i3,{className:"h-4 w-4 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:"Priya Sharma"})," moved up to #3 on the leaderboard!"]}),o.jsx("p",{className:"text-xs text-muted-foreground",children:"5 hours ago"})]})]})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"What You'll See:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Badge Achievements"})," - When classmates unlock new badges"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Leaderboard Updates"})," - Significant rank changes"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Squad Activities"})," - New members joining, achievements"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Red dot on bell icon indicates unread notifications!"]})})]}),o.jsxs("section",{id:"notes",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-blue-500/10 rounded-xl",children:o.jsx(hm,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Class Materials & Notes"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Access all study resources in one place"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("svg",{className:"w-full h-48 mx-auto",viewBox:"0 0 800 200",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("rect",{x:"50",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-blue-500/10"}),o.jsx("rect",{x:"230",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-emerald-500/10"}),o.jsx("rect",{x:"410",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-purple-500/10"}),o.jsx("rect",{x:"590",y:"40",width:"150",height:"140",rx:"8",fill:"currentColor",className:"text-amber-500/10"}),o.jsx("text",{x:"125",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"PDFs"}),o.jsx("text",{x:"305",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"Links"}),o.jsx("text",{x:"485",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"Videos"}),o.jsx("text",{x:"665",y:"120",textAnchor:"middle",className:"text-xs fill-current",children:"Docs"})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Key Features:"}),o.jsxs("ul",{className:"space-y-3",children:[o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"All File Types"})," - View PDFs, documents, links, videos, and more"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Auto-Sync from Classroom"})," - Automatically fetches materials posted by teachers"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Organized by Course"})," - Filter materials by subject for easy access"]})]}),o.jsxs("li",{className:"flex gap-3",children:[o.jsx("span",{className:"text-primary",children:""}),o.jsxs("div",{children:[o.jsx("strong",{children:"Search Functionality"})," - Quickly find specific materials by title or description"]})]})]})]})]}),o.jsx("div",{className:"bg-blue-500/5 border border-blue-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Pro Tip:"})," Use the course filter dropdown to view materials for specific subjects!"]})})]}),o.jsxs("section",{id:"badges",className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-yellow-500/10 rounded-xl",children:o.jsx(ja,{className:"h-6 w-6 text-yellow-600 dark:text-yellow-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Achievements & Badges"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Unlock rewards for consistent performance"})]})]}),o.jsxs("div",{className:"bg-muted/20 rounded-xl p-8 border space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Streak Master"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"7 day streak"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Book Worm"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"50 completed"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Perfect Week"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"100% attendance"})]}),o.jsxs("div",{className:"text-center p-4 bg-background rounded-lg border",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xs font-medium",children:"Early Bird"}),o.jsx("div",{className:"text-xs text-muted-foreground",children:"Submit early"})]})]}),o.jsxs("div",{className:"space-y-4 pt-4",children:[o.jsx("h3",{className:"font-semibold",children:"Available Badges:"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Academic Excellence"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" Task Crusher (50 assignments)"}),o.jsx("li",{children:" Centurion (100 assignments)"}),o.jsx("li",{children:" Maximum Effort (200 assignments)"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Attendance"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" Perfect Week (100% weekly)"}),o.jsx("li",{children:" Attendance Champion"}),o.jsx("li",{children:" Never Miss"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Consistency"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" On Fire (3 day streak)"}),o.jsx("li",{children:" Unstoppable (7 day streak)"}),o.jsx("li",{children:" Immortal (30 day streak)"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-sm mb-2",children:" Time Management"}),o.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[o.jsx("li",{children:" Early Bird (submit early)"}),o.jsx("li",{children:" Just in Time (last minute)"}),o.jsx("li",{children:" Time Lord (never late)"})]})]})]})]})]}),o.jsx("div",{className:"bg-amber-500/5 border border-amber-500/20 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm",children:[o.jsx("strong",{children:" Challenge yourself:"})," Try to collect all badges! Each one awards bonus XP."]})})]})]}),o.jsxs("section",{className:"bg-gradient-to-br from-primary/5 to-primary/10 rounded-xl p-8 border border-primary/20",children:[o.jsx("h2",{className:"text-2xl font-bold mb-6",children:" Quick Start Guide"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"1"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Sign in with Google"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect your Google Classroom account to sync courses and assignments"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"2"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Explore the Dashboard"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Check your upcoming tasks, attendance, and class ranking"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"3"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Join or Create a Squad"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Team up with friends to compete on the leaderboard"})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center font-bold",children:"4"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold",children:"Start Earning XP"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete assignments and unlock badges to climb the leaderboard"})]})]})]})]}),o.jsxs("section",{className:"border-t pt-8",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Need Help?"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"If you have questions or need assistance with any feature, feel free to reach out:"}),o.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-primary hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]}),o.jsxs("footer",{className:"pt-8 mt-8 border-t text-sm text-muted-foreground text-center",children:[" ",new Date().getFullYear()," Trace - Your Academic Command Center"]})]})})}const jG=()=>"/";function kG(){const[t,e]=m.useState(!1),n=jG();return o.jsx(ZT,{base:n,children:o.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[o.jsx(A7,{mobileOpen:t,onMobileClose:()=>e(!1)}),o.jsx(pG,{}),o.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[o.jsx(eB,{onMobileMenuClick:()=>e(!0)}),o.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:o.jsxs(mO,{children:[o.jsx(hr,{path:"/pipeline",component:EH}),o.jsx(hr,{path:"/",children:()=>{const[,r]=am();return m.useEffect(()=>{r("/dashboard")},[r]),null}}),o.jsx(hr,{path:"/leaderboard",component:uG}),o.jsx(hr,{path:"/timeline",component:iq}),o.jsx(hr,{path:"/dashboard",component:xq}),o.jsx(hr,{path:"/notes",component:yq}),o.jsx(hr,{path:"/attendance",component:fG}),o.jsx(hr,{path:"/settings",component:oG}),o.jsx(hr,{path:"/settings/notifications",component:aG}),o.jsx(hr,{path:"/settings/integrations",component:lG}),o.jsx(hr,{component:mG})]})})]})]})})}function AG(){const{user:t,loading:e,role:n}=rt();return cn(),window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy")?o.jsx(EG,{}):window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service")?o.jsx(TG,{}):window.location.pathname==="/docs"||window.location.pathname==="/docs/"||window.location.pathname.endsWith("/docs")?o.jsx(CG,{}):e?o.jsx(QP,{message:"Authenticating..."}):t?n==="teacher"?o.jsx(SG,{}):n==="no_access"?o.jsx(NG,{}):o.jsx(kG,{}):o.jsx(uB,{})}function IG(){return o.jsx(VO,{client:UO,children:o.jsx(m7,{children:o.jsx(f7,{children:o.jsx(S7,{children:o.jsxs(bm,{children:[o.jsx(B3,{}),o.jsx(AG,{})]})})})})})}$T(document.getElementById("root")).render(o.jsx(IG,{}));
