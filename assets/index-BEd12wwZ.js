var Yw=t=>{throw TypeError(t)};var xp=(t,e,n)=>e.has(t)||Yw("Cannot "+n);var K=(t,e,n)=>(xp(t,e,"read from private field"),n?n.call(t):e.get(t)),Fe=(t,e,n)=>e.has(t)?Yw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Se=(t,e,n,r)=>(xp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ht=(t,e,n)=>(xp(t,e,"access private method"),n);var od=(t,e,n,r)=>({set _(s){Se(t,e,s,n)},get _(){return K(t,e,r)}});function QP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function oE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aE={exports:{}},Rf={},lE={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gu=Symbol.for("react.element"),XP=Symbol.for("react.portal"),YP=Symbol.for("react.fragment"),JP=Symbol.for("react.strict_mode"),ZP=Symbol.for("react.profiler"),eD=Symbol.for("react.provider"),tD=Symbol.for("react.context"),nD=Symbol.for("react.forward_ref"),rD=Symbol.for("react.suspense"),sD=Symbol.for("react.memo"),iD=Symbol.for("react.lazy"),Jw=Symbol.iterator;function oD(t){return t===null||typeof t!="object"?null:(t=Jw&&t[Jw]||t["@@iterator"],typeof t=="function"?t:null)}var cE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uE=Object.assign,dE={};function dl(t,e,n){this.props=t,this.context=e,this.refs=dE,this.updater=n||cE}dl.prototype.isReactComponent={};dl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hE(){}hE.prototype=dl.prototype;function vv(t,e,n){this.props=t,this.context=e,this.refs=dE,this.updater=n||cE}var xv=vv.prototype=new hE;xv.constructor=vv;uE(xv,dl.prototype);xv.isPureReactComponent=!0;var Zw=Array.isArray,fE=Object.prototype.hasOwnProperty,wv={current:null},mE={key:!0,ref:!0,__self:!0,__source:!0};function pE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)fE.call(e,r)&&!mE.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:gu,type:t,key:i,ref:o,props:s,_owner:wv.current}}function aD(t,e){return{$$typeof:gu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bv(t){return typeof t=="object"&&t!==null&&t.$$typeof===gu}function lD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eb=/\/+/g;function wp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lD(""+t.key):e.toString(36)}function Bd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case gu:case XP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+wp(o,0):r,Zw(s)?(n="",t!=null&&(n=t.replace(eb,"$&/")+"/"),Bd(s,e,n,"",function(u){return u})):s!=null&&(bv(s)&&(s=aD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(eb,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Zw(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+wp(i,l);o+=Bd(i,e,n,c,s)}else if(c=oD(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+wp(i,l++),o+=Bd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ad(t,e,n){if(t==null)return t;var r=[],s=0;return Bd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function cD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},Wd={transition:null},uD={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:Wd,ReactCurrentOwner:wv};function gE(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:ad,forEach:function(t,e,n){ad(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ad(t,function(){e++}),e},toArray:function(t){return ad(t,function(e){return e})||[]},only:function(t){if(!bv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ce.Component=dl;Ce.Fragment=YP;Ce.Profiler=ZP;Ce.PureComponent=vv;Ce.StrictMode=JP;Ce.Suspense=rD;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uD;Ce.act=gE;Ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=wv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)fE.call(e,c)&&!mE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:gu,type:t.type,key:s,ref:i,props:r,_owner:o}};Ce.createContext=function(t){return t={$$typeof:tD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eD,_context:t},t.Consumer=t};Ce.createElement=pE;Ce.createFactory=function(t){var e=pE.bind(null,t);return e.type=t,e};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(t){return{$$typeof:nD,render:t}};Ce.isValidElement=bv;Ce.lazy=function(t){return{$$typeof:iD,_payload:{_status:-1,_result:t},_init:cD}};Ce.memo=function(t,e){return{$$typeof:sD,type:t,compare:e===void 0?null:e}};Ce.startTransition=function(t){var e=Wd.transition;Wd.transition={};try{t()}finally{Wd.transition=e}};Ce.unstable_act=gE;Ce.useCallback=function(t,e){return cn.current.useCallback(t,e)};Ce.useContext=function(t){return cn.current.useContext(t)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};Ce.useEffect=function(t,e){return cn.current.useEffect(t,e)};Ce.useId=function(){return cn.current.useId()};Ce.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};Ce.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};Ce.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};Ce.useMemo=function(t,e){return cn.current.useMemo(t,e)};Ce.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};Ce.useRef=function(t){return cn.current.useRef(t)};Ce.useState=function(t){return cn.current.useState(t)};Ce.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};Ce.useTransition=function(){return cn.current.useTransition()};Ce.version="18.3.1";lE.exports=Ce;var m=lE.exports;const Ee=oE(m),yE=QP({__proto__:null,default:Ee},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dD=m,hD=Symbol.for("react.element"),fD=Symbol.for("react.fragment"),mD=Object.prototype.hasOwnProperty,pD=dD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gD={key:!0,ref:!0,__self:!0,__source:!0};function vE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mD.call(e,r)&&!gD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hD,type:t,key:i,ref:o,props:s,_owner:pD.current}}Rf.Fragment=fD;Rf.jsx=vE;Rf.jsxs=vE;aE.exports=Rf;var a=aE.exports,xE={exports:{}},$n={},wE={exports:{}},bE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,B){var U=O.length;O.push(B);e:for(;0<U;){var W=U-1>>>1,q=O[W];if(0<s(q,B))O[W]=B,O[U]=q,U=W;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var B=O[0],U=O.pop();if(U!==B){O[0]=U;e:for(var W=0,q=O.length,oe=q>>>1;W<oe;){var ee=2*(W+1)-1,ne=O[ee],se=ee+1,L=O[se];if(0>s(ne,U))se<q&&0>s(L,ne)?(O[W]=L,O[se]=U,W=se):(O[W]=ne,O[ee]=U,W=ee);else if(se<q&&0>s(L,U))O[W]=L,O[se]=U,W=se;else break e}}return B}function s(O,B){var U=O.sortIndex-B.sortIndex;return U!==0?U:O.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,g=!1,w=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=O)r(u),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(u)}}function I(O){if(v=!1,S(O),!w)if(n(c)!==null)w=!0,J(D);else{var B=n(u);B!==null&&Y(I,B.startTime-O)}}function D(O,B){w=!1,v&&(v=!1,b(C),C=-1),g=!0;var U=p;try{for(S(B),f=n(c);f!==null&&(!(f.expirationTime>B)||O&&!A());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var q=W(f.expirationTime<=B);B=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(c)&&r(c),S(B)}else r(c);f=n(c)}if(f!==null)var oe=!0;else{var ee=n(u);ee!==null&&Y(I,ee.startTime-B),oe=!1}return oe}finally{f=null,p=U,g=!1}}var M=!1,E=null,C=-1,N=5,k=-1;function A(){return!(t.unstable_now()-k<N)}function P(){if(E!==null){var O=t.unstable_now();k=O;var B=!0;try{B=E(!0,O)}finally{B?R():(M=!1,E=null)}}else M=!1}var R;if(typeof x=="function")R=function(){x(P)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,ie=F.port2;F.port1.onmessage=P,R=function(){ie.postMessage(null)}}else R=function(){_(P,0)};function J(O){E=O,M||(M=!0,R())}function Y(O,B){C=_(function(){O(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,J(D))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var U=p;p=B;try{return O()}finally{p=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,B){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=p;p=O;try{return B()}finally{p=U}},t.unstable_scheduleCallback=function(O,B,U){var W=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?W+U:W):U=W,O){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=U+q,O={id:h++,callback:B,priorityLevel:O,startTime:U,expirationTime:q,sortIndex:-1},U>W?(O.sortIndex=U,e(u,O),n(c)===null&&O===n(u)&&(v?(b(C),C=-1):v=!0,Y(I,U-W))):(O.sortIndex=q,e(c,O),w||g||(w=!0,J(D))),O},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(O){var B=p;return function(){var U=p;p=B;try{return O.apply(this,arguments)}finally{p=U}}}})(bE);wE.exports=bE;var yD=wE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vD=m,zn=yD;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _E=new Set,Dc={};function $o(t,e){$a(t,e),$a(t+"Capture",e)}function $a(t,e){for(Dc[t]=e,t=0;t<e.length;t++)_E.add(e[t])}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ng=Object.prototype.hasOwnProperty,xD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tb={},nb={};function wD(t){return Ng.call(nb,t)?!0:Ng.call(tb,t)?!1:xD.test(t)?nb[t]=!0:(tb[t]=!0,!1)}function bD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _D(t,e,n,r){if(e===null||typeof e>"u"||bD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bt[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bt[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bt[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bt[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bt[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bt[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bt[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bt[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bt[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var _v=/[\-:]([a-z])/g;function Sv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_v,Sv);Bt[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_v,Sv);Bt[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_v,Sv);Bt[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bt[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Bt.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bt[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ev(t,e,n,r){var s=Bt.hasOwnProperty(e)?Bt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_D(e,n,s,r)&&(n=null),r||s===null?wD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ms=vD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ld=Symbol.for("react.element"),sa=Symbol.for("react.portal"),ia=Symbol.for("react.fragment"),Tv=Symbol.for("react.strict_mode"),Cg=Symbol.for("react.profiler"),SE=Symbol.for("react.provider"),EE=Symbol.for("react.context"),Nv=Symbol.for("react.forward_ref"),kg=Symbol.for("react.suspense"),Ig=Symbol.for("react.suspense_list"),Cv=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),TE=Symbol.for("react.offscreen"),rb=Symbol.iterator;function Ql(t){return t===null||typeof t!="object"?null:(t=rb&&t[rb]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,bp;function ic(t){if(bp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bp=e&&e[1]||""}return`
`+bp+t}var _p=!1;function Sp(t,e){if(!t||_p)return"";_p=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{_p=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ic(t):""}function SD(t){switch(t.tag){case 5:return ic(t.type);case 16:return ic("Lazy");case 13:return ic("Suspense");case 19:return ic("SuspenseList");case 0:case 2:case 15:return t=Sp(t.type,!1),t;case 11:return t=Sp(t.type.render,!1),t;case 1:return t=Sp(t.type,!0),t;default:return""}}function Ag(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ia:return"Fragment";case sa:return"Portal";case Cg:return"Profiler";case Tv:return"StrictMode";case kg:return"Suspense";case Ig:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case EE:return(t.displayName||"Context")+".Consumer";case SE:return(t._context.displayName||"Context")+".Provider";case Nv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cv:return e=t.displayName||null,e!==null?e:Ag(t.type)||"Memo";case Js:e=t._payload,t=t._init;try{return Ag(t(e))}catch{}}return null}function ED(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ag(e);case 8:return e===Tv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ki(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function NE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TD(t){var e=NE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cd(t){t._valueTracker||(t._valueTracker=TD(t))}function CE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=NE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jg(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function sb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ki(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kE(t,e){e=e.checked,e!=null&&Ev(t,"checked",e,!1)}function Rg(t,e){kE(t,e);var n=ki(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pg(t,e.type,ki(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ib(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pg(t,e,n){(e!=="number"||xh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oc=Array.isArray;function va(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ki(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Dg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ob(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(oc(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ki(n)}}function IE(t,e){var n=ki(e.value),r=ki(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ab(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function AE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?AE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ud,jE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ud=ud||document.createElement("div"),ud.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ud.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Mc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ND=["Webkit","ms","Moz","O"];Object.keys(mc).forEach(function(t){ND.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mc[e]=mc[t]})});function RE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mc.hasOwnProperty(t)&&mc[t]?(""+e).trim():e+"px"}function PE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=RE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var CD=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Og(t,e){if(e){if(CD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function Lg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vg=null;function kv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fg=null,xa=null,wa=null;function lb(t){if(t=xu(t)){if(typeof Fg!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Lf(e),Fg(t.stateNode,t.type,e))}}function DE(t){xa?wa?wa.push(t):wa=[t]:xa=t}function ME(){if(xa){var t=xa,e=wa;if(wa=xa=null,lb(t),e)for(t=0;t<e.length;t++)lb(e[t])}}function OE(t,e){return t(e)}function LE(){}var Ep=!1;function VE(t,e,n){if(Ep)return t(e,n);Ep=!0;try{return OE(t,e,n)}finally{Ep=!1,(xa!==null||wa!==null)&&(LE(),ME())}}function Oc(t,e){var n=t.stateNode;if(n===null)return null;var r=Lf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var zg=!1;if(_s)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){zg=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{zg=!1}function kD(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var pc=!1,wh=null,bh=!1,Ug=null,ID={onError:function(t){pc=!0,wh=t}};function AD(t,e,n,r,s,i,o,l,c){pc=!1,wh=null,kD.apply(ID,arguments)}function jD(t,e,n,r,s,i,o,l,c){if(AD.apply(this,arguments),pc){if(pc){var u=wh;pc=!1,wh=null}else throw Error(Z(198));bh||(bh=!0,Ug=u)}}function Bo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function FE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cb(t){if(Bo(t)!==t)throw Error(Z(188))}function RD(t){var e=t.alternate;if(!e){if(e=Bo(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return cb(s),t;if(i===r)return cb(s),e;i=i.sibling}throw Error(Z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function zE(t){return t=RD(t),t!==null?UE(t):null}function UE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UE(t);if(e!==null)return e;t=t.sibling}return null}var $E=zn.unstable_scheduleCallback,ub=zn.unstable_cancelCallback,PD=zn.unstable_shouldYield,DD=zn.unstable_requestPaint,yt=zn.unstable_now,MD=zn.unstable_getCurrentPriorityLevel,Iv=zn.unstable_ImmediatePriority,BE=zn.unstable_UserBlockingPriority,_h=zn.unstable_NormalPriority,OD=zn.unstable_LowPriority,WE=zn.unstable_IdlePriority,Pf=null,Xr=null;function LD(t){if(Xr&&typeof Xr.onCommitFiberRoot=="function")try{Xr.onCommitFiberRoot(Pf,t,void 0,(t.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:zD,VD=Math.log,FD=Math.LN2;function zD(t){return t>>>=0,t===0?32:31-(VD(t)/FD|0)|0}var dd=64,hd=4194304;function ac(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=ac(l):(i&=o,i!==0&&(r=ac(i)))}else o=n&~s,o!==0?r=ac(o):i!==0&&(r=ac(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wr(e),s=1<<n,r|=t[n],e&=~s;return r}function UD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $D(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-wr(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=UD(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function $g(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function HE(){var t=dd;return dd<<=1,!(dd&4194240)&&(dd=64),t}function Tp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wr(e),t[e]=n}function BD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-wr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Av(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Be=0;function qE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GE,jv,KE,QE,XE,Bg=!1,fd=[],mi=null,pi=null,gi=null,Lc=new Map,Vc=new Map,ti=[],WD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function db(t,e){switch(t){case"focusin":case"focusout":mi=null;break;case"dragenter":case"dragleave":pi=null;break;case"mouseover":case"mouseout":gi=null;break;case"pointerover":case"pointerout":Lc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(e.pointerId)}}function Yl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=xu(e),e!==null&&jv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function HD(t,e,n,r,s){switch(e){case"focusin":return mi=Yl(mi,t,e,n,r,s),!0;case"dragenter":return pi=Yl(pi,t,e,n,r,s),!0;case"mouseover":return gi=Yl(gi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Lc.set(i,Yl(Lc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vc.set(i,Yl(Vc.get(i)||null,t,e,n,r,s)),!0}return!1}function YE(t){var e=uo(t.target);if(e!==null){var n=Bo(e);if(n!==null){if(e=n.tag,e===13){if(e=FE(n),e!==null){t.blockedOn=e,XE(t.priority,function(){KE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vg=r,n.target.dispatchEvent(r),Vg=null}else return e=xu(n),e!==null&&jv(e),t.blockedOn=n,!1;e.shift()}return!0}function hb(t,e,n){Hd(t)&&n.delete(e)}function qD(){Bg=!1,mi!==null&&Hd(mi)&&(mi=null),pi!==null&&Hd(pi)&&(pi=null),gi!==null&&Hd(gi)&&(gi=null),Lc.forEach(hb),Vc.forEach(hb)}function Jl(t,e){t.blockedOn===e&&(t.blockedOn=null,Bg||(Bg=!0,zn.unstable_scheduleCallback(zn.unstable_NormalPriority,qD)))}function Fc(t){function e(s){return Jl(s,t)}if(0<fd.length){Jl(fd[0],t);for(var n=1;n<fd.length;n++){var r=fd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mi!==null&&Jl(mi,t),pi!==null&&Jl(pi,t),gi!==null&&Jl(gi,t),Lc.forEach(e),Vc.forEach(e),n=0;n<ti.length;n++)r=ti[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ti.length&&(n=ti[0],n.blockedOn===null);)YE(n),n.blockedOn===null&&ti.shift()}var ba=Ms.ReactCurrentBatchConfig,Eh=!0;function GD(t,e,n,r){var s=Be,i=ba.transition;ba.transition=null;try{Be=1,Rv(t,e,n,r)}finally{Be=s,ba.transition=i}}function KD(t,e,n,r){var s=Be,i=ba.transition;ba.transition=null;try{Be=4,Rv(t,e,n,r)}finally{Be=s,ba.transition=i}}function Rv(t,e,n,r){if(Eh){var s=Wg(t,e,n,r);if(s===null)Mp(t,e,r,Th,n),db(t,r);else if(HD(s,t,e,n,r))r.stopPropagation();else if(db(t,r),e&4&&-1<WD.indexOf(t)){for(;s!==null;){var i=xu(s);if(i!==null&&GE(i),i=Wg(t,e,n,r),i===null&&Mp(t,e,r,Th,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Mp(t,e,r,null,n)}}var Th=null;function Wg(t,e,n,r){if(Th=null,t=kv(r),t=uo(t),t!==null)if(e=Bo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=FE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Th=t,null}function JE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MD()){case Iv:return 1;case BE:return 4;case _h:case OD:return 16;case WE:return 536870912;default:return 16}default:return 16}}var di=null,Pv=null,qd=null;function ZE(){if(qd)return qd;var t,e=Pv,n=e.length,r,s="value"in di?di.value:di.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return qd=s.slice(t,1<r?1-r:void 0)}function Gd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function md(){return!0}function fb(){return!1}function Bn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?md:fb,this.isPropagationStopped=fb,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=md)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=md)},persist:function(){},isPersistent:md}),e}var hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dv=Bn(hl),vu=ct({},hl,{view:0,detail:0}),QD=Bn(vu),Np,Cp,Zl,Df=ct({},vu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zl&&(Zl&&t.type==="mousemove"?(Np=t.screenX-Zl.screenX,Cp=t.screenY-Zl.screenY):Cp=Np=0,Zl=t),Np)},movementY:function(t){return"movementY"in t?t.movementY:Cp}}),mb=Bn(Df),XD=ct({},Df,{dataTransfer:0}),YD=Bn(XD),JD=ct({},vu,{relatedTarget:0}),kp=Bn(JD),ZD=ct({},hl,{animationName:0,elapsedTime:0,pseudoElement:0}),e4=Bn(ZD),t4=ct({},hl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),n4=Bn(t4),r4=ct({},hl,{data:0}),pb=Bn(r4),s4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},o4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=o4[t])?!!e[t]:!1}function Mv(){return a4}var l4=ct({},vu,{key:function(t){if(t.key){var e=s4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?i4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mv,charCode:function(t){return t.type==="keypress"?Gd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),c4=Bn(l4),u4=ct({},Df,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gb=Bn(u4),d4=ct({},vu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mv}),h4=Bn(d4),f4=ct({},hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),m4=Bn(f4),p4=ct({},Df,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),g4=Bn(p4),y4=[9,13,27,32],Ov=_s&&"CompositionEvent"in window,gc=null;_s&&"documentMode"in document&&(gc=document.documentMode);var v4=_s&&"TextEvent"in window&&!gc,eT=_s&&(!Ov||gc&&8<gc&&11>=gc),yb=" ",vb=!1;function tT(t,e){switch(t){case"keyup":return y4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var oa=!1;function x4(t,e){switch(t){case"compositionend":return nT(e);case"keypress":return e.which!==32?null:(vb=!0,yb);case"textInput":return t=e.data,t===yb&&vb?null:t;default:return null}}function w4(t,e){if(oa)return t==="compositionend"||!Ov&&tT(t,e)?(t=ZE(),qd=Pv=di=null,oa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eT&&e.locale!=="ko"?null:e.data;default:return null}}var b4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!b4[t.type]:e==="textarea"}function rT(t,e,n,r){DE(r),e=Nh(e,"onChange"),0<e.length&&(n=new Dv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yc=null,zc=null;function _4(t){mT(t,0)}function Mf(t){var e=ca(t);if(CE(e))return t}function S4(t,e){if(t==="change")return e}var sT=!1;if(_s){var Ip;if(_s){var Ap="oninput"in document;if(!Ap){var wb=document.createElement("div");wb.setAttribute("oninput","return;"),Ap=typeof wb.oninput=="function"}Ip=Ap}else Ip=!1;sT=Ip&&(!document.documentMode||9<document.documentMode)}function bb(){yc&&(yc.detachEvent("onpropertychange",iT),zc=yc=null)}function iT(t){if(t.propertyName==="value"&&Mf(zc)){var e=[];rT(e,zc,t,kv(t)),VE(_4,e)}}function E4(t,e,n){t==="focusin"?(bb(),yc=e,zc=n,yc.attachEvent("onpropertychange",iT)):t==="focusout"&&bb()}function T4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mf(zc)}function N4(t,e){if(t==="click")return Mf(e)}function C4(t,e){if(t==="input"||t==="change")return Mf(e)}function k4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nr=typeof Object.is=="function"?Object.is:k4;function Uc(t,e){if(Nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ng.call(e,s)||!Nr(t[s],e[s]))return!1}return!0}function _b(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sb(t,e){var n=_b(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_b(n)}}function oT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aT(){for(var t=window,e=xh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xh(t.document)}return e}function Lv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function I4(t){var e=aT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oT(n.ownerDocument.documentElement,n)){if(r!==null&&Lv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Sb(n,i);var o=Sb(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var A4=_s&&"documentMode"in document&&11>=document.documentMode,aa=null,Hg=null,vc=null,qg=!1;function Eb(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qg||aa==null||aa!==xh(r)||(r=aa,"selectionStart"in r&&Lv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vc&&Uc(vc,r)||(vc=r,r=Nh(Hg,"onSelect"),0<r.length&&(e=new Dv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=aa)))}function pd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var la={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},jp={},lT={};_s&&(lT=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function Of(t){if(jp[t])return jp[t];if(!la[t])return t;var e=la[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lT)return jp[t]=e[n];return t}var cT=Of("animationend"),uT=Of("animationiteration"),dT=Of("animationstart"),hT=Of("transitionend"),fT=new Map,Tb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ui(t,e){fT.set(t,e),$o(e,[t])}for(var Rp=0;Rp<Tb.length;Rp++){var Pp=Tb[Rp],j4=Pp.toLowerCase(),R4=Pp[0].toUpperCase()+Pp.slice(1);Ui(j4,"on"+R4)}Ui(cT,"onAnimationEnd");Ui(uT,"onAnimationIteration");Ui(dT,"onAnimationStart");Ui("dblclick","onDoubleClick");Ui("focusin","onFocus");Ui("focusout","onBlur");Ui(hT,"onTransitionEnd");$a("onMouseEnter",["mouseout","mouseover"]);$a("onMouseLeave",["mouseout","mouseover"]);$a("onPointerEnter",["pointerout","pointerover"]);$a("onPointerLeave",["pointerout","pointerover"]);$o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$o("onBeforeInput",["compositionend","keypress","textInput","paste"]);$o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P4=new Set("cancel close invalid load scroll toggle".split(" ").concat(lc));function Nb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jD(r,e,void 0,t),t.currentTarget=null}function mT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Nb(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Nb(s,l,u),i=c}}}if(bh)throw t=Ug,bh=!1,Ug=null,t}function tt(t,e){var n=e[Yg];n===void 0&&(n=e[Yg]=new Set);var r=t+"__bubble";n.has(r)||(pT(e,t,2,!1),n.add(r))}function Dp(t,e,n){var r=0;e&&(r|=4),pT(n,t,r,e)}var gd="_reactListening"+Math.random().toString(36).slice(2);function $c(t){if(!t[gd]){t[gd]=!0,_E.forEach(function(n){n!=="selectionchange"&&(P4.has(n)||Dp(n,!1,t),Dp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gd]||(e[gd]=!0,Dp("selectionchange",!1,e))}}function pT(t,e,n,r){switch(JE(e)){case 1:var s=GD;break;case 4:s=KD;break;default:s=Rv}n=s.bind(null,e,n,t),s=void 0,!zg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Mp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=uo(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}VE(function(){var u=i,h=kv(n),f=[];e:{var p=fT.get(t);if(p!==void 0){var g=Dv,w=t;switch(t){case"keypress":if(Gd(n)===0)break e;case"keydown":case"keyup":g=c4;break;case"focusin":w="focus",g=kp;break;case"focusout":w="blur",g=kp;break;case"beforeblur":case"afterblur":g=kp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=mb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=YD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=h4;break;case cT:case uT:case dT:g=e4;break;case hT:g=m4;break;case"scroll":g=QD;break;case"wheel":g=g4;break;case"copy":case"cut":case"paste":g=n4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=gb}var v=(e&4)!==0,_=!v&&t==="scroll",b=v?p!==null?p+"Capture":null:p;v=[];for(var x=u,S;x!==null;){S=x;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,b!==null&&(I=Oc(x,b),I!=null&&v.push(Bc(x,I,S)))),_)break;x=x.return}0<v.length&&(p=new g(p,w,null,n,h),f.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Vg&&(w=n.relatedTarget||n.fromElement)&&(uo(w)||w[Ss]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(w=n.relatedTarget||n.toElement,g=u,w=w?uo(w):null,w!==null&&(_=Bo(w),w!==_||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=u),g!==w)){if(v=mb,I="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=gb,I="onPointerLeave",b="onPointerEnter",x="pointer"),_=g==null?p:ca(g),S=w==null?p:ca(w),p=new v(I,x+"leave",g,n,h),p.target=_,p.relatedTarget=S,I=null,uo(h)===u&&(v=new v(b,x+"enter",w,n,h),v.target=S,v.relatedTarget=_,I=v),_=I,g&&w)t:{for(v=g,b=w,x=0,S=v;S;S=Xo(S))x++;for(S=0,I=b;I;I=Xo(I))S++;for(;0<x-S;)v=Xo(v),x--;for(;0<S-x;)b=Xo(b),S--;for(;x--;){if(v===b||b!==null&&v===b.alternate)break t;v=Xo(v),b=Xo(b)}v=null}else v=null;g!==null&&Cb(f,p,g,v,!1),w!==null&&_!==null&&Cb(f,_,w,v,!0)}}e:{if(p=u?ca(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=S4;else if(xb(p))if(sT)D=C4;else{D=T4;var M=E4}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=N4);if(D&&(D=D(t,u))){rT(f,D,n,h);break e}M&&M(t,p,u),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Pg(p,"number",p.value)}switch(M=u?ca(u):window,t){case"focusin":(xb(M)||M.contentEditable==="true")&&(aa=M,Hg=u,vc=null);break;case"focusout":vc=Hg=aa=null;break;case"mousedown":qg=!0;break;case"contextmenu":case"mouseup":case"dragend":qg=!1,Eb(f,n,h);break;case"selectionchange":if(A4)break;case"keydown":case"keyup":Eb(f,n,h)}var E;if(Ov)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else oa?tT(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(eT&&n.locale!=="ko"&&(oa||C!=="onCompositionStart"?C==="onCompositionEnd"&&oa&&(E=ZE()):(di=h,Pv="value"in di?di.value:di.textContent,oa=!0)),M=Nh(u,C),0<M.length&&(C=new pb(C,t,null,n,h),f.push({event:C,listeners:M}),E?C.data=E:(E=nT(n),E!==null&&(C.data=E)))),(E=v4?x4(t,n):w4(t,n))&&(u=Nh(u,"onBeforeInput"),0<u.length&&(h=new pb("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=E))}mT(f,e)})}function Bc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Oc(t,n),i!=null&&r.unshift(Bc(t,i,s)),i=Oc(t,e),i!=null&&r.push(Bc(t,i,s))),t=t.return}return r}function Xo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cb(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Oc(n,i),c!=null&&o.unshift(Bc(n,c,l))):s||(c=Oc(n,i),c!=null&&o.push(Bc(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var D4=/\r\n?/g,M4=/\u0000|\uFFFD/g;function kb(t){return(typeof t=="string"?t:""+t).replace(D4,`
`).replace(M4,"")}function yd(t,e,n){if(e=kb(e),kb(t)!==e&&n)throw Error(Z(425))}function Ch(){}var Gg=null,Kg=null;function Qg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xg=typeof setTimeout=="function"?setTimeout:void 0,O4=typeof clearTimeout=="function"?clearTimeout:void 0,Ib=typeof Promise=="function"?Promise:void 0,L4=typeof queueMicrotask=="function"?queueMicrotask:typeof Ib<"u"?function(t){return Ib.resolve(null).then(t).catch(V4)}:Xg;function V4(t){setTimeout(function(){throw t})}function Op(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Fc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Fc(e)}function yi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ab(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fl=Math.random().toString(36).slice(2),Hr="__reactFiber$"+fl,Wc="__reactProps$"+fl,Ss="__reactContainer$"+fl,Yg="__reactEvents$"+fl,F4="__reactListeners$"+fl,z4="__reactHandles$"+fl;function uo(t){var e=t[Hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ss]||n[Hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ab(t);t!==null;){if(n=t[Hr])return n;t=Ab(t)}return e}t=n,n=t.parentNode}return null}function xu(t){return t=t[Hr]||t[Ss],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ca(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Lf(t){return t[Wc]||null}var Jg=[],ua=-1;function $i(t){return{current:t}}function nt(t){0>ua||(t.current=Jg[ua],Jg[ua]=null,ua--)}function Ye(t,e){ua++,Jg[ua]=t.current,t.current=e}var Ii={},tn=$i(Ii),bn=$i(!1),No=Ii;function Ba(t,e){var n=t.type.contextTypes;if(!n)return Ii;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function _n(t){return t=t.childContextTypes,t!=null}function kh(){nt(bn),nt(tn)}function jb(t,e,n){if(tn.current!==Ii)throw Error(Z(168));Ye(tn,e),Ye(bn,n)}function gT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Z(108,ED(t)||"Unknown",s));return ct({},n,r)}function Ih(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ii,No=tn.current,Ye(tn,t),Ye(bn,bn.current),!0}function Rb(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=gT(t,e,No),r.__reactInternalMemoizedMergedChildContext=t,nt(bn),nt(tn),Ye(tn,t)):nt(bn),Ye(bn,n)}var ms=null,Vf=!1,Lp=!1;function yT(t){ms===null?ms=[t]:ms.push(t)}function U4(t){Vf=!0,yT(t)}function Bi(){if(!Lp&&ms!==null){Lp=!0;var t=0,e=Be;try{var n=ms;for(Be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ms=null,Vf=!1}catch(s){throw ms!==null&&(ms=ms.slice(t+1)),$E(Iv,Bi),s}finally{Be=e,Lp=!1}}return null}var da=[],ha=0,Ah=null,jh=0,Kn=[],Qn=0,Co=null,ps=1,gs="";function oo(t,e){da[ha++]=jh,da[ha++]=Ah,Ah=t,jh=e}function vT(t,e,n){Kn[Qn++]=ps,Kn[Qn++]=gs,Kn[Qn++]=Co,Co=t;var r=ps;t=gs;var s=32-wr(r)-1;r&=~(1<<s),n+=1;var i=32-wr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,ps=1<<32-wr(e)+s|n<<s|r,gs=i+t}else ps=1<<i|n<<s|r,gs=t}function Vv(t){t.return!==null&&(oo(t,1),vT(t,1,0))}function Fv(t){for(;t===Ah;)Ah=da[--ha],da[ha]=null,jh=da[--ha],da[ha]=null;for(;t===Co;)Co=Kn[--Qn],Kn[Qn]=null,gs=Kn[--Qn],Kn[Qn]=null,ps=Kn[--Qn],Kn[Qn]=null}var Ln=null,Mn=null,it=!1,gr=null;function xT(t,e){var n=Jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Pb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ln=t,Mn=yi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ln=t,Mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Co!==null?{id:ps,overflow:gs}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ln=t,Mn=null,!0):!1;default:return!1}}function Zg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ey(t){if(it){var e=Mn;if(e){var n=e;if(!Pb(t,e)){if(Zg(t))throw Error(Z(418));e=yi(n.nextSibling);var r=Ln;e&&Pb(t,e)?xT(r,n):(t.flags=t.flags&-4097|2,it=!1,Ln=t)}}else{if(Zg(t))throw Error(Z(418));t.flags=t.flags&-4097|2,it=!1,Ln=t}}}function Db(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ln=t}function vd(t){if(t!==Ln)return!1;if(!it)return Db(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Qg(t.type,t.memoizedProps)),e&&(e=Mn)){if(Zg(t))throw wT(),Error(Z(418));for(;e;)xT(t,e),e=yi(e.nextSibling)}if(Db(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mn=yi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mn=null}}else Mn=Ln?yi(t.stateNode.nextSibling):null;return!0}function wT(){for(var t=Mn;t;)t=yi(t.nextSibling)}function Wa(){Mn=Ln=null,it=!1}function zv(t){gr===null?gr=[t]:gr.push(t)}var $4=Ms.ReactCurrentBatchConfig;function ec(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function xd(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mb(t){var e=t._init;return e(t._payload)}function bT(t){function e(b,x){if(t){var S=b.deletions;S===null?(b.deletions=[x],b.flags|=16):S.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=bi(b,x),b.index=0,b.sibling=null,b}function i(b,x,S){return b.index=S,t?(S=b.alternate,S!==null?(S=S.index,S<x?(b.flags|=2,x):S):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,S,I){return x===null||x.tag!==6?(x=Wp(S,b.mode,I),x.return=b,x):(x=s(x,S),x.return=b,x)}function c(b,x,S,I){var D=S.type;return D===ia?h(b,x,S.props.children,I,S.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Js&&Mb(D)===x.type)?(I=s(x,S.props),I.ref=ec(b,x,S),I.return=b,I):(I=eh(S.type,S.key,S.props,null,b.mode,I),I.ref=ec(b,x,S),I.return=b,I)}function u(b,x,S,I){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Hp(S,b.mode,I),x.return=b,x):(x=s(x,S.children||[]),x.return=b,x)}function h(b,x,S,I,D){return x===null||x.tag!==7?(x=bo(S,b.mode,I,D),x.return=b,x):(x=s(x,S),x.return=b,x)}function f(b,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Wp(""+x,b.mode,S),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ld:return S=eh(x.type,x.key,x.props,null,b.mode,S),S.ref=ec(b,null,x),S.return=b,S;case sa:return x=Hp(x,b.mode,S),x.return=b,x;case Js:var I=x._init;return f(b,I(x._payload),S)}if(oc(x)||Ql(x))return x=bo(x,b.mode,S,null),x.return=b,x;xd(b,x)}return null}function p(b,x,S,I){var D=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:l(b,x,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ld:return S.key===D?c(b,x,S,I):null;case sa:return S.key===D?u(b,x,S,I):null;case Js:return D=S._init,p(b,x,D(S._payload),I)}if(oc(S)||Ql(S))return D!==null?null:h(b,x,S,I,null);xd(b,S)}return null}function g(b,x,S,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return b=b.get(S)||null,l(x,b,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ld:return b=b.get(I.key===null?S:I.key)||null,c(x,b,I,D);case sa:return b=b.get(I.key===null?S:I.key)||null,u(x,b,I,D);case Js:var M=I._init;return g(b,x,S,M(I._payload),D)}if(oc(I)||Ql(I))return b=b.get(S)||null,h(x,b,I,D,null);xd(x,I)}return null}function w(b,x,S,I){for(var D=null,M=null,E=x,C=x=0,N=null;E!==null&&C<S.length;C++){E.index>C?(N=E,E=null):N=E.sibling;var k=p(b,E,S[C],I);if(k===null){E===null&&(E=N);break}t&&E&&k.alternate===null&&e(b,E),x=i(k,x,C),M===null?D=k:M.sibling=k,M=k,E=N}if(C===S.length)return n(b,E),it&&oo(b,C),D;if(E===null){for(;C<S.length;C++)E=f(b,S[C],I),E!==null&&(x=i(E,x,C),M===null?D=E:M.sibling=E,M=E);return it&&oo(b,C),D}for(E=r(b,E);C<S.length;C++)N=g(E,b,C,S[C],I),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?C:N.key),x=i(N,x,C),M===null?D=N:M.sibling=N,M=N);return t&&E.forEach(function(A){return e(b,A)}),it&&oo(b,C),D}function v(b,x,S,I){var D=Ql(S);if(typeof D!="function")throw Error(Z(150));if(S=D.call(S),S==null)throw Error(Z(151));for(var M=D=null,E=x,C=x=0,N=null,k=S.next();E!==null&&!k.done;C++,k=S.next()){E.index>C?(N=E,E=null):N=E.sibling;var A=p(b,E,k.value,I);if(A===null){E===null&&(E=N);break}t&&E&&A.alternate===null&&e(b,E),x=i(A,x,C),M===null?D=A:M.sibling=A,M=A,E=N}if(k.done)return n(b,E),it&&oo(b,C),D;if(E===null){for(;!k.done;C++,k=S.next())k=f(b,k.value,I),k!==null&&(x=i(k,x,C),M===null?D=k:M.sibling=k,M=k);return it&&oo(b,C),D}for(E=r(b,E);!k.done;C++,k=S.next())k=g(E,b,C,k.value,I),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?C:k.key),x=i(k,x,C),M===null?D=k:M.sibling=k,M=k);return t&&E.forEach(function(P){return e(b,P)}),it&&oo(b,C),D}function _(b,x,S,I){if(typeof S=="object"&&S!==null&&S.type===ia&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ld:e:{for(var D=S.key,M=x;M!==null;){if(M.key===D){if(D=S.type,D===ia){if(M.tag===7){n(b,M.sibling),x=s(M,S.props.children),x.return=b,b=x;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Js&&Mb(D)===M.type){n(b,M.sibling),x=s(M,S.props),x.ref=ec(b,M,S),x.return=b,b=x;break e}n(b,M);break}else e(b,M);M=M.sibling}S.type===ia?(x=bo(S.props.children,b.mode,I,S.key),x.return=b,b=x):(I=eh(S.type,S.key,S.props,null,b.mode,I),I.ref=ec(b,x,S),I.return=b,b=I)}return o(b);case sa:e:{for(M=S.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(b,x.sibling),x=s(x,S.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=Hp(S,b.mode,I),x.return=b,b=x}return o(b);case Js:return M=S._init,_(b,x,M(S._payload),I)}if(oc(S))return w(b,x,S,I);if(Ql(S))return v(b,x,S,I);xd(b,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(b,x.sibling),x=s(x,S),x.return=b,b=x):(n(b,x),x=Wp(S,b.mode,I),x.return=b,b=x),o(b)):n(b,x)}return _}var Ha=bT(!0),_T=bT(!1),Rh=$i(null),Ph=null,fa=null,Uv=null;function $v(){Uv=fa=Ph=null}function Bv(t){var e=Rh.current;nt(Rh),t._currentValue=e}function ty(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _a(t,e){Ph=t,Uv=fa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wn=!0),t.firstContext=null)}function nr(t){var e=t._currentValue;if(Uv!==t)if(t={context:t,memoizedValue:e,next:null},fa===null){if(Ph===null)throw Error(Z(308));fa=t,Ph.dependencies={lanes:0,firstContext:t}}else fa=fa.next=t;return e}var ho=null;function Wv(t){ho===null?ho=[t]:ho.push(t)}function ST(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Wv(e)):(n.next=s.next,s.next=n),e.interleaved=n,Es(t,r)}function Es(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zs=!1;function Hv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ET(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ws(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,De&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Es(t,n)}return s=r.interleaved,s===null?(e.next=e,Wv(r)):(e.next=s.next,s.next=e),r.interleaved=e,Es(t,n)}function Kd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Av(t,n)}}function Ob(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dh(t,e,n,r){var s=t.updateQueue;Zs=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,v=l;switch(p=e,g=n,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(g,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,p=typeof w=="function"?w.call(g,f,p):w,p==null)break e;f=ct({},f,p);break e;case 2:Zs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Io|=o,t.lanes=o,t.memoizedState=f}}function Lb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Z(191,s));s.call(r)}}}var wu={},Yr=$i(wu),Hc=$i(wu),qc=$i(wu);function fo(t){if(t===wu)throw Error(Z(174));return t}function qv(t,e){switch(Ye(qc,e),Ye(Hc,t),Ye(Yr,wu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mg(e,t)}nt(Yr),Ye(Yr,e)}function qa(){nt(Yr),nt(Hc),nt(qc)}function TT(t){fo(qc.current);var e=fo(Yr.current),n=Mg(e,t.type);e!==n&&(Ye(Hc,t),Ye(Yr,n))}function Gv(t){Hc.current===t&&(nt(Yr),nt(Hc))}var ot=$i(0);function Mh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vp=[];function Kv(){for(var t=0;t<Vp.length;t++)Vp[t]._workInProgressVersionPrimary=null;Vp.length=0}var Qd=Ms.ReactCurrentDispatcher,Fp=Ms.ReactCurrentBatchConfig,ko=0,lt=null,Nt=null,Pt=null,Oh=!1,xc=!1,Gc=0,B4=0;function qt(){throw Error(Z(321))}function Qv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nr(t[n],e[n]))return!1;return!0}function Xv(t,e,n,r,s,i){if(ko=i,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qd.current=t===null||t.memoizedState===null?G4:K4,t=n(r,s),xc){i=0;do{if(xc=!1,Gc=0,25<=i)throw Error(Z(301));i+=1,Pt=Nt=null,e.updateQueue=null,Qd.current=Q4,t=n(r,s)}while(xc)}if(Qd.current=Lh,e=Nt!==null&&Nt.next!==null,ko=0,Pt=Nt=lt=null,Oh=!1,e)throw Error(Z(300));return t}function Yv(){var t=Gc!==0;return Gc=0,t}function zr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?lt.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function rr(){if(Nt===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Pt===null?lt.memoizedState:Pt.next;if(e!==null)Pt=e,Nt=t;else{if(t===null)throw Error(Z(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Pt===null?lt.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Kc(t,e){return typeof e=="function"?e(t):e}function zp(t){var e=rr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=Nt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((ko&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,lt.lanes|=h,Io|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Nr(r,e.memoizedState)||(wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,lt.lanes|=i,Io|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Up(t){var e=rr(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Nr(i,e.memoizedState)||(wn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function NT(){}function CT(t,e){var n=lt,r=rr(),s=e(),i=!Nr(r.memoizedState,s);if(i&&(r.memoizedState=s,wn=!0),r=r.queue,Jv(AT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,Qc(9,IT.bind(null,n,r,s,e),void 0,null),Ot===null)throw Error(Z(349));ko&30||kT(n,e,s)}return s}function kT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function IT(t,e,n,r){e.value=n,e.getSnapshot=r,jT(e)&&RT(t)}function AT(t,e,n){return n(function(){jT(e)&&RT(t)})}function jT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nr(t,n)}catch{return!0}}function RT(t){var e=Es(t,1);e!==null&&br(e,t,1,-1)}function Vb(t){var e=zr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kc,lastRenderedState:t},e.queue=t,t=t.dispatch=q4.bind(null,lt,t),[e.memoizedState,t]}function Qc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function PT(){return rr().memoizedState}function Xd(t,e,n,r){var s=zr();lt.flags|=t,s.memoizedState=Qc(1|e,n,void 0,r===void 0?null:r)}function Ff(t,e,n,r){var s=rr();r=r===void 0?null:r;var i=void 0;if(Nt!==null){var o=Nt.memoizedState;if(i=o.destroy,r!==null&&Qv(r,o.deps)){s.memoizedState=Qc(e,n,i,r);return}}lt.flags|=t,s.memoizedState=Qc(1|e,n,i,r)}function Fb(t,e){return Xd(8390656,8,t,e)}function Jv(t,e){return Ff(2048,8,t,e)}function DT(t,e){return Ff(4,2,t,e)}function MT(t,e){return Ff(4,4,t,e)}function OT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LT(t,e,n){return n=n!=null?n.concat([t]):null,Ff(4,4,OT.bind(null,e,t),n)}function Zv(){}function VT(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function FT(t,e){var n=rr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zT(t,e,n){return ko&21?(Nr(n,e)||(n=HE(),lt.lanes|=n,Io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wn=!0),t.memoizedState=n)}function W4(t,e){var n=Be;Be=n!==0&&4>n?n:4,t(!0);var r=Fp.transition;Fp.transition={};try{t(!1),e()}finally{Be=n,Fp.transition=r}}function UT(){return rr().memoizedState}function H4(t,e,n){var r=wi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$T(t))BT(e,n);else if(n=ST(t,e,n,r),n!==null){var s=ln();br(n,t,r,s),WT(n,e,r)}}function q4(t,e,n){var r=wi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($T(t))BT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Nr(l,o)){var c=e.interleaved;c===null?(s.next=s,Wv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=ST(t,e,s,r),n!==null&&(s=ln(),br(n,t,r,s),WT(n,e,r))}}function $T(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function BT(t,e){xc=Oh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function WT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Av(t,n)}}var Lh={readContext:nr,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},G4={readContext:nr,useCallback:function(t,e){return zr().memoizedState=[t,e===void 0?null:e],t},useContext:nr,useEffect:Fb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xd(4194308,4,OT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xd(4,2,t,e)},useMemo:function(t,e){var n=zr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=H4.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=zr();return t={current:t},e.memoizedState=t},useState:Vb,useDebugValue:Zv,useDeferredValue:function(t){return zr().memoizedState=t},useTransition:function(){var t=Vb(!1),e=t[0];return t=W4.bind(null,t[1]),zr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,s=zr();if(it){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),Ot===null)throw Error(Z(349));ko&30||kT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Fb(AT.bind(null,r,i,t),[t]),r.flags|=2048,Qc(9,IT.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=zr(),e=Ot.identifierPrefix;if(it){var n=gs,r=ps;n=(r&~(1<<32-wr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=B4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},K4={readContext:nr,useCallback:VT,useContext:nr,useEffect:Jv,useImperativeHandle:LT,useInsertionEffect:DT,useLayoutEffect:MT,useMemo:FT,useReducer:zp,useRef:PT,useState:function(){return zp(Kc)},useDebugValue:Zv,useDeferredValue:function(t){var e=rr();return zT(e,Nt.memoizedState,t)},useTransition:function(){var t=zp(Kc)[0],e=rr().memoizedState;return[t,e]},useMutableSource:NT,useSyncExternalStore:CT,useId:UT,unstable_isNewReconciler:!1},Q4={readContext:nr,useCallback:VT,useContext:nr,useEffect:Jv,useImperativeHandle:LT,useInsertionEffect:DT,useLayoutEffect:MT,useMemo:FT,useReducer:Up,useRef:PT,useState:function(){return Up(Kc)},useDebugValue:Zv,useDeferredValue:function(t){var e=rr();return Nt===null?e.memoizedState=t:zT(e,Nt.memoizedState,t)},useTransition:function(){var t=Up(Kc)[0],e=rr().memoizedState;return[t,e]},useMutableSource:NT,useSyncExternalStore:CT,useId:UT,unstable_isNewReconciler:!1};function hr(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ny(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zf={isMounted:function(t){return(t=t._reactInternals)?Bo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ln(),s=wi(t),i=ws(r,s);i.payload=e,n!=null&&(i.callback=n),e=vi(t,i,s),e!==null&&(br(e,t,s,r),Kd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ln(),s=wi(t),i=ws(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=vi(t,i,s),e!==null&&(br(e,t,s,r),Kd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),r=wi(t),s=ws(n,r);s.tag=2,e!=null&&(s.callback=e),e=vi(t,s,r),e!==null&&(br(e,t,r,n),Kd(e,t,r))}};function zb(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Uc(n,r)||!Uc(s,i):!0}function HT(t,e,n){var r=!1,s=Ii,i=e.contextType;return typeof i=="object"&&i!==null?i=nr(i):(s=_n(e)?No:tn.current,r=e.contextTypes,i=(r=r!=null)?Ba(t,s):Ii),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ub(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zf.enqueueReplaceState(e,e.state,null)}function ry(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Hv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nr(i):(i=_n(e)?No:tn.current,s.context=Ba(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ny(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zf.enqueueReplaceState(s,s.state,null),Dh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ga(t,e){try{var n="",r=e;do n+=SD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function $p(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function sy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var X4=typeof WeakMap=="function"?WeakMap:Map;function qT(t,e,n){n=ws(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fh||(Fh=!0,my=r),sy(t,e)},n}function GT(t,e,n){n=ws(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){sy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){sy(t,e),typeof r!="function"&&(xi===null?xi=new Set([this]):xi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $b(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new X4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=uM.bind(null,t,e,n),e.then(t,t))}function Bb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wb(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ws(-1,1),e.tag=2,vi(n,e,1))),n.lanes|=1),t)}var Y4=Ms.ReactCurrentOwner,wn=!1;function on(t,e,n,r){e.child=t===null?_T(e,null,n,r):Ha(e,t.child,n,r)}function Hb(t,e,n,r,s){n=n.render;var i=e.ref;return _a(e,s),r=Xv(t,e,n,r,i,s),n=Yv(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ts(t,e,s)):(it&&n&&Vv(e),e.flags|=1,on(t,e,r,s),e.child)}function qb(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ax(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,KT(t,e,i,r,s)):(t=eh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Uc,n(o,r)&&t.ref===e.ref)return Ts(t,e,s)}return e.flags|=1,t=bi(i,r),t.ref=e.ref,t.return=e,e.child=t}function KT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Uc(i,r)&&t.ref===e.ref)if(wn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wn=!0);else return e.lanes=t.lanes,Ts(t,e,s)}return iy(t,e,n,r,s)}function QT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(pa,Rn),Rn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(pa,Rn),Rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ye(pa,Rn),Rn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ye(pa,Rn),Rn|=r;return on(t,e,s,n),e.child}function XT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function iy(t,e,n,r,s){var i=_n(n)?No:tn.current;return i=Ba(e,i),_a(e,s),n=Xv(t,e,n,r,i,s),r=Yv(),t!==null&&!wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ts(t,e,s)):(it&&r&&Vv(e),e.flags|=1,on(t,e,n,s),e.child)}function Gb(t,e,n,r,s){if(_n(n)){var i=!0;Ih(e)}else i=!1;if(_a(e,s),e.stateNode===null)Yd(t,e),HT(e,n,r),ry(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nr(u):(u=_n(n)?No:tn.current,u=Ba(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Ub(e,o,r,u),Zs=!1;var p=e.memoizedState;o.state=p,Dh(e,r,o,s),c=e.memoizedState,l!==r||p!==c||bn.current||Zs?(typeof h=="function"&&(ny(e,n,h,r),c=e.memoizedState),(l=Zs||zb(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ET(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:hr(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=nr(c):(c=_n(n)?No:tn.current,c=Ba(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&Ub(e,o,r,c),Zs=!1,p=e.memoizedState,o.state=p,Dh(e,r,o,s);var w=e.memoizedState;l!==f||p!==w||bn.current||Zs?(typeof g=="function"&&(ny(e,n,g,r),w=e.memoizedState),(u=Zs||zb(e,n,u,r,p,w,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return oy(t,e,n,r,i,s)}function oy(t,e,n,r,s,i){XT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Rb(e,n,!1),Ts(t,e,i);r=e.stateNode,Y4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ha(e,t.child,null,i),e.child=Ha(e,null,l,i)):on(t,e,l,i),e.memoizedState=r.state,s&&Rb(e,n,!0),e.child}function YT(t){var e=t.stateNode;e.pendingContext?jb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jb(t,e.context,!1),qv(t,e.containerInfo)}function Kb(t,e,n,r,s){return Wa(),zv(s),e.flags|=256,on(t,e,n,r),e.child}var ay={dehydrated:null,treeContext:null,retryLane:0};function ly(t){return{baseLanes:t,cachePool:null,transitions:null}}function JT(t,e,n){var r=e.pendingProps,s=ot.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ye(ot,s&1),t===null)return ey(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Bf(o,r,0,null),t=bo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ly(n),e.memoizedState=ay,t):ex(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return J4(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=bi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=bi(l,i):(i=bo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ly(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ay,r}return i=t.child,t=i.sibling,r=bi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ex(t,e){return e=Bf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wd(t,e,n,r){return r!==null&&zv(r),Ha(e,t.child,null,n),t=ex(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function J4(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=$p(Error(Z(422))),wd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Bf({mode:"visible",children:r.children},s,0,null),i=bo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ha(e,t.child,null,o),e.child.memoizedState=ly(o),e.memoizedState=ay,i);if(!(e.mode&1))return wd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Z(419)),r=$p(i,r,void 0),wd(t,e,o,r)}if(l=(o&t.childLanes)!==0,wn||l){if(r=Ot,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Es(t,s),br(r,t,s,-1))}return ox(),r=$p(Error(Z(421))),wd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Mn=yi(s.nextSibling),Ln=e,it=!0,gr=null,t!==null&&(Kn[Qn++]=ps,Kn[Qn++]=gs,Kn[Qn++]=Co,ps=t.id,gs=t.overflow,Co=e),e=ex(e,r.children),e.flags|=4096,e)}function Qb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ty(t.return,e,n)}function Bp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ZT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(on(t,e,r.children,n),r=ot.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qb(t,n,e);else if(t.tag===19)Qb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(ot,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Mh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Mh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bp(e,!0,n,null,i);break;case"together":Bp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ts(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=bi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=bi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Z4(t,e,n){switch(e.tag){case 3:YT(e),Wa();break;case 5:TT(e);break;case 1:_n(e.type)&&Ih(e);break;case 4:qv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ye(Rh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(ot,ot.current&1),e.flags|=128,null):n&e.child.childLanes?JT(t,e,n):(Ye(ot,ot.current&1),t=Ts(t,e,n),t!==null?t.sibling:null);Ye(ot,ot.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ZT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ye(ot,ot.current),r)break;return null;case 22:case 23:return e.lanes=0,QT(t,e,n)}return Ts(t,e,n)}var eN,cy,tN,nN;eN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cy=function(){};tN=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fo(Yr.current);var i=null;switch(n){case"input":s=jg(t,s),r=jg(t,r),i=[];break;case"select":s=ct({},s,{value:void 0}),r=ct({},r,{value:void 0}),i=[];break;case"textarea":s=Dg(t,s),r=Dg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ch)}Og(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Dc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Dc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&tt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};nN=function(t,e,n,r){n!==r&&(e.flags|=4)};function tc(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eM(t,e,n){var r=e.pendingProps;switch(Fv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return _n(e.type)&&kh(),Gt(e),null;case 3:return r=e.stateNode,qa(),nt(bn),nt(tn),Kv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gr!==null&&(yy(gr),gr=null))),cy(t,e),Gt(e),null;case 5:Gv(e);var s=fo(qc.current);if(n=e.type,t!==null&&e.stateNode!=null)tN(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return Gt(e),null}if(t=fo(Yr.current),vd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Hr]=e,r[Wc]=i,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(s=0;s<lc.length;s++)tt(lc[s],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":sb(r,i),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},tt("invalid",r);break;case"textarea":ob(r,i),tt("invalid",r)}Og(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&yd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&yd(r.textContent,l,t),s=["children",""+l]):Dc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":cd(r),ib(r,i,!0);break;case"textarea":cd(r),ab(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ch)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=AE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hr]=e,t[Wc]=r,eN(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lg(n,r),n){case"dialog":tt("cancel",t),tt("close",t),s=r;break;case"iframe":case"object":case"embed":tt("load",t),s=r;break;case"video":case"audio":for(s=0;s<lc.length;s++)tt(lc[s],t);s=r;break;case"source":tt("error",t),s=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),s=r;break;case"details":tt("toggle",t),s=r;break;case"input":sb(t,r),s=jg(t,r),tt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ct({},r,{value:void 0}),tt("invalid",t);break;case"textarea":ob(t,r),s=Dg(t,r),tt("invalid",t);break;default:s=r}Og(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?PE(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jE(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Mc(t,c):typeof c=="number"&&Mc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Dc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&tt("scroll",t):c!=null&&Ev(t,i,c,o))}switch(n){case"input":cd(t),ib(t,r,!1);break;case"textarea":cd(t),ab(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ki(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?va(t,!!r.multiple,i,!1):r.defaultValue!=null&&va(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ch)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)nN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=fo(qc.current),fo(Yr.current),vd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hr]=e,(i=r.nodeValue!==n)&&(t=Ln,t!==null))switch(t.tag){case 3:yd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hr]=e,e.stateNode=r}return Gt(e),null;case 13:if(nt(ot),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Mn!==null&&e.mode&1&&!(e.flags&128))wT(),Wa(),e.flags|=98560,i=!1;else if(i=vd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Z(317));i[Hr]=e}else Wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),i=!1}else gr!==null&&(yy(gr),gr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ot.current&1?It===0&&(It=3):ox())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return qa(),cy(t,e),t===null&&$c(e.stateNode.containerInfo),Gt(e),null;case 10:return Bv(e.type._context),Gt(e),null;case 17:return _n(e.type)&&kh(),Gt(e),null;case 19:if(nt(ot),i=e.memoizedState,i===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)tc(i,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mh(t),o!==null){for(e.flags|=128,tc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(ot,ot.current&1|2),e.child}t=t.sibling}i.tail!==null&&yt()>Ka&&(e.flags|=128,r=!0,tc(i,!1),e.lanes=4194304)}else{if(!r)if(t=Mh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!it)return Gt(e),null}else 2*yt()-i.renderingStartTime>Ka&&n!==1073741824&&(e.flags|=128,r=!0,tc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=yt(),e.sibling=null,n=ot.current,Ye(ot,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return ix(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rn&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function tM(t,e){switch(Fv(e),e.tag){case 1:return _n(e.type)&&kh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qa(),nt(bn),nt(tn),Kv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gv(e),null;case 13:if(nt(ot),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Wa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ot),null;case 4:return qa(),null;case 10:return Bv(e.type._context),null;case 22:case 23:return ix(),null;case 24:return null;default:return null}}var bd=!1,Jt=!1,nM=typeof WeakSet=="function"?WeakSet:Set,fe=null;function ma(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function uy(t,e,n){try{n()}catch(r){ft(t,e,r)}}var Xb=!1;function rM(t,e){if(Gg=Eh,t=aT(),Lv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kg={focusedElem:t,selectionRange:n},Eh=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,_=w.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?v:hr(e.type,v),_);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(I){ft(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return w=Xb,Xb=!1,w}function wc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&uy(e,n,i)}s=s.next}while(s!==r)}}function Uf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function dy(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rN(t){var e=t.alternate;e!==null&&(t.alternate=null,rN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hr],delete e[Wc],delete e[Yg],delete e[F4],delete e[z4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sN(t){return t.tag===5||t.tag===3||t.tag===4}function Yb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ch));else if(r!==4&&(t=t.child,t!==null))for(hy(t,e,n),t=t.sibling;t!==null;)hy(t,e,n),t=t.sibling}function fy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(fy(t,e,n),t=t.sibling;t!==null;)fy(t,e,n),t=t.sibling}var zt=null,pr=!1;function qs(t,e,n){for(n=n.child;n!==null;)iN(t,e,n),n=n.sibling}function iN(t,e,n){if(Xr&&typeof Xr.onCommitFiberUnmount=="function")try{Xr.onCommitFiberUnmount(Pf,n)}catch{}switch(n.tag){case 5:Jt||ma(n,e);case 6:var r=zt,s=pr;zt=null,qs(t,e,n),zt=r,pr=s,zt!==null&&(pr?(t=zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(pr?(t=zt,n=n.stateNode,t.nodeType===8?Op(t.parentNode,n):t.nodeType===1&&Op(t,n),Fc(t)):Op(zt,n.stateNode));break;case 4:r=zt,s=pr,zt=n.stateNode.containerInfo,pr=!0,qs(t,e,n),zt=r,pr=s;break;case 0:case 11:case 14:case 15:if(!Jt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&uy(n,e,o),s=s.next}while(s!==r)}qs(t,e,n);break;case 1:if(!Jt&&(ma(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ft(n,e,l)}qs(t,e,n);break;case 21:qs(t,e,n);break;case 22:n.mode&1?(Jt=(r=Jt)||n.memoizedState!==null,qs(t,e,n),Jt=r):qs(t,e,n);break;default:qs(t,e,n)}}function Jb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nM),e.forEach(function(r){var s=hM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:zt=l.stateNode,pr=!1;break e;case 3:zt=l.stateNode.containerInfo,pr=!0;break e;case 4:zt=l.stateNode.containerInfo,pr=!0;break e}l=l.return}if(zt===null)throw Error(Z(160));iN(i,o,s),zt=null,pr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ft(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oN(e,t),e=e.sibling}function oN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cr(e,t),Fr(t),r&4){try{wc(3,t,t.return),Uf(3,t)}catch(v){ft(t,t.return,v)}try{wc(5,t,t.return)}catch(v){ft(t,t.return,v)}}break;case 1:cr(e,t),Fr(t),r&512&&n!==null&&ma(n,n.return);break;case 5:if(cr(e,t),Fr(t),r&512&&n!==null&&ma(n,n.return),t.flags&32){var s=t.stateNode;try{Mc(s,"")}catch(v){ft(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&kE(s,i),Lg(l,o);var u=Lg(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?PE(s,f):h==="dangerouslySetInnerHTML"?jE(s,f):h==="children"?Mc(s,f):Ev(s,h,f,u)}switch(l){case"input":Rg(s,i);break;case"textarea":IE(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?va(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?va(s,!!i.multiple,i.defaultValue,!0):va(s,!!i.multiple,i.multiple?[]:"",!1))}s[Wc]=i}catch(v){ft(t,t.return,v)}}break;case 6:if(cr(e,t),Fr(t),r&4){if(t.stateNode===null)throw Error(Z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){ft(t,t.return,v)}}break;case 3:if(cr(e,t),Fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Fc(e.containerInfo)}catch(v){ft(t,t.return,v)}break;case 4:cr(e,t),Fr(t);break;case 13:cr(e,t),Fr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rx=yt())),r&4&&Jb(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Jt=(u=Jt)||h,cr(e,t),Jt=u):cr(e,t),Fr(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(fe=t,h=t.child;h!==null;){for(f=fe=h;fe!==null;){switch(p=fe,g=p.child,p.tag){case 0:case 11:case 14:case 15:wc(4,p,p.return);break;case 1:ma(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){ft(r,n,v)}}break;case 5:ma(p,p.return);break;case 22:if(p.memoizedState!==null){e1(f);continue}}g!==null?(g.return=p,fe=g):e1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=RE("display",o))}catch(v){ft(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){ft(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cr(e,t),Fr(t),r&4&&Jb(t);break;case 21:break;default:cr(e,t),Fr(t)}}function Fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sN(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Mc(s,""),r.flags&=-33);var i=Yb(t);fy(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Yb(t);hy(t,l,o);break;default:throw Error(Z(161))}}catch(c){ft(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sM(t,e,n){fe=t,aN(t)}function aN(t,e,n){for(var r=(t.mode&1)!==0;fe!==null;){var s=fe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||bd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Jt;l=bd;var u=Jt;if(bd=o,(Jt=c)&&!u)for(fe=s;fe!==null;)o=fe,c=o.child,o.tag===22&&o.memoizedState!==null?t1(s):c!==null?(c.return=o,fe=c):t1(s);for(;i!==null;)fe=i,aN(i),i=i.sibling;fe=s,bd=l,Jt=u}Zb(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,fe=i):Zb(t)}}function Zb(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jt||Uf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Lb(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Lb(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Fc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Jt||e.flags&512&&dy(e)}catch(p){ft(e,e.return,p)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function e1(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function t1(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Uf(4,e)}catch(c){ft(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ft(e,s,c)}}var i=e.return;try{dy(e)}catch(c){ft(e,i,c)}break;case 5:var o=e.return;try{dy(e)}catch(c){ft(e,o,c)}}}catch(c){ft(e,e.return,c)}if(e===t){fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,fe=l;break}fe=e.return}}var iM=Math.ceil,Vh=Ms.ReactCurrentDispatcher,tx=Ms.ReactCurrentOwner,er=Ms.ReactCurrentBatchConfig,De=0,Ot=null,xt=null,$t=0,Rn=0,pa=$i(0),It=0,Xc=null,Io=0,$f=0,nx=0,bc=null,yn=null,rx=0,Ka=1/0,fs=null,Fh=!1,my=null,xi=null,_d=!1,hi=null,zh=0,_c=0,py=null,Jd=-1,Zd=0;function ln(){return De&6?yt():Jd!==-1?Jd:Jd=yt()}function wi(t){return t.mode&1?De&2&&$t!==0?$t&-$t:$4.transition!==null?(Zd===0&&(Zd=HE()),Zd):(t=Be,t!==0||(t=window.event,t=t===void 0?16:JE(t.type)),t):1}function br(t,e,n,r){if(50<_c)throw _c=0,py=null,Error(Z(185));yu(t,n,r),(!(De&2)||t!==Ot)&&(t===Ot&&(!(De&2)&&($f|=n),It===4&&ni(t,$t)),Sn(t,r),n===1&&De===0&&!(e.mode&1)&&(Ka=yt()+500,Vf&&Bi()))}function Sn(t,e){var n=t.callbackNode;$D(t,e);var r=Sh(t,t===Ot?$t:0);if(r===0)n!==null&&ub(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ub(n),e===1)t.tag===0?U4(n1.bind(null,t)):yT(n1.bind(null,t)),L4(function(){!(De&6)&&Bi()}),n=null;else{switch(qE(r)){case 1:n=Iv;break;case 4:n=BE;break;case 16:n=_h;break;case 536870912:n=WE;break;default:n=_h}n=pN(n,lN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lN(t,e){if(Jd=-1,Zd=0,De&6)throw Error(Z(327));var n=t.callbackNode;if(Sa()&&t.callbackNode!==n)return null;var r=Sh(t,t===Ot?$t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Uh(t,r);else{e=r;var s=De;De|=2;var i=uN();(Ot!==t||$t!==e)&&(fs=null,Ka=yt()+500,wo(t,e));do try{lM();break}catch(l){cN(t,l)}while(!0);$v(),Vh.current=i,De=s,xt!==null?e=0:(Ot=null,$t=0,e=It)}if(e!==0){if(e===2&&(s=$g(t),s!==0&&(r=s,e=gy(t,s))),e===1)throw n=Xc,wo(t,0),ni(t,r),Sn(t,yt()),n;if(e===6)ni(t,r);else{if(s=t.current.alternate,!(r&30)&&!oM(s)&&(e=Uh(t,r),e===2&&(i=$g(t),i!==0&&(r=i,e=gy(t,i))),e===1))throw n=Xc,wo(t,0),ni(t,r),Sn(t,yt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:ao(t,yn,fs);break;case 3:if(ni(t,r),(r&130023424)===r&&(e=rx+500-yt(),10<e)){if(Sh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ln(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xg(ao.bind(null,t,yn,fs),e);break}ao(t,yn,fs);break;case 4:if(ni(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-wr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iM(r/1960))-r,10<r){t.timeoutHandle=Xg(ao.bind(null,t,yn,fs),r);break}ao(t,yn,fs);break;case 5:ao(t,yn,fs);break;default:throw Error(Z(329))}}}return Sn(t,yt()),t.callbackNode===n?lN.bind(null,t):null}function gy(t,e){var n=bc;return t.current.memoizedState.isDehydrated&&(wo(t,e).flags|=256),t=Uh(t,e),t!==2&&(e=yn,yn=n,e!==null&&yy(e)),t}function yy(t){yn===null?yn=t:yn.push.apply(yn,t)}function oM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Nr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ni(t,e){for(e&=~nx,e&=~$f,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wr(e),r=1<<n;t[n]=-1,e&=~r}}function n1(t){if(De&6)throw Error(Z(327));Sa();var e=Sh(t,0);if(!(e&1))return Sn(t,yt()),null;var n=Uh(t,e);if(t.tag!==0&&n===2){var r=$g(t);r!==0&&(e=r,n=gy(t,r))}if(n===1)throw n=Xc,wo(t,0),ni(t,e),Sn(t,yt()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ao(t,yn,fs),Sn(t,yt()),null}function sx(t,e){var n=De;De|=1;try{return t(e)}finally{De=n,De===0&&(Ka=yt()+500,Vf&&Bi())}}function Ao(t){hi!==null&&hi.tag===0&&!(De&6)&&Sa();var e=De;De|=1;var n=er.transition,r=Be;try{if(er.transition=null,Be=1,t)return t()}finally{Be=r,er.transition=n,De=e,!(De&6)&&Bi()}}function ix(){Rn=pa.current,nt(pa)}function wo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,O4(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(Fv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kh();break;case 3:qa(),nt(bn),nt(tn),Kv();break;case 5:Gv(r);break;case 4:qa();break;case 13:nt(ot);break;case 19:nt(ot);break;case 10:Bv(r.type._context);break;case 22:case 23:ix()}n=n.return}if(Ot=t,xt=t=bi(t.current,null),$t=Rn=e,It=0,Xc=null,nx=$f=Io=0,yn=bc=null,ho!==null){for(e=0;e<ho.length;e++)if(n=ho[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ho=null}return t}function cN(t,e){do{var n=xt;try{if($v(),Qd.current=Lh,Oh){for(var r=lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Oh=!1}if(ko=0,Pt=Nt=lt=null,xc=!1,Gc=0,tx.current=null,n===null||n.return===null){It=1,Xc=e,xt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=$t,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Bb(o);if(g!==null){g.flags&=-257,Wb(g,o,l,i,e),g.mode&1&&$b(i,u,e),e=g,c=u;var w=e.updateQueue;if(w===null){var v=new Set;v.add(c),e.updateQueue=v}else w.add(c);break e}else{if(!(e&1)){$b(i,u,e),ox();break e}c=Error(Z(426))}}else if(it&&l.mode&1){var _=Bb(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Wb(_,o,l,i,e),zv(Ga(c,l));break e}}i=c=Ga(c,l),It!==4&&(It=2),bc===null?bc=[i]:bc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var b=qT(i,c,e);Ob(i,b);break e;case 1:l=c;var x=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(xi===null||!xi.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=GT(i,l,e);Ob(i,I);break e}}i=i.return}while(i!==null)}hN(n)}catch(D){e=D,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function uN(){var t=Vh.current;return Vh.current=Lh,t===null?Lh:t}function ox(){(It===0||It===3||It===2)&&(It=4),Ot===null||!(Io&268435455)&&!($f&268435455)||ni(Ot,$t)}function Uh(t,e){var n=De;De|=2;var r=uN();(Ot!==t||$t!==e)&&(fs=null,wo(t,e));do try{aM();break}catch(s){cN(t,s)}while(!0);if($v(),De=n,Vh.current=r,xt!==null)throw Error(Z(261));return Ot=null,$t=0,It}function aM(){for(;xt!==null;)dN(xt)}function lM(){for(;xt!==null&&!PD();)dN(xt)}function dN(t){var e=mN(t.alternate,t,Rn);t.memoizedProps=t.pendingProps,e===null?hN(t):xt=e,tx.current=null}function hN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tM(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,xt=null;return}}else if(n=eM(n,e,Rn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);It===0&&(It=5)}function ao(t,e,n){var r=Be,s=er.transition;try{er.transition=null,Be=1,cM(t,e,n,r)}finally{er.transition=s,Be=r}return null}function cM(t,e,n,r){do Sa();while(hi!==null);if(De&6)throw Error(Z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(BD(t,i),t===Ot&&(xt=Ot=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||_d||(_d=!0,pN(_h,function(){return Sa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=er.transition,er.transition=null;var o=Be;Be=1;var l=De;De|=4,tx.current=null,rM(t,n),oN(n,t),I4(Kg),Eh=!!Gg,Kg=Gg=null,t.current=n,sM(n),DD(),De=l,Be=o,er.transition=i}else t.current=n;if(_d&&(_d=!1,hi=t,zh=s),i=t.pendingLanes,i===0&&(xi=null),LD(n.stateNode),Sn(t,yt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fh)throw Fh=!1,t=my,my=null,t;return zh&1&&t.tag!==0&&Sa(),i=t.pendingLanes,i&1?t===py?_c++:(_c=0,py=t):_c=0,Bi(),null}function Sa(){if(hi!==null){var t=qE(zh),e=er.transition,n=Be;try{if(er.transition=null,Be=16>t?16:t,hi===null)var r=!1;else{if(t=hi,hi=null,zh=0,De&6)throw Error(Z(331));var s=De;for(De|=4,fe=t.current;fe!==null;){var i=fe,o=i.child;if(fe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(fe=u;fe!==null;){var h=fe;switch(h.tag){case 0:case 11:case 15:wc(8,h,i)}var f=h.child;if(f!==null)f.return=h,fe=f;else for(;fe!==null;){h=fe;var p=h.sibling,g=h.return;if(rN(h),h===u){fe=null;break}if(p!==null){p.return=g,fe=p;break}fe=g}}}var w=i.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}fe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,fe=o;else e:for(;fe!==null;){if(i=fe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:wc(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,fe=b;break e}fe=i.return}}var x=t.current;for(fe=x;fe!==null;){o=fe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,fe=S;else e:for(o=x;fe!==null;){if(l=fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Uf(9,l)}}catch(D){ft(l,l.return,D)}if(l===o){fe=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,fe=I;break e}fe=l.return}}if(De=s,Bi(),Xr&&typeof Xr.onPostCommitFiberRoot=="function")try{Xr.onPostCommitFiberRoot(Pf,t)}catch{}r=!0}return r}finally{Be=n,er.transition=e}}return!1}function r1(t,e,n){e=Ga(n,e),e=qT(t,e,1),t=vi(t,e,1),e=ln(),t!==null&&(yu(t,1,e),Sn(t,e))}function ft(t,e,n){if(t.tag===3)r1(t,t,n);else for(;e!==null;){if(e.tag===3){r1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xi===null||!xi.has(r))){t=Ga(n,t),t=GT(e,t,1),e=vi(e,t,1),t=ln(),e!==null&&(yu(e,1,t),Sn(e,t));break}}e=e.return}}function uM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ln(),t.pingedLanes|=t.suspendedLanes&n,Ot===t&&($t&n)===n&&(It===4||It===3&&($t&130023424)===$t&&500>yt()-rx?wo(t,0):nx|=n),Sn(t,e)}function fN(t,e){e===0&&(t.mode&1?(e=hd,hd<<=1,!(hd&130023424)&&(hd=4194304)):e=1);var n=ln();t=Es(t,e),t!==null&&(yu(t,e,n),Sn(t,n))}function dM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fN(t,n)}function hM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),fN(t,n)}var mN;mN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bn.current)wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wn=!1,Z4(t,e,n);wn=!!(t.flags&131072)}else wn=!1,it&&e.flags&1048576&&vT(e,jh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yd(t,e),t=e.pendingProps;var s=Ba(e,tn.current);_a(e,n),s=Xv(null,e,r,t,s,n);var i=Yv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_n(r)?(i=!0,Ih(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Hv(e),s.updater=zf,e.stateNode=s,s._reactInternals=e,ry(e,r,t,n),e=oy(null,e,r,!0,i,n)):(e.tag=0,it&&i&&Vv(e),on(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=mM(r),t=hr(r,t),s){case 0:e=iy(null,e,r,t,n);break e;case 1:e=Gb(null,e,r,t,n);break e;case 11:e=Hb(null,e,r,t,n);break e;case 14:e=qb(null,e,r,hr(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),iy(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Gb(t,e,r,s,n);case 3:e:{if(YT(e),t===null)throw Error(Z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,ET(t,e),Dh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ga(Error(Z(423)),e),e=Kb(t,e,r,n,s);break e}else if(r!==s){s=Ga(Error(Z(424)),e),e=Kb(t,e,r,n,s);break e}else for(Mn=yi(e.stateNode.containerInfo.firstChild),Ln=e,it=!0,gr=null,n=_T(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Wa(),r===s){e=Ts(t,e,n);break e}on(t,e,r,n)}e=e.child}return e;case 5:return TT(e),t===null&&ey(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Qg(r,s)?o=null:i!==null&&Qg(r,i)&&(e.flags|=32),XT(t,e),on(t,e,o,n),e.child;case 6:return t===null&&ey(e),null;case 13:return JT(t,e,n);case 4:return qv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ha(e,null,r,n):on(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Hb(t,e,r,s,n);case 7:return on(t,e,e.pendingProps,n),e.child;case 8:return on(t,e,e.pendingProps.children,n),e.child;case 12:return on(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ye(Rh,r._currentValue),r._currentValue=o,i!==null)if(Nr(i.value,o)){if(i.children===s.children&&!bn.current){e=Ts(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ws(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ty(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ty(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}on(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_a(e,n),s=nr(s),r=r(s),e.flags|=1,on(t,e,r,n),e.child;case 14:return r=e.type,s=hr(r,e.pendingProps),s=hr(r.type,s),qb(t,e,r,s,n);case 15:return KT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hr(r,s),Yd(t,e),e.tag=1,_n(r)?(t=!0,Ih(e)):t=!1,_a(e,n),HT(e,r,s),ry(e,r,s,n),oy(null,e,r,!0,t,n);case 19:return ZT(t,e,n);case 22:return QT(t,e,n)}throw Error(Z(156,e.tag))};function pN(t,e){return $E(t,e)}function fM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(t,e,n,r){return new fM(t,e,n,r)}function ax(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mM(t){if(typeof t=="function")return ax(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nv)return 11;if(t===Cv)return 14}return 2}function bi(t,e){var n=t.alternate;return n===null?(n=Jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function eh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ax(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ia:return bo(n.children,s,i,e);case Tv:o=8,s|=8;break;case Cg:return t=Jn(12,n,e,s|2),t.elementType=Cg,t.lanes=i,t;case kg:return t=Jn(13,n,e,s),t.elementType=kg,t.lanes=i,t;case Ig:return t=Jn(19,n,e,s),t.elementType=Ig,t.lanes=i,t;case TE:return Bf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SE:o=10;break e;case EE:o=9;break e;case Nv:o=11;break e;case Cv:o=14;break e;case Js:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=Jn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function bo(t,e,n,r){return t=Jn(7,t,r,e),t.lanes=n,t}function Bf(t,e,n,r){return t=Jn(22,t,r,e),t.elementType=TE,t.lanes=n,t.stateNode={isHidden:!1},t}function Wp(t,e,n){return t=Jn(6,t,null,e),t.lanes=n,t}function Hp(t,e,n){return e=Jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Tp(0),this.expirationTimes=Tp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lx(t,e,n,r,s,i,o,l,c){return t=new pM(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Jn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hv(i),t}function gM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gN(t){if(!t)return Ii;t=t._reactInternals;e:{if(Bo(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(_n(n))return gT(t,n,e)}return e}function yN(t,e,n,r,s,i,o,l,c){return t=lx(n,r,!0,t,s,i,o,l,c),t.context=gN(null),n=t.current,r=ln(),s=wi(n),i=ws(r,s),i.callback=e??null,vi(n,i,s),t.current.lanes=s,yu(t,s,r),Sn(t,r),t}function Wf(t,e,n,r){var s=e.current,i=ln(),o=wi(s);return n=gN(n),e.context===null?e.context=n:e.pendingContext=n,e=ws(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vi(s,e,o),t!==null&&(br(t,s,o,i),Kd(t,s,o)),o}function $h(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function s1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cx(t,e){s1(t,e),(t=t.alternate)&&s1(t,e)}function yM(){return null}var vN=typeof reportError=="function"?reportError:function(t){console.error(t)};function ux(t){this._internalRoot=t}Hf.prototype.render=ux.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));Wf(t,e,null,null)};Hf.prototype.unmount=ux.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ao(function(){Wf(null,t,null,null)}),e[Ss]=null}};function Hf(t){this._internalRoot=t}Hf.prototype.unstable_scheduleHydration=function(t){if(t){var e=QE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ti.length&&e!==0&&e<ti[n].priority;n++);ti.splice(n,0,t),n===0&&YE(t)}};function dx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function qf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function i1(){}function vM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=$h(o);i.call(u)}}var o=yN(e,r,t,0,null,!1,!1,"",i1);return t._reactRootContainer=o,t[Ss]=o.current,$c(t.nodeType===8?t.parentNode:t),Ao(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=$h(c);l.call(u)}}var c=lx(t,0,!1,null,null,!1,!1,"",i1);return t._reactRootContainer=c,t[Ss]=c.current,$c(t.nodeType===8?t.parentNode:t),Ao(function(){Wf(e,c,n,r)}),c}function Gf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=$h(o);l.call(c)}}Wf(e,o,t,s)}else o=vM(n,e,t,s,r);return $h(o)}GE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ac(e.pendingLanes);n!==0&&(Av(e,n|1),Sn(e,yt()),!(De&6)&&(Ka=yt()+500,Bi()))}break;case 13:Ao(function(){var r=Es(t,1);if(r!==null){var s=ln();br(r,t,1,s)}}),cx(t,1)}};jv=function(t){if(t.tag===13){var e=Es(t,134217728);if(e!==null){var n=ln();br(e,t,134217728,n)}cx(t,134217728)}};KE=function(t){if(t.tag===13){var e=wi(t),n=Es(t,e);if(n!==null){var r=ln();br(n,t,e,r)}cx(t,e)}};QE=function(){return Be};XE=function(t,e){var n=Be;try{return Be=t,e()}finally{Be=n}};Fg=function(t,e,n){switch(e){case"input":if(Rg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Lf(r);if(!s)throw Error(Z(90));CE(r),Rg(r,s)}}}break;case"textarea":IE(t,n);break;case"select":e=n.value,e!=null&&va(t,!!n.multiple,e,!1)}};OE=sx;LE=Ao;var xM={usingClientEntryPoint:!1,Events:[xu,ca,Lf,DE,ME,sx]},nc={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wM={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zE(t),t===null?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||yM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{Pf=Sd.inject(wM),Xr=Sd}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xM;$n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dx(e))throw Error(Z(200));return gM(t,e,null,n)};$n.createRoot=function(t,e){if(!dx(t))throw Error(Z(299));var n=!1,r="",s=vN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lx(t,1,!1,null,null,n,!1,r,s),t[Ss]=e.current,$c(t.nodeType===8?t.parentNode:t),new ux(e)};$n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=zE(e),t=t===null?null:t.stateNode,t};$n.flushSync=function(t){return Ao(t)};$n.hydrate=function(t,e,n){if(!qf(e))throw Error(Z(200));return Gf(null,t,e,!0,n)};$n.hydrateRoot=function(t,e,n){if(!dx(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=vN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yN(e,null,t,1,n??null,s,!1,i,o),t[Ss]=e.current,$c(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Hf(e)};$n.render=function(t,e,n){if(!qf(e))throw Error(Z(200));return Gf(null,t,e,!1,n)};$n.unmountComponentAtNode=function(t){if(!qf(t))throw Error(Z(40));return t._reactRootContainer?(Ao(function(){Gf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ss]=null})}),!0):!1};$n.unstable_batchedUpdates=sx;$n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qf(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return Gf(t,e,n,!1,r)};$n.version="18.3.1-next-f1338f8080-20240426";function xN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xN)}catch(t){console.error(t)}}xN(),xE.exports=$n;var Zn=xE.exports;const bM=oE(Zn);var wN,o1=Zn;wN=o1.createRoot,o1.hydrateRoot;function _M(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var bN={exports:{}},_N={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=m;function SM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var EM=typeof Object.is=="function"?Object.is:SM,TM=Qa.useState,NM=Qa.useEffect,CM=Qa.useLayoutEffect,kM=Qa.useDebugValue;function IM(t,e){var n=e(),r=TM({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return CM(function(){s.value=n,s.getSnapshot=e,qp(s)&&i({inst:s})},[t,n,e]),NM(function(){return qp(s)&&i({inst:s}),t(function(){qp(s)&&i({inst:s})})},[t]),kM(n),n}function qp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!EM(t,n)}catch{return!0}}function AM(t,e){return e()}var jM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?AM:IM;_N.useSyncExternalStore=Qa.useSyncExternalStore!==void 0?Qa.useSyncExternalStore:jM;bN.exports=_N;var RM=bN.exports;const PM=yE.useInsertionEffect,DM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",MM=DM?m.useLayoutEffect:m.useEffect,OM=PM||MM,SN=t=>{const e=m.useRef([t,(...n)=>e[0](...n)]).current;return OM(()=>{e[0]=t}),e[1]},LM="popstate",hx="pushState",fx="replaceState",VM="hashchange",a1=[LM,hx,fx,VM],FM=t=>{for(const e of a1)addEventListener(e,t);return()=>{for(const e of a1)removeEventListener(e,t)}},EN=(t,e)=>RM.useSyncExternalStore(FM,t,e),zM=()=>location.search,UM=({ssrSearch:t=""}={})=>EN(zM,()=>t),l1=()=>location.pathname,$M=({ssrPath:t}={})=>EN(l1,t?()=>t:l1),BM=(t,{replace:e=!1,state:n=null}={})=>history[e?fx:hx](n,"",t),WM=(t={})=>[$M(t),BM],c1=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[c1]>"u"){for(const t of[hx,fx]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,c1,{value:!0})}const HM=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",TN=(t="")=>t==="/"?"":t,qM=(t,e)=>t[0]==="~"?t.slice(1):TN(e)+t,GM=(t="",e)=>HM(u1(TN(t)),u1(e)),u1=t=>{try{return decodeURI(t)}catch{return t}},NN={hook:WM,searchHook:UM,parser:_M,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},CN=m.createContext(NN),bu=()=>m.useContext(CN),kN={},IN=m.createContext(kN),KM=()=>m.useContext(IN),Kf=t=>{const[e,n]=t.hook(t);return[GM(t.base,e),SN((r,s)=>n(qM(r,t.base),s))]},Qf=()=>Kf(bu()),AN=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,p)=>[f,c[p]])):o.groups;let h={...c};return u&&Object.assign(h,u),h})(),...r?[l]:[]]:[!1,null]},jN=({children:t,...e})=>{var h,f;const n=bu(),r=e.hook?NN:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=m.useRef({}),c=l.current,u=c;for(let p in r){const g=p==="base"?r[p]+(e[p]||""):e[p]||r[p];c===u&&g!==u[p]&&(l.current=u={...u}),u[p]=g,g!==r[p]&&(s=u)}return m.createElement(CN.Provider,{value:s,children:t})},d1=({children:t,component:e},n)=>e?m.createElement(e,{params:n}):typeof t=="function"?t(n):t,QM=t=>{let e=m.useRef(kN),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},ur=({path:t,nest:e,match:n,...r})=>{const s=bu(),[i]=Kf(s),[o,l,c]=n??AN(s.parser,t,i,e),u=QM({...KM(),...l});if(!o)return null;const h=c?m.createElement(jN,{base:c},d1(r,u)):d1(r,u);return m.createElement(IN.Provider,{value:u,children:h})},En=m.forwardRef((t,e)=>{const n=bu(),[r,s]=Kf(n),{to:i="",href:o=i,onClick:l,asChild:c,children:u,className:h,replace:f,state:p,...g}=t,w=SN(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(l==null||l(_),_.defaultPrevented||(_.preventDefault(),s(o,t)))}),v=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&m.isValidElement(u)?m.cloneElement(u,{onClick:w,href:v}):m.createElement("a",{...g,onClick:w,href:v,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),RN=t=>Array.isArray(t)?t.flatMap(e=>RN(e&&e.type===m.Fragment?e.props.children:e)):[t],XM=({children:t,location:e})=>{const n=bu(),[r]=Kf(n);for(const s of RN(t)){let i=0;if(m.isValidElement(s)&&(i=AN(n.parser,s.props.path,e||r,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var Xf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yf=typeof window>"u"||"Deno"in globalThis;function fr(){}function YM(t,e){return typeof t=="function"?t(e):t}function JM(t){return typeof t=="number"&&t>=0&&t!==1/0}function ZM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function h1(t,e){return typeof t=="function"?t(e):t}function eO(t,e){return typeof t=="function"?t(e):t}function f1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==mx(o,e.options))return!1}else if(!Jc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function m1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Yc(e.options.mutationKey)!==Yc(i))return!1}else if(!Jc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function mx(t,e){return((e==null?void 0:e.queryKeyHashFn)||Yc)(t)}function Yc(t){return JSON.stringify(t,(e,n)=>vy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Jc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Jc(t[n],e[n])):!1}function PN(t,e){if(t===e)return t;const n=p1(t)&&p1(e);if(n||vy(t)&&vy(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{};let c=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=PN(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function p1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function vy(t){if(!g1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!g1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function g1(t){return Object.prototype.toString.call(t)==="[object Object]"}function tO(t){return new Promise(e=>{setTimeout(e,t)})}function nO(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?PN(t,e):e}function rO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function sO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var px=Symbol();function DN(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===px?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var go,oi,Pa,JS,iO=(JS=class extends Xf{constructor(){super();Fe(this,go);Fe(this,oi);Fe(this,Pa);Se(this,Pa,e=>{if(!Yf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,oi)||this.setEventListener(K(this,Pa))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,oi))==null||e.call(this),Se(this,oi,void 0))}setEventListener(e){var n;Se(this,Pa,e),(n=K(this,oi))==null||n.call(this),Se(this,oi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,go)!==e&&(Se(this,go,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,go)=="boolean"?K(this,go):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},go=new WeakMap,oi=new WeakMap,Pa=new WeakMap,JS),MN=new iO,Da,ai,Ma,ZS,oO=(ZS=class extends Xf{constructor(){super();Fe(this,Da,!0);Fe(this,ai);Fe(this,Ma);Se(this,Ma,e=>{if(!Yf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,ai)||this.setEventListener(K(this,Ma))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,ai))==null||e.call(this),Se(this,ai,void 0))}setEventListener(e){var n;Se(this,Ma,e),(n=K(this,ai))==null||n.call(this),Se(this,ai,e(this.setOnline.bind(this)))}setOnline(e){K(this,Da)!==e&&(Se(this,Da,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,Da)}},Da=new WeakMap,ai=new WeakMap,Ma=new WeakMap,ZS),Bh=new oO;function aO(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function lO(t){return Math.min(1e3*2**t,3e4)}function ON(t){return(t??"online")==="online"?Bh.isOnline():!0}var LN=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Gp(t){return t instanceof LN}function VN(t){let e=!1,n=0,r=!1,s;const i=aO(),o=v=>{var _;r||(p(new LN(v)),(_=t.abort)==null||_.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>MN.isFocused()&&(t.networkMode==="always"||Bh.isOnline())&&t.canRun(),h=()=>ON(t.networkMode)&&t.canRun(),f=v=>{var _;r||(r=!0,(_=t.onSuccess)==null||_.call(t,v),s==null||s(),i.resolve(v))},p=v=>{var _;r||(r=!0,(_=t.onError)==null||_.call(t,v),s==null||s(),i.reject(v))},g=()=>new Promise(v=>{var _;s=b=>{(r||u())&&v(b)},(_=t.onPause)==null||_.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),w=()=>{if(r)return;let v;const _=n===0?t.initialPromise:void 0;try{v=_??t.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(f).catch(b=>{var M;if(r)return;const x=t.retry??(Yf?0:3),S=t.retryDelay??lO,I=typeof S=="function"?S(n,b):S,D=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,b);if(e||!D){p(b);return}n++,(M=t.onFail)==null||M.call(t,n,b),tO(I).then(()=>u()?void 0:g()).then(()=>{e?p(b):w()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?w():g().then(w),i)}}function cO(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var an=cO(),yo,eE,FN=(eE=class{constructor(){Fe(this,yo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),JM(this.gcTime)&&Se(this,yo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Yf?1/0:5*60*1e3))}clearGcTimeout(){K(this,yo)&&(clearTimeout(K(this,yo)),Se(this,yo,void 0))}},yo=new WeakMap,eE),Oa,La,qn,Qt,mu,vo,mr,hs,tE,uO=(tE=class extends FN{constructor(n){super();Fe(this,mr);Fe(this,Oa);Fe(this,La);Fe(this,qn);Fe(this,Qt);Fe(this,mu);Fe(this,vo);Se(this,vo,!1),Se(this,mu,n.defaultOptions),this.setOptions(n.options),this.observers=[],Se(this,qn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Se(this,Oa,hO(this.options)),this.state=n.state??K(this,Oa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,Qt))==null?void 0:n.promise}setOptions(n){this.options={...K(this,mu),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,qn).remove(this)}setData(n,r){const s=nO(this.state.data,n,this.options);return Ht(this,mr,hs).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ht(this,mr,hs).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,Qt))==null?void 0:s.promise;return(i=K(this,Qt))==null||i.cancel(n),r?r.then(fr).catch(fr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,Oa))}isActive(){return this.observers.some(n=>eO(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===px||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!ZM(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Qt))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Qt))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,qn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,Qt)&&(K(this,vo)?K(this,Qt).cancel({revert:!0}):K(this,Qt).cancelRetry()),this.scheduleGc()),K(this,qn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ht(this,mr,hs).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,Qt))return K(this,Qt).continueRetry(),K(this,Qt).promise}if(n&&this.setOptions(n),!this.options.queryFn){const p=this.observers.find(g=>g.options.queryFn);p&&this.setOptions(p.options)}const s=new AbortController,i=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(Se(this,vo,!0),s.signal)})},o=()=>{const p=DN(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return i(g),Se(this,vo,!1),this.options.persister?this.options.persister(p,g,this):p(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(u=this.options.behavior)==null||u.onFetch(l,this),Se(this,La,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&Ht(this,mr,hs).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=p=>{var g,w,v,_;Gp(p)&&p.silent||Ht(this,mr,hs).call(this,{type:"error",error:p}),Gp(p)||((w=(g=K(this,qn).config).onError)==null||w.call(g,p,this),(_=(v=K(this,qn).config).onSettled)==null||_.call(v,this.state.data,p,this)),this.scheduleGc()};return Se(this,Qt,VN({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:p=>{var g,w,v,_;if(p===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(b){c(b);return}(w=(g=K(this,qn).config).onSuccess)==null||w.call(g,p,this),(_=(v=K(this,qn).config).onSettled)==null||_.call(v,p,this.state.error,this),this.scheduleGc()},onError:c,onFail:(p,g)=>{Ht(this,mr,hs).call(this,{type:"failed",failureCount:p,error:g})},onPause:()=>{Ht(this,mr,hs).call(this,{type:"pause"})},onContinue:()=>{Ht(this,mr,hs).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),K(this,Qt).start()}},Oa=new WeakMap,La=new WeakMap,qn=new WeakMap,Qt=new WeakMap,mu=new WeakMap,vo=new WeakMap,mr=new WeakSet,hs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...dO(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Gp(i)&&i.revert&&K(this,La)?{...K(this,La),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),an.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,qn).notify({query:this,type:"updated",action:n})})},tE);function dO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ON(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function hO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var $r,nE,fO=(nE=class extends Xf{constructor(e={}){super();Fe(this,$r);this.config=e,Se(this,$r,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??mx(s,n);let o=this.get(i);return o||(o=new uO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,$r).has(e.queryHash)||(K(this,$r).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,$r).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,$r).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){an.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,$r).get(e)}getAll(){return[...K(this,$r).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>f1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>f1(e,r)):n}notify(e){an.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){an.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){an.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$r=new WeakMap,nE),Br,sn,xo,Wr,Xs,rE,mO=(rE=class extends FN{constructor(n){super();Fe(this,Wr);Fe(this,Br);Fe(this,sn);Fe(this,xo);this.mutationId=n.mutationId,Se(this,sn,n.mutationCache),Se(this,Br,[]),this.state=n.state||pO(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,Br).includes(n)||(K(this,Br).push(n),this.clearGcTimeout(),K(this,sn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Se(this,Br,K(this,Br).filter(r=>r!==n)),this.scheduleGc(),K(this,sn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,Br).length||(this.state.status==="pending"?this.scheduleGc():K(this,sn).remove(this))}continue(){var n;return((n=K(this,xo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,l,c,u,h,f,p,g,w,v,_,b,x,S,I,D,M,E,C;Se(this,xo,VN({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(N,k)=>{Ht(this,Wr,Xs).call(this,{type:"failed",failureCount:N,error:k})},onPause:()=>{Ht(this,Wr,Xs).call(this,{type:"pause"})},onContinue:()=>{Ht(this,Wr,Xs).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,sn).canRun(this)}));const r=this.state.status==="pending",s=!K(this,xo).canStart();try{if(!r){Ht(this,Wr,Xs).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=K(this,sn).config).onMutate)==null?void 0:o.call(i,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&Ht(this,Wr,Xs).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const N=await K(this,xo).start();return await((h=(u=K(this,sn).config).onSuccess)==null?void 0:h.call(u,N,n,this.state.context,this)),await((p=(f=this.options).onSuccess)==null?void 0:p.call(f,N,n,this.state.context)),await((w=(g=K(this,sn).config).onSettled)==null?void 0:w.call(g,N,null,this.state.variables,this.state.context,this)),await((_=(v=this.options).onSettled)==null?void 0:_.call(v,N,null,n,this.state.context)),Ht(this,Wr,Xs).call(this,{type:"success",data:N}),N}catch(N){try{throw await((x=(b=K(this,sn).config).onError)==null?void 0:x.call(b,N,n,this.state.context,this)),await((I=(S=this.options).onError)==null?void 0:I.call(S,N,n,this.state.context)),await((M=(D=K(this,sn).config).onSettled)==null?void 0:M.call(D,void 0,N,this.state.variables,this.state.context,this)),await((C=(E=this.options).onSettled)==null?void 0:C.call(E,void 0,N,n,this.state.context)),N}finally{Ht(this,Wr,Xs).call(this,{type:"error",error:N})}}finally{K(this,sn).runNext(this)}}},Br=new WeakMap,sn=new WeakMap,xo=new WeakMap,Wr=new WeakSet,Xs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),an.batch(()=>{K(this,Br).forEach(s=>{s.onMutationUpdate(n)}),K(this,sn).notify({mutation:this,type:"updated",action:n})})},rE);function pO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var jn,pu,sE,gO=(sE=class extends Xf{constructor(e={}){super();Fe(this,jn);Fe(this,pu);this.config=e,Se(this,jn,new Map),Se(this,pu,Date.now())}build(e,n,r){const s=new mO({mutationCache:this,mutationId:++od(this,pu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Ed(e),r=K(this,jn).get(n)??[];r.push(e),K(this,jn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Ed(e);if(K(this,jn).has(n)){const s=(r=K(this,jn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?K(this,jn).delete(n):K(this,jn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=K(this,jn).get(Ed(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=K(this,jn).get(Ed(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){an.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...K(this,jn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>m1(n,r))}findAll(e={}){return this.getAll().filter(n=>m1(e,n))}notify(e){an.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return an.batch(()=>Promise.all(e.map(n=>n.continue().catch(fr))))}},jn=new WeakMap,pu=new WeakMap,sE);function Ed(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function y1(t){return{onFetch:(e,n)=>{var h,f,p,g,w;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((w=e.state.data)==null?void 0:w.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},b=DN(e.options,e.fetchOptions),x=async(S,I,D)=>{if(v)return Promise.reject();if(I==null&&S.pages.length)return Promise.resolve(S);const M={queryKey:e.queryKey,pageParam:I,direction:D?"backward":"forward",meta:e.options.meta};_(M);const E=await b(M),{maxPages:C}=e.options,N=D?sO:rO;return{pages:N(S.pages,E,C),pageParams:N(S.pageParams,I,C)}};if(s&&i.length){const S=s==="backward",I=S?yO:v1,D={pages:i,pageParams:o},M=I(r,D);l=await x(D,M,S)}else{const S=t??i.length;do{const I=c===0?o[0]??r.initialPageParam:v1(r,l);if(c>0&&I==null)break;l=await x(l,I),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>{var v,_;return(_=(v=e.options).persister)==null?void 0:_.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function v1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function yO(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var ht,li,ci,Va,Fa,ui,za,Ua,iE,vO=(iE=class{constructor(t={}){Fe(this,ht);Fe(this,li);Fe(this,ci);Fe(this,Va);Fe(this,Fa);Fe(this,ui);Fe(this,za);Fe(this,Ua);Se(this,ht,t.queryCache||new fO),Se(this,li,t.mutationCache||new gO),Se(this,ci,t.defaultOptions||{}),Se(this,Va,new Map),Se(this,Fa,new Map),Se(this,ui,0)}mount(){od(this,ui)._++,K(this,ui)===1&&(Se(this,za,MN.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,ht).onFocus())})),Se(this,Ua,Bh.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,ht).onOnline())})))}unmount(){var t,e;od(this,ui)._--,K(this,ui)===0&&((t=K(this,za))==null||t.call(this),Se(this,za,void 0),(e=K(this,Ua))==null||e.call(this),Se(this,Ua,void 0))}isFetching(t){return K(this,ht).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,li).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,ht).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=K(this,ht).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(h1(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return K(this,ht).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,ht).get(r.queryHash),i=s==null?void 0:s.state.data,o=YM(e,i);if(o!==void 0)return K(this,ht).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return an.batch(()=>K(this,ht).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,ht).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,ht);an.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,ht),r={type:"active",...t};return an.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=an.batch(()=>K(this,ht).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(fr).catch(fr)}invalidateQueries(t={},e={}){return an.batch(()=>{if(K(this,ht).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=an.batch(()=>K(this,ht).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(fr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(fr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,ht).build(this,e);return n.isStaleByTime(h1(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fr).catch(fr)}fetchInfiniteQuery(t){return t.behavior=y1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fr).catch(fr)}ensureInfiniteQueryData(t){return t.behavior=y1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Bh.isOnline()?K(this,li).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,ht)}getMutationCache(){return K(this,li)}getDefaultOptions(){return K(this,ci)}setDefaultOptions(t){Se(this,ci,t)}setQueryDefaults(t,e){K(this,Va).set(Yc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,Va).values()];let n={};return e.forEach(r=>{Jc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){K(this,Fa).set(Yc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,Fa).values()];let n={};return e.forEach(r=>{Jc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,ci).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=mx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===px&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,ci).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,ht).clear(),K(this,li).clear()}},ht=new WeakMap,li=new WeakMap,ci=new WeakMap,Va=new WeakMap,Fa=new WeakMap,ui=new WeakMap,za=new WeakMap,Ua=new WeakMap,iE),xO=m.createContext(void 0),wO=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(xO.Provider,{value:t,children:e}));async function bO(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const _O=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await bO(n),await n.json())},SO=new vO({defaultOptions:{queries:{queryFn:_O({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),EO=1,TO=1e6;let Kp=0;function NO(){return Kp=(Kp+1)%Number.MAX_SAFE_INTEGER,Kp.toString()}const Qp=new Map,x1=t=>{if(Qp.has(t))return;const e=setTimeout(()=>{Qp.delete(t),Sc({type:"REMOVE_TOAST",toastId:t})},TO);Qp.set(t,e)},CO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,EO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?x1(n):t.toasts.forEach(r=>{x1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},th=[];let nh={toasts:[]};function Sc(t){nh=CO(nh,t),th.forEach(e=>{e(nh)})}function kO({...t}){const e=NO(),n=s=>Sc({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Sc({type:"DISMISS_TOAST",toastId:e});return Sc({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Wo(){const[t,e]=m.useState(nh);return m.useEffect(()=>(th.push(e),()=>{const n=th.indexOf(e);n>-1&&th.splice(n,1)}),[t]),{...t,toast:kO,dismiss:n=>Sc({type:"DISMISS_TOAST",toastId:n})}}function me(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function w1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function zN(...t){return e=>{let n=!1;const r=t.map(s=>{const i=w1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():w1(t[s],null)}}}}function Ne(...t){return m.useCallback(zN(...t),t)}function IO(t,e){const n=m.createContext(e),r=i=>{const{children:o,...l}=i,c=m.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Wn(t,e=[]){let n=[];function r(i,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var b;const{scope:p,children:g,...w}=f,v=((b=p==null?void 0:p[t])==null?void 0:b[c])||l,_=m.useMemo(()=>w,Object.values(w));return a.jsx(v.Provider,{value:_,children:g})};u.displayName=i+"Provider";function h(f,p){var v;const g=((v=p==null?void 0:p[t])==null?void 0:v[c])||l,w=m.useContext(g);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,AO(s,...e)]}function AO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function jo(t){const e=RO(t),n=m.forwardRef((r,s)=>{const{children:i,...o}=r,l=m.Children.toArray(i),c=l.find(PO);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var jO=jo("Slot");function RO(t){const e=m.forwardRef((n,r)=>{const{children:s,...i}=n;if(m.isValidElement(s)){const o=MO(s),l=DO(i,s.props);return s.type!==m.Fragment&&(l.ref=r?zN(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var UN=Symbol("radix.slottable");function $N(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=UN,e}function PO(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===UN}function DO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function MO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function gx(t){const e=t+"CollectionProvider",[n,r]=Wn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:_,children:b}=v,x=Ee.useRef(null),S=Ee.useRef(new Map).current;return a.jsx(s,{scope:_,itemMap:S,collectionRef:x,children:b})};o.displayName=e;const l=t+"CollectionSlot",c=jo(l),u=Ee.forwardRef((v,_)=>{const{scope:b,children:x}=v,S=i(l,b),I=Ne(_,S.collectionRef);return a.jsx(c,{ref:I,children:x})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=jo(h),g=Ee.forwardRef((v,_)=>{const{scope:b,children:x,...S}=v,I=Ee.useRef(null),D=Ne(_,I),M=i(h,b);return Ee.useEffect(()=>(M.itemMap.set(I,{ref:I,...S}),()=>void M.itemMap.delete(I))),a.jsx(p,{[f]:"",ref:D,children:x})});g.displayName=h;function w(v){const _=i(t+"CollectionConsumer",v);return Ee.useCallback(()=>{const x=_.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(_.itemMap.values()).sort((M,E)=>S.indexOf(M.ref.current)-S.indexOf(E.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},w,r]}var OO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ge=OO.reduce((t,e)=>{const n=jo(`Primitive.${e}`),r=m.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function BN(t,e){t&&Zn.flushSync(()=>t.dispatchEvent(e))}function mt(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function LO(t,e=globalThis==null?void 0:globalThis.document){const n=mt(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var VO="DismissableLayer",xy="dismissableLayer.update",FO="dismissableLayer.pointerDownOutside",zO="dismissableLayer.focusOutside",b1,WN=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ml=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(WN),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=m.useState({}),w=Ne(e,E=>f(E)),v=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(_),x=h?v.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,I=x>=b,D=$O(E=>{const C=E.target,N=[...u.branches].some(k=>k.contains(C));!I||N||(s==null||s(E),o==null||o(E),E.defaultPrevented||l==null||l())},p),M=BO(E=>{const C=E.target;[...u.branches].some(k=>k.contains(C))||(i==null||i(E),o==null||o(E),E.defaultPrevented||l==null||l())},p);return LO(E=>{x===u.layers.size-1&&(r==null||r(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(b1=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),_1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=b1)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),_1())},[h,u]),m.useEffect(()=>{const E=()=>g({});return document.addEventListener(xy,E),()=>document.removeEventListener(xy,E)},[]),a.jsx(ge.div,{...c,ref:w,style:{pointerEvents:S?I?"auto":"none":void 0,...t.style},onFocusCapture:me(t.onFocusCapture,M.onFocusCapture),onBlurCapture:me(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:me(t.onPointerDownCapture,D.onPointerDownCapture)})});ml.displayName=VO;var UO="DismissableLayerBranch",HN=m.forwardRef((t,e)=>{const n=m.useContext(WN),r=m.useRef(null),s=Ne(e,r);return m.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(ge.div,{...t,ref:s})});HN.displayName=UO;function $O(t,e=globalThis==null?void 0:globalThis.document){const n=mt(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){qN(FO,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function BO(t,e=globalThis==null?void 0:globalThis.document){const n=mt(t),r=m.useRef(!1);return m.useEffect(()=>{const s=i=>{i.target&&!r.current&&qN(zO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _1(){const t=new CustomEvent(xy);document.dispatchEvent(t)}function qN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?BN(s,i):s.dispatchEvent(i)}var WO=ml,HO=HN,_t=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},qO="Portal",pl=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=m.useState(!1);_t(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?bM.createPortal(a.jsx(ge.div,{...r,ref:e}),o):null});pl.displayName=qO;function GO(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var Nn=t=>{const{present:e,children:n}=t,r=KO(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),i=Ne(r.ref,QO(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:i}):null};Nn.displayName="Presence";function KO(t){const[e,n]=m.useState(),r=m.useRef({}),s=m.useRef(t),i=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=GO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Td(r.current);i.current=l==="mounted"?u:"none"},[l]),_t(()=>{const u=r.current,h=s.current;if(h!==t){const p=i.current,g=Td(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),_t(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const v=Td(r.current).includes(g.animationName);if(g.target===e&&v&&(c("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},p=g=>{g.target===e&&(i.current=Td(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Td(t){return(t==null?void 0:t.animationName)||"none"}function QO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ns({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=XO({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,l=mt(n),c=m.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&l(f)}else s(u)},[i,t,s,l]);return[o,c]}function XO({defaultProp:t,onChange:e}){const n=m.useState(t),[r]=n,s=m.useRef(r),i=mt(e);return m.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var YO="VisuallyHidden",_u=m.forwardRef((t,e)=>a.jsx(ge.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));_u.displayName=YO;var JO=_u,yx="ToastProvider",[vx,ZO,e5]=gx("Toast"),[GN,yG]=Wn("Toast",[e5]),[t5,Jf]=GN(yx),KN=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${yx}\`. Expected non-empty \`string\`.`),a.jsx(vx.Provider,{scope:e,children:a.jsx(t5,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(g=>g+1),[]),onToastRemove:m.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};KN.displayName=yx;var QN="ToastViewport",n5=["F8"],wy="toast.viewportPause",by="toast.viewportResume",XN=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=n5,label:s="Notifications ({hotkey})",...i}=t,o=Jf(QN,n),l=ZO(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=Ne(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),w=o.toastCount>0;m.useEffect(()=>{const _=b=>{var S;r.length!==0&&r.every(I=>b[I]||b.code===I)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),m.useEffect(()=>{const _=c.current,b=f.current;if(w&&_&&b){const x=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(wy);b.dispatchEvent(M),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(by);b.dispatchEvent(M),o.isClosePausedRef.current=!1}},I=M=>{!_.contains(M.relatedTarget)&&S()},D=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",x),_.addEventListener("focusout",I),_.addEventListener("pointermove",x),_.addEventListener("pointerleave",D),window.addEventListener("blur",x),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",x),_.removeEventListener("focusout",I),_.removeEventListener("pointermove",x),_.removeEventListener("pointerleave",D),window.removeEventListener("blur",x),window.removeEventListener("focus",S)}}},[w,o.isClosePausedRef]);const v=m.useCallback(({tabbingDirection:_})=>{const x=l().map(S=>{const I=S.ref.current,D=[I,...p5(I)];return _==="forwards"?D:D.reverse()});return(_==="forwards"?x.reverse():x).flat()},[l]);return m.useEffect(()=>{const _=f.current;if(_){const b=x=>{var D,M,E;const S=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!S){const C=document.activeElement,N=x.shiftKey;if(x.target===_&&N){(D=u.current)==null||D.focus();return}const P=v({tabbingDirection:N?"backwards":"forwards"}),R=P.findIndex(F=>F===C);Xp(P.slice(R+1))?x.preventDefault():N?(M=u.current)==null||M.focus():(E=h.current)==null||E.focus()}};return _.addEventListener("keydown",b),()=>_.removeEventListener("keydown",b)}},[l,v]),a.jsxs(HO,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:w?void 0:"none"},children:[w&&a.jsx(_y,{ref:u,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"forwards"});Xp(_)}}),a.jsx(vx.Slot,{scope:n,children:a.jsx(ge.ol,{tabIndex:-1,...i,ref:p})}),w&&a.jsx(_y,{ref:h,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"backwards"});Xp(_)}})]})});XN.displayName=QN;var YN="ToastFocusProxy",_y=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Jf(YN,n);return a.jsx(_u,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});_y.displayName=YN;var Zf="Toast",r5="toast.swipeStart",s5="toast.swipeMove",i5="toast.swipeCancel",o5="toast.swipeEnd",JN=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=Ns({prop:r,defaultProp:s,onChange:i});return a.jsx(Nn,{present:n||l,children:a.jsx(c5,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:mt(t.onPause),onResume:mt(t.onResume),onSwipeStart:me(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:me(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:me(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:me(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});JN.displayName=Zf;var[a5,l5]=GN(Zf,{onClose(){}}),c5=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:g,...w}=t,v=Jf(Zf,n),[_,b]=m.useState(null),x=Ne(e,F=>b(F)),S=m.useRef(null),I=m.useRef(null),D=s||v.duration,M=m.useRef(0),E=m.useRef(D),C=m.useRef(0),{onToastAdd:N,onToastRemove:k}=v,A=mt(()=>{var ie;(_==null?void 0:_.contains(document.activeElement))&&((ie=v.viewport)==null||ie.focus()),o()}),P=m.useCallback(F=>{!F||F===1/0||(window.clearTimeout(C.current),M.current=new Date().getTime(),C.current=window.setTimeout(A,F))},[A]);m.useEffect(()=>{const F=v.viewport;if(F){const ie=()=>{P(E.current),u==null||u()},J=()=>{const Y=new Date().getTime()-M.current;E.current=E.current-Y,window.clearTimeout(C.current),c==null||c()};return F.addEventListener(wy,J),F.addEventListener(by,ie),()=>{F.removeEventListener(wy,J),F.removeEventListener(by,ie)}}},[v.viewport,D,c,u,P]),m.useEffect(()=>{i&&!v.isClosePausedRef.current&&P(D)},[i,D,v.isClosePausedRef,P]),m.useEffect(()=>(N(),()=>k()),[N,k]);const R=m.useMemo(()=>_?iC(_):null,[_]);return v.viewport?a.jsxs(a.Fragment,{children:[R&&a.jsx(u5,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),a.jsx(a5,{scope:n,onClose:A,children:Zn.createPortal(a.jsx(vx.ItemSlot,{scope:n,children:a.jsx(WO,{asChild:!0,onEscapeKeyDown:me(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||A(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(ge.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...w,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:me(t.onKeyDown,F=>{F.key==="Escape"&&(l==null||l(F.nativeEvent),F.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:me(t.onPointerDown,F=>{F.button===0&&(S.current={x:F.clientX,y:F.clientY})}),onPointerMove:me(t.onPointerMove,F=>{if(!S.current)return;const ie=F.clientX-S.current.x,J=F.clientY-S.current.y,Y=!!I.current,O=["left","right"].includes(v.swipeDirection),B=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,U=O?B(0,ie):0,W=O?0:B(0,J),q=F.pointerType==="touch"?10:2,oe={x:U,y:W},ee={originalEvent:F,delta:oe};Y?(I.current=oe,Nd(s5,f,ee,{discrete:!1})):S1(oe,v.swipeDirection,q)?(I.current=oe,Nd(r5,h,ee,{discrete:!1}),F.target.setPointerCapture(F.pointerId)):(Math.abs(ie)>q||Math.abs(J)>q)&&(S.current=null)}),onPointerUp:me(t.onPointerUp,F=>{const ie=I.current,J=F.target;if(J.hasPointerCapture(F.pointerId)&&J.releasePointerCapture(F.pointerId),I.current=null,S.current=null,ie){const Y=F.currentTarget,O={originalEvent:F,delta:ie};S1(ie,v.swipeDirection,v.swipeThreshold)?Nd(o5,g,O,{discrete:!0}):Nd(i5,p,O,{discrete:!0}),Y.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),u5=t=>{const{__scopeToast:e,children:n,...r}=t,s=Jf(Zf,e),[i,o]=m.useState(!1),[l,c]=m.useState(!1);return f5(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(pl,{asChild:!0,children:a.jsx(_u,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},d5="ToastTitle",ZN=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ge.div,{...r,ref:e})});ZN.displayName=d5;var h5="ToastDescription",eC=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ge.div,{...r,ref:e})});eC.displayName=h5;var tC="ToastAction",nC=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(sC,{altText:n,asChild:!0,children:a.jsx(xx,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${tC}\`. Expected non-empty \`string\`.`),null)});nC.displayName=tC;var rC="ToastClose",xx=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=l5(rC,n);return a.jsx(sC,{asChild:!0,children:a.jsx(ge.button,{type:"button",...r,ref:e,onClick:me(t.onClick,s.onClose)})})});xx.displayName=rC;var sC=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(ge.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function iC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),m5(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...iC(r))}}),e}function Nd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?BN(s,i):s.dispatchEvent(i)}var S1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function f5(t=()=>{}){const e=mt(t);_t(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function m5(t){return t.nodeType===t.ELEMENT_NODE}function p5(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Xp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var g5=KN,oC=XN,aC=JN,lC=ZN,cC=eC,uC=nC,dC=xx;function hC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=hC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function fC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=hC(t))&&(r&&(r+=" "),r+=e);return r}const E1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,T1=fC,Su=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return T1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const p=E1(h)||E1(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...g}=h;return Object.entries(g).every(w=>{let[v,_]=w;return Array.isArray(_)?_.includes({...i,...l}[v]):{...i,...l}[v]===_})?[...u,f,p]:u},[]);return T1(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var v5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...v5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:mC("lucide",s),...l},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=(t,e)=>{const n=m.forwardRef(({className:r,...s},i)=>m.createElement(x5,{ref:i,iconNode:e,className:mC(`lucide-${y5(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=ce("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=ce("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=ce("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=ce("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=ce("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=ce("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=ce("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=ce("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=ce("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=ce("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=ce("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=ce("ChartNoAxesGantt",[["path",{d:"M8 6h10",key:"9lnwnk"}],["path",{d:"M6 12h9",key:"1g9pqf"}],["path",{d:"M11 18h7",key:"c8dzvl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wh=ce("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ce("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=ce("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=ce("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=ce("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=ce("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=ce("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=ce("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=ce("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ce("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=ce("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C1=ce("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sy=ce("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=ce("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=ce("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=ce("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=ce("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=ce("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k1=ce("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=ce("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=ce("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=ce("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=ce("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ce("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=ce("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ce("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=ce("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=ce("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=ce("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=ce("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _x=ce("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=ce("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ce("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=ce("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=ce("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=ce("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=ce("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=ce("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=ce("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qh=ce("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=ce("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=ce("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ce("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=ce("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=ce("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ce("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=ce("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=ce("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=ce("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=ce("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=ce("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=ce("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=ce("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=ce("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=ce("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=ce("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=ce("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Tx="-",q5=t=>{const e=K5(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Tx);return l[0]===""&&l.length!==1&&l.shift(),kC(l,e)||G5(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},kC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?kC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Tx);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},I1=/^\[(.+)\]$/,G5=t=>{if(I1.test(t)){const e=I1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},K5=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return X5(Object.entries(t.classGroups),n).forEach(([i,o])=>{ky(o,r,i,e)}),r},ky=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:A1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(Q5(s)){ky(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{ky(o,A1(e,i),n,r)})})},A1=(t,e)=>{let n=t;return e.split(Tx).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},Q5=t=>t.isThemeGetter,X5=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,Y5=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},IC="!",J5=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let _=0;_<l.length;_++){let b=l[_];if(u===0){if(b===s&&(r||l.slice(_,_+i)===e)){c.push(l.slice(h,_)),h=_+i;continue}if(b==="/"){f=_;continue}}b==="["?u++:b==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(IC),w=g?p.substring(1):p,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:w,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},Z5=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},eL=t=>({cache:Y5(t.cacheSize),parseClassName:J5(t),...q5(t)}),tL=/\s+/,nL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(tL);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let w=!!g,v=r(w?p.substring(0,g):p);if(!v){if(!w){l=u+(l.length>0?" "+l:l);continue}if(v=r(p),!v){l=u+(l.length>0?" "+l:l);continue}w=!1}const _=Z5(h).join(":"),b=f?_+IC:_,x=b+v;if(i.includes(x))continue;i.push(x);const S=s(v,w);for(let I=0;I<S.length;++I){const D=S[I];i.push(b+D)}l=u+(l.length>0?" "+l:l)}return l};function rL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=AC(e))&&(r&&(r+=" "),r+=n);return r}const AC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=AC(t[r]))&&(n&&(n+=" "),n+=e);return n};function sL(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=eL(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=nL(c,n);return s(c,h),h}return function(){return i(rL.apply(null,arguments))}}const et=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},jC=/^\[(?:([a-z-]+):)?(.+)\]$/i,iL=/^\d+\/\d+$/,oL=new Set(["px","full","screen"]),aL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,uL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ds=t=>Ea(t)||oL.has(t)||iL.test(t),Gs=t=>gl(t,"length",xL),Ea=t=>!!t&&!Number.isNaN(Number(t)),Yp=t=>gl(t,"number",Ea),rc=t=>!!t&&Number.isInteger(Number(t)),hL=t=>t.endsWith("%")&&Ea(t.slice(0,-1)),be=t=>jC.test(t),Ks=t=>aL.test(t),fL=new Set(["length","size","percentage"]),mL=t=>gl(t,fL,RC),pL=t=>gl(t,"position",RC),gL=new Set(["image","url"]),yL=t=>gl(t,gL,bL),vL=t=>gl(t,"",wL),sc=()=>!0,gl=(t,e,n)=>{const r=jC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},xL=t=>lL.test(t)&&!cL.test(t),RC=()=>!1,wL=t=>uL.test(t),bL=t=>dL.test(t),_L=()=>{const t=et("colors"),e=et("spacing"),n=et("blur"),r=et("brightness"),s=et("borderColor"),i=et("borderRadius"),o=et("borderSpacing"),l=et("borderWidth"),c=et("contrast"),u=et("grayscale"),h=et("hueRotate"),f=et("invert"),p=et("gap"),g=et("gradientColorStops"),w=et("gradientColorStopPositions"),v=et("inset"),_=et("margin"),b=et("opacity"),x=et("padding"),S=et("saturate"),I=et("scale"),D=et("sepia"),M=et("skew"),E=et("space"),C=et("translate"),N=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",be,e],P=()=>[be,e],R=()=>["",ds,Gs],F=()=>["auto",Ea,be],ie=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],J=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",be],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[Ea,be];return{cacheSize:500,separator:":",theme:{colors:[sc],spacing:[ds,Gs],blur:["none","",Ks,be],brightness:W(),borderColor:[t],borderRadius:["none","","full",Ks,be],borderSpacing:P(),borderWidth:R(),contrast:W(),grayscale:B(),hueRotate:W(),invert:B(),gap:P(),gradientColorStops:[t],gradientColorStopPositions:[hL,Gs],inset:A(),margin:A(),opacity:W(),padding:P(),saturate:W(),scale:W(),sepia:B(),skew:W(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",be]}],container:["container"],columns:[{columns:[Ks]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ie(),be]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rc,be]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",be]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",rc,be]}],"grid-cols":[{"grid-cols":[sc]}],"col-start-end":[{col:["auto",{span:["full",rc,be]},be]}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":[sc]}],"row-start-end":[{row:["auto",{span:[rc,be]},be]}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",be]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",be]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",be,e]}],"min-w":[{"min-w":[be,e,"min","max","fit"]}],"max-w":[{"max-w":[be,e,"none","full","min","max","fit","prose",{screen:[Ks]},Ks]}],h:[{h:[be,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[be,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[be,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ks,Gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Yp]}],"font-family":[{font:[sc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",be]}],"line-clamp":[{"line-clamp":["none",Ea,Yp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ds,be]}],"list-image":[{"list-image":["none",be]}],"list-style-type":[{list:["none","disc","decimal",be]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[b]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[b]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ds,Gs]}],"underline-offset":[{"underline-offset":["auto",ds,be]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",be]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",be]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[b]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ie(),pL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",mL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},yL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[b]}],"border-style":[{border:[...J(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[b]}],"divide-style":[{divide:J()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...J()]}],"outline-offset":[{"outline-offset":[ds,be]}],"outline-w":[{outline:[ds,Gs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[b]}],"ring-offset-w":[{"ring-offset":[ds,Gs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ks,vL]}],"shadow-color":[{shadow:[sc]}],opacity:[{opacity:[b]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ks,be]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[b]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",be]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",be]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",be]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[rc,be]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",be]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",be]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",be]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ds,Gs,Yp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},SL=sL(_L);function $(...t){return SL(fC(t))}const EL=g5,PC=m.forwardRef(({className:t,...e},n)=>a.jsx(oC,{ref:n,className:$("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));PC.displayName=oC.displayName;const TL=Su("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),DC=m.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(aC,{ref:r,className:$(TL({variant:e}),t),...n}));DC.displayName=aC.displayName;const NL=m.forwardRef(({className:t,...e},n)=>a.jsx(uC,{ref:n,className:$("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));NL.displayName=uC.displayName;const MC=m.forwardRef(({className:t,...e},n)=>a.jsx(dC,{ref:n,className:$("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(Po,{className:"h-4 w-4"})}));MC.displayName=dC.displayName;const OC=m.forwardRef(({className:t,...e},n)=>a.jsx(lC,{ref:n,className:$("text-sm font-semibold",t),...e}));OC.displayName=lC.displayName;const LC=m.forwardRef(({className:t,...e},n)=>a.jsx(cC,{ref:n,className:$("text-sm opacity-90",t),...e}));LC.displayName=cC.displayName;function CL(){const{toasts:t}=Wo();return a.jsxs(EL,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(DC,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(OC,{children:n}),r&&a.jsx(LC,{children:r})]}),s,a.jsx(MC,{})]},e)}),a.jsx(PC,{})]})}var kL=yE[" useId ".trim().toString()]||(()=>{}),IL=0;function Jr(t){const[e,n]=m.useState(kL());return _t(()=>{n(r=>r??String(IL++))},[t]),e?`radix-${e}`:""}const AL=["top","right","bottom","left"],Ai=Math.min,Pn=Math.max,Gh=Math.round,Cd=Math.floor,Zr=t=>({x:t,y:t}),jL={left:"right",right:"left",bottom:"top",top:"bottom"},RL={start:"end",end:"start"};function Iy(t,e,n){return Pn(t,Ai(e,n))}function Cs(t,e){return typeof t=="function"?t(e):t}function ks(t){return t.split("-")[0]}function yl(t){return t.split("-")[1]}function Nx(t){return t==="x"?"y":"x"}function Cx(t){return t==="y"?"height":"width"}function ji(t){return["top","bottom"].includes(ks(t))?"y":"x"}function kx(t){return Nx(ji(t))}function PL(t,e,n){n===void 0&&(n=!1);const r=yl(t),s=kx(t),i=Cx(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=Kh(o)),[o,Kh(o)]}function DL(t){const e=Kh(t);return[Ay(t),e,Ay(e)]}function Ay(t){return t.replace(/start|end/g,e=>RL[e])}function ML(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function OL(t,e,n,r){const s=yl(t);let i=ML(ks(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Ay)))),i}function Kh(t){return t.replace(/left|right|bottom|top/g,e=>jL[e])}function LL(t){return{top:0,right:0,bottom:0,left:0,...t}}function VC(t){return typeof t!="number"?LL(t):{top:t,right:t,bottom:t,left:t}}function Qh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function j1(t,e,n){let{reference:r,floating:s}=t;const i=ji(e),o=kx(e),l=Cx(o),c=ks(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(yl(e)){case"start":g[o]-=p*(n&&u?-1:1);break;case"end":g[o]+=p*(n&&u?-1:1);break}return g}const VL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=j1(u,r,c),p=r,g={},w=0;for(let v=0;v<l.length;v++){const{name:_,fn:b}=l[v],{x,y:S,data:I,reset:D}=await b({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=x??h,f=S??f,g={...g,[_]:{...g[_],...I}},D&&w<=50&&(w++,typeof D=="object"&&(D.placement&&(p=D.placement),D.rects&&(u=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:h,y:f}=j1(u,p,c)),v=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:g}};async function eu(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Cs(e,t),w=VC(g),_=l[p?f==="floating"?"reference":"floating":f],b=Qh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),x=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},D=Qh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:S,strategy:c}):x);return{top:(b.top-D.top+w.top)/I.y,bottom:(D.bottom-b.bottom+w.bottom)/I.y,left:(b.left-D.left+w.left)/I.x,right:(D.right-b.right+w.right)/I.x}}const FL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Cs(t,e)||{};if(u==null)return{};const f=VC(h),p={x:n,y:r},g=kx(s),w=Cx(g),v=await o.getDimensions(u),_=g==="y",b=_?"top":"left",x=_?"bottom":"right",S=_?"clientHeight":"clientWidth",I=i.reference[w]+i.reference[g]-p[g]-i.floating[w],D=p[g]-i.reference[g],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let E=M?M[S]:0;(!E||!await(o.isElement==null?void 0:o.isElement(M)))&&(E=l.floating[S]||i.floating[w]);const C=I/2-D/2,N=E/2-v[w]/2-1,k=Ai(f[b],N),A=Ai(f[x],N),P=k,R=E-v[w]-A,F=E/2-v[w]/2+C,ie=Iy(P,F,R),J=!c.arrow&&yl(s)!=null&&F!==ie&&i.reference[w]/2-(F<P?k:A)-v[w]/2<0,Y=J?F<P?F-P:F-R:0;return{[g]:p[g]+Y,data:{[g]:ie,centerOffset:F-ie-Y,...J&&{alignmentOffset:Y}},reset:J}}}),zL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:v=!0,..._}=Cs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const b=ks(s),x=ji(l),S=ks(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),D=p||(S||!v?[Kh(l)]:DL(l)),M=w!=="none";!p&&M&&D.push(...OL(l,v,w,I));const E=[l,...D],C=await eu(e,_),N=[];let k=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&N.push(C[b]),f){const F=PL(s,o,I);N.push(C[F[0]],C[F[1]])}if(k=[...k,{placement:s,overflows:N}],!N.every(F=>F<=0)){var A,P;const F=(((A=i.flip)==null?void 0:A.index)||0)+1,ie=E[F];if(ie)return{data:{index:F,overflows:k},reset:{placement:ie}};let J=(P=k.filter(Y=>Y.overflows[0]<=0).sort((Y,O)=>Y.overflows[1]-O.overflows[1])[0])==null?void 0:P.placement;if(!J)switch(g){case"bestFit":{var R;const Y=(R=k.filter(O=>{if(M){const B=ji(O.placement);return B===x||B==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((O,B)=>O[1]-B[1])[0])==null?void 0:R[0];Y&&(J=Y);break}case"initialPlacement":J=l;break}if(s!==J)return{reset:{placement:J}}}return{}}}};function R1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function P1(t){return AL.some(e=>t[e]>=0)}const UL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Cs(t,e);switch(r){case"referenceHidden":{const i=await eu(e,{...s,elementContext:"reference"}),o=R1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:P1(o)}}}case"escaped":{const i=await eu(e,{...s,altBoundary:!0}),o=R1(i,n.floating);return{data:{escapedOffsets:o,escaped:P1(o)}}}default:return{}}}}};async function $L(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ks(n),l=yl(n),c=ji(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=Cs(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:w}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof w=="number"&&(g=l==="end"?w*-1:w),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const BL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await $L(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},WL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:_=>{let{x:b,y:x}=_;return{x:b,y:x}}},...c}=Cs(t,e),u={x:n,y:r},h=await eu(e,c),f=ji(ks(s)),p=Nx(f);let g=u[p],w=u[f];if(i){const _=p==="y"?"top":"left",b=p==="y"?"bottom":"right",x=g+h[_],S=g-h[b];g=Iy(x,g,S)}if(o){const _=f==="y"?"top":"left",b=f==="y"?"bottom":"right",x=w+h[_],S=w-h[b];w=Iy(x,w,S)}const v=l.fn({...e,[p]:g,[f]:w});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[p]:i,[f]:o}}}}}},HL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Cs(t,e),h={x:n,y:r},f=ji(s),p=Nx(f);let g=h[p],w=h[f];const v=Cs(l,e),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const S=p==="y"?"height":"width",I=i.reference[p]-i.floating[S]+_.mainAxis,D=i.reference[p]+i.reference[S]-_.mainAxis;g<I?g=I:g>D&&(g=D)}if(u){var b,x;const S=p==="y"?"width":"height",I=["top","left"].includes(ks(s)),D=i.reference[f]-i.floating[S]+(I&&((b=o.offset)==null?void 0:b[f])||0)+(I?0:_.crossAxis),M=i.reference[f]+i.reference[S]+(I?0:((x=o.offset)==null?void 0:x[f])||0)-(I?_.crossAxis:0);w<D?w=D:w>M&&(w=M)}return{[p]:g,[f]:w}}}},qL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Cs(t,e),h=await eu(e,u),f=ks(s),p=yl(s),g=ji(s)==="y",{width:w,height:v}=i.floating;let _,b;f==="top"||f==="bottom"?(_=f,b=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(b=f,_=p==="end"?"top":"bottom");const x=v-h.top-h.bottom,S=w-h.left-h.right,I=Ai(v-h[_],x),D=Ai(w-h[b],S),M=!e.middlewareData.shift;let E=I,C=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(E=x),M&&!p){const k=Pn(h.left,0),A=Pn(h.right,0),P=Pn(h.top,0),R=Pn(h.bottom,0);g?C=w-2*(k!==0||A!==0?k+A:Pn(h.left,h.right)):E=v-2*(P!==0||R!==0?P+R:Pn(h.top,h.bottom))}await c({...e,availableWidth:C,availableHeight:E});const N=await o.getDimensions(l.floating);return w!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function sm(){return typeof window<"u"}function vl(t){return FC(t)?(t.nodeName||"").toLowerCase():"#document"}function Vn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function os(t){var e;return(e=(FC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function FC(t){return sm()?t instanceof Node||t instanceof Vn(t).Node:!1}function Cr(t){return sm()?t instanceof Element||t instanceof Vn(t).Element:!1}function rs(t){return sm()?t instanceof HTMLElement||t instanceof Vn(t).HTMLElement:!1}function D1(t){return!sm()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Vn(t).ShadowRoot}function Eu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=kr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function GL(t){return["table","td","th"].includes(vl(t))}function im(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Ix(t){const e=Ax(),n=Cr(t)?kr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function KL(t){let e=Ri(t);for(;rs(e)&&!Ja(e);){if(Ix(e))return e;if(im(e))return null;e=Ri(e)}return null}function Ax(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ja(t){return["html","body","#document"].includes(vl(t))}function kr(t){return Vn(t).getComputedStyle(t)}function om(t){return Cr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ri(t){if(vl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||D1(t)&&t.host||os(t);return D1(e)?e.host:e}function zC(t){const e=Ri(t);return Ja(e)?t.ownerDocument?t.ownerDocument.body:t.body:rs(e)&&Eu(e)?e:zC(e)}function tu(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=zC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Vn(s);if(i){const l=jy(o);return e.concat(o,o.visualViewport||[],Eu(s)?s:[],l&&n?tu(l):[])}return e.concat(s,tu(s,[],n))}function jy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function UC(t){const e=kr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=rs(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=Gh(n)!==i||Gh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function jx(t){return Cr(t)?t:t.contextElement}function Ta(t){const e=jx(t);if(!rs(e))return Zr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=UC(e);let o=(i?Gh(n.width):n.width)/r,l=(i?Gh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const QL=Zr(0);function $C(t){const e=Vn(t);return!Ax()||!e.visualViewport?QL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function XL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Vn(t)?!1:e}function Do(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=jx(t);let o=Zr(1);e&&(r?Cr(r)&&(o=Ta(r)):o=Ta(t));const l=XL(i,n,r)?$C(i):Zr(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const p=Vn(i),g=r&&Cr(r)?Vn(r):r;let w=p,v=jy(w);for(;v&&r&&g!==w;){const _=Ta(v),b=v.getBoundingClientRect(),x=kr(v),S=b.left+(v.clientLeft+parseFloat(x.paddingLeft))*_.x,I=b.top+(v.clientTop+parseFloat(x.paddingTop))*_.y;c*=_.x,u*=_.y,h*=_.x,f*=_.y,c+=S,u+=I,w=Vn(v),v=jy(w)}}return Qh({width:h,height:f,x:c,y:u})}function Rx(t,e){const n=om(t).scrollLeft;return e?e.left+n:Do(os(t)).left+n}function BC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Rx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function YL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=os(r),l=e?im(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Zr(1);const h=Zr(0),f=rs(r);if((f||!f&&!i)&&((vl(r)!=="body"||Eu(o))&&(c=om(r)),rs(r))){const g=Do(r);u=Ta(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=o&&!f&&!i?BC(o,c,!0):Zr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function JL(t){return Array.from(t.getClientRects())}function ZL(t){const e=os(t),n=om(t),r=t.ownerDocument.body,s=Pn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Pn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Rx(t);const l=-n.scrollTop;return kr(r).direction==="rtl"&&(o+=Pn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function e3(t,e){const n=Vn(t),r=os(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=Ax();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function t3(t,e){const n=Do(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=rs(t)?Ta(t):Zr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function M1(t,e,n){let r;if(e==="viewport")r=e3(t,n);else if(e==="document")r=ZL(os(t));else if(Cr(e))r=t3(e,n);else{const s=$C(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Qh(r)}function WC(t,e){const n=Ri(t);return n===e||!Cr(n)||Ja(n)?!1:kr(n).position==="fixed"||WC(n,e)}function n3(t,e){const n=e.get(t);if(n)return n;let r=tu(t,[],!1).filter(l=>Cr(l)&&vl(l)!=="body"),s=null;const i=kr(t).position==="fixed";let o=i?Ri(t):t;for(;Cr(o)&&!Ja(o);){const l=kr(o),c=Ix(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Eu(o)&&!c&&WC(t,o))?r=r.filter(h=>h!==o):s=l,o=Ri(o)}return e.set(t,r),r}function r3(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?im(e)?[]:n3(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=M1(e,h,s);return u.top=Pn(f.top,u.top),u.right=Ai(f.right,u.right),u.bottom=Ai(f.bottom,u.bottom),u.left=Pn(f.left,u.left),u},M1(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function s3(t){const{width:e,height:n}=UC(t);return{width:e,height:n}}function i3(t,e,n){const r=rs(e),s=os(e),i=n==="fixed",o=Do(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Zr(0);if(r||!r&&!i)if((vl(e)!=="body"||Eu(s))&&(l=om(e)),r){const p=Do(e,!0,i,e);c.x=p.x+e.clientLeft,c.y=p.y+e.clientTop}else s&&(c.x=Rx(s));const u=s&&!r&&!i?BC(s,l):Zr(0),h=o.left+l.scrollLeft-c.x-u.x,f=o.top+l.scrollTop-c.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function Jp(t){return kr(t).position==="static"}function O1(t,e){if(!rs(t)||kr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return os(t)===n&&(n=n.ownerDocument.body),n}function HC(t,e){const n=Vn(t);if(im(t))return n;if(!rs(t)){let s=Ri(t);for(;s&&!Ja(s);){if(Cr(s)&&!Jp(s))return s;s=Ri(s)}return n}let r=O1(t,e);for(;r&&GL(r)&&Jp(r);)r=O1(r,e);return r&&Ja(r)&&Jp(r)&&!Ix(r)?n:r||KL(t)||n}const o3=async function(t){const e=this.getOffsetParent||HC,n=this.getDimensions,r=await n(t.floating);return{reference:i3(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function a3(t){return kr(t).direction==="rtl"}const l3={convertOffsetParentRelativeRectToViewportRelativeRect:YL,getDocumentElement:os,getClippingRect:r3,getOffsetParent:HC,getElementRects:o3,getClientRects:JL,getDimensions:s3,getScale:Ta,isElement:Cr,isRTL:a3};function qC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function c3(t,e){let n=null,r;const s=os(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=u;if(l||e(),!p||!g)return;const w=Cd(f),v=Cd(s.clientWidth-(h+p)),_=Cd(s.clientHeight-(f+g)),b=Cd(h),S={rootMargin:-w+"px "+-v+"px "+-_+"px "+-b+"px",threshold:Pn(0,Ai(1,c))||1};let I=!0;function D(M){const E=M[0].intersectionRatio;if(E!==c){if(!I)return o();E?o(!1,E):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!qC(u,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(D,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,S)}n.observe(t)}return o(!0),i}function u3(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=jx(t),h=s||i?[...u?tu(u):[],...tu(e)]:[];h.forEach(b=>{s&&b.addEventListener("scroll",n,{passive:!0}),i&&b.addEventListener("resize",n)});const f=u&&l?c3(u,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(b=>{let[x]=b;x&&x.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let w,v=c?Do(t):null;c&&_();function _(){const b=Do(t);v&&!qC(v,b)&&n(),v=b,w=requestAnimationFrame(_)}return n(),()=>{var b;h.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),f==null||f(),(b=g)==null||b.disconnect(),g=null,c&&cancelAnimationFrame(w)}}const d3=BL,h3=WL,f3=zL,m3=qL,p3=UL,L1=FL,g3=HL,y3=(t,e,n)=>{const r=new Map,s={platform:l3,...n},i={...s.platform,_c:r};return VL(t,e,{...s,platform:i})};var sh=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Xh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Xh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Xh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function GC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function V1(t,e){const n=GC(t);return Math.round(e*n)/n}function Zp(t){const e=m.useRef(t);return sh(()=>{e.current=t}),e}function v3(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=m.useState(r);Xh(p,r)||g(r);const[w,v]=m.useState(null),[_,b]=m.useState(null),x=m.useCallback(O=>{O!==M.current&&(M.current=O,v(O))},[]),S=m.useCallback(O=>{O!==E.current&&(E.current=O,b(O))},[]),I=i||w,D=o||_,M=m.useRef(null),E=m.useRef(null),C=m.useRef(h),N=c!=null,k=Zp(c),A=Zp(s),P=Zp(u),R=m.useCallback(()=>{if(!M.current||!E.current)return;const O={placement:e,strategy:n,middleware:p};A.current&&(O.platform=A.current),y3(M.current,E.current,O).then(B=>{const U={...B,isPositioned:P.current!==!1};F.current&&!Xh(C.current,U)&&(C.current=U,Zn.flushSync(()=>{f(U)}))})},[p,e,n,A,P]);sh(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const F=m.useRef(!1);sh(()=>(F.current=!0,()=>{F.current=!1}),[]),sh(()=>{if(I&&(M.current=I),D&&(E.current=D),I&&D){if(k.current)return k.current(I,D,R);R()}},[I,D,R,k,N]);const ie=m.useMemo(()=>({reference:M,floating:E,setReference:x,setFloating:S}),[x,S]),J=m.useMemo(()=>({reference:I,floating:D}),[I,D]),Y=m.useMemo(()=>{const O={position:n,left:0,top:0};if(!J.floating)return O;const B=V1(J.floating,h.x),U=V1(J.floating,h.y);return l?{...O,transform:"translate("+B+"px, "+U+"px)",...GC(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:U}},[n,l,J.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:R,refs:ie,elements:J,floatingStyles:Y}),[h,R,ie,J,Y])}const x3=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?L1({element:r.current,padding:s}).fn(n):{}:r?L1({element:r,padding:s}).fn(n):{}}}},w3=(t,e)=>({...d3(t),options:[t,e]}),b3=(t,e)=>({...h3(t),options:[t,e]}),_3=(t,e)=>({...g3(t),options:[t,e]}),S3=(t,e)=>({...f3(t),options:[t,e]}),E3=(t,e)=>({...m3(t),options:[t,e]}),T3=(t,e)=>({...p3(t),options:[t,e]}),N3=(t,e)=>({...x3(t),options:[t,e]});var C3="Arrow",KC=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(ge.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});KC.displayName=C3;var k3=KC;function QC(t){const[e,n]=m.useState(void 0);return _t(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Px="Popper",[XC,xl]=Wn(Px),[I3,YC]=XC(Px),JC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return a.jsx(I3,{scope:e,anchor:r,onAnchorChange:s,children:n})};JC.displayName=Px;var ZC="PopperAnchor",ek=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=YC(ZC,n),o=m.useRef(null),l=Ne(e,o);return m.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(ge.div,{...s,ref:l})});ek.displayName=ZC;var Dx="PopperContent",[A3,j3]=XC(Dx),tk=m.forwardRef((t,e)=>{var L,X,ue,Q,te,ae;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:w,...v}=t,_=YC(Dx,n),[b,x]=m.useState(null),S=Ne(e,Te=>x(Te)),[I,D]=m.useState(null),M=QC(I),E=(M==null?void 0:M.width)??0,C=(M==null?void 0:M.height)??0,N=r+(i!=="center"?"-"+i:""),k=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},A=Array.isArray(u)?u:[u],P=A.length>0,R={padding:k,boundary:A.filter(P3),altBoundary:P},{refs:F,floatingStyles:ie,placement:J,isPositioned:Y,middlewareData:O}=v3({strategy:"fixed",placement:N,whileElementsMounted:(...Te)=>u3(...Te,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[w3({mainAxis:s+C,alignmentAxis:o}),c&&b3({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?_3():void 0,...R}),c&&S3({...R}),E3({...R,apply:({elements:Te,rects:Pe,availableWidth:pt,availableHeight:We})=>{const{width:Je,height:Cn}=Pe.reference,He=Te.floating.style;He.setProperty("--radix-popper-available-width",`${pt}px`),He.setProperty("--radix-popper-available-height",`${We}px`),He.setProperty("--radix-popper-anchor-width",`${Je}px`),He.setProperty("--radix-popper-anchor-height",`${Cn}px`)}}),I&&N3({element:I,padding:l}),D3({arrowWidth:E,arrowHeight:C}),p&&T3({strategy:"referenceHidden",...R})]}),[B,U]=sk(J),W=mt(w);_t(()=>{Y&&(W==null||W())},[Y,W]);const q=(L=O.arrow)==null?void 0:L.x,oe=(X=O.arrow)==null?void 0:X.y,ee=((ue=O.arrow)==null?void 0:ue.centerOffset)!==0,[ne,se]=m.useState();return _t(()=>{b&&se(window.getComputedStyle(b).zIndex)},[b]),a.jsx("div",{ref:F.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:Y?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[(Q=O.transformOrigin)==null?void 0:Q.x,(te=O.transformOrigin)==null?void 0:te.y].join(" "),...((ae=O.hide)==null?void 0:ae.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(A3,{scope:n,placedSide:B,onArrowChange:D,arrowX:q,arrowY:oe,shouldHideArrow:ee,children:a.jsx(ge.div,{"data-side":B,"data-align":U,...v,ref:S,style:{...v.style,animation:Y?void 0:"none"}})})})});tk.displayName=Dx;var nk="PopperArrow",R3={top:"bottom",right:"left",bottom:"top",left:"right"},rk=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=j3(nk,r),o=R3[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(k3,{...s,ref:n,style:{...s.style,display:"block"}})})});rk.displayName=nk;function P3(t){return t!==null}var D3=t=>({name:"transformOrigin",options:t,fn(e){var _,b,x;const{placement:n,rects:r,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=sk(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((b=s.arrow)==null?void 0:b.x)??0)+l/2,g=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let w="",v="";return u==="bottom"?(w=o?f:`${p}px`,v=`${-c}px`):u==="top"?(w=o?f:`${p}px`,v=`${r.floating.height+c}px`):u==="right"?(w=`${-c}px`,v=o?f:`${g}px`):u==="left"&&(w=`${r.floating.width+c}px`,v=o?f:`${g}px`),{data:{x:w,y:v}}}});function sk(t){const[e,n="center"]=t.split("-");return[e,n]}var Mx=JC,am=ek,Ox=tk,Lx=rk,[lm,vG]=Wn("Tooltip",[xl]),cm=xl(),ik="TooltipProvider",M3=700,Ry="tooltip.open",[O3,Vx]=lm(ik),ok=t=>{const{__scopeTooltip:e,delayDuration:n=M3,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(O3,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};ok.displayName=ik;var um="Tooltip",[L3,Tu]=lm(um),ak=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=Vx(um,t.__scopeTooltip),u=cm(e),[h,f]=m.useState(null),p=Jr(),g=m.useRef(0),w=o??c.disableHoverableContent,v=l??c.delayDuration,_=m.useRef(!1),[b=!1,x]=Ns({prop:r,defaultProp:s,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(Ry))):c.onClose(),i==null||i(E)}}),S=m.useMemo(()=>b?_.current?"delayed-open":"instant-open":"closed",[b]),I=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,x(!0)},[x]),D=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,x(!1)},[x]),M=m.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,x(!0),g.current=0},v)},[v,x]);return m.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),a.jsx(Mx,{...u,children:a.jsx(L3,{scope:e,contentId:p,open:b,stateAttribute:S,trigger:h,onTriggerChange:f,onTriggerEnter:m.useCallback(()=>{c.isOpenDelayedRef.current?M():I()},[c.isOpenDelayedRef,M,I]),onTriggerLeave:m.useCallback(()=>{w?D():(window.clearTimeout(g.current),g.current=0)},[D,w]),onOpen:I,onClose:D,disableHoverableContent:w,children:n})})};ak.displayName=um;var Py="TooltipTrigger",lk=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Tu(Py,n),i=Vx(Py,n),o=cm(n),l=m.useRef(null),c=Ne(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(am,{asChild:!0,...o,children:a.jsx(ge.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:me(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:me(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:me(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:me(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:me(t.onBlur,s.onClose),onClick:me(t.onClick,s.onClose)})})});lk.displayName=Py;var Fx="TooltipPortal",[V3,F3]=lm(Fx,{forceMount:void 0}),ck=t=>{const{__scopeTooltip:e,forceMount:n,children:r,container:s}=t,i=Tu(Fx,e);return a.jsx(V3,{scope:e,forceMount:n,children:a.jsx(Nn,{present:n||i.open,children:a.jsx(pl,{asChild:!0,container:s,children:r})})})};ck.displayName=Fx;var Za="TooltipContent",uk=m.forwardRef((t,e)=>{const n=F3(Za,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Tu(Za,t.__scopeTooltip);return a.jsx(Nn,{present:r||o.open,children:o.disableHoverableContent?a.jsx(dk,{side:s,...i,ref:e}):a.jsx(z3,{side:s,...i,ref:e})})}),z3=m.forwardRef((t,e)=>{const n=Tu(Za,t.__scopeTooltip),r=Vx(Za,t.__scopeTooltip),s=m.useRef(null),i=Ne(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),g=m.useCallback((w,v)=>{const _=w.currentTarget,b={x:w.clientX,y:w.clientY},x=H3(b,_.getBoundingClientRect()),S=q3(b,x),I=G3(v.getBoundingClientRect()),D=Q3([...S,...I]);l(D),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const w=_=>g(_,h),v=_=>g(_,c);return c.addEventListener("pointerleave",w),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",w),h.removeEventListener("pointerleave",v)}}},[c,h,g,p]),m.useEffect(()=>{if(o){const w=v=>{const _=v.target,b={x:v.clientX,y:v.clientY},x=(c==null?void 0:c.contains(_))||(h==null?void 0:h.contains(_)),S=!K3(b,o);x?p():S&&(p(),u())};return document.addEventListener("pointermove",w),()=>document.removeEventListener("pointermove",w)}},[c,h,o,u,p]),a.jsx(dk,{...t,ref:i})}),[U3,$3]=lm(um,{isInside:!1}),B3=$N("TooltipContent"),dk=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Tu(Za,n),u=cm(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(Ry,h),()=>document.removeEventListener(Ry,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(ml,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(Ox,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(B3,{children:r}),a.jsx(U3,{scope:n,isInside:!0,children:a.jsx(JO,{id:c.contentId,role:"tooltip",children:s||r})})]})})});uk.displayName=Za;var hk="TooltipArrow",W3=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=cm(n);return $3(hk,n).isInside?null:a.jsx(Lx,{...s,...r,ref:e})});W3.displayName=hk;function H3(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function q3(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function G3(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function K3(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,u=e[o].x,h=e[o].y;c>r!=h>r&&n<(u-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function Q3(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),X3(e)}function X3(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Y3=ok,J3=ak,Z3=lk,fk=ck,mk=uk;const dm=Y3,hm=J3,fm=Z3,Nu=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(mk,{ref:r,sideOffset:e,className:$("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));Nu.displayName=mk.displayName;const e6="modulepreload",t6=function(t){return"/"+t},F1={},ga=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=t6(c),c in F1)return;F1[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":e6,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},n6=()=>{};var z1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},r6=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},gk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r6(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new s6;const p=i<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const w=u<<6&192|f;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class s6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const i6=function(t){const e=pk(t);return gk.encodeByteArray(e,!0)},Yh=function(t){return i6(t).replace(/\./g,"")},yk=function(t){try{return gk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6=()=>o6().__FIREBASE_DEFAULTS__,l6=()=>{if(typeof process>"u"||typeof z1>"u")return;const t=z1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},c6=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yk(t[1]);return e&&JSON.parse(e)},mm=()=>{try{return n6()||a6()||l6()||c6()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vk=t=>{var e,n;return(n=(e=mm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},u6=t=>{const e=vk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},xk=()=>{var t;return(t=mm())==null?void 0:t.config},wk=t=>{var e;return(e=mm())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function bk(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Yh(JSON.stringify(n)),Yh(JSON.stringify(o)),""].join(".")}const Ec={};function f6(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ec))Ec[e]?t.emulator.push(e):t.prod.push(e);return t}function m6(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let U1=!1;function _k(t,e){if(typeof window>"u"||typeof document>"u"||!wl(window.location.host)||Ec[t]===e||Ec[t]||U1)return;Ec[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=f6().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{U1=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=m6(r),g=n("text"),w=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),_=document.getElementById(v)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const S=p.element;l(S),h(_,v);const I=u();c(x,b),S.append(x,w,_,I),document.body.appendChild(S)}i?(w.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function p6(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function g6(){var e;const t=(e=mm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v6(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function x6(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function w6(){const t=nn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b6(){return!g6()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _6(){try{return typeof indexedDB=="object"}catch{return!1}}function S6(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="FirebaseError";class Os extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=E6,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Cu.prototype.create)}}class Cu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?T6(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Os(s,l,r)}}function T6(t,e){return t.replace(N6,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const N6=/\{\$([^}]+)}/g;function C6(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if($1(i)&&$1(o)){if(!Pi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function $1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function k6(t,e){const n=new I6(t,e);return n.subscribe.bind(n)}class I6{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");A6(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=eg),s.error===void 0&&(s.error=eg),s.complete===void 0&&(s.complete=eg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function A6(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(t){return t&&t._delegate?t._delegate:t}class Mo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new d6;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P6(e))try{this.getOrInitializeService({instanceIdentifier:lo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=lo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lo){return this.instances.has(e)}getOptions(e=lo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:R6(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=lo){return this.component?this.component.multipleInstances?e:lo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function R6(t){return t===lo?void 0:t}function P6(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j6(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const M6={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},O6=ke.INFO,L6={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},V6=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=L6[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zx{constructor(e){this.name=e,this._logLevel=O6,this._logHandler=V6,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?M6[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const F6=(t,e)=>e.some(n=>t instanceof n);let B1,W1;function z6(){return B1||(B1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U6(){return W1||(W1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sk=new WeakMap,Dy=new WeakMap,Ek=new WeakMap,tg=new WeakMap,Ux=new WeakMap;function $6(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(_i(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Sk.set(n,t)}).catch(()=>{}),Ux.set(e,t),e}function B6(t){if(Dy.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Dy.set(t,e)}let My={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ek.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _i(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function W6(t){My=t(My)}function H6(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ng(this),e,...n);return Ek.set(r,e.sort?e.sort():[e]),_i(r)}:U6().includes(t)?function(...e){return t.apply(ng(this),e),_i(Sk.get(this))}:function(...e){return _i(t.apply(ng(this),e))}}function q6(t){return typeof t=="function"?H6(t):(t instanceof IDBTransaction&&B6(t),F6(t,z6())?new Proxy(t,My):t)}function _i(t){if(t instanceof IDBRequest)return $6(t);if(tg.has(t))return tg.get(t);const e=q6(t);return e!==t&&(tg.set(t,e),Ux.set(e,t)),e}const ng=t=>Ux.get(t);function G6(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=_i(o);return r&&o.addEventListener("upgradeneeded",c=>{r(_i(o.result),c.oldVersion,c.newVersion,_i(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const K6=["get","getKey","getAll","getAllKeys","count"],Q6=["put","add","delete","clear"],rg=new Map;function H1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rg.get(e))return rg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Q6.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||K6.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return rg.set(e,i),i}W6(t=>({...t,get:(e,n,r)=>H1(e,n)||t.get(e,n,r),has:(e,n)=>!!H1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y6(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Y6(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Oy="@firebase/app",q1="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new zx("@firebase/app"),J6="@firebase/app-compat",Z6="@firebase/analytics-compat",eV="@firebase/analytics",tV="@firebase/app-check-compat",nV="@firebase/app-check",rV="@firebase/auth",sV="@firebase/auth-compat",iV="@firebase/database",oV="@firebase/data-connect",aV="@firebase/database-compat",lV="@firebase/functions",cV="@firebase/functions-compat",uV="@firebase/installations",dV="@firebase/installations-compat",hV="@firebase/messaging",fV="@firebase/messaging-compat",mV="@firebase/performance",pV="@firebase/performance-compat",gV="@firebase/remote-config",yV="@firebase/remote-config-compat",vV="@firebase/storage",xV="@firebase/storage-compat",wV="@firebase/firestore",bV="@firebase/ai",_V="@firebase/firestore-compat",SV="firebase",EV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="[DEFAULT]",TV={[Oy]:"fire-core",[J6]:"fire-core-compat",[eV]:"fire-analytics",[Z6]:"fire-analytics-compat",[nV]:"fire-app-check",[tV]:"fire-app-check-compat",[rV]:"fire-auth",[sV]:"fire-auth-compat",[iV]:"fire-rtdb",[oV]:"fire-data-connect",[aV]:"fire-rtdb-compat",[lV]:"fire-fn",[cV]:"fire-fn-compat",[uV]:"fire-iid",[dV]:"fire-iid-compat",[hV]:"fire-fcm",[fV]:"fire-fcm-compat",[mV]:"fire-perf",[pV]:"fire-perf-compat",[gV]:"fire-rc",[yV]:"fire-rc-compat",[vV]:"fire-gcs",[xV]:"fire-gcs-compat",[wV]:"fire-fst",[_V]:"fire-fst-compat",[bV]:"fire-vertex","fire-js":"fire-js",[SV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Map,NV=new Map,Vy=new Map;function G1(t,e){try{t.container.addComponent(e)}catch(n){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function el(t){const e=t.name;if(Vy.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;Vy.set(e,t);for(const n of Jh.values())G1(n,t);for(const n of NV.values())G1(n,t);return!0}function $x(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Si=new Cu("app","Firebase",CV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=EV;function Tk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ly,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Si.create("bad-app-name",{appName:String(s)});if(n||(n=xk()),!n)throw Si.create("no-options");const i=Jh.get(s);if(i){if(Pi(n,i.options)&&Pi(r,i.config))return i;throw Si.create("duplicate-app",{appName:s})}const o=new D6(s);for(const c of Vy.values())o.addComponent(c);const l=new kV(n,r,o);return Jh.set(s,l),l}function Nk(t=Ly){const e=Jh.get(t);if(!e&&t===Ly&&xk())return Tk();if(!e)throw Si.create("no-app",{appName:t});return e}function Ei(t,e,n){let r=TV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(o.join(" "));return}el(new Mo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV="firebase-heartbeat-database",AV=1,nu="firebase-heartbeat-store";let sg=null;function Ck(){return sg||(sg=G6(IV,AV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Si.create("idb-open",{originalErrorMessage:t.message})})),sg}async function jV(t){try{const n=(await Ck()).transaction(nu),r=await n.objectStore(nu).get(kk(t));return await n.done,r}catch(e){if(e instanceof Os)Is.warn(e.message);else{const n=Si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Is.warn(n.message)}}}async function K1(t,e){try{const r=(await Ck()).transaction(nu,"readwrite");await r.objectStore(nu).put(e,kk(t)),await r.done}catch(n){if(n instanceof Os)Is.warn(n.message);else{const r=Si.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Is.warn(r.message)}}}function kk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=1024,PV=30;class DV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new OV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Q1();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>PV){const o=LV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Is.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Q1(),{heartbeatsToSend:r,unsentEntries:s}=MV(this._heartbeatsCache.heartbeats),i=Yh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Is.warn(n),""}}}function Q1(){return new Date().toISOString().substring(0,10)}function MV(t,e=RV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),X1(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),X1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class OV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _6()?S6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return K1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return K1(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function X1(t){return Yh(JSON.stringify({version:2,heartbeats:t})).length}function LV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){el(new Mo("platform-logger",e=>new X6(e),"PRIVATE")),el(new Mo("heartbeat",e=>new DV(e),"PRIVATE")),Ei(Oy,q1,t),Ei(Oy,q1,"esm2020"),Ei("fire-js","")}VV("");function Ik(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const FV=Ik,Ak=new Cu("auth","Firebase",Ik());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=new zx("@firebase/auth");function zV(t,...e){Zh.logLevel<=ke.WARN&&Zh.warn(`Auth (${bl}): ${t}`,...e)}function ih(t,...e){Zh.logLevel<=ke.ERROR&&Zh.error(`Auth (${bl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(t,...e){throw Wx(t,...e)}function _r(t,...e){return Wx(t,...e)}function Bx(t,e,n){const r={...FV(),[e]:n};return new Cu("auth","Firebase",r).create(e,{appName:t.name})}function Eo(t){return Bx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UV(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ss(t,"argument-error"),Bx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ak.create(t,...e)}function ve(t,e,...n){if(!t)throw Wx(e,...n)}function ys(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ih(e),new Error(e)}function As(t,e){t||ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function $V(){return Y1()==="http:"||Y1()==="https:"}function Y1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($V()||v6()||"connection"in navigator)?navigator.onLine:!0}function WV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.shortDelay=e,this.longDelay=n,As(n>e,"Short delay should be less than long delay!"),this.isMobile=p6()||x6()}get(){return BV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t,e){As(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GV=new Iu(3e4,6e4);function qx(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function _l(t,e,n,r,s={}){return Rk(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ku({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return y6()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&wl(t.emulatorConfig.host)&&(u.credentials="include"),jk.fetch()(await Pk(t,t.config.apiHost,n,l),u)})}async function Rk(t,e,n){t._canInitEmulator=!1;const r={...HV,...e};try{const s=new QV(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw kd(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kd(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw kd(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw kd(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Bx(t,h,u);ss(t,h)}}catch(s){if(s instanceof Os)throw s;ss(t,"network-request-failed",{message:String(s)})}}async function KV(t,e,n,r,s={}){const i=await _l(t,e,n,r,s);return"mfaPendingCredential"in i&&ss(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Pk(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Hx(t.config,s):`${t.config.apiScheme}://${s}`;return qV.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class QV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_r(this.auth,"network-request-failed")),GV.get())})}}function kd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_r(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XV(t,e){return _l(t,"POST","/v1/accounts:delete",e)}async function ef(t,e){return _l(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YV(t,e=!1){const n=Lt(t),r=await n.getIdToken(e),s=Gx(r);ve(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Tc(ig(s.auth_time)),issuedAtTime:Tc(ig(s.iat)),expirationTime:Tc(ig(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ig(t){return Number(t)*1e3}function Gx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ih("JWT malformed, contained fewer than 3 sections"),null;try{const s=yk(n);return s?JSON.parse(s):(ih("Failed to decode base64 JWT payload"),null)}catch(s){return ih("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function J1(t){const e=Gx(t);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ru(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Os&&JV(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function JV({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tf(t){var f;const e=t.auth,n=await t.getIdToken(),r=await ru(t,ef(e,{idToken:n}));ve(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?Dk(s.providerUserInfo):[],o=tF(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new zy(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function eF(t){const e=Lt(t);await tf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Dk(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nF(t,e){const n=await Rk(t,{},async()=>{const r=ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Pk(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&wl(t.emulatorConfig.host)&&(c.credentials="include"),jk.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rF(t,e){return _l(t,"POST","/v2/accounts:revokeToken",qx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const n=J1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await nF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Na;return r&&(ve(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ve(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ve(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Na,this.toJSON())}_performRefresh(){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t,e){ve(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class vr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new ZV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ru(this,this.stsTokenManager.getToken(this.auth,e));return ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YV(this,e)}reload(){return eF(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new vr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(Eo(this.auth));const e=await this.getIdToken();return await ru(this,XV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:w,stsTokenManager:v}=n;ve(f&&v,e,"internal-error");const _=Na.fromJSON(this.name,v);ve(typeof f=="string",e,"internal-error"),Qs(r,e.name),Qs(s,e.name),ve(typeof p=="boolean",e,"internal-error"),ve(typeof g=="boolean",e,"internal-error"),Qs(i,e.name),Qs(o,e.name),Qs(l,e.name),Qs(c,e.name),Qs(u,e.name),Qs(h,e.name);const b=new vr({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:_,createdAt:u,lastLoginAt:h});return w&&Array.isArray(w)&&(b.providerData=w.map(x=>({...x}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new Na;s.updateFromServerResponse(n);const i=new vr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await tf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ve(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Dk(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Na;l.updateFromIdToken(r);const c=new vr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new zy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=new Map;function vs(t){As(t instanceof Function,"Expected a class definition");let e=Z1.get(t);return e?(As(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Z1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Mk.type="NONE";const e_=Mk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ca{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=oh(this.userKey,s.apiKey,i),this.fullPersistenceKey=oh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ef(this.auth,{idToken:e}).catch(()=>{});return n?vr._fromGetAccountInfoResponse(this.auth,n,e):null}return vr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ca(vs(e_),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||vs(e_);const o=oh(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await ef(e,{idToken:h}).catch(()=>{});if(!p)break;f=await vr._fromGetAccountInfoResponse(e,p,h)}else f=vr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Ca(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Ca(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Fk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ok(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uk(e))return"Blackberry";if($k(e))return"Webos";if(Lk(e))return"Safari";if((e.includes("chrome/")||Vk(e))&&!e.includes("edge/"))return"Chrome";if(zk(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ok(t=nn()){return/firefox\//i.test(t)}function Lk(t=nn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vk(t=nn()){return/crios\//i.test(t)}function Fk(t=nn()){return/iemobile/i.test(t)}function zk(t=nn()){return/android/i.test(t)}function Uk(t=nn()){return/blackberry/i.test(t)}function $k(t=nn()){return/webos/i.test(t)}function Kx(t=nn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sF(t=nn()){var e;return Kx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function iF(){return w6()&&document.documentMode===10}function Bk(t=nn()){return Kx(t)||zk(t)||$k(t)||Uk(t)||/windows phone/i.test(t)||Fk(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(t,e=[]){let n;switch(t){case"Browser":n=t_(nn());break;case"Worker":n=`${t_(nn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(t,e={}){return _l(t,"GET","/v2/passwordPolicy",qx(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=6;class cF{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??lF,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new n_(this),this.idTokenSubscription=new n_(this),this.beforeStateQueue=new oF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ak,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vs(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ef(this,{idToken:e}),r=await vr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(yr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(Eo(this));const n=e?Lt(e):null;return n&&ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(Eo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(Eo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aF(this),n=new cF(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Cu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vs(e)||this._popupRedirectResolver;ve(n,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[vs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&zV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function pm(t){return Lt(t)}class n_{constructor(e){this.auth=e,this.observer=null,this.addObserver=k6(n=>this.observer=n)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dF(t){Qx=t}function hF(t){return Qx.loadJS(t)}function fF(){return Qx.gapiScript}function mF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t,e){const n=$x(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Pi(i,e??{}))return s;ss(s,"already-initialized")}return n.initialize({options:e})}function gF(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yF(t,e,n){const r=pm(t);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Hk(e),{host:o,port:l}=vF(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Pi(u,r.config.emulator)&&Pi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,wl(o)?(bk(`${i}//${o}${c}`),_k("Auth",!0)):xF()}function Hk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vF(t){const e=Hk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:r_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:r_(o)}}}function r_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ys("not implemented")}_getIdTokenResponse(e){return ys("not implemented")}_linkToIdToken(e,n){return ys("not implemented")}_getReauthenticationResolver(e){return ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(t,e){return KV(t,"POST","/v1/accounts:signInWithIdp",qx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wF="http://localhost";class Oo extends qk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ss("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Oo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ka(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ka(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ka(e,n)}buildRequest(){const e={requestUri:wF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ku(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Xx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Au{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt extends Au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oo._fromParams({providerId:Yt.PROVIDER_ID,signInMethod:Yt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Yt.credentialFromTaggedObject(e)}static credentialFromError(e){return Yt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Yt.credential(n,r)}catch{return null}}}Yt.GOOGLE_SIGN_IN_METHOD="google.com";Yt.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends Au{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return si.credential(e.oauthAccessToken)}catch{return null}}}si.GITHUB_SIGN_IN_METHOD="github.com";si.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends Au{constructor(){super("twitter.com")}static credential(e,n){return Oo._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await vr._fromIdTokenResponse(e,r,s),o=s_(r);return new tl({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=s_(r);return new tl({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function s_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf extends Os{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,nf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new nf(e,n,r,s)}}function Gk(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?nf._fromErrorAndOperation(t,i,e,r):i})}async function bF(t,e,n=!1){const r=await ru(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return tl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _F(t,e,n=!1){const{auth:r}=t;if(yr(r.app))return Promise.reject(Eo(r));const s="reauthenticate";try{const i=await ru(t,Gk(r,s,e,t),n);ve(i.idToken,r,"internal-error");const o=Gx(i.idToken);ve(o,r,"internal-error");const{sub:l}=o;return ve(t.uid===l,r,"user-mismatch"),tl._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ss(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SF(t,e,n=!1){if(yr(t.app))return Promise.reject(Eo(t));const r="signIn",s=await Gk(t,r,e),i=await tl._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function EF(t,e,n,r){return Lt(t).onIdTokenChanged(e,n,r)}function TF(t,e,n){return Lt(t).beforeAuthStateChanged(e,n)}function NF(t,e,n,r){return Lt(t).onAuthStateChanged(e,n,r)}function CF(t){return Lt(t).signOut()}const rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rf,"1"),this.storage.removeItem(rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=1e3,IF=10;class Qk extends Kk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);iF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,IF):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},kF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Qk.type="LOCAL";const AF=Qk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk extends Kk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Xk.type="SESSION";const Yk=Xk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jF(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await jF(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Yx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(){return window}function PF(t){es().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(){return typeof es().WorkerGlobalScope<"u"&&typeof es().importScripts=="function"}async function DF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MF(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function OF(){return Jk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="firebaseLocalStorageDb",LF=1,sf="firebaseLocalStorage",eI="fbase_key";class ju{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ym(t,e){return t.transaction([sf],e?"readwrite":"readonly").objectStore(sf)}function VF(){const t=indexedDB.deleteDatabase(Zk);return new ju(t).toPromise()}function Uy(){const t=indexedDB.open(Zk,LF);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(sf,{keyPath:eI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(sf)?e(r):(r.close(),await VF(),e(await Uy()))})})}async function i_(t,e,n){const r=ym(t,!0).put({[eI]:e,value:n});return new ju(r).toPromise()}async function FF(t,e){const n=ym(t,!1).get(e),r=await new ju(n).toPromise();return r===void 0?null:r.value}function o_(t,e){const n=ym(t,!0).delete(e);return new ju(n).toPromise()}const zF=800,UF=3;class tI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Uy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>UF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gm._getInstance(OF()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await DF(),!this.activeServiceWorker)return;this.sender=new RF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Uy();return await i_(e,rf,"1"),await o_(e,rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>i_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FF(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>o_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ym(s,!1).getAll();return new ju(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tI.type="LOCAL";const $F=tI;new Iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(t,e){return e?vs(e):(ve(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx extends qk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ka(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ka(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BF(t){return SF(t.auth,new Jx(t),t.bypassAuthState)}function WF(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),_F(n,new Jx(t),t.bypassAuthState)}async function HF(t){const{auth:e,user:n}=t;return ve(n,e,"internal-error"),bF(n,new Jx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BF;case"linkViaPopup":case"linkViaRedirect":return HF;case"reauthViaPopup":case"reauthViaRedirect":return WF;default:ss(this.auth,"internal-error")}}resolve(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){As(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF=new Iu(2e3,1e4);async function Id(t,e,n){if(yr(t.app))return Promise.reject(_r(t,"operation-not-supported-in-this-environment"));const r=pm(t);UV(t,e,Xx);const s=nI(r,n);return new mo(r,"signInViaPopup",e,s).executeNotNull()}class mo extends rI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){As(this.filter.length===1,"Popup operations only handle one event");const e=Yx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(_r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qF.get())};e()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF="pendingRedirect",ah=new Map;class KF extends rI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ah.get(this.auth._key());if(!e){try{const r=await QF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ah.set(this.auth._key(),e)}return this.bypassAuthState||ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QF(t,e){const n=JF(e),r=YF(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function XF(t,e){ah.set(t._key(),e)}function YF(t){return vs(t._redirectPersistence)}function JF(t){return oh(GF,t.config.apiKey,t.name)}async function ZF(t,e,n=!1){if(yr(t.app))return Promise.reject(Eo(t));const r=pm(t),s=nI(r,e),o=await new KF(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e9=10*60*1e3;class t9{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!n9(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(_r(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=e9&&this.cachedEventUids.clear(),this.cachedEventUids.has(a_(e))}saveEventToCache(e){this.cachedEventUids.add(a_(e)),this.lastProcessedEventTime=Date.now()}}function a_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function n9(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r9(t,e={}){return _l(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,i9=/^https?/;async function o9(t){if(t.config.emulator)return;const{authorizedDomains:e}=await r9(t);for(const n of e)try{if(a9(n))return}catch{}ss(t,"unauthorized-domain")}function a9(t){const e=Fy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!i9.test(n))return!1;if(s9.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l9=new Iu(3e4,6e4);function l_(){const t=es().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function c9(t){return new Promise((e,n)=>{var s,i,o;function r(){l_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{l_(),n(_r(t,"network-request-failed"))},timeout:l9.get()})}if((i=(s=es().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=es().gapi)!=null&&o.load)r();else{const l=mF("iframefcb");return es()[l]=()=>{gapi.load?r():n(_r(t,"network-request-failed"))},hF(`${fF()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw lh=null,e})}let lh=null;function u9(t){return lh=lh||c9(t),lh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d9=new Iu(5e3,15e3),h9="__/auth/iframe",f9="emulator/auth/iframe",m9={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},p9=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g9(t){const e=t.config;ve(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Hx(e,f9):`https://${t.config.authDomain}/${h9}`,r={apiKey:e.apiKey,appName:t.name,v:bl},s=p9.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ku(r).slice(1)}`}async function y9(t){const e=await u9(t),n=es().gapi;return ve(n,t,"internal-error"),e.open({where:document.body,url:g9(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:m9,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=_r(t,"network-request-failed"),l=es().setTimeout(()=>{i(o)},d9.get());function c(){es().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x9=500,w9=600,b9="_blank",_9="http://localhost";class c_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function S9(t,e,n,r=x9,s=w9){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...v9,width:r.toString(),height:s.toString(),top:i,left:o},u=nn().toLowerCase();n&&(l=Vk(u)?b9:n),Ok(u)&&(e=e||_9,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,w])=>`${p}${g}=${w},`,"");if(sF(u)&&l!=="_self")return E9(e||"",l),new c_(null);const f=window.open(e||"",l,h);ve(f,t,"popup-blocked");try{f.focus()}catch{}return new c_(f)}function E9(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9="__/auth/handler",N9="emulator/auth/handler",C9=encodeURIComponent("fac");async function u_(t,e,n,r,s,i){ve(t.config.authDomain,t,"auth-domain-config-required"),ve(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bl,eventId:s};if(e instanceof Xx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",C6(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Au){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${C9}=${encodeURIComponent(c)}`:"";return`${k9(t)}?${ku(l).slice(1)}${u}`}function k9({config:t}){return t.emulator?Hx(t,N9):`https://${t.authDomain}/${T9}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="webStorageSupport";class I9{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yk,this._completeRedirectFn=ZF,this._overrideRedirectResult=XF}async _openPopup(e,n,r,s){var o;As((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await u_(e,n,r,Fy(),s);return S9(e,i,Yx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await u_(e,n,r,Fy(),s);return PF(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(As(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await y9(e),r=new t9(e);return n.register("authEvent",s=>(ve(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(og,{type:og},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[og];i!==void 0&&n(!!i),ss(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=o9(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bk()||Lk()||Kx()}}const A9=I9;var d_="@firebase/auth",h_="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P9(t){el(new Mo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ve(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wk(t)},u=new uF(r,s,i,c);return gF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),el(new Mo("auth-internal",e=>{const n=pm(e.getProvider("auth").getImmediate());return(r=>new j9(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ei(d_,h_,R9(t)),Ei(d_,h_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9=5*60,M9=wk("authIdTokenMaxAge")||D9;let f_=null;const O9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>M9)return;const s=n==null?void 0:n.token;f_!==s&&(f_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function L9(t=Nk()){const e=$x(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pF(t,{popupRedirectResolver:A9,persistence:[$F,AF,Yk]}),r=wk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=O9(i.toString());TF(n,o,()=>o(n.currentUser)),EF(n,l=>o(l))}}const s=vk("auth");return s&&yF(n,`http://${s}`),n}function V9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}dF({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=_r("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",V9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P9("Browser");var F9="firebase",z9="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ei(F9,z9,"app");var m_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ti,iI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,C){function N(){}N.prototype=C.prototype,E.F=C.prototype,E.prototype=new N,E.prototype.constructor=E,E.D=function(k,A,P){for(var R=Array(arguments.length-2),F=2;F<arguments.length;F++)R[F-2]=arguments[F];return C.prototype[A].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,C,N){N||(N=0);const k=Array(16);if(typeof C=="string")for(var A=0;A<16;++A)k[A]=C.charCodeAt(N++)|C.charCodeAt(N++)<<8|C.charCodeAt(N++)<<16|C.charCodeAt(N++)<<24;else for(A=0;A<16;++A)k[A]=C[N++]|C[N++]<<8|C[N++]<<16|C[N++]<<24;C=E.g[0],N=E.g[1],A=E.g[2];let P=E.g[3],R;R=C+(P^N&(A^P))+k[0]+3614090360&4294967295,C=N+(R<<7&4294967295|R>>>25),R=P+(A^C&(N^A))+k[1]+3905402710&4294967295,P=C+(R<<12&4294967295|R>>>20),R=A+(N^P&(C^N))+k[2]+606105819&4294967295,A=P+(R<<17&4294967295|R>>>15),R=N+(C^A&(P^C))+k[3]+3250441966&4294967295,N=A+(R<<22&4294967295|R>>>10),R=C+(P^N&(A^P))+k[4]+4118548399&4294967295,C=N+(R<<7&4294967295|R>>>25),R=P+(A^C&(N^A))+k[5]+1200080426&4294967295,P=C+(R<<12&4294967295|R>>>20),R=A+(N^P&(C^N))+k[6]+2821735955&4294967295,A=P+(R<<17&4294967295|R>>>15),R=N+(C^A&(P^C))+k[7]+4249261313&4294967295,N=A+(R<<22&4294967295|R>>>10),R=C+(P^N&(A^P))+k[8]+1770035416&4294967295,C=N+(R<<7&4294967295|R>>>25),R=P+(A^C&(N^A))+k[9]+2336552879&4294967295,P=C+(R<<12&4294967295|R>>>20),R=A+(N^P&(C^N))+k[10]+4294925233&4294967295,A=P+(R<<17&4294967295|R>>>15),R=N+(C^A&(P^C))+k[11]+2304563134&4294967295,N=A+(R<<22&4294967295|R>>>10),R=C+(P^N&(A^P))+k[12]+1804603682&4294967295,C=N+(R<<7&4294967295|R>>>25),R=P+(A^C&(N^A))+k[13]+4254626195&4294967295,P=C+(R<<12&4294967295|R>>>20),R=A+(N^P&(C^N))+k[14]+2792965006&4294967295,A=P+(R<<17&4294967295|R>>>15),R=N+(C^A&(P^C))+k[15]+1236535329&4294967295,N=A+(R<<22&4294967295|R>>>10),R=C+(A^P&(N^A))+k[1]+4129170786&4294967295,C=N+(R<<5&4294967295|R>>>27),R=P+(N^A&(C^N))+k[6]+3225465664&4294967295,P=C+(R<<9&4294967295|R>>>23),R=A+(C^N&(P^C))+k[11]+643717713&4294967295,A=P+(R<<14&4294967295|R>>>18),R=N+(P^C&(A^P))+k[0]+3921069994&4294967295,N=A+(R<<20&4294967295|R>>>12),R=C+(A^P&(N^A))+k[5]+3593408605&4294967295,C=N+(R<<5&4294967295|R>>>27),R=P+(N^A&(C^N))+k[10]+38016083&4294967295,P=C+(R<<9&4294967295|R>>>23),R=A+(C^N&(P^C))+k[15]+3634488961&4294967295,A=P+(R<<14&4294967295|R>>>18),R=N+(P^C&(A^P))+k[4]+3889429448&4294967295,N=A+(R<<20&4294967295|R>>>12),R=C+(A^P&(N^A))+k[9]+568446438&4294967295,C=N+(R<<5&4294967295|R>>>27),R=P+(N^A&(C^N))+k[14]+3275163606&4294967295,P=C+(R<<9&4294967295|R>>>23),R=A+(C^N&(P^C))+k[3]+4107603335&4294967295,A=P+(R<<14&4294967295|R>>>18),R=N+(P^C&(A^P))+k[8]+1163531501&4294967295,N=A+(R<<20&4294967295|R>>>12),R=C+(A^P&(N^A))+k[13]+2850285829&4294967295,C=N+(R<<5&4294967295|R>>>27),R=P+(N^A&(C^N))+k[2]+4243563512&4294967295,P=C+(R<<9&4294967295|R>>>23),R=A+(C^N&(P^C))+k[7]+1735328473&4294967295,A=P+(R<<14&4294967295|R>>>18),R=N+(P^C&(A^P))+k[12]+2368359562&4294967295,N=A+(R<<20&4294967295|R>>>12),R=C+(N^A^P)+k[5]+4294588738&4294967295,C=N+(R<<4&4294967295|R>>>28),R=P+(C^N^A)+k[8]+2272392833&4294967295,P=C+(R<<11&4294967295|R>>>21),R=A+(P^C^N)+k[11]+1839030562&4294967295,A=P+(R<<16&4294967295|R>>>16),R=N+(A^P^C)+k[14]+4259657740&4294967295,N=A+(R<<23&4294967295|R>>>9),R=C+(N^A^P)+k[1]+2763975236&4294967295,C=N+(R<<4&4294967295|R>>>28),R=P+(C^N^A)+k[4]+1272893353&4294967295,P=C+(R<<11&4294967295|R>>>21),R=A+(P^C^N)+k[7]+4139469664&4294967295,A=P+(R<<16&4294967295|R>>>16),R=N+(A^P^C)+k[10]+3200236656&4294967295,N=A+(R<<23&4294967295|R>>>9),R=C+(N^A^P)+k[13]+681279174&4294967295,C=N+(R<<4&4294967295|R>>>28),R=P+(C^N^A)+k[0]+3936430074&4294967295,P=C+(R<<11&4294967295|R>>>21),R=A+(P^C^N)+k[3]+3572445317&4294967295,A=P+(R<<16&4294967295|R>>>16),R=N+(A^P^C)+k[6]+76029189&4294967295,N=A+(R<<23&4294967295|R>>>9),R=C+(N^A^P)+k[9]+3654602809&4294967295,C=N+(R<<4&4294967295|R>>>28),R=P+(C^N^A)+k[12]+3873151461&4294967295,P=C+(R<<11&4294967295|R>>>21),R=A+(P^C^N)+k[15]+530742520&4294967295,A=P+(R<<16&4294967295|R>>>16),R=N+(A^P^C)+k[2]+3299628645&4294967295,N=A+(R<<23&4294967295|R>>>9),R=C+(A^(N|~P))+k[0]+4096336452&4294967295,C=N+(R<<6&4294967295|R>>>26),R=P+(N^(C|~A))+k[7]+1126891415&4294967295,P=C+(R<<10&4294967295|R>>>22),R=A+(C^(P|~N))+k[14]+2878612391&4294967295,A=P+(R<<15&4294967295|R>>>17),R=N+(P^(A|~C))+k[5]+4237533241&4294967295,N=A+(R<<21&4294967295|R>>>11),R=C+(A^(N|~P))+k[12]+1700485571&4294967295,C=N+(R<<6&4294967295|R>>>26),R=P+(N^(C|~A))+k[3]+2399980690&4294967295,P=C+(R<<10&4294967295|R>>>22),R=A+(C^(P|~N))+k[10]+4293915773&4294967295,A=P+(R<<15&4294967295|R>>>17),R=N+(P^(A|~C))+k[1]+2240044497&4294967295,N=A+(R<<21&4294967295|R>>>11),R=C+(A^(N|~P))+k[8]+1873313359&4294967295,C=N+(R<<6&4294967295|R>>>26),R=P+(N^(C|~A))+k[15]+4264355552&4294967295,P=C+(R<<10&4294967295|R>>>22),R=A+(C^(P|~N))+k[6]+2734768916&4294967295,A=P+(R<<15&4294967295|R>>>17),R=N+(P^(A|~C))+k[13]+1309151649&4294967295,N=A+(R<<21&4294967295|R>>>11),R=C+(A^(N|~P))+k[4]+4149444226&4294967295,C=N+(R<<6&4294967295|R>>>26),R=P+(N^(C|~A))+k[11]+3174756917&4294967295,P=C+(R<<10&4294967295|R>>>22),R=A+(C^(P|~N))+k[2]+718787259&4294967295,A=P+(R<<15&4294967295|R>>>17),R=N+(P^(A|~C))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+C&4294967295,E.g[1]=E.g[1]+(A+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+P&4294967295}r.prototype.v=function(E,C){C===void 0&&(C=E.length);const N=C-this.blockSize,k=this.C;let A=this.h,P=0;for(;P<C;){if(A==0)for(;P<=N;)s(this,E,P),P+=this.blockSize;if(typeof E=="string"){for(;P<C;)if(k[A++]=E.charCodeAt(P++),A==this.blockSize){s(this,k),A=0;break}}else for(;P<C;)if(k[A++]=E[P++],A==this.blockSize){s(this,k),A=0;break}}this.h=A,this.o+=C},r.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var C=1;C<E.length-8;++C)E[C]=0;C=this.o*8;for(var N=E.length-8;N<E.length;++N)E[N]=C&255,C/=256;for(this.v(E),E=Array(16),C=0,N=0;N<4;++N)for(let k=0;k<32;k+=8)E[C++]=this.g[N]>>>k&255;return E};function i(E,C){var N=l;return Object.prototype.hasOwnProperty.call(N,E)?N[E]:N[E]=C(E)}function o(E,C){this.h=C;const N=[];let k=!0;for(let A=E.length-1;A>=0;A--){const P=E[A]|0;k&&P==C||(N[A]=P,k=!1)}this.g=N}var l={};function c(E){return-128<=E&&E<128?i(E,function(C){return new o([C|0],C<0?-1:0)}):new o([E|0],E<0?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return _(u(-E));const C=[];let N=1;for(let k=0;E>=N;k++)C[k]=E/N|0,N*=4294967296;return new o(C,0)}function h(E,C){if(E.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(E.charAt(0)=="-")return _(h(E.substring(1),C));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=u(Math.pow(C,8));let k=f;for(let P=0;P<E.length;P+=8){var A=Math.min(8,E.length-P);const R=parseInt(E.substring(P,P+A),C);A<8?(A=u(Math.pow(C,A)),k=k.j(A).add(u(R))):(k=k.j(N),k=k.add(u(R)))}return k}var f=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-_(this).m();let E=0,C=1;for(let N=0;N<this.g.length;N++){const k=this.i(N);E+=(k>=0?k:4294967296+k)*C,C*=4294967296}return E},t.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(w(this))return"0";if(v(this))return"-"+_(this).toString(E);const C=u(Math.pow(E,6));var N=this;let k="";for(;;){const A=I(N,C).g;N=b(N,A.j(C));let P=((N.g.length>0?N.g[0]:N.h)>>>0).toString(E);if(N=A,w(N))return P+k;for(;P.length<6;)P="0"+P;k=P+k}},t.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function w(E){if(E.h!=0)return!1;for(let C=0;C<E.g.length;C++)if(E.g[C]!=0)return!1;return!0}function v(E){return E.h==-1}t.l=function(E){return E=b(this,E),v(E)?-1:w(E)?0:1};function _(E){const C=E.g.length,N=[];for(let k=0;k<C;k++)N[k]=~E.g[k];return new o(N,~E.h).add(p)}t.abs=function(){return v(this)?_(this):this},t.add=function(E){const C=Math.max(this.g.length,E.g.length),N=[];let k=0;for(let A=0;A<=C;A++){let P=k+(this.i(A)&65535)+(E.i(A)&65535),R=(P>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);k=R>>>16,P&=65535,R&=65535,N[A]=R<<16|P}return new o(N,N[N.length-1]&-2147483648?-1:0)};function b(E,C){return E.add(_(C))}t.j=function(E){if(w(this)||w(E))return f;if(v(this))return v(E)?_(this).j(_(E)):_(_(this).j(E));if(v(E))return _(this.j(_(E)));if(this.l(g)<0&&E.l(g)<0)return u(this.m()*E.m());const C=this.g.length+E.g.length,N=[];for(var k=0;k<2*C;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(let A=0;A<E.g.length;A++){const P=this.i(k)>>>16,R=this.i(k)&65535,F=E.i(A)>>>16,ie=E.i(A)&65535;N[2*k+2*A]+=R*ie,x(N,2*k+2*A),N[2*k+2*A+1]+=P*ie,x(N,2*k+2*A+1),N[2*k+2*A+1]+=R*F,x(N,2*k+2*A+1),N[2*k+2*A+2]+=P*F,x(N,2*k+2*A+2)}for(E=0;E<C;E++)N[E]=N[2*E+1]<<16|N[2*E];for(E=C;E<2*C;E++)N[E]=0;return new o(N,0)};function x(E,C){for(;(E[C]&65535)!=E[C];)E[C+1]+=E[C]>>>16,E[C]&=65535,C++}function S(E,C){this.g=E,this.h=C}function I(E,C){if(w(C))throw Error("division by zero");if(w(E))return new S(f,f);if(v(E))return C=I(_(E),C),new S(_(C.g),_(C.h));if(v(C))return C=I(E,_(C)),new S(_(C.g),C.h);if(E.g.length>30){if(v(E)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var N=p,k=C;k.l(E)<=0;)N=D(N),k=D(k);var A=M(N,1),P=M(k,1);for(k=M(k,2),N=M(N,2);!w(k);){var R=P.add(k);R.l(E)<=0&&(A=A.add(N),P=R),k=M(k,1),N=M(N,1)}return C=b(E,A.j(C)),new S(A,C)}for(A=f;E.l(C)>=0;){for(N=Math.max(1,Math.floor(E.m()/C.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),P=u(N),R=P.j(C);v(R)||R.l(E)>0;)N-=k,P=u(N),R=P.j(C);w(P)&&(P=p),A=A.add(P),E=b(E,R)}return new S(A,E)}t.B=function(E){return I(this,E).h},t.and=function(E){const C=Math.max(this.g.length,E.g.length),N=[];for(let k=0;k<C;k++)N[k]=this.i(k)&E.i(k);return new o(N,this.h&E.h)},t.or=function(E){const C=Math.max(this.g.length,E.g.length),N=[];for(let k=0;k<C;k++)N[k]=this.i(k)|E.i(k);return new o(N,this.h|E.h)},t.xor=function(E){const C=Math.max(this.g.length,E.g.length),N=[];for(let k=0;k<C;k++)N[k]=this.i(k)^E.i(k);return new o(N,this.h^E.h)};function D(E){const C=E.g.length+1,N=[];for(let k=0;k<C;k++)N[k]=E.i(k)<<1|E.i(k-1)>>>31;return new o(N,E.h)}function M(E,C){const N=C>>5;C%=32;const k=E.g.length-N,A=[];for(let P=0;P<k;P++)A[P]=C>0?E.i(P+N)>>>C|E.i(P+N+1)<<32-C:E.i(P+N);return new o(A,E.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,iI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ti=o}).apply(typeof m_<"u"?m_:typeof self<"u"?self:typeof window<"u"?window:{});var Ad=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oI,cc,aI,ch,$y,lI,cI,uI;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ad=="object"&&Ad];for(var y=0;y<d.length;++y){var T=d[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var T=r;d=d.split(".");for(var j=0;j<d.length-1;j++){var V=d[j];if(!(V in T))break e;T=T[V]}d=d[d.length-1],j=T[d],y=y(j),y!=j&&y!=null&&e(T,d,{configurable:!0,writable:!0,value:y})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(y){var T=[],j;for(j in y)Object.prototype.hasOwnProperty.call(y,j)&&T.push([j,y[j]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function c(d,y,T){return d.call.apply(d.bind,arguments)}function u(d,y,T){return u=c,u.apply(null,arguments)}function h(d,y){var T=Array.prototype.slice.call(arguments,1);return function(){var j=T.slice();return j.push.apply(j,arguments),d.apply(this,j)}}function f(d,y){function T(){}T.prototype=y.prototype,d.Z=y.prototype,d.prototype=new T,d.prototype.constructor=d,d.Ob=function(j,V,z){for(var re=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)re[_e-2]=arguments[_e];return y.prototype[V].apply(j,re)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function g(d){const y=d.length;if(y>0){const T=Array(y);for(let j=0;j<y;j++)T[j]=d[j];return T}return[]}function w(d,y){for(let j=1;j<arguments.length;j++){const V=arguments[j];var T=typeof V;if(T=T!="object"?T:V?Array.isArray(V)?"array":T:"null",T=="array"||T=="object"&&typeof V.length=="number"){T=d.length||0;const z=V.length||0;d.length=T+z;for(let re=0;re<z;re++)d[T+re]=V[re]}else d.push(V)}}class v{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function _(d){o.setTimeout(()=>{throw d},0)}function b(){var d=E;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class x{constructor(){this.h=this.g=null}add(y,T){const j=S.get();j.set(y,T),this.h?this.h.next=j:this.g=j,this.h=j}}var S=new v(()=>new I,d=>d.reset());class I{constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let D,M=!1,E=new x,C=()=>{const d=Promise.resolve(void 0);D=()=>{d.then(N)}};function N(){for(var d;d=b();){try{d.h.call(d.g)}catch(T){_(T)}var y=S;y.j(d),y.h<100&&(y.h++,d.next=y.g,y.g=d)}M=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};o.addEventListener("test",T,y),o.removeEventListener("test",T,y)}catch{}return d}();function R(d){return/^[\s\xa0]*$/.test(d)}function F(d,y){A.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,y)}f(F,A),F.prototype.init=function(d,y){const T=this.type=d.type,j=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget,y||(T=="mouseover"?y=d.fromElement:T=="mouseout"&&(y=d.toElement)),this.relatedTarget=y,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),J=0;function Y(d,y,T,j,V){this.listener=d,this.proxy=null,this.src=y,this.type=T,this.capture=!!j,this.ha=V,this.key=++J,this.da=this.fa=!1}function O(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function B(d,y,T){for(const j in d)y.call(T,d[j],j,d)}function U(d,y){for(const T in d)y.call(void 0,d[T],T,d)}function W(d){const y={};for(const T in d)y[T]=d[T];return y}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oe(d,y){let T,j;for(let V=1;V<arguments.length;V++){j=arguments[V];for(T in j)d[T]=j[T];for(let z=0;z<q.length;z++)T=q[z],Object.prototype.hasOwnProperty.call(j,T)&&(d[T]=j[T])}}function ee(d){this.src=d,this.g={},this.h=0}ee.prototype.add=function(d,y,T,j,V){const z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);const re=se(d,y,j,V);return re>-1?(y=d[re],T||(y.fa=!1)):(y=new Y(y,this.src,z,!!j,V),y.fa=T,d.push(y)),y};function ne(d,y){const T=y.type;if(T in d.g){var j=d.g[T],V=Array.prototype.indexOf.call(j,y,void 0),z;(z=V>=0)&&Array.prototype.splice.call(j,V,1),z&&(O(y),d.g[T].length==0&&(delete d.g[T],d.h--))}}function se(d,y,T,j){for(let V=0;V<d.length;++V){const z=d[V];if(!z.da&&z.listener==y&&z.capture==!!T&&z.ha==j)return V}return-1}var L="closure_lm_"+(Math.random()*1e6|0),X={};function ue(d,y,T,j,V){if(Array.isArray(y)){for(let z=0;z<y.length;z++)ue(d,y[z],T,j,V);return null}return T=Cn(T),d&&d[ie]?d.J(y,T,l(j)?!!j.capture:!!j,V):Q(d,y,T,!1,j,V)}function Q(d,y,T,j,V,z){if(!y)throw Error("Invalid event type");const re=l(V)?!!V.capture:!!V;let _e=We(d);if(_e||(d[L]=_e=new ee(d)),T=_e.add(y,T,j,re,z),T.proxy)return T;if(j=te(),T.proxy=j,j.src=d,j.listener=T,d.addEventListener)P||(V=re),V===void 0&&(V=!1),d.addEventListener(y.toString(),j,V);else if(d.attachEvent)d.attachEvent(Pe(y.toString()),j);else if(d.addListener&&d.removeListener)d.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return T}function te(){function d(T){return y.call(d.src,d.listener,T)}const y=pt;return d}function ae(d,y,T,j,V){if(Array.isArray(y))for(var z=0;z<y.length;z++)ae(d,y[z],T,j,V);else j=l(j)?!!j.capture:!!j,T=Cn(T),d&&d[ie]?(d=d.i,z=String(y).toString(),z in d.g&&(y=d.g[z],T=se(y,T,j,V),T>-1&&(O(y[T]),Array.prototype.splice.call(y,T,1),y.length==0&&(delete d.g[z],d.h--)))):d&&(d=We(d))&&(y=d.g[y.toString()],d=-1,y&&(d=se(y,T,j,V)),(T=d>-1?y[d]:null)&&Te(T))}function Te(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ie])ne(y.i,d);else{var T=d.type,j=d.proxy;y.removeEventListener?y.removeEventListener(T,j,d.capture):y.detachEvent?y.detachEvent(Pe(T),j):y.addListener&&y.removeListener&&y.removeListener(j),(T=We(y))?(ne(T,d),T.h==0&&(T.src=null,y[L]=null)):O(d)}}}function Pe(d){return d in X?X[d]:X[d]="on"+d}function pt(d,y){if(d.da)d=!0;else{y=new F(y,this);const T=d.listener,j=d.ha||d.src;d.fa&&Te(d),d=T.call(j,y)}return d}function We(d){return d=d[L],d instanceof ee?d:null}var Je="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cn(d){return typeof d=="function"?d:(d[Je]||(d[Je]=function(y){return d.handleEvent(y)}),d[Je])}function He(){k.call(this),this.i=new ee(this),this.M=this,this.G=null}f(He,k),He.prototype[ie]=!0,He.prototype.removeEventListener=function(d,y,T,j){ae(this,d,y,T,j)};function Ge(d,y){var T,j=d.G;if(j)for(T=[];j;j=j.G)T.push(j);if(d=d.M,j=y.type||y,typeof y=="string")y=new A(y,d);else if(y instanceof A)y.target=y.target||d;else{var V=y;y=new A(j,d),oe(y,V)}V=!0;let z,re;if(T)for(re=T.length-1;re>=0;re--)z=y.g=T[re],V=or(z,j,!0,y)&&V;if(z=y.g=d,V=or(z,j,!0,y)&&V,V=or(z,j,!1,y)&&V,T)for(re=0;re<T.length;re++)z=y.g=T[re],V=or(z,j,!1,y)&&V}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var d=this.i;for(const y in d.g){const T=d.g[y];for(let j=0;j<T.length;j++)O(T[j]);delete d.g[y],d.h--}}this.G=null},He.prototype.J=function(d,y,T,j){return this.i.add(String(d),y,!1,T,j)},He.prototype.K=function(d,y,T,j){return this.i.add(String(d),y,!0,T,j)};function or(d,y,T,j){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();let V=!0;for(let z=0;z<y.length;++z){const re=y[z];if(re&&!re.da&&re.capture==T){const _e=re.listener,Tt=re.ha||re.src;re.fa&&ne(d.i,re),V=_e.call(Tt,j)!==!1&&V}}return V&&!j.defaultPrevented}function Fs(d,y){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:o.setTimeout(d,y||0)}function Ol(d){d.g=Fs(()=>{d.g=null,d.i&&(d.i=!1,Ol(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Hu extends k{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ol(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(d){k.call(this),this.h=d,this.g={}}f(Xi,k);var qu=[];function cs(d){B(d.g,function(y,T){this.g.hasOwnProperty(T)&&Te(y)},d),d.g={}}Xi.prototype.N=function(){Xi.Z.N.call(this),cs(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dr=o.JSON.stringify,Yi=o.JSON.parse,Gu=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function ar(){}function Ll(){}var Ji={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vl(){A.call(this,"d")}f(Vl,A);function Zi(){A.call(this,"c")}f(Zi,A);var Mr={},Ku=null;function eo(){return Ku=Ku||new He}Mr.Ia="serverreachability";function Qu(d){A.call(this,Mr.Ia,d)}f(Qu,A);function to(d){const y=eo();Ge(y,new Qu(y))}Mr.STAT_EVENT="statevent";function Xu(d,y){A.call(this,Mr.STAT_EVENT,d),this.stat=y}f(Xu,A);function Oe(d){const y=eo();Ge(y,new Xu(y,d))}Mr.Ja="timingevent";function Wt(d,y){A.call(this,Mr.Ja,d),this.size=y}f(Wt,A);function St(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},y)}function hn(){this.g=!0}hn.prototype.ua=function(){this.g=!1};function fn(d,y,T,j,V,z){d.info(function(){if(d.g)if(z){var re="",_e=z.split("&");for(let qe=0;qe<_e.length;qe++){var Tt=_e[qe].split("=");if(Tt.length>1){const jt=Tt[0];Tt=Tt[1];const Vr=jt.split("_");re=Vr.length>=2&&Vr[1]=="type"?re+(jt+"="+Tt+"&"):re+(jt+"=redacted&")}}}else re=null;else re=z;return"XMLHTTP REQ ("+j+") [attempt "+V+"]: "+y+`
`+T+`
`+re})}function rn(d,y,T,j,V,z,re){d.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+V+"]: "+y+`
`+T+`
`+z+" "+re})}function Ft(d,y,T,j){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Et(d,T)+(j?" "+j:"")})}function zs(d,y){d.info(function(){return"TIMEOUT: "+y})}hn.prototype.info=function(){};function Et(d,y){if(!d.g)return y;if(!y)return null;try{const z=JSON.parse(y);if(z){for(d=0;d<z.length;d++)if(Array.isArray(z[d])){var T=z[d];if(!(T.length<2)){var j=T[1];if(Array.isArray(j)&&!(j.length<1)){var V=j[0];if(V!="noop"&&V!="stop"&&V!="close")for(let re=1;re<j.length;re++)j[re]=""}}}}return Dr(z)}catch{return y}}var kn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},In={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Hn;function us(){}f(us,ar),us.prototype.g=function(){return new XMLHttpRequest},Hn=new us;function lr(d){return encodeURIComponent(String(d))}function Or(d){var y=1;d=d.split(":");const T=[];for(;y>0&&d.length;)T.push(d.shift()),y--;return d.length&&T.push(d.join(":")),T}function mn(d,y,T,j){this.j=d,this.i=y,this.l=T,this.S=j||1,this.V=new Xi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Go}function Go(){this.i=null,this.g="",this.h=!1}var pw={},op={};function ap(d,y,T){d.M=1,d.A=Ju(Lr(y)),d.u=T,d.R=!0,gw(d,null)}function gw(d,y){d.F=Date.now(),Yu(d),d.B=Lr(d.A);var T=d.B,j=d.S;Array.isArray(j)||(j=[String(j)]),Iw(T.i,"t",j),d.C=0,T=d.j.L,d.h=new Go,d.g=Gw(d.j,T?y:null,!d.u),d.P>0&&(d.O=new Hu(u(d.Y,d,d.g),d.P)),y=d.V,T=d.g,j=d.ba;var V="readystatechange";Array.isArray(V)||(V&&(qu[0]=V.toString()),V=qu);for(let z=0;z<V.length;z++){const re=ue(T,V[z],j||y.handleEvent,!1,y.h||y);if(!re)break;y.g[re.key]=re}y=d.J?W(d.J):{},d.u?(d.v||(d.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,y)):(d.v="GET",d.g.ea(d.B,d.v,null,y)),to(),fn(d.i,d.v,d.B,d.l,d.S,d.u)}mn.prototype.ba=function(d){d=d.target;const y=this.O;y&&Bs(d)==3?y.j():this.Y(d)},mn.prototype.Y=function(d){try{if(d==this.g)e:{const _e=Bs(this.g),Tt=this.g.ya(),qe=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Ow(this.g)))){this.K||_e!=4||Tt==7||(Tt==8||qe<=0?to(3):to(2)),lp(this);var y=this.g.ca();this.X=y;var T=RP(this);if(this.o=y==200,rn(this.i,this.v,this.B,this.l,this.S,_e,y),this.o){if(this.U&&!this.L){t:{if(this.g){var j,V=this.g;if((j=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(j)){var z=j;break t}}z=null}if(d=z)Ft(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cp(this,d);else{this.o=!1,this.m=3,Oe(12),no(this),Fl(this);break e}}if(this.R){d=!0;let jt;for(;!this.K&&this.C<T.length;)if(jt=PP(this,T),jt==op){_e==4&&(this.m=4,Oe(14),d=!1),Ft(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==pw){this.m=4,Oe(15),Ft(this.i,this.l,T,"[Invalid Chunk]"),d=!1;break}else Ft(this.i,this.l,jt,null),cp(this,jt);if(yw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||T.length!=0||this.h.h||(this.m=1,Oe(16),d=!1),this.o=this.o&&d,!d)Ft(this.i,this.l,T,"[Invalid Chunked Response]"),no(this),Fl(this);else if(T.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),yp(re),re.P=!0,Oe(11))}}else Ft(this.i,this.l,T,null),cp(this,T);_e==4&&no(this),this.o&&!this.K&&(_e==4?Bw(this.j,this):(this.o=!1,Yu(this)))}else GP(this.g),y==400&&T.indexOf("Unknown SID")>0?(this.m=3,Oe(12)):(this.m=0,Oe(13)),no(this),Fl(this)}}}catch{}finally{}};function RP(d){if(!yw(d))return d.g.la();const y=Ow(d.g);if(y==="")return"";let T="";const j=y.length,V=Bs(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return no(d),Fl(d),"";d.h.i=new o.TextDecoder}for(let z=0;z<j;z++)d.h.h=!0,T+=d.h.i.decode(y[z],{stream:!(V&&z==j-1)});return y.length=0,d.h.g+=T,d.C=0,d.h.g}function yw(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function PP(d,y){var T=d.C,j=y.indexOf(`
`,T);return j==-1?op:(T=Number(y.substring(T,j)),isNaN(T)?pw:(j+=1,j+T>y.length?op:(y=y.slice(j,j+T),d.C=j+T,y)))}mn.prototype.cancel=function(){this.K=!0,no(this)};function Yu(d){d.T=Date.now()+d.H,vw(d,d.H)}function vw(d,y){if(d.D!=null)throw Error("WatchDog timer not null");d.D=St(u(d.aa,d),y)}function lp(d){d.D&&(o.clearTimeout(d.D),d.D=null)}mn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(zs(this.i,this.B),this.M!=2&&(to(),Oe(17)),no(this),this.m=2,Fl(this)):vw(this,this.T-d)};function Fl(d){d.j.I==0||d.K||Bw(d.j,d)}function no(d){lp(d);var y=d.O;y&&typeof y.dispose=="function"&&y.dispose(),d.O=null,cs(d.V),d.g&&(y=d.g,d.g=null,y.abort(),y.dispose())}function cp(d,y){try{var T=d.j;if(T.I!=0&&(T.g==d||up(T.h,d))){if(!d.L&&up(T.h,d)&&T.I==3){try{var j=T.Ba.g.parse(y)}catch{j=null}if(Array.isArray(j)&&j.length==3){var V=j;if(V[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<d.F)rd(T),td(T);else break e;gp(T),Oe(18)}}else T.xa=V[1],0<T.xa-T.K&&V[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=St(u(T.Va,T),6e3));bw(T.h)<=1&&T.ta&&(T.ta=void 0)}else so(T,11)}else if((d.L||T.g==d)&&rd(T),!R(y))for(V=T.Ba.g.parse(y),y=0;y<V.length;y++){let qe=V[y];const jt=qe[0];if(!(jt<=T.K))if(T.K=jt,qe=qe[1],T.I==2)if(qe[0]=="c"){T.M=qe[1],T.ba=qe[2];const Vr=qe[3];Vr!=null&&(T.ka=Vr,T.j.info("VER="+T.ka));const io=qe[4];io!=null&&(T.za=io,T.j.info("SVER="+T.za));const Ws=qe[5];Ws!=null&&typeof Ws=="number"&&Ws>0&&(j=1.5*Ws,T.O=j,T.j.info("backChannelRequestTimeoutMs_="+j)),j=T;const Hs=d.g;if(Hs){const id=Hs.g?Hs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(id){var z=j.h;z.g||id.indexOf("spdy")==-1&&id.indexOf("quic")==-1&&id.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(dp(z,z.h),z.h=null))}if(j.G){const vp=Hs.g?Hs.g.getResponseHeader("X-HTTP-Session-Id"):null;vp&&(j.wa=vp,Ze(j.J,j.G,vp))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-d.F,T.j.info("Handshake RTT: "+T.T+"ms")),j=T;var re=d;if(j.na=qw(j,j.L?j.ba:null,j.W),re.L){_w(j.h,re);var _e=re,Tt=j.O;Tt&&(_e.H=Tt),_e.D&&(lp(_e),Yu(_e)),j.g=re}else Uw(j);T.i.length>0&&nd(T)}else qe[0]!="stop"&&qe[0]!="close"||so(T,7);else T.I==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?so(T,7):pp(T):qe[0]!="noop"&&T.l&&T.l.qa(qe),T.A=0)}}to(4)}catch{}}var DP=class{constructor(d,y){this.g=d,this.map=y}};function xw(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ww(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function bw(d){return d.h?1:d.g?d.g.size:0}function up(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function dp(d,y){d.g?d.g.add(y):d.h=y}function _w(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}xw.prototype.cancel=function(){if(this.i=Sw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Sw(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const T of d.g.values())y=y.concat(T.G);return y}return g(d.i)}var Ew=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MP(d,y){if(d){d=d.split("&");for(let T=0;T<d.length;T++){const j=d[T].indexOf("=");let V,z=null;j>=0?(V=d[T].substring(0,j),z=d[T].substring(j+1)):V=d[T],y(V,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Us(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;d instanceof Us?(this.l=d.l,zl(this,d.j),this.o=d.o,this.g=d.g,Ul(this,d.u),this.h=d.h,hp(this,Aw(d.i)),this.m=d.m):d&&(y=String(d).match(Ew))?(this.l=!1,zl(this,y[1]||"",!0),this.o=$l(y[2]||""),this.g=$l(y[3]||"",!0),Ul(this,y[4]),this.h=$l(y[5]||"",!0),hp(this,y[6]||"",!0),this.m=$l(y[7]||"")):(this.l=!1,this.i=new Wl(null,this.l))}Us.prototype.toString=function(){const d=[];var y=this.j;y&&d.push(Bl(y,Tw,!0),":");var T=this.g;return(T||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Bl(y,Tw,!0),"@"),d.push(lr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&d.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Bl(T,T.charAt(0)=="/"?VP:LP,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Bl(T,zP)),d.join("")},Us.prototype.resolve=function(d){const y=Lr(this);let T=!!d.j;T?zl(y,d.j):T=!!d.o,T?y.o=d.o:T=!!d.g,T?y.g=d.g:T=d.u!=null;var j=d.h;if(T)Ul(y,d.u);else if(T=!!d.h){if(j.charAt(0)!="/")if(this.g&&!this.h)j="/"+j;else{var V=y.h.lastIndexOf("/");V!=-1&&(j=y.h.slice(0,V+1)+j)}if(V=j,V==".."||V==".")j="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){j=V.lastIndexOf("/",0)==0,V=V.split("/");const z=[];for(let re=0;re<V.length;){const _e=V[re++];_e=="."?j&&re==V.length&&z.push(""):_e==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),j&&re==V.length&&z.push("")):(z.push(_e),j=!0)}j=z.join("/")}else j=V}return T?y.h=j:T=d.i.toString()!=="",T?hp(y,Aw(d.i)):T=!!d.m,T&&(y.m=d.m),y};function Lr(d){return new Us(d)}function zl(d,y,T){d.j=T?$l(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Ul(d,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);d.u=y}else d.u=null}function hp(d,y,T){y instanceof Wl?(d.i=y,UP(d.i,d.l)):(T||(y=Bl(y,FP)),d.i=new Wl(y,d.l))}function Ze(d,y,T){d.i.set(y,T)}function Ju(d){return Ze(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function $l(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Bl(d,y,T){return typeof d=="string"?(d=encodeURI(d).replace(y,OP),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function OP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Tw=/[#\/\?@]/g,LP=/[#\?:]/g,VP=/[#\?]/g,FP=/[#\?@]/g,zP=/#/g;function Wl(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function ro(d){d.g||(d.g=new Map,d.h=0,d.i&&MP(d.i,function(y,T){d.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}t=Wl.prototype,t.add=function(d,y){ro(this),this.i=null,d=Ko(this,d);let T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(y),this.h+=1,this};function Nw(d,y){ro(d),y=Ko(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Cw(d,y){return ro(d),y=Ko(d,y),d.g.has(y)}t.forEach=function(d,y){ro(this),this.g.forEach(function(T,j){T.forEach(function(V){d.call(y,V,j,this)},this)},this)};function kw(d,y){ro(d);let T=[];if(typeof y=="string")Cw(d,y)&&(T=T.concat(d.g.get(Ko(d,y))));else for(d=Array.from(d.g.values()),y=0;y<d.length;y++)T=T.concat(d[y]);return T}t.set=function(d,y){return ro(this),this.i=null,d=Ko(this,d),Cw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=kw(this,d),d.length>0?String(d[0]):y):y};function Iw(d,y,T){Nw(d,y),T.length>0&&(d.i=null,d.g.set(Ko(d,y),g(T)),d.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(let j=0;j<y.length;j++){var T=y[j];const V=lr(T);T=kw(this,T);for(let z=0;z<T.length;z++){let re=V;T[z]!==""&&(re+="="+lr(T[z])),d.push(re)}}return this.i=d.join("&")};function Aw(d){const y=new Wl;return y.i=d.i,d.g&&(y.g=new Map(d.g),y.h=d.h),y}function Ko(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function UP(d,y){y&&!d.j&&(ro(d),d.i=null,d.g.forEach(function(T,j){const V=j.toLowerCase();j!=V&&(Nw(this,j),Iw(this,V,T))},d)),d.j=y}function $P(d,y){const T=new hn;if(o.Image){const j=new Image;j.onload=h($s,T,"TestLoadImage: loaded",!0,y,j),j.onerror=h($s,T,"TestLoadImage: error",!1,y,j),j.onabort=h($s,T,"TestLoadImage: abort",!1,y,j),j.ontimeout=h($s,T,"TestLoadImage: timeout",!1,y,j),o.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=d}else y(!1)}function BP(d,y){const T=new hn,j=new AbortController,V=setTimeout(()=>{j.abort(),$s(T,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:j.signal}).then(z=>{clearTimeout(V),z.ok?$s(T,"TestPingServer: ok",!0,y):$s(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(V),$s(T,"TestPingServer: error",!1,y)})}function $s(d,y,T,j,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),j(T)}catch{}}function WP(){this.g=new Gu}function fp(d){this.i=d.Sb||null,this.h=d.ab||!1}f(fp,ar),fp.prototype.g=function(){return new Zu(this.i,this.h)};function Zu(d,y){He.call(this),this.H=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Zu,He),t=Zu.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=y,this.readyState=1,ql(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(y.body=d),(this.H||o).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ql(this)),this.g&&(this.readyState=3,ql(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jw(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function jw(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Hl(this):ql(this),this.readyState==3&&jw(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Hl(this))},t.Na=function(d){this.g&&(this.response=d,Hl(this))},t.ga=function(){this.g&&Hl(this)};function Hl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ql(d)}t.setRequestHeader=function(d,y){this.A.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=y.next();return d.join(`\r
`)};function ql(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Zu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Rw(d){let y="";return B(d,function(T,j){y+=j,y+=":",y+=T,y+=`\r
`}),y}function mp(d,y,T){e:{for(j in T){var j=!1;break e}j=!0}j||(T=Rw(T),typeof d=="string"?T!=null&&lr(T):Ze(d,y,T))}function dt(d){He.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(dt,He);var HP=/^https?$/i,qP=["POST","PUT"];t=dt.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,y,T,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Hn.g(),this.g.onreadystatechange=p(u(this.Ca,this));try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(z){Pw(this,z);return}if(d=T||"",T=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var V in j)T.set(V,j[V]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const z of j.keys())T.set(z,j.get(z));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(T.keys()).find(z=>z.toLowerCase()=="content-type"),V=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(qP,y,void 0)>=0)||j||V||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,re]of T)this.g.setRequestHeader(z,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(z){Pw(this,z)}};function Pw(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.o=5,Dw(d),ed(d)}function Dw(d){d.A||(d.A=!0,Ge(d,"complete"),Ge(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ge(this,"complete"),Ge(this,"abort"),ed(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ed(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Mw(this):this.Xa())},t.Xa=function(){Mw(this)};function Mw(d){if(d.h&&typeof i<"u"){if(d.v&&Bs(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ge(d,"readystatechange"),Bs(d)==4){d.h=!1;try{const z=d.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var j;if(j=z===0){let re=String(d.D).match(Ew)[1]||null;!re&&o.self&&o.self.location&&(re=o.self.location.protocol.slice(0,-1)),j=!HP.test(re?re.toLowerCase():"")}T=j}if(T)Ge(d,"complete"),Ge(d,"success");else{d.o=6;try{var V=Bs(d)>2?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.ca()+"]",Dw(d)}}finally{ed(d)}}}}function ed(d,y){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const T=d.g;d.g=null,y||Ge(d,"ready");try{T.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Bs(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Bs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Yi(y)}};function Ow(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function GP(d){const y={};d=(d.g&&Bs(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<d.length;j++){if(R(d[j]))continue;var T=Or(d[j]);const V=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const z=y[V]||[];y[V]=z,z.push(T)}U(y,function(j){return j.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gl(d,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||y}function Lw(d){this.za=0,this.i=[],this.j=new hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Gl("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Gl("baseRetryDelayMs",5e3,d),this.Za=Gl("retryDelaySeedMs",1e4,d),this.Ta=Gl("forwardChannelMaxRetries",2,d),this.va=Gl("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new xw(d&&d.concurrentRequestLimit),this.Ba=new WP,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Lw.prototype,t.ka=8,t.I=1,t.connect=function(d,y,T,j){Oe(0),this.W=d,this.H=y||{},T&&j!==void 0&&(this.H.OSID=T,this.H.OAID=j),this.F=this.X,this.J=qw(this,null,this.W),nd(this)};function pp(d){if(Vw(d),d.I==3){var y=d.V++,T=Lr(d.J);if(Ze(T,"SID",d.M),Ze(T,"RID",y),Ze(T,"TYPE","terminate"),Kl(d,T),y=new mn(d,d.j,y),y.M=2,y.A=Ju(Lr(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(y.A.toString(),"")}catch{}!T&&o.Image&&(new Image().src=y.A,T=!0),T||(y.g=Gw(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Yu(y)}Hw(d)}function td(d){d.g&&(yp(d),d.g.cancel(),d.g=null)}function Vw(d){td(d),d.v&&(o.clearTimeout(d.v),d.v=null),rd(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function nd(d){if(!ww(d.h)&&!d.m){d.m=!0;var y=d.Ea;D||C(),M||(D(),M=!0),E.add(y,d),d.D=0}}function KP(d,y){return bw(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=y.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=St(u(d.Ea,d,y),Ww(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const V=new mn(this,this.j,d);let z=this.o;if(this.U&&(z?(z=W(z),oe(z,this.U)):z=this.U),this.u!==null||this.R||(V.J=z,z=null),this.S)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var j=this.i[T];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(y+=j,y>4096){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=zw(this,V,y),T=Lr(this.J),Ze(T,"RID",d),Ze(T,"CVER",22),this.G&&Ze(T,"X-HTTP-Session-Id",this.G),Kl(this,T),z&&(this.R?y="headers="+lr(Rw(z))+"&"+y:this.u&&mp(T,this.u,z)),dp(this.h,V),this.Ra&&Ze(T,"TYPE","init"),this.S?(Ze(T,"$req",y),Ze(T,"SID","null"),V.U=!0,ap(V,T,null)):ap(V,T,y),this.I=2}}else this.I==3&&(d?Fw(this,d):this.i.length==0||ww(this.h)||Fw(this))};function Fw(d,y){var T;y?T=y.l:T=d.V++;const j=Lr(d.J);Ze(j,"SID",d.M),Ze(j,"RID",T),Ze(j,"AID",d.K),Kl(d,j),d.u&&d.o&&mp(j,d.u,d.o),T=new mn(d,d.j,T,d.D+1),d.u===null&&(T.J=d.o),y&&(d.i=y.G.concat(d.i)),y=zw(d,T,1e3),T.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),dp(d.h,T),ap(T,j,y)}function Kl(d,y){d.H&&B(d.H,function(T,j){Ze(y,j,T)}),d.l&&B({},function(T,j){Ze(y,j,T)})}function zw(d,y,T){T=Math.min(d.i.length,T);const j=d.l?u(d.l.Ka,d.l,d):null;e:{var V=d.i;let _e=-1;for(;;){const Tt=["count="+T];_e==-1?T>0?(_e=V[0].g,Tt.push("ofs="+_e)):_e=0:Tt.push("ofs="+_e);let qe=!0;for(let jt=0;jt<T;jt++){var z=V[jt].g;const Vr=V[jt].map;if(z-=_e,z<0)_e=Math.max(0,V[jt].g-100),qe=!1;else try{z="req"+z+"_"||"";try{var re=Vr instanceof Map?Vr:Object.entries(Vr);for(const[io,Ws]of re){let Hs=Ws;l(Ws)&&(Hs=Dr(Ws)),Tt.push(z+io+"="+encodeURIComponent(Hs))}}catch(io){throw Tt.push(z+"type="+encodeURIComponent("_badmap")),io}}catch{j&&j(Vr)}}if(qe){re=Tt.join("&");break e}}re=void 0}return d=d.i.splice(0,T),y.G=d,re}function Uw(d){if(!d.g&&!d.v){d.Y=1;var y=d.Da;D||C(),M||(D(),M=!0),E.add(y,d),d.A=0}}function gp(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=St(u(d.Da,d),Ww(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,$w(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=St(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Oe(10),td(this),$w(this))};function yp(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function $w(d){d.g=new mn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var y=Lr(d.na);Ze(y,"RID","rpc"),Ze(y,"SID",d.M),Ze(y,"AID",d.K),Ze(y,"CI",d.F?"0":"1"),!d.F&&d.ia&&Ze(y,"TO",d.ia),Ze(y,"TYPE","xmlhttp"),Kl(d,y),d.u&&d.o&&mp(y,d.u,d.o),d.O&&(d.g.H=d.O);var T=d.g;d=d.ba,T.M=1,T.A=Ju(Lr(y)),T.u=null,T.R=!0,gw(T,d)}t.Va=function(){this.C!=null&&(this.C=null,td(this),gp(this),Oe(19))};function rd(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Bw(d,y){var T=null;if(d.g==y){rd(d),yp(d),d.g=null;var j=2}else if(up(d.h,y))T=y.G,_w(d.h,y),j=1;else return;if(d.I!=0){if(y.o)if(j==1){T=y.u?y.u.length:0,y=Date.now()-y.F;var V=d.D;j=eo(),Ge(j,new Wt(j,T)),nd(d)}else Uw(d);else if(V=y.m,V==3||V==0&&y.X>0||!(j==1&&KP(d,y)||j==2&&gp(d)))switch(T&&T.length>0&&(y=d.h,y.i=y.i.concat(T)),V){case 1:so(d,5);break;case 4:so(d,10);break;case 3:so(d,6);break;default:so(d,2)}}}function Ww(d,y){let T=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(T*=2),T*y}function so(d,y){if(d.j.info("Error code "+y),y==2){var T=u(d.bb,d),j=d.Ua;const V=!j;j=new Us(j||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||zl(j,"https"),Ju(j),V?$P(j.toString(),T):BP(j.toString(),T)}else Oe(2);d.I=0,d.l&&d.l.pa(y),Hw(d),Vw(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))};function Hw(d){if(d.I=0,d.ja=[],d.l){const y=Sw(d.h);(y.length!=0||d.i.length!=0)&&(w(d.ja,y),w(d.ja,d.i),d.h.i.length=0,g(d.i),d.i.length=0),d.l.oa()}}function qw(d,y,T){var j=T instanceof Us?Lr(T):new Us(T);if(j.g!="")y&&(j.g=y+"."+j.g),Ul(j,j.u);else{var V=o.location;j=V.protocol,y=y?y+"."+V.hostname:V.hostname,V=+V.port;const z=new Us(null);j&&zl(z,j),y&&(z.g=y),V&&Ul(z,V),T&&(z.h=T),j=z}return T=d.G,y=d.wa,T&&y&&Ze(j,T,y),Ze(j,"VER",d.ka),Kl(d,j),j}function Gw(d,y,T){if(y&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Aa&&!d.ma?new dt(new fp({ab:T})):new dt(d.ma),y.Fa(d.L),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kw(){}t=Kw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function sd(){}sd.prototype.g=function(d,y){return new An(d,y)};function An(d,y){He.call(this),this.g=new Lw(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(d?d["X-WebChannel-Client-Profile"]=y.sa:d={"X-WebChannel-Client-Profile":y.sa}),this.g.U=d,(d=y&&y.Qb)&&!R(d)&&(this.g.u=d),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Qo(this)}f(An,He),An.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){pp(this.g)},An.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.v&&(T={},T.__data__=Dr(d),d=T);y.i.push(new DP(y.Ya++,d)),y.I==3&&nd(y)},An.prototype.N=function(){this.g.l=null,delete this.j,pp(this.g),delete this.g,An.Z.N.call(this)};function Qw(d){Vl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const T in y){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}f(Qw,Vl);function Xw(){Zi.call(this),this.status=1}f(Xw,Zi);function Qo(d){this.g=d}f(Qo,Kw),Qo.prototype.ra=function(){Ge(this.g,"a")},Qo.prototype.qa=function(d){Ge(this.g,new Qw(d))},Qo.prototype.pa=function(d){Ge(this.g,new Xw)},Qo.prototype.oa=function(){Ge(this.g,"b")},sd.prototype.createWebChannel=sd.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,uI=function(){return new sd},cI=function(){return eo()},lI=Mr,$y={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,ch=kn,In.COMPLETE="complete",aI=In,Ll.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",He.prototype.listen=He.prototype.J,cc=Ll,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,oI=dt}).apply(typeof Ad<"u"?Ad:typeof self<"u"?self:typeof window<"u"?window:{});const p_="@firebase/firestore",g_="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xt.UNAUTHENTICATED=new Xt(null),Xt.GOOGLE_CREDENTIALS=new Xt("google-credentials-uid"),Xt.FIRST_PARTY=new Xt("first-party-uid"),Xt.MOCK_USER=new Xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new zx("@firebase/firestore");function ea(){return Lo.logLevel}function de(t,...e){if(Lo.logLevel<=ke.DEBUG){const n=e.map(Zx);Lo.debug(`Firestore (${Sl}): ${t}`,...n)}}function js(t,...e){if(Lo.logLevel<=ke.ERROR){const n=e.map(Zx);Lo.error(`Firestore (${Sl}): ${t}`,...n)}}function Vo(t,...e){if(Lo.logLevel<=ke.WARN){const n=e.map(Zx);Lo.warn(`Firestore (${Sl}): ${t}`,...n)}}function Zx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dI(t,r,n)}function dI(t,e,n){let r=`FIRESTORE (${Sl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw js(r),new Error(r)}function ze(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||dI(e,s,r)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Xt.UNAUTHENTICATED))}shutdown(){}}class U9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $9{constructor(e){this.t=e,this.currentUser=Xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ze(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ni,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ni)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string",31837,{l:r}),new hI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string",2055,{h:e}),new Xt(e)}}class B9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class W9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new B9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class y_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ze(this.o===void 0,3512);const r=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,de("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new y_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new y_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=q9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function By(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return ag(s)===ag(i)?Ie(s,i):ag(s)?1:-1}return Ie(t.length,e.length)}const G9=55296,K9=57343;function ag(t){const e=t.charCodeAt(0);return e>=G9&&e<=K9}function nl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_="__name__";class Ur{constructor(e,n,r){n===void 0?n=0:n>e.length&&ye(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ye(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ur.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ur?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Ur.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ie(e.length,n.length)}static compareSegments(e,n){const r=Ur.isNumericId(e),s=Ur.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ur.extractNumericId(e).compare(Ur.extractNumericId(n)):By(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ti.fromString(e.substring(4,e.length-2))}}class Qe extends Ur{construct(e,n,r){return new Qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new le(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const Q9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mt extends Ur{construct(e,n,r){return new Mt(e,n,r)}static isValidIdentifier(e){return Q9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===v_}static keyField(){return new Mt([v_])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new le(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new le(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mt(n)}static emptyPath(){return new Mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Qe.fromString(e))}static fromName(e){return new pe(Qe.fromString(e).popFirst(5))}static empty(){return new pe(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t,e,n){if(!n)throw new le(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function pI(t,e,n,r){if(e===!0&&r===!0)throw new le(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function x_(t){if(!pe.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w_(t){if(pe.isDocumentKey(t))throw new le(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ye(12329,{type:typeof t})}function Fn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xm(t);throw new le(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function X9(t,e){if(e<=0)throw new le(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ru(t,e){if(!gI(t))throw new le(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new le(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=-62135596800,__=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*__);return new Xe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<b_)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/__}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ru(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-b_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:bt("string",Xe._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new Xe(0,0))}static max(){return new xe(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=-1;function Y9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Di(s,pe.empty(),e)}function J9(t){return new Di(t.readTime,t.key,su)}class Di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Di(xe.min(),pe.empty(),su)}static max(){return new Di(xe.max(),pe.empty(),su)}}function Z9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=pe.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ez="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function El(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==ez)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new G((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function nz(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}wm.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=-1;function bm(t){return t==null}function of(t){return t===0&&1/t==-1/0}function rz(t){return typeof t=="number"&&Number.isInteger(t)&&!of(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="";function sz(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=S_(e)),e=iz(t.get(n),e);return S_(e)}function iz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case yI:n+="";break;default:n+=i}}return n}function S_(t){return t+yI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Ut.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ut.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jd(this.root,e,this.comparator,!1)}getReverseIterator(){return new jd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jd(this.root,e,this.comparator,!0)}}class jd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ut.RED,this.left=s??Ut.EMPTY,this.right=i??Ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}Ut.EMPTY=null,Ut.RED=!0,Ut.BLACK=!1;Ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new T_(this.data.getIterator())}getIteratorFrom(e){return new T_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class T_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Mt.comparator)}static empty(){return new On([])}unionWith(e){let n=new At(Mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new xI("Invalid base64 string: "+i):i}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const oz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(t){if(ze(!!t,39018),typeof t=="string"){let e=0;const n=oz.exec(t);if(ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Oi(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="server_timestamp",bI="__type__",_I="__previous_value__",SI="__local_write_time__";function t0(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[bI])==null?void 0:r.stringValue)===wI}function _m(t){const e=t.mapValue.fields[_I];return t0(e)?_m(e):e}function iu(t){const e=Mi(t.mapValue.fields[SI].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const af="(default)";class rl{constructor(e,n){this.projectId=e,this.database=n||af}static empty(){return new rl("","")}get isDefaultDatabase(){return this.database===af}isEqual(e){return e instanceof rl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="__type__",TI="__max__",Rd={mapValue:{fields:{__type__:{stringValue:TI}}}},NI="__vector__",lf="value";function Li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?t0(t)?4:cz(t)?9007199254740991:lz(t)?10:11:ye(28295,{value:t})}function is(t,e){if(t===e)return!0;const n=Li(t);if(n!==Li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return iu(t).isEqual(iu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Mi(s.timestampValue),l=Mi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Oi(s.bytesValue).isEqual(Oi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return gt(s.geoPointValue.latitude)===gt(i.geoPointValue.latitude)&&gt(s.geoPointValue.longitude)===gt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return gt(s.integerValue)===gt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=gt(s.doubleValue),l=gt(i.doubleValue);return o===l?of(o)===of(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return nl(t.arrayValue.values||[],e.arrayValue.values||[],is);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(E_(o)!==E_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!is(o[c],l[c])))return!1;return!0}(t,e);default:return ye(52216,{left:t})}}function ou(t,e){return(t.values||[]).find(n=>is(n,e))!==void 0}function sl(t,e){if(t===e)return 0;const n=Li(t),r=Li(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=gt(i.integerValue||i.doubleValue),c=gt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return N_(t.timestampValue,e.timestampValue);case 4:return N_(iu(t),iu(e));case 5:return By(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Oi(i),c=Oi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ie(l[u],c[u]);if(h!==0)return h}return Ie(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Ie(gt(i.latitude),gt(o.latitude));return l!==0?l:Ie(gt(i.longitude),gt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return C_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,g,w,v;const l=i.fields||{},c=o.fields||{},u=(p=l[lf])==null?void 0:p.arrayValue,h=(g=c[lf])==null?void 0:g.arrayValue,f=Ie(((w=u==null?void 0:u.values)==null?void 0:w.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:C_(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Rd.mapValue&&o===Rd.mapValue)return 0;if(i===Rd.mapValue)return 1;if(o===Rd.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=By(c[f],h[f]);if(p!==0)return p;const g=sl(l[c[f]],u[h[f]]);if(g!==0)return g}return Ie(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ye(23264,{he:n})}}function N_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=Mi(t),r=Mi(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function C_(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=sl(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function il(t){return Wy(t)}function Wy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Mi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Oi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return pe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Wy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Wy(n.fields[o])}`;return s+"}"}(t.mapValue):ye(61005,{value:t})}function uh(t){switch(Li(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_m(t);return e?16+uh(e):16;case 5:return 2*t.stringValue.length;case 6:return Oi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+uh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Hi(r.fields,(i,o)=>{s+=i.length+uh(o)}),s}(t.mapValue);default:throw ye(13486,{value:t})}}function k_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hy(t){return!!t&&"integerValue"in t}function n0(t){return!!t&&"arrayValue"in t}function I_(t){return!!t&&"nullValue"in t}function A_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dh(t){return!!t&&"mapValue"in t}function lz(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[EI])==null?void 0:r.stringValue)===NI}function Nc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Hi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Nc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Nc(t.arrayValue.values[n]);return e}return{...t}}function cz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nc(n)}setAll(e){let n=Mt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Nc(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Hi(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vn(Nc(this.value))}}function CI(t){const e=[];return Hi(t.fields,(n,r)=>{const s=new Mt([n]);if(dh(r)){const i=CI(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Zt(e,0,xe.min(),xe.min(),xe.min(),vn.empty(),0)}static newFoundDocument(e,n,r,s){return new Zt(e,1,n,xe.min(),r,s,0)}static newNoDocument(e,n){return new Zt(e,2,n,xe.min(),xe.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Zt(e,3,n,xe.min(),xe.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n){this.position=e,this.inclusive=n}}function j_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=pe.comparator(pe.fromName(o.referenceValue),n.key):r=sl(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function R_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!is(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n="asc"){this.field=e,this.dir=n}}function uz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{}class wt extends kI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hz(e,n,r):n==="array-contains"?new pz(e,r):n==="in"?new gz(e,r):n==="not-in"?new yz(e,r):n==="array-contains-any"?new vz(e,r):new wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fz(e,r):new mz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(sl(n,this.value)):n!==null&&Li(this.value)===Li(n)&&this.matchesComparison(sl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ir extends kI{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ir(e,n)}matches(e){return II(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function II(t){return t.op==="and"}function AI(t){return dz(t)&&II(t)}function dz(t){for(const e of t.filters)if(e instanceof Ir)return!1;return!0}function qy(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+il(t.value);if(AI(t))return t.filters.map(e=>qy(e)).join(",");{const e=t.filters.map(n=>qy(n)).join(",");return`${t.op}(${e})`}}function jI(t,e){return t instanceof wt?function(r,s){return s instanceof wt&&r.op===s.op&&r.field.isEqual(s.field)&&is(r.value,s.value)}(t,e):t instanceof Ir?function(r,s){return s instanceof Ir&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&jI(o,s.filters[l]),!0):!1}(t,e):void ye(19439)}function RI(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${il(n.value)}`}(t):t instanceof Ir?function(n){return n.op.toString()+" {"+n.getFilters().map(RI).join(" ,")+"}"}(t):"Filter"}class hz extends wt{constructor(e,n,r){super(e,n,r),this.key=pe.fromName(r.referenceValue)}matches(e){const n=pe.comparator(e.key,this.key);return this.matchesComparison(n)}}class fz extends wt{constructor(e,n){super(e,"in",n),this.keys=PI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mz extends wt{constructor(e,n){super(e,"not-in",n),this.keys=PI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PI(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>pe.fromName(r.referenceValue))}class pz extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return n0(n)&&ou(n.arrayValue,this.value)}}class gz extends wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ou(this.value.arrayValue,n)}}class yz extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ou(this.value.arrayValue,n)}}class vz extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!n0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ou(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function P_(t,e=null,n=[],r=[],s=null,i=null,o=null){return new xz(t,e,n,r,s,i,o)}function r0(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),bm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>il(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>il(r)).join(",")),e.Te=n}return e.Te}function s0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!uz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!R_(t.startAt,e.startAt)&&R_(t.endAt,e.endAt)}function Gy(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wz(t,e,n,r,s,i,o,l){return new Nl(t,e,n,r,s,i,o,l)}function Sm(t){return new Nl(t)}function D_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function DI(t){return t.collectionGroup!==null}function Cc(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new At(Mt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new au(i,r))}),n.has(Mt.keyField().canonicalString())||e.Ie.push(new au(Mt.keyField(),r))}return e.Ie}function ts(t){const e=we(t);return e.Ee||(e.Ee=bz(e,Cc(t))),e.Ee}function bz(t,e){if(t.limitType==="F")return P_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new au(s.field,i)});const n=t.endAt?new cf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cf(t.startAt.position,t.startAt.inclusive):null;return P_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ky(t,e){const n=t.filters.concat([e]);return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uf(t,e,n){return new Nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Em(t,e){return s0(ts(t),ts(e))&&t.limitType===e.limitType}function MI(t){return`${r0(ts(t))}|lt:${t.limitType}`}function ta(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>RI(s)).join(", ")}]`),bm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>il(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>il(s)).join(",")),`Target(${r})`}(ts(t))}; limitType=${t.limitType})`}function Tm(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):pe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Cc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=j_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Cc(r),s)||r.endAt&&!function(o,l,c){const u=j_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Cc(r),s))}(t,e)}function _z(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function OI(t){return(e,n)=>{let r=!1;for(const s of Cc(t)){const i=Sz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Sz(t,e,n){const r=t.field.isKeyField()?pe.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?sl(c,u):ye(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ye(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hi(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return vI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ez=new ut(pe.comparator);function Rs(){return Ez}const LI=new ut(pe.comparator);function uc(...t){let e=LI;for(const n of t)e=e.insert(n.key,n);return e}function VI(t){let e=LI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function po(){return kc()}function FI(){return kc()}function kc(){return new Ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const Tz=new ut(pe.comparator),Nz=new At(pe.comparator);function Ae(...t){let e=Nz;for(const n of t)e=e.add(n);return e}const Cz=new At(Ie);function kz(){return Cz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:of(e)?"-0":e}}function zI(t){return{integerValue:""+t}}function Iz(t,e){return rz(e)?zI(e):i0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this._=void 0}}function Az(t,e,n){return t instanceof lu?function(s,i){const o={fields:{[bI]:{stringValue:wI},[SI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&t0(i)&&(i=_m(i)),i&&(o.fields[_I]=i),{mapValue:o}}(n,e):t instanceof ol?$I(t,e):t instanceof cu?BI(t,e):function(s,i){const o=UI(s,i),l=M_(o)+M_(s.Ae);return Hy(o)&&Hy(s.Ae)?zI(l):i0(s.serializer,l)}(t,e)}function jz(t,e,n){return t instanceof ol?$I(t,e):t instanceof cu?BI(t,e):n}function UI(t,e){return t instanceof df?function(r){return Hy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class lu extends Nm{}class ol extends Nm{constructor(e){super(),this.elements=e}}function $I(t,e){const n=WI(e);for(const r of t.elements)n.some(s=>is(s,r))||n.push(r);return{arrayValue:{values:n}}}class cu extends Nm{constructor(e){super(),this.elements=e}}function BI(t,e){let n=WI(e);for(const r of t.elements)n=n.filter(s=>!is(s,r));return{arrayValue:{values:n}}}class df extends Nm{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function M_(t){return gt(t.integerValue||t.doubleValue)}function WI(t){return n0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n){this.field=e,this.transform=n}}function Rz(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ol&&s instanceof ol||r instanceof cu&&s instanceof cu?nl(r.elements,s.elements,is):r instanceof df&&s instanceof df?is(r.Ae,s.Ae):r instanceof lu&&s instanceof lu}(t.transform,e.transform)}class Pz{constructor(e,n){this.version=e,this.transformResults=n}}class tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tr}static exists(e){return new tr(void 0,e)}static updateTime(e){return new tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cm{}function qI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new o0(t.key,tr.none()):new Pu(t.key,t.data,tr.none());{const n=t.data,r=vn.empty();let s=new At(Mt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new qi(t.key,r,new On(s.toArray()),tr.none())}}function Dz(t,e,n){t instanceof Pu?function(s,i,o){const l=s.value.clone(),c=L_(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(s,i,o){if(!hh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=L_(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(GI(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ic(t,e,n,r){return t instanceof Pu?function(i,o,l,c){if(!hh(i.precondition,o))return l;const u=i.value.clone(),h=V_(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof qi?function(i,o,l,c){if(!hh(i.precondition,o))return l;const u=V_(i.fieldTransforms,c,o),h=o.data;return h.setAll(GI(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return hh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Mz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=UI(r.transform,s||null);i!=null&&(n===null&&(n=vn.empty()),n.set(r.field,i))}return n||null}function O_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&nl(r,s,(i,o)=>Rz(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pu extends Cm{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qi extends Cm{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function GI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function L_(t,e,n){const r=new Map;ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,jz(o,l,n[s]))}return r}function V_(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Az(i,o,e))}return r}class o0 extends Cm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Oz extends Cm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Dz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ic(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ic(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FI();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=qI(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(xe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,(n,r)=>O_(n,r))&&nl(this.baseMutations,e.baseMutations,(n,r)=>O_(n,r))}}class a0{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ze(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Tz}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new a0(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vz=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Re;function zz(t){switch(t){case H.OK:return ye(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return ye(15467,{code:t})}}function KI(t){if(t===void 0)return js("GRPC error has no .code"),H.UNKNOWN;switch(t){case vt.OK:return H.OK;case vt.CANCELLED:return H.CANCELLED;case vt.UNKNOWN:return H.UNKNOWN;case vt.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case vt.INTERNAL:return H.INTERNAL;case vt.UNAVAILABLE:return H.UNAVAILABLE;case vt.UNAUTHENTICATED:return H.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case vt.NOT_FOUND:return H.NOT_FOUND;case vt.ALREADY_EXISTS:return H.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return H.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case vt.ABORTED:return H.ABORTED;case vt.OUT_OF_RANGE:return H.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return H.UNIMPLEMENTED;case vt.DATA_LOSS:return H.DATA_LOSS;default:return ye(39323,{code:t})}}(Re=vt||(vt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z=new Ti([4294967295,4294967295],0);function F_(t){const e=Uz().encode(t),n=new iI;return n.update(e),new Uint8Array(n.digest())}function z_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ti([n,r],0),new Ti([s,i],0)]}class l0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new dc(`Invalid padding: ${n}`);if(r<0)throw new dc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new dc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new dc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ti.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ti.fromNumber(r)));return s.compare($z)===1&&(s=new Ti([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=F_(e),[r,s]=z_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new l0(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=F_(e),[r,s]=z_(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new km(xe.min(),s,new ut(Ie),Rs(),Ae())}}class Du{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Du(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class QI{constructor(e,n){this.targetId=e,this.Ce=n}}class XI{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class U_{constructor(){this.ve=0,this.Fe=$_(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),r=Ae();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ye(38017,{changeType:i})}}),new Du(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=$_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Bz{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rs(),this.Je=Pd(),this.He=Pd(),this.Ye=new ut(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Gy(i))if(r===0){const o=new pe(i.path);this.et(n,o,Zt.newNoDocument(o,xe.min()))}else ze(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Oi(r).toUint8Array()}catch(c){if(c instanceof xI)return Vo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new l0(o,s,i)}catch(c){return Vo(c instanceof dc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Gy(l.target)){const c=new pe(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Zt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ae();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new km(e,n,this.Ye,this.je,r);return this.je=Rs(),this.Je=Pd(),this.He=Pd(),this.Ye=new ut(Ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new U_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new At(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new At(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new U_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Pd(){return new ut(pe.comparator)}function $_(){return new ut(pe.comparator)}const Wz={asc:"ASCENDING",desc:"DESCENDING"},Hz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qz={and:"AND",or:"OR"};class Gz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Qy(t,e){return t.useProto3Json||bm(e)?e:{value:e}}function hf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Kz(t,e){return hf(t,e.toTimestamp())}function ns(t){return ze(!!t,49232),xe.fromTimestamp(function(n){const r=Mi(n);return new Xe(r.seconds,r.nanos)}(t))}function c0(t,e){return Xy(t,e).canonicalString()}function Xy(t,e){const n=function(s){return new Qe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function JI(t){const e=Qe.fromString(t);return ze(rA(e),10190,{key:e.toString()}),e}function Yy(t,e){return c0(t.databaseId,e.path)}function lg(t,e){const n=JI(e);if(n.get(1)!==t.databaseId.projectId)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new pe(eA(n))}function ZI(t,e){return c0(t.databaseId,e)}function Qz(t){const e=JI(t);return e.length===4?Qe.emptyPath():eA(e)}function Jy(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eA(t){return ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function B_(t,e,n){return{name:Yy(t,e),fields:n.value.mapValue.fields}}function Xz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ye(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(ze(h===void 0||typeof h=="string",58123),Vt.fromBase64String(h||"")):(ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?H.UNKNOWN:KI(u.code);return new le(h,u.message||"")}(o);n=new XI(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=lg(t,r.document.name),i=ns(r.document.updateTime),o=r.document.createTime?ns(r.document.createTime):xe.min(),l=new vn({mapValue:{fields:r.document.fields}}),c=Zt.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new fh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=lg(t,r.document),i=r.readTime?ns(r.readTime):xe.min(),o=Zt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new fh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=lg(t,r.document),i=r.removedTargetIds||[];n=new fh([],i,s,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Fz(s,i),l=r.targetId;n=new QI(l,o)}}return n}function Yz(t,e){let n;if(e instanceof Pu)n={update:B_(t,e.key,e.value)};else if(e instanceof o0)n={delete:Yy(t,e.key)};else if(e instanceof qi)n={update:B_(t,e.key,e.data),updateMask:o8(e.fieldMask)};else{if(!(e instanceof Oz))return ye(16599,{Vt:e.type});n={verify:Yy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof lu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ol)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof cu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof df)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ye(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Kz(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ye(27497)}(t,e.precondition)),n}function Jz(t,e){return t&&t.length>0?(ze(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?ns(s.updateTime):ns(i);return o.isEqual(xe.min())&&(o=ns(i)),new Pz(o,s.transformResults||[])}(n,e))):[]}function Zz(t,e){return{documents:[ZI(t,e.path)]}}function e8(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZI(t,s);const i=function(u){if(u.length!==0)return nA(Ir.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:na(p.field),direction:r8(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Qy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function t8(t){let e=Qz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ze(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const p=tA(f);return p instanceof Ir&&AI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(w){return new au(ra(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,bm(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new cf(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new cf(g,p)}(n.endAt)),wz(e,s,o,i,l,"F",c,u)}function n8(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ra(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ra(n.unaryFilter.field);return wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ra(n.unaryFilter.field);return wt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ra(n.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}}(t):t.fieldFilter!==void 0?function(n){return wt.create(ra(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ir.create(n.compositeFilter.filters.map(r=>tA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye(1026)}}(n.compositeFilter.op))}(t):ye(30097,{filter:t})}function r8(t){return Wz[t]}function s8(t){return Hz[t]}function i8(t){return qz[t]}function na(t){return{fieldPath:t.canonicalString()}}function ra(t){return Mt.fromServerFormat(t.fieldPath)}function nA(t){return t instanceof wt?function(n){if(n.op==="=="){if(A_(n.value))return{unaryFilter:{field:na(n.field),op:"IS_NAN"}};if(I_(n.value))return{unaryFilter:{field:na(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(A_(n.value))return{unaryFilter:{field:na(n.field),op:"IS_NOT_NAN"}};if(I_(n.value))return{unaryFilter:{field:na(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:na(n.field),op:s8(n.op),value:n.value}}}(t):t instanceof Ir?function(n){const r=n.getFilters().map(s=>nA(s));return r.length===1?r[0]:{compositeFilter:{op:i8(n.op),filters:r}}}(t):ye(54877,{filter:t})}function o8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n,r,s,i=xe.min(),o=xe.min(),l=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e){this.yt=e}}function l8(t){const e=t8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(){this.Cn=new u8}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Di.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class u8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new At(Qe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new At(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sA=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(sA,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new al(0)}static cr(){return new al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="LruGarbageCollector",d8=1048576;function q_([t,e],[n,r]){const s=Ie(t,n);return s===0?Ie(e,r):s}class h8{constructor(e){this.Ir=e,this.buffer=new At(q_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();q_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class f8{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(H_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tl(n)?de(H_,"Ignoring IndexedDB error during garbage collection: ",n):await El(n)}await this.Vr(3e5)})}}class m8{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(wm.ce);const r=new h8(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(W_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),ea()<=ke.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function p8(t,e){return new m8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.changes=new Ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ic(r.mutation,s,On.empty(),Xe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const s=po();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=uc();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=po();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Rs();const o=kc(),l=function(){return kc()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof qi)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ic(h.mutation,u,h.mutation.getFieldMask(),Xe.now())):o.set(u.key,On.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new y8(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=kc();let s=new ut((o,l)=>o-l),i=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||On.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ae()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=FI();h.forEach(p=>{if(!i.has(p)){const g=qI(n.get(p),r.get(p));g!==null&&f.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):DI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):G.resolve(po());let l=su,c=i;return o.next(u=>G.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ae())).next(h=>({batchId:l,changes:VI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new pe(n)).next(r=>{let s=uc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=uc();return this.indexManager.getCollectionParents(e,i).next(l=>G.forEach(l,c=>{const u=function(f,p){return new Nl(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Zt.newInvalidDocument(h)))});let l=uc();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&Ic(h.mutation,u,On.empty(),Xe.now()),Tm(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ns(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:l8(s.bundledQuery),readTime:ns(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(){this.overlays=new ut(pe.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=po();return G.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=po(),i=n.length+1,o=new pe(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ut((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=po(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=po(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return G.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vz(n,r));let i=this.qr.get(n);i===void 0&&(i=Ae(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this.Qr=new At(Rt.$r),this.Ur=new At(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new pe(new Qe([])),r=new Rt(n,e),s=new Rt(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new pe(new Qe([])),r=new Rt(n,e),s=new Rt(n,e+1);let i=Ae();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return pe.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||pe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new At(Rt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lz(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Rt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?e0:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),s=new Rt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Ie);return n.forEach(s=>{const i=new Rt(s,0),o=new Rt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;pe.isDocumentKey(i)||(i=i.child(""));const o=new Rt(new pe(i),0);let l=new At(Ie);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(n.mutations,s=>{const i=new Rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Rt(n,0),s=this.Zr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e){this.ri=e,this.docs=function(){return new ut(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let r=Rs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Zt.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Rs();const o=n.path,l=new pe(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Z9(J9(h),r)<=0||(s.has(h.key)||Tm(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ye(9500)}ii(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new E8(this)}getSize(e){return G.resolve(this.size)}}class E8 extends g8{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(e){this.persistence=e,this.si=new Ho(n=>r0(n),s0),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.oi=0,this._i=new u0,this.targetCount=0,this.ai=al.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new al(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n){this.ui={},this.overlays={},this.ci=new wm(0),this.li=!1,this.li=!0,this.hi=new b8,this.referenceDelegate=e(this),this.Pi=new T8(this),this.indexManager=new c8,this.remoteDocumentCache=function(s){return new S8(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new a8(n),this.Ii=new x8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new w8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new _8(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const s=new N8(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class N8 extends tz{constructor(e){super(),this.currentSequenceNumber=e}}class d0{constructor(e){this.persistence=e,this.Ri=new u0,this.Vi=null}static mi(e){return new d0(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{const s=pe.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,xe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ff{constructor(e,n){this.persistence=e,this.pi=new Ho(r=>sz(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=p8(this,n)}static mi(e,n){return new ff(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?G.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,xe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uh(e.data.value)),n}br(e,n,r){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ae(),s=Ae();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new h0(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return b6()?8:nz(nn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new C8;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ea()<=ke.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ta(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(ea()<=ke.DEBUG&&de("QueryEngine","Query:",ta(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ea()<=ke.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ta(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ts(n))):G.resolve())}ys(e,n){if(D_(n))return G.resolve(null);let r=ts(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=uf(n,null,"F"),r=ts(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ae(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,uf(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return D_(n)||s.isEqual(xe.min())?G.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?G.resolve(null):(ea()<=ke.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ta(n)),this.vs(e,o,n,Y9(s,su)).next(l=>l))})}Ds(e,n){let r=new At(OI(e));return n.forEach((s,i)=>{Tm(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ea()<=ke.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ta(n)),this.ps.getDocumentsMatchingQuery(e,n,Di.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="LocalStore",I8=3e8;class A8{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new ut(Ie),this.xs=new Ho(i=>r0(i),s0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v8(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function j8(t,e,n,r){return new A8(t,e,n,r)}async function oA(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Ae();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function R8(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let g=G.resolve();return p.forEach(w=>{g=g.next(()=>h.getEntry(c,w)).next(v=>{const _=u.docVersions.get(w);ze(_!==null,48541),v.version.compareTo(_)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ae();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function aA(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function P8(t,e){const n=we(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Vt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(v,_,b){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=I8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(i,g))});let c=Rs(),u=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(D8(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(xe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return G.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function D8(t,e,n){let r=Ae(),s=Ae();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Rs();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(xe.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):de(f0,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function M8(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=e0),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function O8(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new fi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Zy(t,e,n){const r=we(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Tl(o))throw o;de(f0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function G_(t,e,n){const r=we(t);let s=xe.min(),i=Ae();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=we(c),p=f.xs.get(h);return p!==void 0?G.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,ts(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:xe.min(),n?i:Ae())).next(l=>(L8(r,_z(e),l),{documents:l,Qs:i})))}function L8(t,e,n){let r=t.Os.get(e)||xe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class K_{constructor(){this.activeTargetIds=kz()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V8{constructor(){this.Mo=new K_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new K_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="ConnectivityMonitor";class X_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(Q_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(Q_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dd=null;function ev(){return Dd===null?Dd=function(){return 268435456+Math.round(2147483648*Math.random())}():Dd++,"0x"+Dd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="RestConnection",z8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class U8{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===af?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=ev(),l=this.zo(e,n.toUriEncodedString());de(cg,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=wl(u);return this.Jo(e,l,c,r,h).then(f=>(de(cg,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Vo(cg,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=z8[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class B8 extends U8{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=ev();return new Promise((l,c)=>{const u=new oI;u.setWithCredentials(!0),u.listenOnce(aI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ch.NO_ERROR:const f=u.getResponseJson();de(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case ch.TIMEOUT:de(Kt,`RPC '${e}' ${o} timed out`),c(new le(H.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const p=u.getStatus();if(de(Kt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const v=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(x)>=0?x:H.UNKNOWN}(w.status);c(new le(v,w.message))}else c(new le(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new le(H.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{de(Kt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);de(Kt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=ev(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uI(),l=cI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");de(Kt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,g=!1;const w=new $8({Yo:_=>{g?de(Kt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(de(Kt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),de(Kt,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},Zo:()=>f.close()}),v=(_,b,x)=>{_.listen(b,S=>{try{x(S)}catch(I){setTimeout(()=>{throw I},0)}})};return v(f,cc.EventType.OPEN,()=>{g||(de(Kt,`RPC '${e}' stream ${s} transport opened.`),w.o_())}),v(f,cc.EventType.CLOSE,()=>{g||(g=!0,de(Kt,`RPC '${e}' stream ${s} transport closed`),w.a_(),this.E_(f))}),v(f,cc.EventType.ERROR,_=>{g||(g=!0,Vo(Kt,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),w.a_(new le(H.UNAVAILABLE,"The operation could not be completed")))}),v(f,cc.EventType.MESSAGE,_=>{var b;if(!g){const x=_.data[0];ze(!!x,16349);const S=x,I=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(I){de(Kt,`RPC '${e}' stream ${s} received error:`,I);const D=I.status;let M=function(N){const k=vt[N];if(k!==void 0)return KI(k)}(D),E=I.message;M===void 0&&(M=H.INTERNAL,E="Unknown error status: "+D+" with message "+I.message),g=!0,w.a_(new le(M,E)),f.close()}else de(Kt,`RPC '${e}' stream ${s} received:`,x),w.u_(x)}}),v(l,lI.STAT_EVENT,_=>{_.stat===$y.PROXY?de(Kt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===$y.NOPROXY&&de(Kt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.__()},0),w}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ug(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t){return new Gz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&de("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_="PersistentStream";class cA{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(js(n.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new le(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return de(Y_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(de(Y_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class W8 extends cA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Xz(this.serializer,e),r=function(i){if(!("targetChange"in i))return xe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?ns(o.readTime):xe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Jy(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Gy(c)?{documents:Zz(i,c)}:{query:e8(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=YI(i,o.resumeToken);const u=Qy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(xe.min())>0){l.readTime=hf(i,o.snapshotVersion.toTimestamp());const u=Qy(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=n8(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Jy(this.serializer),n.removeTarget=e,this.q_(n)}}class H8 extends cA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Jz(e.writeResults,e.commitTime),r=ns(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Jy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Yz(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{}class G8 extends q8{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Xy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(H.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Xy(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(H.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class K8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(js(n),this.aa=!1):de("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="RemoteStore";class Q8{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{qo(this)&&(de(Fo,"Restarting streams for network reachability change."),await async function(c){const u=we(c);u.Ea.add(4),await Mu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Am(u)}(this))})}),this.Ra=new K8(r,s)}}async function Am(t){if(qo(t))for(const e of t.da)await e(!0)}async function Mu(t){for(const e of t.da)await e(!1)}function uA(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),y0(n)?g0(n):Cl(n).O_()&&p0(n,e))}function m0(t,e){const n=we(t),r=Cl(n);n.Ia.delete(e),r.O_()&&dA(n,e),n.Ia.size===0&&(r.O_()?r.L_():qo(n)&&n.Ra.set("Unknown"))}function p0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Cl(t).Y_(e)}function dA(t,e){t.Va.Ue(e),Cl(t).Z_(e)}function g0(t){t.Va=new Bz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Cl(t).start(),t.Ra.ua()}function y0(t){return qo(t)&&!Cl(t).x_()&&t.Ia.size>0}function qo(t){return we(t).Ea.size===0}function hA(t){t.Va=void 0}async function X8(t){t.Ra.set("Online")}async function Y8(t){t.Ia.forEach((e,n)=>{p0(t,e)})}async function J8(t,e){hA(t),y0(t)?(t.Ra.ha(e),g0(t)):t.Ra.set("Unknown")}async function Z8(t,e,n){if(t.Ra.set("Online"),e instanceof XI&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){de(Fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mf(t,r)}else if(e instanceof fh?t.Va.Ze(e):e instanceof QI?t.Va.st(e):t.Va.tt(e),!n.isEqual(xe.min()))try{const r=await aA(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Vt.EMPTY_BYTE_STRING,h.snapshotVersion)),dA(i,c);const f=new fi(h.target,c,u,h.sequenceNumber);p0(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){de(Fo,"Failed to raise snapshot:",r),await mf(t,r)}}async function mf(t,e,n){if(!Tl(e))throw e;t.Ea.add(1),await Mu(t),t.Ra.set("Offline"),n||(n=()=>aA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de(Fo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Am(t)})}function fA(t,e){return e().catch(n=>mf(t,n,e))}async function jm(t){const e=we(t),n=Vi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:e0;for(;eU(e);)try{const s=await M8(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,tU(e,s)}catch(s){await mf(e,s)}mA(e)&&pA(e)}function eU(t){return qo(t)&&t.Ta.length<10}function tU(t,e){t.Ta.push(e);const n=Vi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function mA(t){return qo(t)&&!Vi(t).x_()&&t.Ta.length>0}function pA(t){Vi(t).start()}async function nU(t){Vi(t).ra()}async function rU(t){const e=Vi(t);for(const n of t.Ta)e.ea(n.mutations)}async function sU(t,e,n){const r=t.Ta.shift(),s=a0.from(r,e,n);await fA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await jm(t)}async function iU(t,e){e&&Vi(t).X_&&await async function(r,s){if(function(o){return zz(o)&&o!==H.ABORTED}(s.code)){const i=r.Ta.shift();Vi(r).B_(),await fA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await jm(r)}}(t,e),mA(t)&&pA(t)}async function J_(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),de(Fo,"RemoteStore received new credentials");const r=qo(n);n.Ea.add(3),await Mu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Am(n)}async function oU(t,e){const n=we(t);e?(n.Ea.delete(2),await Am(n)):e||(n.Ea.add(2),await Mu(n),n.Ra.set("Unknown"))}function Cl(t){return t.ma||(t.ma=function(n,r,s){const i=we(n);return i.sa(),new W8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:X8.bind(null,t),t_:Y8.bind(null,t),r_:J8.bind(null,t),H_:Z8.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),y0(t)?g0(t):t.Ra.set("Unknown")):(await t.ma.stop(),hA(t))})),t.ma}function Vi(t){return t.fa||(t.fa=function(n,r,s){const i=we(n);return i.sa(),new H8(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:nU.bind(null,t),r_:iU.bind(null,t),ta:rU.bind(null,t),na:sU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await jm(t)):(await t.fa.stop(),t.Ta.length>0&&(de(Fo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new v0(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function x0(t,e){if(js("AsyncQueue",`${e}: ${t}`),Tl(t))return new le(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{static emptySet(e){return new Ia(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||pe.comparator(n.key,r.key):(n,r)=>pe.comparator(n.key,r.key),this.keyedMap=uc(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ia;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(){this.ga=new ut(pe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ll{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ll(e,n,Ia.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Em(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class lU{constructor(){this.queries=eS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=we(n),i=s.queries;s.queries=eS(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new le(H.ABORTED,"Firestore shutting down"))}}function eS(){return new Ho(t=>MI(t),Em)}async function gA(t,e){const n=we(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new aU,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=x0(o,`Initialization of query '${ta(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&w0(n)}async function yA(t,e){const n=we(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cU(t,e){const n=we(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&w0(n)}function uU(t,e,n){const r=we(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function w0(t){t.Ca.forEach(e=>{e.next()})}var tv,tS;(tS=tv||(tv={})).Ma="default",tS.Cache="cache";class vA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ll(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ll.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.key=e}}class wA{constructor(e){this.key=e}}class dU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=OI(e),this.tu=new Ia(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Z_,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=Tm(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;p&&g?p.data.isEqual(g.data)?w!==v&&(r.track({type:3,doc:g}),_=!0):this.su(p,g)||(r.track({type:2,doc:g}),_=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),_=!0):p&&!g&&(r.track({type:1,doc:p}),_=!0,(c||u)&&(l=!0)),_&&(g?(o=o.add(g),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,w){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:_})}};return v(g)-v(w)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new ll(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Z_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new wA(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new xA(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ll.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const b0="SyncEngine";class hU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fU{constructor(e){this.key=e,this.hu=!1}}class mU{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ho(l=>MI(l),Em),this.Iu=new Map,this.Eu=new Set,this.du=new ut(pe.comparator),this.Au=new Map,this.Ru=new u0,this.Vu={},this.mu=new Map,this.fu=al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pU(t,e,n=!0){const r=NA(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await bA(r,e,n,!0),s}async function gU(t,e){const n=NA(t);await bA(n,e,!0,!1)}async function bA(t,e,n,r){const s=await O8(t.localStore,ts(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await yU(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&uA(t.remoteStore,s),l}async function yU(t,e,n,r,s){t.pu=(f,p,g)=>async function(v,_,b,x){let S=_.view.ru(b);S.Cs&&(S=await G_(v.localStore,_.query,!1).then(({documents:E})=>_.view.ru(E,S)));const I=x&&x.targetChanges.get(_.targetId),D=x&&x.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(S,v.isPrimaryClient,I,D);return rS(v,_.targetId,M.au),M.snapshot}(t,f,p,g);const i=await G_(t.localStore,e,!0),o=new dU(e,i.Qs),l=o.ru(i.documents),c=Du.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);rS(t,n,u.au);const h=new hU(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function vU(t,e,n){const r=we(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Em(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&m0(r.remoteStore,s.targetId),nv(r,s.targetId)}).catch(El)):(nv(r,s.targetId),await Zy(r.localStore,s.targetId,!0))}async function xU(t,e){const n=we(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),m0(n.remoteStore,r.targetId))}async function wU(t,e,n){const r=CU(t);try{const s=await function(o,l){const c=we(o),u=Xe.now(),h=l.reduce((g,w)=>g.add(w.key),Ae());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let w=Rs(),v=Ae();return c.Ns.getEntries(g,h).next(_=>{w=_,w.forEach((b,x)=>{x.isValidDocument()||(v=v.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,w)).next(_=>{f=_;const b=[];for(const x of l){const S=Mz(x,f.get(x.key).overlayedDocument);S!=null&&b.push(new qi(x.key,S,CI(S.value.mapValue),tr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,b,l)}).next(_=>{p=_;const b=_.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(g,_.batchId,b)})}).then(()=>({batchId:p.batchId,changes:VI(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new ut(Ie)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await Ou(r,s.changes),await jm(r.remoteStore)}catch(s){const i=x0(s,"Failed to persist write");n.reject(i)}}async function _A(t,e){const n=we(t);try{const r=await P8(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ze(o.hu,14607):s.removedDocuments.size>0&&(ze(o.hu,42227),o.hu=!1))}),await Ou(n,r,e)}catch(r){await El(r)}}function nS(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=we(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&w0(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bU(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ut(pe.comparator);o=o.insert(i,Zt.newNoDocument(i,xe.min()));const l=Ae().add(i),c=new km(xe.min(),new Map,new ut(Ie),o,l);await _A(r,c),r.du=r.du.remove(i),r.Au.delete(e),_0(r)}else await Zy(r.localStore,e,!1).then(()=>nv(r,e,n)).catch(El)}async function _U(t,e){const n=we(t),r=e.batch.batchId;try{const s=await R8(n.localStore,e);EA(n,r,null),SA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ou(n,s)}catch(s){await El(s)}}async function SU(t,e,n){const r=we(t);try{const s=await function(o,l){const c=we(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ze(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);EA(r,e,n),SA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ou(r,s)}catch(s){await El(s)}}function SA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function EA(t,e,n){const r=we(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function nv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||TA(t,r)})}function TA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(m0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),_0(t))}function rS(t,e,n){for(const r of n)r instanceof xA?(t.Ru.addReference(r.key,e),EU(t,r)):r instanceof wA?(de(b0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||TA(t,r.key)):ye(19791,{wu:r})}function EU(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(de(b0,"New document in limbo: "+n),t.Eu.add(r),_0(t))}function _0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new pe(Qe.fromString(e)),r=t.fu.next();t.Au.set(r,new fU(n)),t.du=t.du.insert(n,r),uA(t.remoteStore,new fi(ts(Sm(n.path)),r,"TargetPurposeLimboResolution",wm.ce))}}async function Ou(t,e,n){const r=we(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=h0.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=we(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(u,p=>G.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>G.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Tl(f))throw f;de(f0,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),w=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(w);h.Ms=h.Ms.insert(p,v)}}}(r.localStore,i))}async function TU(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){de(b0,"User change. New user:",e.toKey());const r=await oA(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new le(H.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ou(n,r.Ls)}}function NU(t,e){const n=we(t),r=n.Au.get(e);if(r&&r.hu)return Ae().add(r.key);{let s=Ae();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function NA(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=_A.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bU.bind(null,e),e.Pu.H_=cU.bind(null,e.eventManager),e.Pu.yu=uU.bind(null,e.eventManager),e}function CU(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_U.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SU.bind(null,e),e}class pf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Im(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return j8(this.persistence,new k8,e.initialUser,this.serializer)}Cu(e){return new iA(d0.mi,this.serializer)}Du(e){return new V8}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pf.provider={build:()=>new pf};class kU extends pf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ze(this.persistence.referenceDelegate instanceof ff,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new f8(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new iA(r=>ff.mi(r,n),this.serializer)}}class rv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>nS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TU.bind(null,this.syncEngine),await oU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new lU}()}createDatastore(e){const n=Im(e.databaseInfo.databaseId),r=function(i){return new B8(i)}(e.databaseInfo);return function(i,o,l,c){return new G8(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Q8(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>nS(this.syncEngine,n,0),function(){return X_.v()?new X_:new F8}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new mU(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=we(s);de(Fo,"RemoteStore shutting down."),i.Ea.add(5),await Mu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}rv.provider={build:()=>new rv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):js("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi="FirestoreClient";class IU{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Xt.UNAUTHENTICATED,this.clientId=vm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{de(Fi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(de(Fi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=x0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dg(t,e){t.asyncQueue.verifyOperationInProgress(),de(Fi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await oA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function sS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AU(t);de(Fi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>J_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>J_(e.remoteStore,s)),t._onlineComponents=e}async function AU(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(Fi,"Using user provided OfflineComponentProvider");try{await dg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Vo("Error using user provided cache. Falling back to memory cache: "+n),await dg(t,new pf)}}else de(Fi,"Using default OfflineComponentProvider"),await dg(t,new kU(void 0));return t._offlineComponents}async function kA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(Fi,"Using user provided OnlineComponentProvider"),await sS(t,t._uninitializedComponentsProvider._online)):(de(Fi,"Using default OnlineComponentProvider"),await sS(t,new rv))),t._onlineComponents}function jU(t){return kA(t).then(e=>e.syncEngine)}async function sv(t){const e=await kA(t),n=e.eventManager;return n.onListen=pU.bind(null,e.syncEngine),n.onUnlisten=vU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xU.bind(null,e.syncEngine),n}function RU(t,e,n={}){const r=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new CA({next:p=>{h.Nu(),o.enqueueAndForget(()=>yA(i,f));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new le(H.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new le(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new vA(Sm(l.path),h,{includeMetadataChanges:!0,qa:!0});return gA(i,f)}(await sv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firestore.googleapis.com",oS=!0;class aS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AA,this.ssl=oS}else this.host=e.host,this.ssl=e.ssl??oS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<d8)throw new le(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}pI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=IA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rm{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fI;switch(r.type){case"firstParty":return new W9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=iS.get(n);r&&(de("ComponentProvider","Removing Datastore"),iS.delete(n),r.terminate())}(this),Promise.resolve()}}function jA(t,e,n,r={}){var u;t=Fn(t,Rm);const s=wl(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(bk(`https://${l}`),_k("Firestore",!0)),i.host!==AA&&i.host!==l&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Pi(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Xt.MOCK_USER;else{h=h6(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new le(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Xt(p)}t._authCredentials=new U9(new hI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ru(n,at._jsonSchema))return new at(e,r||null,new pe(Qe.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:bt("string",at._jsonSchemaVersion),referencePath:bt("string")};class bs extends Ls{constructor(e,n,r){super(e,n,Sm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new pe(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function kl(t,e,...n){if(t=Lt(t),mI("collection","path",e),t instanceof Rm){const r=Qe.fromString(e,...n);return w_(r),new bs(t,null,r)}{if(!(t instanceof at||t instanceof bs))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return w_(r),new bs(t.firestore,null,r)}}function $e(t,e,...n){if(t=Lt(t),arguments.length===1&&(e=vm.newId()),mI("doc","path",e),t instanceof Rm){const r=Qe.fromString(e,...n);return x_(r),new at(t,null,new pe(r))}{if(!(t instanceof at||t instanceof bs))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qe.fromString(e,...n));return x_(r),new at(t.firestore,t instanceof bs?t.converter:null,new pe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="AsyncQueue";class cS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lA(this,"async_queue_retry"),this._c=()=>{const r=ug();r&&de(lS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ug();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ug();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Ni;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Tl(e))throw e;de(lS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,js("INTERNAL UNHANDLED ERROR: ",uS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=v0.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ye(47125,{Pc:uS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function uS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ps extends Rm{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new cS,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cS(e),this._firestoreClient=void 0,await e}}}function RA(t,e){const n=typeof t=="object"?t:Nk(),r=typeof t=="string"?t:af,s=$x(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=u6("firestore");i&&jA(s,...i)}return s}function Pm(t){if(t._terminated)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PU(t),t._firestoreClient}function PU(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new az(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,IA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new IU(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dn(Vt.fromBase64String(e))}catch(n){throw new le(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Dn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ru(e,Dn._jsonSchema))return Dn.fromBase64String(e.bytes)}}Dn._jsonSchemaVersion="firestore/bytes/1.0",Dn._jsonSchema={type:bt("string",Dn._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Sr._jsonSchemaVersion}}static fromJSON(e){if(Ru(e,Sr._jsonSchema))return new Sr(e.latitude,e.longitude)}}Sr._jsonSchemaVersion="firestore/geoPoint/1.0",Sr._jsonSchema={type:bt("string",Sr._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ru(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Er(e.vectorValues);throw new le(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:bt("string",Er._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=/^__.*__$/;class MU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pu(e,this.data,n,this.fieldTransforms)}}class PA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:t})}}class Dm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return gf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(DA(this.Ac)&&DU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class OU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Im(e)}Cc(e,n,r,s=!1){return new Dm({Ac:e,methodName:n,Dc:r,path:Mt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mm(t){const e=t._freezeSettings(),n=Im(t._databaseId);return new OU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function MA(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);T0("Data must be an object, but it was:",o,r);const l=OA(r,o);let c,u;if(i.merge)c=new On(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const p=iv(e,f,n);if(!o.contains(p))throw new le(H.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);VA(h,p)||h.push(p)}c=new On(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new MU(new vn(l),c,u)}class Om extends Il{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Om}}function LU(t,e,n){return new Dm({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class S0 extends Il{_toFieldTransform(e){return new HI(e.path,new lu)}isEqual(e){return e instanceof S0}}class E0 extends Il{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=LU(this,e,!0),r=this.vc.map(i=>Al(i,n)),s=new ol(r);return new HI(e.path,s)}isEqual(e){return e instanceof E0&&Pi(this.vc,e.vc)}}function VU(t,e,n,r){const s=t.Cc(1,e,n);T0("Data must be an object, but it was:",s,r);const i=[],o=vn.empty();Hi(r,(c,u)=>{const h=N0(e,c,n);u=Lt(u);const f=s.yc(h);if(u instanceof Om)i.push(h);else{const p=Al(u,f);p!=null&&(i.push(h),o.set(h,p))}});const l=new On(i);return new PA(o,l,s.fieldTransforms)}function FU(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[iv(e,r,n)],c=[s];if(i.length%2!=0)throw new le(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(iv(e,i[p])),c.push(i[p+1]);const u=[],h=vn.empty();for(let p=l.length-1;p>=0;--p)if(!VA(u,l[p])){const g=l[p];let w=c[p];w=Lt(w);const v=o.yc(g);if(w instanceof Om)u.push(g);else{const _=Al(w,v);_!=null&&(u.push(g),h.set(g,_))}}const f=new On(u);return new PA(h,f,o.fieldTransforms)}function zU(t,e,n,r=!1){return Al(n,t.Cc(r?4:3,e))}function Al(t,e){if(LA(t=Lt(t)))return T0("Unsupported field value:",e,t),OA(t,e);if(t instanceof Il)return function(r,s){if(!DA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Al(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Iz(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Xe.fromDate(r);return{timestampValue:hf(s.serializer,i)}}if(r instanceof Xe){const i=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hf(s.serializer,i)}}if(r instanceof Sr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dn)return{bytesValue:YI(s.serializer,r._byteString)};if(r instanceof at){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:c0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Er)return function(o,l){return{mapValue:{fields:{[EI]:{stringValue:NI},[lf]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return i0(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${xm(r)}`)}(t,e)}function OA(t,e){const n={};return vI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hi(t,(r,s)=>{const i=Al(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function LA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Sr||t instanceof Dn||t instanceof at||t instanceof Il||t instanceof Er)}function T0(t,e,n){if(!LA(n)||!gI(n)){const r=xm(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function iv(t,e,n){if((e=Lt(e))instanceof Lu)return e._internalPath;if(typeof e=="string")return N0(t,e);throw gf("Field path arguments must be of type string or ",t,!1,void 0,n)}const UU=new RegExp("[~\\*/\\[\\]]");function N0(t,e,n){if(e.search(UU)>=0)throw gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lu(...e.split("."))._internalPath}catch{throw gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new le(H.INVALID_ARGUMENT,l+t+c)}function VA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $U(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(C0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $U extends FA{data(){return super.data()}}function C0(t,e){return typeof e=="string"?N0(t,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k0{}class Lm extends k0{}function Vm(t,e,...n){let r=[];e instanceof k0&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof zm).length,l=i.filter(c=>c instanceof Fm).length;if(o>1||o>0&&l>0)throw new le(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Fm extends Lm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fm(e,n,r)}_apply(e){const n=this._parse(e);return zA(e._query,n),new Ls(e.firestore,e.converter,Ky(e._query,n))}_parse(e){const n=Mm(e.firestore);return function(i,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){fS(f,h);const w=[];for(const v of f)w.push(hS(c,i,v));p={arrayValue:{values:w}}}else p=hS(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||fS(f,h),p=zU(l,o,f,h==="in"||h==="not-in");return wt.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class zm extends k0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)zA(o,c),o=Ky(o,c)}(e._query,n),new Ls(e.firestore,e.converter,Ky(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Um extends Lm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Um(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new au(i,o)}(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Nl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function $m(t,e="asc"){const n=e,r=C0("orderBy",t);return Um._create(r,n)}class Bm extends Lm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bm(e,n,r)}_apply(e){return new Ls(e.firestore,e.converter,uf(e._query,this._limit,this._limitType))}}function I0(t){return X9("limit",t),Bm._create("limit",t,"F")}function hS(t,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new le(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DI(e)&&n.indexOf("/")!==-1)throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Qe.fromString(n));if(!pe.isDocumentKey(r))throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return k_(t,new pe(r))}if(n instanceof at)return k_(t,n._key);throw new le(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xm(n)}.`)}function fS(t,e){if(!Array.isArray(t)||t.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zA(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UA{convertValue(e,n="none"){switch(Li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Hi(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[lf].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>gt(o.doubleValue));return new Er(n)}convertGeoPoint(e){return new Sr(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=_m(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(iu(e));default:return null}}convertTimestamp(e){const n=Mi(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Qe.fromString(e);ze(rA(r),9688,{name:e});const s=new rl(r.get(1),r.get(3)),i=new pe(r.popFirst(5));return s.isEqual(n)||js(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ya{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ci extends FA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(C0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ci._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ci._jsonSchema={type:bt("string",Ci._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Ac extends Ci{data(e={}){return super.data(e)}}class To{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ya(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ac(this._firestore,this._userDataWriter,r.key,r,new ya(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Ac(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ya(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Ac(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ya(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:WU(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=To._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function WU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){t=Fn(t,at);const e=Fn(t.firestore,Ps);return RU(Pm(e),t._key).then(n=>qA(e,t,n))}To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:bt("string",To._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class BA extends UA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function en(t,e,n){t=Fn(t,at);const r=Fn(t.firestore,Ps),s=$A(t.converter,e,n);return Vu(r,[MA(Mm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,tr.none())])}function WA(t,e,n,...r){t=Fn(t,at);const s=Fn(t.firestore,Ps),i=Mm(s);let o;return o=typeof(e=Lt(e))=="string"||e instanceof Lu?FU(i,"updateDoc",t._key,e,n,r):VU(i,"updateDoc",t._key,e),Vu(s,[o.toMutation(t._key,tr.exists(!0))])}function HA(t){return Vu(Fn(t.firestore,Ps),[new o0(t._key,tr.none())])}function A0(t,e){const n=Fn(t.firestore,Ps),r=$e(t),s=$A(t.converter,e);return Vu(n,[MA(Mm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,tr.exists(!1))]).then(()=>r)}function as(t,...e){var c,u,h;t=Lt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||dS(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(dS(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,l;if(t instanceof at)o=Fn(t.firestore,Ps),l=Sm(t._key.path),i={next:f=>{e[r]&&e[r](qA(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Fn(t,Ls);o=Fn(f.firestore,Ps),l=f._query;const p=new BA(o);i={next:g=>{e[r]&&e[r](new To(o,p,f,g))},error:e[r+1],complete:e[r+2]},BU(t._query)}return function(p,g,w,v){const _=new CA(v),b=new vA(g,_,w);return p.asyncQueue.enqueueAndForget(async()=>gA(await sv(p),b)),()=>{_.Nu(),p.asyncQueue.enqueueAndForget(async()=>yA(await sv(p),b))}}(Pm(o),l,s,i)}function Vu(t,e){return function(r,s){const i=new Ni;return r.asyncQueue.enqueueAndForget(async()=>wU(await jU(r),s,i)),i.promise}(Pm(t),e)}function qA(t,e,n){const r=n.docs.get(e._key),s=new BA(t);return new Ci(t,s,e._key,r,new ya(n.hasPendingWrites,n.fromCache),e.converter)}function j0(){return new S0("serverTimestamp")}function GA(...t){return new E0("arrayUnion",t)}(function(e,n=!0){(function(s){Sl=s})(bl),el(new Mo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Ps(new $9(r.getProvider("auth-internal")),new H9(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new le(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rl(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ei(p_,g_,e),Ei(p_,g_,"esm2020")})();const mS=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:UA,Bytes:Dn,CollectionReference:bs,DocumentReference:at,DocumentSnapshot:Ci,FieldPath:Lu,FieldValue:Il,Firestore:Ps,FirestoreError:le,GeoPoint:Sr,Query:Ls,QueryCompositeFilterConstraint:zm,QueryConstraint:Lm,QueryDocumentSnapshot:Ac,QueryFieldFilterConstraint:Fm,QueryLimitConstraint:Bm,QueryOrderByConstraint:Um,QuerySnapshot:To,SnapshotMetadata:ya,Timestamp:Xe,VectorValue:Er,_AutoId:vm,_ByteString:Vt,_DatabaseId:rl,_DocumentKey:pe,_EmptyAuthCredentialsProvider:fI,_FieldPath:Mt,_cast:Fn,_logWarn:Vo,_validateIsNotUsedTogether:pI,addDoc:A0,arrayUnion:GA,collection:kl,connectFirestoreEmulator:jA,deleteDoc:HA,doc:$e,ensureFirestoreConfigured:Pm,executeWrite:Vu,getDoc:Ds,getFirestore:RA,limit:I0,onSnapshot:as,orderBy:$m,query:Vm,serverTimestamp:j0,setDoc:en,updateDoc:WA},Symbol.toStringTag,{value:"Module"})),HU={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},R0=Tk(HU),co=L9(R0),Me=RA(R0),Ar=new Yt;Ar.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Ar.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Ar.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Ar.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Ar.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly");Ar.addScope("https://www.googleapis.com/auth/calendar");Ar.addScope("https://www.googleapis.com/auth/gmail.send");Ar.addScope("https://www.googleapis.com/auth/spreadsheets.readonly");const pS=Object.freeze(Object.defineProperty({__proto__:null,app:R0,auth:co,db:Me,googleProvider:Ar},Symbol.toStringTag,{value:"Module"})),KA=m.createContext(void 0);function qU({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(!0),[i,o]=m.useState(()=>localStorage.getItem("google_access_token")),[l,c]=m.useState(null),[u,h]=m.useState(()=>localStorage.getItem("user_role"));m.useEffect(()=>NF(co,x=>{n(x),x||(h(null),s(!1),o(null),localStorage.removeItem("google_access_token"))}),[]),m.useEffect(()=>{async function b(){if(!e||!i){if(e&&!i){const x=localStorage.getItem("google_access_token");if(x){o(x);return}}e||s(!1);return}try{s(!0);const x=await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let S=!1;if(x.ok){const M=await x.json();M.courses&&M.courses.length>0&&(S=!0)}if(S){h("teacher"),localStorage.setItem("user_role","teacher"),s(!1);return}const I=await fetch("https://classroom.googleapis.com/v1/courses?studentId=me&pageSize=1",{headers:{Authorization:`Bearer ${i}`}});let D=!1;if(I.ok){const M=await I.json();M.courses&&M.courses.length>0&&(D=!0)}D?(h("student"),localStorage.setItem("user_role","student")):(h("no_access"),localStorage.setItem("user_role","no_access"))}catch(x){console.error("Role detection failed:",x),h("no_access")}finally{s(!1)}}b()},[e,i]);const f=async()=>{try{c(null),Ar.setCustomParameters({prompt:"consent",access_type:"offline"});const b=await Id(co,Ar),x=Yt.credentialFromResult(b);x!=null&&x.accessToken&&(o(x.accessToken),localStorage.setItem("google_access_token",x.accessToken))}catch(b){const x=b instanceof Error?b.message:"Failed to sign in";c(x),console.error("Sign in error:",b)}},p=async()=>{try{c(null);const b=new Yt;b.addScope("https://www.googleapis.com/auth/gmail.send"),b.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),b.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await Id(co,b),S=Yt.credentialFromResult(x),I=x._tokenResponse;if(S!=null&&S.accessToken&&(o(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),I!=null&&I.oauthRefreshToken){const{doc:D,setDoc:M,serverTimestamp:E}=await ga(async()=>{const{doc:N,setDoc:k,serverTimestamp:A}=await Promise.resolve().then(()=>mS);return{doc:N,setDoc:k,serverTimestamp:A}},void 0),{db:C}=await ga(async()=>{const{db:N}=await Promise.resolve().then(()=>pS);return{db:N}},void 0);if(e&&I.oauthRefreshToken)return await M(D(C,"users",e.uid,"private_tokens","google"),{refreshToken:I.oauthRefreshToken,updatedAt:E()}),!0}return!!(S!=null&&S.accessToken)}catch(b){const x=b instanceof Error?b.message:"Failed to get Gmail permissions";return c(x),console.error("Permission error:",b),!1}},g=async()=>{try{c(null);const b=new Yt;b.addScope("https://www.googleapis.com/auth/calendar.events"),b.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await Id(co,b),S=Yt.credentialFromResult(x),I=x._tokenResponse;if(S!=null&&S.accessToken&&(o(S.accessToken),localStorage.setItem("google_access_token",S.accessToken)),e&&(I!=null&&I.oauthRefreshToken)){const{doc:D,setDoc:M,serverTimestamp:E}=await ga(async()=>{const{doc:N,setDoc:k,serverTimestamp:A}=await Promise.resolve().then(()=>mS);return{doc:N,setDoc:k,serverTimestamp:A}},void 0),{db:C}=await ga(async()=>{const{db:N}=await Promise.resolve().then(()=>pS);return{db:N}},void 0);return await M(D(C,"users",e.uid,"private_tokens","calendar"),{refreshToken:I.oauthRefreshToken,updatedAt:E(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(b){const x=b instanceof Error?b.message:"Failed to get Calendar permissions";return c(x),console.error("Permission error:",b),!1}},w=async()=>{if(!e)return!1;try{const b=new Yt;b.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.coursework.me"),b.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.announcements.readonly"),b.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly"),b.setCustomParameters({prompt:"select_account",login_hint:e.email||""});const x=await Id(co,b),S=Yt.credentialFromResult(x);return S!=null&&S.accessToken?(o(S.accessToken),localStorage.setItem("google_access_token",S.accessToken),console.log("Access token refreshed successfully"),!0):!1}catch(b){return console.error("Failed to refresh access token:",b),!1}},v=async()=>w(),_=async()=>{try{await CF(co),o(null),h(null),localStorage.removeItem("google_access_token"),localStorage.removeItem("user_role")}catch(b){const x=b instanceof Error?b.message:"Failed to sign out";c(x)}};return a.jsx(KA.Provider,{value:{user:e,loading:r,role:u,accessToken:i,signInWithGoogle:f,requestGmailPermissions:p,requestCalendarPermissions:g,refreshAccessToken:v,signOut:_,error:l},children:t})}function rt(){const t=m.useContext(KA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const QA=m.createContext(void 0);function GU({children:t}){const[e,n]=m.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});m.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return a.jsx(QA.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function P0(){const t=m.useContext(QA);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}class KU{static calculateXP(e){let n=0;const r=[];for(const s of e)if(s.systemStatus==="submitted"||s.systemStatus==="graded"){if(n+=100,s.submittedAt&&s.dueDate){const o=new Date(s.submittedAt).getTime();(new Date(s.dueDate).getTime()-o)/(1e3*60*60)>48&&(n+=50)}r.push(s.id)}return{totalXP:n,processedIds:r}}static calculateBadges(e,n){const r=new Set(n);return e>=10&&r.add("10-submissions"),e>=25&&r.add("25-submissions"),e>=50&&r.add("50-submissions"),Array.from(r)}static async syncUserLeaderboard(e,n,r,s,i,o){var l;try{const{totalXP:c,processedIds:u}=this.calculateXP(i),h=n.includes("@")?n.split("@")[1]:"",f=o.map(b=>b.id),p=$e(Me,"leaderboards","all-courses","students",e),g=await Ds(p),w=g.exists()?g.data().badges||[]:[],v=this.calculateBadges(u.length,w);await en(p,{displayName:r||"Anonymous",photoUrl:s||"",email:n,emailDomain:h,enrolledCourseIds:f,totalXP:c,processedAssignmentIds:u,lastSyncedAt:j0(),badges:v},{merge:!0});const _=v.filter(b=>!w.includes(b));if(_.length>0){const{BADGES:b}=await ga(async()=>{const{BADGES:x}=await Promise.resolve().then(()=>IR);return{BADGES:x}},void 0);for(const x of _)await A0(kl(Me,"activities"),{userId:e,userName:r||"Anonymous",userAvatar:s||null,type:"badge_earned",content:`${r||"Anonymous"} earned the '${((l=b[x])==null?void 0:l.label)||"New Badge"}' badge!`,courseId:"all-courses",createdAt:new Date().toISOString()})}}catch(c){throw console.error(" Failed to sync leaderboard:",c),c}}static async resetLeaderboardForSemester(e){try{const n=$e(Me,"leaderboards","all-courses","students",e);await HA(n),console.log(` Leaderboard reset for user ${e}`)}catch(n){throw console.error(" Failed to reset leaderboard:",n),n}}static async hasCoursesChanged(e,n){try{const r=$e(Me,"leaderboards","all-courses","students",e),s=await Ds(r);if(!s.exists())return!1;const i=s.data().enrolledCourseIds||[],o=new Set(n),l=new Set(i);if(o.size!==l.size)return console.log("   Course count changed - semester change detected"),!0;for(const c of n)if(!l.has(c))return console.log(`   New course detected: ${c} - semester change detected`),!0;for(const c of i)if(!o.has(c))return console.log(`   Course removed: ${c} - semester change detected`),!0;return!1}catch(r){return console.error(" Failed to check course changes:",r),!1}}static async autoSyncOnLogin(e,n,r,s,i,o){try{const l=o.map(u=>u.id);await this.hasCoursesChanged(e,l)&&(console.log(" Semester change detected, resetting leaderboard..."),await this.resetLeaderboardForSemester(e)),await this.syncUserLeaderboard(e,n,r,s,i,o)}catch(l){throw console.error(" Auto-sync failed:",l),l}}}const Xn={get:t=>{try{const e=localStorage.getItem(`trace_cache_${t}`);if(!e)return null;const n=JSON.parse(e);return Date.now()>n.expiresAt?(localStorage.removeItem(`trace_cache_${t}`),null):n.data}catch(e){return console.warn("Cache parse error",e),null}},set:(t,e,n)=>{try{const r={data:e,timestamp:Date.now(),expiresAt:Date.now()+n*1e3};localStorage.setItem(`trace_cache_${t}`,JSON.stringify(r))}catch(r){console.warn("Cache write error (quota?)",r)}},remove:t=>{localStorage.removeItem(`trace_cache_${t}`)},clearAll:()=>{Object.keys(localStorage).forEach(t=>{t.startsWith("trace_cache_")&&localStorage.removeItem(t)})}},gS={async fetchCourses(t,e){const n=Xn.get(`courses_${e}`);if(n)return n;const r="https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE&fields=courses(id,name,section,descriptionHeading,room,ownerId,enrollmentCode,courseState,alternateLink)";let s=[],i="";try{do{const l=`${r}${i?`&pageToken=${i}`:""}`,c=await fetch(l,{headers:{Authorization:`Bearer ${t}`}});if(!c.ok)throw new Error("Failed to fetch courses");const u=await c.json();u.courses&&(s=s.concat(u.courses)),i=u.nextPageToken}while(i)}catch(l){return console.warn("Fetch courses error",l),[]}const o=s.map(l=>({id:l.id,userId:e,classroomId:l.id,name:l.name,section:l.section||null,descriptionHeading:l.descriptionHeading||null,room:l.room||null,ownerId:l.ownerId||null,enrollmentCode:l.enrollmentCode||null,courseState:l.courseState||"ACTIVE",alternateLink:l.alternateLink||null,lastSyncedAt:new Date().toISOString(),color:QU(l.id)}));return Xn.set(`courses_${e}`,o,60*60*24),o},async fetchAssignmentsParallel(t,e){const n=[];return(await Promise.allSettled(e.map(async s=>{const i=`assignments_${s.id}`,o=Xn.get(i);if(o)return o;const l=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork?courseWorkStates=PUBLISHED&fields=courseWork(id,title,description,dueDate,dueTime,maxPoints,alternateLink,workType,creationTime,updateTime)`,c=`https://classroom.googleapis.com/v1/courses/${s.id}/courseWork/-/studentSubmissions?userId=me&fields=studentSubmissions(id,courseWorkId,state,assignedGrade,turnInTime,updateTime,late)`,[u,h]=await Promise.all([fetch(l,{headers:{Authorization:`Bearer ${t}`}}).then(w=>w.ok?w.json():{courseWork:[]}),fetch(c,{headers:{Authorization:`Bearer ${t}`}}).then(w=>w.ok?w.json():{studentSubmissions:[]})]),f=u.courseWork||[],p=h.studentSubmissions||[],g=f.filter(w=>!w.workType||w.workType==="ASSIGNMENT"||w.workType==="MULTIPLE_CHOICE_QUESTION").map(w=>{const v=p.find(_=>_.courseWorkId===w.id);return XU(w,s,v)});return Xn.set(i,g,3600),g}))).forEach(s=>{s.status==="fulfilled"&&n.push(...s.value)}),n}},yS=["#FFADAD","#FFD6A5","#FDFFB6","#CAFFBF","#9BF6FF","#A0C4FF","#BDB2FF","#FFC6FF","#E0F7FA","#F3E5F5","#E8F5E9","#FFF3E0"];function QU(t){let e=0;for(let r=0;r<t.length;r++)e=t.charCodeAt(r)+((e<<5)-e);const n=Math.abs(e)%yS.length;return yS[n]}function XU(t,e,n){var f,p;let r=null,s=null;t.dueDate&&(r=new Date(t.dueDate.year,t.dueDate.month-1,t.dueDate.day,((f=t.dueTime)==null?void 0:f.hours)||23,((p=t.dueTime)==null?void 0:p.minutes)||59).toISOString(),t.dueTime&&(s=`${String(t.dueTime.hours).padStart(2,"0")}:${String(t.dueTime.minutes).padStart(2,"0")}`));const i=new Date;let o="backlog",l="backlog",c=null,u=null,h=null;return n&&(n.state==="TURNED_IN"?(o="submitted",l="submitted",u=n.turnInTime||n.updateTime):n.state==="RETURNED"&&(o="graded",l="graded",c=n.assignedGrade)),r&&new Date(r)<i&&l==="backlog"&&(l="overdue",o="overdue"),{id:`assign-${t.id}`,uniqueId:`${e.id}-${t.id}`,userId:e.userId,courseId:e.id,courseName:e.name,classroomId:t.id,title:t.title,description:t.description||null,dueDate:r,dueTime:s,maxPoints:t.maxPoints||null,systemStatus:l,userStatus:o,submissionId:(n==null?void 0:n.id)||null,submittedAt:u?new Date(u).toISOString():null,gradedAt:h?new Date(h).toISOString():null,grade:c||null,alternateLink:t.alternateLink||null,createdAt:t.creationTime||i.toISOString(),lastSyncedAt:i.toISOString()}}async function YU(t,e,n,r){const s=$e(Me,"users",n,"settings","calendar"),i=await Ds(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let l=!1;for(const c of t){if(!c.dueDate)continue;const u=new Date(c.dueDate),h=u.toISOString().split("T")[0],f={summary:`[Trace] ${c.title}`,description:`Course: ${c.courseName}
${c.description||""}

Synced via Trace`,start:{date:h},end:{date:h}},p=new Date(u);p.setDate(p.getDate()+1),f.end.date=p.toISOString().split("T")[0];const g=$e(Me,"users",n,"calendarEvents",c.id),w=await Ds(g),v="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let _;if(w.exists()){const{calendarEventId:b}=w.data();_=await fetch(`${v}/${b}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(_=await fetch(v,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),_.ok){const b=await _.json();await en(g,{calendarEventId:b.id,assignmentId:c.id,updatedAt:j0()})}if(!_.ok&&_.status===403&&!l){l=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(_){console.warn(`Failed to sync assignment ${c.id} to calendar`,_)}}}const XA=m.createContext(void 0);function JU(){return Math.random().toString(36).substring(2,15)}async function vS(t,e,n,r){var o;const s=[];let i;do{const l=e.includes("?")?"&":"?",c=i?`${e}${l}pageToken=${i}`:e,u=await fetch(c,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let p=u.statusText,g={};try{const w=await u.json();g=w,p=((o=w.error)==null?void 0:o.message)||w.message||p,console.error("API Error Response:",w)}catch{const v=await u.text().catch(()=>"");console.error("API Error (non-JSON):",v)}throw new Error(`${p} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}async function ZU(t,e,n,r,s){const i=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`,o=`https://classroom.googleapis.com/v1/courses/${e}/announcements?announcementStates=PUBLISHED`;try{const[l,c]=await Promise.all([vS(t,i,p=>p.courseWorkMaterial||[],p=>p.nextPageToken).catch(p=>(console.warn(`Failed to fetch courseWorkMaterials for ${e}:`,p),[])),vS(t,o,p=>p.announcements||[],p=>p.nextPageToken).catch(p=>{var g,w;return((g=p.message)!=null&&g.includes("insufficient authentication scopes")||(w=p.message)!=null&&w.includes("403"))&&(s==null||s()),console.warn(`Failed to fetch announcements for ${e}:`,p),[]})]),u=new Date().toISOString(),h=l.map(p=>({id:`mat-${p.id}`,uniqueId:`${e}-${p.id}`,userId:r,courseId:e,courseName:n,title:p.title,description:p.description||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u})),f=c.filter(p=>p.materials&&p.materials.length>0).map(p=>{const g=p.text||"Announcement Material",w=g.split(`
`)[0].length>60?g.split(`
`)[0].substring(0,57)+"...":g.split(`
`)[0];return{id:`ann-${p.id}`,uniqueId:`${e}-ann-${p.id}`,userId:r,courseId:e,courseName:n,title:w,description:p.text||null,alternateLink:p.alternateLink||null,materials:p.materials||null,createdAt:p.updateTime||u,lastSyncedAt:u}});return[...h,...f]}catch(l){return console.warn(`Failed to fetch materials for course ${e}:`,l),[]}}function e7({children:t}){const{user:e,accessToken:n,refreshAccessToken:r,loading:s}=rt(),{toast:i}=Wo(),[o,l]=m.useState(()=>{if(!e)return[];const U=Xn.get(`courses_${e.uid}`);if(U)return U;const W=localStorage.getItem("classroom_courses");return W?JSON.parse(W):[]}),[c,u]=m.useState(()=>{if(!e)return[];const U=localStorage.getItem("classroom_assignments");return U?JSON.parse(U):[]}),[h,f]=m.useState(()=>{const U=localStorage.getItem("classroom_materials");return U?JSON.parse(U):[]}),[p,g]=m.useState(()=>{const U=localStorage.getItem("classroom_notes");return U?new Map(JSON.parse(U)):new Map}),[w,v]=m.useState(()=>e&&Xn.get(`courses_${e.uid}`)?!1:!localStorage.getItem("classroom_courses")),[_,b]=m.useState(!1),[x,S]=m.useState(()=>{const U=localStorage.getItem("classroom_lastSyncedAt");return U?new Date(U):null}),[I,D]=m.useState(null),[M,E]=m.useState(!1),[C,N]=m.useState(!1);m.useEffect(()=>{!s&&!e&&(l([]),u([]),f([]),g(new Map),S(null),E(!1),Xn.clearAll(),localStorage.removeItem("classroom_courses"),localStorage.removeItem("classroom_assignments"),localStorage.removeItem("classroom_materials"),localStorage.removeItem("classroom_notes"),localStorage.removeItem("classroom_lastSyncedAt"))},[s,e]);const k=m.useCallback(async(U=!1)=>{if(!e)return;let W=n;if(!W)try{await r()&&(W=localStorage.getItem("google_access_token"))}catch(q){console.error(q)}if(!W){D("Session expired. Please sign in again.");return}b(!0),D(null);try{const q=await gS.fetchCourses(W,e.uid);l(ee=>JSON.stringify(ee)!==JSON.stringify(q)?q:ee);const oe=await gS.fetchAssignmentsParallel(W,q);u(oe),S(new Date),Promise.all(q.map(ee=>ZU(W,ee.classroomId,ee.name,e.uid,()=>N(!0)))).then(ee=>{const ne=ee.flat();f(ne)}),YU(oe,W,e.uid,i).catch(ee=>console.warn(ee)),KU.autoSyncOnLogin(e.uid,e.email||"",e.displayName||"Anonymous",e.photoURL||"",oe,q).catch(console.warn)}catch(q){console.error("Sync Error",q),D(q.message||"Failed to sync"),U||i({variant:"destructive",title:"Sync Failed",description:q.message})}finally{b(!1),v(!1)}},[e,n,r,i]);m.useEffect(()=>{!e||!n||!M&&!_&&(E(!0),k(!0))},[e,n,M,_,k]),m.useEffect(()=>{localStorage.setItem("classroom_courses",JSON.stringify(o))},[o]),m.useEffect(()=>{localStorage.setItem("classroom_materials",JSON.stringify(h))},[h]),m.useEffect(()=>{localStorage.setItem("classroom_notes",JSON.stringify(Array.from(p.entries())))},[p]),m.useEffect(()=>{localStorage.setItem("classroom_assignments",JSON.stringify(c))},[c]),m.useEffect(()=>{x&&localStorage.setItem("classroom_lastSyncedAt",x.toISOString())},[x]);const A=m.useCallback((U,W)=>{u(q=>q.map(oe=>oe.id===U?{...oe,userStatus:W}:oe))},[]),P=m.useCallback((U,W,q=!1)=>{const oe={id:JU(),userId:(e==null?void 0:e.uid)||"",assignmentId:U,content:W,isImportant:q,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};g(ee=>{const ne=new Map(ee),se=ne.get(U)||[];return ne.set(U,[...se,oe]),ne})},[e]),R=m.useCallback((U,W,q)=>{g(oe=>{const ee=new Map(oe);for(const[ne,se]of Array.from(ee.entries())){const L=se.findIndex(X=>X.id===U);if(L!==-1){const X=[...se];X[L]={...X[L],content:W,isImportant:q??X[L].isImportant,updatedAt:new Date().toISOString()},ee.set(ne,X);break}}return ee})},[]),F=m.useCallback((U,W)=>{g(q=>{const oe=new Map(q),ee=oe.get(W)||[];return oe.set(W,ee.filter(ne=>ne.id!==U)),oe})},[]),ie=m.useCallback(()=>{const U=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return c.forEach(W=>{let q=W.systemStatus;W.userStatus==="in_progress"&&q!=="submitted"&&q!=="graded"&&(q="in_progress");const oe=U.find(ee=>ee.id===q);oe&&oe.assignments.push(W)}),U.forEach(W=>{W.assignments.sort((q,oe)=>q.dueDate?oe.dueDate?new Date(q.dueDate).getTime()-new Date(oe.dueDate).getTime():-1:1)}),U},[c]),J=m.useCallback(()=>{const U=new Date,W=new Date(U);W.setDate(W.getDate()+3);const q=new Date(U);q.setDate(q.getDate()+7);const oe=c.filter(te=>te.systemStatus!=="graded"&&te.systemStatus!=="submitted"),ee=c.filter(te=>{if(!te.dueDate||te.systemStatus==="graded"||te.systemStatus==="submitted")return!1;const ae=new Date(te.dueDate);return ae>=U&&ae<=W}),ne=c.filter(te=>{if(!te.dueDate||te.systemStatus==="graded"||te.systemStatus==="submitted")return!1;const ae=new Date(te.dueDate);return ae>=U&&ae<=q}),se=c.filter(te=>te.systemStatus==="overdue"),L=[],X=new Date,ue=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let te=0;te<7;te++){const ae=new Date(X);ae.setDate(ae.getDate()+te);const Te=ae.toISOString().split("T")[0],Pe=c.filter(pt=>pt.dueDate&&pt.dueDate.startsWith(Te)).length;L.push({day:ue[ae.getDay()],count:Pe,isToday:te===0})}const Q=[...oe].filter(te=>te.dueDate).sort((te,ae)=>new Date(te.dueDate).getTime()-new Date(ae.dueDate).getTime()).slice(0,5);return{totalActive:oe.length,upcoming3Days:ee.length,upcoming7Days:ne.length,overdue:se.length,weeklyWorkload:L,nextActions:Q}},[c]),Y=m.useCallback(U=>{let W=[...c];U!=null&&U.courseId&&(W=W.filter(ne=>ne.courseId===U.courseId)),U!=null&&U.status&&(W=W.filter(ne=>ne.systemStatus===U.status)),W.sort((ne,se)=>ne.dueDate?se.dueDate?new Date(ne.dueDate).getTime()-new Date(se.dueDate).getTime():-1:1);const q=new Map,oe=new Date,ee=new Date(oe);return ee.setDate(ee.getDate()+1),W.forEach(ne=>{if(!ne.dueDate)return;const se=ne.dueDate.split("T")[0],L=new Date(ne.dueDate);let X=se===oe.toISOString().split("T")[0]?"Today":se===ee.toISOString().split("T")[0]?"Tomorrow":L.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"});q.has(se)||q.set(se,{date:se,dateLabel:X,assignments:[]}),q.get(se).assignments.push(ne)}),Array.from(q.values())},[c]),O=m.useCallback(U=>c.find(W=>W.id===U),[c]),B=m.useCallback(U=>p.get(U)||[],[p]);return a.jsx(XA.Provider,{value:{courses:o,assignments:c,notes:p,isLoading:w,isSyncing:_,lastSyncedAt:x,error:I,syncClassroom:k,updateAssignmentStatus:A,addNote:P,updateNote:R,deleteNote:F,getPipelineColumns:ie,getDashboardMetrics:J,getTimelineGroups:Y,getAssignmentById:O,getNotesForAssignment:B,materials:h,reauthRequired:C},children:t})}function xn(){const t=m.useContext(XA);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}const hg=768;function Wm(){const[t,e]=m.useState(void 0);return m.useEffect(()=>{const n=window.matchMedia(`(max-width: ${hg-1}px)`),r=()=>{e(window.innerWidth<hg)};return n.addEventListener("change",r),e(window.innerWidth<hg),()=>n.removeEventListener("change",r)},[]),!!t}var D0="Avatar",[t7,bG]=Wn(D0),[n7,YA]=t7(D0),JA=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=m.useState("idle");return a.jsx(n7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(ge.span,{...r,ref:e})})});JA.displayName=D0;var ZA="AvatarImage",e2=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=YA(ZA,n),l=r7(r,i),c=mt(u=>{s(u),o.onImageLoadingStatusChange(u)});return _t(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(ge.img,{...i,ref:e,src:r}):null});e2.displayName=ZA;var t2="AvatarFallback",n2=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=YA(t2,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(ge.span,{...s,ref:e}):null});n2.displayName=t2;function xS(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function r7(t,{referrerPolicy:e,crossOrigin:n}){const r=i7(),s=m.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>xS(i,t));return _t(()=>{l(xS(i,t))},[i,t]),_t(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),h=c("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function s7(){return()=>{}}function i7(){return m.useSyncExternalStore(s7,()=>!0,()=>!1)}var r2=JA,s2=e2,i2=n2;const qr=m.forwardRef(({className:t,...e},n)=>a.jsx(r2,{ref:n,className:$(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));qr.displayName=r2.displayName;const Gr=m.forwardRef(({className:t,...e},n)=>a.jsx(s2,{ref:n,className:$("aspect-square h-full w-full",t),...e}));Gr.displayName=s2.displayName;const Kr=m.forwardRef(({className:t,...e},n)=>a.jsx(i2,{ref:n,className:$("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Kr.displayName=i2.displayName;const o7=[{path:"/dashboard",label:"Dashboard",icon:gC},{path:"/pipeline",label:"Pipeline",icon:xC},{path:"/leaderboard",label:"Leaderboard",icon:rm},{path:"/timeline",label:"Timeline",icon:Wi},{path:"/attendance",label:"Attendance",icon:CC},{path:"/notes",label:"Notes",icon:_o}];function a7({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=Qf(),r=Wm(),{user:s,signOut:i}=rt(),{theme:o,toggleTheme:l}=P0(),c=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(p=>p[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>a.jsxs("div",{className:"flex flex-col h-full bg-background",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&a.jsx("button",{className:"ml-auto",onClick:e,children:a.jsx(Po,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-4 border-b shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(qr,{className:"h-8 w-8",children:[a.jsx(Gr,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(Kr,{className:"text-xs",children:c})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),o7.map(p=>{const g=n===p.path,w=p.icon;return a.jsxs(En,{href:p.path,onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",g?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${p.label.toLowerCase()}`,children:[a.jsx(w,{className:"w-4 h-4 mr-3"}),p.label]},p.path)})]})}),a.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(Ex,{className:"w-4 h-4 mr-3"}):a.jsx(nm,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(En,{href:"/settings",onClick:e,className:$("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[a.jsx(EC,{className:"w-4 h-4 mr-3"}),"Settings"]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:a.jsx(u,{})}),r&&t&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const yf=m.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:$("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));yf.displayName="Input";const M0=Su("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),he=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?jO:"button";return a.jsx(o,{className:$(M0({variant:e,size:n,className:t})),ref:i,...s})});he.displayName="Button";var fg=0;function O0(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wS()),document.body.insertAdjacentElement("beforeend",t[1]??wS()),fg++,()=>{fg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fg--}},[])}function wS(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var mg="focusScope.autoFocusOnMount",pg="focusScope.autoFocusOnUnmount",bS={bubbles:!1,cancelable:!0},l7="FocusScope",Hm=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=m.useState(null),u=mt(s),h=mt(i),f=m.useRef(null),p=Ne(e,v=>c(v)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let v=function(S){if(g.paused||!l)return;const I=S.target;l.contains(I)?f.current=I:Ys(f.current,{select:!0})},_=function(S){if(g.paused||!l)return;const I=S.relatedTarget;I!==null&&(l.contains(I)||Ys(f.current,{select:!0}))},b=function(S){if(document.activeElement===document.body)for(const D of S)D.removedNodes.length>0&&Ys(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const x=new MutationObserver(b);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),x.disconnect()}}},[r,l,g.paused]),m.useEffect(()=>{if(l){SS.add(g);const v=document.activeElement;if(!l.contains(v)){const b=new CustomEvent(mg,bS);l.addEventListener(mg,u),l.dispatchEvent(b),b.defaultPrevented||(c7(m7(o2(l)),{select:!0}),document.activeElement===v&&Ys(l))}return()=>{l.removeEventListener(mg,u),setTimeout(()=>{const b=new CustomEvent(pg,bS);l.addEventListener(pg,h),l.dispatchEvent(b),b.defaultPrevented||Ys(v??document.body,{select:!0}),l.removeEventListener(pg,h),SS.remove(g)},0)}}},[l,u,h,g]);const w=m.useCallback(v=>{if(!n&&!r||g.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,b=document.activeElement;if(_&&b){const x=v.currentTarget,[S,I]=u7(x);S&&I?!v.shiftKey&&b===I?(v.preventDefault(),n&&Ys(S,{select:!0})):v.shiftKey&&b===S&&(v.preventDefault(),n&&Ys(I,{select:!0})):b===x&&v.preventDefault()}},[n,r,g.paused]);return a.jsx(ge.div,{tabIndex:-1,...o,ref:p,onKeyDown:w})});Hm.displayName=l7;function c7(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ys(r,{select:e}),document.activeElement!==n)return}function u7(t){const e=o2(t),n=_S(e,t),r=_S(e.reverse(),t);return[n,r]}function o2(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function _S(t,e){for(const n of t)if(!d7(n,{upTo:e}))return n}function d7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function h7(t){return t instanceof HTMLInputElement&&"select"in t}function Ys(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&h7(t)&&e&&t.select()}}var SS=f7();function f7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=ES(t,e),t.unshift(e)},remove(e){var n;t=ES(t,e),(n=t[0])==null||n.resume()}}}function ES(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function m7(t){return t.filter(e=>e.tagName!=="A")}var p7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Yo=new WeakMap,Md=new WeakMap,Od={},gg=0,a2=function(t){return t&&(t.host||a2(t.parentNode))},g7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=a2(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},y7=function(t,e,n,r){var s=g7(e,Array.isArray(t)?t:[t]);Od[n]||(Od[n]=new WeakMap);var i=Od[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),w=g!==null&&g!=="false",v=(Yo.get(p)||0)+1,_=(i.get(p)||0)+1;Yo.set(p,v),i.set(p,_),o.push(p),v===1&&w&&Md.set(p,!0),_===1&&p.setAttribute(n,"true"),w||p.setAttribute(r,"true")}catch(b){console.error("aria-hidden: cannot operate on ",p,b)}})};return h(e),l.clear(),gg++,function(){o.forEach(function(f){var p=Yo.get(f)-1,g=i.get(f)-1;Yo.set(f,p),i.set(f,g),p||(Md.has(f)||f.removeAttribute(r),Md.delete(f)),g||f.removeAttribute(n)}),gg--,gg||(Yo=new WeakMap,Yo=new WeakMap,Md=new WeakMap,Od={})}},L0=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=p7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),y7(r,s,n,"aria-hidden")):function(){return null}},Qr=function(){return Qr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Qr.apply(this,arguments)};function l2(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function v7(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var mh="right-scroll-bar-position",ph="width-before-scroll-bar",x7="with-scroll-bars-hidden",w7="--removed-body-scroll-bar-size";function yg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function b7(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var _7=typeof window<"u"?m.useLayoutEffect:m.useEffect,TS=new WeakMap;function S7(t,e){var n=b7(null,function(r){return t.forEach(function(s){return yg(s,r)})});return _7(function(){var r=TS.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||yg(l,null)}),i.forEach(function(l){s.has(l)||yg(l,o)})}TS.set(n,t)},[t]),n}function E7(t){return t}function T7(t,e){e===void 0&&(e=E7);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function N7(t){t===void 0&&(t={});var e=T7(null);return e.options=Qr({async:!0,ssr:!1},t),e}var c2=function(t){var e=t.sideCar,n=l2(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Qr({},n))};c2.isSideCarExport=!0;function C7(t,e){return t.useMedium(e),c2}var u2=N7(),vg=function(){},qm=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:vg,onWheelCapture:vg,onTouchMoveCapture:vg}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,g=t.noIsolation,w=t.inert,v=t.allowPinchZoom,_=t.as,b=_===void 0?"div":_,x=t.gapMode,S=l2(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=p,D=S7([n,e]),M=Qr(Qr({},S),s);return m.createElement(m.Fragment,null,h&&m.createElement(I,{sideCar:u2,removeScrollBar:u,shards:f,noIsolation:g,inert:w,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:x}),o?m.cloneElement(m.Children.only(l),Qr(Qr({},M),{ref:D})):m.createElement(b,Qr({},M,{className:c,ref:D}),l))});qm.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qm.classNames={fullWidth:ph,zeroRight:mh};var k7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function I7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=k7();return e&&t.setAttribute("nonce",e),t}function A7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function j7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var R7=function(){var t=0,e=null;return{add:function(n){t==0&&(e=I7())&&(A7(e,n),j7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},P7=function(){var t=R7();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},d2=function(){var t=P7(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},D7={left:0,top:0,right:0,gap:0},xg=function(t){return parseInt(t||"",10)||0},M7=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[xg(n),xg(r),xg(s)]},O7=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return D7;var e=M7(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},L7=d2(),Aa="data-scroll-locked",V7=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(x7,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Aa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(mh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ph,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(mh," .").concat(mh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ph," .").concat(ph,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Aa,`] {
    `).concat(w7,": ").concat(l,`px;
  }
`)},NS=function(){var t=parseInt(document.body.getAttribute(Aa)||"0",10);return isFinite(t)?t:0},F7=function(){m.useEffect(function(){return document.body.setAttribute(Aa,(NS()+1).toString()),function(){var t=NS()-1;t<=0?document.body.removeAttribute(Aa):document.body.setAttribute(Aa,t.toString())}},[])},z7=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;F7();var i=m.useMemo(function(){return O7(s)},[s]);return m.createElement(L7,{styles:V7(i,!e,s,n?"":"!important")})},ov=!1;if(typeof window<"u")try{var Ld=Object.defineProperty({},"passive",{get:function(){return ov=!0,!0}});window.addEventListener("test",Ld,Ld),window.removeEventListener("test",Ld,Ld)}catch{ov=!1}var Jo=ov?{passive:!1}:!1,U7=function(t){return t.tagName==="TEXTAREA"},h2=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!U7(t)&&n[e]==="visible")},$7=function(t){return h2(t,"overflowY")},B7=function(t){return h2(t,"overflowX")},CS=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=f2(t,r);if(s){var i=m2(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},W7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},H7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},f2=function(t,e){return t==="v"?$7(e):B7(e)},m2=function(t,e){return t==="v"?W7(e):H7(e)},q7=function(t,e){return t==="h"&&e==="rtl"?-1:1},G7=function(t,e,n,r,s){var i=q7(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{var g=m2(t,l),w=g[0],v=g[1],_=g[2],b=v-_-i*w;(w||b)&&f2(t,l)&&(f+=b,p+=w),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},Vd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},kS=function(t){return[t.deltaX,t.deltaY]},IS=function(t){return t&&"current"in t?t.current:t},K7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Q7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},X7=0,Zo=[];function Y7(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(X7++)[0],i=m.useState(d2)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=v7([t.lockRef.current],(t.shards||[]).map(IS),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var b=Vd(v),x=n.current,S="deltaX"in v?v.deltaX:x[0]-b[0],I="deltaY"in v?v.deltaY:x[1]-b[1],D,M=v.target,E=Math.abs(S)>Math.abs(I)?"h":"v";if("touches"in v&&E==="h"&&M.type==="range")return!1;var C=CS(E,M);if(!C)return!0;if(C?D=E:(D=E==="v"?"h":"v",C=CS(E,M)),!C)return!1;if(!r.current&&"changedTouches"in v&&(S||I)&&(r.current=D),!D)return!0;var N=r.current||D;return G7(N,_,v,N==="h"?S:I,!0)},[]),c=m.useCallback(function(v){var _=v;if(!(!Zo.length||Zo[Zo.length-1]!==i)){var b="deltaY"in _?kS(_):Vd(_),x=e.current.filter(function(D){return D.name===_.type&&(D.target===_.target||_.target===D.shadowParent)&&K7(D.delta,b)})[0];if(x&&x.should){_.cancelable&&_.preventDefault();return}if(!x){var S=(o.current.shards||[]).map(IS).filter(Boolean).filter(function(D){return D.contains(_.target)}),I=S.length>0?l(_,S[0]):!o.current.noIsolation;I&&_.cancelable&&_.preventDefault()}}},[]),u=m.useCallback(function(v,_,b,x){var S={name:v,delta:_,target:b,should:x,shadowParent:J7(b)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(I){return I!==S})},1)},[]),h=m.useCallback(function(v){n.current=Vd(v),r.current=void 0},[]),f=m.useCallback(function(v){u(v.type,kS(v),v.target,l(v,t.lockRef.current))},[]),p=m.useCallback(function(v){u(v.type,Vd(v),v.target,l(v,t.lockRef.current))},[]);m.useEffect(function(){return Zo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Jo),document.addEventListener("touchmove",c,Jo),document.addEventListener("touchstart",h,Jo),function(){Zo=Zo.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,Jo),document.removeEventListener("touchmove",c,Jo),document.removeEventListener("touchstart",h,Jo)}},[]);var g=t.removeScrollBar,w=t.inert;return m.createElement(m.Fragment,null,w?m.createElement(i,{styles:Q7(s)}):null,g?m.createElement(z7,{gapMode:t.gapMode}):null)}function J7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Z7=C7(u2,Y7);var Gm=m.forwardRef(function(t,e){return m.createElement(qm,Qr({},t,{ref:e,sideCar:Z7}))});Gm.classNames=qm.classNames;var V0="Popover",[p2,_G]=Wn(V0,[xl]),Fu=xl(),[e$,Gi]=p2(V0),g2=t=>{const{__scopePopover:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!1}=t,l=Fu(e),c=m.useRef(null),[u,h]=m.useState(!1),[f=!1,p]=Ns({prop:r,defaultProp:s,onChange:i});return a.jsx(Mx,{...l,children:a.jsx(e$,{scope:e,contentId:Jr(),triggerRef:c,open:f,onOpenChange:p,onOpenToggle:m.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:m.useCallback(()=>h(!0),[]),onCustomAnchorRemove:m.useCallback(()=>h(!1),[]),modal:o,children:n})})};g2.displayName=V0;var y2="PopoverAnchor",t$=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Gi(y2,n),i=Fu(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=s;return m.useEffect(()=>(o(),()=>l()),[o,l]),a.jsx(am,{...i,...r,ref:e})});t$.displayName=y2;var v2="PopoverTrigger",x2=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Gi(v2,n),i=Fu(n),o=Ne(e,s.triggerRef),l=a.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":E2(s.open),...r,ref:o,onClick:me(t.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:a.jsx(am,{asChild:!0,...i,children:l})});x2.displayName=v2;var F0="PopoverPortal",[n$,r$]=p2(F0,{forceMount:void 0}),w2=t=>{const{__scopePopover:e,forceMount:n,children:r,container:s}=t,i=Gi(F0,e);return a.jsx(n$,{scope:e,forceMount:n,children:a.jsx(Nn,{present:n||i.open,children:a.jsx(pl,{asChild:!0,container:s,children:r})})})};w2.displayName=F0;var cl="PopoverContent",b2=m.forwardRef((t,e)=>{const n=r$(cl,t.__scopePopover),{forceMount:r=n.forceMount,...s}=t,i=Gi(cl,t.__scopePopover);return a.jsx(Nn,{present:r||i.open,children:i.modal?a.jsx(i$,{...s,ref:e}):a.jsx(o$,{...s,ref:e})})});b2.displayName=cl;var s$=jo("PopoverContent.RemoveScroll"),i$=m.forwardRef((t,e)=>{const n=Gi(cl,t.__scopePopover),r=m.useRef(null),s=Ne(e,r),i=m.useRef(!1);return m.useEffect(()=>{const o=r.current;if(o)return L0(o)},[]),a.jsx(Gm,{as:s$,allowPinchZoom:!0,children:a.jsx(_2,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:me(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),o$=m.forwardRef((t,e)=>{const n=Gi(cl,t.__scopePopover),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(_2,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),_2=m.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:h,...f}=t,p=Gi(cl,n),g=Fu(n);return O0(),a.jsx(Hm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(ml,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:a.jsx(Ox,{"data-state":E2(p.open),role:"dialog",id:p.contentId,...g,...f,ref:e,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),S2="PopoverClose",a$=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Gi(S2,n);return a.jsx(ge.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});a$.displayName=S2;var l$="PopoverArrow",c$=m.forwardRef((t,e)=>{const{__scopePopover:n,...r}=t,s=Fu(n);return a.jsx(Lx,{...s,...r,ref:e})});c$.displayName=l$;function E2(t){return t?"open":"closed"}var u$=g2,d$=x2,h$=w2,T2=b2;const f$=u$,m$=d$,N2=m.forwardRef(({className:t,align:e="center",sideOffset:n=4,...r},s)=>a.jsx(h$,{children:a.jsx(T2,{ref:s,align:e,sideOffset:n,className:$("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",t),...r})}));N2.displayName=T2.displayName;var p$=m.createContext(void 0);function Km(t){const e=m.useContext(p$);return t||e||"ltr"}function av(t,[e,n]){return Math.min(n,Math.max(e,t))}function g$(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var z0="ScrollArea",[C2,SG]=Wn(z0),[y$,sr]=C2(z0),k2=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[l,c]=m.useState(null),[u,h]=m.useState(null),[f,p]=m.useState(null),[g,w]=m.useState(null),[v,_]=m.useState(null),[b,x]=m.useState(0),[S,I]=m.useState(0),[D,M]=m.useState(!1),[E,C]=m.useState(!1),N=Ne(e,A=>c(A)),k=Km(s);return a.jsx(y$,{scope:n,type:r,dir:k,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:h,content:f,onContentChange:p,scrollbarX:g,onScrollbarXChange:w,scrollbarXEnabled:D,onScrollbarXEnabledChange:M,scrollbarY:v,onScrollbarYChange:_,scrollbarYEnabled:E,onScrollbarYEnabledChange:C,onCornerWidthChange:x,onCornerHeightChange:I,children:a.jsx(ge.div,{dir:k,...o,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});k2.displayName=z0;var I2="ScrollAreaViewport",A2=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=sr(I2,n),l=m.useRef(null),c=Ne(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(ge.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});A2.displayName=I2;var ls="ScrollAreaScrollbar",U0=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=sr(ls,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return m.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(v$,{...r,ref:e,forceMount:n}):s.type==="scroll"?a.jsx(x$,{...r,ref:e,forceMount:n}):s.type==="auto"?a.jsx(j2,{...r,ref:e,forceMount:n}):s.type==="always"?a.jsx($0,{...r,ref:e}):null});U0.displayName=ls;var v$=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=sr(ls,t.__scopeScrollArea),[i,o]=m.useState(!1);return m.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(Nn,{present:n||i,children:a.jsx(j2,{"data-state":i?"visible":"hidden",...r,ref:e})})}),x$=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=sr(ls,t.__scopeScrollArea),i=t.orientation==="horizontal",o=Xm(()=>c("SCROLL_END"),100),[l,c]=g$("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),m.useEffect(()=>{const u=s.viewport,h=i?"scrollLeft":"scrollTop";if(u){let f=u[h];const p=()=>{const g=u[h];f!==g&&(c("SCROLL"),o()),f=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,i,c,o]),a.jsx(Nn,{present:n||l!=="hidden",children:a.jsx($0,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:me(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:me(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),j2=m.forwardRef((t,e)=>{const n=sr(ls,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=m.useState(!1),l=t.orientation==="horizontal",c=Xm(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?u:h)}},10);return ul(n.viewport,c),ul(n.content,c),a.jsx(Nn,{present:r||i,children:a.jsx($0,{"data-state":i?"visible":"hidden",...s,ref:e})})}),$0=m.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=sr(ls,t.__scopeScrollArea),i=m.useRef(null),o=m.useRef(0),[l,c]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=O2(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function f(p,g){return T$(p,o.current,l,g)}return n==="horizontal"?a.jsx(w$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollLeft,g=AS(p,l,s.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=f(p,s.dir))}}):n==="vertical"?a.jsx(b$,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const p=s.viewport.scrollTop,g=AS(p,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=f(p))}}):null}),w$=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=sr(ls,t.__scopeScrollArea),[o,l]=m.useState(),c=m.useRef(null),u=Ne(e,c,i.onScrollbarXChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(P2,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Qm(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(p),V2(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:xf(o.paddingLeft),paddingEnd:xf(o.paddingRight)}})}})}),b$=m.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=sr(ls,t.__scopeScrollArea),[o,l]=m.useState(),c=m.useRef(null),u=Ne(e,c,i.onScrollbarYChange);return m.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(P2,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Qm(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const p=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(p),V2(p,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:xf(o.paddingTop),paddingEnd:xf(o.paddingBottom)}})}})}),[_$,R2]=C2(ls),P2=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:h,onResize:f,...p}=t,g=sr(ls,n),[w,v]=m.useState(null),_=Ne(e,N=>v(N)),b=m.useRef(null),x=m.useRef(""),S=g.viewport,I=r.content-r.viewport,D=mt(h),M=mt(c),E=Xm(f,10);function C(N){if(b.current){const k=N.clientX-b.current.left,A=N.clientY-b.current.top;u({x:k,y:A})}}return m.useEffect(()=>{const N=k=>{const A=k.target;(w==null?void 0:w.contains(A))&&D(k,I)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[S,w,I,D]),m.useEffect(M,[r,M]),ul(w,E),ul(g.content,E),a.jsx(_$,{scope:n,scrollbar:w,hasThumb:s,onThumbChange:mt(i),onThumbPointerUp:mt(o),onThumbPositionChange:M,onThumbPointerDown:mt(l),children:a.jsx(ge.div,{...p,ref:_,style:{position:"absolute",...p.style},onPointerDown:me(t.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),b.current=w.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),C(N))}),onPointerMove:me(t.onPointerMove,C),onPointerUp:me(t.onPointerUp,N=>{const k=N.target;k.hasPointerCapture(N.pointerId)&&k.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=x.current,g.viewport&&(g.viewport.style.scrollBehavior=""),b.current=null})})})}),vf="ScrollAreaThumb",D2=m.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=R2(vf,t.__scopeScrollArea);return a.jsx(Nn,{present:n||s.hasThumb,children:a.jsx(S$,{ref:e,...r})})}),S$=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=sr(vf,n),o=R2(vf,n),{onThumbPositionChange:l}=o,c=Ne(e,f=>o.onThumbChange(f)),u=m.useRef(void 0),h=Xm(()=>{u.current&&(u.current(),u.current=void 0)},100);return m.useEffect(()=>{const f=i.viewport;if(f){const p=()=>{if(h(),!u.current){const g=N$(f,l);u.current=g,l()}};return l(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[i.viewport,h,l]),a.jsx(ge.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:me(t.onPointerDownCapture,f=>{const g=f.target.getBoundingClientRect(),w=f.clientX-g.left,v=f.clientY-g.top;o.onThumbPointerDown({x:w,y:v})}),onPointerUp:me(t.onPointerUp,o.onThumbPointerUp)})});D2.displayName=vf;var B0="ScrollAreaCorner",M2=m.forwardRef((t,e)=>{const n=sr(B0,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(E$,{...t,ref:e}):null});M2.displayName=B0;var E$=m.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=sr(B0,n),[i,o]=m.useState(0),[l,c]=m.useState(0),u=!!(i&&l);return ul(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),ul(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),u?a.jsx(ge.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function xf(t){return t?parseInt(t,10):0}function O2(t,e){const n=t/e;return isNaN(n)?0:n}function Qm(t){const e=O2(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function T$(t,e,n,r="ltr"){const s=Qm(n),i=s/2,o=e||i,l=s-o,c=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return L2([c,u],f)(t)}function AS(t,e,n="ltr"){const r=Qm(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],u=av(t,c);return L2([0,o],[0,l])(u)}function L2(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function V2(t,e){return t>0&&t<e}var N$=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function Xm(t,e){const n=mt(t),r=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),m.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function ul(t,e){const n=mt(e);_t(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var F2=k2,C$=A2,k$=M2;const z2=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(F2,{ref:r,className:$("relative overflow-hidden",t),...n,children:[a.jsx(C$,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(U2,{}),a.jsx(k$,{})]}));z2.displayName=F2.displayName;const U2=m.forwardRef(({className:t,orientation:e="vertical",...n},r)=>a.jsx(U0,{ref:r,orientation:e,className:$("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:a.jsx(D2,{className:"relative flex-1 rounded-full bg-border"})}));U2.displayName=U0.displayName;const I$=Su("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ir({className:t,variant:e,...n}){return a.jsx("div",{className:$(I$({variant:e}),t),...n})}function A$(){const{user:t}=rt(),[e,n]=m.useState([]),[r,s]=m.useState(0),[i,o]=m.useState(!1),[l,c]=m.useState(()=>parseInt(localStorage.getItem("lastNotificationRead")||"0"));m.useEffect(()=>{if(!t)return;const g=Vm(kl(Me,"activities"),$m("createdAt","desc"),I0(20)),w=as(g,v=>{const b=v.docs.map(S=>({id:S.id,...S.data()})).filter(S=>S.userId!==t.uid);n(b);const x=b.filter(S=>new Date(S.createdAt).getTime()>l).length;s(x)});return()=>w()},[t,l]);const u=g=>{if(o(g),g){const w=Date.now();c(w),localStorage.setItem("lastNotificationRead",w.toString()),s(0)}},h=g=>{const w=new Date(g),_=(new Date().getTime()-w.getTime())/1e3;return _<60?"Just now":_<3600?`${Math.floor(_/60)}m`:_<86400?`${Math.floor(_/3600)}h`:_<604800?`${Math.floor(_/86400)}d`:`${Math.floor(_/604800)}w`},f=g=>{switch(g){case"badge_earned":return a.jsx(rm,{className:"h-3 w-3 text-white fill-amber-100"});case"streak_milestone":return a.jsx(tm,{className:"h-3 w-3 text-white fill-orange-100"});case"assignment_completed":return a.jsx(bx,{className:"h-3 w-3 text-white"});default:return a.jsx(rh,{className:"h-3 w-3 text-white"})}},p=g=>{switch(g){case"badge_earned":return"bg-amber-500 border-amber-200";case"streak_milestone":return"bg-orange-500 border-orange-200";case"assignment_completed":return"bg-emerald-500 border-emerald-200";default:return"bg-blue-500 border-blue-200"}};return a.jsxs(f$,{open:i,onOpenChange:u,children:[a.jsx(m$,{asChild:!0,children:a.jsxs(he,{variant:"ghost",size:"icon",className:"relative text-muted-foreground hover:text-foreground rounded-full w-9 h-9",children:[a.jsx(rh,{className:"h-5 w-5"}),r>0&&a.jsx("span",{className:"absolute top-2 right-2 h-2 w-2 bg-red-500 rounded-full ring-2 ring-background animate-pulse"})]})}),a.jsxs(N2,{className:"w-80 p-0 mr-2 shadow-xl border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80",align:"end",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[a.jsx("h4",{className:"font-semibold text-sm",children:"Notifications"}),r>0&&a.jsxs(ir,{variant:"secondary",className:"text-[10px] h-5 px-1.5",children:[r," new"]})]}),a.jsx(z2,{className:"h-[300px]",children:e.length>0?a.jsx("div",{className:"flex flex-col",children:e.map(g=>{var w;return a.jsxs("div",{className:"flex items-start gap-3 p-4 hover:bg-muted/50 transition-colors border-b last:border-0 relative group",children:[a.jsxs("div",{className:"relative shrink-0",children:[a.jsxs(qr,{className:"h-10 w-10 border border-border",children:[a.jsx(Gr,{src:g.userAvatar||void 0}),a.jsx(Kr,{children:((w=g.userName)==null?void 0:w[0])||"?"})]}),a.jsx("div",{className:$("absolute -bottom-1 -right-1 rounded-full p-0.5 border-[2px] border-background flex items-center justify-center w-5 h-5",p(g.type)),children:f(g.type)})]}),a.jsxs("div",{className:"flex-1 space-y-1 min-w-0",children:[a.jsxs("p",{className:"text-sm text-foreground leading-snug",children:[a.jsx("span",{className:"font-semibold",children:g.userName})," ",a.jsx("span",{className:"text-muted-foreground font-normal",children:g.content.replace(g.userName,"").trim()})]}),a.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:h(g.createdAt)})]}),new Date(g.createdAt).getTime()>l&&a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 bg-blue-500 rounded-full"})]},g.id)})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-[200px] text-muted-foreground gap-2",children:[a.jsx("div",{className:"p-3 bg-muted rounded-full",children:a.jsx(rh,{className:"h-6 w-6 opacity-20"})}),a.jsx("p",{className:"text-sm",children:"No new activity"})]})})]})]})}function j$({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=xn(),[r]=Qf(),[s,i]=m.useState(""),o=Wm(),c={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/attendance":"Attendance","/notes":"Notes","/settings":"Settings"}[r]||"Trace";return a.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[a.jsxs("div",{className:"flex items-center flex-1",children:[o&&a.jsx(he,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:a.jsx(_C,{className:"h-5 w-5"})}),a.jsx("span",{className:"md:hidden font-medium text-lg",children:c}),a.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(F5,{className:"h-4 w-4 text-muted-foreground"})}),a.jsx(yf,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),a.jsxs("div",{className:"flex items-center ml-4 gap-2",children:[a.jsx(A$,{}),a.jsx(he,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:$(n&&"animate-spin"),title:"Sync with Classroom",children:a.jsx(Ya,{className:"w-5 h-5"})})]})]})}var $2={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},jS=Ee.createContext&&Ee.createContext($2),R$=["attr","size","title"];function P$(t,e){if(t==null)return{};var n=D$(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function D$(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wf(){return wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wf.apply(this,arguments)}function RS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function bf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RS(Object(n),!0).forEach(function(r){M$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M$(t,e,n){return e=O$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O$(t){var e=L$(t,"string");return typeof e=="symbol"?e:e+""}function L$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function B2(t){return t&&t.map((e,n)=>Ee.createElement(e.tag,bf({key:n},e.attr),B2(e.child)))}function W0(t){return e=>Ee.createElement(V$,wf({attr:bf({},t.attr)},e),B2(t.child))}function V$(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=P$(t,R$),l=s||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),Ee.createElement("svg",wf({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:bf(bf({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Ee.createElement("title",null,i),t.children)};return jS!==void 0?Ee.createElement(jS.Consumer,null,n=>e(n)):e($2)}function W2(t){return W0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function F$(t){return W0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const z$=[{icon:F$,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:M5,title:"Kanban Board",description:"Visual assignment tracking."},{icon:b5,title:"Linear Timeline",description:"Chronological deadline view."},{icon:_5,title:"Performance Metrics",description:"Grade & workload analytics."}];function U$(){const{signInWithGoogle:t,loading:e,error:n}=rt();return a.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),a.jsx("header",{className:"px-10 py-8 z-10",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),a.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",a.jsx("br",{}),a.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),a.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),a.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:z$.map(r=>a.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[a.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),a.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),a.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),a.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:a.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),a.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[a.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[a.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),a.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),a.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),a.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[a.jsx(Un,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",a.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),a.jsxs(he,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[a.jsx(W2,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&a.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[a.jsx(Un,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:n})]})]}),a.jsx("div",{className:"pt-8 border-t border-zinc-100",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx(z5,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),a.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),a.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[a.jsx("span",{children:" 2024 Trace Inc."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"/privacy-policy",className:"hover:text-zinc-900 transition-colors",children:"Privacy Policy"}),a.jsx("a",{href:"/terms-of-service",className:"hover:text-zinc-900 transition-colors",children:"Terms of Service"})]})]})})]})]})}function $$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Ym=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function H0(t){return"nodeType"in t}function dn(t){var e,n;return t?jl(t)?t:H0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function q0(t){const{Document:e}=dn(t);return t instanceof e}function zu(t){return jl(t)?!1:t instanceof dn(t).HTMLElement}function H2(t){return t instanceof dn(t).SVGElement}function Rl(t){return t?jl(t)?t.document:H0(t)?q0(t)?t:zu(t)||H2(t)?t.ownerDocument:document:document:document}const jr=Ym?m.useLayoutEffect:m.useEffect;function Jm(t){const e=m.useRef(t);return jr(()=>{e.current=t}),m.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function B$(){const t=m.useRef(null),e=m.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=m.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function uu(t,e){e===void 0&&(e=[t]);const n=m.useRef(t);return jr(()=>{n.current!==t&&(n.current=t)},e),n}function Uu(t,e){const n=m.useRef();return m.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function _f(t){const e=Jm(t),n=m.useRef(null),r=m.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Sf(t){const e=m.useRef();return m.useEffect(()=>{e.current=t},[t]),e.current}let wg={};function $u(t,e){return m.useMemo(()=>{if(e)return e;const n=wg[t]==null?0:wg[t]+1;return wg[t]=n,t+"-"+n},[t,e])}function q2(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const h=i[c];h!=null&&(i[c]=h+t*u)}return i},{...e})}}const ja=q2(1),Ef=q2(-1);function W$(t){return"clientX"in t&&"clientY"in t}function Zm(t){if(!t)return!1;const{KeyboardEvent:e}=dn(t.target);return e&&t instanceof e}function H$(t){if(!t)return!1;const{TouchEvent:e}=dn(t.target);return e&&t instanceof e}function Tf(t){if(H$(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return W$(t)?{x:t.clientX,y:t.clientY}:null}const zi=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[zi.Translate.toString(t),zi.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),PS="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function q$(t){return t.matches(PS)?t:t.querySelector(PS)}const G$={display:"none"};function K$(t){let{id:e,value:n}=t;return Ee.createElement("div",{id:e,style:G$},n)}function Q$(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ee.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function X$(){const[t,e]=m.useState("");return{announce:m.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const G2=m.createContext(null);function Y$(t){const e=m.useContext(G2);m.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function J$(){const[t]=m.useState(()=>new Set),e=m.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[m.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var l;return(l=o[s])==null?void 0:l.call(o,i)})},[t]),e]}const Z$={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},eB={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function tB(t){let{announcements:e=eB,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=Z$}=t;const{announce:i,announcement:o}=X$(),l=$u("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),Y$(m.useMemo(()=>({onDragStart(f){let{active:p}=f;i(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;e.onDragMove&&i(e.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;i(e.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;i(e.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;i(e.onDragCancel({active:p,over:g}))}}),[i,e])),!c)return null;const h=Ee.createElement(Ee.Fragment,null,Ee.createElement(K$,{id:r,value:s.draggable}),Ee.createElement(Q$,{id:l,announcement:o}));return n?Zn.createPortal(h,n):h}var kt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(kt||(kt={}));function Nf(){}function DS(t,e){return m.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function nB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return m.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Rr=Object.freeze({x:0,y:0});function rB(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function sB(t,e){const n=Tf(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function iB(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function oB(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function aB(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function MS(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const lB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=MS(e,e.left,e.top),i=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const u=rB(MS(c),s);i.push({id:l,data:{droppableContainer:o,value:u}})}}return i.sort(iB)};function cB(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,l=i-n;if(r<s&&n<i){const c=e.width*e.height,u=t.width*t.height,h=o*l,f=h/(c+u-h);return Number(f.toFixed(4))}return 0}const uB=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,l=n.get(o);if(l){const c=cB(l,e);c>0&&s.push({id:o,data:{droppableContainer:i,value:c}})}}return s.sort(oB)};function dB(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function K2(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:Rr}function hB(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,l)=>({...o,top:o.top+t*l.y,bottom:o.bottom+t*l.y,left:o.left+t*l.x,right:o.right+t*l.x}),{...n})}}const fB=hB(1);function Q2(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function mB(t,e,n){const r=Q2(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:l}=r,c=t.left-o-(1-s)*parseFloat(n),u=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c}}const pB={ignoreTransform:!1};function Pl(t,e){e===void 0&&(e=pB);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=dn(t).getComputedStyle(t);u&&(n=mB(n,u,h))}const{top:r,left:s,width:i,height:o,bottom:l,right:c}=n;return{top:r,left:s,width:i,height:o,bottom:l,right:c}}function OS(t){return Pl(t,{ignoreTransform:!0})}function gB(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function yB(t,e){return e===void 0&&(e=dn(t).getComputedStyle(t)),e.position==="fixed"}function vB(t,e){e===void 0&&(e=dn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function G0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(q0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!zu(s)||H2(s)||n.includes(s))return n;const i=dn(t).getComputedStyle(s);return s!==t&&vB(s,i)&&n.push(s),yB(s,i)?n:r(s.parentNode)}return t?r(t):n}function X2(t){const[e]=G0(t,1);return e??null}function bg(t){return!Ym||!t?null:jl(t)?t:H0(t)?q0(t)||t===Rl(t).scrollingElement?window:zu(t)?t:null:null}function Y2(t){return jl(t)?t.scrollX:t.scrollLeft}function J2(t){return jl(t)?t.scrollY:t.scrollTop}function lv(t){return{x:Y2(t),y:J2(t)}}var Dt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Dt||(Dt={}));function Z2(t){return!Ym||!t?!1:t===document.scrollingElement}function ej(t){const e={x:0,y:0},n=Z2(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,l=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:l,maxScroll:r,minScroll:e}}const xB={x:.2,y:.2};function wB(t,e,n,r,s){let{top:i,left:o,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=xB);const{isTop:u,isBottom:h,isLeft:f,isRight:p}=ej(t),g={x:0,y:0},w={x:0,y:0},v={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+v.height?(g.y=Dt.Backward,w.y=r*Math.abs((e.top+v.height-i)/v.height)):!h&&c>=e.bottom-v.height&&(g.y=Dt.Forward,w.y=r*Math.abs((e.bottom-v.height-c)/v.height)),!p&&l>=e.right-v.width?(g.x=Dt.Forward,w.x=r*Math.abs((e.right-v.width-l)/v.width)):!f&&o<=e.left+v.width&&(g.x=Dt.Backward,w.x=r*Math.abs((e.left+v.width-o)/v.width)),{direction:g,speed:w}}function bB(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function tj(t){return t.reduce((e,n)=>ja(e,lv(n)),Rr)}function _B(t){return t.reduce((e,n)=>e+Y2(n),0)}function SB(t){return t.reduce((e,n)=>e+J2(n),0)}function nj(t,e){if(e===void 0&&(e=Pl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);X2(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const EB=[["x",["left","right"],_B],["y",["top","bottom"],SB]];class K0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=G0(n),s=tj(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,l]of EB)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(r),h=s[i]-u;return this.rect[c]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class jc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function TB(t){const{EventTarget:e}=dn(t);return t instanceof e?t:Rl(t)}function _g(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Gn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Gn||(Gn={}));function LS(t){t.preventDefault()}function NB(t){t.stopPropagation()}var Le;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Le||(Le={}));const rj={start:[Le.Space,Le.Enter],cancel:[Le.Esc],end:[Le.Space,Le.Enter,Le.Tab]},CB=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Le.Right:return{...n,x:n.x+25};case Le.Left:return{...n,x:n.x-25};case Le.Down:return{...n,y:n.y+25};case Le.Up:return{...n,y:n.y-25}}};class Q0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new jc(Rl(n)),this.windowListeners=new jc(dn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Gn.Resize,this.handleCancel),this.windowListeners.add(Gn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Gn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&nj(r),n(Rr)}handleKeyDown(e){if(Zm(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=rj,coordinateGetter:o=CB,scrollBehavior:l="smooth"}=s,{code:c}=e;if(i.end.includes(c)){this.handleEnd(e);return}if(i.cancel.includes(c)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:Rr;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=Ef(f,h),g={x:0,y:0},{scrollableAncestors:w}=r.current;for(const v of w){const _=e.code,{isTop:b,isRight:x,isLeft:S,isBottom:I,maxScroll:D,minScroll:M}=ej(v),E=bB(v),C={x:Math.min(_===Le.Right?E.right-E.width/2:E.right,Math.max(_===Le.Right?E.left:E.left+E.width/2,f.x)),y:Math.min(_===Le.Down?E.bottom-E.height/2:E.bottom,Math.max(_===Le.Down?E.top:E.top+E.height/2,f.y))},N=_===Le.Right&&!x||_===Le.Left&&!S,k=_===Le.Down&&!I||_===Le.Up&&!b;if(N&&C.x!==f.x){const A=v.scrollLeft+p.x,P=_===Le.Right&&A<=D.x||_===Le.Left&&A>=M.x;if(P&&!p.y){v.scrollTo({left:A,behavior:l});return}P?g.x=v.scrollLeft-A:g.x=_===Le.Right?v.scrollLeft-D.x:v.scrollLeft-M.x,g.x&&v.scrollBy({left:-g.x,behavior:l});break}else if(k&&C.y!==f.y){const A=v.scrollTop+p.y,P=_===Le.Down&&A<=D.y||_===Le.Up&&A>=M.y;if(P&&!p.x){v.scrollTo({top:A,behavior:l});return}P?g.y=v.scrollTop-A:g.y=_===Le.Down?v.scrollTop-D.y:v.scrollTop-M.y,g.y&&v.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(e,ja(Ef(f,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Q0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=rj,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const l=i.activatorNode.current;return l&&t.target!==l?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function VS(t){return!!(t&&"distance"in t)}function FS(t){return!!(t&&"delay"in t)}class X0{constructor(e,n,r){var s;r===void 0&&(r=TB(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=Rl(o),this.documentListeners=new jc(this.document),this.listeners=new jc(r),this.windowListeners=new jc(dn(o)),this.initialCoordinates=(s=Tf(i))!=null?s:Rr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Gn.Resize,this.handleCancel),this.windowListeners.add(Gn.DragStart,LS),this.windowListeners.add(Gn.VisibilityChange,this.handleCancel),this.windowListeners.add(Gn.ContextMenu,LS),this.documentListeners.add(Gn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(FS(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(VS(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Gn.Click,NB,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Gn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!s)return;const c=(n=Tf(e))!=null?n:Rr,u=Ef(s,c);if(!r&&l){if(VS(l)){if(l.tolerance!=null&&_g(u,l.tolerance))return this.handleCancel();if(_g(u,l.distance))return this.handleStart()}if(FS(l)&&_g(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}e.cancelable&&e.preventDefault(),o(c)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Le.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const kB={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Y0 extends X0{constructor(e){const{event:n}=e,r=Rl(n.target);super(e,kB,r)}}Y0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const IB={move:{name:"mousemove"},end:{name:"mouseup"}};var cv;(function(t){t[t.RightClick=2]="RightClick"})(cv||(cv={}));class AB extends X0{constructor(e){super(e,IB,Rl(e.event.target))}}AB.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===cv.RightClick?!1:(r==null||r({event:n}),!0)}}];const Sg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class jB extends X0{constructor(e){super(e,Sg)}static setup(){return window.addEventListener(Sg.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Sg.move.name,e)};function e(){}}}jB.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var Rc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Rc||(Rc={}));var Cf;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Cf||(Cf={}));function RB(t){let{acceleration:e,activator:n=Rc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:l=Cf.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:p}=t;const g=DB({delta:f,disabled:!i}),[w,v]=B$(),_=m.useRef({x:0,y:0}),b=m.useRef({x:0,y:0}),x=m.useMemo(()=>{switch(n){case Rc.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Rc.DraggableRect:return s}},[n,s,c]),S=m.useRef(null),I=m.useCallback(()=>{const M=S.current;if(!M)return;const E=_.current.x*b.current.x,C=_.current.y*b.current.y;M.scrollBy(E,C)},[]),D=m.useMemo(()=>l===Cf.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!x){v();return}for(const M of D){if((r==null?void 0:r(M))===!1)continue;const E=u.indexOf(M),C=h[E];if(!C)continue;const{direction:N,speed:k}=wB(M,C,x,e,p);for(const A of["x","y"])g[A][N[A]]||(k[A]=0,N[A]=0);if(k.x>0||k.y>0){v(),S.current=M,w(I,o),_.current=k,b.current=N;return}}_.current={x:0,y:0},b.current={x:0,y:0},v()},[e,I,r,v,i,o,JSON.stringify(x),JSON.stringify(g),w,u,D,h,JSON.stringify(p)])}const PB={x:{[Dt.Backward]:!1,[Dt.Forward]:!1},y:{[Dt.Backward]:!1,[Dt.Forward]:!1}};function DB(t){let{delta:e,disabled:n}=t;const r=Sf(e);return Uu(s=>{if(n||!r||!s)return PB;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Dt.Backward]:s.x[Dt.Backward]||i.x===-1,[Dt.Forward]:s.x[Dt.Forward]||i.x===1},y:{[Dt.Backward]:s.y[Dt.Backward]||i.y===-1,[Dt.Forward]:s.y[Dt.Forward]||i.y===1}}},[n,e,r])}function MB(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return Uu(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function OB(t,e){return m.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var du;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(du||(du={}));var uv;(function(t){t.Optimized="optimized"})(uv||(uv={}));const zS=new Map;function LB(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=m.useState(null),{frequency:l,measure:c,strategy:u}=s,h=m.useRef(t),f=_(),p=uu(f),g=m.useCallback(function(b){b===void 0&&(b=[]),!p.current&&o(x=>x===null?b:x.concat(b.filter(S=>!x.includes(S))))},[p]),w=m.useRef(null),v=Uu(b=>{if(f&&!n)return zS;if(!b||b===zS||h.current!==t||i!=null){const x=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){x.set(S.id,S.rect.current);continue}const I=S.node.current,D=I?new K0(c(I),I):null;S.rect.current=D,D&&x.set(S.id,D)}return x}return b},[t,i,n,f,c]);return m.useEffect(()=>{h.current=t},[t]),m.useEffect(()=>{f||g()},[n,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||w.current!==null||(w.current=setTimeout(()=>{g(),w.current=null},l))},[l,f,g,...r]),{droppableRects:v,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(u){case du.Always:return!1;case du.BeforeDragging:return n;default:return!n}}}function J0(t,e){return Uu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function VB(t,e){return J0(t,e)}function FB(t){let{callback:e,disabled:n}=t;const r=Jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function ep(t){let{callback:e,disabled:n}=t;const r=Jm(e),s=m.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return m.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function zB(t){return new K0(Pl(t),t)}function US(t,e,n){e===void 0&&(e=zB);const[r,s]=m.useState(null);function i(){s(c=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=c??n)!=null?u:null}const h=e(t);return JSON.stringify(c)===JSON.stringify(h)?c:h})}const o=FB({callback(c){if(t)for(const u of c){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),l=ep({callback:i});return jr(()=>{i(),t?(l==null||l.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[t]),r}function UB(t){const e=J0(t);return K2(t,e)}const $S=[];function $B(t){const e=m.useRef(t),n=Uu(r=>t?r&&r!==$S&&t&&e.current&&t.parentNode===e.current.parentNode?r:G0(t):$S,[t]);return m.useEffect(()=>{e.current=t},[t]),n}function BB(t){const[e,n]=m.useState(null),r=m.useRef(t),s=m.useCallback(i=>{const o=bg(i.target);o&&n(l=>l?(l.set(o,lv(o)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=r.current;if(t!==i){o(i);const l=t.map(c=>{const u=bg(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,lv(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=t}return()=>{o(t),o(i)};function o(l){l.forEach(c=>{const u=bg(c);u==null||u.removeEventListener("scroll",s)})}},[s,t]),m.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>ja(i,o),Rr):tj(t):Rr,[t,e])}function BS(t,e){e===void 0&&(e=[]);const n=m.useRef(null);return m.useEffect(()=>{n.current=null},e),m.useEffect(()=>{const r=t!==Rr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Ef(t,n.current):Rr}function WB(t){m.useEffect(()=>{if(!Ym)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function HB(t,e){return m.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function sj(t){return m.useMemo(()=>t?gB(t):null,[t])}const WS=[];function qB(t,e){e===void 0&&(e=Pl);const[n]=t,r=sj(n?dn(n):null),[s,i]=m.useState(WS);function o(){i(()=>t.length?t.map(c=>Z2(c)?r:new K0(e(c),c)):WS)}const l=ep({callback:o});return jr(()=>{l==null||l.disconnect(),o(),t.forEach(c=>l==null?void 0:l.observe(c))},[t]),s}function ij(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return zu(e)?e:t}function GB(t){let{measure:e}=t;const[n,r]=m.useState(null),s=m.useCallback(u=>{for(const{target:h}of u)if(zu(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),i=ep({callback:s}),o=m.useCallback(u=>{const h=ij(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[l,c]=_f(o);return m.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const KB=[{sensor:Y0,options:{}},{sensor:Q0,options:{}}],QB={current:{}},gh={draggable:{measure:OS},droppable:{measure:OS,strategy:du.WhileDragging,frequency:uv.Optimized},dragOverlay:{measure:Pl}};class Pc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const XB={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Pc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Nf},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:gh,measureDroppableContainers:Nf,windowRect:null,measuringScheduled:!1},oj={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Nf,draggableNodes:new Map,over:null,measureDroppableContainers:Nf},Bu=m.createContext(oj),aj=m.createContext(XB);function YB(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Pc}}}function JB(t,e){switch(e.type){case kt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case kt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case kt.DragEnd:case kt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case kt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new Pc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case kt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new Pc(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case kt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new Pc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function ZB(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=m.useContext(Bu),i=Sf(r),o=Sf(n==null?void 0:n.id);return m.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Zm(i)||document.activeElement===i.target)return;const l=s.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[c.current,u.current]){if(!h)continue;const f=q$(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function lj(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function eW(t){return m.useMemo(()=>({draggable:{...gh.draggable,...t==null?void 0:t.draggable},droppable:{...gh.droppable,...t==null?void 0:t.droppable},dragOverlay:{...gh.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function tW(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=m.useRef(!1),{x:o,y:l}=typeof s=="boolean"?{x:s,y:s}:s;jr(()=>{if(!o&&!l||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=K2(h,r);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=X2(u);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,l,r,n])}const tp=m.createContext({...Rr,scaleX:1,scaleY:1});var ei;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ei||(ei={}));const nW=m.memo(function(e){var n,r,s,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:h=KB,collisionDetection:f=uB,measuring:p,modifiers:g,...w}=e;const v=m.useReducer(JB,void 0,YB),[_,b]=v,[x,S]=J$(),[I,D]=m.useState(ei.Uninitialized),M=I===ei.Initialized,{draggable:{active:E,nodes:C,translate:N},droppable:{containers:k}}=_,A=E!=null?C.get(E):null,P=m.useRef({initial:null,translated:null}),R=m.useMemo(()=>{var Oe;return E!=null?{id:E,data:(Oe=A==null?void 0:A.data)!=null?Oe:QB,rect:P}:null},[E,A]),F=m.useRef(null),[ie,J]=m.useState(null),[Y,O]=m.useState(null),B=uu(w,Object.values(w)),U=$u("DndDescribedBy",o),W=m.useMemo(()=>k.getEnabled(),[k]),q=eW(p),{droppableRects:oe,measureDroppableContainers:ee,measuringScheduled:ne}=LB(W,{dragging:M,dependencies:[N.x,N.y],config:q.droppable}),se=MB(C,E),L=m.useMemo(()=>Y?Tf(Y):null,[Y]),X=Xu(),ue=VB(se,q.draggable.measure);tW({activeNode:E!=null?C.get(E):null,config:X.layoutShiftCompensation,initialRect:ue,measure:q.draggable.measure});const Q=US(se,q.draggable.measure,ue),te=US(se?se.parentElement:null),ae=m.useRef({activatorEvent:null,active:null,activeNode:se,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:k,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=k.getNodeFor((n=ae.current.over)==null?void 0:n.id),Pe=GB({measure:q.dragOverlay.measure}),pt=(r=Pe.nodeRef.current)!=null?r:se,We=M?(s=Pe.rect)!=null?s:Q:null,Je=!!(Pe.nodeRef.current&&Pe.rect),Cn=UB(Je?null:Q),He=sj(pt?dn(pt):null),Ge=$B(M?Te??se:null),or=qB(Ge),Fs=lj(g,{transform:{x:N.x-Cn.x,y:N.y-Cn.y,scaleX:1,scaleY:1},activatorEvent:Y,active:R,activeNodeRect:Q,containerNodeRect:te,draggingNodeRect:We,over:ae.current.over,overlayNodeRect:Pe.rect,scrollableAncestors:Ge,scrollableAncestorRects:or,windowRect:He}),Ol=L?ja(L,N):null,Hu=BB(Ge),Xi=BS(Hu),qu=BS(Hu,[Q]),cs=ja(Fs,Xi),Dr=We?fB(We,Fs):null,Yi=R&&Dr?f({active:R,collisionRect:Dr,droppableRects:oe,droppableContainers:W,pointerCoordinates:Ol}):null,Gu=aB(Yi,"id"),[ar,Ll]=m.useState(null),Ji=Je?Fs:ja(Fs,qu),Vl=dB(Ji,(i=ar==null?void 0:ar.rect)!=null?i:null,Q),Zi=m.useRef(null),Mr=m.useCallback((Oe,Wt)=>{let{sensor:St,options:hn}=Wt;if(F.current==null)return;const fn=C.get(F.current);if(!fn)return;const rn=Oe.nativeEvent,Ft=new St({active:F.current,activeNode:fn,event:rn,options:hn,context:ae,onAbort(Et){if(!C.get(Et))return;const{onDragAbort:In}=B.current,Hn={id:Et};In==null||In(Hn),x({type:"onDragAbort",event:Hn})},onPending(Et,kn,In,Hn){if(!C.get(Et))return;const{onDragPending:lr}=B.current,Or={id:Et,constraint:kn,initialCoordinates:In,offset:Hn};lr==null||lr(Or),x({type:"onDragPending",event:Or})},onStart(Et){const kn=F.current;if(kn==null)return;const In=C.get(kn);if(!In)return;const{onDragStart:Hn}=B.current,us={activatorEvent:rn,active:{id:kn,data:In.data,rect:P}};Zn.unstable_batchedUpdates(()=>{Hn==null||Hn(us),D(ei.Initializing),b({type:kt.DragStart,initialCoordinates:Et,active:kn}),x({type:"onDragStart",event:us}),J(Zi.current),O(rn)})},onMove(Et){b({type:kt.DragMove,coordinates:Et})},onEnd:zs(kt.DragEnd),onCancel:zs(kt.DragCancel)});Zi.current=Ft;function zs(Et){return async function(){const{active:In,collisions:Hn,over:us,scrollAdjustedTranslate:lr}=ae.current;let Or=null;if(In&&lr){const{cancelDrop:mn}=B.current;Or={activatorEvent:rn,active:In,collisions:Hn,delta:lr,over:us},Et===kt.DragEnd&&typeof mn=="function"&&await Promise.resolve(mn(Or))&&(Et=kt.DragCancel)}F.current=null,Zn.unstable_batchedUpdates(()=>{b({type:Et}),D(ei.Uninitialized),Ll(null),J(null),O(null),Zi.current=null;const mn=Et===kt.DragEnd?"onDragEnd":"onDragCancel";if(Or){const Go=B.current[mn];Go==null||Go(Or),x({type:mn,event:Or})}})}}},[C]),Ku=m.useCallback((Oe,Wt)=>(St,hn)=>{const fn=St.nativeEvent,rn=C.get(hn);if(F.current!==null||!rn||fn.dndKit||fn.defaultPrevented)return;const Ft={active:rn};Oe(St,Wt.options,Ft)===!0&&(fn.dndKit={capturedBy:Wt.sensor},F.current=hn,Mr(St,Wt))},[C,Mr]),eo=OB(h,Ku);WB(h),jr(()=>{Q&&I===ei.Initializing&&D(ei.Initialized)},[Q,I]),m.useEffect(()=>{const{onDragMove:Oe}=B.current,{active:Wt,activatorEvent:St,collisions:hn,over:fn}=ae.current;if(!Wt||!St)return;const rn={active:Wt,activatorEvent:St,collisions:hn,delta:{x:cs.x,y:cs.y},over:fn};Zn.unstable_batchedUpdates(()=>{Oe==null||Oe(rn),x({type:"onDragMove",event:rn})})},[cs.x,cs.y]),m.useEffect(()=>{const{active:Oe,activatorEvent:Wt,collisions:St,droppableContainers:hn,scrollAdjustedTranslate:fn}=ae.current;if(!Oe||F.current==null||!Wt||!fn)return;const{onDragOver:rn}=B.current,Ft=hn.get(Gu),zs=Ft&&Ft.rect.current?{id:Ft.id,rect:Ft.rect.current,data:Ft.data,disabled:Ft.disabled}:null,Et={active:Oe,activatorEvent:Wt,collisions:St,delta:{x:fn.x,y:fn.y},over:zs};Zn.unstable_batchedUpdates(()=>{Ll(zs),rn==null||rn(Et),x({type:"onDragOver",event:Et})})},[Gu]),jr(()=>{ae.current={activatorEvent:Y,active:R,activeNode:se,collisionRect:Dr,collisions:Yi,droppableRects:oe,draggableNodes:C,draggingNode:pt,draggingNodeRect:We,droppableContainers:k,over:ar,scrollableAncestors:Ge,scrollAdjustedTranslate:cs},P.current={initial:We,translated:Dr}},[R,se,Yi,Dr,C,pt,We,oe,k,ar,Ge,cs]),RB({...X,delta:N,draggingRect:Dr,pointerCoordinates:Ol,scrollableAncestors:Ge,scrollableAncestorRects:or});const Qu=m.useMemo(()=>({active:R,activeNode:se,activeNodeRect:Q,activatorEvent:Y,collisions:Yi,containerNodeRect:te,dragOverlay:Pe,draggableNodes:C,droppableContainers:k,droppableRects:oe,over:ar,measureDroppableContainers:ee,scrollableAncestors:Ge,scrollableAncestorRects:or,measuringConfiguration:q,measuringScheduled:ne,windowRect:He}),[R,se,Q,Y,Yi,te,Pe,C,k,oe,ar,ee,Ge,or,q,ne,He]),to=m.useMemo(()=>({activatorEvent:Y,activators:eo,active:R,activeNodeRect:Q,ariaDescribedById:{draggable:U},dispatch:b,draggableNodes:C,over:ar,measureDroppableContainers:ee}),[Y,eo,R,Q,b,U,C,ar,ee]);return Ee.createElement(G2.Provider,{value:S},Ee.createElement(Bu.Provider,{value:to},Ee.createElement(aj.Provider,{value:Qu},Ee.createElement(tp.Provider,{value:Vl},u)),Ee.createElement(ZB,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Ee.createElement(tB,{...l,hiddenTextDescribedById:U}));function Xu(){const Oe=(ie==null?void 0:ie.autoScrollEnabled)===!1,Wt=typeof c=="object"?c.enabled===!1:c===!1,St=M&&!Oe&&!Wt;return typeof c=="object"?{...c,enabled:St}:{enabled:St}}}),rW=m.createContext(null),HS="button",sW="Draggable";function iW(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=$u(sW),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:p}=m.useContext(Bu),{role:g=HS,roleDescription:w="draggable",tabIndex:v=0}=s??{},_=(c==null?void 0:c.id)===e,b=m.useContext(_?tp:rW),[x,S]=_f(),[I,D]=_f(),M=HB(o,e),E=uu(n);jr(()=>(f.set(e,{id:e,key:i,node:x,activatorNode:I,data:E}),()=>{const N=f.get(e);N&&N.key===i&&f.delete(e)}),[f,e]);const C=m.useMemo(()=>({role:g,tabIndex:v,"aria-disabled":r,"aria-pressed":_&&g===HS?!0:void 0,"aria-roledescription":w,"aria-describedby":h.draggable}),[r,g,v,_,w,h.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:C,isDragging:_,listeners:r?void 0:M,node:x,over:p,setNodeRef:S,setActivatorNodeRef:D,transform:b}}function cj(){return m.useContext(aj)}const oW="Droppable",aW={timeout:25};function uj(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=$u(oW),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(Bu),h=m.useRef({disabled:n}),f=m.useRef(!1),p=m.useRef(null),g=m.useRef(null),{disabled:w,updateMeasurementsFor:v,timeout:_}={...aW,...s},b=uu(v??r),x=m.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(b.current)?b.current:[b.current]),g.current=null},_)},[_]),S=ep({callback:x,disabled:w||!o}),I=m.useCallback((C,N)=>{S&&(N&&(S.unobserve(N),f.current=!1),C&&S.observe(C))},[S]),[D,M]=_f(I),E=uu(e);return m.useEffect(()=>{!S||!D.current||(S.disconnect(),f.current=!1,S.observe(D.current))},[D,S]),m.useEffect(()=>(l({type:kt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:D,rect:p,data:E}}),()=>l({type:kt.UnregisterDroppable,key:i,id:r})),[r]),m.useEffect(()=>{n!==h.current.disabled&&(l({type:kt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,l]),{active:o,rect:p,isOver:(c==null?void 0:c.id)===r,node:D,over:c,setNodeRef:M}}function lW(t){let{animation:e,children:n}=t;const[r,s]=m.useState(null),[i,o]=m.useState(null),l=Sf(n);return!n&&!r&&l&&s(l),jr(()=>{if(!i)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Ee.createElement(Ee.Fragment,null,n,r?m.cloneElement(r,{ref:o}):null)}const cW={x:0,y:0,scaleX:1,scaleY:1};function uW(t){let{children:e}=t;return Ee.createElement(Bu.Provider,{value:oj},Ee.createElement(tp.Provider,{value:cW},e))}const dW={position:"fixed",touchAction:"none"},hW=t=>Zm(t)?"transform 250ms ease":void 0,fW=m.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:l,style:c,transform:u,transition:h=hW}=t;if(!l)return null;const f=s?u:{...u,scaleX:1,scaleY:1},p={...dW,width:l.width,height:l.height,top:l.top,left:l.left,transform:zi.Transform.toString(f),transformOrigin:s&&r?sB(r,l):void 0,transition:typeof h=="function"?h(r):h,...c};return Ee.createElement(n,{className:o,style:p,ref:e},i)}),mW=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},pW=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:zi.Transform.toString(e)},{transform:zi.Transform.toString(n)}]},gW={duration:250,easing:"ease",keyframes:pW,sideEffects:mW({styles:{active:{opacity:"0"}}})};function yW(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return Jm((i,o)=>{if(e===null)return;const l=n.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=ij(o);if(!u)return;const{transform:h}=dn(o).getComputedStyle(o),f=Q2(h);if(!f)return;const p=typeof e=="function"?e:vW(e);return nj(c,s.draggable.measure),p({active:{id:i,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function vW(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...gW,...t};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!e)return;const h={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-h.x,y:c.y-h.y,...f},g=s({...u,active:o,dragOverlay:l,transform:{initial:c,final:p}}),[w]=g,v=g[g.length-1];if(JSON.stringify(w)===JSON.stringify(v))return;const _=r==null?void 0:r({active:o,dragOverlay:l,...u}),b=l.node.animate(g,{duration:e,easing:n,fill:"forwards"});return new Promise(x=>{b.onfinish=()=>{_==null||_(),x()}})}}let qS=0;function xW(t){return m.useMemo(()=>{if(t!=null)return qS++,qS},[t])}const wW=Ee.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:g,draggableNodes:w,droppableContainers:v,dragOverlay:_,over:b,measuringConfiguration:x,scrollableAncestors:S,scrollableAncestorRects:I,windowRect:D}=cj(),M=m.useContext(tp),E=xW(f==null?void 0:f.id),C=lj(o,{activatorEvent:h,active:f,activeNodeRect:p,containerNodeRect:g,draggingNodeRect:_.rect,over:b,overlayNodeRect:_.rect,scrollableAncestors:S,scrollableAncestorRects:I,transform:M,windowRect:D}),N=J0(p),k=yW({config:r,draggableNodes:w,droppableContainers:v,measuringConfiguration:x}),A=N?_.setRef:void 0;return Ee.createElement(uW,null,Ee.createElement(lW,{animation:k},f&&E?Ee.createElement(fW,{key:E,id:f.id,ref:A,as:l,activatorEvent:h,adjustScale:e,className:c,transition:i,rect:N,style:{zIndex:u,...s},transform:C},n):null))});function dj(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function bW(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function Fd(t){return t!==null&&t>=0}function _W(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function SW(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const hj=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=dj(e,r,n),o=e[s],l=i[s];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},zd={scaleX:1,scaleY:1},EW=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const l=(e=i[n])!=null?e:r;if(!l)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(l.top+l.height):u.top-l.top,...zd}:null}const c=TW(i,s,n);return s>n&&s<=o?{x:0,y:-l.height-c,...zd}:s<n&&s>=o?{x:0,y:l.height+c,...zd}:{x:0,y:0,...zd}};function TW(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const fj="Sortable",mj=Ee.createContext({activeIndex:-1,containerId:fj,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:hj,disabled:{draggable:!1,droppable:!1}});function NW(t){let{children:e,id:n,items:r,strategy:s=hj,disabled:i=!1}=t;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=cj(),f=$u(fj,n),p=l.rect!==null,g=m.useMemo(()=>r.map(M=>typeof M=="object"&&"id"in M?M.id:M),[r]),w=o!=null,v=o?g.indexOf(o.id):-1,_=u?g.indexOf(u.id):-1,b=m.useRef(g),x=!_W(g,b.current),S=_!==-1&&v===-1||x,I=SW(i);jr(()=>{x&&w&&h(g)},[x,g,w,h]),m.useEffect(()=>{b.current=g},[g]);const D=m.useMemo(()=>({activeIndex:v,containerId:f,disabled:I,disableTransforms:S,items:g,overIndex:_,useDragOverlay:p,sortedRects:bW(g,c),strategy:s}),[v,f,I.draggable,I.droppable,S,g,_,c,p,s]);return Ee.createElement(mj.Provider,{value:D},e)}const CW=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return dj(n,r,s).indexOf(e)},kW=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=t;return!u||!r||l!==i&&s===o?!1:n?!0:o!==s&&e===c},IW={duration:200,easing:"ease"},pj="transform",AW=zi.Transition.toString({property:pj,duration:0,easing:"linear"}),jW={roleDescription:"sortable"};function RW(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=m.useState(null),l=m.useRef(n);return jr(()=>{if(!e&&n!==l.current&&r.current){const c=s.current;if(c){const u=Pl(r.current,{ignoreTransform:!0}),h={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(h.x||h.y)&&o(h)}}n!==l.current&&(l.current=n)},[e,n,r,s]),m.useEffect(()=>{i&&o(null)},[i]),i}function PW(t){let{animateLayoutChanges:e=kW,attributes:n,disabled:r,data:s,getNewIndex:i=CW,id:o,strategy:l,resizeObserverConfig:c,transition:u=IW}=t;const{items:h,containerId:f,activeIndex:p,disabled:g,disableTransforms:w,sortedRects:v,overIndex:_,useDragOverlay:b,strategy:x}=m.useContext(mj),S=DW(r,g),I=h.indexOf(o),D=m.useMemo(()=>({sortable:{containerId:f,index:I,items:h},...s}),[f,s,I,h]),M=m.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:E,node:C,isOver:N,setNodeRef:k}=uj({id:o,data:D,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:M,...c}}),{active:A,activatorEvent:P,activeNodeRect:R,attributes:F,setNodeRef:ie,listeners:J,isDragging:Y,over:O,setActivatorNodeRef:B,transform:U}=iW({id:o,data:D,attributes:{...jW,...n},disabled:S.draggable}),W=$$(k,ie),q=!!A,oe=q&&!w&&Fd(p)&&Fd(_),ee=!b&&Y,ne=ee&&oe?U:null,L=oe?ne??(l??x)({rects:v,activeNodeRect:R,activeIndex:p,overIndex:_,index:I}):null,X=Fd(p)&&Fd(_)?i({id:o,items:h,activeIndex:p,overIndex:_}):I,ue=A==null?void 0:A.id,Q=m.useRef({activeId:ue,items:h,newIndex:X,containerId:f}),te=h!==Q.current.items,ae=e({active:A,containerId:f,isDragging:Y,isSorting:q,id:o,index:I,items:h,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:u,wasDragging:Q.current.activeId!=null}),Te=RW({disabled:!ae,index:I,node:C,rect:E});return m.useEffect(()=>{q&&Q.current.newIndex!==X&&(Q.current.newIndex=X),f!==Q.current.containerId&&(Q.current.containerId=f),h!==Q.current.items&&(Q.current.items=h)},[q,X,f,h]),m.useEffect(()=>{if(ue===Q.current.activeId)return;if(ue!=null&&Q.current.activeId==null){Q.current.activeId=ue;return}const pt=setTimeout(()=>{Q.current.activeId=ue},50);return()=>clearTimeout(pt)},[ue]),{active:A,activeIndex:p,attributes:F,data:D,rect:E,index:I,newIndex:X,items:h,isOver:N,isSorting:q,isDragging:Y,listeners:J,node:C,overIndex:_,over:O,setNodeRef:W,setActivatorNodeRef:B,setDroppableNodeRef:k,setDraggableNodeRef:ie,transform:Te??L,transition:Pe()};function Pe(){if(Te||te&&Q.current.newIndex===I)return AW;if(!(ee&&!Zm(P)||!u)&&(q||ae))return zi.Transition.toString({...u,property:pj})}}function DW(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Le.Down,Le.Right,Le.Up,Le.Left;function Ve({className:t,...e}){return a.jsx("div",{className:$("animate-pulse rounded-md bg-muted",t),...e})}const je=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));je.displayName="Card";const Ke=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("flex flex-col space-y-1.5 p-6",t),...e}));Ke.displayName="CardHeader";const st=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("text-2xl font-semibold leading-none tracking-tight",t),...e}));st.displayName="CardTitle";const gn=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("text-sm text-muted-foreground",t),...e}));gn.displayName="CardDescription";const Ue=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("p-6 pt-0",t),...e}));Ue.displayName="CardContent";const Z0=m.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:$("flex items-center p-6 pt-0",t),...e}));Z0.displayName="CardFooter";function gj(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function yj(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function vj({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:l,transition:c,isDragging:u}=PW({id:t.id}),h={transform:zi.Transform.toString(l),transition:c},f=yj(t.dueDate),p=f!==null&&f<=1&&f>=0,g=t.systemStatus==="overdue"||f!==null&&f<0;return a.jsx(je,{ref:o,style:h,className:$("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",g&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx(ir,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),a.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:w=>w.stopPropagation(),children:a.jsx(j5,{className:"h-4 w-4 text-muted-foreground"})})]}),a.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Wi,{className:"h-3.5 w-3.5"}),a.jsx("span",{className:$(g&&"text-destructive",p&&!g&&"text-foreground font-medium"),children:gj(t.dueDate)}),g&&a.jsx(Un,{className:"h-3.5 w-3.5 text-destructive"}),p&&!g&&a.jsx(vC,{className:"h-3.5 w-3.5 text-foreground"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&a.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[a.jsx(Xa,{className:"h-3.5 w-3.5 text-muted-foreground"}),a.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Xa,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Submitted"})]})]}),a.jsx("div",{className:"flex items-center gap-1",children:n&&a.jsx(_o,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function MW({assignment:t,onClick:e}){const n=yj(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[a.jsx("span",{className:$("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:gj(t.dueDate)}),r&&a.jsx(Un,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const ew=m.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:$("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));ew.displayName="Textarea";var OW="Separator",GS="horizontal",LW=["horizontal","vertical"],xj=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=GS,...s}=t,i=VW(r)?r:GS,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(ge.div,{"data-orientation":i,...l,...s,ref:e})});xj.displayName=OW;function VW(t){return LW.includes(t)}var wj=xj;const xr=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(wj,{ref:s,decorative:n,orientation:e,className:$("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));xr.displayName=wj.displayName;var tw="Dialog",[bj,_j]=Wn(tw),[FW,Pr]=bj(tw),Sj=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u=!1,h]=Ns({prop:r,defaultProp:s,onChange:i});return a.jsx(FW,{scope:e,triggerRef:l,contentRef:c,contentId:Jr(),titleId:Jr(),descriptionId:Jr(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};Sj.displayName=tw;var Ej="DialogTrigger",Tj=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Pr(Ej,n),i=Ne(e,s.triggerRef);return a.jsx(ge.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":sw(s.open),...r,ref:i,onClick:me(t.onClick,s.onOpenToggle)})});Tj.displayName=Ej;var nw="DialogPortal",[zW,Nj]=bj(nw,{forceMount:void 0}),Cj=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=Pr(nw,e);return a.jsx(zW,{scope:e,forceMount:n,children:m.Children.map(r,o=>a.jsx(Nn,{present:n||i.open,children:a.jsx(pl,{asChild:!0,container:s,children:o})}))})};Cj.displayName=nw;var kf="DialogOverlay",kj=m.forwardRef((t,e)=>{const n=Nj(kf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Pr(kf,t.__scopeDialog);return i.modal?a.jsx(Nn,{present:r||i.open,children:a.jsx($W,{...s,ref:e})}):null});kj.displayName=kf;var UW=jo("DialogOverlay.RemoveScroll"),$W=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Pr(kf,n);return a.jsx(Gm,{as:UW,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(ge.div,{"data-state":sw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),zo="DialogContent",Ij=m.forwardRef((t,e)=>{const n=Nj(zo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=Pr(zo,t.__scopeDialog);return a.jsx(Nn,{present:r||i.open,children:i.modal?a.jsx(BW,{...s,ref:e}):a.jsx(WW,{...s,ref:e})})});Ij.displayName=zo;var BW=m.forwardRef((t,e)=>{const n=Pr(zo,t.__scopeDialog),r=m.useRef(null),s=Ne(e,n.contentRef,r);return m.useEffect(()=>{const i=r.current;if(i)return L0(i)},[]),a.jsx(Aj,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:me(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:me(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:me(t.onFocusOutside,i=>i.preventDefault())})}),WW=m.forwardRef((t,e)=>{const n=Pr(zo,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return a.jsx(Aj,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),Aj=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=Pr(zo,n),c=m.useRef(null),u=Ne(e,c);return O0(),a.jsxs(a.Fragment,{children:[a.jsx(Hm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(ml,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":sw(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(qW,{titleId:l.titleId}),a.jsx(KW,{contentRef:c,descriptionId:l.descriptionId})]})]})}),rw="DialogTitle",jj=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Pr(rw,n);return a.jsx(ge.h2,{id:s.titleId,...r,ref:e})});jj.displayName=rw;var Rj="DialogDescription",Pj=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Pr(Rj,n);return a.jsx(ge.p,{id:s.descriptionId,...r,ref:e})});Pj.displayName=Rj;var Dj="DialogClose",Mj=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Pr(Dj,n);return a.jsx(ge.button,{type:"button",...r,ref:e,onClick:me(t.onClick,()=>s.onOpenChange(!1))})});Mj.displayName=Dj;function sw(t){return t?"open":"closed"}var Oj="DialogTitleWarning",[HW,Lj]=IO(Oj,{contentName:zo,titleName:rw,docsSlug:"dialog"}),qW=({titleId:t})=>{const e=Lj(Oj),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},GW="DialogDescriptionWarning",KW=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Lj(GW).contentName}}.`;return m.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Vj=Sj,QW=Tj,Fj=Cj,iw=kj,ow=Ij,aw=jj,lw=Pj,cw=Mj;const XW=Vj,YW=Fj,zj=m.forwardRef(({className:t,...e},n)=>a.jsx(iw,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));zj.displayName=iw.displayName;const JW=Su("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Uj=m.forwardRef(({side:t="right",className:e,children:n,...r},s)=>a.jsxs(YW,{children:[a.jsx(zj,{}),a.jsxs(ow,{ref:s,className:$(JW({side:t}),e),...r,children:[n,a.jsxs(cw,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(Po,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Uj.displayName=ow.displayName;const $j=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});$j.displayName="SheetHeader";const Bj=m.forwardRef(({className:t,...e},n)=>a.jsx(aw,{ref:n,className:$("text-lg font-semibold text-foreground",t),...e}));Bj.displayName=aw.displayName;const ZW=m.forwardRef(({className:t,...e},n)=>a.jsx(lw,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));ZW.displayName=lw.displayName;function eH(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function tH(t){return t?` at ${t}`:""}function nH({assignment:t}){const e=t.systemStatus==="submitted"||t.systemStatus==="graded"||!!t.submittedAt,n=t.systemStatus==="graded"||!!t.gradedAt||t.grade!==null,r=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:e,date:t.submittedAt},{id:"graded",label:t.grade!==null?`Graded (${t.grade}${t.maxPoints?`/${t.maxPoints}`:""})`:"Graded",completed:n,date:t.gradedAt}];return a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),a.jsx("div",{className:"space-y-4",children:r.map((s,i)=>a.jsxs("div",{className:"flex items-start gap-3 relative",children:[a.jsx("div",{className:$("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",s.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:s.completed&&a.jsx(Xa,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:$("text-sm",s.completed?"font-medium":"text-muted-foreground"),children:s.label}),s.date&&s.completed&&a.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},s.id))})]})]})}function rH({note:t,onUpdate:e,onDelete:n}){const[r,s]=m.useState(!1),[i,o]=m.useState(t.content),l=()=>{e(i,t.isImportant),s(!1)};return a.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&a.jsx(Cy,{className:"h-3.5 w-3.5 fill-current text-foreground"}),a.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(he,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:a.jsx(Cy,{className:$("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),a.jsx(he,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:a.jsx(L5,{className:"h-3.5 w-3.5"})}),a.jsx(he,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:a.jsx($5,{className:"h-3.5 w-3.5"})})]})]}),r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(ew,{value:i,onChange:c=>o(c.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(he,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),a.jsxs(he,{size:"sm",onClick:l,"data-testid":`button-save-note-${t.id}`,children:[a.jsx(Sx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):a.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function uw({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=xn(),[l,c]=m.useState(""),[u,h]=m.useState(!1);if(!t)return null;const f=r(t.id),p=t.systemStatus==="overdue",g=()=>{l.trim()&&(s(t.id,l.trim()),c(""),h(!1))};return a.jsx(XW,{open:e,onOpenChange:n,children:a.jsxs(Uj,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[a.jsx($j,{className:"space-y-4",children:a.jsx("div",{className:"flex items-start justify-between gap-4",children:a.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[a.jsx(ir,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),a.jsx(Bj,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),a.jsxs("div",{className:"mt-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(Wi,{className:"h-4 w-4 text-muted-foreground"}),a.jsxs("span",{className:$(p&&"text-destructive"),children:[eH(t.dueDate),tH(t.dueTime)]}),p&&a.jsx(Un,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?a.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):a.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),a.jsx(xr,{}),t.description&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Description"}),a.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),a.jsx(xr,{})]}),a.jsx(nH,{assignment:t}),a.jsx(xr,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&a.jsxs(he,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[a.jsx(V5,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(ew,{value:l,onChange:w=>c(w.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(he,{variant:"ghost",size:"sm",onClick:()=>{h(!1),c("")},children:"Cancel"}),a.jsxs(he,{size:"sm",onClick:g,disabled:!l.trim(),"data-testid":"button-save-new-note",children:[a.jsx(Sx,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?a.jsx("div",{className:"space-y-2",children:f.map(w=>a.jsx(rH,{note:w,onUpdate:(v,_)=>i(w.id,v,_),onDelete:()=>o(w.id,t.id)},w.id))}):!u&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&a.jsxs(a.Fragment,{children:[a.jsx(xr,{}),a.jsxs(he,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[a.jsx(Sy,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function Dl(){const{refreshAccessToken:t,signOut:e}=rt(),[n,r]=m.useState(!1),s=async()=>{r(!0);try{await t()?window.location.reload():alert("Unable to refresh. Please try signing in again.")}catch(i){console.error("Refresh error:",i)}finally{r(!1)}};return a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-8 p-6 bg-white",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:2rem_2rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_50%,#000_70%,transparent_100%)] pointer-events-none opacity-30"}),a.jsx("div",{className:"relative bg-zinc-50 border border-zinc-200 p-8 rounded-2xl shadow-sm",children:a.jsx(Ya,{className:"w-16 h-16 text-zinc-950",strokeWidth:1.5})})]}),a.jsxs("div",{className:"text-center space-y-3 max-w-md",children:[a.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Session Refresh Required"}),a.jsx("p",{className:"text-sm text-zinc-600 leading-relaxed",children:"To keep your data secure and up-to-date, please sign in again. This only takes a moment and your progress is saved."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full max-w-sm",children:[a.jsx(he,{onClick:s,disabled:n,className:"flex-1 h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md",children:n?a.jsxs(a.Fragment,{children:[a.jsx(Ya,{className:"h-4 w-4 animate-spin"}),a.jsx("span",{className:"font-medium",children:"Signing In..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(W2,{className:"h-4 w-4"}),a.jsx("span",{className:"font-medium",children:"Sign In Again"})]})}),a.jsx(he,{onClick:()=>e(),variant:"outline",className:"h-12 border-zinc-200 text-zinc-600 hover:bg-zinc-50 hover:text-zinc-900 rounded-md transition-colors",children:"Sign Out"})]}),a.jsx("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md max-w-sm w-full",children:a.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed text-center",children:[a.jsx("span",{className:"font-semibold text-zinc-900",children:"Your progress is safe."})," ","Signing in again will restore everything right where you left off."]})})]})}function sH({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=uj({id:t});return a.jsxs("div",{ref:o,className:$("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[a.jsx("h3",{className:"text-sm font-medium",children:e}),a.jsx(ir,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),a.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:a.jsx(NW,{items:n.map(l=>l.id),strategy:EW,children:n.length>0?n.map(l=>{var c;return a.jsx(vj,{assignment:l,onClick:()=>r(l),hasNotes:(((c=s.get(l.id))==null?void 0:c.length)||0)>0},l.id)}):a.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function iH(){return a.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6 opacity-40 pointer-events-none select-none filter grayscale",children:[1,2,3,4,5].map(t=>a.jsxs("div",{className:"flex flex-col min-w-[280px] w-[280px]",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[a.jsx(Ve,{className:"h-5 w-24"}),a.jsx(Ve,{className:"h-5 w-8"})]}),a.jsx("div",{className:"p-3 space-y-3",children:[1,2,3].map(e=>a.jsx(Ve,{className:"h-32 w-full"},e))})]},t))})}function oH(){var C;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o,error:l}=xn();rt();const[c,u]=m.useState(null),[h,f]=m.useState(null);if(l&&l.toLowerCase().includes("session")&&!(i.length>0))return a.jsx(Dl,{});if(n)return a.jsx(iH,{});const p=m.useRef(null),[g,w]=m.useState(!1),v=m.useRef({x:0,left:0}),_=nB(DS(Y0,{activationConstraint:{distance:8}}),DS(Q0)),b=t(),x=h?i.find(N=>N.id===h):null,S=N=>{f(N.active.id)},I=N=>{const{active:k,over:A}=N;if(f(null),!A)return;const P=k.id,R=A.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(R)){const F=i.find(ie=>ie.id===P);F&&F.systemStatus!==R&&(R==="in_progress"?e(P,"in_progress"):e(P,"backlog"))}},D=N=>{N.button===2&&p.current&&(N.preventDefault(),w(!0),v.current={x:N.pageX,left:p.current.scrollLeft})},M=m.useCallback(N=>{if(!g||!p.current)return;N.preventDefault();const A=(N.pageX-v.current.x)*1.5;p.current.scrollLeft=v.current.left-A},[g]),E=m.useCallback(()=>{w(!1)},[]);return m.useEffect(()=>(g?(window.addEventListener("mousemove",M),window.addEventListener("mouseup",E)):(window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",E)),()=>{window.removeEventListener("mousemove",M),window.removeEventListener("mouseup",E)}),[g,M,E]),a.jsxs(a.Fragment,{children:[l&&l.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Un,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:N=>{N.preventDefault(),window.location.reload()},children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsxs(nW,{sensors:_,collisionDetection:lB,onDragStart:S,onDragEnd:I,children:[a.jsxs("div",{className:"relative h-full flex flex-col",children:[a.jsx("div",{ref:p,className:$("flex gap-4 flex-1 overflow-x-auto p-6 pb-0 select-none",g?"cursor-grabbing":"cursor-grab"),onMouseDown:D,onContextMenu:N=>N.preventDefault(),children:b.map(N=>a.jsx(sH,{id:N.id,title:N.title,assignments:N.assignments,onCardClick:u,notes:s},N.id))}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(Ny,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]}),a.jsx(wW,{children:x&&a.jsx(vj,{assignment:x,isDragging:!0,hasNotes:(((C=s.get(x.id))==null?void 0:C.length)||0)>0})})]}),a.jsx(uw,{assignment:c,isOpen:!!c,onClose:()=>u(null)})]})}function Wj(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var aH=[" ","Enter","ArrowUp","ArrowDown"],lH=[" ","Enter"],Wu="Select",[np,rp,cH]=gx(Wu),[Ml,EG]=Wn(Wu,[cH,xl]),sp=xl(),[uH,Ki]=Ml(Wu),[dH,hH]=Ml(Wu),Hj=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:g,form:w}=t,v=sp(e),[_,b]=m.useState(null),[x,S]=m.useState(null),[I,D]=m.useState(!1),M=Km(u),[E=!1,C]=Ns({prop:r,defaultProp:s,onChange:i}),[N,k]=Ns({prop:o,defaultProp:l,onChange:c}),A=m.useRef(null),P=_?w||!!_.closest("form"):!0,[R,F]=m.useState(new Set),ie=Array.from(R).map(J=>J.props.value).join(";");return a.jsx(Mx,{...v,children:a.jsxs(uH,{required:g,scope:e,trigger:_,onTriggerChange:b,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:I,onValueNodeHasChildrenChange:D,contentId:Jr(),value:N,onValueChange:k,open:E,onOpenChange:C,dir:M,triggerPointerDownPosRef:A,disabled:p,children:[a.jsx(np.Provider,{scope:e,children:a.jsx(dH,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(J=>{F(Y=>new Set(Y).add(J))},[]),onNativeOptionRemove:m.useCallback(J=>{F(Y=>{const O=new Set(Y);return O.delete(J),O})},[]),children:n})}),P?a.jsxs(gR,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:N,onChange:J=>k(J.target.value),disabled:p,form:w,children:[N===void 0?a.jsx("option",{value:""}):null,Array.from(R)]},ie):null]})})};Hj.displayName=Wu;var qj="SelectTrigger",Gj=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=sp(n),o=Ki(qj,n),l=o.disabled||r,c=Ne(e,o.onTriggerChange),u=rp(n),h=m.useRef("touch"),[f,p,g]=yR(v=>{const _=u().filter(S=>!S.disabled),b=_.find(S=>S.value===o.value),x=vR(_,v,b);x!==void 0&&o.onValueChange(x.value)}),w=v=>{l||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(am,{asChild:!0,...i,children:a.jsx(ge.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":pR(o.value)?"":void 0,...s,ref:c,onClick:me(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&w(v)}),onPointerDown:me(s.onPointerDown,v=>{h.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(w(v),v.preventDefault())}),onKeyDown:me(s.onKeyDown,v=>{const _=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&p(v.key),!(_&&v.key===" ")&&aH.includes(v.key)&&(w(),v.preventDefault())})})})});Gj.displayName=qj;var Kj="SelectValue",Qj=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Ki(Kj,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Ne(e,c.onValueNodeChange);return _t(()=>{u(h)},[u,h]),a.jsx(ge.span,{...l,ref:f,style:{pointerEvents:"none"},children:pR(c.value)?a.jsx(a.Fragment,{children:o}):i})});Qj.displayName=Kj;var fH="SelectIcon",Xj=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(ge.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Xj.displayName=fH;var mH="SelectPortal",Yj=t=>a.jsx(pl,{asChild:!0,...t});Yj.displayName=mH;var Uo="SelectContent",Jj=m.forwardRef((t,e)=>{const n=Ki(Uo,t.__scopeSelect),[r,s]=m.useState();if(_t(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Zn.createPortal(a.jsx(Zj,{scope:t.__scopeSelect,children:a.jsx(np.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(eR,{...t,ref:e})});Jj.displayName=Uo;var dr=10,[Zj,Qi]=Ml(Uo),pH="SelectContentImpl",gH=jo("SelectContent.RemoveScroll"),eR=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_,...b}=t,x=Ki(Uo,n),[S,I]=m.useState(null),[D,M]=m.useState(null),E=Ne(e,L=>I(L)),[C,N]=m.useState(null),[k,A]=m.useState(null),P=rp(n),[R,F]=m.useState(!1),ie=m.useRef(!1);m.useEffect(()=>{if(S)return L0(S)},[S]),O0();const J=m.useCallback(L=>{const[X,...ue]=P().map(ae=>ae.ref.current),[Q]=ue.slice(-1),te=document.activeElement;for(const ae of L)if(ae===te||(ae==null||ae.scrollIntoView({block:"nearest"}),ae===X&&D&&(D.scrollTop=0),ae===Q&&D&&(D.scrollTop=D.scrollHeight),ae==null||ae.focus(),document.activeElement!==te))return},[P,D]),Y=m.useCallback(()=>J([C,S]),[J,C,S]);m.useEffect(()=>{R&&Y()},[R,Y]);const{onOpenChange:O,triggerPointerDownPosRef:B}=x;m.useEffect(()=>{if(S){let L={x:0,y:0};const X=Q=>{var te,ae;L={x:Math.abs(Math.round(Q.pageX)-(((te=B.current)==null?void 0:te.x)??0)),y:Math.abs(Math.round(Q.pageY)-(((ae=B.current)==null?void 0:ae.y)??0))}},ue=Q=>{L.x<=10&&L.y<=10?Q.preventDefault():S.contains(Q.target)||O(!1),document.removeEventListener("pointermove",X),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",X),document.addEventListener("pointerup",ue,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",X),document.removeEventListener("pointerup",ue,{capture:!0})}}},[S,O,B]),m.useEffect(()=>{const L=()=>O(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[O]);const[U,W]=yR(L=>{const X=P().filter(te=>!te.disabled),ue=X.find(te=>te.ref.current===document.activeElement),Q=vR(X,L,ue);Q&&setTimeout(()=>Q.ref.current.focus())}),q=m.useCallback((L,X,ue)=>{const Q=!ie.current&&!ue;(x.value!==void 0&&x.value===X||Q)&&(N(L),Q&&(ie.current=!0))},[x.value]),oe=m.useCallback(()=>S==null?void 0:S.focus(),[S]),ee=m.useCallback((L,X,ue)=>{const Q=!ie.current&&!ue;(x.value!==void 0&&x.value===X||Q)&&A(L)},[x.value]),ne=r==="popper"?dv:tR,se=ne===dv?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:w,hideWhenDetached:v,avoidCollisions:_}:{};return a.jsx(Zj,{scope:n,content:S,viewport:D,onViewportChange:M,itemRefCallback:q,selectedItem:C,onItemLeave:oe,itemTextRefCallback:ee,focusSelectedItem:Y,selectedItemText:k,position:r,isPositioned:R,searchRef:U,children:a.jsx(Gm,{as:gH,allowPinchZoom:!0,children:a.jsx(Hm,{asChild:!0,trapped:x.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:me(s,L=>{var X;(X=x.trigger)==null||X.focus({preventScroll:!0}),L.preventDefault()}),children:a.jsx(ml,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:a.jsx(ne,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:L=>L.preventDefault(),...b,...se,onPlaced:()=>F(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:me(b.onKeyDown,L=>{const X=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!X&&L.key.length===1&&W(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let Q=P().filter(te=>!te.disabled).map(te=>te.ref.current);if(["ArrowUp","End"].includes(L.key)&&(Q=Q.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const te=L.target,ae=Q.indexOf(te);Q=Q.slice(ae+1)}setTimeout(()=>J(Q)),L.preventDefault()}})})})})})})});eR.displayName=pH;var yH="SelectItemAlignedPosition",tR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ki(Uo,n),o=Qi(Uo,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=Ne(e,E=>h(E)),p=rp(n),g=m.useRef(!1),w=m.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:b,focusSelectedItem:x}=o,S=m.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&v&&_&&b){const E=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),k=b.getBoundingClientRect();if(i.dir!=="rtl"){const te=k.left-C.left,ae=N.left-te,Te=E.left-ae,Pe=E.width+Te,pt=Math.max(Pe,C.width),We=window.innerWidth-dr,Je=av(ae,[dr,Math.max(dr,We-pt)]);l.style.minWidth=Pe+"px",l.style.left=Je+"px"}else{const te=C.right-k.right,ae=window.innerWidth-N.right-te,Te=window.innerWidth-E.right-ae,Pe=E.width+Te,pt=Math.max(Pe,C.width),We=window.innerWidth-dr,Je=av(ae,[dr,Math.max(dr,We-pt)]);l.style.minWidth=Pe+"px",l.style.right=Je+"px"}const A=p(),P=window.innerHeight-dr*2,R=v.scrollHeight,F=window.getComputedStyle(u),ie=parseInt(F.borderTopWidth,10),J=parseInt(F.paddingTop,10),Y=parseInt(F.borderBottomWidth,10),O=parseInt(F.paddingBottom,10),B=ie+J+R+O+Y,U=Math.min(_.offsetHeight*5,B),W=window.getComputedStyle(v),q=parseInt(W.paddingTop,10),oe=parseInt(W.paddingBottom,10),ee=E.top+E.height/2-dr,ne=P-ee,se=_.offsetHeight/2,L=_.offsetTop+se,X=ie+J+L,ue=B-X;if(X<=ee){const te=A.length>0&&_===A[A.length-1].ref.current;l.style.bottom="0px";const ae=u.clientHeight-v.offsetTop-v.offsetHeight,Te=Math.max(ne,se+(te?oe:0)+ae+Y),Pe=X+Te;l.style.height=Pe+"px"}else{const te=A.length>0&&_===A[0].ref.current;l.style.top="0px";const Te=Math.max(ee,ie+v.offsetTop+(te?q:0)+se)+ue;l.style.height=Te+"px",v.scrollTop=X-ee+v.offsetTop}l.style.margin=`${dr}px 0`,l.style.minHeight=U+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,l,u,v,_,b,i.dir,r]);_t(()=>S(),[S]);const[I,D]=m.useState();_t(()=>{u&&D(window.getComputedStyle(u).zIndex)},[u]);const M=m.useCallback(E=>{E&&w.current===!0&&(S(),x==null||x(),w.current=!1)},[S,x]);return a.jsx(xH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:M,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:a.jsx(ge.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});tR.displayName=yH;var vH="SelectPopperPosition",dv=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=dr,...i}=t,o=sp(n);return a.jsx(Ox,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dv.displayName=vH;var[xH,dw]=Ml(Uo,{}),hv="SelectViewport",nR=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Qi(hv,n),o=dw(hv,n),l=Ne(e,i.onViewportChange),c=m.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(np.Slot,{scope:n,children:a.jsx(ge.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:me(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const w=window.innerHeight-dr*2,v=parseFloat(f.style.minHeight),_=parseFloat(f.style.height),b=Math.max(v,_);if(b<w){const x=b+g,S=Math.min(w,x),I=x-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});nR.displayName=hv;var rR="SelectGroup",[wH,bH]=Ml(rR),_H=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Jr();return a.jsx(wH,{scope:n,id:s,children:a.jsx(ge.div,{role:"group","aria-labelledby":s,...r,ref:e})})});_H.displayName=rR;var sR="SelectLabel",iR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=bH(sR,n);return a.jsx(ge.div,{id:s.id,...r,ref:e})});iR.displayName=sR;var If="SelectItem",[SH,oR]=Ml(If),aR=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Ki(If,n),c=Qi(If,n),u=l.value===r,[h,f]=m.useState(i??""),[p,g]=m.useState(!1),w=Ne(e,x=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,x,r,s)}),v=Jr(),_=m.useRef("touch"),b=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(SH,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:m.useCallback(x=>{f(S=>S||((x==null?void 0:x.textContent)??"").trim())},[]),children:a.jsx(np.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(ge.div,{role:"option","aria-labelledby":v,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:w,onFocus:me(o.onFocus,()=>g(!0)),onBlur:me(o.onBlur,()=>g(!1)),onClick:me(o.onClick,()=>{_.current!=="mouse"&&b()}),onPointerUp:me(o.onPointerUp,()=>{_.current==="mouse"&&b()}),onPointerDown:me(o.onPointerDown,x=>{_.current=x.pointerType}),onPointerMove:me(o.onPointerMove,x=>{var S;_.current=x.pointerType,s?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:me(o.onPointerLeave,x=>{var S;x.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:me(o.onKeyDown,x=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&x.key===" "||(lH.includes(x.key)&&b(),x.key===" "&&x.preventDefault())})})})})});aR.displayName=If;var hc="SelectItemText",lR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Ki(hc,n),l=Qi(hc,n),c=oR(hc,n),u=hH(hc,n),[h,f]=m.useState(null),p=Ne(e,b=>f(b),c.onItemTextChange,b=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,b,c.value,c.disabled)}),g=h==null?void 0:h.textContent,w=m.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=u;return _t(()=>(v(w),()=>_(w)),[v,_,w]),a.jsxs(a.Fragment,{children:[a.jsx(ge.span,{id:c.textId,...i,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Zn.createPortal(i.children,o.valueNode):null]})});lR.displayName=hc;var cR="SelectItemIndicator",uR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return oR(cR,n).isSelected?a.jsx(ge.span,{"aria-hidden":!0,...r,ref:e}):null});uR.displayName=cR;var fv="SelectScrollUpButton",dR=m.forwardRef((t,e)=>{const n=Qi(fv,t.__scopeSelect),r=dw(fv,t.__scopeSelect),[s,i]=m.useState(!1),o=Ne(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(fR,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});dR.displayName=fv;var mv="SelectScrollDownButton",hR=m.forwardRef((t,e)=>{const n=Qi(mv,t.__scopeSelect),r=dw(mv,t.__scopeSelect),[s,i]=m.useState(!1),o=Ne(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(fR,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});hR.displayName=mv;var fR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Qi("SelectScrollButton",n),o=m.useRef(null),l=rp(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),_t(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(ge.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:me(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:me(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:me(s.onPointerLeave,()=>{c()})})}),EH="SelectSeparator",mR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(ge.div,{"aria-hidden":!0,...r,ref:e})});mR.displayName=EH;var pv="SelectArrow",TH=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=sp(n),i=Ki(pv,n),o=Qi(pv,n);return i.open&&o.position==="popper"?a.jsx(Lx,{...s,...r,ref:e}):null});TH.displayName=pv;function pR(t){return t===""||t===void 0}var gR=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=m.useRef(null),i=Ne(e,s),o=Wj(n);return m.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),a.jsx(_u,{asChild:!0,children:a.jsx("select",{...r,ref:i,defaultValue:n})})});gR.displayName="BubbleSelect";function yR(t){const e=mt(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function vR(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=NH(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function NH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var CH=Hj,xR=Gj,kH=Qj,IH=Xj,AH=Yj,wR=Jj,jH=nR,bR=iR,_R=aR,RH=lR,PH=uR,SR=dR,ER=hR,TR=mR;const Af=CH,jf=kH,hu=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(xR,{ref:r,className:$("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(IH,{asChild:!0,children:a.jsx(yC,{className:"h-4 w-4 opacity-50"})})]}));hu.displayName=xR.displayName;const NR=m.forwardRef(({className:t,...e},n)=>a.jsx(SR,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(N5,{className:"h-4 w-4"})}));NR.displayName=SR.displayName;const CR=m.forwardRef(({className:t,...e},n)=>a.jsx(ER,{ref:n,className:$("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(yC,{className:"h-4 w-4"})}));CR.displayName=ER.displayName;const fu=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(AH,{children:a.jsxs(wR,{ref:s,className:$("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(NR,{}),a.jsx(jH,{className:$("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(CR,{})]})}));fu.displayName=wR.displayName;const DH=m.forwardRef(({className:t,...e},n)=>a.jsx(bR,{ref:n,className:$("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));DH.displayName=bR.displayName;const Ct=m.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(_R,{ref:r,className:$("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(PH,{children:a.jsx(Wh,{className:"h-4 w-4"})})}),a.jsx(RH,{children:e})]}));Ct.displayName=_R.displayName;const MH=m.forwardRef(({className:t,...e},n)=>a.jsx(TR,{ref:n,className:$("-mx-1 my-1 h-px bg-muted",t),...e}));MH.displayName=TR.displayName;function OH(t){return W0({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}function LH(){return a.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx(Ve,{className:"h-10 w-40"}),a.jsx(Ve,{className:"h-10 w-40"})]}),[1,2,3].map(t=>a.jsxs("div",{className:"space-y-3",children:[a.jsx(Ve,{className:"h-6 w-32"}),a.jsx("div",{className:"space-y-2",children:[1,2].map(e=>a.jsx(Ve,{className:"h-16 w-full"},e))})]},t))]})}const Ud={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},VH=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},FH=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},Eg=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,KS=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function zH(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=xn();rt();const[o,l]=m.useState(null),[c,u]=m.useState(null),[h,f]=m.useState(null),[p,g]=m.useState("timeline"),[w,v]=m.useState(1),[_,b]=m.useState(!1),[x]=m.useState([]);if(n)return a.jsx(LH,{});const S=m.useMemo(()=>{let N=[...s,...x];return o&&(N=N.filter(k=>k.courseId===o)),c&&(N=N.filter(k=>k.systemStatus===c)),N},[s,x,o,c]),I=()=>{l(null),u(null)},D=o||c,M=()=>{const N=m.useRef(null),[k,A]=m.useState(!1),P=m.useRef({x:0,left:0}),F=60*w,{earliestDate:ie,latestDate:J,initialScrollPosition:Y}=m.useMemo(()=>{const L=new Date;L.setHours(0,0,0,0);let X=new Date,ue=new Date;if(S.length>0){const We=S.flatMap(Je=>{const Cn=[];return Je.dueDate&&Cn.push(new Date(Je.dueDate)),Je.createdAt&&Cn.push(new Date(Je.createdAt)),Cn});We.length>0&&(X=new Date(Math.min(...We.map(Je=>Je.getTime()))),ue=new Date(Math.max(...We.map(Je=>Je.getTime()))))}const Q=new Date(X);Q.setDate(Q.getDate()-30);const te=new Date(ue);te.setDate(te.getDate()+30);let ae=L;const Te=S.filter(We=>We.dueDate&&new Date(We.dueDate)>=L).sort((We,Je)=>new Date(We.dueDate).getTime()-new Date(Je.dueDate).getTime());Te.length>0&&(ae=new Date(Te[0].dueDate));const pt=Math.ceil((ae.getTime()-Q.getTime())/(1e3*3600*24))*F+F/2-window.innerWidth/2;return{earliestDate:Q,latestDate:te,initialScrollPosition:Math.max(0,pt)}},[S,F]),O=m.useMemo(()=>VH(ie,J),[ie,J]);m.useEffect(()=>{N.current&&(N.current.scrollLeft=Y)},[Y]);const B=L=>{L.button===2&&N.current&&(L.preventDefault(),A(!0),P.current={x:L.pageX,left:N.current.scrollLeft})},U=m.useCallback(L=>{if(!k||!N.current)return;L.preventDefault();const ue=(L.pageX-P.current.x)*1.5;N.current.scrollLeft=P.current.left-ue},[k]),W=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(k?(window.addEventListener("mousemove",U),window.addEventListener("mouseup",W)):(window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",W)),()=>{window.removeEventListener("mousemove",U),window.removeEventListener("mouseup",W)}),[k,U,W]);const[q,oe]=m.useState(!1),[ee,ne]=m.useState(!1),se=m.useRef(null);return m.useEffect(()=>{const L=()=>{if(se.current){const{scrollHeight:ue,clientHeight:Q,scrollTop:te}=se.current;oe(ue>Q),ne(te+Q>=ue-10)}};L();const X=se.current;return X==null||X.addEventListener("scroll",L),window.addEventListener("resize",L),()=>{X==null||X.removeEventListener("scroll",L),window.removeEventListener("resize",L)}},[S,_]),a.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[a.jsx("div",{ref:L=>{N.current=L,se.current=L},className:$("flex-1 overflow-auto relative select-none",k?"cursor-grabbing":"cursor-default"),onMouseDown:B,onContextMenu:L=>L.preventDefault(),children:a.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${O.length*F}px`},children:[a.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:O.map((L,X)=>{const ue=KS(L);return a.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:F},children:[a.jsx("span",{className:$("text-[10px] uppercase font-bold tracking-wider mb-1",ue?"text-foreground":"text-muted-foreground"),children:L.toLocaleDateString("en-US",{weekday:"narrow"})}),a.jsx("span",{className:$("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",ue?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:L.getDate()}),a.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border"})]},X)})}),a.jsxs("div",{className:"relative pt-6",style:{minHeight:_?`${Math.max(300,S.filter(L=>L.dueDate).length*40)}px`:`${Math.max(400,S.filter(L=>L.dueDate).length*60)}px`},children:[a.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:O.map((L,X)=>{const ue=KS(L);return a.jsx("div",{className:$("flex-shrink-0 h-full border-r border-border relative",ue?"bg-accent/50":""),style:{width:F},children:ue&&a.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},X)})}),a.jsx("div",{className:$("px-0 relative z-10 mt-2",_?"space-y-1":"space-y-3"),children:S.filter(L=>L.dueDate).map(L=>{const X=e.find(Fs=>Fs.id===L.courseId),ue=X==null?void 0:X.color,Q=L.systemStatus==="submitted"||L.systemStatus==="graded",te=L.createdAt?new Date(L.createdAt):new Date,ae=new Date(L.dueDate),Te=(te.getTime()-ie.getTime())/(1e3*3600*24),Pe=(ae.getTime()-te.getTime())/(1e3*3600*24),pt=Math.max(0,Te*F),We=Math.max(F,Pe*F),Je={left:`${pt}px`,width:`${We}px`,minWidth:_?"100px":"140px",backgroundColor:Q?void 0:ue,borderColor:Q?void 0:ue?"rgba(0,0,0,0.1)":void 0};Ud[L.systemStatus]||Ud.backlog;const Cn="bg-green-100/80 border-green-300 text-green-800",He="bg-card border shadow-sm "+(ue?"text-slate-900":"text-foreground"),Ge=_?"h-8":"h-12",or=_?"h-9":"h-14";return a.jsx("div",{className:$("relative group",or),children:a.jsxs("div",{onClick:()=>f(L),className:$("absolute top-0 rounded-lg border transition-all cursor-pointer flex flex-col justify-center overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",Ge,_?"px-2":"px-3",Q?Cn:He),style:Je,children:[a.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:a.jsxs("span",{className:$("truncate font-bold leading-none flex items-center gap-1",_?"text-[10px]":"text-xs"),children:[L.courseId==="system"&&a.jsx(_x,{className:$("inline-block",_?"h-2.5 w-2.5":"h-3 w-3")}),Q&&a.jsx(Wh,{className:$("inline-block mr-0.5",_?"h-2.5 w-2.5":"h-3 w-3")}),L.title]})}),!_&&a.jsx("div",{className:"flex items-center justify-between opacity-80",children:a.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:L.courseName})})]})},L.id)})})]})]})}),q&&!ee&&S.length>0&&a.jsx("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 z-40 animate-bounce pointer-events-none",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-full shadow-lg px-3 py-2 flex items-center gap-2",children:[a.jsx(N1,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5}),a.jsx("span",{className:"text-xs font-medium text-zinc-900 dark:text-zinc-100",children:"More tasks below"})]})}),a.jsxs("div",{className:"absolute bottom-20 right-6 z-40 flex flex-col gap-2",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-lg p-1 flex flex-col gap-1",children:[a.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const L=N.current,X=(L==null?void 0:L.scrollLeft)||0,ue=(L==null?void 0:L.scrollTop)||0,Q=Math.min(2,w+.25);v(Q),Q>.75&&b(!1),setTimeout(()=>{L&&(L.scrollLeft=X*(Q/w),L.scrollTop=ue)},0)},disabled:w>=2,title:"Zoom In (Normal View)",children:a.jsx(W5,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})}),a.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700"}),a.jsx(he,{variant:"ghost",size:"icon",className:"h-8 w-8 hover:bg-zinc-50 dark:hover:bg-zinc-800",onClick:()=>{const L=N.current,X=(L==null?void 0:L.scrollLeft)||0,ue=(L==null?void 0:L.scrollTop)||0,Q=Math.max(.5,w-.25);v(Q),Q<=.75&&b(!0),setTimeout(()=>{L&&(L.scrollLeft=X*(Q/w),L.scrollTop=ue)},0)},disabled:w<=.5,title:"Zoom Out (Compact View)",children:a.jsx(H5,{className:"h-4 w-4 text-zinc-950 dark:text-zinc-50",strokeWidth:1.5})})]}),a.jsxs("div",{className:"bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg shadow-sm px-2 py-1 text-center",children:[a.jsxs("span",{className:"text-[10px] font-mono text-zinc-600 dark:text-zinc-400",children:[Math.round(w*100),"%"]}),_&&a.jsx("div",{className:"text-[8px] text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mt-0.5",children:"Compact"})]})]}),a.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[a.jsx(Ny,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},E=()=>{const N=m.useRef(null),[k,A]=m.useState(!1),P=m.useRef({y:0,top:0}),R=m.useRef({}),[F,ie]=m.useState(!1),{startMonth:J,endMonth:Y}=m.useMemo(()=>{let ne=new Date,se=new Date;if(S.length>0){const ue=S.filter(Q=>Q.dueDate).map(Q=>new Date(Q.dueDate));ue.length>0&&(ne=new Date(Math.min(...ue.map(Q=>Q.getTime()))),se=new Date(Math.max(...ue.map(Q=>Q.getTime()))))}const L=new Date(ne);L.setMonth(L.getMonth()-2),L.setDate(1);const X=new Date(se);return X.setMonth(X.getMonth()+4),X.setDate(1),{startMonth:L,endMonth:X}},[S]),O=m.useMemo(()=>FH(J,Y),[J,Y]),B=m.useCallback(()=>{var ue;const ne=Eg(new Date),se=R.current[ne];if(!se){ie(!0);return}const L=se.getBoundingClientRect(),X=(ue=N.current)==null?void 0:ue.getBoundingClientRect();X&&ie(L.bottom<X.top||L.top>X.bottom)},[O]);m.useEffect(()=>{const ne=N.current;return ne&&(ne.addEventListener("scroll",B),B()),()=>ne==null?void 0:ne.removeEventListener("scroll",B)},[B]),m.useEffect(()=>{setTimeout(()=>U(),100)},[]);const U=()=>{const ne=Eg(new Date),se=R.current[ne];se&&se.scrollIntoView({behavior:"smooth",block:"center"})},W=ne=>{ne.button===2&&N.current&&(ne.preventDefault(),A(!0),P.current={y:ne.pageY,top:N.current.scrollTop})},q=m.useCallback(ne=>{if(!k||!N.current)return;ne.preventDefault();const L=(ne.pageY-P.current.y)*1.5;N.current.scrollTop=P.current.top-L},[k]),oe=m.useCallback(()=>{A(!1)},[]);m.useEffect(()=>(k?(window.addEventListener("mousemove",q),window.addEventListener("mouseup",oe)):(window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",oe)),()=>{window.removeEventListener("mousemove",q),window.removeEventListener("mouseup",oe)}),[k,q,oe]);const ee=ne=>{const se=ne.getFullYear(),L=ne.getMonth(),X=new Date(se,L,1),ue=new Date(se,L+1,0),Q=[];for(let te=0;te<X.getDay();te++)Q.push({date:new Date(se,L,-X.getDay()+1+te),isCurrentMonth:!1});for(let te=1;te<=ue.getDate();te++)Q.push({date:new Date(se,L,te),isCurrentMonth:!0});for(;Q.length%7!==0;){const te=Q.length-(X.getDay()+ue.getDate())+1,ae=new Date(se,L+1,te);Q.push({date:ae,isCurrentMonth:!1})}return Q};return a.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[F&&a.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:a.jsxs("button",{onClick:U,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[a.jsx(N1,{size:14})," Jump to Today"]})}),a.jsx("div",{ref:N,className:$("flex-1 overflow-y-auto",k?"cursor-grabbing":"cursor-default"),onMouseDown:W,onContextMenu:ne=>ne.preventDefault(),children:a.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:O.map(ne=>{const se=ee(ne),L=Eg(ne);return a.jsxs("div",{ref:X=>R.current[L]=X,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[a.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:a.jsx("h3",{className:"text-lg font-bold",children:ne.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),a.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(X=>a.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:X},X))}),a.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:se.map((X,ue)=>{const Q=S.filter(ae=>{if(!ae.dueDate)return!1;const Te=new Date(ae.dueDate);Te.setHours(0,0,0,0);const Pe=new Date(X.date);return Pe.setHours(0,0,0,0),Pe.toDateString()===Te.toDateString()}),te=X.date.toDateString()===new Date().toDateString();return a.jsxs("div",{className:$("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",X.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[a.jsx("span",{className:$("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",te&&X.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:X.date.getDate()}),a.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:Q.map(ae=>{const Te=Ud[ae.systemStatus]||Ud.backlog;return a.jsx("div",{onClick:Pe=>{Pe.stopPropagation(),f(ae)},className:$("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",Te.color,Te.border),title:ae.title,children:ae.title},ae.id)})})]},ue)})})]},L)})})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[a.jsx(Ny,{size:14,className:"mr-2"}),"Tip: Hold"," ",a.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};if(xn().error&&xn().error.toLowerCase().includes("session")){const{assignments:N,courses:k}=xn();if(!N.length&&!k.length)return a.jsx(Dl,{})}const{error:C}=xn();return a.jsxs(a.Fragment,{children:[C&&C.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Un,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),a.jsx(En,{href:"/auth/refresh",children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),a.jsxs("div",{className:"flex flex-col h-full w-full bg-background overflow-hidden relative",children:[a.jsx("div",{className:"border-b px-4 py-3 md:px-6 md:py-4 flex flex-col md:flex-row md:items-center justify-between gap-4 bg-background/95 backdrop-blur z-20 shrink-0 transition-all",children:a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight hidden md:block",children:"Timeline"}),a.jsxs("div",{className:"flex bg-muted p-1 rounded-lg shrink-0 w-full md:w-auto grid grid-cols-2 md:flex",children:[a.jsxs("button",{onClick:()=>g("timeline"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="timeline"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[a.jsx(S5,{className:"h-3.5 w-3.5"}),"Timeline"]}),a.jsxs("button",{onClick:()=>g("calendar"),className:$("px-3 py-1.5 md:py-1 rounded-md text-xs font-medium transition-all flex items-center justify-center gap-2",p==="calendar"?"bg-background shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[a.jsx(Zc,{className:"h-3.5 w-3.5"}),"Calendar"]})]})]})}),a.jsxs("div",{className:"px-4 md:px-6 py-2 border-b flex items-center gap-3 bg-muted/30 shrink-0 overflow-x-auto no-scrollbar",children:[a.jsx(A5,{className:"h-4 w-4 text-muted-foreground shrink-0 hidden sm:block"}),a.jsxs(Af,{value:o||"all",onValueChange:N=>l(N==="all"?null:N),children:[a.jsx(hu,{className:"w-[140px] sm:w-[240px] h-8 text-xs","data-testid":"select-course-filter",children:a.jsx(jf,{placeholder:"All Courses"})}),a.jsxs(fu,{children:[a.jsx(Ct,{value:"all",children:"All Courses"}),e.map(N=>a.jsx(Ct,{value:N.id,children:N.name},N.id))]})]}),a.jsxs(Af,{value:c||"all",onValueChange:N=>u(N==="all"?null:N),children:[a.jsx(hu,{className:"w-[110px] sm:w-[140px] h-8 text-xs","data-testid":"select-status-filter",children:a.jsx(jf,{placeholder:"All Status"})}),a.jsxs(fu,{children:[a.jsx(Ct,{value:"all",children:"All Status"}),a.jsx(Ct,{value:"backlog",children:"Backlog"}),a.jsx(Ct,{value:"in_progress",children:"In Progress"}),a.jsx(Ct,{value:"submitted",children:"Submitted"}),a.jsx(Ct,{value:"graded",children:"Graded"}),a.jsx(Ct,{value:"overdue",children:"Overdue"})]})]}),D&&a.jsxs(he,{variant:"ghost",size:"sm",onClick:I,className:"text-muted-foreground h-8 px-2","data-testid":"button-clear-filters",children:[a.jsx(Po,{className:"h-3.5 w-3.5 md:mr-1"}),a.jsx("span",{className:"hidden md:inline",children:"Clear filters"})]}),a.jsx("div",{className:"ml-auto pl-2",children:a.jsx(dm,{children:a.jsxs(hm,{children:[a.jsx(fm,{asChild:!0,children:a.jsx(En,{href:"/settings/integrations",children:a.jsxs(he,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap h-8",children:[a.jsx(OH,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Sync with Google Calendar"}),a.jsx("span",{className:"sm:hidden",children:"Sync"})]})})}),a.jsxs(Nu,{side:"left",className:"max-w-xs",children:[a.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),a.jsx("div",{className:"flex-1 overflow-hidden h-full",children:p==="timeline"?a.jsx(M,{}):a.jsx(E,{})})]}),a.jsx(uw,{assignment:h,isOpen:!!h,onClose:()=>f(null)})]})}const QS="attendance_configs",Yn={extractSheetId(t){const e=t.match(/\/spreadsheets\/d\/([a-zA-Z0-9-_]+)/);return e&&e[1]?e[1]:null},async saveCourseConfig(t,e){const n={courseId:t,...e,updatedAt:Date.now()};await en($e(Me,QS,t),n),Xn.remove(`attn_config_${t}`)},async getCourseConfig(t){try{const e=`attn_config_${t}`,n=Xn.get(e);if(n)return n;const r=$e(Me,QS,t),s=await Ds(r);if(s.exists()){const i=s.data();return Xn.set(e,i,60*60),i}else return null}catch(e){return console.error("Failed to fetch course config",e),null}},async validatePassKey(t,e){const n=await this.getCourseConfig(t);return n?n.passKey.trim().toUpperCase()===e.trim().toUpperCase():!1},async fetchAttendanceFromSheet(t,e,n,r="A"){var S;if(!t||!e)throw new Error("Missing credentials or sheet ID");const s=`attn_data_${t}_${n}`,i=Xn.get(s);if(i)return i;const o=r.toUpperCase().charCodeAt(0)-65,c=`https://sheets.googleapis.com/v4/spreadsheets/${t}/values/A1:Z500?majorDimension=ROWS`,u=await fetch(c,{headers:{Authorization:`Bearer ${e}`}});if(!u.ok)throw u.status===403?new Error("Permission denied. Share sheet with the OAuth client or user (ensure 'Read' access)."):u.status===404?new Error("Sheet not found."):new Error("Failed to fetch sheet data.");const f=(await u.json()).values;if(!f||f.length<2)throw new Error("Sheet is empty or invalid format.");const p=f[0],g=f.find(I=>{var M;return((M=I[o])==null?void 0:M.toLowerCase().trim())===n.toLowerCase().trim()});if(!g)throw new Error(`Student not found in attendance sheet (searched in column ${r}).`);let w=0,v=0;const _=[];for(let I=1;I<p.length;I++){const D=p[I],M=(S=g[I])==null?void 0:S.toUpperCase().trim();if(!D)continue;let E="Unknown";M==="P"||M==="PRESENT"||M==="1"?(E="Present",v++,w++):(M==="A"||M==="ABSENT"||M==="0")&&(E="Absent",w++),E!=="Unknown"&&_.push({date:D,status:E})}const b=w===0?0:Math.round(v/w*100),x={courseId:t,stats:{totalClasses:w,attendedClasses:v,percentage:b},history:_.reverse()};return Xn.set(s,x,60*30),x}},xs={"5-day-consistent":{id:"5-day-consistent",label:"5-Day Streak",description:"Visited app for 5 consecutive days",category:"consistency",icon:tm,color:"text-orange-500 bg-orange-50 dark:bg-orange-500/10"},"10-day-consistent":{id:"10-day-consistent",label:"10-Day Streak",description:"Visited app for 10 consecutive days",category:"consistency",icon:B5,color:"text-amber-500 bg-amber-50 dark:bg-amber-500/10"},"30-day-consistent":{id:"30-day-consistent",label:"Monthly Master",description:"Visited app for 30 consecutive days",category:"consistency",icon:rm,color:"text-purple-500 bg-purple-50 dark:bg-purple-500/10"},"10-submissions":{id:"10-submissions",label:"Getting Started",description:"Submitted 10 assignments",category:"productivity",icon:NC,color:"text-blue-500 bg-blue-50 dark:bg-blue-500/10"},"25-submissions":{id:"25-submissions",label:"Productivity Pro",description:"Submitted 25 assignments",category:"productivity",icon:SC,color:"text-indigo-500 bg-indigo-50 dark:bg-indigo-500/10"},"50-submissions":{id:"50-submissions",label:"Assignment Titan",description:"Submitted 50 assignments",category:"productivity",icon:Cy,color:"text-yellow-500 bg-yellow-50 dark:bg-yellow-500/10"},"perfect-week":{id:"perfect-week",label:"Perfect Week",description:"100% Attendance for 7 days",category:"reliability",icon:Zc,color:"text-emerald-500 bg-emerald-50 dark:bg-emerald-500/10"},"attendance-champion":{id:"attendance-champion",label:"Attendance Champ",description:"Maintained high attendance for 30 days",category:"reliability",icon:bx,color:"text-teal-500 bg-teal-50 dark:bg-teal-500/10"}},kR=Object.keys(xs),IR=Object.freeze(Object.defineProperty({__proto__:null,BADGES:xs,BADGE_IDS:kR},Symbol.toStringTag,{value:"Module"}));function UH({badgeId:t,size:e="md",className:n,showLabel:r=!1}){const s=xs[t],[i,o]=m.useState(!1);if(!s)return null;const l=s.icon,c={sm:"h-5 w-5 sm:h-6 sm:w-6 p-1",md:"h-6 w-6 sm:h-9 sm:w-9 p-1.5 sm:p-2",lg:"h-10 w-10 sm:h-14 sm:w-14 p-2 sm:p-3"},u={sm:"h-3 w-3 sm:h-3.5 sm:w-3.5",md:"h-3.5 w-3.5 sm:h-5 sm:w-5",lg:"h-5 w-5 sm:h-8 sm:w-8"};return a.jsx(dm,{delayDuration:0,children:a.jsxs(hm,{open:i,onOpenChange:o,children:[a.jsx(fm,{asChild:!0,children:a.jsxs("div",{className:$("inline-flex items-center justify-center gap-2 rounded-full ring-1 ring-inset ring-black/10 dark:ring-white/10 transition-transform active:scale-95 cursor-pointer shadow-sm hover:shadow-md hover:ring-2",s.color,c[e],r&&"px-3 w-auto h-auto py-1",n),onClick:h=>{h.stopPropagation(),o(!i)},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[a.jsx(l,{className:$(u[e]),strokeWidth:2.5}),r&&a.jsx("span",{className:"text-[10px] sm:text-xs font-bold uppercase tracking-wider",children:s.label})]})}),a.jsx(fk,{children:a.jsxs(Nu,{side:"top",className:"max-w-[200px] text-center p-3 space-y-1 z-50 bg-popover/95 backdrop-blur-sm shadow-xl",onPointerDownOutside:()=>o(!1),children:[a.jsx("p",{className:"font-bold text-xs uppercase tracking-wide text-popover-foreground",children:s.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground font-medium leading-tight",children:s.description})]})})]})})}function fc({badges:t,limit:e,size:n="sm",className:r}){if(!t||t.length===0)return null;const s=e?t.slice(0,e):t,i=e?t.slice(e):[],o=i.length;return a.jsxs("div",{className:$("flex items-center gap-1.5 flex-wrap",r),children:[s.map(l=>a.jsx(UH,{badgeId:l,size:n},l)),o>0&&a.jsx(dm,{delayDuration:0,children:a.jsxs(hm,{children:[a.jsx(fm,{asChild:!0,children:a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground font-medium pl-1 cursor-default hover:text-foreground transition-colors",children:["+",o]})}),a.jsx(fk,{children:a.jsx(Nu,{side:"top",className:"z-50 bg-popover/95 backdrop-blur-sm shadow-md p-2",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-0.5",children:"More Badges"}),i.map(l=>{var c;return a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),a.jsx("span",{className:"text-xs font-medium",children:((c=xs[l])==null?void 0:c.label)||"Unknown"})]},l)})]})})})]})})]})}function $H(){const{user:t}=rt(),[e,n]=m.useState([]),[r,s]=m.useState(0),[i,o]=m.useState(0),[l,c]=m.useState(!0);m.useEffect(()=>{if(!t)return;const f=as($e(Me,"leaderboards","all-courses","students",t.uid),p=>{var g;if(p.exists()){const w=p.data();n(w.badges||[]),s(w.loginStreak||0),o(((g=w.processedAssignmentIds)==null?void 0:g.length)||0)}c(!1)});return()=>f()},[t]);const u=()=>{const f=[];return f.push({badge:xs["5-day-consistent"],current:r||1,target:5,percentage:Math.min((r||1)/5*100,100),type:"streak",label:"Days"}),f.push({badge:xs["10-submissions"],current:i,target:10,percentage:Math.min(i/10*100,100),type:"submission",label:"Submissions"}),f.push({badge:xs["perfect-week"],current:0,target:7,percentage:0,type:"attendance",label:"Days Perfect"}),f.push({badge:xs["attendance-champion"],current:0,target:30,percentage:0,type:"attendance",label:"Days Tracked"}),f.reduce((p,g)=>g.percentage>p.percentage?g:p)},h=e.length===0?u():null;return a.jsxs(je,{className:"flex flex-col h-full","data-testid":"card-dashboard-badges",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(st,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"My Badges"}),a.jsx(bC,{className:"h-5 w-5 text-purple-500"})]}),a.jsx(Ue,{className:"flex-1 flex flex-col",children:l?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ve,{className:"h-8 w-8 rounded-full"}),a.jsx(Ve,{className:"h-3 w-20"})]}):e.length>0?a.jsxs("div",{className:"flex flex-col justify-between h-full gap-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-2xl font-semibold font-mono tracking-tight",children:[e.length,a.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-2",children:"Achievements"})]}),a.jsx(fc,{badges:e,limit:3,size:"md",className:"mt-2"})]}),a.jsx("div",{className:"pt-2 mt-auto",children:a.jsx(En,{href:"/settings?tab=badges",children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):h?a.jsxs("div",{className:"flex flex-col gap-3 justify-between h-full",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[h.type==="streak"?a.jsx(tm,{className:"h-5 w-5 text-orange-500"}):h.type==="submission"?a.jsx(NC,{className:"h-5 w-5 text-blue-500"}):a.jsx(Zc,{className:"h-5 w-5 text-emerald-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-foreground",children:h.badge.label}),a.jsx("p",{className:"text-[10px] text-muted-foreground line-clamp-1",children:h.badge.description})]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${h.type==="streak"?"bg-orange-500":h.type==="submission"?"bg-blue-500":"bg-emerald-500"}`,style:{width:`${h.percentage}%`}})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(h.percentage),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h.current," / ",h.target," ",h.label]})]})]})]}),a.jsx("div",{className:"pt-2 mt-auto",children:a.jsx(En,{href:"/settings?tab=badges",children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]}):a.jsxs("div",{className:"flex flex-col gap-2 justify-between h-full",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"No badges earned yet."}),a.jsx("div",{className:"pt-2 mt-auto",children:a.jsx(En,{href:"/settings?tab=badges",children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View All Badges"})})})]})})]})}function BH(){const{user:t}=rt(),[e,n]=m.useState(null),[r,s]=m.useState(!0);return m.useEffect(()=>{if(!t)return;const i=as($e(Me,"leaderboards","all-courses","students",t.uid),o=>{if(o.exists()){const l=o.data();n(l.loginStreak||0)}else n(0);s(!1)});return()=>i()},[t]),a.jsxs(je,{className:"flex flex-col h-full","data-testid":"card-streak",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(st,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Current Streak"}),a.jsx(tm,{className:"h-5 w-5 text-orange-500 fill-orange-500"})]}),a.jsx(Ue,{className:"flex-1 flex flex-col justify-between",children:r?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ve,{className:"h-8 w-16"}),a.jsx(Ve,{className:"h-3 w-24"})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:[e,a.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"Days"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:e&&e>0?"You're on fire! Keep coming back.":"Log in daily to build your streak!"})]})})]})}function WH(){return a.jsxs(je,{className:"overflow-hidden",children:[a.jsx(Ke,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Ve,{className:"h-4 w-24"}),a.jsx(Ve,{className:"h-8 w-8 rounded-lg"})]})}),a.jsx(Ue,{className:"pt-2",children:a.jsx(Ve,{className:"h-9 w-16"})})]})}function HH(){return a.jsxs("div",{className:"flex items-center space-x-4 py-3",children:[a.jsx(Ve,{className:"h-12 w-12 rounded-full"}),a.jsxs("div",{className:"space-y-2 max-w-[200px] w-full",children:[a.jsx(Ve,{className:"h-4 w-[200px]"}),a.jsx(Ve,{className:"h-4 w-[150px]"})]})]})}function qH({courses:t}){const{user:e,accessToken:n}=rt(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{async function l(){if(!t.length||!(e!=null&&e.email)||!n){o(!1);return}let c=0,u=0,h=0;if(await Promise.all(t.map(async f=>{try{const p=await Yn.getCourseConfig(f.id);if(!p||!p.isVisible||!p.sheetUrl)return;const g=Yn.extractSheetId(p.sheetUrl);if(!g)return;const w=await Yn.fetchAttendanceFromSheet(g,n,e.email,p.emailColumn||"A");w&&(c+=w.stats.attendedClasses,u+=w.stats.totalClasses,h++)}catch{}})),h===0||u===0)s(null);else{const f=Math.round(c/u*100);let p="safe";f<70?p="danger":f<75&&(p="warning"),s({percentage:f,status:p,present:c,total:u})}o(!1)}l()},[t,e,n]),a.jsxs(je,{"data-testid":"card-attendance-overall",className:"flex flex-col h-full",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(st,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Overall Attendance"}),a.jsx(CC,{className:"h-5 w-5 text-emerald-600 dark:text-emerald-400"})]}),a.jsx(Ue,{children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ve,{className:"h-8 w-16"}),a.jsx(Ve,{className:"h-3 w-24"})]}):r?a.jsxs("div",{children:[a.jsxs("div",{className:$("text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",r.status==="danger"?"text-red-500":r.status==="warning"?"text-amber-500":"text-emerald-600 dark:text-emerald-400"),children:[r.percentage,"%"]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium text-muted-foreground",children:[r.present,"/",r.total," Classes Attended"]}),a.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-bold",r.status==="safe"?"text-emerald-500":r.status==="warning"?"text-amber-500":"text-red-500"),children:r.status==="safe"?"On Track":"Low Attendance"})]})]}):a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No Attendance Yet"}),a.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground/70 leading-relaxed",children:"Ask your teacher to login to Trace to track real-time attendance"})]}),a.jsx(En,{href:"/attendance",children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs w-full mt-1",children:"View Details"})})]})})]})}function GH(){return a.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>a.jsx(WH,{},t))}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"md:col-span-2 space-y-6",children:[a.jsx(Ve,{className:"h-[300px] w-full rounded-xl"}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Ve,{className:"h-8 w-40"}),[1,2,3].map(t=>a.jsx(HH,{},t))]})]}),a.jsx("div",{className:"space-y-6",children:a.jsx(Ve,{className:"h-[400px] w-full rounded-xl"})})]})]})}function $d({title:t,value:e,icon:n,variant:r="default"}){const i={default:{bg:"bg-gradient-to-br from-background to-muted/30",iconBg:"bg-primary/10",iconColor:"text-primary",valueColor:"text-foreground",border:"border-border hover:border-primary/50"},warning:{bg:"bg-gradient-to-br from-amber-50/50 to-amber-100/30 dark:from-amber-950/20 dark:to-amber-900/10",iconBg:"bg-amber-500/10",iconColor:"text-amber-600 dark:text-amber-400",valueColor:"text-amber-700 dark:text-amber-300",border:"border-amber-200 dark:border-amber-800 hover:border-amber-400"},danger:{bg:"bg-gradient-to-br from-red-50/50 to-red-100/30 dark:from-red-950/20 dark:to-red-900/10",iconBg:"bg-destructive/10",iconColor:"text-destructive",valueColor:"text-destructive",border:"border-red-200 dark:border-red-800 hover:border-destructive"}}[r];return a.jsxs(je,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,className:$("overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-0.5",i.border),children:[a.jsx(Ke,{className:$("pb-3",i.bg),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(st,{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:t}),a.jsx("div",{className:$("p-2 rounded-lg",i.iconBg),children:a.jsx(n,{className:$("h-4 w-4",i.iconColor)})})]})}),a.jsx(Ue,{className:"pt-2",children:a.jsx("div",{className:$("text-3xl font-bold font-mono tracking-tight tabular-nums",i.valueColor),children:e})})]})}function KH({data:t}){const e=Math.max(...t.map(n=>n.count),1);return a.jsxs(je,{className:"overflow-hidden",children:[a.jsx(Ke,{className:"pb-3 bg-gradient-to-br from-background to-muted/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(st,{className:"text-sm font-semibold flex items-center gap-2",children:[a.jsx(Wi,{className:"h-4 w-4 text-primary"}),"Weekly Workload"]}),a.jsxs(ir,{variant:"outline",className:"text-xs font-mono",children:[t.reduce((n,r)=>n+r.count,0)," total"]})]})}),a.jsx(Ue,{className:"pt-4",children:a.jsx("div",{className:"flex items-end justify-between gap-3 h-36",children:t.map((n,r)=>a.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1 group",children:[a.jsx("span",{className:$("text-xs font-bold tabular-nums transition-all",n.count>0?n.isToday?"text-primary":"text-muted-foreground":"text-transparent"),children:n.count>0?n.count:"0"}),a.jsx("div",{className:"relative w-full",children:a.jsx("div",{className:$("w-full rounded-t-md transition-all duration-500 ease-out relative overflow-hidden",n.isToday?"bg-gradient-to-t from-primary to-primary/70 shadow-lg shadow-primary/20":"bg-gradient-to-t from-muted to-muted/50",n.count===0&&"min-h-[4px] opacity-30","group-hover:scale-105 group-hover:shadow-xl"),style:{height:n.count>0?`${n.count/e*96}px`:"4px"},children:n.count>0&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-transparent via-white/10 to-white/20"})})}),a.jsx("span",{className:$("text-xs font-medium transition-colors",n.isToday?"text-primary font-bold":"text-muted-foreground group-hover:text-foreground"),children:n.day})]},r))})})]})}function QH({courses:t,assignments:e}){const{user:n}=rt(),[r,s]=m.useState(null),[i,o]=m.useState(!0);return m.useEffect(()=>{if(!n)return;const l=Array.from(new Set(["all-courses",...t.map(f=>f.id)])),c=[],u=new Map,h=()=>{const f=Array.from(u.values()),p=n.email?n.email.split("@")[1]:null,g=t.map(x=>x.id),w=new Set(e.map(x=>x.id)),v=f.filter(x=>{const S=x.email||"",I=x.emailDomain||(S.includes("@")?S.split("@")[1]:""),D=x.enrolledCourseIds||[],M=x.processedAssignmentIds||[],E=p&&I&&p===I,C=g.some(A=>D.includes(A)),k=!I&&M.some(A=>w.has(A));return x.id===n.uid?!0:E&&C||k});v.sort((x,S)=>S.totalXP-x.totalXP);const _=v.length;if(_===0){s(null),o(!1);return}const b=v.findIndex(x=>x.id===n.uid);if(b!==-1){const x=b+1,S=Math.round((_-x+1)/_*100),I=v[b];s({rank:x,total:_,percentile:S,xp:I.totalXP||0,badges:I.badges||[]})}else s(null);o(!1)};return l.forEach(f=>{const p=Vm(kl(Me,"leaderboards",f,"students"),$m("totalXP","desc")),g=as(p,w=>{w.docs.forEach(v=>{const _=v.data(),b={id:v.id,..._,email:_.email||"",emailDomain:_.emailDomain||(_.email?_.email.split("@")[1]:""),enrolledCourseIds:_.enrolledCourseIds||_.subjects||[],processedAssignmentIds:_.processedAssignmentIds||_.completedTasks||[],totalXP:_.totalXP||_.xp||0,badges:_.badges||[]},x=u.get(v.id);(!x||b.totalXP>=x.totalXP)&&u.set(v.id,b)}),h()},w=>{console.error(`Error fetching leaderboard source ${f}:`,w),h()});c.push(g)}),()=>{c.forEach(f=>f())}},[n,t,e]),a.jsxs(je,{"data-testid":"card-class-rank",className:"flex flex-col h-full",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[a.jsx(st,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),a.jsx(rm,{className:"h-5 w-5 text-amber-500"})]}),a.jsx(Ue,{className:"flex-1 flex flex-col justify-between",children:i?a.jsxs("div",{className:"space-y-2",children:[a.jsx(Ve,{className:"h-8 w-16"}),a.jsx(Ve,{className:"h-3 w-24"})]}):r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,a.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),a.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[a.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top"," ",100-r.percentile<1?1:100-r.percentile,"% of class"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[r.xp.toLocaleString()," Total XP"]})]})]}),a.jsx("div",{className:"pt-4 mt-auto",children:a.jsx(En,{href:"/leaderboard",children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"View Leaderboard"})})})]}):a.jsxs("div",{className:"flex flex-col gap-2 justify-between flex-1",children:[a.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),a.jsx(En,{href:"/leaderboard",className:"mt-auto",children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function XH(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i,error:o}=xn();rt();const[l,c]=m.useState(null);if(e)return a.jsx(GH,{});const u=t();return o&&o.toLowerCase().includes("session")&&!(r.length>0||i.length>0||u.upcoming7Days>0)?a.jsx(Dl,{}):a.jsxs(a.Fragment,{children:[o&&o.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3",children:a.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Un,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Sign in to update your assignments."})]}),a.jsx(En,{href:"/auth/refresh",children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",onClick:()=>window.location.reload(),children:"Reconnect"})})]})}),a.jsxs("div",{className:"max-w-5xl mx-auto p-4 sm:p-6 space-y-6",children:[u.upcoming7Days>0&&a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-amber-50 via-amber-50/80 to-orange-50/50 dark:from-amber-950/40 dark:via-amber-900/20 dark:to-orange-950/20 border border-amber-200/60 dark:border-amber-800/40 shadow-lg shadow-amber-100/50 dark:shadow-amber-950/20 animate-in slide-in-from-top-2",children:[a.jsx("div",{className:"absolute inset-0 bg-grid-amber-200/20 dark:bg-grid-amber-800/10 [mask-image:radial-gradient(ellipse_at_center,transparent_20%,black)]"}),a.jsxs("div",{className:"relative flex items-center justify-between p-5 sm:p-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl text-white shadow-lg shadow-amber-500/30 shrink-0",children:a.jsx(wC,{className:"h-5 w-5"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-sm font-bold text-amber-900 dark:text-amber-100 flex items-center gap-2",children:["Weekly Focus",a.jsxs(ir,{variant:"secondary",className:"bg-amber-200/60 dark:bg-amber-800/40 text-amber-900 dark:text-amber-100 border-0 text-xs font-bold",children:[u.upcoming7Days," ",u.upcoming7Days===1?"task":"tasks"]})]}),a.jsxs("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:["You have"," ",a.jsxs("span",{className:"font-bold text-amber-900 dark:text-amber-100",children:[u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""]})," ","due within the next 7 days."]})]})]}),a.jsx(En,{href:"/timeline",children:a.jsxs(he,{variant:"outline",size:"sm",className:"hidden sm:flex border-amber-300 dark:border-amber-700 bg-white/50 dark:bg-amber-950/30 text-amber-900 dark:text-amber-100 hover:bg-amber-100 dark:hover:bg-amber-900/50 hover:border-amber-400 dark:hover:border-amber-600 shadow-sm",children:["View Timeline",a.jsx(w5,{className:"ml-1.5 h-3.5 w-3.5"})]})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx($d,{title:"Due in 3 Days",value:u.upcoming3Days,icon:vC,variant:u.upcoming3Days>3?"warning":"default"}),a.jsx($d,{title:"Due in 7 Days",value:u.upcoming7Days,icon:Wi}),a.jsx($d,{title:"Overdue",value:u.overdue,icon:Un,variant:u.overdue>0?"danger":"default"}),a.jsx($d,{title:"Total Active",value:u.totalActive,icon:Xa}),a.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:a.jsx(QH,{courses:i,assignments:r})}),a.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:a.jsx(qH,{courses:i})}),a.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:a.jsx($H,{})}),a.jsx("div",{className:"col-span-2 sm:col-span-1 h-full",children:a.jsx(BH,{})})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[a.jsx(KH,{data:u.weeklyWorkload}),a.jsxs(je,{children:[a.jsx(Ke,{className:"pb-2",children:a.jsx(st,{className:"text-sm font-medium",children:"Next Actions"})}),a.jsx(Ue,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>a.jsx(MW,{assignment:h,onClick:()=>c(h)},h.id)):a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[a.jsx(Xa,{className:"h-8 w-8 mb-2"}),a.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),a.jsx(uw,{assignment:l,isOpen:!!l,onClose:()=>c(null)})]})}function YH(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s,reauthRequired:i}=xn();rt();const[o,l]=m.useState(null),[c,u]=m.useState("grid"),h=Wm(),f=t.find(w=>w.id===o),g=e.filter(w=>w.courseId===o).flatMap(w=>w.materials?w.materials.flatMap(v=>{let _=[];if(v.driveFile){const b=v.driveFile.driveFile;let x=b.thumbnailUrl||b.iconUrl||null;!x&&b.id&&(x=`https://drive.google.com/thumbnail?id=${b.id}&sz=w800`),_.push({id:b.id,title:b.title,link:b.alternateLink,thumbnail:x,type:"driveFile"})}return _}):[]).filter(w=>!!w.title);return n&&t.length===0?a.jsx(JH,{}):i&&t.length===0?a.jsx("div",{className:"h-full flex items-center justify-center p-4",children:a.jsx(Dl,{})}):a.jsxs("div",{className:"flex h-full overflow-hidden bg-background flex-col",children:[i&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between gap-4 max-w-full",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(Un,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached notes are shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:w=>{w.preventDefault(),window.location.reload()},children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[a.jsxs("div",{className:$("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&o?"hidden":"flex"),children:[a.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:a.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(w=>a.jsxs("button",{onClick:()=>l(w.id),className:$("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",o===w.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[a.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",o===w.id?"bg-primary-foreground/20":"bg-muted"),children:a.jsx(k1,{className:$("h-4 w-4",o===w.id?"text-primary-foreground":"text-muted-foreground")})}),a.jsxs("div",{className:"truncate flex-1",children:[a.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:w.name}),a.jsx("p",{className:$("text-[10px] uppercase tracking-wider font-medium",o===w.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:w.section||"No Section"})]}),a.jsx(T5,{className:$("h-4 w-4 transition-transform",o===w.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},w.id))})]}),a.jsxs("div",{className:$("flex-1 overflow-y-auto bg-background",h&&!o?"hidden":"flex flex-col"),children:[h&&o&&a.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:a.jsxs(he,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"gap-2 pl-2",children:[a.jsx(em,{className:"h-4 w-4"}),"Back to Courses"]})}),o?a.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[a.jsxs("div",{className:"space-y-1 max-w-full",children:[a.jsx(ir,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),a.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:f==null?void 0:f.name}),a.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(f==null?void 0:f.descriptionHeading)||"Curated academic materials and notes."})]}),a.jsxs("div",{className:"flex gap-2 shrink-0",children:[a.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[a.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),a.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[g.length," Documents"]})]}),a.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[a.jsx(he,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:a.jsx(xC,{className:"h-4 w-4"})}),a.jsx(he,{variant:"ghost",size:"icon",className:$("h-6 w-6 rounded-sm",c==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:a.jsx(O5,{className:"h-4 w-4"})})]})]})]}),g.length>0?c==="grid"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:g.map((w,v)=>{var D;const _=((D=w.title)==null?void 0:D.toLowerCase())||"",b=_.endsWith(".pdf"),x=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",I="FILE";return b?(S="bg-red-100 text-red-600",I="PDF DOCUMENT"):x?(S="bg-orange-100 text-orange-600",I="PRESENTATION"):(S="bg-blue-100 text-blue-600",I="DOCUMENT"),a.jsxs(je,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm flex flex-col",children:[a.jsx(Ke,{className:"p-3 border-b border-border space-y-0 pb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:$("h-8 w-8 rounded-full flex items-center justify-center shrink-0",S),children:a.jsx(_o,{className:"h-4 w-4"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("h4",{className:"font-semibold text-sm truncate leading-none text-card-foreground",children:w.title}),a.jsx("p",{className:"text-[10px] text-muted-foreground truncate mt-1 font-mono",children:I})]})]})}),a.jsxs("div",{className:"relative aspect-[3/4] bg-muted/30 w-full overflow-hidden group",children:[w.thumbnail&&a.jsx("img",{src:w.thumbnail.includes("s220")?w.thumbnail.replace("s220","s800"):w.thumbnail,alt:w.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",referrerPolicy:"no-referrer",onError:M=>{var C;console.log("Thumbnail failed to load:",w.thumbnail),M.currentTarget.style.display="none";const E=(C=M.currentTarget.parentElement)==null?void 0:C.querySelector(".fallback-viewer");E&&(E.classList.remove("hidden"),E.classList.add("block"))}}),a.jsx("div",{className:$("fallback-viewer absolute inset-0 w-full h-full",w.thumbnail?"hidden":"block"),children:a.jsx(ZH,{type:b?"pdf":x?"ppt":"doc"})}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-2 p-4",children:a.jsx(he,{variant:"secondary",size:"sm",className:"font-semibold shadow-xl h-9",asChild:!0,children:a.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",children:[a.jsx(Sy,{className:"h-4 w-4 mr-2"}),"Open Material"]})})})]})]},`${w.id}-${v}`)})}):a.jsx("div",{className:"space-y-2 pb-20",children:g.map((w,v)=>{var D;const _=((D=w.title)==null?void 0:D.toLowerCase())||"",b=_.endsWith(".pdf"),x=_.endsWith(".ppt")||_.endsWith(".pptx");let S="bg-zinc-100 text-zinc-600",I="File";return b?(S="bg-red-100 text-red-600",I="PDF Document"):x?(S="bg-orange-100 text-orange-600",I="Presentation"):(S="bg-blue-100 text-blue-600",I="Document"),a.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[a.jsxs("div",{className:"relative h-16 w-16 rounded-md overflow-hidden shrink-0 bg-muted/30 border border-border",children:[w.thumbnail?a.jsx("img",{src:w.thumbnail.includes("s220")?w.thumbnail.replace("s220","s400"):w.thumbnail,alt:w.title,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:M=>{M.currentTarget.style.display="none";const E=M.currentTarget.nextElementSibling;E&&E.classList.remove("hidden")}}):null,a.jsx("div",{className:$("absolute inset-0 flex items-center justify-center",w.thumbnail?"hidden":"flex",S),children:a.jsx(_o,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:w.title}),a.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[I,"  Read Only"]})]}),a.jsx(he,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:a.jsxs("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[a.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),a.jsx(Sy,{className:"h-4 w-4"})]})})]},`${w.id}-${v}`)})}):a.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[a.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:a.jsx(k1,{className:"h-8 w-8 text-muted-foreground"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No Documents Found"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no documents uploaded to Classroom yet."})]})]})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[a.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:a.jsx(_o,{className:"h-10 w-10 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})]})}function JH(){return a.jsxs("div",{className:"flex h-full overflow-hidden",children:[a.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[a.jsx(Ve,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>a.jsx(Ve,{className:"h-16 w-full rounded-xl"},t))]}),a.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[a.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(Ve,{className:"h-4 w-20"}),a.jsx(Ve,{className:"h-10 w-80"}),a.jsx(Ve,{className:"h-4 w-64"})]}),a.jsx(Ve,{className:"h-10 w-32 rounded-lg"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>a.jsx(Ve,{className:"h-64 w-full rounded-2xl"},t))})]})]})}function ZH({type:t}){const e=t==="pdf",n=t==="ppt",r=e?"bg-[#FFEEEE]":n?"bg-[#FFF4E5]":"bg-[#E8F0FE]";return a.jsxs("div",{className:$("w-full h-full p-4 flex flex-col relative overflow-hidden select-none pointer-events-none",r),children:[a.jsxs("div",{className:"w-full h-full bg-white shadow-[0_2px_8px_-2px_rgba(0,0,0,0.1)] rounded-md border border-black/5 p-4 flex flex-col gap-3 relative z-10 transform transition-transform group-hover:-translate-y-1 duration-500",children:[a.jsxs("div",{className:"flex gap-2 mb-1",children:[a.jsx("div",{className:$("h-12 w-12 rounded-lg shrink-0 flex items-center justify-center mb-1",e?"bg-red-100 text-red-500":n?"bg-orange-100 text-orange-500":"bg-blue-100 text-blue-500"),children:a.jsx(_o,{className:"h-6 w-6"})}),a.jsxs("div",{className:"space-y-1.5 flex-1 pt-1",children:[a.jsx("div",{className:"h-3 w-3/4 bg-zinc-100 rounded-full"}),a.jsx("div",{className:"h-2 w-1/2 bg-zinc-100 rounded-full"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-5/6 bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-full bg-zinc-50 rounded-full"}),a.jsx("div",{className:"h-2 w-4/5 bg-zinc-50 rounded-full"}),n&&a.jsx("div",{className:"mt-2 h-16 w-full bg-orange-50 rounded border border-orange-100"})]})]}),a.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-[0.05] z-0",children:a.jsx(_o,{className:"h-40 w-40"})})]})}function eq({earnedBadges:t,currentStreak:e=0,submissionCount:n=0,attendanceStats:r}){const s=[{id:"consistency",label:"Consistency & Streaks"},{id:"productivity",label:"Productivity & Volume"},{id:"reliability",label:"Reliability & Attendance"}],i=new Set(t);return console.log("BadgeShowroom - attendanceStats:",r),a.jsx("div",{className:"space-y-8",children:s.map(o=>{const l=kR.map(c=>xs[c]).filter(c=>c.category===o.id);return l.length===0?null:a.jsxs("div",{className:"space-y-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider pl-1",children:o.label}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:l.map(c=>{const u=i.has(c.id);return a.jsxs("div",{className:$("relative flex items-center gap-3 p-3 rounded-xl border transition-all duration-200",u?"bg-gradient-to-br from-card to-card/50 border-border shadow-md hover:shadow-lg":"bg-muted/30 border-dashed border-border/50 opacity-60 grayscale"),children:[a.jsx("div",{className:$("flex-shrink-0 flex items-center justify-center rounded-full h-12 w-12 ring-2 ring-inset transition-all",u?$(c.color,"ring-black/10 dark:ring-white/20 shadow-sm"):"bg-muted ring-border text-muted-foreground"),children:a.jsx(c.icon,{className:$("h-6 w-6",u&&"drop-shadow-sm"),strokeWidth:2.5})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:$("font-bold text-sm truncate",u?"text-foreground":"text-muted-foreground"),children:c.label}),!u&&a.jsx(Ty,{className:"h-3.5 w-3.5 text-muted-foreground/60"})]}),a.jsx("p",{className:"text-xs text-muted-foreground leading-tight mt-0.5 line-clamp-2",children:c.description}),!u&&o.id==="consistency"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="5-day-consistent"?h=5:c.id==="10-day-consistent"?h=10:c.id==="30-day-consistent"&&(h=30),h>0){const f=Number(e)||1,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Days"]})]})]})}return null})()}),!u&&o.id==="productivity"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{let h=0;if(c.id==="10-submissions"?h=10:c.id==="25-submissions"?h=25:c.id==="50-submissions"&&(h=50),h>0){const f=Number(n)||0,p=Math.min(f/h*100,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500 ease-out",style:{width:`${p}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(p),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[f," / ",h," Submissions"]})]})]})}return null})()}),!u&&o.id==="reliability"&&a.jsx("div",{className:"mt-2 space-y-1",children:(()=>{const{total:h,attended:f}=r||{total:0,attended:0};let p=0,g=0;if(c.id==="perfect-week"?(p=7,g=100):c.id==="attendance-champion"&&(p=30,g=90),p>0){const w=h>0?f/h*100:0,v=Math.min(h/p*100,100),_=Math.min(w/g*100,100),b=Math.min((v+_)/2,100);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden border border-border/50",children:a.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-500 ease-out",style:{width:`${b}%`}})}),a.jsxs("div",{className:"flex justify-between items-center mt-1",children:[a.jsxs("p",{className:"text-[10px] text-muted-foreground font-medium",children:[Math.round(b),"%"]}),a.jsxs("p",{className:"text-[10px] text-muted-foreground font-bold",children:[h," days "," ",Math.round(w),"% attended"]})]})]})}return null})()})]}),u&&a.jsx("div",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-primary"})]},c.id)})})]},o.id)})})}var hw="Switch",[tq,TG]=Wn(hw),[nq,rq]=tq(hw),AR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,g]=m.useState(null),w=Ne(e,S=>g(S)),v=m.useRef(!1),_=p?h||!!p.closest("form"):!0,[b=!1,x]=Ns({prop:s,defaultProp:i,onChange:u});return a.jsxs(nq,{scope:n,checked:b,disabled:l,children:[a.jsx(ge.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":PR(b),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:w,onClick:me(t.onClick,S=>{x(I=>!I),_&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),_&&a.jsx(sq,{control:p,bubbles:!v.current,name:r,value:c,checked:b,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});AR.displayName=hw;var jR="SwitchThumb",RR=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=rq(jR,n);return a.jsx(ge.span,{"data-state":PR(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});RR.displayName=jR;var sq=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=m.useRef(null),o=Wj(n),l=QC(e);return m.useEffect(()=>{const c=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const p=new Event("click",{bubbles:r});f.call(c,n),c.dispatchEvent(p)}},[o,n,r]),a.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function PR(t){return t?"checked":"unchecked"}var DR=AR,iq=RR;const Tn=m.forwardRef(({className:t,...e},n)=>a.jsx(DR,{className:$("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:a.jsx(iq,{className:$("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Tn.displayName=DR.displayName;var oq="Label",MR=m.forwardRef((t,e)=>a.jsx(ge.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));MR.displayName=oq;var OR=MR;const aq=Su("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Tr=m.forwardRef(({className:t,...e},n)=>a.jsx(OR,{ref:n,className:$(aq(),t),...e}));Tr.displayName=OR.displayName;var LR="AlertDialog",[lq,NG]=Wn(LR,[_j]),Vs=_j(),VR=t=>{const{__scopeAlertDialog:e,...n}=t,r=Vs(e);return a.jsx(Vj,{...r,...n,modal:!0})};VR.displayName=LR;var cq="AlertDialogTrigger",FR=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Vs(n);return a.jsx(QW,{...s,...r,ref:e})});FR.displayName=cq;var uq="AlertDialogPortal",zR=t=>{const{__scopeAlertDialog:e,...n}=t,r=Vs(e);return a.jsx(Fj,{...r,...n})};zR.displayName=uq;var dq="AlertDialogOverlay",UR=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Vs(n);return a.jsx(iw,{...s,...r,ref:e})});UR.displayName=dq;var Ra="AlertDialogContent",[hq,fq]=lq(Ra),mq=$N("AlertDialogContent"),$R=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=Vs(n),o=m.useRef(null),l=Ne(e,o),c=m.useRef(null);return a.jsx(HW,{contentName:Ra,titleName:BR,docsSlug:"alert-dialog",children:a.jsx(hq,{scope:n,cancelRef:c,children:a.jsxs(ow,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:me(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=c.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[a.jsx(mq,{children:r}),a.jsx(gq,{contentRef:o})]})})})});$R.displayName=Ra;var BR="AlertDialogTitle",WR=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Vs(n);return a.jsx(aw,{...s,...r,ref:e})});WR.displayName=BR;var HR="AlertDialogDescription",qR=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Vs(n);return a.jsx(lw,{...s,...r,ref:e})});qR.displayName=HR;var pq="AlertDialogAction",GR=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=Vs(n);return a.jsx(cw,{...s,...r,ref:e})});GR.displayName=pq;var KR="AlertDialogCancel",QR=m.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=fq(KR,n),i=Vs(n),o=Ne(e,s);return a.jsx(cw,{...i,...r,ref:o})});QR.displayName=KR;var gq=({contentRef:t})=>{const e=`\`${Ra}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ra}\` by passing a \`${HR}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ra}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},yq=VR,vq=FR,xq=zR,XR=UR,YR=$R,JR=GR,ZR=QR,eP=WR,tP=qR;const wq=yq,bq=vq,_q=xq,nP=m.forwardRef(({className:t,...e},n)=>a.jsx(XR,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));nP.displayName=XR.displayName;const rP=m.forwardRef(({className:t,...e},n)=>a.jsxs(_q,{children:[a.jsx(nP,{}),a.jsx(YR,{ref:n,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));rP.displayName=YR.displayName;const sP=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",t),...e});sP.displayName="AlertDialogHeader";const iP=({className:t,...e})=>a.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});iP.displayName="AlertDialogFooter";const oP=m.forwardRef(({className:t,...e},n)=>a.jsx(eP,{ref:n,className:$("text-lg font-semibold",t),...e}));oP.displayName=eP.displayName;const aP=m.forwardRef(({className:t,...e},n)=>a.jsx(tP,{ref:n,className:$("text-sm text-muted-foreground",t),...e}));aP.displayName=tP.displayName;const lP=m.forwardRef(({className:t,...e},n)=>a.jsx(JR,{ref:n,className:$(M0(),t),...e}));lP.displayName=JR.displayName;const cP=m.forwardRef(({className:t,...e},n)=>a.jsx(ZR,{ref:n,className:$(M0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));cP.displayName=ZR.displayName;var Tg="rovingFocusGroup.onEntryFocus",Sq={bubbles:!1,cancelable:!0},ip="RovingFocusGroup",[gv,uP,Eq]=gx(ip),[Tq,dP]=Wn(ip,[Eq]),[Nq,Cq]=Tq(ip),hP=m.forwardRef((t,e)=>a.jsx(gv.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(gv.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(kq,{...t,ref:e})})}));hP.displayName=ip;var kq=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),g=Ne(e,p),w=Km(i),[v=null,_]=Ns({prop:o,defaultProp:l,onChange:c}),[b,x]=m.useState(!1),S=mt(u),I=uP(n),D=m.useRef(!1),[M,E]=m.useState(0);return m.useEffect(()=>{const C=p.current;if(C)return C.addEventListener(Tg,S),()=>C.removeEventListener(Tg,S)},[S]),a.jsx(Nq,{scope:n,orientation:r,dir:w,loop:s,currentTabStopId:v,onItemFocus:m.useCallback(C=>_(C),[_]),onItemShiftTab:m.useCallback(()=>x(!0),[]),onFocusableItemAdd:m.useCallback(()=>E(C=>C+1),[]),onFocusableItemRemove:m.useCallback(()=>E(C=>C-1),[]),children:a.jsx(ge.div,{tabIndex:b||M===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:me(t.onMouseDown,()=>{D.current=!0}),onFocus:me(t.onFocus,C=>{const N=!D.current;if(C.target===C.currentTarget&&N&&!b){const k=new CustomEvent(Tg,Sq);if(C.currentTarget.dispatchEvent(k),!k.defaultPrevented){const A=I().filter(J=>J.focusable),P=A.find(J=>J.active),R=A.find(J=>J.id===v),ie=[P,R,...A].filter(Boolean).map(J=>J.ref.current);pP(ie,h)}}D.current=!1}),onBlur:me(t.onBlur,()=>x(!1))})})}),fP="RovingFocusGroupItem",mP=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,l=Jr(),c=i||l,u=Cq(fP,n),h=u.currentTabStopId===c,f=uP(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=u;return m.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),a.jsx(gv.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:a.jsx(ge.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:me(t.onMouseDown,w=>{r?u.onItemFocus(c):w.preventDefault()}),onFocus:me(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:me(t.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){u.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const v=jq(w,u.orientation,u.dir);if(v!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let b=f().filter(x=>x.focusable).map(x=>x.ref.current);if(v==="last")b.reverse();else if(v==="prev"||v==="next"){v==="prev"&&b.reverse();const x=b.indexOf(w.currentTarget);b=u.loop?Rq(b,x+1):b.slice(x+1)}setTimeout(()=>pP(b))}})})})});mP.displayName=fP;var Iq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Aq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function jq(t,e,n){const r=Aq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Iq[r]}function pP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Rq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Pq=hP,Dq=mP,fw="Tabs",[Mq,CG]=Wn(fw,[dP]),gP=dP(),[Oq,mw]=Mq(fw),yP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=Km(l),[f,p]=Ns({prop:r,onChange:s,defaultProp:i});return a.jsx(Oq,{scope:n,baseId:Jr(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:a.jsx(ge.div,{dir:h,"data-orientation":o,...u,ref:e})})});yP.displayName=fw;var vP="TabsList",xP=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=mw(vP,n),o=gP(n);return a.jsx(Pq,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(ge.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});xP.displayName=vP;var wP="TabsTrigger",bP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=mw(wP,n),l=gP(n),c=EP(o.baseId,r),u=TP(o.baseId,r),h=r===o.value;return a.jsx(Dq,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(ge.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:me(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:me(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:me(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});bP.displayName=wP;var _P="TabsContent",SP=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=mw(_P,n),c=EP(l.baseId,r),u=TP(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),a.jsx(Nn,{present:s||h,children:({present:p})=>a.jsx(ge.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&i})})});SP.displayName=_P;function EP(t,e){return`${t}-trigger-${e}`}function TP(t,e){return`${t}-content-${e}`}var Lq=yP,NP=xP,CP=bP,kP=SP;const Vq=Lq,IP=m.forwardRef(({className:t,...e},n)=>a.jsx(NP,{ref:n,className:$("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));IP.displayName=NP.displayName;const yh=m.forwardRef(({className:t,...e},n)=>a.jsx(CP,{ref:n,className:$("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));yh.displayName=CP.displayName;const vh=m.forwardRef(({className:t,...e},n)=>a.jsx(kP,{ref:n,className:$("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));vh.displayName=kP.displayName;function Fq(){const[t,e]=m.useState(null),[n,r]=m.useState(!1),[s,i]=m.useState(!1);return m.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const l=u=>{u.preventDefault(),e(u),r(!0)},c=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",l),window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",l),window.removeEventListener("appinstalled",c)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:l}=await t.userChoice;return l==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(l){return console.error("Error showing install prompt:",l),!1}}}}function zq(){const{user:t,requestCalendarPermissions:e}=rt(),[n,r]=m.useState(!1),[s,i]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!t)return;const u=as($e(Me,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const o=async()=>{r(!0);try{await e()&&await en($e(Me,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},l=async()=>{try{await en($e(Me,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},c=async(u,h)=>{i(f=>({...f,[u]:h}));try{await en($e(Me,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(je,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(Wi,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&a.jsx(ir,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),a.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?a.jsx(he,{variant:"ghost",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):a.jsx(he,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?a.jsx(Ro,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&a.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[a.jsx("div",{className:"h-px w-full bg-border mb-6"}),a.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",a.jsxs("div",{className:"grid gap-3 max-w-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),a.jsx(Tn,{checked:s.syncAssignments,onCheckedChange:u=>c("syncAssignments",u)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border bg-background/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),a.jsx(Tn,{checked:s.syncExams,onCheckedChange:u=>c("syncExams",u)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(Ya,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced:"," ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(je,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[a.jsx("div",{className:"flex-1 space-y-2",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border",children:a.jsx(_x,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),a.jsx("div",{className:"shrink-0",children:a.jsx(En,{href:"/settings/notifications",children:a.jsx(he,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function Uq(){var ie,J;const{user:t,signOut:e}=rt(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i,courses:o}=xn(),{isInstallable:l,isInstalled:c,promptInstall:u}=Fq(),{theme:h,setTheme:f}=P0(),[p,g]=m.useState(!0),[w,v]=m.useState("auto"),[_,b]=m.useState(!1),[x,S]=m.useState([]),[I,D]=m.useState(0),[M,E]=m.useState(0),[C,N]=m.useState(),[k,A]=m.useState("general");m.useEffect(()=>{const O=new URLSearchParams(window.location.search).get("tab");O&&["general","badges","integrations"].includes(O)&&A(O)},[]),m.useEffect(()=>{if(!t)return;const Y=as($e(Me,"leaderboards","all-courses","students",t.uid),O=>{var B;if(O.exists()){const U=O.data();S(U.badges||[]),D(U.loginStreak||0),E(((B=U.processedAssignmentIds)==null?void 0:B.length)||0)}else S([]),D(0),E(0)});return()=>Y()},[t]),m.useEffect(()=>{if(!o||o.length===0)return;let Y=0,O=0;o.forEach(B=>{if(B.attendanceData&&typeof B.attendanceData=="object"){const U=Object.values(B.attendanceData);Y+=U.length,O+=U.filter(W=>typeof W=="string"?W.toLowerCase()==="present":W===!0||W===1).length}}),console.log("Attendance Stats Calculated:",{totalClasses:Y,attendedClasses:O}),Y>0&&N({total:Y,attended:O})},[o]),m.useEffect(()=>{if(!t||k!=="badges")return;(async()=>{var ne,se;const O=$e(Me,"leaderboards","all-courses","students",t.uid),B=await Ds(O);if(!B.exists())return;const U=B.data(),W=new Set(U.badges||[]);let q=!1;const oe=U.loginStreak||0;oe>=5&&!W.has("5-day-consistent")&&(W.add("5-day-consistent"),q=!0),oe>=10&&!W.has("10-day-consistent")&&(W.add("10-day-consistent"),q=!0),oe>=30&&!W.has("30-day-consistent")&&(W.add("30-day-consistent"),q=!0);const ee=((ne=U.processedAssignmentIds)==null?void 0:ne.length)||0;if(ee>=10&&!W.has("10-submissions")&&(W.add("10-submissions"),q=!0),ee>=25&&!W.has("25-submissions")&&(W.add("25-submissions"),q=!0),ee>=50&&!W.has("50-submissions")&&(W.add("50-submissions"),q=!0),q){await en(O,{badges:Array.from(W)},{merge:!0});const L=[],X=new Set(U.badges||[]);W.forEach(Q=>{X.has(Q)||L.push(Q)});const{BADGES:ue}=await ga(async()=>{const{BADGES:Q}=await Promise.resolve().then(()=>IR);return{BADGES:Q}},void 0);for(const Q of L)await A0(kl(Me,"activities"),{userId:t.uid,userName:t.displayName||"User",userAvatar:t.photoURL,type:"badge_earned",content:`${t.displayName||"User"} earned the '${((se=ue[Q])==null?void 0:se.label)||"New Badge"}' badge!`,courseId:"all-courses",createdAt:new Date().toISOString()})}})()},[t,k]);const P=((ie=t==null?void 0:t.displayName)==null?void 0:ie.split(" ").map(Y=>Y[0]).join("").toUpperCase())||((J=t==null?void 0:t.email)==null?void 0:J[0].toUpperCase())||"U",R=()=>n?n.toLocaleString():"Never",F=async()=>{b(!0);try{await u()}catch(Y){console.error("Install failed:",Y)}finally{b(!1)}};return a.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),a.jsxs(Vq,{value:k,onValueChange:A,className:"w-full",children:[a.jsxs(IP,{className:"grid w-full grid-cols-3 lg:w-[400px] mb-6",children:[a.jsx(yh,{value:"general",children:"General"}),a.jsx(yh,{value:"badges",children:"Badges"}),a.jsx(yh,{value:"integrations",children:"Integrations"})]}),a.jsxs(vh,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[a.jsxs(je,{children:[a.jsxs(Ke,{children:[a.jsx(st,{className:"text-base",children:"Connected Account"}),a.jsx(gn,{children:"Your Google account linked to this app"})]}),a.jsxs(Ue,{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(qr,{className:"h-12 w-12",children:[a.jsx(Gr,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(Kr,{children:P})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),a.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[a.jsx(Wh,{className:"h-3.5 w-3.5"}),"Connected"]})]}),a.jsx(xr,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",R()]})]}),a.jsxs(he,{variant:"outline",size:"sm",onClick:Y=>{Y.preventDefault(),s().catch(O=>{console.error("Sync failed:",O)})},disabled:r,"data-testid":"button-sync-settings",children:[a.jsx(Ya,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),a.jsxs(je,{children:[a.jsxs(Ke,{children:[a.jsx(st,{className:"text-base",children:"Sync Settings"}),a.jsx(gn,{children:"Configure how your data syncs with Google Classroom"})]}),a.jsx(Ue,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Tr,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),a.jsx(Tn,{id:"background-sync",checked:p,onCheckedChange:g,"data-testid":"switch-background-sync"})]})})]}),a.jsxs(je,{children:[a.jsxs(Ke,{children:[a.jsx(st,{className:"text-base",children:"Theme"}),a.jsx(gn,{children:"Choose your preferred color theme"})]}),a.jsx(Ue,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Tr,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(he,{variant:h==="light"?"default":"outline",size:"sm",onClick:()=>f("light"),className:"flex items-center gap-2",children:[a.jsx(Ex,{className:"h-4 w-4"}),"Light"]}),a.jsxs(he,{variant:h==="dark"?"default":"outline",size:"sm",onClick:()=>f("dark"),className:"flex items-center gap-2",children:[a.jsx(nm,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),a.jsxs(je,{className:"border-primary/20",children:[a.jsxs(Ke,{children:[a.jsxs(st,{className:"text-base flex items-center gap-2",children:[a.jsx(C1,{className:"h-4 w-4"}),"Install App"]}),a.jsx(gn,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),a.jsx(Ue,{className:"space-y-4",children:c?a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[a.jsx(Wh,{className:"h-5 w-5 text-emerald-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),a.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):l?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[a.jsx(U5,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),a.jsxs(he,{onClick:F,disabled:_,className:"w-full",size:"lg","data-testid":"button-install-app",children:[a.jsx(C1,{className:"h-4 w-4 mr-2"}),_?"Installing...":"Install App"]}),a.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[a.jsx(So,{className:"h-5 w-5 text-muted-foreground"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),a.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),a.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),a.jsxs(je,{children:[a.jsxs(Ke,{children:[a.jsx(st,{className:"text-base",children:"Preferences"}),a.jsx(gn,{children:"Customize your experience"})]}),a.jsx(Ue,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Tr,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),a.jsxs(Af,{value:w,onValueChange:v,children:[a.jsx(hu,{className:"w-[180px]","data-testid":"select-timezone",children:a.jsx(jf,{})}),a.jsxs(fu,{children:[a.jsx(Ct,{value:"auto",children:"Auto-detect"}),a.jsx(Ct,{value:"America/New_York",children:"Eastern Time"}),a.jsx(Ct,{value:"America/Chicago",children:"Central Time"}),a.jsx(Ct,{value:"America/Denver",children:"Mountain Time"}),a.jsx(Ct,{value:"America/Los_Angeles",children:"Pacific Time"}),a.jsx(Ct,{value:"Europe/London",children:"London"}),a.jsx(Ct,{value:"Europe/Paris",children:"Paris"}),a.jsx(Ct,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),a.jsxs(je,{children:[a.jsxs(Ke,{children:[a.jsxs(st,{className:"text-base flex items-center gap-2",children:[a.jsx(Hh,{className:"h-4 w-4"}),"Account Actions"]}),a.jsx(gn,{children:"Manage your session"})]}),a.jsx(Ue,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),a.jsxs(wq,{children:[a.jsx(bq,{asChild:!0,children:a.jsxs(he,{variant:"outline",size:"sm","data-testid":"button-signout",children:[a.jsx(Hh,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),a.jsxs(rP,{children:[a.jsxs(sP,{children:[a.jsx(oP,{children:"Are you absolutely sure?"}),a.jsx(aP,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),a.jsxs(iP,{children:[a.jsx(cP,{children:"Cancel"}),a.jsx(lP,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90 border-0 border-none shadow-none ring-0 focus:ring-0 outline-none",children:"Sign Out"})]})]})]})]})})]})]}),a.jsx(vh,{value:"badges",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsxs(je,{children:[a.jsxs(Ke,{children:[a.jsxs(st,{className:"text-base flex items-center gap-2",children:[a.jsx(bC,{className:"h-5 w-5 text-amber-500"}),"Achievements & Badges"]}),a.jsx(gn,{children:"Track your progress and unlock rewards by staying consistent."})]}),a.jsx(Ue,{children:a.jsx(eq,{earnedBadges:x,currentStreak:I,submissionCount:M,attendanceStats:C})})]})}),a.jsx(vh,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:a.jsx(zq,{})})]})]})}function $q(){const{user:t,requestGmailPermissions:e,accessToken:n}=rt(),{toast:r}=Wo(),[s,i]=m.useState(!1),[o,l]=m.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{async function w(){if(t)try{const v=$e(Me,"users",t.uid,"settings","notifications"),_=await Ds(v);if(_.exists()){const b=_.data();i(b.enabled??!1),l(b.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(v){console.error("Failed to load settings from Firestore",v)}finally{f(!1)}}w()},[t]),m.useEffect(()=>{async function w(){if(!(!t||h))try{const _=$e(Me,"users",t.uid,"settings","notifications");await en(_,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(_){console.error("Failed to save settings",_)}}const v=setTimeout(w,1e3);return()=>clearTimeout(v)},[s,o,t,h]);const p=async()=>{u(!0);try{await e()?(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."})):r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(w){console.error(w),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},g=w=>{l(v=>({...v,[w]:!v[w]}))};return a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(En,{href:"/settings",children:a.jsx(he,{variant:"ghost",size:"icon",className:"rounded-full",children:a.jsx(em,{className:"h-5 w-5"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),a.jsxs(je,{className:"border-border shadow-sm",children:[a.jsxs(Ke,{className:"pb-4",children:[a.jsxs(st,{className:"flex items-center gap-2 text-lg",children:[a.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:a.jsx(_x,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),a.jsxs(gn,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),a.jsx(xr,{}),a.jsxs(Ue,{className:"pt-6 space-y-6",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Tr,{className:"text-base font-medium",children:"Assignment due reminder"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),a.jsx(Tn,{checked:o.dueReminder,onCheckedChange:()=>g("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(xr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Tr,{className:"text-base font-medium",children:"Missed submission alert"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),a.jsx(Tn,{checked:o.missedSubmission,onCheckedChange:()=>g("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),a.jsx(xr,{className:"opacity-50"}),a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx(Tr,{className:"text-base font-medium",children:"Heavy workload warning"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),a.jsx(Tn,{checked:o.workloadWarning,onCheckedChange:()=>g("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),a.jsxs(Z0,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[a.jsx(Xa,{className:"h-4 w-4 shrink-0"}),a.jsx("p",{children:"Academic alerts are active."})]}),a.jsx(he,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[a.jsx(So,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),a.jsxs(he,{onClick:p,disabled:c,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[c&&a.jsx(Ro,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function Bq(){const[t,e]=Qf(),{user:n,requestCalendarPermissions:r}=rt(),{toast:s}=Wo(),[i,o]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});m.useEffect(()=>{if(!n)return;const w=as($e(Me,"users",n.uid,"settings","calendar"),v=>{v.exists()&&h(v.data()),o(!1)});return()=>w()},[n]);const f=async()=>{c(!0);try{await r()?(await en($e(Me,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(w){console.error(w),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}},p=async()=>{try{await en($e(Me,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(w){console.error(w)}},g=async(w,v)=>{h(_=>({..._,[w]:v}));try{await en($e(Me,"users",n.uid,"settings","calendar"),{[w]:v},{merge:!0})}catch(_){console.error(_)}};return i?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(Ro,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):a.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(he,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:a.jsx(E5,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs(je,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(Ke,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:a.jsx(Wi,{className:"h-6 w-6"})}),a.jsx(st,{className:"text-xl",children:"Google Calendar"}),u.enabled&&a.jsx(ir,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),a.jsx(gn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?a.jsx(he,{variant:"outline",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(he,{onClick:f,disabled:l,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:l?a.jsx(Ro,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&a.jsxs(Ue,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(xr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),a.jsx(Tn,{checked:u.syncAssignments,onCheckedChange:w=>g("syncAssignments",w)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),a.jsx(Tn,{checked:u.syncExams,onCheckedChange:w=>g("syncExams",w)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),a.jsx(Tn,{checked:u.syncPersonal,onCheckedChange:w=>g("syncPersonal",w)})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[a.jsx(Ya,{className:"h-3 w-3"}),a.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),a.jsx(Wq,{})]})]})}function Wq(){const{user:t,requestGmailPermissions:e}=rt(),{toast:n}=Wo(),[r,s]=m.useState(!1),[i,o]=m.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});m.useEffect(()=>{if(!t)return;const h=as($e(Me,"users",t.uid,"settings","notifications"),f=>{f.exists()&&o(f.data())});return()=>h()},[t]);const l=async()=>{s(!0);try{await e()?(await en($e(Me,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},c=async()=>{try{await en($e(Me,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{o(p=>({...p,[h]:f}));try{await en($e(Me,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(p){console.error(p)}};return a.jsxs(je,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[a.jsxs(Ke,{className:"flex flex-row items-start justify-between pb-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[a.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),a.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),a.jsx(st,{className:"text-xl",children:"Email Notifications"}),i.enabled&&a.jsx(ir,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),a.jsx(gn,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?a.jsx(he,{variant:"outline",size:"sm",onClick:c,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):a.jsx(he,{onClick:l,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?a.jsx(Ro,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&a.jsxs(Ue,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[a.jsx(xr,{className:"mb-6"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),a.jsx(Tn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),a.jsx(Tn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}function Hq(){var C,N,k,A,P,R;const{user:t,signOut:e}=rt(),{courses:n,assignments:r,isLoading:s,error:i}=xn();if(i&&i.toLowerCase().includes("session")&&!(n.length>0||r.length>0))return a.jsx(Dl,{});const[o,l]=m.useState("class"),[c,u]=m.useState([]),[h,f]=m.useState(!1),[p,g]=m.useState(!0),[w,v]=m.useState(!0);m.useEffect(()=>{f(!0);const F=Array.from(new Set(["all-courses",...n.map(O=>O.id)])),ie=[],J=new Map,Y=()=>{const O=[],B=t!=null&&t.email?t.email.split("@")[1]:null,U=n.map(q=>q.id),W=new Set(r.map(q=>q.id));J.forEach(q=>{const oe=q.email||"";let ee=q.emailDomain||"";!ee&&oe.includes("@")&&(ee=oe.split("@")[1]);const ne=q.enrolledCourseIds||[],se=q.processedAssignmentIds||[],L=B&&ee&&B===ee,X=U.some(ae=>ne.includes(ae)),Q=!ee&&se.some(ae=>W.has(ae));let te=!1;o==="college"?(te=!!L,(q.id===(t==null?void 0:t.uid)||L)&&console.log(`[College Filter] Student: ${q.displayName}, Domain: ${ee}, User Domain: ${B}, Match: ${L}`)):te=L&&X||Q,te&&O.push(q)}),O.sort((q,oe)=>oe.totalXP-q.totalXP),u(O),f(!1)};return F.forEach(O=>{const B=kl(Me,"leaderboards",O,"students"),U=Vm(B,$m("totalXP","desc"),I0(50)),W=as(U,q=>{q.forEach(oe=>{const ee=oe.data(),ne={id:oe.id,displayName:ee.displayName||ee.name||"Anonymous",photoUrl:ee.photoUrl||ee.avatar||"",totalXP:ee.totalXP||ee.xp||0,processedAssignmentIds:ee.processedAssignmentIds||ee.completedTasks||[],email:ee.email||"",emailDomain:ee.emailDomain||(ee.email?ee.email.split("@")[1]:""),enrolledCourseIds:ee.enrolledCourseIds||ee.subjects||[],badges:ee.badges||[]},se=J.get(oe.id);(!se||ne.totalXP>=se.totalXP)&&J.set(oe.id,ne)}),Y()});ie.push(W)}),()=>{ie.forEach(O=>O())}},[o,t,n,r]);const _=o==="class"?"My Class":"My College",b=c.find(F=>F.id===(t==null?void 0:t.uid));b!=null&&b.totalXP;const x=!!b,S=c.filter(F=>F.totalXP>0),I=c.filter(F=>F.totalXP===0),D=c.length>0&&S.length===0,M=[...I].sort((F,ie)=>{const J=Y=>Y?typeof Y.toMillis=="function"?Y.toMillis():typeof Y=="number"?Y:Y instanceof Date?Y.getTime():typeof Y=="string"?new Date(Y).getTime():0:0;return J(F.lastSyncedAt)-J(ie.lastSyncedAt)}),E=[...S,...M];return a.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[i&&i.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(So,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached data is shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:F=>{F.preventDefault(),window.location.reload()},children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),a.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[_," Leaderboard"]})]}),a.jsx("div",{className:"w-full sm:w-[200px]",children:a.jsxs(Af,{value:o,onValueChange:F=>l(F),children:[a.jsx(hu,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:a.jsx(jf,{placeholder:"Select View"})}),a.jsxs(fu,{children:[a.jsx(Ct,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),a.jsx(Ct,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p&&o==="class"&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(he,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>g(!1),children:a.jsx(Po,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:a.jsx(R5,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),a.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[a.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),a.jsxs("span",{className:"leading-snug",children:["Submit"," ",a.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",a.jsx("br",{className:"hidden sm:block"}),a.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),o==="college"&&w&&a.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-amber-500/10 via-amber-500/5 to-transparent rounded-xl border border-amber-500/20 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[a.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:a.jsx(he,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-amber-600/50 hover:text-amber-700 hover:bg-amber-500/10 rounded-full transition-colors",onClick:()=>v(!1),children:a.jsx(Po,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),a.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-amber-500/30 shadow-sm shrink-0 sm:mt-1 ring-4 ring-amber-500/10",children:a.jsx(So,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-500"})}),a.jsxs("div",{className:"space-y-2 pt-0.5 pr-4 sm:pr-8",children:[a.jsxs("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base flex items-center gap-1.5",children:["College Leaderboard - For Fun Only!",a.jsx(TC,{className:"h-4 w-4 text-amber-500 fill-amber-500/20"})]}),a.jsxs("p",{className:"text-muted-foreground text-xs sm:text-sm leading-relaxed",children:["This leaderboard shows all students from your college.",a.jsxs("span",{className:"block mt-1.5 text-amber-700 dark:text-amber-400 font-medium flex items-start gap-1",children:[a.jsx(So,{className:"h-4 w-4 shrink-0 mt-0.5"}),a.jsx("span",{children:"Note: This is NOT a fair competition! Different classes have different subjects, assignments, and workloads. Rankings are purely for entertainment."})]})]})]})]}),!x&&!h?a.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:a.jsxs("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:a.jsx(Ro,{className:"h-6 w-6 text-primary animate-spin"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h3",{className:"text-lg font-medium",children:"Syncing Your Progress"}),a.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Your leaderboard data is automatically syncing. Complete some assignments to start earning XP!"})]})]})}):null,h&&c.length===0?a.jsx("div",{className:"space-y-4",children:[1,2,3].map(F=>a.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},F))}):c.length===0?a.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:a.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):D?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-800/30 rounded-xl p-4 flex items-start gap-3",children:[a.jsx(wC,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-sm font-medium text-amber-900 dark:text-amber-100",children:"Be the first to climb the leaderboard!"}),a.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Submit your first assignment to earn 100 XP and claim the #1 spot. The competition starts now!"})]})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:E.map((F,ie)=>{var Y,O;const J=F.id===(t==null?void 0:t.uid);return a.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200",J?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30"),children:[a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(qr,{className:$("h-10 w-10 border flex-shrink-0",J?"border-primary/20":"border-border"),children:[a.jsx(Gr,{src:F.photoUrl}),a.jsx(Kr,{className:"text-xs bg-muted text-muted-foreground",children:(O=(Y=F.displayName)==null?void 0:Y[0])==null?void 0:O.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("span",{className:$("text-sm font-medium truncate",J?"text-primary":"text-foreground"),children:[F.displayName,J&&a.jsx("span",{className:"text-muted-foreground text-xs font-normal ml-2",children:"(You)"})]}),a.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready to start"})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-sm font-bold text-muted-foreground",children:"0 XP"})})]},F.id)})})]}):a.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[E.length>0&&a.jsxs("div",{className:$("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",p?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[a.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:E[1]&&E[1].totalXP>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(qr,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[a.jsx(Gr,{src:E[1].photoUrl}),a.jsx(Kr,{className:"text-lg bg-zinc-100 text-zinc-500",children:(N=(C=E[1].displayName)==null?void 0:C[0])==null?void 0:N.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:E[1].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[E[1].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(fc,{badges:E[1].badges||[],limit:2,size:"sm"})})]})]}):S.length===1?a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Submit 1 assignment to claim 2nd place!"})]}):a.jsx("div",{className:"w-full"})}),a.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:a.jsx(k5,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),a.jsxs(qr,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[a.jsx(Gr,{src:E[0].photoUrl}),a.jsx(Kr,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(A=(k=E[0].displayName)==null?void 0:k[0])==null?void 0:A.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),a.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:E[0].displayName}),a.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[E[0].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[28px] flex items-center justify-center pt-1",children:a.jsx(fc,{badges:E[0].badges||[],limit:3,size:"sm"})})]})]}),a.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:E[2]&&E[2].totalXP>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsxs(qr,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[a.jsx(Gr,{src:E[2].photoUrl}),a.jsx(Kr,{className:"text-lg bg-amber-50 text-amber-700",children:(R=(P=E[2].displayName)==null?void 0:P[0])==null?void 0:R.toUpperCase()})]}),a.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),a.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[a.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:E[2].displayName}),a.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[E[2].totalXP.toLocaleString()," XP"]}),a.jsx("div",{className:"min-h-[24px] flex items-center justify-center pt-1",children:a.jsx(fc,{badges:E[2].badges||[],limit:2,size:"sm"})})]})]}):S.length>=1?a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"h-14 w-14 sm:h-20 sm:w-20 mx-auto rounded-full border-2 border-dashed border-muted-foreground/30 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("p",{className:"text-[10px] text-muted-foreground px-2",children:"Spot open for 3rd place!"})]}):a.jsx("div",{className:"w-full"})})]}),a.jsx("div",{className:"flex flex-col space-y-2",children:E.slice(Math.min(3,S.length)).map((F,ie)=>{var O,B;const J=F.id===(t==null?void 0:t.uid),Y=Math.min(3,S.length)+ie+1;return a.jsxs("div",{className:$("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",J?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border hover:bg-muted/30 hover:border-border"),children:[a.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:a.jsx("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:F.totalXP>0?`#${Y}`:"-"})}),a.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[a.jsxs(qr,{className:$("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",J?"border-primary/20":"border-border"),children:[a.jsx(Gr,{src:F.photoUrl}),a.jsx(Kr,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(B=(O=F.displayName)==null?void 0:O[0])==null?void 0:B.toUpperCase()})]}),a.jsxs("div",{className:"flex flex-col min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[a.jsxs("span",{className:$("text-xs sm:text-sm font-medium truncate",J?"text-primary":"text-foreground"),children:[F.displayName," ",J&&a.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-0.5 sm:ml-2",children:"(You)"})]}),a.jsx(fc,{badges:F.badges||[],limit:3,size:"md",className:"scale-100"})]}),a.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[F.processedAssignmentIds.length," ",a.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),a.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[a.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:F.totalXP.toLocaleString()}),a.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},F.id)})})]})]})})]})}function qq(){const t=new Date,e=t.getFullYear(),r=t.getMonth()<5?e-1:e,s=r+1;return`${r}-${s.toString().slice(-2)}`}const XS=(t,e)=>{if(e===0)return{percentage:0,status:"safe",color:"text-muted-foreground",progressColor:"bg-muted"};const n=Math.round(t/e*100);let r="safe",s="text-emerald-700 bg-emerald-50 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20",i="bg-emerald-500 dark:bg-emerald-500";return n<70?(r="danger",s="text-red-700 bg-red-50 border-red-200 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20",i="bg-red-500 dark:bg-red-500"):n<75&&(r="warning",s="text-amber-700 bg-amber-50 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20",i="bg-amber-500 dark:bg-amber-500"),{percentage:n,status:r,color:s,progressColor:i}};function Gq(){return a.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8 animate-pulse",children:[a.jsx(Skeleton,{className:"h-48 w-full rounded-xl"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>a.jsx(Skeleton,{className:"h-64 rounded-xl"},t))})]})}function Kq(){const{courses:t,error:e,isLoading:n}=xn();if(n)return a.jsx(Gq,{});if(e&&e.toLowerCase().includes("session")&&t.length===0)return a.jsx(Dl,{});const{accessToken:r,user:s}=rt();Wo();const[i,o]=m.useState(""),[l,c]=m.useState({}),[u,h]=m.useState(!1),[f,p]=m.useState(null);m.useState("");const g=m.useMemo(()=>qq(),[]);m.useEffect(()=>{if(!t||!s)return;(async()=>{const C=await Promise.all(t.map(async k=>{var P;if(((P=l[k.id])==null?void 0:P.state)==="loaded")return l[k.id];const A=await Yn.getCourseConfig(k.id);return A?A.isVisible?(w(k.id,A.sheetUrl),{courseId:k.id,state:"loading"}):{courseId:k.id,state:"hidden"}:{courseId:k.id,state:"no-config"}})),N={};C.forEach(k=>{N[k.courseId]=k}),c(k=>({...k,...N}))})()},[t,s]),m.useEffect(()=>{t.length>0&&!i&&o(t[0].id)},[t,i]);const w=async(E,C)=>{if(!r||!(s!=null&&s.email))return;const N=Yn.extractSheetId(C);if(!N){c(P=>({...P,[E]:{courseId:E,state:"error",error:"Invalid configuration"}}));return}const k=await Yn.getCourseConfig(E),A=(k==null?void 0:k.emailColumn)||"A";try{const P=await Yn.fetchAttendanceFromSheet(N,r,s.email,A);c(R=>({...R,[E]:{courseId:E,state:"loaded",data:P}}))}catch(P){console.error(P),c(R=>({...R,[E]:{courseId:E,state:"error",error:P.message||"Failed to load"}}))}},v=async E=>{E==null||E.stopPropagation(),h(!0);const C=Object.values(l).filter(N=>N.state==="loaded"||N.state==="error"||N.state==="loading").map(async N=>{const k=await Yn.getCourseConfig(N.courseId);return k?w(N.courseId,k.sheetUrl):Promise.resolve()});await Promise.allSettled(C),h(!1)},_=Object.values(l).filter(E=>E.state==="loaded"&&E.data),b=_.reduce((E,C)=>{var N;return E+(((N=C.data)==null?void 0:N.stats.attendedClasses)||0)},0),x=_.reduce((E,C)=>{var N;return E+(((N=C.data)==null?void 0:N.stats.totalClasses)||0)},0),S=XS(b,x),I=l[i],D=t.find(E=>E.id===i),M=I==null?void 0:I.data;return m.useEffect(()=>{if(!s||x<5)return;const C=setTimeout(async()=>{const N=[],k=b,A=x,P=A>0?k/A:0;if(A>=10&&P===1&&N.push("perfect-week"),A>=30&&P>=.95&&N.push("attendance-champion"),N.length>0)try{const R=$e(Me,"leaderboards","all-courses","students",s.uid);await WA(R,{badges:GA(...N)})}catch(R){console.debug("Could not award attendance badges:",R)}},3e3);return()=>clearTimeout(C)},[s,x,b]),a.jsxs("div",{className:"h-full flex flex-col bg-background text-foreground overflow-hidden",children:[a.jsx("div",{className:"hidden sm:flex flex-none px-4 sm:px-6 py-4 border-b border-border z-10 bg-background/95 backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center justify-between max-w-[1600px] mx-auto w-full gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[a.jsx("h1",{className:"text-base sm:text-lg font-semibold tracking-tight text-foreground whitespace-nowrap",children:"Attendance"}),a.jsx("span",{className:"hidden sm:block h-4 w-px bg-border mx-1"}),a.jsxs("span",{className:"hidden sm:inline text-sm text-muted-foreground font-medium whitespace-nowrap",children:["Academic Year ",g]})]}),a.jsxs(he,{variant:"ghost",size:"sm",onClick:v,className:$("text-muted-foreground h-8 shrink-0",u&&"opacity-70"),children:[a.jsx(qh,{className:$("h-3.5 w-3.5 sm:mr-2",u&&"animate-spin")}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh Data"})]})]})}),e&&e.toLowerCase().includes("session")&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-950/50 border-b border-amber-200 dark:border-amber-800 px-4 py-3 shrink-0",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-800 dark:text-amber-200",children:[a.jsx(So,{className:"h-4 w-4"}),a.jsx("span",{children:"Sync is paused. Cached courses shown. Sign in to update."})]}),a.jsx("a",{href:"/auth/refresh",onClick:E=>{E.preventDefault(),window.location.reload()},children:a.jsx(he,{variant:"outline",size:"sm",className:"h-7 text-xs border-amber-300 dark:border-amber-700 hover:bg-amber-100 dark:hover:bg-amber-900",children:"Reconnect"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden",children:a.jsxs("div",{className:"max-w-[1600px] mx-auto w-full p-6 space-y-8",children:[a.jsx("section",{children:_.length>0?a.jsx(je,{className:"border-border shadow-sm bg-card transition-all duration-300 hover:shadow-md hover:scale-[1.002]",children:a.jsx(Ue,{className:"p-6 flex flex-col sm:flex-row items-center justify-between gap-6",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-500/5 px-2 py-0.5 rounded-full border border-emerald-500/10 w-fit mb-2",children:[a.jsxs("span",{className:"relative flex h-1.5 w-1.5",children:[a.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-500 opacity-75"}),a.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 bg-emerald-500"})]}),a.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider text-emerald-600/80",children:"Realtime"})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-muted-foreground uppercase tracking-wider",children:"Overall Attendance"}),a.jsx(ir,{variant:S.status==="safe"?"outline":"destructive",className:$("ml-2 h-5 text-[10px] px-1.5 uppercase transition-transform duration-300 hover:scale-105",S.color),children:S.status==="safe"?"Safe Status":"Attention Needed"})]}),a.jsxs("div",{className:"flex items-baseline gap-3",children:[a.jsxs("span",{className:"text-4xl sm:text-5xl font-bold tracking-tight text-foreground transition-colors duration-300 hover:text-primary",children:[S.percentage,"%"]}),a.jsxs("span",{className:"text-sm sm:text-base text-muted-foreground font-medium",children:["Average across ",_.length," active courses"]})]})]})})}):a.jsx(je,{className:"border-border shadow-sm bg-card",children:a.jsxs(Ue,{className:"p-8 flex flex-col items-center justify-center text-center gap-4",children:[a.jsx("div",{className:"p-4 bg-muted/50 rounded-full",children:a.jsx(Zc,{className:"h-8 w-8 text-muted-foreground/50"})}),a.jsxs("div",{className:"space-y-2 max-w-md",children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No Attendance Configured Yet"}),a.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:["Invite your teacher to login to"," ",a.jsx("span",{className:"font-semibold",children:"Trace"})," to start tracking real-time attendance for your courses."]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground/70 bg-muted/30 px-3 py-2 rounded-md",children:[a.jsx(Un,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Once configured, attendance will appear here automatically"})]})]})})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-8 items-start",children:[a.jsx("div",{className:"lg:col-span-8 grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(E=>{var P,R;const C=l[E.id],N=(C==null?void 0:C.state)||"loading",k=C!=null&&C.data?XS(C.data.stats.attendedClasses,C.data.stats.totalClasses):null,A=i===E.id;return a.jsx(je,{className:$("group cursor-pointer border-border shadow-sm bg-card active:scale-[0.99]","transition-all duration-300 ease-out","hover:shadow-md hover:-translate-y-1 hover:border-primary/30",A&&"ring-1 ring-primary border-primary shadow-md"),onClick:()=>o(E.id),children:a.jsxs(Ue,{className:"p-5 h-full flex flex-col justify-between gap-4 min-h-[140px]",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsxs(hm,{children:[a.jsx(fm,{asChild:!0,children:a.jsx("h3",{className:"font-semibold text-foreground truncate pr-2",children:E.name})}),a.jsx(Nu,{children:a.jsx("p",{children:E.name})})]}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono mt-1",children:E.section||"No Section"})]}),N==="loaded"&&k&&a.jsxs("span",{className:$("text-lg font-bold tabular-nums",k.percentage<75?"text-destructive":"text-muted-foreground/70"),children:[k.percentage,"%"]}),N==="hidden"&&a.jsx(Ey,{className:"h-5 w-5 text-muted-foreground/50"}),N==="locked"&&a.jsx(Ty,{className:"h-5 w-5 text-amber-500/80"}),N==="error"&&a.jsx(So,{className:"h-5 w-5 text-destructive/80"})]}),a.jsxs("div",{className:"mt-auto",children:[N==="loaded"&&k&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-medium",children:[a.jsxs("span",{children:[(P=C.data)==null?void 0:P.stats.attendedClasses,"/",(R=C.data)==null?void 0:R.stats.totalClasses," classes"]}),a.jsx("span",{className:k.status==="safe"?"text-emerald-500":"text-red-500",children:k.status==="safe"?"On Track":"Low Attendance"})]}),a.jsx("div",{className:"h-1 w-full bg-secondary/80 rounded-full overflow-hidden",children:a.jsx("div",{className:$("h-full rounded-full transition-all duration-500",k.progressColor),style:{width:`${k.percentage}%`}})})]}),N==="locked"&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Attendance is password protected."}),a.jsxs(he,{size:"sm",variant:"secondary",className:"w-full",onClick:F=>{F.stopPropagation(),p(E.id)},children:[a.jsx(P5,{className:"w-3 h-3 mr-2"}),"Unlock"]})]}),N==="hidden"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Attendance hidden by teacher."}),N==="no-config"&&a.jsx("p",{className:"text-xs text-muted-foreground italic",children:"Not configured."}),N==="error"&&a.jsx("p",{className:"text-xs text-destructive",children:C==null?void 0:C.error}),N==="loading"&&a.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[a.jsx(qh,{className:"w-3 h-3 animate-spin"})," ","Fetching..."]})]})]})},E.id)})}),a.jsx("div",{className:"lg:col-span-4 space-y-6 lg:sticky lg:top-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx(Zc,{className:"h-4 w-4"})," History"]}),a.jsx("span",{className:"text-xs text-muted-foreground font-mono bg-muted px-2 py-0.5 rounded",children:(D==null?void 0:D.section)||(D==null?void 0:D.name.slice(0,3).toUpperCase())})]}),a.jsx(je,{className:"border-border shadow-sm bg-card overflow-hidden h-[400px]",children:M?a.jsx("div",{className:"h-full overflow-y-auto [&::-webkit-scrollbar]:hidden p-4",children:a.jsx("div",{className:"relative border-l border-muted/60 ml-1.5 space-y-3 pb-2",children:M.history.map((E,C)=>{const N=E.status==="Present",k=C===0,A=C===5;return a.jsxs("div",{className:"group",children:[k&&a.jsx("div",{className:"ml-5 mb-3 mt-1",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Recent Activity"})}),A&&a.jsx("div",{className:"ml-5 mb-3 mt-4 pt-4 border-t border-dashed border-border/60",children:a.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground/70 uppercase tracking-widest pl-1",children:"Earlier"})}),a.jsxs("div",{className:"relative pl-5 select-none",children:[a.jsx("div",{className:$("absolute -left-[4.5px] top-2.5 h-2.5 w-2.5 rounded-full ring-[3px] ring-card transition-all duration-300 z-10","group-hover:scale-110 group-hover:shadow-sm",N?"bg-emerald-500 group-hover:bg-emerald-600":"bg-rose-500 group-hover:bg-rose-600")}),C!==M.history.length-1&&a.jsx("div",{className:"absolute left-[0px] top-4 bottom-[-12px] w-[1px] bg-muted/40 group-hover:bg-foreground/10 transition-colors duration-300 block"}),a.jsx("div",{className:"flex flex-col gap-1 sm:gap-0.5 transition-transform duration-300 ease-out group-hover:translate-x-1 pb-3",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-4",children:[a.jsx("div",{className:$("inline-flex items-center justify-center px-2.5 py-1 rounded-md text-[10px] font-bold tracking-wide uppercase transition-all duration-200 w-full sm:w-fit cursor-default","shadow-sm border",N?"bg-emerald-50 text-emerald-700 border-emerald-100 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20 group-hover:border-emerald-200":"bg-rose-50 text-rose-700 border-rose-100 dark:bg-red-500/10 dark:text-red-400 dark:border-red-500/20 group-hover:border-rose-200"),children:E.status}),a.jsx("span",{className:"text-[10px] text-muted-foreground font-mono pl-0.5 sm:pl-0",children:E.date})]})})]})]},C)})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground p-6 text-center",children:[(I==null?void 0:I.state)==="locked"&&a.jsxs(a.Fragment,{children:[a.jsx(Ty,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"Unlock this course to view history."})]}),(I==null?void 0:I.state)==="hidden"&&a.jsxs(a.Fragment,{children:[a.jsx(Ey,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"History is hidden."})]}),((I==null?void 0:I.state)==="error"||(I==null?void 0:I.state)==="no-config")&&a.jsxs(a.Fragment,{children:[a.jsx(Un,{className:"h-8 w-8 mb-3 opacity-20"}),a.jsx("p",{className:"text-sm",children:"No data available."})]})]})})]})})]})]})})]})}function Qq(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(je,{className:"w-full max-w-md mx-4",children:a.jsxs(Ue,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(Un,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function AP(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}const Xq=864e5;function yv(t){const e=AP(t);return e.setHours(0,0,0,0),e}function YS(t){const e=AP(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Yq(t,e){const n=yv(t),r=yv(e),s=+n-YS(n),i=+r-YS(r);return Math.round((s-i)/Xq)}function Jq(){const{user:t}=rt();return m.useEffect(()=>{if(!t)return;(async()=>{try{const n=$e(Me,"leaderboards","all-courses","students",t.uid),r=await Ds(n),s=yv(new Date).getTime();let i=0,o=0,l=[];if(r.exists()){const f=r.data();i=f.loginStreak||0,o=f.lastLoginStreakDate?f.lastLoginStreakDate:0,l=f.badges||[]}if(o){const f=Yq(s,o);if(f===0)return;f===1?i+=1:i=1}else i=1;const c=[...l];let u=!1;i>=5&&!c.includes("5-day-consistent")&&(c.push("5-day-consistent"),u=!0),i>=10&&!c.includes("10-day-consistent")&&(c.push("10-day-consistent"),u=!0),i>=30&&!c.includes("30-day-consistent")&&(c.push("30-day-consistent"),u=!0);const h={loginStreak:i,lastLoginStreakDate:s};u&&(h.badges=c),await en(n,h,{merge:!0}),console.debug("Streak updated to:",i)}catch(n){console.error("Failed to update streak:",n)}})()},[t]),null}const Zq=["Use the Timeline view to visualize your deadlines chronologically.","Check the Leaderboard to compare your progress with peers.","Assignments due in less than 3 days show up in your 'Warning' card.","Syncing refreshes your data directly from Google Classroom.","Complete assignments early to earn speed bonuses!","Review the 'Next Actions' list to prioritize your day.","Drag and drop tasks in the Pipeline to manage your workflow.","Stay consistent! Daily progress builds your streak and XP."];function jP({children:t,message:e="Loading Workspace",tips:n}){const[r,s]=m.useState(10),[i,o]=m.useState(0),l=n&&n.length>0?n:Zq;return m.useEffect(()=>{const c=setInterval(()=>{s(h=>{if(h>=100)return 100;const f=Math.random()*15;return Math.min(h+f,90)})},400),u=setInterval(()=>{o(h=>(h+1)%l.length)},3e3);return()=>{clearInterval(c),clearInterval(u)}},[]),a.jsxs("div",{className:"relative h-screen w-full bg-background overflow-hidden flex flex-col",children:[t?a.jsx("div",{className:"absolute inset-0 opacity-30 pointer-events-none select-none filter blur-[2px] scale-[0.98]",children:t}):a.jsxs("div",{className:"absolute inset-0",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]"}),a.jsx("div",{className:"absolute left-0 right-0 top-0 -z-10 m-auto h-[310px] w-[310px] rounded-full bg-primary/20 opacity-20 blur-[100px]"}),a.jsx("div",{className:"absolute bottom-0 right-0 -z-10 h-[300px] w-[300px] rounded-full bg-indigo-500/20 opacity-20 blur-[100px]"})]}),a.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/40 backdrop-blur-sm",children:a.jsxs("div",{className:"w-full max-w-sm mx-auto p-6 flex flex-col gap-8 animate-in fade-in zoom-in-95 duration-500",children:[a.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),a.jsx("div",{className:"h-14 w-14 bg-background border border-border shadow-xl rounded-2xl flex items-center justify-center relative z-10 group",children:a.jsx(Ro,{className:"h-7 w-7 text-primary animate-spin"})}),a.jsx("div",{className:"absolute -right-2 -top-2 z-20",children:a.jsx(TC,{className:"h-5 w-5 text-yellow-500 animate-bounce delay-75"})})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:e}),a.jsx("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest",children:"Trace Is Ready"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden backdrop-blur-sm border border-border/50",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-primary/80 via-primary to-indigo-500 transition-all duration-500 ease-out relative",style:{width:`${r}%`},children:a.jsx("div",{className:"absolute inset-0 bg-white/20 animate-[shimmer_1s_infinite]"})})}),a.jsxs("div",{className:"flex justify-between text-[10px] font-medium text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(pC,{className:"h-3 w-3"})," Optimizing"]}),a.jsxs("span",{children:[Math.round(r),"%"]})]})]}),a.jsxs("div",{className:"relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-indigo-500/5 rounded-xl border border-primary/10 transition-all duration-500 group-hover:border-primary/20"}),a.jsxs("div",{className:"relative p-4 flex gap-3.5 items-start",children:[a.jsx("div",{className:"mt-0.5 p-1.5 bg-background/80 rounded-lg shadow-sm border border-border/50 shrink-0",children:a.jsx(SC,{className:"h-4 w-4 text-primary"})}),a.jsxs("div",{className:"space-y-1 pt-0.5",children:[a.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider flex items-center gap-1",children:"Pro Tip"}),a.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed transition-all duration-300 min-h-[40px]",children:l[i]})]})]})]})]})})]})}const eG=["You can hide attendance visibility for specific courses during exams.","Students can directly view attendance when you make it visible.","Syncing pulls the latest course list from Google Classroom.","Students can only see their own attendance records.","Teacher Dashboard gives you a quick overview of enabled courses."];function tG({activePage:t,setPage:e,mobileOpen:n,onMobileClose:r}){var p,g;const{user:s,signOut:i}=rt(),{theme:o,toggleTheme:l}=P0(),c=Wm(),u=[{id:"dashboard",label:"Dashboard",icon:D5},{id:"courses",label:"Courses",icon:wx},{id:"settings",label:"Settings",icon:EC}],h=((p=s==null?void 0:s.displayName)==null?void 0:p.split(" ").map(w=>w[0]).join("").toUpperCase())||((g=s==null?void 0:s.email)==null?void 0:g[0].toUpperCase())||"U",f=()=>a.jsxs("div",{className:"flex flex-col h-full bg-card border-r border-border",children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-border shrink-0",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),a.jsx("span",{className:"ml-2 text-xs font-medium text-muted-foreground border border-border px-1.5 py-0.5 rounded",children:"Teacher"}),c&&a.jsx("button",{className:"ml-auto",onClick:r,children:a.jsx(Po,{className:"w-5 h-5 text-muted-foreground"})})]}),a.jsx("div",{className:"p-4 border-b border-border shrink-0",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs(qr,{className:"h-8 w-8",children:[a.jsx(Gr,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),a.jsx(Kr,{className:"text-xs",children:h})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:u.map(w=>a.jsxs("button",{onClick:()=>{e(w.id),c&&r()},className:$("w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors",t===w.id?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[a.jsx(w.icon,{className:"h-4 w-4"}),w.label]},w.id))}),a.jsxs("div",{className:"p-4 border-t border-border space-y-1 shrink-0",children:[a.jsxs("button",{onClick:l,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?a.jsx(Ex,{className:"w-4 h-4 mr-3"}):a.jsx(nm,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),a.jsxs(he,{variant:"ghost",className:"w-full justify-start text-destructive hover:text-destructive hover:bg-destructive/10",onClick:()=>i(),children:[a.jsx(Hh,{className:"h-4 w-4 mr-3"}),"Sign Out"]})]})]});return a.jsxs(a.Fragment,{children:[a.jsx("aside",{className:$("fixed inset-y-0 left-0 z-50 w-64 bg-background transform transition-transform duration-200 ease-in-out",c?n?"translate-x-0 shadow-2xl":"-translate-x-full":"relative translate-x-0"),children:a.jsx(f,{})}),c&&n&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden backdrop-blur-sm",onClick:r})]})}function nG({courses:t}){const[e,n]=m.useState(0),[r,s]=m.useState(0);return m.useEffect(()=>{(async()=>{let o=0,l=0;(await Promise.all(t.map(u=>Yn.getCourseConfig(u.id)))).forEach(u=>{u&&(u.isVisible?o++:l++)}),n(o),s(l)})()},[t]),a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Teacher Dashboard"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your courses and attendance visibility"})]}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[a.jsxs(je,{className:"border-border shadow-sm",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(st,{className:"text-sm font-medium",children:"Total Courses"}),a.jsx(wx,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Ue,{children:a.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),a.jsxs(je,{className:"border-border shadow-sm",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(st,{className:"text-sm font-medium",children:"Attendance Visible"}),a.jsx(I5,{className:"h-4 w-4 text-emerald-500"})]}),a.jsx(Ue,{children:a.jsx("div",{className:"text-2xl font-bold",children:e})})]}),a.jsxs(je,{className:"border-border shadow-sm",children:[a.jsxs(Ke,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(st,{className:"text-sm font-medium",children:"Attendance Hidden"}),a.jsx(Ey,{className:"h-4 w-4 text-amber-500"})]}),a.jsx(Ue,{children:a.jsx("div",{className:"text-2xl font-bold text-muted-foreground",children:r})})]})]})]})}function rG({courses:t,onRefresh:e,isLoading:n}){const[r,s]=m.useState(null);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Your Courses"}),a.jsx("p",{className:"text-muted-foreground",children:"Configure attendance settings for each course"})]}),a.jsxs(he,{variant:"outline",size:"sm",onClick:e,disabled:n,className:"w-full sm:w-auto",children:[a.jsx(qh,{className:$("mr-2 h-4 w-4",n&&"animate-spin")}),"Sync Courses"]})]}),a.jsxs("div",{className:"grid gap-6",children:[t.map(i=>a.jsxs(je,{className:"overflow-hidden border-border shadow-sm",children:[a.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-semibold text-lg truncate",children:i.name}),a.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-muted-foreground mt-1",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:i.section}),a.jsx("span",{className:"hidden sm:inline",children:""}),a.jsx("span",{className:"font-mono text-xs bg-muted px-1.5 py-0.5 rounded",children:i.id})]})]}),a.jsx(he,{variant:r===i.id?"secondary":"default",onClick:()=>s(r===i.id?null:i.id),className:"shrink-0",children:r===i.id?"Close Settings":"Attendance Settings"})]}),r===i.id&&a.jsx("div",{className:"px-6 pb-6 pt-0 border-t bg-muted/30",children:a.jsx(sG,{courseId:i.id})})]},i.id)),t.length===0&&a.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[a.jsx("p",{children:"No active courses found where you are a teacher."}),a.jsx(he,{variant:"ghost",onClick:e,children:"Try Syncing Again"})]})]})]})}function sG({courseId:t}){const{toast:e}=Wo(),[n,r]=m.useState(!1),[s,i]=m.useState(""),[o,l]=m.useState("A"),[c,u]=m.useState(!1),[h,f]=m.useState(!0);m.useEffect(()=>{let g=!0;return(async()=>{f(!0);const v=await Yn.getCourseConfig(t);g&&v&&(r(v.isVisible),i(v.sheetUrl),l(v.emailColumn||"A")),g&&f(!1)})(),()=>{g=!1}},[t]);const p=async()=>{if(!Yn.extractSheetId(s)){e({title:"Invalid Google Sheet URL",description:"Please paste a valid Google Sheets URL (e.g., docs.google.com/spreadsheets/d/...)",variant:"destructive"});return}u(!0);try{await Yn.saveCourseConfig(t,{sheetUrl:s,passKey:"",isVisible:n,emailColumn:o.toUpperCase()}),e({title:"Settings Saved",description:`Attendance is now ${n?"visible":"hidden"} for this course.`}),setTimeout(()=>u(!1),2e3)}catch{u(!1),e({title:"Save Failed",description:"Could not save settings to database.",variant:"destructive"})}};return h?a.jsxs("div",{className:"p-4 text-center text-sm text-muted-foreground",children:[a.jsx(qh,{className:"w-4 h-4 animate-spin mx-auto mb-2"})," Loading settings..."]}):a.jsxs("div",{className:"space-y-6 pt-6 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Attendance Visibility"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Visible to enrolled students":"Hidden from students"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ir,{variant:n?"default":"secondary",children:n?"Visible":"Hidden"}),a.jsx(Tn,{checked:n,onCheckedChange:r})]})]}),a.jsxs("div",{className:"grid gap-4 max-w-xl",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Tr,{htmlFor:`sheet-${t}`,children:"Google Sheet URL"}),a.jsx(yf,{id:`sheet-${t}`,value:s,onChange:g=>i(g.target.value),placeholder:"https://docs.google.com/spreadsheets/...",className:"bg-background"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paste the link to the attendance tracking sheet. Ensure it is shared with the service account (or public, if testing)."})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Tr,{htmlFor:`email-col-${t}`,children:"Email Column"}),a.jsx(yf,{id:`email-col-${t}`,value:o,onChange:g=>l(g.target.value.toUpperCase()),placeholder:"A",maxLength:1,className:"w-20 text-center font-mono uppercase"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Column letter where student emails are stored (e.g., A, B, C)."})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-2",children:a.jsx(he,{onClick:p,disabled:c,className:"w-full sm:w-auto",children:c?a.jsxs(a.Fragment,{children:[a.jsx(bx,{className:"w-4 h-4 mr-2"}),"Saved"]}):a.jsxs(a.Fragment,{children:[a.jsx(Sx,{className:"w-4 h-4 mr-2"}),"Save Settings"]})})})]})]})}function iG(){return a.jsxs("div",{className:"space-y-6 max-w-2xl animate-in fade-in duration-500",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Settings"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your teacher account preferences"})]}),a.jsxs(je,{children:[a.jsxs(Ke,{children:[a.jsx(st,{children:"Notifications"}),a.jsx(gn,{children:"Configure how you receive alerts."})]}),a.jsx(Ue,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rh,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Tr,{htmlFor:"email-notif",children:"Email Summaries"})]}),a.jsx(Tn,{id:"email-notif",defaultChecked:!0})]})})]}),a.jsxs(je,{children:[a.jsxs(Ke,{children:[a.jsx(st,{children:"Display"}),a.jsx(gn,{children:"Customize your dashboard appearance."})]}),a.jsx(Ue,{className:"space-y-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nm,{className:"h-4 w-4 text-muted-foreground"}),a.jsx(Tr,{children:"Dark Mode"})]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Use sidebar toggle"})]})})]})]})}function oG(){const{accessToken:t}=rt(),[e,n]=m.useState("dashboard"),[r,s]=m.useState([]),[i,o]=m.useState(!0),[l,c]=m.useState(!1);async function u(){if(t)try{o(!0);const p=await(await fetch("https://classroom.googleapis.com/v1/courses?teacherId=me&courseStates=ACTIVE",{headers:{Authorization:`Bearer ${t}`}})).json();s(p.courses||[])}catch(f){console.error("Failed to fetch courses",f)}finally{setTimeout(()=>o(!1),1500)}}m.useEffect(()=>{u()},[t]);const h=()=>{u()};return i?a.jsx(jP,{message:"Preparing Teacher Workspace...",tips:eG}):a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(tG,{activePage:e,setPage:n,mobileOpen:l,onMobileClose:()=>c(!1)}),a.jsxs("main",{className:"flex-1 overflow-y-auto w-full",children:[a.jsxs("div",{className:"md:hidden flex items-center p-4 border-b bg-background sticky top-0 z-30",children:[a.jsx(he,{variant:"ghost",size:"icon",onClick:()=>c(!0),className:"mr-2",children:a.jsx(_C,{className:"h-5 w-5"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-6 h-6 mr-2"}),a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace Teacher"})]})]}),a.jsxs("div",{className:"p-4 md:p-8 max-w-5xl mx-auto",children:[e==="dashboard"&&a.jsx(nG,{courses:r}),e==="courses"&&a.jsx(rG,{courses:r,onRefresh:h,isLoading:i}),e==="settings"&&a.jsx(iG,{})]})]})]})}function aG(){const{signOut:t,signInWithGoogle:e}=rt();return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-background p-4",children:a.jsxs(je,{className:"max-w-md w-full border-border shadow-lg",children:[a.jsxs(Ke,{className:"text-center space-y-2",children:[a.jsx("div",{className:"mx-auto w-12 h-12 rounded-full bg-muted flex items-center justify-center mb-2",children:a.jsx(C5,{className:"w-6 h-6 text-muted-foreground"})}),a.jsx(st,{className:"text-xl font-semibold",children:"Youre not connected to Google Classroom"}),a.jsx(gn,{className:"text-base text-muted-foreground",children:"The account you logged in with does not have access to Google Classroom."})]}),a.jsxs(Ue,{className:"space-y-4",children:[a.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed text-center",children:"Trace works by syncing with Google Classroom to show attendance, assignments, and academic insights."}),a.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[a.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"What Trace Provides"}),a.jsxs("ul",{className:"text-sm space-y-2 text-foreground/80",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(gC,{className:"w-4 h-4 text-primary shrink-0"})," Live attendance tracking"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(wx,{className:"w-4 h-4 text-primary shrink-0"})," ","Course-wise insights"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(pC,{className:"w-4 h-4 text-primary shrink-0"})," Safe bunk & eligibility predictions"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Wi,{className:"w-4 h-4 text-primary shrink-0"})," Exam & deadline alerts"]})]})]}),a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/10 border border-amber-200 dark:border-amber-900/30 rounded-md p-3 text-center",children:a.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-400 font-medium",children:"Please sign in using your official college Google Classroom account to continue."})})]}),a.jsxs(Z0,{className:"flex flex-col gap-2",children:[a.jsx(he,{variant:"default",className:"w-full",onClick:async()=>{await t(),await e()},children:"Try another Google account"}),a.jsxs(he,{variant:"ghost",className:"w-full text-muted-foreground",onClick:()=>t(),children:[a.jsx(Hh,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})}function lG(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(he,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx(em,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Privacy Policy  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Introduction"}),a.jsx("p",{children:'Trace ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we access, use, store, and protect your Google Classroom data.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Google Authentication & Data Access"}),a.jsx("p",{children:"Trace uses Google OAuth to authenticate users. We only request access to specific Google Classroom data required to provide our services. Specifically, we read:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Courses:"})," To display your active classes."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Coursework (Assignments):"})," To organize deadlines and tasks in our dashboard."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Academic Insights:"})," To generate performance metrics and workload analytics."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Data Usage & Protection"}),a.jsx("p",{children:"We treat your academic data with the highest level of confidentiality."}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"No Selling of Data:"})," We do NOT sell, trade, or rent your personal information to third parties."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Misuse:"})," Your data is used strictly for educational organization and visualization within the Trace application."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Secure Storage:"})," All data is stored securely using industry-standard encryption protocols."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"User Rights"}),a.jsx("p",{children:"You retain full ownership of your data. At any time, you may:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Revoke Trace's access to your Google account via Google Security settings."}),a.jsx("li",{children:"Request full deletion of your data from our servers."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"Contact Us"}),a.jsx("p",{children:"If you have any questions about this Privacy Policy or wish to request data deletion, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}function cG(){return a.jsx("div",{className:"min-h-screen bg-white text-zinc-950 font-sans selection:bg-zinc-200 p-6 sm:p-12 lg:p-24",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[a.jsxs("header",{className:"space-y-4 border-b border-zinc-100 pb-8",children:[a.jsx("div",{className:"flex items-center gap-2 mb-6",children:a.jsxs(he,{variant:"ghost",size:"sm",className:"px-0 hover:bg-transparent text-zinc-500 hover:text-zinc-900",onClick:()=>window.location.href="/",children:[a.jsx(em,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight text-zinc-900",children:"Terms of Service  Trace"}),a.jsxs("p",{className:"text-zinc-500",children:["Last updated: ",new Date().toLocaleDateString()]})]}),a.jsxs("div",{className:"space-y-8 text-zinc-700 leading-relaxed",children:[a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"1. Acceptance of Terms"}),a.jsx("p",{children:'By accessing and using Trace ("the Service"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these Terms of Service, please do not use the Service.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"2. Description of Service"}),a.jsx("p",{children:"Trace is an educational productivity platform that integrates with Google Classroom to help students:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Organize assignments"})," with visual timelines and dashboards"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Track attendance"})," and academic performance"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Earn achievements"})," through gamified learning experiences"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Compete on leaderboards"})," with classmates in a fun, educational environment"]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"3. User Accounts & Authentication"}),a.jsxs("p",{children:["To use Trace, you must authenticate using your Google account. By doing so, you grant us permission to access specific Google Classroom data as outlined in our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"}),"."]}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"You are responsible for maintaining the confidentiality of your account credentials."}),a.jsx("li",{children:"You must be a student or educator with a valid Google Classroom account."}),a.jsx("li",{children:"You agree not to share your account with others or allow unauthorized access."})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"4. Acceptable Use Policy"}),a.jsx("p",{children:"You agree to use Trace only for lawful purposes. You must NOT:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Attempt to gain unauthorized access to other users' data or accounts"}),a.jsx("li",{children:"Use the Service to cheat, plagiarize, or violate academic integrity policies"}),a.jsx("li",{children:"Manipulate leaderboards, XP scores, or badges through fraudulent means"}),a.jsx("li",{children:"Upload malicious code, viruses, or any harmful content"}),a.jsx("li",{children:"Harass, abuse, or harm other users through the platform"}),a.jsx("li",{children:"Scrape, copy, or redistribute data from the Service without permission"})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"5. Gamification & Leaderboards"}),a.jsx("p",{children:"Trace includes gamified features such as XP points, badges, and leaderboards to encourage engagement and productivity. Please note:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"For Entertainment Only:"})," Leaderboards and rankings are designed for motivational purposes and do not reflect official academic standings."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Fair Play:"})," We reserve the right to remove or reset scores that appear to be manipulated or fraudulent."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Guarantees:"})," XP and badges do not guarantee academic success or any real-world rewards."]})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"6. Intellectual Property"}),a.jsx("p",{children:"All content, features, and functionality of Trace (including but not limited to text, graphics, logos, icons, images, and software) are the exclusive property of Trace and are protected by international copyright, trademark, and other intellectual property laws."}),a.jsx("p",{children:"You may not copy, modify, distribute, sell, or lease any part of our Service without explicit written permission."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"7. Data Privacy & Security"}),a.jsxs("p",{children:["We are committed to protecting your privacy. Please review our"," ",a.jsx("a",{href:"/privacy-policy",className:"text-blue-600 hover:underline font-medium",children:"Privacy Policy"})," ","to understand how we collect, use, and safeguard your data."]}),a.jsx("p",{children:"While we implement industry-standard security measures, no system is 100% secure. You acknowledge that you use the Service at your own risk."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"8. Limitation of Liability"}),a.jsx("p",{children:'Trace is provided "as is" without warranties of any kind, either express or implied. We do not guarantee that:'}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"The Service will be uninterrupted or error-free"}),a.jsx("li",{children:"All data will be accurate, complete, or up-to-date at all times"}),a.jsx("li",{children:"The Service will meet your specific educational or productivity needs"})]}),a.jsx("p",{className:"mt-4",children:"To the fullest extent permitted by law, Trace shall not be liable for any indirect, incidental, special, consequential, or punitive damages arising from your use of the Service."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"9. Termination"}),a.jsx("p",{children:"We reserve the right to suspend or terminate your access to Trace at any time, without notice, for conduct that we believe:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Violates these Terms of Service"}),a.jsx("li",{children:"Is harmful to other users or the Service"}),a.jsx("li",{children:"Exposes us to legal liability"})]}),a.jsx("p",{className:"mt-4",children:"You may also terminate your account at any time by revoking Trace's access to your Google account through Google Security settings."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"10. Changes to Terms"}),a.jsx("p",{children:'We may update these Terms of Service from time to time. When we do, we will revise the "Last updated" date at the top of this page. Continued use of the Service after changes constitutes your acceptance of the new terms.'})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"11. Governing Law"}),a.jsx("p",{children:"These Terms of Service shall be governed by and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-zinc-900",children:"12. Contact Information"}),a.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us at:"}),a.jsx("a",{href:"mailto:irnakkishor4u@gmail.com",className:"text-blue-600 hover:underline font-medium",children:"irnakkishor4u@gmail.com"})]})]}),a.jsxs("footer",{className:"pt-12 mt-12 border-t border-zinc-100 text-sm text-zinc-400",children:[" ",new Date().getFullYear()," Trace Inc. All rights reserved."]})]})})}const uG=()=>"/";function dG(){const[t,e]=m.useState(!1),n=uG();return a.jsx(jN,{base:n,children:a.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[a.jsx(a7,{mobileOpen:t,onMobileClose:()=>e(!1)}),a.jsx(Jq,{}),a.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[a.jsx(j$,{onMobileMenuClick:()=>e(!0)}),a.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:a.jsxs(XM,{children:[a.jsx(ur,{path:"/pipeline",component:oH}),a.jsx(ur,{path:"/",children:()=>{const[,r]=Qf();return m.useEffect(()=>{r("/dashboard")},[r]),null}}),a.jsx(ur,{path:"/leaderboard",component:Hq}),a.jsx(ur,{path:"/timeline",component:zH}),a.jsx(ur,{path:"/dashboard",component:XH}),a.jsx(ur,{path:"/notes",component:YH}),a.jsx(ur,{path:"/attendance",component:Kq}),a.jsx(ur,{path:"/settings",component:Uq}),a.jsx(ur,{path:"/settings/notifications",component:$q}),a.jsx(ur,{path:"/settings/integrations",component:Bq}),a.jsx(ur,{component:Qq})]})})]})]})})}function hG(){if(window.location.pathname==="/privacy-policy"||window.location.pathname==="/privacy-policy/"||window.location.pathname.endsWith("/privacy-policy"))return a.jsx(lG,{});if(window.location.pathname==="/terms-of-service"||window.location.pathname==="/terms-of-service/"||window.location.pathname.endsWith("/terms-of-service"))return a.jsx(cG,{});const{user:t,loading:e,role:n}=rt();return xn(),e?a.jsx(jP,{message:"Authenticating..."}):t?n==="teacher"?a.jsx(oG,{}):n==="no_access"?a.jsx(aG,{}):a.jsx(dG,{}):a.jsx(U$,{})}function fG(){return a.jsx(wO,{client:SO,children:a.jsx(GU,{children:a.jsx(qU,{children:a.jsx(e7,{children:a.jsxs(dm,{children:[a.jsx(CL,{}),a.jsx(hG,{})]})})})})})}wN(document.getElementById("root")).render(a.jsx(fG,{}));
