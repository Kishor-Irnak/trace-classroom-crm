var Lw=t=>{throw TypeError(t)};var fp=(t,e,n)=>e.has(t)||Lw("Cannot "+n);var H=(t,e,n)=>(fp(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?Lw("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,r)=>(fp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Lt=(t,e,n)=>(fp(t,e,"access private method"),n);var Cu=(t,e,n,r)=>({set _(s){Ee(t,e,s,n)},get _(){return H(t,e,r)}});function KP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function $E(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BE={exports:{}},$h={},HE={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fc=Symbol.for("react.element"),QP=Symbol.for("react.portal"),YP=Symbol.for("react.fragment"),XP=Symbol.for("react.strict_mode"),JP=Symbol.for("react.profiler"),ZP=Symbol.for("react.provider"),e2=Symbol.for("react.context"),t2=Symbol.for("react.forward_ref"),n2=Symbol.for("react.suspense"),r2=Symbol.for("react.memo"),s2=Symbol.for("react.lazy"),Vw=Symbol.iterator;function i2(t){return t===null||typeof t!="object"?null:(t=Vw&&t[Vw]||t["@@iterator"],typeof t=="function"?t:null)}var WE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qE=Object.assign,GE={};function Ha(t,e,n){this.props=t,this.context=e,this.refs=GE,this.updater=n||WE}Ha.prototype.isReactComponent={};Ha.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ha.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function KE(){}KE.prototype=Ha.prototype;function hy(t,e,n){this.props=t,this.context=e,this.refs=GE,this.updater=n||WE}var fy=hy.prototype=new KE;fy.constructor=hy;qE(fy,Ha.prototype);fy.isPureReactComponent=!0;var Fw=Array.isArray,QE=Object.prototype.hasOwnProperty,py={current:null},YE={key:!0,ref:!0,__self:!0,__source:!0};function XE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)QE.call(e,r)&&!YE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),d=0;d<a;d++)l[d]=arguments[d+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Fc,type:t,key:i,ref:o,props:s,_owner:py.current}}function o2(t,e){return{$$typeof:Fc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function my(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fc}function a2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zw=/\/+/g;function pp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a2(""+t.key):e.toString(36)}function cd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fc:case QP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pp(o,0):r,Fw(s)?(n="",t!=null&&(n=t.replace(zw,"$&/")+"/"),cd(s,e,n,"",function(d){return d})):s!=null&&(my(s)&&(s=o2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(zw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Fw(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+pp(i,a);o+=cd(i,e,n,l,s)}else if(l=i2(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+pp(i,a++),o+=cd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Iu(t,e,n){if(t==null)return t;var r=[],s=0;return cd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function l2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},ud={transition:null},c2={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:ud,ReactCurrentOwner:py};function JE(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Iu,forEach:function(t,e,n){Iu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Iu(t,function(){e++}),e},toArray:function(t){return Iu(t,function(e){return e})||[]},only:function(t){if(!my(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Ha;Te.Fragment=YP;Te.Profiler=JP;Te.PureComponent=hy;Te.StrictMode=XP;Te.Suspense=n2;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c2;Te.act=JE;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=py.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)QE.call(e,l)&&!YE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var d=0;d<l;d++)a[d]=arguments[d+2];r.children=a}return{$$typeof:Fc,type:t.type,key:s,ref:i,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:e2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZP,_context:t},t.Consumer=t};Te.createElement=XE;Te.createFactory=function(t){var e=XE.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:t2,render:t}};Te.isValidElement=my;Te.lazy=function(t){return{$$typeof:s2,_payload:{_status:-1,_result:t},_init:l2}};Te.memo=function(t,e){return{$$typeof:r2,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=ud.transition;ud.transition={};try{t()}finally{ud.transition=e}};Te.unstable_act=JE;Te.useCallback=function(t,e){return Zt.current.useCallback(t,e)};Te.useContext=function(t){return Zt.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Zt.current.useEffect(t,e)};Te.useId=function(){return Zt.current.useId()};Te.useImperativeHandle=function(t,e,n){return Zt.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Zt.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Zt.current.useReducer(t,e,n)};Te.useRef=function(t){return Zt.current.useRef(t)};Te.useState=function(t){return Zt.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Zt.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Zt.current.useTransition()};Te.version="18.3.1";HE.exports=Te;var p=HE.exports;const be=$E(p),ZE=KP({__proto__:null,default:be},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2=p,d2=Symbol.for("react.element"),h2=Symbol.for("react.fragment"),f2=Object.prototype.hasOwnProperty,p2=u2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m2={key:!0,ref:!0,__self:!0,__source:!0};function eb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)f2.call(e,r)&&!m2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:d2,type:t,key:i,ref:o,props:s,_owner:p2.current}}$h.Fragment=h2;$h.jsx=eb;$h.jsxs=eb;BE.exports=$h;var c=BE.exports,tb={exports:{}},In={},nb={exports:{}},rb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,L){var U=M.length;M.push(L);e:for(;0<U;){var Q=U-1>>>1,q=M[Q];if(0<s(q,L))M[Q]=L,M[U]=q,U=Q;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var L=M[0],U=M.pop();if(U!==L){M[0]=U;e:for(var Q=0,q=M.length,se=q>>>1;Q<se;){var ee=2*(Q+1)-1,de=M[ee],ce=ee+1,W=M[ce];if(0>s(de,U))ce<q&&0>s(W,de)?(M[Q]=W,M[ce]=U,Q=ce):(M[Q]=de,M[ee]=U,Q=ee);else if(ce<q&&0>s(W,U))M[Q]=W,M[ce]=U,Q=ce;else break e}}return L}function s(M,L){var U=M.sortIndex-L.sortIndex;return U!==0?U:M.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],d=[],h=1,f=null,m=3,y=!1,b=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var L=n(d);L!==null;){if(L.callback===null)r(d);else if(L.startTime<=M)r(d),L.sortIndex=L.expirationTime,e(l,L);else break;L=n(d)}}function k(M){if(v=!1,S(M),!b)if(n(l)!==null)b=!0,z(j);else{var L=n(d);L!==null&&K(k,L.startTime-M)}}function j(M,L){b=!1,v&&(v=!1,x(C),C=-1),y=!0;var U=m;try{for(S(L),f=n(l);f!==null&&(!(f.expirationTime>L)||M&&!P());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,m=f.priorityLevel;var q=Q(f.expirationTime<=L);L=t.unstable_now(),typeof q=="function"?f.callback=q:f===n(l)&&r(l),S(L)}else r(l);f=n(l)}if(f!==null)var se=!0;else{var ee=n(d);ee!==null&&K(k,ee.startTime-L),se=!1}return se}finally{f=null,m=U,y=!1}}var D=!1,T=null,C=-1,I=5,A=-1;function P(){return!(t.unstable_now()-A<I)}function O(){if(T!==null){var M=t.unstable_now();A=M;var L=!0;try{L=T(!0,M)}finally{L?R():(D=!1,T=null)}}else D=!1}var R;if(typeof w=="function")R=function(){w(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,re=$.port2;$.port1.onmessage=O,R=function(){re.postMessage(null)}}else R=function(){E(O,0)};function z(M){T=M,D||(D=!0,R())}function K(M,L){C=E(function(){M(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,z(j))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var U=m;m=L;try{return M()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var U=m;m=M;try{return L()}finally{m=U}},t.unstable_scheduleCallback=function(M,L,U){var Q=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?Q+U:Q):U=Q,M){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=U+q,M={id:h++,callback:L,priorityLevel:M,startTime:U,expirationTime:q,sortIndex:-1},U>Q?(M.sortIndex=U,e(d,M),n(l)===null&&M===n(d)&&(v?(x(C),C=-1):v=!0,K(k,U-Q))):(M.sortIndex=q,e(l,M),b||y||(b=!0,z(j))),M},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(M){var L=m;return function(){var U=m;m=L;try{return M.apply(this,arguments)}finally{m=U}}}})(rb);nb.exports=rb;var g2=nb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=p,Tn=g2;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sb=new Set,oc={};function yo(t,e){_a(t,e),_a(t+"Capture",e)}function _a(t,e){for(oc[t]=e,t=0;t<e.length;t++)sb.add(e[t])}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_m=Object.prototype.hasOwnProperty,v2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Uw={},$w={};function w2(t){return _m.call($w,t)?!0:_m.call(Uw,t)?!1:v2.test(t)?$w[t]=!0:(Uw[t]=!0,!1)}function x2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _2(t,e,n,r){if(e===null||typeof e>"u"||x2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var gy=/[\-:]([a-z])/g;function yy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gy,yy);jt[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gy,yy);jt[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gy,yy);jt[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function vy(t,e,n,r){var s=jt.hasOwnProperty(e)?jt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_2(e,n,s,r)&&(n=null),r||s===null?w2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hs=y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nu=Symbol.for("react.element"),Vo=Symbol.for("react.portal"),Fo=Symbol.for("react.fragment"),wy=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),ib=Symbol.for("react.provider"),ob=Symbol.for("react.context"),xy=Symbol.for("react.forward_ref"),bm=Symbol.for("react.suspense"),Sm=Symbol.for("react.suspense_list"),_y=Symbol.for("react.memo"),Ns=Symbol.for("react.lazy"),ab=Symbol.for("react.offscreen"),Bw=Symbol.iterator;function _l(t){return t===null||typeof t!="object"?null:(t=Bw&&t[Bw]||t["@@iterator"],typeof t=="function"?t:null)}var Ze=Object.assign,mp;function Rl(t){if(mp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mp=e&&e[1]||""}return`
`+mp+t}var gp=!1;function yp(t,e){if(!t||gp)return"";gp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{gp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rl(t):""}function E2(t){switch(t.tag){case 5:return Rl(t.type);case 16:return Rl("Lazy");case 13:return Rl("Suspense");case 19:return Rl("SuspenseList");case 0:case 2:case 15:return t=yp(t.type,!1),t;case 11:return t=yp(t.type.render,!1),t;case 1:return t=yp(t.type,!0),t;default:return""}}function Tm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fo:return"Fragment";case Vo:return"Portal";case Em:return"Profiler";case wy:return"StrictMode";case bm:return"Suspense";case Sm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ob:return(t.displayName||"Context")+".Consumer";case ib:return(t._context.displayName||"Context")+".Provider";case xy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _y:return e=t.displayName||null,e!==null?e:Tm(t.type)||"Memo";case Ns:e=t._payload,t=t._init;try{return Tm(t(e))}catch{}}return null}function b2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tm(e);case 8:return e===wy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function S2(t){var e=lb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Au(t){t._valueTracker||(t._valueTracker=S2(t))}function cb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=lb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Md(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cm(t,e){var n=e.checked;return Ze({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ub(t,e){e=e.checked,e!=null&&vy(t,"checked",e,!1)}function Im(t,e){ub(t,e);var n=oi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nm(t,e.type,oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ww(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nm(t,e,n){(e!=="number"||Md(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pl=Array.isArray;function Xo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+oi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Am(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ze({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Pl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oi(n)}}function db(t,e){var n=oi(e.value),r=oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function km(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ku,fb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ku=ku||document.createElement("div"),ku.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ku.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ac(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T2=["Webkit","ms","Moz","O"];Object.keys(Fl).forEach(function(t){T2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fl[e]=Fl[t]})});function pb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fl.hasOwnProperty(t)&&Fl[t]?(""+e).trim():e+"px"}function mb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=pb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var C2=Ze({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rm(t,e){if(e){if(C2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dm=null;function Ey(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jm=null,Jo=null,Zo=null;function Kw(t){if(t=$c(t)){if(typeof jm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Gh(e),jm(t.stateNode,t.type,e))}}function gb(t){Jo?Zo?Zo.push(t):Zo=[t]:Jo=t}function yb(){if(Jo){var t=Jo,e=Zo;if(Zo=Jo=null,Kw(t),e)for(t=0;t<e.length;t++)Kw(e[t])}}function vb(t,e){return t(e)}function wb(){}var vp=!1;function xb(t,e,n){if(vp)return t(e,n);vp=!0;try{return vb(t,e,n)}finally{vp=!1,(Jo!==null||Zo!==null)&&(wb(),yb())}}function lc(t,e){var n=t.stateNode;if(n===null)return null;var r=Gh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Om=!1;if(ns)try{var El={};Object.defineProperty(El,"passive",{get:function(){Om=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{Om=!1}function I2(t,e,n,r,s,i,o,a,l){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var zl=!1,Ld=null,Vd=!1,Mm=null,N2={onError:function(t){zl=!0,Ld=t}};function A2(t,e,n,r,s,i,o,a,l){zl=!1,Ld=null,I2.apply(N2,arguments)}function k2(t,e,n,r,s,i,o,a,l){if(A2.apply(this,arguments),zl){if(zl){var d=Ld;zl=!1,Ld=null}else throw Error(Y(198));Vd||(Vd=!0,Mm=d)}}function vo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function _b(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qw(t){if(vo(t)!==t)throw Error(Y(188))}function R2(t){var e=t.alternate;if(!e){if(e=vo(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Qw(s),t;if(i===r)return Qw(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Eb(t){return t=R2(t),t!==null?bb(t):null}function bb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bb(t);if(e!==null)return e;t=t.sibling}return null}var Sb=Tn.unstable_scheduleCallback,Yw=Tn.unstable_cancelCallback,P2=Tn.unstable_shouldYield,D2=Tn.unstable_requestPaint,it=Tn.unstable_now,j2=Tn.unstable_getCurrentPriorityLevel,by=Tn.unstable_ImmediatePriority,Tb=Tn.unstable_UserBlockingPriority,Fd=Tn.unstable_NormalPriority,O2=Tn.unstable_LowPriority,Cb=Tn.unstable_IdlePriority,Bh=null,Ir=null;function M2(t){if(Ir&&typeof Ir.onCommitFiberRoot=="function")try{Ir.onCommitFiberRoot(Bh,t,void 0,(t.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:F2,L2=Math.log,V2=Math.LN2;function F2(t){return t>>>=0,t===0?32:31-(L2(t)/V2|0)|0}var Ru=64,Pu=4194304;function Dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Dl(a):(i&=o,i!==0&&(r=Dl(i)))}else o=n&~s,o!==0?r=Dl(o):i!==0&&(r=Dl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tr(e),s=1<<n,r|=t[n],e&=~s;return r}function z2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-tr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=z2(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Lm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ib(){var t=Ru;return Ru<<=1,!(Ru&4194240)&&(Ru=64),t}function wp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tr(e),t[e]=n}function $2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Sy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Oe=0;function Nb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ab,Ty,kb,Rb,Pb,Vm=!1,Du=[],Hs=null,Ws=null,qs=null,cc=new Map,uc=new Map,Rs=[],B2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xw(t,e){switch(t){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Ws=null;break;case"mouseover":case"mouseout":qs=null;break;case"pointerover":case"pointerout":cc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uc.delete(e.pointerId)}}function bl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=$c(e),e!==null&&Ty(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function H2(t,e,n,r,s){switch(e){case"focusin":return Hs=bl(Hs,t,e,n,r,s),!0;case"dragenter":return Ws=bl(Ws,t,e,n,r,s),!0;case"mouseover":return qs=bl(qs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return cc.set(i,bl(cc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,uc.set(i,bl(uc.get(i)||null,t,e,n,r,s)),!0}return!1}function Db(t){var e=Ui(t.target);if(e!==null){var n=vo(e);if(n!==null){if(e=n.tag,e===13){if(e=_b(n),e!==null){t.blockedOn=e,Pb(t.priority,function(){kb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function dd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dm=r,n.target.dispatchEvent(r),Dm=null}else return e=$c(n),e!==null&&Ty(e),t.blockedOn=n,!1;e.shift()}return!0}function Jw(t,e,n){dd(t)&&n.delete(e)}function W2(){Vm=!1,Hs!==null&&dd(Hs)&&(Hs=null),Ws!==null&&dd(Ws)&&(Ws=null),qs!==null&&dd(qs)&&(qs=null),cc.forEach(Jw),uc.forEach(Jw)}function Sl(t,e){t.blockedOn===e&&(t.blockedOn=null,Vm||(Vm=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,W2)))}function dc(t){function e(s){return Sl(s,t)}if(0<Du.length){Sl(Du[0],t);for(var n=1;n<Du.length;n++){var r=Du[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Hs!==null&&Sl(Hs,t),Ws!==null&&Sl(Ws,t),qs!==null&&Sl(qs,t),cc.forEach(e),uc.forEach(e),n=0;n<Rs.length;n++)r=Rs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Rs.length&&(n=Rs[0],n.blockedOn===null);)Db(n),n.blockedOn===null&&Rs.shift()}var ea=hs.ReactCurrentBatchConfig,Ud=!0;function q2(t,e,n,r){var s=Oe,i=ea.transition;ea.transition=null;try{Oe=1,Cy(t,e,n,r)}finally{Oe=s,ea.transition=i}}function G2(t,e,n,r){var s=Oe,i=ea.transition;ea.transition=null;try{Oe=4,Cy(t,e,n,r)}finally{Oe=s,ea.transition=i}}function Cy(t,e,n,r){if(Ud){var s=Fm(t,e,n,r);if(s===null)Ap(t,e,r,$d,n),Xw(t,r);else if(H2(s,t,e,n,r))r.stopPropagation();else if(Xw(t,r),e&4&&-1<B2.indexOf(t)){for(;s!==null;){var i=$c(s);if(i!==null&&Ab(i),i=Fm(t,e,n,r),i===null&&Ap(t,e,r,$d,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ap(t,e,r,null,n)}}var $d=null;function Fm(t,e,n,r){if($d=null,t=Ey(r),t=Ui(t),t!==null)if(e=vo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=_b(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $d=t,null}function jb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(j2()){case by:return 1;case Tb:return 4;case Fd:case O2:return 16;case Cb:return 536870912;default:return 16}default:return 16}}var Us=null,Iy=null,hd=null;function Ob(){if(hd)return hd;var t,e=Iy,n=e.length,r,s="value"in Us?Us.value:Us.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return hd=s.slice(t,1<r?1-r:void 0)}function fd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ju(){return!0}function Zw(){return!1}function Nn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ju:Zw,this.isPropagationStopped=Zw,this}return Ze(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ju)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ju)},persist:function(){},isPersistent:ju}),e}var Wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ny=Nn(Wa),Uc=Ze({},Wa,{view:0,detail:0}),K2=Nn(Uc),xp,_p,Tl,Hh=Ze({},Uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ay,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Tl&&(Tl&&t.type==="mousemove"?(xp=t.screenX-Tl.screenX,_p=t.screenY-Tl.screenY):_p=xp=0,Tl=t),xp)},movementY:function(t){return"movementY"in t?t.movementY:_p}}),ex=Nn(Hh),Q2=Ze({},Hh,{dataTransfer:0}),Y2=Nn(Q2),X2=Ze({},Uc,{relatedTarget:0}),Ep=Nn(X2),J2=Ze({},Wa,{animationName:0,elapsedTime:0,pseudoElement:0}),Z2=Nn(J2),eD=Ze({},Wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tD=Nn(eD),nD=Ze({},Wa,{data:0}),tx=Nn(nD),rD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=iD[t])?!!e[t]:!1}function Ay(){return oD}var aD=Ze({},Uc,{key:function(t){if(t.key){var e=rD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ay,charCode:function(t){return t.type==="keypress"?fd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lD=Nn(aD),cD=Ze({},Hh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nx=Nn(cD),uD=Ze({},Uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ay}),dD=Nn(uD),hD=Ze({},Wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),fD=Nn(hD),pD=Ze({},Hh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mD=Nn(pD),gD=[9,13,27,32],ky=ns&&"CompositionEvent"in window,Ul=null;ns&&"documentMode"in document&&(Ul=document.documentMode);var yD=ns&&"TextEvent"in window&&!Ul,Mb=ns&&(!ky||Ul&&8<Ul&&11>=Ul),rx=" ",sx=!1;function Lb(t,e){switch(t){case"keyup":return gD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var zo=!1;function vD(t,e){switch(t){case"compositionend":return Vb(e);case"keypress":return e.which!==32?null:(sx=!0,rx);case"textInput":return t=e.data,t===rx&&sx?null:t;default:return null}}function wD(t,e){if(zo)return t==="compositionend"||!ky&&Lb(t,e)?(t=Ob(),hd=Iy=Us=null,zo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Mb&&e.locale!=="ko"?null:e.data;default:return null}}var xD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ix(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xD[t.type]:e==="textarea"}function Fb(t,e,n,r){gb(r),e=Bd(e,"onChange"),0<e.length&&(n=new Ny("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $l=null,hc=null;function _D(t){Yb(t,0)}function Wh(t){var e=Bo(t);if(cb(e))return t}function ED(t,e){if(t==="change")return e}var zb=!1;if(ns){var bp;if(ns){var Sp="oninput"in document;if(!Sp){var ox=document.createElement("div");ox.setAttribute("oninput","return;"),Sp=typeof ox.oninput=="function"}bp=Sp}else bp=!1;zb=bp&&(!document.documentMode||9<document.documentMode)}function ax(){$l&&($l.detachEvent("onpropertychange",Ub),hc=$l=null)}function Ub(t){if(t.propertyName==="value"&&Wh(hc)){var e=[];Fb(e,hc,t,Ey(t)),xb(_D,e)}}function bD(t,e,n){t==="focusin"?(ax(),$l=e,hc=n,$l.attachEvent("onpropertychange",Ub)):t==="focusout"&&ax()}function SD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wh(hc)}function TD(t,e){if(t==="click")return Wh(e)}function CD(t,e){if(t==="input"||t==="change")return Wh(e)}function ID(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var or=typeof Object.is=="function"?Object.is:ID;function fc(t,e){if(or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_m.call(e,s)||!or(t[s],e[s]))return!1}return!0}function lx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cx(t,e){var n=lx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lx(n)}}function $b(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?$b(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Bb(){for(var t=window,e=Md();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Md(t.document)}return e}function Ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ND(t){var e=Bb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&$b(n.ownerDocument.documentElement,n)){if(r!==null&&Ry(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=cx(n,i);var o=cx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AD=ns&&"documentMode"in document&&11>=document.documentMode,Uo=null,zm=null,Bl=null,Um=!1;function ux(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Um||Uo==null||Uo!==Md(r)||(r=Uo,"selectionStart"in r&&Ry(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bl&&fc(Bl,r)||(Bl=r,r=Bd(zm,"onSelect"),0<r.length&&(e=new Ny("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Uo)))}function Ou(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $o={animationend:Ou("Animation","AnimationEnd"),animationiteration:Ou("Animation","AnimationIteration"),animationstart:Ou("Animation","AnimationStart"),transitionend:Ou("Transition","TransitionEnd")},Tp={},Hb={};ns&&(Hb=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function qh(t){if(Tp[t])return Tp[t];if(!$o[t])return t;var e=$o[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Hb)return Tp[t]=e[n];return t}var Wb=qh("animationend"),qb=qh("animationiteration"),Gb=qh("animationstart"),Kb=qh("transitionend"),Qb=new Map,dx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(t,e){Qb.set(t,e),yo(e,[t])}for(var Cp=0;Cp<dx.length;Cp++){var Ip=dx[Cp],kD=Ip.toLowerCase(),RD=Ip[0].toUpperCase()+Ip.slice(1);Ei(kD,"on"+RD)}Ei(Wb,"onAnimationEnd");Ei(qb,"onAnimationIteration");Ei(Gb,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(Kb,"onTransitionEnd");_a("onMouseEnter",["mouseout","mouseover"]);_a("onMouseLeave",["mouseout","mouseover"]);_a("onPointerEnter",["pointerout","pointerover"]);_a("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PD=new Set("cancel close invalid load scroll toggle".split(" ").concat(jl));function hx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,k2(r,e,void 0,t),t.currentTarget=null}function Yb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;hx(s,a,d),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,d=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;hx(s,a,d),i=l}}}if(Vd)throw t=Mm,Vd=!1,Mm=null,t}function Be(t,e){var n=e[qm];n===void 0&&(n=e[qm]=new Set);var r=t+"__bubble";n.has(r)||(Xb(e,t,2,!1),n.add(r))}function Np(t,e,n){var r=0;e&&(r|=4),Xb(n,t,r,e)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function pc(t){if(!t[Mu]){t[Mu]=!0,sb.forEach(function(n){n!=="selectionchange"&&(PD.has(n)||Np(n,!1,t),Np(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Mu]||(e[Mu]=!0,Np("selectionchange",!1,e))}}function Xb(t,e,n,r){switch(jb(e)){case 1:var s=q2;break;case 4:s=G2;break;default:s=Cy}n=s.bind(null,e,n,t),s=void 0,!Om||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Ap(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ui(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}xb(function(){var d=i,h=Ey(n),f=[];e:{var m=Qb.get(t);if(m!==void 0){var y=Ny,b=t;switch(t){case"keypress":if(fd(n)===0)break e;case"keydown":case"keyup":y=lD;break;case"focusin":b="focus",y=Ep;break;case"focusout":b="blur",y=Ep;break;case"beforeblur":case"afterblur":y=Ep;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ex;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Y2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=dD;break;case Wb:case qb:case Gb:y=Z2;break;case Kb:y=fD;break;case"scroll":y=K2;break;case"wheel":y=mD;break;case"copy":case"cut":case"paste":y=tD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=nx}var v=(e&4)!==0,E=!v&&t==="scroll",x=v?m!==null?m+"Capture":null:m;v=[];for(var w=d,S;w!==null;){S=w;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,x!==null&&(k=lc(w,x),k!=null&&v.push(mc(w,k,S)))),E)break;w=w.return}0<v.length&&(m=new y(m,b,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Dm&&(b=n.relatedTarget||n.fromElement)&&(Ui(b)||b[rs]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=d,b=b?Ui(b):null,b!==null&&(E=vo(b),b!==E||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=d),y!==b)){if(v=ex,k="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=nx,k="onPointerLeave",x="onPointerEnter",w="pointer"),E=y==null?m:Bo(y),S=b==null?m:Bo(b),m=new v(k,w+"leave",y,n,h),m.target=E,m.relatedTarget=S,k=null,Ui(h)===d&&(v=new v(x,w+"enter",b,n,h),v.target=S,v.relatedTarget=E,k=v),E=k,y&&b)t:{for(v=y,x=b,w=0,S=v;S;S=Ao(S))w++;for(S=0,k=x;k;k=Ao(k))S++;for(;0<w-S;)v=Ao(v),w--;for(;0<S-w;)x=Ao(x),S--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=Ao(v),x=Ao(x)}v=null}else v=null;y!==null&&fx(f,m,y,v,!1),b!==null&&E!==null&&fx(f,E,b,v,!0)}}e:{if(m=d?Bo(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var j=ED;else if(ix(m))if(zb)j=CD;else{j=SD;var D=bD}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=TD);if(j&&(j=j(t,d))){Fb(f,j,n,h);break e}D&&D(t,m,d),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&Nm(m,"number",m.value)}switch(D=d?Bo(d):window,t){case"focusin":(ix(D)||D.contentEditable==="true")&&(Uo=D,zm=d,Bl=null);break;case"focusout":Bl=zm=Uo=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,ux(f,n,h);break;case"selectionchange":if(AD)break;case"keydown":case"keyup":ux(f,n,h)}var T;if(ky)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else zo?Lb(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Mb&&n.locale!=="ko"&&(zo||C!=="onCompositionStart"?C==="onCompositionEnd"&&zo&&(T=Ob()):(Us=h,Iy="value"in Us?Us.value:Us.textContent,zo=!0)),D=Bd(d,C),0<D.length&&(C=new tx(C,t,null,n,h),f.push({event:C,listeners:D}),T?C.data=T:(T=Vb(n),T!==null&&(C.data=T)))),(T=yD?vD(t,n):wD(t,n))&&(d=Bd(d,"onBeforeInput"),0<d.length&&(h=new tx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=T))}Yb(f,e)})}function mc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=lc(t,n),i!=null&&r.unshift(mc(t,i,s)),i=lc(t,e),i!=null&&r.push(mc(t,i,s))),t=t.return}return r}function Ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fx(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,d=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&d!==null&&(a=d,s?(l=lc(n,i),l!=null&&o.unshift(mc(n,l,a))):s||(l=lc(n,i),l!=null&&o.push(mc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DD=/\r\n?/g,jD=/\u0000|\uFFFD/g;function px(t){return(typeof t=="string"?t:""+t).replace(DD,`
`).replace(jD,"")}function Lu(t,e,n){if(e=px(e),px(t)!==e&&n)throw Error(Y(425))}function Hd(){}var $m=null,Bm=null;function Hm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wm=typeof setTimeout=="function"?setTimeout:void 0,OD=typeof clearTimeout=="function"?clearTimeout:void 0,mx=typeof Promise=="function"?Promise:void 0,MD=typeof queueMicrotask=="function"?queueMicrotask:typeof mx<"u"?function(t){return mx.resolve(null).then(t).catch(LD)}:Wm;function LD(t){setTimeout(function(){throw t})}function kp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),dc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);dc(e)}function Gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qa=Math.random().toString(36).slice(2),Sr="__reactFiber$"+qa,gc="__reactProps$"+qa,rs="__reactContainer$"+qa,qm="__reactEvents$"+qa,VD="__reactListeners$"+qa,FD="__reactHandles$"+qa;function Ui(t){var e=t[Sr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rs]||n[Sr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gx(t);t!==null;){if(n=t[Sr])return n;t=gx(t)}return e}t=n,n=t.parentNode}return null}function $c(t){return t=t[Sr]||t[rs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Gh(t){return t[gc]||null}var Gm=[],Ho=-1;function bi(t){return{current:t}}function We(t){0>Ho||(t.current=Gm[Ho],Gm[Ho]=null,Ho--)}function Fe(t,e){Ho++,Gm[Ho]=t.current,t.current=e}var ai={},Wt=bi(ai),dn=bi(!1),no=ai;function Ea(t,e){var n=t.type.contextTypes;if(!n)return ai;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function hn(t){return t=t.childContextTypes,t!=null}function Wd(){We(dn),We(Wt)}function yx(t,e,n){if(Wt.current!==ai)throw Error(Y(168));Fe(Wt,e),Fe(dn,n)}function Jb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,b2(t)||"Unknown",s));return Ze({},n,r)}function qd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,no=Wt.current,Fe(Wt,t),Fe(dn,dn.current),!0}function vx(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=Jb(t,e,no),r.__reactInternalMemoizedMergedChildContext=t,We(dn),We(Wt),Fe(Wt,t)):We(dn),Fe(dn,n)}var qr=null,Kh=!1,Rp=!1;function Zb(t){qr===null?qr=[t]:qr.push(t)}function zD(t){Kh=!0,Zb(t)}function Si(){if(!Rp&&qr!==null){Rp=!0;var t=0,e=Oe;try{var n=qr;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qr=null,Kh=!1}catch(s){throw qr!==null&&(qr=qr.slice(t+1)),Sb(by,Si),s}finally{Oe=e,Rp=!1}}return null}var Wo=[],qo=0,Gd=null,Kd=0,Dn=[],jn=0,ro=null,Kr=1,Qr="";function Vi(t,e){Wo[qo++]=Kd,Wo[qo++]=Gd,Gd=t,Kd=e}function eS(t,e,n){Dn[jn++]=Kr,Dn[jn++]=Qr,Dn[jn++]=ro,ro=t;var r=Kr;t=Qr;var s=32-tr(r)-1;r&=~(1<<s),n+=1;var i=32-tr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Kr=1<<32-tr(e)+s|n<<s|r,Qr=i+t}else Kr=1<<i|n<<s|r,Qr=t}function Py(t){t.return!==null&&(Vi(t,1),eS(t,1,0))}function Dy(t){for(;t===Gd;)Gd=Wo[--qo],Wo[qo]=null,Kd=Wo[--qo],Wo[qo]=null;for(;t===ro;)ro=Dn[--jn],Dn[jn]=null,Qr=Dn[--jn],Dn[jn]=null,Kr=Dn[--jn],Dn[jn]=null}var bn=null,En=null,Ke=!1,Qn=null;function tS(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,En=Gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,En=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ro!==null?{id:Kr,overflow:Qr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,En=null,!0):!1;default:return!1}}function Km(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qm(t){if(Ke){var e=En;if(e){var n=e;if(!wx(t,e)){if(Km(t))throw Error(Y(418));e=Gs(n.nextSibling);var r=bn;e&&wx(t,e)?tS(r,n):(t.flags=t.flags&-4097|2,Ke=!1,bn=t)}}else{if(Km(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ke=!1,bn=t}}}function xx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function Vu(t){if(t!==bn)return!1;if(!Ke)return xx(t),Ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hm(t.type,t.memoizedProps)),e&&(e=En)){if(Km(t))throw nS(),Error(Y(418));for(;e;)tS(t,e),e=Gs(e.nextSibling)}if(xx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){En=Gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}En=null}}else En=bn?Gs(t.stateNode.nextSibling):null;return!0}function nS(){for(var t=En;t;)t=Gs(t.nextSibling)}function ba(){En=bn=null,Ke=!1}function jy(t){Qn===null?Qn=[t]:Qn.push(t)}var UD=hs.ReactCurrentBatchConfig;function Cl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Fu(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _x(t){var e=t._init;return e(t._payload)}function rS(t){function e(x,w){if(t){var S=x.deletions;S===null?(x.deletions=[w],x.flags|=16):S.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=Xs(x,w),x.index=0,x.sibling=null,x}function i(x,w,S){return x.index=S,t?(S=x.alternate,S!==null?(S=S.index,S<w?(x.flags|=2,w):S):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,w,S,k){return w===null||w.tag!==6?(w=Vp(S,x.mode,k),w.return=x,w):(w=s(w,S),w.return=x,w)}function l(x,w,S,k){var j=S.type;return j===Fo?h(x,w,S.props.children,k,S.key):w!==null&&(w.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ns&&_x(j)===w.type)?(k=s(w,S.props),k.ref=Cl(x,w,S),k.return=x,k):(k=xd(S.type,S.key,S.props,null,x.mode,k),k.ref=Cl(x,w,S),k.return=x,k)}function d(x,w,S,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Fp(S,x.mode,k),w.return=x,w):(w=s(w,S.children||[]),w.return=x,w)}function h(x,w,S,k,j){return w===null||w.tag!==7?(w=Xi(S,x.mode,k,j),w.return=x,w):(w=s(w,S),w.return=x,w)}function f(x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Vp(""+w,x.mode,S),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nu:return S=xd(w.type,w.key,w.props,null,x.mode,S),S.ref=Cl(x,null,w),S.return=x,S;case Vo:return w=Fp(w,x.mode,S),w.return=x,w;case Ns:var k=w._init;return f(x,k(w._payload),S)}if(Pl(w)||_l(w))return w=Xi(w,x.mode,S,null),w.return=x,w;Fu(x,w)}return null}function m(x,w,S,k){var j=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return j!==null?null:a(x,w,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Nu:return S.key===j?l(x,w,S,k):null;case Vo:return S.key===j?d(x,w,S,k):null;case Ns:return j=S._init,m(x,w,j(S._payload),k)}if(Pl(S)||_l(S))return j!==null?null:h(x,w,S,k,null);Fu(x,S)}return null}function y(x,w,S,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(S)||null,a(w,x,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Nu:return x=x.get(k.key===null?S:k.key)||null,l(w,x,k,j);case Vo:return x=x.get(k.key===null?S:k.key)||null,d(w,x,k,j);case Ns:var D=k._init;return y(x,w,S,D(k._payload),j)}if(Pl(k)||_l(k))return x=x.get(S)||null,h(w,x,k,j,null);Fu(w,k)}return null}function b(x,w,S,k){for(var j=null,D=null,T=w,C=w=0,I=null;T!==null&&C<S.length;C++){T.index>C?(I=T,T=null):I=T.sibling;var A=m(x,T,S[C],k);if(A===null){T===null&&(T=I);break}t&&T&&A.alternate===null&&e(x,T),w=i(A,w,C),D===null?j=A:D.sibling=A,D=A,T=I}if(C===S.length)return n(x,T),Ke&&Vi(x,C),j;if(T===null){for(;C<S.length;C++)T=f(x,S[C],k),T!==null&&(w=i(T,w,C),D===null?j=T:D.sibling=T,D=T);return Ke&&Vi(x,C),j}for(T=r(x,T);C<S.length;C++)I=y(T,x,C,S[C],k),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?C:I.key),w=i(I,w,C),D===null?j=I:D.sibling=I,D=I);return t&&T.forEach(function(P){return e(x,P)}),Ke&&Vi(x,C),j}function v(x,w,S,k){var j=_l(S);if(typeof j!="function")throw Error(Y(150));if(S=j.call(S),S==null)throw Error(Y(151));for(var D=j=null,T=w,C=w=0,I=null,A=S.next();T!==null&&!A.done;C++,A=S.next()){T.index>C?(I=T,T=null):I=T.sibling;var P=m(x,T,A.value,k);if(P===null){T===null&&(T=I);break}t&&T&&P.alternate===null&&e(x,T),w=i(P,w,C),D===null?j=P:D.sibling=P,D=P,T=I}if(A.done)return n(x,T),Ke&&Vi(x,C),j;if(T===null){for(;!A.done;C++,A=S.next())A=f(x,A.value,k),A!==null&&(w=i(A,w,C),D===null?j=A:D.sibling=A,D=A);return Ke&&Vi(x,C),j}for(T=r(x,T);!A.done;C++,A=S.next())A=y(T,x,C,A.value,k),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?C:A.key),w=i(A,w,C),D===null?j=A:D.sibling=A,D=A);return t&&T.forEach(function(O){return e(x,O)}),Ke&&Vi(x,C),j}function E(x,w,S,k){if(typeof S=="object"&&S!==null&&S.type===Fo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Nu:e:{for(var j=S.key,D=w;D!==null;){if(D.key===j){if(j=S.type,j===Fo){if(D.tag===7){n(x,D.sibling),w=s(D,S.props.children),w.return=x,x=w;break e}}else if(D.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Ns&&_x(j)===D.type){n(x,D.sibling),w=s(D,S.props),w.ref=Cl(x,D,S),w.return=x,x=w;break e}n(x,D);break}else e(x,D);D=D.sibling}S.type===Fo?(w=Xi(S.props.children,x.mode,k,S.key),w.return=x,x=w):(k=xd(S.type,S.key,S.props,null,x.mode,k),k.ref=Cl(x,w,S),k.return=x,x=k)}return o(x);case Vo:e:{for(D=S.key;w!==null;){if(w.key===D)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(x,w.sibling),w=s(w,S.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=Fp(S,x.mode,k),w.return=x,x=w}return o(x);case Ns:return D=S._init,E(x,w,D(S._payload),k)}if(Pl(S))return b(x,w,S,k);if(_l(S))return v(x,w,S,k);Fu(x,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(x,w.sibling),w=s(w,S),w.return=x,x=w):(n(x,w),w=Vp(S,x.mode,k),w.return=x,x=w),o(x)):n(x,w)}return E}var Sa=rS(!0),sS=rS(!1),Qd=bi(null),Yd=null,Go=null,Oy=null;function My(){Oy=Go=Yd=null}function Ly(t){var e=Qd.current;We(Qd),t._currentValue=e}function Ym(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ta(t,e){Yd=t,Oy=Go=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function Fn(t){var e=t._currentValue;if(Oy!==t)if(t={context:t,memoizedValue:e,next:null},Go===null){if(Yd===null)throw Error(Y(308));Go=t,Yd.dependencies={lanes:0,firstContext:t}}else Go=Go.next=t;return e}var $i=null;function Vy(t){$i===null?$i=[t]:$i.push(t)}function iS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Vy(e)):(n.next=s.next,s.next=n),e.interleaved=n,ss(t,r)}function ss(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var As=!1;function Fy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ks(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ss(t,n)}return s=r.interleaved,s===null?(e.next=e,Vy(r)):(e.next=s.next,s.next=e),r.interleaved=e,ss(t,n)}function pd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sy(t,n)}}function Ex(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xd(t,e,n,r){var s=t.updateQueue;As=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,d=l.next;l.next=null,o===null?i=d:o.next=d,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=d=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var b=t,v=a;switch(m=e,y=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){f=b.call(y,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,m=typeof b=="function"?b.call(y,f,m):b,m==null)break e;f=Ze({},f,m);break e;case 2:As=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);io|=o,t.lanes=o,t.memoizedState=f}}function bx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Bc={},Nr=bi(Bc),yc=bi(Bc),vc=bi(Bc);function Bi(t){if(t===Bc)throw Error(Y(174));return t}function zy(t,e){switch(Fe(vc,e),Fe(yc,t),Fe(Nr,Bc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:km(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=km(e,t)}We(Nr),Fe(Nr,e)}function Ta(){We(Nr),We(yc),We(vc)}function aS(t){Bi(vc.current);var e=Bi(Nr.current),n=km(e,t.type);e!==n&&(Fe(yc,t),Fe(Nr,n))}function Uy(t){yc.current===t&&(We(Nr),We(yc))}var Ye=bi(0);function Jd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pp=[];function $y(){for(var t=0;t<Pp.length;t++)Pp[t]._workInProgressVersionPrimary=null;Pp.length=0}var md=hs.ReactCurrentDispatcher,Dp=hs.ReactCurrentBatchConfig,so=0,Je=null,pt=null,Et=null,Zd=!1,Hl=!1,wc=0,$D=0;function Vt(){throw Error(Y(321))}function By(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!or(t[n],e[n]))return!1;return!0}function Hy(t,e,n,r,s,i){if(so=i,Je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,md.current=t===null||t.memoizedState===null?qD:GD,t=n(r,s),Hl){i=0;do{if(Hl=!1,wc=0,25<=i)throw Error(Y(301));i+=1,Et=pt=null,e.updateQueue=null,md.current=KD,t=n(r,s)}while(Hl)}if(md.current=eh,e=pt!==null&&pt.next!==null,so=0,Et=pt=Je=null,Zd=!1,e)throw Error(Y(300));return t}function Wy(){var t=wc!==0;return wc=0,t}function wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Et===null?Je.memoizedState=Et=t:Et=Et.next=t,Et}function zn(){if(pt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=Et===null?Je.memoizedState:Et.next;if(e!==null)Et=e,pt=t;else{if(t===null)throw Error(Y(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Et===null?Je.memoizedState=Et=t:Et=Et.next=t}return Et}function xc(t,e){return typeof e=="function"?e(t):e}function jp(t){var e=zn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=pt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,d=i;do{var h=d.lane;if((so&h)===h)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Je.lanes|=h,io|=h}d=d.next}while(d!==null&&d!==i);l===null?o=r:l.next=a,or(r,e.memoizedState)||(un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Je.lanes|=i,io|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Op(t){var e=zn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);or(i,e.memoizedState)||(un=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function lS(){}function cS(t,e){var n=Je,r=zn(),s=e(),i=!or(r.memoizedState,s);if(i&&(r.memoizedState=s,un=!0),r=r.queue,qy(hS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Et!==null&&Et.memoizedState.tag&1){if(n.flags|=2048,_c(9,dS.bind(null,n,r,s,e),void 0,null),Ct===null)throw Error(Y(349));so&30||uS(n,e,s)}return s}function uS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function dS(t,e,n,r){e.value=n,e.getSnapshot=r,fS(e)&&pS(t)}function hS(t,e,n){return n(function(){fS(e)&&pS(t)})}function fS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!or(t,n)}catch{return!0}}function pS(t){var e=ss(t,1);e!==null&&nr(e,t,1,-1)}function Sx(t){var e=wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xc,lastRenderedState:t},e.queue=t,t=t.dispatch=WD.bind(null,Je,t),[e.memoizedState,t]}function _c(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Je.updateQueue,e===null?(e={lastEffect:null,stores:null},Je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mS(){return zn().memoizedState}function gd(t,e,n,r){var s=wr();Je.flags|=t,s.memoizedState=_c(1|e,n,void 0,r===void 0?null:r)}function Qh(t,e,n,r){var s=zn();r=r===void 0?null:r;var i=void 0;if(pt!==null){var o=pt.memoizedState;if(i=o.destroy,r!==null&&By(r,o.deps)){s.memoizedState=_c(e,n,i,r);return}}Je.flags|=t,s.memoizedState=_c(1|e,n,i,r)}function Tx(t,e){return gd(8390656,8,t,e)}function qy(t,e){return Qh(2048,8,t,e)}function gS(t,e){return Qh(4,2,t,e)}function yS(t,e){return Qh(4,4,t,e)}function vS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function wS(t,e,n){return n=n!=null?n.concat([t]):null,Qh(4,4,vS.bind(null,e,t),n)}function Gy(){}function xS(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&By(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function _S(t,e){var n=zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&By(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ES(t,e,n){return so&21?(or(n,e)||(n=Ib(),Je.lanes|=n,io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function BD(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=Dp.transition;Dp.transition={};try{t(!1),e()}finally{Oe=n,Dp.transition=r}}function bS(){return zn().memoizedState}function HD(t,e,n){var r=Ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},SS(t))TS(e,n);else if(n=iS(t,e,n,r),n!==null){var s=Xt();nr(n,t,r,s),CS(n,e,r)}}function WD(t,e,n){var r=Ys(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(SS(t))TS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,or(a,o)){var l=e.interleaved;l===null?(s.next=s,Vy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=iS(t,e,s,r),n!==null&&(s=Xt(),nr(n,t,r,s),CS(n,e,r))}}function SS(t){var e=t.alternate;return t===Je||e!==null&&e===Je}function TS(t,e){Hl=Zd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function CS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Sy(t,n)}}var eh={readContext:Fn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},qD={readContext:Fn,useCallback:function(t,e){return wr().memoizedState=[t,e===void 0?null:e],t},useContext:Fn,useEffect:Tx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gd(4194308,4,vS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gd(4194308,4,t,e)},useInsertionEffect:function(t,e){return gd(4,2,t,e)},useMemo:function(t,e){var n=wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HD.bind(null,Je,t),[r.memoizedState,t]},useRef:function(t){var e=wr();return t={current:t},e.memoizedState=t},useState:Sx,useDebugValue:Gy,useDeferredValue:function(t){return wr().memoizedState=t},useTransition:function(){var t=Sx(!1),e=t[0];return t=BD.bind(null,t[1]),wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Je,s=wr();if(Ke){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Ct===null)throw Error(Y(349));so&30||uS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Tx(hS.bind(null,r,i,t),[t]),r.flags|=2048,_c(9,dS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=wr(),e=Ct.identifierPrefix;if(Ke){var n=Qr,r=Kr;n=(r&~(1<<32-tr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$D++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GD={readContext:Fn,useCallback:xS,useContext:Fn,useEffect:qy,useImperativeHandle:wS,useInsertionEffect:gS,useLayoutEffect:yS,useMemo:_S,useReducer:jp,useRef:mS,useState:function(){return jp(xc)},useDebugValue:Gy,useDeferredValue:function(t){var e=zn();return ES(e,pt.memoizedState,t)},useTransition:function(){var t=jp(xc)[0],e=zn().memoizedState;return[t,e]},useMutableSource:lS,useSyncExternalStore:cS,useId:bS,unstable_isNewReconciler:!1},KD={readContext:Fn,useCallback:xS,useContext:Fn,useEffect:qy,useImperativeHandle:wS,useInsertionEffect:gS,useLayoutEffect:yS,useMemo:_S,useReducer:Op,useRef:mS,useState:function(){return Op(xc)},useDebugValue:Gy,useDeferredValue:function(t){var e=zn();return pt===null?e.memoizedState=t:ES(e,pt.memoizedState,t)},useTransition:function(){var t=Op(xc)[0],e=zn().memoizedState;return[t,e]},useMutableSource:lS,useSyncExternalStore:cS,useId:bS,unstable_isNewReconciler:!1};function Wn(t,e){if(t&&t.defaultProps){e=Ze({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ze({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Yh={isMounted:function(t){return(t=t._reactInternals)?vo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=Ys(t),i=Jr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ks(t,i,s),e!==null&&(nr(e,t,s,r),pd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),s=Ys(t),i=Jr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ks(t,i,s),e!==null&&(nr(e,t,s,r),pd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=Ys(t),s=Jr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ks(t,s,r),e!==null&&(nr(e,t,r,n),pd(e,t,r))}};function Cx(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fc(n,r)||!fc(s,i):!0}function IS(t,e,n){var r=!1,s=ai,i=e.contextType;return typeof i=="object"&&i!==null?i=Fn(i):(s=hn(e)?no:Wt.current,r=e.contextTypes,i=(r=r!=null)?Ea(t,s):ai),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yh,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ix(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Yh.enqueueReplaceState(e,e.state,null)}function Jm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Fy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Fn(i):(i=hn(e)?no:Wt.current,s.context=Ea(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Xm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Yh.enqueueReplaceState(s,s.state,null),Xd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ca(t,e){try{var n="",r=e;do n+=E2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Mp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var QD=typeof WeakMap=="function"?WeakMap:Map;function NS(t,e,n){n=Jr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nh||(nh=!0,cg=r),Zm(t,e)},n}function AS(t,e,n){n=Jr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Zm(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zm(t,e),typeof r!="function"&&(Qs===null?Qs=new Set([this]):Qs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Nx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new QD;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=cj.bind(null,t,e,n),e.then(t,t))}function Ax(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jr(-1,1),e.tag=2,Ks(n,e,1))),n.lanes|=1),t)}var YD=hs.ReactCurrentOwner,un=!1;function Qt(t,e,n,r){e.child=t===null?sS(e,null,n,r):Sa(e,t.child,n,r)}function Rx(t,e,n,r,s){n=n.render;var i=e.ref;return ta(e,s),r=Hy(t,e,n,r,i,s),n=Wy(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,is(t,e,s)):(Ke&&n&&Py(e),e.flags|=1,Qt(t,e,r,s),e.child)}function Px(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!tv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,kS(t,e,i,r,s)):(t=xd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fc,n(o,r)&&t.ref===e.ref)return is(t,e,s)}return e.flags|=1,t=Xs(i,r),t.ref=e.ref,t.return=e,e.child=t}function kS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fc(i,r)&&t.ref===e.ref)if(un=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,is(t,e,s)}return eg(t,e,n,r,s)}function RS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Qo,vn),vn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(Qo,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Fe(Qo,vn),vn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Fe(Qo,vn),vn|=r;return Qt(t,e,s,n),e.child}function PS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function eg(t,e,n,r,s){var i=hn(n)?no:Wt.current;return i=Ea(e,i),ta(e,s),n=Hy(t,e,n,r,i,s),r=Wy(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,is(t,e,s)):(Ke&&r&&Py(e),e.flags|=1,Qt(t,e,n,s),e.child)}function Dx(t,e,n,r,s){if(hn(n)){var i=!0;qd(e)}else i=!1;if(ta(e,s),e.stateNode===null)yd(t,e),IS(e,n,r),Jm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Fn(d):(d=hn(n)?no:Wt.current,d=Ea(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==d)&&Ix(e,o,r,d),As=!1;var m=e.memoizedState;o.state=m,Xd(e,r,o,s),l=e.memoizedState,a!==r||m!==l||dn.current||As?(typeof h=="function"&&(Xm(e,n,h,r),l=e.memoizedState),(a=As||Cx(e,n,a,r,m,l,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=d,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,oS(t,e),a=e.memoizedProps,d=e.type===e.elementType?a:Wn(e.type,a),o.props=d,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fn(l):(l=hn(n)?no:Wt.current,l=Ea(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&Ix(e,o,r,l),As=!1,m=e.memoizedState,o.state=m,Xd(e,r,o,s);var b=e.memoizedState;a!==f||m!==b||dn.current||As?(typeof y=="function"&&(Xm(e,n,y,r),b=e.memoizedState),(d=As||Cx(e,n,d,r,m,b,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=l,r=d):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return tg(t,e,n,r,i,s)}function tg(t,e,n,r,s,i){PS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&vx(e,n,!1),is(t,e,i);r=e.stateNode,YD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Sa(e,t.child,null,i),e.child=Sa(e,null,a,i)):Qt(t,e,a,i),e.memoizedState=r.state,s&&vx(e,n,!0),e.child}function DS(t){var e=t.stateNode;e.pendingContext?yx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&yx(t,e.context,!1),zy(t,e.containerInfo)}function jx(t,e,n,r,s){return ba(),jy(s),e.flags|=256,Qt(t,e,n,r),e.child}var ng={dehydrated:null,treeContext:null,retryLane:0};function rg(t){return{baseLanes:t,cachePool:null,transitions:null}}function jS(t,e,n){var r=e.pendingProps,s=Ye.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Fe(Ye,s&1),t===null)return Qm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zh(o,r,0,null),t=Xi(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=rg(n),e.memoizedState=ng,t):Ky(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return XD(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Xs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Xs(a,i):(i=Xi(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?rg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ng,r}return i=t.child,t=i.sibling,r=Xs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ky(t,e){return e=Zh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zu(t,e,n,r){return r!==null&&jy(r),Sa(e,t.child,null,n),t=Ky(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XD(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Mp(Error(Y(422))),zu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Zh({mode:"visible",children:r.children},s,0,null),i=Xi(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Sa(e,t.child,null,o),e.child.memoizedState=rg(o),e.memoizedState=ng,i);if(!(e.mode&1))return zu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Y(419)),r=Mp(i,r,void 0),zu(t,e,o,r)}if(a=(o&t.childLanes)!==0,un||a){if(r=Ct,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ss(t,s),nr(r,t,s,-1))}return ev(),r=Mp(Error(Y(421))),zu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=uj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,En=Gs(s.nextSibling),bn=e,Ke=!0,Qn=null,t!==null&&(Dn[jn++]=Kr,Dn[jn++]=Qr,Dn[jn++]=ro,Kr=t.id,Qr=t.overflow,ro=e),e=Ky(e,r.children),e.flags|=4096,e)}function Ox(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ym(t.return,e,n)}function Lp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function OS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Qt(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ox(t,n,e);else if(t.tag===19)Ox(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Fe(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jd(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Lp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jd(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Lp(e,!0,n,null,i);break;case"together":Lp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function is(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function JD(t,e,n){switch(e.tag){case 3:DS(e),ba();break;case 5:aS(e);break;case 1:hn(e.type)&&qd(e);break;case 4:zy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Fe(Qd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Fe(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?jS(t,e,n):(Fe(Ye,Ye.current&1),t=is(t,e,n),t!==null?t.sibling:null);Fe(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,RS(t,e,n)}return is(t,e,n)}var MS,sg,LS,VS;MS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sg=function(){};LS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Bi(Nr.current);var i=null;switch(n){case"input":s=Cm(t,s),r=Cm(t,r),i=[];break;case"select":s=Ze({},s,{value:void 0}),r=Ze({},r,{value:void 0}),i=[];break;case"textarea":s=Am(t,s),r=Am(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hd)}Rm(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var a=s[d];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(oc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var l=r[d];if(a=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&l!==a&&(l!=null||a!=null))if(d==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(d,n)),n=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(oc.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&Be("scroll",t),i||a===l||(i=[])):(i=i||[]).push(d,l))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};VS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Il(t,e){if(!Ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ft(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ZD(t,e,n){var r=e.pendingProps;switch(Dy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(e),null;case 1:return hn(e.type)&&Wd(),Ft(e),null;case 3:return r=e.stateNode,Ta(),We(dn),We(Wt),$y(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(hg(Qn),Qn=null))),sg(t,e),Ft(e),null;case 5:Uy(e);var s=Bi(vc.current);if(n=e.type,t!==null&&e.stateNode!=null)LS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Ft(e),null}if(t=Bi(Nr.current),Vu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Sr]=e,r[gc]=i,t=(e.mode&1)!==0,n){case"dialog":Be("cancel",r),Be("close",r);break;case"iframe":case"object":case"embed":Be("load",r);break;case"video":case"audio":for(s=0;s<jl.length;s++)Be(jl[s],r);break;case"source":Be("error",r);break;case"img":case"image":case"link":Be("error",r),Be("load",r);break;case"details":Be("toggle",r);break;case"input":Hw(r,i),Be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Be("invalid",r);break;case"textarea":qw(r,i),Be("invalid",r)}Rm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Lu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Lu(r.textContent,a,t),s=["children",""+a]):oc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Be("scroll",r)}switch(n){case"input":Au(r),Ww(r,i,!0);break;case"textarea":Au(r),Gw(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Hd)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sr]=e,t[gc]=r,MS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pm(n,r),n){case"dialog":Be("cancel",t),Be("close",t),s=r;break;case"iframe":case"object":case"embed":Be("load",t),s=r;break;case"video":case"audio":for(s=0;s<jl.length;s++)Be(jl[s],t);s=r;break;case"source":Be("error",t),s=r;break;case"img":case"image":case"link":Be("error",t),Be("load",t),s=r;break;case"details":Be("toggle",t),s=r;break;case"input":Hw(t,r),s=Cm(t,r),Be("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ze({},r,{value:void 0}),Be("invalid",t);break;case"textarea":qw(t,r),s=Am(t,r),Be("invalid",t);break;default:s=r}Rm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?mb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&fb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ac(t,l):typeof l=="number"&&ac(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Be("scroll",t):l!=null&&vy(t,i,l,o))}switch(n){case"input":Au(t),Ww(t,r,!1);break;case"textarea":Au(t),Gw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+oi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Xo(t,!!r.multiple,i,!1):r.defaultValue!=null&&Xo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Hd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ft(e),null;case 6:if(t&&e.stateNode!=null)VS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Bi(vc.current),Bi(Nr.current),Vu(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sr]=e,(i=r.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:Lu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Lu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sr]=e,e.stateNode=r}return Ft(e),null;case 13:if(We(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&En!==null&&e.mode&1&&!(e.flags&128))nS(),ba(),e.flags|=98560,i=!1;else if(i=Vu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[Sr]=e}else ba(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ft(e),i=!1}else Qn!==null&&(hg(Qn),Qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?yt===0&&(yt=3):ev())),e.updateQueue!==null&&(e.flags|=4),Ft(e),null);case 4:return Ta(),sg(t,e),t===null&&pc(e.stateNode.containerInfo),Ft(e),null;case 10:return Ly(e.type._context),Ft(e),null;case 17:return hn(e.type)&&Wd(),Ft(e),null;case 19:if(We(Ye),i=e.memoizedState,i===null)return Ft(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Il(i,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jd(t),o!==null){for(e.flags|=128,Il(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(Ye,Ye.current&1|2),e.child}t=t.sibling}i.tail!==null&&it()>Ia&&(e.flags|=128,r=!0,Il(i,!1),e.lanes=4194304)}else{if(!r)if(t=Jd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Il(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ke)return Ft(e),null}else 2*it()-i.renderingStartTime>Ia&&n!==1073741824&&(e.flags|=128,r=!0,Il(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=it(),e.sibling=null,n=Ye.current,Fe(Ye,r?n&1|2:n&1),e):(Ft(e),null);case 22:case 23:return Zy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&(Ft(e),e.subtreeFlags&6&&(e.flags|=8192)):Ft(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function ej(t,e){switch(Dy(e),e.tag){case 1:return hn(e.type)&&Wd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ta(),We(dn),We(Wt),$y(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uy(e),null;case 13:if(We(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));ba()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ye),null;case 4:return Ta(),null;case 10:return Ly(e.type._context),null;case 22:case 23:return Zy(),null;case 24:return null;default:return null}}var Uu=!1,Bt=!1,tj=typeof WeakSet=="function"?WeakSet:Set,te=null;function Ko(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rt(t,e,r)}else n.current=null}function ig(t,e,n){try{n()}catch(r){rt(t,e,r)}}var Mx=!1;function nj(t,e){if($m=Ud,t=Bb(),Ry(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++d===s&&(a=o),m===i&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bm={focusedElem:t,selectionRange:n},Ud=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,E=b.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Wn(e.type,v),E);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(k){rt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return b=Mx,Mx=!1,b}function Wl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ig(e,n,i)}s=s.next}while(s!==r)}}function Xh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function og(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function FS(t){var e=t.alternate;e!==null&&(t.alternate=null,FS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sr],delete e[gc],delete e[qm],delete e[VD],delete e[FD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function zS(t){return t.tag===5||t.tag===3||t.tag===4}function Lx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||zS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ag(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hd));else if(r!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}function lg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lg(t,e,n),t=t.sibling;t!==null;)lg(t,e,n),t=t.sibling}var At=null,Kn=!1;function _s(t,e,n){for(n=n.child;n!==null;)US(t,e,n),n=n.sibling}function US(t,e,n){if(Ir&&typeof Ir.onCommitFiberUnmount=="function")try{Ir.onCommitFiberUnmount(Bh,n)}catch{}switch(n.tag){case 5:Bt||Ko(n,e);case 6:var r=At,s=Kn;At=null,_s(t,e,n),At=r,Kn=s,At!==null&&(Kn?(t=At,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(Kn?(t=At,n=n.stateNode,t.nodeType===8?kp(t.parentNode,n):t.nodeType===1&&kp(t,n),dc(t)):kp(At,n.stateNode));break;case 4:r=At,s=Kn,At=n.stateNode.containerInfo,Kn=!0,_s(t,e,n),At=r,Kn=s;break;case 0:case 11:case 14:case 15:if(!Bt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ig(n,e,o),s=s.next}while(s!==r)}_s(t,e,n);break;case 1:if(!Bt&&(Ko(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){rt(n,e,a)}_s(t,e,n);break;case 21:_s(t,e,n);break;case 22:n.mode&1?(Bt=(r=Bt)||n.memoizedState!==null,_s(t,e,n),Bt=r):_s(t,e,n);break;default:_s(t,e,n)}}function Vx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new tj),e.forEach(function(r){var s=dj.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:At=a.stateNode,Kn=!1;break e;case 3:At=a.stateNode.containerInfo,Kn=!0;break e;case 4:At=a.stateNode.containerInfo,Kn=!0;break e}a=a.return}if(At===null)throw Error(Y(160));US(i,o,s),At=null,Kn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(d){rt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$S(e,t),e=e.sibling}function $S(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),vr(t),r&4){try{Wl(3,t,t.return),Xh(3,t)}catch(v){rt(t,t.return,v)}try{Wl(5,t,t.return)}catch(v){rt(t,t.return,v)}}break;case 1:Bn(e,t),vr(t),r&512&&n!==null&&Ko(n,n.return);break;case 5:if(Bn(e,t),vr(t),r&512&&n!==null&&Ko(n,n.return),t.flags&32){var s=t.stateNode;try{ac(s,"")}catch(v){rt(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ub(s,i),Pm(a,o);var d=Pm(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?mb(s,f):h==="dangerouslySetInnerHTML"?fb(s,f):h==="children"?ac(s,f):vy(s,h,f,d)}switch(a){case"input":Im(s,i);break;case"textarea":db(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Xo(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Xo(s,!!i.multiple,i.defaultValue,!0):Xo(s,!!i.multiple,i.multiple?[]:"",!1))}s[gc]=i}catch(v){rt(t,t.return,v)}}break;case 6:if(Bn(e,t),vr(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){rt(t,t.return,v)}}break;case 3:if(Bn(e,t),vr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{dc(e.containerInfo)}catch(v){rt(t,t.return,v)}break;case 4:Bn(e,t),vr(t);break;case 13:Bn(e,t),vr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Xy=it())),r&4&&Vx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Bt=(d=Bt)||h,Bn(e,t),Bt=d):Bn(e,t),vr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(te=t,h=t.child;h!==null;){for(f=te=h;te!==null;){switch(m=te,y=m.child,m.tag){case 0:case 11:case 14:case 15:Wl(4,m,m.return);break;case 1:Ko(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){rt(r,n,v)}}break;case 5:Ko(m,m.return);break;case 22:if(m.memoizedState!==null){zx(f);continue}}y!==null?(y.return=m,te=y):zx(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=pb("display",o))}catch(v){rt(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){rt(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Bn(e,t),vr(t),r&4&&Vx(t);break;case 21:break;default:Bn(e,t),vr(t)}}function vr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(zS(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ac(s,""),r.flags&=-33);var i=Lx(t);lg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Lx(t);ag(t,a,o);break;default:throw Error(Y(161))}}catch(l){rt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rj(t,e,n){te=t,BS(t)}function BS(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var s=te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Uu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||Bt;a=Uu;var d=Bt;if(Uu=o,(Bt=l)&&!d)for(te=s;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?Ux(s):l!==null?(l.return=o,te=l):Ux(s);for(;i!==null;)te=i,BS(i),i=i.sibling;te=s,Uu=a,Bt=d}Fx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,te=i):Fx(t)}}function Fx(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Bt||Xh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Bt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&bx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&dc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Bt||e.flags&512&&og(e)}catch(m){rt(e,e.return,m)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function zx(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function Ux(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xh(4,e)}catch(l){rt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){rt(e,s,l)}}var i=e.return;try{og(e)}catch(l){rt(e,i,l)}break;case 5:var o=e.return;try{og(e)}catch(l){rt(e,o,l)}}}catch(l){rt(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var sj=Math.ceil,th=hs.ReactCurrentDispatcher,Qy=hs.ReactCurrentOwner,Vn=hs.ReactCurrentBatchConfig,ke=0,Ct=null,lt=null,Dt=0,vn=0,Qo=bi(0),yt=0,Ec=null,io=0,Jh=0,Yy=0,ql=null,ln=null,Xy=0,Ia=1/0,Wr=null,nh=!1,cg=null,Qs=null,$u=!1,$s=null,rh=0,Gl=0,ug=null,vd=-1,wd=0;function Xt(){return ke&6?it():vd!==-1?vd:vd=it()}function Ys(t){return t.mode&1?ke&2&&Dt!==0?Dt&-Dt:UD.transition!==null?(wd===0&&(wd=Ib()),wd):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:jb(t.type)),t):1}function nr(t,e,n,r){if(50<Gl)throw Gl=0,ug=null,Error(Y(185));zc(t,n,r),(!(ke&2)||t!==Ct)&&(t===Ct&&(!(ke&2)&&(Jh|=n),yt===4&&Ps(t,Dt)),fn(t,r),n===1&&ke===0&&!(e.mode&1)&&(Ia=it()+500,Kh&&Si()))}function fn(t,e){var n=t.callbackNode;U2(t,e);var r=zd(t,t===Ct?Dt:0);if(r===0)n!==null&&Yw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Yw(n),e===1)t.tag===0?zD($x.bind(null,t)):Zb($x.bind(null,t)),MD(function(){!(ke&6)&&Si()}),n=null;else{switch(Nb(r)){case 1:n=by;break;case 4:n=Tb;break;case 16:n=Fd;break;case 536870912:n=Cb;break;default:n=Fd}n=XS(n,HS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function HS(t,e){if(vd=-1,wd=0,ke&6)throw Error(Y(327));var n=t.callbackNode;if(na()&&t.callbackNode!==n)return null;var r=zd(t,t===Ct?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sh(t,r);else{e=r;var s=ke;ke|=2;var i=qS();(Ct!==t||Dt!==e)&&(Wr=null,Ia=it()+500,Yi(t,e));do try{aj();break}catch(a){WS(t,a)}while(!0);My(),th.current=i,ke=s,lt!==null?e=0:(Ct=null,Dt=0,e=yt)}if(e!==0){if(e===2&&(s=Lm(t),s!==0&&(r=s,e=dg(t,s))),e===1)throw n=Ec,Yi(t,0),Ps(t,r),fn(t,it()),n;if(e===6)Ps(t,r);else{if(s=t.current.alternate,!(r&30)&&!ij(s)&&(e=sh(t,r),e===2&&(i=Lm(t),i!==0&&(r=i,e=dg(t,i))),e===1))throw n=Ec,Yi(t,0),Ps(t,r),fn(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Fi(t,ln,Wr);break;case 3:if(Ps(t,r),(r&130023424)===r&&(e=Xy+500-it(),10<e)){if(zd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Wm(Fi.bind(null,t,ln,Wr),e);break}Fi(t,ln,Wr);break;case 4:if(Ps(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-tr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sj(r/1960))-r,10<r){t.timeoutHandle=Wm(Fi.bind(null,t,ln,Wr),r);break}Fi(t,ln,Wr);break;case 5:Fi(t,ln,Wr);break;default:throw Error(Y(329))}}}return fn(t,it()),t.callbackNode===n?HS.bind(null,t):null}function dg(t,e){var n=ql;return t.current.memoizedState.isDehydrated&&(Yi(t,e).flags|=256),t=sh(t,e),t!==2&&(e=ln,ln=n,e!==null&&hg(e)),t}function hg(t){ln===null?ln=t:ln.push.apply(ln,t)}function ij(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!or(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ps(t,e){for(e&=~Yy,e&=~Jh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tr(e),r=1<<n;t[n]=-1,e&=~r}}function $x(t){if(ke&6)throw Error(Y(327));na();var e=zd(t,0);if(!(e&1))return fn(t,it()),null;var n=sh(t,e);if(t.tag!==0&&n===2){var r=Lm(t);r!==0&&(e=r,n=dg(t,r))}if(n===1)throw n=Ec,Yi(t,0),Ps(t,e),fn(t,it()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fi(t,ln,Wr),fn(t,it()),null}function Jy(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Ia=it()+500,Kh&&Si())}}function oo(t){$s!==null&&$s.tag===0&&!(ke&6)&&na();var e=ke;ke|=1;var n=Vn.transition,r=Oe;try{if(Vn.transition=null,Oe=1,t)return t()}finally{Oe=r,Vn.transition=n,ke=e,!(ke&6)&&Si()}}function Zy(){vn=Qo.current,We(Qo)}function Yi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,OD(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(Dy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wd();break;case 3:Ta(),We(dn),We(Wt),$y();break;case 5:Uy(r);break;case 4:Ta();break;case 13:We(Ye);break;case 19:We(Ye);break;case 10:Ly(r.type._context);break;case 22:case 23:Zy()}n=n.return}if(Ct=t,lt=t=Xs(t.current,null),Dt=vn=e,yt=0,Ec=null,Yy=Jh=io=0,ln=ql=null,$i!==null){for(e=0;e<$i.length;e++)if(n=$i[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}$i=null}return t}function WS(t,e){do{var n=lt;try{if(My(),md.current=eh,Zd){for(var r=Je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zd=!1}if(so=0,Et=pt=Je=null,Hl=!1,wc=0,Qy.current=null,n===null||n.return===null){yt=1,Ec=e,lt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Dt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Ax(o);if(y!==null){y.flags&=-257,kx(y,o,a,i,e),y.mode&1&&Nx(i,d,e),e=y,l=d;var b=e.updateQueue;if(b===null){var v=new Set;v.add(l),e.updateQueue=v}else b.add(l);break e}else{if(!(e&1)){Nx(i,d,e),ev();break e}l=Error(Y(426))}}else if(Ke&&a.mode&1){var E=Ax(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),kx(E,o,a,i,e),jy(Ca(l,a));break e}}i=l=Ca(l,a),yt!==4&&(yt=2),ql===null?ql=[i]:ql.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=NS(i,l,e);Ex(i,x);break e;case 1:a=l;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Qs===null||!Qs.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=AS(i,a,e);Ex(i,k);break e}}i=i.return}while(i!==null)}KS(n)}catch(j){e=j,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function qS(){var t=th.current;return th.current=eh,t===null?eh:t}function ev(){(yt===0||yt===3||yt===2)&&(yt=4),Ct===null||!(io&268435455)&&!(Jh&268435455)||Ps(Ct,Dt)}function sh(t,e){var n=ke;ke|=2;var r=qS();(Ct!==t||Dt!==e)&&(Wr=null,Yi(t,e));do try{oj();break}catch(s){WS(t,s)}while(!0);if(My(),ke=n,th.current=r,lt!==null)throw Error(Y(261));return Ct=null,Dt=0,yt}function oj(){for(;lt!==null;)GS(lt)}function aj(){for(;lt!==null&&!P2();)GS(lt)}function GS(t){var e=YS(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?KS(t):lt=e,Qy.current=null}function KS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=ej(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,lt=null;return}}else if(n=ZD(n,e,vn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);yt===0&&(yt=5)}function Fi(t,e,n){var r=Oe,s=Vn.transition;try{Vn.transition=null,Oe=1,lj(t,e,n,r)}finally{Vn.transition=s,Oe=r}return null}function lj(t,e,n,r){do na();while($s!==null);if(ke&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($2(t,i),t===Ct&&(lt=Ct=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$u||($u=!0,XS(Fd,function(){return na(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Vn.transition,Vn.transition=null;var o=Oe;Oe=1;var a=ke;ke|=4,Qy.current=null,nj(t,n),$S(n,t),ND(Bm),Ud=!!$m,Bm=$m=null,t.current=n,rj(n),D2(),ke=a,Oe=o,Vn.transition=i}else t.current=n;if($u&&($u=!1,$s=t,rh=s),i=t.pendingLanes,i===0&&(Qs=null),M2(n.stateNode),fn(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nh)throw nh=!1,t=cg,cg=null,t;return rh&1&&t.tag!==0&&na(),i=t.pendingLanes,i&1?t===ug?Gl++:(Gl=0,ug=t):Gl=0,Si(),null}function na(){if($s!==null){var t=Nb(rh),e=Vn.transition,n=Oe;try{if(Vn.transition=null,Oe=16>t?16:t,$s===null)var r=!1;else{if(t=$s,$s=null,rh=0,ke&6)throw Error(Y(331));var s=ke;for(ke|=4,te=t.current;te!==null;){var i=te,o=i.child;if(te.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var d=a[l];for(te=d;te!==null;){var h=te;switch(h.tag){case 0:case 11:case 15:Wl(8,h,i)}var f=h.child;if(f!==null)f.return=h,te=f;else for(;te!==null;){h=te;var m=h.sibling,y=h.return;if(FS(h),h===d){te=null;break}if(m!==null){m.return=y,te=m;break}te=y}}}var b=i.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}te=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,te=o;else e:for(;te!==null;){if(i=te,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wl(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,te=x;break e}te=i.return}}var w=t.current;for(te=w;te!==null;){o=te;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,te=S;else e:for(o=w;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xh(9,a)}}catch(j){rt(a,a.return,j)}if(a===o){te=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,te=k;break e}te=a.return}}if(ke=s,Si(),Ir&&typeof Ir.onPostCommitFiberRoot=="function")try{Ir.onPostCommitFiberRoot(Bh,t)}catch{}r=!0}return r}finally{Oe=n,Vn.transition=e}}return!1}function Bx(t,e,n){e=Ca(n,e),e=NS(t,e,1),t=Ks(t,e,1),e=Xt(),t!==null&&(zc(t,1,e),fn(t,e))}function rt(t,e,n){if(t.tag===3)Bx(t,t,n);else for(;e!==null;){if(e.tag===3){Bx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Qs===null||!Qs.has(r))){t=Ca(n,t),t=AS(e,t,1),e=Ks(e,t,1),t=Xt(),e!==null&&(zc(e,1,t),fn(e,t));break}}e=e.return}}function cj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Dt&n)===n&&(yt===4||yt===3&&(Dt&130023424)===Dt&&500>it()-Xy?Yi(t,0):Yy|=n),fn(t,e)}function QS(t,e){e===0&&(t.mode&1?(e=Pu,Pu<<=1,!(Pu&130023424)&&(Pu=4194304)):e=1);var n=Xt();t=ss(t,e),t!==null&&(zc(t,e,n),fn(t,n))}function uj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),QS(t,n)}function dj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),QS(t,n)}var YS;YS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,JD(t,e,n);un=!!(t.flags&131072)}else un=!1,Ke&&e.flags&1048576&&eS(e,Kd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;yd(t,e),t=e.pendingProps;var s=Ea(e,Wt.current);ta(e,n),s=Hy(null,e,r,t,s,n);var i=Wy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(i=!0,qd(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Fy(e),s.updater=Yh,e.stateNode=s,s._reactInternals=e,Jm(e,r,t,n),e=tg(null,e,r,!0,i,n)):(e.tag=0,Ke&&i&&Py(e),Qt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(yd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=fj(r),t=Wn(r,t),s){case 0:e=eg(null,e,r,t,n);break e;case 1:e=Dx(null,e,r,t,n);break e;case 11:e=Rx(null,e,r,t,n);break e;case 14:e=Px(null,e,r,Wn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),eg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Dx(t,e,r,s,n);case 3:e:{if(DS(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,oS(t,e),Xd(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ca(Error(Y(423)),e),e=jx(t,e,r,n,s);break e}else if(r!==s){s=Ca(Error(Y(424)),e),e=jx(t,e,r,n,s);break e}else for(En=Gs(e.stateNode.containerInfo.firstChild),bn=e,Ke=!0,Qn=null,n=sS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ba(),r===s){e=is(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return aS(e),t===null&&Qm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Hm(r,s)?o=null:i!==null&&Hm(r,i)&&(e.flags|=32),PS(t,e),Qt(t,e,o,n),e.child;case 6:return t===null&&Qm(e),null;case 13:return jS(t,e,n);case 4:return zy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Sa(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),Rx(t,e,r,s,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Fe(Qd,r._currentValue),r._currentValue=o,i!==null)if(or(i.value,o)){if(i.children===s.children&&!dn.current){e=is(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Jr(-1,n&-n),l.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?l.next=l:(l.next=h.next,h.next=l),d.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Ym(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ym(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Qt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ta(e,n),s=Fn(s),r=r(s),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,s=Wn(r,e.pendingProps),s=Wn(r.type,s),Px(t,e,r,s,n);case 15:return kS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wn(r,s),yd(t,e),e.tag=1,hn(r)?(t=!0,qd(e)):t=!1,ta(e,n),IS(e,r,s),Jm(e,r,s,n),tg(null,e,r,!0,t,n);case 19:return OS(t,e,n);case 22:return RS(t,e,n)}throw Error(Y(156,e.tag))};function XS(t,e){return Sb(t,e)}function hj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new hj(t,e,n,r)}function tv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fj(t){if(typeof t=="function")return tv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===xy)return 11;if(t===_y)return 14}return 2}function Xs(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")tv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fo:return Xi(n.children,s,i,e);case wy:o=8,s|=8;break;case Em:return t=Mn(12,n,e,s|2),t.elementType=Em,t.lanes=i,t;case bm:return t=Mn(13,n,e,s),t.elementType=bm,t.lanes=i,t;case Sm:return t=Mn(19,n,e,s),t.elementType=Sm,t.lanes=i,t;case ab:return Zh(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ib:o=10;break e;case ob:o=9;break e;case xy:o=11;break e;case _y:o=14;break e;case Ns:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Mn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Xi(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function Zh(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=ab,t.lanes=n,t.stateNode={isHidden:!1},t}function Vp(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function Fp(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pj(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wp(0),this.expirationTimes=wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function nv(t,e,n,r,s,i,o,a,l){return t=new pj(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Mn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fy(i),t}function mj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function JS(t){if(!t)return ai;t=t._reactInternals;e:{if(vo(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(hn(n))return Jb(t,n,e)}return e}function ZS(t,e,n,r,s,i,o,a,l){return t=nv(n,r,!0,t,s,i,o,a,l),t.context=JS(null),n=t.current,r=Xt(),s=Ys(n),i=Jr(r,s),i.callback=e??null,Ks(n,i,s),t.current.lanes=s,zc(t,s,r),fn(t,r),t}function ef(t,e,n,r){var s=e.current,i=Xt(),o=Ys(s);return n=JS(n),e.context===null?e.context=n:e.pendingContext=n,e=Jr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ks(s,e,o),t!==null&&(nr(t,s,o,i),pd(t,s,o)),o}function ih(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function rv(t,e){Hx(t,e),(t=t.alternate)&&Hx(t,e)}function gj(){return null}var eT=typeof reportError=="function"?reportError:function(t){console.error(t)};function sv(t){this._internalRoot=t}tf.prototype.render=sv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));ef(t,e,null,null)};tf.prototype.unmount=sv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){ef(null,t,null,null)}),e[rs]=null}};function tf(t){this._internalRoot=t}tf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Rb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rs.length&&e!==0&&e<Rs[n].priority;n++);Rs.splice(n,0,t),n===0&&Db(t)}};function iv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function nf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Wx(){}function yj(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ih(o);i.call(d)}}var o=ZS(e,r,t,0,null,!1,!1,"",Wx);return t._reactRootContainer=o,t[rs]=o.current,pc(t.nodeType===8?t.parentNode:t),oo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var d=ih(l);a.call(d)}}var l=nv(t,0,!1,null,null,!1,!1,"",Wx);return t._reactRootContainer=l,t[rs]=l.current,pc(t.nodeType===8?t.parentNode:t),oo(function(){ef(e,l,n,r)}),l}function rf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=ih(o);a.call(l)}}ef(e,o,t,s)}else o=yj(n,e,t,s,r);return ih(o)}Ab=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dl(e.pendingLanes);n!==0&&(Sy(e,n|1),fn(e,it()),!(ke&6)&&(Ia=it()+500,Si()))}break;case 13:oo(function(){var r=ss(t,1);if(r!==null){var s=Xt();nr(r,t,1,s)}}),rv(t,1)}};Ty=function(t){if(t.tag===13){var e=ss(t,134217728);if(e!==null){var n=Xt();nr(e,t,134217728,n)}rv(t,134217728)}};kb=function(t){if(t.tag===13){var e=Ys(t),n=ss(t,e);if(n!==null){var r=Xt();nr(n,t,e,r)}rv(t,e)}};Rb=function(){return Oe};Pb=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};jm=function(t,e,n){switch(e){case"input":if(Im(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Gh(r);if(!s)throw Error(Y(90));cb(r),Im(r,s)}}}break;case"textarea":db(t,n);break;case"select":e=n.value,e!=null&&Xo(t,!!n.multiple,e,!1)}};vb=Jy;wb=oo;var vj={usingClientEntryPoint:!1,Events:[$c,Bo,Gh,gb,yb,Jy]},Nl={findFiberByHostInstance:Ui,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wj={bundleType:Nl.bundleType,version:Nl.version,rendererPackageName:Nl.rendererPackageName,rendererConfig:Nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Eb(t),t===null?null:t.stateNode},findFiberByHostInstance:Nl.findFiberByHostInstance||gj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bu.isDisabled&&Bu.supportsFiber)try{Bh=Bu.inject(wj),Ir=Bu}catch{}}In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vj;In.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iv(e))throw Error(Y(200));return mj(t,e,null,n)};In.createRoot=function(t,e){if(!iv(t))throw Error(Y(299));var n=!1,r="",s=eT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=nv(t,1,!1,null,null,n,!1,r,s),t[rs]=e.current,pc(t.nodeType===8?t.parentNode:t),new sv(e)};In.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Eb(e),t=t===null?null:t.stateNode,t};In.flushSync=function(t){return oo(t)};In.hydrate=function(t,e,n){if(!nf(e))throw Error(Y(200));return rf(null,t,e,!0,n)};In.hydrateRoot=function(t,e,n){if(!iv(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=eT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=ZS(e,null,t,1,n??null,s,!1,i,o),t[rs]=e.current,pc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new tf(e)};In.render=function(t,e,n){if(!nf(e))throw Error(Y(200));return rf(null,t,e,!1,n)};In.unmountComponentAtNode=function(t){if(!nf(t))throw Error(Y(40));return t._reactRootContainer?(oo(function(){rf(null,null,t,!1,function(){t._reactRootContainer=null,t[rs]=null})}),!0):!1};In.unstable_batchedUpdates=Jy;In.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!nf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return rf(t,e,n,!1,r)};In.version="18.3.1-next-f1338f8080-20240426";function tT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(tT)}catch(t){console.error(t)}}tT(),tb.exports=In;var Ln=tb.exports;const xj=$E(Ln);var nT,qx=Ln;nT=qx.createRoot,qx.hydrateRoot;function _j(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var rT={exports:{}},sT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Na=p;function Ej(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bj=typeof Object.is=="function"?Object.is:Ej,Sj=Na.useState,Tj=Na.useEffect,Cj=Na.useLayoutEffect,Ij=Na.useDebugValue;function Nj(t,e){var n=e(),r=Sj({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Cj(function(){s.value=n,s.getSnapshot=e,zp(s)&&i({inst:s})},[t,n,e]),Tj(function(){return zp(s)&&i({inst:s}),t(function(){zp(s)&&i({inst:s})})},[t]),Ij(n),n}function zp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bj(t,n)}catch{return!0}}function Aj(t,e){return e()}var kj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Aj:Nj;sT.useSyncExternalStore=Na.useSyncExternalStore!==void 0?Na.useSyncExternalStore:kj;rT.exports=sT;var Rj=rT.exports;const Pj=ZE.useInsertionEffect,Dj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jj=Dj?p.useLayoutEffect:p.useEffect,Oj=Pj||jj,iT=t=>{const e=p.useRef([t,(...n)=>e[0](...n)]).current;return Oj(()=>{e[0]=t}),e[1]},Mj="popstate",ov="pushState",av="replaceState",Lj="hashchange",Gx=[Mj,ov,av,Lj],Vj=t=>{for(const e of Gx)addEventListener(e,t);return()=>{for(const e of Gx)removeEventListener(e,t)}},oT=(t,e)=>Rj.useSyncExternalStore(Vj,t,e),Fj=()=>location.search,zj=({ssrSearch:t=""}={})=>oT(Fj,()=>t),Kx=()=>location.pathname,Uj=({ssrPath:t}={})=>oT(Kx,t?()=>t:Kx),$j=(t,{replace:e=!1,state:n=null}={})=>history[e?av:ov](n,"",t),Bj=(t={})=>[Uj(t),$j],Qx=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Qx]>"u"){for(const t of[ov,av]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Qx,{value:!0})}const Hj=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",aT=(t="")=>t==="/"?"":t,Wj=(t,e)=>t[0]==="~"?t.slice(1):aT(e)+t,qj=(t="",e)=>Hj(Yx(aT(t)),Yx(e)),Yx=t=>{try{return decodeURI(t)}catch{return t}},lT={hook:Bj,searchHook:zj,parser:_j,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},cT=p.createContext(lT),Hc=()=>p.useContext(cT),uT={},dT=p.createContext(uT),Gj=()=>p.useContext(dT),sf=t=>{const[e,n]=t.hook(t);return[qj(t.base,e),iT((r,s)=>n(Wj(r,t.base),s))]},lv=()=>sf(Hc()),hT=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((f,m)=>[f,l[m]])):o.groups;let h={...l};return d&&Object.assign(h,d),h})(),...r?[a]:[]]:[!1,null]},fT=({children:t,...e})=>{var h,f;const n=Hc(),r=e.hook?lT:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=p.useRef({}),l=a.current,d=l;for(let m in r){const y=m==="base"?r[m]+(e[m]||""):e[m]||r[m];l===d&&y!==d[m]&&(a.current=d={...d}),d[m]=y,y!==r[m]&&(s=d)}return p.createElement(cT.Provider,{value:s,children:t})},Xx=({children:t,component:e},n)=>e?p.createElement(e,{params:n}):typeof t=="function"?t(n):t,Kj=t=>{let e=p.useRef(uT),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Es=({path:t,nest:e,match:n,...r})=>{const s=Hc(),[i]=sf(s),[o,a,l]=n??hT(s.parser,t,i,e),d=Kj({...Gj(),...a});if(!o)return null;const h=l?p.createElement(fT,{base:l},Xx(r,d)):Xx(r,d);return p.createElement(dT.Provider,{value:d,children:h})},Aa=p.forwardRef((t,e)=>{const n=Hc(),[r,s]=sf(n),{to:i="",href:o=i,onClick:a,asChild:l,children:d,className:h,replace:f,state:m,...y}=t,b=iT(E=>{E.ctrlKey||E.metaKey||E.altKey||E.shiftKey||E.button!==0||(a==null||a(E),E.defaultPrevented||(E.preventDefault(),s(o,t)))}),v=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return l&&p.isValidElement(d)?p.cloneElement(d,{onClick:b,href:v}):p.createElement("a",{...y,onClick:b,href:v,className:h!=null&&h.call?h(r===o):h,children:d,ref:e})}),pT=t=>Array.isArray(t)?t.flatMap(e=>pT(e&&e.type===p.Fragment?e.props.children:e)):[t],Qj=({children:t,location:e})=>{const n=Hc(),[r]=sf(n);for(const s of pT(t)){let i=0;if(p.isValidElement(s)&&(i=hT(n.parser,s.props.path,e||r,s.props.nest))[0])return p.cloneElement(s,{match:i})}return null};var of=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},af=typeof window>"u"||"Deno"in globalThis;function qn(){}function Yj(t,e){return typeof t=="function"?t(e):t}function Xj(t){return typeof t=="number"&&t>=0&&t!==1/0}function Jj(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Jx(t,e){return typeof t=="function"?t(e):t}function Zj(t,e){return typeof t=="function"?t(e):t}function Zx(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==cv(o,e.options))return!1}else if(!Sc(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function e_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(bc(e.options.mutationKey)!==bc(i))return!1}else if(!Sc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function cv(t,e){return((e==null?void 0:e.queryKeyHashFn)||bc)(t)}function bc(t){return JSON.stringify(t,(e,n)=>fg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Sc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Sc(t[n],e[n])):!1}function mT(t,e){if(t===e)return t;const n=t_(t)&&t_(e);if(n||fg(t)&&fg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,l++):(a[h]=mT(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function t_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function fg(t){if(!n_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!n_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function n_(t){return Object.prototype.toString.call(t)==="[object Object]"}function eO(t){return new Promise(e=>{setTimeout(e,t)})}function tO(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?mT(t,e):e}function nO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function rO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var uv=Symbol();function gT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===uv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var qi,Ms,ha,jE,sO=(jE=class extends of{constructor(){super();De(this,qi);De(this,Ms);De(this,ha);Ee(this,ha,e=>{if(!af&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,Ms)||this.setEventListener(H(this,ha))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,Ms))==null||e.call(this),Ee(this,Ms,void 0))}setEventListener(e){var n;Ee(this,ha,e),(n=H(this,Ms))==null||n.call(this),Ee(this,Ms,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){H(this,qi)!==e&&(Ee(this,qi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof H(this,qi)=="boolean"?H(this,qi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qi=new WeakMap,Ms=new WeakMap,ha=new WeakMap,jE),yT=new sO,fa,Ls,pa,OE,iO=(OE=class extends of{constructor(){super();De(this,fa,!0);De(this,Ls);De(this,pa);Ee(this,pa,e=>{if(!af&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,Ls)||this.setEventListener(H(this,pa))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,Ls))==null||e.call(this),Ee(this,Ls,void 0))}setEventListener(e){var n;Ee(this,pa,e),(n=H(this,Ls))==null||n.call(this),Ee(this,Ls,e(this.setOnline.bind(this)))}setOnline(e){H(this,fa)!==e&&(Ee(this,fa,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return H(this,fa)}},fa=new WeakMap,Ls=new WeakMap,pa=new WeakMap,OE),oh=new iO;function oO(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function aO(t){return Math.min(1e3*2**t,3e4)}function vT(t){return(t??"online")==="online"?oh.isOnline():!0}var wT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Up(t){return t instanceof wT}function xT(t){let e=!1,n=0,r=!1,s;const i=oO(),o=v=>{var E;r||(m(new wT(v)),(E=t.abort)==null||E.call(t))},a=()=>{e=!0},l=()=>{e=!1},d=()=>yT.isFocused()&&(t.networkMode==="always"||oh.isOnline())&&t.canRun(),h=()=>vT(t.networkMode)&&t.canRun(),f=v=>{var E;r||(r=!0,(E=t.onSuccess)==null||E.call(t,v),s==null||s(),i.resolve(v))},m=v=>{var E;r||(r=!0,(E=t.onError)==null||E.call(t,v),s==null||s(),i.reject(v))},y=()=>new Promise(v=>{var E;s=x=>{(r||d())&&v(x)},(E=t.onPause)==null||E.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),b=()=>{if(r)return;let v;const E=n===0?t.initialPromise:void 0;try{v=E??t.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{var D;if(r)return;const w=t.retry??(af?0:3),S=t.retryDelay??aO,k=typeof S=="function"?S(n,x):S,j=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,x);if(e||!j){m(x);return}n++,(D=t.onFail)==null||D.call(t,n,x),eO(k).then(()=>d()?void 0:y()).then(()=>{e?m(x):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?b():y().then(b),i)}}function lO(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Yt=lO(),Gi,ME,_T=(ME=class{constructor(){De(this,Gi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Xj(this.gcTime)&&Ee(this,Gi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(af?1/0:5*60*1e3))}clearGcTimeout(){H(this,Gi)&&(clearTimeout(H(this,Gi)),Ee(this,Gi,void 0))}},Gi=new WeakMap,ME),ma,ga,Rn,Ut,Lc,Ki,Gn,Hr,LE,cO=(LE=class extends _T{constructor(n){super();De(this,Gn);De(this,ma);De(this,ga);De(this,Rn);De(this,Ut);De(this,Lc);De(this,Ki);Ee(this,Ki,!1),Ee(this,Lc,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ee(this,Rn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ee(this,ma,dO(this.options)),this.state=n.state??H(this,ma),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=H(this,Ut))==null?void 0:n.promise}setOptions(n){this.options={...H(this,Lc),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,Rn).remove(this)}setData(n,r){const s=tO(this.state.data,n,this.options);return Lt(this,Gn,Hr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Lt(this,Gn,Hr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=H(this,Ut))==null?void 0:s.promise;return(i=H(this,Ut))==null||i.cancel(n),r?r.then(qn).catch(qn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,ma))}isActive(){return this.observers.some(n=>Zj(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===uv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!Jj(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,Ut))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,Ut))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),H(this,Rn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(H(this,Ut)&&(H(this,Ki)?H(this,Ut).cancel({revert:!0}):H(this,Ut).cancelRetry()),this.scheduleGc()),H(this,Rn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Lt(this,Gn,Hr).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,Ut))return H(this,Ut).continueRetry(),H(this,Ut).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ee(this,Ki,!0),s.signal)})},o=()=>{const m=gT(this.options,r),y={queryKey:this.queryKey,meta:this.meta};return i(y),Ee(this,Ki,!1),this.options.persister?this.options.persister(m,y,this):m(y)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(a),(d=this.options.behavior)==null||d.onFetch(a,this),Ee(this,ga,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&Lt(this,Gn,Hr).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=m=>{var y,b,v,E;Up(m)&&m.silent||Lt(this,Gn,Hr).call(this,{type:"error",error:m}),Up(m)||((b=(y=H(this,Rn).config).onError)==null||b.call(y,m,this),(E=(v=H(this,Rn).config).onSettled)==null||E.call(v,this.state.data,m,this)),this.scheduleGc()};return Ee(this,Ut,xT({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var y,b,v,E;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(x){l(x);return}(b=(y=H(this,Rn).config).onSuccess)==null||b.call(y,m,this),(E=(v=H(this,Rn).config).onSettled)==null||E.call(v,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,y)=>{Lt(this,Gn,Hr).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Lt(this,Gn,Hr).call(this,{type:"pause"})},onContinue:()=>{Lt(this,Gn,Hr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),H(this,Ut).start()}},ma=new WeakMap,ga=new WeakMap,Rn=new WeakMap,Ut=new WeakMap,Lc=new WeakMap,Ki=new WeakMap,Gn=new WeakSet,Hr=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...uO(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return Up(i)&&i.revert&&H(this,ga)?{...H(this,ga),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Yt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),H(this,Rn).notify({query:this,type:"updated",action:n})})},LE);function uO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:vT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function dO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var _r,VE,hO=(VE=class extends of{constructor(e={}){super();De(this,_r);this.config=e,Ee(this,_r,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??cv(s,n);let o=this.get(i);return o||(o=new cO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){H(this,_r).has(e.queryHash)||(H(this,_r).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=H(this,_r).get(e.queryHash);n&&(e.destroy(),n===e&&H(this,_r).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return H(this,_r).get(e)}getAll(){return[...H(this,_r).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Zx(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>Zx(e,r)):n}notify(e){Yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Yt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},_r=new WeakMap,VE),Er,Kt,Qi,br,Cs,FE,fO=(FE=class extends _T{constructor(n){super();De(this,br);De(this,Er);De(this,Kt);De(this,Qi);this.mutationId=n.mutationId,Ee(this,Kt,n.mutationCache),Ee(this,Er,[]),this.state=n.state||pO(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){H(this,Er).includes(n)||(H(this,Er).push(n),this.clearGcTimeout(),H(this,Kt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ee(this,Er,H(this,Er).filter(r=>r!==n)),this.scheduleGc(),H(this,Kt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){H(this,Er).length||(this.state.status==="pending"?this.scheduleGc():H(this,Kt).remove(this))}continue(){var n;return((n=H(this,Qi))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,a,l,d,h,f,m,y,b,v,E,x,w,S,k,j,D,T,C;Ee(this,Qi,xT({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(I,A)=>{Lt(this,br,Cs).call(this,{type:"failed",failureCount:I,error:A})},onPause:()=>{Lt(this,br,Cs).call(this,{type:"pause"})},onContinue:()=>{Lt(this,br,Cs).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,Kt).canRun(this)}));const r=this.state.status==="pending",s=!H(this,Qi).canStart();try{if(!r){Lt(this,br,Cs).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=H(this,Kt).config).onMutate)==null?void 0:o.call(i,n,this));const A=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,n));A!==this.state.context&&Lt(this,br,Cs).call(this,{type:"pending",context:A,variables:n,isPaused:s})}const I=await H(this,Qi).start();return await((h=(d=H(this,Kt).config).onSuccess)==null?void 0:h.call(d,I,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,I,n,this.state.context)),await((b=(y=H(this,Kt).config).onSettled)==null?void 0:b.call(y,I,null,this.state.variables,this.state.context,this)),await((E=(v=this.options).onSettled)==null?void 0:E.call(v,I,null,n,this.state.context)),Lt(this,br,Cs).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(x=H(this,Kt).config).onError)==null?void 0:w.call(x,I,n,this.state.context,this)),await((k=(S=this.options).onError)==null?void 0:k.call(S,I,n,this.state.context)),await((D=(j=H(this,Kt).config).onSettled)==null?void 0:D.call(j,void 0,I,this.state.variables,this.state.context,this)),await((C=(T=this.options).onSettled)==null?void 0:C.call(T,void 0,I,n,this.state.context)),I}finally{Lt(this,br,Cs).call(this,{type:"error",error:I})}}finally{H(this,Kt).runNext(this)}}},Er=new WeakMap,Kt=new WeakMap,Qi=new WeakMap,br=new WeakSet,Cs=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Yt.batch(()=>{H(this,Er).forEach(s=>{s.onMutationUpdate(n)}),H(this,Kt).notify({mutation:this,type:"updated",action:n})})},FE);function pO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yn,Vc,zE,mO=(zE=class extends of{constructor(e={}){super();De(this,yn);De(this,Vc);this.config=e,Ee(this,yn,new Map),Ee(this,Vc,Date.now())}build(e,n,r){const s=new fO({mutationCache:this,mutationId:++Cu(this,Vc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Hu(e),r=H(this,yn).get(n)??[];r.push(e),H(this,yn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Hu(e);if(H(this,yn).has(n)){const s=(r=H(this,yn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?H(this,yn).delete(n):H(this,yn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=H(this,yn).get(Hu(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=H(this,yn).get(Hu(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...H(this,yn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>e_(n,r))}findAll(e={}){return this.getAll().filter(n=>e_(e,n))}notify(e){Yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Yt.batch(()=>Promise.all(e.map(n=>n.continue().catch(qn))))}},yn=new WeakMap,Vc=new WeakMap,zE);function Hu(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function r_(t){return{onFetch:(e,n)=>{var h,f,m,y,b;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const d=async()=>{let v=!1;const E=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=gT(e.options,e.fetchOptions),w=async(S,k,j)=>{if(v)return Promise.reject();if(k==null&&S.pages.length)return Promise.resolve(S);const D={queryKey:e.queryKey,pageParam:k,direction:j?"backward":"forward",meta:e.options.meta};E(D);const T=await x(D),{maxPages:C}=e.options,I=j?rO:nO;return{pages:I(S.pages,T,C),pageParams:I(S.pageParams,k,C)}};if(s&&i.length){const S=s==="backward",k=S?gO:s_,j={pages:i,pageParams:o},D=k(r,j);a=await w(j,D,S)}else{const S=t??i.length;do{const k=l===0?o[0]??r.initialPageParam:s_(r,a);if(l>0&&k==null)break;a=await w(a,k),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var v,E;return(E=(v=e.options).persister)==null?void 0:E.call(v,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function s_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function gO(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var nt,Vs,Fs,ya,va,zs,wa,xa,UE,yO=(UE=class{constructor(t={}){De(this,nt);De(this,Vs);De(this,Fs);De(this,ya);De(this,va);De(this,zs);De(this,wa);De(this,xa);Ee(this,nt,t.queryCache||new hO),Ee(this,Vs,t.mutationCache||new mO),Ee(this,Fs,t.defaultOptions||{}),Ee(this,ya,new Map),Ee(this,va,new Map),Ee(this,zs,0)}mount(){Cu(this,zs)._++,H(this,zs)===1&&(Ee(this,wa,yT.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,nt).onFocus())})),Ee(this,xa,oh.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,nt).onOnline())})))}unmount(){var t,e;Cu(this,zs)._--,H(this,zs)===0&&((t=H(this,wa))==null||t.call(this),Ee(this,wa,void 0),(e=H(this,xa))==null||e.call(this),Ee(this,xa,void 0))}isFetching(t){return H(this,nt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return H(this,Vs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,nt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=H(this,nt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Jx(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return H(this,nt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=H(this,nt).get(r.queryHash),i=s==null?void 0:s.state.data,o=Yj(e,i);if(o!==void 0)return H(this,nt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Yt.batch(()=>H(this,nt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,nt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=H(this,nt);Yt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=H(this,nt),r={type:"active",...t};return Yt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Yt.batch(()=>H(this,nt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(qn).catch(qn)}invalidateQueries(t={},e={}){return Yt.batch(()=>{if(H(this,nt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Yt.batch(()=>H(this,nt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(qn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(qn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=H(this,nt).build(this,e);return n.isStaleByTime(Jx(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(qn).catch(qn)}fetchInfiniteQuery(t){return t.behavior=r_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(qn).catch(qn)}ensureInfiniteQueryData(t){return t.behavior=r_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return oh.isOnline()?H(this,Vs).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,nt)}getMutationCache(){return H(this,Vs)}getDefaultOptions(){return H(this,Fs)}setDefaultOptions(t){Ee(this,Fs,t)}setQueryDefaults(t,e){H(this,ya).set(bc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...H(this,ya).values()];let n={};return e.forEach(r=>{Sc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){H(this,va).set(bc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...H(this,va).values()];let n={};return e.forEach(r=>{Sc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...H(this,Fs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=cv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===uv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...H(this,Fs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){H(this,nt).clear(),H(this,Vs).clear()}},nt=new WeakMap,Vs=new WeakMap,Fs=new WeakMap,ya=new WeakMap,va=new WeakMap,zs=new WeakMap,wa=new WeakMap,xa=new WeakMap,UE),vO=p.createContext(void 0),wO=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(vO.Provider,{value:t,children:e}));async function xO(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const _O=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await xO(n),await n.json())},EO=new yO({defaultOptions:{queries:{queryFn:_O({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),bO=1,SO=1e6;let $p=0;function TO(){return $p=($p+1)%Number.MAX_SAFE_INTEGER,$p.toString()}const Bp=new Map,i_=t=>{if(Bp.has(t))return;const e=setTimeout(()=>{Bp.delete(t),Kl({type:"REMOVE_TOAST",toastId:t})},SO);Bp.set(t,e)},CO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,bO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?i_(n):t.toasts.forEach(r=>{i_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},_d=[];let Ed={toasts:[]};function Kl(t){Ed=CO(Ed,t),_d.forEach(e=>{e(Ed)})}function IO({...t}){const e=TO(),n=s=>Kl({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Kl({type:"DISMISS_TOAST",toastId:e});return Kl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function lf(){const[t,e]=p.useState(Ed);return p.useEffect(()=>(_d.push(e),()=>{const n=_d.indexOf(e);n>-1&&_d.splice(n,1)}),[t]),{...t,toast:IO,dismiss:n=>Kl({type:"DISMISS_TOAST",toastId:n})}}function le(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function o_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ET(...t){return e=>{let n=!1;const r=t.map(s=>{const i=o_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():o_(t[s],null)}}}}function Me(...t){return p.useCallback(ET(...t),t)}function NO(t,e){const n=p.createContext(e),r=i=>{const{children:o,...a}=i,l=p.useMemo(()=>a,Object.values(a));return c.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function dr(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),l=n.length;n=[...n,o];const d=f=>{var x;const{scope:m,children:y,...b}=f,v=((x=m==null?void 0:m[t])==null?void 0:x[l])||a,E=p.useMemo(()=>b,Object.values(b));return c.jsx(v.Provider,{value:E,children:y})};d.displayName=i+"Provider";function h(f,m){var v;const y=((v=m==null?void 0:m[t])==null?void 0:v[l])||a,b=p.useContext(y);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,AO(s,...e)]}function AO(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:d})=>{const f=l(i)[`__scope${d}`];return{...a,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ka(t){const e=RO(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),l=a.find(PO);if(l){const d=l.props.children,h=a.map(f=>f===l?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return c.jsx(e,{...o,ref:s,children:p.isValidElement(d)?p.cloneElement(d,void 0,h):null})}return c.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var kO=ka("Slot");function RO(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const o=jO(s),a=DO(i,s.props);return s.type!==p.Fragment&&(a.ref=r?ET(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var bT=Symbol("radix.slottable");function ST(t){const e=({children:n})=>c.jsx(c.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=bT,e}function PO(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bT}function DO(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function jO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function dv(t){const e=t+"CollectionProvider",[n,r]=dr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:E,children:x}=v,w=be.useRef(null),S=be.useRef(new Map).current;return c.jsx(s,{scope:E,itemMap:S,collectionRef:w,children:x})};o.displayName=e;const a=t+"CollectionSlot",l=ka(a),d=be.forwardRef((v,E)=>{const{scope:x,children:w}=v,S=i(a,x),k=Me(E,S.collectionRef);return c.jsx(l,{ref:k,children:w})});d.displayName=a;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=ka(h),y=be.forwardRef((v,E)=>{const{scope:x,children:w,...S}=v,k=be.useRef(null),j=Me(E,k),D=i(h,x);return be.useEffect(()=>(D.itemMap.set(k,{ref:k,...S}),()=>void D.itemMap.delete(k))),c.jsx(m,{[f]:"",ref:j,children:w})});y.displayName=h;function b(v){const E=i(t+"CollectionConsumer",v);return be.useCallback(()=>{const w=E.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(E.itemMap.values()).sort((D,T)=>S.indexOf(D.ref.current)-S.indexOf(T.ref.current))},[E.collectionRef,E.itemMap])}return[{Provider:o,Slot:d,ItemSlot:y},b,r]}var OO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],pe=OO.reduce((t,e)=>{const n=ka(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function TT(t,e){t&&Ln.flushSync(()=>t.dispatchEvent(e))}function Jt(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function MO(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var LO="DismissableLayer",pg="dismissableLayer.update",VO="dismissableLayer.pointerDownOutside",FO="dismissableLayer.focusOutside",a_,CT=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Wc=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,d=p.useContext(CT),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=p.useState({}),b=Me(e,T=>f(T)),v=Array.from(d.layers),[E]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(E),w=h?v.indexOf(h):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,k=w>=x,j=UO(T=>{const C=T.target,I=[...d.branches].some(A=>A.contains(C));!k||I||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},m),D=$O(T=>{const C=T.target;[...d.branches].some(A=>A.contains(C))||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},m);return MO(T=>{w===d.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},m),p.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(a_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),l_(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=a_)}},[h,m,n,d]),p.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),l_())},[h,d]),p.useEffect(()=>{const T=()=>y({});return document.addEventListener(pg,T),()=>document.removeEventListener(pg,T)},[]),c.jsx(pe.div,{...l,ref:b,style:{pointerEvents:S?k?"auto":"none":void 0,...t.style},onFocusCapture:le(t.onFocusCapture,D.onFocusCapture),onBlurCapture:le(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:le(t.onPointerDownCapture,j.onPointerDownCapture)})});Wc.displayName=LO;var zO="DismissableLayerBranch",IT=p.forwardRef((t,e)=>{const n=p.useContext(CT),r=p.useRef(null),s=Me(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),c.jsx(pe.div,{...t,ref:s})});IT.displayName=zO;function UO(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){NT(VO,n,d,{discrete:!0})};const d={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function $O(t,e=globalThis==null?void 0:globalThis.document){const n=Jt(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&NT(FO,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function l_(){const t=new CustomEvent(pg);document.dispatchEvent(t)}function NT(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?TT(s,i):s.dispatchEvent(i)}var BO=Wc,HO=IT,wt=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},WO="Portal",cf=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=p.useState(!1);wt(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?xj.createPortal(c.jsx(pe.div,{...r,ref:e}),o):null});cf.displayName=WO;function qO(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var wo=t=>{const{present:e,children:n}=t,r=GO(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Me(r.ref,KO(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};wo.displayName="Presence";function GO(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[a,l]=qO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=Wu(r.current);i.current=a==="mounted"?d:"none"},[a]),wt(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,y=Wu(d);t?l("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?l("UNMOUNT"):l(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),wt(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=y=>{const v=Wu(r.current).includes(y.animationName);if(y.target===e&&v&&(l("ANIMATION_END"),!s.current)){const E=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=E)})}},m=y=>{y.target===e&&(i.current=Wu(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function Wu(t){return(t==null?void 0:t.animationName)||"none"}function KO(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function li({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=QO({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Jt(n),l=p.useCallback(d=>{if(i){const f=typeof d=="function"?d(t):d;f!==t&&a(f)}else s(d)},[i,t,s,a]);return[o,l]}function QO({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),i=Jt(e);return p.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var YO="VisuallyHidden",qc=p.forwardRef((t,e)=>c.jsx(pe.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));qc.displayName=YO;var XO=qc,hv="ToastProvider",[fv,JO,ZO]=dv("Toast"),[AT,gH]=dr("Toast",[ZO]),[eM,uf]=AT(hv),kT=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=p.useState(null),[d,h]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${hv}\`. Expected non-empty \`string\`.`),c.jsx(fv.Provider,{scope:e,children:c.jsx(eM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:a,onViewportChange:l,onToastAdd:p.useCallback(()=>h(y=>y+1),[]),onToastRemove:p.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};kT.displayName=hv;var RT="ToastViewport",tM=["F8"],mg="toast.viewportPause",gg="toast.viewportResume",PT=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=tM,label:s="Notifications ({hotkey})",...i}=t,o=uf(RT,n),a=JO(n),l=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=p.useRef(null),m=Me(e,f,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;p.useEffect(()=>{const E=x=>{var S;r.length!==0&&r.every(k=>x[k]||x.code===k)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r]),p.useEffect(()=>{const E=l.current,x=f.current;if(b&&E&&x){const w=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(mg);x.dispatchEvent(D),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(gg);x.dispatchEvent(D),o.isClosePausedRef.current=!1}},k=D=>{!E.contains(D.relatedTarget)&&S()},j=()=>{E.contains(document.activeElement)||S()};return E.addEventListener("focusin",w),E.addEventListener("focusout",k),E.addEventListener("pointermove",w),E.addEventListener("pointerleave",j),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{E.removeEventListener("focusin",w),E.removeEventListener("focusout",k),E.removeEventListener("pointermove",w),E.removeEventListener("pointerleave",j),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[b,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:E})=>{const w=a().map(S=>{const k=S.ref.current,j=[k,...pM(k)];return E==="forwards"?j:j.reverse()});return(E==="forwards"?w.reverse():w).flat()},[a]);return p.useEffect(()=>{const E=f.current;if(E){const x=w=>{var j,D,T;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const C=document.activeElement,I=w.shiftKey;if(w.target===E&&I){(j=d.current)==null||j.focus();return}const O=v({tabbingDirection:I?"backwards":"forwards"}),R=O.findIndex($=>$===C);Hp(O.slice(R+1))?w.preventDefault():I?(D=d.current)==null||D.focus():(T=h.current)==null||T.focus()}};return E.addEventListener("keydown",x),()=>E.removeEventListener("keydown",x)}},[a,v]),c.jsxs(HO,{ref:l,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&c.jsx(yg,{ref:d,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"forwards"});Hp(E)}}),c.jsx(fv.Slot,{scope:n,children:c.jsx(pe.ol,{tabIndex:-1,...i,ref:m})}),b&&c.jsx(yg,{ref:h,onFocusFromOutsideViewport:()=>{const E=v({tabbingDirection:"backwards"});Hp(E)}})]})});PT.displayName=RT;var DT="ToastFocusProxy",yg=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=uf(DT,n);return c.jsx(qc,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const a=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(a))&&r()}})});yg.displayName=DT;var df="Toast",nM="toast.swipeStart",rM="toast.swipeMove",sM="toast.swipeCancel",iM="toast.swipeEnd",jT=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,l]=li({prop:r,defaultProp:s,onChange:i});return c.jsx(wo,{present:n||a,children:c.jsx(lM,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Jt(t.onPause),onResume:Jt(t.onResume),onSwipeStart:le(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:le(t.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:le(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:le(t.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});jT.displayName=df;var[oM,aM]=AT(df,{onClose(){}}),lM=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:y,...b}=t,v=uf(df,n),[E,x]=p.useState(null),w=Me(e,$=>x($)),S=p.useRef(null),k=p.useRef(null),j=s||v.duration,D=p.useRef(0),T=p.useRef(j),C=p.useRef(0),{onToastAdd:I,onToastRemove:A}=v,P=Jt(()=>{var re;(E==null?void 0:E.contains(document.activeElement))&&((re=v.viewport)==null||re.focus()),o()}),O=p.useCallback($=>{!$||$===1/0||(window.clearTimeout(C.current),D.current=new Date().getTime(),C.current=window.setTimeout(P,$))},[P]);p.useEffect(()=>{const $=v.viewport;if($){const re=()=>{O(T.current),d==null||d()},z=()=>{const K=new Date().getTime()-D.current;T.current=T.current-K,window.clearTimeout(C.current),l==null||l()};return $.addEventListener(mg,z),$.addEventListener(gg,re),()=>{$.removeEventListener(mg,z),$.removeEventListener(gg,re)}}},[v.viewport,j,l,d,O]),p.useEffect(()=>{i&&!v.isClosePausedRef.current&&O(j)},[i,j,v.isClosePausedRef,O]),p.useEffect(()=>(I(),()=>A()),[I,A]);const R=p.useMemo(()=>E?UT(E):null,[E]);return v.viewport?c.jsxs(c.Fragment,{children:[R&&c.jsx(cM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),c.jsx(oM,{scope:n,onClose:P,children:Ln.createPortal(c.jsx(fv.ItemSlot,{scope:n,children:c.jsx(BO,{asChild:!0,onEscapeKeyDown:le(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||P(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(pe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...b,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:le(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:le(t.onPointerDown,$=>{$.button===0&&(S.current={x:$.clientX,y:$.clientY})}),onPointerMove:le(t.onPointerMove,$=>{if(!S.current)return;const re=$.clientX-S.current.x,z=$.clientY-S.current.y,K=!!k.current,M=["left","right"].includes(v.swipeDirection),L=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,U=M?L(0,re):0,Q=M?0:L(0,z),q=$.pointerType==="touch"?10:2,se={x:U,y:Q},ee={originalEvent:$,delta:se};K?(k.current=se,qu(rM,f,ee,{discrete:!1})):c_(se,v.swipeDirection,q)?(k.current=se,qu(nM,h,ee,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(re)>q||Math.abs(z)>q)&&(S.current=null)}),onPointerUp:le(t.onPointerUp,$=>{const re=k.current,z=$.target;if(z.hasPointerCapture($.pointerId)&&z.releasePointerCapture($.pointerId),k.current=null,S.current=null,re){const K=$.currentTarget,M={originalEvent:$,delta:re};c_(re,v.swipeDirection,v.swipeThreshold)?qu(iM,y,M,{discrete:!0}):qu(sM,m,M,{discrete:!0}),K.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),cM=t=>{const{__scopeToast:e,children:n,...r}=t,s=uf(df,e),[i,o]=p.useState(!1),[a,l]=p.useState(!1);return hM(()=>o(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(d)},[]),a?null:c.jsx(cf,{asChild:!0,children:c.jsx(qc,{...r,children:i&&c.jsxs(c.Fragment,{children:[s.label," ",n]})})})},uM="ToastTitle",OT=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(pe.div,{...r,ref:e})});OT.displayName=uM;var dM="ToastDescription",MT=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(pe.div,{...r,ref:e})});MT.displayName=dM;var LT="ToastAction",VT=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?c.jsx(zT,{altText:n,asChild:!0,children:c.jsx(pv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${LT}\`. Expected non-empty \`string\`.`),null)});VT.displayName=LT;var FT="ToastClose",pv=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=aM(FT,n);return c.jsx(zT,{asChild:!0,children:c.jsx(pe.button,{type:"button",...r,ref:e,onClick:le(t.onClick,s.onClose)})})});pv.displayName=FT;var zT=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return c.jsx(pe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function UT(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),fM(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...UT(r))}}),e}function qu(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?TT(s,i):s.dispatchEvent(i)}var c_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function hM(t=()=>{}){const e=Jt(t);wt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function fM(t){return t.nodeType===t.ELEMENT_NODE}function pM(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Hp(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var mM=kT,$T=PT,BT=jT,HT=OT,WT=MT,qT=VT,GT=pv;function KT(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=KT(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function QT(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=KT(t))&&(r&&(r+=" "),r+=e);return r}const u_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,d_=QT,Gc=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return d_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const m=u_(h)||u_(f);return s[d][m]}),a=n&&Object.entries(n).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:m,...y}=h;return Object.entries(y).every(b=>{let[v,E]=b;return Array.isArray(E)?E.includes({...i,...a}[v]):{...i,...a}[v]===E})?[...d,f,m]:d},[]);return d_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),YT=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vM=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>p.createElement("svg",{ref:l,...yM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:YT("lucide",s),...a},[...o.map(([d,h])=>p.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(t,e)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(vM,{ref:i,iconNode:e,className:YT(`lucide-${gM(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=me("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=me("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=me("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=me("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ci=me("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=me("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=me("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vg=me("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=me("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=me("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=me("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=me("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=me("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=me("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=me("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=me("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=me("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=me("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=me("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=me("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xg=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=me("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=me("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=me("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=me("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=me("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=me("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=me("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=me("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=me("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gv="-",FM=t=>{const e=UM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(gv);return a[0]===""&&a.length!==1&&a.shift(),iC(a,e)||zM(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},iC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?iC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(gv);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},y_=/^\[(.+)\]$/,zM=t=>{if(y_.test(t)){const e=y_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},UM=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return BM(Object.entries(t.classGroups),n).forEach(([i,o])=>{_g(o,r,i,e)}),r},_g=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:v_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if($M(s)){_g(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{_g(o,v_(e,i),n,r)})})},v_=(t,e)=>{let n=t;return e.split(gv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},$M=t=>t.isThemeGetter,BM=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,HM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},oC="!",WM=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let d=0,h=0,f;for(let E=0;E<a.length;E++){let x=a[E];if(d===0){if(x===s&&(r||a.slice(E,E+i)===e)){l.push(a.slice(h,E)),h=E+i;continue}if(x==="/"){f=E;continue}}x==="["?d++:x==="]"&&d--}const m=l.length===0?a:a.substring(h),y=m.startsWith(oC),b=y?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},qM=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},GM=t=>({cache:HM(t.cacheSize),parseClassName:WM(t),...FM(t)}),KM=/\s+/,QM=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(KM);let a="";for(let l=o.length-1;l>=0;l-=1){const d=o[l],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=n(d);let b=!!y,v=r(b?m.substring(0,y):m);if(!v){if(!b){a=d+(a.length>0?" "+a:a);continue}if(v=r(m),!v){a=d+(a.length>0?" "+a:a);continue}b=!1}const E=qM(h).join(":"),x=f?E+oC:E,w=x+v;if(i.includes(w))continue;i.push(w);const S=s(v,b);for(let k=0;k<S.length;++k){const j=S[k];i.push(x+j)}a=d+(a.length>0?" "+a:a)}return a};function YM(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=aC(e))&&(r&&(r+=" "),r+=n);return r}const aC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=aC(t[r]))&&(n&&(n+=" "),n+=e);return n};function XM(t,...e){let n,r,s,i=o;function o(l){const d=e.reduce((h,f)=>f(h),t());return n=GM(d),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const d=r(l);if(d)return d;const h=QM(l,n);return s(l,h),h}return function(){return i(YM.apply(null,arguments))}}const $e=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},lC=/^\[(?:([a-z-]+):)?(.+)\]$/i,JM=/^\d+\/\d+$/,ZM=new Set(["px","full","screen"]),e4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,t4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,n4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,r4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,s4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Br=t=>ra(t)||ZM.has(t)||JM.test(t),bs=t=>Ga(t,"length",h4),ra=t=>!!t&&!Number.isNaN(Number(t)),Wp=t=>Ga(t,"number",ra),Al=t=>!!t&&Number.isInteger(Number(t)),i4=t=>t.endsWith("%")&&ra(t.slice(0,-1)),xe=t=>lC.test(t),Ss=t=>e4.test(t),o4=new Set(["length","size","percentage"]),a4=t=>Ga(t,o4,cC),l4=t=>Ga(t,"position",cC),c4=new Set(["image","url"]),u4=t=>Ga(t,c4,p4),d4=t=>Ga(t,"",f4),kl=()=>!0,Ga=(t,e,n)=>{const r=lC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},h4=t=>t4.test(t)&&!n4.test(t),cC=()=>!1,f4=t=>r4.test(t),p4=t=>s4.test(t),m4=()=>{const t=$e("colors"),e=$e("spacing"),n=$e("blur"),r=$e("brightness"),s=$e("borderColor"),i=$e("borderRadius"),o=$e("borderSpacing"),a=$e("borderWidth"),l=$e("contrast"),d=$e("grayscale"),h=$e("hueRotate"),f=$e("invert"),m=$e("gap"),y=$e("gradientColorStops"),b=$e("gradientColorStopPositions"),v=$e("inset"),E=$e("margin"),x=$e("opacity"),w=$e("padding"),S=$e("saturate"),k=$e("scale"),j=$e("sepia"),D=$e("skew"),T=$e("space"),C=$e("translate"),I=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",xe,e],O=()=>[xe,e],R=()=>["",Br,bs],$=()=>["auto",ra,xe],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",xe],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[ra,xe];return{cacheSize:500,separator:":",theme:{colors:[kl],spacing:[Br,bs],blur:["none","",Ss,xe],brightness:Q(),borderColor:[t],borderRadius:["none","","full",Ss,xe],borderSpacing:O(),borderWidth:R(),contrast:Q(),grayscale:L(),hueRotate:Q(),invert:L(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[i4,bs],inset:P(),margin:P(),opacity:Q(),padding:O(),saturate:Q(),scale:Q(),sepia:L(),skew:Q(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[Ss]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),xe]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Al,xe]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Al,xe]}],"grid-cols":[{"grid-cols":[kl]}],"col-start-end":[{col:["auto",{span:["full",Al,xe]},xe]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[kl]}],"row-start-end":[{row:["auto",{span:[Al,xe]},xe]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[E]}],mx:[{mx:[E]}],my:[{my:[E]}],ms:[{ms:[E]}],me:[{me:[E]}],mt:[{mt:[E]}],mr:[{mr:[E]}],mb:[{mb:[E]}],ml:[{ml:[E]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,e]}],"min-w":[{"min-w":[xe,e,"min","max","fit"]}],"max-w":[{"max-w":[xe,e,"none","full","min","max","fit","prose",{screen:[Ss]},Ss]}],h:[{h:[xe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ss,bs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wp]}],"font-family":[{font:[kl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",ra,Wp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Br,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Br,bs]}],"underline-offset":[{"underline-offset":["auto",Br,xe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),l4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},u4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Br,xe]}],"outline-w":[{outline:[Br,bs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Br,bs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ss,d4]}],"shadow-color":[{shadow:[kl]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Ss,xe]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Al,xe]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Br,bs,Wp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},g4=XM(m4);function X(...t){return g4(QT(t))}const y4=mM,uC=p.forwardRef(({className:t,...e},n)=>c.jsx($T,{ref:n,className:X("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));uC.displayName=$T.displayName;const v4=Gc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),dC=p.forwardRef(({className:t,variant:e,...n},r)=>c.jsx(BT,{ref:r,className:X(v4({variant:e}),t),...n}));dC.displayName=BT.displayName;const w4=p.forwardRef(({className:t,...e},n)=>c.jsx(qT,{ref:n,className:X("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));w4.displayName=qT.displayName;const hC=p.forwardRef(({className:t,...e},n)=>c.jsx(GT,{ref:n,className:X("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:c.jsx(pf,{className:"h-4 w-4"})}));hC.displayName=GT.displayName;const fC=p.forwardRef(({className:t,...e},n)=>c.jsx(HT,{ref:n,className:X("text-sm font-semibold",t),...e}));fC.displayName=HT.displayName;const pC=p.forwardRef(({className:t,...e},n)=>c.jsx(WT,{ref:n,className:X("text-sm opacity-90",t),...e}));pC.displayName=WT.displayName;function x4(){const{toasts:t}=lf();return c.jsxs(y4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return c.jsxs(dC,{...i,children:[c.jsxs("div",{className:"grid gap-1",children:[n&&c.jsx(fC,{children:n}),r&&c.jsx(pC,{children:r})]}),s,c.jsx(hC,{})]},e)}),c.jsx(uC,{})]})}var _4=ZE[" useId ".trim().toString()]||(()=>{}),E4=0;function Zr(t){const[e,n]=p.useState(_4());return wt(()=>{n(r=>r??String(E4++))},[t]),e?`radix-${e}`:""}const b4=["top","right","bottom","left"],hi=Math.min,wn=Math.max,ah=Math.round,Gu=Math.floor,Ar=t=>({x:t,y:t}),S4={left:"right",right:"left",bottom:"top",top:"bottom"},T4={start:"end",end:"start"};function Eg(t,e,n){return wn(t,hi(e,n))}function os(t,e){return typeof t=="function"?t(e):t}function as(t){return t.split("-")[0]}function Ka(t){return t.split("-")[1]}function yv(t){return t==="x"?"y":"x"}function vv(t){return t==="y"?"height":"width"}function fi(t){return["top","bottom"].includes(as(t))?"y":"x"}function wv(t){return yv(fi(t))}function C4(t,e,n){n===void 0&&(n=!1);const r=Ka(t),s=wv(t),i=vv(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=lh(o)),[o,lh(o)]}function I4(t){const e=lh(t);return[bg(t),e,bg(e)]}function bg(t){return t.replace(/start|end/g,e=>T4[e])}function N4(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function A4(t,e,n,r){const s=Ka(t);let i=N4(as(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(bg)))),i}function lh(t){return t.replace(/left|right|bottom|top/g,e=>S4[e])}function k4(t){return{top:0,right:0,bottom:0,left:0,...t}}function mC(t){return typeof t!="number"?k4(t):{top:t,right:t,bottom:t,left:t}}function ch(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function w_(t,e,n){let{reference:r,floating:s}=t;const i=fi(e),o=wv(e),a=vv(o),l=as(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let y;switch(l){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Ka(e)){case"start":y[o]-=m*(n&&d?-1:1);break;case"end":y[o]+=m*(n&&d?-1:1);break}return y}const R4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=w_(d,r,l),m=r,y={},b=0;for(let v=0;v<a.length;v++){const{name:E,fn:x}=a[v],{x:w,y:S,data:k,reset:j}=await x({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:d,platform:o,elements:{reference:t,floating:e}});h=w??h,f=S??f,y={...y,[E]:{...y[E],...k}},j&&b<=50&&(b++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(d=j.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):j.rects),{x:h,y:f}=w_(d,m,l)),v=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:y}};async function Tc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:y=0}=os(e,t),b=mC(y),E=a[m?f==="floating"?"reference":"floating":f],x=ch(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:d,rootBoundary:h,strategy:l})),w=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},j=ch(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(x.top-j.top+b.top)/k.y,bottom:(j.bottom-x.bottom+b.bottom)/k.y,left:(x.left-j.left+b.left)/k.x,right:(j.right-x.right+b.right)/k.x}}const P4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:d,padding:h=0}=os(t,e)||{};if(d==null)return{};const f=mC(h),m={x:n,y:r},y=wv(s),b=vv(y),v=await o.getDimensions(d),E=y==="y",x=E?"top":"left",w=E?"bottom":"right",S=E?"clientHeight":"clientWidth",k=i.reference[b]+i.reference[y]-m[y]-i.floating[b],j=m[y]-i.reference[y],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let T=D?D[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(D)))&&(T=a.floating[S]||i.floating[b]);const C=k/2-j/2,I=T/2-v[b]/2-1,A=hi(f[x],I),P=hi(f[w],I),O=A,R=T-v[b]-P,$=T/2-v[b]/2+C,re=Eg(O,$,R),z=!l.arrow&&Ka(s)!=null&&$!==re&&i.reference[b]/2-($<O?A:P)-v[b]/2<0,K=z?$<O?$-O:$-R:0;return{[y]:m[y]+K,data:{[y]:re,centerOffset:$-re-K,...z&&{alignmentOffset:K}},reset:z}}}),D4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,...E}=os(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=as(s),w=fi(a),S=as(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(d.floating)),j=m||(S||!v?[lh(a)]:I4(a)),D=b!=="none";!m&&D&&j.push(...A4(a,v,b,k));const T=[a,...j],C=await Tc(e,E),I=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&I.push(C[x]),f){const $=C4(s,o,k);I.push(C[$[0]],C[$[1]])}if(A=[...A,{placement:s,overflows:I}],!I.every($=>$<=0)){var P,O;const $=(((P=i.flip)==null?void 0:P.index)||0)+1,re=T[$];if(re)return{data:{index:$,overflows:A},reset:{placement:re}};let z=(O=A.filter(K=>K.overflows[0]<=0).sort((K,M)=>K.overflows[1]-M.overflows[1])[0])==null?void 0:O.placement;if(!z)switch(y){case"bestFit":{var R;const K=(R=A.filter(M=>{if(D){const L=fi(M.placement);return L===w||L==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(L=>L>0).reduce((L,U)=>L+U,0)]).sort((M,L)=>M[1]-L[1])[0])==null?void 0:R[0];K&&(z=K);break}case"initialPlacement":z=a;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function x_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function __(t){return b4.some(e=>t[e]>=0)}const j4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=os(t,e);switch(r){case"referenceHidden":{const i=await Tc(e,{...s,elementContext:"reference"}),o=x_(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:__(o)}}}case"escaped":{const i=await Tc(e,{...s,altBoundary:!0}),o=x_(i,n.floating);return{data:{escapedOffsets:o,escaped:__(o)}}}default:return{}}}}};async function O4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=as(n),a=Ka(n),l=fi(n)==="y",d=["left","top"].includes(o)?-1:1,h=i&&l?-1:1,f=os(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof b=="number"&&(y=a==="end"?b*-1:b),l?{x:y*h,y:m*d}:{x:m*d,y:y*h}}const M4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await O4(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},L4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x,y:w}=E;return{x,y:w}}},...l}=os(t,e),d={x:n,y:r},h=await Tc(e,l),f=fi(as(s)),m=yv(f);let y=d[m],b=d[f];if(i){const E=m==="y"?"top":"left",x=m==="y"?"bottom":"right",w=y+h[E],S=y-h[x];y=Eg(w,y,S)}if(o){const E=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=b+h[E],S=b-h[x];b=Eg(w,b,S)}const v=a.fn({...e,[m]:y,[f]:b});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[f]:o}}}}}},V4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:d=!0}=os(t,e),h={x:n,y:r},f=fi(s),m=yv(f);let y=h[m],b=h[f];const v=os(a,e),E=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const S=m==="y"?"height":"width",k=i.reference[m]-i.floating[S]+E.mainAxis,j=i.reference[m]+i.reference[S]-E.mainAxis;y<k?y=k:y>j&&(y=j)}if(d){var x,w;const S=m==="y"?"width":"height",k=["top","left"].includes(as(s)),j=i.reference[f]-i.floating[S]+(k&&((x=o.offset)==null?void 0:x[f])||0)+(k?0:E.crossAxis),D=i.reference[f]+i.reference[S]+(k?0:((w=o.offset)==null?void 0:w[f])||0)-(k?E.crossAxis:0);b<j?b=j:b>D&&(b=D)}return{[m]:y,[f]:b}}}},F4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...d}=os(t,e),h=await Tc(e,d),f=as(s),m=Ka(s),y=fi(s)==="y",{width:b,height:v}=i.floating;let E,x;f==="top"||f==="bottom"?(E=f,x=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(x=f,E=m==="end"?"top":"bottom");const w=v-h.top-h.bottom,S=b-h.left-h.right,k=hi(v-h[E],w),j=hi(b-h[x],S),D=!e.middlewareData.shift;let T=k,C=j;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=w),D&&!m){const A=wn(h.left,0),P=wn(h.right,0),O=wn(h.top,0),R=wn(h.bottom,0);y?C=b-2*(A!==0||P!==0?A+P:wn(h.left,h.right)):T=v-2*(O!==0||R!==0?O+R:wn(h.top,h.bottom))}await l({...e,availableWidth:C,availableHeight:T});const I=await o.getDimensions(a.floating);return b!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function mf(){return typeof window<"u"}function Qa(t){return gC(t)?(t.nodeName||"").toLowerCase():"#document"}function Sn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Vr(t){var e;return(e=(gC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function gC(t){return mf()?t instanceof Node||t instanceof Sn(t).Node:!1}function ar(t){return mf()?t instanceof Element||t instanceof Sn(t).Element:!1}function jr(t){return mf()?t instanceof HTMLElement||t instanceof Sn(t).HTMLElement:!1}function E_(t){return!mf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Sn(t).ShadowRoot}function Kc(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=lr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function z4(t){return["table","td","th"].includes(Qa(t))}function gf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function xv(t){const e=_v(),n=ar(t)?lr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function U4(t){let e=pi(t);for(;jr(e)&&!Pa(e);){if(xv(e))return e;if(gf(e))return null;e=pi(e)}return null}function _v(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Pa(t){return["html","body","#document"].includes(Qa(t))}function lr(t){return Sn(t).getComputedStyle(t)}function yf(t){return ar(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function pi(t){if(Qa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||E_(t)&&t.host||Vr(t);return E_(e)?e.host:e}function yC(t){const e=pi(t);return Pa(e)?t.ownerDocument?t.ownerDocument.body:t.body:jr(e)&&Kc(e)?e:yC(e)}function Cc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=yC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=Sn(s);if(i){const a=Sg(o);return e.concat(o,o.visualViewport||[],Kc(s)?s:[],a&&n?Cc(a):[])}return e.concat(s,Cc(s,[],n))}function Sg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function vC(t){const e=lr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=jr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=ah(n)!==i||ah(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Ev(t){return ar(t)?t:t.contextElement}function sa(t){const e=Ev(t);if(!jr(e))return Ar(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=vC(e);let o=(i?ah(n.width):n.width)/r,a=(i?ah(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const $4=Ar(0);function wC(t){const e=Sn(t);return!_v()||!e.visualViewport?$4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function B4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Sn(t)?!1:e}function ao(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Ev(t);let o=Ar(1);e&&(r?ar(r)&&(o=sa(r)):o=sa(t));const a=B4(i,n,r)?wC(i):Ar(0);let l=(s.left+a.x)/o.x,d=(s.top+a.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=Sn(i),y=r&&ar(r)?Sn(r):r;let b=m,v=Sg(b);for(;v&&r&&y!==b;){const E=sa(v),x=v.getBoundingClientRect(),w=lr(v),S=x.left+(v.clientLeft+parseFloat(w.paddingLeft))*E.x,k=x.top+(v.clientTop+parseFloat(w.paddingTop))*E.y;l*=E.x,d*=E.y,h*=E.x,f*=E.y,l+=S,d+=k,b=Sn(v),v=Sg(b)}}return ch({width:h,height:f,x:l,y:d})}function bv(t,e){const n=yf(t).scrollLeft;return e?e.left+n:ao(Vr(t)).left+n}function xC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:bv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function H4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Vr(r),a=e?gf(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},d=Ar(1);const h=Ar(0),f=jr(r);if((f||!f&&!i)&&((Qa(r)!=="body"||Kc(o))&&(l=yf(r)),jr(r))){const y=ao(r);d=sa(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const m=o&&!f&&!i?xC(o,l,!0):Ar(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-l.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-l.scrollTop*d.y+h.y+m.y}}function W4(t){return Array.from(t.getClientRects())}function q4(t){const e=Vr(t),n=yf(t),r=t.ownerDocument.body,s=wn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=wn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+bv(t);const a=-n.scrollTop;return lr(r).direction==="rtl"&&(o+=wn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function G4(t,e){const n=Sn(t),r=Vr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const d=_v();(!d||d&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function K4(t,e){const n=ao(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=jr(t)?sa(t):Ar(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,d=r*i.y;return{width:o,height:a,x:l,y:d}}function b_(t,e,n){let r;if(e==="viewport")r=G4(t,n);else if(e==="document")r=q4(Vr(t));else if(ar(e))r=K4(e,n);else{const s=wC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return ch(r)}function _C(t,e){const n=pi(t);return n===e||!ar(n)||Pa(n)?!1:lr(n).position==="fixed"||_C(n,e)}function Q4(t,e){const n=e.get(t);if(n)return n;let r=Cc(t,[],!1).filter(a=>ar(a)&&Qa(a)!=="body"),s=null;const i=lr(t).position==="fixed";let o=i?pi(t):t;for(;ar(o)&&!Pa(o);){const a=lr(o),l=xv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Kc(o)&&!l&&_C(t,o))?r=r.filter(h=>h!==o):s=a,o=pi(o)}return e.set(t,r),r}function Y4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?gf(e)?[]:Q4(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((d,h)=>{const f=b_(e,h,s);return d.top=wn(f.top,d.top),d.right=hi(f.right,d.right),d.bottom=hi(f.bottom,d.bottom),d.left=wn(f.left,d.left),d},b_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function X4(t){const{width:e,height:n}=vC(t);return{width:e,height:n}}function J4(t,e,n){const r=jr(e),s=Vr(e),i=n==="fixed",o=ao(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=Ar(0);if(r||!r&&!i)if((Qa(e)!=="body"||Kc(s))&&(a=yf(e)),r){const m=ao(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&(l.x=bv(s));const d=s&&!r&&!i?xC(s,a):Ar(0),h=o.left+a.scrollLeft-l.x-d.x,f=o.top+a.scrollTop-l.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function qp(t){return lr(t).position==="static"}function S_(t,e){if(!jr(t)||lr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Vr(t)===n&&(n=n.ownerDocument.body),n}function EC(t,e){const n=Sn(t);if(gf(t))return n;if(!jr(t)){let s=pi(t);for(;s&&!Pa(s);){if(ar(s)&&!qp(s))return s;s=pi(s)}return n}let r=S_(t,e);for(;r&&z4(r)&&qp(r);)r=S_(r,e);return r&&Pa(r)&&qp(r)&&!xv(r)?n:r||U4(t)||n}const Z4=async function(t){const e=this.getOffsetParent||EC,n=this.getDimensions,r=await n(t.floating);return{reference:J4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eL(t){return lr(t).direction==="rtl"}const tL={convertOffsetParentRelativeRectToViewportRelativeRect:H4,getDocumentElement:Vr,getClippingRect:Y4,getOffsetParent:EC,getElementRects:Z4,getClientRects:W4,getDimensions:X4,getScale:sa,isElement:ar,isRTL:eL};function bC(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nL(t,e){let n=null,r;const s=Vr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:m,height:y}=d;if(a||e(),!m||!y)return;const b=Gu(f),v=Gu(s.clientWidth-(h+m)),E=Gu(s.clientHeight-(f+y)),x=Gu(h),S={rootMargin:-b+"px "+-v+"px "+-E+"px "+-x+"px",threshold:wn(0,hi(1,l))||1};let k=!0;function j(D){const T=D[0].intersectionRatio;if(T!==l){if(!k)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!bC(d,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(j,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(j,S)}n.observe(t)}return o(!0),i}function rL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,d=Ev(t),h=s||i?[...d?Cc(d):[],...Cc(e)]:[];h.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const f=d&&a?nL(d,n):null;let m=-1,y=null;o&&(y=new ResizeObserver(x=>{let[w]=x;w&&w.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=y)==null||S.observe(e)})),n()}),d&&!l&&y.observe(d),y.observe(e));let b,v=l?ao(t):null;l&&E();function E(){const x=ao(t);v&&!bC(v,x)&&n(),v=x,b=requestAnimationFrame(E)}return n(),()=>{var x;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(x=y)==null||x.disconnect(),y=null,l&&cancelAnimationFrame(b)}}const sL=M4,iL=L4,oL=D4,aL=F4,lL=j4,T_=P4,cL=V4,uL=(t,e,n)=>{const r=new Map,s={platform:tL,...n},i={...s.platform,_c:r};return R4(t,e,{...s,platform:i})};var bd=typeof document<"u"?p.useLayoutEffect:p.useEffect;function uh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!uh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!uh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function SC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function C_(t,e){const n=SC(t);return Math.round(e*n)/n}function Gp(t){const e=p.useRef(t);return bd(()=>{e.current=t}),e}function dL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:d}=t,[h,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=p.useState(r);uh(m,r)||y(r);const[b,v]=p.useState(null),[E,x]=p.useState(null),w=p.useCallback(M=>{M!==D.current&&(D.current=M,v(M))},[]),S=p.useCallback(M=>{M!==T.current&&(T.current=M,x(M))},[]),k=i||b,j=o||E,D=p.useRef(null),T=p.useRef(null),C=p.useRef(h),I=l!=null,A=Gp(l),P=Gp(s),O=Gp(d),R=p.useCallback(()=>{if(!D.current||!T.current)return;const M={placement:e,strategy:n,middleware:m};P.current&&(M.platform=P.current),uL(D.current,T.current,M).then(L=>{const U={...L,isPositioned:O.current!==!1};$.current&&!uh(C.current,U)&&(C.current=U,Ln.flushSync(()=>{f(U)}))})},[m,e,n,P,O]);bd(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[d]);const $=p.useRef(!1);bd(()=>($.current=!0,()=>{$.current=!1}),[]),bd(()=>{if(k&&(D.current=k),j&&(T.current=j),k&&j){if(A.current)return A.current(k,j,R);R()}},[k,j,R,A,I]);const re=p.useMemo(()=>({reference:D,floating:T,setReference:w,setFloating:S}),[w,S]),z=p.useMemo(()=>({reference:k,floating:j}),[k,j]),K=p.useMemo(()=>{const M={position:n,left:0,top:0};if(!z.floating)return M;const L=C_(z.floating,h.x),U=C_(z.floating,h.y);return a?{...M,transform:"translate("+L+"px, "+U+"px)",...SC(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:U}},[n,a,z.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:R,refs:re,elements:z,floatingStyles:K}),[h,R,re,z,K])}const hL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?T_({element:r.current,padding:s}).fn(n):{}:r?T_({element:r,padding:s}).fn(n):{}}}},fL=(t,e)=>({...sL(t),options:[t,e]}),pL=(t,e)=>({...iL(t),options:[t,e]}),mL=(t,e)=>({...cL(t),options:[t,e]}),gL=(t,e)=>({...oL(t),options:[t,e]}),yL=(t,e)=>({...aL(t),options:[t,e]}),vL=(t,e)=>({...lL(t),options:[t,e]}),wL=(t,e)=>({...hL(t),options:[t,e]});var xL="Arrow",TC=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return c.jsx(pe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});TC.displayName=xL;var _L=TC;function CC(t){const[e,n]=p.useState(void 0);return wt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,d=Array.isArray(l)?l[0]:l;o=d.inlineSize,a=d.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Sv="Popper",[IC,vf]=dr(Sv),[EL,NC]=IC(Sv),AC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return c.jsx(EL,{scope:e,anchor:r,onAnchorChange:s,children:n})};AC.displayName=Sv;var kC="PopperAnchor",RC=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=NC(kC,n),o=p.useRef(null),a=Me(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:c.jsx(pe.div,{...s,ref:a})});RC.displayName=kC;var Tv="PopperContent",[bL,SL]=IC(Tv),PC=p.forwardRef((t,e)=>{var W,ie,ve,ne,ge,we;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:b,...v}=t,E=NC(Tv,n),[x,w]=p.useState(null),S=Me(e,qe=>w(qe)),[k,j]=p.useState(null),D=CC(k),T=(D==null?void 0:D.width)??0,C=(D==null?void 0:D.height)??0,I=r+(i!=="center"?"-"+i:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},P=Array.isArray(d)?d:[d],O=P.length>0,R={padding:A,boundary:P.filter(CL),altBoundary:O},{refs:$,floatingStyles:re,placement:z,isPositioned:K,middlewareData:M}=dL({strategy:"fixed",placement:I,whileElementsMounted:(...qe)=>rL(...qe,{animationFrame:y==="always"}),elements:{reference:E.anchor},middleware:[fL({mainAxis:s+C,alignmentAxis:o}),l&&pL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?mL():void 0,...R}),l&&gL({...R}),yL({...R,apply:({elements:qe,rects:Qe,availableWidth:nn,availableHeight:Ot})=>{const{width:An,height:Ii}=Qe.reference,ze=qe.floating.style;ze.setProperty("--radix-popper-available-width",`${nn}px`),ze.setProperty("--radix-popper-available-height",`${Ot}px`),ze.setProperty("--radix-popper-anchor-width",`${An}px`),ze.setProperty("--radix-popper-anchor-height",`${Ii}px`)}}),k&&wL({element:k,padding:a}),IL({arrowWidth:T,arrowHeight:C}),m&&vL({strategy:"referenceHidden",...R})]}),[L,U]=OC(z),Q=Jt(b);wt(()=>{K&&(Q==null||Q())},[K,Q]);const q=(W=M.arrow)==null?void 0:W.x,se=(ie=M.arrow)==null?void 0:ie.y,ee=((ve=M.arrow)==null?void 0:ve.centerOffset)!==0,[de,ce]=p.useState();return wt(()=>{x&&ce(window.getComputedStyle(x).zIndex)},[x]),c.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:K?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(ne=M.transformOrigin)==null?void 0:ne.x,(ge=M.transformOrigin)==null?void 0:ge.y].join(" "),...((we=M.hide)==null?void 0:we.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(bL,{scope:n,placedSide:L,onArrowChange:j,arrowX:q,arrowY:se,shouldHideArrow:ee,children:c.jsx(pe.div,{"data-side":L,"data-align":U,...v,ref:S,style:{...v.style,animation:K?void 0:"none"}})})})});PC.displayName=Tv;var DC="PopperArrow",TL={top:"bottom",right:"left",bottom:"top",left:"right"},jC=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=SL(DC,r),o=TL[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(_L,{...s,ref:n,style:{...s.style,display:"block"}})})});jC.displayName=DC;function CL(t){return t!==null}var IL=t=>({name:"transformOrigin",options:t,fn(e){var E,x,w;const{placement:n,rects:r,middlewareData:s}=e,o=((E=s.arrow)==null?void 0:E.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[d,h]=OC(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((x=s.arrow)==null?void 0:x.x)??0)+a/2,y=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let b="",v="";return d==="bottom"?(b=o?f:`${m}px`,v=`${-l}px`):d==="top"?(b=o?f:`${m}px`,v=`${r.floating.height+l}px`):d==="right"?(b=`${-l}px`,v=o?f:`${y}px`):d==="left"&&(b=`${r.floating.width+l}px`,v=o?f:`${y}px`),{data:{x:b,y:v}}}});function OC(t){const[e,n="center"]=t.split("-");return[e,n]}var MC=AC,LC=RC,VC=PC,FC=jC,[wf,yH]=dr("Tooltip",[vf]),xf=vf(),zC="TooltipProvider",NL=700,Tg="tooltip.open",[AL,Cv]=wf(zC),UC=t=>{const{__scopeTooltip:e,delayDuration:n=NL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=p.useRef(!0),a=p.useRef(!1),l=p.useRef(0);return p.useEffect(()=>{const d=l.current;return()=>window.clearTimeout(d)},[]),c.jsx(AL,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:p.useCallback(d=>{a.current=d},[]),disableHoverableContent:s,children:i})};UC.displayName=zC;var _f="Tooltip",[kL,Ef]=wf(_f),$C=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=Cv(_f,t.__scopeTooltip),d=xf(e),[h,f]=p.useState(null),m=Zr(),y=p.useRef(0),b=o??l.disableHoverableContent,v=a??l.delayDuration,E=p.useRef(!1),[x=!1,w]=li({prop:r,defaultProp:s,onChange:T=>{T?(l.onOpen(),document.dispatchEvent(new CustomEvent(Tg))):l.onClose(),i==null||i(T)}}),S=p.useMemo(()=>x?E.current?"delayed-open":"instant-open":"closed",[x]),k=p.useCallback(()=>{window.clearTimeout(y.current),y.current=0,E.current=!1,w(!0)},[w]),j=p.useCallback(()=>{window.clearTimeout(y.current),y.current=0,w(!1)},[w]),D=p.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{E.current=!0,w(!0),y.current=0},v)},[v,w]);return p.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),c.jsx(MC,{...d,children:c.jsx(kL,{scope:e,contentId:m,open:x,stateAttribute:S,trigger:h,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{l.isOpenDelayedRef.current?D():k()},[l.isOpenDelayedRef,D,k]),onTriggerLeave:p.useCallback(()=>{b?j():(window.clearTimeout(y.current),y.current=0)},[j,b]),onOpen:k,onClose:j,disableHoverableContent:b,children:n})})};$C.displayName=_f;var Cg="TooltipTrigger",BC=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ef(Cg,n),i=Cv(Cg,n),o=xf(n),a=p.useRef(null),l=Me(e,a,s.onTriggerChange),d=p.useRef(!1),h=p.useRef(!1),f=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),c.jsx(LC,{asChild:!0,...o,children:c.jsx(pe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:le(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:le(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:le(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:le(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:le(t.onBlur,s.onClose),onClick:le(t.onClick,s.onClose)})})});BC.displayName=Cg;var RL="TooltipPortal",[vH,PL]=wf(RL,{forceMount:void 0}),Da="TooltipContent",HC=p.forwardRef((t,e)=>{const n=PL(Da,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Ef(Da,t.__scopeTooltip);return c.jsx(wo,{present:r||o.open,children:o.disableHoverableContent?c.jsx(WC,{side:s,...i,ref:e}):c.jsx(DL,{side:s,...i,ref:e})})}),DL=p.forwardRef((t,e)=>{const n=Ef(Da,t.__scopeTooltip),r=Cv(Da,t.__scopeTooltip),s=p.useRef(null),i=Me(e,s),[o,a]=p.useState(null),{trigger:l,onClose:d}=n,h=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{a(null),f(!1)},[f]),y=p.useCallback((b,v)=>{const E=b.currentTarget,x={x:b.clientX,y:b.clientY},w=VL(x,E.getBoundingClientRect()),S=FL(x,w),k=zL(v.getBoundingClientRect()),j=$L([...S,...k]);a(j),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(l&&h){const b=E=>y(E,h),v=E=>y(E,l);return l.addEventListener("pointerleave",b),h.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",v)}}},[l,h,y,m]),p.useEffect(()=>{if(o){const b=v=>{const E=v.target,x={x:v.clientX,y:v.clientY},w=(l==null?void 0:l.contains(E))||(h==null?void 0:h.contains(E)),S=!UL(x,o);w?m():S&&(m(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[l,h,o,d,m]),c.jsx(WC,{...t,ref:i})}),[jL,OL]=wf(_f,{isInside:!1}),ML=ST("TooltipContent"),WC=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Ef(Da,n),d=xf(n),{onClose:h}=l;return p.useEffect(()=>(document.addEventListener(Tg,h),()=>document.removeEventListener(Tg,h)),[h]),p.useEffect(()=>{if(l.trigger){const f=m=>{const y=m.target;y!=null&&y.contains(l.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,h]),c.jsx(Wc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:c.jsxs(VC,{"data-state":l.stateAttribute,...d,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(ML,{children:r}),c.jsx(jL,{scope:n,isInside:!0,children:c.jsx(XO,{id:l.contentId,role:"tooltip",children:s||r})})]})})});HC.displayName=Da;var qC="TooltipArrow",LL=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=xf(n);return OL(qC,n).isInside?null:c.jsx(FC,{...s,...r,ref:e})});LL.displayName=qC;function VL(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function FL(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function zL(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function UL(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,d=e[o].x,h=e[o].y;l>r!=h>r&&n<(d-a)*(r-l)/(h-l)+a&&(s=!s)}return s}function $L(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),BL(e)}function BL(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var HL=UC,WL=$C,qL=BC,GC=HC;const KC=HL,GL=WL,KL=qL,QC=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>c.jsx(GC,{ref:r,sideOffset:e,className:X("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));QC.displayName=GC.displayName;const QL="modulepreload",YL=function(t){return"/trace-classroom-crm/"+t},I_={},Ku=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=YL(l),l in I_)return;I_[l]=!0;const d=l.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":QL,d||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),d)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},XL=()=>{};var N_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},JL=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},XC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,d=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|d>>6,y=d&63;l||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(YC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):JL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||d==null||f==null)throw new ZL;const m=i<<2|a>>4;if(r.push(m),d!==64){const y=a<<4&240|d>>2;if(r.push(y),f!==64){const b=d<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eV=function(t){const e=YC(t);return XC.encodeByteArray(e,!0)},dh=function(t){return eV(t).replace(/\./g,"")},JC=function(t){try{return XC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=()=>tV().__FIREBASE_DEFAULTS__,rV=()=>{if(typeof process>"u"||typeof N_>"u")return;const t=N_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&JC(t[1]);return e&&JSON.parse(e)},bf=()=>{try{return XL()||nV()||rV()||sV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ZC=t=>{var e,n;return(n=(e=bf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},iV=t=>{const e=ZC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},eI=()=>{var t;return(t=bf())==null?void 0:t.config},tI=t=>{var e;return(e=bf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[dh(JSON.stringify(n)),dh(JSON.stringify(o)),""].join(".")}const Yl={};function lV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?t.emulator.push(e):t.prod.push(e);return t}function cV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let A_=!1;function rI(t,e){if(typeof window>"u"||typeof document>"u"||!Ya(window.location.host)||Yl[t]===e||Yl[t]||A_)return;Yl[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=lV().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{A_=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=cV(r),y=n("text"),b=document.getElementById(y)||document.createElement("span"),v=n("learnmore"),E=document.getElementById(v)||document.createElement("a"),x=n("preprendIcon"),w=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;a(S),h(E,v);const k=d();l(w,x),S.append(w,b,E,k),document.body.appendChild(S)}i?(b.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function dV(){var e;const t=(e=bf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mV(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gV(){return!dV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yV(){try{return typeof indexedDB=="object"}catch{return!1}}function vV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="FirebaseError";class fs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wV,Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qc.prototype.create)}}class Qc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?xV(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new fs(s,a,r)}}function xV(t,e){return t.replace(_V,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _V=/\{\$([^}]+)}/g;function EV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(k_(i)&&k_(o)){if(!lo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function k_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bV(t,e){const n=new SV(t,e);return n.subscribe.bind(n)}class SV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TV(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Kp),s.error===void 0&&(s.error=Kp),s.complete===void 0&&(s.complete=Kp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t){return t&&t._delegate?t._delegate:t}class co{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NV(e))try{this.getOrInitializeService({instanceIdentifier:zi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=zi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zi){return this.instances.has(e)}getOptions(e=zi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zi){return this.component?this.component.multipleInstances?e:zi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IV(t){return t===zi?void 0:t}function NV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const kV={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},RV=Ce.INFO,PV={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},DV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=PV[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Iv{constructor(e){this.name=e,this._logLevel=RV,this._logHandler=DV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const jV=(t,e)=>e.some(n=>t instanceof n);let R_,P_;function OV(){return R_||(R_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MV(){return P_||(P_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sI=new WeakMap,Ig=new WeakMap,iI=new WeakMap,Qp=new WeakMap,Nv=new WeakMap;function LV(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Js(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sI.set(n,t)}).catch(()=>{}),Nv.set(e,t),e}function VV(t){if(Ig.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Ig.set(t,e)}let Ng={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ig.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Js(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FV(t){Ng=t(Ng)}function zV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yp(this),e,...n);return iI.set(r,e.sort?e.sort():[e]),Js(r)}:MV().includes(t)?function(...e){return t.apply(Yp(this),e),Js(sI.get(this))}:function(...e){return Js(t.apply(Yp(this),e))}}function UV(t){return typeof t=="function"?zV(t):(t instanceof IDBTransaction&&VV(t),jV(t,OV())?new Proxy(t,Ng):t)}function Js(t){if(t instanceof IDBRequest)return LV(t);if(Qp.has(t))return Qp.get(t);const e=UV(t);return e!==t&&(Qp.set(t,e),Nv.set(e,t)),e}const Yp=t=>Nv.get(t);function $V(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Js(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Js(o.result),l.oldVersion,l.newVersion,Js(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const BV=["get","getKey","getAll","getAllKeys","count"],HV=["put","add","delete","clear"],Xp=new Map;function D_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=HV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BV.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let d=l.store;return r&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),s&&l.done]))[0]};return Xp.set(e,i),i}FV(t=>({...t,get:(e,n,r)=>D_(e,n)||t.get(e,n,r),has:(e,n)=>!!D_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ag="@firebase/app",j_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new Iv("@firebase/app"),GV="@firebase/app-compat",KV="@firebase/analytics-compat",QV="@firebase/analytics",YV="@firebase/app-check-compat",XV="@firebase/app-check",JV="@firebase/auth",ZV="@firebase/auth-compat",e3="@firebase/database",t3="@firebase/data-connect",n3="@firebase/database-compat",r3="@firebase/functions",s3="@firebase/functions-compat",i3="@firebase/installations",o3="@firebase/installations-compat",a3="@firebase/messaging",l3="@firebase/messaging-compat",c3="@firebase/performance",u3="@firebase/performance-compat",d3="@firebase/remote-config",h3="@firebase/remote-config-compat",f3="@firebase/storage",p3="@firebase/storage-compat",m3="@firebase/firestore",g3="@firebase/ai",y3="@firebase/firestore-compat",v3="firebase",w3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="[DEFAULT]",x3={[Ag]:"fire-core",[GV]:"fire-core-compat",[QV]:"fire-analytics",[KV]:"fire-analytics-compat",[XV]:"fire-app-check",[YV]:"fire-app-check-compat",[JV]:"fire-auth",[ZV]:"fire-auth-compat",[e3]:"fire-rtdb",[t3]:"fire-data-connect",[n3]:"fire-rtdb-compat",[r3]:"fire-fn",[s3]:"fire-fn-compat",[i3]:"fire-iid",[o3]:"fire-iid-compat",[a3]:"fire-fcm",[l3]:"fire-fcm-compat",[c3]:"fire-perf",[u3]:"fire-perf-compat",[d3]:"fire-rc",[h3]:"fire-rc-compat",[f3]:"fire-gcs",[p3]:"fire-gcs-compat",[m3]:"fire-fst",[y3]:"fire-fst-compat",[g3]:"fire-vertex","fire-js":"fire-js",[v3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh=new Map,_3=new Map,Rg=new Map;function O_(t,e){try{t.container.addComponent(e)}catch(n){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ja(t){const e=t.name;if(Rg.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;Rg.set(e,t);for(const n of hh.values())O_(n,t);for(const n of _3.values())O_(n,t);return!0}function Av(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zs=new Qc("app","Firebase",E3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa=w3;function oI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:kg,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Zs.create("bad-app-name",{appName:String(s)});if(n||(n=eI()),!n)throw Zs.create("no-options");const i=hh.get(s);if(i){if(lo(n,i.options)&&lo(r,i.config))return i;throw Zs.create("duplicate-app",{appName:s})}const o=new AV(s);for(const l of Rg.values())o.addComponent(l);const a=new b3(n,r,o);return hh.set(s,a),a}function aI(t=kg){const e=hh.get(t);if(!e&&t===kg&&eI())return oI();if(!e)throw Zs.create("no-app",{appName:t});return e}function ei(t,e,n){let r=x3[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(o.join(" "));return}ja(new co(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="firebase-heartbeat-database",T3=1,Ic="firebase-heartbeat-store";let Jp=null;function lI(){return Jp||(Jp=$V(S3,T3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zs.create("idb-open",{originalErrorMessage:t.message})})),Jp}async function C3(t){try{const n=(await lI()).transaction(Ic),r=await n.objectStore(Ic).get(cI(t));return await n.done,r}catch(e){if(e instanceof fs)ls.warn(e.message);else{const n=Zs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ls.warn(n.message)}}}async function M_(t,e){try{const r=(await lI()).transaction(Ic,"readwrite");await r.objectStore(Ic).put(e,cI(t)),await r.done}catch(n){if(n instanceof fs)ls.warn(n.message);else{const r=Zs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ls.warn(r.message)}}}function cI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=1024,N3=30;class A3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new R3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=L_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>N3){const o=P3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ls.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=L_(),{heartbeatsToSend:r,unsentEntries:s}=k3(this._heartbeatsCache.heartbeats),i=dh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ls.warn(n),""}}}function L_(){return new Date().toISOString().substring(0,10)}function k3(t,e=I3){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),V_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),V_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class R3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yV()?vV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return M_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return M_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function V_(t){return dh(JSON.stringify({version:2,heartbeats:t})).length}function P3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(t){ja(new co("platform-logger",e=>new WV(e),"PRIVATE")),ja(new co("heartbeat",e=>new A3(e),"PRIVATE")),ei(Ag,j_,t),ei(Ag,j_,"esm2020"),ei("fire-js","")}D3("");function uI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const j3=uI,dI=new Qc("auth","Firebase",uI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Iv("@firebase/auth");function O3(t,...e){fh.logLevel<=Ce.WARN&&fh.warn(`Auth (${Xa}): ${t}`,...e)}function Sd(t,...e){fh.logLevel<=Ce.ERROR&&fh.error(`Auth (${Xa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,...e){throw Rv(t,...e)}function rr(t,...e){return Rv(t,...e)}function kv(t,e,n){const r={...j3(),[e]:n};return new Qc("auth","Firebase",r).create(e,{appName:t.name})}function Ji(t){return kv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M3(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Or(t,"argument-error"),kv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Rv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return dI.create(t,...e)}function he(t,e,...n){if(!t)throw Rv(e,...n)}function Yr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sd(e),new Error(e)}function cs(t,e){t||Yr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function L3(){return F_()==="http:"||F_()==="https:"}function F_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(L3()||fV()||"connection"in navigator)?navigator.onLine:!0}function F3(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n){this.shortDelay=e,this.longDelay=n,cs(n>e,"Short delay should be less than long delay!"),this.isMobile=uV()||pV()}get(){return V3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t,e){cs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$3=new Xc(3e4,6e4);function Dv(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ja(t,e,n,r,s={}){return fI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Yc({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:l,...i};return hV()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Ya(t.emulatorConfig.host)&&(d.credentials="include"),hI.fetch()(await pI(t,t.config.apiHost,n,a),d)})}async function fI(t,e,n){t._canInitEmulator=!1;const r={...z3,...e};try{const s=new H3(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Qu(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,d]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Qu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Qu(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw kv(t,h,d);Or(t,h)}}catch(s){if(s instanceof fs)throw s;Or(t,"network-request-failed",{message:String(s)})}}async function B3(t,e,n,r,s={}){const i=await Ja(t,e,n,r,s);return"mfaPendingCredential"in i&&Or(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function pI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Pv(t.config,s):`${t.config.apiScheme}://${s}`;return U3.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class H3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rr(this.auth,"network-request-failed")),$3.get())})}}function Qu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=rr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W3(t,e){return Ja(t,"POST","/v1/accounts:delete",e)}async function ph(t,e){return Ja(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function q3(t,e=!1){const n=Cn(t),r=await n.getIdToken(e),s=jv(r);he(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Xl(Zp(s.auth_time)),issuedAtTime:Xl(Zp(s.iat)),expirationTime:Xl(Zp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Zp(t){return Number(t)*1e3}function jv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sd("JWT malformed, contained fewer than 3 sections"),null;try{const s=JC(n);return s?JSON.parse(s):(Sd("Failed to decode base64 JWT payload"),null)}catch(s){return Sd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function z_(t){const e=jv(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fs&&G3(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function G3({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xl(this.lastLoginAt),this.creationTime=Xl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mh(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Nc(t,ph(e,{idToken:n}));he(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?mI(s.providerUserInfo):[],o=Y3(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Dg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function Q3(t){const e=Cn(t);await mh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y3(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function mI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(t,e){const n=await fI(t,{},async()=>{const r=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await pI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ya(t.emulatorConfig.host)&&(l.credentials="include"),hI.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function J3(t,e){return Ja(t,"POST","/v2/accounts:revokeToken",Dv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=z_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await X3(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ia;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(he(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(he(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ia,this.toJSON())}_performRefresh(){return Yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new K3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Dg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Nc(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return q3(this,e)}reload(){return Q3(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await mh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Yn(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await Nc(this,W3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:b,stsTokenManager:v}=n;he(f&&v,e,"internal-error");const E=ia.fromJSON(this.name,v);he(typeof f=="string",e,"internal-error"),Ts(r,e.name),Ts(s,e.name),he(typeof m=="boolean",e,"internal-error"),he(typeof y=="boolean",e,"internal-error"),Ts(i,e.name),Ts(o,e.name),Ts(a,e.name),Ts(l,e.name),Ts(d,e.name),Ts(h,e.name);const x=new Xn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:E,createdAt:d,lastLoginAt:h});return b&&Array.isArray(b)&&(x.providerData=b.map(w=>({...w}))),l&&(x._redirectEventId=l),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new ia;s.updateFromServerResponse(n);const i=new Xn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await mh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];he(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?mI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ia;a.updateFromIdToken(r);const l=new Xn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Dg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,d),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;function Xr(t){cs(t instanceof Function,"Expected a class definition");let e=U_.get(t);return e?(cs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,U_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gI.type="NONE";const $_=gI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t,e,n){return`firebase:${t}:${e}:${n}`}class oa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Td(this.userKey,s.apiKey,i),this.fullPersistenceKey=Td("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ph(this.auth,{idToken:e}).catch(()=>{});return n?Xn._fromGetAccountInfoResponse(this.auth,n,e):null}return Xn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new oa(Xr($_),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Xr($_);const o=Td(r,e.config.apiKey,e.name);let a=null;for(const d of n)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const m=await ph(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Xn._fromGetAccountInfoResponse(e,m,h)}else f=Xn._fromJSON(e,h);d!==i&&(a=f),i=d;break}}catch{}const l=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new oa(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new oa(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EI(e))return"Blackberry";if(bI(e))return"Webos";if(vI(e))return"Safari";if((e.includes("chrome/")||wI(e))&&!e.includes("edge/"))return"Chrome";if(_I(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yI(t=qt()){return/firefox\//i.test(t)}function vI(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wI(t=qt()){return/crios\//i.test(t)}function xI(t=qt()){return/iemobile/i.test(t)}function _I(t=qt()){return/android/i.test(t)}function EI(t=qt()){return/blackberry/i.test(t)}function bI(t=qt()){return/webos/i.test(t)}function Ov(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Z3(t=qt()){var e;return Ov(t)&&!!((e=window.navigator)!=null&&e.standalone)}function e6(){return mV()&&document.documentMode===10}function SI(t=qt()){return Ov(t)||_I(t)||bI(t)||EI(t)||/windows phone/i.test(t)||xI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(t,e=[]){let n;switch(t){case"Browser":n=B_(qt());break;case"Worker":n=`${B_(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n6(t,e={}){return Ja(t,"GET","/v2/passwordPolicy",Dv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=6;class s6{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??r6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H_(this),this.idTokenSubscription=new H_(this),this.beforeStateQueue=new t6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await oa.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ph(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=F3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Yn(this.app))return Promise.reject(Ji(this));const n=e?Cn(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Yn(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Yn(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n6(this),n=new s6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await J3(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xr(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await oa.create(this,[Xr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&O3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Sf(t){return Cn(t)}class H_{constructor(e){this.auth=e,this.observer=null,this.addObserver=bV(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o6(t){Mv=t}function a6(t){return Mv.loadJS(t)}function l6(){return Mv.gapiScript}function c6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(t,e){const n=Av(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(lo(i,e??{}))return s;Or(s,"already-initialized")}return n.initialize({options:e})}function d6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function h6(t,e,n){const r=Sf(t);he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=CI(e),{host:o,port:a}=f6(e),l=a===null?"":`:${a}`,d={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){he(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),he(lo(d,r.config.emulator)&&lo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ya(o)?(nI(`${i}//${o}${l}`),rI("Auth",!0)):p6()}function CI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function f6(t){const e=CI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:W_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:W_(o)}}}function W_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function p6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,n){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(t,e){return B3(t,"POST","/v1/accounts:signInWithIdp",Dv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6="http://localhost";class uo extends II{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new uo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return aa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,aa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,aa(e,n)}buildRequest(){const e={requestUri:m6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Yc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends Lv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds extends Jc{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:Ds.PROVIDER_ID,signInMethod:Ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ds.credentialFromTaggedObject(e)}static credentialFromError(e){return Ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ds.credential(e.oauthAccessToken)}catch{return null}}}Ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn extends Jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return uo._fromParams({providerId:xn.PROVIDER_ID,signInMethod:xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xn.credentialFromTaggedObject(e)}static credentialFromError(e){return xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xn.credential(n,r)}catch{return null}}}xn.GOOGLE_SIGN_IN_METHOD="google.com";xn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends Jc{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Jc{constructor(){super("twitter.com")}static credential(e,n){return uo._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Os.credential(n,r)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xn._fromIdTokenResponse(e,r,s),o=q_(r);return new Oa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=q_(r);return new Oa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function q_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends fs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,gh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new gh(e,n,r,s)}}function NI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?gh._fromErrorAndOperation(t,i,e,r):i})}async function g6(t,e,n=!1){const r=await Nc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Oa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y6(t,e,n=!1){const{auth:r}=t;if(Yn(r.app))return Promise.reject(Ji(r));const s="reauthenticate";try{const i=await Nc(t,NI(r,s,e,t),n);he(i.idToken,r,"internal-error");const o=jv(i.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(t.uid===a,r,"user-mismatch"),Oa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Or(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(t,e,n=!1){if(Yn(t.app))return Promise.reject(Ji(t));const r="signIn",s=await NI(t,r,e),i=await Oa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function w6(t,e,n,r){return Cn(t).onIdTokenChanged(e,n,r)}function x6(t,e,n){return Cn(t).beforeAuthStateChanged(e,n)}function _6(t,e,n,r){return Cn(t).onAuthStateChanged(e,n,r)}function E6(t){return Cn(t).signOut()}const yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(yh,"1"),this.storage.removeItem(yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=1e3,S6=10;class kI extends AI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);e6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,S6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},b6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kI.type="LOCAL";const T6=kI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI extends AI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}RI.type="SESSION";const PI=RI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Tf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async d=>d(n.origin,i)),l=await C6(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const d=Vv("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function N6(t){kr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DI(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function A6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function R6(){return DI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="firebaseLocalStorageDb",P6=1,vh="firebaseLocalStorage",OI="fbase_key";class Zc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cf(t,e){return t.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function D6(){const t=indexedDB.deleteDatabase(jI);return new Zc(t).toPromise()}function jg(){const t=indexedDB.open(jI,P6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(vh,{keyPath:OI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(vh)?e(r):(r.close(),await D6(),e(await jg()))})})}async function G_(t,e,n){const r=Cf(t,!0).put({[OI]:e,value:n});return new Zc(r).toPromise()}async function j6(t,e){const n=Cf(t,!1).get(e),r=await new Zc(n).toPromise();return r===void 0?null:r.value}function K_(t,e){const n=Cf(t,!0).delete(e);return new Zc(n).toPromise()}const O6=800,M6=3;class MI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>M6)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tf._getInstance(R6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await A6(),!this.activeServiceWorker)return;this.sender=new I6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||k6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jg();return await G_(e,yh,"1"),await K_(e,yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>G_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>j6(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>K_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Cf(s,!1).getAll();return new Zc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),O6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MI.type="LOCAL";const L6=MI;new Xc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t,e){return e?Xr(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv extends II{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return aa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return aa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return aa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function V6(t){return v6(t.auth,new Fv(t),t.bypassAuthState)}function F6(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),y6(n,new Fv(t),t.bypassAuthState)}async function z6(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),g6(n,new Fv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return V6;case"linkViaPopup":case"linkViaRedirect":return z6;case"reauthViaPopup":case"reauthViaRedirect":return F6;default:Or(this.auth,"internal-error")}}resolve(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=new Xc(2e3,1e4);async function em(t,e,n){if(Yn(t.app))return Promise.reject(rr(t,"operation-not-supported-in-this-environment"));const r=Sf(t);M3(t,e,Lv);const s=LI(r,n);return new Hi(r,"signInViaPopup",e,s).executeNotNull()}class Hi extends VI{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Hi.currentPopupAction&&Hi.currentPopupAction.cancel(),Hi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){cs(this.filter.length===1,"Popup operations only handle one event");const e=Vv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,U6.get())};e()}}Hi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6="pendingRedirect",Cd=new Map;class B6 extends VI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cd.get(this.auth._key());if(!e){try{const r=await H6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cd.set(this.auth._key(),e)}return this.bypassAuthState||Cd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function H6(t,e){const n=G6(e),r=q6(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function W6(t,e){Cd.set(t._key(),e)}function q6(t){return Xr(t._redirectPersistence)}function G6(t){return Td($6,t.config.apiKey,t.name)}async function K6(t,e,n=!1){if(Yn(t.app))return Promise.reject(Ji(t));const r=Sf(t),s=LI(r,e),o=await new B6(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=10*60*1e3;class Y6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(rr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q6&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q_(e))}saveEventToCache(e){this.cachedEventUids.add(Q_(e)),this.lastProcessedEventTime=Date.now()}}function Q_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function X6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J6(t,e={}){return Ja(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e5=/^https?/;async function t5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await J6(t);for(const n of e)try{if(n5(n))return}catch{}Or(t,"unauthorized-domain")}function n5(t){const e=Pg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!e5.test(n))return!1;if(Z6.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=new Xc(3e4,6e4);function Y_(){const t=kr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function s5(t){return new Promise((e,n)=>{var s,i,o;function r(){Y_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Y_(),n(rr(t,"network-request-failed"))},timeout:r5.get()})}if((i=(s=kr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=kr().gapi)!=null&&o.load)r();else{const a=c6("iframefcb");return kr()[a]=()=>{gapi.load?r():n(rr(t,"network-request-failed"))},a6(`${l6()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Id=null,e})}let Id=null;function i5(t){return Id=Id||s5(t),Id}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o5=new Xc(5e3,15e3),a5="__/auth/iframe",l5="emulator/auth/iframe",c5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},u5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d5(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pv(e,l5):`https://${t.config.authDomain}/${a5}`,r={apiKey:e.apiKey,appName:t.name,v:Xa},s=u5.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Yc(r).slice(1)}`}async function h5(t){const e=await i5(t),n=kr().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:d5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c5,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=rr(t,"network-request-failed"),a=kr().setTimeout(()=>{i(o)},o5.get());function l(){kr().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},p5=500,m5=600,g5="_blank",y5="http://localhost";class X_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function v5(t,e,n,r=p5,s=m5){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...f5,width:r.toString(),height:s.toString(),top:i,left:o},d=qt().toLowerCase();n&&(a=wI(d)?g5:n),yI(d)&&(e=e||y5,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(Z3(d)&&a!=="_self")return w5(e||"",a),new X_(null);const f=window.open(e||"",a,h);he(f,t,"popup-blocked");try{f.focus()}catch{}return new X_(f)}function w5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5="__/auth/handler",_5="emulator/auth/handler",E5=encodeURIComponent("fac");async function J_(t,e,n,r,s,i){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xa,eventId:s};if(e instanceof Lv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",EV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Jc){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),d=l?`#${E5}=${encodeURIComponent(l)}`:"";return`${b5(t)}?${Yc(a).slice(1)}${d}`}function b5({config:t}){return t.emulator?Pv(t,_5):`https://${t.authDomain}/${x5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class S5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PI,this._completeRedirectFn=K6,this._overrideRedirectResult=W6}async _openPopup(e,n,r,s){var o;cs((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await J_(e,n,r,Pg(),s);return v5(e,i,Vv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await J_(e,n,r,Pg(),s);return N6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(cs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await h5(e),r=new Y6(e);return n.register("authEvent",s=>(he(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[tm];i!==void 0&&n(!!i),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=t5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SI()||vI()||Ov()}}const T5=S5;var Z_="@firebase/auth",e1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function N5(t){ja(new co("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TI(t)},d=new i6(r,s,i,l);return d6(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ja(new co("auth-internal",e=>{const n=Sf(e.getProvider("auth").getImmediate());return(r=>new C5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ei(Z_,e1,I5(t)),ei(Z_,e1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=5*60,k5=tI("authIdTokenMaxAge")||A5;let t1=null;const R5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>k5)return;const s=n==null?void 0:n.token;t1!==s&&(t1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function P5(t=aI()){const e=Av(t,"auth");if(e.isInitialized())return e.getImmediate();const n=u6(t,{popupRedirectResolver:T5,persistence:[L6,T6,PI]}),r=tI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=R5(i.toString());x6(n,o,()=>o(n.currentUser)),w6(n,a=>o(a))}}const s=ZC("auth");return s&&h6(n,`http://${s}`),n}function D5(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}o6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=rr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",D5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});N5("Browser");var j5="firebase",O5="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ei(j5,O5,"app");var n1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ti,zI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,C){function I(){}I.prototype=C.prototype,T.F=C.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(A,P,O){for(var R=Array(arguments.length-2),$=2;$<arguments.length;$++)R[$-2]=arguments[$];return C.prototype[P].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,C,I){I||(I=0);const A=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)A[P]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(P=0;P<16;++P)A[P]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=T.g[0],I=T.g[1],P=T.g[2];let O=T.g[3],R;R=C+(O^I&(P^O))+A[0]+3614090360&4294967295,C=I+(R<<7&4294967295|R>>>25),R=O+(P^C&(I^P))+A[1]+3905402710&4294967295,O=C+(R<<12&4294967295|R>>>20),R=P+(I^O&(C^I))+A[2]+606105819&4294967295,P=O+(R<<17&4294967295|R>>>15),R=I+(C^P&(O^C))+A[3]+3250441966&4294967295,I=P+(R<<22&4294967295|R>>>10),R=C+(O^I&(P^O))+A[4]+4118548399&4294967295,C=I+(R<<7&4294967295|R>>>25),R=O+(P^C&(I^P))+A[5]+1200080426&4294967295,O=C+(R<<12&4294967295|R>>>20),R=P+(I^O&(C^I))+A[6]+2821735955&4294967295,P=O+(R<<17&4294967295|R>>>15),R=I+(C^P&(O^C))+A[7]+4249261313&4294967295,I=P+(R<<22&4294967295|R>>>10),R=C+(O^I&(P^O))+A[8]+1770035416&4294967295,C=I+(R<<7&4294967295|R>>>25),R=O+(P^C&(I^P))+A[9]+2336552879&4294967295,O=C+(R<<12&4294967295|R>>>20),R=P+(I^O&(C^I))+A[10]+4294925233&4294967295,P=O+(R<<17&4294967295|R>>>15),R=I+(C^P&(O^C))+A[11]+2304563134&4294967295,I=P+(R<<22&4294967295|R>>>10),R=C+(O^I&(P^O))+A[12]+1804603682&4294967295,C=I+(R<<7&4294967295|R>>>25),R=O+(P^C&(I^P))+A[13]+4254626195&4294967295,O=C+(R<<12&4294967295|R>>>20),R=P+(I^O&(C^I))+A[14]+2792965006&4294967295,P=O+(R<<17&4294967295|R>>>15),R=I+(C^P&(O^C))+A[15]+1236535329&4294967295,I=P+(R<<22&4294967295|R>>>10),R=C+(P^O&(I^P))+A[1]+4129170786&4294967295,C=I+(R<<5&4294967295|R>>>27),R=O+(I^P&(C^I))+A[6]+3225465664&4294967295,O=C+(R<<9&4294967295|R>>>23),R=P+(C^I&(O^C))+A[11]+643717713&4294967295,P=O+(R<<14&4294967295|R>>>18),R=I+(O^C&(P^O))+A[0]+3921069994&4294967295,I=P+(R<<20&4294967295|R>>>12),R=C+(P^O&(I^P))+A[5]+3593408605&4294967295,C=I+(R<<5&4294967295|R>>>27),R=O+(I^P&(C^I))+A[10]+38016083&4294967295,O=C+(R<<9&4294967295|R>>>23),R=P+(C^I&(O^C))+A[15]+3634488961&4294967295,P=O+(R<<14&4294967295|R>>>18),R=I+(O^C&(P^O))+A[4]+3889429448&4294967295,I=P+(R<<20&4294967295|R>>>12),R=C+(P^O&(I^P))+A[9]+568446438&4294967295,C=I+(R<<5&4294967295|R>>>27),R=O+(I^P&(C^I))+A[14]+3275163606&4294967295,O=C+(R<<9&4294967295|R>>>23),R=P+(C^I&(O^C))+A[3]+4107603335&4294967295,P=O+(R<<14&4294967295|R>>>18),R=I+(O^C&(P^O))+A[8]+1163531501&4294967295,I=P+(R<<20&4294967295|R>>>12),R=C+(P^O&(I^P))+A[13]+2850285829&4294967295,C=I+(R<<5&4294967295|R>>>27),R=O+(I^P&(C^I))+A[2]+4243563512&4294967295,O=C+(R<<9&4294967295|R>>>23),R=P+(C^I&(O^C))+A[7]+1735328473&4294967295,P=O+(R<<14&4294967295|R>>>18),R=I+(O^C&(P^O))+A[12]+2368359562&4294967295,I=P+(R<<20&4294967295|R>>>12),R=C+(I^P^O)+A[5]+4294588738&4294967295,C=I+(R<<4&4294967295|R>>>28),R=O+(C^I^P)+A[8]+2272392833&4294967295,O=C+(R<<11&4294967295|R>>>21),R=P+(O^C^I)+A[11]+1839030562&4294967295,P=O+(R<<16&4294967295|R>>>16),R=I+(P^O^C)+A[14]+4259657740&4294967295,I=P+(R<<23&4294967295|R>>>9),R=C+(I^P^O)+A[1]+2763975236&4294967295,C=I+(R<<4&4294967295|R>>>28),R=O+(C^I^P)+A[4]+1272893353&4294967295,O=C+(R<<11&4294967295|R>>>21),R=P+(O^C^I)+A[7]+4139469664&4294967295,P=O+(R<<16&4294967295|R>>>16),R=I+(P^O^C)+A[10]+3200236656&4294967295,I=P+(R<<23&4294967295|R>>>9),R=C+(I^P^O)+A[13]+681279174&4294967295,C=I+(R<<4&4294967295|R>>>28),R=O+(C^I^P)+A[0]+3936430074&4294967295,O=C+(R<<11&4294967295|R>>>21),R=P+(O^C^I)+A[3]+3572445317&4294967295,P=O+(R<<16&4294967295|R>>>16),R=I+(P^O^C)+A[6]+76029189&4294967295,I=P+(R<<23&4294967295|R>>>9),R=C+(I^P^O)+A[9]+3654602809&4294967295,C=I+(R<<4&4294967295|R>>>28),R=O+(C^I^P)+A[12]+3873151461&4294967295,O=C+(R<<11&4294967295|R>>>21),R=P+(O^C^I)+A[15]+530742520&4294967295,P=O+(R<<16&4294967295|R>>>16),R=I+(P^O^C)+A[2]+3299628645&4294967295,I=P+(R<<23&4294967295|R>>>9),R=C+(P^(I|~O))+A[0]+4096336452&4294967295,C=I+(R<<6&4294967295|R>>>26),R=O+(I^(C|~P))+A[7]+1126891415&4294967295,O=C+(R<<10&4294967295|R>>>22),R=P+(C^(O|~I))+A[14]+2878612391&4294967295,P=O+(R<<15&4294967295|R>>>17),R=I+(O^(P|~C))+A[5]+4237533241&4294967295,I=P+(R<<21&4294967295|R>>>11),R=C+(P^(I|~O))+A[12]+1700485571&4294967295,C=I+(R<<6&4294967295|R>>>26),R=O+(I^(C|~P))+A[3]+2399980690&4294967295,O=C+(R<<10&4294967295|R>>>22),R=P+(C^(O|~I))+A[10]+4293915773&4294967295,P=O+(R<<15&4294967295|R>>>17),R=I+(O^(P|~C))+A[1]+2240044497&4294967295,I=P+(R<<21&4294967295|R>>>11),R=C+(P^(I|~O))+A[8]+1873313359&4294967295,C=I+(R<<6&4294967295|R>>>26),R=O+(I^(C|~P))+A[15]+4264355552&4294967295,O=C+(R<<10&4294967295|R>>>22),R=P+(C^(O|~I))+A[6]+2734768916&4294967295,P=O+(R<<15&4294967295|R>>>17),R=I+(O^(P|~C))+A[13]+1309151649&4294967295,I=P+(R<<21&4294967295|R>>>11),R=C+(P^(I|~O))+A[4]+4149444226&4294967295,C=I+(R<<6&4294967295|R>>>26),R=O+(I^(C|~P))+A[11]+3174756917&4294967295,O=C+(R<<10&4294967295|R>>>22),R=P+(C^(O|~I))+A[2]+718787259&4294967295,P=O+(R<<15&4294967295|R>>>17),R=I+(O^(P|~C))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+O&4294967295}r.prototype.v=function(T,C){C===void 0&&(C=T.length);const I=C-this.blockSize,A=this.C;let P=this.h,O=0;for(;O<C;){if(P==0)for(;O<=I;)s(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<C;)if(A[P++]=T.charCodeAt(O++),P==this.blockSize){s(this,A),P=0;break}}else for(;O<C;)if(A[P++]=T[O++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=C},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;C=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=C&255,C/=256;for(this.v(T),T=Array(16),C=0,I=0;I<4;++I)for(let A=0;A<32;A+=8)T[C++]=this.g[I]>>>A&255;return T};function i(T,C){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=C(T)}function o(T,C){this.h=C;const I=[];let A=!0;for(let P=T.length-1;P>=0;P--){const O=T[P]|0;A&&O==C||(I[P]=O,A=!1)}this.g=I}var a={};function l(T){return-128<=T&&T<128?i(T,function(C){return new o([C|0],C<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return E(d(-T));const C=[];let I=1;for(let A=0;T>=I;A++)C[A]=T/I|0,I*=4294967296;return new o(C,0)}function h(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return E(h(T.substring(1),C));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(C,8));let A=f;for(let O=0;O<T.length;O+=8){var P=Math.min(8,T.length-O);const R=parseInt(T.substring(O,O+P),C);P<8?(P=d(Math.pow(C,P)),A=A.j(P).add(d(R))):(A=A.j(I),A=A.add(d(R)))}return A}var f=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-E(this).m();let T=0,C=1;for(let I=0;I<this.g.length;I++){const A=this.i(I);T+=(A>=0?A:4294967296+A)*C,C*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(v(this))return"-"+E(this).toString(T);const C=d(Math.pow(T,6));var I=this;let A="";for(;;){const P=k(I,C).g;I=x(I,P.j(C));let O=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=P,b(I))return O+A;for(;O.length<6;)O="0"+O;A=O+A}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(let C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=x(this,T),v(T)?-1:b(T)?0:1};function E(T){const C=T.g.length,I=[];for(let A=0;A<C;A++)I[A]=~T.g[A];return new o(I,~T.h).add(m)}t.abs=function(){return v(this)?E(this):this},t.add=function(T){const C=Math.max(this.g.length,T.g.length),I=[];let A=0;for(let P=0;P<=C;P++){let O=A+(this.i(P)&65535)+(T.i(P)&65535),R=(O>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);A=R>>>16,O&=65535,R&=65535,I[P]=R<<16|O}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(T,C){return T.add(E(C))}t.j=function(T){if(b(this)||b(T))return f;if(v(this))return v(T)?E(this).j(E(T)):E(E(this).j(T));if(v(T))return E(this.j(E(T)));if(this.l(y)<0&&T.l(y)<0)return d(this.m()*T.m());const C=this.g.length+T.g.length,I=[];for(var A=0;A<2*C;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<T.g.length;P++){const O=this.i(A)>>>16,R=this.i(A)&65535,$=T.i(P)>>>16,re=T.i(P)&65535;I[2*A+2*P]+=R*re,w(I,2*A+2*P),I[2*A+2*P+1]+=O*re,w(I,2*A+2*P+1),I[2*A+2*P+1]+=R*$,w(I,2*A+2*P+1),I[2*A+2*P+2]+=O*$,w(I,2*A+2*P+2)}for(T=0;T<C;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=C;T<2*C;T++)I[T]=0;return new o(I,0)};function w(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function S(T,C){this.g=T,this.h=C}function k(T,C){if(b(C))throw Error("division by zero");if(b(T))return new S(f,f);if(v(T))return C=k(E(T),C),new S(E(C.g),E(C.h));if(v(C))return C=k(T,E(C)),new S(E(C.g),C.h);if(T.g.length>30){if(v(T)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var I=m,A=C;A.l(T)<=0;)I=j(I),A=j(A);var P=D(I,1),O=D(A,1);for(A=D(A,2),I=D(I,2);!b(A);){var R=O.add(A);R.l(T)<=0&&(P=P.add(I),O=R),A=D(A,1),I=D(I,1)}return C=x(T,P.j(C)),new S(P,C)}for(P=f;T.l(C)>=0;){for(I=Math.max(1,Math.floor(T.m()/C.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),O=d(I),R=O.j(C);v(R)||R.l(T)>0;)I-=A,O=d(I),R=O.j(C);b(O)&&(O=m),P=P.add(O),T=x(T,R)}return new S(P,T)}t.B=function(T){return k(this,T).h},t.and=function(T){const C=Math.max(this.g.length,T.g.length),I=[];for(let A=0;A<C;A++)I[A]=this.i(A)&T.i(A);return new o(I,this.h&T.h)},t.or=function(T){const C=Math.max(this.g.length,T.g.length),I=[];for(let A=0;A<C;A++)I[A]=this.i(A)|T.i(A);return new o(I,this.h|T.h)},t.xor=function(T){const C=Math.max(this.g.length,T.g.length),I=[];for(let A=0;A<C;A++)I[A]=this.i(A)^T.i(A);return new o(I,this.h^T.h)};function j(T){const C=T.g.length+1,I=[];for(let A=0;A<C;A++)I[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(I,T.h)}function D(T,C){const I=C>>5;C%=32;const A=T.g.length-I,P=[];for(let O=0;O<A;O++)P[O]=C>0?T.i(O+I)>>>C|T.i(O+I+1)<<32-C:T.i(O+I);return new o(P,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,zI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ti=o}).apply(typeof n1<"u"?n1:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UI,Ol,$I,Nd,Og,BI,HI,WI;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var _=r;u=u.split(".");for(var N=0;N<u.length-1;N++){var V=u[N];if(!(V in _))break e;_=_[V]}u=u[u.length-1],N=_[u],g=g(N),g!=N&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var _=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&_.push([N,g[N]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function l(u,g,_){return u.call.apply(u.bind,arguments)}function d(u,g,_){return d=l,d.apply(null,arguments)}function h(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),u.apply(this,N)}}function f(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(N,V,F){for(var J=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)J[_e-2]=arguments[_e];return g.prototype[V].apply(N,J)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function y(u){const g=u.length;if(g>0){const _=Array(g);for(let N=0;N<g;N++)_[N]=u[N];return _}return[]}function b(u,g){for(let N=1;N<arguments.length;N++){const V=arguments[N];var _=typeof V;if(_=_!="object"?_:V?Array.isArray(V)?"array":_:"null",_=="array"||_=="object"&&typeof V.length=="number"){_=u.length||0;const F=V.length||0;u.length=_+F;for(let J=0;J<F;J++)u[_+J]=V[J]}else u.push(V)}}class v{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function E(u){o.setTimeout(()=>{throw u},0)}function x(){var u=T;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class w{constructor(){this.h=this.g=null}add(g,_){const N=S.get();N.set(g,_),this.h?this.h.next=N:this.g=N,this.h=N}}var S=new v(()=>new k,u=>u.reset());class k{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let j,D=!1,T=new w,C=()=>{const u=Promise.resolve(void 0);j=()=>{u.then(I)}};function I(){for(var u;u=x();){try{u.h.call(u.g)}catch(_){E(_)}var g=S;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}D=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};o.addEventListener("test",_,g),o.removeEventListener("test",_,g)}catch{}return u}();function R(u){return/^[\s\xa0]*$/.test(u)}function $(u,g){P.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}f($,P),$.prototype.init=function(u,g){const _=this.type=u.type,N=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),z=0;function K(u,g,_,N,V){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!N,this.ha=V,this.key=++z,this.da=this.fa=!1}function M(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function L(u,g,_){for(const N in u)g.call(_,u[N],N,u)}function U(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function Q(u){const g={};for(const _ in u)g[_]=u[_];return g}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(u,g){let _,N;for(let V=1;V<arguments.length;V++){N=arguments[V];for(_ in N)u[_]=N[_];for(let F=0;F<q.length;F++)_=q[F],Object.prototype.hasOwnProperty.call(N,_)&&(u[_]=N[_])}}function ee(u){this.src=u,this.g={},this.h=0}ee.prototype.add=function(u,g,_,N,V){const F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);const J=ce(u,g,N,V);return J>-1?(g=u[J],_||(g.fa=!1)):(g=new K(g,this.src,F,!!N,V),g.fa=_,u.push(g)),g};function de(u,g){const _=g.type;if(_ in u.g){var N=u.g[_],V=Array.prototype.indexOf.call(N,g,void 0),F;(F=V>=0)&&Array.prototype.splice.call(N,V,1),F&&(M(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function ce(u,g,_,N){for(let V=0;V<u.length;++V){const F=u[V];if(!F.da&&F.listener==g&&F.capture==!!_&&F.ha==N)return V}return-1}var W="closure_lm_"+(Math.random()*1e6|0),ie={};function ve(u,g,_,N,V){if(Array.isArray(g)){for(let F=0;F<g.length;F++)ve(u,g[F],_,N,V);return null}return _=Ii(_),u&&u[re]?u.J(g,_,a(N)?!!N.capture:!!N,V):ne(u,g,_,!1,N,V)}function ne(u,g,_,N,V,F){if(!g)throw Error("Invalid event type");const J=a(V)?!!V.capture:!!V;let _e=Ot(u);if(_e||(u[W]=_e=new ee(u)),_=_e.add(g,_,N,J,F),_.proxy)return _;if(N=ge(),_.proxy=N,N.src=u,N.listener=_,u.addEventListener)O||(V=J),V===void 0&&(V=!1),u.addEventListener(g.toString(),N,V);else if(u.attachEvent)u.attachEvent(Qe(g.toString()),N);else if(u.addListener&&u.removeListener)u.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ge(){function u(_){return g.call(u.src,u.listener,_)}const g=nn;return u}function we(u,g,_,N,V){if(Array.isArray(g))for(var F=0;F<g.length;F++)we(u,g[F],_,N,V);else N=a(N)?!!N.capture:!!N,_=Ii(_),u&&u[re]?(u=u.i,F=String(g).toString(),F in u.g&&(g=u.g[F],_=ce(g,_,N,V),_>-1&&(M(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[F],u.h--)))):u&&(u=Ot(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ce(g,_,N,V)),(_=u>-1?g[u]:null)&&qe(_))}function qe(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[re])de(g.i,u);else{var _=u.type,N=u.proxy;g.removeEventListener?g.removeEventListener(_,N,u.capture):g.detachEvent?g.detachEvent(Qe(_),N):g.addListener&&g.removeListener&&g.removeListener(N),(_=Ot(g))?(de(_,u),_.h==0&&(_.src=null,g[W]=null)):M(u)}}}function Qe(u){return u in ie?ie[u]:ie[u]="on"+u}function nn(u,g){if(u.da)u=!0;else{g=new $(g,this);const _=u.listener,N=u.ha||u.src;u.fa&&qe(u),u=_.call(N,g)}return u}function Ot(u){return u=u[W],u instanceof ee?u:null}var An="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ii(u){return typeof u=="function"?u:(u[An]||(u[An]=function(g){return u.handleEvent(g)}),u[An])}function ze(){A.call(this),this.i=new ee(this),this.M=this,this.G=null}f(ze,A),ze.prototype[re]=!0,ze.prototype.removeEventListener=function(u,g,_,N){we(this,u,g,_,N)};function Ge(u,g){var _,N=u.G;if(N)for(_=[];N;N=N.G)_.push(N);if(u=u.M,N=g.type||g,typeof g=="string")g=new P(g,u);else if(g instanceof P)g.target=g.target||u;else{var V=g;g=new P(N,u),se(g,V)}V=!0;let F,J;if(_)for(J=_.length-1;J>=0;J--)F=g.g=_[J],V=zr(F,N,!0,g)&&V;if(F=g.g=u,V=zr(F,N,!0,g)&&V,V=zr(F,N,!1,g)&&V,_)for(J=0;J<_.length;J++)F=g.g=_[J],V=zr(F,N,!1,g)&&V}ze.prototype.N=function(){if(ze.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const _=u.g[g];for(let N=0;N<_.length;N++)M(_[N]);delete u.g[g],u.h--}}this.G=null},ze.prototype.J=function(u,g,_,N){return this.i.add(String(u),g,!1,_,N)},ze.prototype.K=function(u,g,_,N){return this.i.add(String(u),g,!0,_,N)};function zr(u,g,_,N){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let F=0;F<g.length;++F){const J=g[F];if(J&&!J.da&&J.capture==_){const _e=J.listener,ft=J.ha||J.src;J.fa&&de(u.i,J),V=_e.call(ft,N)!==!1&&V}}return V&&!N.defaultPrevented}function To(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function ll(u){u.g=To(()=>{u.g=null,u.i&&(u.i=!1,ll(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class du extends A{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ll(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ni(u){A.call(this),this.h=u,this.g={}}f(Ni,A);var hu=[];function Ur(u){L(u.g,function(g,_){this.g.hasOwnProperty(_)&&qe(g)},u),u.g={}}Ni.prototype.N=function(){Ni.Z.N.call(this),Ur(this)},Ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fr=o.JSON.stringify,Ai=o.JSON.parse,fu=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function Un(){}function cl(){}var ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ul(){P.call(this,"d")}f(ul,P);function Ri(){P.call(this,"c")}f(Ri,P);var pr={},pu=null;function Pi(){return pu=pu||new ze}pr.Ia="serverreachability";function mu(u){P.call(this,pr.Ia,u)}f(mu,P);function Di(u){const g=Pi();Ge(g,new mu(g))}pr.STAT_EVENT="statevent";function gu(u,g){P.call(this,pr.STAT_EVENT,u),this.stat=g}f(gu,P);function Re(u){const g=Pi();Ge(g,new gu(g,u))}pr.Ja="timingevent";function Mt(u,g){P.call(this,pr.Ja,u),this.size=g}f(Mt,P);function dt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function rn(){this.g=!0}rn.prototype.ua=function(){this.g=!1};function sn(u,g,_,N,V,F){u.info(function(){if(u.g)if(F){var J="",_e=F.split("&");for(let Le=0;Le<_e.length;Le++){var ft=_e[Le].split("=");if(ft.length>1){const xt=ft[0];ft=ft[1];const yr=xt.split("_");J=yr.length>=2&&yr[1]=="type"?J+(xt+"="+ft+"&"):J+(xt+"=redacted&")}}}else J=null;else J=F;return"XMLHTTP REQ ("+N+") [attempt "+V+"]: "+g+`
`+_+`
`+J})}function Gt(u,g,_,N,V,F,J){u.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+V+"]: "+g+`
`+_+`
`+F+" "+J})}function Nt(u,g,_,N){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ht(u,_)+(N?" "+N:"")})}function ms(u,g){u.info(function(){return"TIMEOUT: "+g})}rn.prototype.info=function(){};function ht(u,g){if(!u.g)return g;if(!g)return null;try{const F=JSON.parse(g);if(F){for(u=0;u<F.length;u++)if(Array.isArray(F[u])){var _=F[u];if(!(_.length<2)){var N=_[1];if(Array.isArray(N)&&!(N.length<1)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(let J=1;J<N.length;J++)N[J]=""}}}}return fr(F)}catch{return g}}var pn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},mn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kn;function $r(){}f($r,Un),$r.prototype.g=function(){return new XMLHttpRequest},kn=new $r;function $n(u){return encodeURIComponent(String(u))}function mr(u){var g=1;u=u.split(":");const _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function on(u,g,_,N){this.j=u,this.i=g,this.l=_,this.S=N||1,this.V=new Ni(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Co}function Co(){this.i=null,this.g="",this.h=!1}var tw={},ep={};function tp(u,g,_){u.M=1,u.A=vu(gr(g)),u.u=_,u.R=!0,nw(u,null)}function nw(u,g){u.F=Date.now(),yu(u),u.B=gr(u.A);var _=u.B,N=u.S;Array.isArray(N)||(N=[String(N)]),mw(_.i,"t",N),u.C=0,_=u.j.L,u.h=new Co,u.g=Dw(u.j,_?g:null,!u.u),u.P>0&&(u.O=new du(d(u.Y,u,u.g),u.P)),g=u.V,_=u.g,N=u.ba;var V="readystatechange";Array.isArray(V)||(V&&(hu[0]=V.toString()),V=hu);for(let F=0;F<V.length;F++){const J=ve(_,V[F],N||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=u.J?Q(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Di(),sn(u.i,u.v,u.B,u.l,u.S,u.u)}on.prototype.ba=function(u){u=u.target;const g=this.O;g&&vs(u)==3?g.j():this.Y(u)},on.prototype.Y=function(u){try{if(u==this.g)e:{const _e=vs(this.g),ft=this.g.ya(),Le=this.g.ca();if(!(_e<3)&&(_e!=3||this.g&&(this.h.h||this.g.la()||Ew(this.g)))){this.K||_e!=4||ft==7||(ft==8||Le<=0?Di(3):Di(2)),np(this);var g=this.g.ca();this.X=g;var _=RP(this);if(this.o=g==200,Gt(this.i,this.v,this.B,this.l,this.S,_e,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,V=this.g;if((N=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(N)){var F=N;break t}}F=null}if(u=F)Nt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rp(this,u);else{this.o=!1,this.m=3,Re(12),ji(this),dl(this);break e}}if(this.R){u=!0;let xt;for(;!this.K&&this.C<_.length;)if(xt=PP(this,_),xt==ep){_e==4&&(this.m=4,Re(14),u=!1),Nt(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==tw){this.m=4,Re(15),Nt(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Nt(this.i,this.l,xt,null),rp(this,xt);if(rw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||_.length!=0||this.h.h||(this.m=1,Re(16),u=!1),this.o=this.o&&u,!u)Nt(this.i,this.l,_,"[Invalid Chunked Response]"),ji(this),dl(this);else if(_.length>0&&!this.W){this.W=!0;var J=this.j;J.g==this&&J.aa&&!J.P&&(J.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),dp(J),J.P=!0,Re(11))}}else Nt(this.i,this.l,_,null),rp(this,_);_e==4&&ji(this),this.o&&!this.K&&(_e==4?Aw(this.j,this):(this.o=!1,yu(this)))}else qP(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,Re(12)):(this.m=0,Re(13)),ji(this),dl(this)}}}catch{}finally{}};function RP(u){if(!rw(u))return u.g.la();const g=Ew(u.g);if(g==="")return"";let _="";const N=g.length,V=vs(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ji(u),dl(u),"";u.h.i=new o.TextDecoder}for(let F=0;F<N;F++)u.h.h=!0,_+=u.h.i.decode(g[F],{stream:!(V&&F==N-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function rw(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function PP(u,g){var _=u.C,N=g.indexOf(`
`,_);return N==-1?ep:(_=Number(g.substring(_,N)),isNaN(_)?tw:(N+=1,N+_>g.length?ep:(g=g.slice(N,N+_),u.C=N+_,g)))}on.prototype.cancel=function(){this.K=!0,ji(this)};function yu(u){u.T=Date.now()+u.H,sw(u,u.H)}function sw(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=dt(d(u.aa,u),g)}function np(u){u.D&&(o.clearTimeout(u.D),u.D=null)}on.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ms(this.i,this.B),this.M!=2&&(Di(),Re(17)),ji(this),this.m=2,dl(this)):sw(this,this.T-u)};function dl(u){u.j.I==0||u.K||Aw(u.j,u)}function ji(u){np(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,Ur(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function rp(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||sp(_.h,u))){if(!u.L&&sp(_.h,u)&&_.I==3){try{var N=_.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var V=N;if(V[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)bu(_),_u(_);else break e;up(_),Re(18)}}else _.xa=V[1],0<_.xa-_.K&&V[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=dt(d(_.Va,_),6e3));aw(_.h)<=1&&_.ta&&(_.ta=void 0)}else Mi(_,11)}else if((u.L||_.g==u)&&bu(_),!R(g))for(V=_.Ba.g.parse(g),g=0;g<V.length;g++){let Le=V[g];const xt=Le[0];if(!(xt<=_.K))if(_.K=xt,Le=Le[1],_.I==2)if(Le[0]=="c"){_.M=Le[1],_.ba=Le[2];const yr=Le[3];yr!=null&&(_.ka=yr,_.j.info("VER="+_.ka));const Li=Le[4];Li!=null&&(_.za=Li,_.j.info("SVER="+_.za));const ws=Le[5];ws!=null&&typeof ws=="number"&&ws>0&&(N=1.5*ws,_.O=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const xs=u.g;if(xs){const Tu=xs.g?xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Tu){var F=N.h;F.g||Tu.indexOf("spdy")==-1&&Tu.indexOf("quic")==-1&&Tu.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ip(F,F.h),F.h=null))}if(N.G){const hp=xs.g?xs.g.getResponseHeader("X-HTTP-Session-Id"):null;hp&&(N.wa=hp,Ue(N.J,N.G,hp))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),N=_;var J=u;if(N.na=Pw(N,N.L?N.ba:null,N.W),J.L){lw(N.h,J);var _e=J,ft=N.O;ft&&(_e.H=ft),_e.D&&(np(_e),yu(_e)),N.g=J}else Iw(N);_.i.length>0&&Eu(_)}else Le[0]!="stop"&&Le[0]!="close"||Mi(_,7);else _.I==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Mi(_,7):cp(_):Le[0]!="noop"&&_.l&&_.l.qa(Le),_.A=0)}}Di(4)}catch{}}var DP=class{constructor(u,g){this.g=u,this.map=g}};function iw(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ow(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function aw(u){return u.h?1:u.g?u.g.size:0}function sp(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function ip(u,g){u.g?u.g.add(g):u.h=g}function lw(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}iw.prototype.cancel=function(){if(this.i=cw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function cw(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.G);return g}return y(u.i)}var uw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jP(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const N=u[_].indexOf("=");let V,F=null;N>=0?(V=u[_].substring(0,N),F=u[_].substring(N+1)):V=u[_],g(V,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function gs(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof gs?(this.l=u.l,hl(this,u.j),this.o=u.o,this.g=u.g,fl(this,u.u),this.h=u.h,op(this,gw(u.i)),this.m=u.m):u&&(g=String(u).match(uw))?(this.l=!1,hl(this,g[1]||"",!0),this.o=pl(g[2]||""),this.g=pl(g[3]||"",!0),fl(this,g[4]),this.h=pl(g[5]||"",!0),op(this,g[6]||"",!0),this.m=pl(g[7]||"")):(this.l=!1,this.i=new gl(null,this.l))}gs.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(ml(g,dw,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(ml(g,dw,!0),"@"),u.push($n(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(ml(_,_.charAt(0)=="/"?LP:MP,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",ml(_,FP)),u.join("")},gs.prototype.resolve=function(u){const g=gr(this);let _=!!u.j;_?hl(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var N=u.h;if(_)fl(g,u.u);else if(_=!!u.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var V=g.h.lastIndexOf("/");V!=-1&&(N=g.h.slice(0,V+1)+N)}if(V=N,V==".."||V==".")N="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){N=V.lastIndexOf("/",0)==0,V=V.split("/");const F=[];for(let J=0;J<V.length;){const _e=V[J++];_e=="."?N&&J==V.length&&F.push(""):_e==".."?((F.length>1||F.length==1&&F[0]!="")&&F.pop(),N&&J==V.length&&F.push("")):(F.push(_e),N=!0)}N=F.join("/")}else N=V}return _?g.h=N:_=u.i.toString()!=="",_?op(g,gw(u.i)):_=!!u.m,_&&(g.m=u.m),g};function gr(u){return new gs(u)}function hl(u,g,_){u.j=_?pl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function fl(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function op(u,g,_){g instanceof gl?(u.i=g,zP(u.i,u.l)):(_||(g=ml(g,VP)),u.i=new gl(g,u.l))}function Ue(u,g,_){u.i.set(g,_)}function vu(u){return Ue(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function pl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function ml(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,OP),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function OP(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var dw=/[#\/\?@]/g,MP=/[#\?:]/g,LP=/[#\?]/g,VP=/[#\?@]/g,FP=/#/g;function gl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Oi(u){u.g||(u.g=new Map,u.h=0,u.i&&jP(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=gl.prototype,t.add=function(u,g){Oi(this),this.i=null,u=Io(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function hw(u,g){Oi(u),g=Io(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function fw(u,g){return Oi(u),g=Io(u,g),u.g.has(g)}t.forEach=function(u,g){Oi(this),this.g.forEach(function(_,N){_.forEach(function(V){u.call(g,V,N,this)},this)},this)};function pw(u,g){Oi(u);let _=[];if(typeof g=="string")fw(u,g)&&(_=_.concat(u.g.get(Io(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}t.set=function(u,g){return Oi(this),this.i=null,u=Io(this,u),fw(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=pw(this,u),u.length>0?String(u[0]):g):g};function mw(u,g,_){hw(u,g),_.length>0&&(u.i=null,u.g.set(Io(u,g),y(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var _=g[N];const V=$n(_);_=pw(this,_);for(let F=0;F<_.length;F++){let J=V;_[F]!==""&&(J+="="+$n(_[F])),u.push(J)}}return this.i=u.join("&")};function gw(u){const g=new gl;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Io(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function zP(u,g){g&&!u.j&&(Oi(u),u.i=null,u.g.forEach(function(_,N){const V=N.toLowerCase();N!=V&&(hw(this,N),mw(this,V,_))},u)),u.j=g}function UP(u,g){const _=new rn;if(o.Image){const N=new Image;N.onload=h(ys,_,"TestLoadImage: loaded",!0,g,N),N.onerror=h(ys,_,"TestLoadImage: error",!1,g,N),N.onabort=h(ys,_,"TestLoadImage: abort",!1,g,N),N.ontimeout=h(ys,_,"TestLoadImage: timeout",!1,g,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=u}else g(!1)}function $P(u,g){const _=new rn,N=new AbortController,V=setTimeout(()=>{N.abort(),ys(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:N.signal}).then(F=>{clearTimeout(V),F.ok?ys(_,"TestPingServer: ok",!0,g):ys(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),ys(_,"TestPingServer: error",!1,g)})}function ys(u,g,_,N,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),N(_)}catch{}}function BP(){this.g=new fu}function ap(u){this.i=u.Sb||null,this.h=u.ab||!1}f(ap,Un),ap.prototype.g=function(){return new wu(this.i,this.h)};function wu(u,g){ze.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(wu,ze),t=wu.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,vl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,yl(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,vl(this)),this.g&&(this.readyState=3,vl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yw(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function yw(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?yl(this):vl(this),this.readyState==3&&yw(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,yl(this))},t.Na=function(u){this.g&&(this.response=u,yl(this))},t.ga=function(){this.g&&yl(this)};function yl(u){u.readyState=4,u.l=null,u.j=null,u.B=null,vl(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function vl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function vw(u){let g="";return L(u,function(_,N){g+=N,g+=":",g+=_,g+=`\r
`}),g}function lp(u,g,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=vw(_),typeof u=="string"?_!=null&&$n(_):Ue(u,g,_))}function tt(u){ze.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(tt,ze);var HP=/^https?$/i,WP=["POST","PUT"];t=tt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kn.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(F){ww(this,F);return}if(u=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var V in N)_.set(V,N[V]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())_.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),V=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(WP,g,void 0)>=0)||N||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,J]of _)this.g.setRequestHeader(F,J);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(F){ww(this,F)}};function ww(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,xw(u),xu(u)}function xw(u){u.A||(u.A=!0,Ge(u,"complete"),Ge(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ge(this,"complete"),Ge(this,"abort"),xu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xu(this,!0)),tt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?_w(this):this.Xa())},t.Xa=function(){_w(this)};function _w(u){if(u.h&&typeof i<"u"){if(u.v&&vs(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ge(u,"readystatechange"),vs(u)==4){u.h=!1;try{const F=u.ca();e:switch(F){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var N;if(N=F===0){let J=String(u.D).match(uw)[1]||null;!J&&o.self&&o.self.location&&(J=o.self.location.protocol.slice(0,-1)),N=!HP.test(J?J.toLowerCase():"")}_=N}if(_)Ge(u,"complete"),Ge(u,"success");else{u.o=6;try{var V=vs(u)>2?u.g.statusText:""}catch{V=""}u.l=V+" ["+u.ca()+"]",xw(u)}}finally{xu(u)}}}}function xu(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,g||Ge(u,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function vs(u){return u.g?u.g.readyState:0}t.ca=function(){try{return vs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),Ai(g)}};function Ew(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qP(u){const g={};u=(u.g&&vs(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<u.length;N++){if(R(u[N]))continue;var _=mr(u[N]);const V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=g[V]||[];g[V]=F,F.push(_)}U(g,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wl(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function bw(u){this.za=0,this.i=[],this.j=new rn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wl("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wl("baseRetryDelayMs",5e3,u),this.Za=wl("retryDelaySeedMs",1e4,u),this.Ta=wl("forwardChannelMaxRetries",2,u),this.va=wl("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new iw(u&&u.concurrentRequestLimit),this.Ba=new BP,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=bw.prototype,t.ka=8,t.I=1,t.connect=function(u,g,_,N){Re(0),this.W=u,this.H=g||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.J=Pw(this,null,this.W),Eu(this)};function cp(u){if(Sw(u),u.I==3){var g=u.V++,_=gr(u.J);if(Ue(_,"SID",u.M),Ue(_,"RID",g),Ue(_,"TYPE","terminate"),xl(u,_),g=new on(u,u.j,g),g.M=2,g.A=vu(gr(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=g.A,_=!0),_||(g.g=Dw(g.j,null),g.g.ea(g.A)),g.F=Date.now(),yu(g)}Rw(u)}function _u(u){u.g&&(dp(u),u.g.cancel(),u.g=null)}function Sw(u){_u(u),u.v&&(o.clearTimeout(u.v),u.v=null),bu(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Eu(u){if(!ow(u.h)&&!u.m){u.m=!0;var g=u.Ea;j||C(),D||(j(),D=!0),T.add(g,u),u.D=0}}function GP(u,g){return aw(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=dt(d(u.Ea,u,g),kw(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const V=new on(this,this.j,u);let F=this.o;if(this.U&&(F?(F=Q(F),se(F,this.U)):F=this.U),this.u!==null||this.R||(V.J=F,F=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=Cw(this,V,g),_=gr(this.J),Ue(_,"RID",u),Ue(_,"CVER",22),this.G&&Ue(_,"X-HTTP-Session-Id",this.G),xl(this,_),F&&(this.R?g="headers="+$n(vw(F))+"&"+g:this.u&&lp(_,this.u,F)),ip(this.h,V),this.Ra&&Ue(_,"TYPE","init"),this.S?(Ue(_,"$req",g),Ue(_,"SID","null"),V.U=!0,tp(V,_,null)):tp(V,_,g),this.I=2}}else this.I==3&&(u?Tw(this,u):this.i.length==0||ow(this.h)||Tw(this))};function Tw(u,g){var _;g?_=g.l:_=u.V++;const N=gr(u.J);Ue(N,"SID",u.M),Ue(N,"RID",_),Ue(N,"AID",u.K),xl(u,N),u.u&&u.o&&lp(N,u.u,u.o),_=new on(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Cw(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ip(u.h,_),tp(_,N,g)}function xl(u,g){u.H&&L(u.H,function(_,N){Ue(g,N,_)}),u.l&&L({},function(_,N){Ue(g,N,_)})}function Cw(u,g,_){_=Math.min(u.i.length,_);const N=u.l?d(u.l.Ka,u.l,u):null;e:{var V=u.i;let _e=-1;for(;;){const ft=["count="+_];_e==-1?_>0?(_e=V[0].g,ft.push("ofs="+_e)):_e=0:ft.push("ofs="+_e);let Le=!0;for(let xt=0;xt<_;xt++){var F=V[xt].g;const yr=V[xt].map;if(F-=_e,F<0)_e=Math.max(0,V[xt].g-100),Le=!1;else try{F="req"+F+"_"||"";try{var J=yr instanceof Map?yr:Object.entries(yr);for(const[Li,ws]of J){let xs=ws;a(ws)&&(xs=fr(ws)),ft.push(F+Li+"="+encodeURIComponent(xs))}}catch(Li){throw ft.push(F+"type="+encodeURIComponent("_badmap")),Li}}catch{N&&N(yr)}}if(Le){J=ft.join("&");break e}}J=void 0}return u=u.i.splice(0,_),g.G=u,J}function Iw(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;j||C(),D||(j(),D=!0),T.add(g,u),u.A=0}}function up(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=dt(d(u.Da,u),kw(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,Nw(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=dt(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Re(10),_u(this),Nw(this))};function dp(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function Nw(u){u.g=new on(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=gr(u.na);Ue(g,"RID","rpc"),Ue(g,"SID",u.M),Ue(g,"AID",u.K),Ue(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ue(g,"TO",u.ia),Ue(g,"TYPE","xmlhttp"),xl(u,g),u.u&&u.o&&lp(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=vu(gr(g)),_.u=null,_.R=!0,nw(_,u)}t.Va=function(){this.C!=null&&(this.C=null,_u(this),up(this),Re(19))};function bu(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function Aw(u,g){var _=null;if(u.g==g){bu(u),dp(u),u.g=null;var N=2}else if(sp(u.h,g))_=g.G,lw(u.h,g),N=1;else return;if(u.I!=0){if(g.o)if(N==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var V=u.D;N=Pi(),Ge(N,new Mt(N,_)),Eu(u)}else Iw(u);else if(V=g.m,V==3||V==0&&g.X>0||!(N==1&&GP(u,g)||N==2&&up(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),V){case 1:Mi(u,5);break;case 4:Mi(u,10);break;case 3:Mi(u,6);break;default:Mi(u,2)}}}function kw(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function Mi(u,g){if(u.j.info("Error code "+g),g==2){var _=d(u.bb,u),N=u.Ua;const V=!N;N=new gs(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||hl(N,"https"),vu(N),V?UP(N.toString(),_):$P(N.toString(),_)}else Re(2);u.I=0,u.l&&u.l.pa(g),Rw(u),Sw(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function Rw(u){if(u.I=0,u.ja=[],u.l){const g=cw(u.h);(g.length!=0||u.i.length!=0)&&(b(u.ja,g),b(u.ja,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.oa()}}function Pw(u,g,_){var N=_ instanceof gs?gr(_):new gs(_);if(N.g!="")g&&(N.g=g+"."+N.g),fl(N,N.u);else{var V=o.location;N=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const F=new gs(null);N&&hl(F,N),g&&(F.g=g),V&&fl(F,V),_&&(F.h=_),N=F}return _=u.G,g=u.wa,_&&g&&Ue(N,_,g),Ue(N,"VER",u.ka),xl(u,N),N}function Dw(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new tt(new ap({ab:_})):new tt(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jw(){}t=jw.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Su(){}Su.prototype.g=function(u,g){return new gn(u,g)};function gn(u,g){ze.call(this),this.g=new bw(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!R(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new No(this)}f(gn,ze),gn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){cp(this.g)},gn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=fr(u),u=_);g.i.push(new DP(g.Ya++,u)),g.I==3&&Eu(g)},gn.prototype.N=function(){this.g.l=null,delete this.j,cp(this.g),delete this.g,gn.Z.N.call(this)};function Ow(u){ul.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}f(Ow,ul);function Mw(){Ri.call(this),this.status=1}f(Mw,Ri);function No(u){this.g=u}f(No,jw),No.prototype.ra=function(){Ge(this.g,"a")},No.prototype.qa=function(u){Ge(this.g,new Ow(u))},No.prototype.pa=function(u){Ge(this.g,new Mw)},No.prototype.oa=function(){Ge(this.g,"b")},Su.prototype.createWebChannel=Su.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,WI=function(){return new Su},HI=function(){return Pi()},BI=pr,Og={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},pn.NO_ERROR=0,pn.TIMEOUT=8,pn.HTTP_ERROR=6,Nd=pn,mn.COMPLETE="complete",$I=mn,cl.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",ze.prototype.listen=ze.prototype.J,Ol=cl,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,UI=tt}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});const r1="@firebase/firestore",s1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=new Iv("@firebase/firestore");function Do(){return ho.logLevel}function Z(t,...e){if(ho.logLevel<=Ce.DEBUG){const n=e.map(zv);ho.debug(`Firestore (${Za}): ${t}`,...n)}}function us(t,...e){if(ho.logLevel<=Ce.ERROR){const n=e.map(zv);ho.error(`Firestore (${Za}): ${t}`,...n)}}function fo(t,...e){if(ho.logLevel<=Ce.WARN){const n=e.map(zv);ho.warn(`Firestore (${Za}): ${t}`,...n)}}function zv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,qI(t,r,n)}function qI(t,e,n){let r=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw us(r),new Error(r)}function je(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||qI(e,s,r)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($t.UNAUTHENTICATED))}shutdown(){}}class M5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class L5{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){je(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ni,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ni)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string",31837,{l:r}),new GI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string",2055,{h:e}),new $t(e)}}class V5{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class F5{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new V5(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z5{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){je(this.o===void 0,3512);const r=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new i1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new i1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=U5(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function Mg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return nm(s)===nm(i)?Ie(s,i):nm(s)?1:-1}return Ie(t.length,e.length)}const $5=55296,B5=57343;function nm(t){const e=t.charCodeAt(0);return e>=$5&&e<=B5}function Ma(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="__name__";class xr{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=xr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ie(e.length,n.length)}static compareSegments(e,n){const r=xr.isNumericId(e),s=xr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?xr.extractNumericId(e).compare(xr.extractNumericId(n)):Mg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ti.fromString(e.substring(4,e.length-2))}}class Xe extends xr{construct(e,n,r){return new Xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Xe(n)}static emptyPath(){return new Xe([])}}const H5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends xr{construct(e,n,r){return new Tt(e,n,r)}static isValidIdentifier(e){return H5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===o1}static keyField(){return new Tt([o1])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new oe(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new oe(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new oe(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new oe(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(n)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Xe.fromString(e))}static fromName(e){return new ae(Xe.fromString(e).popFirst(5))}static empty(){return new ae(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t,e,n){if(!n)throw new oe(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QI(t,e,n,r){if(e===!0&&r===!0)throw new oe(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function a1(t){if(!ae.isDocumentKey(t))throw new oe(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function YI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Uv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function es(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uv(t);throw new oe(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t,e){const n={typeString:t};return e&&(n.value=e),n}function eu(t,e){if(!YI(t))throw new oe(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new oe(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=-62135596800,c1=1e6;class Ve{static now(){return Ve.fromMillis(Date.now())}static fromDate(e){return Ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*c1);return new Ve(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<l1)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/c1}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ve._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eu(e,Ve._jsonSchema))return new Ve(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-l1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ve._jsonSchemaVersion="firestore/timestamp/1.0",Ve._jsonSchema={type:ct("string",Ve._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new Ve(0,0))}static max(){return new fe(new Ve(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=-1;function q5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=fe.fromTimestamp(r===1e9?new Ve(n+1,0):new Ve(n,r));return new mi(s,ae.empty(),e)}function G5(t){return new mi(t.readTime,t.key,Ac)}class mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mi(fe.min(),ae.empty(),Ac)}static max(){return new mi(fe.max(),ae.empty(),Ac)}}function K5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Y5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==Q5)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const d=l;n(e[d]).next(h=>{o[d]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function X5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=-1;function Af(t){return t==null}function wh(t){return t===0&&1/t==-1/0}function J5(t){return typeof t=="number"&&Number.isInteger(t)&&!wh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="";function Z5(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=u1(e)),e=eF(t.get(n),e);return u1(e)}function eF(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case XI:n+="";break;default:n+=i}}return n}function u1(t){return t+XI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xu(this.root,e,this.comparator,!0)}}class Xu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??kt.RED,this.left=s??kt.EMPTY,this.right=i??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new kt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return kt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new h1(this.data.getIterator())}getIteratorFrom(e){return new h1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class h1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new vt(Tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ZI("Invalid base64 string: "+i):i}}(e);return new It(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new It(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const tF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(je(!!t,39018),typeof t=="string"){let e=0;const n=tF.exec(t);if(je(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function yi(t){return typeof t=="string"?It.fromBase64String(t):It.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="server_timestamp",tN="__type__",nN="__previous_value__",rN="__local_write_time__";function Bv(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tN])==null?void 0:r.stringValue)===eN}function kf(t){const e=t.mapValue.fields[nN];return Bv(e)?kf(e):e}function kc(t){const e=gi(t.mapValue.fields[rN].timestampValue);return new Ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e,n,r,s,i,o,a,l,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=d,this.isUsingEmulator=h}}const xh="(default)";class La{constructor(e,n){this.projectId=e,this.database=n||xh}static empty(){return new La("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof La&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN="__type__",iN="__max__",Ju={mapValue:{fields:{__type__:{stringValue:iN}}}},oN="__vector__",_h="value";function vi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bv(t)?4:sF(t)?9007199254740991:rF(t)?10:11:ue(28295,{value:t})}function Mr(t,e){if(t===e)return!0;const n=vi(t);if(n!==vi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return kc(t).isEqual(kc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=gi(s.timestampValue),a=gi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return yi(s.bytesValue).isEqual(yi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return st(s.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(s.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return st(s.integerValue)===st(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=st(s.doubleValue),a=st(i.doubleValue);return o===a?wh(o)===wh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ma(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(d1(o)!==d1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mr(o[l],a[l])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function Rc(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function Va(t,e){if(t===e)return 0;const n=vi(t),r=vi(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=st(i.integerValue||i.doubleValue),l=st(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return f1(t.timestampValue,e.timestampValue);case 4:return f1(kc(t),kc(e));case 5:return Mg(t.stringValue,e.stringValue);case 6:return function(i,o){const a=yi(i),l=yi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let d=0;d<a.length&&d<l.length;d++){const h=Ie(a[d],l[d]);if(h!==0)return h}return Ie(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ie(st(i.latitude),st(o.latitude));return a!==0?a:Ie(st(i.longitude),st(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return p1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,y,b,v;const a=i.fields||{},l=o.fields||{},d=(m=a[_h])==null?void 0:m.arrayValue,h=(y=l[_h])==null?void 0:y.arrayValue,f=Ie(((b=d==null?void 0:d.values)==null?void 0:b.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:p1(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ju.mapValue&&o===Ju.mapValue)return 0;if(i===Ju.mapValue)return 1;if(o===Ju.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),d=o.fields||{},h=Object.keys(d);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Mg(l[f],h[f]);if(m!==0)return m;const y=Va(a[l[f]],d[h[f]]);if(y!==0)return y}return Ie(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function f1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=gi(t),r=gi(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function p1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Va(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function Fa(t){return Lg(t)}function Lg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return yi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Lg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Lg(n.fields[o])}`;return s+"}"}(t.mapValue):ue(61005,{value:t})}function Ad(t){switch(vi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=kf(t);return e?16+Ad(e):16;case 5:return 2*t.stringValue.length;case 6:return yi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ad(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return xo(r.fields,(i,o)=>{s+=i.length+Ad(o)}),s}(t.mapValue);default:throw ue(13486,{value:t})}}function Vg(t){return!!t&&"integerValue"in t}function Hv(t){return!!t&&"arrayValue"in t}function m1(t){return!!t&&"nullValue"in t}function g1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kd(t){return!!t&&"mapValue"in t}function rF(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sN])==null?void 0:r.stringValue)===oN}function Jl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return xo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Jl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Jl(t.arrayValue.values[n]);return e}return{...t}}function sF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(n)}setAll(e){let n=Tt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Jl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());kd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];kd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){xo(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new On(Jl(this.value))}}function aN(t){const e=[];return xo(t.fields,(n,r)=>{const s=new Tt([n]);if(kd(r)){const i=aN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ht(e,0,fe.min(),fe.min(),fe.min(),On.empty(),0)}static newFoundDocument(e,n,r,s){return new Ht(e,1,n,fe.min(),r,s,0)}static newNoDocument(e,n){return new Ht(e,2,n,fe.min(),fe.min(),On.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,fe.min(),fe.min(),On.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,n){this.position=e,this.inclusive=n}}function y1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=Va(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function v1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n="asc"){this.field=e,this.dir=n}}function iF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{}class gt extends lN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aF(e,n,r):n==="array-contains"?new uF(e,r):n==="in"?new dF(e,r):n==="not-in"?new hF(e,r):n==="array-contains-any"?new fF(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lF(e,r):new cF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Va(n,this.value)):n!==null&&vi(this.value)===vi(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends lN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Lr(e,n)}matches(e){return cN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function cN(t){return t.op==="and"}function uN(t){return oF(t)&&cN(t)}function oF(t){for(const e of t.filters)if(e instanceof Lr)return!1;return!0}function Fg(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+Fa(t.value);if(uN(t))return t.filters.map(e=>Fg(e)).join(",");{const e=t.filters.map(n=>Fg(n)).join(",");return`${t.op}(${e})`}}function dN(t,e){return t instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.field.isEqual(s.field)&&Mr(r.value,s.value)}(t,e):t instanceof Lr?function(r,s){return s instanceof Lr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&dN(o,s.filters[a]),!0):!1}(t,e):void ue(19439)}function hN(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Fa(n.value)}`}(t):t instanceof Lr?function(n){return n.op.toString()+" {"+n.getFilters().map(hN).join(" ,")+"}"}(t):"Filter"}class aF extends gt{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class lF extends gt{constructor(e,n){super(e,"in",n),this.keys=fN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cF extends gt{constructor(e,n){super(e,"not-in",n),this.keys=fN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fN(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class uF extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hv(n)&&Rc(n.arrayValue,this.value)}}class dF extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rc(this.value.arrayValue,n)}}class hF extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rc(this.value.arrayValue,n)}}class fF extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function w1(t,e=null,n=[],r=[],s=null,i=null,o=null){return new pF(t,e,n,r,s,i,o)}function Wv(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Af(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fa(r)).join(",")),e.Te=n}return e.Te}function qv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!dN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!v1(t.startAt,e.startAt)&&v1(t.endAt,e.endAt)}function zg(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mF(t,e,n,r,s,i,o,a){return new Rf(t,e,n,r,s,i,o,a)}function Pf(t){return new Rf(t)}function x1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gF(t){return t.collectionGroup!==null}function Zl(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new vt(Tt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new bh(i,r))}),n.has(Tt.keyField().canonicalString())||e.Ie.push(new bh(Tt.keyField(),r))}return e.Ie}function Rr(t){const e=ye(t);return e.Ee||(e.Ee=yF(e,Zl(t))),e.Ee}function yF(t,e){if(t.limitType==="F")return w1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new bh(s.field,i)});const n=t.endAt?new Eh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Eh(t.startAt.position,t.startAt.inclusive):null;return w1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ug(t,e,n){return new Rf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return qv(Rr(t),Rr(e))&&t.limitType===e.limitType}function pN(t){return`${Wv(Rr(t))}|lt:${t.limitType}`}function jo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>hN(s)).join(", ")}]`),Af(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fa(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fa(s)).join(",")),`Target(${r})`}(Rr(t))}; limitType=${t.limitType})`}function jf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ae.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Zl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const d=y1(o,a,l);return o.inclusive?d<=0:d<0}(r.startAt,Zl(r),s)||r.endAt&&!function(o,a,l){const d=y1(o,a,l);return o.inclusive?d>=0:d>0}(r.endAt,Zl(r),s))}(t,e)}function vF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function mN(t){return(e,n)=>{let r=!1;for(const s of Zl(t)){const i=wF(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wF(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),d=a.data.field(i);return l!==null&&d!==null?Va(l,d):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return JI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF=new et(ae.comparator);function ds(){return xF}const gN=new et(ae.comparator);function Ml(...t){let e=gN;for(const n of t)e=e.insert(n.key,n);return e}function yN(t){let e=gN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wi(){return ec()}function vN(){return ec()}function ec(){return new _o(t=>t.toString(),(t,e)=>t.isEqual(e))}const _F=new et(ae.comparator),EF=new vt(ae.comparator);function Ne(...t){let e=EF;for(const n of t)e=e.add(n);return e}const bF=new vt(Ie);function SF(){return bF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wh(e)?"-0":e}}function wN(t){return{integerValue:""+t}}function TF(t,e){return J5(e)?wN(e):Gv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this._=void 0}}function CF(t,e,n){return t instanceof Pc?function(s,i){const o={fields:{[tN]:{stringValue:eN},[rN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Bv(i)&&(i=kf(i)),i&&(o.fields[nN]=i),{mapValue:o}}(n,e):t instanceof Dc?_N(t,e):t instanceof jc?EN(t,e):function(s,i){const o=xN(s,i),a=_1(o)+_1(s.Ae);return Vg(o)&&Vg(s.Ae)?wN(a):Gv(s.serializer,a)}(t,e)}function IF(t,e,n){return t instanceof Dc?_N(t,e):t instanceof jc?EN(t,e):n}function xN(t,e){return t instanceof Sh?function(r){return Vg(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Pc extends Of{}class Dc extends Of{constructor(e){super(),this.elements=e}}function _N(t,e){const n=bN(e);for(const r of t.elements)n.some(s=>Mr(s,r))||n.push(r);return{arrayValue:{values:n}}}class jc extends Of{constructor(e){super(),this.elements=e}}function EN(t,e){let n=bN(e);for(const r of t.elements)n=n.filter(s=>!Mr(s,r));return{arrayValue:{values:n}}}class Sh extends Of{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function _1(t){return st(t.integerValue||t.doubleValue)}function bN(t){return Hv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e,n){this.field=e,this.transform=n}}function AF(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Dc&&s instanceof Dc||r instanceof jc&&s instanceof jc?Ma(r.elements,s.elements,Mr):r instanceof Sh&&s instanceof Sh?Mr(r.Ae,s.Ae):r instanceof Pc&&s instanceof Pc}(t.transform,e.transform)}class kF{constructor(e,n){this.version=e,this.transformResults=n}}class ts{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ts}static exists(e){return new ts(void 0,e)}static updateTime(e){return new ts(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mf{}function SN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new CN(t.key,ts.none()):new tu(t.key,t.data,ts.none());{const n=t.data,r=On.empty();let s=new vt(Tt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Eo(t.key,r,new Jn(s.toArray()),ts.none())}}function RF(t,e,n){t instanceof tu?function(s,i,o){const a=s.value.clone(),l=b1(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Eo?function(s,i,o){if(!Rd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=b1(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(TN(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function tc(t,e,n,r){return t instanceof tu?function(i,o,a,l){if(!Rd(i.precondition,o))return a;const d=i.value.clone(),h=S1(i.fieldTransforms,l,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Eo?function(i,o,a,l){if(!Rd(i.precondition,o))return a;const d=S1(i.fieldTransforms,l,o),h=o.data;return h.setAll(TN(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return Rd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function PF(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=xN(r.transform,s||null);i!=null&&(n===null&&(n=On.empty()),n.set(r.field,i))}return n||null}function E1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ma(r,s,(i,o)=>AF(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tu extends Mf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Eo extends Mf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function TN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function b1(t,e,n){const r=new Map;je(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,IF(o,a,n[s]))}return r}function S1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,CF(i,o,e))}return r}class CN extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DF extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&RF(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=tc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=tc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=SN(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,(n,r)=>E1(n,r))&&Ma(this.baseMutations,e.baseMutations,(n,r)=>E1(n,r))}}class Kv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return _F}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Kv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OF=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ae;function LF(t){switch(t){case G.OK:return ue(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function IN(t){if(t===void 0)return us("GRPC error has no .code"),G.UNKNOWN;switch(t){case at.OK:return G.OK;case at.CANCELLED:return G.CANCELLED;case at.UNKNOWN:return G.UNKNOWN;case at.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case at.INTERNAL:return G.INTERNAL;case at.UNAVAILABLE:return G.UNAVAILABLE;case at.UNAUTHENTICATED:return G.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case at.NOT_FOUND:return G.NOT_FOUND;case at.ALREADY_EXISTS:return G.ALREADY_EXISTS;case at.PERMISSION_DENIED:return G.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case at.ABORTED:return G.ABORTED;case at.OUT_OF_RANGE:return G.OUT_OF_RANGE;case at.UNIMPLEMENTED:return G.UNIMPLEMENTED;case at.DATA_LOSS:return G.DATA_LOSS;default:return ue(39323,{code:t})}}(Ae=at||(at={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF=new ti([4294967295,4294967295],0);function T1(t){const e=VF().encode(t),n=new zI;return n.update(e),new Uint8Array(n.digest())}function C1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ti([n,r],0),new ti([s,i],0)]}class Qv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ll(`Invalid padding: ${n}`);if(r<0)throw new Ll(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ll(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ll(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ti.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ti.fromNumber(r)));return s.compare(FF)===1&&(s=new ti([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=T1(e),[r,s]=C1(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Qv(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=T1(e),[r,s]=C1(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ll extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lf(fe.min(),s,new et(Ie),ds(),Ne())}}class nu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new nu(r,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class NN{constructor(e,n){this.targetId=e,this.Ce=n}}class AN{constructor(e,n,r=It.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class I1{constructor(){this.ve=0,this.Fe=N1(),this.Me=It.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),n=Ne(),r=Ne();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ue(38017,{changeType:i})}}),new nu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=N1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class zF{constructor(e){this.Ge=e,this.ze=new Map,this.je=ds(),this.Je=Zu(),this.He=Zu(),this.Ye=new et(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(zg(i))if(r===0){const o=new ae(i.path);this.et(n,o,Ht.newNoDocument(o,fe.min()))}else je(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=yi(r).toUint8Array()}catch(l){if(l instanceof ZI)return fo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Qv(o,s,i)}catch(l){return fo(l instanceof Ll?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&zg(a.target)){const l=new ae(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Ht.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ne();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const d=this.ot(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Lf(e,n,this.Ye,this.je,r);return this.je=ds(),this.Je=Zu(),this.He=Zu(),this.Ye=new et(Ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new I1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new vt(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new vt(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new I1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zu(){return new et(ae.comparator)}function N1(){return new et(ae.comparator)}const UF={asc:"ASCENDING",desc:"DESCENDING"},$F={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BF={and:"AND",or:"OR"};class HF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $g(t,e){return t.useProto3Json||Af(e)?e:{value:e}}function Th(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WF(t,e){return Th(t,e.toTimestamp())}function Pr(t){return je(!!t,49232),fe.fromTimestamp(function(n){const r=gi(n);return new Ve(r.seconds,r.nanos)}(t))}function Yv(t,e){return Bg(t,e).canonicalString()}function Bg(t,e){const n=function(s){return new Xe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function RN(t){const e=Xe.fromString(t);return je(MN(e),10190,{key:e.toString()}),e}function Hg(t,e){return Yv(t.databaseId,e.path)}function rm(t,e){const n=RN(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(DN(n))}function PN(t,e){return Yv(t.databaseId,e)}function qF(t){const e=RN(t);return e.length===4?Xe.emptyPath():DN(e)}function Wg(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DN(t){return je(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function A1(t,e,n){return{name:Hg(t,e),fields:n.value.mapValue.fields}}function GF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ue(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(je(h===void 0||typeof h=="string",58123),It.fromBase64String(h||"")):(je(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),It.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?G.UNKNOWN:IN(d.code);return new oe(h,d.message||"")}(o);n=new AN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=rm(t,r.document.name),i=Pr(r.document.updateTime),o=r.document.createTime?Pr(r.document.createTime):fe.min(),a=new On({mapValue:{fields:r.document.fields}}),l=Ht.newFoundDocument(s,i,o,a),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Pd(d,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=rm(t,r.document),i=r.readTime?Pr(r.readTime):fe.min(),o=Ht.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Pd([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=rm(t,r.document),i=r.removedTargetIds||[];n=new Pd([],i,s,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new MF(s,i),a=r.targetId;n=new NN(a,o)}}return n}function KF(t,e){let n;if(e instanceof tu)n={update:A1(t,e.key,e.value)};else if(e instanceof CN)n={delete:Hg(t,e.key)};else if(e instanceof Eo)n={update:A1(t,e.key,e.data),updateMask:r9(e.fieldMask)};else{if(!(e instanceof DF))return ue(16599,{Vt:e.type});n={verify:Hg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Dc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Sh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:WF(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ue(27497)}(t,e.precondition)),n}function QF(t,e){return t&&t.length>0?(je(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Pr(s.updateTime):Pr(i);return o.isEqual(fe.min())&&(o=Pr(i)),new kF(o,s.transformResults||[])}(n,e))):[]}function YF(t,e){return{documents:[PN(t,e.path)]}}function XF(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=PN(t,s);const i=function(d){if(d.length!==0)return ON(Lr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Oo(m.field),direction:e9(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$g(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function JF(t){let e=qF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){je(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=jN(f);return m instanceof Lr&&uN(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new bh(Mo(b.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Af(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,y=f.values||[];return new Eh(y,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,y=f.values||[];return new Eh(y,m)}(n.endAt)),mF(e,s,o,i,a,"F",l,d)}function ZF(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mo(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Mo(n.unaryFilter.field);return gt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Mo(n.unaryFilter.field);return gt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mo(n.unaryFilter.field);return gt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return gt.create(Mo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Lr.create(n.compositeFilter.filters.map(r=>jN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function e9(t){return UF[t]}function t9(t){return $F[t]}function n9(t){return BF[t]}function Oo(t){return{fieldPath:t.canonicalString()}}function Mo(t){return Tt.fromServerFormat(t.fieldPath)}function ON(t){return t instanceof gt?function(n){if(n.op==="=="){if(g1(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NAN"}};if(m1(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(g1(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NAN"}};if(m1(n.value))return{unaryFilter:{field:Oo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oo(n.field),op:t9(n.op),value:n.value}}}(t):t instanceof Lr?function(n){const r=n.getFilters().map(s=>ON(s));return r.length===1?r[0]:{compositeFilter:{op:n9(n.op),filters:r}}}(t):ue(54877,{filter:t})}function r9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function MN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n,r,s,i=fe.min(),o=fe.min(),a=It.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e){this.yt=e}}function i9(t){const e=JF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ug(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(){this.Cn=new a9}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(mi.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class a9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new vt(Xe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new vt(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LN=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(LN,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new za(0)}static cr(){return new za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="LruGarbageCollector",l9=1048576;function P1([t,e],[n,r]){const s=Ie(t,n);return s===0?Ie(e,r):s}class c9{constructor(e){this.Ir=e,this.buffer=new vt(P1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();P1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class u9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Z(R1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tl(n)?Z(R1,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Vr(3e5)})}}class d9{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return B.resolve(Nf.ce);const r=new c9(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(k1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Do()<=Ce.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(d-l)+`ms
Total Duration: ${d-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function h9(t,e){return new d9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(){this.changes=new _o(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&tc(r.mutation,s,Jn.empty(),Ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ne()){const s=Wi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ml();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ds();const o=ec(),a=function(){return ec()}();return n.forEach((l,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Eo)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),tc(h.mutation,d,h.mutation.getFieldMask(),Ve.now())):o.set(d.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>a.set(d,new p9(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ec();let s=new et((o,a)=>o-a),i=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const d=n.get(l);if(d===null)return;let h=r.get(l)||Jn.empty();h=a.applyToLocalView(d,h),r.set(l,h);const f=(s.get(a.batchId)||Ne()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),d=l.key,h=l.value,f=vN();h.forEach(m=>{if(!i.has(m)){const y=SN(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Wi());let a=Ac,l=i;return o.next(d=>B.forEach(d,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,l,d,Ne())).next(h=>({batchId:a,changes:yN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let s=Ml();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ml();return this.indexManager.getCollectionParents(e,i).next(a=>B.forEach(a,l=>{const d=function(f,m){return new Rf(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ht.newInvalidDocument(h)))});let a=Ml();return o.forEach((l,d)=>{const h=i.get(l);h!==void 0&&tc(h.mutation,d,Jn.empty(),Ve.now()),jf(n,d)&&(a=a.insert(l,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Pr(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:i9(s.bundledQuery),readTime:Pr(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(){this.overlays=new et(ae.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wi();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Wi(),i=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,d=l.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new et((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Wi(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=Wi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=s)););return B.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new OF(n,r));let i=this.qr.get(n);i===void 0&&(i=Ne(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.Qr=new vt(_t.$r),this.Ur=new vt(_t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new _t(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new _t(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ae(new Xe([])),r=new _t(n,e),s=new _t(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new Xe([])),r=new _t(n,e),s=new _t(n,e+1);let i=Ne();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new _t(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class _t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vt(_t.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new jF(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new _t(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?$v:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new vt(Ie);return n.forEach(s=>{const i=new _t(s,0),o=new _t(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),B.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ae.isDocumentKey(i)||(i=i.child(""));const o=new _t(new ae(i),0);let a=new vt(Ie);return this.Zr.forEachWhile(l=>{const d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(a=a.add(l.Yr)),!0)},o),B.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){je(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return B.forEach(n.mutations,s=>{const i=new _t(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new _t(n,0),s=this.Zr.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e){this.ri=e,this.docs=function(){return new et(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=ds();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ht.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ds();const o=n.path,a=new ae(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:d,value:{document:h}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||K5(G5(h),r)<=0||(s.has(h.key)||jf(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ue(9500)}ii(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _9(this)}getSize(e){return B.resolve(this.size)}}class _9 extends f9{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E9{constructor(e){this.persistence=e,this.si=new _o(n=>Wv(n),qv),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.oi=0,this._i=new Xv,this.targetCount=0,this.ai=za.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new za(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nf(0),this.li=!1,this.li=!0,this.hi=new v9,this.referenceDelegate=e(this),this.Pi=new E9(this),this.indexManager=new o9,this.remoteDocumentCache=function(s){return new x9(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new s9(n),this.Ii=new g9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new y9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new w9(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const s=new b9(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return B.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class b9 extends Y5{constructor(e){super(),this.currentSequenceNumber=e}}class Jv{constructor(e){this.persistence=e,this.Ri=new Xv,this.Vi=null}static mi(e){return new Jv(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,r=>{const s=ae.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,fe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ch{constructor(e,n){this.persistence=e,this.pi=new _o(r=>Z5(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=h9(this,n)}static mi(e,n){return new Ch(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?B.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,fe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ad(e.data.value)),n}br(e,n,r){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return B.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ne(),s=Ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return gV()?8:X5(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new S9;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Do()<=Ce.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Do()<=Ce.DEBUG&&Z("QueryEngine","Query:",jo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Do()<=Ce.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rr(n))):B.resolve())}ys(e,n){if(x1(n))return B.resolve(null);let r=Rr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Ug(n,null,"F"),r=Rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ne(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const d=this.Ds(n,a);return this.Cs(n,d,o,l.readTime)?this.ys(e,Ug(n,null,"F")):this.vs(e,d,n,l)}))})))}ws(e,n,r,s){return x1(n)||s.isEqual(fe.min())?B.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?B.resolve(null):(Do()<=Ce.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jo(n)),this.vs(e,o,n,q5(s,Ac)).next(a=>a))})}Ds(e,n){let r=new vt(mN(e));return n.forEach((s,i)=>{jf(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Do()<=Ce.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",jo(n)),this.ps.getDocumentsMatchingQuery(e,n,mi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="LocalStore",C9=3e8;class I9{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new et(Ie),this.xs=new _o(i=>Wv(i),qv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new m9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function N9(t,e,n,r){return new I9(t,e,n,r)}async function FN(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ne();for(const d of s){o.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}for(const d of i){a.push(d.batchId);for(const h of d.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})}function A9(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,d,h){const f=d.batch,m=f.keys();let y=B.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(l,b)).next(v=>{const E=d.docVersions.get(b);je(E!==null,48541),v.version.compareTo(E)<0&&(f.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),h.addEntry(v)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ne();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(l=l.add(a.batch.mutations[d].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function zN(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function k9(t,e){const n=ye(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(It.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(v,E,x){return v.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=C9?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,h)&&a.push(n.Pi.updateTargetData(i,y))});let l=ds(),d=Ne();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(R9(i,o,e.documentUpdates).next(h=>{l=h.ks,d=h.qs})),!r.isEqual(fe.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,d)).next(()=>l)}).then(i=>(n.Ms=s,i))}function R9(t,e,n){let r=Ne(),s=Ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ds();return n.forEach((a,l)=>{const d=i.get(a);l.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(fe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Z(e0,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",l.version)}),{ks:o,qs:s}})}function P9(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=$v),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function D9(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Bs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function qg(t,e,n){const r=ye(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!tl(o))throw o;Z(e0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function D1(t,e,n){const r=ye(t);let s=fe.min(),i=Ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,h){const f=ye(l),m=f.xs.get(h);return m!==void 0?B.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,o,Rr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:fe.min(),n?i:Ne())).next(a=>(j9(r,vF(e),a),{documents:a,Qs:i})))}function j9(t,e,n){let r=t.Os.get(e)||fe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class j1{constructor(){this.activeTargetIds=SF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class O9{constructor(){this.Mo=new j1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new j1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="ConnectivityMonitor";class M1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Z(O1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Z(O1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ed=null;function Gg(){return ed===null?ed=function(){return 268435456+Math.round(2147483648*Math.random())}():ed++,"0x"+ed.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="RestConnection",L9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===xh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Gg(),a=this.zo(e,n.toUriEncodedString());Z(sm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:d}=new URL(a),h=Ya(d);return this.Jo(e,a,l,r,h).then(f=>(Z(sm,`Received RPC '${e}' ${o}: `,f),f),f=>{throw fo(sm,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Za}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=L9[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class z9 extends V9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Gg();return new Promise((a,l)=>{const d=new UI;d.setWithCredentials(!0),d.listenOnce($I.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Nd.NO_ERROR:const f=d.getResponseJson();Z(zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Nd.TIMEOUT:Z(zt,`RPC '${e}' ${o} timed out`),l(new oe(G.DEADLINE_EXCEEDED,"Request time out"));break;case Nd.HTTP_ERROR:const m=d.getStatus();if(Z(zt,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const v=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(w)>=0?w:G.UNKNOWN}(b.status);l(new oe(v,b.message))}else l(new oe(G.UNKNOWN,"Server responded with status "+d.getStatus()))}else l(new oe(G.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Z(zt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);Z(zt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Gg(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=WI(),a=HI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");Z(zt,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let m=!1,y=!1;const b=new F9({Yo:E=>{y?Z(zt,`Not sending because RPC '${e}' stream ${s} is closed:`,E):(m||(Z(zt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),Z(zt,`RPC '${e}' stream ${s} sending:`,E),f.send(E))},Zo:()=>f.close()}),v=(E,x,w)=>{E.listen(x,S=>{try{w(S)}catch(k){setTimeout(()=>{throw k},0)}})};return v(f,Ol.EventType.OPEN,()=>{y||(Z(zt,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),v(f,Ol.EventType.CLOSE,()=>{y||(y=!0,Z(zt,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(f))}),v(f,Ol.EventType.ERROR,E=>{y||(y=!0,fo(zt,`RPC '${e}' stream ${s} transport errored. Name:`,E.name,"Message:",E.message),b.a_(new oe(G.UNAVAILABLE,"The operation could not be completed")))}),v(f,Ol.EventType.MESSAGE,E=>{var x;if(!y){const w=E.data[0];je(!!w,16349);const S=w,k=(S==null?void 0:S.error)||((x=S[0])==null?void 0:x.error);if(k){Z(zt,`RPC '${e}' stream ${s} received error:`,k);const j=k.status;let D=function(I){const A=at[I];if(A!==void 0)return IN(A)}(j),T=k.message;D===void 0&&(D=G.INTERNAL,T="Unknown error status: "+j+" with message "+k.message),y=!0,b.a_(new oe(D,T)),f.close()}else Z(zt,`RPC '${e}' stream ${s} received:`,w),b.u_(w)}}),v(a,BI.STAT_EVENT,E=>{E.stat===Og.PROXY?Z(zt,`RPC '${e}' stream ${s} detected buffering proxy`):E.stat===Og.NOPROXY&&Z(zt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(t){return new HF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1="PersistentStream";class $N{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(us(n.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new oe(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Z(L1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Z(L1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U9 extends $N{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=GF(this.serializer,e),r=function(i){if(!("targetChange"in i))return fe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?Pr(o.readTime):fe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Wg(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=zg(l)?{documents:YF(i,l)}:{query:XF(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=kN(i,o.resumeToken);const d=$g(i,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=Th(i,o.snapshotVersion.toTimestamp());const d=$g(i,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const r=ZF(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Wg(this.serializer),n.removeTarget=e,this.q_(n)}}class $9 extends $N{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=QF(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Wg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KF(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{}class H9 extends B9{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,Bg(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new oe(G.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,Bg(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(G.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class W9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(us(n),this.aa=!1):Z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="RemoteStore";class q9{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{bo(this)&&(Z(po,"Restarting streams for network reachability change."),await async function(l){const d=ye(l);d.Ea.add(4),await ru(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ff(d)}(this))})}),this.Ra=new W9(r,s)}}async function Ff(t){if(bo(t))for(const e of t.da)await e(!0)}async function ru(t){for(const e of t.da)await e(!1)}function BN(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),s0(n)?r0(n):nl(n).O_()&&n0(n,e))}function t0(t,e){const n=ye(t),r=nl(n);n.Ia.delete(e),r.O_()&&HN(n,e),n.Ia.size===0&&(r.O_()?r.L_():bo(n)&&n.Ra.set("Unknown"))}function n0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).Y_(e)}function HN(t,e){t.Va.Ue(e),nl(t).Z_(e)}function r0(t){t.Va=new zF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.Ra.ua()}function s0(t){return bo(t)&&!nl(t).x_()&&t.Ia.size>0}function bo(t){return ye(t).Ea.size===0}function WN(t){t.Va=void 0}async function G9(t){t.Ra.set("Online")}async function K9(t){t.Ia.forEach((e,n)=>{n0(t,e)})}async function Q9(t,e){WN(t),s0(t)?(t.Ra.ha(e),r0(t)):t.Ra.set("Unknown")}async function Y9(t,e,n){if(t.Ra.set("Online"),e instanceof AN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){Z(po,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ih(t,r)}else if(e instanceof Pd?t.Va.Ze(e):e instanceof NN?t.Va.st(e):t.Va.tt(e),!n.isEqual(fe.min()))try{const r=await zN(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,d)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),HN(i,l);const f=new Bs(h.target,l,d,h.sequenceNumber);n0(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z(po,"Failed to raise snapshot:",r),await Ih(t,r)}}async function Ih(t,e,n){if(!tl(e))throw e;t.Ea.add(1),await ru(t),t.Ra.set("Offline"),n||(n=()=>zN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z(po,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ff(t)})}function qN(t,e){return e().catch(n=>Ih(t,n,e))}async function zf(t){const e=ye(t),n=wi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$v;for(;X9(e);)try{const s=await P9(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,J9(e,s)}catch(s){await Ih(e,s)}GN(e)&&KN(e)}function X9(t){return bo(t)&&t.Ta.length<10}function J9(t,e){t.Ta.push(e);const n=wi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function GN(t){return bo(t)&&!wi(t).x_()&&t.Ta.length>0}function KN(t){wi(t).start()}async function Z9(t){wi(t).ra()}async function ez(t){const e=wi(t);for(const n of t.Ta)e.ea(n.mutations)}async function tz(t,e,n){const r=t.Ta.shift(),s=Kv.from(r,e,n);await qN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await zf(t)}async function nz(t,e){e&&wi(t).X_&&await async function(r,s){if(function(o){return LF(o)&&o!==G.ABORTED}(s.code)){const i=r.Ta.shift();wi(r).B_(),await qN(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await zf(r)}}(t,e),GN(t)&&KN(t)}async function V1(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),Z(po,"RemoteStore received new credentials");const r=bo(n);n.Ea.add(3),await ru(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ff(n)}async function rz(t,e){const n=ye(t);e?(n.Ea.delete(2),await Ff(n)):e||(n.Ea.add(2),await ru(n),n.Ra.set("Unknown"))}function nl(t){return t.ma||(t.ma=function(n,r,s){const i=ye(n);return i.sa(),new U9(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:G9.bind(null,t),t_:K9.bind(null,t),r_:Q9.bind(null,t),H_:Y9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),s0(t)?r0(t):t.Ra.set("Unknown")):(await t.ma.stop(),WN(t))})),t.ma}function wi(t){return t.fa||(t.fa=function(n,r,s){const i=ye(n);return i.sa(),new $9(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Z9.bind(null,t),r_:nz.bind(null,t),ta:ez.bind(null,t),na:tz.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await zf(t)):(await t.fa.stop(),t.Ta.length>0&&(Z(po,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new i0(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o0(t,e){if(us("AsyncQueue",`${e}: ${t}`),tl(t))return new oe(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{static emptySet(e){return new la(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Ml(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof la)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new la;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.ga=new et(ae.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ua{constructor(e,n,r,s,i,o,a,l,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ua(e,n,la.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class iz{constructor(){this.queries=z1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ye(n),i=s.queries;s.queries=z1(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new oe(G.ABORTED,"Firestore shutting down"))}}function z1(){return new _o(t=>pN(t),Df)}async function QN(t,e){const n=ye(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new sz,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=o0(o,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&a0(n)}async function YN(t,e){const n=ye(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oz(t,e){const n=ye(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&a0(n)}function az(t,e,n){const r=ye(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function a0(t){t.Ca.forEach(e=>{e.next()})}var Kg,U1;(U1=Kg||(Kg={})).Ma="default",U1.Cache="cache";class XN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.key=e}}class ZN{constructor(e){this.key=e}}class lz{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=mN(e),this.tu=new la(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new F1,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=jf(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),v=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let E=!1;m&&y?m.data.isEqual(y.data)?b!==v&&(r.track({type:3,doc:y}),E=!0):this.su(m,y)||(r.track({type:2,doc:y}),E=!0,(l&&this.eu(y,l)>0||d&&this.eu(y,d)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),E=!0):m&&!y&&(r.track({type:1,doc:m}),E=!0,(l||d)&&(a=!0)),E&&(y?(o=o.add(y),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,b){const v=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:E})}};return v(y)-v(b)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,d=l!==this.Za;return this.Za=l,o.length!==0||d?{snapshot:new Ua(this.query,e.tu,i,o,e.mutatedKeys,l===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new F1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new ZN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new JN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const l0="SyncEngine";class cz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uz{constructor(e){this.key=e,this.hu=!1}}class dz{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new _o(a=>pN(a),Df),this.Iu=new Map,this.Eu=new Set,this.du=new et(ae.comparator),this.Au=new Map,this.Ru=new Xv,this.Vu={},this.mu=new Map,this.fu=za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hz(t,e,n=!0){const r=iA(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await eA(r,e,n,!0),s}async function fz(t,e){const n=iA(t);await eA(n,e,!0,!1)}async function eA(t,e,n,r){const s=await D9(t.localStore,Rr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await pz(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&BN(t.remoteStore,s),a}async function pz(t,e,n,r,s){t.pu=(f,m,y)=>async function(v,E,x,w){let S=E.view.ru(x);S.Cs&&(S=await D1(v.localStore,E.query,!1).then(({documents:T})=>E.view.ru(T,S)));const k=w&&w.targetChanges.get(E.targetId),j=w&&w.targetMismatches.get(E.targetId)!=null,D=E.view.applyChanges(S,v.isPrimaryClient,k,j);return B1(v,E.targetId,D.au),D.snapshot}(t,f,m,y);const i=await D1(t.localStore,e,!0),o=new lz(e,i.Qs),a=o.ru(i.documents),l=nu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(a,t.isPrimaryClient,l);B1(t,n,d.au);const h=new cz(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function mz(t,e,n){const r=ye(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Df(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await qg(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&t0(r.remoteStore,s.targetId),Qg(r,s.targetId)}).catch(el)):(Qg(r,s.targetId),await qg(r.localStore,s.targetId,!0))}async function gz(t,e){const n=ye(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),t0(n.remoteStore,r.targetId))}async function yz(t,e,n){const r=Sz(t);try{const s=await function(o,a){const l=ye(o),d=Ve.now(),h=a.reduce((y,b)=>y.add(b.key),Ne());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=ds(),v=Ne();return l.Ns.getEntries(y,h).next(E=>{b=E,b.forEach((x,w)=>{w.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,b)).next(E=>{f=E;const x=[];for(const w of a){const S=PF(w,f.get(w.key).overlayedDocument);S!=null&&x.push(new Eo(w.key,S,aN(S.value.mapValue),ts.exists(!0)))}return l.mutationQueue.addMutationBatch(y,d,x,a)}).next(E=>{m=E;const x=E.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(y,E.batchId,x)})}).then(()=>({batchId:m.batchId,changes:yN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let d=o.Vu[o.currentUser.toKey()];d||(d=new et(Ie)),d=d.insert(a,l),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await su(r,s.changes),await zf(r.remoteStore)}catch(s){const i=o0(s,"Failed to persist write");n.reject(i)}}async function tA(t,e){const n=ye(t);try{const r=await k9(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?je(o.hu,14607):s.removedDocuments.size>0&&(je(o.hu,42227),o.hu=!1))}),await su(n,r,e)}catch(r){await el(r)}}function $1(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let d=!1;l.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(a)&&(d=!0)}),d&&a0(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vz(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new et(ae.comparator);o=o.insert(i,Ht.newNoDocument(i,fe.min()));const a=Ne().add(i),l=new Lf(fe.min(),new Map,new et(Ie),o,a);await tA(r,l),r.du=r.du.remove(i),r.Au.delete(e),c0(r)}else await qg(r.localStore,e,!1).then(()=>Qg(r,e,n)).catch(el)}async function wz(t,e){const n=ye(t),r=e.batch.batchId;try{const s=await A9(n.localStore,e);rA(n,r,null),nA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await su(n,s)}catch(s){await el(s)}}async function xz(t,e,n){const r=ye(t);try{const s=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return l.mutationQueue.lookupMutationBatch(d,a).next(f=>(je(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(d,f))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>l.localDocuments.getDocuments(d,h))})}(r.localStore,e);rA(r,e,n),nA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await su(r,s)}catch(s){await el(s)}}function nA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rA(t,e,n){const r=ye(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Qg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||sA(t,r)})}function sA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(t0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),c0(t))}function B1(t,e,n){for(const r of n)r instanceof JN?(t.Ru.addReference(r.key,e),_z(t,r)):r instanceof ZN?(Z(l0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||sA(t,r.key)):ue(19791,{wu:r})}function _z(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Z(l0,"New document in limbo: "+n),t.Eu.add(r),c0(t))}function c0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(Xe.fromString(e)),r=t.fu.next();t.Au.set(r,new uz(n)),t.du=t.du.insert(n,r),BN(t.remoteStore,new Bs(Rr(Pf(n.path)),r,"TargetPurposeLimboResolution",Nf.ce))}}async function su(t,e,n){const r=ye(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Zv.As(l.targetId,d);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,d){const h=ye(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>B.forEach(d,m=>B.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>B.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!tl(f))throw f;Z(e0,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),b=y.snapshotVersion,v=y.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(m,v)}}}(r.localStore,i))}async function Ez(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){Z(l0,"User change. New user:",e.toKey());const r=await FN(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new oe(G.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await su(n,r.Ls)}}function bz(t,e){const n=ye(t),r=n.Au.get(e);if(r&&r.hu)return Ne().add(r.key);{let s=Ne();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function iA(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vz.bind(null,e),e.Pu.H_=oz.bind(null,e.eventManager),e.Pu.yu=az.bind(null,e.eventManager),e}function Sz(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xz.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return N9(this.persistence,new T9,e.initialUser,this.serializer)}Cu(e){return new VN(Jv.mi,this.serializer)}Du(e){return new O9}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class Tz extends Nh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){je(this.persistence.referenceDelegate instanceof Ch,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new u9(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new VN(r=>Ch.mi(r,n),this.serializer)}}class Yg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ez.bind(null,this.syncEngine),await rz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iz}()}createDatastore(e){const n=Vf(e.databaseInfo.databaseId),r=function(i){return new z9(i)}(e.databaseInfo);return function(i,o,a,l){return new H9(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new q9(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$1(this.syncEngine,n,0),function(){return M1.v()?new M1:new M9}())}createSyncEngine(e,n){return function(s,i,o,a,l,d,h){const f=new dz(s,i,o,a,l,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ye(s);Z(po,"RemoteStore shutting down."),i.Ea.add(5),await ru(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Yg.provider={build:()=>new Yg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):us("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="FirestoreClient";class Cz{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=$t.UNAUTHENTICATED,this.clientId=If.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{Z(xi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z(xi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=o0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function om(t,e){t.asyncQueue.verifyOperationInProgress(),Z(xi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await FN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function H1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Iz(t);Z(xi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>V1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>V1(e.remoteStore,s)),t._onlineComponents=e}async function Iz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(xi,"Using user provided OfflineComponentProvider");try{await om(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await om(t,new Nh)}}else Z(xi,"Using default OfflineComponentProvider"),await om(t,new Tz(void 0));return t._offlineComponents}async function aA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(xi,"Using user provided OnlineComponentProvider"),await H1(t,t._uninitializedComponentsProvider._online)):(Z(xi,"Using default OnlineComponentProvider"),await H1(t,new Yg))),t._onlineComponents}function Nz(t){return aA(t).then(e=>e.syncEngine)}async function Xg(t){const e=await aA(t),n=e.eventManager;return n.onListen=hz.bind(null,e.syncEngine),n.onUnlisten=mz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gz.bind(null,e.syncEngine),n}function Az(t,e,n={}){const r=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,d){const h=new oA({next:m=>{h.Nu(),o.enqueueAndForget(()=>YN(i,f));const y=m.docs.has(a);!y&&m.fromCache?d.reject(new oe(G.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?d.reject(new oe(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new XN(Pf(a.path),h,{includeMetadataChanges:!0,qa:!0});return QN(i,f)}(await Xg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firestore.googleapis.com",q1=!0;class G1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cA,this.ssl=q1}else this.host=e.host,this.ssl=e.ssl??q1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<l9)throw new oe(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class u0{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new KI;switch(r.type){case"firstParty":return new F5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=W1.get(n);r&&(Z("ComponentProvider","Removing Datastore"),W1.delete(n),r.terminate())}(this),Promise.resolve()}}function uA(t,e,n,r={}){var d;t=es(t,u0);const s=Ya(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(nI(`https://${a}`),rI("Firestore",!0)),i.host!==cA&&i.host!==a&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!lo(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=$t.MOCK_USER;else{h=aV(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new oe(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new $t(m)}t._authCredentials=new M5(new GI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new iu(this.firestore,e,this._query)}}class ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ut(this.firestore,e,this._key)}toJSON(){return{type:ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(eu(n,ut._jsonSchema))return new ut(e,r||null,new ae(Xe.fromString(n.referencePath)))}}ut._jsonSchemaVersion="firestore/documentReference/1.0",ut._jsonSchema={type:ct("string",ut._jsonSchemaVersion),referencePath:ct("string")};class $a extends iu{constructor(e,n,r){super(e,n,Pf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new ae(e))}withConverter(e){return new $a(this.firestore,e,this._path)}}function Zn(t,e,...n){if(t=Cn(t),arguments.length===1&&(e=If.newId()),W5("doc","path",e),t instanceof u0){const r=Xe.fromString(e,...n);return a1(r),new ut(t,null,new ae(r))}{if(!(t instanceof ut||t instanceof $a))throw new oe(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return a1(r),new ut(t.firestore,t instanceof $a?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="AsyncQueue";class Q1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UN(this,"async_queue_retry"),this._c=()=>{const r=im();r&&Z(K1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=im();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ni;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tl(e))throw e;Z(K1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,us("INTERNAL UNHANDLED ERROR: ",Y1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=i0.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ue(47125,{Pc:Y1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Y1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Ba extends u0{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Q1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Q1(e),this._firestoreClient=void 0,await e}}}function dA(t,e){const n=typeof t=="object"?t:aI(),r=typeof t=="string"?t:xh,s=Av(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=iV("firestore");i&&uA(s,...i)}return s}function Uf(t){if(t._terminated)throw new oe(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kz(t),t._firestoreClient}function kz(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,d,h){return new nF(a,l,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,lA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Cz(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _n(It.fromBase64String(e))}catch(n){throw new oe(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eu(e,_n._jsonSchema))return _n.fromBase64String(e.bytes)}}_n._jsonSchemaVersion="firestore/bytes/1.0",_n._jsonSchema={type:ct("string",_n._jsonSchemaVersion),bytes:ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:sr._jsonSchemaVersion}}static fromJSON(e){if(eu(e,sr._jsonSchema))return new sr(e.latitude,e.longitude)}}sr._jsonSchemaVersion="firestore/geoPoint/1.0",sr._jsonSchema={type:ct("string",sr._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ir._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eu(e,ir._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ir(e.vectorValues);throw new oe(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ir._jsonSchemaVersion="firestore/vectorValue/1.0",ir._jsonSchema={type:ct("string",ir._jsonSchemaVersion),vectorValues:ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rz=/^__.*__$/;class Pz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Eo(e,this.data,this.fieldMask,n,this.fieldTransforms):new tu(e,this.data,n,this.fieldTransforms)}}function hA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class d0{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new d0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ah(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hA(this.Ac)&&Rz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Dz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vf(e)}Cc(e,n,r,s=!1){return new d0({Ac:e,methodName:n,Dc:r,path:Tt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jz(t){const e=t._freezeSettings(),n=Vf(t._databaseId);return new Dz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Oz(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);gA("Data must be an object, but it was:",o,r);const a=pA(r,o);let l,d;if(i.merge)l=new Jn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Mz(e,f,n);if(!o.contains(m))throw new oe(G.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Vz(h,m)||h.push(m)}l=new Jn(h),d=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,d=o.fieldTransforms;return new Pz(new On(a),l,d)}class h0 extends Bf{_toFieldTransform(e){return new NF(e.path,new Pc)}isEqual(e){return e instanceof h0}}function fA(t,e){if(mA(t=Cn(t)))return gA("Unsupported field value:",e,t),pA(t,e);if(t instanceof Bf)return function(r,s){if(!hA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=fA(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Cn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TF(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ve.fromDate(r);return{timestampValue:Th(s.serializer,i)}}if(r instanceof Ve){const i=new Ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Th(s.serializer,i)}}if(r instanceof sr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _n)return{bytesValue:kN(s.serializer,r._byteString)};if(r instanceof ut){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ir)return function(o,a){return{mapValue:{fields:{[sN]:{stringValue:oN},[_h]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.Sc("VectorValues must only contain numeric values.");return Gv(a.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Uv(r)}`)}(t,e)}function pA(t,e){const n={};return JI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(t,(r,s)=>{const i=fA(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function mA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ve||t instanceof sr||t instanceof _n||t instanceof ut||t instanceof Bf||t instanceof ir)}function gA(t,e,n){if(!mA(n)||!YI(n)){const r=Uv(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Mz(t,e,n){if((e=Cn(e))instanceof $f)return e._internalPath;if(typeof e=="string")return yA(t,e);throw Ah("Field path arguments must be of type string or ",t,!1,void 0,n)}const Lz=new RegExp("[~\\*/\\[\\]]");function yA(t,e,n){if(e.search(Lz)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $f(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ah(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new oe(G.INVALID_ARGUMENT,a+t+l)}function Vz(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Fz extends vA{data(){return super.data()}}function wA(t,e){return typeof e=="string"?yA(t,e):e instanceof $f?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xA{convertValue(e,n="none"){switch(vi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xo(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[_h].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>st(o.doubleValue));return new ir(n)}convertGeoPoint(e){return new sr(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=kf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kc(e));default:return null}}convertTimestamp(e){const n=gi(e);return new Ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Xe.fromString(e);je(MN(r),9688,{name:e});const s=new La(r.get(1),r.get(3)),i=new ae(r.popFirst(5));return s.isEqual(n)||us(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Yo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ri extends vA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ri._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ri._jsonSchemaVersion="firestore/documentSnapshot/1.0",ri._jsonSchema={type:ct("string",ri._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};class nc extends ri{data(e={}){return super.data(e)}}class Zi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nc(this._firestore,this._userDataWriter,r.key,r,new Yo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new nc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Yo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new nc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Yo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:$z(a.type),doc:l,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=If.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $z(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){t=es(t,ut);const e=es(t.firestore,Ba);return Az(Uf(e),t._key).then(n=>SA(e,t,n))}Zi._jsonSchemaVersion="firestore/querySnapshot/1.0",Zi._jsonSchema={type:ct("string",Zi._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};class EA extends xA{constructor(e){super(),this.firestore=e}convertBytes(e){return new _n(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}}function si(t,e,n){t=es(t,ut);const r=es(t.firestore,Ba),s=Uz(t.converter,e,n);return bA(r,[Oz(jz(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ts.none())])}function f0(t,...e){var l,d,h;t=Cn(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||X1(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(X1(e[r])){const f=e[r];e[r]=(l=f.next)==null?void 0:l.bind(f),e[r+1]=(d=f.error)==null?void 0:d.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,a;if(t instanceof ut)o=es(t.firestore,Ba),a=Pf(t._key.path),i={next:f=>{e[r]&&e[r](SA(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=es(t,iu);o=es(f.firestore,Ba),a=f._query;const m=new EA(o);i={next:y=>{e[r]&&e[r](new Zi(o,m,f,y))},error:e[r+1],complete:e[r+2]},zz(t._query)}return function(m,y,b,v){const E=new oA(v),x=new XN(y,E,b);return m.asyncQueue.enqueueAndForget(async()=>QN(await Xg(m),x)),()=>{E.Nu(),m.asyncQueue.enqueueAndForget(async()=>YN(await Xg(m),x))}}(Uf(o),a,s,i)}function bA(t,e){return function(r,s){const i=new ni;return r.asyncQueue.enqueueAndForget(async()=>yz(await Nz(r),s,i)),i.promise}(Uf(t),e)}function SA(t,e,n){const r=n.docs.get(e._key),s=new EA(t);return new ri(t,s,e._key,r,new Yo(n.hasPendingWrites,n.fromCache),e.converter)}function Bz(){return new h0("serverTimestamp")}(function(e,n=!0){(function(s){Za=s})(Xa),ja(new co("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Ba(new L5(r.getProvider("auth-internal")),new z5(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new oe(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new La(d.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ei(r1,s1,e),ei(r1,s1,"esm2020")})();const J1=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xA,Bytes:_n,CollectionReference:$a,DocumentReference:ut,DocumentSnapshot:ri,FieldPath:$f,FieldValue:Bf,Firestore:Ba,FirestoreError:oe,GeoPoint:sr,Query:iu,QueryDocumentSnapshot:nc,QuerySnapshot:Zi,SnapshotMetadata:Yo,Timestamp:Ve,VectorValue:ir,_AutoId:If,_ByteString:It,_DatabaseId:La,_DocumentKey:ae,_EmptyAuthCredentialsProvider:KI,_FieldPath:Tt,_cast:es,_logWarn:fo,_validateIsNotUsedTogether:QI,connectFirestoreEmulator:uA,doc:Zn,ensureFirestoreConfigured:Uf,executeWrite:bA,getDoc:_A,getFirestore:dA,onSnapshot:f0,serverTimestamp:Bz,setDoc:si},Symbol.toStringTag,{value:"Module"})),Hz={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},p0=oI(Hz),Lo=P5(p0),er=dA(p0),rl=new xn;rl.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");rl.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");rl.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");rl.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");const Z1=Object.freeze(Object.defineProperty({__proto__:null,app:p0,auth:Lo,db:er,googleProvider:rl},Symbol.toStringTag,{value:"Module"})),TA=p.createContext(void 0);function Wz({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(!0),[i,o]=p.useState(null),[a,l]=p.useState(null);p.useEffect(()=>_6(Lo,b=>{n(b),s(!1)}),[]);const d=async()=>{try{l(null);const y=await em(Lo,rl),b=xn.credentialFromResult(y);b!=null&&b.accessToken&&o(b.accessToken)}catch(y){const b=y instanceof Error?y.message:"Failed to sign in";l(b),console.error("Sign in error:",y)}},h=async()=>{try{l(null);const y=new xn;y.addScope("https://www.googleapis.com/auth/gmail.send"),y.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const b=await em(Lo,y),v=xn.credentialFromResult(b),E=b._tokenResponse;if(E!=null&&E.oauthRefreshToken){const{doc:x,setDoc:w,serverTimestamp:S}=await Ku(async()=>{const{doc:j,setDoc:D,serverTimestamp:T}=await Promise.resolve().then(()=>J1);return{doc:j,setDoc:D,serverTimestamp:T}},void 0),{db:k}=await Ku(async()=>{const{db:j}=await Promise.resolve().then(()=>Z1);return{db:j}},void 0);if(e&&E.oauthRefreshToken)return await w(x(k,"users",e.uid,"private_tokens","google"),{refreshToken:E.oauthRefreshToken,updatedAt:S()}),!0}return!!(v!=null&&v.accessToken)}catch(y){const b=y instanceof Error?y.message:"Failed to get Gmail permissions";return l(b),console.error("Permission error:",y),!1}},f=async()=>{try{l(null);const y=new xn;y.addScope("https://www.googleapis.com/auth/calendar.events"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const v=(await em(Lo,y))._tokenResponse;if(e&&(v!=null&&v.oauthRefreshToken)){const{doc:E,setDoc:x,serverTimestamp:w}=await Ku(async()=>{const{doc:k,setDoc:j,serverTimestamp:D}=await Promise.resolve().then(()=>J1);return{doc:k,setDoc:j,serverTimestamp:D}},void 0),{db:S}=await Ku(async()=>{const{db:k}=await Promise.resolve().then(()=>Z1);return{db:k}},void 0);return await x(E(S,"users",e.uid,"private_tokens","calendar"),{refreshToken:v.oauthRefreshToken,updatedAt:w(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(y){const b=y instanceof Error?y.message:"Failed to get Calendar permissions";return l(b),console.error("Permission error:",y),!1}},m=async()=>{try{await E6(Lo),o(null)}catch(y){const b=y instanceof Error?y.message:"Failed to sign out";l(b)}};return c.jsx(TA.Provider,{value:{user:e,loading:r,accessToken:i,signInWithGoogle:d,requestGmailPermissions:h,requestCalendarPermissions:f,signOut:m,error:a},children:t})}function Fr(){const t=p.useContext(TA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const CA=p.createContext(void 0);function qz({children:t}){const[e,n]=p.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});p.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return c.jsx(CA.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function IA(){const t=p.useContext(CA);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const NA=p.createContext(void 0);function Gz(){return Math.random().toString(36).substring(2,15)}async function eo(t,e,n,r){var o;const s=[];let i;do{const a=e.includes("?")?"&":"?",l=i?`${e}${a}pageToken=${i}`:e;console.log(`Fetching: ${l.substring(0,100)}...`);const d=await fetch(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!d.ok){let m=d.statusText,y={};try{const b=await d.json();y=b,m=((o=b.error)==null?void 0:o.message)||b.message||m,console.error("API Error Response:",b)}catch{const v=await d.text().catch(()=>"");console.error("API Error (non-JSON):",v)}throw new Error(`${m} (Status: ${d.status})`)}const h=await d.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}async function Kz(t,e){const r=await eo(t,"https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE",i=>i.courses||[],i=>i.nextPageToken),s=new Date().toISOString();return r.map(i=>({id:`course-${i.id}`,userId:e,classroomId:i.id,name:i.name,section:i.section||null,descriptionHeading:i.descriptionHeading||null,room:i.room||null,ownerId:i.ownerId||null,enrollmentCode:i.enrollmentCode||null,courseState:i.courseState||null,alternateLink:i.alternateLink||null,lastSyncedAt:s}))}async function Qz(t,e,n,r){var a,l;const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWork?courseWorkStates=PUBLISHED`,i=await eo(t,s,d=>d.courseWork||[],d=>d.nextPageToken);new Date().toISOString();const o=[];for(const d of i){if(d.workType&&d.workType!=="ASSIGNMENT"&&d.workType!=="MULTIPLE_CHOICE_QUESTION")continue;let h=null;try{const E=`https://classroom.googleapis.com/v1/courses/${e}/courseWork/${d.id}/studentSubmissions?userId=me`;h=(await eo(t,E,w=>w.studentSubmissions||[],w=>w.nextPageToken))[0]||null}catch(E){console.warn(`Failed to fetch submissions for coursework ${d.id}:`,E)}let f=null,m=null;d.dueDate&&(f=new Date(d.dueDate.year,d.dueDate.month-1,d.dueDate.day,((a=d.dueTime)==null?void 0:a.hours)||23,((l=d.dueTime)==null?void 0:l.minutes)||59).toISOString(),d.dueTime&&(m=`${String(d.dueTime.hours).padStart(2,"0")}:${String(d.dueTime.minutes).padStart(2,"0")}`));const y=new Date;let b="backlog";h?h.state==="RETURNED"||h.returnedGrade!==void 0?b="graded":h.state==="TURNED_IN"||h.turnInTime?b="submitted":h.state==="CREATED"&&(b=f&&new Date(f)<y?"overdue":"backlog"):f&&new Date(f)<y?b="overdue":b="backlog";const v={id:`assign-${d.id}`,uniqueId:`${e}-${d.id}`,userId:r,courseId:`course-${e}`,courseName:n,classroomId:d.id,title:d.title,description:d.description||null,dueDate:f,dueTime:m,maxPoints:d.maxPoints||null,systemStatus:b,userStatus:null,submissionId:(h==null?void 0:h.id)||null,submittedAt:(h==null?void 0:h.turnInTime)||null,gradedAt:h!=null&&h.updateTime&&h.state==="RETURNED"?h.updateTime:null,grade:(h==null?void 0:h.returnedGrade)||(h==null?void 0:h.assignedGrade)||null,alternateLink:d.alternateLink||null,createdAt:y.toISOString(),lastSyncedAt:y.toISOString()};o.push(v)}return o}async function Yz(t,e,n,r){const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`;try{const i=await eo(t,s,a=>a.courseWorkMaterial||[],a=>a.nextPageToken),o=new Date().toISOString();return i.map(a=>({id:`mat-${a.id}`,uniqueId:`${e}-${a.id}`,userId:r,courseId:`course-${e}`,courseName:n,title:a.title,description:a.description||null,alternateLink:a.alternateLink||null,materials:a.materials||null,createdAt:a.updateTime||o,lastSyncedAt:o}))}catch(i){return console.warn(`Failed to fetch materials for course ${e}:`,i),[]}}function Xz({children:t}){const{user:e,accessToken:n}=Fr(),[r,s]=p.useState(()=>{const z=sessionStorage.getItem("classroom_courses");return z?JSON.parse(z):[]}),[i,o]=p.useState(()=>{const z=sessionStorage.getItem("classroom_assignments");return z?JSON.parse(z):[]}),[a,l]=p.useState(()=>{const z=sessionStorage.getItem("classroom_materials");return z?JSON.parse(z):[]}),[d,h]=p.useState(()=>{const z=sessionStorage.getItem("classroom_notes");return z?new Map(JSON.parse(z)):new Map}),[f,m]=p.useState(()=>!sessionStorage.getItem("classroom_courses")),[y,b]=p.useState(!1),[v,E]=p.useState(()=>{const z=sessionStorage.getItem("classroom_lastSyncedAt");return z?new Date(z):null}),[x,w]=p.useState(null),[S,k]=p.useState(!1),{toast:j}=lf(),D=p.useCallback(async(z=!1)=>{if(!e){w("Please sign in with Google to sync your Classroom data"),m(!1);return}let K=n;if(!K)try{const M=await e.getIdToken();console.log("Got ID token, but need OAuth access token for Classroom API"),w("Access token expired. Please sign out and sign in again to refresh your token."),m(!1);return}catch{w("Unable to authenticate. Please sign in again."),m(!1);return}b(!0),i.length===0&&m(!0),w(null);try{console.log("Starting sync...",{userId:e.uid,hasToken:!!K});const M=await Kz(K,e.uid);if(console.log(`Fetched ${M.length} courses`),M.length===0){w("No active courses found. Make sure you're enrolled in at least one Google Classroom course."),s([]),o([]),E(new Date),b(!1),m(!1);return}const L=[],U=[];for(const Q of M)try{console.log(`Fetching data for course: ${Q.name}`);const[q,se]=await Promise.all([Qz(K,Q.classroomId,Q.name,e.uid),Yz(K,Q.classroomId,Q.name,e.uid)]);console.log(`Found ${q.length} assignments and ${se.length} materials for ${Q.name}`),L.push(...q),U.push(...se)}catch(q){console.warn(`Failed to fetch data for course ${Q.name}:`,q)}console.log(`Sync complete: ${M.length} courses, ${L.length} assignments, ${U.length} materials`),s(M),o(L),l(U),E(new Date),z||j({title:"Sync Complete",description:`Successfully synced ${M.length} courses, ${L.length} assignments, and ${U.length} materials.`})}catch(M){console.error("Sync error details:",M);let L="Failed to sync";if(M!=null&&M.message){const U=M.message.toLowerCase();U.includes("401")||U.includes("unauthorized")||U.includes("invalid_token")||U.includes("token expired")?L="Authentication failed. Your access token may have expired. Please sign out and sign in again.":U.includes("403")||U.includes("forbidden")||U.includes("permission denied")?L="Permission denied. Please make sure you granted Classroom access permissions when signing in. Sign out and sign in again, then grant all requested permissions.":U.includes("quota")||U.includes("rate")||U.includes("429")?L="API quota exceeded. Please try again later.":U.includes("cors")||U.includes("network")?L="Network error. Please check your internet connection and try again.":L=`Sync failed: ${M.message}`}else M instanceof TypeError&&M.message.includes("fetch")&&(L="Network error. Please check your internet connection.");w(L),console.error("Sync error:",M),z||j({variant:"destructive",title:"Sync Failed",description:L})}finally{b(!1),m(!1)}},[e,n]);p.useEffect(()=>{if(!e){k(!1),m(!1);return}if(!n){m(!1);return}!S&&!y&&(k(!0),D(!0))},[e,n,S,r.length,i.length,y]),p.useEffect(()=>{sessionStorage.setItem("classroom_courses",JSON.stringify(r))},[r]),p.useEffect(()=>{sessionStorage.setItem("classroom_materials",JSON.stringify(a))},[a]),p.useEffect(()=>{sessionStorage.setItem("classroom_notes",JSON.stringify(Array.from(d.entries())))},[d]),p.useEffect(()=>{sessionStorage.setItem("classroom_assignments",JSON.stringify(i))},[i]),p.useEffect(()=>{v?sessionStorage.setItem("classroom_lastSyncedAt",v.toISOString()):sessionStorage.removeItem("classroom_lastSyncedAt")},[v]);const T=p.useCallback((z,K)=>{o(M=>M.map(L=>L.id===z?{...L,userStatus:K}:L))},[]),C=p.useCallback((z,K,M=!1)=>{const L={id:Gz(),userId:(e==null?void 0:e.uid)||"",assignmentId:z,content:K,isImportant:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};h(U=>{const Q=new Map(U),q=Q.get(z)||[];return Q.set(z,[...q,L]),Q})},[e]),I=p.useCallback((z,K,M)=>{h(L=>{const U=new Map(L);for(const[Q,q]of Array.from(U.entries())){const se=q.findIndex(ee=>ee.id===z);if(se!==-1){const ee=[...q];ee[se]={...ee[se],content:K,isImportant:M??ee[se].isImportant,updatedAt:new Date().toISOString()},U.set(Q,ee);break}}return U})},[]),A=p.useCallback((z,K)=>{h(M=>{const L=new Map(M),U=L.get(K)||[];return L.set(K,U.filter(Q=>Q.id!==z)),L})},[]),P=p.useCallback(()=>{const z=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return i.forEach(K=>{const M=K.userStatus==="in_progress"?"in_progress":K.systemStatus,L=z.find(U=>U.id===M);L&&L.assignments.push(K)}),z.forEach(K=>{K.assignments.sort((M,L)=>M.dueDate?L.dueDate?new Date(M.dueDate).getTime()-new Date(L.dueDate).getTime():-1:1)}),z},[i]),O=p.useCallback(()=>{const z=new Date,K=new Date(z);K.setDate(K.getDate()+3);const M=new Date(z);M.setDate(M.getDate()+7);const L=i.filter(W=>W.systemStatus!=="graded"&&W.systemStatus!=="submitted"),U=i.filter(W=>{if(!W.dueDate||W.systemStatus==="graded"||W.systemStatus==="submitted")return!1;const ie=new Date(W.dueDate);return ie>=z&&ie<=K}),Q=i.filter(W=>{if(!W.dueDate||W.systemStatus==="graded"||W.systemStatus==="submitted")return!1;const ie=new Date(W.dueDate);return ie>=z&&ie<=M}),q=i.filter(W=>W.systemStatus==="overdue"),se=[],ee=new Date,de=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let W=0;W<7;W++){const ie=new Date(ee);ie.setDate(ie.getDate()+W);const ve=ie.toISOString().split("T")[0],ne=i.filter(ge=>ge.dueDate?ge.dueDate.split("T")[0]===ve:!1).length;se.push({day:de[ie.getDay()],count:ne,isToday:W===0})}const ce=[...L].filter(W=>W.dueDate).sort((W,ie)=>new Date(W.dueDate).getTime()-new Date(ie.dueDate).getTime()).slice(0,5);return{totalActive:L.length,upcoming3Days:U.length,upcoming7Days:Q.length,overdue:q.length,weeklyWorkload:se,nextActions:ce}},[i]),R=p.useCallback(z=>{let K=[...i];z!=null&&z.courseId&&(K=K.filter(Q=>Q.courseId===z.courseId)),z!=null&&z.status&&(K=K.filter(Q=>Q.systemStatus===z.status)),K.sort((Q,q)=>Q.dueDate?q.dueDate?new Date(Q.dueDate).getTime()-new Date(q.dueDate).getTime():-1:1);const M=new Map,L=new Date,U=new Date(L);return U.setDate(U.getDate()+1),K.forEach(Q=>{if(!Q.dueDate)return;const q=Q.dueDate.split("T")[0],se=new Date(Q.dueDate);let ee;q===L.toISOString().split("T")[0]?ee="Today":q===U.toISOString().split("T")[0]?ee="Tomorrow":ee=se.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),M.has(q)||M.set(q,{date:q,dateLabel:ee,assignments:[]}),M.get(q).assignments.push(Q)}),Array.from(M.values())},[i]),$=p.useCallback(z=>i.find(K=>K.id===z),[i]),re=p.useCallback(z=>d.get(z)||[],[d]);return c.jsx(NA.Provider,{value:{courses:r,assignments:i,notes:d,isLoading:f,isSyncing:y,lastSyncedAt:v,error:x,syncClassroom:D,updateAssignmentStatus:T,addNote:C,updateNote:I,deleteNote:A,getPipelineColumns:P,getDashboardMetrics:O,getTimelineGroups:R,getAssignmentById:$,getNotesForAssignment:re,materials:a},children:t})}function So(){const t=p.useContext(NA);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}var am="focusScope.autoFocusOnMount",lm="focusScope.autoFocusOnUnmount",eE={bubbles:!1,cancelable:!0},Jz="FocusScope",m0=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),d=Jt(s),h=Jt(i),f=p.useRef(null),m=Me(e,v=>l(v)),y=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(S){if(y.paused||!a)return;const k=S.target;a.contains(k)?f.current=k:Is(f.current,{select:!0})},E=function(S){if(y.paused||!a)return;const k=S.relatedTarget;k!==null&&(a.contains(k)||Is(f.current,{select:!0}))},x=function(S){if(document.activeElement===document.body)for(const j of S)j.removedNodes.length>0&&Is(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",E);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",E),w.disconnect()}}},[r,a,y.paused]),p.useEffect(()=>{if(a){nE.add(y);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(am,eE);a.addEventListener(am,d),a.dispatchEvent(x),x.defaultPrevented||(Zz(sU(AA(a)),{select:!0}),document.activeElement===v&&Is(a))}return()=>{a.removeEventListener(am,d),setTimeout(()=>{const x=new CustomEvent(lm,eE);a.addEventListener(lm,h),a.dispatchEvent(x),x.defaultPrevented||Is(v??document.body,{select:!0}),a.removeEventListener(lm,h),nE.remove(y)},0)}}},[a,d,h,y]);const b=p.useCallback(v=>{if(!n&&!r||y.paused)return;const E=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(E&&x){const w=v.currentTarget,[S,k]=eU(w);S&&k?!v.shiftKey&&x===k?(v.preventDefault(),n&&Is(S,{select:!0})):v.shiftKey&&x===S&&(v.preventDefault(),n&&Is(k,{select:!0})):x===w&&v.preventDefault()}},[n,r,y.paused]);return c.jsx(pe.div,{tabIndex:-1,...o,ref:m,onKeyDown:b})});m0.displayName=Jz;function Zz(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Is(r,{select:e}),document.activeElement!==n)return}function eU(t){const e=AA(t),n=tE(e,t),r=tE(e.reverse(),t);return[n,r]}function AA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function tE(t,e){for(const n of t)if(!tU(n,{upTo:e}))return n}function tU(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function nU(t){return t instanceof HTMLInputElement&&"select"in t}function Is(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&nU(t)&&e&&t.select()}}var nE=rU();function rU(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=rE(t,e),t.unshift(e)},remove(e){var n;t=rE(t,e),(n=t[0])==null||n.resume()}}}function rE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function sU(t){return t.filter(e=>e.tagName!=="A")}var cm=0;function kA(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??sE()),document.body.insertAdjacentElement("beforeend",t[1]??sE()),cm++,()=>{cm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),cm--}},[])}function sE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Tr=function(){return Tr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tr.apply(this,arguments)};function RA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function iU(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Dd="right-scroll-bar-position",jd="width-before-scroll-bar",oU="with-scroll-bars-hidden",aU="--removed-body-scroll-bar-size";function um(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function lU(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var cU=typeof window<"u"?p.useLayoutEffect:p.useEffect,iE=new WeakMap;function uU(t,e){var n=lU(null,function(r){return t.forEach(function(s){return um(s,r)})});return cU(function(){var r=iE.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||um(a,null)}),i.forEach(function(a){s.has(a)||um(a,o)})}iE.set(n,t)},[t]),n}function dU(t){return t}function hU(t,e){e===void 0&&(e=dU);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(l)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function fU(t){t===void 0&&(t={});var e=hU(null);return e.options=Tr({async:!0,ssr:!1},t),e}var PA=function(t){var e=t.sideCar,n=RA(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Tr({},n))};PA.isSideCarExport=!0;function pU(t,e){return t.useMedium(e),PA}var DA=fU(),dm=function(){},Hf=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:dm,onWheelCapture:dm,onTouchMoveCapture:dm}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,y=t.noIsolation,b=t.inert,v=t.allowPinchZoom,E=t.as,x=E===void 0?"div":E,w=t.gapMode,S=RA(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,j=uU([n,e]),D=Tr(Tr({},S),s);return p.createElement(p.Fragment,null,h&&p.createElement(k,{sideCar:DA,removeScrollBar:d,shards:f,noIsolation:y,inert:b,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?p.cloneElement(p.Children.only(a),Tr(Tr({},D),{ref:j})):p.createElement(x,Tr({},D,{className:l,ref:j}),a))});Hf.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hf.classNames={fullWidth:jd,zeroRight:Dd};var mU=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function gU(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=mU();return e&&t.setAttribute("nonce",e),t}function yU(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function vU(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var wU=function(){var t=0,e=null;return{add:function(n){t==0&&(e=gU())&&(yU(e,n),vU(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},xU=function(){var t=wU();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},jA=function(){var t=xU(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},_U={left:0,top:0,right:0,gap:0},hm=function(t){return parseInt(t||"",10)||0},EU=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[hm(n),hm(r),hm(s)]},bU=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return _U;var e=EU(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},SU=jA(),ca="data-scroll-locked",TU=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(oU,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ca,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Dd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(jd,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Dd," .").concat(Dd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(jd," .").concat(jd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ca,`] {
    `).concat(aU,": ").concat(a,`px;
  }
`)},oE=function(){var t=parseInt(document.body.getAttribute(ca)||"0",10);return isFinite(t)?t:0},CU=function(){p.useEffect(function(){return document.body.setAttribute(ca,(oE()+1).toString()),function(){var t=oE()-1;t<=0?document.body.removeAttribute(ca):document.body.setAttribute(ca,t.toString())}},[])},IU=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;CU();var i=p.useMemo(function(){return bU(s)},[s]);return p.createElement(SU,{styles:TU(i,!e,s,n?"":"!important")})},Jg=!1;if(typeof window<"u")try{var td=Object.defineProperty({},"passive",{get:function(){return Jg=!0,!0}});window.addEventListener("test",td,td),window.removeEventListener("test",td,td)}catch{Jg=!1}var ko=Jg?{passive:!1}:!1,NU=function(t){return t.tagName==="TEXTAREA"},OA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!NU(t)&&n[e]==="visible")},AU=function(t){return OA(t,"overflowY")},kU=function(t){return OA(t,"overflowX")},aE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=MA(t,r);if(s){var i=LA(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},RU=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},PU=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},MA=function(t,e){return t==="v"?AU(e):kU(e)},LA=function(t,e){return t==="v"?RU(e):PU(e)},DU=function(t,e){return t==="h"&&e==="rtl"?-1:1},jU=function(t,e,n,r,s){var i=DU(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),d=!1,h=o>0,f=0,m=0;do{var y=LA(t,a),b=y[0],v=y[1],E=y[2],x=v-E-i*b;(b||x)&&MA(t,a)&&(f+=x,m+=b),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(d=!0),d},nd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},lE=function(t){return[t.deltaX,t.deltaY]},cE=function(t){return t&&"current"in t?t.current:t},OU=function(t,e){return t[0]===e[0]&&t[1]===e[1]},MU=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},LU=0,Ro=[];function VU(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(LU++)[0],i=p.useState(jA)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=iU([t.lockRef.current],(t.shards||[]).map(cE),!0).filter(Boolean);return v.forEach(function(E){return E.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,E){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var x=nd(v),w=n.current,S="deltaX"in v?v.deltaX:w[0]-x[0],k="deltaY"in v?v.deltaY:w[1]-x[1],j,D=v.target,T=Math.abs(S)>Math.abs(k)?"h":"v";if("touches"in v&&T==="h"&&D.type==="range")return!1;var C=aE(T,D);if(!C)return!0;if(C?j=T:(j=T==="v"?"h":"v",C=aE(T,D)),!C)return!1;if(!r.current&&"changedTouches"in v&&(S||k)&&(r.current=j),!j)return!0;var I=r.current||j;return jU(I,E,v,I==="h"?S:k,!0)},[]),l=p.useCallback(function(v){var E=v;if(!(!Ro.length||Ro[Ro.length-1]!==i)){var x="deltaY"in E?lE(E):nd(E),w=e.current.filter(function(j){return j.name===E.type&&(j.target===E.target||E.target===j.shadowParent)&&OU(j.delta,x)})[0];if(w&&w.should){E.cancelable&&E.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(cE).filter(Boolean).filter(function(j){return j.contains(E.target)}),k=S.length>0?a(E,S[0]):!o.current.noIsolation;k&&E.cancelable&&E.preventDefault()}}},[]),d=p.useCallback(function(v,E,x,w){var S={name:v,delta:E,target:x,should:w,shadowParent:FU(x)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(k){return k!==S})},1)},[]),h=p.useCallback(function(v){n.current=nd(v),r.current=void 0},[]),f=p.useCallback(function(v){d(v.type,lE(v),v.target,a(v,t.lockRef.current))},[]),m=p.useCallback(function(v){d(v.type,nd(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return Ro.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,ko),document.addEventListener("touchmove",l,ko),document.addEventListener("touchstart",h,ko),function(){Ro=Ro.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,ko),document.removeEventListener("touchmove",l,ko),document.removeEventListener("touchstart",h,ko)}},[]);var y=t.removeScrollBar,b=t.inert;return p.createElement(p.Fragment,null,b?p.createElement(i,{styles:MU(s)}):null,y?p.createElement(IU,{gapMode:t.gapMode}):null)}function FU(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const zU=pU(DA,VU);var g0=p.forwardRef(function(t,e){return p.createElement(Hf,Tr({},t,{ref:e,sideCar:zU}))});g0.classNames=Hf.classNames;var UU=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Po=new WeakMap,rd=new WeakMap,sd={},fm=0,VA=function(t){return t&&(t.host||VA(t.parentNode))},$U=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=VA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},BU=function(t,e,n,r){var s=$U(e,Array.isArray(t)?t:[t]);sd[n]||(sd[n]=new WeakMap);var i=sd[n],o=[],a=new Set,l=new Set(s),d=function(f){!f||a.has(f)||(a.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))h(m);else try{var y=m.getAttribute(r),b=y!==null&&y!=="false",v=(Po.get(m)||0)+1,E=(i.get(m)||0)+1;Po.set(m,v),i.set(m,E),o.push(m),v===1&&b&&rd.set(m,!0),E===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return h(e),a.clear(),fm++,function(){o.forEach(function(f){var m=Po.get(f)-1,y=i.get(f)-1;Po.set(f,m),i.set(f,y),m||(rd.has(f)||f.removeAttribute(r),rd.delete(f)),y||f.removeAttribute(n)}),fm--,fm||(Po=new WeakMap,Po=new WeakMap,rd=new WeakMap,sd={})}},FA=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=UU(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),BU(r,s,n,"aria-hidden")):function(){return null}},y0="Dialog",[zA,UA]=dr(y0),[HU,hr]=zA(y0),$A=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=p.useRef(null),l=p.useRef(null),[d=!1,h]=li({prop:r,defaultProp:s,onChange:i});return c.jsx(HU,{scope:e,triggerRef:a,contentRef:l,contentId:Zr(),titleId:Zr(),descriptionId:Zr(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};$A.displayName=y0;var BA="DialogTrigger",HA=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(BA,n),i=Me(e,s.triggerRef);return c.jsx(pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":x0(s.open),...r,ref:i,onClick:le(t.onClick,s.onOpenToggle)})});HA.displayName=BA;var v0="DialogPortal",[WU,WA]=zA(v0,{forceMount:void 0}),qA=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=hr(v0,e);return c.jsx(WU,{scope:e,forceMount:n,children:p.Children.map(r,o=>c.jsx(wo,{present:n||i.open,children:c.jsx(cf,{asChild:!0,container:s,children:o})}))})};qA.displayName=v0;var kh="DialogOverlay",GA=p.forwardRef((t,e)=>{const n=WA(kh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=hr(kh,t.__scopeDialog);return i.modal?c.jsx(wo,{present:r||i.open,children:c.jsx(GU,{...s,ref:e})}):null});GA.displayName=kh;var qU=ka("DialogOverlay.RemoveScroll"),GU=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(kh,n);return c.jsx(g0,{as:qU,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(pe.div,{"data-state":x0(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),mo="DialogContent",KA=p.forwardRef((t,e)=>{const n=WA(mo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=hr(mo,t.__scopeDialog);return c.jsx(wo,{present:r||i.open,children:i.modal?c.jsx(KU,{...s,ref:e}):c.jsx(QU,{...s,ref:e})})});KA.displayName=mo;var KU=p.forwardRef((t,e)=>{const n=hr(mo,t.__scopeDialog),r=p.useRef(null),s=Me(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return FA(i)},[]),c.jsx(QA,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:le(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:le(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:le(t.onFocusOutside,i=>i.preventDefault())})}),QU=p.forwardRef((t,e)=>{const n=hr(mo,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return c.jsx(QA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,d;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),QA=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=hr(mo,n),l=p.useRef(null),d=Me(e,l);return kA(),c.jsxs(c.Fragment,{children:[c.jsx(m0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(Wc,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":x0(a.open),...o,ref:d,onDismiss:()=>a.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(XU,{titleId:a.titleId}),c.jsx(ZU,{contentRef:l,descriptionId:a.descriptionId})]})]})}),w0="DialogTitle",YA=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(w0,n);return c.jsx(pe.h2,{id:s.titleId,...r,ref:e})});YA.displayName=w0;var XA="DialogDescription",JA=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(XA,n);return c.jsx(pe.p,{id:s.descriptionId,...r,ref:e})});JA.displayName=XA;var ZA="DialogClose",ek=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=hr(ZA,n);return c.jsx(pe.button,{type:"button",...r,ref:e,onClick:le(t.onClick,()=>s.onOpenChange(!1))})});ek.displayName=ZA;function x0(t){return t?"open":"closed"}var tk="DialogTitleWarning",[YU,nk]=NO(tk,{contentName:mo,titleName:w0,docsSlug:"dialog"}),XU=({titleId:t})=>{const e=nk(tk),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},JU="DialogDescriptionWarning",ZU=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nk(JU).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},rk=$A,e8=HA,sk=qA,_0=GA,E0=KA,b0=YA,S0=JA,T0=ek,ik="AlertDialog",[t8,_H]=dr(ik,[UA]),ps=UA(),ok=t=>{const{__scopeAlertDialog:e,...n}=t,r=ps(e);return c.jsx(rk,{...r,...n,modal:!0})};ok.displayName=ik;var n8="AlertDialogTrigger",ak=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return c.jsx(e8,{...s,...r,ref:e})});ak.displayName=n8;var r8="AlertDialogPortal",lk=t=>{const{__scopeAlertDialog:e,...n}=t,r=ps(e);return c.jsx(sk,{...r,...n})};lk.displayName=r8;var s8="AlertDialogOverlay",ck=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return c.jsx(_0,{...s,...r,ref:e})});ck.displayName=s8;var ua="AlertDialogContent",[i8,o8]=t8(ua),a8=ST("AlertDialogContent"),uk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=ps(n),o=p.useRef(null),a=Me(e,o),l=p.useRef(null);return c.jsx(YU,{contentName:ua,titleName:dk,docsSlug:"alert-dialog",children:c.jsx(i8,{scope:n,cancelRef:l,children:c.jsxs(E0,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:le(s.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=l.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[c.jsx(a8,{children:r}),c.jsx(c8,{contentRef:o})]})})})});uk.displayName=ua;var dk="AlertDialogTitle",hk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return c.jsx(b0,{...s,...r,ref:e})});hk.displayName=dk;var fk="AlertDialogDescription",pk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return c.jsx(S0,{...s,...r,ref:e})});pk.displayName=fk;var l8="AlertDialogAction",mk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=ps(n);return c.jsx(T0,{...s,...r,ref:e})});mk.displayName=l8;var gk="AlertDialogCancel",yk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=o8(gk,n),i=ps(n),o=Me(e,s);return c.jsx(T0,{...i,...r,ref:o})});yk.displayName=gk;var c8=({contentRef:t})=>{const e=`\`${ua}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ua}\` by passing a \`${fk}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ua}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},u8=ok,d8=ak,h8=lk,vk=ck,wk=uk,xk=mk,_k=yk,Ek=hk,bk=pk;const C0=Gc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Se=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?kO:"button";return c.jsx(o,{className:X(C0({variant:e,size:n,className:t})),ref:i,...s})});Se.displayName="Button";const Sk=u8,Tk=d8,f8=h8,Ck=p.forwardRef(({className:t,...e},n)=>c.jsx(vk,{className:X("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Ck.displayName=vk.displayName;const I0=p.forwardRef(({className:t,...e},n)=>c.jsxs(f8,{children:[c.jsx(Ck,{}),c.jsx(wk,{ref:n,className:X("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));I0.displayName=wk.displayName;const N0=({className:t,...e})=>c.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",t),...e});N0.displayName="AlertDialogHeader";const A0=({className:t,...e})=>c.jsx("div",{className:X("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});A0.displayName="AlertDialogFooter";const k0=p.forwardRef(({className:t,...e},n)=>c.jsx(Ek,{ref:n,className:X("text-lg font-semibold",t),...e}));k0.displayName=Ek.displayName;const R0=p.forwardRef(({className:t,...e},n)=>c.jsx(bk,{ref:n,className:X("text-sm text-muted-foreground",t),...e}));R0.displayName=bk.displayName;const P0=p.forwardRef(({className:t,...e},n)=>c.jsx(xk,{ref:n,className:X(C0(),t),...e}));P0.displayName=xk.displayName;const D0=p.forwardRef(({className:t,...e},n)=>c.jsx(_k,{ref:n,className:X(C0({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));D0.displayName=_k.displayName;const pm=768;function j0(){const[t,e]=p.useState(void 0);return p.useEffect(()=>{const n=window.matchMedia(`(max-width: ${pm-1}px)`),r=()=>{e(window.innerWidth<pm)};return n.addEventListener("change",r),e(window.innerWidth<pm),()=>n.removeEventListener("change",r)},[]),!!t}var O0="Avatar",[p8,EH]=dr(O0),[m8,Ik]=p8(O0),Nk=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=p.useState("idle");return c.jsx(m8,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:c.jsx(pe.span,{...r,ref:e})})});Nk.displayName=O0;var Ak="AvatarImage",kk=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=Ik(Ak,n),a=g8(r,i),l=Jt(d=>{s(d),o.onImageLoadingStatusChange(d)});return wt(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?c.jsx(pe.img,{...i,ref:e,src:r}):null});kk.displayName=Ak;var Rk="AvatarFallback",Pk=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=Ik(Rk,n),[o,a]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?c.jsx(pe.span,{...s,ref:e}):null});Pk.displayName=Rk;function uE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function g8(t,{referrerPolicy:e,crossOrigin:n}){const r=v8(),s=p.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,a]=p.useState(()=>uE(i,t));return wt(()=>{a(uE(i,t))},[i,t]),wt(()=>{const l=f=>()=>{a(f)};if(!i)return;const d=l("loaded"),h=l("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),o}function y8(){return()=>{}}function v8(){return p.useSyncExternalStore(y8,()=>!0,()=>!1)}var Dk=Nk,jk=kk,Ok=Pk;const M0=p.forwardRef(({className:t,...e},n)=>c.jsx(Dk,{ref:n,className:X(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));M0.displayName=Dk.displayName;const L0=p.forwardRef(({className:t,...e},n)=>c.jsx(jk,{ref:n,className:X("aspect-square h-full w-full",t),...e}));L0.displayName=jk.displayName;const V0=p.forwardRef(({className:t,...e},n)=>c.jsx(Ok,{ref:n,className:X("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));V0.displayName=Ok.displayName;const w8=[{path:"/dashboard",label:"Dashboard",icon:EM},{path:"/",label:"Pipeline",icon:eC},{path:"/timeline",label:"Timeline",icon:ci},{path:"/notes",label:"Notes",icon:Ql}];function x8({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=lv(),r=j0(),{user:s,signOut:i}=Fr(),{theme:o,toggleTheme:a}=IA(),l=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(m=>m[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",d=()=>c.jsxs("div",{className:"flex flex-col h-full bg-background",children:[c.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[c.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),c.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&c.jsx("button",{className:"ml-auto",onClick:e,children:c.jsx(pf,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-4 border-b shrink-0",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs(M0,{className:"h-8 w-8",children:[c.jsx(L0,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),c.jsx(V0,{className:"text-xs",children:l})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),c.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),w8.map(m=>{const y=n===m.path,b=m.icon;return c.jsxs(Aa,{href:m.path,onClick:e,className:X("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",y?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${m.label.toLowerCase()}`,children:[c.jsx(b,{className:"w-4 h-4 mr-3"}),m.label]},m.path)})]})}),c.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[c.jsxs("button",{onClick:a,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?c.jsx(rC,{className:"w-4 h-4 mr-3"}):c.jsx(tC,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),c.jsxs(Aa,{href:"/settings",onClick:e,className:X("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[c.jsx(jM,{className:"w-4 h-4 mr-3"}),"Settings"]}),c.jsxs(Sk,{children:[c.jsx(Tk,{asChild:!0,children:c.jsxs("button",{className:"w-full flex items-center px-3 py-2 text-sm font-medium text-destructive rounded-md hover:bg-destructive/10 transition-colors",children:[c.jsx(xg,{className:"w-4 h-4 mr-3"}),"Sign Out"]})}),c.jsxs(I0,{children:[c.jsxs(N0,{children:[c.jsx(k0,{children:"Are you absolutely sure?"}),c.jsx(R0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),c.jsxs(A0,{children:[c.jsx(D0,{children:"Cancel"}),c.jsx(P0,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})]});return c.jsxs(c.Fragment,{children:[c.jsx("aside",{className:X("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:c.jsx(d,{})}),r&&t&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const Mk=p.forwardRef(({className:t,type:e,...n},r)=>c.jsx("input",{type:e,className:X("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Mk.displayName="Input";function _8({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=So(),[r]=lv(),[s,i]=p.useState(""),o=j0(),l={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/notes":"Notes","/settings":"Settings"}[r]||"Pipeline";return c.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[c.jsxs("div",{className:"flex items-center flex-1",children:[o&&c.jsx(Se,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:c.jsx(kM,{className:"h-5 w-5"})}),c.jsx("span",{className:"md:hidden font-medium text-lg",children:l}),c.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(DM,{className:"h-4 w-4 text-muted-foreground"})}),c.jsx(Mk,{type:"text",value:s,onChange:d=>i(d.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),c.jsx("div",{className:"flex items-center ml-4",children:c.jsx(Se,{variant:"ghost",size:"icon",onClick:d=>{d.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:X(n&&"animate-spin"),title:"Sync with Classroom",children:c.jsx(ff,{className:"w-5 h-5"})})})]})}var Lk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},dE=be.createContext&&be.createContext(Lk),E8=["attr","size","title"];function b8(t,e){if(t==null)return{};var n=S8(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function S8(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rh(){return Rh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rh.apply(this,arguments)}function hE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Ph(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hE(Object(n),!0).forEach(function(r){T8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T8(t,e,n){return e=C8(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function C8(t){var e=I8(t,"string");return typeof e=="symbol"?e:e+""}function I8(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vk(t){return t&&t.map((e,n)=>be.createElement(e.tag,Ph({key:n},e.attr),Vk(e.child)))}function F0(t){return e=>be.createElement(N8,Rh({attr:Ph({},t.attr)},e),Vk(t.child))}function N8(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=b8(t,E8),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),be.createElement("svg",Rh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Ph(Ph({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&be.createElement("title",null,i),t.children)};return dE!==void 0?be.createElement(dE.Consumer,null,n=>e(n)):e(Lk)}function A8(t){return F0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function k8(t){return F0({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const R8=[{icon:k8,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:NM,title:"Kanban Board",description:"Visual assignment tracking."},{icon:_M,title:"Linear Timeline",description:"Chronological deadline view."},{icon:bM,title:"Performance Metrics",description:"Grade & workload analytics."}];function P8(){const{signInWithGoogle:t,loading:e,error:n}=Fr();return c.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[c.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),c.jsx("header",{className:"px-10 py-8 z-10",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),c.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",c.jsx("br",{}),c.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),c.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),c.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:R8.map(r=>c.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[c.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),c.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),c.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),c.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[c.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),c.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[c.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[c.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),c.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:c.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),c.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[c.jsx(ui,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),c.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",c.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),c.jsxs(Se,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[c.jsx(A8,{className:"h-4 w-4"}),c.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&c.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[c.jsx(ui,{className:"h-4 w-4 shrink-0"}),c.jsx("p",{children:n})]})]}),c.jsx("div",{className:"pt-8 border-t border-zinc-100",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx(OM,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),c.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),c.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[c.jsx("span",{children:" 2024 Trace Inc."}),c.jsxs("div",{className:"flex gap-6",children:[c.jsx("a",{href:"#",className:"hover:text-zinc-900 transition-colors",children:"Privacy"}),c.jsx("a",{href:"#",className:"hover:text-zinc-900 transition-colors",children:"Terms"})]})]})})]})]})}function D8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Wf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function z0(t){return"nodeType"in t}function tn(t){var e,n;return t?sl(t)?t:z0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function U0(t){const{Document:e}=tn(t);return t instanceof e}function ou(t){return sl(t)?!1:t instanceof tn(t).HTMLElement}function Fk(t){return t instanceof tn(t).SVGElement}function il(t){return t?sl(t)?t.document:z0(t)?U0(t)?t:ou(t)||Fk(t)?t.ownerDocument:document:document:document}const cr=Wf?p.useLayoutEffect:p.useEffect;function qf(t){const e=p.useRef(t);return cr(()=>{e.current=t}),p.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function j8(){const t=p.useRef(null),e=p.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=p.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Oc(t,e){e===void 0&&(e=[t]);const n=p.useRef(t);return cr(()=>{n.current!==t&&(n.current=t)},e),n}function au(t,e){const n=p.useRef();return p.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Dh(t){const e=qf(t),n=p.useRef(null),r=p.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function jh(t){const e=p.useRef();return p.useEffect(()=>{e.current=t},[t]),e.current}let mm={};function lu(t,e){return p.useMemo(()=>{if(e)return e;const n=mm[t]==null?0:mm[t]+1;return mm[t]=n,t+"-"+n},[t,e])}function zk(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const a=Object.entries(o);for(const[l,d]of a){const h=i[l];h!=null&&(i[l]=h+t*d)}return i},{...e})}}const da=zk(1),Oh=zk(-1);function O8(t){return"clientX"in t&&"clientY"in t}function Gf(t){if(!t)return!1;const{KeyboardEvent:e}=tn(t.target);return e&&t instanceof e}function M8(t){if(!t)return!1;const{TouchEvent:e}=tn(t.target);return e&&t instanceof e}function Mh(t){if(M8(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return O8(t)?{x:t.clientX,y:t.clientY}:null}const _i=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[_i.Translate.toString(t),_i.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),fE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function L8(t){return t.matches(fE)?t:t.querySelector(fE)}const V8={display:"none"};function F8(t){let{id:e,value:n}=t;return be.createElement("div",{id:e,style:V8},n)}function z8(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return be.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function U8(){const[t,e]=p.useState("");return{announce:p.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const Uk=p.createContext(null);function $8(t){const e=p.useContext(Uk);p.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function B8(){const[t]=p.useState(()=>new Set),e=p.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[p.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[t]),e]}const H8={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},W8={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function q8(t){let{announcements:e=W8,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=H8}=t;const{announce:i,announcement:o}=U8(),a=lu("DndLiveRegion"),[l,d]=p.useState(!1);if(p.useEffect(()=>{d(!0)},[]),$8(p.useMemo(()=>({onDragStart(f){let{active:m}=f;i(e.onDragStart({active:m}))},onDragMove(f){let{active:m,over:y}=f;e.onDragMove&&i(e.onDragMove({active:m,over:y}))},onDragOver(f){let{active:m,over:y}=f;i(e.onDragOver({active:m,over:y}))},onDragEnd(f){let{active:m,over:y}=f;i(e.onDragEnd({active:m,over:y}))},onDragCancel(f){let{active:m,over:y}=f;i(e.onDragCancel({active:m,over:y}))}}),[i,e])),!l)return null;const h=be.createElement(be.Fragment,null,be.createElement(F8,{id:r,value:s.draggable}),be.createElement(z8,{id:a,announcement:o}));return n?Ln.createPortal(h,n):h}var mt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(mt||(mt={}));function Lh(){}function pE(t,e){return p.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function G8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const ur=Object.freeze({x:0,y:0});function K8(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Q8(t,e){const n=Mh(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function Y8(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function X8(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function J8(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function mE(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const Z8=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=mE(e,e.left,e.top),i=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const d=K8(mE(l),s);i.push({id:a,data:{droppableContainer:o,value:d}})}}return i.sort(Y8)};function e7(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,a=i-n;if(r<s&&n<i){const l=e.width*e.height,d=t.width*t.height,h=o*a,f=h/(l+d-h);return Number(f.toFixed(4))}return 0}const t7=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,a=n.get(o);if(a){const l=e7(a,e);l>0&&s.push({id:o,data:{droppableContainer:i,value:l}})}}return s.sort(X8)};function n7(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function $k(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:ur}function r7(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const s7=r7(1);function Bk(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function i7(t,e,n){const r=Bk(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:a}=r,l=t.left-o-(1-s)*parseFloat(n),d=t.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:d,right:l+h,bottom:d+f,left:l}}const o7={ignoreTransform:!1};function ol(t,e){e===void 0&&(e=o7);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:h}=tn(t).getComputedStyle(t);d&&(n=i7(n,d,h))}const{top:r,left:s,width:i,height:o,bottom:a,right:l}=n;return{top:r,left:s,width:i,height:o,bottom:a,right:l}}function gE(t){return ol(t,{ignoreTransform:!0})}function a7(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function l7(t,e){return e===void 0&&(e=tn(t).getComputedStyle(t)),e.position==="fixed"}function c7(t,e){e===void 0&&(e=tn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function $0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(U0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!ou(s)||Fk(s)||n.includes(s))return n;const i=tn(t).getComputedStyle(s);return s!==t&&c7(s,i)&&n.push(s),l7(s,i)?n:r(s.parentNode)}return t?r(t):n}function Hk(t){const[e]=$0(t,1);return e??null}function gm(t){return!Wf||!t?null:sl(t)?t:z0(t)?U0(t)||t===il(t).scrollingElement?window:ou(t)?t:null:null}function Wk(t){return sl(t)?t.scrollX:t.scrollLeft}function qk(t){return sl(t)?t.scrollY:t.scrollTop}function Zg(t){return{x:Wk(t),y:qk(t)}}var bt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(bt||(bt={}));function Gk(t){return!Wf||!t?!1:t===document.scrollingElement}function Kk(t){const e={x:0,y:0},n=Gk(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const u7={x:.2,y:.2};function d7(t,e,n,r,s){let{top:i,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=u7);const{isTop:d,isBottom:h,isLeft:f,isRight:m}=Kk(t),y={x:0,y:0},b={x:0,y:0},v={height:e.height*s.y,width:e.width*s.x};return!d&&i<=e.top+v.height?(y.y=bt.Backward,b.y=r*Math.abs((e.top+v.height-i)/v.height)):!h&&l>=e.bottom-v.height&&(y.y=bt.Forward,b.y=r*Math.abs((e.bottom-v.height-l)/v.height)),!m&&a>=e.right-v.width?(y.x=bt.Forward,b.x=r*Math.abs((e.right-v.width-a)/v.width)):!f&&o<=e.left+v.width&&(y.x=bt.Backward,b.x=r*Math.abs((e.left+v.width-o)/v.width)),{direction:y,speed:b}}function h7(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function Qk(t){return t.reduce((e,n)=>da(e,Zg(n)),ur)}function f7(t){return t.reduce((e,n)=>e+Wk(n),0)}function p7(t){return t.reduce((e,n)=>e+qk(n),0)}function Yk(t,e){if(e===void 0&&(e=ol),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);Hk(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const m7=[["x",["left","right"],f7],["y",["top","bottom"],p7]];class B0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=$0(n),s=Qk(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,a]of m7)for(const l of o)Object.defineProperty(this,l,{get:()=>{const d=a(r),h=s[i]-d;return this.rect[l]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class rc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function g7(t){const{EventTarget:e}=tn(t);return t instanceof e?t:il(t)}function ym(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Pn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Pn||(Pn={}));function yE(t){t.preventDefault()}function y7(t){t.stopPropagation()}var Pe;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(Pe||(Pe={}));const Xk={start:[Pe.Space,Pe.Enter],cancel:[Pe.Esc],end:[Pe.Space,Pe.Enter,Pe.Tab]},v7=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case Pe.Right:return{...n,x:n.x+25};case Pe.Left:return{...n,x:n.x-25};case Pe.Down:return{...n,y:n.y+25};case Pe.Up:return{...n,y:n.y-25}}};class H0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new rc(il(n)),this.windowListeners=new rc(tn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Pn.Resize,this.handleCancel),this.windowListeners.add(Pn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Pn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&Yk(r),n(ur)}handleKeyDown(e){if(Gf(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=Xk,coordinateGetter:o=v7,scrollBehavior:a="smooth"}=s,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:ur;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const m=Oh(f,h),y={x:0,y:0},{scrollableAncestors:b}=r.current;for(const v of b){const E=e.code,{isTop:x,isRight:w,isLeft:S,isBottom:k,maxScroll:j,minScroll:D}=Kk(v),T=h7(v),C={x:Math.min(E===Pe.Right?T.right-T.width/2:T.right,Math.max(E===Pe.Right?T.left:T.left+T.width/2,f.x)),y:Math.min(E===Pe.Down?T.bottom-T.height/2:T.bottom,Math.max(E===Pe.Down?T.top:T.top+T.height/2,f.y))},I=E===Pe.Right&&!w||E===Pe.Left&&!S,A=E===Pe.Down&&!k||E===Pe.Up&&!x;if(I&&C.x!==f.x){const P=v.scrollLeft+m.x,O=E===Pe.Right&&P<=j.x||E===Pe.Left&&P>=D.x;if(O&&!m.y){v.scrollTo({left:P,behavior:a});return}O?y.x=v.scrollLeft-P:y.x=E===Pe.Right?v.scrollLeft-j.x:v.scrollLeft-D.x,y.x&&v.scrollBy({left:-y.x,behavior:a});break}else if(A&&C.y!==f.y){const P=v.scrollTop+m.y,O=E===Pe.Down&&P<=j.y||E===Pe.Up&&P>=D.y;if(O&&!m.x){v.scrollTo({top:P,behavior:a});return}O?y.y=v.scrollTop-P:y.y=E===Pe.Down?v.scrollTop-j.y:v.scrollTop-D.y,y.y&&v.scrollBy({top:-y.y,behavior:a});break}}this.handleMove(e,da(Oh(f,this.referenceCoordinates),y))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}H0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Xk,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=i.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function vE(t){return!!(t&&"distance"in t)}function wE(t){return!!(t&&"delay"in t)}class W0{constructor(e,n,r){var s;r===void 0&&(r=g7(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=il(o),this.documentListeners=new rc(this.document),this.listeners=new rc(r),this.windowListeners=new rc(tn(o)),this.initialCoordinates=(s=Mh(i))!=null?s:ur,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Pn.Resize,this.handleCancel),this.windowListeners.add(Pn.DragStart,yE),this.windowListeners.add(Pn.VisibilityChange,this.handleCancel),this.windowListeners.add(Pn.ContextMenu,yE),this.documentListeners.add(Pn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(wE(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(vE(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Pn.Click,y7,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Pn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const l=(n=Mh(e))!=null?n:ur,d=Oh(s,l);if(!r&&a){if(vE(a)){if(a.tolerance!=null&&ym(d,a.tolerance))return this.handleCancel();if(ym(d,a.distance))return this.handleStart()}if(wE(a)&&ym(d,a.tolerance))return this.handleCancel();this.handlePending(a,d);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Pe.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const w7={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class q0 extends W0{constructor(e){const{event:n}=e,r=il(n.target);super(e,w7,r)}}q0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const x7={move:{name:"mousemove"},end:{name:"mouseup"}};var ey;(function(t){t[t.RightClick=2]="RightClick"})(ey||(ey={}));class _7 extends W0{constructor(e){super(e,x7,il(e.event.target))}}_7.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===ey.RightClick?!1:(r==null||r({event:n}),!0)}}];const vm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class E7 extends W0{constructor(e){super(e,vm)}static setup(){return window.addEventListener(vm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(vm.move.name,e)};function e(){}}}E7.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var sc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(sc||(sc={}));var Vh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Vh||(Vh={}));function b7(t){let{acceleration:e,activator:n=sc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:a=Vh.TreeOrder,pointerCoordinates:l,scrollableAncestors:d,scrollableAncestorRects:h,delta:f,threshold:m}=t;const y=T7({delta:f,disabled:!i}),[b,v]=j8(),E=p.useRef({x:0,y:0}),x=p.useRef({x:0,y:0}),w=p.useMemo(()=>{switch(n){case sc.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case sc.DraggableRect:return s}},[n,s,l]),S=p.useRef(null),k=p.useCallback(()=>{const D=S.current;if(!D)return;const T=E.current.x*x.current.x,C=E.current.y*x.current.y;D.scrollBy(T,C)},[]),j=p.useMemo(()=>a===Vh.TreeOrder?[...d].reverse():d,[a,d]);p.useEffect(()=>{if(!i||!d.length||!w){v();return}for(const D of j){if((r==null?void 0:r(D))===!1)continue;const T=d.indexOf(D),C=h[T];if(!C)continue;const{direction:I,speed:A}=d7(D,C,w,e,m);for(const P of["x","y"])y[P][I[P]]||(A[P]=0,I[P]=0);if(A.x>0||A.y>0){v(),S.current=D,b(k,o),E.current=A,x.current=I;return}}E.current={x:0,y:0},x.current={x:0,y:0},v()},[e,k,r,v,i,o,JSON.stringify(w),JSON.stringify(y),b,d,j,h,JSON.stringify(m)])}const S7={x:{[bt.Backward]:!1,[bt.Forward]:!1},y:{[bt.Backward]:!1,[bt.Forward]:!1}};function T7(t){let{delta:e,disabled:n}=t;const r=jh(e);return au(s=>{if(n||!r||!s)return S7;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[bt.Backward]:s.x[bt.Backward]||i.x===-1,[bt.Forward]:s.x[bt.Forward]||i.x===1},y:{[bt.Backward]:s.y[bt.Backward]||i.y===-1,[bt.Forward]:s.y[bt.Forward]||i.y===1}}},[n,e,r])}function C7(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return au(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function I7(t,e){return p.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Mc;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Mc||(Mc={}));var ty;(function(t){t.Optimized="optimized"})(ty||(ty={}));const xE=new Map;function N7(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=p.useState(null),{frequency:a,measure:l,strategy:d}=s,h=p.useRef(t),f=E(),m=Oc(f),y=p.useCallback(function(x){x===void 0&&(x=[]),!m.current&&o(w=>w===null?x:w.concat(x.filter(S=>!w.includes(S))))},[m]),b=p.useRef(null),v=au(x=>{if(f&&!n)return xE;if(!x||x===xE||h.current!==t||i!=null){const w=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const k=S.node.current,j=k?new B0(l(k),k):null;S.rect.current=j,j&&w.set(S.id,j)}return w}return x},[t,i,n,f,l]);return p.useEffect(()=>{h.current=t},[t]),p.useEffect(()=>{f||y()},[n,f]),p.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),p.useEffect(()=>{f||typeof a!="number"||b.current!==null||(b.current=setTimeout(()=>{y(),b.current=null},a))},[a,f,y,...r]),{droppableRects:v,measureDroppableContainers:y,measuringScheduled:i!=null};function E(){switch(d){case Mc.Always:return!1;case Mc.BeforeDragging:return n;default:return!n}}}function G0(t,e){return au(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function A7(t,e){return G0(t,e)}function k7(t){let{callback:e,disabled:n}=t;const r=qf(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Kf(t){let{callback:e,disabled:n}=t;const r=qf(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function R7(t){return new B0(ol(t),t)}function _E(t,e,n){e===void 0&&(e=R7);const[r,s]=p.useState(null);function i(){s(l=>{if(!t)return null;if(t.isConnected===!1){var d;return(d=l??n)!=null?d:null}const h=e(t);return JSON.stringify(l)===JSON.stringify(h)?l:h})}const o=k7({callback(l){if(t)for(const d of l){const{type:h,target:f}=d;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),a=Kf({callback:i});return cr(()=>{i(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function P7(t){const e=G0(t);return $k(t,e)}const EE=[];function D7(t){const e=p.useRef(t),n=au(r=>t?r&&r!==EE&&t&&e.current&&t.parentNode===e.current.parentNode?r:$0(t):EE,[t]);return p.useEffect(()=>{e.current=t},[t]),n}function j7(t){const[e,n]=p.useState(null),r=p.useRef(t),s=p.useCallback(i=>{const o=gm(i.target);o&&n(a=>a?(a.set(o,Zg(o)),new Map(a)):null)},[]);return p.useEffect(()=>{const i=r.current;if(t!==i){o(i);const a=t.map(l=>{const d=gm(l);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Zg(d)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(i)};function o(a){a.forEach(l=>{const d=gm(l);d==null||d.removeEventListener("scroll",s)})}},[s,t]),p.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>da(i,o),ur):Qk(t):ur,[t,e])}function bE(t,e){e===void 0&&(e=[]);const n=p.useRef(null);return p.useEffect(()=>{n.current=null},e),p.useEffect(()=>{const r=t!==ur;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?Oh(t,n.current):ur}function O7(t){p.useEffect(()=>{if(!Wf)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function M7(t,e){return p.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function Jk(t){return p.useMemo(()=>t?a7(t):null,[t])}const SE=[];function L7(t,e){e===void 0&&(e=ol);const[n]=t,r=Jk(n?tn(n):null),[s,i]=p.useState(SE);function o(){i(()=>t.length?t.map(l=>Gk(l)?r:new B0(e(l),l)):SE)}const a=Kf({callback:o});return cr(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),s}function Zk(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return ou(e)?e:t}function V7(t){let{measure:e}=t;const[n,r]=p.useState(null),s=p.useCallback(d=>{for(const{target:h}of d)if(ou(h)){r(f=>{const m=e(h);return f?{...f,width:m.width,height:m.height}:m});break}},[e]),i=Kf({callback:s}),o=p.useCallback(d=>{const h=Zk(d);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[a,l]=Dh(o);return p.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const F7=[{sensor:q0,options:{}},{sensor:H0,options:{}}],z7={current:{}},Od={draggable:{measure:gE},droppable:{measure:gE,strategy:Mc.WhileDragging,frequency:ty.Optimized},dragOverlay:{measure:ol}};class ic extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const U7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ic,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Lh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Od,measureDroppableContainers:Lh,windowRect:null,measuringScheduled:!1},eR={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Lh,draggableNodes:new Map,over:null,measureDroppableContainers:Lh},cu=p.createContext(eR),tR=p.createContext(U7);function $7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ic}}}function B7(t,e){switch(e.type){case mt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case mt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case mt.DragEnd:case mt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new ic(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case mt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new ic(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case mt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new ic(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function H7(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=p.useContext(cu),i=jh(r),o=jh(n==null?void 0:n.id);return p.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!Gf(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:l,node:d}=a;if(!l.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[l.current,d.current]){if(!h)continue;const f=L8(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function nR(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function W7(t){return p.useMemo(()=>({draggable:{...Od.draggable,...t==null?void 0:t.draggable},droppable:{...Od.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Od.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function q7(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=p.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;cr(()=>{if(!o&&!a||!e){i.current=!1;return}if(i.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const h=n(d),f=$k(h,r);if(o||(f.x=0),a||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=Hk(d);m&&m.scrollBy({top:f.y,left:f.x})}},[e,o,a,r,n])}const Qf=p.createContext({...ur,scaleX:1,scaleY:1});var ks;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(ks||(ks={}));const G7=p.memo(function(e){var n,r,s,i;let{id:o,accessibility:a,autoScroll:l=!0,children:d,sensors:h=F7,collisionDetection:f=t7,measuring:m,modifiers:y,...b}=e;const v=p.useReducer(B7,void 0,$7),[E,x]=v,[w,S]=B8(),[k,j]=p.useState(ks.Uninitialized),D=k===ks.Initialized,{draggable:{active:T,nodes:C,translate:I},droppable:{containers:A}}=E,P=T!=null?C.get(T):null,O=p.useRef({initial:null,translated:null}),R=p.useMemo(()=>{var Re;return T!=null?{id:T,data:(Re=P==null?void 0:P.data)!=null?Re:z7,rect:O}:null},[T,P]),$=p.useRef(null),[re,z]=p.useState(null),[K,M]=p.useState(null),L=Oc(b,Object.values(b)),U=lu("DndDescribedBy",o),Q=p.useMemo(()=>A.getEnabled(),[A]),q=W7(m),{droppableRects:se,measureDroppableContainers:ee,measuringScheduled:de}=N7(Q,{dragging:D,dependencies:[I.x,I.y],config:q.droppable}),ce=C7(C,T),W=p.useMemo(()=>K?Mh(K):null,[K]),ie=gu(),ve=A7(ce,q.draggable.measure);q7({activeNode:T!=null?C.get(T):null,config:ie.layoutShiftCompensation,initialRect:ve,measure:q.draggable.measure});const ne=_E(ce,q.draggable.measure,ve),ge=_E(ce?ce.parentElement:null),we=p.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qe=A.getNodeFor((n=we.current.over)==null?void 0:n.id),Qe=V7({measure:q.dragOverlay.measure}),nn=(r=Qe.nodeRef.current)!=null?r:ce,Ot=D?(s=Qe.rect)!=null?s:ne:null,An=!!(Qe.nodeRef.current&&Qe.rect),Ii=P7(An?null:ne),ze=Jk(nn?tn(nn):null),Ge=D7(D?qe??ce:null),zr=L7(Ge),To=nR(y,{transform:{x:I.x-Ii.x,y:I.y-Ii.y,scaleX:1,scaleY:1},activatorEvent:K,active:R,activeNodeRect:ne,containerNodeRect:ge,draggingNodeRect:Ot,over:we.current.over,overlayNodeRect:Qe.rect,scrollableAncestors:Ge,scrollableAncestorRects:zr,windowRect:ze}),ll=W?da(W,I):null,du=j7(Ge),Ni=bE(du),hu=bE(du,[ne]),Ur=da(To,Ni),fr=Ot?s7(Ot,To):null,Ai=R&&fr?f({active:R,collisionRect:fr,droppableRects:se,droppableContainers:Q,pointerCoordinates:ll}):null,fu=J8(Ai,"id"),[Un,cl]=p.useState(null),ki=An?To:da(To,hu),ul=n7(ki,(i=Un==null?void 0:Un.rect)!=null?i:null,ne),Ri=p.useRef(null),pr=p.useCallback((Re,Mt)=>{let{sensor:dt,options:rn}=Mt;if($.current==null)return;const sn=C.get($.current);if(!sn)return;const Gt=Re.nativeEvent,Nt=new dt({active:$.current,activeNode:sn,event:Gt,options:rn,context:we,onAbort(ht){if(!C.get(ht))return;const{onDragAbort:mn}=L.current,kn={id:ht};mn==null||mn(kn),w({type:"onDragAbort",event:kn})},onPending(ht,pn,mn,kn){if(!C.get(ht))return;const{onDragPending:$n}=L.current,mr={id:ht,constraint:pn,initialCoordinates:mn,offset:kn};$n==null||$n(mr),w({type:"onDragPending",event:mr})},onStart(ht){const pn=$.current;if(pn==null)return;const mn=C.get(pn);if(!mn)return;const{onDragStart:kn}=L.current,$r={activatorEvent:Gt,active:{id:pn,data:mn.data,rect:O}};Ln.unstable_batchedUpdates(()=>{kn==null||kn($r),j(ks.Initializing),x({type:mt.DragStart,initialCoordinates:ht,active:pn}),w({type:"onDragStart",event:$r}),z(Ri.current),M(Gt)})},onMove(ht){x({type:mt.DragMove,coordinates:ht})},onEnd:ms(mt.DragEnd),onCancel:ms(mt.DragCancel)});Ri.current=Nt;function ms(ht){return async function(){const{active:mn,collisions:kn,over:$r,scrollAdjustedTranslate:$n}=we.current;let mr=null;if(mn&&$n){const{cancelDrop:on}=L.current;mr={activatorEvent:Gt,active:mn,collisions:kn,delta:$n,over:$r},ht===mt.DragEnd&&typeof on=="function"&&await Promise.resolve(on(mr))&&(ht=mt.DragCancel)}$.current=null,Ln.unstable_batchedUpdates(()=>{x({type:ht}),j(ks.Uninitialized),cl(null),z(null),M(null),Ri.current=null;const on=ht===mt.DragEnd?"onDragEnd":"onDragCancel";if(mr){const Co=L.current[on];Co==null||Co(mr),w({type:on,event:mr})}})}}},[C]),pu=p.useCallback((Re,Mt)=>(dt,rn)=>{const sn=dt.nativeEvent,Gt=C.get(rn);if($.current!==null||!Gt||sn.dndKit||sn.defaultPrevented)return;const Nt={active:Gt};Re(dt,Mt.options,Nt)===!0&&(sn.dndKit={capturedBy:Mt.sensor},$.current=rn,pr(dt,Mt))},[C,pr]),Pi=I7(h,pu);O7(h),cr(()=>{ne&&k===ks.Initializing&&j(ks.Initialized)},[ne,k]),p.useEffect(()=>{const{onDragMove:Re}=L.current,{active:Mt,activatorEvent:dt,collisions:rn,over:sn}=we.current;if(!Mt||!dt)return;const Gt={active:Mt,activatorEvent:dt,collisions:rn,delta:{x:Ur.x,y:Ur.y},over:sn};Ln.unstable_batchedUpdates(()=>{Re==null||Re(Gt),w({type:"onDragMove",event:Gt})})},[Ur.x,Ur.y]),p.useEffect(()=>{const{active:Re,activatorEvent:Mt,collisions:dt,droppableContainers:rn,scrollAdjustedTranslate:sn}=we.current;if(!Re||$.current==null||!Mt||!sn)return;const{onDragOver:Gt}=L.current,Nt=rn.get(fu),ms=Nt&&Nt.rect.current?{id:Nt.id,rect:Nt.rect.current,data:Nt.data,disabled:Nt.disabled}:null,ht={active:Re,activatorEvent:Mt,collisions:dt,delta:{x:sn.x,y:sn.y},over:ms};Ln.unstable_batchedUpdates(()=>{cl(ms),Gt==null||Gt(ht),w({type:"onDragOver",event:ht})})},[fu]),cr(()=>{we.current={activatorEvent:K,active:R,activeNode:ce,collisionRect:fr,collisions:Ai,droppableRects:se,draggableNodes:C,draggingNode:nn,draggingNodeRect:Ot,droppableContainers:A,over:Un,scrollableAncestors:Ge,scrollAdjustedTranslate:Ur},O.current={initial:Ot,translated:fr}},[R,ce,Ai,fr,C,nn,Ot,se,A,Un,Ge,Ur]),b7({...ie,delta:I,draggingRect:fr,pointerCoordinates:ll,scrollableAncestors:Ge,scrollableAncestorRects:zr});const mu=p.useMemo(()=>({active:R,activeNode:ce,activeNodeRect:ne,activatorEvent:K,collisions:Ai,containerNodeRect:ge,dragOverlay:Qe,draggableNodes:C,droppableContainers:A,droppableRects:se,over:Un,measureDroppableContainers:ee,scrollableAncestors:Ge,scrollableAncestorRects:zr,measuringConfiguration:q,measuringScheduled:de,windowRect:ze}),[R,ce,ne,K,Ai,ge,Qe,C,A,se,Un,ee,Ge,zr,q,de,ze]),Di=p.useMemo(()=>({activatorEvent:K,activators:Pi,active:R,activeNodeRect:ne,ariaDescribedById:{draggable:U},dispatch:x,draggableNodes:C,over:Un,measureDroppableContainers:ee}),[K,Pi,R,ne,x,U,C,Un,ee]);return be.createElement(Uk.Provider,{value:S},be.createElement(cu.Provider,{value:Di},be.createElement(tR.Provider,{value:mu},be.createElement(Qf.Provider,{value:ul},d)),be.createElement(H7,{disabled:(a==null?void 0:a.restoreFocus)===!1})),be.createElement(q8,{...a,hiddenTextDescribedById:U}));function gu(){const Re=(re==null?void 0:re.autoScrollEnabled)===!1,Mt=typeof l=="object"?l.enabled===!1:l===!1,dt=D&&!Re&&!Mt;return typeof l=="object"?{...l,enabled:dt}:{enabled:dt}}}),K7=p.createContext(null),TE="button",Q7="Draggable";function Y7(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=lu(Q7),{activators:o,activatorEvent:a,active:l,activeNodeRect:d,ariaDescribedById:h,draggableNodes:f,over:m}=p.useContext(cu),{role:y=TE,roleDescription:b="draggable",tabIndex:v=0}=s??{},E=(l==null?void 0:l.id)===e,x=p.useContext(E?Qf:K7),[w,S]=Dh(),[k,j]=Dh(),D=M7(o,e),T=Oc(n);cr(()=>(f.set(e,{id:e,key:i,node:w,activatorNode:k,data:T}),()=>{const I=f.get(e);I&&I.key===i&&f.delete(e)}),[f,e]);const C=p.useMemo(()=>({role:y,tabIndex:v,"aria-disabled":r,"aria-pressed":E&&y===TE?!0:void 0,"aria-roledescription":b,"aria-describedby":h.draggable}),[r,y,v,E,b,h.draggable]);return{active:l,activatorEvent:a,activeNodeRect:d,attributes:C,isDragging:E,listeners:r?void 0:D,node:w,over:m,setNodeRef:S,setActivatorNodeRef:j,transform:x}}function rR(){return p.useContext(tR)}const X7="Droppable",J7={timeout:25};function sR(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=lu(X7),{active:o,dispatch:a,over:l,measureDroppableContainers:d}=p.useContext(cu),h=p.useRef({disabled:n}),f=p.useRef(!1),m=p.useRef(null),y=p.useRef(null),{disabled:b,updateMeasurementsFor:v,timeout:E}={...J7,...s},x=Oc(v??r),w=p.useCallback(()=>{if(!f.current){f.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{d(Array.isArray(x.current)?x.current:[x.current]),y.current=null},E)},[E]),S=Kf({callback:w,disabled:b||!o}),k=p.useCallback((C,I)=>{S&&(I&&(S.unobserve(I),f.current=!1),C&&S.observe(C))},[S]),[j,D]=Dh(k),T=Oc(e);return p.useEffect(()=>{!S||!j.current||(S.disconnect(),f.current=!1,S.observe(j.current))},[j,S]),p.useEffect(()=>(a({type:mt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:j,rect:m,data:T}}),()=>a({type:mt.UnregisterDroppable,key:i,id:r})),[r]),p.useEffect(()=>{n!==h.current.disabled&&(a({type:mt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,a]),{active:o,rect:m,isOver:(l==null?void 0:l.id)===r,node:j,over:l,setNodeRef:D}}function Z7(t){let{animation:e,children:n}=t;const[r,s]=p.useState(null),[i,o]=p.useState(null),a=jh(n);return!n&&!r&&a&&s(a),cr(()=>{if(!i)return;const l=r==null?void 0:r.key,d=r==null?void 0:r.props.id;if(l==null||d==null){s(null);return}Promise.resolve(e(d,i)).then(()=>{s(null)})},[e,r,i]),be.createElement(be.Fragment,null,n,r?p.cloneElement(r,{ref:o}):null)}const e$={x:0,y:0,scaleX:1,scaleY:1};function t$(t){let{children:e}=t;return be.createElement(cu.Provider,{value:eR},be.createElement(Qf.Provider,{value:e$},e))}const n$={position:"fixed",touchAction:"none"},r$=t=>Gf(t)?"transform 250ms ease":void 0,s$=p.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:a,style:l,transform:d,transition:h=r$}=t;if(!a)return null;const f=s?d:{...d,scaleX:1,scaleY:1},m={...n$,width:a.width,height:a.height,top:a.top,left:a.left,transform:_i.Transform.toString(f),transformOrigin:s&&r?Q8(r,a):void 0,transition:typeof h=="function"?h(r):h,...l};return be.createElement(n,{className:o,style:m,ref:e},i)}),i$=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[a,l]of Object.entries(i.active))l!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(i!=null&&i.dragOverlay)for(const[a,l]of Object.entries(i.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,d]of Object.entries(s))n.node.style.setProperty(l,d);o!=null&&o.active&&n.node.classList.remove(o.active)}},o$=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:_i.Transform.toString(e)},{transform:_i.Transform.toString(n)}]},a$={duration:250,easing:"ease",keyframes:o$,sideEffects:i$({styles:{active:{opacity:"0"}}})};function l$(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return qf((i,o)=>{if(e===null)return;const a=n.get(i);if(!a)return;const l=a.node.current;if(!l)return;const d=Zk(o);if(!d)return;const{transform:h}=tn(o).getComputedStyle(o),f=Bk(h);if(!f)return;const m=typeof e=="function"?e:c$(e);return Yk(l,s.draggable.measure),m({active:{id:i,data:a.data,node:l,rect:s.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function c$(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...a$,...t};return i=>{let{active:o,dragOverlay:a,transform:l,...d}=i;if(!e)return;const h={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},f={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},m={x:l.x-h.x,y:l.y-h.y,...f},y=s({...d,active:o,dragOverlay:a,transform:{initial:l,final:m}}),[b]=y,v=y[y.length-1];if(JSON.stringify(b)===JSON.stringify(v))return;const E=r==null?void 0:r({active:o,dragOverlay:a,...d}),x=a.node.animate(y,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{x.onfinish=()=>{E==null||E(),w()}})}}let CE=0;function u$(t){return p.useMemo(()=>{if(t!=null)return CE++,CE},[t])}const d$=be.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:a="div",className:l,zIndex:d=999}=t;const{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:y,draggableNodes:b,droppableContainers:v,dragOverlay:E,over:x,measuringConfiguration:w,scrollableAncestors:S,scrollableAncestorRects:k,windowRect:j}=rR(),D=p.useContext(Qf),T=u$(f==null?void 0:f.id),C=nR(o,{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:y,draggingNodeRect:E.rect,over:x,overlayNodeRect:E.rect,scrollableAncestors:S,scrollableAncestorRects:k,transform:D,windowRect:j}),I=G0(m),A=l$({config:r,draggableNodes:b,droppableContainers:v,measuringConfiguration:w}),P=I?E.setRef:void 0;return be.createElement(t$,null,be.createElement(Z7,{animation:A},f&&T?be.createElement(s$,{key:T,id:f.id,ref:P,as:a,activatorEvent:h,adjustScale:e,className:l,transition:i,rect:I,style:{zIndex:d,...s},transform:C},n):null))});function iR(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function h$(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function id(t){return t!==null&&t>=0}function f$(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function p$(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const oR=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=iR(e,r,n),o=e[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},od={scaleX:1,scaleY:1},m$=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const a=(e=i[n])!=null?e:r;if(!a)return null;if(s===n){const d=i[o];return d?{x:0,y:n<o?d.top+d.height-(a.top+a.height):d.top-a.top,...od}:null}const l=g$(i,s,n);return s>n&&s<=o?{x:0,y:-a.height-l,...od}:s<n&&s>=o?{x:0,y:a.height+l,...od}:{x:0,y:0,...od}};function g$(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const aR="Sortable",lR=be.createContext({activeIndex:-1,containerId:aR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:oR,disabled:{draggable:!1,droppable:!1}});function y$(t){let{children:e,id:n,items:r,strategy:s=oR,disabled:i=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:d,measureDroppableContainers:h}=rR(),f=lu(aR,n),m=a.rect!==null,y=p.useMemo(()=>r.map(D=>typeof D=="object"&&"id"in D?D.id:D),[r]),b=o!=null,v=o?y.indexOf(o.id):-1,E=d?y.indexOf(d.id):-1,x=p.useRef(y),w=!f$(y,x.current),S=E!==-1&&v===-1||w,k=p$(i);cr(()=>{w&&b&&h(y)},[w,y,b,h]),p.useEffect(()=>{x.current=y},[y]);const j=p.useMemo(()=>({activeIndex:v,containerId:f,disabled:k,disableTransforms:S,items:y,overIndex:E,useDragOverlay:m,sortedRects:h$(y,l),strategy:s}),[v,f,k.draggable,k.droppable,S,y,E,l,m,s]);return be.createElement(lR.Provider,{value:j},e)}const v$=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return iR(n,r,s).indexOf(e)},w$=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:l,transition:d}=t;return!d||!r||a!==i&&s===o?!1:n?!0:o!==s&&e===l},x$={duration:200,easing:"ease"},cR="transform",_$=_i.Transition.toString({property:cR,duration:0,easing:"linear"}),E$={roleDescription:"sortable"};function b$(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=p.useState(null),a=p.useRef(n);return cr(()=>{if(!e&&n!==a.current&&r.current){const l=s.current;if(l){const d=ol(r.current,{ignoreTransform:!0}),h={x:l.left-d.left,y:l.top-d.top,scaleX:l.width/d.width,scaleY:l.height/d.height};(h.x||h.y)&&o(h)}}n!==a.current&&(a.current=n)},[e,n,r,s]),p.useEffect(()=>{i&&o(null)},[i]),i}function S$(t){let{animateLayoutChanges:e=w$,attributes:n,disabled:r,data:s,getNewIndex:i=v$,id:o,strategy:a,resizeObserverConfig:l,transition:d=x$}=t;const{items:h,containerId:f,activeIndex:m,disabled:y,disableTransforms:b,sortedRects:v,overIndex:E,useDragOverlay:x,strategy:w}=p.useContext(lR),S=T$(r,y),k=h.indexOf(o),j=p.useMemo(()=>({sortable:{containerId:f,index:k,items:h},...s}),[f,s,k,h]),D=p.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:T,node:C,isOver:I,setNodeRef:A}=sR({id:o,data:j,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:D,...l}}),{active:P,activatorEvent:O,activeNodeRect:R,attributes:$,setNodeRef:re,listeners:z,isDragging:K,over:M,setActivatorNodeRef:L,transform:U}=Y7({id:o,data:j,attributes:{...E$,...n},disabled:S.draggable}),Q=D8(A,re),q=!!P,se=q&&!b&&id(m)&&id(E),ee=!x&&K,de=ee&&se?U:null,W=se?de??(a??w)({rects:v,activeNodeRect:R,activeIndex:m,overIndex:E,index:k}):null,ie=id(m)&&id(E)?i({id:o,items:h,activeIndex:m,overIndex:E}):k,ve=P==null?void 0:P.id,ne=p.useRef({activeId:ve,items:h,newIndex:ie,containerId:f}),ge=h!==ne.current.items,we=e({active:P,containerId:f,isDragging:K,isSorting:q,id:o,index:k,items:h,newIndex:ne.current.newIndex,previousItems:ne.current.items,previousContainerId:ne.current.containerId,transition:d,wasDragging:ne.current.activeId!=null}),qe=b$({disabled:!we,index:k,node:C,rect:T});return p.useEffect(()=>{q&&ne.current.newIndex!==ie&&(ne.current.newIndex=ie),f!==ne.current.containerId&&(ne.current.containerId=f),h!==ne.current.items&&(ne.current.items=h)},[q,ie,f,h]),p.useEffect(()=>{if(ve===ne.current.activeId)return;if(ve!=null&&ne.current.activeId==null){ne.current.activeId=ve;return}const nn=setTimeout(()=>{ne.current.activeId=ve},50);return()=>clearTimeout(nn)},[ve]),{active:P,activeIndex:m,attributes:$,data:j,rect:T,index:k,newIndex:ie,items:h,isOver:I,isSorting:q,isDragging:K,listeners:z,node:C,overIndex:E,over:M,setNodeRef:Q,setActivatorNodeRef:L,setDroppableNodeRef:A,setDraggableNodeRef:re,transform:qe??W,transition:Qe()};function Qe(){if(qe||ge&&ne.current.newIndex===k)return _$;if(!(ee&&!Gf(O)||!d)&&(q||we))return _i.Transition.toString({...d,property:cR})}}function T$(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}Pe.Down,Pe.Right,Pe.Up,Pe.Left;const C$=Gc("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ii({className:t,variant:e,...n}){return c.jsx("div",{className:X(C$({variant:e}),t),...n})}function He({className:t,...e}){return c.jsx("div",{className:X("animate-pulse rounded-md bg-muted",t),...e})}const ot=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));ot.displayName="Card";const Pt=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("flex flex-col space-y-1.5 p-6",t),...e}));Pt.displayName="CardHeader";const cn=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("text-2xl font-semibold leading-none tracking-tight",t),...e}));cn.displayName="CardTitle";const Gr=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("text-sm text-muted-foreground",t),...e}));Gr.displayName="CardDescription";const St=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("p-6 pt-0",t),...e}));St.displayName="CardContent";const uR=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:X("flex items-center p-6 pt-0",t),...e}));uR.displayName="CardFooter";function dR(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function hR(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function fR({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:l,isDragging:d}=S$({id:t.id}),h={transform:_i.Transform.toString(a),transition:l},f=hR(t.dueDate),m=f!==null&&f<=1&&f>=0,y=t.systemStatus==="overdue"||f!==null&&f<0;return c.jsx(ot,{ref:o,style:h,className:X("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||d)&&"opacity-50 rotate-1 shadow-lg",y&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx(ii,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),c.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:b=>b.stopPropagation(),children:c.jsx(IM,{className:"h-4 w-4 text-muted-foreground"})})]}),c.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(ci,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:X(y&&"text-destructive",m&&!y&&"text-foreground font-medium"),children:dR(t.dueDate)}),y&&c.jsx(ui,{className:"h-3.5 w-3.5 text-destructive"}),m&&!y&&c.jsx(ZT,{className:"h-3.5 w-3.5 text-foreground"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx(Ra,{className:"h-3.5 w-3.5 text-muted-foreground"}),c.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(Ra,{className:"h-3.5 w-3.5"}),c.jsx("span",{children:"Submitted"})]})]}),c.jsx("div",{className:"flex items-center gap-1",children:n&&c.jsx(Ql,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function I$({assignment:t,onClick:e}){const n=hR(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return c.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[c.jsx("span",{className:X("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:dR(t.dueDate)}),r&&c.jsx(ui,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const K0=p.forwardRef(({className:t,...e},n)=>c.jsx("textarea",{className:X("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));K0.displayName="Textarea";var N$="Separator",IE="horizontal",A$=["horizontal","vertical"],pR=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=IE,...s}=t,i=k$(r)?r:IE,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return c.jsx(pe.div,{"data-orientation":i,...a,...s,ref:e})});pR.displayName=N$;function k$(t){return A$.includes(t)}var mR=pR;const Cr=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>c.jsx(mR,{ref:s,decorative:n,orientation:e,className:X("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Cr.displayName=mR.displayName;const R$=rk,P$=sk,gR=p.forwardRef(({className:t,...e},n)=>c.jsx(_0,{className:X("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));gR.displayName=_0.displayName;const D$=Gc("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),yR=p.forwardRef(({side:t="right",className:e,children:n,...r},s)=>c.jsxs(P$,{children:[c.jsx(gR,{}),c.jsxs(E0,{ref:s,className:X(D$({side:t}),e),...r,children:[n,c.jsxs(T0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[c.jsx(pf,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));yR.displayName=E0.displayName;const vR=({className:t,...e})=>c.jsx("div",{className:X("flex flex-col space-y-2 text-center sm:text-left",t),...e});vR.displayName="SheetHeader";const wR=p.forwardRef(({className:t,...e},n)=>c.jsx(b0,{ref:n,className:X("text-lg font-semibold text-foreground",t),...e}));wR.displayName=b0.displayName;const j$=p.forwardRef(({className:t,...e},n)=>c.jsx(S0,{ref:n,className:X("text-sm text-muted-foreground",t),...e}));j$.displayName=S0.displayName;function O$(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function M$(t){return t?` at ${t}`:""}function L$({assignment:t}){const e=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:!!t.submittedAt,date:t.submittedAt},{id:"graded",label:"Graded",completed:!!t.gradedAt,date:t.gradedAt}];return c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),c.jsx("div",{className:"space-y-4",children:e.map((n,r)=>c.jsxs("div",{className:"flex items-start gap-3 relative",children:[c.jsx("div",{className:X("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",n.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:n.completed&&c.jsx(Ra,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:X("text-sm",n.completed?"font-medium":"text-muted-foreground"),children:n.label}),n.date&&n.completed&&c.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(n.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},n.id))})]})]})}function V$({note:t,onUpdate:e,onDelete:n}){const[r,s]=p.useState(!1),[i,o]=p.useState(t.content),a=()=>{e(i,t.isImportant),s(!1)};return c.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&c.jsx(m_,{className:"h-3.5 w-3.5 fill-current text-foreground"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Se,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:c.jsx(m_,{className:X("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),c.jsx(Se,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:c.jsx(RM,{className:"h-3.5 w-3.5"})}),c.jsx(Se,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:c.jsx(LM,{className:"h-3.5 w-3.5"})})]})]}),r?c.jsxs("div",{className:"space-y-2",children:[c.jsx(K0,{value:i,onChange:l=>o(l.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),c.jsxs(Se,{size:"sm",onClick:a,"data-testid":`button-save-note-${t.id}`,children:[c.jsx(nC,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function Q0({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=So(),[a,l]=p.useState(""),[d,h]=p.useState(!1);if(!t)return null;const f=r(t.id),m=t.systemStatus==="overdue",y=()=>{a.trim()&&(s(t.id,a.trim()),l(""),h(!1))};return c.jsx(R$,{open:e,onOpenChange:n,children:c.jsxs(yR,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[c.jsx(vR,{className:"space-y-4",children:c.jsx("div",{className:"flex items-start justify-between gap-4",children:c.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[c.jsx(ii,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),c.jsx(wR,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),c.jsxs("div",{className:"mt-6 space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(ci,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("span",{className:X(m&&"text-destructive"),children:[O$(t.dueDate),M$(t.dueTime)]}),m&&c.jsx(ui,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?c.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):c.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),c.jsx(Cr,{}),t.description&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Description"}),c.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),c.jsx(Cr,{})]}),c.jsx(L$,{assignment:t}),c.jsx(Cr,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!d&&c.jsxs(Se,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[c.jsx(PM,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),d&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(K0,{value:a,onChange:b=>l(b.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(Se,{variant:"ghost",size:"sm",onClick:()=>{h(!1),l("")},children:"Cancel"}),c.jsxs(Se,{size:"sm",onClick:y,disabled:!a.trim(),"data-testid":"button-save-new-note",children:[c.jsx(nC,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?c.jsx("div",{className:"space-y-2",children:f.map(b=>c.jsx(V$,{note:b,onUpdate:(v,E)=>i(b.id,v,E),onDelete:()=>o(b.id,t.id)},b.id))}):!d&&c.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&c.jsxs(c.Fragment,{children:[c.jsx(Cr,{}),c.jsxs(Se,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[c.jsx(wg,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}const NE=["Drag and drop assignments between columns to update their status.","Trace automatically syncs changes with your Google Classroom.","Click on any assignment card to view details and add private notes.","Use the Timeline view to visualize deadlines chronologically.","Keep your 'In Progress' column manageable for better focus.","Assignments marked as 'Done' in Classroom appear in the Completed column."];function F$({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=sR({id:t});return c.jsxs("div",{ref:o,className:X("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[c.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[c.jsx("h3",{className:"text-sm font-medium",children:e}),c.jsx(ii,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),c.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:c.jsx(y$,{items:n.map(a=>a.id),strategy:m$,children:n.length>0?n.map(a=>{var l;return c.jsx(fR,{assignment:a,onClick:()=>r(a),hasNotes:(((l=s.get(a.id))==null?void 0:l.length)||0)>0},a.id)}):c.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function z$(){return c.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6 opacity-40 pointer-events-none select-none filter grayscale",children:[1,2,3,4,5].map(t=>c.jsxs("div",{className:"flex flex-col min-w-[280px] w-[280px]",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b",children:[c.jsx(He,{className:"h-5 w-24"}),c.jsx(He,{className:"h-5 w-8"})]}),c.jsx("div",{className:"p-3 space-y-3",children:[1,2,3].map(e=>c.jsx(He,{className:"h-32 w-full"},e))})]},t))})}function U$(){const[t,e]=p.useState(10),[n,r]=p.useState(0);return p.useEffect(()=>{const s=setInterval(()=>{e(o=>{if(o===100)return 100;const a=Math.random()*10;return Math.min(o+a,90)})},500),i=setInterval(()=>{r(o=>(o+1)%NE.length)},2500);return()=>{clearInterval(s),clearInterval(i)}},[]),c.jsxs("div",{className:"relative h-full w-full bg-background overflow-hidden",children:[c.jsx(z$,{}),c.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/60 backdrop-blur-[2px]",children:c.jsxs("div",{className:"w-full max-w-md p-6 space-y-6",children:[c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"h-10 w-10 bg-zinc-950 rounded flex items-center justify-center text-white",children:c.jsx(di,{className:"h-5 w-5 animate-spin"})}),c.jsx("h2",{className:"text-lg font-semibold tracking-tight",children:"Syncing Workspace"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-1 w-full bg-zinc-200 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-zinc-950 transition-all duration-500 ease-out",style:{width:`${t}%`}})}),c.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-400 font-mono uppercase tracking-wider",children:[c.jsx("span",{children:"Retrieving Assignments"}),c.jsxs("span",{children:[Math.round(t),"%"]})]})]}),c.jsxs("div",{className:"flex gap-3 items-start bg-white border border-zinc-200 p-4 rounded-md shadow-sm max-w-sm mx-auto animate-in fade-in slide-in-from-bottom-2 duration-700",children:[c.jsx(hf,{className:"h-4 w-4 text-zinc-900 shrink-0 mt-0.5"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs font-bold text-zinc-900 uppercase tracking-wide",children:"Did you know?"}),c.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed min-h-[40px]",children:NE[n]})]})]})]})})]})}function $$(){var E;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o}=So(),[a,l]=p.useState(null),[d,h]=p.useState(null),f=G8(pE(q0,{activationConstraint:{distance:8}}),pE(H0)),m=t(),y=d?i.find(x=>x.id===d):null,b=x=>{h(x.active.id)},v=x=>{const{active:w,over:S}=x;if(h(null),!S)return;const k=w.id,j=S.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(j)){const D=i.find(T=>T.id===k);D&&D.systemStatus!==j&&(j==="in_progress"?e(k,"in_progress"):e(k,"backlog"))}};return n||r?c.jsx(U$,{}):i.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("h2",{className:"text-lg font-medium",children:"No assignments yet"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Sync your Google Classroom to see your assignments organized in a Kanban-style board."})]}),c.jsx("button",{onClick:x=>{x.preventDefault(),o().catch(w=>{console.error("Sync failed:",w)})},className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover-elevate","data-testid":"button-sync-empty",children:"Sync Google Classroom"})]}):c.jsxs(c.Fragment,{children:[c.jsxs(G7,{sensors:f,collisionDetection:Z8,onDragStart:b,onDragEnd:v,children:[c.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6",children:m.map(x=>c.jsx(F$,{id:x.id,title:x.title,assignments:x.assignments,onCardClick:l,notes:s},x.id))}),c.jsx(d$,{children:y&&c.jsx(fR,{assignment:y,isDragging:!0,hasNotes:(((E=s.get(y.id))==null?void 0:E.length)||0)>0})})]}),c.jsx(Q0,{assignment:a,isOpen:!!a,onClose:()=>l(null)})]})}function AE(t,[e,n]){return Math.min(n,Math.max(e,t))}var B$=p.createContext(void 0);function Y0(t){const e=p.useContext(B$);return t||e||"ltr"}function xR(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var H$=[" ","Enter","ArrowUp","ArrowDown"],W$=[" ","Enter"],uu="Select",[Yf,Xf,q$]=dv(uu),[al,bH]=dr(uu,[q$,vf]),Jf=vf(),[G$,Ti]=al(uu),[K$,Q$]=al(uu),_R=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:d,name:h,autoComplete:f,disabled:m,required:y,form:b}=t,v=Jf(e),[E,x]=p.useState(null),[w,S]=p.useState(null),[k,j]=p.useState(!1),D=Y0(d),[T=!1,C]=li({prop:r,defaultProp:s,onChange:i}),[I,A]=li({prop:o,defaultProp:a,onChange:l}),P=p.useRef(null),O=E?b||!!E.closest("form"):!0,[R,$]=p.useState(new Set),re=Array.from(R).map(z=>z.props.value).join(";");return c.jsx(MC,{...v,children:c.jsxs(G$,{required:y,scope:e,trigger:E,onTriggerChange:x,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:k,onValueNodeHasChildrenChange:j,contentId:Zr(),value:I,onValueChange:A,open:T,onOpenChange:C,dir:D,triggerPointerDownPosRef:P,disabled:m,children:[c.jsx(Yf.Provider,{scope:e,children:c.jsx(K$,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(z=>{$(K=>new Set(K).add(z))},[]),onNativeOptionRemove:p.useCallback(z=>{$(K=>{const M=new Set(K);return M.delete(z),M})},[]),children:n})}),O?c.jsxs(qR,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:f,value:I,onChange:z=>A(z.target.value),disabled:m,form:b,children:[I===void 0?c.jsx("option",{value:""}):null,Array.from(R)]},re):null]})})};_R.displayName=uu;var ER="SelectTrigger",bR=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=Jf(n),o=Ti(ER,n),a=o.disabled||r,l=Me(e,o.onTriggerChange),d=Xf(n),h=p.useRef("touch"),[f,m,y]=GR(v=>{const E=d().filter(S=>!S.disabled),x=E.find(S=>S.value===o.value),w=KR(E,v,x);w!==void 0&&o.onValueChange(w.value)}),b=v=>{a||(o.onOpenChange(!0),y()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return c.jsx(LC,{asChild:!0,...i,children:c.jsx(pe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":WR(o.value)?"":void 0,...s,ref:l,onClick:le(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&b(v)}),onPointerDown:le(s.onPointerDown,v=>{h.current=v.pointerType;const E=v.target;E.hasPointerCapture(v.pointerId)&&E.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(b(v),v.preventDefault())}),onKeyDown:le(s.onKeyDown,v=>{const E=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(E&&v.key===" ")&&H$.includes(v.key)&&(b(),v.preventDefault())})})})});bR.displayName=ER;var SR="SelectValue",TR=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=Ti(SR,n),{onValueNodeHasChildrenChange:d}=l,h=i!==void 0,f=Me(e,l.onValueNodeChange);return wt(()=>{d(h)},[d,h]),c.jsx(pe.span,{...a,ref:f,style:{pointerEvents:"none"},children:WR(l.value)?c.jsx(c.Fragment,{children:o}):i})});TR.displayName=SR;var Y$="SelectIcon",CR=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return c.jsx(pe.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});CR.displayName=Y$;var X$="SelectPortal",IR=t=>c.jsx(cf,{asChild:!0,...t});IR.displayName=X$;var go="SelectContent",NR=p.forwardRef((t,e)=>{const n=Ti(go,t.__scopeSelect),[r,s]=p.useState();if(wt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Ln.createPortal(c.jsx(AR,{scope:t.__scopeSelect,children:c.jsx(Yf.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),i):null}return c.jsx(kR,{...t,ref:e})});NR.displayName=go;var Hn=10,[AR,Ci]=al(go),J$="SelectContentImpl",Z$=ka("SelectContent.RemoveScroll"),kR=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:b,hideWhenDetached:v,avoidCollisions:E,...x}=t,w=Ti(go,n),[S,k]=p.useState(null),[j,D]=p.useState(null),T=Me(e,W=>k(W)),[C,I]=p.useState(null),[A,P]=p.useState(null),O=Xf(n),[R,$]=p.useState(!1),re=p.useRef(!1);p.useEffect(()=>{if(S)return FA(S)},[S]),kA();const z=p.useCallback(W=>{const[ie,...ve]=O().map(we=>we.ref.current),[ne]=ve.slice(-1),ge=document.activeElement;for(const we of W)if(we===ge||(we==null||we.scrollIntoView({block:"nearest"}),we===ie&&j&&(j.scrollTop=0),we===ne&&j&&(j.scrollTop=j.scrollHeight),we==null||we.focus(),document.activeElement!==ge))return},[O,j]),K=p.useCallback(()=>z([C,S]),[z,C,S]);p.useEffect(()=>{R&&K()},[R,K]);const{onOpenChange:M,triggerPointerDownPosRef:L}=w;p.useEffect(()=>{if(S){let W={x:0,y:0};const ie=ne=>{var ge,we;W={x:Math.abs(Math.round(ne.pageX)-(((ge=L.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((we=L.current)==null?void 0:we.y)??0))}},ve=ne=>{W.x<=10&&W.y<=10?ne.preventDefault():S.contains(ne.target)||M(!1),document.removeEventListener("pointermove",ie),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",ve,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",ve,{capture:!0})}}},[S,M,L]),p.useEffect(()=>{const W=()=>M(!1);return window.addEventListener("blur",W),window.addEventListener("resize",W),()=>{window.removeEventListener("blur",W),window.removeEventListener("resize",W)}},[M]);const[U,Q]=GR(W=>{const ie=O().filter(ge=>!ge.disabled),ve=ie.find(ge=>ge.ref.current===document.activeElement),ne=KR(ie,W,ve);ne&&setTimeout(()=>ne.ref.current.focus())}),q=p.useCallback((W,ie,ve)=>{const ne=!re.current&&!ve;(w.value!==void 0&&w.value===ie||ne)&&(I(W),ne&&(re.current=!0))},[w.value]),se=p.useCallback(()=>S==null?void 0:S.focus(),[S]),ee=p.useCallback((W,ie,ve)=>{const ne=!re.current&&!ve;(w.value!==void 0&&w.value===ie||ne)&&P(W)},[w.value]),de=r==="popper"?ny:RR,ce=de===ny?{side:a,sideOffset:l,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:b,hideWhenDetached:v,avoidCollisions:E}:{};return c.jsx(AR,{scope:n,content:S,viewport:j,onViewportChange:D,itemRefCallback:q,selectedItem:C,onItemLeave:se,itemTextRefCallback:ee,focusSelectedItem:K,selectedItemText:A,position:r,isPositioned:R,searchRef:U,children:c.jsx(g0,{as:Z$,allowPinchZoom:!0,children:c.jsx(m0,{asChild:!0,trapped:w.open,onMountAutoFocus:W=>{W.preventDefault()},onUnmountAutoFocus:le(s,W=>{var ie;(ie=w.trigger)==null||ie.focus({preventScroll:!0}),W.preventDefault()}),children:c.jsx(Wc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:W=>W.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:c.jsx(de,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:W=>W.preventDefault(),...x,...ce,onPlaced:()=>$(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:le(x.onKeyDown,W=>{const ie=W.ctrlKey||W.altKey||W.metaKey;if(W.key==="Tab"&&W.preventDefault(),!ie&&W.key.length===1&&Q(W.key),["ArrowUp","ArrowDown","Home","End"].includes(W.key)){let ne=O().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(W.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(W.key)){const ge=W.target,we=ne.indexOf(ge);ne=ne.slice(we+1)}setTimeout(()=>z(ne)),W.preventDefault()}})})})})})})});kR.displayName=J$;var eB="SelectItemAlignedPosition",RR=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ti(go,n),o=Ci(go,n),[a,l]=p.useState(null),[d,h]=p.useState(null),f=Me(e,T=>h(T)),m=Xf(n),y=p.useRef(!1),b=p.useRef(!0),{viewport:v,selectedItem:E,selectedItemText:x,focusSelectedItem:w}=o,S=p.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&d&&v&&E&&x){const T=i.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),A=x.getBoundingClientRect();if(i.dir!=="rtl"){const ge=A.left-C.left,we=I.left-ge,qe=T.left-we,Qe=T.width+qe,nn=Math.max(Qe,C.width),Ot=window.innerWidth-Hn,An=AE(we,[Hn,Math.max(Hn,Ot-nn)]);a.style.minWidth=Qe+"px",a.style.left=An+"px"}else{const ge=C.right-A.right,we=window.innerWidth-I.right-ge,qe=window.innerWidth-T.right-we,Qe=T.width+qe,nn=Math.max(Qe,C.width),Ot=window.innerWidth-Hn,An=AE(we,[Hn,Math.max(Hn,Ot-nn)]);a.style.minWidth=Qe+"px",a.style.right=An+"px"}const P=m(),O=window.innerHeight-Hn*2,R=v.scrollHeight,$=window.getComputedStyle(d),re=parseInt($.borderTopWidth,10),z=parseInt($.paddingTop,10),K=parseInt($.borderBottomWidth,10),M=parseInt($.paddingBottom,10),L=re+z+R+M+K,U=Math.min(E.offsetHeight*5,L),Q=window.getComputedStyle(v),q=parseInt(Q.paddingTop,10),se=parseInt(Q.paddingBottom,10),ee=T.top+T.height/2-Hn,de=O-ee,ce=E.offsetHeight/2,W=E.offsetTop+ce,ie=re+z+W,ve=L-ie;if(ie<=ee){const ge=P.length>0&&E===P[P.length-1].ref.current;a.style.bottom="0px";const we=d.clientHeight-v.offsetTop-v.offsetHeight,qe=Math.max(de,ce+(ge?se:0)+we+K),Qe=ie+qe;a.style.height=Qe+"px"}else{const ge=P.length>0&&E===P[0].ref.current;a.style.top="0px";const qe=Math.max(ee,re+v.offsetTop+(ge?q:0)+ce)+ve;a.style.height=qe+"px",v.scrollTop=ie-ee+v.offsetTop}a.style.margin=`${Hn}px 0`,a.style.minHeight=U+"px",a.style.maxHeight=O+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,a,d,v,E,x,i.dir,r]);wt(()=>S(),[S]);const[k,j]=p.useState();wt(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const D=p.useCallback(T=>{T&&b.current===!0&&(S(),w==null||w(),b.current=!1)},[S,w]);return c.jsx(nB,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:y,onScrollButtonChange:D,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:c.jsx(pe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});RR.displayName=eB;var tB="SelectPopperPosition",ny=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Hn,...i}=t,o=Jf(n);return c.jsx(VC,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ny.displayName=tB;var[nB,X0]=al(go,{}),ry="SelectViewport",PR=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Ci(ry,n),o=X0(ry,n),a=Me(e,i.onViewportChange),l=p.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(Yf.Slot,{scope:n,children:c.jsx(pe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:le(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const y=Math.abs(l.current-h.scrollTop);if(y>0){const b=window.innerHeight-Hn*2,v=parseFloat(f.style.minHeight),E=parseFloat(f.style.height),x=Math.max(v,E);if(x<b){const w=x+y,S=Math.min(b,w),k=w-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=k>0?k:0,f.style.justifyContent="flex-end")}}}l.current=h.scrollTop})})})]})});PR.displayName=ry;var DR="SelectGroup",[rB,sB]=al(DR),iB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Zr();return c.jsx(rB,{scope:n,id:s,children:c.jsx(pe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});iB.displayName=DR;var jR="SelectLabel",OR=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=sB(jR,n);return c.jsx(pe.div,{id:s.id,...r,ref:e})});OR.displayName=jR;var Fh="SelectItem",[oB,MR]=al(Fh),LR=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Ti(Fh,n),l=Ci(Fh,n),d=a.value===r,[h,f]=p.useState(i??""),[m,y]=p.useState(!1),b=Me(e,w=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,w,r,s)}),v=Zr(),E=p.useRef("touch"),x=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(oB,{scope:n,value:r,disabled:s,textId:v,isSelected:d,onItemTextChange:p.useCallback(w=>{f(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:c.jsx(Yf.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:c.jsx(pe.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:le(o.onFocus,()=>y(!0)),onBlur:le(o.onBlur,()=>y(!1)),onClick:le(o.onClick,()=>{E.current!=="mouse"&&x()}),onPointerUp:le(o.onPointerUp,()=>{E.current==="mouse"&&x()}),onPointerDown:le(o.onPointerDown,w=>{E.current=w.pointerType}),onPointerMove:le(o.onPointerMove,w=>{var S;E.current=w.pointerType,s?(S=l.onItemLeave)==null||S.call(l):E.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:le(o.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:le(o.onKeyDown,w=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&w.key===" "||(W$.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});LR.displayName=Fh;var Vl="SelectItemText",VR=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Ti(Vl,n),a=Ci(Vl,n),l=MR(Vl,n),d=Q$(Vl,n),[h,f]=p.useState(null),m=Me(e,x=>f(x),l.onItemTextChange,x=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,x,l.value,l.disabled)}),y=h==null?void 0:h.textContent,b=p.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:v,onNativeOptionRemove:E}=d;return wt(()=>(v(b),()=>E(b)),[v,E,b]),c.jsxs(c.Fragment,{children:[c.jsx(pe.span,{id:l.textId,...i,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ln.createPortal(i.children,o.valueNode):null]})});VR.displayName=Vl;var FR="SelectItemIndicator",zR=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return MR(FR,n).isSelected?c.jsx(pe.span,{"aria-hidden":!0,...r,ref:e}):null});zR.displayName=FR;var sy="SelectScrollUpButton",UR=p.forwardRef((t,e)=>{const n=Ci(sy,t.__scopeSelect),r=X0(sy,t.__scopeSelect),[s,i]=p.useState(!1),o=Me(e,r.onScrollButtonChange);return wt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=l.scrollTop>0;i(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?c.jsx(BR,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});UR.displayName=sy;var iy="SelectScrollDownButton",$R=p.forwardRef((t,e)=>{const n=Ci(iy,t.__scopeSelect),r=X0(iy,t.__scopeSelect),[s,i]=p.useState(!1),o=Me(e,r.onScrollButtonChange);return wt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const d=l.scrollHeight-l.clientHeight,h=Math.ceil(l.scrollTop)<d;i(h)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?c.jsx(BR,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});$R.displayName=iy;var BR=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Ci("SelectScrollButton",n),o=p.useRef(null),a=Xf(n),l=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),wt(()=>{var h;const d=a().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),c.jsx(pe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:le(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:le(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:le(s.onPointerLeave,()=>{l()})})}),aB="SelectSeparator",HR=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return c.jsx(pe.div,{"aria-hidden":!0,...r,ref:e})});HR.displayName=aB;var oy="SelectArrow",lB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Jf(n),i=Ti(oy,n),o=Ci(oy,n);return i.open&&o.position==="popper"?c.jsx(FC,{...s,...r,ref:e}):null});lB.displayName=oy;function WR(t){return t===""||t===void 0}var qR=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),i=Me(e,s),o=xR(n);return p.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(a,n),a.dispatchEvent(f)}},[o,n]),c.jsx(qc,{asChild:!0,children:c.jsx("select",{...r,ref:i,defaultValue:n})})});qR.displayName="BubbleSelect";function GR(t){const e=Jt(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const a=n.current+o;e(a),function l(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function KR(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=cB(t,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const l=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function cB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var uB=_R,QR=bR,dB=TR,hB=CR,fB=IR,YR=NR,pB=PR,XR=OR,JR=LR,mB=VR,gB=zR,ZR=UR,eP=$R,tP=HR;const ay=uB,ly=dB,zh=p.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(QR,{ref:r,className:X("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,c.jsx(hB,{asChild:!0,children:c.jsx(JT,{className:"h-4 w-4 opacity-50"})})]}));zh.displayName=QR.displayName;const nP=p.forwardRef(({className:t,...e},n)=>c.jsx(ZR,{ref:n,className:X("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(CM,{className:"h-4 w-4"})}));nP.displayName=ZR.displayName;const rP=p.forwardRef(({className:t,...e},n)=>c.jsx(eP,{ref:n,className:X("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(JT,{className:"h-4 w-4"})}));rP.displayName=eP.displayName;const Uh=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>c.jsx(fB,{children:c.jsxs(YR,{ref:s,className:X("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[c.jsx(nP,{}),c.jsx(pB,{className:X("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(rP,{})]})}));Uh.displayName=YR.displayName;const yB=p.forwardRef(({className:t,...e},n)=>c.jsx(XR,{ref:n,className:X("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));yB.displayName=XR.displayName;const Rt=p.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(JR,{ref:r,className:X("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(gB,{children:c.jsx(vg,{className:"h-4 w-4"})})}),c.jsx(mB,{children:e})]}));Rt.displayName=JR.displayName;const vB=p.forwardRef(({className:t,...e},n)=>c.jsx(tP,{ref:n,className:X("-mx-1 my-1 h-px bg-muted",t),...e}));vB.displayName=tP.displayName;function wB(t){return F0({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const kE=["Hold 'Right Click' and drag to navigate the timeline quickly.","Switch to Calendar view to see the full monthly schedule.","Use the filters at the top to focus on specific courses.","The 'Today' button in Calendar view jumps you to the current date.","Timeline bars are color-coded based on assignment status.","Hover over an assignment card to see more details."];function xB(){return c.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsx(He,{className:"h-10 w-40"}),c.jsx(He,{className:"h-10 w-40"})]}),[1,2,3].map(t=>c.jsxs("div",{className:"space-y-3",children:[c.jsx(He,{className:"h-6 w-32"}),c.jsx("div",{className:"space-y-2",children:[1,2].map(e=>c.jsx(He,{className:"h-16 w-full"},e))})]},t))]})}function _B(){const[t,e]=p.useState(10),[n,r]=p.useState(0);return p.useEffect(()=>{const s=setInterval(()=>{e(o=>{if(o===100)return 100;const a=Math.random()*10;return Math.min(o+a,90)})},500),i=setInterval(()=>{r(o=>(o+1)%kE.length)},2500);return()=>{clearInterval(s),clearInterval(i)}},[]),c.jsxs("div",{className:"relative h-full w-full bg-background overflow-hidden",children:[c.jsx("div",{className:"h-full w-full p-6 opacity-40 pointer-events-none select-none filter grayscale",children:c.jsx(xB,{})}),c.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/60 backdrop-blur-[2px]",children:c.jsxs("div",{className:"w-full max-w-md p-6 space-y-6",children:[c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"h-10 w-10 bg-zinc-950 rounded flex items-center justify-center text-white",children:c.jsx(di,{className:"h-5 w-5 animate-spin"})}),c.jsx("h2",{className:"text-lg font-semibold tracking-tight",children:"Building Timeline"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-1 w-full bg-zinc-200 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-zinc-950 transition-all duration-500 ease-out",style:{width:`${t}%`}})}),c.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-400 font-mono uppercase tracking-wider",children:[c.jsx("span",{children:"Mapping Schedule"}),c.jsxs("span",{children:[Math.round(t),"%"]})]})]}),c.jsxs("div",{className:"flex gap-3 items-start bg-white border border-zinc-200 p-4 rounded-md shadow-sm max-w-sm mx-auto animate-in fade-in slide-in-from-bottom-2 duration-700",children:[c.jsx(hf,{className:"h-4 w-4 text-zinc-900 shrink-0 mt-0.5"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs font-bold text-zinc-900 uppercase tracking-wide",children:"Navigation Tip"}),c.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed min-h-[40px]",children:kE[n]})]})]})]})})]})}const ad={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},EB=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},bB=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},wm=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,RE=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function SB(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=So(),{user:o}=Fr(),[a,l]=p.useState(null),[d,h]=p.useState(null),[f,m]=p.useState(null),[y,b]=p.useState("timeline"),[v,E]=p.useState([]);p.useEffect(()=>{if(o)try{const D=`trace_email_events_${o.uid}`,C=JSON.parse(localStorage.getItem(D)||"[]").map(I=>({id:I.id,uniqueId:I.id,userId:o.uid,courseId:"system",courseName:"System",classroomId:"system",title:I.title,description:I.body,dueDate:I.timestamp,dueTime:null,maxPoints:null,systemStatus:"submitted",userStatus:null,submissionId:null,submittedAt:null,gradedAt:null,grade:null,alternateLink:null,createdAt:I.timestamp,lastSyncedAt:I.timestamp}));E(C)}catch{}},[o]);const x=p.useMemo(()=>{let D=[...s,...v];return a&&(D=D.filter(T=>T.courseId===a)),d&&(D=D.filter(T=>T.systemStatus===d)),D},[s,v,a,d]),w=()=>{l(null),h(null)},S=a||d;if(n||r)return c.jsx(_B,{});if(s.length===0)return c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(ci,{className:"h-12 w-12 mx-auto text-muted-foreground"}),c.jsx("h2",{className:"text-lg font-medium",children:"No assignments yet"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Sync your Google Classroom to see your assignments organized by date."})]}),c.jsx("button",{onClick:D=>{D.preventDefault(),i().catch(T=>{console.error("Sync failed:",T)})},className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover-elevate","data-testid":"button-sync-empty-timeline",children:"Sync Google Classroom"})]});const k=()=>{const D=p.useRef(null),[T,C]=p.useState(!1),I=p.useRef({x:0,left:0}),A=60,{earliestDate:P,latestDate:O,initialScrollPosition:R}=p.useMemo(()=>{const L=new Date;L.setHours(0,0,0,0);let U=new Date,Q=new Date;if(x.length>0){const ce=x.filter(W=>W.dueDate).map(W=>new Date(W.dueDate));ce.length>0&&(U=new Date(Math.min(...ce.map(W=>W.getTime()))),Q=new Date(Math.max(...ce.map(W=>W.getTime()))))}const q=new Date(U);q.setDate(q.getDate()-30);const se=new Date(Q);se.setDate(se.getDate()+30);const de=Math.ceil((L.getTime()-q.getTime())/(1e3*3600*24))*A+A/2-window.innerWidth/2;return{earliestDate:q,latestDate:se,initialScrollPosition:Math.max(0,de)}},[x]),$=p.useMemo(()=>EB(P,O),[P,O]);p.useEffect(()=>{D.current&&(D.current.scrollLeft=R)},[R]);const re=L=>{L.button===2&&D.current&&(L.preventDefault(),C(!0),I.current={x:L.pageX,left:D.current.scrollLeft})},z=p.useCallback(L=>{if(!T||!D.current)return;L.preventDefault();const Q=(L.pageX-I.current.x)*1.5;D.current.scrollLeft=I.current.left-Q},[T]),K=p.useCallback(()=>{C(!1)},[]);p.useEffect(()=>(T?(window.addEventListener("mousemove",z),window.addEventListener("mouseup",K)):(window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",K)),()=>{window.removeEventListener("mousemove",z),window.removeEventListener("mouseup",K)}),[T,z,K]);const M=L=>{if(!L)return{left:"0px",width:"0px"};const U=new Date(L);return U.setHours(0,0,0,0),{left:`${(U.getTime()-P.getTime())/(1e3*3600*24)*A}px`,width:`${A}px`}};return c.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[c.jsx("div",{ref:D,className:X("flex-1 overflow-auto relative select-none",T?"cursor-grabbing":"cursor-default"),onMouseDown:re,onContextMenu:L=>L.preventDefault(),children:c.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${$.length*A}px`},children:[c.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:$.map((L,U)=>{const Q=RE(L);return c.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:A},children:[c.jsx("span",{className:X("text-[10px] uppercase font-bold tracking-wider mb-1",Q?"text-foreground":"text-muted-foreground"),children:L.toLocaleDateString("en-US",{weekday:"narrow"})}),c.jsx("span",{className:X("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",Q?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:L.getDate()}),c.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border/50"})]},U)})}),c.jsxs("div",{className:"relative pt-6 min-h-[500px]",children:[c.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:$.map((L,U)=>{const Q=RE(L);return c.jsx("div",{className:X("flex-shrink-0 h-full border-r border-border/40 relative",Q?"bg-accent/50":""),style:{width:A},children:Q&&c.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},U)})}),c.jsx("div",{className:"space-y-3 px-0 relative z-10 mt-2",children:x.filter(L=>L.dueDate).map(L=>{const U=M(L.dueDate),Q=ad[L.systemStatus]||ad.backlog;return c.jsx("div",{className:"relative h-14 group",children:c.jsxs("div",{onClick:()=>m(L),className:X("absolute top-0 h-12 rounded-lg border shadow-sm transition-all cursor-pointer flex flex-col justify-center px-3 overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",Q.timelineStyle),style:{left:U.left,width:U.width,minWidth:"140px"},children:[c.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:c.jsxs("span",{className:"truncate text-xs font-bold leading-none flex items-center gap-1",children:[L.courseId==="system"&&c.jsx(mv,{className:"h-3 w-3 inline-block"}),L.title]})}),c.jsx("div",{className:"flex items-center justify-between opacity-80",children:c.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:L.courseName})})]})},L.id)})})]})]})}),c.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[c.jsx(p_,{size:14,className:"mr-2"}),"Tip: Hold"," ",c.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},j=()=>{const D=p.useRef(null),[T,C]=p.useState(!1),I=p.useRef({y:0,top:0}),A=p.useRef({}),[P,O]=p.useState(!1),{startMonth:R,endMonth:$}=p.useMemo(()=>{let q=new Date,se=new Date;if(x.length>0){const ce=x.filter(W=>W.dueDate).map(W=>new Date(W.dueDate));ce.length>0&&(q=new Date(Math.min(...ce.map(W=>W.getTime()))),se=new Date(Math.max(...ce.map(W=>W.getTime()))))}const ee=new Date(q);ee.setMonth(ee.getMonth()-2),ee.setDate(1);const de=new Date(se);return de.setMonth(de.getMonth()+4),de.setDate(1),{startMonth:ee,endMonth:de}},[x]),re=p.useMemo(()=>bB(R,$),[R,$]),z=p.useCallback(()=>{var ce;const q=wm(new Date),se=A.current[q];if(!se){O(!0);return}const ee=se.getBoundingClientRect(),de=(ce=D.current)==null?void 0:ce.getBoundingClientRect();de&&O(ee.bottom<de.top||ee.top>de.bottom)},[re]);p.useEffect(()=>{const q=D.current;return q&&(q.addEventListener("scroll",z),z()),()=>q==null?void 0:q.removeEventListener("scroll",z)},[z]),p.useEffect(()=>{setTimeout(()=>K(),100)},[]);const K=()=>{const q=wm(new Date),se=A.current[q];se&&se.scrollIntoView({behavior:"smooth",block:"center"})},M=q=>{q.button===2&&D.current&&(q.preventDefault(),C(!0),I.current={y:q.pageY,top:D.current.scrollTop})},L=p.useCallback(q=>{if(!T||!D.current)return;q.preventDefault();const ee=(q.pageY-I.current.y)*1.5;D.current.scrollTop=I.current.top-ee},[T]),U=p.useCallback(()=>{C(!1)},[]);p.useEffect(()=>(T?(window.addEventListener("mousemove",L),window.addEventListener("mouseup",U)):(window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",U)),()=>{window.removeEventListener("mousemove",L),window.removeEventListener("mouseup",U)}),[T,L,U]);const Q=q=>{const se=q.getFullYear(),ee=q.getMonth(),de=new Date(se,ee,1),ce=new Date(se,ee+1,0),W=[];for(let ie=0;ie<de.getDay();ie++)W.push({date:new Date(se,ee,-de.getDay()+1+ie),isCurrentMonth:!1});for(let ie=1;ie<=ce.getDate();ie++)W.push({date:new Date(se,ee,ie),isCurrentMonth:!0});for(;W.length%7!==0;){const ie=W.length-(de.getDay()+ce.getDate())+1,ve=new Date(se,ee+1,ie);W.push({date:ve,isCurrentMonth:!1})}return W};return c.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[P&&c.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:c.jsxs("button",{onClick:K,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[c.jsx(wM,{size:14})," Jump to Today"]})}),c.jsx("div",{ref:D,className:X("flex-1 overflow-y-auto",T?"cursor-grabbing":"cursor-default"),onMouseDown:M,onContextMenu:q=>q.preventDefault(),children:c.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:re.map(q=>{const se=Q(q),ee=wm(q);return c.jsxs("div",{ref:de=>A.current[ee]=de,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[c.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:c.jsx("h3",{className:"text-lg font-bold",children:q.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),c.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(de=>c.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:de},de))}),c.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:se.map((de,ce)=>{const W=x.filter(ve=>{if(!ve.dueDate)return!1;const ne=new Date(ve.dueDate);ne.setHours(0,0,0,0);const ge=new Date(de.date);return ge.setHours(0,0,0,0),ge.toDateString()===ne.toDateString()}),ie=de.date.toDateString()===new Date().toDateString();return c.jsxs("div",{className:X("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",de.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[c.jsx("span",{className:X("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",ie?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:de.date.getDate()}),c.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:W.map(ve=>{const ne=ad[ve.systemStatus]||ad.backlog;return c.jsx("div",{onClick:ge=>{ge.stopPropagation(),m(ve)},className:X("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",ne.color,ne.border),title:ve.title,children:ve.title},ve.id)})})]},ce)})})]},ee)})})}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[c.jsx(p_,{size:14,className:"mr-2"}),"Tip: Hold"," ",c.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] overflow-hidden",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-3 sticky top-0 bg-background py-3 z-10 border-b px-4 sm:px-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Se,{variant:y==="timeline"?"default":"ghost",size:"sm",onClick:()=>b("timeline"),className:"gap-2",children:[c.jsx(ci,{size:14}),"Timeline"]}),c.jsxs(Se,{variant:y==="calendar"?"default":"ghost",size:"sm",onClick:()=>b("calendar"),className:"gap-2",children:[c.jsx(xM,{size:14}),"Calendar"]})]}),c.jsxs(ay,{value:a||"all",onValueChange:D=>l(D==="all"?null:D),children:[c.jsx(zh,{className:"w-[140px] sm:w-[180px]","data-testid":"select-course-filter",children:c.jsx(ly,{placeholder:"All Courses"})}),c.jsxs(Uh,{children:[c.jsx(Rt,{value:"all",children:"All Courses"}),e.map(D=>c.jsx(Rt,{value:D.id,children:D.name},D.id))]})]}),c.jsxs(ay,{value:d||"all",onValueChange:D=>h(D==="all"?null:D),children:[c.jsx(zh,{className:"w-[120px] sm:w-[140px]","data-testid":"select-status-filter",children:c.jsx(ly,{placeholder:"All Status"})}),c.jsxs(Uh,{children:[c.jsx(Rt,{value:"all",children:"All Status"}),c.jsx(Rt,{value:"backlog",children:"Backlog"}),c.jsx(Rt,{value:"in_progress",children:"In Progress"}),c.jsx(Rt,{value:"submitted",children:"Submitted"}),c.jsx(Rt,{value:"graded",children:"Graded"}),c.jsx(Rt,{value:"overdue",children:"Overdue"})]})]}),S&&c.jsxs(Se,{variant:"ghost",size:"sm",onClick:w,className:"text-muted-foreground","data-testid":"button-clear-filters",children:[c.jsx(pf,{className:"h-3.5 w-3.5 mr-1"}),"Clear filters"]}),c.jsx("div",{className:"ml-auto",children:c.jsx(KC,{children:c.jsxs(GL,{children:[c.jsx(KL,{asChild:!0,children:c.jsx(Aa,{href:"/settings/integrations",children:c.jsxs(Se,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap",children:[c.jsx(wB,{className:"h-4 w-4"}),"Sync with Google Calendar"]})})}),c.jsxs(QC,{side:"left",className:"max-w-xs",children:[c.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),c.jsx("div",{className:"flex-1 overflow-hidden",children:y==="timeline"?c.jsx(k,{}):c.jsx(j,{})})]}),c.jsx(Q0,{assignment:f,isOpen:!!f,onClose:()=>m(null)})]})}const PE=["Check the 'Weekly Workload' graph to balance your study schedule.","Assignments due in less than 3 days appear in the warning card.","The 'Next Actions' list prioritizes your most urgent tasks.","Syncing automatically refreshes assignment status from Google Classroom.","Click on any assignment in the list to view full details.","Overdue items are highlighted in red to grab your attention."];function ld({title:t,value:e,icon:n,variant:r="default"}){return c.jsxs(ot,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,children:[c.jsxs(Pt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[c.jsx(cn,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:t}),c.jsx(n,{className:X("h-5 w-5",r==="default"&&"text-muted-foreground",r==="warning"&&"text-foreground",r==="danger"&&"text-destructive")})]}),c.jsx(St,{children:c.jsx("div",{className:X("text-3xl font-semibold font-mono tracking-tight",r==="danger"&&"text-destructive"),children:e})})]})}function TB({data:t}){const e=Math.max(...t.map(n=>n.count),1);return c.jsxs(ot,{children:[c.jsx(Pt,{className:"pb-2",children:c.jsx(cn,{className:"text-sm font-medium",children:"Weekly Workload"})}),c.jsx(St,{children:c.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:t.map((n,r)=>c.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[c.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:n.count>0?n.count:""}),c.jsx("div",{className:X("w-full rounded-t-sm transition-all",n.isToday?"bg-foreground":"bg-muted",n.count===0&&"min-h-[4px]"),style:{height:n.count>0?`${n.count/e*80}px`:"4px"}}),c.jsx("span",{className:X("text-xs",n.isToday?"font-medium":"text-muted-foreground"),children:n.day})]},r))})})]})}function CB({courses:t}){const{user:e,accessToken:n}=Fr(),[r,s]=p.useState(null),[i,o]=p.useState(!1),[a,l]=p.useState(null);return p.useEffect(()=>{async function d(){if(!e||!n||t.length===0){t.length===0&&l("No courses found");return}const h=t[0].classroomId,f=`activity_rank_v2_${h}_${e.uid}`;try{const m=localStorage.getItem(f);if(m){const y=JSON.parse(m);if(Date.now()-y.timestamp<1e3*60*60){s(y.data);return}}}catch{}o(!0),l(null);try{const m=`https://classroom.googleapis.com/v1/courses/${h}/students`,y=await eo(n,m,D=>D.students||[],D=>D.nextPageToken),b=`https://classroom.googleapis.com/v1/courses/${h}/courseWork?courseWorkStates=PUBLISHED`,v=await eo(n,b,D=>D.courseWork||[],D=>D.nextPageToken),E=new Map;y.forEach(D=>E.set(D.userId,0));for(const D of v)try{const T=`https://classroom.googleapis.com/v1/courses/${h}/courseWork/${D.id}/studentSubmissions`;(await eo(n,T,I=>I.studentSubmissions||[],I=>I.nextPageToken)).forEach(I=>{if(I.state==="TURNED_IN"||I.state==="RETURNED"){const A=E.get(I.userId)||0;E.set(I.userId,A+1)}})}catch{}const x=E.get(e.uid)||0;let w=1,S=0;E.forEach(D=>{S++,D>x&&w++});const k=Math.round((S-w+1)/S*100),j={rank:w,total:S,percentile:k};s(j),localStorage.setItem(f,JSON.stringify({timestamp:Date.now(),data:j}))}catch{l("Not enough activity yet")}finally{o(!1)}}d()},[t,e,n]),a?c.jsxs(ot,{children:[c.jsxs(Pt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[c.jsx(cn,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Rank"}),c.jsx(g_,{className:"h-5 w-5 text-muted-foreground"})]}),c.jsx(St,{children:c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("span",{className:"text-3xl font-semibold font-mono tracking-tight text-muted-foreground",children:"-"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Data unavailable"})]})})]}):c.jsxs(ot,{"data-testid":"card-class-rank",children:[c.jsxs(Pt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[c.jsx(cn,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),c.jsx(g_,{className:"h-5 w-5 text-amber-500"})]}),c.jsx(St,{children:i?c.jsxs("div",{className:"space-y-2",children:[c.jsx(He,{className:"h-8 w-16"}),c.jsx(He,{className:"h-3 w-24"})]}):r?c.jsxs("div",{children:[c.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",r.rank,c.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",r.total]})]}),c.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[c.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top ",r.percentile,"% of class"]}),c.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Based on ",r.total===1?"your ":"","submissions"]})]})]}):c.jsx("div",{className:"flex flex-col gap-1",children:c.jsx("span",{className:"text-sm text-muted-foreground",children:"Calculating..."})})})]})}function IB(){return c.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>c.jsxs(ot,{children:[c.jsx(Pt,{className:"pb-2",children:c.jsx(He,{className:"h-4 w-20"})}),c.jsx(St,{children:c.jsx(He,{className:"h-9 w-12"})})]},t))}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsx(He,{className:"h-48"}),c.jsx(He,{className:"h-48"})]})]})}function NB(){const[t,e]=p.useState(10),[n,r]=p.useState(0);return p.useEffect(()=>{const s=setInterval(()=>{e(o=>{if(o===100)return 100;const a=Math.random()*10;return Math.min(o+a,90)})},500),i=setInterval(()=>{r(o=>(o+1)%PE.length)},2500);return()=>{clearInterval(s),clearInterval(i)}},[]),c.jsxs("div",{className:"relative min-h-[calc(100vh-4rem)] w-full bg-background",children:[c.jsx("div",{className:"opacity-40 pointer-events-none select-none filter grayscale",children:c.jsx(IB,{})}),c.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/60 backdrop-blur-[2px]",children:c.jsxs("div",{className:"w-full max-w-md p-6 space-y-6",children:[c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"h-10 w-10 bg-zinc-950 rounded flex items-center justify-center text-white",children:c.jsx(di,{className:"h-5 w-5 animate-spin"})}),c.jsx("h2",{className:"text-lg font-semibold tracking-tight",children:"Analyzing Metrics"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-1 w-full bg-zinc-200 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-zinc-950 transition-all duration-500 ease-out",style:{width:`${t}%`}})}),c.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-400 font-mono uppercase tracking-wider",children:[c.jsx("span",{children:"Calculating Stats"}),c.jsxs("span",{children:[Math.round(t),"%"]})]})]}),c.jsxs("div",{className:"flex gap-3 items-start bg-white border border-zinc-200 p-4 rounded-md shadow-sm max-w-sm mx-auto animate-in fade-in slide-in-from-bottom-2 duration-700",children:[c.jsx(hf,{className:"h-4 w-4 text-zinc-900 shrink-0 mt-0.5"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs font-bold text-zinc-900 uppercase tracking-wide",children:"Pro Tip"}),c.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed min-h-[40px]",children:PE[n]})]})]})]})})]})}function AB(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i}=So(),[o,a]=p.useState(null),l=t();return e||n?c.jsx(NB,{}):r.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(VM,{className:"h-12 w-12 mx-auto text-muted-foreground"}),c.jsx("h2",{className:"text-lg font-medium",children:"No data yet"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Sync your Google Classroom to see your dashboard with metrics and insights."})]}),c.jsx("button",{onClick:d=>{d.preventDefault(),s().catch(h=>{console.error("Sync failed:",h)})},className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover-elevate","data-testid":"button-sync-empty-dashboard",children:"Sync Google Classroom"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[l.upcoming7Days>0&&c.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-900/30 rounded-lg animate-in slide-in-from-top-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/40 rounded-md text-blue-700 dark:text-blue-300",children:c.jsx(ui,{className:"h-4 w-4"})}),c.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100 font-medium",children:[" ",l.upcoming7Days," assignment",l.upcoming7Days!==1?"s":""," due this week"]})]}),c.jsx(Aa,{href:"/settings/notifications",children:c.jsx(Se,{variant:"ghost",size:"sm",className:"text-blue-700 dark:text-blue-300 hover:text-blue-800 hover:bg-blue-100/50 h-8",children:"Enable email reminders"})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsx(ld,{title:"Due in 3 Days",value:l.upcoming3Days,icon:ZT,variant:l.upcoming3Days>3?"warning":"default"}),c.jsx(ld,{title:"Due in 7 Days",value:l.upcoming7Days,icon:ci}),c.jsx(ld,{title:"Overdue",value:l.overdue,icon:ui,variant:l.overdue>0?"danger":"default"}),c.jsx(ld,{title:"Total Active",value:l.totalActive,icon:Ra}),c.jsx(CB,{courses:i})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsx(TB,{data:l.weeklyWorkload}),c.jsxs(ot,{children:[c.jsx(Pt,{className:"pb-2",children:c.jsx(cn,{className:"text-sm font-medium",children:"Next Actions"})}),c.jsx(St,{className:"space-y-2",children:l.nextActions.length>0?l.nextActions.map(d=>c.jsx(I$,{assignment:d,onClick:()=>a(d)},d.id)):c.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[c.jsx(Ra,{className:"h-8 w-8 mb-2"}),c.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),c.jsx(Q0,{assignment:o,isOpen:!!o,onClose:()=>a(null)})]})}function kB(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s}=So(),[i,o]=p.useState(null),[a,l]=p.useState("grid"),d=j0(),h=t.find(y=>y.id===i),m=e.filter(y=>y.courseId===i).flatMap(y=>y.materials?y.materials.flatMap(b=>{let v=[];return b.driveFile&&v.push({id:b.driveFile.driveFile.id,title:b.driveFile.driveFile.title,link:b.driveFile.driveFile.alternateLink,thumbnail:b.driveFile.driveFile.thumbnailUrl,type:"driveFile"}),v}):[]).filter(y=>y.title&&y.title.toLowerCase().endsWith(".pdf"));return n&&t.length===0?c.jsx(RB,{}):c.jsxs("div",{className:"flex h-full overflow-hidden bg-background",children:[c.jsxs("div",{className:X("w-full md:w-80 border-r bg-muted/20 flex flex-col h-full shrink-0",d&&i?"hidden":"flex"),children:[c.jsx("div",{className:"p-4 border-b flex items-center justify-between bg-white dark:bg-zinc-950",children:c.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-zinc-500",children:"Your Courses"})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(y=>c.jsxs("button",{onClick:()=>o(y.id),className:X("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",i===y.id?"bg-zinc-900 text-white shadow-md dark:bg-white dark:text-zinc-900":"hover:bg-zinc-100 dark:hover:bg-zinc-900 text-muted-foreground hover:text-foreground"),children:[c.jsx("div",{className:X("h-8 w-8 rounded-full flex items-center justify-center shrink-0",i===y.id?"bg-white/20":"bg-zinc-100 dark:bg-zinc-800"),children:c.jsx(f_,{className:X("h-4 w-4",i===y.id?"text-white dark:text-zinc-900":"text-zinc-500")})}),c.jsxs("div",{className:"truncate flex-1",children:[c.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:y.name}),c.jsx("p",{className:X("text-[10px] uppercase tracking-wider font-medium",i===y.id?"text-white/70 shadow-sm":"text-zinc-400"),children:y.section||"No Section"})]}),c.jsx(TM,{className:X("h-4 w-4 transition-transform",i===y.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},y.id))})]}),c.jsxs("div",{className:X("flex-1 overflow-y-auto bg-white dark:bg-zinc-950",d&&!i?"hidden":"flex flex-col"),children:[d&&i&&c.jsx("div",{className:"flex items-center p-4 border-b bg-white dark:bg-zinc-950 sticky top-0 z-10",children:c.jsxs(Se,{variant:"ghost",size:"sm",onClick:()=>o(null),className:"gap-2 pl-2",children:[c.jsx(XT,{className:"h-4 w-4"}),"Back to Courses"]})}),i?c.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-zinc-100 dark:border-zinc-800 gap-4",children:[c.jsxs("div",{className:"space-y-1 max-w-full",children:[c.jsx(ii,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-zinc-200",children:"Course Resources"}),c.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight",children:h==null?void 0:h.name}),c.jsx("p",{className:"text-xs md:text-sm font-medium text-zinc-500 dark:text-zinc-400 line-clamp-2",children:(h==null?void 0:h.descriptionHeading)||"Curated academic materials and notes."})]}),c.jsxs("div",{className:"flex gap-2 shrink-0",children:[c.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900 px-3 py-1.5 rounded-md border border-zinc-100 dark:border-zinc-800 flex items-center gap-2",children:[c.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),c.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap",children:[m.length," PDF Assets"]})]}),c.jsxs("div",{className:"flex bg-muted rounded-md p-1 border",children:[c.jsx(Se,{variant:"ghost",size:"icon",className:X("h-6 w-6 rounded-sm",a==="grid"&&"bg-background shadow-sm"),onClick:()=>l("grid"),children:c.jsx(eC,{className:"h-4 w-4"})}),c.jsx(Se,{variant:"ghost",size:"icon",className:X("h-6 w-6 rounded-sm",a==="list"&&"bg-background shadow-sm"),onClick:()=>l("list"),children:c.jsx(AM,{className:"h-4 w-4"})})]})]})]}),m.length>0?a==="grid"?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:m.map((y,b)=>c.jsxs(ot,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-zinc-200 dark:border-zinc-800 rounded-xl bg-white dark:bg-zinc-900 shadow-sm",children:[c.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:c.jsx(Se,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-lg",asChild:!0,children:c.jsx("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",children:c.jsx(wg,{className:"h-4 w-4"})})})}),c.jsx(Pt,{className:"p-0 border-b border-zinc-100 dark:border-zinc-800",children:c.jsxs("div",{className:"aspect-[4/3] bg-zinc-50 dark:bg-zinc-950 flex items-center justify-center overflow-hidden relative group-hover:bg-zinc-100 transition-colors",children:[c.jsx(Ql,{className:"h-16 w-16 text-zinc-200 dark:text-zinc-800 transition-transform group-hover:scale-110 duration-500"}),c.jsxs("div",{className:"absolute bottom-3 left-3 flex gap-1",children:[c.jsx(ii,{className:"bg-red-500 hover:bg-red-600 text-[9px] font-black italic rounded-sm",children:"PDF"}),c.jsx(ii,{variant:"outline",className:"bg-white/80 dark:bg-black/80 backdrop-blur text-[9px] font-black rounded-sm border-zinc-200 dark:border-zinc-700",children:"READONLY"})]})]})}),c.jsxs(St,{className:"p-5 space-y-4",children:[c.jsx("h4",{className:"font-bold text-sm tracking-tight leading-snug line-clamp-2 min-h-[2.5rem] group-hover:text-primary transition-colors",children:y.title}),c.jsxs("div",{className:"pt-4 flex items-center justify-between border-t border-zinc-5 dark:border-zinc-800/50",children:[c.jsx("span",{className:"text-[10px] font-mono font-bold text-zinc-400 dark:text-zinc-600 uppercase tracking-widest",children:"Secured Asset"}),c.jsx(Se,{size:"sm",variant:"ghost",asChild:!0,className:"h-8 text-[11px] font-black uppercase tracking-tighter hover:bg-zinc-900 hover:text-white dark:hover:bg-white dark:hover:text-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-md",children:c.jsx("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",children:"Open Material"})})]})]})]},`${y.id}-${b}`))}):c.jsx("div",{className:"space-y-2 pb-20",children:m.map((y,b)=>c.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[c.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-md bg-zinc-100 dark:bg-zinc-800 text-red-500 shrink-0",children:c.jsx(Ql,{className:"h-5 w-5"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium text-sm truncate group-hover:text-primary transition-colors",children:y.title}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"PDF Document  Read Only"})]}),c.jsx(Se,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:c.jsxs("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[c.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),c.jsx(wg,{className:"h-4 w-4"})]})})]},`${y.id}-${b}`))}):c.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-zinc-50 dark:bg-zinc-900/50 border-zinc-200 dark:border-zinc-800 max-w-2xl mx-auto space-y-4",children:[c.jsx("div",{className:"h-20 w-20 bg-white dark:bg-zinc-900 rounded-full flex items-center justify-center shadow-inner border border-zinc-100 dark:border-zinc-800",children:c.jsx(f_,{className:"h-8 w-8 text-zinc-200 dark:text-zinc-700"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-bold",children:"No PDF Documents Found"}),c.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-2 max-w-xs mx-auto font-medium",children:"This course has no PDF files uploaded to Classroom yet. Make sure your materials are in .pdf format."})]})]})]}):c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[c.jsx("div",{className:"h-24 w-24 bg-zinc-50 dark:bg-zinc-900 rounded-2xl flex items-center justify-center border border-zinc-100 dark:border-zinc-800 shadow-sm",children:c.jsx(Ql,{className:"h-10 w-10 text-zinc-300 dark:text-zinc-700"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-xl font-bold tracking-tight",children:"Select a curriculum"}),c.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})}function RB(){return c.jsxs("div",{className:"flex h-full overflow-hidden",children:[c.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[c.jsx(He,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>c.jsx(He,{className:"h-16 w-full rounded-xl"},t))]}),c.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[c.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(He,{className:"h-4 w-20"}),c.jsx(He,{className:"h-10 w-80"}),c.jsx(He,{className:"h-4 w-64"})]}),c.jsx(He,{className:"h-10 w-32 rounded-lg"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>c.jsx(He,{className:"h-64 w-full rounded-2xl"},t))})]})]})}var J0="Switch",[PB,SH]=dr(J0),[DB,jB]=PB(J0),sP=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:d,form:h,...f}=t,[m,y]=p.useState(null),b=Me(e,S=>y(S)),v=p.useRef(!1),E=m?h||!!m.closest("form"):!0,[x=!1,w]=li({prop:s,defaultProp:i,onChange:d});return c.jsxs(DB,{scope:n,checked:x,disabled:a,children:[c.jsx(pe.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":aP(x),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:b,onClick:le(t.onClick,S=>{w(k=>!k),E&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),E&&c.jsx(OB,{control:m,bubbles:!v.current,name:r,value:l,checked:x,required:o,disabled:a,form:h,style:{transform:"translateX(-100%)"}})]})});sP.displayName=J0;var iP="SwitchThumb",oP=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=jB(iP,n);return c.jsx(pe.span,{"data-state":aP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});oP.displayName=iP;var OB=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=p.useRef(null),o=xR(n),a=CC(e);return p.useEffect(()=>{const l=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(m)}},[o,n,r]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function aP(t){return t?"checked":"unchecked"}var lP=sP,MB=oP;const Dr=p.forwardRef(({className:t,...e},n)=>c.jsx(lP,{className:X("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:c.jsx(MB,{className:X("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Dr.displayName=lP.displayName;var LB="Label",cP=p.forwardRef((t,e)=>c.jsx(pe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));cP.displayName=LB;var uP=cP;const VB=Gc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),to=p.forwardRef(({className:t,...e},n)=>c.jsx(uP,{ref:n,className:X(VB(),t),...e}));to.displayName=uP.displayName;var xm="rovingFocusGroup.onEntryFocus",FB={bubbles:!1,cancelable:!0},Zf="RovingFocusGroup",[cy,dP,zB]=dv(Zf),[UB,hP]=dr(Zf,[zB]),[$B,BB]=UB(Zf),fP=p.forwardRef((t,e)=>c.jsx(cy.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(cy.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(HB,{...t,ref:e})})}));fP.displayName=Zf;var HB=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,m=p.useRef(null),y=Me(e,m),b=Y0(i),[v=null,E]=li({prop:o,defaultProp:a,onChange:l}),[x,w]=p.useState(!1),S=Jt(d),k=dP(n),j=p.useRef(!1),[D,T]=p.useState(0);return p.useEffect(()=>{const C=m.current;if(C)return C.addEventListener(xm,S),()=>C.removeEventListener(xm,S)},[S]),c.jsx($B,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(C=>E(C),[E]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(C=>C+1),[]),onFocusableItemRemove:p.useCallback(()=>T(C=>C-1),[]),children:c.jsx(pe.div,{tabIndex:x||D===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:le(t.onMouseDown,()=>{j.current=!0}),onFocus:le(t.onFocus,C=>{const I=!j.current;if(C.target===C.currentTarget&&I&&!x){const A=new CustomEvent(xm,FB);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const P=k().filter(z=>z.focusable),O=P.find(z=>z.active),R=P.find(z=>z.id===v),re=[O,R,...P].filter(Boolean).map(z=>z.ref.current);gP(re,h)}}j.current=!1}),onBlur:le(t.onBlur,()=>w(!1))})})}),pP="RovingFocusGroupItem",mP=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=Zr(),l=i||a,d=BB(pP,n),h=d.currentTabStopId===l,f=dP(n),{onFocusableItemAdd:m,onFocusableItemRemove:y}=d;return p.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),c.jsx(cy.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:c.jsx(pe.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:e,onMouseDown:le(t.onMouseDown,b=>{r?d.onItemFocus(l):b.preventDefault()}),onFocus:le(t.onFocus,()=>d.onItemFocus(l)),onKeyDown:le(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const v=GB(b,d.orientation,d.dir);if(v!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let x=f().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const w=x.indexOf(b.currentTarget);x=d.loop?KB(x,w+1):x.slice(w+1)}setTimeout(()=>gP(x))}})})})});mP.displayName=pP;var WB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function qB(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function GB(t,e,n){const r=qB(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return WB[r]}function gP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function KB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var QB=fP,YB=mP,Z0="Tabs",[XB,TH]=dr(Z0,[hP]),yP=hP(),[JB,ew]=XB(Z0),vP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...d}=t,h=Y0(a),[f,m]=li({prop:r,onChange:s,defaultProp:i});return c.jsx(JB,{scope:n,baseId:Zr(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:l,children:c.jsx(pe.div,{dir:h,"data-orientation":o,...d,ref:e})})});vP.displayName=Z0;var wP="TabsList",xP=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=ew(wP,n),o=yP(n);return c.jsx(QB,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:c.jsx(pe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});xP.displayName=wP;var _P="TabsTrigger",EP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=ew(_P,n),a=yP(n),l=TP(o.baseId,r),d=CP(o.baseId,r),h=r===o.value;return c.jsx(YB,{asChild:!0,...a,focusable:!s,active:h,children:c.jsx(pe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:le(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:le(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:le(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});EP.displayName=_P;var bP="TabsContent",SP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=ew(bP,n),l=TP(a.baseId,r),d=CP(a.baseId,r),h=r===a.value,f=p.useRef(h);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),c.jsx(wo,{present:s||h,children:({present:m})=>c.jsx(pe.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});SP.displayName=bP;function TP(t,e){return`${t}-trigger-${e}`}function CP(t,e){return`${t}-content-${e}`}var ZB=vP,IP=xP,NP=EP,AP=SP;const eH=ZB,kP=p.forwardRef(({className:t,...e},n)=>c.jsx(IP,{ref:n,className:X("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));kP.displayName=IP.displayName;const uy=p.forwardRef(({className:t,...e},n)=>c.jsx(NP,{ref:n,className:X("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));uy.displayName=NP.displayName;const dy=p.forwardRef(({className:t,...e},n)=>c.jsx(AP,{ref:n,className:X("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));dy.displayName=AP.displayName;function tH(){const[t,e]=p.useState(null),[n,r]=p.useState(!1),[s,i]=p.useState(!1);return p.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const a=d=>{d.preventDefault(),e(d),r(!0)},l=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",a),window.addEventListener("appinstalled",l),()=>{window.removeEventListener("beforeinstallprompt",a),window.removeEventListener("appinstalled",l)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:a}=await t.userChoice;return a==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(a){return console.error("Error showing install prompt:",a),!1}}}}function nH(){return c.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8",children:[c.jsxs("div",{children:[c.jsx(He,{className:"h-8 w-32"}),c.jsx(He,{className:"h-4 w-64 mt-2"})]}),[1,2,3,4].map(t=>c.jsxs(ot,{children:[c.jsxs(Pt,{children:[c.jsx(He,{className:"h-5 w-32"}),c.jsx(He,{className:"h-4 w-48 mt-1"})]}),c.jsx(St,{children:c.jsx(He,{className:"h-20 w-full"})})]},t))]})}const DE=["Customizing your profile makes the experience more personal.","Enable background sync to keep your assignments always up to date.","Dark mode is easier on the eyes during late-night study sessions.","Installing the app gives you valid offline access to your data."];function rH(){const[t,e]=p.useState(10),[n,r]=p.useState(0);return p.useEffect(()=>{const s=setInterval(()=>{e(o=>{if(o===100)return 100;const a=Math.random()*10;return Math.min(o+a,90)})},500),i=setInterval(()=>{r(o=>(o+1)%DE.length)},2500);return()=>{clearInterval(s),clearInterval(i)}},[]),c.jsxs("div",{className:"relative min-h-[calc(100vh-4rem)] w-full bg-background",children:[c.jsx("div",{className:"opacity-40 pointer-events-none select-none filter grayscale",children:c.jsx(nH,{})}),c.jsx("div",{className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-background/60 backdrop-blur-[2px]",children:c.jsxs("div",{className:"w-full max-w-md p-6 space-y-6",children:[c.jsxs("div",{className:"flex flex-col items-center gap-2",children:[c.jsx("div",{className:"h-10 w-10 bg-zinc-950 rounded flex items-center justify-center text-white",children:c.jsx(di,{className:"h-5 w-5 animate-spin"})}),c.jsx("h2",{className:"text-lg font-semibold tracking-tight",children:"Syncing Settings"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-1 w-full bg-zinc-200 rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-zinc-950 transition-all duration-500 ease-out",style:{width:`${t}%`}})}),c.jsxs("div",{className:"flex justify-between text-[10px] text-zinc-400 font-mono uppercase tracking-wider",children:[c.jsx("span",{children:"Updating Preferences"}),c.jsxs("span",{children:[Math.round(t),"%"]})]})]}),c.jsxs("div",{className:"flex gap-3 items-start bg-white border border-zinc-200 p-4 rounded-md shadow-sm max-w-sm mx-auto animate-in fade-in slide-in-from-bottom-2 duration-700",children:[c.jsx(hf,{className:"h-4 w-4 text-zinc-900 shrink-0 mt-0.5"}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("span",{className:"text-xs font-bold text-zinc-900 uppercase tracking-wide",children:"Quick Tip"}),c.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed min-h-[40px]",children:DE[n]})]})]})]})})]})}function sH(){const{user:t,requestCalendarPermissions:e}=Fr(),[n,r]=p.useState(!1),[s,i]=p.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});p.useEffect(()=>{if(!t)return;const d=f0(Zn(er,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>d()},[t]);const o=async()=>{r(!0);try{await e()&&await si(Zn(er,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(d){console.error(d)}finally{r(!1)}},a=async()=>{try{await si(Zn(er,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(d){console.error(d)}},l=async(d,h)=>{i(f=>({...f,[d]:h}));try{await si(Zn(er,"users",t.uid,"settings","calendar"),{[d]:h},{merge:!0})}catch(f){console.error(f)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(ot,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[c.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[c.jsx("div",{className:"flex-1 space-y-2",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border/50",children:c.jsx(ci,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&c.jsx(ii,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),c.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),c.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?c.jsx(Se,{variant:"ghost",size:"sm",onClick:a,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):c.jsx(Se,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?c.jsx(di,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&c.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[c.jsx("div",{className:"h-px w-full bg-border/50 mb-6"}),c.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",c.jsxs("div",{className:"grid gap-3 max-w-xl",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border/50 bg-background/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),c.jsx(Dr,{checked:s.syncAssignments,onCheckedChange:d=>l("syncAssignments",d)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border/50 bg-background/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),c.jsx(Dr,{checked:s.syncExams,onCheckedChange:d=>l("syncExams",d)})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(ff,{className:"h-3 w-3"}),c.jsxs("span",{children:["Last synced: ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),c.jsx(ot,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:c.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[c.jsx("div",{className:"flex-1 space-y-2",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border/50",children:c.jsx(mv,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),c.jsx("div",{className:"shrink-0",children:c.jsx(Aa,{href:"/settings/notifications",children:c.jsx(Se,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function iH(){var k,j;const{user:t,signOut:e}=Fr(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i}=So(),{isInstallable:o,isInstalled:a,promptInstall:l}=tH(),{theme:d,setTheme:h}=IA(),[f,m]=p.useState(!0),[y,b]=p.useState("auto"),[v,E]=p.useState(!1);if(i||r)return c.jsx(rH,{});const x=((k=t==null?void 0:t.displayName)==null?void 0:k.split(" ").map(D=>D[0]).join("").toUpperCase())||((j=t==null?void 0:t.email)==null?void 0:j[0].toUpperCase())||"U",w=()=>n?n.toLocaleString():"Never",S=async()=>{E(!0);try{await l()}catch(D){console.error("Install failed:",D)}finally{E(!1)}};return c.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),c.jsxs(eH,{defaultValue:"general",className:"w-full",children:[c.jsxs(kP,{className:"grid w-full grid-cols-2 lg:w-[400px] mb-6",children:[c.jsx(uy,{value:"general",children:"General"}),c.jsx(uy,{value:"integrations",children:"Integrations"})]}),c.jsxs(dy,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[c.jsxs(ot,{children:[c.jsxs(Pt,{children:[c.jsx(cn,{className:"text-base",children:"Connected Account"}),c.jsx(Gr,{children:"Your Google account linked to this app"})]}),c.jsxs(St,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(M0,{className:"h-12 w-12",children:[c.jsx(L0,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),c.jsx(V0,{children:x})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),c.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(vg,{className:"h-3.5 w-3.5"}),"Connected"]})]}),c.jsx(Cr,{}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",w()]})]}),c.jsxs(Se,{variant:"outline",size:"sm",onClick:D=>{D.preventDefault(),s().catch(T=>{console.error("Sync failed:",T)})},disabled:r,"data-testid":"button-sync-settings",children:[c.jsx(ff,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),c.jsxs(ot,{children:[c.jsxs(Pt,{children:[c.jsx(cn,{className:"text-base",children:"Sync Settings"}),c.jsx(Gr,{children:"Configure how your data syncs with Google Classroom"})]}),c.jsx(St,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(to,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),c.jsx(Dr,{id:"background-sync",checked:f,onCheckedChange:m,"data-testid":"switch-background-sync"})]})})]}),c.jsxs(ot,{children:[c.jsxs(Pt,{children:[c.jsx(cn,{className:"text-base",children:"Theme"}),c.jsx(Gr,{children:"Choose your preferred color theme"})]}),c.jsx(St,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(to,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(Se,{variant:d==="light"?"default":"outline",size:"sm",onClick:()=>h("light"),className:"flex items-center gap-2",children:[c.jsx(rC,{className:"h-4 w-4"}),"Light"]}),c.jsxs(Se,{variant:d==="dark"?"default":"outline",size:"sm",onClick:()=>h("dark"),className:"flex items-center gap-2",children:[c.jsx(tC,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),c.jsxs(ot,{className:"border-primary/20",children:[c.jsxs(Pt,{children:[c.jsxs(cn,{className:"text-base flex items-center gap-2",children:[c.jsx(h_,{className:"h-4 w-4"}),"Install App"]}),c.jsx(Gr,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),c.jsx(St,{className:"space-y-4",children:a?c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[c.jsx(vg,{className:"h-5 w-5 text-emerald-600"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),c.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):o?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[c.jsx(MM,{className:"h-5 w-5 text-primary"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),c.jsxs(Se,{onClick:S,disabled:v,className:"w-full",size:"lg","data-testid":"button-install-app",children:[c.jsx(h_,{className:"h-4 w-4 mr-2"}),v?"Installing...":"Install App"]}),c.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[c.jsx(sC,{className:"h-5 w-5 text-muted-foreground"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),c.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[c.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),c.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),c.jsxs(ot,{children:[c.jsxs(Pt,{children:[c.jsx(cn,{className:"text-base",children:"Preferences"}),c.jsx(Gr,{children:"Customize your experience"})]}),c.jsx(St,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(to,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),c.jsxs(ay,{value:y,onValueChange:b,children:[c.jsx(zh,{className:"w-[180px]","data-testid":"select-timezone",children:c.jsx(ly,{})}),c.jsxs(Uh,{children:[c.jsx(Rt,{value:"auto",children:"Auto-detect"}),c.jsx(Rt,{value:"America/New_York",children:"Eastern Time"}),c.jsx(Rt,{value:"America/Chicago",children:"Central Time"}),c.jsx(Rt,{value:"America/Denver",children:"Mountain Time"}),c.jsx(Rt,{value:"America/Los_Angeles",children:"Pacific Time"}),c.jsx(Rt,{value:"Europe/London",children:"London"}),c.jsx(Rt,{value:"Europe/Paris",children:"Paris"}),c.jsx(Rt,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),c.jsxs(ot,{children:[c.jsxs(Pt,{children:[c.jsxs(cn,{className:"text-base flex items-center gap-2",children:[c.jsx(xg,{className:"h-4 w-4"}),"Account Actions"]}),c.jsx(Gr,{children:"Manage your session"})]}),c.jsx(St,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),c.jsxs(Sk,{children:[c.jsx(Tk,{asChild:!0,children:c.jsxs(Se,{variant:"outline",size:"sm","data-testid":"button-signout",children:[c.jsx(xg,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),c.jsxs(I0,{children:[c.jsxs(N0,{children:[c.jsx(k0,{children:"Are you absolutely sure?"}),c.jsx(R0,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),c.jsxs(A0,{children:[c.jsx(D0,{children:"Cancel"}),c.jsx(P0,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})})]})]}),c.jsx(dy,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:c.jsx(sH,{})})]})]})}function oH(){const{user:t,requestGmailPermissions:e,accessToken:n}=Fr(),{toast:r}=lf(),[s,i]=p.useState(!1),[o,a]=p.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[l,d]=p.useState(!1),[h,f]=p.useState(!0);p.useEffect(()=>{async function b(){if(t)try{const v=Zn(er,"users",t.uid,"settings","notifications"),E=await _A(v);if(E.exists()){const x=E.data();i(x.enabled??!1),a(x.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(v){console.error("Failed to load settings from Firestore",v)}finally{f(!1)}}b()},[t]),p.useEffect(()=>{async function b(){if(!(!t||h))try{const E=Zn(er,"users",t.uid,"settings","notifications");await si(E,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(E){console.error("Failed to save settings",E)}}const v=setTimeout(b,1e3);return()=>clearTimeout(v)},[s,o,t,h]);const m=async()=>{d(!0);try{if(await e()){if(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."}),t!=null&&t.uid){const v={id:`email-${Date.now()}`,title:"Assignment due reminder email sent",body:"This is a test alert to confirm your notifications are working.",timestamp:new Date().toISOString(),type:"email"},E=`trace_email_events_${t.uid}`,x=JSON.parse(localStorage.getItem(E)||"[]");localStorage.setItem(E,JSON.stringify([...x,v]))}}else r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(b){console.error(b),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{d(!1)}},y=b=>{a(v=>({...v,[b]:!v[b]}))};return c.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Aa,{href:"/settings",children:c.jsx(Se,{variant:"ghost",size:"icon",className:"rounded-full",children:c.jsx(XT,{className:"h-5 w-5"})})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),c.jsxs(ot,{className:"border-border/60 shadow-sm",children:[c.jsxs(Pt,{className:"pb-4",children:[c.jsxs(cn,{className:"flex items-center gap-2 text-lg",children:[c.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:c.jsx(mv,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),c.jsxs(Gr,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),c.jsx(Cr,{}),c.jsxs(St,{className:"pt-6 space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(to,{className:"text-base font-medium",children:"Assignment due reminder"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),c.jsx(Dr,{checked:o.dueReminder,onCheckedChange:()=>y("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),c.jsx(Cr,{className:"opacity-50"}),c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(to,{className:"text-base font-medium",children:"Missed submission alert"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),c.jsx(Dr,{checked:o.missedSubmission,onCheckedChange:()=>y("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),c.jsx(Cr,{className:"opacity-50"}),c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(to,{className:"text-base font-medium",children:"Heavy workload warning"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),c.jsx(Dr,{checked:o.workloadWarning,onCheckedChange:()=>y("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),c.jsxs(uR,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?c.jsxs("div",{className:"w-full space-y-4",children:[c.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[c.jsx(Ra,{className:"h-4 w-4 shrink-0"}),c.jsx("p",{children:"Academic alerts are active."})]}),c.jsx(Se,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):c.jsxs("div",{className:"w-full space-y-4",children:[c.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[c.jsx(sC,{className:"h-4 w-4 shrink-0 mt-0.5"}),c.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),c.jsxs(Se,{onClick:m,disabled:l,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[l&&c.jsx(di,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function aH(){const[t,e]=lv(),{user:n,requestCalendarPermissions:r}=Fr(),{toast:s}=lf(),[i,o]=p.useState(!0),[a,l]=p.useState(!1),[d,h]=p.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});p.useEffect(()=>{if(!n)return;const b=f0(Zn(er,"users",n.uid,"settings","calendar"),v=>{v.exists()&&h(v.data()),o(!1)});return()=>b()},[n]);const f=async()=>{l(!0);try{await r()?(await si(Zn(er,"users",n.uid,"settings","calendar"),{...d,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(b){console.error(b),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{l(!1)}},m=async()=>{try{await si(Zn(er,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(b){console.error(b)}},y=async(b,v)=>{h(E=>({...E,[b]:v}));try{await si(Zn(er,"users",n.uid,"settings","calendar"),{[b]:v},{merge:!0})}catch(E){console.error(E)}};return i?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx(di,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(Se,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:c.jsx(SM,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),c.jsx("div",{className:"grid gap-6",children:c.jsxs(ot,{className:`border-l-4 ${d.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[c.jsxs(Pt,{className:"flex flex-row items-start justify-between pb-2",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:c.jsx(ci,{className:"h-6 w-6"})}),c.jsx(cn,{className:"text-xl",children:"Google Calendar"}),d.enabled&&c.jsx(ii,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),c.jsx(Gr,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),d.enabled?c.jsx(Se,{variant:"outline",size:"sm",onClick:m,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):c.jsx(Se,{onClick:f,disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:a?c.jsx(di,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),d.enabled&&c.jsxs(St,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[c.jsx(Cr,{className:"mb-6"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid gap-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),c.jsx(Dr,{checked:d.syncAssignments,onCheckedChange:b=>y("syncAssignments",b)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),c.jsx(Dr,{checked:d.syncExams,onCheckedChange:b=>y("syncExams",b)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),c.jsx(Dr,{checked:d.syncPersonal,onCheckedChange:b=>y("syncPersonal",b)})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[c.jsx(ff,{className:"h-3 w-3"}),c.jsxs("span",{children:["Last synced: ",d.lastSyncedAt?new Date(d.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]})})]})}function lH(){return c.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:c.jsx(ot,{className:"w-full max-w-md mx-4",children:c.jsxs(St,{className:"pt-6",children:[c.jsxs("div",{className:"flex mb-4 gap-2",children:[c.jsx(ui,{className:"h-8 w-8 text-red-500"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),c.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const cH=()=>{const t="/trace-classroom-crm/";return t.endsWith("/")?t.slice(0,-1):t};function uH(){const[t,e]=p.useState(!1),n=cH();return c.jsx(Xz,{children:c.jsx(fT,{base:n,children:c.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[c.jsx(x8,{mobileOpen:t,onMobileClose:()=>e(!1)}),c.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[c.jsx(_8,{onMobileMenuClick:()=>e(!0)}),c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:c.jsxs(Qj,{children:[c.jsx(Es,{path:"/",component:$$}),c.jsx(Es,{path:"/timeline",component:SB}),c.jsx(Es,{path:"/dashboard",component:AB}),c.jsx(Es,{path:"/notes",component:kB}),c.jsx(Es,{path:"/settings",component:iH}),c.jsx(Es,{path:"/settings/notifications",component:oH}),c.jsx(Es,{path:"/settings/integrations",component:aH}),c.jsx(Es,{component:lH})]})})]})]})})})}function dH(){const{user:t,loading:e}=Fr();return e?c.jsx("div",{className:"h-screen flex items-center justify-center",children:c.jsxs("div",{className:"flex flex-col items-center gap-3",children:[c.jsx("div",{className:"h-8 w-8 border-2 border-foreground border-t-transparent rounded-full animate-spin"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}):t?c.jsx(uH,{}):c.jsx(P8,{})}function hH(){return c.jsx(wO,{client:EO,children:c.jsx(qz,{children:c.jsx(Wz,{children:c.jsxs(KC,{children:[c.jsx(x4,{}),c.jsx(dH,{})]})})})})}nT(document.getElementById("root")).render(c.jsx(hH,{}));
