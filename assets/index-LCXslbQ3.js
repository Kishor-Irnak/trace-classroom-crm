var Z0=t=>{throw TypeError(t)};var Ap=(t,e,n)=>e.has(t)||Z0("Cannot "+n);var K=(t,e,n)=>(Ap(t,e,"read from private field"),n?n.call(t):e.get(t)),je=(t,e,n)=>e.has(t)?Z0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,r)=>(Ap(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Mt=(t,e,n)=>(Ap(t,e,"access private method"),n);var Mu=(t,e,n,r)=>({set _(s){Ee(t,e,s,n)},get _(){return K(t,e,r)}});function b2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function oE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aE={exports:{}},ef={},lE={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kc=Symbol.for("react.element"),E2=Symbol.for("react.portal"),S2=Symbol.for("react.fragment"),T2=Symbol.for("react.strict_mode"),C2=Symbol.for("react.profiler"),I2=Symbol.for("react.provider"),N2=Symbol.for("react.context"),A2=Symbol.for("react.forward_ref"),k2=Symbol.for("react.suspense"),R2=Symbol.for("react.memo"),P2=Symbol.for("react.lazy"),ex=Symbol.iterator;function D2(t){return t===null||typeof t!="object"?null:(t=ex&&t[ex]||t["@@iterator"],typeof t=="function"?t:null)}var cE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uE=Object.assign,dE={};function Ka(t,e,n){this.props=t,this.context=e,this.refs=dE,this.updater=n||cE}Ka.prototype.isReactComponent={};Ka.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ka.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hE(){}hE.prototype=Ka.prototype;function Cy(t,e,n){this.props=t,this.context=e,this.refs=dE,this.updater=n||cE}var Iy=Cy.prototype=new hE;Iy.constructor=Cy;uE(Iy,Ka.prototype);Iy.isPureReactComponent=!0;var tx=Array.isArray,fE=Object.prototype.hasOwnProperty,Ny={current:null},pE={key:!0,ref:!0,__self:!0,__source:!0};function mE(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)fE.call(e,r)&&!pE.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Kc,type:t,key:i,ref:o,props:s,_owner:Ny.current}}function j2(t,e){return{$$typeof:Kc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ay(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kc}function O2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nx=/\/+/g;function kp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?O2(""+t.key):e.toString(36)}function wd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kc:case E2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+kp(o,0):r,tx(s)?(n="",t!=null&&(n=t.replace(nx,"$&/")+"/"),wd(s,e,n,"",function(u){return u})):s!=null&&(Ay(s)&&(s=j2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(nx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",tx(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+kp(i,a);o+=wd(i,e,n,l,s)}else if(l=D2(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+kp(i,a++),o+=wd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lu(t,e,n){if(t==null)return t;var r=[],s=0;return wd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function M2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},xd={transition:null},L2={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:xd,ReactCurrentOwner:Ny};function gE(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Lu,forEach:function(t,e,n){Lu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lu(t,function(){e++}),e},toArray:function(t){return Lu(t,function(e){return e})||[]},only:function(t){if(!Ay(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Ka;Te.Fragment=S2;Te.Profiler=C2;Te.PureComponent=Cy;Te.StrictMode=T2;Te.Suspense=k2;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L2;Te.act=gE;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uE({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ny.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fE.call(e,l)&&!pE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Kc,type:t.type,key:s,ref:i,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:N2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:I2,_context:t},t.Consumer=t};Te.createElement=mE;Te.createFactory=function(t){var e=mE.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:A2,render:t}};Te.isValidElement=Ay;Te.lazy=function(t){return{$$typeof:P2,_payload:{_status:-1,_result:t},_init:M2}};Te.memo=function(t,e){return{$$typeof:R2,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=xd.transition;xd.transition={};try{t()}finally{xd.transition=e}};Te.unstable_act=gE;Te.useCallback=function(t,e){return tn.current.useCallback(t,e)};Te.useContext=function(t){return tn.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};Te.useEffect=function(t,e){return tn.current.useEffect(t,e)};Te.useId=function(){return tn.current.useId()};Te.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return tn.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};Te.useRef=function(t){return tn.current.useRef(t)};Te.useState=function(t){return tn.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return tn.current.useTransition()};Te.version="18.3.1";lE.exports=Te;var p=lE.exports;const Se=oE(p),yE=b2({__proto__:null,default:Se},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V2=p,F2=Symbol.for("react.element"),U2=Symbol.for("react.fragment"),z2=Object.prototype.hasOwnProperty,$2=V2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,B2={key:!0,ref:!0,__self:!0,__source:!0};function vE(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)z2.call(e,r)&&!B2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:F2,type:t,key:i,ref:o,props:s,_owner:$2.current}}ef.Fragment=U2;ef.jsx=vE;ef.jsxs=vE;aE.exports=ef;var c=aE.exports,wE={exports:{}},Rn={},xE={exports:{}},_E={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,L){var F=M.length;M.push(L);e:for(;0<F;){var B=F-1>>>1,G=M[B];if(0<s(G,L))M[B]=L,M[F]=G,F=B;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var L=M[0],F=M.pop();if(F!==L){M[0]=F;e:for(var B=0,G=M.length,X=G>>>1;B<X;){var J=2*(B+1)-1,he=M[J],ie=J+1,Q=M[ie];if(0>s(he,F))ie<G&&0>s(Q,he)?(M[B]=Q,M[ie]=F,B=ie):(M[B]=he,M[J]=F,B=J);else if(ie<G&&0>s(Q,F))M[B]=Q,M[ie]=F,B=ie;else break e}}return L}function s(M,L){var F=M.sortIndex-L.sortIndex;return F!==0?F:M.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,f=null,m=3,y=!1,x=!1,v=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(M){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=M)r(u),L.sortIndex=L.expirationTime,e(l,L);else break;L=n(u)}}function k(M){if(v=!1,S(M),!x)if(n(l)!==null)x=!0,z(D);else{var L=n(u);L!==null&&W(k,L.startTime-M)}}function D(M,L){x=!1,v&&(v=!1,E(C),C=-1),y=!0;var F=m;try{for(S(L),f=n(l);f!==null&&(!(f.expirationTime>L)||M&&!P());){var B=f.callback;if(typeof B=="function"){f.callback=null,m=f.priorityLevel;var G=B(f.expirationTime<=L);L=t.unstable_now(),typeof G=="function"?f.callback=G:f===n(l)&&r(l),S(L)}else r(l);f=n(l)}if(f!==null)var X=!0;else{var J=n(u);J!==null&&W(k,J.startTime-L),X=!1}return X}finally{f=null,m=F,y=!1}}var O=!1,T=null,C=-1,I=5,A=-1;function P(){return!(t.unstable_now()-A<I)}function j(){if(T!==null){var M=t.unstable_now();A=M;var L=!0;try{L=T(!0,M)}finally{L?R():(O=!1,T=null)}}else O=!1}var R;if(typeof w=="function")R=function(){w(j)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,re=$.port2;$.port1.onmessage=j,R=function(){re.postMessage(null)}}else R=function(){b(j,0)};function z(M){T=M,O||(O=!0,R())}function W(M,L){C=b(function(){M(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,z(D))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var F=m;m=L;try{return M()}finally{m=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var F=m;m=M;try{return L()}finally{m=F}},t.unstable_scheduleCallback=function(M,L,F){var B=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?B+F:B):F=B,M){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=F+G,M={id:h++,callback:L,priorityLevel:M,startTime:F,expirationTime:G,sortIndex:-1},F>B?(M.sortIndex=F,e(u,M),n(l)===null&&M===n(u)&&(v?(E(C),C=-1):v=!0,W(k,F-B))):(M.sortIndex=G,e(l,M),x||y||(x=!0,z(D))),M},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(M){var L=m;return function(){var F=m;m=L;try{return M.apply(this,arguments)}finally{m=F}}}})(_E);xE.exports=_E;var H2=xE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W2=p,kn=H2;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bE=new Set,dc={};function bo(t,e){Ca(t,e),Ca(t+"Capture",e)}function Ca(t,e){for(dc[t]=e,t=0;t<e.length;t++)bE.add(e[t])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lm=Object.prototype.hasOwnProperty,q2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rx={},sx={};function G2(t){return Lm.call(sx,t)?!0:Lm.call(rx,t)?!1:q2.test(t)?sx[t]=!0:(rx[t]=!0,!1)}function K2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Q2(t,e,n,r){if(e===null||typeof e>"u"||K2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dt[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dt[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dt[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dt[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dt[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dt[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dt[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dt[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dt[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ky=/[\-:]([a-z])/g;function Ry(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ky,Ry);Dt[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ky,Ry);Dt[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ky,Ry);Dt[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dt[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Dt.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dt[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Py(t,e,n,r){var s=Dt.hasOwnProperty(e)?Dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Q2(e,n,s,r)&&(n=null),r||s===null?G2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ys=W2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vu=Symbol.for("react.element"),Bo=Symbol.for("react.portal"),Ho=Symbol.for("react.fragment"),Dy=Symbol.for("react.strict_mode"),Vm=Symbol.for("react.profiler"),EE=Symbol.for("react.provider"),SE=Symbol.for("react.context"),jy=Symbol.for("react.forward_ref"),Fm=Symbol.for("react.suspense"),Um=Symbol.for("react.suspense_list"),Oy=Symbol.for("react.memo"),js=Symbol.for("react.lazy"),TE=Symbol.for("react.offscreen"),ix=Symbol.iterator;function Cl(t){return t===null||typeof t!="object"?null:(t=ix&&t[ix]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,Rp;function Ml(t){if(Rp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rp=e&&e[1]||""}return`
`+Rp+t}var Pp=!1;function Dp(t,e){if(!t||Pp)return"";Pp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ml(t):""}function X2(t){switch(t.tag){case 5:return Ml(t.type);case 16:return Ml("Lazy");case 13:return Ml("Suspense");case 19:return Ml("SuspenseList");case 0:case 2:case 15:return t=Dp(t.type,!1),t;case 11:return t=Dp(t.type.render,!1),t;case 1:return t=Dp(t.type,!0),t;default:return""}}function zm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ho:return"Fragment";case Bo:return"Portal";case Vm:return"Profiler";case Dy:return"StrictMode";case Fm:return"Suspense";case Um:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case SE:return(t.displayName||"Context")+".Consumer";case EE:return(t._context.displayName||"Context")+".Provider";case jy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Oy:return e=t.displayName||null,e!==null?e:zm(t.type)||"Memo";case js:e=t._payload,t=t._init;try{return zm(t(e))}catch{}}return null}function Y2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zm(e);case 8:return e===Dy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ui(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function J2(t){var e=CE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fu(t){t._valueTracker||(t._valueTracker=J2(t))}function IE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=CE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $m(t,e){var n=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ox(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ui(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function NE(t,e){e=e.checked,e!=null&&Py(t,"checked",e,!1)}function Bm(t,e){NE(t,e);var n=ui(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hm(t,e.type,ui(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ax(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hm(t,e,n){(e!=="number"||qd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ll=Array.isArray;function na(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ui(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Ll(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ui(n)}}function AE(t,e){var n=ui(e.value),r=ui(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uu,RE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uu=Uu||document.createElement("div"),Uu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z2=["Webkit","ms","Moz","O"];Object.keys(Hl).forEach(function(t){Z2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hl[e]=Hl[t]})});function PE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hl.hasOwnProperty(t)&&Hl[t]?(""+e).trim():e+"px"}function DE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=PE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var eD=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gm(t,e){if(e){if(eD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Km(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qm=null;function My(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xm=null,ra=null,sa=null;function ux(t){if(t=Yc(t)){if(typeof Xm!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=of(e),Xm(t.stateNode,t.type,e))}}function jE(t){ra?sa?sa.push(t):sa=[t]:ra=t}function OE(){if(ra){var t=ra,e=sa;if(sa=ra=null,ux(t),e)for(t=0;t<e.length;t++)ux(e[t])}}function ME(t,e){return t(e)}function LE(){}var jp=!1;function VE(t,e,n){if(jp)return t(e,n);jp=!0;try{return ME(t,e,n)}finally{jp=!1,(ra!==null||sa!==null)&&(LE(),OE())}}function fc(t,e){var n=t.stateNode;if(n===null)return null;var r=of(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Ym=!1;if(as)try{var Il={};Object.defineProperty(Il,"passive",{get:function(){Ym=!0}}),window.addEventListener("test",Il,Il),window.removeEventListener("test",Il,Il)}catch{Ym=!1}function tD(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Wl=!1,Gd=null,Kd=!1,Jm=null,nD={onError:function(t){Wl=!0,Gd=t}};function rD(t,e,n,r,s,i,o,a,l){Wl=!1,Gd=null,tD.apply(nD,arguments)}function sD(t,e,n,r,s,i,o,a,l){if(rD.apply(this,arguments),Wl){if(Wl){var u=Gd;Wl=!1,Gd=null}else throw Error(Y(198));Kd||(Kd=!0,Jm=u)}}function Eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function FE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dx(t){if(Eo(t)!==t)throw Error(Y(188))}function iD(t){var e=t.alternate;if(!e){if(e=Eo(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return dx(s),t;if(i===r)return dx(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function UE(t){return t=iD(t),t!==null?zE(t):null}function zE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zE(t);if(e!==null)return e;t=t.sibling}return null}var $E=kn.unstable_scheduleCallback,hx=kn.unstable_cancelCallback,oD=kn.unstable_shouldYield,aD=kn.unstable_requestPaint,ot=kn.unstable_now,lD=kn.unstable_getCurrentPriorityLevel,Ly=kn.unstable_ImmediatePriority,BE=kn.unstable_UserBlockingPriority,Qd=kn.unstable_NormalPriority,cD=kn.unstable_LowPriority,HE=kn.unstable_IdlePriority,tf=null,Pr=null;function uD(t){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot(tf,t,void 0,(t.current.flags&128)===128)}catch{}}var or=Math.clz32?Math.clz32:fD,dD=Math.log,hD=Math.LN2;function fD(t){return t>>>=0,t===0?32:31-(dD(t)/hD|0)|0}var zu=64,$u=4194304;function Vl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Vl(a):(i&=o,i!==0&&(r=Vl(i)))}else o=n&~s,o!==0?r=Vl(o):i!==0&&(r=Vl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-or(e),s=1<<n,r|=t[n],e&=~s;return r}function pD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-or(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=pD(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Zm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function WE(){var t=zu;return zu<<=1,!(zu&4194240)&&(zu=64),t}function Op(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-or(e),t[e]=n}function gD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-or(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Vy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-or(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Me=0;function qE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var GE,Fy,KE,QE,XE,eg=!1,Bu=[],Xs=null,Ys=null,Js=null,pc=new Map,mc=new Map,Ls=[],yD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fx(t,e){switch(t){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":pc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mc.delete(e.pointerId)}}function Nl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Yc(e),e!==null&&Fy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vD(t,e,n,r,s){switch(e){case"focusin":return Xs=Nl(Xs,t,e,n,r,s),!0;case"dragenter":return Ys=Nl(Ys,t,e,n,r,s),!0;case"mouseover":return Js=Nl(Js,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return pc.set(i,Nl(pc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mc.set(i,Nl(mc.get(i)||null,t,e,n,r,s)),!0}return!1}function YE(t){var e=Bi(t.target);if(e!==null){var n=Eo(e);if(n!==null){if(e=n.tag,e===13){if(e=FE(n),e!==null){t.blockedOn=e,XE(t.priority,function(){KE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qm=r,n.target.dispatchEvent(r),Qm=null}else return e=Yc(n),e!==null&&Fy(e),t.blockedOn=n,!1;e.shift()}return!0}function px(t,e,n){_d(t)&&n.delete(e)}function wD(){eg=!1,Xs!==null&&_d(Xs)&&(Xs=null),Ys!==null&&_d(Ys)&&(Ys=null),Js!==null&&_d(Js)&&(Js=null),pc.forEach(px),mc.forEach(px)}function Al(t,e){t.blockedOn===e&&(t.blockedOn=null,eg||(eg=!0,kn.unstable_scheduleCallback(kn.unstable_NormalPriority,wD)))}function gc(t){function e(s){return Al(s,t)}if(0<Bu.length){Al(Bu[0],t);for(var n=1;n<Bu.length;n++){var r=Bu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xs!==null&&Al(Xs,t),Ys!==null&&Al(Ys,t),Js!==null&&Al(Js,t),pc.forEach(e),mc.forEach(e),n=0;n<Ls.length;n++)r=Ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ls.length&&(n=Ls[0],n.blockedOn===null);)YE(n),n.blockedOn===null&&Ls.shift()}var ia=ys.ReactCurrentBatchConfig,Yd=!0;function xD(t,e,n,r){var s=Me,i=ia.transition;ia.transition=null;try{Me=1,Uy(t,e,n,r)}finally{Me=s,ia.transition=i}}function _D(t,e,n,r){var s=Me,i=ia.transition;ia.transition=null;try{Me=4,Uy(t,e,n,r)}finally{Me=s,ia.transition=i}}function Uy(t,e,n,r){if(Yd){var s=tg(t,e,n,r);if(s===null)Wp(t,e,r,Jd,n),fx(t,r);else if(vD(s,t,e,n,r))r.stopPropagation();else if(fx(t,r),e&4&&-1<yD.indexOf(t)){for(;s!==null;){var i=Yc(s);if(i!==null&&GE(i),i=tg(t,e,n,r),i===null&&Wp(t,e,r,Jd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wp(t,e,r,null,n)}}var Jd=null;function tg(t,e,n,r){if(Jd=null,t=My(r),t=Bi(t),t!==null)if(e=Eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=FE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jd=t,null}function JE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lD()){case Ly:return 1;case BE:return 4;case Qd:case cD:return 16;case HE:return 536870912;default:return 16}default:return 16}}var Gs=null,zy=null,bd=null;function ZE(){if(bd)return bd;var t,e=zy,n=e.length,r,s="value"in Gs?Gs.value:Gs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return bd=s.slice(t,1<r?1-r:void 0)}function Ed(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hu(){return!0}function mx(){return!1}function Pn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hu:mx,this.isPropagationStopped=mx,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hu)},persist:function(){},isPersistent:Hu}),e}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$y=Pn(Qa),Xc=Je({},Qa,{view:0,detail:0}),bD=Pn(Xc),Mp,Lp,kl,nf=Je({},Xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:By,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kl&&(kl&&t.type==="mousemove"?(Mp=t.screenX-kl.screenX,Lp=t.screenY-kl.screenY):Lp=Mp=0,kl=t),Mp)},movementY:function(t){return"movementY"in t?t.movementY:Lp}}),gx=Pn(nf),ED=Je({},nf,{dataTransfer:0}),SD=Pn(ED),TD=Je({},Xc,{relatedTarget:0}),Vp=Pn(TD),CD=Je({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),ID=Pn(CD),ND=Je({},Qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AD=Pn(ND),kD=Je({},Qa,{data:0}),yx=Pn(kD),RD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DD[t])?!!e[t]:!1}function By(){return jD}var OD=Je({},Xc,{key:function(t){if(t.key){var e=RD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ed(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:By,charCode:function(t){return t.type==="keypress"?Ed(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ed(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MD=Pn(OD),LD=Je({},nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vx=Pn(LD),VD=Je({},Xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:By}),FD=Pn(VD),UD=Je({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),zD=Pn(UD),$D=Je({},nf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BD=Pn($D),HD=[9,13,27,32],Hy=as&&"CompositionEvent"in window,ql=null;as&&"documentMode"in document&&(ql=document.documentMode);var WD=as&&"TextEvent"in window&&!ql,eS=as&&(!Hy||ql&&8<ql&&11>=ql),wx=" ",xx=!1;function tS(t,e){switch(t){case"keyup":return HD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Wo=!1;function qD(t,e){switch(t){case"compositionend":return nS(e);case"keypress":return e.which!==32?null:(xx=!0,wx);case"textInput":return t=e.data,t===wx&&xx?null:t;default:return null}}function GD(t,e){if(Wo)return t==="compositionend"||!Hy&&tS(t,e)?(t=ZE(),bd=zy=Gs=null,Wo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eS&&e.locale!=="ko"?null:e.data;default:return null}}var KD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!KD[t.type]:e==="textarea"}function rS(t,e,n,r){jE(r),e=Zd(e,"onChange"),0<e.length&&(n=new $y("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gl=null,yc=null;function QD(t){pS(t,0)}function rf(t){var e=Ko(t);if(IE(e))return t}function XD(t,e){if(t==="change")return e}var sS=!1;if(as){var Fp;if(as){var Up="oninput"in document;if(!Up){var bx=document.createElement("div");bx.setAttribute("oninput","return;"),Up=typeof bx.oninput=="function"}Fp=Up}else Fp=!1;sS=Fp&&(!document.documentMode||9<document.documentMode)}function Ex(){Gl&&(Gl.detachEvent("onpropertychange",iS),yc=Gl=null)}function iS(t){if(t.propertyName==="value"&&rf(yc)){var e=[];rS(e,yc,t,My(t)),VE(QD,e)}}function YD(t,e,n){t==="focusin"?(Ex(),Gl=e,yc=n,Gl.attachEvent("onpropertychange",iS)):t==="focusout"&&Ex()}function JD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rf(yc)}function ZD(t,e){if(t==="click")return rf(e)}function ej(t,e){if(t==="input"||t==="change")return rf(e)}function tj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dr=typeof Object.is=="function"?Object.is:tj;function vc(t,e){if(dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Lm.call(e,s)||!dr(t[s],e[s]))return!1}return!0}function Sx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tx(t,e){var n=Sx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sx(n)}}function oS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aS(){for(var t=window,e=qd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qd(t.document)}return e}function Wy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nj(t){var e=aS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oS(n.ownerDocument.documentElement,n)){if(r!==null&&Wy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Tx(n,i);var o=Tx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rj=as&&"documentMode"in document&&11>=document.documentMode,qo=null,ng=null,Kl=null,rg=!1;function Cx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rg||qo==null||qo!==qd(r)||(r=qo,"selectionStart"in r&&Wy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kl&&vc(Kl,r)||(Kl=r,r=Zd(ng,"onSelect"),0<r.length&&(e=new $y("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qo)))}function Wu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Go={animationend:Wu("Animation","AnimationEnd"),animationiteration:Wu("Animation","AnimationIteration"),animationstart:Wu("Animation","AnimationStart"),transitionend:Wu("Transition","TransitionEnd")},zp={},lS={};as&&(lS=document.createElement("div").style,"AnimationEvent"in window||(delete Go.animationend.animation,delete Go.animationiteration.animation,delete Go.animationstart.animation),"TransitionEvent"in window||delete Go.transitionend.transition);function sf(t){if(zp[t])return zp[t];if(!Go[t])return t;var e=Go[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lS)return zp[t]=e[n];return t}var cS=sf("animationend"),uS=sf("animationiteration"),dS=sf("animationstart"),hS=sf("transitionend"),fS=new Map,Ix="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(t,e){fS.set(t,e),bo(e,[t])}for(var $p=0;$p<Ix.length;$p++){var Bp=Ix[$p],sj=Bp.toLowerCase(),ij=Bp[0].toUpperCase()+Bp.slice(1);Ei(sj,"on"+ij)}Ei(cS,"onAnimationEnd");Ei(uS,"onAnimationIteration");Ei(dS,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(hS,"onTransitionEnd");Ca("onMouseEnter",["mouseout","mouseover"]);Ca("onMouseLeave",["mouseout","mouseover"]);Ca("onPointerEnter",["pointerout","pointerover"]);Ca("onPointerLeave",["pointerout","pointerover"]);bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fl));function Nx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sD(r,e,void 0,t),t.currentTarget=null}function pS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Nx(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Nx(s,a,u),i=l}}}if(Kd)throw t=Jm,Kd=!1,Jm=null,t}function qe(t,e){var n=e[lg];n===void 0&&(n=e[lg]=new Set);var r=t+"__bubble";n.has(r)||(mS(e,t,2,!1),n.add(r))}function Hp(t,e,n){var r=0;e&&(r|=4),mS(n,t,r,e)}var qu="_reactListening"+Math.random().toString(36).slice(2);function wc(t){if(!t[qu]){t[qu]=!0,bE.forEach(function(n){n!=="selectionchange"&&(oj.has(n)||Hp(n,!1,t),Hp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qu]||(e[qu]=!0,Hp("selectionchange",!1,e))}}function mS(t,e,n,r){switch(JE(e)){case 1:var s=xD;break;case 4:s=_D;break;default:s=Uy}n=s.bind(null,e,n,t),s=void 0,!Ym||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Bi(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}VE(function(){var u=i,h=My(n),f=[];e:{var m=fS.get(t);if(m!==void 0){var y=$y,x=t;switch(t){case"keypress":if(Ed(n)===0)break e;case"keydown":case"keyup":y=MD;break;case"focusin":x="focus",y=Vp;break;case"focusout":x="blur",y=Vp;break;case"beforeblur":case"afterblur":y=Vp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=gx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=SD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=FD;break;case cS:case uS:case dS:y=ID;break;case hS:y=zD;break;case"scroll":y=bD;break;case"wheel":y=BD;break;case"copy":case"cut":case"paste":y=AD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=vx}var v=(e&4)!==0,b=!v&&t==="scroll",E=v?m!==null?m+"Capture":null:m;v=[];for(var w=u,S;w!==null;){S=w;var k=S.stateNode;if(S.tag===5&&k!==null&&(S=k,E!==null&&(k=fc(w,E),k!=null&&v.push(xc(w,k,S)))),b)break;w=w.return}0<v.length&&(m=new y(m,x,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Qm&&(x=n.relatedTarget||n.fromElement)&&(Bi(x)||x[ls]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=u,x=x?Bi(x):null,x!==null&&(b=Eo(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(v=gx,k="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=vx,k="onPointerLeave",E="onPointerEnter",w="pointer"),b=y==null?m:Ko(y),S=x==null?m:Ko(x),m=new v(k,w+"leave",y,n,h),m.target=b,m.relatedTarget=S,k=null,Bi(h)===u&&(v=new v(E,w+"enter",x,n,h),v.target=S,v.relatedTarget=b,k=v),b=k,y&&x)t:{for(v=y,E=x,w=0,S=v;S;S=jo(S))w++;for(S=0,k=E;k;k=jo(k))S++;for(;0<w-S;)v=jo(v),w--;for(;0<S-w;)E=jo(E),S--;for(;w--;){if(v===E||E!==null&&v===E.alternate)break t;v=jo(v),E=jo(E)}v=null}else v=null;y!==null&&Ax(f,m,y,v,!1),x!==null&&b!==null&&Ax(f,b,x,v,!0)}}e:{if(m=u?Ko(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var D=XD;else if(_x(m))if(sS)D=ej;else{D=JD;var O=YD}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=ZD);if(D&&(D=D(t,u))){rS(f,D,n,h);break e}O&&O(t,m,u),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&Hm(m,"number",m.value)}switch(O=u?Ko(u):window,t){case"focusin":(_x(O)||O.contentEditable==="true")&&(qo=O,ng=u,Kl=null);break;case"focusout":Kl=ng=qo=null;break;case"mousedown":rg=!0;break;case"contextmenu":case"mouseup":case"dragend":rg=!1,Cx(f,n,h);break;case"selectionchange":if(rj)break;case"keydown":case"keyup":Cx(f,n,h)}var T;if(Hy)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Wo?tS(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(eS&&n.locale!=="ko"&&(Wo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Wo&&(T=ZE()):(Gs=h,zy="value"in Gs?Gs.value:Gs.textContent,Wo=!0)),O=Zd(u,C),0<O.length&&(C=new yx(C,t,null,n,h),f.push({event:C,listeners:O}),T?C.data=T:(T=nS(n),T!==null&&(C.data=T)))),(T=WD?qD(t,n):GD(t,n))&&(u=Zd(u,"onBeforeInput"),0<u.length&&(h=new yx("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=T))}pS(f,e)})}function xc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fc(t,n),i!=null&&r.unshift(xc(t,i,s)),i=fc(t,e),i!=null&&r.push(xc(t,i,s))),t=t.return}return r}function jo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ax(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=fc(n,i),l!=null&&o.unshift(xc(n,l,a))):s||(l=fc(n,i),l!=null&&o.push(xc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aj=/\r\n?/g,lj=/\u0000|\uFFFD/g;function kx(t){return(typeof t=="string"?t:""+t).replace(aj,`
`).replace(lj,"")}function Gu(t,e,n){if(e=kx(e),kx(t)!==e&&n)throw Error(Y(425))}function eh(){}var sg=null,ig=null;function og(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ag=typeof setTimeout=="function"?setTimeout:void 0,cj=typeof clearTimeout=="function"?clearTimeout:void 0,Rx=typeof Promise=="function"?Promise:void 0,uj=typeof queueMicrotask=="function"?queueMicrotask:typeof Rx<"u"?function(t){return Rx.resolve(null).then(t).catch(dj)}:ag;function dj(t){setTimeout(function(){throw t})}function qp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),gc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gc(e)}function Zs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Px(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),kr="__reactFiber$"+Xa,_c="__reactProps$"+Xa,ls="__reactContainer$"+Xa,lg="__reactEvents$"+Xa,hj="__reactListeners$"+Xa,fj="__reactHandles$"+Xa;function Bi(t){var e=t[kr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ls]||n[kr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Px(t);t!==null;){if(n=t[kr])return n;t=Px(t)}return e}t=n,n=t.parentNode}return null}function Yc(t){return t=t[kr]||t[ls],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function of(t){return t[_c]||null}var cg=[],Qo=-1;function Si(t){return{current:t}}function Ge(t){0>Qo||(t.current=cg[Qo],cg[Qo]=null,Qo--)}function $e(t,e){Qo++,cg[Qo]=t.current,t.current=e}var di={},Wt=Si(di),pn=Si(!1),oo=di;function Ia(t,e){var n=t.type.contextTypes;if(!n)return di;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mn(t){return t=t.childContextTypes,t!=null}function th(){Ge(pn),Ge(Wt)}function Dx(t,e,n){if(Wt.current!==di)throw Error(Y(168));$e(Wt,e),$e(pn,n)}function gS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,Y2(t)||"Unknown",s));return Je({},n,r)}function nh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||di,oo=Wt.current,$e(Wt,t),$e(pn,pn.current),!0}function jx(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=gS(t,e,oo),r.__reactInternalMemoizedMergedChildContext=t,Ge(pn),Ge(Wt),$e(Wt,t)):Ge(pn),$e(pn,n)}var Xr=null,af=!1,Gp=!1;function yS(t){Xr===null?Xr=[t]:Xr.push(t)}function pj(t){af=!0,yS(t)}function Ti(){if(!Gp&&Xr!==null){Gp=!0;var t=0,e=Me;try{var n=Xr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xr=null,af=!1}catch(s){throw Xr!==null&&(Xr=Xr.slice(t+1)),$E(Ly,Ti),s}finally{Me=e,Gp=!1}}return null}var Xo=[],Yo=0,rh=null,sh=0,Ln=[],Vn=0,ao=null,Yr=1,Jr="";function Ui(t,e){Xo[Yo++]=sh,Xo[Yo++]=rh,rh=t,sh=e}function vS(t,e,n){Ln[Vn++]=Yr,Ln[Vn++]=Jr,Ln[Vn++]=ao,ao=t;var r=Yr;t=Jr;var s=32-or(r)-1;r&=~(1<<s),n+=1;var i=32-or(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Yr=1<<32-or(e)+s|n<<s|r,Jr=i+t}else Yr=1<<i|n<<s|r,Jr=t}function qy(t){t.return!==null&&(Ui(t,1),vS(t,1,0))}function Gy(t){for(;t===rh;)rh=Xo[--Yo],Xo[Yo]=null,sh=Xo[--Yo],Xo[Yo]=null;for(;t===ao;)ao=Ln[--Vn],Ln[Vn]=null,Jr=Ln[--Vn],Ln[Vn]=null,Yr=Ln[--Vn],Ln[Vn]=null}var In=null,Cn=null,Qe=!1,tr=null;function wS(t,e){var n=Un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ox(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,In=t,Cn=Zs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,In=t,Cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ao!==null?{id:Yr,overflow:Jr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,In=t,Cn=null,!0):!1;default:return!1}}function ug(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dg(t){if(Qe){var e=Cn;if(e){var n=e;if(!Ox(t,e)){if(ug(t))throw Error(Y(418));e=Zs(n.nextSibling);var r=In;e&&Ox(t,e)?wS(r,n):(t.flags=t.flags&-4097|2,Qe=!1,In=t)}}else{if(ug(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Qe=!1,In=t}}}function Mx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;In=t}function Ku(t){if(t!==In)return!1;if(!Qe)return Mx(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!og(t.type,t.memoizedProps)),e&&(e=Cn)){if(ug(t))throw xS(),Error(Y(418));for(;e;)wS(t,e),e=Zs(e.nextSibling)}if(Mx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cn=Zs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cn=null}}else Cn=In?Zs(t.stateNode.nextSibling):null;return!0}function xS(){for(var t=Cn;t;)t=Zs(t.nextSibling)}function Na(){Cn=In=null,Qe=!1}function Ky(t){tr===null?tr=[t]:tr.push(t)}var mj=ys.ReactCurrentBatchConfig;function Rl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Qu(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Lx(t){var e=t._init;return e(t._payload)}function _S(t){function e(E,w){if(t){var S=E.deletions;S===null?(E.deletions=[w],E.flags|=16):S.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=ri(E,w),E.index=0,E.sibling=null,E}function i(E,w,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<w?(E.flags|=2,w):S):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,w,S,k){return w===null||w.tag!==6?(w=em(S,E.mode,k),w.return=E,w):(w=s(w,S),w.return=E,w)}function l(E,w,S,k){var D=S.type;return D===Ho?h(E,w,S.props.children,k,S.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===js&&Lx(D)===w.type)?(k=s(w,S.props),k.ref=Rl(E,w,S),k.return=E,k):(k=kd(S.type,S.key,S.props,null,E.mode,k),k.ref=Rl(E,w,S),k.return=E,k)}function u(E,w,S,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=tm(S,E.mode,k),w.return=E,w):(w=s(w,S.children||[]),w.return=E,w)}function h(E,w,S,k,D){return w===null||w.tag!==7?(w=no(S,E.mode,k,D),w.return=E,w):(w=s(w,S),w.return=E,w)}function f(E,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=em(""+w,E.mode,S),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vu:return S=kd(w.type,w.key,w.props,null,E.mode,S),S.ref=Rl(E,null,w),S.return=E,S;case Bo:return w=tm(w,E.mode,S),w.return=E,w;case js:var k=w._init;return f(E,k(w._payload),S)}if(Ll(w)||Cl(w))return w=no(w,E.mode,S,null),w.return=E,w;Qu(E,w)}return null}function m(E,w,S,k){var D=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:a(E,w,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Vu:return S.key===D?l(E,w,S,k):null;case Bo:return S.key===D?u(E,w,S,k):null;case js:return D=S._init,m(E,w,D(S._payload),k)}if(Ll(S)||Cl(S))return D!==null?null:h(E,w,S,k,null);Qu(E,S)}return null}function y(E,w,S,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return E=E.get(S)||null,a(w,E,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Vu:return E=E.get(k.key===null?S:k.key)||null,l(w,E,k,D);case Bo:return E=E.get(k.key===null?S:k.key)||null,u(w,E,k,D);case js:var O=k._init;return y(E,w,S,O(k._payload),D)}if(Ll(k)||Cl(k))return E=E.get(S)||null,h(w,E,k,D,null);Qu(w,k)}return null}function x(E,w,S,k){for(var D=null,O=null,T=w,C=w=0,I=null;T!==null&&C<S.length;C++){T.index>C?(I=T,T=null):I=T.sibling;var A=m(E,T,S[C],k);if(A===null){T===null&&(T=I);break}t&&T&&A.alternate===null&&e(E,T),w=i(A,w,C),O===null?D=A:O.sibling=A,O=A,T=I}if(C===S.length)return n(E,T),Qe&&Ui(E,C),D;if(T===null){for(;C<S.length;C++)T=f(E,S[C],k),T!==null&&(w=i(T,w,C),O===null?D=T:O.sibling=T,O=T);return Qe&&Ui(E,C),D}for(T=r(E,T);C<S.length;C++)I=y(T,E,C,S[C],k),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?C:I.key),w=i(I,w,C),O===null?D=I:O.sibling=I,O=I);return t&&T.forEach(function(P){return e(E,P)}),Qe&&Ui(E,C),D}function v(E,w,S,k){var D=Cl(S);if(typeof D!="function")throw Error(Y(150));if(S=D.call(S),S==null)throw Error(Y(151));for(var O=D=null,T=w,C=w=0,I=null,A=S.next();T!==null&&!A.done;C++,A=S.next()){T.index>C?(I=T,T=null):I=T.sibling;var P=m(E,T,A.value,k);if(P===null){T===null&&(T=I);break}t&&T&&P.alternate===null&&e(E,T),w=i(P,w,C),O===null?D=P:O.sibling=P,O=P,T=I}if(A.done)return n(E,T),Qe&&Ui(E,C),D;if(T===null){for(;!A.done;C++,A=S.next())A=f(E,A.value,k),A!==null&&(w=i(A,w,C),O===null?D=A:O.sibling=A,O=A);return Qe&&Ui(E,C),D}for(T=r(E,T);!A.done;C++,A=S.next())A=y(T,E,C,A.value,k),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?C:A.key),w=i(A,w,C),O===null?D=A:O.sibling=A,O=A);return t&&T.forEach(function(j){return e(E,j)}),Qe&&Ui(E,C),D}function b(E,w,S,k){if(typeof S=="object"&&S!==null&&S.type===Ho&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Vu:e:{for(var D=S.key,O=w;O!==null;){if(O.key===D){if(D=S.type,D===Ho){if(O.tag===7){n(E,O.sibling),w=s(O,S.props.children),w.return=E,E=w;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===js&&Lx(D)===O.type){n(E,O.sibling),w=s(O,S.props),w.ref=Rl(E,O,S),w.return=E,E=w;break e}n(E,O);break}else e(E,O);O=O.sibling}S.type===Ho?(w=no(S.props.children,E.mode,k,S.key),w.return=E,E=w):(k=kd(S.type,S.key,S.props,null,E.mode,k),k.ref=Rl(E,w,S),k.return=E,E=k)}return o(E);case Bo:e:{for(O=S.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(E,w.sibling),w=s(w,S.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=tm(S,E.mode,k),w.return=E,E=w}return o(E);case js:return O=S._init,b(E,w,O(S._payload),k)}if(Ll(S))return x(E,w,S,k);if(Cl(S))return v(E,w,S,k);Qu(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,S),w.return=E,E=w):(n(E,w),w=em(S,E.mode,k),w.return=E,E=w),o(E)):n(E,w)}return b}var Aa=_S(!0),bS=_S(!1),ih=Si(null),oh=null,Jo=null,Qy=null;function Xy(){Qy=Jo=oh=null}function Yy(t){var e=ih.current;Ge(ih),t._currentValue=e}function hg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function oa(t,e){oh=t,Qy=Jo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fn=!0),t.firstContext=null)}function Hn(t){var e=t._currentValue;if(Qy!==t)if(t={context:t,memoizedValue:e,next:null},Jo===null){if(oh===null)throw Error(Y(308));Jo=t,oh.dependencies={lanes:0,firstContext:t}}else Jo=Jo.next=t;return e}var Hi=null;function Jy(t){Hi===null?Hi=[t]:Hi.push(t)}function ES(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jy(e)):(n.next=s.next,s.next=n),e.interleaved=n,cs(t,r)}function cs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Os=!1;function Zy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ts(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ei(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,cs(t,n)}return s=r.interleaved,s===null?(e.next=e,Jy(r)):(e.next=s.next,s.next=e),r.interleaved=e,cs(t,n)}function Sd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vy(t,n)}}function Vx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ah(t,e,n,r){var s=t.updateQueue;Os=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;o=0,h=u=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,v=a;switch(m=e,y=n,v.tag){case 1:if(x=v.payload,typeof x=="function"){f=x.call(y,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,m=typeof x=="function"?x.call(y,f,m):x,m==null)break e;f=Je({},f,m);break e;case 2:Os=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,l=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(l=f),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);co|=o,t.lanes=o,t.memoizedState=f}}function Fx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var Jc={},Dr=Si(Jc),bc=Si(Jc),Ec=Si(Jc);function Wi(t){if(t===Jc)throw Error(Y(174));return t}function ev(t,e){switch($e(Ec,e),$e(bc,t),$e(Dr,Jc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qm(e,t)}Ge(Dr),$e(Dr,e)}function ka(){Ge(Dr),Ge(bc),Ge(Ec)}function TS(t){Wi(Ec.current);var e=Wi(Dr.current),n=qm(e,t.type);e!==n&&($e(bc,t),$e(Dr,n))}function tv(t){bc.current===t&&(Ge(Dr),Ge(bc))}var Xe=Si(0);function lh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kp=[];function nv(){for(var t=0;t<Kp.length;t++)Kp[t]._workInProgressVersionPrimary=null;Kp.length=0}var Td=ys.ReactCurrentDispatcher,Qp=ys.ReactCurrentBatchConfig,lo=0,Ye=null,mt=null,St=null,ch=!1,Ql=!1,Sc=0,gj=0;function Lt(){throw Error(Y(321))}function rv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dr(t[n],e[n]))return!1;return!0}function sv(t,e,n,r,s,i){if(lo=i,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Td.current=t===null||t.memoizedState===null?xj:_j,t=n(r,s),Ql){i=0;do{if(Ql=!1,Sc=0,25<=i)throw Error(Y(301));i+=1,St=mt=null,e.updateQueue=null,Td.current=bj,t=n(r,s)}while(Ql)}if(Td.current=uh,e=mt!==null&&mt.next!==null,lo=0,St=mt=Ye=null,ch=!1,e)throw Error(Y(300));return t}function iv(){var t=Sc!==0;return Sc=0,t}function Sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ye.memoizedState=St=t:St=St.next=t,St}function Wn(){if(mt===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var e=St===null?Ye.memoizedState:St.next;if(e!==null)St=e,mt=t;else{if(t===null)throw Error(Y(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},St===null?Ye.memoizedState=St=t:St=St.next=t}return St}function Tc(t,e){return typeof e=="function"?e(t):e}function Xp(t){var e=Wn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=mt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var h=u.lane;if((lo&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ye.lanes|=h,co|=h}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,dr(r,e.memoizedState)||(fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ye.lanes|=i,co|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yp(t){var e=Wn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);dr(i,e.memoizedState)||(fn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function CS(){}function IS(t,e){var n=Ye,r=Wn(),s=e(),i=!dr(r.memoizedState,s);if(i&&(r.memoizedState=s,fn=!0),r=r.queue,ov(kS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,Cc(9,AS.bind(null,n,r,s,e),void 0,null),It===null)throw Error(Y(349));lo&30||NS(n,e,s)}return s}function NS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function AS(t,e,n,r){e.value=n,e.getSnapshot=r,RS(e)&&PS(t)}function kS(t,e,n){return n(function(){RS(e)&&PS(t)})}function RS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dr(t,n)}catch{return!0}}function PS(t){var e=cs(t,1);e!==null&&ar(e,t,1,-1)}function Ux(t){var e=Sr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tc,lastRenderedState:t},e.queue=t,t=t.dispatch=wj.bind(null,Ye,t),[e.memoizedState,t]}function Cc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function DS(){return Wn().memoizedState}function Cd(t,e,n,r){var s=Sr();Ye.flags|=t,s.memoizedState=Cc(1|e,n,void 0,r===void 0?null:r)}function lf(t,e,n,r){var s=Wn();r=r===void 0?null:r;var i=void 0;if(mt!==null){var o=mt.memoizedState;if(i=o.destroy,r!==null&&rv(r,o.deps)){s.memoizedState=Cc(e,n,i,r);return}}Ye.flags|=t,s.memoizedState=Cc(1|e,n,i,r)}function zx(t,e){return Cd(8390656,8,t,e)}function ov(t,e){return lf(2048,8,t,e)}function jS(t,e){return lf(4,2,t,e)}function OS(t,e){return lf(4,4,t,e)}function MS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LS(t,e,n){return n=n!=null?n.concat([t]):null,lf(4,4,MS.bind(null,e,t),n)}function av(){}function VS(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function FS(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function US(t,e,n){return lo&21?(dr(n,e)||(n=WE(),Ye.lanes|=n,co|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fn=!0),t.memoizedState=n)}function yj(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=Qp.transition;Qp.transition={};try{t(!1),e()}finally{Me=n,Qp.transition=r}}function zS(){return Wn().memoizedState}function vj(t,e,n){var r=ni(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$S(t))BS(e,n);else if(n=ES(t,e,n,r),n!==null){var s=Jt();ar(n,t,r,s),HS(n,e,r)}}function wj(t,e,n){var r=ni(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($S(t))BS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,dr(a,o)){var l=e.interleaved;l===null?(s.next=s,Jy(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=ES(t,e,s,r),n!==null&&(s=Jt(),ar(n,t,r,s),HS(n,e,r))}}function $S(t){var e=t.alternate;return t===Ye||e!==null&&e===Ye}function BS(t,e){Ql=ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function HS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vy(t,n)}}var uh={readContext:Hn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},xj={readContext:Hn,useCallback:function(t,e){return Sr().memoizedState=[t,e===void 0?null:e],t},useContext:Hn,useEffect:zx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cd(4194308,4,MS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cd(4,2,t,e)},useMemo:function(t,e){var n=Sr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vj.bind(null,Ye,t),[r.memoizedState,t]},useRef:function(t){var e=Sr();return t={current:t},e.memoizedState=t},useState:Ux,useDebugValue:av,useDeferredValue:function(t){return Sr().memoizedState=t},useTransition:function(){var t=Ux(!1),e=t[0];return t=yj.bind(null,t[1]),Sr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ye,s=Sr();if(Qe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),It===null)throw Error(Y(349));lo&30||NS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,zx(kS.bind(null,r,i,t),[t]),r.flags|=2048,Cc(9,AS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Sr(),e=It.identifierPrefix;if(Qe){var n=Jr,r=Yr;n=(r&~(1<<32-or(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Sc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},_j={readContext:Hn,useCallback:VS,useContext:Hn,useEffect:ov,useImperativeHandle:LS,useInsertionEffect:jS,useLayoutEffect:OS,useMemo:FS,useReducer:Xp,useRef:DS,useState:function(){return Xp(Tc)},useDebugValue:av,useDeferredValue:function(t){var e=Wn();return US(e,mt.memoizedState,t)},useTransition:function(){var t=Xp(Tc)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:CS,useSyncExternalStore:IS,useId:zS,unstable_isNewReconciler:!1},bj={readContext:Hn,useCallback:VS,useContext:Hn,useEffect:ov,useImperativeHandle:LS,useInsertionEffect:jS,useLayoutEffect:OS,useMemo:FS,useReducer:Yp,useRef:DS,useState:function(){return Yp(Tc)},useDebugValue:av,useDeferredValue:function(t){var e=Wn();return mt===null?e.memoizedState=t:US(e,mt.memoizedState,t)},useTransition:function(){var t=Yp(Tc)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:CS,useSyncExternalStore:IS,useId:zS,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function fg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cf={isMounted:function(t){return(t=t._reactInternals)?Eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=ni(t),i=ts(r,s);i.payload=e,n!=null&&(i.callback=n),e=ei(t,i,s),e!==null&&(ar(e,t,s,r),Sd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Jt(),s=ni(t),i=ts(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ei(t,i,s),e!==null&&(ar(e,t,s,r),Sd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),r=ni(t),s=ts(n,r);s.tag=2,e!=null&&(s.callback=e),e=ei(t,s,r),e!==null&&(ar(e,t,r,n),Sd(e,t,r))}};function $x(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!vc(n,r)||!vc(s,i):!0}function WS(t,e,n){var r=!1,s=di,i=e.contextType;return typeof i=="object"&&i!==null?i=Hn(i):(s=mn(e)?oo:Wt.current,r=e.contextTypes,i=(r=r!=null)?Ia(t,s):di),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Bx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cf.enqueueReplaceState(e,e.state,null)}function pg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zy(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Hn(i):(i=mn(e)?oo:Wt.current,s.context=Ia(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(fg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cf.enqueueReplaceState(s,s.state,null),ah(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ra(t,e){try{var n="",r=e;do n+=X2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Jp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ej=typeof WeakMap=="function"?WeakMap:Map;function qS(t,e,n){n=ts(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hh||(hh=!0,Tg=r),mg(t,e)},n}function GS(t,e,n){n=ts(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){mg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){mg(t,e),typeof r!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Ej;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Lj.bind(null,t,e,n),e.then(t,t))}function Wx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ts(-1,1),e.tag=2,ei(n,e,1))),n.lanes|=1),t)}var Sj=ys.ReactCurrentOwner,fn=!1;function Qt(t,e,n,r){e.child=t===null?bS(e,null,n,r):Aa(e,t.child,n,r)}function Gx(t,e,n,r,s){n=n.render;var i=e.ref;return oa(e,s),r=sv(t,e,n,r,i,s),n=iv(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(Qe&&n&&qy(e),e.flags|=1,Qt(t,e,r,s),e.child)}function Kx(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!mv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,KS(t,e,i,r,s)):(t=kd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:vc,n(o,r)&&t.ref===e.ref)return us(t,e,s)}return e.flags|=1,t=ri(i,r),t.ref=e.ref,t.return=e,e.child=t}function KS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(vc(i,r)&&t.ref===e.ref)if(fn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(fn=!0);else return e.lanes=t.lanes,us(t,e,s)}return gg(t,e,n,r,s)}function QS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(ea,bn),bn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(ea,bn),bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(ea,bn),bn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$e(ea,bn),bn|=r;return Qt(t,e,s,n),e.child}function XS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gg(t,e,n,r,s){var i=mn(n)?oo:Wt.current;return i=Ia(e,i),oa(e,s),n=sv(t,e,n,r,i,s),r=iv(),t!==null&&!fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,us(t,e,s)):(Qe&&r&&qy(e),e.flags|=1,Qt(t,e,n,s),e.child)}function Qx(t,e,n,r,s){if(mn(n)){var i=!0;nh(e)}else i=!1;if(oa(e,s),e.stateNode===null)Id(t,e),WS(e,n,r),pg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Hn(u):(u=mn(n)?oo:Wt.current,u=Ia(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Bx(e,o,r,u),Os=!1;var m=e.memoizedState;o.state=m,ah(e,r,o,s),l=e.memoizedState,a!==r||m!==l||pn.current||Os?(typeof h=="function"&&(fg(e,n,h,r),l=e.memoizedState),(a=Os||$x(e,n,a,r,m,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,SS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Yn(e.type,a),o.props=u,f=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Hn(l):(l=mn(n)?oo:Wt.current,l=Ia(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&Bx(e,o,r,l),Os=!1,m=e.memoizedState,o.state=m,ah(e,r,o,s);var x=e.memoizedState;a!==f||m!==x||pn.current||Os?(typeof y=="function"&&(fg(e,n,y,r),x=e.memoizedState),(u=Os||$x(e,n,u,r,m,x,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return yg(t,e,n,r,i,s)}function yg(t,e,n,r,s,i){XS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&jx(e,n,!1),us(t,e,i);r=e.stateNode,Sj.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Aa(e,t.child,null,i),e.child=Aa(e,null,a,i)):Qt(t,e,a,i),e.memoizedState=r.state,s&&jx(e,n,!0),e.child}function YS(t){var e=t.stateNode;e.pendingContext?Dx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dx(t,e.context,!1),ev(t,e.containerInfo)}function Xx(t,e,n,r,s){return Na(),Ky(s),e.flags|=256,Qt(t,e,n,r),e.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function wg(t){return{baseLanes:t,cachePool:null,transitions:null}}function JS(t,e,n){var r=e.pendingProps,s=Xe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Xe,s&1),t===null)return dg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=hf(o,r,0,null),t=no(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wg(n),e.memoizedState=vg,t):lv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Tj(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ri(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ri(a,i):(i=no(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=vg,r}return i=t.child,t=i.sibling,r=ri(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lv(t,e){return e=hf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xu(t,e,n,r){return r!==null&&Ky(r),Aa(e,t.child,null,n),t=lv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Tj(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Jp(Error(Y(422))),Xu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=hf({mode:"visible",children:r.children},s,0,null),i=no(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Aa(e,t.child,null,o),e.child.memoizedState=wg(o),e.memoizedState=vg,i);if(!(e.mode&1))return Xu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Y(419)),r=Jp(i,r,void 0),Xu(t,e,o,r)}if(a=(o&t.childLanes)!==0,fn||a){if(r=It,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,cs(t,s),ar(r,t,s,-1))}return pv(),r=Jp(Error(Y(421))),Xu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Vj.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Cn=Zs(s.nextSibling),In=e,Qe=!0,tr=null,t!==null&&(Ln[Vn++]=Yr,Ln[Vn++]=Jr,Ln[Vn++]=ao,Yr=t.id,Jr=t.overflow,ao=e),e=lv(e,r.children),e.flags|=4096,e)}function Yx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hg(t.return,e,n)}function Zp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ZS(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Qt(t,e,r.children,n),r=Xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Yx(t,n,e);else if(t.tag===19)Yx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Zp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Zp(e,!0,n,null,i);break;case"together":Zp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Id(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function us(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),co|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=ri(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ri(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Cj(t,e,n){switch(e.tag){case 3:YS(e),Na();break;case 5:TS(e);break;case 1:mn(e.type)&&nh(e);break;case 4:ev(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(ih,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Xe,Xe.current&1),e.flags|=128,null):n&e.child.childLanes?JS(t,e,n):($e(Xe,Xe.current&1),t=us(t,e,n),t!==null?t.sibling:null);$e(Xe,Xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ZS(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Xe,Xe.current),r)break;return null;case 22:case 23:return e.lanes=0,QS(t,e,n)}return us(t,e,n)}var eT,xg,tT,nT;eT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xg=function(){};tT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Wi(Dr.current);var i=null;switch(n){case"input":s=$m(t,s),r=$m(t,r),i=[];break;case"select":s=Je({},s,{value:void 0}),r=Je({},r,{value:void 0}),i=[];break;case"textarea":s=Wm(t,s),r=Wm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=eh)}Gm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(dc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(dc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&qe("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};nT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pl(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ij(t,e,n){var r=e.pendingProps;switch(Gy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return mn(e.type)&&th(),Vt(e),null;case 3:return r=e.stateNode,ka(),Ge(pn),Ge(Wt),nv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ku(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tr!==null&&(Ng(tr),tr=null))),xg(t,e),Vt(e),null;case 5:tv(e);var s=Wi(Ec.current);if(n=e.type,t!==null&&e.stateNode!=null)tT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Vt(e),null}if(t=Wi(Dr.current),Ku(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[kr]=e,r[_c]=i,t=(e.mode&1)!==0,n){case"dialog":qe("cancel",r),qe("close",r);break;case"iframe":case"object":case"embed":qe("load",r);break;case"video":case"audio":for(s=0;s<Fl.length;s++)qe(Fl[s],r);break;case"source":qe("error",r);break;case"img":case"image":case"link":qe("error",r),qe("load",r);break;case"details":qe("toggle",r);break;case"input":ox(r,i),qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},qe("invalid",r);break;case"textarea":lx(r,i),qe("invalid",r)}Gm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Gu(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Gu(r.textContent,a,t),s=["children",""+a]):dc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&qe("scroll",r)}switch(n){case"input":Fu(r),ax(r,i,!0);break;case"textarea":Fu(r),cx(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=eh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kr]=e,t[_c]=r,eT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Km(n,r),n){case"dialog":qe("cancel",t),qe("close",t),s=r;break;case"iframe":case"object":case"embed":qe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Fl.length;s++)qe(Fl[s],t);s=r;break;case"source":qe("error",t),s=r;break;case"img":case"image":case"link":qe("error",t),qe("load",t),s=r;break;case"details":qe("toggle",t),s=r;break;case"input":ox(t,r),s=$m(t,r),qe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Je({},r,{value:void 0}),qe("invalid",t);break;case"textarea":lx(t,r),s=Wm(t,r),qe("invalid",t);break;default:s=r}Gm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?DE(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&RE(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&hc(t,l):typeof l=="number"&&hc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&qe("scroll",t):l!=null&&Py(t,i,l,o))}switch(n){case"input":Fu(t),ax(t,r,!1);break;case"textarea":Fu(t),cx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ui(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?na(t,!!r.multiple,i,!1):r.defaultValue!=null&&na(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)nT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Wi(Ec.current),Wi(Dr.current),Ku(e)){if(r=e.stateNode,n=e.memoizedProps,r[kr]=e,(i=r.nodeValue!==n)&&(t=In,t!==null))switch(t.tag){case 3:Gu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Gu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kr]=e,e.stateNode=r}return Vt(e),null;case 13:if(Ge(Xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&Cn!==null&&e.mode&1&&!(e.flags&128))xS(),Na(),e.flags|=98560,i=!1;else if(i=Ku(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[kr]=e}else Na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),i=!1}else tr!==null&&(Ng(tr),tr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xe.current&1?wt===0&&(wt=3):pv())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return ka(),xg(t,e),t===null&&wc(e.stateNode.containerInfo),Vt(e),null;case 10:return Yy(e.type._context),Vt(e),null;case 17:return mn(e.type)&&th(),Vt(e),null;case 19:if(Ge(Xe),i=e.memoizedState,i===null)return Vt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Pl(i,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lh(t),o!==null){for(e.flags|=128,Pl(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Xe,Xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&ot()>Pa&&(e.flags|=128,r=!0,Pl(i,!1),e.lanes=4194304)}else{if(!r)if(t=lh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Qe)return Vt(e),null}else 2*ot()-i.renderingStartTime>Pa&&n!==1073741824&&(e.flags|=128,r=!0,Pl(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ot(),e.sibling=null,n=Xe.current,$e(Xe,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return fv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bn&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function Nj(t,e){switch(Gy(e),e.tag){case 1:return mn(e.type)&&th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ka(),Ge(pn),Ge(Wt),nv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tv(e),null;case 13:if(Ge(Xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Xe),null;case 4:return ka(),null;case 10:return Yy(e.type._context),null;case 22:case 23:return fv(),null;case 24:return null;default:return null}}var Yu=!1,$t=!1,Aj=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Zo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){nt(t,e,r)}else n.current=null}function _g(t,e,n){try{n()}catch(r){nt(t,e,r)}}var Jx=!1;function kj(t,e){if(sg=Yd,t=aS(),Wy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(l=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ig={focusedElem:t,selectionRange:n},Yd=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,b=x.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?v:Yn(e.type,v),b);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(k){nt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return x=Jx,Jx=!1,x}function Xl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&_g(e,n,i)}s=s.next}while(s!==r)}}function uf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function bg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rT(t){var e=t.alternate;e!==null&&(t.alternate=null,rT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kr],delete e[_c],delete e[lg],delete e[hj],delete e[fj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sT(t){return t.tag===5||t.tag===3||t.tag===4}function Zx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eh));else if(r!==4&&(t=t.child,t!==null))for(Eg(t,e,n),t=t.sibling;t!==null;)Eg(t,e,n),t=t.sibling}function Sg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sg(t,e,n),t=t.sibling;t!==null;)Sg(t,e,n),t=t.sibling}var kt=null,er=!1;function Ns(t,e,n){for(n=n.child;n!==null;)iT(t,e,n),n=n.sibling}function iT(t,e,n){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount(tf,n)}catch{}switch(n.tag){case 5:$t||Zo(n,e);case 6:var r=kt,s=er;kt=null,Ns(t,e,n),kt=r,er=s,kt!==null&&(er?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(er?(t=kt,n=n.stateNode,t.nodeType===8?qp(t.parentNode,n):t.nodeType===1&&qp(t,n),gc(t)):qp(kt,n.stateNode));break;case 4:r=kt,s=er,kt=n.stateNode.containerInfo,er=!0,Ns(t,e,n),kt=r,er=s;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&_g(n,e,o),s=s.next}while(s!==r)}Ns(t,e,n);break;case 1:if(!$t&&(Zo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){nt(n,e,a)}Ns(t,e,n);break;case 21:Ns(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,Ns(t,e,n),$t=r):Ns(t,e,n);break;default:Ns(t,e,n)}}function e_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Aj),e.forEach(function(r){var s=Fj.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:kt=a.stateNode,er=!1;break e;case 3:kt=a.stateNode.containerInfo,er=!0;break e;case 4:kt=a.stateNode.containerInfo,er=!0;break e}a=a.return}if(kt===null)throw Error(Y(160));iT(i,o,s),kt=null,er=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){nt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oT(e,t),e=e.sibling}function oT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Qn(e,t),Er(t),r&4){try{Xl(3,t,t.return),uf(3,t)}catch(v){nt(t,t.return,v)}try{Xl(5,t,t.return)}catch(v){nt(t,t.return,v)}}break;case 1:Qn(e,t),Er(t),r&512&&n!==null&&Zo(n,n.return);break;case 5:if(Qn(e,t),Er(t),r&512&&n!==null&&Zo(n,n.return),t.flags&32){var s=t.stateNode;try{hc(s,"")}catch(v){nt(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&NE(s,i),Km(a,o);var u=Km(a,i);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?DE(s,f):h==="dangerouslySetInnerHTML"?RE(s,f):h==="children"?hc(s,f):Py(s,h,f,u)}switch(a){case"input":Bm(s,i);break;case"textarea":AE(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?na(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?na(s,!!i.multiple,i.defaultValue,!0):na(s,!!i.multiple,i.multiple?[]:"",!1))}s[_c]=i}catch(v){nt(t,t.return,v)}}break;case 6:if(Qn(e,t),Er(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){nt(t,t.return,v)}}break;case 3:if(Qn(e,t),Er(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gc(e.containerInfo)}catch(v){nt(t,t.return,v)}break;case 4:Qn(e,t),Er(t);break;case 13:Qn(e,t),Er(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dv=ot())),r&4&&e_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?($t=(u=$t)||h,Qn(e,t),$t=u):Qn(e,t),Er(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(f=ae=h;ae!==null;){switch(m=ae,y=m.child,m.tag){case 0:case 11:case 14:case 15:Xl(4,m,m.return);break;case 1:Zo(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(v){nt(r,n,v)}}break;case 5:Zo(m,m.return);break;case 22:if(m.memoizedState!==null){n_(f);continue}}y!==null?(y.return=m,ae=y):n_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=PE("display",o))}catch(v){nt(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){nt(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qn(e,t),Er(t),r&4&&e_(t);break;case 21:break;default:Qn(e,t),Er(t)}}function Er(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sT(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hc(s,""),r.flags&=-33);var i=Zx(t);Sg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Zx(t);Eg(t,a,o);break;default:throw Error(Y(161))}}catch(l){nt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rj(t,e,n){ae=t,aT(t)}function aT(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var s=ae,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Yu;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||$t;a=Yu;var u=$t;if(Yu=o,($t=l)&&!u)for(ae=s;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?r_(s):l!==null?(l.return=o,ae=l):r_(s);for(;i!==null;)ae=i,aT(i),i=i.sibling;ae=s,Yu=a,$t=u}t_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ae=i):t_(t)}}function t_(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||uf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Fx(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&gc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}$t||e.flags&512&&bg(e)}catch(m){nt(e,e.return,m)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function n_(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function r_(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uf(4,e)}catch(l){nt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){nt(e,s,l)}}var i=e.return;try{bg(e)}catch(l){nt(e,i,l)}break;case 5:var o=e.return;try{bg(e)}catch(l){nt(e,o,l)}}}catch(l){nt(e,e.return,l)}if(e===t){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var Pj=Math.ceil,dh=ys.ReactCurrentDispatcher,cv=ys.ReactCurrentOwner,$n=ys.ReactCurrentBatchConfig,Re=0,It=null,lt=null,Pt=0,bn=0,ea=Si(0),wt=0,Ic=null,co=0,df=0,uv=0,Yl=null,dn=null,dv=0,Pa=1/0,Kr=null,hh=!1,Tg=null,ti=null,Ju=!1,Ks=null,fh=0,Jl=0,Cg=null,Nd=-1,Ad=0;function Jt(){return Re&6?ot():Nd!==-1?Nd:Nd=ot()}function ni(t){return t.mode&1?Re&2&&Pt!==0?Pt&-Pt:mj.transition!==null?(Ad===0&&(Ad=WE()),Ad):(t=Me,t!==0||(t=window.event,t=t===void 0?16:JE(t.type)),t):1}function ar(t,e,n,r){if(50<Jl)throw Jl=0,Cg=null,Error(Y(185));Qc(t,n,r),(!(Re&2)||t!==It)&&(t===It&&(!(Re&2)&&(df|=n),wt===4&&Vs(t,Pt)),gn(t,r),n===1&&Re===0&&!(e.mode&1)&&(Pa=ot()+500,af&&Ti()))}function gn(t,e){var n=t.callbackNode;mD(t,e);var r=Xd(t,t===It?Pt:0);if(r===0)n!==null&&hx(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hx(n),e===1)t.tag===0?pj(s_.bind(null,t)):yS(s_.bind(null,t)),uj(function(){!(Re&6)&&Ti()}),n=null;else{switch(qE(r)){case 1:n=Ly;break;case 4:n=BE;break;case 16:n=Qd;break;case 536870912:n=HE;break;default:n=Qd}n=mT(n,lT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lT(t,e){if(Nd=-1,Ad=0,Re&6)throw Error(Y(327));var n=t.callbackNode;if(aa()&&t.callbackNode!==n)return null;var r=Xd(t,t===It?Pt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ph(t,r);else{e=r;var s=Re;Re|=2;var i=uT();(It!==t||Pt!==e)&&(Kr=null,Pa=ot()+500,to(t,e));do try{Oj();break}catch(a){cT(t,a)}while(!0);Xy(),dh.current=i,Re=s,lt!==null?e=0:(It=null,Pt=0,e=wt)}if(e!==0){if(e===2&&(s=Zm(t),s!==0&&(r=s,e=Ig(t,s))),e===1)throw n=Ic,to(t,0),Vs(t,r),gn(t,ot()),n;if(e===6)Vs(t,r);else{if(s=t.current.alternate,!(r&30)&&!Dj(s)&&(e=ph(t,r),e===2&&(i=Zm(t),i!==0&&(r=i,e=Ig(t,i))),e===1))throw n=Ic,to(t,0),Vs(t,r),gn(t,ot()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:zi(t,dn,Kr);break;case 3:if(Vs(t,r),(r&130023424)===r&&(e=dv+500-ot(),10<e)){if(Xd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ag(zi.bind(null,t,dn,Kr),e);break}zi(t,dn,Kr);break;case 4:if(Vs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-or(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ot()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Pj(r/1960))-r,10<r){t.timeoutHandle=ag(zi.bind(null,t,dn,Kr),r);break}zi(t,dn,Kr);break;case 5:zi(t,dn,Kr);break;default:throw Error(Y(329))}}}return gn(t,ot()),t.callbackNode===n?lT.bind(null,t):null}function Ig(t,e){var n=Yl;return t.current.memoizedState.isDehydrated&&(to(t,e).flags|=256),t=ph(t,e),t!==2&&(e=dn,dn=n,e!==null&&Ng(e)),t}function Ng(t){dn===null?dn=t:dn.push.apply(dn,t)}function Dj(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vs(t,e){for(e&=~uv,e&=~df,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-or(e),r=1<<n;t[n]=-1,e&=~r}}function s_(t){if(Re&6)throw Error(Y(327));aa();var e=Xd(t,0);if(!(e&1))return gn(t,ot()),null;var n=ph(t,e);if(t.tag!==0&&n===2){var r=Zm(t);r!==0&&(e=r,n=Ig(t,r))}if(n===1)throw n=Ic,to(t,0),Vs(t,e),gn(t,ot()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zi(t,dn,Kr),gn(t,ot()),null}function hv(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(Pa=ot()+500,af&&Ti())}}function uo(t){Ks!==null&&Ks.tag===0&&!(Re&6)&&aa();var e=Re;Re|=1;var n=$n.transition,r=Me;try{if($n.transition=null,Me=1,t)return t()}finally{Me=r,$n.transition=n,Re=e,!(Re&6)&&Ti()}}function fv(){bn=ea.current,Ge(ea)}function to(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cj(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(Gy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&th();break;case 3:ka(),Ge(pn),Ge(Wt),nv();break;case 5:tv(r);break;case 4:ka();break;case 13:Ge(Xe);break;case 19:Ge(Xe);break;case 10:Yy(r.type._context);break;case 22:case 23:fv()}n=n.return}if(It=t,lt=t=ri(t.current,null),Pt=bn=e,wt=0,Ic=null,uv=df=co=0,dn=Yl=null,Hi!==null){for(e=0;e<Hi.length;e++)if(n=Hi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Hi=null}return t}function cT(t,e){do{var n=lt;try{if(Xy(),Td.current=uh,ch){for(var r=Ye.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ch=!1}if(lo=0,St=mt=Ye=null,Ql=!1,Sc=0,cv.current=null,n===null||n.return===null){wt=1,Ic=e,lt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Pt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Wx(o);if(y!==null){y.flags&=-257,qx(y,o,a,i,e),y.mode&1&&Hx(i,u,e),e=y,l=u;var x=e.updateQueue;if(x===null){var v=new Set;v.add(l),e.updateQueue=v}else x.add(l);break e}else{if(!(e&1)){Hx(i,u,e),pv();break e}l=Error(Y(426))}}else if(Qe&&a.mode&1){var b=Wx(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),qx(b,o,a,i,e),Ky(Ra(l,a));break e}}i=l=Ra(l,a),wt!==4&&(wt=2),Yl===null?Yl=[i]:Yl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=qS(i,l,e);Vx(i,E);break e;case 1:a=l;var w=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ti===null||!ti.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=GS(i,a,e);Vx(i,k);break e}}i=i.return}while(i!==null)}hT(n)}catch(D){e=D,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function uT(){var t=dh.current;return dh.current=uh,t===null?uh:t}function pv(){(wt===0||wt===3||wt===2)&&(wt=4),It===null||!(co&268435455)&&!(df&268435455)||Vs(It,Pt)}function ph(t,e){var n=Re;Re|=2;var r=uT();(It!==t||Pt!==e)&&(Kr=null,to(t,e));do try{jj();break}catch(s){cT(t,s)}while(!0);if(Xy(),Re=n,dh.current=r,lt!==null)throw Error(Y(261));return It=null,Pt=0,wt}function jj(){for(;lt!==null;)dT(lt)}function Oj(){for(;lt!==null&&!oD();)dT(lt)}function dT(t){var e=pT(t.alternate,t,bn);t.memoizedProps=t.pendingProps,e===null?hT(t):lt=e,cv.current=null}function hT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nj(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,lt=null;return}}else if(n=Ij(n,e,bn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);wt===0&&(wt=5)}function zi(t,e,n){var r=Me,s=$n.transition;try{$n.transition=null,Me=1,Mj(t,e,n,r)}finally{$n.transition=s,Me=r}return null}function Mj(t,e,n,r){do aa();while(Ks!==null);if(Re&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gD(t,i),t===It&&(lt=It=null,Pt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ju||(Ju=!0,mT(Qd,function(){return aa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$n.transition,$n.transition=null;var o=Me;Me=1;var a=Re;Re|=4,cv.current=null,kj(t,n),oT(n,t),nj(ig),Yd=!!sg,ig=sg=null,t.current=n,Rj(n),aD(),Re=a,Me=o,$n.transition=i}else t.current=n;if(Ju&&(Ju=!1,Ks=t,fh=s),i=t.pendingLanes,i===0&&(ti=null),uD(n.stateNode),gn(t,ot()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(hh)throw hh=!1,t=Tg,Tg=null,t;return fh&1&&t.tag!==0&&aa(),i=t.pendingLanes,i&1?t===Cg?Jl++:(Jl=0,Cg=t):Jl=0,Ti(),null}function aa(){if(Ks!==null){var t=qE(fh),e=$n.transition,n=Me;try{if($n.transition=null,Me=16>t?16:t,Ks===null)var r=!1;else{if(t=Ks,Ks=null,fh=0,Re&6)throw Error(Y(331));var s=Re;for(Re|=4,ae=t.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ae=u;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Xl(8,h,i)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var m=h.sibling,y=h.return;if(rT(h),h===u){ae=null;break}if(m!==null){m.return=y,ae=m;break}ae=y}}}var x=i.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var b=v.sibling;v.sibling=null,v=b}while(v!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xl(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,ae=E;break e}ae=i.return}}var w=t.current;for(ae=w;ae!==null;){o=ae;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ae=S;else e:for(o=w;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:uf(9,a)}}catch(D){nt(a,a.return,D)}if(a===o){ae=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ae=k;break e}ae=a.return}}if(Re=s,Ti(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot(tf,t)}catch{}r=!0}return r}finally{Me=n,$n.transition=e}}return!1}function i_(t,e,n){e=Ra(n,e),e=qS(t,e,1),t=ei(t,e,1),e=Jt(),t!==null&&(Qc(t,1,e),gn(t,e))}function nt(t,e,n){if(t.tag===3)i_(t,t,n);else for(;e!==null;){if(e.tag===3){i_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ti===null||!ti.has(r))){t=Ra(n,t),t=GS(e,t,1),e=ei(e,t,1),t=Jt(),e!==null&&(Qc(e,1,t),gn(e,t));break}}e=e.return}}function Lj(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,It===t&&(Pt&n)===n&&(wt===4||wt===3&&(Pt&130023424)===Pt&&500>ot()-dv?to(t,0):uv|=n),gn(t,e)}function fT(t,e){e===0&&(t.mode&1?(e=$u,$u<<=1,!($u&130023424)&&($u=4194304)):e=1);var n=Jt();t=cs(t,e),t!==null&&(Qc(t,e,n),gn(t,n))}function Vj(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fT(t,n)}function Fj(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),fT(t,n)}var pT;pT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fn=!1,Cj(t,e,n);fn=!!(t.flags&131072)}else fn=!1,Qe&&e.flags&1048576&&vS(e,sh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Id(t,e),t=e.pendingProps;var s=Ia(e,Wt.current);oa(e,n),s=sv(null,e,r,t,s,n);var i=iv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mn(r)?(i=!0,nh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zy(e),s.updater=cf,e.stateNode=s,s._reactInternals=e,pg(e,r,t,n),e=yg(null,e,r,!0,i,n)):(e.tag=0,Qe&&i&&qy(e),Qt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Id(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=zj(r),t=Yn(r,t),s){case 0:e=gg(null,e,r,t,n);break e;case 1:e=Qx(null,e,r,t,n);break e;case 11:e=Gx(null,e,r,t,n);break e;case 14:e=Kx(null,e,r,Yn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),gg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Qx(t,e,r,s,n);case 3:e:{if(YS(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,SS(t,e),ah(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ra(Error(Y(423)),e),e=Xx(t,e,r,n,s);break e}else if(r!==s){s=Ra(Error(Y(424)),e),e=Xx(t,e,r,n,s);break e}else for(Cn=Zs(e.stateNode.containerInfo.firstChild),In=e,Qe=!0,tr=null,n=bS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Na(),r===s){e=us(t,e,n);break e}Qt(t,e,r,n)}e=e.child}return e;case 5:return TS(e),t===null&&dg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,og(r,s)?o=null:i!==null&&og(r,i)&&(e.flags|=32),XS(t,e),Qt(t,e,o,n),e.child;case 6:return t===null&&dg(e),null;case 13:return JS(t,e,n);case 4:return ev(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Aa(e,null,r,n):Qt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Gx(t,e,r,s,n);case 7:return Qt(t,e,e.pendingProps,n),e.child;case 8:return Qt(t,e,e.pendingProps.children,n),e.child;case 12:return Qt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,$e(ih,r._currentValue),r._currentValue=o,i!==null)if(dr(i.value,o)){if(i.children===s.children&&!pn.current){e=us(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=ts(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),hg(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Qt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,oa(e,n),s=Hn(s),r=r(s),e.flags|=1,Qt(t,e,r,n),e.child;case 14:return r=e.type,s=Yn(r,e.pendingProps),s=Yn(r.type,s),Kx(t,e,r,s,n);case 15:return KS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Yn(r,s),Id(t,e),e.tag=1,mn(r)?(t=!0,nh(e)):t=!1,oa(e,n),WS(e,r,s),pg(e,r,s,n),yg(null,e,r,!0,t,n);case 19:return ZS(t,e,n);case 22:return QS(t,e,n)}throw Error(Y(156,e.tag))};function mT(t,e){return $E(t,e)}function Uj(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(t,e,n,r){return new Uj(t,e,n,r)}function mv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zj(t){if(typeof t=="function")return mv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jy)return 11;if(t===Oy)return 14}return 2}function ri(t,e){var n=t.alternate;return n===null?(n=Un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")mv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ho:return no(n.children,s,i,e);case Dy:o=8,s|=8;break;case Vm:return t=Un(12,n,e,s|2),t.elementType=Vm,t.lanes=i,t;case Fm:return t=Un(13,n,e,s),t.elementType=Fm,t.lanes=i,t;case Um:return t=Un(19,n,e,s),t.elementType=Um,t.lanes=i,t;case TE:return hf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case EE:o=10;break e;case SE:o=9;break e;case jy:o=11;break e;case Oy:o=14;break e;case js:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Un(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function no(t,e,n,r){return t=Un(7,t,r,e),t.lanes=n,t}function hf(t,e,n,r){return t=Un(22,t,r,e),t.elementType=TE,t.lanes=n,t.stateNode={isHidden:!1},t}function em(t,e,n){return t=Un(6,t,null,e),t.lanes=n,t}function tm(t,e,n){return e=Un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $j(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Op(0),this.expirationTimes=Op(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Op(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gv(t,e,n,r,s,i,o,a,l){return t=new $j(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Un(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zy(i),t}function Bj(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gT(t){if(!t)return di;t=t._reactInternals;e:{if(Eo(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(mn(n))return gS(t,n,e)}return e}function yT(t,e,n,r,s,i,o,a,l){return t=gv(n,r,!0,t,s,i,o,a,l),t.context=gT(null),n=t.current,r=Jt(),s=ni(n),i=ts(r,s),i.callback=e??null,ei(n,i,s),t.current.lanes=s,Qc(t,s,r),gn(t,r),t}function ff(t,e,n,r){var s=e.current,i=Jt(),o=ni(s);return n=gT(n),e.context===null?e.context=n:e.pendingContext=n,e=ts(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ei(s,e,o),t!==null&&(ar(t,s,o,i),Sd(t,s,o)),o}function mh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function o_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yv(t,e){o_(t,e),(t=t.alternate)&&o_(t,e)}function Hj(){return null}var vT=typeof reportError=="function"?reportError:function(t){console.error(t)};function vv(t){this._internalRoot=t}pf.prototype.render=vv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));ff(t,e,null,null)};pf.prototype.unmount=vv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uo(function(){ff(null,t,null,null)}),e[ls]=null}};function pf(t){this._internalRoot=t}pf.prototype.unstable_scheduleHydration=function(t){if(t){var e=QE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ls.length&&e!==0&&e<Ls[n].priority;n++);Ls.splice(n,0,t),n===0&&YE(t)}};function wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function mf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function a_(){}function Wj(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=mh(o);i.call(u)}}var o=yT(e,r,t,0,null,!1,!1,"",a_);return t._reactRootContainer=o,t[ls]=o.current,wc(t.nodeType===8?t.parentNode:t),uo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=mh(l);a.call(u)}}var l=gv(t,0,!1,null,null,!1,!1,"",a_);return t._reactRootContainer=l,t[ls]=l.current,wc(t.nodeType===8?t.parentNode:t),uo(function(){ff(e,l,n,r)}),l}function gf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=mh(o);a.call(l)}}ff(e,o,t,s)}else o=Wj(n,e,t,s,r);return mh(o)}GE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Vl(e.pendingLanes);n!==0&&(Vy(e,n|1),gn(e,ot()),!(Re&6)&&(Pa=ot()+500,Ti()))}break;case 13:uo(function(){var r=cs(t,1);if(r!==null){var s=Jt();ar(r,t,1,s)}}),yv(t,1)}};Fy=function(t){if(t.tag===13){var e=cs(t,134217728);if(e!==null){var n=Jt();ar(e,t,134217728,n)}yv(t,134217728)}};KE=function(t){if(t.tag===13){var e=ni(t),n=cs(t,e);if(n!==null){var r=Jt();ar(n,t,e,r)}yv(t,e)}};QE=function(){return Me};XE=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};Xm=function(t,e,n){switch(e){case"input":if(Bm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=of(r);if(!s)throw Error(Y(90));IE(r),Bm(r,s)}}}break;case"textarea":AE(t,n);break;case"select":e=n.value,e!=null&&na(t,!!n.multiple,e,!1)}};ME=hv;LE=uo;var qj={usingClientEntryPoint:!1,Events:[Yc,Ko,of,jE,OE,hv]},Dl={findFiberByHostInstance:Bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gj={bundleType:Dl.bundleType,version:Dl.version,rendererPackageName:Dl.rendererPackageName,rendererConfig:Dl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UE(t),t===null?null:t.stateNode},findFiberByHostInstance:Dl.findFiberByHostInstance||Hj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zu.isDisabled&&Zu.supportsFiber)try{tf=Zu.inject(Gj),Pr=Zu}catch{}}Rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qj;Rn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wv(e))throw Error(Y(200));return Bj(t,e,null,n)};Rn.createRoot=function(t,e){if(!wv(t))throw Error(Y(299));var n=!1,r="",s=vT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gv(t,1,!1,null,null,n,!1,r,s),t[ls]=e.current,wc(t.nodeType===8?t.parentNode:t),new vv(e)};Rn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=UE(e),t=t===null?null:t.stateNode,t};Rn.flushSync=function(t){return uo(t)};Rn.hydrate=function(t,e,n){if(!mf(e))throw Error(Y(200));return gf(null,t,e,!0,n)};Rn.hydrateRoot=function(t,e,n){if(!wv(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=vT;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yT(e,null,t,1,n??null,s,!1,i,o),t[ls]=e.current,wc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new pf(e)};Rn.render=function(t,e,n){if(!mf(e))throw Error(Y(200));return gf(null,t,e,!1,n)};Rn.unmountComponentAtNode=function(t){if(!mf(t))throw Error(Y(40));return t._reactRootContainer?(uo(function(){gf(null,null,t,!1,function(){t._reactRootContainer=null,t[ls]=null})}),!0):!1};Rn.unstable_batchedUpdates=hv;Rn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!mf(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return gf(t,e,n,!1,r)};Rn.version="18.3.1-next-f1338f8080-20240426";function wT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wT)}catch(t){console.error(t)}}wT(),wE.exports=Rn;var zn=wE.exports;const Kj=oE(zn);var xT,l_=zn;xT=l_.createRoot,l_.hydrateRoot;function Qj(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],a="",l=t.split("/");for(l[0]||l.shift();s=l.shift();)n=s[0],n==="*"?(o.push(n),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var _T={exports:{}},bT={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=p;function Xj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yj=typeof Object.is=="function"?Object.is:Xj,Jj=Da.useState,Zj=Da.useEffect,eO=Da.useLayoutEffect,tO=Da.useDebugValue;function nO(t,e){var n=e(),r=Jj({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return eO(function(){s.value=n,s.getSnapshot=e,nm(s)&&i({inst:s})},[t,n,e]),Zj(function(){return nm(s)&&i({inst:s}),t(function(){nm(s)&&i({inst:s})})},[t]),tO(n),n}function nm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yj(t,n)}catch{return!0}}function rO(t,e){return e()}var sO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?rO:nO;bT.useSyncExternalStore=Da.useSyncExternalStore!==void 0?Da.useSyncExternalStore:sO;_T.exports=bT;var iO=_T.exports;const oO=yE.useInsertionEffect,aO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lO=aO?p.useLayoutEffect:p.useEffect,cO=oO||lO,ET=t=>{const e=p.useRef([t,(...n)=>e[0](...n)]).current;return cO(()=>{e[0]=t}),e[1]},uO="popstate",xv="pushState",_v="replaceState",dO="hashchange",c_=[uO,xv,_v,dO],hO=t=>{for(const e of c_)addEventListener(e,t);return()=>{for(const e of c_)removeEventListener(e,t)}},ST=(t,e)=>iO.useSyncExternalStore(hO,t,e),fO=()=>location.search,pO=({ssrSearch:t=""}={})=>ST(fO,()=>t),u_=()=>location.pathname,mO=({ssrPath:t}={})=>ST(u_,t?()=>t:u_),gO=(t,{replace:e=!1,state:n=null}={})=>history[e?_v:xv](n,"",t),yO=(t={})=>[mO(t),gO],d_=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[d_]>"u"){for(const t of[xv,_v]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,d_,{value:!0})}const vO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",TT=(t="")=>t==="/"?"":t,wO=(t,e)=>t[0]==="~"?t.slice(1):TT(e)+t,xO=(t="",e)=>vO(h_(TT(t)),h_(e)),h_=t=>{try{return decodeURI(t)}catch{return t}},CT={hook:yO,searchHook:pO,parser:Qj,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},IT=p.createContext(CT),Zc=()=>p.useContext(IT),NT={},AT=p.createContext(NT),_O=()=>p.useContext(AT),yf=t=>{const[e,n]=t.hook(t);return[xO(t.base,e),ET((r,s)=>n(wO(r,t.base),s))]},bv=()=>yf(Zc()),kT=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[a,...l]=o;return a!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((f,m)=>[f,l[m]])):o.groups;let h={...l};return u&&Object.assign(h,u),h})(),...r?[a]:[]]:[!1,null]},RT=({children:t,...e})=>{var h,f;const n=Zc(),r=e.hook?CT:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=p.useRef({}),l=a.current,u=l;for(let m in r){const y=m==="base"?r[m]+(e[m]||""):e[m]||r[m];l===u&&y!==u[m]&&(a.current=u={...u}),u[m]=y,y!==r[m]&&(s=u)}return p.createElement(IT.Provider,{value:s,children:t})},f_=({children:t,component:e},n)=>e?p.createElement(e,{params:n}):typeof t=="function"?t(n):t,bO=t=>{let e=p.useRef(NT),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Wr=({path:t,nest:e,match:n,...r})=>{const s=Zc(),[i]=yf(s),[o,a,l]=n??kT(s.parser,t,i,e),u=bO({..._O(),...a});if(!o)return null;const h=l?p.createElement(RT,{base:l},f_(r,u)):f_(r,u);return p.createElement(AT.Provider,{value:u,children:h})},ho=p.forwardRef((t,e)=>{const n=Zc(),[r,s]=yf(n),{to:i="",href:o=i,onClick:a,asChild:l,children:u,className:h,replace:f,state:m,...y}=t,x=ET(b=>{b.ctrlKey||b.metaKey||b.altKey||b.shiftKey||b.button!==0||(a==null||a(b),b.defaultPrevented||(b.preventDefault(),s(o,t)))}),v=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return l&&p.isValidElement(u)?p.cloneElement(u,{onClick:x,href:v}):p.createElement("a",{...y,onClick:x,href:v,className:h!=null&&h.call?h(r===o):h,children:u,ref:e})}),PT=t=>Array.isArray(t)?t.flatMap(e=>PT(e&&e.type===p.Fragment?e.props.children:e)):[t],EO=({children:t,location:e})=>{const n=Zc(),[r]=yf(n);for(const s of PT(t)){let i=0;if(p.isValidElement(s)&&(i=kT(n.parser,s.props.path,e||r,s.props.nest))[0])return p.cloneElement(s,{match:i})}return null};var vf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wf=typeof window>"u"||"Deno"in globalThis;function Jn(){}function SO(t,e){return typeof t=="function"?t(e):t}function TO(t){return typeof t=="number"&&t>=0&&t!==1/0}function CO(t,e){return Math.max(t+(e||0)-Date.now(),0)}function p_(t,e){return typeof t=="function"?t(e):t}function IO(t,e){return typeof t=="function"?t(e):t}function m_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==Ev(o,e.options))return!1}else if(!Ac(e.queryKey,o))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function g_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Nc(e.options.mutationKey)!==Nc(i))return!1}else if(!Ac(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Ev(t,e){return((e==null?void 0:e.queryKeyHashFn)||Nc)(t)}function Nc(t){return JSON.stringify(t,(e,n)=>Ag(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Ac(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Ac(t[n],e[n])):!1}function DT(t,e){if(t===e)return t;const n=y_(t)&&y_(e);if(n||Ag(t)&&Ag(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{};let l=0;for(let u=0;u<o;u++){const h=n?u:i[u];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(a[h]=void 0,l++):(a[h]=DT(t[h],e[h]),a[h]===t[h]&&t[h]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function y_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ag(t){if(!v_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!v_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function v_(t){return Object.prototype.toString.call(t)==="[object Object]"}function NO(t){return new Promise(e=>{setTimeout(e,t)})}function AO(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?DT(t,e):e}function kO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function RO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Sv=Symbol();function jT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Sv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Yi,$s,ya,Jb,PO=(Jb=class extends vf{constructor(){super();je(this,Yi);je(this,$s);je(this,ya);Ee(this,ya,e=>{if(!wf&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,$s)||this.setEventListener(K(this,ya))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,$s))==null||e.call(this),Ee(this,$s,void 0))}setEventListener(e){var n;Ee(this,ya,e),(n=K(this,$s))==null||n.call(this),Ee(this,$s,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,Yi)!==e&&(Ee(this,Yi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,Yi)=="boolean"?K(this,Yi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Yi=new WeakMap,$s=new WeakMap,ya=new WeakMap,Jb),OT=new PO,va,Bs,wa,Zb,DO=(Zb=class extends vf{constructor(){super();je(this,va,!0);je(this,Bs);je(this,wa);Ee(this,wa,e=>{if(!wf&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,Bs)||this.setEventListener(K(this,wa))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,Bs))==null||e.call(this),Ee(this,Bs,void 0))}setEventListener(e){var n;Ee(this,wa,e),(n=K(this,Bs))==null||n.call(this),Ee(this,Bs,e(this.setOnline.bind(this)))}setOnline(e){K(this,va)!==e&&(Ee(this,va,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,va)}},va=new WeakMap,Bs=new WeakMap,wa=new WeakMap,Zb),gh=new DO;function jO(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function OO(t){return Math.min(1e3*2**t,3e4)}function MT(t){return(t??"online")==="online"?gh.isOnline():!0}var LT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function rm(t){return t instanceof LT}function VT(t){let e=!1,n=0,r=!1,s;const i=jO(),o=v=>{var b;r||(m(new LT(v)),(b=t.abort)==null||b.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>OT.isFocused()&&(t.networkMode==="always"||gh.isOnline())&&t.canRun(),h=()=>MT(t.networkMode)&&t.canRun(),f=v=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,v),s==null||s(),i.resolve(v))},m=v=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,v),s==null||s(),i.reject(v))},y=()=>new Promise(v=>{var b;s=E=>{(r||u())&&v(E)},(b=t.onPause)==null||b.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),x=()=>{if(r)return;let v;const b=n===0?t.initialPromise:void 0;try{v=b??t.fn()}catch(E){v=Promise.reject(E)}Promise.resolve(v).then(f).catch(E=>{var O;if(r)return;const w=t.retry??(wf?0:3),S=t.retryDelay??OO,k=typeof S=="function"?S(n,E):S,D=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,E);if(e||!D){m(E);return}n++,(O=t.onFail)==null||O.call(t,n,E),NO(k).then(()=>u()?void 0:y()).then(()=>{e?m(E):x()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:l,canStart:h,start:()=>(h()?x():y().then(x),i)}}function MO(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=a=>setTimeout(a,0);const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Xt=MO(),Ji,eE,FT=(eE=class{constructor(){je(this,Ji)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),TO(this.gcTime)&&Ee(this,Ji,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(wf?1/0:5*60*1e3))}clearGcTimeout(){K(this,Ji)&&(clearTimeout(K(this,Ji)),Ee(this,Ji,void 0))}},Ji=new WeakMap,eE),xa,_a,On,Ut,qc,Zi,Zn,Gr,tE,LO=(tE=class extends FT{constructor(n){super();je(this,Zn);je(this,xa);je(this,_a);je(this,On);je(this,Ut);je(this,qc);je(this,Zi);Ee(this,Zi,!1),Ee(this,qc,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ee(this,On,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ee(this,xa,FO(this.options)),this.state=n.state??K(this,xa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,Ut))==null?void 0:n.promise}setOptions(n){this.options={...K(this,qc),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,On).remove(this)}setData(n,r){const s=AO(this.state.data,n,this.options);return Mt(this,Zn,Gr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Mt(this,Zn,Gr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=K(this,Ut))==null?void 0:s.promise;return(i=K(this,Ut))==null||i.cancel(n),r?r.then(Jn).catch(Jn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,xa))}isActive(){return this.observers.some(n=>IO(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!CO(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Ut))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,Ut))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,On).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,Ut)&&(K(this,Zi)?K(this,Ut).cancel({revert:!0}):K(this,Ut).cancelRetry()),this.scheduleGc()),K(this,On).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Mt(this,Zn,Gr).call(this,{type:"invalidate"})}fetch(n,r){var u,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,Ut))return K(this,Ut).continueRetry(),K(this,Ut).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(Ee(this,Zi,!0),s.signal)})},o=()=>{const m=jT(this.options,r),y={queryKey:this.queryKey,meta:this.meta};return i(y),Ee(this,Zi,!1),this.options.persister?this.options.persister(m,y,this):m(y)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(a),(u=this.options.behavior)==null||u.onFetch(a,this),Ee(this,_a,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&Mt(this,Zn,Gr).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=m=>{var y,x,v,b;rm(m)&&m.silent||Mt(this,Zn,Gr).call(this,{type:"error",error:m}),rm(m)||((x=(y=K(this,On).config).onError)==null||x.call(y,m,this),(b=(v=K(this,On).config).onSettled)==null||b.call(v,this.state.data,m,this)),this.scheduleGc()};return Ee(this,Ut,VT({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var y,x,v,b;if(m===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(E){l(E);return}(x=(y=K(this,On).config).onSuccess)==null||x.call(y,m,this),(b=(v=K(this,On).config).onSettled)==null||b.call(v,m,this.state.error,this),this.scheduleGc()},onError:l,onFail:(m,y)=>{Mt(this,Zn,Gr).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{Mt(this,Zn,Gr).call(this,{type:"pause"})},onContinue:()=>{Mt(this,Zn,Gr).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),K(this,Ut).start()}},xa=new WeakMap,_a=new WeakMap,On=new WeakMap,Ut=new WeakMap,qc=new WeakMap,Zi=new WeakMap,Zn=new WeakSet,Gr=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...VO(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return rm(i)&&i.revert&&K(this,_a)?{...K(this,_a),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Xt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,On).notify({query:this,type:"updated",action:n})})},tE);function VO(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:MT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function FO(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Cr,nE,UO=(nE=class extends vf{constructor(e={}){super();je(this,Cr);this.config=e,Ee(this,Cr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Ev(s,n);let o=this.get(i);return o||(o=new LO({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,Cr).has(e.queryHash)||(K(this,Cr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,Cr).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,Cr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Xt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,Cr).get(e)}getAll(){return[...K(this,Cr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>m_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>m_(e,r)):n}notify(e){Xt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Xt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Xt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Cr=new WeakMap,nE),Ir,Kt,eo,Nr,Ps,rE,zO=(rE=class extends FT{constructor(n){super();je(this,Nr);je(this,Ir);je(this,Kt);je(this,eo);this.mutationId=n.mutationId,Ee(this,Kt,n.mutationCache),Ee(this,Ir,[]),this.state=n.state||$O(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,Ir).includes(n)||(K(this,Ir).push(n),this.clearGcTimeout(),K(this,Kt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ee(this,Ir,K(this,Ir).filter(r=>r!==n)),this.scheduleGc(),K(this,Kt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,Ir).length||(this.state.status==="pending"?this.scheduleGc():K(this,Kt).remove(this))}continue(){var n;return((n=K(this,eo))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,a,l,u,h,f,m,y,x,v,b,E,w,S,k,D,O,T,C;Ee(this,eo,VT({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(I,A)=>{Mt(this,Nr,Ps).call(this,{type:"failed",failureCount:I,error:A})},onPause:()=>{Mt(this,Nr,Ps).call(this,{type:"pause"})},onContinue:()=>{Mt(this,Nr,Ps).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,Kt).canRun(this)}));const r=this.state.status==="pending",s=!K(this,eo).canStart();try{if(!r){Mt(this,Nr,Ps).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=K(this,Kt).config).onMutate)==null?void 0:o.call(i,n,this));const A=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,n));A!==this.state.context&&Mt(this,Nr,Ps).call(this,{type:"pending",context:A,variables:n,isPaused:s})}const I=await K(this,eo).start();return await((h=(u=K(this,Kt).config).onSuccess)==null?void 0:h.call(u,I,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,I,n,this.state.context)),await((x=(y=K(this,Kt).config).onSettled)==null?void 0:x.call(y,I,null,this.state.variables,this.state.context,this)),await((b=(v=this.options).onSettled)==null?void 0:b.call(v,I,null,n,this.state.context)),Mt(this,Nr,Ps).call(this,{type:"success",data:I}),I}catch(I){try{throw await((w=(E=K(this,Kt).config).onError)==null?void 0:w.call(E,I,n,this.state.context,this)),await((k=(S=this.options).onError)==null?void 0:k.call(S,I,n,this.state.context)),await((O=(D=K(this,Kt).config).onSettled)==null?void 0:O.call(D,void 0,I,this.state.variables,this.state.context,this)),await((C=(T=this.options).onSettled)==null?void 0:C.call(T,void 0,I,n,this.state.context)),I}finally{Mt(this,Nr,Ps).call(this,{type:"error",error:I})}}finally{K(this,Kt).runNext(this)}}},Ir=new WeakMap,Kt=new WeakMap,eo=new WeakMap,Nr=new WeakSet,Ps=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Xt.batch(()=>{K(this,Ir).forEach(s=>{s.onMutationUpdate(n)}),K(this,Kt).notify({mutation:this,type:"updated",action:n})})},rE);function $O(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _n,Gc,sE,BO=(sE=class extends vf{constructor(e={}){super();je(this,_n);je(this,Gc);this.config=e,Ee(this,_n,new Map),Ee(this,Gc,Date.now())}build(e,n,r){const s=new zO({mutationCache:this,mutationId:++Mu(this,Gc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=ed(e),r=K(this,_n).get(n)??[];r.push(e),K(this,_n).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=ed(e);if(K(this,_n).has(n)){const s=(r=K(this,_n).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?K(this,_n).delete(n):K(this,_n).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=K(this,_n).get(ed(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=K(this,_n).get(ed(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Xt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...K(this,_n).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>g_(n,r))}findAll(e={}){return this.getAll().filter(n=>g_(e,n))}notify(e){Xt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Xt.batch(()=>Promise.all(e.map(n=>n.continue().catch(Jn))))}},_n=new WeakMap,Gc=new WeakMap,sE);function ed(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function w_(t){return{onFetch:(e,n)=>{var h,f,m,y,x;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((x=e.state.data)==null?void 0:x.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const b=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},E=jT(e.options,e.fetchOptions),w=async(S,k,D)=>{if(v)return Promise.reject();if(k==null&&S.pages.length)return Promise.resolve(S);const O={queryKey:e.queryKey,pageParam:k,direction:D?"backward":"forward",meta:e.options.meta};b(O);const T=await E(O),{maxPages:C}=e.options,I=D?RO:kO;return{pages:I(S.pages,T,C),pageParams:I(S.pageParams,k,C)}};if(s&&i.length){const S=s==="backward",k=S?HO:x_,D={pages:i,pageParams:o},O=k(r,D);a=await w(D,O,S)}else{const S=t??i.length;do{const k=l===0?o[0]??r.initialPageParam:x_(r,a);if(l>0&&k==null)break;a=await w(a,k),l++}while(l<S)}return a};e.options.persister?e.fetchFn=()=>{var v,b;return(b=(v=e.options).persister)==null?void 0:b.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function x_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function HO(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var tt,Hs,Ws,ba,Ea,qs,Sa,Ta,iE,WO=(iE=class{constructor(t={}){je(this,tt);je(this,Hs);je(this,Ws);je(this,ba);je(this,Ea);je(this,qs);je(this,Sa);je(this,Ta);Ee(this,tt,t.queryCache||new UO),Ee(this,Hs,t.mutationCache||new BO),Ee(this,Ws,t.defaultOptions||{}),Ee(this,ba,new Map),Ee(this,Ea,new Map),Ee(this,qs,0)}mount(){Mu(this,qs)._++,K(this,qs)===1&&(Ee(this,Sa,OT.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,tt).onFocus())})),Ee(this,Ta,gh.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,tt).onOnline())})))}unmount(){var t,e;Mu(this,qs)._--,K(this,qs)===0&&((t=K(this,Sa))==null||t.call(this),Ee(this,Sa,void 0),(e=K(this,Ta))==null||e.call(this),Ee(this,Ta,void 0))}isFetching(t){return K(this,tt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,Hs).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,tt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=K(this,tt).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(p_(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return K(this,tt).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,tt).get(r.queryHash),i=s==null?void 0:s.state.data,o=SO(e,i);if(o!==void 0)return K(this,tt).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Xt.batch(()=>K(this,tt).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,tt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,tt);Xt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,tt),r={type:"active",...t};return Xt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=Xt.batch(()=>K(this,tt).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Jn).catch(Jn)}invalidateQueries(t={},e={}){return Xt.batch(()=>{if(K(this,tt).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=Xt.batch(()=>K(this,tt).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Jn)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Jn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,tt).build(this,e);return n.isStaleByTime(p_(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Jn).catch(Jn)}fetchInfiniteQuery(t){return t.behavior=w_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Jn).catch(Jn)}ensureInfiniteQueryData(t){return t.behavior=w_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return gh.isOnline()?K(this,Hs).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,tt)}getMutationCache(){return K(this,Hs)}getDefaultOptions(){return K(this,Ws)}setDefaultOptions(t){Ee(this,Ws,t)}setQueryDefaults(t,e){K(this,ba).set(Nc(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,ba).values()];let n={};return e.forEach(r=>{Ac(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){K(this,Ea).set(Nc(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,Ea).values()];let n={};return e.forEach(r=>{Ac(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,Ws).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ev(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Sv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,Ws).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,tt).clear(),K(this,Hs).clear()}},tt=new WeakMap,Hs=new WeakMap,Ws=new WeakMap,ba=new WeakMap,Ea=new WeakMap,qs=new WeakMap,Sa=new WeakMap,Ta=new WeakMap,iE),qO=p.createContext(void 0),GO=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(qO.Provider,{value:t,children:e}));async function KO(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const QO=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await KO(n),await n.json())},XO=new WO({defaultOptions:{queries:{queryFn:QO({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),YO=1,JO=1e6;let sm=0;function ZO(){return sm=(sm+1)%Number.MAX_SAFE_INTEGER,sm.toString()}const im=new Map,__=t=>{if(im.has(t))return;const e=setTimeout(()=>{im.delete(t),Zl({type:"REMOVE_TOAST",toastId:t})},JO);im.set(t,e)},eM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,YO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?__(n):t.toasts.forEach(r=>{__(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Rd=[];let Pd={toasts:[]};function Zl(t){Pd=eM(Pd,t),Rd.forEach(e=>{e(Pd)})}function tM({...t}){const e=ZO(),n=s=>Zl({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Zl({type:"DISMISS_TOAST",toastId:e});return Zl({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function eu(){const[t,e]=p.useState(Pd);return p.useEffect(()=>(Rd.push(e),()=>{const n=Rd.indexOf(e);n>-1&&Rd.splice(n,1)}),[t]),{...t,toast:tM,dismiss:n=>Zl({type:"DISMISS_TOAST",toastId:n})}}function de(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function b_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function UT(...t){return e=>{let n=!1;const r=t.map(s=>{const i=b_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():b_(t[s],null)}}}}function Le(...t){return p.useCallback(UT(...t),t)}function nM(t,e){const n=p.createContext(e),r=i=>{const{children:o,...a}=i,l=p.useMemo(()=>a,Object.values(a));return c.jsx(n.Provider,{value:l,children:o})};r.displayName=t+"Provider";function s(i){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function qn(t,e=[]){let n=[];function r(i,o){const a=p.createContext(o),l=n.length;n=[...n,o];const u=f=>{var E;const{scope:m,children:y,...x}=f,v=((E=m==null?void 0:m[t])==null?void 0:E[l])||a,b=p.useMemo(()=>x,Object.values(x));return c.jsx(v.Provider,{value:b,children:y})};u.displayName=i+"Provider";function h(f,m){var v;const y=((v=m==null?void 0:m[t])==null?void 0:v[l])||a,x=p.useContext(y);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(a){const l=(a==null?void 0:a[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return s.scopeName=t,[r,rM(s,...e)]}function rM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(i)[`__scope${u}`];return{...a,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ja(t){const e=iM(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,a=p.Children.toArray(i),l=a.find(oM);if(l){const u=l.props.children,h=a.map(f=>f===l?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return c.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return c.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var sM=ja("Slot");function iM(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const o=lM(s),a=aM(i,s.props);return s.type!==p.Fragment&&(a.ref=r?UT(r,o):o),p.cloneElement(s,a)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var zT=Symbol("radix.slottable");function $T(t){const e=({children:n})=>c.jsx(c.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=zT,e}function oM(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===zT}function aM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...a)=>{i(...a),s(...a)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function lM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Tv(t){const e=t+"CollectionProvider",[n,r]=qn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:b,children:E}=v,w=Se.useRef(null),S=Se.useRef(new Map).current;return c.jsx(s,{scope:b,itemMap:S,collectionRef:w,children:E})};o.displayName=e;const a=t+"CollectionSlot",l=ja(a),u=Se.forwardRef((v,b)=>{const{scope:E,children:w}=v,S=i(a,E),k=Le(b,S.collectionRef);return c.jsx(l,{ref:k,children:w})});u.displayName=a;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=ja(h),y=Se.forwardRef((v,b)=>{const{scope:E,children:w,...S}=v,k=Se.useRef(null),D=Le(b,k),O=i(h,E);return Se.useEffect(()=>(O.itemMap.set(k,{ref:k,...S}),()=>void O.itemMap.delete(k))),c.jsx(m,{[f]:"",ref:D,children:w})});y.displayName=h;function x(v){const b=i(t+"CollectionConsumer",v);return Se.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((O,T)=>S.indexOf(O.ref.current)-S.indexOf(T.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:y},x,r]}var cM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ye=cM.reduce((t,e)=>{const n=ja(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...a}=s,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...a,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function BT(t,e){t&&zn.flushSync(()=>t.dispatchEvent(e))}function Zt(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function uM(t,e=globalThis==null?void 0:globalThis.document){const n=Zt(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var dM="DismissableLayer",kg="dismissableLayer.update",hM="dismissableLayer.pointerDownOutside",fM="dismissableLayer.focusOutside",E_,HT=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tu=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=t,u=p.useContext(HT),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=p.useState({}),x=Le(e,T=>f(T)),v=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(b),w=h?v.indexOf(h):-1,S=u.layersWithOutsidePointerEventsDisabled.size>0,k=w>=E,D=mM(T=>{const C=T.target,I=[...u.branches].some(A=>A.contains(C));!k||I||(s==null||s(T),o==null||o(T),T.defaultPrevented||a==null||a())},m),O=gM(T=>{const C=T.target;[...u.branches].some(A=>A.contains(C))||(i==null||i(T),o==null||o(T),T.defaultPrevented||a==null||a())},m);return uM(T=>{w===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&a&&(T.preventDefault(),a()))},m),p.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(E_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),S_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=E_)}},[h,m,n,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),S_())},[h,u]),p.useEffect(()=>{const T=()=>y({});return document.addEventListener(kg,T),()=>document.removeEventListener(kg,T)},[]),c.jsx(ye.div,{...l,ref:x,style:{pointerEvents:S?k?"auto":"none":void 0,...t.style},onFocusCapture:de(t.onFocusCapture,O.onFocusCapture),onBlurCapture:de(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:de(t.onPointerDownCapture,D.onPointerDownCapture)})});tu.displayName=dM;var pM="DismissableLayerBranch",WT=p.forwardRef((t,e)=>{const n=p.useContext(HT),r=p.useRef(null),s=Le(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),c.jsx(ye.div,{...t,ref:s})});WT.displayName=pM;function mM(t,e=globalThis==null?void 0:globalThis.document){const n=Zt(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=a=>{if(a.target&&!r.current){let l=function(){qT(hM,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function gM(t,e=globalThis==null?void 0:globalThis.document){const n=Zt(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&qT(fM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function S_(){const t=new CustomEvent(kg);document.dispatchEvent(t)}function qT(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?BT(s,i):s.dispatchEvent(i)}var yM=tu,vM=WT,_t=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},wM="Portal",xf=p.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[s,i]=p.useState(!1);_t(()=>i(!0),[]);const o=n||s&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?Kj.createPortal(c.jsx(ye.div,{...r,ref:e}),o):null});xf.displayName=wM;function xM(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var So=t=>{const{present:e,children:n}=t,r=_M(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Le(r.ref,bM(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};So.displayName="Presence";function _M(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[a,l]=xM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=td(r.current);i.current=a==="mounted"?u:"none"},[a]),_t(()=>{const u=r.current,h=s.current;if(h!==t){const m=i.current,y=td(u);t?l("MOUNT"):y==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,l]),_t(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=y=>{const v=td(r.current).includes(y.animationName);if(y.target===e&&v&&(l("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},m=y=>{y.target===e&&(i.current=td(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:p.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function td(t){return(t==null?void 0:t.animationName)||"none"}function bM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function hi({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=EM({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,a=Zt(n),l=p.useCallback(u=>{if(i){const f=typeof u=="function"?u(t):u;f!==t&&a(f)}else s(u)},[i,t,s,a]);return[o,l]}function EM({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),i=Zt(e);return p.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var SM="VisuallyHidden",nu=p.forwardRef((t,e)=>c.jsx(ye.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));nu.displayName=SM;var TM=nu,Cv="ToastProvider",[Iv,CM,IM]=Tv("Toast"),[GT,qH]=qn("Toast",[IM]),[NM,_f]=GT(Cv),KT=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[a,l]=p.useState(null),[u,h]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cv}\`. Expected non-empty \`string\`.`),c.jsx(Iv.Provider,{scope:e,children:c.jsx(NM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:p.useCallback(()=>h(y=>y+1),[]),onToastRemove:p.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};KT.displayName=Cv;var QT="ToastViewport",AM=["F8"],Rg="toast.viewportPause",Pg="toast.viewportResume",XT=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=AM,label:s="Notifications ({hotkey})",...i}=t,o=_f(QT,n),a=CM(n),l=p.useRef(null),u=p.useRef(null),h=p.useRef(null),f=p.useRef(null),m=Le(e,f,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;p.useEffect(()=>{const b=E=>{var S;r.length!==0&&r.every(k=>E[k]||E.code===k)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),p.useEffect(()=>{const b=l.current,E=f.current;if(x&&b&&E){const w=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(Rg);E.dispatchEvent(O),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent(Pg);E.dispatchEvent(O),o.isClosePausedRef.current=!1}},k=O=>{!b.contains(O.relatedTarget)&&S()},D=()=>{b.contains(document.activeElement)||S()};return b.addEventListener("focusin",w),b.addEventListener("focusout",k),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",D),window.addEventListener("blur",w),window.addEventListener("focus",S),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",k),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",D),window.removeEventListener("blur",w),window.removeEventListener("focus",S)}}},[x,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:b})=>{const w=a().map(S=>{const k=S.ref.current,D=[k,...$M(k)];return b==="forwards"?D:D.reverse()});return(b==="forwards"?w.reverse():w).flat()},[a]);return p.useEffect(()=>{const b=f.current;if(b){const E=w=>{var D,O,T;const S=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!S){const C=document.activeElement,I=w.shiftKey;if(w.target===b&&I){(D=u.current)==null||D.focus();return}const j=v({tabbingDirection:I?"backwards":"forwards"}),R=j.findIndex($=>$===C);om(j.slice(R+1))?w.preventDefault():I?(O=u.current)==null||O.focus():(T=h.current)==null||T.focus()}};return b.addEventListener("keydown",E),()=>b.removeEventListener("keydown",E)}},[a,v]),c.jsxs(vM,{ref:l,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&c.jsx(Dg,{ref:u,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"forwards"});om(b)}}),c.jsx(Iv.Slot,{scope:n,children:c.jsx(ye.ol,{tabIndex:-1,...i,ref:m})}),x&&c.jsx(Dg,{ref:h,onFocusFromOutsideViewport:()=>{const b=v({tabbingDirection:"backwards"});om(b)}})]})});XT.displayName=QT;var YT="ToastFocusProxy",Dg=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=_f(YT,n);return c.jsx(nu,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&r()}})});Dg.displayName=YT;var bf="Toast",kM="toast.swipeStart",RM="toast.swipeMove",PM="toast.swipeCancel",DM="toast.swipeEnd",JT=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[a=!0,l]=hi({prop:r,defaultProp:s,onChange:i});return c.jsx(So,{present:n||a,children:c.jsx(MM,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:Zt(t.onPause),onResume:Zt(t.onResume),onSwipeStart:de(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:de(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:de(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:de(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});JT.displayName=bf;var[jM,OM]=GT(bf,{onClose(){}}),MM=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:y,...x}=t,v=_f(bf,n),[b,E]=p.useState(null),w=Le(e,$=>E($)),S=p.useRef(null),k=p.useRef(null),D=s||v.duration,O=p.useRef(0),T=p.useRef(D),C=p.useRef(0),{onToastAdd:I,onToastRemove:A}=v,P=Zt(()=>{var re;(b==null?void 0:b.contains(document.activeElement))&&((re=v.viewport)==null||re.focus()),o()}),j=p.useCallback($=>{!$||$===1/0||(window.clearTimeout(C.current),O.current=new Date().getTime(),C.current=window.setTimeout(P,$))},[P]);p.useEffect(()=>{const $=v.viewport;if($){const re=()=>{j(T.current),u==null||u()},z=()=>{const W=new Date().getTime()-O.current;T.current=T.current-W,window.clearTimeout(C.current),l==null||l()};return $.addEventListener(Rg,z),$.addEventListener(Pg,re),()=>{$.removeEventListener(Rg,z),$.removeEventListener(Pg,re)}}},[v.viewport,D,l,u,j]),p.useEffect(()=>{i&&!v.isClosePausedRef.current&&j(D)},[i,D,v.isClosePausedRef,j]),p.useEffect(()=>(I(),()=>A()),[I,A]);const R=p.useMemo(()=>b?iC(b):null,[b]);return v.viewport?c.jsxs(c.Fragment,{children:[R&&c.jsx(LM,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),c.jsx(jM,{scope:n,onClose:P,children:zn.createPortal(c.jsx(Iv.ItemSlot,{scope:n,children:c.jsx(yM,{asChild:!0,onEscapeKeyDown:de(a,()=>{v.isFocusedToastEscapeKeyDownRef.current||P(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:c.jsx(ye.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...x,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:de(t.onKeyDown,$=>{$.key==="Escape"&&(a==null||a($.nativeEvent),$.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:de(t.onPointerDown,$=>{$.button===0&&(S.current={x:$.clientX,y:$.clientY})}),onPointerMove:de(t.onPointerMove,$=>{if(!S.current)return;const re=$.clientX-S.current.x,z=$.clientY-S.current.y,W=!!k.current,M=["left","right"].includes(v.swipeDirection),L=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,F=M?L(0,re):0,B=M?0:L(0,z),G=$.pointerType==="touch"?10:2,X={x:F,y:B},J={originalEvent:$,delta:X};W?(k.current=X,nd(RM,f,J,{discrete:!1})):T_(X,v.swipeDirection,G)?(k.current=X,nd(kM,h,J,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(re)>G||Math.abs(z)>G)&&(S.current=null)}),onPointerUp:de(t.onPointerUp,$=>{const re=k.current,z=$.target;if(z.hasPointerCapture($.pointerId)&&z.releasePointerCapture($.pointerId),k.current=null,S.current=null,re){const W=$.currentTarget,M={originalEvent:$,delta:re};T_(re,v.swipeDirection,v.swipeThreshold)?nd(DM,y,M,{discrete:!0}):nd(PM,m,M,{discrete:!0}),W.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),LM=t=>{const{__scopeToast:e,children:n,...r}=t,s=_f(bf,e),[i,o]=p.useState(!1),[a,l]=p.useState(!1);return UM(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:c.jsx(xf,{asChild:!0,children:c.jsx(nu,{...r,children:i&&c.jsxs(c.Fragment,{children:[s.label," ",n]})})})},VM="ToastTitle",ZT=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(ye.div,{...r,ref:e})});ZT.displayName=VM;var FM="ToastDescription",eC=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return c.jsx(ye.div,{...r,ref:e})});eC.displayName=FM;var tC="ToastAction",nC=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?c.jsx(sC,{altText:n,asChild:!0,children:c.jsx(Nv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${tC}\`. Expected non-empty \`string\`.`),null)});nC.displayName=tC;var rC="ToastClose",Nv=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=OM(rC,n);return c.jsx(sC,{asChild:!0,children:c.jsx(ye.button,{type:"button",...r,ref:e,onClick:de(t.onClick,s.onClose)})})});Nv.displayName=rC;var sC=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return c.jsx(ye.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function iC(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),zM(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...iC(r))}}),e}function nd(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?BT(s,i):s.dispatchEvent(i)}var T_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function UM(t=()=>{}){const e=Zt(t);_t(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function zM(t){return t.nodeType===t.ELEMENT_NODE}function $M(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function om(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var BM=KT,oC=XT,aC=JT,lC=ZT,cC=eC,uC=nC,dC=Nv;function hC(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=hC(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function fC(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=hC(t))&&(r&&(r+=" "),r+=e);return r}const C_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,I_=fC,ru=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return I_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const m=C_(h)||C_(f);return s[u][m]}),a=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...y}=h;return Object.entries(y).every(x=>{let[v,b]=x;return Array.isArray(b)?b.includes({...i,...a}[v]):{...i,...a}[v]===b})?[...u,f,m]:u},[]);return I_(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pC=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...a},l)=>p.createElement("svg",{ref:l,...WM,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:pC("lucide",s),...a},[...o.map(([u,h])=>p.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(t,e)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(qM,{ref:i,iconNode:e,className:pC(`lucide-${HM(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=ve("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=ve("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=ve("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=ve("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=ve("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=ve("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=ve("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=ve("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=ve("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=ve("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=ve("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=ve("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=ve("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=ve("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=ve("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ve("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=ve("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=ve("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=ve("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=ve("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=ve("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ve("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=ve("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d4=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=ve("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=ve("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=ve("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ve("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kv="-",m4=t=>{const e=y4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const a=o.split(kv);return a[0]===""&&a.length!==1&&a.shift(),SC(a,e)||g4(o)},getConflictingClassGroupIds:(o,a)=>{const l=n[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},SC=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?SC(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(kv);return(o=e.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},P_=/^\[(.+)\]$/,g4=t=>{if(P_.test(t)){const e=P_.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},y4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return w4(Object.entries(t.classGroups),n).forEach(([i,o])=>{Lg(o,r,i,e)}),r},Lg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:D_(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(v4(s)){Lg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Lg(o,D_(e,i),n,r)})})},D_=(t,e)=>{let n=t;return e.split(kv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},v4=t=>t.isThemeGetter,w4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[n,s]}):t,x4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},TC="!",_4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=a=>{const l=[];let u=0,h=0,f;for(let b=0;b<a.length;b++){let E=a[b];if(u===0){if(E===s&&(r||a.slice(b,b+i)===e)){l.push(a.slice(h,b)),h=b+i;continue}if(E==="/"){f=b;continue}}E==="["?u++:E==="]"&&u--}const m=l.length===0?a:a.substring(h),y=m.startsWith(TC),x=y?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:x,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:o}):o},b4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},E4=t=>({cache:x4(t.cacheSize),parseClassName:_4(t),...m4(t)}),S4=/\s+/,T4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(S4);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=n(u);let x=!!y,v=r(x?m.substring(0,y):m);if(!v){if(!x){a=u+(a.length>0?" "+a:a);continue}if(v=r(m),!v){a=u+(a.length>0?" "+a:a);continue}x=!1}const b=b4(h).join(":"),E=f?b+TC:b,w=E+v;if(i.includes(w))continue;i.push(w);const S=s(v,x);for(let k=0;k<S.length;++k){const D=S[k];i.push(E+D)}a=u+(a.length>0?" "+a:a)}return a};function C4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=CC(e))&&(r&&(r+=" "),r+=n);return r}const CC=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=CC(t[r]))&&(n&&(n+=" "),n+=e);return n};function I4(t,...e){let n,r,s,i=o;function o(l){const u=e.reduce((h,f)=>f(h),t());return n=E4(u),r=n.cache.get,s=n.cache.set,i=a,a(l)}function a(l){const u=r(l);if(u)return u;const h=T4(l,n);return s(l,h),h}return function(){return i(C4.apply(null,arguments))}}const We=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},IC=/^\[(?:([a-z-]+):)?(.+)\]$/i,N4=/^\d+\/\d+$/,A4=new Set(["px","full","screen"]),k4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,R4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,P4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,D4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,j4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qr=t=>la(t)||A4.has(t)||N4.test(t),As=t=>Ya(t,"length",$4),la=t=>!!t&&!Number.isNaN(Number(t)),am=t=>Ya(t,"number",la),jl=t=>!!t&&Number.isInteger(Number(t)),O4=t=>t.endsWith("%")&&la(t.slice(0,-1)),_e=t=>IC.test(t),ks=t=>k4.test(t),M4=new Set(["length","size","percentage"]),L4=t=>Ya(t,M4,NC),V4=t=>Ya(t,"position",NC),F4=new Set(["image","url"]),U4=t=>Ya(t,F4,H4),z4=t=>Ya(t,"",B4),Ol=()=>!0,Ya=(t,e,n)=>{const r=IC.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},$4=t=>R4.test(t)&&!P4.test(t),NC=()=>!1,B4=t=>D4.test(t),H4=t=>j4.test(t),W4=()=>{const t=We("colors"),e=We("spacing"),n=We("blur"),r=We("brightness"),s=We("borderColor"),i=We("borderRadius"),o=We("borderSpacing"),a=We("borderWidth"),l=We("contrast"),u=We("grayscale"),h=We("hueRotate"),f=We("invert"),m=We("gap"),y=We("gradientColorStops"),x=We("gradientColorStopPositions"),v=We("inset"),b=We("margin"),E=We("opacity"),w=We("padding"),S=We("saturate"),k=We("scale"),D=We("sepia"),O=We("skew"),T=We("space"),C=We("translate"),I=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",_e,e],j=()=>[_e,e],R=()=>["",qr,As],$=()=>["auto",la,_e],re=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],W=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],M=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",_e],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[la,_e];return{cacheSize:500,separator:":",theme:{colors:[Ol],spacing:[qr,As],blur:["none","",ks,_e],brightness:B(),borderColor:[t],borderRadius:["none","","full",ks,_e],borderSpacing:j(),borderWidth:R(),contrast:B(),grayscale:L(),hueRotate:B(),invert:L(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[O4,As],inset:P(),margin:P(),opacity:B(),padding:j(),saturate:B(),scale:B(),sepia:L(),skew:B(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",_e]}],container:["container"],columns:[{columns:[ks]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...re(),_e]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",jl,_e]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_e]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",jl,_e]}],"grid-cols":[{"grid-cols":[Ol]}],"col-start-end":[{col:["auto",{span:["full",jl,_e]},_e]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[Ol]}],"row-start-end":[{row:["auto",{span:[jl,_e]},_e]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_e]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_e]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...M()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...M(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...M(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_e,e]}],"min-w":[{"min-w":[_e,e,"min","max","fit"]}],"max-w":[{"max-w":[_e,e,"none","full","min","max","fit","prose",{screen:[ks]},ks]}],h:[{h:[_e,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_e,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_e,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ks,As]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",am]}],"font-family":[{font:[Ol]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_e]}],"line-clamp":[{"line-clamp":["none",la,am]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",qr,_e]}],"list-image":[{"list-image":["none",_e]}],"list-style-type":[{list:["none","disc","decimal",_e]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",qr,As]}],"underline-offset":[{"underline-offset":["auto",qr,_e]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_e]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_e]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...re(),V4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",L4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},U4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:z()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[qr,_e]}],"outline-w":[{outline:[qr,As]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[qr,As]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ks,z4]}],"shadow-color":[{shadow:[Ol]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...W(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":W()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ks,_e]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_e]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",_e]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",_e]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[jl,_e]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_e]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_e]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_e]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[qr,As,am]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},q4=I4(W4);function Z(...t){return q4(fC(t))}const G4=BM,AC=p.forwardRef(({className:t,...e},n)=>c.jsx(oC,{ref:n,className:Z("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));AC.displayName=oC.displayName;const K4=ru("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),kC=p.forwardRef(({className:t,variant:e,...n},r)=>c.jsx(aC,{ref:r,className:Z(K4({variant:e}),t),...n}));kC.displayName=aC.displayName;const Q4=p.forwardRef(({className:t,...e},n)=>c.jsx(uC,{ref:n,className:Z("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));Q4.displayName=uC.displayName;const RC=p.forwardRef(({className:t,...e},n)=>c.jsx(dC,{ref:n,className:Z("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:c.jsx(su,{className:"h-4 w-4"})}));RC.displayName=dC.displayName;const PC=p.forwardRef(({className:t,...e},n)=>c.jsx(lC,{ref:n,className:Z("text-sm font-semibold",t),...e}));PC.displayName=lC.displayName;const DC=p.forwardRef(({className:t,...e},n)=>c.jsx(cC,{ref:n,className:Z("text-sm opacity-90",t),...e}));DC.displayName=cC.displayName;function X4(){const{toasts:t}=eu();return c.jsxs(G4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return c.jsxs(kC,{...i,children:[c.jsxs("div",{className:"grid gap-1",children:[n&&c.jsx(PC,{children:n}),r&&c.jsx(DC,{children:r})]}),s,c.jsx(RC,{})]},e)}),c.jsx(AC,{})]})}var Y4=yE[" useId ".trim().toString()]||(()=>{}),J4=0;function ns(t){const[e,n]=p.useState(Y4());return _t(()=>{n(r=>r??String(J4++))},[t]),e?`radix-${e}`:""}const Z4=["top","right","bottom","left"],fi=Math.min,En=Math.max,yh=Math.round,rd=Math.floor,jr=t=>({x:t,y:t}),eL={left:"right",right:"left",bottom:"top",top:"bottom"},tL={start:"end",end:"start"};function Vg(t,e,n){return En(t,fi(e,n))}function ds(t,e){return typeof t=="function"?t(e):t}function hs(t){return t.split("-")[0]}function Ja(t){return t.split("-")[1]}function Rv(t){return t==="x"?"y":"x"}function Pv(t){return t==="y"?"height":"width"}function pi(t){return["top","bottom"].includes(hs(t))?"y":"x"}function Dv(t){return Rv(pi(t))}function nL(t,e,n){n===void 0&&(n=!1);const r=Ja(t),s=Dv(t),i=Pv(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=vh(o)),[o,vh(o)]}function rL(t){const e=vh(t);return[Fg(t),e,Fg(e)]}function Fg(t){return t.replace(/start|end/g,e=>tL[e])}function sL(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function iL(t,e,n,r){const s=Ja(t);let i=sL(hs(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Fg)))),i}function vh(t){return t.replace(/left|right|bottom|top/g,e=>eL[e])}function oL(t){return{top:0,right:0,bottom:0,left:0,...t}}function jC(t){return typeof t!="number"?oL(t):{top:t,right:t,bottom:t,left:t}}function wh(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function j_(t,e,n){let{reference:r,floating:s}=t;const i=pi(e),o=Dv(e),a=Pv(o),l=hs(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[a]/2-s[a]/2;let y;switch(l){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(Ja(e)){case"start":y[o]-=m*(n&&u?-1:1);break;case"end":y[o]+=m*(n&&u?-1:1);break}return y}const aL=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,a=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=j_(u,r,l),m=r,y={},x=0;for(let v=0;v<a.length;v++){const{name:b,fn:E}=a[v],{x:w,y:S,data:k,reset:D}=await E({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:u,platform:o,elements:{reference:t,floating:e}});h=w??h,f=S??f,y={...y,[b]:{...y[b],...k}},D&&x<=50&&(x++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(u=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:h,y:f}=j_(u,m,l)),v=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:y}};async function Rc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:y=0}=ds(e,t),x=jC(y),b=a[m?f==="floating"?"reference":"floating":f],E=wh(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(b)))==null||n?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:l})),w=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),k=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},D=wh(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:l}):w);return{top:(E.top-D.top+x.top)/k.y,bottom:(D.bottom-E.bottom+x.bottom)/k.y,left:(E.left-D.left+x.left)/k.x,right:(D.right-E.right+x.right)/k.x}}const lL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:a,middlewareData:l}=e,{element:u,padding:h=0}=ds(t,e)||{};if(u==null)return{};const f=jC(h),m={x:n,y:r},y=Dv(s),x=Pv(y),v=await o.getDimensions(u),b=y==="y",E=b?"top":"left",w=b?"bottom":"right",S=b?"clientHeight":"clientWidth",k=i.reference[x]+i.reference[y]-m[y]-i.floating[x],D=m[y]-i.reference[y],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let T=O?O[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(O)))&&(T=a.floating[S]||i.floating[x]);const C=k/2-D/2,I=T/2-v[x]/2-1,A=fi(f[E],I),P=fi(f[w],I),j=A,R=T-v[x]-P,$=T/2-v[x]/2+C,re=Vg(j,$,R),z=!l.arrow&&Ja(s)!=null&&$!==re&&i.reference[x]/2-($<j?A:P)-v[x]/2<0,W=z?$<j?$-j:$-R:0;return{[y]:m[y]+W,data:{[y]:re,centerOffset:$-re-W,...z&&{alignmentOffset:W}},reset:z}}}),cL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:v=!0,...b}=ds(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=hs(s),w=pi(a),S=hs(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(u.floating)),D=m||(S||!v?[vh(a)]:rL(a)),O=x!=="none";!m&&O&&D.push(...iL(a,v,x,k));const T=[a,...D],C=await Rc(e,b),I=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&I.push(C[E]),f){const $=nL(s,o,k);I.push(C[$[0]],C[$[1]])}if(A=[...A,{placement:s,overflows:I}],!I.every($=>$<=0)){var P,j;const $=(((P=i.flip)==null?void 0:P.index)||0)+1,re=T[$];if(re)return{data:{index:$,overflows:A},reset:{placement:re}};let z=(j=A.filter(W=>W.overflows[0]<=0).sort((W,M)=>W.overflows[1]-M.overflows[1])[0])==null?void 0:j.placement;if(!z)switch(y){case"bestFit":{var R;const W=(R=A.filter(M=>{if(O){const L=pi(M.placement);return L===w||L==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(L=>L>0).reduce((L,F)=>L+F,0)]).sort((M,L)=>M[1]-L[1])[0])==null?void 0:R[0];W&&(z=W);break}case"initialPlacement":z=a;break}if(s!==z)return{reset:{placement:z}}}return{}}}};function O_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function M_(t){return Z4.some(e=>t[e]>=0)}const uL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ds(t,e);switch(r){case"referenceHidden":{const i=await Rc(e,{...s,elementContext:"reference"}),o=O_(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:M_(o)}}}case"escaped":{const i=await Rc(e,{...s,altBoundary:!0}),o=O_(i,n.floating);return{data:{escapedOffsets:o,escaped:M_(o)}}}default:return{}}}}};async function dL(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=hs(n),a=Ja(n),l=pi(n)==="y",u=["left","top"].includes(o)?-1:1,h=i&&l?-1:1,f=ds(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:x}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof x=="number"&&(y=a==="end"?x*-1:x),l?{x:y*h,y:m*u}:{x:m*u,y:y*h}}const hL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:a}=e,l=await dL(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:s+l.x,y:i+l.y,data:{...l,placement:o}}}}},fL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:a={fn:b=>{let{x:E,y:w}=b;return{x:E,y:w}}},...l}=ds(t,e),u={x:n,y:r},h=await Rc(e,l),f=pi(hs(s)),m=Rv(f);let y=u[m],x=u[f];if(i){const b=m==="y"?"top":"left",E=m==="y"?"bottom":"right",w=y+h[b],S=y-h[E];y=Vg(w,y,S)}if(o){const b=f==="y"?"top":"left",E=f==="y"?"bottom":"right",w=x+h[b],S=x-h[E];x=Vg(w,x,S)}const v=a.fn({...e,[m]:y,[f]:x});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[f]:o}}}}}},pL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=ds(t,e),h={x:n,y:r},f=pi(s),m=Rv(f);let y=h[m],x=h[f];const v=ds(a,e),b=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const S=m==="y"?"height":"width",k=i.reference[m]-i.floating[S]+b.mainAxis,D=i.reference[m]+i.reference[S]-b.mainAxis;y<k?y=k:y>D&&(y=D)}if(u){var E,w;const S=m==="y"?"width":"height",k=["top","left"].includes(hs(s)),D=i.reference[f]-i.floating[S]+(k&&((E=o.offset)==null?void 0:E[f])||0)+(k?0:b.crossAxis),O=i.reference[f]+i.reference[S]+(k?0:((w=o.offset)==null?void 0:w[f])||0)-(k?b.crossAxis:0);x<D?x=D:x>O&&(x=O)}return{[m]:y,[f]:x}}}},mL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:a}=e,{apply:l=()=>{},...u}=ds(t,e),h=await Rc(e,u),f=hs(s),m=Ja(s),y=pi(s)==="y",{width:x,height:v}=i.floating;let b,E;f==="top"||f==="bottom"?(b=f,E=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=f,b=m==="end"?"top":"bottom");const w=v-h.top-h.bottom,S=x-h.left-h.right,k=fi(v-h[b],w),D=fi(x-h[E],S),O=!e.middlewareData.shift;let T=k,C=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=w),O&&!m){const A=En(h.left,0),P=En(h.right,0),j=En(h.top,0),R=En(h.bottom,0);y?C=x-2*(A!==0||P!==0?A+P:En(h.left,h.right)):T=v-2*(j!==0||R!==0?j+R:En(h.top,h.bottom))}await l({...e,availableWidth:C,availableHeight:T});const I=await o.getDimensions(a.floating);return x!==I.width||v!==I.height?{reset:{rects:!0}}:{}}}};function Sf(){return typeof window<"u"}function Za(t){return OC(t)?(t.nodeName||"").toLowerCase():"#document"}function An(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function zr(t){var e;return(e=(OC(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function OC(t){return Sf()?t instanceof Node||t instanceof An(t).Node:!1}function hr(t){return Sf()?t instanceof Element||t instanceof An(t).Element:!1}function Vr(t){return Sf()?t instanceof HTMLElement||t instanceof An(t).HTMLElement:!1}function L_(t){return!Sf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof An(t).ShadowRoot}function iu(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=fr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function gL(t){return["table","td","th"].includes(Za(t))}function Tf(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function jv(t){const e=Ov(),n=hr(t)?fr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function yL(t){let e=mi(t);for(;Vr(e)&&!Ma(e);){if(jv(e))return e;if(Tf(e))return null;e=mi(e)}return null}function Ov(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ma(t){return["html","body","#document"].includes(Za(t))}function fr(t){return An(t).getComputedStyle(t)}function Cf(t){return hr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function mi(t){if(Za(t)==="html")return t;const e=t.assignedSlot||t.parentNode||L_(t)&&t.host||zr(t);return L_(e)?e.host:e}function MC(t){const e=mi(t);return Ma(e)?t.ownerDocument?t.ownerDocument.body:t.body:Vr(e)&&iu(e)?e:MC(e)}function Pc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=MC(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=An(s);if(i){const a=Ug(o);return e.concat(o,o.visualViewport||[],iu(s)?s:[],a&&n?Pc(a):[])}return e.concat(s,Pc(s,[],n))}function Ug(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function LC(t){const e=fr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Vr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,a=yh(n)!==i||yh(r)!==o;return a&&(n=i,r=o),{width:n,height:r,$:a}}function Mv(t){return hr(t)?t:t.contextElement}function ca(t){const e=Mv(t);if(!Vr(e))return jr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=LC(e);let o=(i?yh(n.width):n.width)/r,a=(i?yh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const vL=jr(0);function VC(t){const e=An(t);return!Ov()||!e.visualViewport?vL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function wL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==An(t)?!1:e}function fo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Mv(t);let o=jr(1);e&&(r?hr(r)&&(o=ca(r)):o=ca(t));const a=wL(i,n,r)?VC(i):jr(0);let l=(s.left+a.x)/o.x,u=(s.top+a.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=An(i),y=r&&hr(r)?An(r):r;let x=m,v=Ug(x);for(;v&&r&&y!==x;){const b=ca(v),E=v.getBoundingClientRect(),w=fr(v),S=E.left+(v.clientLeft+parseFloat(w.paddingLeft))*b.x,k=E.top+(v.clientTop+parseFloat(w.paddingTop))*b.y;l*=b.x,u*=b.y,h*=b.x,f*=b.y,l+=S,u+=k,x=An(v),v=Ug(x)}}return wh({width:h,height:f,x:l,y:u})}function Lv(t,e){const n=Cf(t).scrollLeft;return e?e.left+n:fo(zr(t)).left+n}function FC(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Lv(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function xL(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=zr(r),a=e?Tf(e.floating):!1;if(r===o||a&&i)return n;let l={scrollLeft:0,scrollTop:0},u=jr(1);const h=jr(0),f=Vr(r);if((f||!f&&!i)&&((Za(r)!=="body"||iu(o))&&(l=Cf(r)),Vr(r))){const y=fo(r);u=ca(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const m=o&&!f&&!i?FC(o,l,!0):jr(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-l.scrollTop*u.y+h.y+m.y}}function _L(t){return Array.from(t.getClientRects())}function bL(t){const e=zr(t),n=Cf(t),r=t.ownerDocument.body,s=En(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=En(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Lv(t);const a=-n.scrollTop;return fr(r).direction==="rtl"&&(o+=En(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:a}}function EL(t,e){const n=An(t),r=zr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;const u=Ov();(!u||u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a,y:l}}function SL(t,e){const n=fo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Vr(t)?ca(t):jr(1),o=t.clientWidth*i.x,a=t.clientHeight*i.y,l=s*i.x,u=r*i.y;return{width:o,height:a,x:l,y:u}}function V_(t,e,n){let r;if(e==="viewport")r=EL(t,n);else if(e==="document")r=bL(zr(t));else if(hr(e))r=SL(e,n);else{const s=VC(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return wh(r)}function UC(t,e){const n=mi(t);return n===e||!hr(n)||Ma(n)?!1:fr(n).position==="fixed"||UC(n,e)}function TL(t,e){const n=e.get(t);if(n)return n;let r=Pc(t,[],!1).filter(a=>hr(a)&&Za(a)!=="body"),s=null;const i=fr(t).position==="fixed";let o=i?mi(t):t;for(;hr(o)&&!Ma(o);){const a=fr(o),l=jv(o);!l&&a.position==="fixed"&&(s=null),(i?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||iu(o)&&!l&&UC(t,o))?r=r.filter(h=>h!==o):s=a,o=mi(o)}return e.set(t,r),r}function CL(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Tf(e)?[]:TL(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,h)=>{const f=V_(e,h,s);return u.top=En(f.top,u.top),u.right=fi(f.right,u.right),u.bottom=fi(f.bottom,u.bottom),u.left=En(f.left,u.left),u},V_(e,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IL(t){const{width:e,height:n}=LC(t);return{width:e,height:n}}function NL(t,e,n){const r=Vr(e),s=zr(e),i=n==="fixed",o=fo(t,!0,i,e);let a={scrollLeft:0,scrollTop:0};const l=jr(0);if(r||!r&&!i)if((Za(e)!=="body"||iu(s))&&(a=Cf(e)),r){const m=fo(e,!0,i,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&(l.x=Lv(s));const u=s&&!r&&!i?FC(s,a):jr(0),h=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:h,y:f,width:o.width,height:o.height}}function lm(t){return fr(t).position==="static"}function F_(t,e){if(!Vr(t)||fr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return zr(t)===n&&(n=n.ownerDocument.body),n}function zC(t,e){const n=An(t);if(Tf(t))return n;if(!Vr(t)){let s=mi(t);for(;s&&!Ma(s);){if(hr(s)&&!lm(s))return s;s=mi(s)}return n}let r=F_(t,e);for(;r&&gL(r)&&lm(r);)r=F_(r,e);return r&&Ma(r)&&lm(r)&&!jv(r)?n:r||yL(t)||n}const AL=async function(t){const e=this.getOffsetParent||zC,n=this.getDimensions,r=await n(t.floating);return{reference:NL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function kL(t){return fr(t).direction==="rtl"}const RL={convertOffsetParentRelativeRectToViewportRelativeRect:xL,getDocumentElement:zr,getClippingRect:CL,getOffsetParent:zC,getElementRects:AL,getClientRects:_L,getDimensions:IL,getScale:ca,isElement:hr,isRTL:kL};function $C(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function PL(t,e){let n=null,r;const s=zr(t);function i(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:m,height:y}=u;if(a||e(),!m||!y)return;const x=rd(f),v=rd(s.clientWidth-(h+m)),b=rd(s.clientHeight-(f+y)),E=rd(h),S={rootMargin:-x+"px "+-v+"px "+-b+"px "+-E+"px",threshold:En(0,fi(1,l))||1};let k=!0;function D(O){const T=O[0].intersectionRatio;if(T!==l){if(!k)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!$C(u,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(D,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,S)}n.observe(t)}return o(!0),i}function DL(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Mv(t),h=s||i?[...u?Pc(u):[],...Pc(e)]:[];h.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const f=u&&a?PL(u,n):null;let m=-1,y=null;o&&(y=new ResizeObserver(E=>{let[w]=E;w&&w.target===u&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=y)==null||S.observe(e)})),n()}),u&&!l&&y.observe(u),y.observe(e));let x,v=l?fo(t):null;l&&b();function b(){const E=fo(t);v&&!$C(v,E)&&n(),v=E,x=requestAnimationFrame(b)}return n(),()=>{var E;h.forEach(w=>{s&&w.removeEventListener("scroll",n),i&&w.removeEventListener("resize",n)}),f==null||f(),(E=y)==null||E.disconnect(),y=null,l&&cancelAnimationFrame(x)}}const jL=hL,OL=fL,ML=cL,LL=mL,VL=uL,U_=lL,FL=pL,UL=(t,e,n)=>{const r=new Map,s={platform:RL,...n},i={...s.platform,_c:r};return aL(t,e,{...s,platform:i})};var Dd=typeof document<"u"?p.useLayoutEffect:p.useEffect;function xh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!xh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!xh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function BC(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function z_(t,e){const n=BC(t);return Math.round(e*n)/n}function cm(t){const e=p.useRef(t);return Dd(()=>{e.current=t}),e}function zL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[h,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=p.useState(r);xh(m,r)||y(r);const[x,v]=p.useState(null),[b,E]=p.useState(null),w=p.useCallback(M=>{M!==O.current&&(O.current=M,v(M))},[]),S=p.useCallback(M=>{M!==T.current&&(T.current=M,E(M))},[]),k=i||x,D=o||b,O=p.useRef(null),T=p.useRef(null),C=p.useRef(h),I=l!=null,A=cm(l),P=cm(s),j=cm(u),R=p.useCallback(()=>{if(!O.current||!T.current)return;const M={placement:e,strategy:n,middleware:m};P.current&&(M.platform=P.current),UL(O.current,T.current,M).then(L=>{const F={...L,isPositioned:j.current!==!1};$.current&&!xh(C.current,F)&&(C.current=F,zn.flushSync(()=>{f(F)}))})},[m,e,n,P,j]);Dd(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(M=>({...M,isPositioned:!1})))},[u]);const $=p.useRef(!1);Dd(()=>($.current=!0,()=>{$.current=!1}),[]),Dd(()=>{if(k&&(O.current=k),D&&(T.current=D),k&&D){if(A.current)return A.current(k,D,R);R()}},[k,D,R,A,I]);const re=p.useMemo(()=>({reference:O,floating:T,setReference:w,setFloating:S}),[w,S]),z=p.useMemo(()=>({reference:k,floating:D}),[k,D]),W=p.useMemo(()=>{const M={position:n,left:0,top:0};if(!z.floating)return M;const L=z_(z.floating,h.x),F=z_(z.floating,h.y);return a?{...M,transform:"translate("+L+"px, "+F+"px)",...BC(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:F}},[n,a,z.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:R,refs:re,elements:z,floatingStyles:W}),[h,R,re,z,W])}const $L=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?U_({element:r.current,padding:s}).fn(n):{}:r?U_({element:r,padding:s}).fn(n):{}}}},BL=(t,e)=>({...jL(t),options:[t,e]}),HL=(t,e)=>({...OL(t),options:[t,e]}),WL=(t,e)=>({...FL(t),options:[t,e]}),qL=(t,e)=>({...ML(t),options:[t,e]}),GL=(t,e)=>({...LL(t),options:[t,e]}),KL=(t,e)=>({...VL(t),options:[t,e]}),QL=(t,e)=>({...$L(t),options:[t,e]});var XL="Arrow",HC=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return c.jsx(ye.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});HC.displayName=XL;var YL=HC;function WC(t){const[e,n]=p.useState(void 0);return _t(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,a;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Vv="Popper",[qC,If]=qn(Vv),[JL,GC]=qC(Vv),KC=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return c.jsx(JL,{scope:e,anchor:r,onAnchorChange:s,children:n})};KC.displayName=Vv;var QC="PopperAnchor",XC=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=GC(QC,n),o=p.useRef(null),a=Le(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:c.jsx(ye.div,{...s,ref:a})});XC.displayName=QC;var Fv="PopperContent",[ZL,eV]=qC(Fv),YC=p.forwardRef((t,e)=>{var Q,ee,me,ne,ue,ce;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:x,...v}=t,b=GC(Fv,n),[E,w]=p.useState(null),S=Le(e,Ae=>w(Ae)),[k,D]=p.useState(null),O=WC(k),T=(O==null?void 0:O.width)??0,C=(O==null?void 0:O.height)??0,I=r+(i!=="center"?"-"+i:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},P=Array.isArray(u)?u:[u],j=P.length>0,R={padding:A,boundary:P.filter(nV),altBoundary:j},{refs:$,floatingStyles:re,placement:z,isPositioned:W,middlewareData:M}=zL({strategy:"fixed",placement:I,whileElementsMounted:(...Ae)=>DL(...Ae,{animationFrame:y==="always"}),elements:{reference:b.anchor},middleware:[BL({mainAxis:s+C,alignmentAxis:o}),l&&HL({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?WL():void 0,...R}),l&&qL({...R}),GL({...R,apply:({elements:Ae,rects:Ve,availableWidth:on,availableHeight:jt})=>{const{width:Dn,height:Ai}=Ve.reference,Be=Ae.floating.style;Be.setProperty("--radix-popper-available-width",`${on}px`),Be.setProperty("--radix-popper-available-height",`${jt}px`),Be.setProperty("--radix-popper-anchor-width",`${Dn}px`),Be.setProperty("--radix-popper-anchor-height",`${Ai}px`)}}),k&&QL({element:k,padding:a}),rV({arrowWidth:T,arrowHeight:C}),m&&KL({strategy:"referenceHidden",...R})]}),[L,F]=eI(z),B=Zt(x);_t(()=>{W&&(B==null||B())},[W,B]);const G=(Q=M.arrow)==null?void 0:Q.x,X=(ee=M.arrow)==null?void 0:ee.y,J=((me=M.arrow)==null?void 0:me.centerOffset)!==0,[he,ie]=p.useState();return _t(()=>{E&&ie(window.getComputedStyle(E).zIndex)},[E]),c.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:W?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:he,"--radix-popper-transform-origin":[(ne=M.transformOrigin)==null?void 0:ne.x,(ue=M.transformOrigin)==null?void 0:ue.y].join(" "),...((ce=M.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(ZL,{scope:n,placedSide:L,onArrowChange:D,arrowX:G,arrowY:X,shouldHideArrow:J,children:c.jsx(ye.div,{"data-side":L,"data-align":F,...v,ref:S,style:{...v.style,animation:W?void 0:"none"}})})})});YC.displayName=Fv;var JC="PopperArrow",tV={top:"bottom",right:"left",bottom:"top",left:"right"},ZC=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=eV(JC,r),o=tV[i.placedSide];return c.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:c.jsx(YL,{...s,ref:n,style:{...s.style,display:"block"}})})});ZC.displayName=JC;function nV(t){return t!==null}var rV=t=>({name:"transformOrigin",options:t,fn(e){var b,E,w;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[u,h]=eI(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((E=s.arrow)==null?void 0:E.x)??0)+a/2,y=(((w=s.arrow)==null?void 0:w.y)??0)+l/2;let x="",v="";return u==="bottom"?(x=o?f:`${m}px`,v=`${-l}px`):u==="top"?(x=o?f:`${m}px`,v=`${r.floating.height+l}px`):u==="right"?(x=`${-l}px`,v=o?f:`${y}px`):u==="left"&&(x=`${r.floating.width+l}px`,v=o?f:`${y}px`),{data:{x,y:v}}}});function eI(t){const[e,n="center"]=t.split("-");return[e,n]}var tI=KC,nI=XC,rI=YC,sI=ZC,[Nf,GH]=qn("Tooltip",[If]),Af=If(),iI="TooltipProvider",sV=700,zg="tooltip.open",[iV,Uv]=Nf(iI),oI=t=>{const{__scopeTooltip:e,delayDuration:n=sV,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=p.useRef(!0),a=p.useRef(!1),l=p.useRef(0);return p.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),c.jsx(iV,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:a,onPointerInTransitChange:p.useCallback(u=>{a.current=u},[]),disableHoverableContent:s,children:i})};oI.displayName=iI;var kf="Tooltip",[oV,Rf]=Nf(kf),aI=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:a}=t,l=Uv(kf,t.__scopeTooltip),u=Af(e),[h,f]=p.useState(null),m=ns(),y=p.useRef(0),x=o??l.disableHoverableContent,v=a??l.delayDuration,b=p.useRef(!1),[E=!1,w]=hi({prop:r,defaultProp:s,onChange:T=>{T?(l.onOpen(),document.dispatchEvent(new CustomEvent(zg))):l.onClose(),i==null||i(T)}}),S=p.useMemo(()=>E?b.current?"delayed-open":"instant-open":"closed",[E]),k=p.useCallback(()=>{window.clearTimeout(y.current),y.current=0,b.current=!1,w(!0)},[w]),D=p.useCallback(()=>{window.clearTimeout(y.current),y.current=0,w(!1)},[w]),O=p.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{b.current=!0,w(!0),y.current=0},v)},[v,w]);return p.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),c.jsx(tI,{...u,children:c.jsx(oV,{scope:e,contentId:m,open:E,stateAttribute:S,trigger:h,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{l.isOpenDelayedRef.current?O():k()},[l.isOpenDelayedRef,O,k]),onTriggerLeave:p.useCallback(()=>{x?D():(window.clearTimeout(y.current),y.current=0)},[D,x]),onOpen:k,onClose:D,disableHoverableContent:x,children:n})})};aI.displayName=kf;var $g="TooltipTrigger",lI=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Rf($g,n),i=Uv($g,n),o=Af(n),a=p.useRef(null),l=Le(e,a,s.onTriggerChange),u=p.useRef(!1),h=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),c.jsx(nI,{asChild:!0,...o,children:c.jsx(ye.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:l,onPointerMove:de(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:de(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:de(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:de(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:de(t.onBlur,s.onClose),onClick:de(t.onClick,s.onClose)})})});lI.displayName=$g;var aV="TooltipPortal",[KH,lV]=Nf(aV,{forceMount:void 0}),La="TooltipContent",cI=p.forwardRef((t,e)=>{const n=lV(La,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Rf(La,t.__scopeTooltip);return c.jsx(So,{present:r||o.open,children:o.disableHoverableContent?c.jsx(uI,{side:s,...i,ref:e}):c.jsx(cV,{side:s,...i,ref:e})})}),cV=p.forwardRef((t,e)=>{const n=Rf(La,t.__scopeTooltip),r=Uv(La,t.__scopeTooltip),s=p.useRef(null),i=Le(e,s),[o,a]=p.useState(null),{trigger:l,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{a(null),f(!1)},[f]),y=p.useCallback((x,v)=>{const b=x.currentTarget,E={x:x.clientX,y:x.clientY},w=pV(E,b.getBoundingClientRect()),S=mV(E,w),k=gV(v.getBoundingClientRect()),D=vV([...S,...k]);a(D),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(l&&h){const x=b=>y(b,h),v=b=>y(b,l);return l.addEventListener("pointerleave",x),h.addEventListener("pointerleave",v),()=>{l.removeEventListener("pointerleave",x),h.removeEventListener("pointerleave",v)}}},[l,h,y,m]),p.useEffect(()=>{if(o){const x=v=>{const b=v.target,E={x:v.clientX,y:v.clientY},w=(l==null?void 0:l.contains(b))||(h==null?void 0:h.contains(b)),S=!yV(E,o);w?m():S&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[l,h,o,u,m]),c.jsx(uI,{...t,ref:i})}),[uV,dV]=Nf(kf,{isInside:!1}),hV=$T("TooltipContent"),uI=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...a}=t,l=Rf(La,n),u=Af(n),{onClose:h}=l;return p.useEffect(()=>(document.addEventListener(zg,h),()=>document.removeEventListener(zg,h)),[h]),p.useEffect(()=>{if(l.trigger){const f=m=>{const y=m.target;y!=null&&y.contains(l.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[l.trigger,h]),c.jsx(tu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:c.jsxs(rI,{"data-state":l.stateAttribute,...u,...a,ref:e,style:{...a.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[c.jsx(hV,{children:r}),c.jsx(uV,{scope:n,isInside:!0,children:c.jsx(TM,{id:l.contentId,role:"tooltip",children:s||r})})]})})});cI.displayName=La;var dI="TooltipArrow",fV=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Af(n);return dV(dI,n).isInside?null:c.jsx(sI,{...s,...r,ref:e})});fV.displayName=dI;function pV(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function mV(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function gV(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function yV(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const a=e[i].x,l=e[i].y,u=e[o].x,h=e[o].y;l>r!=h>r&&n<(u-a)*(r-l)/(h-l)+a&&(s=!s)}return s}function vV(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),wV(e)}function wV(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var xV=oI,_V=aI,bV=lI,hI=cI;const fI=xV,EV=_V,SV=bV,pI=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>c.jsx(hI,{ref:r,sideOffset:e,className:Z("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));pI.displayName=hI.displayName;const TV="modulepreload",CV=function(t){return"/"+t},$_={},sd=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=CV(l),l in $_)return;$_[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":TV,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((m,y)=>{f.addEventListener("load",m),f.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},IV=()=>{};var B_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},NV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},gI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||f==null)throw new AV;const m=i<<2|a>>4;if(r.push(m),u!==64){const y=a<<4&240|u>>2;if(r.push(y),f!==64){const x=u<<6&192|f;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kV=function(t){const e=mI(t);return gI.encodeByteArray(e,!0)},_h=function(t){return kV(t).replace(/\./g,"")},yI=function(t){try{return gI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV=()=>RV().__FIREBASE_DEFAULTS__,DV=()=>{if(typeof process>"u"||typeof B_>"u")return;const t=B_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yI(t[1]);return e&&JSON.parse(e)},Pf=()=>{try{return IV()||PV()||DV()||jV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vI=t=>{var e,n;return(n=(e=Pf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},OV=t=>{const e=vI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wI=()=>{var t;return(t=Pf())==null?void 0:t.config},xI=t=>{var e;return(e=Pf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _I(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_h(JSON.stringify(n)),_h(JSON.stringify(o)),""].join(".")}const tc={};function VV(){const t={prod:[],emulator:[]};for(const e of Object.keys(tc))tc[e]?t.emulator.push(e):t.prod.push(e);return t}function FV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let H_=!1;function bI(t,e){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||tc[t]===e||tc[t]||H_)return;tc[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=VV().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{H_=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=FV(r),y=n("text"),x=document.getElementById(y)||document.createElement("span"),v=n("learnmore"),b=document.getElementById(v)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;a(S),h(b,v);const k=u();l(w,E),S.append(w,x,b,k),document.body.appendChild(S)}i?(x.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function zV(){var e;const t=(e=Pf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $V(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WV(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qV(){return!zV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GV(){try{return typeof indexedDB=="object"}catch{return!1}}function KV(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="FirebaseError";class vs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QV,Object.setPrototypeOf(this,vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ou.prototype.create)}}class ou{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?XV(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new vs(s,a,r)}}function XV(t,e){return t.replace(YV,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const YV=/\{\$([^}]+)}/g;function JV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function po(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(W_(i)&&W_(o)){if(!po(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function W_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ZV(t,e){const n=new e3(t,e);return n.subscribe.bind(n)}class e3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");t3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=um),s.error===void 0&&(s.error=um),s.complete===void 0&&(s.complete=um);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function t3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){return t&&t._delegate?t._delegate:t}class mo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new MV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s3(e))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=$i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$i){return this.instances.has(e)}getOptions(e=$i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:r3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$i){return this.component?this.component.multipleInstances?e:$i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function r3(t){return t===$i?void 0:t}function s3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new n3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ce||(Ce={}));const o3={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},a3=Ce.INFO,l3={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},c3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=l3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zv{constructor(e){this.name=e,this._logLevel=a3,this._logHandler=c3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?o3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...e),this._logHandler(this,Ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...e),this._logHandler(this,Ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...e),this._logHandler(this,Ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...e),this._logHandler(this,Ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...e),this._logHandler(this,Ce.ERROR,...e)}}const u3=(t,e)=>e.some(n=>t instanceof n);let q_,G_;function d3(){return q_||(q_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function h3(){return G_||(G_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EI=new WeakMap,Bg=new WeakMap,SI=new WeakMap,dm=new WeakMap,$v=new WeakMap;function f3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(si(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&EI.set(n,t)}).catch(()=>{}),$v.set(e,t),e}function p3(t){if(Bg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Bg.set(t,e)}let Hg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Bg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||SI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return si(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function m3(t){Hg=t(Hg)}function g3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hm(this),e,...n);return SI.set(r,e.sort?e.sort():[e]),si(r)}:h3().includes(t)?function(...e){return t.apply(hm(this),e),si(EI.get(this))}:function(...e){return si(t.apply(hm(this),e))}}function y3(t){return typeof t=="function"?g3(t):(t instanceof IDBTransaction&&p3(t),u3(t,d3())?new Proxy(t,Hg):t)}function si(t){if(t instanceof IDBRequest)return f3(t);if(dm.has(t))return dm.get(t);const e=y3(t);return e!==t&&(dm.set(t,e),$v.set(e,t)),e}const hm=t=>$v.get(t);function v3(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=si(o);return r&&o.addEventListener("upgradeneeded",l=>{r(si(o.result),l.oldVersion,l.newVersion,si(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const w3=["get","getKey","getAll","getAllKeys","count"],x3=["put","add","delete","clear"],fm=new Map;function K_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fm.get(e))return fm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=x3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||w3.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return fm.set(e,i),i}m3(t=>({...t,get:(e,n,r)=>K_(e,n)||t.get(e,n,r),has:(e,n)=>!!K_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(b3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function b3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wg="@firebase/app",Q_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new zv("@firebase/app"),E3="@firebase/app-compat",S3="@firebase/analytics-compat",T3="@firebase/analytics",C3="@firebase/app-check-compat",I3="@firebase/app-check",N3="@firebase/auth",A3="@firebase/auth-compat",k3="@firebase/database",R3="@firebase/data-connect",P3="@firebase/database-compat",D3="@firebase/functions",j3="@firebase/functions-compat",O3="@firebase/installations",M3="@firebase/installations-compat",L3="@firebase/messaging",V3="@firebase/messaging-compat",F3="@firebase/performance",U3="@firebase/performance-compat",z3="@firebase/remote-config",$3="@firebase/remote-config-compat",B3="@firebase/storage",H3="@firebase/storage-compat",W3="@firebase/firestore",q3="@firebase/ai",G3="@firebase/firestore-compat",K3="firebase",Q3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="[DEFAULT]",X3={[Wg]:"fire-core",[E3]:"fire-core-compat",[T3]:"fire-analytics",[S3]:"fire-analytics-compat",[I3]:"fire-app-check",[C3]:"fire-app-check-compat",[N3]:"fire-auth",[A3]:"fire-auth-compat",[k3]:"fire-rtdb",[R3]:"fire-data-connect",[P3]:"fire-rtdb-compat",[D3]:"fire-fn",[j3]:"fire-fn-compat",[O3]:"fire-iid",[M3]:"fire-iid-compat",[L3]:"fire-fcm",[V3]:"fire-fcm-compat",[F3]:"fire-perf",[U3]:"fire-perf-compat",[z3]:"fire-rc",[$3]:"fire-rc-compat",[B3]:"fire-gcs",[H3]:"fire-gcs-compat",[W3]:"fire-fst",[G3]:"fire-fst-compat",[q3]:"fire-vertex","fire-js":"fire-js",[K3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,Y3=new Map,Gg=new Map;function X_(t,e){try{t.container.addComponent(e)}catch(n){fs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Va(t){const e=t.name;if(Gg.has(e))return fs.debug(`There were multiple attempts to register component ${e}.`),!1;Gg.set(e,t);for(const n of bh.values())X_(n,t);for(const n of Y3.values())X_(n,t);return!0}function Bv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function nr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new ou("app","Firebase",J3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl=Q3;function TI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:qg,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ii.create("bad-app-name",{appName:String(s)});if(n||(n=wI()),!n)throw ii.create("no-options");const i=bh.get(s);if(i){if(po(n,i.options)&&po(r,i.config))return i;throw ii.create("duplicate-app",{appName:s})}const o=new i3(s);for(const l of Gg.values())o.addComponent(l);const a=new Z3(n,r,o);return bh.set(s,a),a}function CI(t=qg){const e=bh.get(t);if(!e&&t===qg&&wI())return TI();if(!e)throw ii.create("no-app",{appName:t});return e}function oi(t,e,n){let r=X3[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fs.warn(o.join(" "));return}Va(new mo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6="firebase-heartbeat-database",t6=1,Dc="firebase-heartbeat-store";let pm=null;function II(){return pm||(pm=v3(e6,t6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Dc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ii.create("idb-open",{originalErrorMessage:t.message})})),pm}async function n6(t){try{const n=(await II()).transaction(Dc),r=await n.objectStore(Dc).get(NI(t));return await n.done,r}catch(e){if(e instanceof vs)fs.warn(e.message);else{const n=ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});fs.warn(n.message)}}}async function Y_(t,e){try{const r=(await II()).transaction(Dc,"readwrite");await r.objectStore(Dc).put(e,NI(t)),await r.done}catch(n){if(n instanceof vs)fs.warn(n.message);else{const r=ii.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});fs.warn(r.message)}}}function NI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=1024,s6=30;class i6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=J_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>s6){const o=l6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){fs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=J_(),{heartbeatsToSend:r,unsentEntries:s}=o6(this._heartbeatsCache.heartbeats),i=_h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return fs.warn(n),""}}}function J_(){return new Date().toISOString().substring(0,10)}function o6(t,e=r6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Z_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Z_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GV()?KV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Y_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Z_(t){return _h(JSON.stringify({version:2,heartbeats:t})).length}function l6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c6(t){Va(new mo("platform-logger",e=>new _3(e),"PRIVATE")),Va(new mo("heartbeat",e=>new i6(e),"PRIVATE")),oi(Wg,Q_,t),oi(Wg,Q_,"esm2020"),oi("fire-js","")}c6("");function AI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u6=AI,kI=new ou("auth","Firebase",AI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eh=new zv("@firebase/auth");function d6(t,...e){Eh.logLevel<=Ce.WARN&&Eh.warn(`Auth (${tl}): ${t}`,...e)}function jd(t,...e){Eh.logLevel<=Ce.ERROR&&Eh.error(`Auth (${tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(t,...e){throw Wv(t,...e)}function lr(t,...e){return Wv(t,...e)}function Hv(t,e,n){const r={...u6(),[e]:n};return new ou("auth","Firebase",r).create(e,{appName:t.name})}function ro(t){return Hv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function h6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Fr(t,"argument-error"),Hv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kI.create(t,...e)}function ge(t,e,...n){if(!t)throw Wv(e,...n)}function Zr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jd(e),new Error(e)}function ps(t,e){t||Zr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function f6(){return e1()==="http:"||e1()==="https:"}function e1(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f6()||BV()||"connection"in navigator)?navigator.onLine:!0}function m6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ps(n>e,"Short delay should be less than long delay!"),this.isMobile=UV()||HV()}get(){return p6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qv(t,e){ps(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],v6=new lu(3e4,6e4);function Gv(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function nl(t,e,n,r,s={}){return PI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=au({key:t.config.apiKey,...o}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...i};return $V()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&el(t.emulatorConfig.host)&&(u.credentials="include"),RI.fetch()(await DI(t,t.config.apiHost,n,a),u)})}async function PI(t,e,n){t._canInitEmulator=!1;const r={...g6,...e};try{const s=new x6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw id(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw id(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw id(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw id(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Hv(t,h,u);Fr(t,h)}}catch(s){if(s instanceof vs)throw s;Fr(t,"network-request-failed",{message:String(s)})}}async function w6(t,e,n,r,s={}){const i=await nl(t,e,n,r,s);return"mfaPendingCredential"in i&&Fr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function DI(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?qv(t.config,s):`${t.config.apiScheme}://${s}`;return y6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class x6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(lr(this.auth,"network-request-failed")),v6.get())})}}function id(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=lr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _6(t,e){return nl(t,"POST","/v1/accounts:delete",e)}async function Sh(t,e){return nl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function b6(t,e=!1){const n=en(t),r=await n.getIdToken(e),s=Kv(r);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:nc(mm(s.auth_time)),issuedAtTime:nc(mm(s.iat)),expirationTime:nc(mm(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function mm(t){return Number(t)*1e3}function Kv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jd("JWT malformed, contained fewer than 3 sections"),null;try{const s=yI(n);return s?JSON.parse(s):(jd("Failed to decode base64 JWT payload"),null)}catch(s){return jd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function t1(t){const e=Kv(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vs&&E6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function E6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Th(t){var f;const e=t.auth,n=await t.getIdToken(),r=await jc(t,Sh(e,{idToken:n}));ge(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?jI(s.providerUserInfo):[],o=C6(t.providerData,i),a=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Qg(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function T6(t){const e=en(t);await Th(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function C6(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function jI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I6(t,e){const n=await PI(t,{},async()=>{const r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await DI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&el(t.emulatorConfig.host)&&(l.credentials="include"),RI.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function N6(t,e){return nl(t,"POST","/v2/accounts:revokeToken",Gv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=t1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await I6(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ua;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ge(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ua,this.toJSON())}_performRefresh(){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class rr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new S6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Qg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await jc(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return b6(this,e)}reload(){return T6(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new rr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Th(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(ro(this.auth));const e=await this.getIdToken();return await jc(this,_6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,l=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:x,stsTokenManager:v}=n;ge(f&&v,e,"internal-error");const b=ua.fromJSON(this.name,v);ge(typeof f=="string",e,"internal-error"),Rs(r,e.name),Rs(s,e.name),ge(typeof m=="boolean",e,"internal-error"),ge(typeof y=="boolean",e,"internal-error"),Rs(i,e.name),Rs(o,e.name),Rs(a,e.name),Rs(l,e.name),Rs(u,e.name),Rs(h,e.name);const E=new rr({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:a,stsTokenManager:b,createdAt:u,lastLoginAt:h});return x&&Array.isArray(x)&&(E.providerData=x.map(w=>({...w}))),l&&(E._redirectEventId=l),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new ua;s.updateFromServerResponse(n);const i=new rr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Th(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?jI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new ua;a.updateFromIdToken(r);const l=new rr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Qg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1=new Map;function es(t){ps(t instanceof Function,"Expected a class definition");let e=n1.get(t);return e?(ps(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,n1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}OI.type="NONE";const r1=OI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t,e,n){return`firebase:${t}:${e}:${n}`}class da{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Od(this.userKey,s.apiKey,i),this.fullPersistenceKey=Od("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Sh(this.auth,{idToken:e}).catch(()=>{});return n?rr._fromGetAccountInfoResponse(this.auth,n,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new da(es(r1),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||es(r1);const o=Od(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Sh(e,{idToken:h}).catch(()=>{});if(!m)break;f=await rr._fromGetAccountInfoResponse(e,m,h)}else f=rr._fromJSON(e,h);u!==i&&(a=f),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new da(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new da(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zI(e))return"Blackberry";if($I(e))return"Webos";if(LI(e))return"Safari";if((e.includes("chrome/")||VI(e))&&!e.includes("edge/"))return"Chrome";if(UI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function MI(t=qt()){return/firefox\//i.test(t)}function LI(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VI(t=qt()){return/crios\//i.test(t)}function FI(t=qt()){return/iemobile/i.test(t)}function UI(t=qt()){return/android/i.test(t)}function zI(t=qt()){return/blackberry/i.test(t)}function $I(t=qt()){return/webos/i.test(t)}function Qv(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function A6(t=qt()){var e;return Qv(t)&&!!((e=window.navigator)!=null&&e.standalone)}function k6(){return WV()&&document.documentMode===10}function BI(t=qt()){return Qv(t)||UI(t)||$I(t)||zI(t)||/windows phone/i.test(t)||FI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t,e=[]){let n;switch(t){case"Browser":n=s1(qt());break;case"Worker":n=`${s1(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P6(t,e={}){return nl(t,"GET","/v2/passwordPolicy",Gv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=6;class j6{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??D6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i1(this),this.idTokenSubscription=new i1(this),this.beforeStateQueue=new R6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=es(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await da.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sh(this,{idToken:e}),r=await rr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(nr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Th(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(ro(this));const n=e?en(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(ro(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(ro(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await P6(this),n=new j6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ou("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await N6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&es(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await da.create(this,[es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&d6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Df(t){return en(t)}class i1{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZV(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M6(t){Xv=t}function L6(t){return Xv.loadJS(t)}function V6(){return Xv.gapiScript}function F6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t,e){const n=Bv(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(po(i,e??{}))return s;Fr(s,"already-initialized")}return n.initialize({options:e})}function z6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function $6(t,e,n){const r=Df(t);ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=WI(e),{host:o,port:a}=B6(e),l=a===null?"":`:${a}`,u={url:`${i}//${o}${l}/`},h=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ge(po(u,r.config.emulator)&&po(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,el(o)?(_I(`${i}//${o}${l}`),bI("Auth",!0)):H6()}function WI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function B6(t){const e=WI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:o1(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:o1(o)}}}function o1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function H6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zr("not implemented")}_getIdTokenResponse(e){return Zr("not implemented")}_linkToIdToken(e,n){return Zr("not implemented")}_getReauthenticationResolver(e){return Zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t,e){return w6(t,"POST","/v1/accounts:signInWithIdp",Gv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W6="http://localhost";class go extends qI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new go(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new go(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ha(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ha(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ha(e,n)}buildRequest(){const e={requestUri:W6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends Yv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends cu{constructor(){super("facebook.com")}static credential(e){return go._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return go._fromParams({providerId:Sn.PROVIDER_ID,signInMethod:Sn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Sn.credentialFromTaggedObject(e)}static credentialFromError(e){return Sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Sn.credential(n,r)}catch{return null}}}Sn.GOOGLE_SIGN_IN_METHOD="google.com";Sn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends cu{constructor(){super("github.com")}static credential(e){return go._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.GITHUB_SIGN_IN_METHOD="github.com";Us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends cu{constructor(){super("twitter.com")}static credential(e,n){return go._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zs.credential(n,r)}catch{return null}}}zs.TWITTER_SIGN_IN_METHOD="twitter.com";zs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await rr._fromIdTokenResponse(e,r,s),o=a1(r);return new Fa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=a1(r);return new Fa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function a1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends vs{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ch.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ch(e,n,r,s)}}function GI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ch._fromErrorAndOperation(t,i,e,r):i})}async function q6(t,e,n=!1){const r=await jc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t,e,n=!1){const{auth:r}=t;if(nr(r.app))return Promise.reject(ro(r));const s="reauthenticate";try{const i=await jc(t,GI(r,s,e,t),n);ge(i.idToken,r,"internal-error");const o=Kv(i.idToken);ge(o,r,"internal-error");const{sub:a}=o;return ge(t.uid===a,r,"user-mismatch"),Fa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Fr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(t,e,n=!1){if(nr(t.app))return Promise.reject(ro(t));const r="signIn",s=await GI(t,r,e),i=await Fa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Q6(t,e,n,r){return en(t).onIdTokenChanged(e,n,r)}function X6(t,e,n){return en(t).beforeAuthStateChanged(e,n)}function Y6(t,e,n,r){return en(t).onAuthStateChanged(e,n,r)}function J6(t){return en(t).signOut()}const Ih="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ih,"1"),this.storage.removeItem(Ih),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=1e3,e5=10;class QI extends KI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);k6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,e5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Z6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}QI.type="LOCAL";const t5=QI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI extends KI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}XI.type="SESSION";const YI=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new jf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await n5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Jv("",20);s.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(){return window}function s5(t){Or().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){return typeof Or().WorkerGlobalScope<"u"&&typeof Or().importScripts=="function"}async function i5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function o5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function a5(){return JI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="firebaseLocalStorageDb",l5=1,Nh="firebaseLocalStorage",eN="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Of(t,e){return t.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function c5(){const t=indexedDB.deleteDatabase(ZI);return new uu(t).toPromise()}function Xg(){const t=indexedDB.open(ZI,l5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nh,{keyPath:eN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nh)?e(r):(r.close(),await c5(),e(await Xg()))})})}async function l1(t,e,n){const r=Of(t,!0).put({[eN]:e,value:n});return new uu(r).toPromise()}async function u5(t,e){const n=Of(t,!1).get(e),r=await new uu(n).toPromise();return r===void 0?null:r.value}function c1(t,e){const n=Of(t,!0).delete(e);return new uu(n).toPromise()}const d5=800,h5=3;class tN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>h5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jf._getInstance(a5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await i5(),!this.activeServiceWorker)return;this.sender=new r5(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||o5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xg();return await l1(e,Ih,"1"),await c1(e,Ih),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>l1(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>u5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>c1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Of(s,!1).getAll();return new uu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),d5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tN.type="LOCAL";const f5=tN;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nN(t,e){return e?es(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv extends qI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ha(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ha(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function p5(t){return K6(t.auth,new Zv(t),t.bypassAuthState)}function m5(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),G6(n,new Zv(t),t.bypassAuthState)}async function g5(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),q6(n,new Zv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return p5;case"linkViaPopup":case"linkViaRedirect":return g5;case"reauthViaPopup":case"reauthViaRedirect":return m5;default:Fr(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=new lu(2e3,1e4);async function gm(t,e,n){if(nr(t.app))return Promise.reject(lr(t,"operation-not-supported-in-this-environment"));const r=Df(t);h6(t,e,Yv);const s=nN(r,n);return new qi(r,"signInViaPopup",e,s).executeNotNull()}class qi extends rN{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,qi.currentPopupAction&&qi.currentPopupAction.cancel(),qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){ps(this.filter.length===1,"Popup operations only handle one event");const e=Jv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,y5.get())};e()}}qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="pendingRedirect",Md=new Map;class w5 extends rN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Md.get(this.auth._key());if(!e){try{const r=await x5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function x5(t,e){const n=E5(e),r=b5(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _5(t,e){Md.set(t._key(),e)}function b5(t){return es(t._redirectPersistence)}function E5(t){return Od(v5,t.config.apiKey,t.name)}async function S5(t,e,n=!1){if(nr(t.app))return Promise.reject(ro(t));const r=Df(t),s=nN(r,e),o=await new w5(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=10*60*1e3;class C5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!I5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sN(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(lr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T5&&this.cachedEventUids.clear(),this.cachedEventUids.has(u1(e))}saveEventToCache(e){this.cachedEventUids.add(u1(e)),this.lastProcessedEventTime=Date.now()}}function u1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function I5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t,e={}){return nl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,k5=/^https?/;async function R5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await N5(t);for(const n of e)try{if(P5(n))return}catch{}Fr(t,"unauthorized-domain")}function P5(t){const e=Kg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!k5.test(n))return!1;if(A5.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=new lu(3e4,6e4);function d1(){const t=Or().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function j5(t){return new Promise((e,n)=>{var s,i,o;function r(){d1(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d1(),n(lr(t,"network-request-failed"))},timeout:D5.get()})}if((i=(s=Or().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Or().gapi)!=null&&o.load)r();else{const a=F6("iframefcb");return Or()[a]=()=>{gapi.load?r():n(lr(t,"network-request-failed"))},L6(`${V6()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Ld=null,e})}let Ld=null;function O5(t){return Ld=Ld||j5(t),Ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=new lu(5e3,15e3),L5="__/auth/iframe",V5="emulator/auth/iframe",F5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z5(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qv(e,V5):`https://${t.config.authDomain}/${L5}`,r={apiKey:e.apiKey,appName:t.name,v:tl},s=U5.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${au(r).slice(1)}`}async function $5(t){const e=await O5(t),n=Or().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:z5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:F5,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=lr(t,"network-request-failed"),a=Or().setTimeout(()=>{i(o)},M5.get());function l(){Or().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},H5=500,W5=600,q5="_blank",G5="http://localhost";class h1{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function K5(t,e,n,r=H5,s=W5){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...B5,width:r.toString(),height:s.toString(),top:i,left:o},u=qt().toLowerCase();n&&(a=VI(u)?q5:n),MI(u)&&(e=e||G5,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[y,x])=>`${m}${y}=${x},`,"");if(A6(u)&&a!=="_self")return Q5(e||"",a),new h1(null);const f=window.open(e||"",a,h);ge(f,t,"popup-blocked");try{f.focus()}catch{}return new h1(f)}function Q5(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X5="__/auth/handler",Y5="emulator/auth/handler",J5=encodeURIComponent("fac");async function f1(t,e,n,r,s,i){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:tl,eventId:s};if(e instanceof Yv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",JV(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof cu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${J5}=${encodeURIComponent(l)}`:"";return`${Z5(t)}?${au(a).slice(1)}${u}`}function Z5({config:t}){return t.emulator?qv(t,Y5):`https://${t.authDomain}/${X5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym="webStorageSupport";class eF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YI,this._completeRedirectFn=S5,this._overrideRedirectResult=_5}async _openPopup(e,n,r,s){var o;ps((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await f1(e,n,r,Kg(),s);return K5(e,i,Jv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await f1(e,n,r,Kg(),s);return s5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ps(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $5(e),r=new C5(e);return n.register("authEvent",s=>(ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ym,{type:ym},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[ym];i!==void 0&&n(!!i),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=R5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BI()||LI()||Qv()}}const tF=eF;var p1="@firebase/auth",m1="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sF(t){Va(new mo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HI(t)},u=new O6(r,s,i,l);return z6(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Va(new mo("auth-internal",e=>{const n=Df(e.getProvider("auth").getImmediate());return(r=>new nF(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),oi(p1,m1,rF(t)),oi(p1,m1,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=5*60,oF=xI("authIdTokenMaxAge")||iF;let g1=null;const aF=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>oF)return;const s=n==null?void 0:n.token;g1!==s&&(g1=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lF(t=CI()){const e=Bv(t,"auth");if(e.isInitialized())return e.getImmediate();const n=U6(t,{popupRedirectResolver:tF,persistence:[f5,t5,YI]}),r=xI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=aF(i.toString());X6(n,o,()=>o(n.currentUser)),Q6(n,a=>o(a))}}const s=vI("auth");return s&&$6(n,`http://${s}`),n}function cF(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}M6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=lr("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",cF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sF("Browser");var uF="firebase",dF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oi(uF,dF,"app");var y1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ai,iN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,C){function I(){}I.prototype=C.prototype,T.F=C.prototype,T.prototype=new I,T.prototype.constructor=T,T.D=function(A,P,j){for(var R=Array(arguments.length-2),$=2;$<arguments.length;$++)R[$-2]=arguments[$];return C.prototype[P].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,C,I){I||(I=0);const A=Array(16);if(typeof C=="string")for(var P=0;P<16;++P)A[P]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(P=0;P<16;++P)A[P]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=T.g[0],I=T.g[1],P=T.g[2];let j=T.g[3],R;R=C+(j^I&(P^j))+A[0]+3614090360&4294967295,C=I+(R<<7&4294967295|R>>>25),R=j+(P^C&(I^P))+A[1]+3905402710&4294967295,j=C+(R<<12&4294967295|R>>>20),R=P+(I^j&(C^I))+A[2]+606105819&4294967295,P=j+(R<<17&4294967295|R>>>15),R=I+(C^P&(j^C))+A[3]+3250441966&4294967295,I=P+(R<<22&4294967295|R>>>10),R=C+(j^I&(P^j))+A[4]+4118548399&4294967295,C=I+(R<<7&4294967295|R>>>25),R=j+(P^C&(I^P))+A[5]+1200080426&4294967295,j=C+(R<<12&4294967295|R>>>20),R=P+(I^j&(C^I))+A[6]+2821735955&4294967295,P=j+(R<<17&4294967295|R>>>15),R=I+(C^P&(j^C))+A[7]+4249261313&4294967295,I=P+(R<<22&4294967295|R>>>10),R=C+(j^I&(P^j))+A[8]+1770035416&4294967295,C=I+(R<<7&4294967295|R>>>25),R=j+(P^C&(I^P))+A[9]+2336552879&4294967295,j=C+(R<<12&4294967295|R>>>20),R=P+(I^j&(C^I))+A[10]+4294925233&4294967295,P=j+(R<<17&4294967295|R>>>15),R=I+(C^P&(j^C))+A[11]+2304563134&4294967295,I=P+(R<<22&4294967295|R>>>10),R=C+(j^I&(P^j))+A[12]+1804603682&4294967295,C=I+(R<<7&4294967295|R>>>25),R=j+(P^C&(I^P))+A[13]+4254626195&4294967295,j=C+(R<<12&4294967295|R>>>20),R=P+(I^j&(C^I))+A[14]+2792965006&4294967295,P=j+(R<<17&4294967295|R>>>15),R=I+(C^P&(j^C))+A[15]+1236535329&4294967295,I=P+(R<<22&4294967295|R>>>10),R=C+(P^j&(I^P))+A[1]+4129170786&4294967295,C=I+(R<<5&4294967295|R>>>27),R=j+(I^P&(C^I))+A[6]+3225465664&4294967295,j=C+(R<<9&4294967295|R>>>23),R=P+(C^I&(j^C))+A[11]+643717713&4294967295,P=j+(R<<14&4294967295|R>>>18),R=I+(j^C&(P^j))+A[0]+3921069994&4294967295,I=P+(R<<20&4294967295|R>>>12),R=C+(P^j&(I^P))+A[5]+3593408605&4294967295,C=I+(R<<5&4294967295|R>>>27),R=j+(I^P&(C^I))+A[10]+38016083&4294967295,j=C+(R<<9&4294967295|R>>>23),R=P+(C^I&(j^C))+A[15]+3634488961&4294967295,P=j+(R<<14&4294967295|R>>>18),R=I+(j^C&(P^j))+A[4]+3889429448&4294967295,I=P+(R<<20&4294967295|R>>>12),R=C+(P^j&(I^P))+A[9]+568446438&4294967295,C=I+(R<<5&4294967295|R>>>27),R=j+(I^P&(C^I))+A[14]+3275163606&4294967295,j=C+(R<<9&4294967295|R>>>23),R=P+(C^I&(j^C))+A[3]+4107603335&4294967295,P=j+(R<<14&4294967295|R>>>18),R=I+(j^C&(P^j))+A[8]+1163531501&4294967295,I=P+(R<<20&4294967295|R>>>12),R=C+(P^j&(I^P))+A[13]+2850285829&4294967295,C=I+(R<<5&4294967295|R>>>27),R=j+(I^P&(C^I))+A[2]+4243563512&4294967295,j=C+(R<<9&4294967295|R>>>23),R=P+(C^I&(j^C))+A[7]+1735328473&4294967295,P=j+(R<<14&4294967295|R>>>18),R=I+(j^C&(P^j))+A[12]+2368359562&4294967295,I=P+(R<<20&4294967295|R>>>12),R=C+(I^P^j)+A[5]+4294588738&4294967295,C=I+(R<<4&4294967295|R>>>28),R=j+(C^I^P)+A[8]+2272392833&4294967295,j=C+(R<<11&4294967295|R>>>21),R=P+(j^C^I)+A[11]+1839030562&4294967295,P=j+(R<<16&4294967295|R>>>16),R=I+(P^j^C)+A[14]+4259657740&4294967295,I=P+(R<<23&4294967295|R>>>9),R=C+(I^P^j)+A[1]+2763975236&4294967295,C=I+(R<<4&4294967295|R>>>28),R=j+(C^I^P)+A[4]+1272893353&4294967295,j=C+(R<<11&4294967295|R>>>21),R=P+(j^C^I)+A[7]+4139469664&4294967295,P=j+(R<<16&4294967295|R>>>16),R=I+(P^j^C)+A[10]+3200236656&4294967295,I=P+(R<<23&4294967295|R>>>9),R=C+(I^P^j)+A[13]+681279174&4294967295,C=I+(R<<4&4294967295|R>>>28),R=j+(C^I^P)+A[0]+3936430074&4294967295,j=C+(R<<11&4294967295|R>>>21),R=P+(j^C^I)+A[3]+3572445317&4294967295,P=j+(R<<16&4294967295|R>>>16),R=I+(P^j^C)+A[6]+76029189&4294967295,I=P+(R<<23&4294967295|R>>>9),R=C+(I^P^j)+A[9]+3654602809&4294967295,C=I+(R<<4&4294967295|R>>>28),R=j+(C^I^P)+A[12]+3873151461&4294967295,j=C+(R<<11&4294967295|R>>>21),R=P+(j^C^I)+A[15]+530742520&4294967295,P=j+(R<<16&4294967295|R>>>16),R=I+(P^j^C)+A[2]+3299628645&4294967295,I=P+(R<<23&4294967295|R>>>9),R=C+(P^(I|~j))+A[0]+4096336452&4294967295,C=I+(R<<6&4294967295|R>>>26),R=j+(I^(C|~P))+A[7]+1126891415&4294967295,j=C+(R<<10&4294967295|R>>>22),R=P+(C^(j|~I))+A[14]+2878612391&4294967295,P=j+(R<<15&4294967295|R>>>17),R=I+(j^(P|~C))+A[5]+4237533241&4294967295,I=P+(R<<21&4294967295|R>>>11),R=C+(P^(I|~j))+A[12]+1700485571&4294967295,C=I+(R<<6&4294967295|R>>>26),R=j+(I^(C|~P))+A[3]+2399980690&4294967295,j=C+(R<<10&4294967295|R>>>22),R=P+(C^(j|~I))+A[10]+4293915773&4294967295,P=j+(R<<15&4294967295|R>>>17),R=I+(j^(P|~C))+A[1]+2240044497&4294967295,I=P+(R<<21&4294967295|R>>>11),R=C+(P^(I|~j))+A[8]+1873313359&4294967295,C=I+(R<<6&4294967295|R>>>26),R=j+(I^(C|~P))+A[15]+4264355552&4294967295,j=C+(R<<10&4294967295|R>>>22),R=P+(C^(j|~I))+A[6]+2734768916&4294967295,P=j+(R<<15&4294967295|R>>>17),R=I+(j^(P|~C))+A[13]+1309151649&4294967295,I=P+(R<<21&4294967295|R>>>11),R=C+(P^(I|~j))+A[4]+4149444226&4294967295,C=I+(R<<6&4294967295|R>>>26),R=j+(I^(C|~P))+A[11]+3174756917&4294967295,j=C+(R<<10&4294967295|R>>>22),R=P+(C^(j|~I))+A[2]+718787259&4294967295,P=j+(R<<15&4294967295|R>>>17),R=I+(j^(P|~C))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(P+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+j&4294967295}r.prototype.v=function(T,C){C===void 0&&(C=T.length);const I=C-this.blockSize,A=this.C;let P=this.h,j=0;for(;j<C;){if(P==0)for(;j<=I;)s(this,T,j),j+=this.blockSize;if(typeof T=="string"){for(;j<C;)if(A[P++]=T.charCodeAt(j++),P==this.blockSize){s(this,A),P=0;break}}else for(;j<C;)if(A[P++]=T[j++],P==this.blockSize){s(this,A),P=0;break}}this.h=P,this.o+=C},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;C=this.o*8;for(var I=T.length-8;I<T.length;++I)T[I]=C&255,C/=256;for(this.v(T),T=Array(16),C=0,I=0;I<4;++I)for(let A=0;A<32;A+=8)T[C++]=this.g[I]>>>A&255;return T};function i(T,C){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=C(T)}function o(T,C){this.h=C;const I=[];let A=!0;for(let P=T.length-1;P>=0;P--){const j=T[P]|0;A&&j==C||(I[P]=j,A=!1)}this.g=I}var a={};function l(T){return-128<=T&&T<128?i(T,function(C){return new o([C|0],C<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return b(u(-T));const C=[];let I=1;for(let A=0;T>=I;A++)C[A]=T/I|0,I*=4294967296;return new o(C,0)}function h(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return b(h(T.substring(1),C));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=u(Math.pow(C,8));let A=f;for(let j=0;j<T.length;j+=8){var P=Math.min(8,T.length-j);const R=parseInt(T.substring(j,j+P),C);P<8?(P=u(Math.pow(C,P)),A=A.j(P).add(u(R))):(A=A.j(I),A=A.add(u(R)))}return A}var f=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-b(this).m();let T=0,C=1;for(let I=0;I<this.g.length;I++){const A=this.i(I);T+=(A>=0?A:4294967296+A)*C,C*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(v(this))return"-"+b(this).toString(T);const C=u(Math.pow(T,6));var I=this;let A="";for(;;){const P=k(I,C).g;I=E(I,P.j(C));let j=((I.g.length>0?I.g[0]:I.h)>>>0).toString(T);if(I=P,x(I))return j+A;for(;j.length<6;)j="0"+j;A=j+A}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(let C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=E(this,T),v(T)?-1:x(T)?0:1};function b(T){const C=T.g.length,I=[];for(let A=0;A<C;A++)I[A]=~T.g[A];return new o(I,~T.h).add(m)}t.abs=function(){return v(this)?b(this):this},t.add=function(T){const C=Math.max(this.g.length,T.g.length),I=[];let A=0;for(let P=0;P<=C;P++){let j=A+(this.i(P)&65535)+(T.i(P)&65535),R=(j>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);A=R>>>16,j&=65535,R&=65535,I[P]=R<<16|j}return new o(I,I[I.length-1]&-2147483648?-1:0)};function E(T,C){return T.add(b(C))}t.j=function(T){if(x(this)||x(T))return f;if(v(this))return v(T)?b(this).j(b(T)):b(b(this).j(T));if(v(T))return b(this.j(b(T)));if(this.l(y)<0&&T.l(y)<0)return u(this.m()*T.m());const C=this.g.length+T.g.length,I=[];for(var A=0;A<2*C;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(let P=0;P<T.g.length;P++){const j=this.i(A)>>>16,R=this.i(A)&65535,$=T.i(P)>>>16,re=T.i(P)&65535;I[2*A+2*P]+=R*re,w(I,2*A+2*P),I[2*A+2*P+1]+=j*re,w(I,2*A+2*P+1),I[2*A+2*P+1]+=R*$,w(I,2*A+2*P+1),I[2*A+2*P+2]+=j*$,w(I,2*A+2*P+2)}for(T=0;T<C;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=C;T<2*C;T++)I[T]=0;return new o(I,0)};function w(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function S(T,C){this.g=T,this.h=C}function k(T,C){if(x(C))throw Error("division by zero");if(x(T))return new S(f,f);if(v(T))return C=k(b(T),C),new S(b(C.g),b(C.h));if(v(C))return C=k(T,b(C)),new S(b(C.g),C.h);if(T.g.length>30){if(v(T)||v(C))throw Error("slowDivide_ only works with positive integers.");for(var I=m,A=C;A.l(T)<=0;)I=D(I),A=D(A);var P=O(I,1),j=O(A,1);for(A=O(A,2),I=O(I,2);!x(A);){var R=j.add(A);R.l(T)<=0&&(P=P.add(I),j=R),A=O(A,1),I=O(I,1)}return C=E(T,P.j(C)),new S(P,C)}for(P=f;T.l(C)>=0;){for(I=Math.max(1,Math.floor(T.m()/C.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=A<=48?1:Math.pow(2,A-48),j=u(I),R=j.j(C);v(R)||R.l(T)>0;)I-=A,j=u(I),R=j.j(C);x(j)&&(j=m),P=P.add(j),T=E(T,R)}return new S(P,T)}t.B=function(T){return k(this,T).h},t.and=function(T){const C=Math.max(this.g.length,T.g.length),I=[];for(let A=0;A<C;A++)I[A]=this.i(A)&T.i(A);return new o(I,this.h&T.h)},t.or=function(T){const C=Math.max(this.g.length,T.g.length),I=[];for(let A=0;A<C;A++)I[A]=this.i(A)|T.i(A);return new o(I,this.h|T.h)},t.xor=function(T){const C=Math.max(this.g.length,T.g.length),I=[];for(let A=0;A<C;A++)I[A]=this.i(A)^T.i(A);return new o(I,this.h^T.h)};function D(T){const C=T.g.length+1,I=[];for(let A=0;A<C;A++)I[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(I,T.h)}function O(T,C){const I=C>>5;C%=32;const A=T.g.length-I,P=[];for(let j=0;j<A;j++)P[j]=C>0?T.i(j+I)>>>C|T.i(j+I+1)<<32-C:T.i(j+I);return new o(P,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,iN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ai=o}).apply(typeof y1<"u"?y1:typeof self<"u"?self:typeof window<"u"?window:{});var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oN,Ul,aN,Vd,Yg,lN,cN,uN;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof od=="object"&&od];for(var g=0;g<d.length;++g){var _=d[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(d,g){if(g)e:{var _=r;d=d.split(".");for(var N=0;N<d.length-1;N++){var V=d[N];if(!(V in _))break e;_=_[V]}d=d[d.length-1],N=_[d],g=g(N),g!=N&&g!=null&&e(_,d,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(g){var _=[],N;for(N in g)Object.prototype.hasOwnProperty.call(g,N)&&_.push([N,g[N]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function a(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function l(d,g,_){return d.call.apply(d.bind,arguments)}function u(d,g,_){return u=l,u.apply(null,arguments)}function h(d,g){var _=Array.prototype.slice.call(arguments,1);return function(){var N=_.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function f(d,g){function _(){}_.prototype=g.prototype,d.Z=g.prototype,d.prototype=new _,d.prototype.constructor=d,d.Ob=function(N,V,U){for(var te=Array(arguments.length-2),be=2;be<arguments.length;be++)te[be-2]=arguments[be];return g.prototype[V].apply(N,te)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function y(d){const g=d.length;if(g>0){const _=Array(g);for(let N=0;N<g;N++)_[N]=d[N];return _}return[]}function x(d,g){for(let N=1;N<arguments.length;N++){const V=arguments[N];var _=typeof V;if(_=_!="object"?_:V?Array.isArray(V)?"array":_:"null",_=="array"||_=="object"&&typeof V.length=="number"){_=d.length||0;const U=V.length||0;d.length=_+U;for(let te=0;te<U;te++)d[_+te]=V[te]}else d.push(V)}}class v{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(d){o.setTimeout(()=>{throw d},0)}function E(){var d=T;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class w{constructor(){this.h=this.g=null}add(g,_){const N=S.get();N.set(g,_),this.h?this.h.next=N:this.g=N,this.h=N}}var S=new v(()=>new k,d=>d.reset());class k{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let D,O=!1,T=new w,C=()=>{const d=Promise.resolve(void 0);D=()=>{d.then(I)}};function I(){for(var d;d=E();){try{d.h.call(d.g)}catch(_){b(_)}var g=S;g.j(d),g.h<100&&(g.h++,d.next=g.g,g.g=d)}O=!1}function A(){this.u=this.u,this.C=this.C}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var j=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};o.addEventListener("test",_,g),o.removeEventListener("test",_,g)}catch{}return d}();function R(d){return/^[\s\xa0]*$/.test(d)}function $(d,g){P.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,g)}f($,P),$.prototype.init=function(d,g){const _=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget,g||(_=="mouseover"?g=d.fromElement:_=="mouseout"&&(g=d.toElement)),this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),z=0;function W(d,g,_,N,V){this.listener=d,this.proxy=null,this.src=g,this.type=_,this.capture=!!N,this.ha=V,this.key=++z,this.da=this.fa=!1}function M(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function L(d,g,_){for(const N in d)g.call(_,d[N],N,d)}function F(d,g){for(const _ in d)g.call(void 0,d[_],_,d)}function B(d){const g={};for(const _ in d)g[_]=d[_];return g}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function X(d,g){let _,N;for(let V=1;V<arguments.length;V++){N=arguments[V];for(_ in N)d[_]=N[_];for(let U=0;U<G.length;U++)_=G[U],Object.prototype.hasOwnProperty.call(N,_)&&(d[_]=N[_])}}function J(d){this.src=d,this.g={},this.h=0}J.prototype.add=function(d,g,_,N,V){const U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);const te=ie(d,g,N,V);return te>-1?(g=d[te],_||(g.fa=!1)):(g=new W(g,this.src,U,!!N,V),g.fa=_,d.push(g)),g};function he(d,g){const _=g.type;if(_ in d.g){var N=d.g[_],V=Array.prototype.indexOf.call(N,g,void 0),U;(U=V>=0)&&Array.prototype.splice.call(N,V,1),U&&(M(g),d.g[_].length==0&&(delete d.g[_],d.h--))}}function ie(d,g,_,N){for(let V=0;V<d.length;++V){const U=d[V];if(!U.da&&U.listener==g&&U.capture==!!_&&U.ha==N)return V}return-1}var Q="closure_lm_"+(Math.random()*1e6|0),ee={};function me(d,g,_,N,V){if(Array.isArray(g)){for(let U=0;U<g.length;U++)me(d,g[U],_,N,V);return null}return _=Ai(_),d&&d[re]?d.J(g,_,a(N)?!!N.capture:!!N,V):ne(d,g,_,!1,N,V)}function ne(d,g,_,N,V,U){if(!g)throw Error("Invalid event type");const te=a(V)?!!V.capture:!!V;let be=jt(d);if(be||(d[Q]=be=new J(d)),_=be.add(g,_,N,te,U),_.proxy)return _;if(N=ue(),_.proxy=N,N.src=d,N.listener=_,d.addEventListener)j||(V=te),V===void 0&&(V=!1),d.addEventListener(g.toString(),N,V);else if(d.attachEvent)d.attachEvent(Ve(g.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ue(){function d(_){return g.call(d.src,d.listener,_)}const g=on;return d}function ce(d,g,_,N,V){if(Array.isArray(g))for(var U=0;U<g.length;U++)ce(d,g[U],_,N,V);else N=a(N)?!!N.capture:!!N,_=Ai(_),d&&d[re]?(d=d.i,U=String(g).toString(),U in d.g&&(g=d.g[U],_=ie(g,_,N,V),_>-1&&(M(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete d.g[U],d.h--)))):d&&(d=jt(d))&&(g=d.g[g.toString()],d=-1,g&&(d=ie(g,_,N,V)),(_=d>-1?g[d]:null)&&Ae(_))}function Ae(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[re])he(g.i,d);else{var _=d.type,N=d.proxy;g.removeEventListener?g.removeEventListener(_,N,d.capture):g.detachEvent?g.detachEvent(Ve(_),N):g.addListener&&g.removeListener&&g.removeListener(N),(_=jt(g))?(he(_,d),_.h==0&&(_.src=null,g[Q]=null)):M(d)}}}function Ve(d){return d in ee?ee[d]:ee[d]="on"+d}function on(d,g){if(d.da)d=!0;else{g=new $(g,this);const _=d.listener,N=d.ha||d.src;d.fa&&Ae(d),d=_.call(N,g)}return d}function jt(d){return d=d[Q],d instanceof J?d:null}var Dn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ai(d){return typeof d=="function"?d:(d[Dn]||(d[Dn]=function(g){return d.handleEvent(g)}),d[Dn])}function Be(){A.call(this),this.i=new J(this),this.M=this,this.G=null}f(Be,A),Be.prototype[re]=!0,Be.prototype.removeEventListener=function(d,g,_,N){ce(this,d,g,_,N)};function Ke(d,g){var _,N=d.G;if(N)for(_=[];N;N=N.G)_.push(N);if(d=d.M,N=g.type||g,typeof g=="string")g=new P(g,d);else if(g instanceof P)g.target=g.target||d;else{var V=g;g=new P(N,d),X(g,V)}V=!0;let U,te;if(_)for(te=_.length-1;te>=0;te--)U=g.g=_[te],V=$r(U,N,!0,g)&&V;if(U=g.g=d,V=$r(U,N,!0,g)&&V,V=$r(U,N,!1,g)&&V,_)for(te=0;te<_.length;te++)U=g.g=_[te],V=$r(U,N,!1,g)&&V}Be.prototype.N=function(){if(Be.Z.N.call(this),this.i){var d=this.i;for(const g in d.g){const _=d.g[g];for(let N=0;N<_.length;N++)M(_[N]);delete d.g[g],d.h--}}this.G=null},Be.prototype.J=function(d,g,_,N){return this.i.add(String(d),g,!1,_,N)},Be.prototype.K=function(d,g,_,N){return this.i.add(String(d),g,!0,_,N)};function $r(d,g,_,N){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();let V=!0;for(let U=0;U<g.length;++U){const te=g[U];if(te&&!te.da&&te.capture==_){const be=te.listener,pt=te.ha||te.src;te.fa&&he(d.i,te),V=be.call(pt,N)!==!1&&V}}return V&&!N.defaultPrevented}function ko(d,g){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(d,g||0)}function fl(d){d.g=ko(()=>{d.g=null,d.i&&(d.i=!1,fl(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class _u extends A{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:fl(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(d){A.call(this),this.h=d,this.g={}}f(ki,A);var bu=[];function Br(d){L(d.g,function(g,_){this.g.hasOwnProperty(_)&&Ae(g)},d),d.g={}}ki.prototype.N=function(){ki.Z.N.call(this),Br(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vr=o.JSON.stringify,Ri=o.JSON.parse,Eu=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function Gn(){}function pl(){}var Pi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ml(){P.call(this,"d")}f(ml,P);function Di(){P.call(this,"c")}f(Di,P);var wr={},Su=null;function ji(){return Su=Su||new Be}wr.Ia="serverreachability";function Tu(d){P.call(this,wr.Ia,d)}f(Tu,P);function Oi(d){const g=ji();Ke(g,new Tu(g))}wr.STAT_EVENT="statevent";function Cu(d,g){P.call(this,wr.STAT_EVENT,d),this.stat=g}f(Cu,P);function Pe(d){const g=ji();Ke(g,new Cu(g,d))}wr.Ja="timingevent";function Ot(d,g){P.call(this,wr.Ja,d),this.size=g}f(Ot,P);function ht(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},g)}function an(){this.g=!0}an.prototype.ua=function(){this.g=!1};function ln(d,g,_,N,V,U){d.info(function(){if(d.g)if(U){var te="",be=U.split("&");for(let Fe=0;Fe<be.length;Fe++){var pt=be[Fe].split("=");if(pt.length>1){const bt=pt[0];pt=pt[1];const br=bt.split("_");te=br.length>=2&&br[1]=="type"?te+(bt+"="+pt+"&"):te+(bt+"=redacted&")}}}else te=null;else te=U;return"XMLHTTP REQ ("+N+") [attempt "+V+"]: "+g+`
`+_+`
`+te})}function Gt(d,g,_,N,V,U,te){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+V+"]: "+g+`
`+_+`
`+U+" "+te})}function At(d,g,_,N){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+ft(d,_)+(N?" "+N:"")})}function bs(d,g){d.info(function(){return"TIMEOUT: "+g})}an.prototype.info=function(){};function ft(d,g){if(!d.g)return g;if(!g)return null;try{const U=JSON.parse(g);if(U){for(d=0;d<U.length;d++)if(Array.isArray(U[d])){var _=U[d];if(!(_.length<2)){var N=_[1];if(Array.isArray(N)&&!(N.length<1)){var V=N[0];if(V!="noop"&&V!="stop"&&V!="close")for(let te=1;te<N.length;te++)N[te]=""}}}}return vr(U)}catch{return g}}var vn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wn={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},jn;function Hr(){}f(Hr,Gn),Hr.prototype.g=function(){return new XMLHttpRequest},jn=new Hr;function Kn(d){return encodeURIComponent(String(d))}function xr(d){var g=1;d=d.split(":");const _=[];for(;g>0&&d.length;)_.push(d.shift()),g--;return d.length&&_.push(d.join(":")),_}function cn(d,g,_,N){this.j=d,this.i=g,this.l=_,this.S=N||1,this.V=new ki(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ro}function Ro(){this.i=null,this.g="",this.h=!1}var y0={},gp={};function yp(d,g,_){d.M=1,d.A=Nu(_r(g)),d.u=_,d.R=!0,v0(d,null)}function v0(d,g){d.F=Date.now(),Iu(d),d.B=_r(d.A);var _=d.B,N=d.S;Array.isArray(N)||(N=[String(N)]),R0(_.i,"t",N),d.C=0,_=d.j.L,d.h=new Ro,d.g=Q0(d.j,_?g:null,!d.u),d.P>0&&(d.O=new _u(u(d.Y,d,d.g),d.P)),g=d.V,_=d.g,N=d.ba;var V="readystatechange";Array.isArray(V)||(V&&(bu[0]=V.toString()),V=bu);for(let U=0;U<V.length;U++){const te=me(_,V[U],N||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=d.J?B(d.J):{},d.u?(d.v||(d.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,g)):(d.v="GET",d.g.ea(d.B,d.v,null,g)),Oi(),ln(d.i,d.v,d.B,d.l,d.S,d.u)}cn.prototype.ba=function(d){d=d.target;const g=this.O;g&&Ts(d)==3?g.j():this.Y(d)},cn.prototype.Y=function(d){try{if(d==this.g)e:{const be=Ts(this.g),pt=this.g.ya(),Fe=this.g.ca();if(!(be<3)&&(be!=3||this.g&&(this.h.h||this.g.la()||V0(this.g)))){this.K||be!=4||pt==7||(pt==8||Fe<=0?Oi(3):Oi(2)),vp(this);var g=this.g.ca();this.X=g;var _=i2(this);if(this.o=g==200,Gt(this.i,this.v,this.B,this.l,this.S,be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var N,V=this.g;if((N=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(N)){var U=N;break t}}U=null}if(d=U)At(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wp(this,d);else{this.o=!1,this.m=3,Pe(12),Mi(this),gl(this);break e}}if(this.R){d=!0;let bt;for(;!this.K&&this.C<_.length;)if(bt=o2(this,_),bt==gp){be==4&&(this.m=4,Pe(14),d=!1),At(this.i,this.l,null,"[Incomplete Response]");break}else if(bt==y0){this.m=4,Pe(15),At(this.i,this.l,_,"[Invalid Chunk]"),d=!1;break}else At(this.i,this.l,bt,null),wp(this,bt);if(w0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),be!=4||_.length!=0||this.h.h||(this.m=1,Pe(16),d=!1),this.o=this.o&&d,!d)At(this.i,this.l,_,"[Invalid Chunked Response]"),Mi(this),gl(this);else if(_.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Ip(te),te.P=!0,Pe(11))}}else At(this.i,this.l,_,null),wp(this,_);be==4&&Mi(this),this.o&&!this.K&&(be==4?W0(this.j,this):(this.o=!1,Iu(this)))}else x2(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,Pe(12)):(this.m=0,Pe(13)),Mi(this),gl(this)}}}catch{}finally{}};function i2(d){if(!w0(d))return d.g.la();const g=V0(d.g);if(g==="")return"";let _="";const N=g.length,V=Ts(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Mi(d),gl(d),"";d.h.i=new o.TextDecoder}for(let U=0;U<N;U++)d.h.h=!0,_+=d.h.i.decode(g[U],{stream:!(V&&U==N-1)});return g.length=0,d.h.g+=_,d.C=0,d.h.g}function w0(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function o2(d,g){var _=d.C,N=g.indexOf(`
`,_);return N==-1?gp:(_=Number(g.substring(_,N)),isNaN(_)?y0:(N+=1,N+_>g.length?gp:(g=g.slice(N,N+_),d.C=N+_,g)))}cn.prototype.cancel=function(){this.K=!0,Mi(this)};function Iu(d){d.T=Date.now()+d.H,x0(d,d.H)}function x0(d,g){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ht(u(d.aa,d),g)}function vp(d){d.D&&(o.clearTimeout(d.D),d.D=null)}cn.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(bs(this.i,this.B),this.M!=2&&(Oi(),Pe(17)),Mi(this),this.m=2,gl(this)):x0(this,this.T-d)};function gl(d){d.j.I==0||d.K||W0(d.j,d)}function Mi(d){vp(d);var g=d.O;g&&typeof g.dispose=="function"&&g.dispose(),d.O=null,Br(d.V),d.g&&(g=d.g,d.g=null,g.abort(),g.dispose())}function wp(d,g){try{var _=d.j;if(_.I!=0&&(_.g==d||xp(_.h,d))){if(!d.L&&xp(_.h,d)&&_.I==3){try{var N=_.Ba.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var V=N;if(V[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<d.F)Du(_),Ru(_);else break e;Cp(_),Pe(18)}}else _.xa=V[1],0<_.xa-_.K&&V[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=ht(u(_.Va,_),6e3));E0(_.h)<=1&&_.ta&&(_.ta=void 0)}else Vi(_,11)}else if((d.L||_.g==d)&&Du(_),!R(g))for(V=_.Ba.g.parse(g),g=0;g<V.length;g++){let Fe=V[g];const bt=Fe[0];if(!(bt<=_.K))if(_.K=bt,Fe=Fe[1],_.I==2)if(Fe[0]=="c"){_.M=Fe[1],_.ba=Fe[2];const br=Fe[3];br!=null&&(_.ka=br,_.j.info("VER="+_.ka));const Fi=Fe[4];Fi!=null&&(_.za=Fi,_.j.info("SVER="+_.za));const Cs=Fe[5];Cs!=null&&typeof Cs=="number"&&Cs>0&&(N=1.5*Cs,_.O=N,_.j.info("backChannelRequestTimeoutMs_="+N)),N=_;const Is=d.g;if(Is){const Ou=Is.g?Is.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ou){var U=N.h;U.g||Ou.indexOf("spdy")==-1&&Ou.indexOf("quic")==-1&&Ou.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(_p(U,U.h),U.h=null))}if(N.G){const Np=Is.g?Is.g.getResponseHeader("X-HTTP-Session-Id"):null;Np&&(N.wa=Np,He(N.J,N.G,Np))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-d.F,_.j.info("Handshake RTT: "+_.T+"ms")),N=_;var te=d;if(N.na=K0(N,N.L?N.ba:null,N.W),te.L){S0(N.h,te);var be=te,pt=N.O;pt&&(be.H=pt),be.D&&(vp(be),Iu(be)),N.g=te}else B0(N);_.i.length>0&&Pu(_)}else Fe[0]!="stop"&&Fe[0]!="close"||Vi(_,7);else _.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Vi(_,7):Tp(_):Fe[0]!="noop"&&_.l&&_.l.qa(Fe),_.A=0)}}Oi(4)}catch{}}var a2=class{constructor(d,g){this.g=d,this.map=g}};function _0(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function b0(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function E0(d){return d.h?1:d.g?d.g.size:0}function xp(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function _p(d,g){d.g?d.g.add(g):d.h=g}function S0(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}_0.prototype.cancel=function(){if(this.i=T0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function T0(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const _ of d.g.values())g=g.concat(_.G);return g}return y(d.i)}var C0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function l2(d,g){if(d){d=d.split("&");for(let _=0;_<d.length;_++){const N=d[_].indexOf("=");let V,U=null;N>=0?(V=d[_].substring(0,N),U=d[_].substring(N+1)):V=d[_],g(V,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Es(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;d instanceof Es?(this.l=d.l,yl(this,d.j),this.o=d.o,this.g=d.g,vl(this,d.u),this.h=d.h,bp(this,P0(d.i)),this.m=d.m):d&&(g=String(d).match(C0))?(this.l=!1,yl(this,g[1]||"",!0),this.o=wl(g[2]||""),this.g=wl(g[3]||"",!0),vl(this,g[4]),this.h=wl(g[5]||"",!0),bp(this,g[6]||"",!0),this.m=wl(g[7]||"")):(this.l=!1,this.i=new _l(null,this.l))}Es.prototype.toString=function(){const d=[];var g=this.j;g&&d.push(xl(g,I0,!0),":");var _=this.g;return(_||g=="file")&&(d.push("//"),(g=this.o)&&d.push(xl(g,I0,!0),"@"),d.push(Kn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&d.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(xl(_,_.charAt(0)=="/"?d2:u2,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",xl(_,f2)),d.join("")},Es.prototype.resolve=function(d){const g=_r(this);let _=!!d.j;_?yl(g,d.j):_=!!d.o,_?g.o=d.o:_=!!d.g,_?g.g=d.g:_=d.u!=null;var N=d.h;if(_)vl(g,d.u);else if(_=!!d.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var V=g.h.lastIndexOf("/");V!=-1&&(N=g.h.slice(0,V+1)+N)}if(V=N,V==".."||V==".")N="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){N=V.lastIndexOf("/",0)==0,V=V.split("/");const U=[];for(let te=0;te<V.length;){const be=V[te++];be=="."?N&&te==V.length&&U.push(""):be==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),N&&te==V.length&&U.push("")):(U.push(be),N=!0)}N=U.join("/")}else N=V}return _?g.h=N:_=d.i.toString()!=="",_?bp(g,P0(d.i)):_=!!d.m,_&&(g.m=d.m),g};function _r(d){return new Es(d)}function yl(d,g,_){d.j=_?wl(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function vl(d,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);d.u=g}else d.u=null}function bp(d,g,_){g instanceof _l?(d.i=g,p2(d.i,d.l)):(_||(g=xl(g,h2)),d.i=new _l(g,d.l))}function He(d,g,_){d.i.set(g,_)}function Nu(d){return He(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function wl(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function xl(d,g,_){return typeof d=="string"?(d=encodeURI(d).replace(g,c2),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function c2(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var I0=/[#\/\?@]/g,u2=/[#\?:]/g,d2=/[#\?]/g,h2=/[#\?@]/g,f2=/#/g;function _l(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Li(d){d.g||(d.g=new Map,d.h=0,d.i&&l2(d.i,function(g,_){d.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=_l.prototype,t.add=function(d,g){Li(this),this.i=null,d=Po(this,d);let _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(g),this.h+=1,this};function N0(d,g){Li(d),g=Po(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function A0(d,g){return Li(d),g=Po(d,g),d.g.has(g)}t.forEach=function(d,g){Li(this),this.g.forEach(function(_,N){_.forEach(function(V){d.call(g,V,N,this)},this)},this)};function k0(d,g){Li(d);let _=[];if(typeof g=="string")A0(d,g)&&(_=_.concat(d.g.get(Po(d,g))));else for(d=Array.from(d.g.values()),g=0;g<d.length;g++)_=_.concat(d[g]);return _}t.set=function(d,g){return Li(this),this.i=null,d=Po(this,d),A0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=k0(this,d),d.length>0?String(d[0]):g):g};function R0(d,g,_){N0(d,g),_.length>0&&(d.i=null,d.g.set(Po(d,g),y(_)),d.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(let N=0;N<g.length;N++){var _=g[N];const V=Kn(_);_=k0(this,_);for(let U=0;U<_.length;U++){let te=V;_[U]!==""&&(te+="="+Kn(_[U])),d.push(te)}}return this.i=d.join("&")};function P0(d){const g=new _l;return g.i=d.i,d.g&&(g.g=new Map(d.g),g.h=d.h),g}function Po(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function p2(d,g){g&&!d.j&&(Li(d),d.i=null,d.g.forEach(function(_,N){const V=N.toLowerCase();N!=V&&(N0(this,N),R0(this,V,_))},d)),d.j=g}function m2(d,g){const _=new an;if(o.Image){const N=new Image;N.onload=h(Ss,_,"TestLoadImage: loaded",!0,g,N),N.onerror=h(Ss,_,"TestLoadImage: error",!1,g,N),N.onabort=h(Ss,_,"TestLoadImage: abort",!1,g,N),N.ontimeout=h(Ss,_,"TestLoadImage: timeout",!1,g,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else g(!1)}function g2(d,g){const _=new an,N=new AbortController,V=setTimeout(()=>{N.abort(),Ss(_,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:N.signal}).then(U=>{clearTimeout(V),U.ok?Ss(_,"TestPingServer: ok",!0,g):Ss(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),Ss(_,"TestPingServer: error",!1,g)})}function Ss(d,g,_,N,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),N(_)}catch{}}function y2(){this.g=new Eu}function Ep(d){this.i=d.Sb||null,this.h=d.ab||!1}f(Ep,Gn),Ep.prototype.g=function(){return new Au(this.i,this.h)};function Au(d,g){Be.call(this),this.H=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Au,Be),t=Au.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=g,this.readyState=1,El(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(g.body=d),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bl(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,El(this)),this.g&&(this.readyState=3,El(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;D0(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function D0(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?bl(this):El(this),this.readyState==3&&D0(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,bl(this))},t.Na=function(d){this.g&&(this.response=d,bl(this))},t.ga=function(){this.g&&bl(this)};function bl(d){d.readyState=4,d.l=null,d.j=null,d.B=null,El(d)}t.setRequestHeader=function(d,g){this.A.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=g.next();return d.join(`\r
`)};function El(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function j0(d){let g="";return L(d,function(_,N){g+=N,g+=":",g+=_,g+=`\r
`}),g}function Sp(d,g,_){e:{for(N in _){var N=!1;break e}N=!0}N||(_=j0(_),typeof d=="string"?_!=null&&Kn(_):He(d,g,_))}function et(d){Be.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(et,Be);var v2=/^https?$/i,w2=["POST","PUT"];t=et.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,g,_,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():jn.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(U){O0(this,U);return}if(d=_||"",_=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var V in N)_.set(V,N[V]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const U of N.keys())_.set(U,N.get(U));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(_.keys()).find(U=>U.toLowerCase()=="content-type"),V=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(w2,g,void 0)>=0)||N||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,te]of _)this.g.setRequestHeader(U,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(U){O0(this,U)}};function O0(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.o=5,M0(d),ku(d)}function M0(d){d.A||(d.A=!0,Ke(d,"complete"),Ke(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Ke(this,"complete"),Ke(this,"abort"),ku(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ku(this,!0)),et.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?L0(this):this.Xa())},t.Xa=function(){L0(this)};function L0(d){if(d.h&&typeof i<"u"){if(d.v&&Ts(d)==4)setTimeout(d.Ca.bind(d),0);else if(Ke(d,"readystatechange"),Ts(d)==4){d.h=!1;try{const U=d.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var N;if(N=U===0){let te=String(d.D).match(C0)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),N=!v2.test(te?te.toLowerCase():"")}_=N}if(_)Ke(d,"complete"),Ke(d,"success");else{d.o=6;try{var V=Ts(d)>2?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.ca()+"]",M0(d)}}finally{ku(d)}}}}function ku(d,g){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const _=d.g;d.g=null,g||Ke(d,"ready");try{_.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ts(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Ts(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Ri(g)}};function V0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function x2(d){const g={};d=(d.g&&Ts(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(R(d[N]))continue;var _=xr(d[N]);const V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const U=g[V]||[];g[V]=U,U.push(_)}F(g,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Sl(d,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||g}function F0(d){this.za=0,this.i=[],this.j=new an,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Sl("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Sl("baseRetryDelayMs",5e3,d),this.Za=Sl("retryDelaySeedMs",1e4,d),this.Ta=Sl("forwardChannelMaxRetries",2,d),this.va=Sl("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new _0(d&&d.concurrentRequestLimit),this.Ba=new y2,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=F0.prototype,t.ka=8,t.I=1,t.connect=function(d,g,_,N){Pe(0),this.W=d,this.H=g||{},_&&N!==void 0&&(this.H.OSID=_,this.H.OAID=N),this.F=this.X,this.J=K0(this,null,this.W),Pu(this)};function Tp(d){if(U0(d),d.I==3){var g=d.V++,_=_r(d.J);if(He(_,"SID",d.M),He(_,"RID",g),He(_,"TYPE","terminate"),Tl(d,_),g=new cn(d,d.j,g),g.M=2,g.A=Nu(_r(_)),_=!1,o.navigator&&o.navigator.sendBeacon)try{_=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&o.Image&&(new Image().src=g.A,_=!0),_||(g.g=Q0(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Iu(g)}G0(d)}function Ru(d){d.g&&(Ip(d),d.g.cancel(),d.g=null)}function U0(d){Ru(d),d.v&&(o.clearTimeout(d.v),d.v=null),Du(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Pu(d){if(!b0(d.h)&&!d.m){d.m=!0;var g=d.Ea;D||C(),O||(D(),O=!0),T.add(g,d),d.D=0}}function _2(d,g){return E0(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=g.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ht(u(d.Ea,d,g),q0(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const V=new cn(this,this.j,d);let U=this.o;if(this.U&&(U?(U=B(U),X(U,this.U)):U=this.U),this.u!==null||this.R||(V.J=U,U=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var N=this.i[_];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=$0(this,V,g),_=_r(this.J),He(_,"RID",d),He(_,"CVER",22),this.G&&He(_,"X-HTTP-Session-Id",this.G),Tl(this,_),U&&(this.R?g="headers="+Kn(j0(U))+"&"+g:this.u&&Sp(_,this.u,U)),_p(this.h,V),this.Ra&&He(_,"TYPE","init"),this.S?(He(_,"$req",g),He(_,"SID","null"),V.U=!0,yp(V,_,null)):yp(V,_,g),this.I=2}}else this.I==3&&(d?z0(this,d):this.i.length==0||b0(this.h)||z0(this))};function z0(d,g){var _;g?_=g.l:_=d.V++;const N=_r(d.J);He(N,"SID",d.M),He(N,"RID",_),He(N,"AID",d.K),Tl(d,N),d.u&&d.o&&Sp(N,d.u,d.o),_=new cn(d,d.j,_,d.D+1),d.u===null&&(_.J=d.o),g&&(d.i=g.G.concat(d.i)),g=$0(d,_,1e3),_.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),_p(d.h,_),yp(_,N,g)}function Tl(d,g){d.H&&L(d.H,function(_,N){He(g,N,_)}),d.l&&L({},function(_,N){He(g,N,_)})}function $0(d,g,_){_=Math.min(d.i.length,_);const N=d.l?u(d.l.Ka,d.l,d):null;e:{var V=d.i;let be=-1;for(;;){const pt=["count="+_];be==-1?_>0?(be=V[0].g,pt.push("ofs="+be)):be=0:pt.push("ofs="+be);let Fe=!0;for(let bt=0;bt<_;bt++){var U=V[bt].g;const br=V[bt].map;if(U-=be,U<0)be=Math.max(0,V[bt].g-100),Fe=!1;else try{U="req"+U+"_"||"";try{var te=br instanceof Map?br:Object.entries(br);for(const[Fi,Cs]of te){let Is=Cs;a(Cs)&&(Is=vr(Cs)),pt.push(U+Fi+"="+encodeURIComponent(Is))}}catch(Fi){throw pt.push(U+"type="+encodeURIComponent("_badmap")),Fi}}catch{N&&N(br)}}if(Fe){te=pt.join("&");break e}}te=void 0}return d=d.i.splice(0,_),g.G=d,te}function B0(d){if(!d.g&&!d.v){d.Y=1;var g=d.Da;D||C(),O||(D(),O=!0),T.add(g,d),d.A=0}}function Cp(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ht(u(d.Da,d),q0(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,H0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ht(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pe(10),Ru(this),H0(this))};function Ip(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function H0(d){d.g=new cn(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var g=_r(d.na);He(g,"RID","rpc"),He(g,"SID",d.M),He(g,"AID",d.K),He(g,"CI",d.F?"0":"1"),!d.F&&d.ia&&He(g,"TO",d.ia),He(g,"TYPE","xmlhttp"),Tl(d,g),d.u&&d.o&&Sp(g,d.u,d.o),d.O&&(d.g.H=d.O);var _=d.g;d=d.ba,_.M=1,_.A=Nu(_r(g)),_.u=null,_.R=!0,v0(_,d)}t.Va=function(){this.C!=null&&(this.C=null,Ru(this),Cp(this),Pe(19))};function Du(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function W0(d,g){var _=null;if(d.g==g){Du(d),Ip(d),d.g=null;var N=2}else if(xp(d.h,g))_=g.G,S0(d.h,g),N=1;else return;if(d.I!=0){if(g.o)if(N==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var V=d.D;N=ji(),Ke(N,new Ot(N,_)),Pu(d)}else B0(d);else if(V=g.m,V==3||V==0&&g.X>0||!(N==1&&_2(d,g)||N==2&&Cp(d)))switch(_&&_.length>0&&(g=d.h,g.i=g.i.concat(_)),V){case 1:Vi(d,5);break;case 4:Vi(d,10);break;case 3:Vi(d,6);break;default:Vi(d,2)}}}function q0(d,g){let _=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(_*=2),_*g}function Vi(d,g){if(d.j.info("Error code "+g),g==2){var _=u(d.bb,d),N=d.Ua;const V=!N;N=new Es(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||yl(N,"https"),Nu(N),V?m2(N.toString(),_):g2(N.toString(),_)}else Pe(2);d.I=0,d.l&&d.l.pa(g),G0(d),U0(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function G0(d){if(d.I=0,d.ja=[],d.l){const g=T0(d.h);(g.length!=0||d.i.length!=0)&&(x(d.ja,g),x(d.ja,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.oa()}}function K0(d,g,_){var N=_ instanceof Es?_r(_):new Es(_);if(N.g!="")g&&(N.g=g+"."+N.g),vl(N,N.u);else{var V=o.location;N=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;const U=new Es(null);N&&yl(U,N),g&&(U.g=g),V&&vl(U,V),_&&(U.h=_),N=U}return _=d.G,g=d.wa,_&&g&&He(N,_,g),He(N,"VER",d.ka),Tl(d,N),N}function Q0(d,g,_){if(g&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Aa&&!d.ma?new et(new Ep({ab:_})):new et(d.ma),g.Fa(d.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function X0(){}t=X0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ju(){}ju.prototype.g=function(d,g){return new xn(d,g)};function xn(d,g){Be.call(this),this.g=new F0(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(d?d["X-WebChannel-Client-Profile"]=g.sa:d={"X-WebChannel-Client-Profile":g.sa}),this.g.U=d,(d=g&&g.Qb)&&!R(d)&&(this.g.u=d),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.G=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Do(this)}f(xn,Be),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Tp(this.g)},xn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.v&&(_={},_.__data__=vr(d),d=_);g.i.push(new a2(g.Ya++,d)),g.I==3&&Pu(g)},xn.prototype.N=function(){this.g.l=null,delete this.j,Tp(this.g),delete this.g,xn.Z.N.call(this)};function Y0(d){ml.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const _ in g){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}f(Y0,ml);function J0(){Di.call(this),this.status=1}f(J0,Di);function Do(d){this.g=d}f(Do,X0),Do.prototype.ra=function(){Ke(this.g,"a")},Do.prototype.qa=function(d){Ke(this.g,new Y0(d))},Do.prototype.pa=function(d){Ke(this.g,new J0)},Do.prototype.oa=function(){Ke(this.g,"b")},ju.prototype.createWebChannel=ju.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,uN=function(){return new ju},cN=function(){return ji()},lN=wr,Yg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vn.NO_ERROR=0,vn.TIMEOUT=8,vn.HTTP_ERROR=6,Vd=vn,wn.COMPLETE="complete",aN=wn,pl.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",Be.prototype.listen=Be.prototype.J,Ul=pl,et.prototype.listenOnce=et.prototype.K,et.prototype.getLastError=et.prototype.Ha,et.prototype.getLastErrorCode=et.prototype.ya,et.prototype.getStatus=et.prototype.ca,et.prototype.getResponseJson=et.prototype.La,et.prototype.getResponseText=et.prototype.la,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Fa,oN=et}).apply(typeof od<"u"?od:typeof self<"u"?self:typeof window<"u"?window:{});const v1="@firebase/firestore",w1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=new zv("@firebase/firestore");function Vo(){return yo.logLevel}function oe(t,...e){if(yo.logLevel<=Ce.DEBUG){const n=e.map(ew);yo.debug(`Firestore (${rl}): ${t}`,...n)}}function ms(t,...e){if(yo.logLevel<=Ce.ERROR){const n=e.map(ew);yo.error(`Firestore (${rl}): ${t}`,...n)}}function vo(t,...e){if(yo.logLevel<=Ce.WARN){const n=e.map(ew);yo.warn(`Firestore (${rl}): ${t}`,...n)}}function ew(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,dN(t,r,n)}function dN(t,e,n){let r=`FIRESTORE (${rl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ms(r),new Error(r)}function Oe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||dN(e,s,r)}function xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class hF{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fF{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new li;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new li,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new li)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string",31837,{l:r}),new hN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class pF{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class mF{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new pF(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class x1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gF{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,nr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const r=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new x1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new x1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=yF(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function Jg(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return vm(s)===vm(i)?Ie(s,i):vm(s)?1:-1}return Ie(t.length,e.length)}const vF=55296,wF=57343;function vm(t){const e=t.charCodeAt(0);return e>=vF&&e<=wF}function Ua(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1="__name__";class Tr{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Tr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Tr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=Tr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Ie(e.length,n.length)}static compareSegments(e,n){const r=Tr.isNumericId(e),s=Tr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Tr.extractNumericId(e).compare(Tr.extractNumericId(n)):Jg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}}class Ue extends Tr{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(H.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const xF=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ct extends Tr{construct(e,n,r){return new Ct(e,n,r)}static isValidIdentifier(e){return xF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_1}static keyField(){return new Ct([_1])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new se(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new se(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new se(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ct(n)}static emptyPath(){return new Ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Ue.fromString(e))}static fromName(e){return new le(Ue.fromString(e).popFirst(5))}static empty(){return new le(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(t,e,n){if(!n)throw new se(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function mN(t,e,n,r){if(e===!0&&r===!0)throw new se(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b1(t){if(!le.isDocumentKey(t))throw new se(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function E1(t){if(le.isDocumentKey(t))throw new se(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gN(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Lf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function rs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lf(t);throw new se(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(t,e){const n={typeString:t};return e&&(n.value=e),n}function du(t,e){if(!gN(t))throw new se(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new se(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=-62135596800,T1=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*T1);return new ze(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S1)throw new se(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/T1}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,ze._jsonSchema))return new ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:ut("string",ze._jsonSchemaVersion),seconds:ut("number"),nanoseconds:ut("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new ze(0,0))}static max(){return new we(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=-1;function _F(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new gi(s,le.empty(),e)}function bF(t){return new gi(t.readTime,t.key,Oc)}class gi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gi(we.min(),le.empty(),Oc)}static max(){return new gi(we.max(),le.empty(),Oc)}}function EF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==SF)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(s=>s?q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function CF(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function il(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw=-1;function Ff(t){return t==null}function Ah(t){return t===0&&1/t==-1/0}function IF(t){return typeof t=="number"&&Number.isInteger(t)&&!Ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="";function NF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=C1(e)),e=AF(t.get(n),e);return C1(e)}function AF(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case yN:n+="";break;default:n+=i}}return n}function C1(t){return t+yN+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||Rt.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rt.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ad(this.root,e,this.comparator,!0)}}class ad{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rt.RED,this.left=s??Rt.EMPTY,this.right=i??Rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1;Rt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new N1(this.data.getIterator())}getIteratorFrom(e){return new N1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class N1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(Ct.comparator)}static empty(){return new sr([])}unionWith(e){let n=new xt(Ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new sr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new wN("Invalid base64 string: "+i):i}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const kF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yi(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=kF.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:it(t.seconds),nanos:it(t.nanos)}}function it(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vi(t){return typeof t=="string"?Nt.fromBase64String(t):Nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN="server_timestamp",_N="__type__",bN="__previous_value__",EN="__local_write_time__";function nw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[_N])==null?void 0:r.stringValue)===xN}function Uf(t){const e=t.mapValue.fields[bN];return nw(e)?Uf(e):e}function Mc(t){const e=yi(t.mapValue.fields[EN].timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,n,r,s,i,o,a,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=h}}const kh="(default)";class za{constructor(e,n){this.projectId=e,this.database=n||kh}static empty(){return new za("","")}get isDefaultDatabase(){return this.database===kh}isEqual(e){return e instanceof za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN="__type__",TN="__max__",ld={mapValue:{fields:{__type__:{stringValue:TN}}}},CN="__vector__",Rh="value";function wi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nw(t)?4:DF(t)?9007199254740991:PF(t)?10:11:fe(28295,{value:t})}function Ur(t,e){if(t===e)return!0;const n=wi(t);if(n!==wi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Mc(t).isEqual(Mc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=yi(s.timestampValue),a=yi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vi(s.bytesValue).isEqual(vi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return it(s.geoPointValue.latitude)===it(i.geoPointValue.latitude)&&it(s.geoPointValue.longitude)===it(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return it(s.integerValue)===it(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=it(s.doubleValue),a=it(i.doubleValue);return o===a?Ah(o)===Ah(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ua(t.arrayValue.values||[],e.arrayValue.values||[],Ur);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(I1(o)!==I1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ur(o[l],a[l])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function Lc(t,e){return(t.values||[]).find(n=>Ur(n,e))!==void 0}function $a(t,e){if(t===e)return 0;const n=wi(t),r=wi(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=it(i.integerValue||i.doubleValue),l=it(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return A1(t.timestampValue,e.timestampValue);case 4:return A1(Mc(t),Mc(e));case 5:return Jg(t.stringValue,e.stringValue);case 6:return function(i,o){const a=vi(i),l=vi(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=Ie(a[u],l[u]);if(h!==0)return h}return Ie(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Ie(it(i.latitude),it(o.latitude));return a!==0?a:Ie(it(i.longitude),it(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,y,x,v;const a=i.fields||{},l=o.fields||{},u=(m=a[Rh])==null?void 0:m.arrayValue,h=(y=l[Rh])==null?void 0:y.arrayValue,f=Ie(((x=u==null?void 0:u.values)==null?void 0:x.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:k1(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ld.mapValue&&o===ld.mapValue)return 0;if(i===ld.mapValue)return 1;if(o===ld.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const m=Jg(l[f],h[f]);if(m!==0)return m;const y=$a(a[l[f]],u[h[f]]);if(y!==0)return y}return Ie(l.length,h.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function A1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=yi(t),r=yi(e),s=Ie(n.seconds,r.seconds);return s!==0?s:Ie(n.nanos,r.nanos)}function k1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$a(n[s],r[s]);if(i)return i}return Ie(n.length,r.length)}function Ba(t){return Zg(t)}function Zg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Zg(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Zg(n.fields[o])}`;return s+"}"}(t.mapValue):fe(61005,{value:t})}function Fd(t){switch(wi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Uf(t);return e?16+Fd(e):16;case 5:return 2*t.stringValue.length;case 6:return vi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Fd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Co(r.fields,(i,o)=>{s+=i.length+Fd(o)}),s}(t.mapValue);default:throw fe(13486,{value:t})}}function R1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ey(t){return!!t&&"integerValue"in t}function rw(t){return!!t&&"arrayValue"in t}function P1(t){return!!t&&"nullValue"in t}function D1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ud(t){return!!t&&"mapValue"in t}function PF(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[SN])==null?void 0:r.stringValue)===CN}function rc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=rc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=rc(t.arrayValue.values[n]);return e}return{...t}}function DF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ud(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(n)}setAll(e){let n=Ct.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=rc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ud(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ur(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ud(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Co(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Fn(rc(this.value))}}function IN(t){const e=[];return Co(t.fields,(n,r)=>{const s=new Ct([n]);if(Ud(r)){const i=IN(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Bt(e,0,we.min(),we.min(),we.min(),Fn.empty(),0)}static newFoundDocument(e,n,r,s){return new Bt(e,1,n,we.min(),r,s,0)}static newNoDocument(e,n){return new Bt(e,2,n,we.min(),we.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new Bt(e,3,n,we.min(),we.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.position=e,this.inclusive=n}}function j1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=$a(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function O1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ur(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function jF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{}class ct extends NN{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new MF(e,n,r):n==="array-contains"?new FF(e,r):n==="in"?new UF(e,r):n==="not-in"?new zF(e,r):n==="array-contains-any"?new $F(e,r):new ct(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LF(e,r):new VF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($a(n,this.value)):n!==null&&wi(this.value)===wi(n)&&this.matchesComparison($a(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends NN{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new pr(e,n)}matches(e){return AN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function AN(t){return t.op==="and"}function kN(t){return OF(t)&&AN(t)}function OF(t){for(const e of t.filters)if(e instanceof pr)return!1;return!0}function ty(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+Ba(t.value);if(kN(t))return t.filters.map(e=>ty(e)).join(",");{const e=t.filters.map(n=>ty(n)).join(",");return`${t.op}(${e})`}}function RN(t,e){return t instanceof ct?function(r,s){return s instanceof ct&&r.op===s.op&&r.field.isEqual(s.field)&&Ur(r.value,s.value)}(t,e):t instanceof pr?function(r,s){return s instanceof pr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&RN(o,s.filters[a]),!0):!1}(t,e):void fe(19439)}function PN(t){return t instanceof ct?function(n){return`${n.field.canonicalString()} ${n.op} ${Ba(n.value)}`}(t):t instanceof pr?function(n){return n.op.toString()+" {"+n.getFilters().map(PN).join(" ,")+"}"}(t):"Filter"}class MF extends ct{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class LF extends ct{constructor(e,n){super(e,"in",n),this.keys=DN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VF extends ct{constructor(e,n){super(e,"not-in",n),this.keys=DN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DN(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class FF extends ct{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return rw(n)&&Lc(n.arrayValue,this.value)}}class UF extends ct{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Lc(this.value.arrayValue,n)}}class zF extends ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Lc(this.value.arrayValue,n)}}class $F extends ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!rw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Lc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function M1(t,e=null,n=[],r=[],s=null,i=null,o=null){return new BF(t,e,n,r,s,i,o)}function sw(t){const e=xe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ty(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ff(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ba(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ba(r)).join(",")),e.Te=n}return e.Te}function iw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!O1(t.startAt,e.startAt)&&O1(t.endAt,e.endAt)}function ny(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function HF(t,e,n,r,s,i,o,a){return new ol(t,e,n,r,s,i,o,a)}function zf(t){return new ol(t)}function L1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jN(t){return t.collectionGroup!==null}function sc(t){const e=xe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new xt(Ct.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Vc(i,r))}),n.has(Ct.keyField().canonicalString())||e.Ie.push(new Vc(Ct.keyField(),r))}return e.Ie}function Mr(t){const e=xe(t);return e.Ee||(e.Ee=WF(e,sc(t))),e.Ee}function WF(t,e){if(t.limitType==="F")return M1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Vc(s.field,i)});const n=t.endAt?new Ph(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ph(t.startAt.position,t.startAt.inclusive):null;return M1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ry(t,e){const n=t.filters.concat([e]);return new ol(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Dh(t,e,n){return new ol(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $f(t,e){return iw(Mr(t),Mr(e))&&t.limitType===e.limitType}function ON(t){return`${sw(Mr(t))}|lt:${t.limitType}`}function Fo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>PN(s)).join(", ")}]`),Ff(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ba(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ba(s)).join(",")),`Target(${r})`}(Mr(t))}; limitType=${t.limitType})`}function Bf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):le.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of sc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=j1(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,sc(r),s)||r.endAt&&!function(o,a,l){const u=j1(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,sc(r),s))}(t,e)}function qF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function MN(t){return(e,n)=>{let r=!1;for(const s of sc(t)){const i=GF(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function GF(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?$a(l,u):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return vN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KF=new Ze(le.comparator);function gs(){return KF}const LN=new Ze(le.comparator);function zl(...t){let e=LN;for(const n of t)e=e.insert(n.key,n);return e}function VN(t){let e=LN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gi(){return ic()}function FN(){return ic()}function ic(){return new Io(t=>t.toString(),(t,e)=>t.isEqual(e))}const QF=new Ze(le.comparator),XF=new xt(le.comparator);function Ne(...t){let e=XF;for(const n of t)e=e.add(n);return e}const YF=new xt(Ie);function JF(){return YF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ah(e)?"-0":e}}function UN(t){return{integerValue:""+t}}function ZF(t,e){return IF(e)?UN(e):ow(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this._=void 0}}function e9(t,e,n){return t instanceof Fc?function(s,i){const o={fields:{[_N]:{stringValue:xN},[EN]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&nw(i)&&(i=Uf(i)),i&&(o.fields[bN]=i),{mapValue:o}}(n,e):t instanceof Uc?$N(t,e):t instanceof zc?BN(t,e):function(s,i){const o=zN(s,i),a=V1(o)+V1(s.Ae);return ey(o)&&ey(s.Ae)?UN(a):ow(s.serializer,a)}(t,e)}function t9(t,e,n){return t instanceof Uc?$N(t,e):t instanceof zc?BN(t,e):n}function zN(t,e){return t instanceof jh?function(r){return ey(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Fc extends Hf{}class Uc extends Hf{constructor(e){super(),this.elements=e}}function $N(t,e){const n=HN(e);for(const r of t.elements)n.some(s=>Ur(s,r))||n.push(r);return{arrayValue:{values:n}}}class zc extends Hf{constructor(e){super(),this.elements=e}}function BN(t,e){let n=HN(e);for(const r of t.elements)n=n.filter(s=>!Ur(s,r));return{arrayValue:{values:n}}}class jh extends Hf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function V1(t){return it(t.integerValue||t.doubleValue)}function HN(t){return rw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n9{constructor(e,n){this.field=e,this.transform=n}}function r9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Uc&&s instanceof Uc||r instanceof zc&&s instanceof zc?Ua(r.elements,s.elements,Ur):r instanceof jh&&s instanceof jh?Ur(r.Ae,s.Ae):r instanceof Fc&&s instanceof Fc}(t.transform,e.transform)}class s9{constructor(e,n){this.version=e,this.transformResults=n}}class ss{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wf{}function WN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new GN(t.key,ss.none()):new hu(t.key,t.data,ss.none());{const n=t.data,r=Fn.empty();let s=new xt(Ct.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new No(t.key,r,new sr(s.toArray()),ss.none())}}function i9(t,e,n){t instanceof hu?function(s,i,o){const a=s.value.clone(),l=U1(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof No?function(s,i,o){if(!zd(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=U1(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(qN(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function oc(t,e,n,r){return t instanceof hu?function(i,o,a,l){if(!zd(i.precondition,o))return a;const u=i.value.clone(),h=z1(i.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof No?function(i,o,a,l){if(!zd(i.precondition,o))return a;const u=z1(i.fieldTransforms,l,o),h=o.data;return h.setAll(qN(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return zd(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function o9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=zN(r.transform,s||null);i!=null&&(n===null&&(n=Fn.empty()),n.set(r.field,i))}return n||null}function F1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ua(r,s,(i,o)=>r9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hu extends Wf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class No extends Wf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function qN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function U1(t,e,n){const r=new Map;Oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,t9(o,a,n[s]))}return r}function z1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,e9(i,o,e))}return r}class GN extends Wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class a9 extends Wf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&i9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FN();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=WN(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(n,r)=>F1(n,r))&&Ua(this.baseMutations,e.baseMutations,(n,r)=>F1(n,r))}}class aw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return QF}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new aw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c9=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,ke;function d9(t){switch(t){case H.OK:return fe(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function KN(t){if(t===void 0)return ms("GRPC error has no .code"),H.UNKNOWN;switch(t){case at.OK:return H.OK;case at.CANCELLED:return H.CANCELLED;case at.UNKNOWN:return H.UNKNOWN;case at.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case at.INTERNAL:return H.INTERNAL;case at.UNAVAILABLE:return H.UNAVAILABLE;case at.UNAUTHENTICATED:return H.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case at.NOT_FOUND:return H.NOT_FOUND;case at.ALREADY_EXISTS:return H.ALREADY_EXISTS;case at.PERMISSION_DENIED:return H.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case at.ABORTED:return H.ABORTED;case at.OUT_OF_RANGE:return H.OUT_OF_RANGE;case at.UNIMPLEMENTED:return H.UNIMPLEMENTED;case at.DATA_LOSS:return H.DATA_LOSS;default:return fe(39323,{code:t})}}(ke=at||(at={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=new ai([4294967295,4294967295],0);function $1(t){const e=h9().encode(t),n=new iN;return n.update(e),new Uint8Array(n.digest())}function B1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ai([n,r],0),new ai([s,i],0)]}class lw{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $l(`Invalid padding: ${n}`);if(r<0)throw new $l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $l(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ai.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ai.fromNumber(r)));return s.compare(f9)===1&&(s=new ai([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$1(e),[r,s]=B1(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new lw(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=$1(e),[r,s]=B1(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qf(we.min(),s,new Ze(Ie),gs(),Ne())}}class fu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fu(r,n,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class QN{constructor(e,n){this.targetId=e,this.Ce=n}}class XN{constructor(e,n,r=Nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class H1{constructor(){this.ve=0,this.Fe=W1(),this.Me=Nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ne(),n=Ne(),r=Ne();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:fe(38017,{changeType:i})}}),new fu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=W1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class p9{constructor(e){this.Ge=e,this.ze=new Map,this.je=gs(),this.Je=cd(),this.He=cd(),this.Ye=new Ze(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ny(i))if(r===0){const o=new le(i.path);this.et(n,o,Bt.newNoDocument(o,we.min()))}else Oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=vi(r).toUint8Array()}catch(l){if(l instanceof wN)return vo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new lw(o,s,i)}catch(l){return vo(l instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const a=this.ot(o);if(a){if(i.current&&ny(a.target)){const l=new le(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,Bt.newNoDocument(l,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ne();this.He.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new qf(e,n,this.Ye,this.je,r);return this.je=gs(),this.Je=cd(),this.He=cd(),this.Ye=new Ze(Ie),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new H1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xt(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xt(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new H1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cd(){return new Ze(le.comparator)}function W1(){return new Ze(le.comparator)}const m9={asc:"ASCENDING",desc:"DESCENDING"},g9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y9={and:"AND",or:"OR"};class v9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sy(t,e){return t.useProto3Json||Ff(e)?e:{value:e}}function Oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w9(t,e){return Oh(t,e.toTimestamp())}function Lr(t){return Oe(!!t,49232),we.fromTimestamp(function(n){const r=yi(n);return new ze(r.seconds,r.nanos)}(t))}function cw(t,e){return iy(t,e).canonicalString()}function iy(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function JN(t){const e=Ue.fromString(t);return Oe(rA(e),10190,{key:e.toString()}),e}function oy(t,e){return cw(t.databaseId,e.path)}function wm(t,e){const n=JN(e);if(n.get(1)!==t.databaseId.projectId)throw new se(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(eA(n))}function ZN(t,e){return cw(t.databaseId,e)}function x9(t){const e=JN(t);return e.length===4?Ue.emptyPath():eA(e)}function ay(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eA(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function q1(t,e,n){return{name:oy(t,e),fields:n.value.mapValue.fields}}function _9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:fe(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Oe(h===void 0||typeof h=="string",58123),Nt.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?H.UNKNOWN:KN(u.code);return new se(h,u.message||"")}(o);n=new XN(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=wm(t,r.document.name),i=Lr(r.document.updateTime),o=r.document.createTime?Lr(r.document.createTime):we.min(),a=new Fn({mapValue:{fields:r.document.fields}}),l=Bt.newFoundDocument(s,i,o,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new $d(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=wm(t,r.document),i=r.readTime?Lr(r.readTime):we.min(),o=Bt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new $d([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=wm(t,r.document),i=r.removedTargetIds||[];n=new $d([],i,s,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new u9(s,i),a=r.targetId;n=new QN(a,o)}}return n}function b9(t,e){let n;if(e instanceof hu)n={update:q1(t,e.key,e.value)};else if(e instanceof GN)n={delete:oy(t,e.key)};else if(e instanceof No)n={update:q1(t,e.key,e.data),updateMask:R9(e.fieldMask)};else{if(!(e instanceof a9))return fe(16599,{Vt:e.type});n={verify:oy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Fc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Uc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof jh)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:w9(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:fe(27497)}(t,e.precondition)),n}function E9(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Lr(s.updateTime):Lr(i);return o.isEqual(we.min())&&(o=Lr(i)),new s9(o,s.transformResults||[])}(n,e))):[]}function S9(t,e){return{documents:[ZN(t,e.path)]}}function T9(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZN(t,s);const i=function(u){if(u.length!==0)return nA(pr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Uo(m.field),direction:N9(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=sy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function C9(t){let e=x9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Oe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=tA(f);return m instanceof pr&&kN(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(x){return new Vc(zo(x.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Ff(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(f){const m=!!f.before,y=f.values||[];return new Ph(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,y=f.values||[];return new Ph(y,m)}(n.endAt)),HF(e,s,o,i,a,"F",l,u)}function I9(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function tA(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=zo(n.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=zo(n.unaryFilter.field);return ct.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=zo(n.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=zo(n.unaryFilter.field);return ct.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return ct.create(zo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pr.create(n.compositeFilter.filters.map(r=>tA(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function N9(t){return m9[t]}function A9(t){return g9[t]}function k9(t){return y9[t]}function Uo(t){return{fieldPath:t.canonicalString()}}function zo(t){return Ct.fromServerFormat(t.fieldPath)}function nA(t){return t instanceof ct?function(n){if(n.op==="=="){if(D1(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NAN"}};if(P1(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(D1(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NAN"}};if(P1(n.value))return{unaryFilter:{field:Uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(n.field),op:A9(n.op),value:n.value}}}(t):t instanceof pr?function(n){const r=n.getFilters().map(s=>nA(s));return r.length===1?r[0]:{compositeFilter:{op:k9(n.op),filters:r}}}(t):fe(54877,{filter:t})}function R9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n,r,s,i=we.min(),o=we.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P9{constructor(e){this.yt=e}}function D9(t){const e=C9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Dh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(){this.Cn=new O9}addToCollectionParentIndex(e,n){return this.Cn.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(gi.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class O9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xt(Ue.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sA=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(sA,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ha(0)}static cr(){return new Ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="LruGarbageCollector",M9=1048576;function Q1([t,e],[n,r]){const s=Ie(t,n);return s===0?Ie(e,r):s}class L9{constructor(e){this.Ir=e,this.buffer=new xt(Q1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Q1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class V9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(K1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){il(n)?oe(K1,"Ignoring IndexedDB error during garbage collection: ",n):await sl(n)}await this.Vr(3e5)})}}class F9{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return q.resolve(Vf.ce);const r=new L9(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(G1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,a,l,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Vo()<=Ce.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-h}ms`),q.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function U9(t,e){return new F9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z9{constructor(){this.changes=new Io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B9{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&oc(r.mutation,s,sr.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ne()){const s=Gi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=zl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=gs();const o=ic(),a=function(){return ic()}();return n.forEach((l,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof No)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),oc(h.mutation,u,h.mutation.getFieldMask(),ze.now())):o.set(u.key,sr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>a.set(u,new $9(h,o.get(u)??null))),a))}recalculateAndSaveOverlays(e,n){const r=ic();let s=new Ze((o,a)=>o-a),i=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||sr.empty();h=a.applyToLocalView(u,h),r.set(l,h);const f=(s.get(a.batchId)||Ne()).add(l);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,f=FN();h.forEach(m=>{if(!i.has(m)){const y=WN(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):q.resolve(Gi());let a=Oc,l=i;return o.next(u=>q.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?q.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Ne())).next(h=>({batchId:a,changes:VN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let s=zl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=zl();return this.indexManager.getCollectionParents(e,i).next(a=>q.forEach(a,l=>{const u=function(f,m){return new ol(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Bt.newInvalidDocument(h)))});let a=zl();return o.forEach((l,u)=>{const h=i.get(l);h!==void 0&&oc(h.mutation,u,sr.empty(),ze.now()),Bf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Lr(s.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:D9(s.bundledQuery),readTime:Lr(s.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(){this.overlays=new Ze(le.comparator),this.qr=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gi();return q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const s=Gi(),i=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ze((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Gi(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=Gi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=s)););return q.resolve(a)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new c9(n,r));let i=this.qr.get(n);i===void 0&&(i=Ne(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q9{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(){this.Qr=new xt(Et.$r),this.Ur=new xt(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new le(new Ue([])),r=new Et(n,e),s=new Et(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new le(new Ue([])),r=new Et(n,e),s=new Et(n,e+1);let i=Ne();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return le.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G9{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Et.$r)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new l9(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new Et(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?tw:this.tr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const a=this.Xr(o.Yr);i.push(a)}),q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(Ie);return n.forEach(s=>{const i=new Et(s,0),o=new Et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],a=>{r=r.add(a.Yr)})}),q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;le.isDocumentKey(i)||(i=i.child(""));const o=new Et(new le(i),0);let a=new xt(Ie);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)},o),q.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return q.forEach(n.mutations,s=>{const i=new Et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Et(n,0),s=this.Zr.firstAfterOrEqual(r);return q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e){this.ri=e,this.docs=function(){return new Ze(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():Bt.newInvalidDocument(n))}getEntries(e,n){let r=gs();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Bt.newInvalidDocument(s))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=gs();const o=n.path,a=new le(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||EF(bF(h),r)<=0||(s.has(h.key)||Bf(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){fe(9500)}ii(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Q9(this)}getSize(e){return q.resolve(this.size)}}class Q9 extends z9{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(e){this.persistence=e,this.si=new Io(n=>sw(n),iw),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new uw,this.targetCount=0,this.ai=Ha.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ha(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Pr(n),q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),q.waitFor(i).next(()=>s)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n){this.ui={},this.overlays={},this.ci=new Vf(0),this.li=!1,this.li=!0,this.hi=new q9,this.referenceDelegate=e(this),this.Pi=new X9(this),this.indexManager=new j9,this.remoteDocumentCache=function(s){return new K9(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new P9(n),this.Ii=new H9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W9,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new G9(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const s=new Y9(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Y9 extends TF{constructor(e){super(),this.currentSequenceNumber=e}}class dw{constructor(e){this.persistence=e,this.Ri=new uw,this.Vi=null}static mi(e){return new dw(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.fi,r=>{const s=le.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return q.or([()=>q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Mh{constructor(e,n){this.persistence=e,this.pi=new Io(r=>NF(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=U9(this,n)}static mi(e,n){return new Mh(e,n)}Ei(){}di(e){return q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return q.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?q.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,i.removeEntry(o,we.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Fd(e.data.value)),n}br(e,n,r){return q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return q.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ne(),s=Ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new hw(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return qV()?8:CF(qt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new J9;return this.Ss(e,n,o).next(a=>{if(i.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Vo()<=Ce.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),q.resolve()):(Vo()<=Ce.DEBUG&&oe("QueryEngine","Query:",Fo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Vo()<=Ce.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mr(n))):q.resolve())}ys(e,n){if(L1(n))return q.resolve(null);let r=Mr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Dh(n,null,"F"),r=Mr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ne(...i);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Ds(n,a);return this.Cs(n,u,o,l.readTime)?this.ys(e,Dh(n,null,"F")):this.vs(e,u,n,l)}))})))}ws(e,n,r,s){return L1(n)||s.isEqual(we.min())?q.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?q.resolve(null):(Vo()<=Ce.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fo(n)),this.vs(e,o,n,_F(s,Oc)).next(a=>a))})}Ds(e,n){let r=new xt(MN(e));return n.forEach((s,i)=>{Bf(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Vo()<=Ce.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Fo(n)),this.ps.getDocumentsMatchingQuery(e,n,gi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="LocalStore",eU=3e8;class tU{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ze(Ie),this.xs=new Io(i=>sw(i),iw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function nU(t,e,n,r){return new tU(t,e,n,r)}async function oA(t,e){const n=xe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ne();for(const u of s){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:a}))})})}function rU(t,e){const n=xe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const f=u.batch,m=f.keys();let y=q.resolve();return m.forEach(x=>{y=y.next(()=>h.getEntry(l,x)).next(v=>{const b=u.docVersions.get(x);Oe(b!==null,48541),v.version.compareTo(b)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ne();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function aA(t){const e=xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function sU(t,e){const n=xe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Nt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(v,b,E){return v.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=eU?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,y,h)&&a.push(n.Pi.updateTargetData(i,y))});let l=gs(),u=Ne();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(iU(i,o,e.documentUpdates).next(h=>{l=h.ks,u=h.qs})),!r.isEqual(we.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ms=s,i))}function iU(t,e,n){let r=Ne(),s=Ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=gs();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(we.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):oe(fw,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{ks:o,qs:s}})}function oU(t,e){const n=xe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=tw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aU(t,e){const n=xe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,q.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Qs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function ly(t,e,n){const r=xe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!il(o))throw o;oe(fw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function X1(t,e,n){const r=xe(t);let s=we.min(),i=Ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const f=xe(l),m=f.xs.get(h);return m!==void 0?q.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,h)}(r,o,Mr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:we.min(),n?i:Ne())).next(a=>(lU(r,qF(e),a),{documents:a,Qs:i})))}function lU(t,e,n){let r=t.Os.get(e)||we.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class Y1{constructor(){this.activeTargetIds=JF()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cU{constructor(){this.Mo=new Y1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Y1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="ConnectivityMonitor";class Z1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(J1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(J1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud=null;function cy(){return ud===null?ud=function(){return 268435456+Math.round(2147483648*Math.random())}():ud++,"0x"+ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="RestConnection",dU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class hU{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===kh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=cy(),a=this.zo(e,n.toUriEncodedString());oe(xm,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,i);const{host:u}=new URL(a),h=el(u);return this.Jo(e,a,l,r,h).then(f=>(oe(xm,`Received RPC '${e}' ${o}: `,f),f),f=>{throw vo(xm,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=dU[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class pU extends hU{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=cy();return new Promise((a,l)=>{const u=new oN;u.setWithCredentials(!0),u.listenOnce(aN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vd.NO_ERROR:const f=u.getResponseJson();oe(Ft,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case Vd.TIMEOUT:oe(Ft,`RPC '${e}' ${o} timed out`),l(new se(H.DEADLINE_EXCEEDED,"Request time out"));break;case Vd.HTTP_ERROR:const m=u.getStatus();if(oe(Ft,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const x=y==null?void 0:y.error;if(x&&x.status&&x.message){const v=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(w)>=0?w:H.UNKNOWN}(x.status);l(new se(v,x.message))}else l(new se(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new se(H.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{oe(Ft,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);oe(Ft,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=cy(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uN(),a=cN(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");oe(Ft,`Creating RPC '${e}' stream ${s}: ${h}`,l);const f=o.createWebChannel(h,l);this.I_(f);let m=!1,y=!1;const x=new fU({Yo:b=>{y?oe(Ft,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(m||(oe(Ft,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),oe(Ft,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Zo:()=>f.close()}),v=(b,E,w)=>{b.listen(E,S=>{try{w(S)}catch(k){setTimeout(()=>{throw k},0)}})};return v(f,Ul.EventType.OPEN,()=>{y||(oe(Ft,`RPC '${e}' stream ${s} transport opened.`),x.o_())}),v(f,Ul.EventType.CLOSE,()=>{y||(y=!0,oe(Ft,`RPC '${e}' stream ${s} transport closed`),x.a_(),this.E_(f))}),v(f,Ul.EventType.ERROR,b=>{y||(y=!0,vo(Ft,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),x.a_(new se(H.UNAVAILABLE,"The operation could not be completed")))}),v(f,Ul.EventType.MESSAGE,b=>{var E;if(!y){const w=b.data[0];Oe(!!w,16349);const S=w,k=(S==null?void 0:S.error)||((E=S[0])==null?void 0:E.error);if(k){oe(Ft,`RPC '${e}' stream ${s} received error:`,k);const D=k.status;let O=function(I){const A=at[I];if(A!==void 0)return KN(A)}(D),T=k.message;O===void 0&&(O=H.INTERNAL,T="Unknown error status: "+D+" with message "+k.message),y=!0,x.a_(new se(O,T)),f.close()}else oe(Ft,`RPC '${e}' stream ${s} received:`,w),x.u_(w)}}),v(a,lN.STAT_EVENT,b=>{b.stat===Yg.PROXY?oe(Ft,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Yg.NOPROXY&&oe(Ft,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{x.__()},0),x}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function _m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){return new v9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="PersistentStream";class cA{constructor(e,n,r,s,i,o,a,l){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(ms(n.toString()),ms("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new se(H.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(eb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(eb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mU extends cA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_9(this.serializer,e),r=function(i){if(!("targetChange"in i))return we.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?Lr(o.readTime):we.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ay(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=ny(l)?{documents:S9(i,l)}:{query:T9(i,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=YN(i,o.resumeToken);const u=sy(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(we.min())>0){a.readTime=Oh(i,o.snapshotVersion.toTimestamp());const u=sy(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=I9(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ay(this.serializer),n.removeTarget=e,this.q_(n)}}class gU extends cA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=E9(e.writeResults,e.commitTime),r=Lr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ay(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>b9(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{}class vU extends yU{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new se(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,iy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(H.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,iy(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(H.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class wU{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ms(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo="RemoteStore";class xU{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Ao(this)&&(oe(wo,"Restarting streams for network reachability change."),await async function(l){const u=xe(l);u.Ea.add(4),await pu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Kf(u)}(this))})}),this.Ra=new wU(r,s)}}async function Kf(t){if(Ao(t))for(const e of t.da)await e(!0)}async function pu(t){for(const e of t.da)await e(!1)}function uA(t,e){const n=xe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yw(n)?gw(n):al(n).O_()&&mw(n,e))}function pw(t,e){const n=xe(t),r=al(n);n.Ia.delete(e),r.O_()&&dA(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ao(n)&&n.Ra.set("Unknown"))}function mw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}al(t).Y_(e)}function dA(t,e){t.Va.Ue(e),al(t).Z_(e)}function gw(t){t.Va=new p9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),al(t).start(),t.Ra.ua()}function yw(t){return Ao(t)&&!al(t).x_()&&t.Ia.size>0}function Ao(t){return xe(t).Ea.size===0}function hA(t){t.Va=void 0}async function _U(t){t.Ra.set("Online")}async function bU(t){t.Ia.forEach((e,n)=>{mw(t,e)})}async function EU(t,e){hA(t),yw(t)?(t.Ra.ha(e),gw(t)):t.Ra.set("Unknown")}async function SU(t,e,n){if(t.Ra.set("Online"),e instanceof XN&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(r){oe(wo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Lh(t,r)}else if(e instanceof $d?t.Va.Ze(e):e instanceof QN?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const r=await aA(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Va.Tt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=i.Ia.get(l);if(!h)return;i.Ia.set(l,h.withResumeToken(Nt.EMPTY_BYTE_STRING,h.snapshotVersion)),dA(i,l);const f=new Qs(h.target,l,u,h.sequenceNumber);mw(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){oe(wo,"Failed to raise snapshot:",r),await Lh(t,r)}}async function Lh(t,e,n){if(!il(e))throw e;t.Ea.add(1),await pu(t),t.Ra.set("Offline"),n||(n=()=>aA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(wo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Kf(t)})}function fA(t,e){return e().catch(n=>Lh(t,n,e))}async function Qf(t){const e=xe(t),n=xi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:tw;for(;TU(e);)try{const s=await oU(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,CU(e,s)}catch(s){await Lh(e,s)}pA(e)&&mA(e)}function TU(t){return Ao(t)&&t.Ta.length<10}function CU(t,e){t.Ta.push(e);const n=xi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function pA(t){return Ao(t)&&!xi(t).x_()&&t.Ta.length>0}function mA(t){xi(t).start()}async function IU(t){xi(t).ra()}async function NU(t){const e=xi(t);for(const n of t.Ta)e.ea(n.mutations)}async function AU(t,e,n){const r=t.Ta.shift(),s=aw.from(r,e,n);await fA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Qf(t)}async function kU(t,e){e&&xi(t).X_&&await async function(r,s){if(function(o){return d9(o)&&o!==H.ABORTED}(s.code)){const i=r.Ta.shift();xi(r).B_(),await fA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Qf(r)}}(t,e),pA(t)&&mA(t)}async function tb(t,e){const n=xe(t);n.asyncQueue.verifyOperationInProgress(),oe(wo,"RemoteStore received new credentials");const r=Ao(n);n.Ea.add(3),await pu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Kf(n)}async function RU(t,e){const n=xe(t);e?(n.Ea.delete(2),await Kf(n)):e||(n.Ea.add(2),await pu(n),n.Ra.set("Unknown"))}function al(t){return t.ma||(t.ma=function(n,r,s){const i=xe(n);return i.sa(),new mU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:_U.bind(null,t),t_:bU.bind(null,t),r_:EU.bind(null,t),H_:SU.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),yw(t)?gw(t):t.Ra.set("Unknown")):(await t.ma.stop(),hA(t))})),t.ma}function xi(t){return t.fa||(t.fa=function(n,r,s){const i=xe(n);return i.sa(),new gU(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:IU.bind(null,t),r_:kU.bind(null,t),ta:NU.bind(null,t),na:AU.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Qf(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(wo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new li,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new vw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ww(t,e){if(ms("AsyncQueue",`${e}: ${t}`),il(t))return new se(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{static emptySet(e){return new fa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=zl(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(){this.ga=new Ze(le.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wa{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Wa(e,n,fa.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$f(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PU{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class DU{constructor(){this.queries=rb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=xe(n),i=s.queries;s.queries=rb(),i.forEach((o,a)=>{for(const l of a.Sa)l.onError(r)})})(this,new se(H.ABORTED,"Firestore shutting down"))}}function rb(){return new Io(t=>ON(t),$f)}async function gA(t,e){const n=xe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new PU,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=ww(o,`Initialization of query '${Fo(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&xw(n)}async function yA(t,e){const n=xe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jU(t,e){const n=xe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.Sa)a.Fa(s)&&(r=!0);o.wa=s}}r&&xw(n)}function OU(t,e,n){const r=xe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function xw(t){t.Ca.forEach(e=>{e.next()})}var uy,sb;(sb=uy||(uy={})).Ma="default",sb.Cache="cache";class vA{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Wa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.key=e}}class xA{constructor(e){this.key=e}}class MU{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ne(),this.mutatedKeys=Ne(),this.eu=MN(e),this.tu=new fa(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new nb,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=Bf(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),v=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let b=!1;m&&y?m.data.isEqual(y.data)?x!==v&&(r.track({type:3,doc:y}),b=!0):this.su(m,y)||(r.track({type:2,doc:y}),b=!0,(l&&this.eu(y,l)>0||u&&this.eu(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),b=!0):m&&!y&&(r.track({type:1,doc:m}),b=!0,(l||u)&&(a=!0)),b&&(y?(o=o.add(y),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:a,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,x){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:b})}};return v(y)-v(x)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const a=n&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new Wa(this.query,e.tu,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ne(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new xA(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new wA(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ne();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Wa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const _w="SyncEngine";class LU{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class VU{constructor(e){this.key=e,this.hu=!1}}class FU{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Io(a=>ON(a),$f),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(le.comparator),this.Au=new Map,this.Ru=new uw,this.Vu={},this.mu=new Map,this.fu=Ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function UU(t,e,n=!0){const r=CA(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await _A(r,e,n,!0),s}async function zU(t,e){const n=CA(t);await _A(n,e,!0,!1)}async function _A(t,e,n,r){const s=await aU(t.localStore,Mr(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await $U(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&uA(t.remoteStore,s),a}async function $U(t,e,n,r,s){t.pu=(f,m,y)=>async function(v,b,E,w){let S=b.view.ru(E);S.Cs&&(S=await X1(v.localStore,b.query,!1).then(({documents:T})=>b.view.ru(T,S)));const k=w&&w.targetChanges.get(b.targetId),D=w&&w.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(S,v.isPrimaryClient,k,D);return ob(v,b.targetId,O.au),O.snapshot}(t,f,m,y);const i=await X1(t.localStore,e,!0),o=new MU(e,i.Qs),a=o.ru(i.documents),l=fu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);ob(t,n,u.au);const h=new LU(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function BU(t,e,n){const r=xe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!$f(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ly(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&pw(r.remoteStore,s.targetId),dy(r,s.targetId)}).catch(sl)):(dy(r,s.targetId),await ly(r.localStore,s.targetId,!0))}async function HU(t,e){const n=xe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pw(n.remoteStore,r.targetId))}async function WU(t,e,n){const r=JU(t);try{const s=await function(o,a){const l=xe(o),u=ze.now(),h=a.reduce((y,x)=>y.add(x.key),Ne());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let x=gs(),v=Ne();return l.Ns.getEntries(y,h).next(b=>{x=b,x.forEach((E,w)=>{w.isValidDocument()||(v=v.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,x)).next(b=>{f=b;const E=[];for(const w of a){const S=o9(w,f.get(w.key).overlayedDocument);S!=null&&E.push(new No(w.key,S,IN(S.value.mapValue),ss.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,E,a)}).next(b=>{m=b;const E=b.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(y,b.batchId,E)})}).then(()=>({batchId:m.batchId,changes:VN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ze(Ie)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await mu(r,s.changes),await Qf(r.remoteStore)}catch(s){const i=ww(s,"Failed to persist write");n.reject(i)}}async function bA(t,e){const n=xe(t);try{const r=await sU(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Oe(o.hu,14607):s.removedDocuments.size>0&&(Oe(o.hu,42227),o.hu=!1))}),await mu(n,r,e)}catch(r){await sl(r)}}function ib(t,e,n){const r=xe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=xe(o);l.onlineState=a;let u=!1;l.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(a)&&(u=!0)}),u&&xw(l)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qU(t,e,n){const r=xe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ze(le.comparator);o=o.insert(i,Bt.newNoDocument(i,we.min()));const a=Ne().add(i),l=new qf(we.min(),new Map,new Ze(Ie),o,a);await bA(r,l),r.du=r.du.remove(i),r.Au.delete(e),bw(r)}else await ly(r.localStore,e,!1).then(()=>dy(r,e,n)).catch(sl)}async function GU(t,e){const n=xe(t),r=e.batch.batchId;try{const s=await rU(n.localStore,e);SA(n,r,null),EA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mu(n,s)}catch(s){await sl(s)}}async function KU(t,e,n){const r=xe(t);try{const s=await function(o,a){const l=xe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(Oe(f!==null,37113),h=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);SA(r,e,n),EA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await mu(r,s)}catch(s){await sl(s)}}function EA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function SA(t,e,n){const r=xe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function dy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||TA(t,r)})}function TA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(pw(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),bw(t))}function ob(t,e,n){for(const r of n)r instanceof wA?(t.Ru.addReference(r.key,e),QU(t,r)):r instanceof xA?(oe(_w,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||TA(t,r.key)):fe(19791,{wu:r})}function QU(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(oe(_w,"New document in limbo: "+n),t.Eu.add(r),bw(t))}function bw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new le(Ue.fromString(e)),r=t.fu.next();t.Au.set(r,new VU(n)),t.du=t.du.insert(n,r),uA(t.remoteStore,new Qs(Mr(zf(n.path)),r,"TargetPurposeLimboResolution",Vf.ce))}}async function mu(t,e,n){const r=xe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{o.push(r.pu(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){s.push(u);const f=hw.As(l.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(l,u){const h=xe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(u,m=>q.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>q.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!il(f))throw f;oe(fw,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),x=y.snapshotVersion,v=y.withLastLimboFreeSnapshotVersion(x);h.Ms=h.Ms.insert(m,v)}}}(r.localStore,i))}async function XU(t,e){const n=xe(t);if(!n.currentUser.isEqual(e)){oe(_w,"User change. New user:",e.toKey());const r=await oA(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(a=>{a.forEach(l=>{l.reject(new se(H.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mu(n,r.Ls)}}function YU(t,e){const n=xe(t),r=n.Au.get(e);if(r&&r.hu)return Ne().add(r.key);{let s=Ne();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function CA(t){const e=xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qU.bind(null,e),e.Pu.H_=jU.bind(null,e.eventManager),e.Pu.yu=OU.bind(null,e.eventManager),e}function JU(t){const e=xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=GU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KU.bind(null,e),e}class Vh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return nU(this.persistence,new Z9,e.initialUser,this.serializer)}Cu(e){return new iA(dw.mi,this.serializer)}Du(e){return new cU}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vh.provider={build:()=>new Vh};class ZU extends Vh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof Mh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new V9(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new iA(r=>Mh.mi(r,n),this.serializer)}}class hy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ib(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XU.bind(null,this.syncEngine),await RU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DU}()}createDatastore(e){const n=Gf(e.databaseInfo.databaseId),r=function(i){return new pU(i)}(e.databaseInfo);return function(i,o,a,l){return new vU(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new xU(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>ib(this.syncEngine,n,0),function(){return Z1.v()?new Z1:new uU}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,h){const f=new FU(s,i,o,a,l,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=xe(s);oe(wo,"RemoteStore shutting down."),i.Ea.add(5),await pu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}hy.provider={build:()=>new hy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ms("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="FirestoreClient";class ez{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=zt.UNAUTHENTICATED,this.clientId=Mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{oe(_i,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(_i,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new li;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ww(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bm(t,e){t.asyncQueue.verifyOperationInProgress(),oe(_i,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await oA(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ab(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tz(t);oe(_i,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>tb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>tb(e.remoteStore,s)),t._onlineComponents=e}async function tz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(_i,"Using user provided OfflineComponentProvider");try{await bm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===H.FAILED_PRECONDITION||s.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;vo("Error using user provided cache. Falling back to memory cache: "+n),await bm(t,new Vh)}}else oe(_i,"Using default OfflineComponentProvider"),await bm(t,new ZU(void 0));return t._offlineComponents}async function NA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(_i,"Using user provided OnlineComponentProvider"),await ab(t,t._uninitializedComponentsProvider._online)):(oe(_i,"Using default OnlineComponentProvider"),await ab(t,new hy))),t._onlineComponents}function nz(t){return NA(t).then(e=>e.syncEngine)}async function fy(t){const e=await NA(t),n=e.eventManager;return n.onListen=UU.bind(null,e.syncEngine),n.onUnlisten=BU.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zU.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=HU.bind(null,e.syncEngine),n}function rz(t,e,n={}){const r=new li;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const h=new IA({next:m=>{h.Nu(),o.enqueueAndForget(()=>yA(i,f));const y=m.docs.has(a);!y&&m.fromCache?u.reject(new se(H.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?u.reject(new se(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new vA(zf(a.path),h,{includeMetadataChanges:!0,qa:!0});return gA(i,f)}(await fy(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="firestore.googleapis.com",cb=!0;class ub{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kA,this.ssl=cb}else this.host=e.host,this.ssl=e.ssl??cb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M9)throw new se(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}mN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(H.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ub({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ub(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fN;switch(r.type){case"firstParty":return new mF(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=lb.get(n);r&&(oe("ComponentProvider","Removing Datastore"),lb.delete(n),r.terminate())}(this),Promise.resolve()}}function RA(t,e,n,r={}){var u;t=rs(t,Xf);const s=el(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(_I(`https://${a}`),bI("Firestore",!0)),i.host!==kA&&i.host!==a&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...i,host:a,ssl:s,emulatorOptions:r};if(!po(l,o)&&(t._setSettings(l),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=zt.MOCK_USER;else{h=LV(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new se(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new zt(m)}t._authCredentials=new hF(new hN(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class rt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(du(n,rt._jsonSchema))return new rt(e,r||null,new le(Ue.fromString(n.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:ut("string",rt._jsonSchemaVersion),referencePath:ut("string")};class is extends ws{constructor(e,n,r){super(e,n,zf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new le(e))}withConverter(e){return new is(this.firestore,e,this._path)}}function Ew(t,e,...n){if(t=en(t),pN("collection","path",e),t instanceof Xf){const r=Ue.fromString(e,...n);return E1(r),new is(t,null,r)}{if(!(t instanceof rt||t instanceof is))throw new se(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return E1(r),new is(t.firestore,null,r)}}function dt(t,e,...n){if(t=en(t),arguments.length===1&&(e=Mf.newId()),pN("doc","path",e),t instanceof Xf){const r=Ue.fromString(e,...n);return b1(r),new rt(t,null,new le(r))}{if(!(t instanceof rt||t instanceof is))throw new se(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return b1(r),new rt(t.firestore,t instanceof is?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="AsyncQueue";class hb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lA(this,"async_queue_retry"),this._c=()=>{const r=_m();r&&oe(db,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=_m();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=_m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new li;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!il(e))throw e;oe(db,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ms("INTERNAL UNHANDLED ERROR: ",fb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=vw.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&fe(47125,{Pc:fb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function fb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class qa extends Xf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new hb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hb(e),this._firestoreClient=void 0,await e}}}function PA(t,e){const n=typeof t=="object"?t:CI(),r=typeof t=="string"?t:kh,s=Bv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=OV("firestore");i&&RA(s,...i)}return s}function Yf(t){if(t._terminated)throw new se(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||sz(t),t._firestoreClient}function sz(t){var r,s,i;const e=t._freezeSettings(),n=function(a,l,u,h){return new RF(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,AA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ez(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tn(Nt.fromBase64String(e))}catch(n){throw new se(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tn(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,Tn._jsonSchema))return Tn.fromBase64String(e.bytes)}}Tn._jsonSchemaVersion="firestore/bytes/1.0",Tn._jsonSchema={type:ut("string",Tn._jsonSchemaVersion),bytes:ut("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cr._jsonSchemaVersion}}static fromJSON(e){if(du(e,cr._jsonSchema))return new cr(e.latitude,e.longitude)}}cr._jsonSchemaVersion="firestore/geoPoint/1.0",cr._jsonSchema={type:ut("string",cr._jsonSchemaVersion),latitude:ut("number"),longitude:ut("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ur(e.vectorValues);throw new se(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ur._jsonSchemaVersion="firestore/vectorValue/1.0",ur._jsonSchema={type:ut("string",ur._jsonSchemaVersion),vectorValues:ut("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=/^__.*__$/;class oz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new No(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}function DA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class Sw{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(DA(this.Ac)&&iz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class az{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gf(e)}Cc(e,n,r,s=!1){return new Sw({Ac:e,methodName:n,Dc:r,path:Ct.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jA(t){const e=t._freezeSettings(),n=Gf(t._databaseId);return new az(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lz(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);LA("Data must be an object, but it was:",o,r);const a=OA(r,o);let l,u;if(i.merge)l=new sr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=uz(e,f,n);if(!o.contains(m))throw new se(H.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);hz(h,m)||h.push(m)}l=new sr(h),u=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=o.fieldTransforms;return new oz(new Fn(a),l,u)}class Tw extends Zf{_toFieldTransform(e){return new n9(e.path,new Fc)}isEqual(e){return e instanceof Tw}}function cz(t,e,n,r=!1){return Cw(n,t.Cc(r?4:3,e))}function Cw(t,e){if(MA(t=en(t)))return LA("Unsupported field value:",e,t),OA(t,e);if(t instanceof Zf)return function(r,s){if(!DA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Cw(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=en(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZF(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:Oh(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Oh(s.serializer,i)}}if(r instanceof cr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tn)return{bytesValue:YN(s.serializer,r._byteString)};if(r instanceof rt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:cw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ur)return function(o,a){return{mapValue:{fields:{[SN]:{stringValue:CN},[Rh]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return ow(a.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Lf(r)}`)}(t,e)}function OA(t,e){const n={};return vN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(t,(r,s)=>{const i=Cw(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function MA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof cr||t instanceof Tn||t instanceof rt||t instanceof Zf||t instanceof ur)}function LA(t,e,n){if(!MA(n)||!gN(n)){const r=Lf(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function uz(t,e,n){if((e=en(e))instanceof Jf)return e._internalPath;if(typeof e=="string")return VA(t,e);throw Fh("Field path arguments must be of type string or ",t,!1,void 0,n)}const dz=new RegExp("[~\\*/\\[\\]]");function VA(t,e,n){if(e.search(dz)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jf(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new se(H.INVALID_ARGUMENT,a+t+l)}function hz(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Iw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fz extends FA{data(){return super.data()}}function Iw(t,e){return typeof e=="string"?VA(t,e):e instanceof Jf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nw{}class ep extends Nw{}function Aw(t,e,...n){let r=[];e instanceof Nw&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof np).length,a=i.filter(l=>l instanceof tp).length;if(o>1||o>0&&a>0)throw new se(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class tp extends ep{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tp(e,n,r)}_apply(e){const n=this._parse(e);return zA(e._query,n),new ws(e.firestore,e.converter,ry(e._query,n))}_parse(e){const n=jA(e.firestore);return function(i,o,a,l,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){gb(f,h);const x=[];for(const v of f)x.push(mb(l,i,v));m={arrayValue:{values:x}}}else m=mb(l,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||gb(f,h),m=cz(a,o,f,h==="in"||h==="not-in");return ct.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class np extends Nw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new np(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)zA(o,l),o=ry(o,l)}(e._query,n),new ws(e.firestore,e.converter,ry(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rp extends ep{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new se(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new se(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vc(i,o)}(e._query,this._field,this._direction);return new ws(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ol(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function kw(t,e="asc"){const n=e,r=Iw("orderBy",t);return rp._create(r,n)}class sp extends ep{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new sp(e,n,r)}_apply(e){return new ws(e.firestore,e.converter,Dh(e._query,this._limit,this._limitType))}}function UA(t){return sp._create("limit",t,"F")}function mb(t,e,n){if(typeof(n=en(n))=="string"){if(n==="")throw new se(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jN(e)&&n.indexOf("/")!==-1)throw new se(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!le.isDocumentKey(r))throw new se(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return R1(t,new le(r))}if(n instanceof rt)return R1(t,n._key);throw new se(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lf(n)}.`)}function gb(t,e){if(!Array.isArray(t)||t.length===0)throw new se(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zA(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class $A{convertValue(e,n="none"){switch(wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Co(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Rh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>it(o.doubleValue));return new ur(n)}convertGeoPoint(e){return new cr(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Uf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const n=yi(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);Oe(rA(r),9688,{name:e});const s=new za(r.get(1),r.get(3)),i=new le(r.popFirst(5));return s.isEqual(n)||ms(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ci extends FA{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Iw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ci._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",ci._jsonSchema={type:ut("string",ci._jsonSchemaVersion),bundleSource:ut("string","DocumentSnapshot"),bundleName:ut("string"),bundle:ut("string")};class ac extends ci{data(e={}){return super.data(e)}}class so{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ta(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ac(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new ac(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ta(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new ac(s._firestore,s._userDataWriter,a.doc.key,a.doc,new ta(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:gz(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){t=rs(t,rt);const e=rs(t.firestore,qa);return rz(Yf(e),t._key).then(n=>WA(e,t,n))}so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:ut("string",so._jsonSchemaVersion),bundleSource:ut("string","QuerySnapshot"),bundleName:ut("string"),bundle:ut("string")};class BA extends $A{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,n)}}function yn(t,e,n){t=rs(t,rt);const r=rs(t.firestore,qa),s=mz(t.converter,e,n);return HA(r,[lz(jA(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ss.none())])}function ll(t,...e){var l,u,h;t=en(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||pb(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(pb(e[r])){const f=e[r];e[r]=(l=f.next)==null?void 0:l.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,a;if(t instanceof rt)o=rs(t.firestore,qa),a=zf(t._key.path),i={next:f=>{e[r]&&e[r](WA(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=rs(t,ws);o=rs(f.firestore,qa),a=f._query;const m=new BA(o);i={next:y=>{e[r]&&e[r](new so(o,m,f,y))},error:e[r+1],complete:e[r+2]},pz(t._query)}return function(m,y,x,v){const b=new IA(v),E=new vA(y,b,x);return m.asyncQueue.enqueueAndForget(async()=>gA(await fy(m),E)),()=>{b.Nu(),m.asyncQueue.enqueueAndForget(async()=>yA(await fy(m),E))}}(Yf(o),a,s,i)}function HA(t,e){return function(r,s){const i=new li;return r.asyncQueue.enqueueAndForget(async()=>WU(await nz(r),s,i)),i.promise}(Yf(t),e)}function WA(t,e,n){const r=n.docs.get(e._key),s=new BA(t);return new ci(t,s,e._key,r,new ta(n.hasPendingWrites,n.fromCache),e.converter)}function ip(){return new Tw("serverTimestamp")}(function(e,n=!0){(function(s){rl=s})(tl),Va(new mo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new qa(new fF(r.getProvider("auth-internal")),new gF(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new se(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new za(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),oi(v1,w1,e),oi(v1,w1,"esm2020")})();const yb=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:$A,Bytes:Tn,CollectionReference:is,DocumentReference:rt,DocumentSnapshot:ci,FieldPath:Jf,FieldValue:Zf,Firestore:qa,FirestoreError:se,GeoPoint:cr,Query:ws,QueryCompositeFilterConstraint:np,QueryConstraint:ep,QueryDocumentSnapshot:ac,QueryFieldFilterConstraint:tp,QueryLimitConstraint:sp,QueryOrderByConstraint:rp,QuerySnapshot:so,SnapshotMetadata:ta,Timestamp:ze,VectorValue:ur,_AutoId:Mf,_ByteString:Nt,_DatabaseId:za,_DocumentKey:le,_EmptyAuthCredentialsProvider:fN,_FieldPath:Ct,_cast:rs,_logWarn:vo,_validateIsNotUsedTogether:mN,collection:Ew,connectFirestoreEmulator:RA,doc:dt,ensureFirestoreConfigured:Yf,executeWrite:HA,getDoc:Ga,getFirestore:PA,limit:UA,onSnapshot:ll,orderBy:kw,query:Aw,serverTimestamp:ip,setDoc:yn},Symbol.toStringTag,{value:"Module"})),yz={apiKey:"AIzaSyD4y-0QZLN6Q5wFDoTxIaxR-_hcPWyDcto",authDomain:"trace-6f541.firebaseapp.com",projectId:"trace-6f541",storageBucket:"trace-6f541.firebasestorage.app",appId:"1:30992363510:web:5b61c6861fbcad776121d7"},Rw=TI(yz),$o=lF(Rw),st=PA(Rw),Ci=new Sn;Ci.addScope("https://www.googleapis.com/auth/classroom.courses.readonly");Ci.addScope("https://www.googleapis.com/auth/classroom.coursework.me.readonly");Ci.addScope("https://www.googleapis.com/auth/classroom.student-submissions.me.readonly");Ci.addScope("https://www.googleapis.com/auth/classroom.courseworkmaterials.readonly");Ci.addScope("https://www.googleapis.com/auth/calendar");Ci.addScope("https://www.googleapis.com/auth/gmail.send");const vb=Object.freeze(Object.defineProperty({__proto__:null,app:Rw,auth:$o,db:st,googleProvider:Ci},Symbol.toStringTag,{value:"Module"})),qA=p.createContext(void 0);function vz({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(!0),[i,o]=p.useState(null),[a,l]=p.useState(null);p.useEffect(()=>Y6($o,x=>{n(x),s(!1)}),[]);const u=async()=>{try{l(null);const y=await gm($o,Ci),x=Sn.credentialFromResult(y);x!=null&&x.accessToken&&o(x.accessToken)}catch(y){const x=y instanceof Error?y.message:"Failed to sign in";l(x),console.error("Sign in error:",y)}},h=async()=>{try{l(null);const y=new Sn;y.addScope("https://www.googleapis.com/auth/gmail.send"),y.addScope("https://www.googleapis.com/auth/classroom.courses.readonly"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const x=await gm($o,y),v=Sn.credentialFromResult(x),b=x._tokenResponse;if(b!=null&&b.oauthRefreshToken){const{doc:E,setDoc:w,serverTimestamp:S}=await sd(async()=>{const{doc:D,setDoc:O,serverTimestamp:T}=await Promise.resolve().then(()=>yb);return{doc:D,setDoc:O,serverTimestamp:T}},void 0),{db:k}=await sd(async()=>{const{db:D}=await Promise.resolve().then(()=>vb);return{db:D}},void 0);if(e&&b.oauthRefreshToken)return await w(E(k,"users",e.uid,"private_tokens","google"),{refreshToken:b.oauthRefreshToken,updatedAt:S()}),!0}return!!(v!=null&&v.accessToken)}catch(y){const x=y instanceof Error?y.message:"Failed to get Gmail permissions";return l(x),console.error("Permission error:",y),!1}},f=async()=>{try{l(null);const y=new Sn;y.addScope("https://www.googleapis.com/auth/calendar.events"),y.setCustomParameters({access_type:"offline",prompt:"consent"});const v=(await gm($o,y))._tokenResponse;if(e&&(v!=null&&v.oauthRefreshToken)){const{doc:b,setDoc:E,serverTimestamp:w}=await sd(async()=>{const{doc:k,setDoc:D,serverTimestamp:O}=await Promise.resolve().then(()=>yb);return{doc:k,setDoc:D,serverTimestamp:O}},void 0),{db:S}=await sd(async()=>{const{db:k}=await Promise.resolve().then(()=>vb);return{db:k}},void 0);return await E(b(S,"users",e.uid,"private_tokens","calendar"),{refreshToken:v.oauthRefreshToken,updatedAt:w(),scopes:["https://www.googleapis.com/auth/calendar.events"]},{merge:!0}),!0}return!0}catch(y){const x=y instanceof Error?y.message:"Failed to get Calendar permissions";return l(x),console.error("Permission error:",y),!1}},m=async()=>{try{await J6($o),o(null)}catch(y){const x=y instanceof Error?y.message:"Failed to sign out";l(x)}};return c.jsx(qA.Provider,{value:{user:e,loading:r,accessToken:i,signInWithGoogle:u,requestGmailPermissions:h,requestCalendarPermissions:f,signOut:m,error:a},children:t})}function rn(){const t=p.useContext(qA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const GA=p.createContext(void 0);function wz({children:t}){const[e,n]=p.useState(()=>{if(typeof window<"u"){const i=localStorage.getItem("theme");return i||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}return"light"});p.useEffect(()=>{const i=document.documentElement;e==="dark"?i.classList.add("dark"):i.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const r=()=>{n(i=>i==="light"?"dark":"light")},s=i=>{n(i)};return c.jsx(GA.Provider,{value:{theme:e,toggleTheme:r,setTheme:s},children:t})}function KA(){const t=p.useContext(GA);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}async function xz(t,e,n,r){const i=[`To: ${t}`,"Subject: "+e,"Content-Type: text/html; charset=utf-8","MIME-Version: 1.0","",n].join(`\r
`),o=btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");await fetch("https://gmail.googleapis.com/gmail/v1/users/me/messages/send",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({raw:o})})}async function _z(t,e,n,r){const s=dt(st,"users",n,"settings","calendar"),i=await Ga(s);if(!i.exists()||!i.data().enabled){console.log("Calendar sync disabled or not configured.");return}if(!i.data().syncAssignments)return;console.log("Starting client-side calendar sync...");let a=!1;for(const l of t){if(!l.dueDate)continue;const u=new Date(l.dueDate),h=u.toISOString().split("T")[0],f={summary:` ${l.title}`,description:`Course: ${l.courseName}
${l.description||""}

Synced via Student Sphere`,start:{date:h},end:{date:h}},m=new Date(u);m.setDate(m.getDate()+1),f.end.date=m.toISOString().split("T")[0];const y=dt(st,"users",n,"calendarEvents",l.id),x=await Ga(y),v="https://www.googleapis.com/calendar/v3/calendars/primary/events";try{let b;if(x.exists()){const{calendarEventId:E}=x.data();b=await fetch(`${v}/${E}`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}else if(b=await fetch(v,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(f)}),b.ok){const E=await b.json();await yn(y,{calendarEventId:E.id,assignmentId:l.id,updatedAt:ip()})}if(!b.ok&&b.status===403&&!a){a=!0,console.error("Calendar Sync 403: Permission Denied"),r({variant:"destructive",title:"Calendar Permission Needed",description:"We can't update your Google Calendar because we don't have permission. Please Sign Out and Sign In again to grant access."});break}}catch(b){console.warn(`Failed to sync assignment ${l.id} to calendar`,b)}}}const QA=p.createContext(void 0);function bz(){return Math.random().toString(36).substring(2,15)}async function Uh(t,e,n,r){var o;const s=[];let i;do{const a=e.includes("?")?"&":"?",l=i?`${e}${a}pageToken=${i}`:e;console.log(`Fetching: ${l.substring(0,100)}...`);const u=await fetch(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!u.ok){let m=u.statusText,y={};try{const x=await u.json();y=x,m=((o=x.error)==null?void 0:o.message)||x.message||m,console.error("API Error Response:",x)}catch{const v=await u.text().catch(()=>"");console.error("API Error (non-JSON):",v)}throw new Error(`${m} (Status: ${u.status})`)}const h=await u.json(),f=n(h);s.push(...f),i=r(h)}while(i);return s}async function Ez(t,e){const r=await Uh(t,"https://classroom.googleapis.com/v1/courses?studentId=me&courseStates=ACTIVE",i=>i.courses||[],i=>i.nextPageToken),s=new Date().toISOString();return r.map(i=>({id:`course-${i.id}`,userId:e,classroomId:i.id,name:i.name,section:i.section||null,descriptionHeading:i.descriptionHeading||null,room:i.room||null,ownerId:i.ownerId||null,enrollmentCode:i.enrollmentCode||null,courseState:i.courseState||null,alternateLink:i.alternateLink||null,lastSyncedAt:s}))}async function Sz(t,e,n,r){var a,l;const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWork?courseWorkStates=PUBLISHED`,i=await Uh(t,s,u=>u.courseWork||[],u=>u.nextPageToken);new Date().toISOString();const o=[];for(const u of i){if(u.workType&&u.workType!=="ASSIGNMENT"&&u.workType!=="MULTIPLE_CHOICE_QUESTION")continue;let h=null;try{const b=`https://classroom.googleapis.com/v1/courses/${e}/courseWork/${u.id}/studentSubmissions?userId=me`;h=(await Uh(t,b,w=>w.studentSubmissions||[],w=>w.nextPageToken))[0]||null}catch(b){console.warn(`Failed to fetch submissions for coursework ${u.id}:`,b)}let f=null,m=null;u.dueDate&&(f=new Date(u.dueDate.year,u.dueDate.month-1,u.dueDate.day,((a=u.dueTime)==null?void 0:a.hours)||23,((l=u.dueTime)==null?void 0:l.minutes)||59).toISOString(),u.dueTime&&(m=`${String(u.dueTime.hours).padStart(2,"0")}:${String(u.dueTime.minutes).padStart(2,"0")}`));const y=new Date;let x="backlog";h?h.state==="RETURNED"||h.returnedGrade!==void 0?x="graded":h.state==="TURNED_IN"||h.turnInTime?x="submitted":h.state==="CREATED"&&(x=f&&new Date(f)<y?"overdue":"backlog"):f&&new Date(f)<y?x="overdue":x="backlog";const v={id:`assign-${u.id}`,uniqueId:`${e}-${u.id}`,userId:r,courseId:`course-${e}`,courseName:n,classroomId:u.id,title:u.title,description:u.description||null,dueDate:f,dueTime:m,maxPoints:u.maxPoints||null,systemStatus:x,userStatus:null,submissionId:(h==null?void 0:h.id)||null,submittedAt:(h==null?void 0:h.turnInTime)||null,gradedAt:h!=null&&h.updateTime&&h.state==="RETURNED"?h.updateTime:null,grade:(h==null?void 0:h.returnedGrade)||(h==null?void 0:h.assignedGrade)||null,alternateLink:u.alternateLink||null,createdAt:y.toISOString(),lastSyncedAt:y.toISOString()};o.push(v)}return o}async function Tz(t,e,n,r){const s=`https://classroom.googleapis.com/v1/courses/${e}/courseWorkMaterials?courseWorkMaterialStates=PUBLISHED`;try{const i=await Uh(t,s,a=>a.courseWorkMaterial||[],a=>a.nextPageToken),o=new Date().toISOString();return i.map(a=>({id:`mat-${a.id}`,uniqueId:`${e}-${a.id}`,userId:r,courseId:`course-${e}`,courseName:n,title:a.title,description:a.description||null,alternateLink:a.alternateLink||null,materials:a.materials||null,createdAt:a.updateTime||o,lastSyncedAt:o}))}catch(i){return console.warn(`Failed to fetch materials for course ${e}:`,i),[]}}function Cz({children:t}){const{user:e,accessToken:n}=rn(),[r,s]=p.useState(()=>{const z=sessionStorage.getItem("classroom_courses");return z?JSON.parse(z):[]}),[i,o]=p.useState(()=>{const z=sessionStorage.getItem("classroom_assignments");return z?JSON.parse(z):[]}),[a,l]=p.useState(()=>{const z=sessionStorage.getItem("classroom_materials");return z?JSON.parse(z):[]}),[u,h]=p.useState(()=>{const z=sessionStorage.getItem("classroom_notes");return z?new Map(JSON.parse(z)):new Map}),[f,m]=p.useState(()=>!sessionStorage.getItem("classroom_courses")),[y,x]=p.useState(!1),[v,b]=p.useState(()=>{const z=sessionStorage.getItem("classroom_lastSyncedAt");return z?new Date(z):null}),[E,w]=p.useState(null),[S,k]=p.useState(!1),{toast:D}=eu(),O=p.useCallback(async(z=!1)=>{var M;if(!e){w("Please sign in with Google to sync your Classroom data"),m(!1);return}let W=n;if(!W)try{const L=await e.getIdToken();console.log("Got ID token, but need OAuth access token for Classroom API"),w("Access token expired. Please sign out and sign in again to refresh your token."),m(!1);return}catch{w("Unable to authenticate. Please sign in again."),m(!1);return}x(!0),i.length===0&&m(!0),w(null);try{console.log("Starting sync...",{userId:e.uid,hasToken:!!W});const L=await Ez(W,e.uid);if(console.log(`Fetched ${L.length} courses`),L.length===0){w("No active courses found. Make sure you're enrolled in at least one Google Classroom course."),s([]),o([]),b(new Date),x(!1),m(!1);return}const F=[],B=[];for(const G of L)try{console.log(`Fetching data for course: ${G.name}`);const[X,J]=await Promise.all([Sz(W,G.classroomId,G.name,e.uid),Tz(W,G.classroomId,G.name,e.uid)]);console.log(`Found ${X.length} assignments and ${J.length} materials for ${G.name}`),F.push(...X),B.push(...J)}catch(X){console.warn(`Failed to fetch data for course ${G.name}:`,X)}console.log(`Sync complete: ${L.length} courses, ${F.length} assignments, ${B.length} materials`),s(L),o(F),l(B),b(new Date),m(!1);try{await _z(F,W,e.uid,D)}catch(G){console.error("Calendar sync failed:",G)}try{const G=dt(st,"users",e.uid,"settings","notifications"),X=await Ga(G);if(X.exists()&&X.data().enabled&&X.data().notifyDueSoon){const he=dt(st,"users",e.uid,"notifications","digest"),ie=await Ga(he),Q=ie.exists()?(M=ie.data().lastSent)==null?void 0:M.toDate():null,ee=new Date;if(!(Q&&Q.getDate()===ee.getDate()&&Q.getMonth()===ee.getMonth()&&Q.getFullYear()===ee.getFullYear())){const ne=new Date(ee);ne.setDate(ne.getDate()+1),ne.setHours(23,59,59,999);const ue=F.filter(ce=>{if(!ce.dueDate||ce.systemStatus==="submitted"||ce.systemStatus==="graded")return!1;const Ae=new Date(ce.dueDate);return Ae>=ee&&Ae<=ne});if(ue.length>0&&e.email){const ce=ue.map(Ve=>`<li><strong>${Ve.title}</strong> <span style="color:#666">(${Ve.courseName})</span><br>Due: ${new Date(Ve.dueDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</li>`).join(""),Ae=`
                         <div style="font-family: sans-serif; max-width: 600px; margin: 0 auto;">
                           <h2 style="color: #2563eb;"> Daily Digest</h2>
                           <p>You have <strong>${ue.length} assignments</strong> coming up in the next 24 hours:</p>
                           <ul style="line-height: 1.6;">${ce}</ul>
                           <a href="http://localhost:3000" style="display: inline-block; background: #2563eb; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin-top: 20px;">Open Student Sphere</a>
                         </div>
                       `;await xz(e.email,`Student Sphere: ${ue.length} Tasks Due Soon`,Ae,W),await yn(he,{lastSent:ip()}),console.log("Daily digest email delivered.")}}}}catch(G){console.warn("Notification sync failed (non-critical):",G)}z||D({title:"Sync Complete",description:`Successfully synced ${L.length} courses, ${F.length} assignments, and updated Google Calendar.`})}catch(L){console.error("Sync error details:",L);let F="Failed to sync";if(L!=null&&L.message){const B=L.message.toLowerCase();B.includes("401")||B.includes("unauthorized")||B.includes("invalid_token")||B.includes("token expired")?F="Authentication failed. Your access token may have expired. Please sign out and sign in again.":B.includes("403")||B.includes("forbidden")||B.includes("permission denied")?F="Permission denied. Please make sure you granted Classroom access permissions when signing in. Sign out and sign in again, then grant all requested permissions.":B.includes("quota")||B.includes("rate")||B.includes("429")?F="API quota exceeded. Please try again later.":B.includes("cors")||B.includes("network")?F="Network error. Please check your internet connection and try again.":F=`Sync failed: ${L.message}`}else L instanceof TypeError&&L.message.includes("fetch")&&(F="Network error. Please check your internet connection.");w(F),console.error("Sync error:",L),z||D({variant:"destructive",title:"Sync Failed",description:F})}finally{x(!1),m(!1)}},[e,n]);p.useEffect(()=>{if(!e){k(!1),m(!1);return}if(!n){m(!1);return}!S&&!y&&(k(!0),O(!0))},[e,n,S,r.length,i.length,y]),p.useEffect(()=>{sessionStorage.setItem("classroom_courses",JSON.stringify(r))},[r]),p.useEffect(()=>{sessionStorage.setItem("classroom_materials",JSON.stringify(a))},[a]),p.useEffect(()=>{sessionStorage.setItem("classroom_notes",JSON.stringify(Array.from(u.entries())))},[u]),p.useEffect(()=>{sessionStorage.setItem("classroom_assignments",JSON.stringify(i))},[i]),p.useEffect(()=>{v?sessionStorage.setItem("classroom_lastSyncedAt",v.toISOString()):sessionStorage.removeItem("classroom_lastSyncedAt")},[v]);const T=p.useCallback((z,W)=>{o(M=>M.map(L=>L.id===z?{...L,userStatus:W}:L))},[]),C=p.useCallback((z,W,M=!1)=>{const L={id:bz(),userId:(e==null?void 0:e.uid)||"",assignmentId:z,content:W,isImportant:M,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};h(F=>{const B=new Map(F),G=B.get(z)||[];return B.set(z,[...G,L]),B})},[e]),I=p.useCallback((z,W,M)=>{h(L=>{const F=new Map(L);for(const[B,G]of Array.from(F.entries())){const X=G.findIndex(J=>J.id===z);if(X!==-1){const J=[...G];J[X]={...J[X],content:W,isImportant:M??J[X].isImportant,updatedAt:new Date().toISOString()},F.set(B,J);break}}return F})},[]),A=p.useCallback((z,W)=>{h(M=>{const L=new Map(M),F=L.get(W)||[];return L.set(W,F.filter(B=>B.id!==z)),L})},[]),P=p.useCallback(()=>{const z=[{id:"backlog",title:"Backlog",assignments:[]},{id:"in_progress",title:"In Progress",assignments:[]},{id:"submitted",title:"Submitted",assignments:[]},{id:"graded",title:"Graded",assignments:[]},{id:"overdue",title:"Overdue",assignments:[]}];return i.forEach(W=>{const M=W.userStatus==="in_progress"?"in_progress":W.systemStatus,L=z.find(F=>F.id===M);L&&L.assignments.push(W)}),z.forEach(W=>{W.assignments.sort((M,L)=>M.dueDate?L.dueDate?new Date(M.dueDate).getTime()-new Date(L.dueDate).getTime():-1:1)}),z},[i]),j=p.useCallback(()=>{const z=new Date,W=new Date(z);W.setDate(W.getDate()+3);const M=new Date(z);M.setDate(M.getDate()+7);const L=i.filter(Q=>Q.systemStatus!=="graded"&&Q.systemStatus!=="submitted"),F=i.filter(Q=>{if(!Q.dueDate||Q.systemStatus==="graded"||Q.systemStatus==="submitted")return!1;const ee=new Date(Q.dueDate);return ee>=z&&ee<=W}),B=i.filter(Q=>{if(!Q.dueDate||Q.systemStatus==="graded"||Q.systemStatus==="submitted")return!1;const ee=new Date(Q.dueDate);return ee>=z&&ee<=M}),G=i.filter(Q=>Q.systemStatus==="overdue"),X=[],J=new Date,he=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];for(let Q=0;Q<7;Q++){const ee=new Date(J);ee.setDate(ee.getDate()+Q);const me=ee.toISOString().split("T")[0],ne=i.filter(ue=>ue.dueDate?ue.dueDate.split("T")[0]===me:!1).length;X.push({day:he[ee.getDay()],count:ne,isToday:Q===0})}const ie=[...L].filter(Q=>Q.dueDate).sort((Q,ee)=>new Date(Q.dueDate).getTime()-new Date(ee.dueDate).getTime()).slice(0,5);return{totalActive:L.length,upcoming3Days:F.length,upcoming7Days:B.length,overdue:G.length,weeklyWorkload:X,nextActions:ie}},[i]),R=p.useCallback(z=>{let W=[...i];z!=null&&z.courseId&&(W=W.filter(B=>B.courseId===z.courseId)),z!=null&&z.status&&(W=W.filter(B=>B.systemStatus===z.status)),W.sort((B,G)=>B.dueDate?G.dueDate?new Date(B.dueDate).getTime()-new Date(G.dueDate).getTime():-1:1);const M=new Map,L=new Date,F=new Date(L);return F.setDate(F.getDate()+1),W.forEach(B=>{if(!B.dueDate)return;const G=B.dueDate.split("T")[0],X=new Date(B.dueDate);let J;G===L.toISOString().split("T")[0]?J="Today":G===F.toISOString().split("T")[0]?J="Tomorrow":J=X.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),M.has(G)||M.set(G,{date:G,dateLabel:J,assignments:[]}),M.get(G).assignments.push(B)}),Array.from(M.values())},[i]),$=p.useCallback(z=>i.find(W=>W.id===z),[i]),re=p.useCallback(z=>u.get(z)||[],[u]);return c.jsx(QA.Provider,{value:{courses:r,assignments:i,notes:u,isLoading:f,isSyncing:y,lastSyncedAt:v,error:E,syncClassroom:O,updateAssignmentStatus:T,addNote:C,updateNote:I,deleteNote:A,getPipelineColumns:P,getDashboardMetrics:j,getTimelineGroups:R,getAssignmentById:$,getNotesForAssignment:re,materials:a},children:t})}function xs(){const t=p.useContext(QA);if(t===void 0)throw new Error("useClassroom must be used within a ClassroomProvider");return t}var Em="focusScope.autoFocusOnMount",Sm="focusScope.autoFocusOnUnmount",wb={bubbles:!1,cancelable:!0},Iz="FocusScope",Pw=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[a,l]=p.useState(null),u=Zt(s),h=Zt(i),f=p.useRef(null),m=Le(e,v=>l(v)),y=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(S){if(y.paused||!a)return;const k=S.target;a.contains(k)?f.current=k:Ds(f.current,{select:!0})},b=function(S){if(y.paused||!a)return;const k=S.relatedTarget;k!==null&&(a.contains(k)||Ds(f.current,{select:!0}))},E=function(S){if(document.activeElement===document.body)for(const D of S)D.removedNodes.length>0&&Ds(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",b);const w=new MutationObserver(E);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",b),w.disconnect()}}},[r,a,y.paused]),p.useEffect(()=>{if(a){_b.add(y);const v=document.activeElement;if(!a.contains(v)){const E=new CustomEvent(Em,wb);a.addEventListener(Em,u),a.dispatchEvent(E),E.defaultPrevented||(Nz(Dz(XA(a)),{select:!0}),document.activeElement===v&&Ds(a))}return()=>{a.removeEventListener(Em,u),setTimeout(()=>{const E=new CustomEvent(Sm,wb);a.addEventListener(Sm,h),a.dispatchEvent(E),E.defaultPrevented||Ds(v??document.body,{select:!0}),a.removeEventListener(Sm,h),_b.remove(y)},0)}}},[a,u,h,y]);const x=p.useCallback(v=>{if(!n&&!r||y.paused)return;const b=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,E=document.activeElement;if(b&&E){const w=v.currentTarget,[S,k]=Az(w);S&&k?!v.shiftKey&&E===k?(v.preventDefault(),n&&Ds(S,{select:!0})):v.shiftKey&&E===S&&(v.preventDefault(),n&&Ds(k,{select:!0})):E===w&&v.preventDefault()}},[n,r,y.paused]);return c.jsx(ye.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});Pw.displayName=Iz;function Nz(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Ds(r,{select:e}),document.activeElement!==n)return}function Az(t){const e=XA(t),n=xb(e,t),r=xb(e.reverse(),t);return[n,r]}function XA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function xb(t,e){for(const n of t)if(!kz(n,{upTo:e}))return n}function kz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Rz(t){return t instanceof HTMLInputElement&&"select"in t}function Ds(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Rz(t)&&e&&t.select()}}var _b=Pz();function Pz(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=bb(t,e),t.unshift(e)},remove(e){var n;t=bb(t,e),(n=t[0])==null||n.resume()}}}function bb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Dz(t){return t.filter(e=>e.tagName!=="A")}var Tm=0;function YA(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Eb()),document.body.insertAdjacentElement("beforeend",t[1]??Eb()),Tm++,()=>{Tm===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Tm--}},[])}function Eb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Rr=function(){return Rr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Rr.apply(this,arguments)};function JA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function jz(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Bd="right-scroll-bar-position",Hd="width-before-scroll-bar",Oz="with-scroll-bars-hidden",Mz="--removed-body-scroll-bar-size";function Cm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Lz(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Vz=typeof window<"u"?p.useLayoutEffect:p.useEffect,Sb=new WeakMap;function Fz(t,e){var n=Lz(null,function(r){return t.forEach(function(s){return Cm(s,r)})});return Vz(function(){var r=Sb.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(a){i.has(a)||Cm(a,null)}),i.forEach(function(a){s.has(a)||Cm(a,o)})}Sb.set(n,t)},[t]),n}function Uz(t){return t}function zz(t,e){e===void 0&&(e=Uz);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(a){return i(a)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(i),o=n}var l=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function $z(t){t===void 0&&(t={});var e=zz(null);return e.options=Rr({async:!0,ssr:!1},t),e}var ZA=function(t){var e=t.sideCar,n=JA(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,Rr({},n))};ZA.isSideCarExport=!0;function Bz(t,e){return t.useMedium(e),ZA}var ek=$z(),Im=function(){},op=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Im,onWheelCapture:Im,onTouchMoveCapture:Im}),s=r[0],i=r[1],o=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,y=t.noIsolation,x=t.inert,v=t.allowPinchZoom,b=t.as,E=b===void 0?"div":b,w=t.gapMode,S=JA(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,D=Fz([n,e]),O=Rr(Rr({},S),s);return p.createElement(p.Fragment,null,h&&p.createElement(k,{sideCar:ek,removeScrollBar:u,shards:f,noIsolation:y,inert:x,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:w}),o?p.cloneElement(p.Children.only(a),Rr(Rr({},O),{ref:D})):p.createElement(E,Rr({},O,{className:l,ref:D}),a))});op.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};op.classNames={fullWidth:Hd,zeroRight:Bd};var Hz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Wz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Hz();return e&&t.setAttribute("nonce",e),t}function qz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Gz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Kz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Wz())&&(qz(e,n),Gz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Qz=function(){var t=Kz();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},tk=function(){var t=Qz(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Xz={left:0,top:0,right:0,gap:0},Nm=function(t){return parseInt(t||"",10)||0},Yz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Nm(n),Nm(r),Nm(s)]},Jz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Xz;var e=Yz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Zz=tk(),pa="data-scroll-locked",e8=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Oz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(pa,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bd,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Hd,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Bd," .").concat(Bd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hd," .").concat(Hd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(pa,`] {
    `).concat(Mz,": ").concat(a,`px;
  }
`)},Tb=function(){var t=parseInt(document.body.getAttribute(pa)||"0",10);return isFinite(t)?t:0},t8=function(){p.useEffect(function(){return document.body.setAttribute(pa,(Tb()+1).toString()),function(){var t=Tb()-1;t<=0?document.body.removeAttribute(pa):document.body.setAttribute(pa,t.toString())}},[])},n8=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;t8();var i=p.useMemo(function(){return Jz(s)},[s]);return p.createElement(Zz,{styles:e8(i,!e,s,n?"":"!important")})},py=!1;if(typeof window<"u")try{var dd=Object.defineProperty({},"passive",{get:function(){return py=!0,!0}});window.addEventListener("test",dd,dd),window.removeEventListener("test",dd,dd)}catch{py=!1}var Oo=py?{passive:!1}:!1,r8=function(t){return t.tagName==="TEXTAREA"},nk=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!r8(t)&&n[e]==="visible")},s8=function(t){return nk(t,"overflowY")},i8=function(t){return nk(t,"overflowX")},Cb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=rk(t,r);if(s){var i=sk(t,r),o=i[1],a=i[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},o8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},a8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},rk=function(t,e){return t==="v"?s8(e):i8(e)},sk=function(t,e){return t==="v"?o8(e):a8(e)},l8=function(t,e){return t==="h"&&e==="rtl"?-1:1},c8=function(t,e,n,r,s){var i=l8(t,window.getComputedStyle(e).direction),o=i*r,a=n.target,l=e.contains(a),u=!1,h=o>0,f=0,m=0;do{var y=sk(t,a),x=y[0],v=y[1],b=y[2],E=v-b-i*x;(x||E)&&rk(t,a)&&(f+=E,m+=x),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},hd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Ib=function(t){return[t.deltaX,t.deltaY]},Nb=function(t){return t&&"current"in t?t.current:t},u8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},d8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},h8=0,Mo=[];function f8(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(h8++)[0],i=p.useState(tk)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=jz([t.lockRef.current],(t.shards||[]).map(Nb),!0).filter(Boolean);return v.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var a=p.useCallback(function(v,b){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var E=hd(v),w=n.current,S="deltaX"in v?v.deltaX:w[0]-E[0],k="deltaY"in v?v.deltaY:w[1]-E[1],D,O=v.target,T=Math.abs(S)>Math.abs(k)?"h":"v";if("touches"in v&&T==="h"&&O.type==="range")return!1;var C=Cb(T,O);if(!C)return!0;if(C?D=T:(D=T==="v"?"h":"v",C=Cb(T,O)),!C)return!1;if(!r.current&&"changedTouches"in v&&(S||k)&&(r.current=D),!D)return!0;var I=r.current||D;return c8(I,b,v,I==="h"?S:k,!0)},[]),l=p.useCallback(function(v){var b=v;if(!(!Mo.length||Mo[Mo.length-1]!==i)){var E="deltaY"in b?Ib(b):hd(b),w=e.current.filter(function(D){return D.name===b.type&&(D.target===b.target||b.target===D.shadowParent)&&u8(D.delta,E)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var S=(o.current.shards||[]).map(Nb).filter(Boolean).filter(function(D){return D.contains(b.target)}),k=S.length>0?a(b,S[0]):!o.current.noIsolation;k&&b.cancelable&&b.preventDefault()}}},[]),u=p.useCallback(function(v,b,E,w){var S={name:v,delta:b,target:E,should:w,shadowParent:p8(E)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(k){return k!==S})},1)},[]),h=p.useCallback(function(v){n.current=hd(v),r.current=void 0},[]),f=p.useCallback(function(v){u(v.type,Ib(v),v.target,a(v,t.lockRef.current))},[]),m=p.useCallback(function(v){u(v.type,hd(v),v.target,a(v,t.lockRef.current))},[]);p.useEffect(function(){return Mo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Oo),document.addEventListener("touchmove",l,Oo),document.addEventListener("touchstart",h,Oo),function(){Mo=Mo.filter(function(v){return v!==i}),document.removeEventListener("wheel",l,Oo),document.removeEventListener("touchmove",l,Oo),document.removeEventListener("touchstart",h,Oo)}},[]);var y=t.removeScrollBar,x=t.inert;return p.createElement(p.Fragment,null,x?p.createElement(i,{styles:d8(s)}):null,y?p.createElement(n8,{gapMode:t.gapMode}):null)}function p8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const m8=Bz(ek,f8);var Dw=p.forwardRef(function(t,e){return p.createElement(op,Rr({},t,{ref:e,sideCar:m8}))});Dw.classNames=op.classNames;var g8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Lo=new WeakMap,fd=new WeakMap,pd={},Am=0,ik=function(t){return t&&(t.host||ik(t.parentNode))},y8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=ik(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},v8=function(t,e,n,r){var s=y8(e,Array.isArray(t)?t:[t]);pd[n]||(pd[n]=new WeakMap);var i=pd[n],o=[],a=new Set,l=new Set(s),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(m){if(a.has(m))h(m);else try{var y=m.getAttribute(r),x=y!==null&&y!=="false",v=(Lo.get(m)||0)+1,b=(i.get(m)||0)+1;Lo.set(m,v),i.set(m,b),o.push(m),v===1&&x&&fd.set(m,!0),b===1&&m.setAttribute(n,"true"),x||m.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return h(e),a.clear(),Am++,function(){o.forEach(function(f){var m=Lo.get(f)-1,y=i.get(f)-1;Lo.set(f,m),i.set(f,y),m||(fd.has(f)||f.removeAttribute(r),fd.delete(f)),y||f.removeAttribute(n)}),Am--,Am||(Lo=new WeakMap,Lo=new WeakMap,fd=new WeakMap,pd={})}},ok=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=g8(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),v8(r,s,n,"aria-hidden")):function(){return null}},jw="Dialog",[ak,lk]=qn(jw),[w8,yr]=ak(jw),ck=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,a=p.useRef(null),l=p.useRef(null),[u=!1,h]=hi({prop:r,defaultProp:s,onChange:i});return c.jsx(w8,{scope:e,triggerRef:a,contentRef:l,contentId:ns(),titleId:ns(),descriptionId:ns(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};ck.displayName=jw;var uk="DialogTrigger",dk=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=yr(uk,n),i=Le(e,s.triggerRef);return c.jsx(ye.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Lw(s.open),...r,ref:i,onClick:de(t.onClick,s.onOpenToggle)})});dk.displayName=uk;var Ow="DialogPortal",[x8,hk]=ak(Ow,{forceMount:void 0}),fk=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=yr(Ow,e);return c.jsx(x8,{scope:e,forceMount:n,children:p.Children.map(r,o=>c.jsx(So,{present:n||i.open,children:c.jsx(xf,{asChild:!0,container:s,children:o})}))})};fk.displayName=Ow;var zh="DialogOverlay",pk=p.forwardRef((t,e)=>{const n=hk(zh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=yr(zh,t.__scopeDialog);return i.modal?c.jsx(So,{present:r||i.open,children:c.jsx(b8,{...s,ref:e})}):null});pk.displayName=zh;var _8=ja("DialogOverlay.RemoveScroll"),b8=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=yr(zh,n);return c.jsx(Dw,{as:_8,allowPinchZoom:!0,shards:[s.contentRef],children:c.jsx(ye.div,{"data-state":Lw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),xo="DialogContent",mk=p.forwardRef((t,e)=>{const n=hk(xo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=yr(xo,t.__scopeDialog);return c.jsx(So,{present:r||i.open,children:i.modal?c.jsx(E8,{...s,ref:e}):c.jsx(S8,{...s,ref:e})})});mk.displayName=xo;var E8=p.forwardRef((t,e)=>{const n=yr(xo,t.__scopeDialog),r=p.useRef(null),s=Le(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return ok(i)},[]),c.jsx(gk,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:de(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:de(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,a=o.button===0&&o.ctrlKey===!0;(o.button===2||a)&&i.preventDefault()}),onFocusOutside:de(t.onFocusOutside,i=>i.preventDefault())})}),S8=p.forwardRef((t,e)=>{const n=yr(xo,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return c.jsx(gk,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),gk=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,a=yr(xo,n),l=p.useRef(null),u=Le(e,l);return YA(),c.jsxs(c.Fragment,{children:[c.jsx(Pw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:c.jsx(tu,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":Lw(a.open),...o,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(C8,{titleId:a.titleId}),c.jsx(N8,{contentRef:l,descriptionId:a.descriptionId})]})]})}),Mw="DialogTitle",yk=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=yr(Mw,n);return c.jsx(ye.h2,{id:s.titleId,...r,ref:e})});yk.displayName=Mw;var vk="DialogDescription",wk=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=yr(vk,n);return c.jsx(ye.p,{id:s.descriptionId,...r,ref:e})});wk.displayName=vk;var xk="DialogClose",_k=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=yr(xk,n);return c.jsx(ye.button,{type:"button",...r,ref:e,onClick:de(t.onClick,()=>s.onOpenChange(!1))})});_k.displayName=xk;function Lw(t){return t?"open":"closed"}var bk="DialogTitleWarning",[T8,Ek]=nM(bk,{contentName:xo,titleName:Mw,docsSlug:"dialog"}),C8=({titleId:t})=>{const e=Ek(bk),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},I8="DialogDescriptionWarning",N8=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ek(I8).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},Sk=ck,A8=dk,Tk=fk,Vw=pk,Fw=mk,Uw=yk,zw=wk,$w=_k,Ck="AlertDialog",[k8,YH]=qn(Ck,[lk]),_s=lk(),Ik=t=>{const{__scopeAlertDialog:e,...n}=t,r=_s(e);return c.jsx(Sk,{...r,...n,modal:!0})};Ik.displayName=Ck;var R8="AlertDialogTrigger",Nk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=_s(n);return c.jsx(A8,{...s,...r,ref:e})});Nk.displayName=R8;var P8="AlertDialogPortal",Ak=t=>{const{__scopeAlertDialog:e,...n}=t,r=_s(e);return c.jsx(Tk,{...r,...n})};Ak.displayName=P8;var D8="AlertDialogOverlay",kk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=_s(n);return c.jsx(Vw,{...s,...r,ref:e})});kk.displayName=D8;var ma="AlertDialogContent",[j8,O8]=k8(ma),M8=$T("AlertDialogContent"),Rk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,children:r,...s}=t,i=_s(n),o=p.useRef(null),a=Le(e,o),l=p.useRef(null);return c.jsx(T8,{contentName:ma,titleName:Pk,docsSlug:"alert-dialog",children:c.jsx(j8,{scope:n,cancelRef:l,children:c.jsxs(Fw,{role:"alertdialog",...i,...s,ref:a,onOpenAutoFocus:de(s.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=l.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[c.jsx(M8,{children:r}),c.jsx(V8,{contentRef:o})]})})})});Rk.displayName=ma;var Pk="AlertDialogTitle",Dk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=_s(n);return c.jsx(Uw,{...s,...r,ref:e})});Dk.displayName=Pk;var jk="AlertDialogDescription",Ok=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=_s(n);return c.jsx(zw,{...s,...r,ref:e})});Ok.displayName=jk;var L8="AlertDialogAction",Mk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,s=_s(n);return c.jsx($w,{...s,...r,ref:e})});Mk.displayName=L8;var Lk="AlertDialogCancel",Vk=p.forwardRef((t,e)=>{const{__scopeAlertDialog:n,...r}=t,{cancelRef:s}=O8(Lk,n),i=_s(n),o=Le(e,s);return c.jsx($w,{...i,...r,ref:o})});Vk.displayName=Lk;var V8=({contentRef:t})=>{const e=`\`${ma}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${ma}\` by passing a \`${jk}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${ma}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var r;document.getElementById((r=t.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},F8=Ik,U8=Nk,z8=Ak,Fk=kk,Uk=Rk,zk=Mk,$k=Vk,Bk=Dk,Hk=Ok;const Bw=ru("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),pe=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?sM:"button";return c.jsx(o,{className:Z(Bw({variant:e,size:n,className:t})),ref:i,...s})});pe.displayName="Button";const Wk=F8,qk=U8,$8=z8,Gk=p.forwardRef(({className:t,...e},n)=>c.jsx(Fk,{className:Z("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));Gk.displayName=Fk.displayName;const Hw=p.forwardRef(({className:t,...e},n)=>c.jsxs($8,{children:[c.jsx(Gk,{}),c.jsx(Uk,{ref:n,className:Z("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));Hw.displayName=Uk.displayName;const Ww=({className:t,...e})=>c.jsx("div",{className:Z("flex flex-col space-y-2 text-center sm:text-left",t),...e});Ww.displayName="AlertDialogHeader";const qw=({className:t,...e})=>c.jsx("div",{className:Z("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});qw.displayName="AlertDialogFooter";const Gw=p.forwardRef(({className:t,...e},n)=>c.jsx(Bk,{ref:n,className:Z("text-lg font-semibold",t),...e}));Gw.displayName=Bk.displayName;const Kw=p.forwardRef(({className:t,...e},n)=>c.jsx(Hk,{ref:n,className:Z("text-sm text-muted-foreground",t),...e}));Kw.displayName=Hk.displayName;const Qw=p.forwardRef(({className:t,...e},n)=>c.jsx(zk,{ref:n,className:Z(Bw(),t),...e}));Qw.displayName=zk.displayName;const Xw=p.forwardRef(({className:t,...e},n)=>c.jsx($k,{ref:n,className:Z(Bw({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Xw.displayName=$k.displayName;const km=768;function Yw(){const[t,e]=p.useState(void 0);return p.useEffect(()=>{const n=window.matchMedia(`(max-width: ${km-1}px)`),r=()=>{e(window.innerWidth<km)};return n.addEventListener("change",r),e(window.innerWidth<km),()=>n.removeEventListener("change",r)},[]),!!t}var Jw="Avatar",[B8,JH]=qn(Jw),[H8,Kk]=B8(Jw),Qk=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=p.useState("idle");return c.jsx(H8,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:c.jsx(ye.span,{...r,ref:e})})});Qk.displayName=Jw;var Xk="AvatarImage",Yk=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=Kk(Xk,n),a=W8(r,i),l=Zt(u=>{s(u),o.onImageLoadingStatusChange(u)});return _t(()=>{a!=="idle"&&l(a)},[a,l]),a==="loaded"?c.jsx(ye.img,{...i,ref:e,src:r}):null});Yk.displayName=Xk;var Jk="AvatarFallback",Zk=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=Kk(Jk,n),[o,a]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const l=window.setTimeout(()=>a(!0),r);return()=>window.clearTimeout(l)}},[r]),o&&i.imageLoadingStatus!=="loaded"?c.jsx(ye.span,{...s,ref:e}):null});Zk.displayName=Jk;function Ab(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function W8(t,{referrerPolicy:e,crossOrigin:n}){const r=G8(),s=p.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,a]=p.useState(()=>Ab(i,t));return _t(()=>{a(Ab(i,t))},[i,t]),_t(()=>{const l=f=>()=>{a(f)};if(!i)return;const u=l("loaded"),h=l("error");return i.addEventListener("load",u),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)}},[i,n,e]),o}function q8(){return()=>{}}function G8(){return p.useSyncExternalStore(q8,()=>!0,()=>!1)}var eR=Qk,tR=Yk,nR=Zk;const Ki=p.forwardRef(({className:t,...e},n)=>c.jsx(eR,{ref:n,className:Z(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,t),...e}));Ki.displayName=eR.displayName;const Qi=p.forwardRef(({className:t,...e},n)=>c.jsx(tR,{ref:n,className:Z("aspect-square h-full w-full",t),...e}));Qi.displayName=tR.displayName;const Xi=p.forwardRef(({className:t,...e},n)=>c.jsx(nR,{ref:n,className:Z("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));Xi.displayName=nR.displayName;const K8=[{path:"/dashboard",label:"Dashboard",icon:XM},{path:"/",label:"Pipeline",icon:vC},{path:"/leaderboard",label:"Leaderboard",icon:EC},{path:"/timeline",label:"Timeline",icon:To},{path:"/notes",label:"Notes",icon:ec}];function Q8({mobileOpen:t,onMobileClose:e}){var h,f;const[n]=bv(),r=Yw(),{user:s,signOut:i}=rn(),{theme:o,toggleTheme:a}=KA(),l=((h=s==null?void 0:s.displayName)==null?void 0:h.split(" ").map(m=>m[0]).join("").toUpperCase())||((f=s==null?void 0:s.email)==null?void 0:f[0].toUpperCase())||"U",u=()=>c.jsxs("div",{className:"flex flex-col h-full bg-background",children:[c.jsxs("div",{className:"h-16 flex items-center px-6 border-b shrink-0",children:[c.jsx("img",{src:"/logo.png",alt:"Trace",className:"w-8 h-8 mr-3"}),c.jsx("span",{className:"font-bold text-lg tracking-tight",children:"Trace"}),r&&c.jsx("button",{className:"ml-auto",onClick:e,children:c.jsx(su,{className:"w-5 h-5"})})]}),c.jsx("div",{className:"p-4 border-b shrink-0",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsxs(Ki,{className:"h-8 w-8",children:[c.jsx(Qi,{src:(s==null?void 0:s.photoURL)||void 0,alt:(s==null?void 0:s.displayName)||"User",referrerPolicy:"no-referrer"}),c.jsx(Xi,{className:"text-xs",children:l})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:(s==null?void 0:s.displayName)||"User"}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s==null?void 0:s.email})]})]})}),c.jsx("nav",{className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto",children:c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2",children:"Views"}),K8.map(m=>{const y=n===m.path,x=m.icon;return c.jsxs(ho,{href:m.path,onClick:e,className:Z("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",y?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),"data-testid":`nav-${m.label.toLowerCase()}`,children:[c.jsx(x,{className:"w-4 h-4 mr-3"}),m.label]},m.path)})]})}),c.jsxs("div",{className:"p-4 border-t space-y-1 shrink-0",children:[c.jsxs("button",{onClick:a,className:"w-full flex items-center px-3 py-2 text-sm font-medium text-muted-foreground rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[o==="dark"?c.jsx(_C,{className:"w-4 h-4 mr-3"}):c.jsx(wC,{className:"w-4 h-4 mr-3"}),o==="dark"?"Light Mode":"Dark Mode"]}),c.jsxs(ho,{href:"/settings",onClick:e,className:Z("w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors",n==="/settings"?"bg-accent text-accent-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[c.jsx(d4,{className:"w-4 h-4 mr-3"}),"Settings"]}),c.jsxs(Wk,{children:[c.jsx(qk,{asChild:!0,children:c.jsxs("button",{className:"w-full flex items-center px-3 py-2 text-sm font-medium text-destructive rounded-md hover:bg-destructive/10 transition-colors",children:[c.jsx(Mg,{className:"w-4 h-4 mr-3"}),"Sign Out"]})}),c.jsxs(Hw,{children:[c.jsxs(Ww,{children:[c.jsx(Gw,{children:"Are you absolutely sure?"}),c.jsx(Kw,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),c.jsxs(qw,{children:[c.jsx(Xw,{children:"Cancel"}),c.jsx(Qw,{onClick:i,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})]});return c.jsxs(c.Fragment,{children:[c.jsx("aside",{className:Z("fixed inset-y-0 left-0 z-50 w-64 border-r bg-background transform transition-transform duration-200 ease-in-out",r?t?"translate-x-0":"-translate-x-full":"relative translate-x-0"),children:c.jsx(u,{})}),r&&t&&c.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 md:hidden",onClick:e})]})}const rR=p.forwardRef(({className:t,type:e,...n},r)=>c.jsx("input",{type:e,className:Z("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));rR.displayName="Input";function X8({onMobileMenuClick:t}){const{syncClassroom:e,isSyncing:n}=xs(),[r]=bv(),[s,i]=p.useState(""),o=Yw(),l={"/":"Pipeline","/timeline":"Timeline","/dashboard":"Dashboard","/notes":"Notes","/settings":"Settings"}[r]||"Pipeline";return c.jsxs("header",{className:"h-16 bg-background border-b flex items-center px-4 md:px-6 justify-between shrink-0 z-10",children:[c.jsxs("div",{className:"flex items-center flex-1",children:[o&&c.jsx(pe,{variant:"ghost",size:"icon",onClick:t,className:"mr-2",children:c.jsx(o4,{className:"h-5 w-5"})}),c.jsx("span",{className:"md:hidden font-medium text-lg",children:l}),c.jsxs("div",{className:"relative w-full max-w-md hidden md:block",children:[c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:c.jsx(u4,{className:"h-4 w-4 text-muted-foreground"})}),c.jsx(rR,{type:"text",value:s,onChange:u=>i(u.target.value),className:"pl-10 bg-muted/50 border-muted focus:bg-background",placeholder:"Search assignments..."})]})]}),c.jsx("div",{className:"flex items-center ml-4",children:c.jsx(pe,{variant:"ghost",size:"icon",onClick:u=>{u.preventDefault(),e().catch(h=>{console.error("Sync failed:",h)})},disabled:n,className:Z(n&&"animate-spin"),title:"Sync with Classroom",children:c.jsx(Ef,{className:"w-5 h-5"})})})]})}var sR={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},kb=Se.createContext&&Se.createContext(sR),Y8=["attr","size","title"];function J8(t,e){if(t==null)return{};var n=Z8(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Z8(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $h(){return $h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$h.apply(this,arguments)}function Rb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Bh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rb(Object(n),!0).forEach(function(r){e$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rb(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function e$(t,e,n){return e=t$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function t$(t){var e=n$(t,"string");return typeof e=="symbol"?e:e+""}function n$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iR(t){return t&&t.map((e,n)=>Se.createElement(e.tag,Bh({key:n},e.attr),iR(e.child)))}function Zw(t){return e=>Se.createElement(r$,$h({attr:Bh({},t.attr)},e),iR(t.child))}function r$(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=J8(t,Y8),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),Se.createElement("svg",$h({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Bh(Bh({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&Se.createElement("title",null,i),t.children)};return kb!==void 0?Se.createElement(kb.Consumer,null,n=>e(n)):e(sR)}function s$(t){return Zw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(t)}function i$(t){return Zw({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.6367 1.6367C.7322 1.6367 0 2.369 0 3.2734v17.4532c0 .9045.7322 1.6367 1.6367 1.6367h20.7266c.9045 0 1.6367-.7322 1.6367-1.6367V3.2734c0-.9045-.7322-1.6367-1.6367-1.6367H1.6367zm.545 2.1817h19.6367v16.3632h-2.7266v-1.0898h-4.9102v1.0898h-12V3.8184zM12 8.1816c-.9046 0-1.6367.7322-1.6367 1.6368 0 .9045.7321 1.6367 1.6367 1.6367.9046 0 1.6367-.7322 1.6367-1.6367 0-.9046-.7321-1.6368-1.6367-1.6368zm-4.3633 1.9102c-.6773 0-1.2285.5493-1.2285 1.2266 0 .6772.5512 1.2265 1.2285 1.2265.6773 0 1.2266-.5493 1.2266-1.2265 0-.6773-.5493-1.2266-1.2266-1.2266zm8.7266 0c-.6773 0-1.2266.5493-1.2266 1.2266 0 .6772.5493 1.2265 1.2266 1.2265.6773 0 1.2285-.5493 1.2285-1.2265 0-.6773-.5512-1.2266-1.2285-1.2266zM12 12.5449c-1.179 0-2.4128.4012-3.1484 1.0059-.384-.1198-.8043-.1875-1.2149-.1875-1.3136 0-2.7285.695-2.7285 1.5586v.8965h14.1836v-.8965c0-.8637-1.4149-1.5586-2.7285-1.5586-.4106 0-.831.0677-1.2149.1875-.7356-.6047-1.9694-1.0059-3.1484-1.0059Z"},child:[]}]})(t)}const o$=[{icon:i$,title:"Classroom Sync",description:"Direct 2-way integration."},{icon:s4,title:"Kanban Board",description:"Visual assignment tracking."},{icon:QM,title:"Linear Timeline",description:"Chronological deadline view."},{icon:YM,title:"Performance Metrics",description:"Grade & workload analytics."}];function a$(){const{signInWithGoogle:t,loading:e,error:n}=rn();return c.jsxs("div",{className:"h-screen w-full bg-white text-zinc-950 flex overflow-hidden font-sans selection:bg-zinc-200",children:[c.jsxs("div",{className:"hidden lg:flex lg:w-1/2 h-full flex-col justify-between border-r border-zinc-200 bg-zinc-50/50 relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#e4e4e7_1px,transparent_1px),linear-gradient(to_bottom,#e4e4e7_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_100%)] pointer-events-none"}),c.jsx("header",{className:"px-10 py-8 z-10",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-10 w-10 object-contain rounded-md"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]})}),c.jsx("div",{className:"flex-1 flex flex-col justify-center px-16 z-10",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-zinc-950 leading-[1.05]",children:["Google Classroom, ",c.jsx("br",{}),c.jsx("span",{className:"text-zinc-400",children:"supercharged."})]}),c.jsx("p",{className:"text-lg text-zinc-600 max-w-md leading-relaxed",children:"Trace extracts your assignment data and reorganizes it into a professional project management workflow."}),c.jsx("div",{className:"grid grid-cols-2 gap-px bg-zinc-200 border border-zinc-200 mt-6 rounded-lg overflow-hidden shadow-sm",children:o$.map(r=>c.jsxs("div",{className:"bg-white p-4 hover:bg-zinc-50 transition-colors duration-200",children:[c.jsx(r.icon,{className:"h-5 w-5 text-zinc-950 mb-2"}),c.jsx("h3",{className:"font-semibold text-sm text-zinc-950",children:r.title}),c.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:r.description})]},r.title))})]})}),c.jsx("div",{className:"px-10 py-6 border-t border-zinc-200/50 bg-white/50 backdrop-blur-sm z-10",children:c.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[c.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-400"}),"v2.0 Stable Build"]})})]}),c.jsxs("div",{className:"w-full lg:w-1/2 h-full flex flex-col bg-white overflow-y-auto",children:[c.jsxs("div",{className:"lg:hidden p-6 border-b border-zinc-100 flex items-center gap-3 bg-white sticky top-0 z-50",children:[c.jsx("img",{src:"/logo.png",alt:"Trace Logo",className:"h-9 w-9 object-contain rounded-md"}),c.jsxs("div",{children:[c.jsx("span",{className:"font-bold tracking-tight text-lg block leading-none",children:"Trace"}),c.jsx("span",{className:"text-[10px] uppercase tracking-widest text-zinc-500 font-medium",children:"by Kishor Irnak"})]})]}),c.jsx("div",{className:"flex-1 flex flex-col justify-center p-6 sm:p-12 lg:p-24",children:c.jsxs("div",{className:"w-full max-w-sm mx-auto space-y-8",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h2",{className:"text-2xl font-semibold tracking-tight text-zinc-900",children:"Sign in to Trace"}),c.jsx("p",{className:"text-sm text-zinc-500",children:"Connect your academic account to sync assignments."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-zinc-50 border border-zinc-200 p-4 rounded-md flex gap-3",children:[c.jsx(Nn,{className:"h-5 w-5 text-zinc-900 shrink-0 mt-0.5",strokeWidth:1.5}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-sm font-semibold text-zinc-900",children:"Important"}),c.jsxs("p",{className:"text-xs text-zinc-600 leading-relaxed",children:["You must sign in using your"," ",c.jsx("strong",{className:"text-zinc-900",children:"Google Classroom Email"}),". Personal Gmail accounts without classroom data will not work."]})]})]}),c.jsxs(pe,{onClick:t,disabled:e,className:"w-full h-12 bg-zinc-950 hover:bg-zinc-800 text-white border border-transparent rounded-md transition-all duration-200 flex items-center justify-center gap-3 shadow-sm hover:shadow-md","data-testid":"button-signin-google",children:[c.jsx(s$,{className:"h-4 w-4"}),c.jsx("span",{className:"font-medium",children:"Continue with Google"})]}),n&&c.jsxs("div",{className:"p-3 bg-red-50 border border-red-100 text-red-600 text-sm rounded-md flex gap-3 items-center",children:[c.jsx(Nn,{className:"h-4 w-4 shrink-0"}),c.jsx("p",{children:n})]})]}),c.jsx("div",{className:"pt-8 border-t border-zinc-100",children:c.jsxs("div",{className:"flex gap-4",children:[c.jsx(h4,{className:"h-5 w-5 text-zinc-400 shrink-0",strokeWidth:1.5}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{className:"text-xs font-medium text-zinc-900",children:"Privacy First"}),c.jsx("p",{className:"text-xs text-zinc-500 leading-relaxed",children:"Trace uses the official Google Classroom API with read-only permission. We cannot edit or delete your coursework."})]})]})})]})}),c.jsx("div",{className:"p-6 sm:p-8 lg:p-12 border-t border-zinc-100",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 text-xs text-zinc-400",children:[c.jsx("span",{children:" 2024 Trace Inc."}),c.jsxs("div",{className:"flex gap-6",children:[c.jsx("a",{href:"#",className:"hover:text-zinc-900 transition-colors",children:"Privacy"}),c.jsx("a",{href:"#",className:"hover:text-zinc-900 transition-colors",children:"Terms"})]})]})})]})]})}function l$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const ap=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function cl(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function e0(t){return"nodeType"in t}function sn(t){var e,n;return t?cl(t)?t:e0(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function t0(t){const{Document:e}=sn(t);return t instanceof e}function gu(t){return cl(t)?!1:t instanceof sn(t).HTMLElement}function oR(t){return t instanceof sn(t).SVGElement}function ul(t){return t?cl(t)?t.document:e0(t)?t0(t)?t:gu(t)||oR(t)?t.ownerDocument:document:document:document}const mr=ap?p.useLayoutEffect:p.useEffect;function lp(t){const e=p.useRef(t);return mr(()=>{e.current=t}),p.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function c$(){const t=p.useRef(null),e=p.useCallback((r,s)=>{t.current=setInterval(r,s)},[]),n=p.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function $c(t,e){e===void 0&&(e=[t]);const n=p.useRef(t);return mr(()=>{n.current!==t&&(n.current=t)},e),n}function yu(t,e){const n=p.useRef();return p.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function Hh(t){const e=lp(t),n=p.useRef(null),r=p.useCallback(s=>{s!==n.current&&(e==null||e(s,n.current)),n.current=s},[]);return[n,r]}function Wh(t){const e=p.useRef();return p.useEffect(()=>{e.current=t},[t]),e.current}let Rm={};function vu(t,e){return p.useMemo(()=>{if(e)return e;const n=Rm[t]==null?0:Rm[t]+1;return Rm[t]=n,t+"-"+n},[t,e])}function aR(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((i,o)=>{const a=Object.entries(o);for(const[l,u]of a){const h=i[l];h!=null&&(i[l]=h+t*u)}return i},{...e})}}const ga=aR(1),qh=aR(-1);function u$(t){return"clientX"in t&&"clientY"in t}function cp(t){if(!t)return!1;const{KeyboardEvent:e}=sn(t.target);return e&&t instanceof e}function d$(t){if(!t)return!1;const{TouchEvent:e}=sn(t.target);return e&&t instanceof e}function Gh(t){if(d$(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return u$(t)?{x:t.clientX,y:t.clientY}:null}const bi=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[bi.Translate.toString(t),bi.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),Pb="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function h$(t){return t.matches(Pb)?t:t.querySelector(Pb)}const f$={display:"none"};function p$(t){let{id:e,value:n}=t;return Se.createElement("div",{id:e,style:f$},n)}function m$(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Se.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function g$(){const[t,e]=p.useState("");return{announce:p.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const lR=p.createContext(null);function y$(t){const e=p.useContext(lR);p.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function v$(){const[t]=p.useState(()=>new Set),e=p.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[p.useCallback(r=>{let{type:s,event:i}=r;t.forEach(o=>{var a;return(a=o[s])==null?void 0:a.call(o,i)})},[t]),e]}const w$={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},x$={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function _$(t){let{announcements:e=x$,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=w$}=t;const{announce:i,announcement:o}=g$(),a=vu("DndLiveRegion"),[l,u]=p.useState(!1);if(p.useEffect(()=>{u(!0)},[]),y$(p.useMemo(()=>({onDragStart(f){let{active:m}=f;i(e.onDragStart({active:m}))},onDragMove(f){let{active:m,over:y}=f;e.onDragMove&&i(e.onDragMove({active:m,over:y}))},onDragOver(f){let{active:m,over:y}=f;i(e.onDragOver({active:m,over:y}))},onDragEnd(f){let{active:m,over:y}=f;i(e.onDragEnd({active:m,over:y}))},onDragCancel(f){let{active:m,over:y}=f;i(e.onDragCancel({active:m,over:y}))}}),[i,e])),!l)return null;const h=Se.createElement(Se.Fragment,null,Se.createElement(p$,{id:r,value:s.draggable}),Se.createElement(m$,{id:a,announcement:o}));return n?zn.createPortal(h,n):h}var yt;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(yt||(yt={}));function Kh(){}function Db(t,e){return p.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function b$(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return p.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const gr=Object.freeze({x:0,y:0});function E$(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function S$(t,e){const n=Gh(t);if(!n)return"0 0";const r={x:(n.x-e.left)/e.width*100,y:(n.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function T$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function C$(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function I$(t,e){if(!t||t.length===0)return null;const[n]=t;return n[e]}function jb(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const N$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=jb(e,e.left,e.top),i=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const u=E$(jb(l),s);i.push({id:a,data:{droppableContainer:o,value:u}})}}return i.sort(T$)};function A$(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height),o=s-r,a=i-n;if(r<s&&n<i){const l=e.width*e.height,u=t.width*t.height,h=o*a,f=h/(l+u-h);return Number(f.toFixed(4))}return 0}const k$=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const s=[];for(const i of r){const{id:o}=i,a=n.get(o);if(a){const l=A$(a,e);l>0&&s.push({id:o,data:{droppableContainer:i,value:l}})}}return s.sort(C$)};function R$(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function cR(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:gr}function P$(t){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];return s.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const D$=P$(1);function uR(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function j$(t,e,n){const r=uR(e);if(!r)return t;const{scaleX:s,scaleY:i,x:o,y:a}=r,l=t.left-o-(1-s)*parseFloat(n),u=t.top-a-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),h=s?t.width/s:t.width,f=i?t.height/i:t.height;return{width:h,height:f,top:u,right:l+h,bottom:u+f,left:l}}const O$={ignoreTransform:!1};function dl(t,e){e===void 0&&(e=O$);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:u,transformOrigin:h}=sn(t).getComputedStyle(t);u&&(n=j$(n,u,h))}const{top:r,left:s,width:i,height:o,bottom:a,right:l}=n;return{top:r,left:s,width:i,height:o,bottom:a,right:l}}function Ob(t){return dl(t,{ignoreTransform:!0})}function M$(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function L$(t,e){return e===void 0&&(e=sn(t).getComputedStyle(t)),e.position==="fixed"}function V$(t,e){e===void 0&&(e=sn(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=e[s];return typeof i=="string"?n.test(i):!1})}function n0(t,e){const n=[];function r(s){if(e!=null&&n.length>=e||!s)return n;if(t0(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!gu(s)||oR(s)||n.includes(s))return n;const i=sn(t).getComputedStyle(s);return s!==t&&V$(s,i)&&n.push(s),L$(s,i)?n:r(s.parentNode)}return t?r(t):n}function dR(t){const[e]=n0(t,1);return e??null}function Pm(t){return!ap||!t?null:cl(t)?t:e0(t)?t0(t)||t===ul(t).scrollingElement?window:gu(t)?t:null:null}function hR(t){return cl(t)?t.scrollX:t.scrollLeft}function fR(t){return cl(t)?t.scrollY:t.scrollTop}function my(t){return{x:hR(t),y:fR(t)}}var Tt;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Tt||(Tt={}));function pR(t){return!ap||!t?!1:t===document.scrollingElement}function mR(t){const e={x:0,y:0},n=pR(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},s=t.scrollTop<=e.y,i=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:s,isLeft:i,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const F$={x:.2,y:.2};function U$(t,e,n,r,s){let{top:i,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),s===void 0&&(s=F$);const{isTop:u,isBottom:h,isLeft:f,isRight:m}=mR(t),y={x:0,y:0},x={x:0,y:0},v={height:e.height*s.y,width:e.width*s.x};return!u&&i<=e.top+v.height?(y.y=Tt.Backward,x.y=r*Math.abs((e.top+v.height-i)/v.height)):!h&&l>=e.bottom-v.height&&(y.y=Tt.Forward,x.y=r*Math.abs((e.bottom-v.height-l)/v.height)),!m&&a>=e.right-v.width?(y.x=Tt.Forward,x.x=r*Math.abs((e.right-v.width-a)/v.width)):!f&&o<=e.left+v.width&&(y.x=Tt.Backward,x.x=r*Math.abs((e.left+v.width-o)/v.width)),{direction:y,speed:x}}function z$(t){if(t===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:e,left:n,right:r,bottom:s}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:s,width:t.clientWidth,height:t.clientHeight}}function gR(t){return t.reduce((e,n)=>ga(e,my(n)),gr)}function $$(t){return t.reduce((e,n)=>e+hR(n),0)}function B$(t){return t.reduce((e,n)=>e+fR(n),0)}function yR(t,e){if(e===void 0&&(e=dl),!t)return;const{top:n,left:r,bottom:s,right:i}=e(t);dR(t)&&(s<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const H$=[["x",["left","right"],$$],["y",["top","bottom"],B$]];class r0{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=n0(n),s=gR(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,o,a]of H$)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=a(r),h=s[i]-u;return this.rect[l]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class lc{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var s;(s=this.target)==null||s.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function W$(t){const{EventTarget:e}=sn(t);return t instanceof e?t:ul(t)}function Dm(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var Mn;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Mn||(Mn={}));function Mb(t){t.preventDefault()}function q$(t){t.stopPropagation()}var De;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(De||(De={}));const vR={start:[De.Space,De.Enter],cancel:[De.Esc],end:[De.Space,De.Enter,De.Tab]},G$=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case De.Right:return{...n,x:n.x+25};case De.Left:return{...n,x:n.x-25};case De.Down:return{...n,y:n.y+25};case De.Up:return{...n,y:n.y-25}}};class s0{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new lc(ul(n)),this.windowListeners=new lc(sn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Mn.Resize,this.handleCancel),this.windowListeners.add(Mn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Mn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&yR(r),n(gr)}handleKeyDown(e){if(cp(e)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:i=vR,coordinateGetter:o=G$,scrollBehavior:a="smooth"}=s,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:u}=r.current,h=u?{x:u.left,y:u.top}:gr;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const m=qh(f,h),y={x:0,y:0},{scrollableAncestors:x}=r.current;for(const v of x){const b=e.code,{isTop:E,isRight:w,isLeft:S,isBottom:k,maxScroll:D,minScroll:O}=mR(v),T=z$(v),C={x:Math.min(b===De.Right?T.right-T.width/2:T.right,Math.max(b===De.Right?T.left:T.left+T.width/2,f.x)),y:Math.min(b===De.Down?T.bottom-T.height/2:T.bottom,Math.max(b===De.Down?T.top:T.top+T.height/2,f.y))},I=b===De.Right&&!w||b===De.Left&&!S,A=b===De.Down&&!k||b===De.Up&&!E;if(I&&C.x!==f.x){const P=v.scrollLeft+m.x,j=b===De.Right&&P<=D.x||b===De.Left&&P>=O.x;if(j&&!m.y){v.scrollTo({left:P,behavior:a});return}j?y.x=v.scrollLeft-P:y.x=b===De.Right?v.scrollLeft-D.x:v.scrollLeft-O.x,y.x&&v.scrollBy({left:-y.x,behavior:a});break}else if(A&&C.y!==f.y){const P=v.scrollTop+m.y,j=b===De.Down&&P<=D.y||b===De.Up&&P>=O.y;if(j&&!m.x){v.scrollTo({top:P,behavior:a});return}j?y.y=v.scrollTop-P:y.y=b===De.Down?v.scrollTop-D.y:v.scrollTop-O.y,y.y&&v.scrollBy({top:-y.y,behavior:a});break}}this.handleMove(e,ga(qh(f,this.referenceCoordinates),y))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}s0.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=vR,onActivation:s}=e,{active:i}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=i.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),s==null||s({event:t.nativeEvent}),!0)}return!1}}];function Lb(t){return!!(t&&"distance"in t)}function Vb(t){return!!(t&&"delay"in t)}class i0{constructor(e,n,r){var s;r===void 0&&(r=W$(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:i}=e,{target:o}=i;this.props=e,this.events=n,this.document=ul(o),this.documentListeners=new lc(this.document),this.listeners=new lc(r),this.windowListeners=new lc(sn(o)),this.initialCoordinates=(s=Gh(i))!=null?s:gr,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Mn.Resize,this.handleCancel),this.windowListeners.add(Mn.DragStart,Mb),this.windowListeners.add(Mn.VisibilityChange,this.handleCancel),this.windowListeners.add(Mn.ContextMenu,Mb),this.documentListeners.add(Mn.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Vb(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Lb(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(Mn.Click,q$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Mn.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:s,props:i}=this,{onMove:o,options:{activationConstraint:a}}=i;if(!s)return;const l=(n=Gh(e))!=null?n:gr,u=qh(s,l);if(!r&&a){if(Lb(a)){if(a.tolerance!=null&&Dm(u,a.tolerance))return this.handleCancel();if(Dm(u,a.distance))return this.handleStart()}if(Vb(a)&&Dm(u,a.tolerance))return this.handleCancel();this.handlePending(a,u);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===De.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const K$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class o0 extends i0{constructor(e){const{event:n}=e,r=ul(n.target);super(e,K$,r)}}o0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Q$={move:{name:"mousemove"},end:{name:"mouseup"}};var gy;(function(t){t[t.RightClick=2]="RightClick"})(gy||(gy={}));class X$ extends i0{constructor(e){super(e,Q$,ul(e.event.target))}}X$.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===gy.RightClick?!1:(r==null||r({event:n}),!0)}}];const jm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Y$ extends i0{constructor(e){super(e,jm)}static setup(){return window.addEventListener(jm.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(jm.move.name,e)};function e(){}}}Y$.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:s}=n;return s.length>1?!1:(r==null||r({event:n}),!0)}}];var cc;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(cc||(cc={}));var Qh;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Qh||(Qh={}));function J$(t){let{acceleration:e,activator:n=cc.Pointer,canScroll:r,draggingRect:s,enabled:i,interval:o=5,order:a=Qh.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:h,delta:f,threshold:m}=t;const y=e7({delta:f,disabled:!i}),[x,v]=c$(),b=p.useRef({x:0,y:0}),E=p.useRef({x:0,y:0}),w=p.useMemo(()=>{switch(n){case cc.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case cc.DraggableRect:return s}},[n,s,l]),S=p.useRef(null),k=p.useCallback(()=>{const O=S.current;if(!O)return;const T=b.current.x*E.current.x,C=b.current.y*E.current.y;O.scrollBy(T,C)},[]),D=p.useMemo(()=>a===Qh.TreeOrder?[...u].reverse():u,[a,u]);p.useEffect(()=>{if(!i||!u.length||!w){v();return}for(const O of D){if((r==null?void 0:r(O))===!1)continue;const T=u.indexOf(O),C=h[T];if(!C)continue;const{direction:I,speed:A}=U$(O,C,w,e,m);for(const P of["x","y"])y[P][I[P]]||(A[P]=0,I[P]=0);if(A.x>0||A.y>0){v(),S.current=O,x(k,o),b.current=A,E.current=I;return}}b.current={x:0,y:0},E.current={x:0,y:0},v()},[e,k,r,v,i,o,JSON.stringify(w),JSON.stringify(y),x,u,D,h,JSON.stringify(m)])}const Z$={x:{[Tt.Backward]:!1,[Tt.Forward]:!1},y:{[Tt.Backward]:!1,[Tt.Forward]:!1}};function e7(t){let{delta:e,disabled:n}=t;const r=Wh(e);return yu(s=>{if(n||!r||!s)return Z$;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Tt.Backward]:s.x[Tt.Backward]||i.x===-1,[Tt.Forward]:s.x[Tt.Forward]||i.x===1},y:{[Tt.Backward]:s.y[Tt.Backward]||i.y===-1,[Tt.Forward]:s.y[Tt.Forward]||i.y===1}}},[n,e,r])}function t7(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return yu(s=>{var i;return e==null?null:(i=r??s)!=null?i:null},[r,e])}function n7(t,e){return p.useMemo(()=>t.reduce((n,r)=>{const{sensor:s}=r,i=s.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...i]},[]),[t,e])}var Bc;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Bc||(Bc={}));var yy;(function(t){t.Optimized="optimized"})(yy||(yy={}));const Fb=new Map;function r7(t,e){let{dragging:n,dependencies:r,config:s}=e;const[i,o]=p.useState(null),{frequency:a,measure:l,strategy:u}=s,h=p.useRef(t),f=b(),m=$c(f),y=p.useCallback(function(E){E===void 0&&(E=[]),!m.current&&o(w=>w===null?E:w.concat(E.filter(S=>!w.includes(S))))},[m]),x=p.useRef(null),v=yu(E=>{if(f&&!n)return Fb;if(!E||E===Fb||h.current!==t||i!=null){const w=new Map;for(let S of t){if(!S)continue;if(i&&i.length>0&&!i.includes(S.id)&&S.rect.current){w.set(S.id,S.rect.current);continue}const k=S.node.current,D=k?new r0(l(k),k):null;S.rect.current=D,D&&w.set(S.id,D)}return w}return E},[t,i,n,f,l]);return p.useEffect(()=>{h.current=t},[t]),p.useEffect(()=>{f||y()},[n,f]),p.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),p.useEffect(()=>{f||typeof a!="number"||x.current!==null||(x.current=setTimeout(()=>{y(),x.current=null},a))},[a,f,y,...r]),{droppableRects:v,measureDroppableContainers:y,measuringScheduled:i!=null};function b(){switch(u){case Bc.Always:return!1;case Bc.BeforeDragging:return n;default:return!n}}}function a0(t,e){return yu(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function s7(t,e){return a0(t,e)}function i7(t){let{callback:e,disabled:n}=t;const r=lp(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function up(t){let{callback:e,disabled:n}=t;const r=lp(e),s=p.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function o7(t){return new r0(dl(t),t)}function Ub(t,e,n){e===void 0&&(e=o7);const[r,s]=p.useState(null);function i(){s(l=>{if(!t)return null;if(t.isConnected===!1){var u;return(u=l??n)!=null?u:null}const h=e(t);return JSON.stringify(l)===JSON.stringify(h)?l:h})}const o=i7({callback(l){if(t)for(const u of l){const{type:h,target:f}=u;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){i();break}}}}),a=up({callback:i});return mr(()=>{i(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function a7(t){const e=a0(t);return cR(t,e)}const zb=[];function l7(t){const e=p.useRef(t),n=yu(r=>t?r&&r!==zb&&t&&e.current&&t.parentNode===e.current.parentNode?r:n0(t):zb,[t]);return p.useEffect(()=>{e.current=t},[t]),n}function c7(t){const[e,n]=p.useState(null),r=p.useRef(t),s=p.useCallback(i=>{const o=Pm(i.target);o&&n(a=>a?(a.set(o,my(o)),new Map(a)):null)},[]);return p.useEffect(()=>{const i=r.current;if(t!==i){o(i);const a=t.map(l=>{const u=Pm(l);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,my(u)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(i)};function o(a){a.forEach(l=>{const u=Pm(l);u==null||u.removeEventListener("scroll",s)})}},[s,t]),p.useMemo(()=>t.length?e?Array.from(e.values()).reduce((i,o)=>ga(i,o),gr):gR(t):gr,[t,e])}function $b(t,e){e===void 0&&(e=[]);const n=p.useRef(null);return p.useEffect(()=>{n.current=null},e),p.useEffect(()=>{const r=t!==gr;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?qh(t,n.current):gr}function u7(t){p.useEffect(()=>{if(!ap)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function d7(t,e){return p.useMemo(()=>t.reduce((n,r)=>{let{eventName:s,handler:i}=r;return n[s]=o=>{i(o,e)},n},{}),[t,e])}function wR(t){return p.useMemo(()=>t?M$(t):null,[t])}const Bb=[];function h7(t,e){e===void 0&&(e=dl);const[n]=t,r=wR(n?sn(n):null),[s,i]=p.useState(Bb);function o(){i(()=>t.length?t.map(l=>pR(l)?r:new r0(e(l),l)):Bb)}const a=up({callback:o});return mr(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),s}function xR(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return gu(e)?e:t}function f7(t){let{measure:e}=t;const[n,r]=p.useState(null),s=p.useCallback(u=>{for(const{target:h}of u)if(gu(h)){r(f=>{const m=e(h);return f?{...f,width:m.width,height:m.height}:m});break}},[e]),i=up({callback:s}),o=p.useCallback(u=>{const h=xR(u);i==null||i.disconnect(),h&&(i==null||i.observe(h)),r(h?e(h):null)},[e,i]),[a,l]=Hh(o);return p.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const p7=[{sensor:o0,options:{}},{sensor:s0,options:{}}],m7={current:{}},Wd={draggable:{measure:Ob},droppable:{measure:Ob,strategy:Bc.WhileDragging,frequency:yy.Optimized},dragOverlay:{measure:dl}};class uc extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const g7={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new uc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Kh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Wd,measureDroppableContainers:Kh,windowRect:null,measuringScheduled:!1},_R={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Kh,draggableNodes:new Map,over:null,measureDroppableContainers:Kh},wu=p.createContext(_R),bR=p.createContext(g7);function y7(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new uc}}}function v7(t,e){switch(e.type){case yt.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case yt.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case yt.DragEnd:case yt.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case yt.RegisterDroppable:{const{element:n}=e,{id:r}=n,s=new uc(t.droppable.containers);return s.set(r,n),{...t,droppable:{...t.droppable,containers:s}}}case yt.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const o=new uc(t.droppable.containers);return o.set(n,{...i,disabled:s}),{...t,droppable:{...t.droppable,containers:o}}}case yt.UnregisterDroppable:{const{id:n,key:r}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const i=new uc(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function w7(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:s}=p.useContext(wu),i=Wh(r),o=Wh(n==null?void 0:n.id);return p.useEffect(()=>{if(!e&&!r&&i&&o!=null){if(!cp(i)||document.activeElement===i.target)return;const a=s.get(o);if(!a)return;const{activatorNode:l,node:u}=a;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const h of[l.current,u.current]){if(!h)continue;const f=h$(h);if(f){f.focus();break}}})}},[r,e,s,o,i]),null}function ER(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((s,i)=>i({transform:s,...r}),n):n}function x7(t){return p.useMemo(()=>({draggable:{...Wd.draggable,...t==null?void 0:t.draggable},droppable:{...Wd.droppable,...t==null?void 0:t.droppable},dragOverlay:{...Wd.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function _7(t){let{activeNode:e,measure:n,initialRect:r,config:s=!0}=t;const i=p.useRef(!1),{x:o,y:a}=typeof s=="boolean"?{x:s,y:s}:s;mr(()=>{if(!o&&!a||!e){i.current=!1;return}if(i.current||!r)return;const u=e==null?void 0:e.node.current;if(!u||u.isConnected===!1)return;const h=n(u),f=cR(h,r);if(o||(f.x=0),a||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=dR(u);m&&m.scrollBy({top:f.y,left:f.x})}},[e,o,a,r,n])}const dp=p.createContext({...gr,scaleX:1,scaleY:1});var Ms;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ms||(Ms={}));const b7=p.memo(function(e){var n,r,s,i;let{id:o,accessibility:a,autoScroll:l=!0,children:u,sensors:h=p7,collisionDetection:f=k$,measuring:m,modifiers:y,...x}=e;const v=p.useReducer(v7,void 0,y7),[b,E]=v,[w,S]=v$(),[k,D]=p.useState(Ms.Uninitialized),O=k===Ms.Initialized,{draggable:{active:T,nodes:C,translate:I},droppable:{containers:A}}=b,P=T!=null?C.get(T):null,j=p.useRef({initial:null,translated:null}),R=p.useMemo(()=>{var Pe;return T!=null?{id:T,data:(Pe=P==null?void 0:P.data)!=null?Pe:m7,rect:j}:null},[T,P]),$=p.useRef(null),[re,z]=p.useState(null),[W,M]=p.useState(null),L=$c(x,Object.values(x)),F=vu("DndDescribedBy",o),B=p.useMemo(()=>A.getEnabled(),[A]),G=x7(m),{droppableRects:X,measureDroppableContainers:J,measuringScheduled:he}=r7(B,{dragging:O,dependencies:[I.x,I.y],config:G.droppable}),ie=t7(C,T),Q=p.useMemo(()=>W?Gh(W):null,[W]),ee=Cu(),me=s7(ie,G.draggable.measure);_7({activeNode:T!=null?C.get(T):null,config:ee.layoutShiftCompensation,initialRect:me,measure:G.draggable.measure});const ne=Ub(ie,G.draggable.measure,me),ue=Ub(ie?ie.parentElement:null),ce=p.useRef({activatorEvent:null,active:null,activeNode:ie,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ae=A.getNodeFor((n=ce.current.over)==null?void 0:n.id),Ve=f7({measure:G.dragOverlay.measure}),on=(r=Ve.nodeRef.current)!=null?r:ie,jt=O?(s=Ve.rect)!=null?s:ne:null,Dn=!!(Ve.nodeRef.current&&Ve.rect),Ai=a7(Dn?null:ne),Be=wR(on?sn(on):null),Ke=l7(O?Ae??ie:null),$r=h7(Ke),ko=ER(y,{transform:{x:I.x-Ai.x,y:I.y-Ai.y,scaleX:1,scaleY:1},activatorEvent:W,active:R,activeNodeRect:ne,containerNodeRect:ue,draggingNodeRect:jt,over:ce.current.over,overlayNodeRect:Ve.rect,scrollableAncestors:Ke,scrollableAncestorRects:$r,windowRect:Be}),fl=Q?ga(Q,I):null,_u=c7(Ke),ki=$b(_u),bu=$b(_u,[ne]),Br=ga(ko,ki),vr=jt?D$(jt,ko):null,Ri=R&&vr?f({active:R,collisionRect:vr,droppableRects:X,droppableContainers:B,pointerCoordinates:fl}):null,Eu=I$(Ri,"id"),[Gn,pl]=p.useState(null),Pi=Dn?ko:ga(ko,bu),ml=R$(Pi,(i=Gn==null?void 0:Gn.rect)!=null?i:null,ne),Di=p.useRef(null),wr=p.useCallback((Pe,Ot)=>{let{sensor:ht,options:an}=Ot;if($.current==null)return;const ln=C.get($.current);if(!ln)return;const Gt=Pe.nativeEvent,At=new ht({active:$.current,activeNode:ln,event:Gt,options:an,context:ce,onAbort(ft){if(!C.get(ft))return;const{onDragAbort:wn}=L.current,jn={id:ft};wn==null||wn(jn),w({type:"onDragAbort",event:jn})},onPending(ft,vn,wn,jn){if(!C.get(ft))return;const{onDragPending:Kn}=L.current,xr={id:ft,constraint:vn,initialCoordinates:wn,offset:jn};Kn==null||Kn(xr),w({type:"onDragPending",event:xr})},onStart(ft){const vn=$.current;if(vn==null)return;const wn=C.get(vn);if(!wn)return;const{onDragStart:jn}=L.current,Hr={activatorEvent:Gt,active:{id:vn,data:wn.data,rect:j}};zn.unstable_batchedUpdates(()=>{jn==null||jn(Hr),D(Ms.Initializing),E({type:yt.DragStart,initialCoordinates:ft,active:vn}),w({type:"onDragStart",event:Hr}),z(Di.current),M(Gt)})},onMove(ft){E({type:yt.DragMove,coordinates:ft})},onEnd:bs(yt.DragEnd),onCancel:bs(yt.DragCancel)});Di.current=At;function bs(ft){return async function(){const{active:wn,collisions:jn,over:Hr,scrollAdjustedTranslate:Kn}=ce.current;let xr=null;if(wn&&Kn){const{cancelDrop:cn}=L.current;xr={activatorEvent:Gt,active:wn,collisions:jn,delta:Kn,over:Hr},ft===yt.DragEnd&&typeof cn=="function"&&await Promise.resolve(cn(xr))&&(ft=yt.DragCancel)}$.current=null,zn.unstable_batchedUpdates(()=>{E({type:ft}),D(Ms.Uninitialized),pl(null),z(null),M(null),Di.current=null;const cn=ft===yt.DragEnd?"onDragEnd":"onDragCancel";if(xr){const Ro=L.current[cn];Ro==null||Ro(xr),w({type:cn,event:xr})}})}}},[C]),Su=p.useCallback((Pe,Ot)=>(ht,an)=>{const ln=ht.nativeEvent,Gt=C.get(an);if($.current!==null||!Gt||ln.dndKit||ln.defaultPrevented)return;const At={active:Gt};Pe(ht,Ot.options,At)===!0&&(ln.dndKit={capturedBy:Ot.sensor},$.current=an,wr(ht,Ot))},[C,wr]),ji=n7(h,Su);u7(h),mr(()=>{ne&&k===Ms.Initializing&&D(Ms.Initialized)},[ne,k]),p.useEffect(()=>{const{onDragMove:Pe}=L.current,{active:Ot,activatorEvent:ht,collisions:an,over:ln}=ce.current;if(!Ot||!ht)return;const Gt={active:Ot,activatorEvent:ht,collisions:an,delta:{x:Br.x,y:Br.y},over:ln};zn.unstable_batchedUpdates(()=>{Pe==null||Pe(Gt),w({type:"onDragMove",event:Gt})})},[Br.x,Br.y]),p.useEffect(()=>{const{active:Pe,activatorEvent:Ot,collisions:ht,droppableContainers:an,scrollAdjustedTranslate:ln}=ce.current;if(!Pe||$.current==null||!Ot||!ln)return;const{onDragOver:Gt}=L.current,At=an.get(Eu),bs=At&&At.rect.current?{id:At.id,rect:At.rect.current,data:At.data,disabled:At.disabled}:null,ft={active:Pe,activatorEvent:Ot,collisions:ht,delta:{x:ln.x,y:ln.y},over:bs};zn.unstable_batchedUpdates(()=>{pl(bs),Gt==null||Gt(ft),w({type:"onDragOver",event:ft})})},[Eu]),mr(()=>{ce.current={activatorEvent:W,active:R,activeNode:ie,collisionRect:vr,collisions:Ri,droppableRects:X,draggableNodes:C,draggingNode:on,draggingNodeRect:jt,droppableContainers:A,over:Gn,scrollableAncestors:Ke,scrollAdjustedTranslate:Br},j.current={initial:jt,translated:vr}},[R,ie,Ri,vr,C,on,jt,X,A,Gn,Ke,Br]),J$({...ee,delta:I,draggingRect:vr,pointerCoordinates:fl,scrollableAncestors:Ke,scrollableAncestorRects:$r});const Tu=p.useMemo(()=>({active:R,activeNode:ie,activeNodeRect:ne,activatorEvent:W,collisions:Ri,containerNodeRect:ue,dragOverlay:Ve,draggableNodes:C,droppableContainers:A,droppableRects:X,over:Gn,measureDroppableContainers:J,scrollableAncestors:Ke,scrollableAncestorRects:$r,measuringConfiguration:G,measuringScheduled:he,windowRect:Be}),[R,ie,ne,W,Ri,ue,Ve,C,A,X,Gn,J,Ke,$r,G,he,Be]),Oi=p.useMemo(()=>({activatorEvent:W,activators:ji,active:R,activeNodeRect:ne,ariaDescribedById:{draggable:F},dispatch:E,draggableNodes:C,over:Gn,measureDroppableContainers:J}),[W,ji,R,ne,E,F,C,Gn,J]);return Se.createElement(lR.Provider,{value:S},Se.createElement(wu.Provider,{value:Oi},Se.createElement(bR.Provider,{value:Tu},Se.createElement(dp.Provider,{value:ml},u)),Se.createElement(w7,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Se.createElement(_$,{...a,hiddenTextDescribedById:F}));function Cu(){const Pe=(re==null?void 0:re.autoScrollEnabled)===!1,Ot=typeof l=="object"?l.enabled===!1:l===!1,ht=O&&!Pe&&!Ot;return typeof l=="object"?{...l,enabled:ht}:{enabled:ht}}}),E7=p.createContext(null),Hb="button",S7="Draggable";function T7(t){let{id:e,data:n,disabled:r=!1,attributes:s}=t;const i=vu(S7),{activators:o,activatorEvent:a,active:l,activeNodeRect:u,ariaDescribedById:h,draggableNodes:f,over:m}=p.useContext(wu),{role:y=Hb,roleDescription:x="draggable",tabIndex:v=0}=s??{},b=(l==null?void 0:l.id)===e,E=p.useContext(b?dp:E7),[w,S]=Hh(),[k,D]=Hh(),O=d7(o,e),T=$c(n);mr(()=>(f.set(e,{id:e,key:i,node:w,activatorNode:k,data:T}),()=>{const I=f.get(e);I&&I.key===i&&f.delete(e)}),[f,e]);const C=p.useMemo(()=>({role:y,tabIndex:v,"aria-disabled":r,"aria-pressed":b&&y===Hb?!0:void 0,"aria-roledescription":x,"aria-describedby":h.draggable}),[r,y,v,b,x,h.draggable]);return{active:l,activatorEvent:a,activeNodeRect:u,attributes:C,isDragging:b,listeners:r?void 0:O,node:w,over:m,setNodeRef:S,setActivatorNodeRef:D,transform:E}}function SR(){return p.useContext(bR)}const C7="Droppable",I7={timeout:25};function TR(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:s}=t;const i=vu(C7),{active:o,dispatch:a,over:l,measureDroppableContainers:u}=p.useContext(wu),h=p.useRef({disabled:n}),f=p.useRef(!1),m=p.useRef(null),y=p.useRef(null),{disabled:x,updateMeasurementsFor:v,timeout:b}={...I7,...s},E=$c(v??r),w=p.useCallback(()=>{if(!f.current){f.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{u(Array.isArray(E.current)?E.current:[E.current]),y.current=null},b)},[b]),S=up({callback:w,disabled:x||!o}),k=p.useCallback((C,I)=>{S&&(I&&(S.unobserve(I),f.current=!1),C&&S.observe(C))},[S]),[D,O]=Hh(k),T=$c(e);return p.useEffect(()=>{!S||!D.current||(S.disconnect(),f.current=!1,S.observe(D.current))},[D,S]),p.useEffect(()=>(a({type:yt.RegisterDroppable,element:{id:r,key:i,disabled:n,node:D,rect:m,data:T}}),()=>a({type:yt.UnregisterDroppable,key:i,id:r})),[r]),p.useEffect(()=>{n!==h.current.disabled&&(a({type:yt.SetDroppableDisabled,id:r,key:i,disabled:n}),h.current.disabled=n)},[r,i,n,a]),{active:o,rect:m,isOver:(l==null?void 0:l.id)===r,node:D,over:l,setNodeRef:O}}function N7(t){let{animation:e,children:n}=t;const[r,s]=p.useState(null),[i,o]=p.useState(null),a=Wh(n);return!n&&!r&&a&&s(a),mr(()=>{if(!i)return;const l=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(l==null||u==null){s(null);return}Promise.resolve(e(u,i)).then(()=>{s(null)})},[e,r,i]),Se.createElement(Se.Fragment,null,n,r?p.cloneElement(r,{ref:o}):null)}const A7={x:0,y:0,scaleX:1,scaleY:1};function k7(t){let{children:e}=t;return Se.createElement(wu.Provider,{value:_R},Se.createElement(dp.Provider,{value:A7},e))}const R7={position:"fixed",touchAction:"none"},P7=t=>cp(t)?"transform 250ms ease":void 0,D7=p.forwardRef((t,e)=>{let{as:n,activatorEvent:r,adjustScale:s,children:i,className:o,rect:a,style:l,transform:u,transition:h=P7}=t;if(!a)return null;const f=s?u:{...u,scaleX:1,scaleY:1},m={...R7,width:a.width,height:a.height,top:a.top,left:a.left,transform:bi.Transform.toString(f),transformOrigin:s&&r?S$(r,a):void 0,transition:typeof h=="function"?h(r):h,...l};return Se.createElement(n,{className:o,style:m,ref:e},i)}),j7=t=>e=>{let{active:n,dragOverlay:r}=e;const s={},{styles:i,className:o}=t;if(i!=null&&i.active)for(const[a,l]of Object.entries(i.active))l!==void 0&&(s[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,l));if(i!=null&&i.dragOverlay)for(const[a,l]of Object.entries(i.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return o!=null&&o.active&&n.node.classList.add(o.active),o!=null&&o.dragOverlay&&r.node.classList.add(o.dragOverlay),function(){for(const[l,u]of Object.entries(s))n.node.style.setProperty(l,u);o!=null&&o.active&&n.node.classList.remove(o.active)}},O7=t=>{let{transform:{initial:e,final:n}}=t;return[{transform:bi.Transform.toString(e)},{transform:bi.Transform.toString(n)}]},M7={duration:250,easing:"ease",keyframes:O7,sideEffects:j7({styles:{active:{opacity:"0"}}})};function L7(t){let{config:e,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=t;return lp((i,o)=>{if(e===null)return;const a=n.get(i);if(!a)return;const l=a.node.current;if(!l)return;const u=xR(o);if(!u)return;const{transform:h}=sn(o).getComputedStyle(o),f=uR(h);if(!f)return;const m=typeof e=="function"?e:V7(e);return yR(l,s.draggable.measure),m({active:{id:i,data:a.data,node:l,rect:s.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:o,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:f})})}function V7(t){const{duration:e,easing:n,sideEffects:r,keyframes:s}={...M7,...t};return i=>{let{active:o,dragOverlay:a,transform:l,...u}=i;if(!e)return;const h={x:a.rect.left-o.rect.left,y:a.rect.top-o.rect.top},f={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/a.rect.height:1},m={x:l.x-h.x,y:l.y-h.y,...f},y=s({...u,active:o,dragOverlay:a,transform:{initial:l,final:m}}),[x]=y,v=y[y.length-1];if(JSON.stringify(x)===JSON.stringify(v))return;const b=r==null?void 0:r({active:o,dragOverlay:a,...u}),E=a.node.animate(y,{duration:e,easing:n,fill:"forwards"});return new Promise(w=>{E.onfinish=()=>{b==null||b(),w()}})}}let Wb=0;function F7(t){return p.useMemo(()=>{if(t!=null)return Wb++,Wb},[t])}const U7=Se.memo(t=>{let{adjustScale:e=!1,children:n,dropAnimation:r,style:s,transition:i,modifiers:o,wrapperElement:a="div",className:l,zIndex:u=999}=t;const{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:y,draggableNodes:x,droppableContainers:v,dragOverlay:b,over:E,measuringConfiguration:w,scrollableAncestors:S,scrollableAncestorRects:k,windowRect:D}=SR(),O=p.useContext(dp),T=F7(f==null?void 0:f.id),C=ER(o,{activatorEvent:h,active:f,activeNodeRect:m,containerNodeRect:y,draggingNodeRect:b.rect,over:E,overlayNodeRect:b.rect,scrollableAncestors:S,scrollableAncestorRects:k,transform:O,windowRect:D}),I=a0(m),A=L7({config:r,draggableNodes:x,droppableContainers:v,measuringConfiguration:w}),P=I?b.setRef:void 0;return Se.createElement(k7,null,Se.createElement(N7,{animation:A},f&&T?Se.createElement(D7,{key:T,id:f.id,ref:P,as:a,activatorEvent:h,adjustScale:e,className:l,transition:i,rect:I,style:{zIndex:u,...s},transform:C},n):null))});function CR(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function z7(t,e){return t.reduce((n,r,s)=>{const i=e.get(r);return i&&(n[s]=i),n},Array(t.length))}function md(t){return t!==null&&t>=0}function $7(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function B7(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const IR=t=>{let{rects:e,activeIndex:n,overIndex:r,index:s}=t;const i=CR(e,r,n),o=e[s],a=i[s];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},gd={scaleX:1,scaleY:1},H7=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:s,rects:i,overIndex:o}=t;const a=(e=i[n])!=null?e:r;if(!a)return null;if(s===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(a.top+a.height):u.top-a.top,...gd}:null}const l=W7(i,s,n);return s>n&&s<=o?{x:0,y:-a.height-l,...gd}:s<n&&s>=o?{x:0,y:a.height+l,...gd}:{x:0,y:0,...gd}};function W7(t,e,n){const r=t[e],s=t[e-1],i=t[e+1];return r?n<e?s?r.top-(s.top+s.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const NR="Sortable",AR=Se.createContext({activeIndex:-1,containerId:NR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:IR,disabled:{draggable:!1,droppable:!1}});function q7(t){let{children:e,id:n,items:r,strategy:s=IR,disabled:i=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:u,measureDroppableContainers:h}=SR(),f=vu(NR,n),m=a.rect!==null,y=p.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),x=o!=null,v=o?y.indexOf(o.id):-1,b=u?y.indexOf(u.id):-1,E=p.useRef(y),w=!$7(y,E.current),S=b!==-1&&v===-1||w,k=B7(i);mr(()=>{w&&x&&h(y)},[w,y,x,h]),p.useEffect(()=>{E.current=y},[y]);const D=p.useMemo(()=>({activeIndex:v,containerId:f,disabled:k,disableTransforms:S,items:y,overIndex:b,useDragOverlay:m,sortedRects:z7(y,l),strategy:s}),[v,f,k.draggable,k.droppable,S,y,b,l,m,s]);return Se.createElement(AR.Provider,{value:D},e)}const G7=t=>{let{id:e,items:n,activeIndex:r,overIndex:s}=t;return CR(n,r,s).indexOf(e)},K7=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:s,items:i,newIndex:o,previousItems:a,previousContainerId:l,transition:u}=t;return!u||!r||a!==i&&s===o?!1:n?!0:o!==s&&e===l},Q7={duration:200,easing:"ease"},kR="transform",X7=bi.Transition.toString({property:kR,duration:0,easing:"linear"}),Y7={roleDescription:"sortable"};function J7(t){let{disabled:e,index:n,node:r,rect:s}=t;const[i,o]=p.useState(null),a=p.useRef(n);return mr(()=>{if(!e&&n!==a.current&&r.current){const l=s.current;if(l){const u=dl(r.current,{ignoreTransform:!0}),h={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(h.x||h.y)&&o(h)}}n!==a.current&&(a.current=n)},[e,n,r,s]),p.useEffect(()=>{i&&o(null)},[i]),i}function Z7(t){let{animateLayoutChanges:e=K7,attributes:n,disabled:r,data:s,getNewIndex:i=G7,id:o,strategy:a,resizeObserverConfig:l,transition:u=Q7}=t;const{items:h,containerId:f,activeIndex:m,disabled:y,disableTransforms:x,sortedRects:v,overIndex:b,useDragOverlay:E,strategy:w}=p.useContext(AR),S=eB(r,y),k=h.indexOf(o),D=p.useMemo(()=>({sortable:{containerId:f,index:k,items:h},...s}),[f,s,k,h]),O=p.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:T,node:C,isOver:I,setNodeRef:A}=TR({id:o,data:D,disabled:S.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...l}}),{active:P,activatorEvent:j,activeNodeRect:R,attributes:$,setNodeRef:re,listeners:z,isDragging:W,over:M,setActivatorNodeRef:L,transform:F}=T7({id:o,data:D,attributes:{...Y7,...n},disabled:S.draggable}),B=l$(A,re),G=!!P,X=G&&!x&&md(m)&&md(b),J=!E&&W,he=J&&X?F:null,Q=X?he??(a??w)({rects:v,activeNodeRect:R,activeIndex:m,overIndex:b,index:k}):null,ee=md(m)&&md(b)?i({id:o,items:h,activeIndex:m,overIndex:b}):k,me=P==null?void 0:P.id,ne=p.useRef({activeId:me,items:h,newIndex:ee,containerId:f}),ue=h!==ne.current.items,ce=e({active:P,containerId:f,isDragging:W,isSorting:G,id:o,index:k,items:h,newIndex:ne.current.newIndex,previousItems:ne.current.items,previousContainerId:ne.current.containerId,transition:u,wasDragging:ne.current.activeId!=null}),Ae=J7({disabled:!ce,index:k,node:C,rect:T});return p.useEffect(()=>{G&&ne.current.newIndex!==ee&&(ne.current.newIndex=ee),f!==ne.current.containerId&&(ne.current.containerId=f),h!==ne.current.items&&(ne.current.items=h)},[G,ee,f,h]),p.useEffect(()=>{if(me===ne.current.activeId)return;if(me!=null&&ne.current.activeId==null){ne.current.activeId=me;return}const on=setTimeout(()=>{ne.current.activeId=me},50);return()=>clearTimeout(on)},[me]),{active:P,activeIndex:m,attributes:$,data:D,rect:T,index:k,newIndex:ee,items:h,isOver:I,isSorting:G,isDragging:W,listeners:z,node:C,overIndex:b,over:M,setNodeRef:B,setActivatorNodeRef:L,setDroppableNodeRef:A,setDraggableNodeRef:re,transform:Ae??Q,transition:Ve()};function Ve(){if(Ae||ue&&ne.current.newIndex===k)return X7;if(!(J&&!cp(j)||!u)&&(G||ce))return bi.Transition.toString({...u,property:kR})}}function eB(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}De.Down,De.Right,De.Up,De.Left;const tB=ru("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function os({className:t,variant:e,...n}){return c.jsx("div",{className:Z(tB({variant:e}),t),...n})}function Qr({className:t,...e}){return c.jsx("div",{className:Z("animate-pulse rounded-md bg-muted",t),...e})}const vt=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:Z("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",t),...e}));vt.displayName="Card";const Yt=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:Z("flex flex-col space-y-1.5 p-6",t),...e}));Yt.displayName="CardHeader";const hn=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:Z("text-2xl font-semibold leading-none tracking-tight",t),...e}));hn.displayName="CardTitle";const Ar=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:Z("text-sm text-muted-foreground",t),...e}));Ar.displayName="CardDescription";const Ht=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:Z("p-6 pt-0",t),...e}));Ht.displayName="CardContent";const RR=p.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:Z("flex items-center p-6 pt-0",t),...e}));RR.displayName="CardFooter";function PR(t){if(!t)return"No due date";const e=new Date(t),n=new Date,r=new Date(n);r.setDate(r.getDate()+1);const s=e.toISOString().split("T")[0],i=n.toISOString().split("T")[0],o=r.toISOString().split("T")[0];return s===i?"Today":s===o?"Tomorrow":e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function DR(t){if(!t)return null;const e=new Date(t),n=new Date;return Math.ceil((e.getTime()-n.getTime())/(1e3*60*60*24))}function jR({assignment:t,onClick:e,hasNotes:n,isDragging:r}){const{attributes:s,listeners:i,setNodeRef:o,transform:a,transition:l,isDragging:u}=Z7({id:t.id}),h={transform:bi.Transform.toString(a),transition:l},f=DR(t.dueDate),m=f!==null&&f<=1&&f>=0,y=t.systemStatus==="overdue"||f!==null&&f<0;return c.jsx(vt,{ref:o,style:h,className:Z("p-4 cursor-pointer transition-all duration-200 hover-elevate group",(r||u)&&"opacity-50 rotate-1 shadow-lg",y&&"border-destructive/30"),onClick:e,"data-testid":`card-assignment-${t.id}`,children:c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsx(os,{variant:"secondary",className:"text-[11px] px-2 py-0.5 rounded-full font-normal truncate max-w-[180px]",children:t.courseName}),c.jsx("div",{...s,...i,className:"opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",onClick:x=>x.stopPropagation(),children:c.jsx(n4,{className:"h-4 w-4 text-muted-foreground"})})]}),c.jsx("h3",{className:"text-sm font-medium leading-snug line-clamp-2",children:t.title}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(To,{className:"h-3.5 w-3.5"}),c.jsx("span",{className:Z(y&&"text-destructive",m&&!y&&"text-foreground font-medium"),children:PR(t.dueDate)}),y&&c.jsx(Nn,{className:"h-3.5 w-3.5 text-destructive"}),m&&!y&&c.jsx(yC,{className:"h-3.5 w-3.5 text-foreground"})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[t.systemStatus==="graded"&&t.grade!==null&&c.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[c.jsx(Oa,{className:"h-3.5 w-3.5 text-muted-foreground"}),c.jsxs("span",{className:"font-mono",children:[t.grade,"/",t.maxPoints]})]}),t.systemStatus==="submitted"&&c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(Oa,{className:"h-3.5 w-3.5"}),c.jsx("span",{children:"Submitted"})]})]}),c.jsx("div",{className:"flex items-center gap-1",children:n&&c.jsx(ec,{className:"h-3.5 w-3.5 text-muted-foreground"})})]})]})})}function nB({assignment:t,onClick:e}){const n=DR(t.dueDate),r=t.systemStatus==="overdue"||n!==null&&n<0,s=n!==null&&n<=1&&n>=0;return c.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-md border hover-elevate cursor-pointer",onClick:e,"data-testid":`card-assignment-compact-${t.id}`,children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium truncate",children:t.title}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.courseName})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs shrink-0",children:[c.jsx("span",{className:Z("text-muted-foreground",r&&"text-destructive",s&&!r&&"font-medium text-foreground"),children:PR(t.dueDate)}),r&&c.jsx(Nn,{className:"h-3.5 w-3.5 text-destructive"})]})]})}const l0=p.forwardRef(({className:t,...e},n)=>c.jsx("textarea",{className:Z("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));l0.displayName="Textarea";var rB="Separator",qb="horizontal",sB=["horizontal","vertical"],OR=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=qb,...s}=t,i=iB(r)?r:qb,a=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return c.jsx(ye.div,{"data-orientation":i,...a,...s,ref:e})});OR.displayName=rB;function iB(t){return sB.includes(t)}var MR=OR;const ir=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>c.jsx(MR,{ref:s,decorative:n,orientation:e,className:Z("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));ir.displayName=MR.displayName;const oB=Sk,aB=Tk,LR=p.forwardRef(({className:t,...e},n)=>c.jsx(Vw,{className:Z("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));LR.displayName=Vw.displayName;const lB=ru("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),VR=p.forwardRef(({side:t="right",className:e,children:n,...r},s)=>c.jsxs(aB,{children:[c.jsx(LR,{}),c.jsxs(Fw,{ref:s,className:Z(lB({side:t}),e),...r,children:[n,c.jsxs($w,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[c.jsx(su,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));VR.displayName=Fw.displayName;const FR=({className:t,...e})=>c.jsx("div",{className:Z("flex flex-col space-y-2 text-center sm:text-left",t),...e});FR.displayName="SheetHeader";const UR=p.forwardRef(({className:t,...e},n)=>c.jsx(Uw,{ref:n,className:Z("text-lg font-semibold text-foreground",t),...e}));UR.displayName=Uw.displayName;const cB=p.forwardRef(({className:t,...e},n)=>c.jsx(zw,{ref:n,className:Z("text-sm text-muted-foreground",t),...e}));cB.displayName=zw.displayName;function uB(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}):"Not set"}function dB(t){return t?` at ${t}`:""}function hB({assignment:t}){const e=[{id:"created",label:"Created",completed:!0,date:t.createdAt},{id:"submitted",label:"Submitted",completed:!!t.submittedAt,date:t.submittedAt},{id:"graded",label:"Graded",completed:!!t.gradedAt,date:t.gradedAt}];return c.jsxs("div",{className:"space-y-3",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Status Timeline"}),c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute left-[7px] top-3 bottom-3 w-px bg-border"}),c.jsx("div",{className:"space-y-4",children:e.map((n,r)=>c.jsxs("div",{className:"flex items-start gap-3 relative",children:[c.jsx("div",{className:Z("h-4 w-4 rounded-full border-2 shrink-0 mt-0.5",n.completed?"bg-foreground border-foreground":"bg-background border-muted-foreground"),children:n.completed&&c.jsx(Oa,{className:"h-3 w-3 text-background absolute top-0.5 left-0.5"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:Z("text-sm",n.completed?"font-medium":"text-muted-foreground"),children:n.label}),n.date&&n.completed&&c.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(n.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]},n.id))})]})]})}function fB({note:t,onUpdate:e,onDelete:n}){const[r,s]=p.useState(!1),[i,o]=p.useState(t.content),a=()=>{e(i,t.isImportant),s(!1)};return c.jsxs("div",{className:"p-3 rounded-md border space-y-2",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[t.isImportant&&c.jsx(R_,{className:"h-3.5 w-3.5 fill-current text-foreground"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(t.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(pe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>e(t.content,!t.isImportant),"data-testid":`button-toggle-important-${t.id}`,children:c.jsx(R_,{className:Z("h-3.5 w-3.5",t.isImportant&&"fill-current")})}),c.jsx(pe,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>s(!r),"data-testid":`button-edit-note-${t.id}`,children:c.jsx(a4,{className:"h-3.5 w-3.5"})}),c.jsx(pe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive",onClick:n,"data-testid":`button-delete-note-${t.id}`,children:c.jsx(p4,{className:"h-3.5 w-3.5"})})]})]}),r?c.jsxs("div",{className:"space-y-2",children:[c.jsx(l0,{value:i,onChange:l=>o(l.target.value),className:"min-h-[80px] text-sm","data-testid":`textarea-edit-note-${t.id}`}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>s(!1),children:"Cancel"}),c.jsxs(pe,{size:"sm",onClick:a,"data-testid":`button-save-note-${t.id}`,children:[c.jsx(xC,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}):c.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content})]})}function c0({assignment:t,isOpen:e,onClose:n}){const{getNotesForAssignment:r,addNote:s,updateNote:i,deleteNote:o}=xs(),[a,l]=p.useState(""),[u,h]=p.useState(!1);if(!t)return null;const f=r(t.id),m=t.systemStatus==="overdue",y=()=>{a.trim()&&(s(t.id,a.trim()),l(""),h(!1))};return c.jsx(oB,{open:e,onOpenChange:n,children:c.jsxs(VR,{className:"w-full sm:max-w-[400px] overflow-y-auto",children:[c.jsx(FR,{className:"space-y-4",children:c.jsx("div",{className:"flex items-start justify-between gap-4",children:c.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[c.jsx(os,{variant:"secondary",className:"text-xs mb-2",children:t.courseName}),c.jsx(UR,{className:"text-lg font-semibold leading-tight",children:t.title})]})})}),c.jsxs("div",{className:"mt-6 space-y-6",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx(To,{className:"h-4 w-4 text-muted-foreground"}),c.jsxs("span",{className:Z(m&&"text-destructive"),children:[uB(t.dueDate),dB(t.dueTime)]}),m&&c.jsx(Nn,{className:"h-4 w-4 text-destructive"})]}),t.maxPoints&&c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"text-muted-foreground",children:"Points:"}),t.grade!==null?c.jsxs("span",{className:"font-mono font-medium",children:[t.grade," / ",t.maxPoints]}):c.jsx("span",{className:"font-mono",children:t.maxPoints})]})]}),c.jsx(ir,{}),t.description&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Description"}),c.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:t.description})]}),c.jsx(ir,{})]}),c.jsx(hB,{assignment:t}),c.jsx(ir,{}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h4",{className:"text-sm font-medium",children:"Notes"}),!u&&c.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>h(!0),"data-testid":"button-add-note",children:[c.jsx(l4,{className:"h-3.5 w-3.5 mr-1"}),"Add Note"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Notes are private and only visible to you."}),u&&c.jsxs("div",{className:"space-y-2",children:[c.jsx(l0,{value:a,onChange:x=>l(x.target.value),placeholder:"Add a note...",className:"min-h-[100px] text-sm","data-testid":"textarea-new-note"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[c.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>{h(!1),l("")},children:"Cancel"}),c.jsxs(pe,{size:"sm",onClick:y,disabled:!a.trim(),"data-testid":"button-save-new-note",children:[c.jsx(xC,{className:"h-3.5 w-3.5 mr-1"}),"Save"]})]})]}),f.length>0?c.jsx("div",{className:"space-y-2",children:f.map(x=>c.jsx(fB,{note:x,onUpdate:(v,b)=>i(x.id,v,b),onDelete:()=>o(x.id,t.id)},x.id))}):!u&&c.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No notes yet"})]}),t.alternateLink&&c.jsxs(c.Fragment,{children:[c.jsx(ir,{}),c.jsxs(pe,{variant:"outline",className:"w-full",onClick:()=>window.open(t.alternateLink,"_blank"),"data-testid":"button-open-classroom",children:[c.jsx(Og,{className:"h-4 w-4 mr-2"}),"Open in Google Classroom"]})]})]})]})})}function pB({id:t,title:e,assignments:n,onCardClick:r,notes:s}){const{isOver:i,setNodeRef:o}=TR({id:t});return c.jsxs("div",{ref:o,className:Z("flex flex-col min-w-[280px] w-[280px] h-full",i&&"bg-muted/50"),children:[c.jsxs("div",{className:"flex items-center justify-between gap-2 p-3 sticky top-0 bg-background z-10 border-b",children:[c.jsx("h3",{className:"text-sm font-medium",children:e}),c.jsx(os,{variant:"secondary",className:"text-xs font-mono",children:n.length})]}),c.jsx("div",{className:"flex-1 p-3 space-y-3 overflow-y-auto",children:c.jsx(q7,{items:n.map(a=>a.id),strategy:H7,children:n.length>0?n.map(a=>{var l;return c.jsx(jR,{assignment:a,onClick:()=>r(a),hasNotes:(((l=s.get(a.id))==null?void 0:l.length)||0)>0},a.id)}):c.jsx("div",{className:"flex items-center justify-center h-24 text-sm text-muted-foreground border border-dashed rounded-md",children:"No assignments"})})})]})}function mB(){var E;const{getPipelineColumns:t,updateAssignmentStatus:e,isLoading:n,isSyncing:r,notes:s,assignments:i,syncClassroom:o}=xs(),{signOut:a}=rn(),[l,u]=p.useState(null),[h,f]=p.useState(null),m=b$(Db(o0,{activationConstraint:{distance:8}}),Db(s0)),y=t(),x=h?i.find(w=>w.id===h):null,v=w=>{f(w.active.id)},b=w=>{const{active:S,over:k}=w;if(f(null),!k)return;const D=S.id,O=k.id;if(["backlog","in_progress","submitted","graded","overdue"].includes(O)){const T=i.find(C=>C.id===D);T&&T.systemStatus!==O&&(O==="in_progress"?e(D,"in_progress"):e(D,"backlog"))}};return i.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(Nn,{className:"h-12 w-12 mx-auto text-destructive"}),c.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),c.jsx(pe,{onClick:()=>a(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):c.jsxs(c.Fragment,{children:[c.jsxs(b7,{sensors:m,collisionDetection:N$,onDragStart:v,onDragEnd:b,children:[c.jsx("div",{className:"flex gap-4 h-full overflow-x-auto p-6",children:y.map(w=>c.jsx(pB,{id:w.id,title:w.title,assignments:w.assignments,onCardClick:u,notes:s},w.id))}),c.jsx(U7,{children:x&&c.jsx(jR,{assignment:x,isDragging:!0,hasNotes:(((E=s.get(x.id))==null?void 0:E.length)||0)>0})})]}),c.jsx(c0,{assignment:l,isOpen:!!l,onClose:()=>u(null)})]})}function Gb(t,[e,n]){return Math.min(n,Math.max(e,t))}var gB=p.createContext(void 0);function u0(t){const e=p.useContext(gB);return t||e||"ltr"}function zR(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var yB=[" ","Enter","ArrowUp","ArrowDown"],vB=[" ","Enter"],xu="Select",[hp,fp,wB]=Tv(xu),[hl,ZH]=qn(xu,[wB,If]),pp=If(),[xB,Ii]=hl(xu),[_B,bB]=hl(xu),$R=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:a,onValueChange:l,dir:u,name:h,autoComplete:f,disabled:m,required:y,form:x}=t,v=pp(e),[b,E]=p.useState(null),[w,S]=p.useState(null),[k,D]=p.useState(!1),O=u0(u),[T=!1,C]=hi({prop:r,defaultProp:s,onChange:i}),[I,A]=hi({prop:o,defaultProp:a,onChange:l}),P=p.useRef(null),j=b?x||!!b.closest("form"):!0,[R,$]=p.useState(new Set),re=Array.from(R).map(z=>z.props.value).join(";");return c.jsx(tI,{...v,children:c.jsxs(xB,{required:y,scope:e,trigger:b,onTriggerChange:E,valueNode:w,onValueNodeChange:S,valueNodeHasChildren:k,onValueNodeHasChildrenChange:D,contentId:ns(),value:I,onValueChange:A,open:T,onOpenChange:C,dir:O,triggerPointerDownPosRef:P,disabled:m,children:[c.jsx(hp.Provider,{scope:e,children:c.jsx(_B,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(z=>{$(W=>new Set(W).add(z))},[]),onNativeOptionRemove:p.useCallback(z=>{$(W=>{const M=new Set(W);return M.delete(z),M})},[]),children:n})}),j?c.jsxs(fP,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:f,value:I,onChange:z=>A(z.target.value),disabled:m,form:x,children:[I===void 0?c.jsx("option",{value:""}):null,Array.from(R)]},re):null]})})};$R.displayName=xu;var BR="SelectTrigger",HR=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=pp(n),o=Ii(BR,n),a=o.disabled||r,l=Le(e,o.onTriggerChange),u=fp(n),h=p.useRef("touch"),[f,m,y]=pP(v=>{const b=u().filter(S=>!S.disabled),E=b.find(S=>S.value===o.value),w=mP(b,v,E);w!==void 0&&o.onValueChange(w.value)}),x=v=>{a||(o.onOpenChange(!0),y()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return c.jsx(nI,{asChild:!0,...i,children:c.jsx(ye.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":hP(o.value)?"":void 0,...s,ref:l,onClick:de(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&x(v)}),onPointerDown:de(s.onPointerDown,v=>{h.current=v.pointerType;const b=v.target;b.hasPointerCapture(v.pointerId)&&b.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(x(v),v.preventDefault())}),onKeyDown:de(s.onKeyDown,v=>{const b=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(b&&v.key===" ")&&yB.includes(v.key)&&(x(),v.preventDefault())})})})});HR.displayName=BR;var WR="SelectValue",qR=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...a}=t,l=Ii(WR,n),{onValueNodeHasChildrenChange:u}=l,h=i!==void 0,f=Le(e,l.onValueNodeChange);return _t(()=>{u(h)},[u,h]),c.jsx(ye.span,{...a,ref:f,style:{pointerEvents:"none"},children:hP(l.value)?c.jsx(c.Fragment,{children:o}):i})});qR.displayName=WR;var EB="SelectIcon",GR=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return c.jsx(ye.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});GR.displayName=EB;var SB="SelectPortal",KR=t=>c.jsx(xf,{asChild:!0,...t});KR.displayName=SB;var _o="SelectContent",QR=p.forwardRef((t,e)=>{const n=Ii(_o,t.__scopeSelect),[r,s]=p.useState();if(_t(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?zn.createPortal(c.jsx(XR,{scope:t.__scopeSelect,children:c.jsx(hp.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),i):null}return c.jsx(YR,{...t,ref:e})});QR.displayName=_o;var Xn=10,[XR,Ni]=hl(_o),TB="SelectContentImpl",CB=ja("SelectContent.RemoveScroll"),YR=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:a,sideOffset:l,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:x,hideWhenDetached:v,avoidCollisions:b,...E}=t,w=Ii(_o,n),[S,k]=p.useState(null),[D,O]=p.useState(null),T=Le(e,Q=>k(Q)),[C,I]=p.useState(null),[A,P]=p.useState(null),j=fp(n),[R,$]=p.useState(!1),re=p.useRef(!1);p.useEffect(()=>{if(S)return ok(S)},[S]),YA();const z=p.useCallback(Q=>{const[ee,...me]=j().map(ce=>ce.ref.current),[ne]=me.slice(-1),ue=document.activeElement;for(const ce of Q)if(ce===ue||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===ee&&D&&(D.scrollTop=0),ce===ne&&D&&(D.scrollTop=D.scrollHeight),ce==null||ce.focus(),document.activeElement!==ue))return},[j,D]),W=p.useCallback(()=>z([C,S]),[z,C,S]);p.useEffect(()=>{R&&W()},[R,W]);const{onOpenChange:M,triggerPointerDownPosRef:L}=w;p.useEffect(()=>{if(S){let Q={x:0,y:0};const ee=ne=>{var ue,ce;Q={x:Math.abs(Math.round(ne.pageX)-(((ue=L.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(ne.pageY)-(((ce=L.current)==null?void 0:ce.y)??0))}},me=ne=>{Q.x<=10&&Q.y<=10?ne.preventDefault():S.contains(ne.target)||M(!1),document.removeEventListener("pointermove",ee),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",ee),document.addEventListener("pointerup",me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ee),document.removeEventListener("pointerup",me,{capture:!0})}}},[S,M,L]),p.useEffect(()=>{const Q=()=>M(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[M]);const[F,B]=pP(Q=>{const ee=j().filter(ue=>!ue.disabled),me=ee.find(ue=>ue.ref.current===document.activeElement),ne=mP(ee,Q,me);ne&&setTimeout(()=>ne.ref.current.focus())}),G=p.useCallback((Q,ee,me)=>{const ne=!re.current&&!me;(w.value!==void 0&&w.value===ee||ne)&&(I(Q),ne&&(re.current=!0))},[w.value]),X=p.useCallback(()=>S==null?void 0:S.focus(),[S]),J=p.useCallback((Q,ee,me)=>{const ne=!re.current&&!me;(w.value!==void 0&&w.value===ee||ne)&&P(Q)},[w.value]),he=r==="popper"?vy:JR,ie=he===vy?{side:a,sideOffset:l,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:x,hideWhenDetached:v,avoidCollisions:b}:{};return c.jsx(XR,{scope:n,content:S,viewport:D,onViewportChange:O,itemRefCallback:G,selectedItem:C,onItemLeave:X,itemTextRefCallback:J,focusSelectedItem:W,selectedItemText:A,position:r,isPositioned:R,searchRef:F,children:c.jsx(Dw,{as:CB,allowPinchZoom:!0,children:c.jsx(Pw,{asChild:!0,trapped:w.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:de(s,Q=>{var ee;(ee=w.trigger)==null||ee.focus({preventScroll:!0}),Q.preventDefault()}),children:c.jsx(tu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:c.jsx(he,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Q=>Q.preventDefault(),...E,...ie,onPlaced:()=>$(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:de(E.onKeyDown,Q=>{const ee=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!ee&&Q.key.length===1&&B(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let ne=j().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(ne=ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const ue=Q.target,ce=ne.indexOf(ue);ne=ne.slice(ce+1)}setTimeout(()=>z(ne)),Q.preventDefault()}})})})})})})});YR.displayName=TB;var IB="SelectItemAlignedPosition",JR=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Ii(_o,n),o=Ni(_o,n),[a,l]=p.useState(null),[u,h]=p.useState(null),f=Le(e,T=>h(T)),m=fp(n),y=p.useRef(!1),x=p.useRef(!0),{viewport:v,selectedItem:b,selectedItemText:E,focusSelectedItem:w}=o,S=p.useCallback(()=>{if(i.trigger&&i.valueNode&&a&&u&&v&&b&&E){const T=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),I=i.valueNode.getBoundingClientRect(),A=E.getBoundingClientRect();if(i.dir!=="rtl"){const ue=A.left-C.left,ce=I.left-ue,Ae=T.left-ce,Ve=T.width+Ae,on=Math.max(Ve,C.width),jt=window.innerWidth-Xn,Dn=Gb(ce,[Xn,Math.max(Xn,jt-on)]);a.style.minWidth=Ve+"px",a.style.left=Dn+"px"}else{const ue=C.right-A.right,ce=window.innerWidth-I.right-ue,Ae=window.innerWidth-T.right-ce,Ve=T.width+Ae,on=Math.max(Ve,C.width),jt=window.innerWidth-Xn,Dn=Gb(ce,[Xn,Math.max(Xn,jt-on)]);a.style.minWidth=Ve+"px",a.style.right=Dn+"px"}const P=m(),j=window.innerHeight-Xn*2,R=v.scrollHeight,$=window.getComputedStyle(u),re=parseInt($.borderTopWidth,10),z=parseInt($.paddingTop,10),W=parseInt($.borderBottomWidth,10),M=parseInt($.paddingBottom,10),L=re+z+R+M+W,F=Math.min(b.offsetHeight*5,L),B=window.getComputedStyle(v),G=parseInt(B.paddingTop,10),X=parseInt(B.paddingBottom,10),J=T.top+T.height/2-Xn,he=j-J,ie=b.offsetHeight/2,Q=b.offsetTop+ie,ee=re+z+Q,me=L-ee;if(ee<=J){const ue=P.length>0&&b===P[P.length-1].ref.current;a.style.bottom="0px";const ce=u.clientHeight-v.offsetTop-v.offsetHeight,Ae=Math.max(he,ie+(ue?X:0)+ce+W),Ve=ee+Ae;a.style.height=Ve+"px"}else{const ue=P.length>0&&b===P[0].ref.current;a.style.top="0px";const Ae=Math.max(J,re+v.offsetTop+(ue?G:0)+ie)+me;a.style.height=Ae+"px",v.scrollTop=ee-J+v.offsetTop}a.style.margin=`${Xn}px 0`,a.style.minHeight=F+"px",a.style.maxHeight=j+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,a,u,v,b,E,i.dir,r]);_t(()=>S(),[S]);const[k,D]=p.useState();_t(()=>{u&&D(window.getComputedStyle(u).zIndex)},[u]);const O=p.useCallback(T=>{T&&x.current===!0&&(S(),w==null||w(),x.current=!1)},[S,w]);return c.jsx(AB,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:y,onScrollButtonChange:O,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:c.jsx(ye.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});JR.displayName=IB;var NB="SelectPopperPosition",vy=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Xn,...i}=t,o=pp(n);return c.jsx(rI,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vy.displayName=NB;var[AB,d0]=hl(_o,{}),wy="SelectViewport",ZR=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Ni(wy,n),o=d0(wy,n),a=Le(e,i.onViewportChange),l=p.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(hp.Slot,{scope:n,children:c.jsx(ye.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:de(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const y=Math.abs(l.current-h.scrollTop);if(y>0){const x=window.innerHeight-Xn*2,v=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),E=Math.max(v,b);if(E<x){const w=E+y,S=Math.min(x,w),k=w-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=k>0?k:0,f.style.justifyContent="flex-end")}}}l.current=h.scrollTop})})})]})});ZR.displayName=wy;var eP="SelectGroup",[kB,RB]=hl(eP),PB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ns();return c.jsx(kB,{scope:n,id:s,children:c.jsx(ye.div,{role:"group","aria-labelledby":s,...r,ref:e})})});PB.displayName=eP;var tP="SelectLabel",nP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=RB(tP,n);return c.jsx(ye.div,{id:s.id,...r,ref:e})});nP.displayName=tP;var Xh="SelectItem",[DB,rP]=hl(Xh),sP=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,a=Ii(Xh,n),l=Ni(Xh,n),u=a.value===r,[h,f]=p.useState(i??""),[m,y]=p.useState(!1),x=Le(e,w=>{var S;return(S=l.itemRefCallback)==null?void 0:S.call(l,w,r,s)}),v=ns(),b=p.useRef("touch"),E=()=>{s||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(DB,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:p.useCallback(w=>{f(S=>S||((w==null?void 0:w.textContent)??"").trim())},[]),children:c.jsx(hp.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:c.jsx(ye.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:x,onFocus:de(o.onFocus,()=>y(!0)),onBlur:de(o.onBlur,()=>y(!1)),onClick:de(o.onClick,()=>{b.current!=="mouse"&&E()}),onPointerUp:de(o.onPointerUp,()=>{b.current==="mouse"&&E()}),onPointerDown:de(o.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:de(o.onPointerMove,w=>{var S;b.current=w.pointerType,s?(S=l.onItemLeave)==null||S.call(l):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:de(o.onPointerLeave,w=>{var S;w.currentTarget===document.activeElement&&((S=l.onItemLeave)==null||S.call(l))}),onKeyDown:de(o.onKeyDown,w=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&w.key===" "||(vB.includes(w.key)&&E(),w.key===" "&&w.preventDefault())})})})})});sP.displayName=Xh;var Bl="SelectItemText",iP=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Ii(Bl,n),a=Ni(Bl,n),l=rP(Bl,n),u=bB(Bl,n),[h,f]=p.useState(null),m=Le(e,E=>f(E),l.onItemTextChange,E=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,E,l.value,l.disabled)}),y=h==null?void 0:h.textContent,x=p.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:y},l.value),[l.disabled,l.value,y]),{onNativeOptionAdd:v,onNativeOptionRemove:b}=u;return _t(()=>(v(x),()=>b(x)),[v,b,x]),c.jsxs(c.Fragment,{children:[c.jsx(ye.span,{id:l.textId,...i,ref:m}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?zn.createPortal(i.children,o.valueNode):null]})});iP.displayName=Bl;var oP="SelectItemIndicator",aP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return rP(oP,n).isSelected?c.jsx(ye.span,{"aria-hidden":!0,...r,ref:e}):null});aP.displayName=oP;var xy="SelectScrollUpButton",lP=p.forwardRef((t,e)=>{const n=Ni(xy,t.__scopeSelect),r=d0(xy,t.__scopeSelect),[s,i]=p.useState(!1),o=Le(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?c.jsx(uP,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});lP.displayName=xy;var _y="SelectScrollDownButton",cP=p.forwardRef((t,e)=>{const n=Ni(_y,t.__scopeSelect),r=d0(_y,t.__scopeSelect),[s,i]=p.useState(!1),o=Le(e,r.onScrollButtonChange);return _t(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,h=Math.ceil(l.scrollTop)<u;i(h)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),s?c.jsx(uP,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});cP.displayName=_y;var uP=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Ni("SelectScrollButton",n),o=p.useRef(null),a=fp(n),l=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>l(),[l]),_t(()=>{var h;const u=a().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[a]),c.jsx(ye.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:de(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:de(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:de(s.onPointerLeave,()=>{l()})})}),jB="SelectSeparator",dP=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return c.jsx(ye.div,{"aria-hidden":!0,...r,ref:e})});dP.displayName=jB;var by="SelectArrow",OB=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=pp(n),i=Ii(by,n),o=Ni(by,n);return i.open&&o.position==="popper"?c.jsx(sI,{...s,...r,ref:e}):null});OB.displayName=by;function hP(t){return t===""||t===void 0}var fP=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),i=Le(e,s),o=zR(n);return p.useEffect(()=>{const a=s.current,l=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(a,n),a.dispatchEvent(f)}},[o,n]),c.jsx(nu,{asChild:!0,children:c.jsx("select",{...r,ref:i,defaultValue:n})})});fP.displayName="BubbleSelect";function pP(t){const e=Zt(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const a=n.current+o;e(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function mP(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=MB(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return l!==n?l:void 0}function MB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var LB=$R,gP=HR,VB=qR,FB=GR,UB=KR,yP=QR,zB=ZR,vP=nP,wP=sP,$B=iP,BB=aP,xP=lP,_P=cP,bP=dP;const Yh=LB,Jh=VB,Hc=p.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(gP,{ref:r,className:Z("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,c.jsx(FB,{asChild:!0,children:c.jsx(gC,{className:"h-4 w-4 opacity-50"})})]}));Hc.displayName=gP.displayName;const EP=p.forwardRef(({className:t,...e},n)=>c.jsx(xP,{ref:n,className:Z("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(e4,{className:"h-4 w-4"})}));EP.displayName=xP.displayName;const SP=p.forwardRef(({className:t,...e},n)=>c.jsx(_P,{ref:n,className:Z("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(gC,{className:"h-4 w-4"})}));SP.displayName=_P.displayName;const Wc=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>c.jsx(UB,{children:c.jsxs(yP,{ref:s,className:Z("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[c.jsx(EP,{}),c.jsx(zB,{className:Z("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(SP,{})]})}));Wc.displayName=yP.displayName;const HB=p.forwardRef(({className:t,...e},n)=>c.jsx(vP,{ref:n,className:Z("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));HB.displayName=vP.displayName;const gt=p.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(wP,{ref:r,className:Z("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(BB,{children:c.jsx(jg,{className:"h-4 w-4"})})}),c.jsx($B,{children:e})]}));gt.displayName=wP.displayName;const WB=p.forwardRef(({className:t,...e},n)=>c.jsx(bP,{ref:n,className:Z("-mx-1 my-1 h-px bg-muted",t),...e}));WB.displayName=bP.displayName;function qB(t){return Zw({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(t)}const yd={backlog:{label:"Backlog",color:"bg-slate-100",border:"border-slate-200",timelineStyle:"bg-slate-100 border-slate-300 text-slate-700"},in_progress:{label:"In Progress",color:"bg-blue-50 text-blue-700",border:"border-blue-100",timelineStyle:"bg-blue-100 border-blue-300 text-blue-800"},submitted:{label:"Submitted",color:"bg-purple-50 text-purple-700",border:"border-purple-100",timelineStyle:"bg-purple-100 border-purple-300 text-purple-800"},graded:{label:"Graded",color:"bg-emerald-50 text-emerald-700",border:"border-emerald-100",timelineStyle:"bg-emerald-100 border-emerald-300 text-emerald-800"},overdue:{label:"Overdue",color:"bg-red-50 text-red-700",border:"border-red-100",timelineStyle:"bg-red-100 border-red-300 text-red-800"}},GB=(t,e)=>{const n=[],r=new Date(t);for(;r<=e;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n},KB=(t,e)=>{const n=[],r=new Date(t);r.setDate(1),r.setHours(0,0,0,0);const s=new Date(e);for(s.setDate(1),s.setHours(0,0,0,0);r<=s;)n.push(new Date(r)),r.setMonth(r.getMonth()+1);return n},Om=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,Kb=t=>{const e=new Date;return t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()};function QB(){const{getTimelineGroups:t,courses:e,isLoading:n,isSyncing:r,assignments:s,syncClassroom:i}=xs(),{user:o,signOut:a}=rn(),[l,u]=p.useState(null),[h,f]=p.useState(null),[m,y]=p.useState(null),[x,v]=p.useState("timeline"),[b,E]=p.useState([]);p.useEffect(()=>{if(o)try{const T=`trace_email_events_${o.uid}`,I=JSON.parse(localStorage.getItem(T)||"[]").map(A=>({id:A.id,uniqueId:A.id,userId:o.uid,courseId:"system",courseName:"System",classroomId:"system",title:A.title,description:A.body,dueDate:A.timestamp,dueTime:null,maxPoints:null,systemStatus:"submitted",userStatus:null,submissionId:null,submittedAt:null,gradedAt:null,grade:null,alternateLink:null,createdAt:A.timestamp,lastSyncedAt:A.timestamp}));E(I)}catch{}},[o]);const w=p.useMemo(()=>{let T=[...s,...b];return l&&(T=T.filter(C=>C.courseId===l)),h&&(T=T.filter(C=>C.systemStatus===h)),T},[s,b,l,h]),S=()=>{u(null),f(null)},k=l||h;if(s.length===0)return c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(Nn,{className:"h-12 w-12 mx-auto text-destructive"}),c.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),c.jsx(pe,{onClick:()=>a(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]});const D=()=>{const T=p.useRef(null),[C,I]=p.useState(!1),A=p.useRef({x:0,left:0}),P=60,{earliestDate:j,latestDate:R,initialScrollPosition:$}=p.useMemo(()=>{const F=new Date;F.setHours(0,0,0,0);let B=new Date,G=new Date;if(w.length>0){const Q=w.filter(ee=>ee.dueDate).map(ee=>new Date(ee.dueDate));Q.length>0&&(B=new Date(Math.min(...Q.map(ee=>ee.getTime()))),G=new Date(Math.max(...Q.map(ee=>ee.getTime()))))}const X=new Date(B);X.setDate(X.getDate()-30);const J=new Date(G);J.setDate(J.getDate()+30);const ie=Math.ceil((F.getTime()-X.getTime())/(1e3*3600*24))*P+P/2-window.innerWidth/2;return{earliestDate:X,latestDate:J,initialScrollPosition:Math.max(0,ie)}},[w]),re=p.useMemo(()=>GB(j,R),[j,R]);p.useEffect(()=>{T.current&&(T.current.scrollLeft=$)},[$]);const z=F=>{F.button===2&&T.current&&(F.preventDefault(),I(!0),A.current={x:F.pageX,left:T.current.scrollLeft})},W=p.useCallback(F=>{if(!C||!T.current)return;F.preventDefault();const G=(F.pageX-A.current.x)*1.5;T.current.scrollLeft=A.current.left-G},[C]),M=p.useCallback(()=>{I(!1)},[]);p.useEffect(()=>(C?(window.addEventListener("mousemove",W),window.addEventListener("mouseup",M)):(window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",M)),()=>{window.removeEventListener("mousemove",W),window.removeEventListener("mouseup",M)}),[C,W,M]);const L=F=>{if(!F)return{left:"0px",width:"0px"};const B=new Date(F);return B.setHours(0,0,0,0),{left:`${(B.getTime()-j.getTime())/(1e3*3600*24)*P}px`,width:`${P}px`}};return c.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col h-full bg-background",children:[c.jsx("div",{ref:T,className:Z("flex-1 overflow-auto relative select-none",C?"cursor-grabbing":"cursor-default"),onMouseDown:z,onContextMenu:F=>F.preventDefault(),children:c.jsxs("div",{className:"min-w-max pb-20 relative",style:{width:`${re.length*P}px`},children:[c.jsx("div",{className:"flex sticky top-0 bg-background/95 backdrop-blur-sm z-40 border-b shadow-sm h-16",children:re.map((F,B)=>{const G=Kb(F);return c.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center justify-end pb-3 relative",style:{width:P},children:[c.jsx("span",{className:Z("text-[10px] uppercase font-bold tracking-wider mb-1",G?"text-foreground":"text-muted-foreground"),children:F.toLocaleDateString("en-US",{weekday:"narrow"})}),c.jsx("span",{className:Z("text-sm font-bold w-8 h-8 flex items-center justify-center rounded-full transition-all",G?"bg-foreground text-background shadow-md z-10 scale-110":"text-foreground"),children:F.getDate()}),c.jsx("div",{className:"absolute right-0 top-2 bottom-2 w-[1px] bg-border/50"})]},B)})}),c.jsxs("div",{className:"relative pt-6 min-h-[500px]",children:[c.jsx("div",{className:"absolute inset-0 flex pointer-events-none h-full z-0",children:re.map((F,B)=>{const G=Kb(F);return c.jsx("div",{className:Z("flex-shrink-0 h-full border-r border-border/40 relative",G?"bg-accent/50":""),style:{width:P},children:G&&c.jsx("div",{className:"absolute top-0 bottom-0 left-1/2 w-[2px] bg-foreground -translate-x-1/2 z-20 shadow-[0_0_10px_rgba(255,255,255,0.2)]"})},B)})}),c.jsx("div",{className:"space-y-3 px-0 relative z-10 mt-2",children:w.filter(F=>F.dueDate).map(F=>{const B=L(F.dueDate),G=yd[F.systemStatus]||yd.backlog;return c.jsx("div",{className:"relative h-14 group",children:c.jsxs("div",{onClick:()=>y(F),className:Z("absolute top-0 h-12 rounded-lg border shadow-sm transition-all cursor-pointer flex flex-col justify-center px-3 overflow-hidden group hover:scale-[1.01] z-10 hover:z-30 hover:shadow-md",G.timelineStyle),style:{left:B.left,width:B.width,minWidth:"140px"},children:[c.jsx("div",{className:"flex items-center justify-between gap-2 mb-0.5",children:c.jsxs("span",{className:"truncate text-xs font-bold leading-none flex items-center gap-1",children:[F.courseId==="system"&&c.jsx(Av,{className:"h-3 w-3 inline-block"}),F.title]})}),c.jsx("div",{className:"flex items-center justify-between opacity-80",children:c.jsx("span",{className:"text-[10px] font-semibold truncate max-w-[80px]",children:F.courseName})})]})},F.id)})})]})]})}),c.jsxs("div",{className:"flex-none p-2 border-t bg-background/70 backdrop-blur-sm flex items-center justify-center text-xs text-muted-foreground font-medium z-30 relative",children:[c.jsx(k_,{size:14,className:"mr-2"}),"Tip: Hold"," ",c.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag timeline"]})]})},O=()=>{const T=p.useRef(null),[C,I]=p.useState(!1),A=p.useRef({y:0,top:0}),P=p.useRef({}),[j,R]=p.useState(!1),{startMonth:$,endMonth:re}=p.useMemo(()=>{let X=new Date,J=new Date;if(w.length>0){const Q=w.filter(ee=>ee.dueDate).map(ee=>new Date(ee.dueDate));Q.length>0&&(X=new Date(Math.min(...Q.map(ee=>ee.getTime()))),J=new Date(Math.max(...Q.map(ee=>ee.getTime()))))}const he=new Date(X);he.setMonth(he.getMonth()-2),he.setDate(1);const ie=new Date(J);return ie.setMonth(ie.getMonth()+4),ie.setDate(1),{startMonth:he,endMonth:ie}},[w]),z=p.useMemo(()=>KB($,re),[$,re]),W=p.useCallback(()=>{var Q;const X=Om(new Date),J=P.current[X];if(!J){R(!0);return}const he=J.getBoundingClientRect(),ie=(Q=T.current)==null?void 0:Q.getBoundingClientRect();ie&&R(he.bottom<ie.top||he.top>ie.bottom)},[z]);p.useEffect(()=>{const X=T.current;return X&&(X.addEventListener("scroll",W),W()),()=>X==null?void 0:X.removeEventListener("scroll",W)},[W]),p.useEffect(()=>{setTimeout(()=>M(),100)},[]);const M=()=>{const X=Om(new Date),J=P.current[X];J&&J.scrollIntoView({behavior:"smooth",block:"center"})},L=X=>{X.button===2&&T.current&&(X.preventDefault(),I(!0),A.current={y:X.pageY,top:T.current.scrollTop})},F=p.useCallback(X=>{if(!C||!T.current)return;X.preventDefault();const he=(X.pageY-A.current.y)*1.5;T.current.scrollTop=A.current.top-he},[C]),B=p.useCallback(()=>{I(!1)},[]);p.useEffect(()=>(C?(window.addEventListener("mousemove",F),window.addEventListener("mouseup",B)):(window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",B)),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",B)}),[C,F,B]);const G=X=>{const J=X.getFullYear(),he=X.getMonth(),ie=new Date(J,he,1),Q=new Date(J,he+1,0),ee=[];for(let me=0;me<ie.getDay();me++)ee.push({date:new Date(J,he,-ie.getDay()+1+me),isCurrentMonth:!1});for(let me=1;me<=Q.getDate();me++)ee.push({date:new Date(J,he,me),isCurrentMonth:!0});for(;ee.length%7!==0;){const me=ee.length-(ie.getDay()+Q.getDate())+1,ne=new Date(J,he+1,me);ee.push({date:ne,isCurrentMonth:!1})}return ee};return c.jsxs("div",{className:"flex flex-col h-full bg-background relative",children:[j&&c.jsx("div",{className:"absolute top-4 right-6 z-20 animate-in fade-in zoom-in duration-300",children:c.jsxs("button",{onClick:M,className:"flex items-center gap-2 text-xs font-bold px-4 py-2 bg-primary text-primary-foreground rounded-full shadow-lg hover:opacity-90 transition-all hover:scale-105",children:[c.jsx(GM,{size:14})," Jump to Today"]})}),c.jsx("div",{ref:T,className:Z("flex-1 overflow-y-auto",C?"cursor-grabbing":"cursor-default"),onMouseDown:L,onContextMenu:X=>X.preventDefault(),children:c.jsx("div",{className:"flex flex-col gap-8 p-6 pb-20 max-w-6xl mx-auto",children:z.map(X=>{const J=G(X),he=Om(X);return c.jsxs("div",{ref:ie=>P.current[he]=ie,className:"bg-card rounded-xl shadow-sm border overflow-hidden scroll-mt-6",children:[c.jsx("div",{className:"px-6 py-4 border-b bg-muted/50 flex justify-between items-center",children:c.jsx("h3",{className:"text-lg font-bold",children:X.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),c.jsx("div",{className:"grid grid-cols-7 border-b bg-muted/30",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(ie=>c.jsx("div",{className:"py-2 text-center text-[10px] font-bold text-muted-foreground uppercase tracking-wide",children:ie},ie))}),c.jsx("div",{className:"grid grid-cols-7 auto-rows-fr",children:J.map((ie,Q)=>{const ee=w.filter(ne=>{if(!ne.dueDate)return!1;const ue=new Date(ne.dueDate);ue.setHours(0,0,0,0);const ce=new Date(ie.date);return ce.setHours(0,0,0,0),ce.toDateString()===ue.toDateString()}),me=ie.date.toDateString()===new Date().toDateString();return c.jsxs("div",{className:Z("min-h-[100px] border-b border-r p-1.5 flex flex-col gap-1 transition-colors",ie.isCurrentMonth?"bg-card":"bg-muted/30 text-muted-foreground"),children:[c.jsx("span",{className:Z("text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full mb-1",me&&ie.isCurrentMonth?"bg-primary text-primary-foreground shadow-sm":"text-foreground"),children:ie.date.getDate()}),c.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:ee.map(ne=>{const ue=yd[ne.systemStatus]||yd.backlog;return c.jsx("div",{onClick:ce=>{ce.stopPropagation(),y(ne)},className:Z("text-[10px] px-2 py-1 rounded-md border cursor-pointer truncate shadow-sm hover:scale-[1.02] transition-transform font-medium",ue.color,ue.border),title:ne.title,children:ne.title},ne.id)})})]},Q)})})]},he)})})}),c.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-background/90 backdrop-blur-md border-t flex items-center justify-center text-xs text-muted-foreground font-medium z-10",children:[c.jsx(k_,{size:14,className:"mr-2"}),"Tip: Hold"," ",c.jsx("kbd",{className:"mx-1 px-1 py-0.5 rounded-md bg-muted border text-foreground font-bold text-[10px]",children:"Right Click"})," ","to drag vertically"]})]})};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] overflow-hidden",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-3 sticky top-0 bg-background py-3 z-10 border-b px-4 sm:px-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(pe,{variant:x==="timeline"?"default":"ghost",size:"sm",onClick:()=>v("timeline"),className:"gap-2",children:[c.jsx(To,{size:14}),"Timeline"]}),c.jsxs(pe,{variant:x==="calendar"?"default":"ghost",size:"sm",onClick:()=>v("calendar"),className:"gap-2",children:[c.jsx(KM,{size:14}),"Calendar"]})]}),c.jsxs(Yh,{value:l||"all",onValueChange:T=>u(T==="all"?null:T),children:[c.jsx(Hc,{className:"w-[140px] sm:w-[180px]","data-testid":"select-course-filter",children:c.jsx(Jh,{placeholder:"All Courses"})}),c.jsxs(Wc,{children:[c.jsx(gt,{value:"all",children:"All Courses"}),e.map(T=>c.jsx(gt,{value:T.id,children:T.name},T.id))]})]}),c.jsxs(Yh,{value:h||"all",onValueChange:T=>f(T==="all"?null:T),children:[c.jsx(Hc,{className:"w-[120px] sm:w-[140px]","data-testid":"select-status-filter",children:c.jsx(Jh,{placeholder:"All Status"})}),c.jsxs(Wc,{children:[c.jsx(gt,{value:"all",children:"All Status"}),c.jsx(gt,{value:"backlog",children:"Backlog"}),c.jsx(gt,{value:"in_progress",children:"In Progress"}),c.jsx(gt,{value:"submitted",children:"Submitted"}),c.jsx(gt,{value:"graded",children:"Graded"}),c.jsx(gt,{value:"overdue",children:"Overdue"})]})]}),k&&c.jsxs(pe,{variant:"ghost",size:"sm",onClick:S,className:"text-muted-foreground","data-testid":"button-clear-filters",children:[c.jsx(su,{className:"h-3.5 w-3.5 mr-1"}),"Clear filters"]}),c.jsx("div",{className:"ml-auto",children:c.jsx(fI,{children:c.jsxs(EV,{children:[c.jsx(SV,{asChild:!0,children:c.jsx(ho,{href:"/settings/integrations",children:c.jsxs(pe,{variant:"outline",size:"sm",className:"gap-2 border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800 dark:hover:bg-zinc-900 transition-all font-medium whitespace-nowrap",children:[c.jsx(qB,{className:"h-4 w-4"}),"Sync with Google Calendar"]})})}),c.jsxs(pI,{side:"left",className:"max-w-xs",children:[c.jsx("p",{className:"font-medium",children:"Google Calendar Sync"}),c.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically sync your assignments and exam deadlines to your Google Calendar."})]})]})})})]}),c.jsx("div",{className:"flex-1 overflow-hidden",children:x==="timeline"?c.jsx(D,{}):c.jsx(O,{})})]}),c.jsx(c0,{assignment:m,isOpen:!!m,onClose:()=>y(null)})]})}function vd({title:t,value:e,icon:n,variant:r="default"}){return c.jsxs(vt,{"data-testid":`card-metric-${t.toLowerCase().replace(/\s+/g,"-")}`,children:[c.jsxs(Yt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[c.jsx(hn,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:t}),c.jsx(n,{className:Z("h-5 w-5",r==="default"&&"text-muted-foreground",r==="warning"&&"text-foreground",r==="danger"&&"text-destructive")})]}),c.jsx(Ht,{children:c.jsx("div",{className:Z("text-3xl font-semibold font-mono tracking-tight",r==="danger"&&"text-destructive"),children:e})})]})}function XB({data:t}){const e=Math.max(...t.map(n=>n.count),1);return c.jsxs(vt,{children:[c.jsx(Yt,{className:"pb-2",children:c.jsx(hn,{className:"text-sm font-medium",children:"Weekly Workload"})}),c.jsx(Ht,{children:c.jsx("div",{className:"flex items-end justify-between gap-2 h-32",children:t.map((n,r)=>c.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[c.jsx("span",{className:"text-xs font-mono text-muted-foreground",children:n.count>0?n.count:""}),c.jsx("div",{className:Z("w-full rounded-t-sm transition-all",n.isToday?"bg-foreground":"bg-muted",n.count===0&&"min-h-[4px]"),style:{height:n.count>0?`${n.count/e*80}px`:"4px"}}),c.jsx("span",{className:Z("text-xs",n.isToday?"font-medium":"text-muted-foreground"),children:n.day})]},r))})})]})}function YB({courses:t}){const{user:e}=rn(),[n,r]=p.useState(null),[s,i]=p.useState(!0);return p.useEffect(()=>{if(!e)return;const o=Aw(Ew(st,"leaderboards","all-courses","students"),kw("totalXP","desc")),a=ll(o,l=>{const u=l.docs.map(m=>({id:m.id,...m.data()})),h=u.length;if(h===0){r(null),i(!1);return}const f=u.findIndex(m=>m.id===e.uid);if(f!==-1){const m=f+1,y=Math.round((h-m+1)/h*100),x=u[f];r({rank:m,total:h,percentile:y,xp:x.totalXP||0})}else r(null);i(!1)},l=>{console.error("Error fetching leaderboard for dashboard:",l),i(!1)});return()=>a()},[e]),c.jsxs(vt,{"data-testid":"card-class-rank",children:[c.jsxs(Yt,{className:"flex flex-row items-center justify-between gap-2 pb-2",children:[c.jsx(hn,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Class Ranking"}),c.jsx(EC,{className:"h-5 w-5 text-amber-500"})]}),c.jsx(Ht,{children:s?c.jsxs("div",{className:"space-y-2",children:[c.jsx(Qr,{className:"h-8 w-16"}),c.jsx(Qr,{className:"h-3 w-24"})]}):n?c.jsxs("div",{children:[c.jsxs("div",{className:"text-3xl font-semibold font-mono tracking-tight flex items-baseline gap-2",children:["#",n.rank,c.jsxs("span",{className:"text-base text-muted-foreground font-normal",children:["/ ",n.total]})]}),c.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[c.jsxs("p",{className:"text-xs font-medium bg-gradient-to-r from-amber-500 to-orange-500 bg-clip-text text-transparent",children:["Top ",100-n.percentile<1?1:100-n.percentile,"% of class"]}),c.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[n.xp.toLocaleString()," Total XP"]})]})]}):c.jsxs("div",{className:"flex flex-col gap-2",children:[c.jsx("span",{className:"text-lg font-medium text-muted-foreground",children:"Unranked"}),c.jsx(ho,{href:"/leaderboard",children:c.jsx(pe,{variant:"outline",size:"sm",className:"h-7 text-xs w-full",children:"Join Leaderboard"})})]})})]})}function JB(){const{getDashboardMetrics:t,isLoading:e,isSyncing:n,assignments:r,syncClassroom:s,courses:i}=xs(),{signOut:o}=rn(),[a,l]=p.useState(null),u=t();return r.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(Nn,{className:"h-12 w-12 mx-auto text-destructive"}),c.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),c.jsx(pe,{onClick:()=>o(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[u.upcoming7Days>0&&c.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50/50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-900/30 rounded-lg animate-in slide-in-from-top-2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"p-1.5 bg-blue-100 dark:bg-blue-900/40 rounded-md text-blue-700 dark:text-blue-300",children:c.jsx(Nn,{className:"h-4 w-4"})}),c.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100 font-medium",children:[" ",u.upcoming7Days," assignment",u.upcoming7Days!==1?"s":""," due this week"]})]}),c.jsx(ho,{href:"/settings/notifications",children:c.jsx(pe,{variant:"ghost",size:"sm",className:"text-blue-700 dark:text-blue-300 hover:text-blue-800 hover:bg-blue-100/50 h-8",children:"Enable email reminders"})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[c.jsx(vd,{title:"Due in 3 Days",value:u.upcoming3Days,icon:yC,variant:u.upcoming3Days>3?"warning":"default"}),c.jsx(vd,{title:"Due in 7 Days",value:u.upcoming7Days,icon:To}),c.jsx(vd,{title:"Overdue",value:u.overdue,icon:Nn,variant:u.overdue>0?"danger":"default"}),c.jsx(vd,{title:"Total Active",value:u.totalActive,icon:Oa}),c.jsx(YB,{courses:i})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsx(XB,{data:u.weeklyWorkload}),c.jsxs(vt,{children:[c.jsx(Yt,{className:"pb-2",children:c.jsx(hn,{className:"text-sm font-medium",children:"Next Actions"})}),c.jsx(Ht,{className:"space-y-2",children:u.nextActions.length>0?u.nextActions.map(h=>c.jsx(nB,{assignment:h,onClick:()=>l(h)},h.id)):c.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-muted-foreground",children:[c.jsx(Oa,{className:"h-8 w-8 mb-2"}),c.jsx("p",{className:"text-sm",children:"All caught up!"})]})})]})]})]}),c.jsx(c0,{assignment:a,isOpen:!!a,onClose:()=>l(null)})]})}function ZB(){const{courses:t,materials:e,isLoading:n,isSyncing:r,syncClassroom:s}=xs(),{signOut:i}=rn(),[o,a]=p.useState(null),[l,u]=p.useState("grid"),h=Yw(),f=t.find(x=>x.id===o),y=e.filter(x=>x.courseId===o).flatMap(x=>x.materials?x.materials.flatMap(v=>{let b=[];return v.driveFile&&b.push({id:v.driveFile.driveFile.id,title:v.driveFile.driveFile.title,link:v.driveFile.driveFile.alternateLink,thumbnail:v.driveFile.driveFile.thumbnailUrl,type:"driveFile"}),b}):[]).filter(x=>x.title&&x.title.toLowerCase().endsWith(".pdf"));return n&&t.length===0?c.jsx(eH,{}):t.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-4rem)] gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(Nn,{className:"h-12 w-12 mx-auto text-destructive"}),c.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),c.jsx(pe,{onClick:()=>i(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):c.jsxs("div",{className:"flex h-full overflow-hidden bg-background",children:[c.jsxs("div",{className:Z("w-full md:w-80 border-r border-border bg-muted/20 flex flex-col h-full shrink-0",h&&o?"hidden":"flex"),children:[c.jsx("div",{className:"p-4 border-b border-border flex items-center justify-between bg-background",children:c.jsx("h2",{className:"font-semibold text-sm uppercase tracking-wider text-muted-foreground",children:"Your Courses"})}),c.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:t.map(x=>c.jsxs("button",{onClick:()=>a(x.id),className:Z("w-full text-left px-3 py-3 rounded-md transition-all group flex items-center gap-3",o===x.id?"bg-primary text-primary-foreground shadow-md":"hover:bg-muted text-muted-foreground hover:text-foreground"),children:[c.jsx("div",{className:Z("h-8 w-8 rounded-full flex items-center justify-center shrink-0",o===x.id?"bg-primary-foreground/20":"bg-muted"),children:c.jsx(A_,{className:Z("h-4 w-4",o===x.id?"text-primary-foreground":"text-muted-foreground")})}),c.jsxs("div",{className:"truncate flex-1",children:[c.jsx("p",{className:"text-sm font-semibold leading-none mb-1 truncate",children:x.name}),c.jsx("p",{className:Z("text-[10px] uppercase tracking-wider font-medium",o===x.id?"text-primary-foreground/80":"text-muted-foreground/70"),children:x.section||"No Section"})]}),c.jsx(ZM,{className:Z("h-4 w-4 transition-transform",o===x.id?"translate-x-0":"-translate-x-2 opacity-0 group-hover:opacity-100 group-hover:translate-x-0")})]},x.id))})]}),c.jsxs("div",{className:Z("flex-1 overflow-y-auto bg-background",h&&!o?"hidden":"flex flex-col"),children:[h&&o&&c.jsx("div",{className:"flex items-center p-4 border-b border-border bg-background sticky top-0 z-10",children:c.jsxs(pe,{variant:"ghost",size:"sm",onClick:()=>a(null),className:"gap-2 pl-2",children:[c.jsx(mC,{className:"h-4 w-4"}),"Back to Courses"]})}),o?c.jsxs("div",{className:"p-4 md:p-8 space-y-6 md:space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between border-b pb-6 border-border gap-4",children:[c.jsxs("div",{className:"space-y-1 max-w-full",children:[c.jsx(os,{variant:"outline",className:"text-[10px] font-mono tracking-[0.2em] font-bold uppercase py-0 px-2 rounded-sm border-border",children:"Course Resources"}),c.jsx("h1",{className:"text-lg md:text-xl font-black tracking-tighter uppercase italic break-words leading-tight text-foreground",children:f==null?void 0:f.name}),c.jsx("p",{className:"text-xs md:text-sm font-medium text-muted-foreground line-clamp-2",children:(f==null?void 0:f.descriptionHeading)||"Curated academic materials and notes."})]}),c.jsxs("div",{className:"flex gap-2 shrink-0",children:[c.jsxs("div",{className:"bg-muted/30 px-3 py-1.5 rounded-md border border-border flex items-center gap-2",children:[c.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-red-500 animate-pulse shrink-0"}),c.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest whitespace-nowrap text-muted-foreground",children:[y.length," PDF Assets"]})]}),c.jsxs("div",{className:"flex bg-muted rounded-md p-1 border border-border",children:[c.jsx(pe,{variant:"ghost",size:"icon",className:Z("h-6 w-6 rounded-sm",l==="grid"&&"bg-background shadow-sm"),onClick:()=>u("grid"),children:c.jsx(vC,{className:"h-4 w-4"})}),c.jsx(pe,{variant:"ghost",size:"icon",className:Z("h-6 w-6 rounded-sm",l==="list"&&"bg-background shadow-sm"),onClick:()=>u("list"),children:c.jsx(i4,{className:"h-4 w-4"})})]})]})]}),y.length>0?l==="grid"?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 pb-20",children:y.map((x,v)=>c.jsxs(vt,{className:"group relative overflow-hidden transition-all hover:shadow-2xl hover:-translate-y-1 border-border bg-card shadow-sm",children:[c.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:c.jsx(pe,{variant:"secondary",size:"icon",className:"h-8 w-8 rounded-full shadow-lg",asChild:!0,children:c.jsx("a",{href:x.link,target:"_blank",rel:"noopener noreferrer",children:c.jsx(Og,{className:"h-4 w-4"})})})}),c.jsx(Yt,{className:"p-0 border-b border-border",children:c.jsxs("div",{className:"aspect-[4/3] bg-muted flex items-center justify-center overflow-hidden relative group-hover:bg-muted/80 transition-colors",children:[c.jsx(ec,{className:"h-16 w-16 text-muted-foreground/30 transition-transform group-hover:scale-110 duration-500"}),c.jsxs("div",{className:"absolute bottom-3 left-3 flex gap-1",children:[c.jsx(os,{className:"bg-red-500 hover:bg-red-600 text-[9px] font-black italic rounded-sm text-white",children:"PDF"}),c.jsx(os,{variant:"outline",className:"bg-background/80 backdrop-blur text-[9px] font-black rounded-sm border-border text-foreground",children:"READONLY"})]})]})}),c.jsxs(Ht,{className:"p-5 space-y-4",children:[c.jsx("h4",{className:"font-bold text-sm tracking-tight leading-snug line-clamp-2 min-h-[2.5rem] text-card-foreground group-hover:text-primary transition-colors",children:x.title}),c.jsxs("div",{className:"pt-4 flex items-center justify-between border-t border-border/50",children:[c.jsx("span",{className:"text-[10px] font-mono font-bold text-muted-foreground uppercase tracking-widest",children:"Secured Asset"}),c.jsx(pe,{size:"sm",variant:"ghost",asChild:!0,className:"h-8 text-[11px] font-black uppercase tracking-tighter hover:bg-primary hover:text-primary-foreground border border-border rounded-md",children:c.jsx("a",{href:x.link,target:"_blank",rel:"noopener noreferrer",children:"Open Material"})})]})]})]},`${x.id}-${v}`))}):c.jsx("div",{className:"space-y-2 pb-20",children:y.map((x,v)=>c.jsxs("div",{className:"group flex items-center gap-4 p-4 rounded-lg border border-border bg-card hover:bg-accent/50 transition-colors",children:[c.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-md bg-muted text-red-500 shrink-0",children:c.jsx(ec,{className:"h-5 w-5"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium text-sm truncate text-card-foreground group-hover:text-primary transition-colors",children:x.title}),c.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"PDF Document  Read Only"})]}),c.jsx(pe,{variant:"ghost",size:"sm",asChild:!0,className:"shrink-0",children:c.jsxs("a",{href:x.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[c.jsx("span",{className:"hidden sm:inline text-xs font-medium",children:"Open"}),c.jsx(Og,{className:"h-4 w-4"})]})})]},`${x.id}-${v}`))}):c.jsxs("div",{className:"h-96 flex flex-col items-center justify-center text-center border-4 border-dotted rounded-3xl bg-muted/20 border-border max-w-2xl mx-auto space-y-4",children:[c.jsx("div",{className:"h-20 w-20 bg-background rounded-full flex items-center justify-center shadow-inner border border-border",children:c.jsx(A_,{className:"h-8 w-8 text-muted-foreground"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-bold text-foreground",children:"No PDF Documents Found"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-2 max-w-xs mx-auto font-medium",children:"This course has no PDF files uploaded to Classroom yet. Make sure your materials are in .pdf format."})]})]})]}):c.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-8 space-y-6 max-w-md mx-auto",children:[c.jsx("div",{className:"h-24 w-24 bg-muted/50 rounded-2xl flex items-center justify-center border border-border shadow-sm",children:c.jsx(ec,{className:"h-10 w-10 text-muted-foreground/50"})}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-xl font-bold tracking-tight text-foreground",children:"Select a curriculum"}),c.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed font-medium mt-2",children:"Choose a course from the listing to accessibility your synchronized PDF lecture records and study guides."})]})]})]})]})}function eH(){return c.jsxs("div",{className:"flex h-full overflow-hidden",children:[c.jsxs("div",{className:"w-80 border-r bg-muted/20 p-6 space-y-6",children:[c.jsx(Qr,{className:"h-6 w-32"}),[1,2,3,4,5].map(t=>c.jsx(Qr,{className:"h-16 w-full rounded-xl"},t))]}),c.jsxs("div",{className:"flex-1 p-10 space-y-10",children:[c.jsxs("div",{className:"flex justify-between items-end border-b pb-8",children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx(Qr,{className:"h-4 w-20"}),c.jsx(Qr,{className:"h-10 w-80"}),c.jsx(Qr,{className:"h-4 w-64"})]}),c.jsx(Qr,{className:"h-10 w-32 rounded-lg"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[1,2,3,4,5,6].map(t=>c.jsx(Qr,{className:"h-64 w-full rounded-2xl"},t))})]})]})}var h0="Switch",[tH,eW]=qn(h0),[nH,rH]=tH(h0),TP=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:i,required:o,disabled:a,value:l="on",onCheckedChange:u,form:h,...f}=t,[m,y]=p.useState(null),x=Le(e,S=>y(S)),v=p.useRef(!1),b=m?h||!!m.closest("form"):!0,[E=!1,w]=hi({prop:s,defaultProp:i,onChange:u});return c.jsxs(nH,{scope:n,checked:E,disabled:a,children:[c.jsx(ye.button,{type:"button",role:"switch","aria-checked":E,"aria-required":o,"data-state":NP(E),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:x,onClick:de(t.onClick,S=>{w(k=>!k),b&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})}),b&&c.jsx(sH,{control:m,bubbles:!v.current,name:r,value:l,checked:E,required:o,disabled:a,form:h,style:{transform:"translateX(-100%)"}})]})});TP.displayName=h0;var CP="SwitchThumb",IP=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=rH(CP,n);return c.jsx(ye.span,{"data-state":NP(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});IP.displayName=CP;var sH=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,i=p.useRef(null),o=zR(n),a=WC(e);return p.useEffect(()=>{const l=i.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(m)}},[o,n,r]),c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:i,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function NP(t){return t?"checked":"unchecked"}var AP=TP,iH=IP;const Bn=p.forwardRef(({className:t,...e},n)=>c.jsx(AP,{className:Z("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:c.jsx(iH,{className:Z("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Bn.displayName=AP.displayName;var oH="Label",kP=p.forwardRef((t,e)=>c.jsx(ye.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));kP.displayName=oH;var RP=kP;const aH=ru("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),io=p.forwardRef(({className:t,...e},n)=>c.jsx(RP,{ref:n,className:Z(aH(),t),...e}));io.displayName=RP.displayName;var Mm="rovingFocusGroup.onEntryFocus",lH={bubbles:!1,cancelable:!0},mp="RovingFocusGroup",[Ey,PP,cH]=Tv(mp),[uH,DP]=qn(mp,[cH]),[dH,hH]=uH(mp),jP=p.forwardRef((t,e)=>c.jsx(Ey.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(Ey.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(fH,{...t,ref:e})})}));jP.displayName=mp;var fH=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=p.useRef(null),y=Le(e,m),x=u0(i),[v=null,b]=hi({prop:o,defaultProp:a,onChange:l}),[E,w]=p.useState(!1),S=Zt(u),k=PP(n),D=p.useRef(!1),[O,T]=p.useState(0);return p.useEffect(()=>{const C=m.current;if(C)return C.addEventListener(Mm,S),()=>C.removeEventListener(Mm,S)},[S]),c.jsx(dH,{scope:n,orientation:r,dir:x,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(C=>b(C),[b]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(C=>C+1),[]),onFocusableItemRemove:p.useCallback(()=>T(C=>C-1),[]),children:c.jsx(ye.div,{tabIndex:E||O===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:de(t.onMouseDown,()=>{D.current=!0}),onFocus:de(t.onFocus,C=>{const I=!D.current;if(C.target===C.currentTarget&&I&&!E){const A=new CustomEvent(Mm,lH);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const P=k().filter(z=>z.focusable),j=P.find(z=>z.active),R=P.find(z=>z.id===v),re=[j,R,...P].filter(Boolean).map(z=>z.ref.current);LP(re,h)}}D.current=!1}),onBlur:de(t.onBlur,()=>w(!1))})})}),OP="RovingFocusGroupItem",MP=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,a=ns(),l=i||a,u=hH(OP,n),h=u.currentTabStopId===l,f=PP(n),{onFocusableItemAdd:m,onFocusableItemRemove:y}=u;return p.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),c.jsx(Ey.ItemSlot,{scope:n,id:l,focusable:r,active:s,children:c.jsx(ye.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:de(t.onMouseDown,x=>{r?u.onItemFocus(l):x.preventDefault()}),onFocus:de(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:de(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=gH(x,u.orientation,u.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let E=f().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")E.reverse();else if(v==="prev"||v==="next"){v==="prev"&&E.reverse();const w=E.indexOf(x.currentTarget);E=u.loop?yH(E,w+1):E.slice(w+1)}setTimeout(()=>LP(E))}})})})});MP.displayName=OP;var pH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function mH(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function gH(t,e,n){const r=mH(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return pH[r]}function LP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function yH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var vH=jP,wH=MP,f0="Tabs",[xH,tW]=qn(f0,[DP]),VP=DP(),[_H,p0]=xH(f0),FP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:a,activationMode:l="automatic",...u}=t,h=u0(a),[f,m]=hi({prop:r,onChange:s,defaultProp:i});return c.jsx(_H,{scope:n,baseId:ns(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:l,children:c.jsx(ye.div,{dir:h,"data-orientation":o,...u,ref:e})})});FP.displayName=f0;var UP="TabsList",zP=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=p0(UP,n),o=VP(n);return c.jsx(vH,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:c.jsx(ye.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});zP.displayName=UP;var $P="TabsTrigger",BP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=p0($P,n),a=VP(n),l=qP(o.baseId,r),u=GP(o.baseId,r),h=r===o.value;return c.jsx(wH,{asChild:!0,...a,focusable:!s,active:h,children:c.jsx(ye.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...i,ref:e,onMouseDown:de(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:de(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:de(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});BP.displayName=$P;var HP="TabsContent",WP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,a=p0(HP,n),l=qP(a.baseId,r),u=GP(a.baseId,r),h=r===a.value,f=p.useRef(h);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),c.jsx(So,{present:s||h,children:({present:m})=>c.jsx(ye.div,{"data-state":h?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});WP.displayName=HP;function qP(t,e){return`${t}-trigger-${e}`}function GP(t,e){return`${t}-content-${e}`}var bH=FP,KP=zP,QP=BP,XP=WP;const EH=bH,YP=p.forwardRef(({className:t,...e},n)=>c.jsx(KP,{ref:n,className:Z("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));YP.displayName=KP.displayName;const Sy=p.forwardRef(({className:t,...e},n)=>c.jsx(QP,{ref:n,className:Z("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Sy.displayName=QP.displayName;const Ty=p.forwardRef(({className:t,...e},n)=>c.jsx(XP,{ref:n,className:Z("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ty.displayName=XP.displayName;function SH(){const[t,e]=p.useState(null),[n,r]=p.useState(!1),[s,i]=p.useState(!1);return p.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches){i(!0);return}const a=u=>{u.preventDefault(),e(u),r(!0)},l=()=>{i(!0),r(!1),e(null)};return window.addEventListener("beforeinstallprompt",a),window.addEventListener("appinstalled",l),()=>{window.removeEventListener("beforeinstallprompt",a),window.removeEventListener("appinstalled",l)}},[]),{isInstallable:n,isInstalled:s,promptInstall:async()=>{if(!t)return!1;try{await t.prompt();const{outcome:a}=await t.userChoice;return a==="accepted"?(i(!0),r(!1),e(null),!0):!1}catch(a){return console.error("Error showing install prompt:",a),!1}}}}function TH(){const{user:t,requestCalendarPermissions:e}=rn(),[n,r]=p.useState(!1),[s,i]=p.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});p.useEffect(()=>{if(!t)return;const u=ll(dt(st,"users",t.uid,"settings","calendar"),h=>{h.exists()&&i(h.data())});return()=>u()},[t]);const o=async()=>{r(!0);try{await e()&&await yn(dt(st,"users",t.uid,"settings","calendar"),{...s,enabled:!0,connectedAt:new Date},{merge:!0})}catch(u){console.error(u)}finally{r(!1)}},a=async()=>{try{await yn(dt(st,"users",t.uid,"settings","calendar"),{enabled:!1},{merge:!0})}catch(u){console.error(u)}},l=async(u,h)=>{i(f=>({...f,[u]:h}));try{await yn(dt(st,"users",t.uid,"settings","calendar"),{[u]:h},{merge:!0})}catch(f){console.error(f)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs(vt,{className:`rounded-md border shadow-sm transition-all duration-200 ${s.enabled?"ring-1 ring-zinc-200 dark:ring-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50":"hover:border-zinc-300 dark:hover:border-zinc-700"}`,children:[c.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[c.jsx("div",{className:"flex-1 space-y-2",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border/50",children:c.jsx(To,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Google Calendar"}),s.enabled&&c.jsx(os,{variant:"outline",className:"rounded-sm px-1.5 py-0 text-[10px] font-medium bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100 border-zinc-200 dark:border-zinc-700",children:"Active"})]}),c.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Sync deadlines and exams directly to your calendar."})]})]})}),c.jsx("div",{className:"shrink-0 flex items-center gap-2",children:s.enabled?c.jsx(pe,{variant:"ghost",size:"sm",onClick:a,className:"text-muted-foreground hover:text-destructive hover:bg-destructive/10 rounded-md h-9 px-4",children:"Disconnect"}):c.jsx(pe,{onClick:o,disabled:n,className:"bg-primary hover:bg-primary/90 text-primary-foreground rounded-md h-9 px-4 shadow-sm w-full sm:w-auto",children:n?c.jsx(kc,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect"})})]}),s.enabled&&c.jsxs("div",{className:"px-6 pb-6 pt-0 animate-in slide-in-from-top-2 duration-300",children:[c.jsx("div",{className:"h-px w-full bg-border/50 mb-6"}),c.jsxs("div",{className:"space-y-4 pl-[3.25rem]",children:[" ",c.jsxs("div",{className:"grid gap-3 max-w-xl",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border/50 bg-background/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Assignment Deadlines"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for assignment due dates"})]}),c.jsx(Bn,{checked:s.syncAssignments,onCheckedChange:u=>l("syncAssignments",u)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border border-border/50 bg-background/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium text-foreground",children:"Exams"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Create events for scheduled exams"})]}),c.jsx(Bn,{checked:s.syncExams,onCheckedChange:u=>l("syncExams",u)})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx(Ef,{className:"h-3 w-3"}),c.jsxs("span",{children:["Last synced: ",s.lastSyncedAt?new Date(s.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),c.jsx(vt,{className:"rounded-md border shadow-sm hover:border-zinc-300 dark:hover:border-zinc-700 transition-all duration-200",children:c.jsxs("div",{className:"p-6 flex flex-col sm:flex-row sm:items-start justify-between gap-6",children:[c.jsx("div",{className:"flex-1 space-y-2",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"h-10 w-10 rounded-md bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-foreground shrink-0 border border-border/50",children:c.jsx(Av,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Notifications"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Manage email alerts for due assignments and updates."})]})]})}),c.jsx("div",{className:"shrink-0",children:c.jsx(ho,{href:"/settings/notifications",children:c.jsx(pe,{variant:"outline",size:"sm",className:"rounded-md h-9 px-4 w-full sm:w-auto",children:"Configure"})})})]})})]})}function CH(){var k,D;const{user:t,signOut:e}=rn(),{lastSyncedAt:n,isSyncing:r,syncClassroom:s,isLoading:i}=xs(),{isInstallable:o,isInstalled:a,promptInstall:l}=SH(),{theme:u,setTheme:h}=KA(),[f,m]=p.useState(!0),[y,x]=p.useState("auto"),[v,b]=p.useState(!1),E=((k=t==null?void 0:t.displayName)==null?void 0:k.split(" ").map(O=>O[0]).join("").toUpperCase())||((D=t==null?void 0:t.email)==null?void 0:D[0].toUpperCase())||"U",w=()=>n?n.toLocaleString():"Never",S=async()=>{b(!0);try{await l()}catch(O){console.error("Install failed:",O)}finally{b(!1)}};return c.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-6 space-y-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Settings"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your account and preferences"})]}),c.jsxs(EH,{defaultValue:"general",className:"w-full",children:[c.jsxs(YP,{className:"grid w-full grid-cols-2 lg:w-[400px] mb-6",children:[c.jsx(Sy,{value:"general",children:"General"}),c.jsx(Sy,{value:"integrations",children:"Integrations"})]}),c.jsxs(Ty,{value:"general",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:[c.jsxs(vt,{children:[c.jsxs(Yt,{children:[c.jsx(hn,{className:"text-base",children:"Connected Account"}),c.jsx(Ar,{children:"Your Google account linked to this app"})]}),c.jsxs(Ht,{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs(Ki,{className:"h-12 w-12",children:[c.jsx(Qi,{src:(t==null?void 0:t.photoURL)||void 0,alt:(t==null?void 0:t.displayName)||"User",referrerPolicy:"no-referrer"}),c.jsx(Xi,{children:E})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"font-medium truncate",children:t==null?void 0:t.displayName}),c.jsx("p",{className:"text-sm text-muted-foreground truncate",children:t==null?void 0:t.email})]}),c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(jg,{className:"h-3.5 w-3.5"}),"Connected"]})]}),c.jsx(ir,{}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium",children:"Google Classroom"}),c.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last synced: ",w()]})]}),c.jsxs(pe,{variant:"outline",size:"sm",onClick:O=>{O.preventDefault(),s().catch(T=>{console.error("Sync failed:",T)})},disabled:r,"data-testid":"button-sync-settings",children:[c.jsx(Ef,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),r?"Syncing...":"Sync Now"]})]})]})]}),c.jsxs(vt,{children:[c.jsxs(Yt,{children:[c.jsx(hn,{className:"text-base",children:"Sync Settings"}),c.jsx(Ar,{children:"Configure how your data syncs with Google Classroom"})]}),c.jsx(Ht,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(io,{htmlFor:"background-sync",className:"text-sm font-medium",children:"Background Sync"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically refresh assignment data periodically"})]}),c.jsx(Bn,{id:"background-sync",checked:f,onCheckedChange:m,"data-testid":"switch-background-sync"})]})})]}),c.jsxs(vt,{children:[c.jsxs(Yt,{children:[c.jsx(hn,{className:"text-base",children:"Theme"}),c.jsx(Ar,{children:"Choose your preferred color theme"})]}),c.jsx(Ht,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(io,{htmlFor:"theme",className:"text-sm font-medium",children:"Appearance"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Select light or dark mode"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(pe,{variant:u==="light"?"default":"outline",size:"sm",onClick:()=>h("light"),className:"flex items-center gap-2",children:[c.jsx(_C,{className:"h-4 w-4"}),"Light"]}),c.jsxs(pe,{variant:u==="dark"?"default":"outline",size:"sm",onClick:()=>h("dark"),className:"flex items-center gap-2",children:[c.jsx(wC,{className:"h-4 w-4"}),"Dark"]})]})]})})]}),c.jsxs(vt,{className:"border-primary/20",children:[c.jsxs(Yt,{children:[c.jsxs(hn,{className:"text-base flex items-center gap-2",children:[c.jsx(N_,{className:"h-4 w-4"}),"Install App"]}),c.jsx(Ar,{children:"Install this app on your device for quick access - works on phones and desktops"})]}),c.jsx(Ht,{className:"space-y-4",children:a?c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-emerald-50 dark:bg-emerald-950/20 rounded-lg border border-emerald-200 dark:border-emerald-800",children:[c.jsx(jg,{className:"h-5 w-5 text-emerald-600"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-emerald-900 dark:text-emerald-100",children:"App Installed"}),c.jsx("p",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"This app is installed on your device. You can access it from your home screen."})]})]}):o?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-primary/5 rounded-lg border border-primary/20",children:[c.jsx(f4,{className:"h-5 w-5 text-primary"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:"Install Available"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Click the button below to install this app on your device for a better experience."})]})]}),c.jsxs(pe,{onClick:S,disabled:v,className:"w-full",size:"lg","data-testid":"button-install-app",children:[c.jsx(N_,{className:"h-4 w-4 mr-2"}),v?"Installing...":"Install App"]}),c.jsx("p",{className:"text-xs text-center text-muted-foreground",children:"After installation, you can access the app from your home screen or app drawer"})]}):c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center gap-3 p-4 bg-muted rounded-lg",children:[c.jsx(bC,{className:"h-5 w-5 text-muted-foreground"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium",children:"Install Not Available"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:typeof window<"u"&&window.matchMedia("(display-mode: standalone)").matches?"This app is already installed.":"Installation prompt will appear when the app meets PWA requirements. Make sure you're using Chrome, Edge, or Safari on a supported device."})]})]}),c.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[c.jsx("p",{className:"text-xs font-medium mb-2",children:"Manual Installation:"}),c.jsxs("ul",{className:"text-xs text-muted-foreground space-y-1 list-disc list-inside",children:[c.jsxs("li",{children:[c.jsx("strong",{children:"Chrome/Edge:"})," Click the install icon in the address bar"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"iOS Safari:"})," Tap Share  Add to Home Screen"]}),c.jsxs("li",{children:[c.jsx("strong",{children:"Android Chrome:"})," Tap Menu  Install App"]})]})]})]})})]}),c.jsxs(vt,{children:[c.jsxs(Yt,{children:[c.jsx(hn,{className:"text-base",children:"Preferences"}),c.jsx(Ar,{children:"Customize your experience"})]}),c.jsx(Ht,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(io,{htmlFor:"timezone",className:"text-sm font-medium",children:"Time Zone"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Used for displaying due dates and deadlines"})]}),c.jsxs(Yh,{value:y,onValueChange:x,children:[c.jsx(Hc,{className:"w-[180px]","data-testid":"select-timezone",children:c.jsx(Jh,{})}),c.jsxs(Wc,{children:[c.jsx(gt,{value:"auto",children:"Auto-detect"}),c.jsx(gt,{value:"America/New_York",children:"Eastern Time"}),c.jsx(gt,{value:"America/Chicago",children:"Central Time"}),c.jsx(gt,{value:"America/Denver",children:"Mountain Time"}),c.jsx(gt,{value:"America/Los_Angeles",children:"Pacific Time"}),c.jsx(gt,{value:"Europe/London",children:"London"}),c.jsx(gt,{value:"Europe/Paris",children:"Paris"}),c.jsx(gt,{value:"Asia/Tokyo",children:"Tokyo"})]})]})]})})]}),c.jsxs(vt,{children:[c.jsxs(Yt,{children:[c.jsxs(hn,{className:"text-base flex items-center gap-2",children:[c.jsx(Mg,{className:"h-4 w-4"}),"Account Actions"]}),c.jsx(Ar,{children:"Manage your session"})]}),c.jsx(Ht,{className:"space-y-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("p",{className:"text-sm font-medium",children:"Sign Out"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sign out of your account on this device"})]}),c.jsxs(Wk,{children:[c.jsx(qk,{asChild:!0,children:c.jsxs(pe,{variant:"outline",size:"sm","data-testid":"button-signout",children:[c.jsx(Mg,{className:"h-4 w-4 mr-2"}),"Sign Out"]})}),c.jsxs(Hw,{children:[c.jsxs(Ww,{children:[c.jsx(Gw,{children:"Are you absolutely sure?"}),c.jsx(Kw,{children:"This will sign you out of your account. You will need to sign in again to access your data."})]}),c.jsxs(qw,{children:[c.jsx(Xw,{children:"Cancel"}),c.jsx(Qw,{onClick:e,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Sign Out"})]})]})]})]})})]})]}),c.jsx(Ty,{value:"integrations",className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500 fade-in",children:c.jsx(TH,{})})]})]})}function IH(){const{user:t,requestGmailPermissions:e,accessToken:n}=rn(),{toast:r}=eu(),[s,i]=p.useState(!1),[o,a]=p.useState({dueReminder:!0,missedSubmission:!0,workloadWarning:!1}),[l,u]=p.useState(!1),[h,f]=p.useState(!0);p.useEffect(()=>{async function x(){if(t)try{const v=dt(st,"users",t.uid,"settings","notifications"),b=await Ga(v);if(b.exists()){const E=b.data();i(E.enabled??!1),a(E.config||{dueReminder:!0,missedSubmission:!0,workloadWarning:!1})}}catch(v){console.error("Failed to load settings from Firestore",v)}finally{f(!1)}}x()},[t]),p.useEffect(()=>{async function x(){if(!(!t||h))try{const b=dt(st,"users",t.uid,"settings","notifications");await yn(b,{enabled:s,config:o,updatedAt:new Date().toISOString()},{merge:!0})}catch(b){console.error("Failed to save settings",b)}}const v=setTimeout(x,1e3);return()=>clearTimeout(v)},[s,o,t,h]);const m=async()=>{u(!0);try{if(await e()){if(i(!0),r({title:"Email alerts enabled",description:"Trace can now send you academic reminders."}),t!=null&&t.uid){const v={id:`email-${Date.now()}`,title:"Assignment due reminder email sent",body:"This is a test alert to confirm your notifications are working.",timestamp:new Date().toISOString(),type:"email"},b=`trace_email_events_${t.uid}`,E=JSON.parse(localStorage.getItem(b)||"[]");localStorage.setItem(b,JSON.stringify([...E,v]))}}else r({title:"Connection failed",description:"Could not connect to Gmail. Please try again.",variant:"destructive"})}catch(x){console.error(x),r({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{u(!1)}},y=x=>{a(v=>({...v,[x]:!v[x]}))};return c.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(ho,{href:"/settings",children:c.jsx(pe,{variant:"ghost",size:"icon",className:"rounded-full",children:c.jsx(mC,{className:"h-5 w-5"})})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),c.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage how Trace notifies you about academic activity"})]})]}),c.jsxs(vt,{className:"border-border/60 shadow-sm",children:[c.jsxs(Yt,{className:"pb-4",children:[c.jsxs(hn,{className:"flex items-center gap-2 text-lg",children:[c.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:c.jsx(Av,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Academic Email Alerts"]}),c.jsxs(Ar,{className:"max-w-lg mt-2 leading-relaxed",children:["Trace can send you helpful academic reminders directly to your connected Gmail account (",t==null?void 0:t.email,")."]})]}),c.jsx(ir,{}),c.jsxs(Ht,{className:"pt-6 space-y-6",children:[c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(io,{className:"text-base font-medium",children:"Assignment due reminder"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Get an email 24 hours before an assignment is due"})]}),c.jsx(Bn,{checked:o.dueReminder,onCheckedChange:()=>y("dueReminder"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),c.jsx(ir,{className:"opacity-50"}),c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(io,{className:"text-base font-medium",children:"Missed submission alert"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive a notification immediately when a deadline is missed"})]}),c.jsx(Bn,{checked:o.missedSubmission,onCheckedChange:()=>y("missedSubmission"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]}),c.jsx(ir,{className:"opacity-50"}),c.jsxs("div",{className:"flex items-start justify-between gap-4",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx(io,{className:"text-base font-medium",children:"Heavy workload warning"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Be notified when you have more than 3 assignments due in a week"})]}),c.jsx(Bn,{checked:o.workloadWarning,onCheckedChange:()=>y("workloadWarning"),disabled:!s,className:"data-[state=checked]:bg-blue-600"})]})]}),c.jsxs(RR,{className:"flex flex-col items-start gap-4 pt-2 pb-6 bg-muted/20 border-t",children:[s?c.jsxs("div",{className:"w-full space-y-4",children:[c.jsxs("div",{className:"flex gap-3 p-3 text-sm text-emerald-600 dark:text-emerald-500 bg-emerald-50 dark:bg-emerald-900/10 rounded border border-emerald-200 dark:border-emerald-800/30 items-center",children:[c.jsx(Oa,{className:"h-4 w-4 shrink-0"}),c.jsx("p",{children:"Academic alerts are active."})]}),c.jsx(pe,{variant:"outline",onClick:()=>i(!1),className:"text-muted-foreground hover:text-foreground",children:"Disable Alerts"})]}):c.jsxs("div",{className:"w-full space-y-4",children:[c.jsxs("div",{className:"flex gap-3 p-3 text-sm text-amber-600 dark:text-amber-500 bg-amber-50 dark:bg-amber-900/10 rounded border border-amber-200 dark:border-amber-800/30 items-start",children:[c.jsx(bC,{className:"h-4 w-4 shrink-0 mt-0.5"}),c.jsx("p",{children:"Alerts are currently disabled. You need to grant Trace permission to send emails on your behalf."})]}),c.jsxs(pe,{onClick:m,disabled:l,className:"w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white",children:[l&&c.jsx(kc,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect Gmail & Enable Alerts"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Emails are sent only after your consent and can be disabled anytime. We do not read your inbox."})]})]})]})}function NH(){const[t,e]=bv(),{user:n,requestCalendarPermissions:r}=rn(),{toast:s}=eu(),[i,o]=p.useState(!0),[a,l]=p.useState(!1),[u,h]=p.useState({enabled:!1,syncAssignments:!0,syncExams:!0,syncPersonal:!1});p.useEffect(()=>{if(!n)return;const x=ll(dt(st,"users",n.uid,"settings","calendar"),v=>{v.exists()&&h(v.data()),o(!1)});return()=>x()},[n]);const f=async()=>{l(!0);try{await r()?(await yn(dt(st,"users",n.uid,"settings","calendar"),{...u,enabled:!0,connectedAt:new Date},{merge:!0}),s({title:"Connected to Google Calendar",description:"Your deadlines will now sync automatically."})):s({title:"Connection Failed",description:"Could not authorize Google Calendar access.",variant:"destructive"})}catch(x){console.error(x),s({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{l(!1)}},m=async()=>{try{await yn(dt(st,"users",n.uid,"settings","calendar"),{enabled:!1},{merge:!0}),s({title:"Disconnected",description:"Calendar sync has been disabled."})}catch(x){console.error(x)}},y=async(x,v)=>{h(b=>({...b,[x]:v}));try{await yn(dt(st,"users",n.uid,"settings","calendar"),{[x]:v},{merge:!0})}catch(b){console.error(b)}};return i?c.jsx("div",{className:"flex items-center justify-center min-h-screen",children:c.jsx(kc,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-8 animate-in fade-in duration-500",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx(pe,{variant:"ghost",size:"icon",onClick:()=>e("/settings"),children:c.jsx(JM,{className:"h-5 w-5"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Integrations"}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage external tools and connections"})]})]}),c.jsxs("div",{className:"grid gap-6",children:[c.jsxs(vt,{className:`border-l-4 ${u.enabled?"border-l-blue-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[c.jsxs(Yt,{className:"flex flex-row items-start justify-between pb-2",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-10 w-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center text-blue-600 dark:text-blue-400",children:c.jsx(To,{className:"h-6 w-6"})}),c.jsx(hn,{className:"text-xl",children:"Google Calendar"}),u.enabled&&c.jsx(os,{variant:"secondary",className:"bg-blue-50 text-blue-700 hover:bg-blue-50 dark:bg-blue-950 dark:text-blue-300 border-blue-200 dark:border-blue-800",children:"Active"})]}),c.jsx(Ar,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Automatically sync Google Classroom deadlines and tasks from Trace to your Google Calendar."})]}),u.enabled?c.jsx(pe,{variant:"outline",size:"sm",onClick:m,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):c.jsx(pe,{onClick:f,disabled:a,className:"bg-blue-600 hover:bg-blue-700 text-white shadow-sm transition-all",children:a?c.jsx(kc,{className:"h-4 w-4 mr-2 animate-spin"}):"Connect Google Calendar"})]}),u.enabled&&c.jsxs(Ht,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[c.jsx(ir,{className:"mb-6"}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid gap-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Assignment Deadlines"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync due dates from Google Classroom"})]}),c.jsx(Bn,{checked:u.syncAssignments,onCheckedChange:x=>y("syncAssignments",x)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Exams & Major Assessments"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Highlight important dates"})]}),c.jsx(Bn,{checked:u.syncExams,onCheckedChange:x=>y("syncExams",x)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors opacity-80",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Personal Tasks"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Sync tasks created manually in Trace"})]}),c.jsx(Bn,{checked:u.syncPersonal,onCheckedChange:x=>y("syncPersonal",x)})]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground bg-muted/30 p-2 rounded w-fit",children:[c.jsx(Ef,{className:"h-3 w-3"}),c.jsxs("span",{children:["Last synced: ",u.lastSyncedAt?new Date(u.lastSyncedAt.seconds*1e3).toLocaleString():"Pending..."]})]})]})]})]}),c.jsx(AH,{})]})]})}function AH(){const{user:t,requestGmailPermissions:e}=rn(),{toast:n}=eu(),[r,s]=p.useState(!1),[i,o]=p.useState({enabled:!1,notifyOverdue:!0,notifyDueSoon:!0});p.useEffect(()=>{if(!t)return;const h=ll(dt(st,"users",t.uid,"settings","notifications"),f=>{f.exists()&&o(f.data())});return()=>h()},[t]);const a=async()=>{s(!0);try{await e()?(await yn(dt(st,"users",t.uid,"settings","notifications"),{...i,enabled:!0,connectedAt:new Date},{merge:!0}),n({title:"Connected to Gmail",description:"You will now receive email notifications for important updates."})):n({title:"Connection Failed",description:"Could not authorize Gmail access.",variant:"destructive"})}catch(h){console.error(h)}finally{s(!1)}},l=async()=>{try{await yn(dt(st,"users",t.uid,"settings","notifications"),{enabled:!1},{merge:!0}),n({title:"Disconnected",description:"Email notifications disabled."})}catch(h){console.error(h)}},u=async(h,f)=>{o(m=>({...m,[h]:f}));try{await yn(dt(st,"users",t.uid,"settings","notifications"),{[h]:f},{merge:!0})}catch(m){console.error(m)}};return c.jsxs(vt,{className:`border-l-4 ${i.enabled?"border-l-orange-500":"border-l-zinc-200 dark:border-l-zinc-800"}`,children:[c.jsxs(Yt,{className:"flex flex-row items-start justify-between pb-2",children:[c.jsxs("div",{className:"space-y-1.5",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-10 w-10 rounded-lg bg-orange-50 dark:bg-orange-950/30 flex items-center justify-center text-orange-600 dark:text-orange-400",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-mail h-6 w-6",children:[c.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),c.jsx("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]})}),c.jsx(hn,{className:"text-xl",children:"Email Notifications"}),i.enabled&&c.jsx(os,{variant:"secondary",className:"bg-orange-50 text-orange-700 hover:bg-orange-50 dark:bg-orange-950 dark:text-orange-300 border-orange-200 dark:border-orange-800",children:"Active"})]}),c.jsx(Ar,{className:"max-w-md text-base mt-2 leading-relaxed",children:"Get automated email summaries for upcoming deadlines and overdue assignments directly to your Gmail."})]}),i.enabled?c.jsx(pe,{variant:"outline",size:"sm",onClick:l,className:"text-muted-foreground hover:text-destructive",children:"Disconnect"}):c.jsx(pe,{onClick:a,disabled:r,className:"bg-orange-600 hover:bg-orange-700 text-white shadow-sm transition-all",children:r?c.jsx(kc,{className:"h-4 w-4 mr-2 animate-spin"}):"Enable Notifications"})]}),i.enabled&&c.jsxs(Ht,{className:"pt-6 animate-in slide-in-from-top-4 duration-300 fading-in",children:[c.jsx(ir,{className:"mb-6"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none",children:"Overdue Alerts"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Notify me when assignments follow behind"})]}),c.jsx(Bn,{checked:i.notifyOverdue,onCheckedChange:h=>u("notifyOverdue",h)})]}),c.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card/50 hover:bg-accent/5 transition-colors",children:[c.jsxs("div",{className:"space-y-0.5",children:[c.jsx("label",{className:"text-sm font-medium leading-none",children:"Daily Digest"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Send a summary of tasks due soon"})]}),c.jsx(Bn,{checked:i.notifyDueSoon,onCheckedChange:h=>u("notifyDueSoon",h)})]})]})]})]})}var m0="Progress",g0=100,[kH,nW]=qn(m0),[RH,PH]=kH(m0),JP=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=DH,...o}=t;(s||s===0)&&!Qb(s)&&console.error(jH(`${s}`,"Progress"));const a=Qb(s)?s:g0;r!==null&&!Xb(r,a)&&console.error(OH(`${r}`,"Progress"));const l=Xb(r,a)?r:null,u=Zh(l)?i(l,a):void 0;return c.jsx(RH,{scope:n,value:l,max:a,children:c.jsx(ye.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":Zh(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":t2(l,a),"data-value":l??void 0,"data-max":a,...o,ref:e})})});JP.displayName=m0;var ZP="ProgressIndicator",e2=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=PH(ZP,n);return c.jsx(ye.div,{"data-state":t2(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});e2.displayName=ZP;function DH(t,e){return`${Math.round(t/e*100)}%`}function t2(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Zh(t){return typeof t=="number"}function Qb(t){return Zh(t)&&!isNaN(t)&&t>0}function Xb(t,e){return Zh(t)&&!isNaN(t)&&t<=e&&t>=0}function jH(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${g0}\`.`}function OH(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${g0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var n2=JP,MH=e2;const r2=p.forwardRef(({className:t,value:e,...n},r)=>c.jsx(n2,{ref:r,className:Z("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:c.jsx(MH,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));r2.displayName=n2.displayName;function LH(){var C,I,A,P,j,R;const{user:t,signOut:e}=rn(),{courses:n,assignments:r,isLoading:s}=xs(),[i,o]=p.useState("class"),[a,l]=p.useState([]),[u,h]=p.useState(!1),[f,m]=p.useState(!0),[y,x]=p.useState(!1),[v,b]=p.useState(0),[E,w]=p.useState("Initializing...");p.useEffect(()=>{h(!0);const $=Array.from(new Set(["all-courses",...n.map(M=>M.id)])),re=[],z=new Map,W=()=>{const M=[],L=t!=null&&t.email?t.email.split("@")[1]:null,F=n.map(G=>G.id),B=new Set(r.map(G=>G.id));z.forEach(G=>{const X=G.email||"",J=G.emailDomain||(X.includes("@")?X.split("@")[1]:""),he=G.enrolledCourseIds||[],ie=G.processedAssignmentIds||[],Q=L&&J&&L===J,ee=F.some(Ae=>he.includes(Ae)),me=!J,ne=me&&ie.some(Ae=>B.has(Ae));let ue=!1;i==="college"?ue=Q||me&&(ee||ne):ue=Q&&ee||ne,ue&&M.push(G)}),M.sort((G,X)=>X.totalXP-G.totalXP),l(M),h(!1)};return $.forEach(M=>{const L=Ew(st,"leaderboards",M,"students"),F=Aw(L,kw("totalXP","desc"),UA(50)),B=ll(F,G=>{G.forEach(X=>{const J=X.data(),he={id:X.id,displayName:J.displayName||J.name||"Anonymous",photoUrl:J.photoUrl||J.avatar||"",totalXP:J.totalXP||J.xp||0,processedAssignmentIds:J.processedAssignmentIds||J.completedTasks||[],email:J.email||"",emailDomain:J.emailDomain||(J.email?J.email.split("@")[1]:""),enrolledCourseIds:J.enrolledCourseIds||J.subjects||[]},ie=z.get(X.id);(!ie||he.totalXP>=ie.totalXP)&&z.set(X.id,he)}),W()});re.push(B)}),()=>{re.forEach(M=>M())}},[i,t,n,r]);const S=async()=>{if(!t)return;x(!0),b(5),w("Fetching historical classroom data...");const $=r;b(20),w(`Scanning ${$.length} past assignments...`);let re=0;const z=[],W=L=>new Promise(F=>setTimeout(F,L));let M=0;for(const L of $)if(M++,M%5===0&&(b(20+M/$.length*60),await W(10)),L.userStatus==="submitted"||L.systemStatus==="submitted"||L.systemStatus==="graded"){if(re+=100,L.submittedAt&&L.dueDate){const B=new Date(L.submittedAt).getTime();(new Date(L.dueDate).getTime()-B)/(1e3*60*60)>48&&(re+=50)}z.push(L.id)}b(90),w("Syncing to leaderboard...");try{const L=dt(st,"leaderboards","all-courses","students",t.uid),F=t.email||"",B=F.includes("@")?F.split("@")[1]:"",G=n.map(X=>X.id);await yn(L,{displayName:t.displayName||"Anonymous",photoUrl:t.photoURL||"",email:F,emailDomain:B,enrolledCourseIds:G,totalXP:re,processedAssignmentIds:z,lastSyncedAt:ip()},{merge:!0}),b(100),w("Synchronization Complete!"),await W(500)}catch(L){console.error("Sync Failed",L),w("Sync Failed. Please try again.")}finally{x(!1)}},k=i==="class"?"My Class":"My College",D=a.find($=>$.id===(t==null?void 0:t.uid)),O=(D==null?void 0:D.totalXP)||0,T=!!D&&O>0;return!s&&n.length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-4rem)] gap-4 p-6",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx(Nn,{className:"h-12 w-12 mx-auto text-destructive"}),c.jsx("h2",{className:"text-lg font-medium text-destructive",children:"Troubleshooting"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"It seems data isn't fetching correctly. Please log out and log in again to resolve this."})]}),c.jsx(pe,{onClick:()=>e(),variant:"destructive",className:"px-4 py-2",children:"Log Out"})]}):c.jsxs("div",{className:"flex flex-col h-full bg-background text-foreground font-sans selection:bg-muted",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-4 sm:p-6 gap-4 sm:gap-0 border-b border-border bg-background/95 backdrop-blur-sm sticky top-0 z-10",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("h1",{className:"text-xl sm:text-2xl font-medium tracking-tight text-foreground",children:"Class Ranking"}),c.jsxs("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-widest truncate max-w-[200px] sm:max-w-none",children:[k," Leaderboard"]})]}),c.jsx("div",{className:"w-full sm:w-[200px]",children:c.jsxs(Yh,{value:i,onValueChange:$=>o($),children:[c.jsx(Hc,{className:"w-full bg-background border-border hover:bg-muted/50 text-foreground h-9 rounded-full px-4 text-xs font-medium focus:ring-ring",children:c.jsx(Jh,{placeholder:"Select View"})}),c.jsxs(Wc,{children:[c.jsx(gt,{value:"class",className:"font-semibold text-xs py-2",children:"My Class"}),c.jsx(gt,{value:"college",className:"font-semibold text-xs py-2",children:"This College"})]})]})})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:c.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[f&&c.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-primary/5 via-primary/5 to-transparent rounded-xl border border-primary/10 p-4 sm:p-5 flex flex-col sm:flex-row gap-3 sm:gap-5 text-sm animate-in fade-in slide-in-from-top-2 shadow-sm",children:[c.jsx("div",{className:"absolute top-0 right-0 p-2 sm:p-3",children:c.jsx(pe,{variant:"ghost",size:"icon",className:"h-6 w-6 sm:h-8 sm:w-8 text-muted-foreground/50 hover:text-foreground hover:bg-primary/10 rounded-full transition-colors",onClick:()=>m(!1),children:c.jsx(su,{className:"h-3 w-3 sm:h-4 sm:w-4"})})}),c.jsx("div",{className:"bg-background/60 backdrop-blur-md p-2.5 sm:p-3 rounded-2xl h-fit w-fit border border-primary/20 shadow-sm shrink-0 sm:mt-1 ring-4 ring-primary/5",children:c.jsx(r4,{className:"h-4 w-4 sm:h-5 sm:w-5 text-primary"})}),c.jsxs("div",{className:"space-y-3 pt-0.5 pr-4 sm:pr-10",children:[c.jsx("h4",{className:"font-bold text-foreground leading-none tracking-tight text-sm sm:text-base",children:"How to earn XP & Rank Up"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-12 gap-y-3 text-muted-foreground text-xs sm:text-sm",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-primary shrink-0 shadow-[0_0_8px_currentColor]"}),c.jsxs("span",{className:"leading-snug",children:["Complete assignments to earn"," ",c.jsx("br",{className:"hidden sm:block"}),c.jsx("span",{className:"font-bold text-foreground",children:"100 XP"})," ","instantly."]})]}),c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-amber-500 shrink-0 shadow-[0_0_8px_currentColor]"}),c.jsxs("span",{className:"leading-snug",children:["Submit"," ",c.jsx("span",{className:"font-medium text-foreground",children:"48h early"})," ","for a ",c.jsx("br",{className:"hidden sm:block"}),c.jsx("span",{className:"font-bold text-amber-600 dark:text-amber-400",children:"50 XP Speed Bonus"}),"."]})]})]})]})]}),!T&&!u||y?c.jsx("div",{className:"bg-muted/30 border border-border border-dashed rounded-xl p-6 sm:p-8 text-center animate-in fade-in slide-in-from-bottom-2",children:y?c.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs font-mono uppercase text-muted-foreground",children:[c.jsx("span",{children:E}),c.jsxs("span",{children:[Math.round(v),"%"]})]}),c.jsx(r2,{value:v,className:"h-2"})]}):c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx("div",{className:"h-12 w-12 bg-primary/10 rounded-full flex items-center justify-center",children:c.jsx(c4,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("h3",{className:"text-lg font-medium",children:"No Score Detected"}),c.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] sm:max-w-sm mx-auto",children:"Calculate your XP based on all your past submitted assignments to join the leaderboard."})]}),c.jsx(pe,{onClick:S,size:"lg",className:"mt-2 font-semibold w-full sm:w-auto",children:"Calculate My Archive Score"})]})}):null,u&&a.length===0?c.jsx("div",{className:"space-y-4",children:[1,2,3].map($=>c.jsx("div",{className:"h-16 w-full bg-muted/50 rounded-xl animate-pulse"},$))}):a.length===0&&!y?c.jsx("div",{className:"flex flex-col items-center justify-center py-10",children:c.jsx("p",{className:"text-muted-foreground text-sm",children:"Waiting for players..."})}):c.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[a.length>0&&c.jsxs("div",{className:Z("flex justify-center items-end gap-2 sm:gap-8 pb-4 px-0 sm:px-2 transition-all duration-500 ease-in-out",f?"pt-6 sm:pt-8":"pt-16 sm:pt-24"),children:[c.jsx("div",{className:"flex flex-col items-center gap-2 order-1 w-1/3 sm:w-32 max-w-[100px]",children:a[1]?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"relative",children:[c.jsxs(Ki,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-zinc-300 shadow-xl",children:[c.jsx(Qi,{src:a[1].photoUrl}),c.jsx(Xi,{className:"text-lg bg-zinc-100 text-zinc-500",children:(I=(C=a[1].displayName)==null?void 0:C[0])==null?void 0:I.toUpperCase()})]}),c.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-zinc-500 text-white text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"2"})]}),c.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[c.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:a[1].displayName}),c.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[a[1].totalXP.toLocaleString()," XP"]})]})]}):c.jsx("div",{className:"w-full"})}),c.jsxs("div",{className:"flex flex-col items-center gap-2 order-2 w-1/3 sm:w-40 max-w-[120px] -mt-6 sm:-mt-8 z-10",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"absolute -top-6 sm:-top-8 left-1/2 -translate-x-1/2 animate-bounce duration-[2000ms]",children:c.jsx(t4,{className:"fill-yellow-400 text-yellow-500 h-6 w-6 sm:h-8 sm:w-8 drop-shadow-sm"})}),c.jsxs(Ki,{className:"h-20 w-20 sm:h-28 sm:w-28 border-4 border-background ring-4 ring-yellow-400 shadow-2xl",children:[c.jsx(Qi,{src:a[0].photoUrl}),c.jsx(Xi,{className:"text-2xl bg-yellow-50 text-yellow-600",children:(P=(A=a[0].displayName)==null?void 0:A[0])==null?void 0:P.toUpperCase()})]}),c.jsx("div",{className:"absolute -bottom-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-950 text-xs sm:text-sm font-bold w-6 h-6 sm:w-8 sm:h-8 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"1"})]}),c.jsxs("div",{className:"text-center mt-2 sm:mt-3 space-y-0.5 w-full",children:[c.jsx("p",{className:"font-bold text-sm sm:text-base truncate w-full px-1",children:a[0].displayName}),c.jsxs("p",{className:"text-xs sm:text-sm text-primary font-black",children:[a[0].totalXP.toLocaleString()," XP"]})]})]}),c.jsx("div",{className:"flex flex-col items-center gap-2 order-3 w-1/3 sm:w-32 max-w-[100px]",children:a[2]?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"relative",children:[c.jsxs(Ki,{className:"h-14 w-14 sm:h-20 sm:w-20 border-4 border-background ring-2 ring-amber-700/50 shadow-xl",children:[c.jsx(Qi,{src:a[2].photoUrl}),c.jsx(Xi,{className:"text-lg bg-amber-50 text-amber-700",children:(R=(j=a[2].displayName)==null?void 0:j[0])==null?void 0:R.toUpperCase()})]}),c.jsx("div",{className:"absolute -bottom-2.5 left-1/2 -translate-x-1/2 bg-amber-700 text-amber-50 text-[10px] sm:text-xs font-bold w-5 h-5 sm:w-6 sm:h-6 flex items-center justify-center rounded-full border-2 border-background shadow-sm",children:"3"})]}),c.jsxs("div",{className:"text-center mt-1.5 sm:mt-2 space-y-0.5 w-full",children:[c.jsx("p",{className:"font-semibold text-xs sm:text-sm truncate w-full px-1",children:a[2].displayName}),c.jsxs("p",{className:"text-[10px] sm:text-xs text-primary font-bold",children:[a[2].totalXP.toLocaleString()," XP"]})]})]}):c.jsx("div",{className:"w-full"})})]}),c.jsx("div",{className:"flex flex-col space-y-2",children:a.slice(3).map(($,re)=>{var M,L;const z=$.id===(t==null?void 0:t.uid),W=re+4;return c.jsxs("div",{className:Z("flex items-center p-3 sm:p-4 rounded-xl border transition-all duration-200 group",z?"bg-primary/5 border-primary/20 shadow-sm":"bg-card border-border/40 hover:bg-muted/30 hover:border-border"),children:[c.jsx("div",{className:"w-8 sm:w-12 flex-shrink-0 flex items-center justify-center",children:c.jsxs("span",{className:"text-muted-foreground font-mono text-xs sm:text-sm font-medium",children:["#",W]})}),c.jsxs("div",{className:"flex items-center flex-1 gap-3 sm:gap-4 overflow-hidden",children:[c.jsxs(Ki,{className:Z("h-8 w-8 sm:h-10 sm:w-10 border flex-shrink-0",z?"border-primary/20":"border-border"),children:[c.jsx(Qi,{src:$.photoUrl}),c.jsx(Xi,{className:"text-[10px] sm:text-xs bg-muted text-muted-foreground",children:(L=(M=$.displayName)==null?void 0:M[0])==null?void 0:L.toUpperCase()})]}),c.jsxs("div",{className:"flex flex-col min-w-0",children:[c.jsxs("span",{className:Z("text-xs sm:text-sm font-medium truncate",z?"text-primary":"text-foreground"),children:[$.displayName," ",z&&c.jsx("span",{className:"text-muted-foreground text-[10px] sm:text-xs font-normal ml-1 sm:ml-2",children:"(You)"})]}),c.jsxs("span",{className:"text-[10px] sm:text-xs text-muted-foreground truncate",children:[$.processedAssignmentIds.length," ",c.jsx("span",{className:"hidden sm:inline",children:"missions"})]})]})]}),c.jsxs("div",{className:"text-right pl-2 sm:px-4 flex-shrink-0",children:[c.jsx("span",{className:"text-sm sm:text-lg font-mono font-medium text-foreground tracking-tight",children:$.totalXP.toLocaleString()}),c.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground ml-0.5 sm:ml-1",children:"XP"})]})]},$.id)})})]})]})})]})}function VH(){return c.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:c.jsx(vt,{className:"w-full max-w-md mx-4",children:c.jsxs(Ht,{className:"pt-6",children:[c.jsxs("div",{className:"flex mb-4 gap-2",children:[c.jsx(Nn,{className:"h-8 w-8 text-red-500"}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),c.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const FH=()=>"/";function UH(){const[t,e]=p.useState(!1),{isLoading:n}=xs(),r=FH();return n?c.jsx(s2,{message:"Setting up your workspace..."}):c.jsx(RT,{base:r,children:c.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[c.jsx(Q8,{mobileOpen:t,onMobileClose:()=>e(!1)}),c.jsxs("main",{className:"flex-1 flex flex-col min-w-0 overflow-hidden",children:[c.jsx(X8,{onMobileMenuClick:()=>e(!0)}),c.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden relative scroll-smooth",children:c.jsxs(EO,{children:[c.jsx(Wr,{path:"/",component:mB}),c.jsx(Wr,{path:"/leaderboard",component:LH}),c.jsx(Wr,{path:"/timeline",component:QB}),c.jsx(Wr,{path:"/dashboard",component:JB}),c.jsx(Wr,{path:"/notes",component:ZB}),c.jsx(Wr,{path:"/settings",component:CH}),c.jsx(Wr,{path:"/settings/notifications",component:IH}),c.jsx(Wr,{path:"/settings/integrations",component:NH}),c.jsx(Wr,{component:VH})]})})]})]})})}const Yb=["You can sync your deadlines directly to Google Calendar.","Check the Pipeline view to drag and drop assignments between statuses.","The Dashboard gives you a quick overview of your weekly workload.","Enable email notifications to get a daily digest of your tasks.","You can access your course PDF materials in the Notes section."];function s2({message:t="Loading..."}){const[e,n]=p.useState(13),[r,s]=p.useState(0);return p.useEffect(()=>{const i=setInterval(()=>{n(a=>{if(a===100)return 100;const l=Math.random()*10;return Math.min(a+l,90)})},500),o=setInterval(()=>{s(a=>(a+1)%Yb.length)},3e3);return()=>{clearInterval(i),clearInterval(o)}},[]),c.jsx("div",{className:"h-screen flex flex-col items-center justify-center bg-background p-4",children:c.jsxs("div",{className:"w-full max-w-md space-y-8 text-center animate-in fade-in duration-500",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("div",{className:"h-16 w-16 bg-primary/10 rounded-2xl flex items-center justify-center mx-auto mb-6",children:c.jsx("div",{className:"h-8 w-8 border-4 border-primary border-t-transparent rounded-full animate-spin"})}),c.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:t}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"h-2 w-full bg-secondary rounded-full overflow-hidden",children:c.jsx("div",{className:"h-full bg-primary transition-all duration-500 ease-out",style:{width:`${e}%`}})}),c.jsxs("p",{className:"text-xs text-muted-foreground font-mono uppercase tracking-widest text-right",children:[Math.round(e),"%"]})]})]}),c.jsxs("div",{className:"bg-muted/30 border border-muted p-6 rounded-xl relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-primary/50"}),c.jsxs("p",{className:"text-sm font-medium text-muted-foreground animate-in slide-in-from-bottom-2 fade-in duration-500 key={tipIndex}",children:[c.jsx("span",{className:"block text-xs font-black uppercase text-foreground/80 mb-2 tracking-wider",children:"Use Tip"}),'"',Yb[r],'"']})]})]})})}function zH(){const{user:t,loading:e}=rn();return e?c.jsx(s2,{message:"Authenticating..."}):t?c.jsx(Cz,{children:c.jsx(UH,{})}):c.jsx(a$,{})}function $H(){return c.jsx(GO,{client:XO,children:c.jsx(wz,{children:c.jsx(vz,{children:c.jsxs(fI,{children:[c.jsx(X4,{}),c.jsx(zH,{})]})})})})}xT(document.getElementById("root")).render(c.jsx($H,{}));
